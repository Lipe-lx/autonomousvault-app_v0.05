var zxe=Object.defineProperty;var O$=t=>{throw TypeError(t)};var Vxe=(t,e,n)=>e in t?zxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ne=(t,e,n)=>Vxe(t,typeof e!="symbol"?e+"":e,n),DI=(t,e,n)=>e.has(t)||O$("Cannot "+n);var re=(t,e,n)=>(DI(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?O$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,r)=>(DI(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),rt=(t,e,n)=>(DI(t,e,"access private method"),n);var xb=(t,e,n,r)=>({set _(i){me(t,e,i,n)},get _(){return re(t,e,r)}});function Hxe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var qD={},yN={};yN.byteLength=Kxe;yN.toByteArray=Yxe;yN.fromByteArray=Qxe;var Ac=[],$a=[],qxe=typeof Uint8Array<"u"?Uint8Array:Array,jI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var W0=0,Gxe=jI.length;W0<Gxe;++W0)Ac[W0]=jI[W0],$a[jI.charCodeAt(W0)]=W0;$a[45]=62;$a[95]=63;function Zee(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Kxe(t){var e=Zee(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Wxe(t,e,n){return(e+n)*3/4-n}function Yxe(t){var e,n=Zee(t),r=n[0],i=n[1],s=new qxe(Wxe(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=$a[t.charCodeAt(l)]<<18|$a[t.charCodeAt(l+1)]<<12|$a[t.charCodeAt(l+2)]<<6|$a[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=$a[t.charCodeAt(l)]<<2|$a[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=$a[t.charCodeAt(l)]<<10|$a[t.charCodeAt(l+1)]<<4|$a[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Jxe(t){return Ac[t>>18&63]+Ac[t>>12&63]+Ac[t>>6&63]+Ac[t&63]}function Xxe(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Jxe(r));return i.join("")}function Qxe(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(Xxe(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Ac[e>>2]+Ac[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Ac[e>>10]+Ac[e>>4&63]+Ac[e<<2&63]+"=")),i.join("")}var GD={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */GD.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,g=t[e+h];for(h+=m,s=g&(1<<-d)-1,g>>=-d,d+=a;d>0;s=s*256+t[e+h],h+=m,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)};GD.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,d=(1<<c)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,v=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=v,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=v,o/=256,c-=8);t[n+g-v]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=yN,n=GD,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=j,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ie=new s(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,s.prototype),Object.setPrototypeOf(ie,J),ie.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function c(ie){if(ie>i)throw new RangeError('The value "'+ie+'" is invalid for option "size"');const J=new s(ie);return Object.setPrototypeOf(J,d.prototype),J}function d(ie,J,Z){if(typeof ie=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ie)}return h(ie,J,Z)}d.poolSize=8192;function h(ie,J,Z){if(typeof ie=="string")return x(ie,J);if(o.isView(ie))return w(ie);if(ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(Ut(ie,o)||ie&&Ut(ie.buffer,o)||typeof a<"u"&&(Ut(ie,a)||ie&&Ut(ie.buffer,a)))return T(ie,J,Z);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ue=ie.valueOf&&ie.valueOf();if(ue!=null&&ue!==ie)return d.from(ue,J,Z);const Se=N(ie);if(Se)return Se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return d.from(ie[Symbol.toPrimitive]("string"),J,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}d.from=function(ie,J,Z){return h(ie,J,Z)},Object.setPrototypeOf(d.prototype,s.prototype),Object.setPrototypeOf(d,s);function m(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function g(ie,J,Z){return m(ie),ie<=0?c(ie):J!==void 0?typeof Z=="string"?c(ie).fill(J,Z):c(ie).fill(J):c(ie)}d.alloc=function(ie,J,Z){return g(ie,J,Z)};function v(ie){return m(ie),c(ie<0?0:O(ie)|0)}d.allocUnsafe=function(ie){return v(ie)},d.allocUnsafeSlow=function(ie){return v(ie)};function x(ie,J){if((typeof J!="string"||J==="")&&(J="utf8"),!d.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const Z=_(ie,J)|0;let ue=c(Z);const Se=ue.write(ie,J);return Se!==Z&&(ue=ue.slice(0,Se)),ue}function b(ie){const J=ie.length<0?0:O(ie.length)|0,Z=c(J);for(let ue=0;ue<J;ue+=1)Z[ue]=ie[ue]&255;return Z}function w(ie){if(Ut(ie,s)){const J=new s(ie);return T(J.buffer,J.byteOffset,J.byteLength)}return b(ie)}function T(ie,J,Z){if(J<0||ie.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<J+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let ue;return J===void 0&&Z===void 0?ue=new s(ie):Z===void 0?ue=new s(ie,J):ue=new s(ie,J,Z),Object.setPrototypeOf(ue,d.prototype),ue}function N(ie){if(d.isBuffer(ie)){const J=O(ie.length)|0,Z=c(J);return Z.length===0||ie.copy(Z,0,0,J),Z}if(ie.length!==void 0)return typeof ie.length!="number"||Ie(ie.length)?c(0):b(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return b(ie.data)}function O(ie){if(ie>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return ie|0}function j(ie){return+ie!=ie&&(ie=0),d.alloc(+ie)}d.isBuffer=function(J){return J!=null&&J._isBuffer===!0&&J!==d.prototype},d.compare=function(J,Z){if(Ut(J,s)&&(J=d.from(J,J.offset,J.byteLength)),Ut(Z,s)&&(Z=d.from(Z,Z.offset,Z.byteLength)),!d.isBuffer(J)||!d.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===Z)return 0;let ue=J.length,Se=Z.length;for(let de=0,ge=Math.min(ue,Se);de<ge;++de)if(J[de]!==Z[de]){ue=J[de],Se=Z[de];break}return ue<Se?-1:Se<ue?1:0},d.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(J,Z){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return d.alloc(0);let ue;if(Z===void 0)for(Z=0,ue=0;ue<J.length;++ue)Z+=J[ue].length;const Se=d.allocUnsafe(Z);let de=0;for(ue=0;ue<J.length;++ue){let ge=J[ue];if(Ut(ge,s))de+ge.length>Se.length?(d.isBuffer(ge)||(ge=d.from(ge)),ge.copy(Se,de)):s.prototype.set.call(Se,ge,de);else if(d.isBuffer(ge))ge.copy(Se,de);else throw new TypeError('"list" argument must be an Array of Buffers');de+=ge.length}return Se};function _(ie,J){if(d.isBuffer(ie))return ie.length;if(o.isView(ie)||Ut(ie,o))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);const Z=ie.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&Z===0)return 0;let Se=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return st(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return Le(ie).length;default:if(Se)return ue?-1:st(ie).length;J=(""+J).toLowerCase(),Se=!0}}d.byteLength=_;function F(ie,J,Z){let ue=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,J>>>=0,Z<=J))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return M(this,J,Z);case"utf8":case"utf-8":return q(this,J,Z);case"ascii":return Y(this,J,Z);case"latin1":case"binary":return V(this,J,Z);case"base64":return L(this,J,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,J,Z);default:if(ue)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),ue=!0}}d.prototype._isBuffer=!0;function z(ie,J,Z){const ue=ie[J];ie[J]=ie[Z],ie[Z]=ue}d.prototype.swap16=function(){const J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<J;Z+=2)z(this,Z,Z+1);return this},d.prototype.swap32=function(){const J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<J;Z+=4)z(this,Z,Z+3),z(this,Z+1,Z+2);return this},d.prototype.swap64=function(){const J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<J;Z+=8)z(this,Z,Z+7),z(this,Z+1,Z+6),z(this,Z+2,Z+5),z(this,Z+3,Z+4);return this},d.prototype.toString=function(){const J=this.length;return J===0?"":arguments.length===0?q(this,0,J):F.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(J){if(!d.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J?!0:d.compare(this,J)===0},d.prototype.inspect=function(){let J="";const Z=t.INSPECT_MAX_BYTES;return J=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(J+=" ... "),"<Buffer "+J+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(J,Z,ue,Se,de){if(Ut(J,s)&&(J=d.from(J,J.offset,J.byteLength)),!d.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(Z===void 0&&(Z=0),ue===void 0&&(ue=J?J.length:0),Se===void 0&&(Se=0),de===void 0&&(de=this.length),Z<0||ue>J.length||Se<0||de>this.length)throw new RangeError("out of range index");if(Se>=de&&Z>=ue)return 0;if(Se>=de)return-1;if(Z>=ue)return 1;if(Z>>>=0,ue>>>=0,Se>>>=0,de>>>=0,this===J)return 0;let ge=de-Se,Qe=ue-Z;const tt=Math.min(ge,Qe),lt=this.slice(Se,de),Vt=J.slice(Z,ue);for(let wt=0;wt<tt;++wt)if(lt[wt]!==Vt[wt]){ge=lt[wt],Qe=Vt[wt];break}return ge<Qe?-1:Qe<ge?1:0};function D(ie,J,Z,ue,Se){if(ie.length===0)return-1;if(typeof Z=="string"?(ue=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Ie(Z)&&(Z=Se?0:ie.length-1),Z<0&&(Z=ie.length+Z),Z>=ie.length){if(Se)return-1;Z=ie.length-1}else if(Z<0)if(Se)Z=0;else return-1;if(typeof J=="string"&&(J=d.from(J,ue)),d.isBuffer(J))return J.length===0?-1:$(ie,J,Z,ue,Se);if(typeof J=="number")return J=J&255,typeof s.prototype.indexOf=="function"?Se?s.prototype.indexOf.call(ie,J,Z):s.prototype.lastIndexOf.call(ie,J,Z):$(ie,[J],Z,ue,Se);throw new TypeError("val must be string, number or Buffer")}function $(ie,J,Z,ue,Se){let de=1,ge=ie.length,Qe=J.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(ie.length<2||J.length<2)return-1;de=2,ge/=2,Qe/=2,Z/=2}function tt(Vt,wt){return de===1?Vt[wt]:Vt.readUInt16BE(wt*de)}let lt;if(Se){let Vt=-1;for(lt=Z;lt<ge;lt++)if(tt(ie,lt)===tt(J,Vt===-1?0:lt-Vt)){if(Vt===-1&&(Vt=lt),lt-Vt+1===Qe)return Vt*de}else Vt!==-1&&(lt-=lt-Vt),Vt=-1}else for(Z+Qe>ge&&(Z=ge-Qe),lt=Z;lt>=0;lt--){let Vt=!0;for(let wt=0;wt<Qe;wt++)if(tt(ie,lt+wt)!==tt(J,wt)){Vt=!1;break}if(Vt)return lt}return-1}d.prototype.includes=function(J,Z,ue){return this.indexOf(J,Z,ue)!==-1},d.prototype.indexOf=function(J,Z,ue){return D(this,J,Z,ue,!0)},d.prototype.lastIndexOf=function(J,Z,ue){return D(this,J,Z,ue,!1)};function G(ie,J,Z,ue){Z=Number(Z)||0;const Se=ie.length-Z;ue?(ue=Number(ue),ue>Se&&(ue=Se)):ue=Se;const de=J.length;ue>de/2&&(ue=de/2);let ge;for(ge=0;ge<ue;++ge){const Qe=parseInt(J.substr(ge*2,2),16);if(Ie(Qe))return ge;ie[Z+ge]=Qe}return ge}function H(ie,J,Z,ue){return et(st(J,ie.length-Z),ie,Z,ue)}function U(ie,J,Z,ue){return et(ut(J),ie,Z,ue)}function A(ie,J,Z,ue){return et(Le(J),ie,Z,ue)}function I(ie,J,Z,ue){return et(Je(J,ie.length-Z),ie,Z,ue)}d.prototype.write=function(J,Z,ue,Se){if(Z===void 0)Se="utf8",ue=this.length,Z=0;else if(ue===void 0&&typeof Z=="string")Se=Z,ue=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(ue)?(ue=ue>>>0,Se===void 0&&(Se="utf8")):(Se=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const de=this.length-Z;if((ue===void 0||ue>de)&&(ue=de),J.length>0&&(ue<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");let ge=!1;for(;;)switch(Se){case"hex":return G(this,J,Z,ue);case"utf8":case"utf-8":return H(this,J,Z,ue);case"ascii":case"latin1":case"binary":return U(this,J,Z,ue);case"base64":return A(this,J,Z,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,J,Z,ue);default:if(ge)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),ge=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(ie,J,Z){return J===0&&Z===ie.length?e.fromByteArray(ie):e.fromByteArray(ie.slice(J,Z))}function q(ie,J,Z){Z=Math.min(ie.length,Z);const ue=[];let Se=J;for(;Se<Z;){const de=ie[Se];let ge=null,Qe=de>239?4:de>223?3:de>191?2:1;if(Se+Qe<=Z){let tt,lt,Vt,wt;switch(Qe){case 1:de<128&&(ge=de);break;case 2:tt=ie[Se+1],(tt&192)===128&&(wt=(de&31)<<6|tt&63,wt>127&&(ge=wt));break;case 3:tt=ie[Se+1],lt=ie[Se+2],(tt&192)===128&&(lt&192)===128&&(wt=(de&15)<<12|(tt&63)<<6|lt&63,wt>2047&&(wt<55296||wt>57343)&&(ge=wt));break;case 4:tt=ie[Se+1],lt=ie[Se+2],Vt=ie[Se+3],(tt&192)===128&&(lt&192)===128&&(Vt&192)===128&&(wt=(de&15)<<18|(tt&63)<<12|(lt&63)<<6|Vt&63,wt>65535&&wt<1114112&&(ge=wt))}}ge===null?(ge=65533,Qe=1):ge>65535&&(ge-=65536,ue.push(ge>>>10&1023|55296),ge=56320|ge&1023),ue.push(ge),Se+=Qe}return te(ue)}const K=4096;function te(ie){const J=ie.length;if(J<=K)return String.fromCharCode.apply(String,ie);let Z="",ue=0;for(;ue<J;)Z+=String.fromCharCode.apply(String,ie.slice(ue,ue+=K));return Z}function Y(ie,J,Z){let ue="";Z=Math.min(ie.length,Z);for(let Se=J;Se<Z;++Se)ue+=String.fromCharCode(ie[Se]&127);return ue}function V(ie,J,Z){let ue="";Z=Math.min(ie.length,Z);for(let Se=J;Se<Z;++Se)ue+=String.fromCharCode(ie[Se]);return ue}function M(ie,J,Z){const ue=ie.length;(!J||J<0)&&(J=0),(!Z||Z<0||Z>ue)&&(Z=ue);let Se="";for(let de=J;de<Z;++de)Se+=qe[ie[de]];return Se}function P(ie,J,Z){const ue=ie.slice(J,Z);let Se="";for(let de=0;de<ue.length-1;de+=2)Se+=String.fromCharCode(ue[de]+ue[de+1]*256);return Se}d.prototype.slice=function(J,Z){const ue=this.length;J=~~J,Z=Z===void 0?ue:~~Z,J<0?(J+=ue,J<0&&(J=0)):J>ue&&(J=ue),Z<0?(Z+=ue,Z<0&&(Z=0)):Z>ue&&(Z=ue),Z<J&&(Z=J);const Se=this.subarray(J,Z);return Object.setPrototypeOf(Se,d.prototype),Se};function W(ie,J,Z){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+J>Z)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||W(J,Z,this.length);let Se=this[J],de=1,ge=0;for(;++ge<Z&&(de*=256);)Se+=this[J+ge]*de;return Se},d.prototype.readUintBE=d.prototype.readUIntBE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||W(J,Z,this.length);let Se=this[J+--Z],de=1;for(;Z>0&&(de*=256);)Se+=this[J+--Z]*de;return Se},d.prototype.readUint8=d.prototype.readUInt8=function(J,Z){return J=J>>>0,Z||W(J,1,this.length),this[J]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(J,Z){return J=J>>>0,Z||W(J,2,this.length),this[J]|this[J+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(J,Z){return J=J>>>0,Z||W(J,2,this.length),this[J]<<8|this[J+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])},d.prototype.readBigUInt64LE=yt(function(J){J=J>>>0,_e(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&We(J,this.length-8);const Se=Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24,de=this[++J]+this[++J]*2**8+this[++J]*2**16+ue*2**24;return BigInt(Se)+(BigInt(de)<<BigInt(32))}),d.prototype.readBigUInt64BE=yt(function(J){J=J>>>0,_e(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&We(J,this.length-8);const Se=Z*2**24+this[++J]*2**16+this[++J]*2**8+this[++J],de=this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+ue;return(BigInt(Se)<<BigInt(32))+BigInt(de)}),d.prototype.readIntLE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||W(J,Z,this.length);let Se=this[J],de=1,ge=0;for(;++ge<Z&&(de*=256);)Se+=this[J+ge]*de;return de*=128,Se>=de&&(Se-=Math.pow(2,8*Z)),Se},d.prototype.readIntBE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||W(J,Z,this.length);let Se=Z,de=1,ge=this[J+--Se];for(;Se>0&&(de*=256);)ge+=this[J+--Se]*de;return de*=128,ge>=de&&(ge-=Math.pow(2,8*Z)),ge},d.prototype.readInt8=function(J,Z){return J=J>>>0,Z||W(J,1,this.length),this[J]&128?(255-this[J]+1)*-1:this[J]},d.prototype.readInt16LE=function(J,Z){J=J>>>0,Z||W(J,2,this.length);const ue=this[J]|this[J+1]<<8;return ue&32768?ue|4294901760:ue},d.prototype.readInt16BE=function(J,Z){J=J>>>0,Z||W(J,2,this.length);const ue=this[J+1]|this[J]<<8;return ue&32768?ue|4294901760:ue},d.prototype.readInt32LE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},d.prototype.readInt32BE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},d.prototype.readBigInt64LE=yt(function(J){J=J>>>0,_e(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&We(J,this.length-8);const Se=this[J+4]+this[J+5]*2**8+this[J+6]*2**16+(ue<<24);return(BigInt(Se)<<BigInt(32))+BigInt(Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24)}),d.prototype.readBigInt64BE=yt(function(J){J=J>>>0,_e(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&We(J,this.length-8);const Se=(Z<<24)+this[++J]*2**16+this[++J]*2**8+this[++J];return(BigInt(Se)<<BigInt(32))+BigInt(this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+ue)}),d.prototype.readFloatLE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),n.read(this,J,!0,23,4)},d.prototype.readFloatBE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),n.read(this,J,!1,23,4)},d.prototype.readDoubleLE=function(J,Z){return J=J>>>0,Z||W(J,8,this.length),n.read(this,J,!0,52,8)},d.prototype.readDoubleBE=function(J,Z){return J=J>>>0,Z||W(J,8,this.length),n.read(this,J,!1,52,8)};function X(ie,J,Z,ue,Se,de){if(!d.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>Se||J<de)throw new RangeError('"value" argument is out of bounds');if(Z+ue>ie.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,ue=ue>>>0,!Se){const Qe=Math.pow(2,8*ue)-1;X(this,J,Z,ue,Qe,0)}let de=1,ge=0;for(this[Z]=J&255;++ge<ue&&(de*=256);)this[Z+ge]=J/de&255;return Z+ue},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,ue=ue>>>0,!Se){const Qe=Math.pow(2,8*ue)-1;X(this,J,Z,ue,Qe,0)}let de=ue-1,ge=1;for(this[Z+de]=J&255;--de>=0&&(ge*=256);)this[Z+de]=J/ge&255;return Z+ue},d.prototype.writeUint8=d.prototype.writeUInt8=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,1,255,0),this[Z]=J&255,Z+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,65535,0),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,65535,0),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,4294967295,0),this[Z+3]=J>>>24,this[Z+2]=J>>>16,this[Z+1]=J>>>8,this[Z]=J&255,Z+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,4294967295,0),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4};function se(ie,J,Z,ue,Se){he(J,ue,Se,ie,Z,7);let de=Number(J&BigInt(4294967295));ie[Z++]=de,de=de>>8,ie[Z++]=de,de=de>>8,ie[Z++]=de,de=de>>8,ie[Z++]=de;let ge=Number(J>>BigInt(32)&BigInt(4294967295));return ie[Z++]=ge,ge=ge>>8,ie[Z++]=ge,ge=ge>>8,ie[Z++]=ge,ge=ge>>8,ie[Z++]=ge,Z}function ae(ie,J,Z,ue,Se){he(J,ue,Se,ie,Z,7);let de=Number(J&BigInt(4294967295));ie[Z+7]=de,de=de>>8,ie[Z+6]=de,de=de>>8,ie[Z+5]=de,de=de>>8,ie[Z+4]=de;let ge=Number(J>>BigInt(32)&BigInt(4294967295));return ie[Z+3]=ge,ge=ge>>8,ie[Z+2]=ge,ge=ge>>8,ie[Z+1]=ge,ge=ge>>8,ie[Z]=ge,Z+8}d.prototype.writeBigUInt64LE=yt(function(J,Z=0){return se(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=yt(function(J,Z=0){return ae(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,!Se){const tt=Math.pow(2,8*ue-1);X(this,J,Z,ue,tt-1,-tt)}let de=0,ge=1,Qe=0;for(this[Z]=J&255;++de<ue&&(ge*=256);)J<0&&Qe===0&&this[Z+de-1]!==0&&(Qe=1),this[Z+de]=(J/ge>>0)-Qe&255;return Z+ue},d.prototype.writeIntBE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,!Se){const tt=Math.pow(2,8*ue-1);X(this,J,Z,ue,tt-1,-tt)}let de=ue-1,ge=1,Qe=0;for(this[Z+de]=J&255;--de>=0&&(ge*=256);)J<0&&Qe===0&&this[Z+de+1]!==0&&(Qe=1),this[Z+de]=(J/ge>>0)-Qe&255;return Z+ue},d.prototype.writeInt8=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,1,127,-128),J<0&&(J=255+J+1),this[Z]=J&255,Z+1},d.prototype.writeInt16LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,32767,-32768),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},d.prototype.writeInt16BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,32767,-32768),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},d.prototype.writeInt32LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,2147483647,-2147483648),this[Z]=J&255,this[Z+1]=J>>>8,this[Z+2]=J>>>16,this[Z+3]=J>>>24,Z+4},d.prototype.writeInt32BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4},d.prototype.writeBigInt64LE=yt(function(J,Z=0){return se(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=yt(function(J,Z=0){return ae(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Te(ie,J,Z,ue,Se,de){if(Z+ue>ie.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function oe(ie,J,Z,ue,Se){return J=+J,Z=Z>>>0,Se||Te(ie,J,Z,4),n.write(ie,J,Z,ue,23,4),Z+4}d.prototype.writeFloatLE=function(J,Z,ue){return oe(this,J,Z,!0,ue)},d.prototype.writeFloatBE=function(J,Z,ue){return oe(this,J,Z,!1,ue)};function ve(ie,J,Z,ue,Se){return J=+J,Z=Z>>>0,Se||Te(ie,J,Z,8),n.write(ie,J,Z,ue,52,8),Z+8}d.prototype.writeDoubleLE=function(J,Z,ue){return ve(this,J,Z,!0,ue)},d.prototype.writeDoubleBE=function(J,Z,ue){return ve(this,J,Z,!1,ue)},d.prototype.copy=function(J,Z,ue,Se){if(!d.isBuffer(J))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Se&&Se!==0&&(Se=this.length),Z>=J.length&&(Z=J.length),Z||(Z=0),Se>0&&Se<ue&&(Se=ue),Se===ue||J.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),J.length-Z<Se-ue&&(Se=J.length-Z+ue);const de=Se-ue;return this===J&&typeof s.prototype.copyWithin=="function"?this.copyWithin(Z,ue,Se):s.prototype.set.call(J,this.subarray(ue,Se),Z),de},d.prototype.fill=function(J,Z,ue,Se){if(typeof J=="string"){if(typeof Z=="string"?(Se=Z,Z=0,ue=this.length):typeof ue=="string"&&(Se=ue,ue=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!d.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(J.length===1){const ge=J.charCodeAt(0);(Se==="utf8"&&ge<128||Se==="latin1")&&(J=ge)}}else typeof J=="number"?J=J&255:typeof J=="boolean"&&(J=Number(J));if(Z<0||this.length<Z||this.length<ue)throw new RangeError("Out of range index");if(ue<=Z)return this;Z=Z>>>0,ue=ue===void 0?this.length:ue>>>0,J||(J=0);let de;if(typeof J=="number")for(de=Z;de<ue;++de)this[de]=J;else{const ge=d.isBuffer(J)?J:d.from(J,Se),Qe=ge.length;if(Qe===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(de=0;de<ue-Z;++de)this[de+Z]=ge[de%Qe]}return this};const ke={};function pe(ie,J,Z){ke[ie]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ie}]`,this.stack,delete this.name}get code(){return ie}set code(Se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Se,writable:!0})}toString(){return`${this.name} [${ie}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(ie){return ie?`${ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(ie,J){return`The "${ie}" argument must be of type number. Received type ${typeof J}`},TypeError),pe("ERR_OUT_OF_RANGE",function(ie,J,Z){let ue=`The value of "${ie}" is out of range.`,Se=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?Se=ze(String(Z)):typeof Z=="bigint"&&(Se=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(Se=ze(Se)),Se+="n"),ue+=` It must be ${J}. Received ${Se}`,ue},RangeError);function ze(ie){let J="",Z=ie.length;const ue=ie[0]==="-"?1:0;for(;Z>=ue+4;Z-=3)J=`_${ie.slice(Z-3,Z)}${J}`;return`${ie.slice(0,Z)}${J}`}function Me(ie,J,Z){_e(J,"offset"),(ie[J]===void 0||ie[J+Z]===void 0)&&We(J,ie.length-(Z+1))}function he(ie,J,Z,ue,Se,de){if(ie>Z||ie<J){const ge=typeof J=="bigint"?"n":"";let Qe;throw J===0||J===BigInt(0)?Qe=`>= 0${ge} and < 2${ge} ** ${(de+1)*8}${ge}`:Qe=`>= -(2${ge} ** ${(de+1)*8-1}${ge}) and < 2 ** ${(de+1)*8-1}${ge}`,new ke.ERR_OUT_OF_RANGE("value",Qe,ie)}Me(ue,Se,de)}function _e(ie,J){if(typeof ie!="number")throw new ke.ERR_INVALID_ARG_TYPE(J,"number",ie)}function We(ie,J,Z){throw Math.floor(ie)!==ie?(_e(ie,Z),new ke.ERR_OUT_OF_RANGE("offset","an integer",ie)):J<0?new ke.ERR_BUFFER_OUT_OF_BOUNDS:new ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${J}`,ie)}const Ke=/[^+/0-9A-Za-z-_]/g;function it(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(Ke,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function st(ie,J){J=J||1/0;let Z;const ue=ie.length;let Se=null;const de=[];for(let ge=0;ge<ue;++ge){if(Z=ie.charCodeAt(ge),Z>55295&&Z<57344){if(!Se){if(Z>56319){(J-=3)>-1&&de.push(239,191,189);continue}else if(ge+1===ue){(J-=3)>-1&&de.push(239,191,189);continue}Se=Z;continue}if(Z<56320){(J-=3)>-1&&de.push(239,191,189),Se=Z;continue}Z=(Se-55296<<10|Z-56320)+65536}else Se&&(J-=3)>-1&&de.push(239,191,189);if(Se=null,Z<128){if((J-=1)<0)break;de.push(Z)}else if(Z<2048){if((J-=2)<0)break;de.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((J-=3)<0)break;de.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((J-=4)<0)break;de.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return de}function ut(ie){const J=[];for(let Z=0;Z<ie.length;++Z)J.push(ie.charCodeAt(Z)&255);return J}function Je(ie,J){let Z,ue,Se;const de=[];for(let ge=0;ge<ie.length&&!((J-=2)<0);++ge)Z=ie.charCodeAt(ge),ue=Z>>8,Se=Z%256,de.push(Se),de.push(ue);return de}function Le(ie){return e.toByteArray(it(ie))}function et(ie,J,Z,ue){let Se;for(Se=0;Se<ue&&!(Se+Z>=J.length||Se>=ie.length);++Se)J[Se+Z]=ie[Se];return Se}function Ut(ie,J){return ie instanceof J||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===J.name}function Ie(ie){return ie!==ie}const qe=(function(){const ie="0123456789abcdef",J=new Array(256);for(let Z=0;Z<16;++Z){const ue=Z*16;for(let Se=0;Se<16;++Se)J[ue+Se]=ie[Z]+ie[Se]}return J})();function yt(ie){return typeof BigInt>"u"?ht:ie}function ht(){throw new Error("BigInt not supported")}})(qD);const an=qD.Buffer,ln=qD.Buffer;window.Buffer=ln;function bs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ete(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var BI={exports:{}},vb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M$;function Zxe(){if(M$)return vb;M$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return vb.Fragment=e,vb.jsx=n,vb.jsxs=n,vb}var L$;function eve(){return L$||(L$=1,BI.exports=Zxe()),BI.exports}var u=eve();function tve(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tte={exports:{}},li=tte.exports={},dc,fc;function f4(){throw new Error("setTimeout has not been defined")}function h4(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?dc=setTimeout:dc=f4}catch{dc=f4}try{typeof clearTimeout=="function"?fc=clearTimeout:fc=h4}catch{fc=h4}})();function nte(t){if(dc===setTimeout)return setTimeout(t,0);if((dc===f4||!dc)&&setTimeout)return dc=setTimeout,setTimeout(t,0);try{return dc(t,0)}catch{try{return dc.call(null,t,0)}catch{return dc.call(this,t,0)}}}function nve(t){if(fc===clearTimeout)return clearTimeout(t);if((fc===h4||!fc)&&clearTimeout)return fc=clearTimeout,clearTimeout(t);try{return fc(t)}catch{try{return fc.call(null,t)}catch{return fc.call(this,t)}}}var td=[],ty=!1,Dp,xT=-1;function rve(){!ty||!Dp||(ty=!1,Dp.length?td=Dp.concat(td):xT=-1,td.length&&rte())}function rte(){if(!ty){var t=nte(rve);ty=!0;for(var e=td.length;e;){for(Dp=td,td=[];++xT<e;)Dp&&Dp[xT].run();xT=-1,e=td.length}Dp=null,ty=!1,nve(t)}}li.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];td.push(new ite(t,e)),td.length===1&&!ty&&nte(rte)};function ite(t,e){this.fun=t,this.array=e}ite.prototype.run=function(){this.fun.apply(null,this.array)};li.title="browser";li.browser=!0;li.env={};li.argv=[];li.version="";li.versions={};function Dd(){}li.on=Dd;li.addListener=Dd;li.once=Dd;li.off=Dd;li.removeListener=Dd;li.removeAllListeners=Dd;li.emit=Dd;li.prependListener=Dd;li.prependOnceListener=Dd;li.listeners=function(t){return[]};li.binding=function(t){throw new Error("process.binding is not supported")};li.cwd=function(){return"/"};li.chdir=function(t){throw new Error("process.chdir is not supported")};li.umask=function(){return 0};var ive=tte.exports;const Fl=tve(ive);window.global=window;window.process=Fl;window.Buffer=ln;console.log("Polyfills loaded");var UI={exports:{}},sn={},D$;function sve(){if(D$)return sn;D$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),m=Symbol.iterator;function g(V){return V===null||typeof V!="object"?null:(V=m&&V[m]||V["@@iterator"],typeof V=="function"?V:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function w(V,M,P){this.props=V,this.context=M,this.refs=b,this.updater=P||v}w.prototype.isReactComponent={},w.prototype.setState=function(V,M){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,M,"setState")},w.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function T(){}T.prototype=w.prototype;function N(V,M,P){this.props=V,this.context=M,this.refs=b,this.updater=P||v}var O=N.prototype=new T;O.constructor=N,x(O,w.prototype),O.isPureReactComponent=!0;var j=Array.isArray;function _(){}var F={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function D(V,M,P){var W=P.ref;return{$$typeof:t,type:V,key:M,ref:W!==void 0?W:null,props:P}}function $(V,M){return D(V.type,M,V.props)}function G(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function H(V){var M={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(P){return M[P]})}var U=/\/+/g;function A(V,M){return typeof V=="object"&&V!==null&&V.key!=null?H(""+V.key):M.toString(36)}function I(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(_,_):(V.status="pending",V.then(function(M){V.status==="pending"&&(V.status="fulfilled",V.value=M)},function(M){V.status==="pending"&&(V.status="rejected",V.reason=M)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function L(V,M,P,W,X){var se=typeof V;(se==="undefined"||se==="boolean")&&(V=null);var ae=!1;if(V===null)ae=!0;else switch(se){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(V.$$typeof){case t:case e:ae=!0;break;case d:return ae=V._init,L(ae(V._payload),M,P,W,X)}}if(ae)return X=X(V),ae=W===""?"."+A(V,0):W,j(X)?(P="",ae!=null&&(P=ae.replace(U,"$&/")+"/"),L(X,M,P,"",function(ve){return ve})):X!=null&&(G(X)&&(X=$(X,P+(X.key==null||V&&V.key===X.key?"":(""+X.key).replace(U,"$&/")+"/")+ae)),M.push(X)),1;ae=0;var Te=W===""?".":W+":";if(j(V))for(var oe=0;oe<V.length;oe++)W=V[oe],se=Te+A(W,oe),ae+=L(W,M,P,se,X);else if(oe=g(V),typeof oe=="function")for(V=oe.call(V),oe=0;!(W=V.next()).done;)W=W.value,se=Te+A(W,oe++),ae+=L(W,M,P,se,X);else if(se==="object"){if(typeof V.then=="function")return L(I(V),M,P,W,X);throw M=String(V),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return ae}function q(V,M,P){if(V==null)return V;var W=[],X=0;return L(V,W,"","",function(se){return M.call(P,se,X++)}),W}function K(V){if(V._status===-1){var M=V._result;M=M(),M.then(function(P){(V._status===0||V._status===-1)&&(V._status=1,V._result=P)},function(P){(V._status===0||V._status===-1)&&(V._status=2,V._result=P)}),V._status===-1&&(V._status=0,V._result=M)}if(V._status===1)return V._result.default;throw V._result}var te=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(M))return}else if(typeof Fl=="object"&&typeof Fl.emit=="function"){Fl.emit("uncaughtException",V);return}console.error(V)},Y={map:q,forEach:function(V,M,P){q(V,function(){M.apply(this,arguments)},P)},count:function(V){var M=0;return q(V,function(){M++}),M},toArray:function(V){return q(V,function(M){return M})||[]},only:function(V){if(!G(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return sn.Activity=h,sn.Children=Y,sn.Component=w,sn.Fragment=n,sn.Profiler=i,sn.PureComponent=N,sn.StrictMode=r,sn.Suspense=l,sn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,sn.__COMPILER_RUNTIME={__proto__:null,c:function(V){return F.H.useMemoCache(V)}},sn.cache=function(V){return function(){return V.apply(null,arguments)}},sn.cacheSignal=function(){return null},sn.cloneElement=function(V,M,P){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var W=x({},V.props),X=V.key;if(M!=null)for(se in M.key!==void 0&&(X=""+M.key),M)!z.call(M,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&M.ref===void 0||(W[se]=M[se]);var se=arguments.length-2;if(se===1)W.children=P;else if(1<se){for(var ae=Array(se),Te=0;Te<se;Te++)ae[Te]=arguments[Te+2];W.children=ae}return D(V.type,X,W)},sn.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:s,_context:V},V},sn.createElement=function(V,M,P){var W,X={},se=null;if(M!=null)for(W in M.key!==void 0&&(se=""+M.key),M)z.call(M,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(X[W]=M[W]);var ae=arguments.length-2;if(ae===1)X.children=P;else if(1<ae){for(var Te=Array(ae),oe=0;oe<ae;oe++)Te[oe]=arguments[oe+2];X.children=Te}if(V&&V.defaultProps)for(W in ae=V.defaultProps,ae)X[W]===void 0&&(X[W]=ae[W]);return D(V,se,X)},sn.createRef=function(){return{current:null}},sn.forwardRef=function(V){return{$$typeof:a,render:V}},sn.isValidElement=G,sn.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:K}},sn.memo=function(V,M){return{$$typeof:c,type:V,compare:M===void 0?null:M}},sn.startTransition=function(V){var M=F.T,P={};F.T=P;try{var W=V(),X=F.S;X!==null&&X(P,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(_,te)}catch(se){te(se)}finally{M!==null&&P.types!==null&&(M.types=P.types),F.T=M}},sn.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},sn.use=function(V){return F.H.use(V)},sn.useActionState=function(V,M,P){return F.H.useActionState(V,M,P)},sn.useCallback=function(V,M){return F.H.useCallback(V,M)},sn.useContext=function(V){return F.H.useContext(V)},sn.useDebugValue=function(){},sn.useDeferredValue=function(V,M){return F.H.useDeferredValue(V,M)},sn.useEffect=function(V,M){return F.H.useEffect(V,M)},sn.useEffectEvent=function(V){return F.H.useEffectEvent(V)},sn.useId=function(){return F.H.useId()},sn.useImperativeHandle=function(V,M,P){return F.H.useImperativeHandle(V,M,P)},sn.useInsertionEffect=function(V,M){return F.H.useInsertionEffect(V,M)},sn.useLayoutEffect=function(V,M){return F.H.useLayoutEffect(V,M)},sn.useMemo=function(V,M){return F.H.useMemo(V,M)},sn.useOptimistic=function(V,M){return F.H.useOptimistic(V,M)},sn.useReducer=function(V,M,P){return F.H.useReducer(V,M,P)},sn.useRef=function(V){return F.H.useRef(V)},sn.useState=function(V){return F.H.useState(V)},sn.useSyncExternalStore=function(V,M,P){return F.H.useSyncExternalStore(V,M,P)},sn.useTransition=function(){return F.H.useTransition()},sn.version="19.2.3",sn}var j$;function Gx(){return j$||(j$=1,UI.exports=sve()),UI.exports}var S=Gx();const Ls=bs(S),xN=Hxe({__proto__:null,default:Ls},[S]);var FI={exports:{}},bb={},$I={exports:{}},zI={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B$;function ove(){return B$||(B$=1,(function(t){function e(L,q){var K=L.length;L.push(q);e:for(;0<K;){var te=K-1>>>1,Y=L[te];if(0<i(Y,q))L[te]=q,L[K]=Y,K=te;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var q=L[0],K=L.pop();if(K!==q){L[0]=K;e:for(var te=0,Y=L.length,V=Y>>>1;te<V;){var M=2*(te+1)-1,P=L[M],W=M+1,X=L[W];if(0>i(P,K))W<Y&&0>i(X,P)?(L[te]=X,L[W]=K,te=W):(L[te]=P,L[M]=K,te=M);else if(W<Y&&0>i(X,K))L[te]=X,L[W]=K,te=W;else break e}}return q}function i(L,q){var K=L.sortIndex-q.sortIndex;return K!==0?K:L.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,g=!1,v=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(L){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=L)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function j(L){if(x=!1,O(L),!v)if(n(l)!==null)v=!0,_||(_=!0,H());else{var q=n(c);q!==null&&I(j,q.startTime-L)}}var _=!1,F=-1,z=5,D=-1;function $(){return b?!0:!(t.unstable_now()-D<z)}function G(){if(b=!1,_){var L=t.unstable_now();D=L;var q=!0;try{e:{v=!1,x&&(x=!1,T(F),F=-1),g=!0;var K=m;try{t:{for(O(L),h=n(l);h!==null&&!(h.expirationTime>L&&$());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var Y=te(h.expirationTime<=L);if(L=t.unstable_now(),typeof Y=="function"){h.callback=Y,O(L),q=!0;break t}h===n(l)&&r(l),O(L)}else r(l);h=n(l)}if(h!==null)q=!0;else{var V=n(c);V!==null&&I(j,V.startTime-L),q=!1}}break e}finally{h=null,m=K,g=!1}q=void 0}}finally{q?H():_=!1}}}var H;if(typeof N=="function")H=function(){N(G)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,A=U.port2;U.port1.onmessage=G,H=function(){A.postMessage(null)}}else H=function(){w(G,0)};function I(L,q){F=w(function(){L(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var K=m;m=q;try{return L()}finally{m=K}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=m;m=L;try{return q()}finally{m=K}},t.unstable_scheduleCallback=function(L,q,K){var te=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,L){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=K+Y,L={id:d++,callback:q,priorityLevel:L,startTime:K,expirationTime:Y,sortIndex:-1},K>te?(L.sortIndex=K,e(c,L),n(l)===null&&L===n(c)&&(x?(T(F),F=-1):x=!0,I(j,K-te))):(L.sortIndex=Y,e(l,L),v||g||(v=!0,_||(_=!0,H()))),L},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(L){var q=m;return function(){var K=m;m=q;try{return L.apply(this,arguments)}finally{m=K}}}})(zI)),zI}var U$;function ave(){return U$||(U$=1,$I.exports=ove()),$I.exports}var VI={exports:{}},Es={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F$;function lve(){if(F$)return Es;F$=1;var t=Gx();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Es.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,d)},Es.flushSync=function(l){var c=o.T,d=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=d,r.d.f()}},Es.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Es.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Es.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=a(d,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Es.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Es.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=a(d,c.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Es.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Es.requestFormReset=function(l){r.d.r(l)},Es.unstable_batchedUpdates=function(l,c){return l(c)},Es.useFormState=function(l,c,d){return o.H.useFormState(l,c,d)},Es.useFormStatus=function(){return o.H.useHostTransitionStatus()},Es.version="19.2.3",Es}var $$;function ste(){if($$)return VI.exports;$$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),VI.exports=lve(),VI.exports}var z$;function cve(){if(z$)return bb;z$=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=ave(),e=Gx(),n=ste();function r(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var p=f,y=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(y=p.return),f=p.return;while(f)}return p.tag===3?y:null}function o(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function a(f){if(f.tag===31){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function l(f){if(s(f)!==f)throw Error(r(188))}function c(f){var p=f.alternate;if(!p){if(p=s(f),p===null)throw Error(r(188));return p!==f?null:f}for(var y=f,E=p;;){var R=y.return;if(R===null)break;var B=R.alternate;if(B===null){if(E=R.return,E!==null){y=E;continue}break}if(R.child===B.child){for(B=R.child;B;){if(B===y)return l(R),f;if(B===E)return l(R),p;B=B.sibling}throw Error(r(188))}if(y.return!==E.return)y=R,E=B;else{for(var ne=!1,ce=R.child;ce;){if(ce===y){ne=!0,y=R,E=B;break}if(ce===E){ne=!0,E=R,y=B;break}ce=ce.sibling}if(!ne){for(ce=B.child;ce;){if(ce===y){ne=!0,y=B,E=R;break}if(ce===E){ne=!0,E=B,y=R;break}ce=ce.sibling}if(!ne)throw Error(r(189))}}if(y.alternate!==E)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?f:p}function d(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=d(f),p!==null)return p;f=f.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function H(f){return f===null||typeof f!="object"?null:(f=G&&f[G]||f["@@iterator"],typeof f=="function"?f:null)}var U=Symbol.for("react.client.reference");function A(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===U?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case x:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case j:return"Suspense";case _:return"SuspenseList";case D:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case v:return"Portal";case N:return f.displayName||"Context";case T:return(f._context.displayName||"Context")+".Consumer";case O:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case F:return p=f.displayName||null,p!==null?p:A(f.type)||"Memo";case z:p=f._payload,f=f._init;try{return A(f(p))}catch{}}return null}var I=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},te=[],Y=-1;function V(f){return{current:f}}function M(f){0>Y||(f.current=te[Y],te[Y]=null,Y--)}function P(f,p){Y++,te[Y]=f.current,f.current=p}var W=V(null),X=V(null),se=V(null),ae=V(null);function Te(f,p){switch(P(se,p),P(X,f),P(W,null),p.nodeType){case 9:case 11:f=(f=p.documentElement)&&(f=f.namespaceURI)?n$(f):0;break;default:if(f=p.tagName,p=p.namespaceURI)p=n$(p),f=r$(p,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}M(W),P(W,f)}function oe(){M(W),M(X),M(se)}function ve(f){f.memoizedState!==null&&P(ae,f);var p=W.current,y=r$(p,f.type);p!==y&&(P(X,f),P(W,y))}function ke(f){X.current===f&&(M(W),M(X)),ae.current===f&&(M(ae),pb._currentValue=K)}var pe,ze;function Me(f){if(pe===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);pe=p&&p[1]||"",ze=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+f+ze}var he=!1;function _e(f,p){if(!f||he)return"";he=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Ge){var $e=Ge}Reflect.construct(f,[],nt)}else{try{nt.call()}catch(Ge){$e=Ge}f.call(nt.prototype)}}else{try{throw Error()}catch(Ge){$e=Ge}(nt=f())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Ge){if(Ge&&$e&&typeof Ge.stack=="string")return[Ge.stack,$e.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=E.DetermineComponentFrameRoot(),ne=B[0],ce=B[1];if(ne&&ce){var Ee=ne.split(`
`),Ue=ce.split(`
`);for(R=E=0;E<Ee.length&&!Ee[E].includes("DetermineComponentFrameRoot");)E++;for(;R<Ue.length&&!Ue[R].includes("DetermineComponentFrameRoot");)R++;if(E===Ee.length||R===Ue.length)for(E=Ee.length-1,R=Ue.length-1;1<=E&&0<=R&&Ee[E]!==Ue[R];)R--;for(;1<=E&&0<=R;E--,R--)if(Ee[E]!==Ue[R]){if(E!==1||R!==1)do if(E--,R--,0>R||Ee[E]!==Ue[R]){var Ye=`
`+Ee[E].replace(" at new "," at ");return f.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",f.displayName)),Ye}while(1<=E&&0<=R);break}}}finally{he=!1,Error.prepareStackTrace=y}return(y=f?f.displayName||f.name:"")?Me(y):""}function We(f,p){switch(f.tag){case 26:case 27:case 5:return Me(f.type);case 16:return Me("Lazy");case 13:return f.child!==p&&p!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return _e(f.type,!1);case 11:return _e(f.type.render,!1);case 1:return _e(f.type,!0);case 31:return Me("Activity");default:return""}}function Ke(f){try{var p="",y=null;do p+=We(f,y),y=f,f=f.return;while(f);return p}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var it=Object.prototype.hasOwnProperty,st=t.unstable_scheduleCallback,ut=t.unstable_cancelCallback,Je=t.unstable_shouldYield,Le=t.unstable_requestPaint,et=t.unstable_now,Ut=t.unstable_getCurrentPriorityLevel,Ie=t.unstable_ImmediatePriority,qe=t.unstable_UserBlockingPriority,yt=t.unstable_NormalPriority,ht=t.unstable_LowPriority,ie=t.unstable_IdlePriority,J=t.log,Z=t.unstable_setDisableYieldValue,ue=null,Se=null;function de(f){if(typeof J=="function"&&Z(f),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(ue,f)}catch{}}var ge=Math.clz32?Math.clz32:lt,Qe=Math.log,tt=Math.LN2;function lt(f){return f>>>=0,f===0?32:31-(Qe(f)/tt|0)|0}var Vt=256,wt=262144,Ot=4194304;function fn(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function tn(f,p,y){var E=f.pendingLanes;if(E===0)return 0;var R=0,B=f.suspendedLanes,ne=f.pingedLanes;f=f.warmLanes;var ce=E&134217727;return ce!==0?(E=ce&~B,E!==0?R=fn(E):(ne&=ce,ne!==0?R=fn(ne):y||(y=ce&~f,y!==0&&(R=fn(y))))):(ce=E&~B,ce!==0?R=fn(ce):ne!==0?R=fn(ne):y||(y=E&~f,y!==0&&(R=fn(y)))),R===0?0:p!==0&&p!==R&&(p&B)===0&&(B=R&-R,y=p&-p,B>=y||B===32&&(y&4194048)!==0)?p:R}function rn(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function Oi(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vn(){var f=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),f}function le(f){for(var p=[],y=0;31>y;y++)p.push(f);return p}function Q(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function ee(f,p,y,E,R,B){var ne=f.pendingLanes;f.pendingLanes=y,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=y,f.entangledLanes&=y,f.errorRecoveryDisabledLanes&=y,f.shellSuspendCounter=0;var ce=f.entanglements,Ee=f.expirationTimes,Ue=f.hiddenUpdates;for(y=ne&~y;0<y;){var Ye=31-ge(y),nt=1<<Ye;ce[Ye]=0,Ee[Ye]=-1;var $e=Ue[Ye];if($e!==null)for(Ue[Ye]=null,Ye=0;Ye<$e.length;Ye++){var Ge=$e[Ye];Ge!==null&&(Ge.lane&=-536870913)}y&=~nt}E!==0&&fe(f,E,0),B!==0&&R===0&&f.tag!==0&&(f.suspendedLanes|=B&~(ne&~p))}function fe(f,p,y){f.pendingLanes|=p,f.suspendedLanes&=~p;var E=31-ge(p);f.entangledLanes|=p,f.entanglements[E]=f.entanglements[E]|1073741824|y&261930}function Pe(f,p){var y=f.entangledLanes|=p;for(f=f.entanglements;y;){var E=31-ge(y),R=1<<E;R&p|f[E]&p&&(f[E]|=p),y&=~R}}function Oe(f,p){var y=p&-p;return y=(y&42)!==0?1:He(y),(y&(f.suspendedLanes|p))!==0?0:y}function He(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function Qt(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function qt(){var f=q.p;return f!==0?f:(f=window.event,f===void 0?32:k$(f.type))}function ct(f,p){var y=q.p;try{return q.p=f,p()}finally{q.p=y}}var gn=Math.random().toString(36).slice(2),At="__reactFiber$"+gn,bn="__reactProps$"+gn,dl="__reactContainer$"+gn,ar="__reactEvents$"+gn,Tr="__reactListeners$"+gn,Kh="__reactHandles$"+gn,iu="__reactResources$"+gn,Do="__reactMarker$"+gn;function fl(f){delete f[At],delete f[bn],delete f[ar],delete f[Tr],delete f[Kh]}function jo(f){var p=f[At];if(p)return p;for(var y=f.parentNode;y;){if(p=y[dl]||y[At]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(f=u$(f);f!==null;){if(y=f[At])return y;f=u$(f)}return p}f=y,y=f.parentNode}return null}function Bo(f){if(f=f[At]||f[dl]){var p=f.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return f}return null}function ga(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f.stateNode;throw Error(r(33))}function Uo(f){var p=f[iu];return p||(p=f[iu]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function vr(f){f[Do]=!0}var su=new Set,ou={};function mo(f,p){Zn(f,p),Zn(f+"Capture",p)}function Zn(f,p){for(ou[f]=p,f=0;f<p.length;f++)su.add(p[f])}var ws=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ks={},Qd={};function _v(f){return it.call(Qd,f)?!0:it.call(Ks,f)?!1:ws.test(f)?Qd[f]=!0:(Ks[f]=!0,!1)}function Zd(f,p,y){if(_v(p))if(y===null)f.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":f.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){f.removeAttribute(p);return}}f.setAttribute(p,""+y)}}function ef(f,p,y){if(y===null)f.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(p);return}f.setAttribute(p,""+y)}}function au(f,p,y,E){if(E===null)f.removeAttribute(y);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(y);return}f.setAttributeNS(p,y,""+E)}}function ya(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function W7(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Lge(f,p,y){var E=Object.getOwnPropertyDescriptor(f.constructor.prototype,p);if(!f.hasOwnProperty(p)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var R=E.get,B=E.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return R.call(this)},set:function(ne){y=""+ne,B.call(this,ne)}}),Object.defineProperty(f,p,{enumerable:E.enumerable}),{getValue:function(){return y},setValue:function(ne){y=""+ne},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function PP(f){if(!f._valueTracker){var p=W7(f)?"checked":"value";f._valueTracker=Lge(f,p,""+f[p])}}function Y7(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var y=p.getValue(),E="";return f&&(E=W7(f)?f.checked?"true":"false":f.value),f=E,f!==y?(p.setValue(f),!0):!1}function zE(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var Dge=/[\n"\\]/g;function xa(f){return f.replace(Dge,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function _P(f,p,y,E,R,B,ne,ce){f.name="",ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?f.type=ne:f.removeAttribute("type"),p!=null?ne==="number"?(p===0&&f.value===""||f.value!=p)&&(f.value=""+ya(p)):f.value!==""+ya(p)&&(f.value=""+ya(p)):ne!=="submit"&&ne!=="reset"||f.removeAttribute("value"),p!=null?IP(f,ne,ya(p)):y!=null?IP(f,ne,ya(y)):E!=null&&f.removeAttribute("value"),R==null&&B!=null&&(f.defaultChecked=!!B),R!=null&&(f.checked=R&&typeof R!="function"&&typeof R!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?f.name=""+ya(ce):f.removeAttribute("name")}function J7(f,p,y,E,R,B,ne,ce){if(B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(f.type=B),p!=null||y!=null){if(!(B!=="submit"&&B!=="reset"||p!=null)){PP(f);return}y=y!=null?""+ya(y):"",p=p!=null?""+ya(p):y,ce||p===f.value||(f.value=p),f.defaultValue=p}E=E??R,E=typeof E!="function"&&typeof E!="symbol"&&!!E,f.checked=ce?f.checked:!!E,f.defaultChecked=!!E,ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(f.name=ne),PP(f)}function IP(f,p,y){p==="number"&&zE(f.ownerDocument)===f||f.defaultValue===""+y||(f.defaultValue=""+y)}function m0(f,p,y,E){if(f=f.options,p){p={};for(var R=0;R<y.length;R++)p["$"+y[R]]=!0;for(y=0;y<f.length;y++)R=p.hasOwnProperty("$"+f[y].value),f[y].selected!==R&&(f[y].selected=R),R&&E&&(f[y].defaultSelected=!0)}else{for(y=""+ya(y),p=null,R=0;R<f.length;R++){if(f[R].value===y){f[R].selected=!0,E&&(f[R].defaultSelected=!0);return}p!==null||f[R].disabled||(p=f[R])}p!==null&&(p.selected=!0)}}function X7(f,p,y){if(p!=null&&(p=""+ya(p),p!==f.value&&(f.value=p),y==null)){f.defaultValue!==p&&(f.defaultValue=p);return}f.defaultValue=y!=null?""+ya(y):""}function Q7(f,p,y,E){if(p==null){if(E!=null){if(y!=null)throw Error(r(92));if(I(E)){if(1<E.length)throw Error(r(93));E=E[0]}y=E}y==null&&(y=""),p=y}y=ya(p),f.defaultValue=y,E=f.textContent,E===y&&E!==""&&E!==null&&(f.value=E),PP(f)}function g0(f,p){if(p){var y=f.firstChild;if(y&&y===f.lastChild&&y.nodeType===3){y.nodeValue=p;return}}f.textContent=p}var jge=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Z7(f,p,y){var E=p.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?E?f.setProperty(p,""):p==="float"?f.cssFloat="":f[p]="":E?f.setProperty(p,y):typeof y!="number"||y===0||jge.has(p)?p==="float"?f.cssFloat=y:f[p]=(""+y).trim():f[p]=y+"px"}function eU(f,p,y){if(p!=null&&typeof p!="object")throw Error(r(62));if(f=f.style,y!=null){for(var E in y)!y.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?f.setProperty(E,""):E==="float"?f.cssFloat="":f[E]="");for(var R in p)E=p[R],p.hasOwnProperty(R)&&y[R]!==E&&Z7(f,R,E)}else for(var B in p)p.hasOwnProperty(B)&&Z7(f,B,p[B])}function RP(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bge=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uge=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function VE(f){return Uge.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}function lu(){}var OP=null;function MP(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var y0=null,x0=null;function tU(f){var p=Bo(f);if(p&&(f=p.stateNode)){var y=f[bn]||null;e:switch(f=p.stateNode,p.type){case"input":if(_P(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),p=y.name,y.type==="radio"&&p!=null){for(y=f;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+xa(""+p)+'"][type="radio"]'),p=0;p<y.length;p++){var E=y[p];if(E!==f&&E.form===f.form){var R=E[bn]||null;if(!R)throw Error(r(90));_P(E,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(p=0;p<y.length;p++)E=y[p],E.form===f.form&&Y7(E)}break e;case"textarea":X7(f,y.value,y.defaultValue);break e;case"select":p=y.value,p!=null&&m0(f,!!y.multiple,p,!1)}}}var LP=!1;function nU(f,p,y){if(LP)return f(p,y);LP=!0;try{var E=f(p);return E}finally{if(LP=!1,(y0!==null||x0!==null)&&(_S(),y0&&(p=y0,f=x0,x0=y0=null,tU(p),f)))for(p=0;p<f.length;p++)tU(f[p])}}function Iv(f,p){var y=f.stateNode;if(y===null)return null;var E=y[bn]||null;if(E===null)return null;y=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(y&&typeof y!="function")throw Error(r(231,p,typeof y));return y}var cu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),DP=!1;if(cu)try{var Rv={};Object.defineProperty(Rv,"passive",{get:function(){DP=!0}}),window.addEventListener("test",Rv,Rv),window.removeEventListener("test",Rv,Rv)}catch{DP=!1}var tf=null,jP=null,HE=null;function rU(){if(HE)return HE;var f,p=jP,y=p.length,E,R="value"in tf?tf.value:tf.textContent,B=R.length;for(f=0;f<y&&p[f]===R[f];f++);var ne=y-f;for(E=1;E<=ne&&p[y-E]===R[B-E];E++);return HE=R.slice(f,1<E?1-E:void 0)}function qE(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function GE(){return!0}function iU(){return!1}function go(f){function p(y,E,R,B,ne){this._reactName=y,this._targetInst=R,this.type=E,this.nativeEvent=B,this.target=ne,this.currentTarget=null;for(var ce in f)f.hasOwnProperty(ce)&&(y=f[ce],this[ce]=y?y(B):B[ce]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?GE:iU,this.isPropagationStopped=iU,this}return h(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=GE)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=GE)},persist:function(){},isPersistent:GE}),p}var Wh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},KE=go(Wh),Ov=h({},Wh,{view:0,detail:0}),Fge=go(Ov),BP,UP,Mv,WE=h({},Ov,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$P,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Mv&&(Mv&&f.type==="mousemove"?(BP=f.screenX-Mv.screenX,UP=f.screenY-Mv.screenY):UP=BP=0,Mv=f),BP)},movementY:function(f){return"movementY"in f?f.movementY:UP}}),sU=go(WE),$ge=h({},WE,{dataTransfer:0}),zge=go($ge),Vge=h({},Ov,{relatedTarget:0}),FP=go(Vge),Hge=h({},Wh,{animationName:0,elapsedTime:0,pseudoElement:0}),qge=go(Hge),Gge=h({},Wh,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),Kge=go(Gge),Wge=h({},Wh,{data:0}),oU=go(Wge),Yge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qge(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=Xge[f])?!!p[f]:!1}function $P(){return Qge}var Zge=h({},Ov,{key:function(f){if(f.key){var p=Yge[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=qE(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Jge[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$P,charCode:function(f){return f.type==="keypress"?qE(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?qE(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),eye=go(Zge),tye=h({},WE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aU=go(tye),nye=h({},Ov,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$P}),rye=go(nye),iye=h({},Wh,{propertyName:0,elapsedTime:0,pseudoElement:0}),sye=go(iye),oye=h({},WE,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),aye=go(oye),lye=h({},Wh,{newState:0,oldState:0}),cye=go(lye),uye=[9,13,27,32],zP=cu&&"CompositionEvent"in window,Lv=null;cu&&"documentMode"in document&&(Lv=document.documentMode);var dye=cu&&"TextEvent"in window&&!Lv,lU=cu&&(!zP||Lv&&8<Lv&&11>=Lv),cU=" ",uU=!1;function dU(f,p){switch(f){case"keyup":return uye.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fU(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var v0=!1;function fye(f,p){switch(f){case"compositionend":return fU(p);case"keypress":return p.which!==32?null:(uU=!0,cU);case"textInput":return f=p.data,f===cU&&uU?null:f;default:return null}}function hye(f,p){if(v0)return f==="compositionend"||!zP&&dU(f,p)?(f=rU(),HE=jP=tf=null,v0=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return lU&&p.locale!=="ko"?null:p.data;default:return null}}var pye={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hU(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!pye[f.type]:p==="textarea"}function pU(f,p,y,E){y0?x0?x0.push(E):x0=[E]:y0=E,p=jS(p,"onChange"),0<p.length&&(y=new KE("onChange","change",null,y,E),f.push({event:y,listeners:p}))}var Dv=null,jv=null;function mye(f){J9(f,0)}function YE(f){var p=ga(f);if(Y7(p))return f}function mU(f,p){if(f==="change")return p}var gU=!1;if(cu){var VP;if(cu){var HP="oninput"in document;if(!HP){var yU=document.createElement("div");yU.setAttribute("oninput","return;"),HP=typeof yU.oninput=="function"}VP=HP}else VP=!1;gU=VP&&(!document.documentMode||9<document.documentMode)}function xU(){Dv&&(Dv.detachEvent("onpropertychange",vU),jv=Dv=null)}function vU(f){if(f.propertyName==="value"&&YE(jv)){var p=[];pU(p,jv,f,MP(f)),nU(mye,p)}}function gye(f,p,y){f==="focusin"?(xU(),Dv=p,jv=y,Dv.attachEvent("onpropertychange",vU)):f==="focusout"&&xU()}function yye(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return YE(jv)}function xye(f,p){if(f==="click")return YE(p)}function vye(f,p){if(f==="input"||f==="change")return YE(p)}function bye(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Fo=typeof Object.is=="function"?Object.is:bye;function Bv(f,p){if(Fo(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var y=Object.keys(f),E=Object.keys(p);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var R=y[E];if(!it.call(p,R)||!Fo(f[R],p[R]))return!1}return!0}function bU(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function wU(f,p){var y=bU(f);f=0;for(var E;y;){if(y.nodeType===3){if(E=f+y.textContent.length,f<=p&&E>=p)return{node:y,offset:p-f};f=E}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=bU(y)}}function EU(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?EU(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function SU(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var p=zE(f.document);p instanceof f.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)f=p.contentWindow;else break;p=zE(f.document)}return p}function qP(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}var wye=cu&&"documentMode"in document&&11>=document.documentMode,b0=null,GP=null,Uv=null,KP=!1;function AU(f,p,y){var E=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;KP||b0==null||b0!==zE(E)||(E=b0,"selectionStart"in E&&qP(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Uv&&Bv(Uv,E)||(Uv=E,E=jS(GP,"onSelect"),0<E.length&&(p=new KE("onSelect","select",null,p,y),f.push({event:p,listeners:E}),p.target=b0)))}function Yh(f,p){var y={};return y[f.toLowerCase()]=p.toLowerCase(),y["Webkit"+f]="webkit"+p,y["Moz"+f]="moz"+p,y}var w0={animationend:Yh("Animation","AnimationEnd"),animationiteration:Yh("Animation","AnimationIteration"),animationstart:Yh("Animation","AnimationStart"),transitionrun:Yh("Transition","TransitionRun"),transitionstart:Yh("Transition","TransitionStart"),transitioncancel:Yh("Transition","TransitionCancel"),transitionend:Yh("Transition","TransitionEnd")},WP={},TU={};cu&&(TU=document.createElement("div").style,"AnimationEvent"in window||(delete w0.animationend.animation,delete w0.animationiteration.animation,delete w0.animationstart.animation),"TransitionEvent"in window||delete w0.transitionend.transition);function Jh(f){if(WP[f])return WP[f];if(!w0[f])return f;var p=w0[f],y;for(y in p)if(p.hasOwnProperty(y)&&y in TU)return WP[f]=p[y];return f}var kU=Jh("animationend"),NU=Jh("animationiteration"),CU=Jh("animationstart"),Eye=Jh("transitionrun"),Sye=Jh("transitionstart"),Aye=Jh("transitioncancel"),PU=Jh("transitionend"),_U=new Map,YP="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");YP.push("scrollEnd");function hl(f,p){_U.set(f,p),mo(p,[f])}var JE=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof Fl=="object"&&typeof Fl.emit=="function"){Fl.emit("uncaughtException",f);return}console.error(f)},va=[],E0=0,JP=0;function XE(){for(var f=E0,p=JP=E0=0;p<f;){var y=va[p];va[p++]=null;var E=va[p];va[p++]=null;var R=va[p];va[p++]=null;var B=va[p];if(va[p++]=null,E!==null&&R!==null){var ne=E.pending;ne===null?R.next=R:(R.next=ne.next,ne.next=R),E.pending=R}B!==0&&IU(y,R,B)}}function QE(f,p,y,E){va[E0++]=f,va[E0++]=p,va[E0++]=y,va[E0++]=E,JP|=E,f.lanes|=E,f=f.alternate,f!==null&&(f.lanes|=E)}function XP(f,p,y,E){return QE(f,p,y,E),ZE(f)}function Xh(f,p){return QE(f,null,null,p),ZE(f)}function IU(f,p,y){f.lanes|=y;var E=f.alternate;E!==null&&(E.lanes|=y);for(var R=!1,B=f.return;B!==null;)B.childLanes|=y,E=B.alternate,E!==null&&(E.childLanes|=y),B.tag===22&&(f=B.stateNode,f===null||f._visibility&1||(R=!0)),f=B,B=B.return;return f.tag===3?(B=f.stateNode,R&&p!==null&&(R=31-ge(y),f=B.hiddenUpdates,E=f[R],E===null?f[R]=[p]:E.push(p),p.lane=y|536870912),B):null}function ZE(f){if(50<ab)throw ab=0,oI=null,Error(r(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}var S0={};function Tye(f,p,y,E){this.tag=f,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $o(f,p,y,E){return new Tye(f,p,y,E)}function QP(f){return f=f.prototype,!(!f||!f.isReactComponent)}function uu(f,p){var y=f.alternate;return y===null?(y=$o(f.tag,p,f.key,f.mode),y.elementType=f.elementType,y.type=f.type,y.stateNode=f.stateNode,y.alternate=f,f.alternate=y):(y.pendingProps=p,y.type=f.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=f.flags&65011712,y.childLanes=f.childLanes,y.lanes=f.lanes,y.child=f.child,y.memoizedProps=f.memoizedProps,y.memoizedState=f.memoizedState,y.updateQueue=f.updateQueue,p=f.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=f.sibling,y.index=f.index,y.ref=f.ref,y.refCleanup=f.refCleanup,y}function RU(f,p){f.flags&=65011714;var y=f.alternate;return y===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,p=y.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function eS(f,p,y,E,R,B){var ne=0;if(E=f,typeof f=="function")QP(f)&&(ne=1);else if(typeof f=="string")ne=_xe(f,y,W.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case D:return f=$o(31,y,p,R),f.elementType=D,f.lanes=B,f;case x:return Qh(y.children,R,B,p);case b:ne=8,R|=24;break;case w:return f=$o(12,y,p,R|2),f.elementType=w,f.lanes=B,f;case j:return f=$o(13,y,p,R),f.elementType=j,f.lanes=B,f;case _:return f=$o(19,y,p,R),f.elementType=_,f.lanes=B,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case N:ne=10;break e;case T:ne=9;break e;case O:ne=11;break e;case F:ne=14;break e;case z:ne=16,E=null;break e}ne=29,y=Error(r(130,f===null?"null":typeof f,"")),E=null}return p=$o(ne,y,p,R),p.elementType=f,p.type=E,p.lanes=B,p}function Qh(f,p,y,E){return f=$o(7,f,E,p),f.lanes=y,f}function ZP(f,p,y){return f=$o(6,f,null,p),f.lanes=y,f}function OU(f){var p=$o(18,null,null,0);return p.stateNode=f,p}function e_(f,p,y){return p=$o(4,f.children!==null?f.children:[],f.key,p),p.lanes=y,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}var MU=new WeakMap;function ba(f,p){if(typeof f=="object"&&f!==null){var y=MU.get(f);return y!==void 0?y:(p={value:f,source:p,stack:Ke(p)},MU.set(f,p),p)}return{value:f,source:p,stack:Ke(p)}}var A0=[],T0=0,tS=null,Fv=0,wa=[],Ea=0,nf=null,nc=1,rc="";function du(f,p){A0[T0++]=Fv,A0[T0++]=tS,tS=f,Fv=p}function LU(f,p,y){wa[Ea++]=nc,wa[Ea++]=rc,wa[Ea++]=nf,nf=f;var E=nc;f=rc;var R=32-ge(E)-1;E&=~(1<<R),y+=1;var B=32-ge(p)+R;if(30<B){var ne=R-R%5;B=(E&(1<<ne)-1).toString(32),E>>=ne,R-=ne,nc=1<<32-ge(p)+R|y<<R|E,rc=B+f}else nc=1<<B|y<<R|E,rc=f}function t_(f){f.return!==null&&(du(f,1),LU(f,1,0))}function n_(f){for(;f===tS;)tS=A0[--T0],A0[T0]=null,Fv=A0[--T0],A0[T0]=null;for(;f===nf;)nf=wa[--Ea],wa[Ea]=null,rc=wa[--Ea],wa[Ea]=null,nc=wa[--Ea],wa[Ea]=null}function DU(f,p){wa[Ea++]=nc,wa[Ea++]=rc,wa[Ea++]=nf,nc=p.id,rc=p.overflow,nf=f}var Qi=null,br=null,Cn=!1,rf=null,Sa=!1,r_=Error(r(519));function sf(f){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $v(ba(p,f)),r_}function jU(f){var p=f.stateNode,y=f.type,E=f.memoizedProps;switch(p[At]=f,p[bn]=E,y){case"dialog":En("cancel",p),En("close",p);break;case"iframe":case"object":case"embed":En("load",p);break;case"video":case"audio":for(y=0;y<cb.length;y++)En(cb[y],p);break;case"source":En("error",p);break;case"img":case"image":case"link":En("error",p),En("load",p);break;case"details":En("toggle",p);break;case"input":En("invalid",p),J7(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":En("invalid",p);break;case"textarea":En("invalid",p),Q7(p,E.value,E.defaultValue,E.children)}y=E.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||p.textContent===""+y||E.suppressHydrationWarning===!0||e$(p.textContent,y)?(E.popover!=null&&(En("beforetoggle",p),En("toggle",p)),E.onScroll!=null&&En("scroll",p),E.onScrollEnd!=null&&En("scrollend",p),E.onClick!=null&&(p.onclick=lu),p=!0):p=!1,p||sf(f,!0)}function BU(f){for(Qi=f.return;Qi;)switch(Qi.tag){case 5:case 31:case 13:Sa=!1;return;case 27:case 3:Sa=!0;return;default:Qi=Qi.return}}function k0(f){if(f!==Qi)return!1;if(!Cn)return BU(f),Cn=!0,!1;var p=f.tag,y;if((y=p!==3&&p!==27)&&((y=p===5)&&(y=f.type,y=!(y!=="form"&&y!=="button")||wI(f.type,f.memoizedProps)),y=!y),y&&br&&sf(f),BU(f),p===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));br=c$(f)}else if(p===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));br=c$(f)}else p===27?(p=br,vf(f.type)?(f=kI,kI=null,br=f):br=p):br=Qi?Ta(f.stateNode.nextSibling):null;return!0}function Zh(){br=Qi=null,Cn=!1}function i_(){var f=rf;return f!==null&&(bo===null?bo=f:bo.push.apply(bo,f),rf=null),f}function $v(f){rf===null?rf=[f]:rf.push(f)}var s_=V(null),ep=null,fu=null;function of(f,p,y){P(s_,p._currentValue),p._currentValue=y}function hu(f){f._currentValue=s_.current,M(s_)}function o_(f,p,y){for(;f!==null;){var E=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),f===y)break;f=f.return}}function a_(f,p,y,E){var R=f.child;for(R!==null&&(R.return=f);R!==null;){var B=R.dependencies;if(B!==null){var ne=R.child;B=B.firstContext;e:for(;B!==null;){var ce=B;B=R;for(var Ee=0;Ee<p.length;Ee++)if(ce.context===p[Ee]){B.lanes|=y,ce=B.alternate,ce!==null&&(ce.lanes|=y),o_(B.return,y,f),E||(ne=null);break e}B=ce.next}}else if(R.tag===18){if(ne=R.return,ne===null)throw Error(r(341));ne.lanes|=y,B=ne.alternate,B!==null&&(B.lanes|=y),o_(ne,y,f),ne=null}else ne=R.child;if(ne!==null)ne.return=R;else for(ne=R;ne!==null;){if(ne===f){ne=null;break}if(R=ne.sibling,R!==null){R.return=ne.return,ne=R;break}ne=ne.return}R=ne}}function N0(f,p,y,E){f=null;for(var R=p,B=!1;R!==null;){if(!B){if((R.flags&524288)!==0)B=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var ne=R.alternate;if(ne===null)throw Error(r(387));if(ne=ne.memoizedProps,ne!==null){var ce=R.type;Fo(R.pendingProps.value,ne.value)||(f!==null?f.push(ce):f=[ce])}}else if(R===ae.current){if(ne=R.alternate,ne===null)throw Error(r(387));ne.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(f!==null?f.push(pb):f=[pb])}R=R.return}f!==null&&a_(p,f,y,E),p.flags|=262144}function nS(f){for(f=f.firstContext;f!==null;){if(!Fo(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function tp(f){ep=f,fu=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Zi(f){return UU(ep,f)}function rS(f,p){return ep===null&&tp(f),UU(f,p)}function UU(f,p){var y=p._currentValue;if(p={context:p,memoizedValue:y,next:null},fu===null){if(f===null)throw Error(r(308));fu=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else fu=fu.next=p;return y}var kye=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(y,E){f.push(E)}};this.abort=function(){p.aborted=!0,f.forEach(function(y){return y()})}},Nye=t.unstable_scheduleCallback,Cye=t.unstable_NormalPriority,ci={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function l_(){return{controller:new kye,data:new Map,refCount:0}}function zv(f){f.refCount--,f.refCount===0&&Nye(Cye,function(){f.controller.abort()})}var Vv=null,c_=0,C0=0,P0=null;function Pye(f,p){if(Vv===null){var y=Vv=[];c_=0,C0=fI(),P0={status:"pending",value:void 0,then:function(E){y.push(E)}}}return c_++,p.then(FU,FU),p}function FU(){if(--c_===0&&Vv!==null){P0!==null&&(P0.status="fulfilled");var f=Vv;Vv=null,C0=0,P0=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function _ye(f,p){var y=[],E={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return f.then(function(){E.status="fulfilled",E.value=p;for(var R=0;R<y.length;R++)(0,y[R])(p)},function(R){for(E.status="rejected",E.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),E}var $U=L.S;L.S=function(f,p){A9=et(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&Pye(f,p),$U!==null&&$U(f,p)};var np=V(null);function u_(){var f=np.current;return f!==null?f:lr.pooledCache}function iS(f,p){p===null?P(np,np.current):P(np,p.pool)}function zU(){var f=u_();return f===null?null:{parent:ci._currentValue,pool:f}}var _0=Error(r(460)),d_=Error(r(474)),sS=Error(r(542)),oS={then:function(){}};function VU(f){return f=f.status,f==="fulfilled"||f==="rejected"}function HU(f,p,y){switch(y=f[y],y===void 0?f.push(p):y!==p&&(p.then(lu,lu),p=y),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,GU(f),f;default:if(typeof p.status=="string")p.then(lu,lu);else{if(f=lr,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=p,f.status="pending",f.then(function(E){if(p.status==="pending"){var R=p;R.status="fulfilled",R.value=E}},function(E){if(p.status==="pending"){var R=p;R.status="rejected",R.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,GU(f),f}throw ip=p,_0}}function rp(f){try{var p=f._init;return p(f._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(ip=y,_0):y}}var ip=null;function qU(){if(ip===null)throw Error(r(459));var f=ip;return ip=null,f}function GU(f){if(f===_0||f===sS)throw Error(r(483))}var I0=null,Hv=0;function aS(f){var p=Hv;return Hv+=1,I0===null&&(I0=[]),HU(I0,f,p)}function qv(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function lS(f,p){throw p.$$typeof===m?Error(r(525)):(f=Object.prototype.toString.call(p),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function KU(f){function p(Re,Ce){if(f){var Be=Re.deletions;Be===null?(Re.deletions=[Ce],Re.flags|=16):Be.push(Ce)}}function y(Re,Ce){if(!f)return null;for(;Ce!==null;)p(Re,Ce),Ce=Ce.sibling;return null}function E(Re){for(var Ce=new Map;Re!==null;)Re.key!==null?Ce.set(Re.key,Re):Ce.set(Re.index,Re),Re=Re.sibling;return Ce}function R(Re,Ce){return Re=uu(Re,Ce),Re.index=0,Re.sibling=null,Re}function B(Re,Ce,Be){return Re.index=Be,f?(Be=Re.alternate,Be!==null?(Be=Be.index,Be<Ce?(Re.flags|=67108866,Ce):Be):(Re.flags|=67108866,Ce)):(Re.flags|=1048576,Ce)}function ne(Re){return f&&Re.alternate===null&&(Re.flags|=67108866),Re}function ce(Re,Ce,Be,Ze){return Ce===null||Ce.tag!==6?(Ce=ZP(Be,Re.mode,Ze),Ce.return=Re,Ce):(Ce=R(Ce,Be),Ce.return=Re,Ce)}function Ee(Re,Ce,Be,Ze){var Ht=Be.type;return Ht===x?Ye(Re,Ce,Be.props.children,Ze,Be.key):Ce!==null&&(Ce.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===z&&rp(Ht)===Ce.type)?(Ce=R(Ce,Be.props),qv(Ce,Be),Ce.return=Re,Ce):(Ce=eS(Be.type,Be.key,Be.props,null,Re.mode,Ze),qv(Ce,Be),Ce.return=Re,Ce)}function Ue(Re,Ce,Be,Ze){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Be.containerInfo||Ce.stateNode.implementation!==Be.implementation?(Ce=e_(Be,Re.mode,Ze),Ce.return=Re,Ce):(Ce=R(Ce,Be.children||[]),Ce.return=Re,Ce)}function Ye(Re,Ce,Be,Ze,Ht){return Ce===null||Ce.tag!==7?(Ce=Qh(Be,Re.mode,Ze,Ht),Ce.return=Re,Ce):(Ce=R(Ce,Be),Ce.return=Re,Ce)}function nt(Re,Ce,Be){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=ZP(""+Ce,Re.mode,Be),Ce.return=Re,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case g:return Be=eS(Ce.type,Ce.key,Ce.props,null,Re.mode,Be),qv(Be,Ce),Be.return=Re,Be;case v:return Ce=e_(Ce,Re.mode,Be),Ce.return=Re,Ce;case z:return Ce=rp(Ce),nt(Re,Ce,Be)}if(I(Ce)||H(Ce))return Ce=Qh(Ce,Re.mode,Be,null),Ce.return=Re,Ce;if(typeof Ce.then=="function")return nt(Re,aS(Ce),Be);if(Ce.$$typeof===N)return nt(Re,rS(Re,Ce),Be);lS(Re,Ce)}return null}function $e(Re,Ce,Be,Ze){var Ht=Ce!==null?Ce.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Ht!==null?null:ce(Re,Ce,""+Be,Ze);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case g:return Be.key===Ht?Ee(Re,Ce,Be,Ze):null;case v:return Be.key===Ht?Ue(Re,Ce,Be,Ze):null;case z:return Be=rp(Be),$e(Re,Ce,Be,Ze)}if(I(Be)||H(Be))return Ht!==null?null:Ye(Re,Ce,Be,Ze,null);if(typeof Be.then=="function")return $e(Re,Ce,aS(Be),Ze);if(Be.$$typeof===N)return $e(Re,Ce,rS(Re,Be),Ze);lS(Re,Be)}return null}function Ge(Re,Ce,Be,Ze,Ht){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Re=Re.get(Be)||null,ce(Ce,Re,""+Ze,Ht);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case g:return Re=Re.get(Ze.key===null?Be:Ze.key)||null,Ee(Ce,Re,Ze,Ht);case v:return Re=Re.get(Ze.key===null?Be:Ze.key)||null,Ue(Ce,Re,Ze,Ht);case z:return Ze=rp(Ze),Ge(Re,Ce,Be,Ze,Ht)}if(I(Ze)||H(Ze))return Re=Re.get(Be)||null,Ye(Ce,Re,Ze,Ht,null);if(typeof Ze.then=="function")return Ge(Re,Ce,Be,aS(Ze),Ht);if(Ze.$$typeof===N)return Ge(Re,Ce,Be,rS(Ce,Ze),Ht);lS(Ce,Ze)}return null}function Rt(Re,Ce,Be,Ze){for(var Ht=null,Ln=null,jt=Ce,cn=Ce=0,Nn=null;jt!==null&&cn<Be.length;cn++){jt.index>cn?(Nn=jt,jt=null):Nn=jt.sibling;var Dn=$e(Re,jt,Be[cn],Ze);if(Dn===null){jt===null&&(jt=Nn);break}f&&jt&&Dn.alternate===null&&p(Re,jt),Ce=B(Dn,Ce,cn),Ln===null?Ht=Dn:Ln.sibling=Dn,Ln=Dn,jt=Nn}if(cn===Be.length)return y(Re,jt),Cn&&du(Re,cn),Ht;if(jt===null){for(;cn<Be.length;cn++)jt=nt(Re,Be[cn],Ze),jt!==null&&(Ce=B(jt,Ce,cn),Ln===null?Ht=jt:Ln.sibling=jt,Ln=jt);return Cn&&du(Re,cn),Ht}for(jt=E(jt);cn<Be.length;cn++)Nn=Ge(jt,Re,cn,Be[cn],Ze),Nn!==null&&(f&&Nn.alternate!==null&&jt.delete(Nn.key===null?cn:Nn.key),Ce=B(Nn,Ce,cn),Ln===null?Ht=Nn:Ln.sibling=Nn,Ln=Nn);return f&&jt.forEach(function(Af){return p(Re,Af)}),Cn&&du(Re,cn),Ht}function Yt(Re,Ce,Be,Ze){if(Be==null)throw Error(r(151));for(var Ht=null,Ln=null,jt=Ce,cn=Ce=0,Nn=null,Dn=Be.next();jt!==null&&!Dn.done;cn++,Dn=Be.next()){jt.index>cn?(Nn=jt,jt=null):Nn=jt.sibling;var Af=$e(Re,jt,Dn.value,Ze);if(Af===null){jt===null&&(jt=Nn);break}f&&jt&&Af.alternate===null&&p(Re,jt),Ce=B(Af,Ce,cn),Ln===null?Ht=Af:Ln.sibling=Af,Ln=Af,jt=Nn}if(Dn.done)return y(Re,jt),Cn&&du(Re,cn),Ht;if(jt===null){for(;!Dn.done;cn++,Dn=Be.next())Dn=nt(Re,Dn.value,Ze),Dn!==null&&(Ce=B(Dn,Ce,cn),Ln===null?Ht=Dn:Ln.sibling=Dn,Ln=Dn);return Cn&&du(Re,cn),Ht}for(jt=E(jt);!Dn.done;cn++,Dn=Be.next())Dn=Ge(jt,Re,cn,Dn.value,Ze),Dn!==null&&(f&&Dn.alternate!==null&&jt.delete(Dn.key===null?cn:Dn.key),Ce=B(Dn,Ce,cn),Ln===null?Ht=Dn:Ln.sibling=Dn,Ln=Dn);return f&&jt.forEach(function($xe){return p(Re,$xe)}),Cn&&du(Re,cn),Ht}function nr(Re,Ce,Be,Ze){if(typeof Be=="object"&&Be!==null&&Be.type===x&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case g:e:{for(var Ht=Be.key;Ce!==null;){if(Ce.key===Ht){if(Ht=Be.type,Ht===x){if(Ce.tag===7){y(Re,Ce.sibling),Ze=R(Ce,Be.props.children),Ze.return=Re,Re=Ze;break e}}else if(Ce.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===z&&rp(Ht)===Ce.type){y(Re,Ce.sibling),Ze=R(Ce,Be.props),qv(Ze,Be),Ze.return=Re,Re=Ze;break e}y(Re,Ce);break}else p(Re,Ce);Ce=Ce.sibling}Be.type===x?(Ze=Qh(Be.props.children,Re.mode,Ze,Be.key),Ze.return=Re,Re=Ze):(Ze=eS(Be.type,Be.key,Be.props,null,Re.mode,Ze),qv(Ze,Be),Ze.return=Re,Re=Ze)}return ne(Re);case v:e:{for(Ht=Be.key;Ce!==null;){if(Ce.key===Ht)if(Ce.tag===4&&Ce.stateNode.containerInfo===Be.containerInfo&&Ce.stateNode.implementation===Be.implementation){y(Re,Ce.sibling),Ze=R(Ce,Be.children||[]),Ze.return=Re,Re=Ze;break e}else{y(Re,Ce);break}else p(Re,Ce);Ce=Ce.sibling}Ze=e_(Be,Re.mode,Ze),Ze.return=Re,Re=Ze}return ne(Re);case z:return Be=rp(Be),nr(Re,Ce,Be,Ze)}if(I(Be))return Rt(Re,Ce,Be,Ze);if(H(Be)){if(Ht=H(Be),typeof Ht!="function")throw Error(r(150));return Be=Ht.call(Be),Yt(Re,Ce,Be,Ze)}if(typeof Be.then=="function")return nr(Re,Ce,aS(Be),Ze);if(Be.$$typeof===N)return nr(Re,Ce,rS(Re,Be),Ze);lS(Re,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint"?(Be=""+Be,Ce!==null&&Ce.tag===6?(y(Re,Ce.sibling),Ze=R(Ce,Be),Ze.return=Re,Re=Ze):(y(Re,Ce),Ze=ZP(Be,Re.mode,Ze),Ze.return=Re,Re=Ze),ne(Re)):y(Re,Ce)}return function(Re,Ce,Be,Ze){try{Hv=0;var Ht=nr(Re,Ce,Be,Ze);return I0=null,Ht}catch(jt){if(jt===_0||jt===sS)throw jt;var Ln=$o(29,jt,null,Re.mode);return Ln.lanes=Ze,Ln.return=Re,Ln}finally{}}}var sp=KU(!0),WU=KU(!1),af=!1;function f_(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function h_(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function lf(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function cf(f,p,y){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(Hn&2)!==0){var R=E.pending;return R===null?p.next=p:(p.next=R.next,R.next=p),E.pending=p,p=ZE(f),IU(f,null,y),p}return QE(f,E,p,y),ZE(f)}function Gv(f,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194048)!==0)){var E=p.lanes;E&=f.pendingLanes,y|=E,p.lanes=y,Pe(f,y)}}function p_(f,p){var y=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,y===E)){var R=null,B=null;if(y=y.firstBaseUpdate,y!==null){do{var ne={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};B===null?R=B=ne:B=B.next=ne,y=y.next}while(y!==null);B===null?R=B=p:B=B.next=p}else R=B=p;y={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:B,shared:E.shared,callbacks:E.callbacks},f.updateQueue=y;return}f=y.lastBaseUpdate,f===null?y.firstBaseUpdate=p:f.next=p,y.lastBaseUpdate=p}var m_=!1;function Kv(){if(m_){var f=P0;if(f!==null)throw f}}function Wv(f,p,y,E){m_=!1;var R=f.updateQueue;af=!1;var B=R.firstBaseUpdate,ne=R.lastBaseUpdate,ce=R.shared.pending;if(ce!==null){R.shared.pending=null;var Ee=ce,Ue=Ee.next;Ee.next=null,ne===null?B=Ue:ne.next=Ue,ne=Ee;var Ye=f.alternate;Ye!==null&&(Ye=Ye.updateQueue,ce=Ye.lastBaseUpdate,ce!==ne&&(ce===null?Ye.firstBaseUpdate=Ue:ce.next=Ue,Ye.lastBaseUpdate=Ee))}if(B!==null){var nt=R.baseState;ne=0,Ye=Ue=Ee=null,ce=B;do{var $e=ce.lane&-536870913,Ge=$e!==ce.lane;if(Ge?(kn&$e)===$e:(E&$e)===$e){$e!==0&&$e===C0&&(m_=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var Rt=f,Yt=ce;$e=p;var nr=y;switch(Yt.tag){case 1:if(Rt=Yt.payload,typeof Rt=="function"){nt=Rt.call(nr,nt,$e);break e}nt=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=Yt.payload,$e=typeof Rt=="function"?Rt.call(nr,nt,$e):Rt,$e==null)break e;nt=h({},nt,$e);break e;case 2:af=!0}}$e=ce.callback,$e!==null&&(f.flags|=64,Ge&&(f.flags|=8192),Ge=R.callbacks,Ge===null?R.callbacks=[$e]:Ge.push($e))}else Ge={lane:$e,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ye===null?(Ue=Ye=Ge,Ee=nt):Ye=Ye.next=Ge,ne|=$e;if(ce=ce.next,ce===null){if(ce=R.shared.pending,ce===null)break;Ge=ce,ce=Ge.next,Ge.next=null,R.lastBaseUpdate=Ge,R.shared.pending=null}}while(!0);Ye===null&&(Ee=nt),R.baseState=Ee,R.firstBaseUpdate=Ue,R.lastBaseUpdate=Ye,B===null&&(R.shared.lanes=0),pf|=ne,f.lanes=ne,f.memoizedState=nt}}function YU(f,p){if(typeof f!="function")throw Error(r(191,f));f.call(p)}function JU(f,p){var y=f.callbacks;if(y!==null)for(f.callbacks=null,f=0;f<y.length;f++)YU(y[f],p)}var R0=V(null),cS=V(0);function XU(f,p){f=Eu,P(cS,f),P(R0,p),Eu=f|p.baseLanes}function g_(){P(cS,Eu),P(R0,R0.current)}function y_(){Eu=cS.current,M(R0),M(cS)}var zo=V(null),Aa=null;function uf(f){var p=f.alternate;P(ei,ei.current&1),P(zo,f),Aa===null&&(p===null||R0.current!==null||p.memoizedState!==null)&&(Aa=f)}function x_(f){P(ei,ei.current),P(zo,f),Aa===null&&(Aa=f)}function QU(f){f.tag===22?(P(ei,ei.current),P(zo,f),Aa===null&&(Aa=f)):df()}function df(){P(ei,ei.current),P(zo,zo.current)}function Vo(f){M(zo),Aa===f&&(Aa=null),M(ei)}var ei=V(0);function uS(f){for(var p=f;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||AI(y)||TI(y)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var pu=0,on=null,er=null,ui=null,dS=!1,O0=!1,op=!1,fS=0,Yv=0,M0=null,Iye=0;function zr(){throw Error(r(321))}function v_(f,p){if(p===null)return!1;for(var y=0;y<p.length&&y<f.length;y++)if(!Fo(f[y],p[y]))return!1;return!0}function b_(f,p,y,E,R,B){return pu=B,on=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,L.H=f===null||f.memoizedState===null?LF:L_,op=!1,B=y(E,R),op=!1,O0&&(B=eF(p,y,E,R)),ZU(f),B}function ZU(f){L.H=Qv;var p=er!==null&&er.next!==null;if(pu=0,ui=er=on=null,dS=!1,Yv=0,M0=null,p)throw Error(r(300));f===null||di||(f=f.dependencies,f!==null&&nS(f)&&(di=!0))}function eF(f,p,y,E){on=f;var R=0;do{if(O0&&(M0=null),Yv=0,O0=!1,25<=R)throw Error(r(301));if(R+=1,ui=er=null,f.updateQueue!=null){var B=f.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}L.H=DF,B=p(y,E)}while(O0);return B}function Rye(){var f=L.H,p=f.useState()[0];return p=typeof p.then=="function"?Jv(p):p,f=f.useState()[0],(er!==null?er.memoizedState:null)!==f&&(on.flags|=1024),p}function w_(){var f=fS!==0;return fS=0,f}function E_(f,p,y){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~y}function S_(f){if(dS){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}dS=!1}pu=0,ui=er=on=null,O0=!1,Yv=fS=0,M0=null}function Ws(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?on.memoizedState=ui=f:ui=ui.next=f,ui}function ti(){if(er===null){var f=on.alternate;f=f!==null?f.memoizedState:null}else f=er.next;var p=ui===null?on.memoizedState:ui.next;if(p!==null)ui=p,er=f;else{if(f===null)throw on.alternate===null?Error(r(467)):Error(r(310));er=f,f={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},ui===null?on.memoizedState=ui=f:ui=ui.next=f}return ui}function hS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jv(f){var p=Yv;return Yv+=1,M0===null&&(M0=[]),f=HU(M0,f,p),p=on,(ui===null?p.memoizedState:ui.next)===null&&(p=p.alternate,L.H=p===null||p.memoizedState===null?LF:L_),f}function pS(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return Jv(f);if(f.$$typeof===N)return Zi(f)}throw Error(r(438,String(f)))}function A_(f){var p=null,y=on.updateQueue;if(y!==null&&(p=y.memoCache),p==null){var E=on.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(R){return R.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),y===null&&(y=hS(),on.updateQueue=y),y.memoCache=p,y=p.data[p.index],y===void 0)for(y=p.data[p.index]=Array(f),E=0;E<f;E++)y[E]=$;return p.index++,y}function mu(f,p){return typeof p=="function"?p(f):p}function mS(f){var p=ti();return T_(p,er,f)}function T_(f,p,y){var E=f.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=y;var R=f.baseQueue,B=E.pending;if(B!==null){if(R!==null){var ne=R.next;R.next=B.next,B.next=ne}p.baseQueue=R=B,E.pending=null}if(B=f.baseState,R===null)f.memoizedState=B;else{p=R.next;var ce=ne=null,Ee=null,Ue=p,Ye=!1;do{var nt=Ue.lane&-536870913;if(nt!==Ue.lane?(kn&nt)===nt:(pu&nt)===nt){var $e=Ue.revertLane;if($e===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),nt===C0&&(Ye=!0);else if((pu&$e)===$e){Ue=Ue.next,$e===C0&&(Ye=!0);continue}else nt={lane:0,revertLane:Ue.revertLane,gesture:null,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Ee===null?(ce=Ee=nt,ne=B):Ee=Ee.next=nt,on.lanes|=$e,pf|=$e;nt=Ue.action,op&&y(B,nt),B=Ue.hasEagerState?Ue.eagerState:y(B,nt)}else $e={lane:nt,revertLane:Ue.revertLane,gesture:Ue.gesture,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},Ee===null?(ce=Ee=$e,ne=B):Ee=Ee.next=$e,on.lanes|=nt,pf|=nt;Ue=Ue.next}while(Ue!==null&&Ue!==p);if(Ee===null?ne=B:Ee.next=ce,!Fo(B,f.memoizedState)&&(di=!0,Ye&&(y=P0,y!==null)))throw y;f.memoizedState=B,f.baseState=ne,f.baseQueue=Ee,E.lastRenderedState=B}return R===null&&(E.lanes=0),[f.memoizedState,E.dispatch]}function k_(f){var p=ti(),y=p.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=f;var E=y.dispatch,R=y.pending,B=p.memoizedState;if(R!==null){y.pending=null;var ne=R=R.next;do B=f(B,ne.action),ne=ne.next;while(ne!==R);Fo(B,p.memoizedState)||(di=!0),p.memoizedState=B,p.baseQueue===null&&(p.baseState=B),y.lastRenderedState=B}return[B,E]}function tF(f,p,y){var E=on,R=ti(),B=Cn;if(B){if(y===void 0)throw Error(r(407));y=y()}else y=p();var ne=!Fo((er||R).memoizedState,y);if(ne&&(R.memoizedState=y,di=!0),R=R.queue,P_(iF.bind(null,E,R,f),[f]),R.getSnapshot!==p||ne||ui!==null&&ui.memoizedState.tag&1){if(E.flags|=2048,L0(9,{destroy:void 0},rF.bind(null,E,R,y,p),null),lr===null)throw Error(r(349));B||(pu&127)!==0||nF(E,p,y)}return y}function nF(f,p,y){f.flags|=16384,f={getSnapshot:p,value:y},p=on.updateQueue,p===null?(p=hS(),on.updateQueue=p,p.stores=[f]):(y=p.stores,y===null?p.stores=[f]:y.push(f))}function rF(f,p,y,E){p.value=y,p.getSnapshot=E,sF(p)&&oF(f)}function iF(f,p,y){return y(function(){sF(p)&&oF(f)})}function sF(f){var p=f.getSnapshot;f=f.value;try{var y=p();return!Fo(f,y)}catch{return!0}}function oF(f){var p=Xh(f,2);p!==null&&wo(p,f,2)}function N_(f){var p=Ws();if(typeof f=="function"){var y=f;if(f=y(),op){de(!0);try{y()}finally{de(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:f},p}function aF(f,p,y,E){return f.baseState=y,T_(f,er,typeof E=="function"?E:mu)}function Oye(f,p,y,E,R){if(xS(f))throw Error(r(485));if(f=p.action,f!==null){var B={payload:R,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){B.listeners.push(ne)}};L.T!==null?y(!0):B.isTransition=!1,E(B),y=p.pending,y===null?(B.next=p.pending=B,lF(p,B)):(B.next=y.next,p.pending=y.next=B)}}function lF(f,p){var y=p.action,E=p.payload,R=f.state;if(p.isTransition){var B=L.T,ne={};L.T=ne;try{var ce=y(R,E),Ee=L.S;Ee!==null&&Ee(ne,ce),cF(f,p,ce)}catch(Ue){C_(f,p,Ue)}finally{B!==null&&ne.types!==null&&(B.types=ne.types),L.T=B}}else try{B=y(R,E),cF(f,p,B)}catch(Ue){C_(f,p,Ue)}}function cF(f,p,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(E){uF(f,p,E)},function(E){return C_(f,p,E)}):uF(f,p,y)}function uF(f,p,y){p.status="fulfilled",p.value=y,dF(p),f.state=y,p=f.pending,p!==null&&(y=p.next,y===p?f.pending=null:(y=y.next,p.next=y,lF(f,y)))}function C_(f,p,y){var E=f.pending;if(f.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=y,dF(p),p=p.next;while(p!==E)}f.action=null}function dF(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function fF(f,p){return p}function hF(f,p){if(Cn){var y=lr.formState;if(y!==null){e:{var E=on;if(Cn){if(br){t:{for(var R=br,B=Sa;R.nodeType!==8;){if(!B){R=null;break t}if(R=Ta(R.nextSibling),R===null){R=null;break t}}B=R.data,R=B==="F!"||B==="F"?R:null}if(R){br=Ta(R.nextSibling),E=R.data==="F!";break e}}sf(E)}E=!1}E&&(p=y[0])}}return y=Ws(),y.memoizedState=y.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fF,lastRenderedState:p},y.queue=E,y=RF.bind(null,on,E),E.dispatch=y,E=N_(!1),B=M_.bind(null,on,!1,E.queue),E=Ws(),R={state:p,dispatch:null,action:f,pending:null},E.queue=R,y=Oye.bind(null,on,R,B,y),R.dispatch=y,E.memoizedState=f,[p,y,!1]}function pF(f){var p=ti();return mF(p,er,f)}function mF(f,p,y){if(p=T_(f,p,fF)[0],f=mS(mu)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=Jv(p)}catch(ne){throw ne===_0?sS:ne}else E=p;p=ti();var R=p.queue,B=R.dispatch;return y!==p.memoizedState&&(on.flags|=2048,L0(9,{destroy:void 0},Mye.bind(null,R,y),null)),[E,B,f]}function Mye(f,p){f.action=p}function gF(f){var p=ti(),y=er;if(y!==null)return mF(p,y,f);ti(),p=p.memoizedState,y=ti();var E=y.queue.dispatch;return y.memoizedState=f,[p,E,!1]}function L0(f,p,y,E){return f={tag:f,create:y,deps:E,inst:p,next:null},p=on.updateQueue,p===null&&(p=hS(),on.updateQueue=p),y=p.lastEffect,y===null?p.lastEffect=f.next=f:(E=y.next,y.next=f,f.next=E,p.lastEffect=f),f}function yF(){return ti().memoizedState}function gS(f,p,y,E){var R=Ws();on.flags|=f,R.memoizedState=L0(1|p,{destroy:void 0},y,E===void 0?null:E)}function yS(f,p,y,E){var R=ti();E=E===void 0?null:E;var B=R.memoizedState.inst;er!==null&&E!==null&&v_(E,er.memoizedState.deps)?R.memoizedState=L0(p,B,y,E):(on.flags|=f,R.memoizedState=L0(1|p,B,y,E))}function xF(f,p){gS(8390656,8,f,p)}function P_(f,p){yS(2048,8,f,p)}function Lye(f){on.flags|=4;var p=on.updateQueue;if(p===null)p=hS(),on.updateQueue=p,p.events=[f];else{var y=p.events;y===null?p.events=[f]:y.push(f)}}function vF(f){var p=ti().memoizedState;return Lye({ref:p,nextImpl:f}),function(){if((Hn&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function bF(f,p){return yS(4,2,f,p)}function wF(f,p){return yS(4,4,f,p)}function EF(f,p){if(typeof p=="function"){f=f();var y=p(f);return function(){typeof y=="function"?y():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function SF(f,p,y){y=y!=null?y.concat([f]):null,yS(4,4,EF.bind(null,p,f),y)}function __(){}function AF(f,p){var y=ti();p=p===void 0?null:p;var E=y.memoizedState;return p!==null&&v_(p,E[1])?E[0]:(y.memoizedState=[f,p],f)}function TF(f,p){var y=ti();p=p===void 0?null:p;var E=y.memoizedState;if(p!==null&&v_(p,E[1]))return E[0];if(E=f(),op){de(!0);try{f()}finally{de(!1)}}return y.memoizedState=[E,p],E}function I_(f,p,y){return y===void 0||(pu&1073741824)!==0&&(kn&261930)===0?f.memoizedState=p:(f.memoizedState=y,f=k9(),on.lanes|=f,pf|=f,y)}function kF(f,p,y,E){return Fo(y,p)?y:R0.current!==null?(f=I_(f,y,E),Fo(f,p)||(di=!0),f):(pu&42)===0||(pu&1073741824)!==0&&(kn&261930)===0?(di=!0,f.memoizedState=y):(f=k9(),on.lanes|=f,pf|=f,p)}function NF(f,p,y,E,R){var B=q.p;q.p=B!==0&&8>B?B:8;var ne=L.T,ce={};L.T=ce,M_(f,!1,p,y);try{var Ee=R(),Ue=L.S;if(Ue!==null&&Ue(ce,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Ye=_ye(Ee,E);Xv(f,p,Ye,Go(f))}else Xv(f,p,E,Go(f))}catch(nt){Xv(f,p,{then:function(){},status:"rejected",reason:nt},Go())}finally{q.p=B,ne!==null&&ce.types!==null&&(ne.types=ce.types),L.T=ne}}function Dye(){}function R_(f,p,y,E){if(f.tag!==5)throw Error(r(476));var R=CF(f).queue;NF(f,R,p,K,y===null?Dye:function(){return PF(f),y(E)})}function CF(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:K},next:null};var y={};return p.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mu,lastRenderedState:y},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function PF(f){var p=CF(f);p.next===null&&(p=f.alternate.memoizedState),Xv(f,p.next.queue,{},Go())}function O_(){return Zi(pb)}function _F(){return ti().memoizedState}function IF(){return ti().memoizedState}function jye(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var y=Go();f=lf(y);var E=cf(p,f,y);E!==null&&(wo(E,p,y),Gv(E,p,y)),p={cache:l_()},f.payload=p;return}p=p.return}}function Bye(f,p,y){var E=Go();y={lane:E,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},xS(f)?OF(p,y):(y=XP(f,p,y,E),y!==null&&(wo(y,f,E),MF(y,p,E)))}function RF(f,p,y){var E=Go();Xv(f,p,y,E)}function Xv(f,p,y,E){var R={lane:E,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(xS(f))OF(p,R);else{var B=f.alternate;if(f.lanes===0&&(B===null||B.lanes===0)&&(B=p.lastRenderedReducer,B!==null))try{var ne=p.lastRenderedState,ce=B(ne,y);if(R.hasEagerState=!0,R.eagerState=ce,Fo(ce,ne))return QE(f,p,R,0),lr===null&&XE(),!1}catch{}finally{}if(y=XP(f,p,R,E),y!==null)return wo(y,f,E),MF(y,p,E),!0}return!1}function M_(f,p,y,E){if(E={lane:2,revertLane:fI(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},xS(f)){if(p)throw Error(r(479))}else p=XP(f,y,E,2),p!==null&&wo(p,f,2)}function xS(f){var p=f.alternate;return f===on||p!==null&&p===on}function OF(f,p){O0=dS=!0;var y=f.pending;y===null?p.next=p:(p.next=y.next,y.next=p),f.pending=p}function MF(f,p,y){if((y&4194048)!==0){var E=p.lanes;E&=f.pendingLanes,y|=E,p.lanes=y,Pe(f,y)}}var Qv={readContext:Zi,use:pS,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useLayoutEffect:zr,useInsertionEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useSyncExternalStore:zr,useId:zr,useHostTransitionStatus:zr,useFormState:zr,useActionState:zr,useOptimistic:zr,useMemoCache:zr,useCacheRefresh:zr};Qv.useEffectEvent=zr;var LF={readContext:Zi,use:pS,useCallback:function(f,p){return Ws().memoizedState=[f,p===void 0?null:p],f},useContext:Zi,useEffect:xF,useImperativeHandle:function(f,p,y){y=y!=null?y.concat([f]):null,gS(4194308,4,EF.bind(null,p,f),y)},useLayoutEffect:function(f,p){return gS(4194308,4,f,p)},useInsertionEffect:function(f,p){gS(4,2,f,p)},useMemo:function(f,p){var y=Ws();p=p===void 0?null:p;var E=f();if(op){de(!0);try{f()}finally{de(!1)}}return y.memoizedState=[E,p],E},useReducer:function(f,p,y){var E=Ws();if(y!==void 0){var R=y(p);if(op){de(!0);try{y(p)}finally{de(!1)}}}else R=p;return E.memoizedState=E.baseState=R,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:R},E.queue=f,f=f.dispatch=Bye.bind(null,on,f),[E.memoizedState,f]},useRef:function(f){var p=Ws();return f={current:f},p.memoizedState=f},useState:function(f){f=N_(f);var p=f.queue,y=RF.bind(null,on,p);return p.dispatch=y,[f.memoizedState,y]},useDebugValue:__,useDeferredValue:function(f,p){var y=Ws();return I_(y,f,p)},useTransition:function(){var f=N_(!1);return f=NF.bind(null,on,f.queue,!0,!1),Ws().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,y){var E=on,R=Ws();if(Cn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=p(),lr===null)throw Error(r(349));(kn&127)!==0||nF(E,p,y)}R.memoizedState=y;var B={value:y,getSnapshot:p};return R.queue=B,xF(iF.bind(null,E,B,f),[f]),E.flags|=2048,L0(9,{destroy:void 0},rF.bind(null,E,B,y,p),null),y},useId:function(){var f=Ws(),p=lr.identifierPrefix;if(Cn){var y=rc,E=nc;y=(E&~(1<<32-ge(E)-1)).toString(32)+y,p="_"+p+"R_"+y,y=fS++,0<y&&(p+="H"+y.toString(32)),p+="_"}else y=Iye++,p="_"+p+"r_"+y.toString(32)+"_";return f.memoizedState=p},useHostTransitionStatus:O_,useFormState:hF,useActionState:hF,useOptimistic:function(f){var p=Ws();p.memoizedState=p.baseState=f;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=y,p=M_.bind(null,on,!0,y),y.dispatch=p,[f,p]},useMemoCache:A_,useCacheRefresh:function(){return Ws().memoizedState=jye.bind(null,on)},useEffectEvent:function(f){var p=Ws(),y={impl:f};return p.memoizedState=y,function(){if((Hn&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},L_={readContext:Zi,use:pS,useCallback:AF,useContext:Zi,useEffect:P_,useImperativeHandle:SF,useInsertionEffect:bF,useLayoutEffect:wF,useMemo:TF,useReducer:mS,useRef:yF,useState:function(){return mS(mu)},useDebugValue:__,useDeferredValue:function(f,p){var y=ti();return kF(y,er.memoizedState,f,p)},useTransition:function(){var f=mS(mu)[0],p=ti().memoizedState;return[typeof f=="boolean"?f:Jv(f),p]},useSyncExternalStore:tF,useId:_F,useHostTransitionStatus:O_,useFormState:pF,useActionState:pF,useOptimistic:function(f,p){var y=ti();return aF(y,er,f,p)},useMemoCache:A_,useCacheRefresh:IF};L_.useEffectEvent=vF;var DF={readContext:Zi,use:pS,useCallback:AF,useContext:Zi,useEffect:P_,useImperativeHandle:SF,useInsertionEffect:bF,useLayoutEffect:wF,useMemo:TF,useReducer:k_,useRef:yF,useState:function(){return k_(mu)},useDebugValue:__,useDeferredValue:function(f,p){var y=ti();return er===null?I_(y,f,p):kF(y,er.memoizedState,f,p)},useTransition:function(){var f=k_(mu)[0],p=ti().memoizedState;return[typeof f=="boolean"?f:Jv(f),p]},useSyncExternalStore:tF,useId:_F,useHostTransitionStatus:O_,useFormState:gF,useActionState:gF,useOptimistic:function(f,p){var y=ti();return er!==null?aF(y,er,f,p):(y.baseState=f,[f,y.queue.dispatch])},useMemoCache:A_,useCacheRefresh:IF};DF.useEffectEvent=vF;function D_(f,p,y,E){p=f.memoizedState,y=y(E,p),y=y==null?p:h({},p,y),f.memoizedState=y,f.lanes===0&&(f.updateQueue.baseState=y)}var j_={enqueueSetState:function(f,p,y){f=f._reactInternals;var E=Go(),R=lf(E);R.payload=p,y!=null&&(R.callback=y),p=cf(f,R,E),p!==null&&(wo(p,f,E),Gv(p,f,E))},enqueueReplaceState:function(f,p,y){f=f._reactInternals;var E=Go(),R=lf(E);R.tag=1,R.payload=p,y!=null&&(R.callback=y),p=cf(f,R,E),p!==null&&(wo(p,f,E),Gv(p,f,E))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var y=Go(),E=lf(y);E.tag=2,p!=null&&(E.callback=p),p=cf(f,E,y),p!==null&&(wo(p,f,y),Gv(p,f,y))}};function jF(f,p,y,E,R,B,ne){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,B,ne):p.prototype&&p.prototype.isPureReactComponent?!Bv(y,E)||!Bv(R,B):!0}function BF(f,p,y,E){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,E),p.state!==f&&j_.enqueueReplaceState(p,p.state,null)}function ap(f,p){var y=p;if("ref"in p){y={};for(var E in p)E!=="ref"&&(y[E]=p[E])}if(f=f.defaultProps){y===p&&(y=h({},y));for(var R in f)y[R]===void 0&&(y[R]=f[R])}return y}function UF(f){JE(f)}function FF(f){console.error(f)}function $F(f){JE(f)}function vS(f,p){try{var y=f.onUncaughtError;y(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function zF(f,p,y){try{var E=f.onCaughtError;E(y.value,{componentStack:y.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function B_(f,p,y){return y=lf(y),y.tag=3,y.payload={element:null},y.callback=function(){vS(f,p)},y}function VF(f){return f=lf(f),f.tag=3,f}function HF(f,p,y,E){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var B=E.value;f.payload=function(){return R(B)},f.callback=function(){zF(p,y,E)}}var ne=y.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(f.callback=function(){zF(p,y,E),typeof R!="function"&&(mf===null?mf=new Set([this]):mf.add(this));var ce=E.stack;this.componentDidCatch(E.value,{componentStack:ce!==null?ce:""})})}function Uye(f,p,y,E,R){if(y.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=y.alternate,p!==null&&N0(p,y,R,!0),y=zo.current,y!==null){switch(y.tag){case 31:case 13:return Aa===null?IS():y.alternate===null&&Vr===0&&(Vr=3),y.flags&=-257,y.flags|=65536,y.lanes=R,E===oS?y.flags|=16384:(p=y.updateQueue,p===null?y.updateQueue=new Set([E]):p.add(E),cI(f,E,R)),!1;case 22:return y.flags|=65536,E===oS?y.flags|=16384:(p=y.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},y.updateQueue=p):(y=p.retryQueue,y===null?p.retryQueue=new Set([E]):y.add(E)),cI(f,E,R)),!1}throw Error(r(435,y.tag))}return cI(f,E,R),IS(),!1}if(Cn)return p=zo.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=R,E!==r_&&(f=Error(r(422),{cause:E}),$v(ba(f,y)))):(E!==r_&&(p=Error(r(423),{cause:E}),$v(ba(p,y))),f=f.current.alternate,f.flags|=65536,R&=-R,f.lanes|=R,E=ba(E,y),R=B_(f.stateNode,E,R),p_(f,R),Vr!==4&&(Vr=2)),!1;var B=Error(r(520),{cause:E});if(B=ba(B,y),ob===null?ob=[B]:ob.push(B),Vr!==4&&(Vr=2),p===null)return!0;E=ba(E,y),y=p;do{switch(y.tag){case 3:return y.flags|=65536,f=R&-R,y.lanes|=f,f=B_(y.stateNode,E,f),p_(y,f),!1;case 1:if(p=y.type,B=y.stateNode,(y.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(mf===null||!mf.has(B))))return y.flags|=65536,R&=-R,y.lanes|=R,R=VF(R),HF(R,f,y,E),p_(y,R),!1}y=y.return}while(y!==null);return!1}var U_=Error(r(461)),di=!1;function es(f,p,y,E){p.child=f===null?WU(p,null,y,E):sp(p,f.child,y,E)}function qF(f,p,y,E,R){y=y.render;var B=p.ref;if("ref"in E){var ne={};for(var ce in E)ce!=="ref"&&(ne[ce]=E[ce])}else ne=E;return tp(p),E=b_(f,p,y,ne,B,R),ce=w_(),f!==null&&!di?(E_(f,p,R),gu(f,p,R)):(Cn&&ce&&t_(p),p.flags|=1,es(f,p,E,R),p.child)}function GF(f,p,y,E,R){if(f===null){var B=y.type;return typeof B=="function"&&!QP(B)&&B.defaultProps===void 0&&y.compare===null?(p.tag=15,p.type=B,KF(f,p,B,E,R)):(f=eS(y.type,null,E,p,p.mode,R),f.ref=p.ref,f.return=p,p.child=f)}if(B=f.child,!K_(f,R)){var ne=B.memoizedProps;if(y=y.compare,y=y!==null?y:Bv,y(ne,E)&&f.ref===p.ref)return gu(f,p,R)}return p.flags|=1,f=uu(B,E),f.ref=p.ref,f.return=p,p.child=f}function KF(f,p,y,E,R){if(f!==null){var B=f.memoizedProps;if(Bv(B,E)&&f.ref===p.ref)if(di=!1,p.pendingProps=E=B,K_(f,R))(f.flags&131072)!==0&&(di=!0);else return p.lanes=f.lanes,gu(f,p,R)}return F_(f,p,y,E,R)}function WF(f,p,y,E){var R=E.children,B=f!==null?f.memoizedState:null;if(f===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((p.flags&128)!==0){if(B=B!==null?B.baseLanes|y:y,f!==null){for(E=p.child=f.child,R=0;E!==null;)R=R|E.lanes|E.childLanes,E=E.sibling;E=R&~B}else E=0,p.child=null;return YF(f,p,B,y,E)}if((y&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&iS(p,B!==null?B.cachePool:null),B!==null?XU(p,B):g_(),QU(p);else return E=p.lanes=536870912,YF(f,p,B!==null?B.baseLanes|y:y,y,E)}else B!==null?(iS(p,B.cachePool),XU(p,B),df(),p.memoizedState=null):(f!==null&&iS(p,null),g_(),df());return es(f,p,R,y),p.child}function Zv(f,p){return f!==null&&f.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function YF(f,p,y,E,R){var B=u_();return B=B===null?null:{parent:ci._currentValue,pool:B},p.memoizedState={baseLanes:y,cachePool:B},f!==null&&iS(p,null),g_(),QU(p),f!==null&&N0(f,p,E,!0),p.childLanes=R,null}function bS(f,p){return p=ES({mode:p.mode,children:p.children},f.mode),p.ref=f.ref,f.child=p,p.return=f,p}function JF(f,p,y){return sp(p,f.child,null,y),f=bS(p,p.pendingProps),f.flags|=2,Vo(p),p.memoizedState=null,f}function Fye(f,p,y){var E=p.pendingProps,R=(p.flags&128)!==0;if(p.flags&=-129,f===null){if(Cn){if(E.mode==="hidden")return f=bS(p,E),p.lanes=536870912,Zv(null,f);if(x_(p),(f=br)?(f=l$(f,Sa),f=f!==null&&f.data==="&"?f:null,f!==null&&(p.memoizedState={dehydrated:f,treeContext:nf!==null?{id:nc,overflow:rc}:null,retryLane:536870912,hydrationErrors:null},y=OU(f),y.return=p,p.child=y,Qi=p,br=null)):f=null,f===null)throw sf(p);return p.lanes=536870912,null}return bS(p,E)}var B=f.memoizedState;if(B!==null){var ne=B.dehydrated;if(x_(p),R)if(p.flags&256)p.flags&=-257,p=JF(f,p,y);else if(p.memoizedState!==null)p.child=f.child,p.flags|=128,p=null;else throw Error(r(558));else if(di||N0(f,p,y,!1),R=(y&f.childLanes)!==0,di||R){if(E=lr,E!==null&&(ne=Oe(E,y),ne!==0&&ne!==B.retryLane))throw B.retryLane=ne,Xh(f,ne),wo(E,f,ne),U_;IS(),p=JF(f,p,y)}else f=B.treeContext,br=Ta(ne.nextSibling),Qi=p,Cn=!0,rf=null,Sa=!1,f!==null&&DU(p,f),p=bS(p,E),p.flags|=4096;return p}return f=uu(f.child,{mode:E.mode,children:E.children}),f.ref=p.ref,p.child=f,f.return=p,f}function wS(f,p){var y=p.ref;if(y===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(f===null||f.ref!==y)&&(p.flags|=4194816)}}function F_(f,p,y,E,R){return tp(p),y=b_(f,p,y,E,void 0,R),E=w_(),f!==null&&!di?(E_(f,p,R),gu(f,p,R)):(Cn&&E&&t_(p),p.flags|=1,es(f,p,y,R),p.child)}function XF(f,p,y,E,R,B){return tp(p),p.updateQueue=null,y=eF(p,E,y,R),ZU(f),E=w_(),f!==null&&!di?(E_(f,p,B),gu(f,p,B)):(Cn&&E&&t_(p),p.flags|=1,es(f,p,y,B),p.child)}function QF(f,p,y,E,R){if(tp(p),p.stateNode===null){var B=S0,ne=y.contextType;typeof ne=="object"&&ne!==null&&(B=Zi(ne)),B=new y(E,B),p.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=j_,p.stateNode=B,B._reactInternals=p,B=p.stateNode,B.props=E,B.state=p.memoizedState,B.refs={},f_(p),ne=y.contextType,B.context=typeof ne=="object"&&ne!==null?Zi(ne):S0,B.state=p.memoizedState,ne=y.getDerivedStateFromProps,typeof ne=="function"&&(D_(p,y,ne,E),B.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(ne=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),ne!==B.state&&j_.enqueueReplaceState(B,B.state,null),Wv(p,E,B,R),Kv(),B.state=p.memoizedState),typeof B.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(f===null){B=p.stateNode;var ce=p.memoizedProps,Ee=ap(y,ce);B.props=Ee;var Ue=B.context,Ye=y.contextType;ne=S0,typeof Ye=="object"&&Ye!==null&&(ne=Zi(Ye));var nt=y.getDerivedStateFromProps;Ye=typeof nt=="function"||typeof B.getSnapshotBeforeUpdate=="function",ce=p.pendingProps!==ce,Ye||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ce||Ue!==ne)&&BF(p,B,E,ne),af=!1;var $e=p.memoizedState;B.state=$e,Wv(p,E,B,R),Kv(),Ue=p.memoizedState,ce||$e!==Ue||af?(typeof nt=="function"&&(D_(p,y,nt,E),Ue=p.memoizedState),(Ee=af||jF(p,y,Ee,E,$e,Ue,ne))?(Ye||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(p.flags|=4194308)):(typeof B.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Ue),B.props=E,B.state=Ue,B.context=ne,E=Ee):(typeof B.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{B=p.stateNode,h_(f,p),ne=p.memoizedProps,Ye=ap(y,ne),B.props=Ye,nt=p.pendingProps,$e=B.context,Ue=y.contextType,Ee=S0,typeof Ue=="object"&&Ue!==null&&(Ee=Zi(Ue)),ce=y.getDerivedStateFromProps,(Ue=typeof ce=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ne!==nt||$e!==Ee)&&BF(p,B,E,Ee),af=!1,$e=p.memoizedState,B.state=$e,Wv(p,E,B,R),Kv();var Ge=p.memoizedState;ne!==nt||$e!==Ge||af||f!==null&&f.dependencies!==null&&nS(f.dependencies)?(typeof ce=="function"&&(D_(p,y,ce,E),Ge=p.memoizedState),(Ye=af||jF(p,y,Ye,E,$e,Ge,Ee)||f!==null&&f.dependencies!==null&&nS(f.dependencies))?(Ue||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(E,Ge,Ee),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(E,Ge,Ee)),typeof B.componentDidUpdate=="function"&&(p.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof B.componentDidUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=Ge),B.props=E,B.state=Ge,B.context=Ee,E=Ye):(typeof B.componentDidUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=1024),E=!1)}return B=E,wS(f,p),E=(p.flags&128)!==0,B||E?(B=p.stateNode,y=E&&typeof y.getDerivedStateFromError!="function"?null:B.render(),p.flags|=1,f!==null&&E?(p.child=sp(p,f.child,null,R),p.child=sp(p,null,y,R)):es(f,p,y,R),p.memoizedState=B.state,f=p.child):f=gu(f,p,R),f}function ZF(f,p,y,E){return Zh(),p.flags|=256,es(f,p,y,E),p.child}var $_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function z_(f){return{baseLanes:f,cachePool:zU()}}function V_(f,p,y){return f=f!==null?f.childLanes&~y:0,p&&(f|=qo),f}function e9(f,p,y){var E=p.pendingProps,R=!1,B=(p.flags&128)!==0,ne;if((ne=B)||(ne=f!==null&&f.memoizedState===null?!1:(ei.current&2)!==0),ne&&(R=!0,p.flags&=-129),ne=(p.flags&32)!==0,p.flags&=-33,f===null){if(Cn){if(R?uf(p):df(),(f=br)?(f=l$(f,Sa),f=f!==null&&f.data!=="&"?f:null,f!==null&&(p.memoizedState={dehydrated:f,treeContext:nf!==null?{id:nc,overflow:rc}:null,retryLane:536870912,hydrationErrors:null},y=OU(f),y.return=p,p.child=y,Qi=p,br=null)):f=null,f===null)throw sf(p);return TI(f)?p.lanes=32:p.lanes=536870912,null}var ce=E.children;return E=E.fallback,R?(df(),R=p.mode,ce=ES({mode:"hidden",children:ce},R),E=Qh(E,R,y,null),ce.return=p,E.return=p,ce.sibling=E,p.child=ce,E=p.child,E.memoizedState=z_(y),E.childLanes=V_(f,ne,y),p.memoizedState=$_,Zv(null,E)):(uf(p),H_(p,ce))}var Ee=f.memoizedState;if(Ee!==null&&(ce=Ee.dehydrated,ce!==null)){if(B)p.flags&256?(uf(p),p.flags&=-257,p=q_(f,p,y)):p.memoizedState!==null?(df(),p.child=f.child,p.flags|=128,p=null):(df(),ce=E.fallback,R=p.mode,E=ES({mode:"visible",children:E.children},R),ce=Qh(ce,R,y,null),ce.flags|=2,E.return=p,ce.return=p,E.sibling=ce,p.child=E,sp(p,f.child,null,y),E=p.child,E.memoizedState=z_(y),E.childLanes=V_(f,ne,y),p.memoizedState=$_,p=Zv(null,E));else if(uf(p),TI(ce)){if(ne=ce.nextSibling&&ce.nextSibling.dataset,ne)var Ue=ne.dgst;ne=Ue,E=Error(r(419)),E.stack="",E.digest=ne,$v({value:E,source:null,stack:null}),p=q_(f,p,y)}else if(di||N0(f,p,y,!1),ne=(y&f.childLanes)!==0,di||ne){if(ne=lr,ne!==null&&(E=Oe(ne,y),E!==0&&E!==Ee.retryLane))throw Ee.retryLane=E,Xh(f,E),wo(ne,f,E),U_;AI(ce)||IS(),p=q_(f,p,y)}else AI(ce)?(p.flags|=192,p.child=f.child,p=null):(f=Ee.treeContext,br=Ta(ce.nextSibling),Qi=p,Cn=!0,rf=null,Sa=!1,f!==null&&DU(p,f),p=H_(p,E.children),p.flags|=4096);return p}return R?(df(),ce=E.fallback,R=p.mode,Ee=f.child,Ue=Ee.sibling,E=uu(Ee,{mode:"hidden",children:E.children}),E.subtreeFlags=Ee.subtreeFlags&65011712,Ue!==null?ce=uu(Ue,ce):(ce=Qh(ce,R,y,null),ce.flags|=2),ce.return=p,E.return=p,E.sibling=ce,p.child=E,Zv(null,E),E=p.child,ce=f.child.memoizedState,ce===null?ce=z_(y):(R=ce.cachePool,R!==null?(Ee=ci._currentValue,R=R.parent!==Ee?{parent:Ee,pool:Ee}:R):R=zU(),ce={baseLanes:ce.baseLanes|y,cachePool:R}),E.memoizedState=ce,E.childLanes=V_(f,ne,y),p.memoizedState=$_,Zv(f.child,E)):(uf(p),y=f.child,f=y.sibling,y=uu(y,{mode:"visible",children:E.children}),y.return=p,y.sibling=null,f!==null&&(ne=p.deletions,ne===null?(p.deletions=[f],p.flags|=16):ne.push(f)),p.child=y,p.memoizedState=null,y)}function H_(f,p){return p=ES({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function ES(f,p){return f=$o(22,f,null,p),f.lanes=0,f}function q_(f,p,y){return sp(p,f.child,null,y),f=H_(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function t9(f,p,y){f.lanes|=p;var E=f.alternate;E!==null&&(E.lanes|=p),o_(f.return,p,y)}function G_(f,p,y,E,R,B){var ne=f.memoizedState;ne===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:R,treeForkCount:B}:(ne.isBackwards=p,ne.rendering=null,ne.renderingStartTime=0,ne.last=E,ne.tail=y,ne.tailMode=R,ne.treeForkCount=B)}function n9(f,p,y){var E=p.pendingProps,R=E.revealOrder,B=E.tail;E=E.children;var ne=ei.current,ce=(ne&2)!==0;if(ce?(ne=ne&1|2,p.flags|=128):ne&=1,P(ei,ne),es(f,p,E,y),E=Cn?Fv:0,!ce&&f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&t9(f,y,p);else if(f.tag===19)t9(f,y,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(R){case"forwards":for(y=p.child,R=null;y!==null;)f=y.alternate,f!==null&&uS(f)===null&&(R=y),y=y.sibling;y=R,y===null?(R=p.child,p.child=null):(R=y.sibling,y.sibling=null),G_(p,!1,R,y,B,E);break;case"backwards":case"unstable_legacy-backwards":for(y=null,R=p.child,p.child=null;R!==null;){if(f=R.alternate,f!==null&&uS(f)===null){p.child=R;break}f=R.sibling,R.sibling=y,y=R,R=f}G_(p,!0,y,null,B,E);break;case"together":G_(p,!1,null,null,void 0,E);break;default:p.memoizedState=null}return p.child}function gu(f,p,y){if(f!==null&&(p.dependencies=f.dependencies),pf|=p.lanes,(y&p.childLanes)===0)if(f!==null){if(N0(f,p,y,!1),(y&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(r(153));if(p.child!==null){for(f=p.child,y=uu(f,f.pendingProps),p.child=y,y.return=p;f.sibling!==null;)f=f.sibling,y=y.sibling=uu(f,f.pendingProps),y.return=p;y.sibling=null}return p.child}function K_(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&nS(f)))}function $ye(f,p,y){switch(p.tag){case 3:Te(p,p.stateNode.containerInfo),of(p,ci,f.memoizedState.cache),Zh();break;case 27:case 5:ve(p);break;case 4:Te(p,p.stateNode.containerInfo);break;case 10:of(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,x_(p),null;break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(uf(p),p.flags|=128,null):(y&p.child.childLanes)!==0?e9(f,p,y):(uf(p),f=gu(f,p,y),f!==null?f.sibling:null);uf(p);break;case 19:var R=(f.flags&128)!==0;if(E=(y&p.childLanes)!==0,E||(N0(f,p,y,!1),E=(y&p.childLanes)!==0),R){if(E)return n9(f,p,y);p.flags|=128}if(R=p.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),P(ei,ei.current),E)break;return null;case 22:return p.lanes=0,WF(f,p,y,p.pendingProps);case 24:of(p,ci,f.memoizedState.cache)}return gu(f,p,y)}function r9(f,p,y){if(f!==null)if(f.memoizedProps!==p.pendingProps)di=!0;else{if(!K_(f,y)&&(p.flags&128)===0)return di=!1,$ye(f,p,y);di=(f.flags&131072)!==0}else di=!1,Cn&&(p.flags&1048576)!==0&&LU(p,Fv,p.index);switch(p.lanes=0,p.tag){case 16:e:{var E=p.pendingProps;if(f=rp(p.elementType),p.type=f,typeof f=="function")QP(f)?(E=ap(f,E),p.tag=1,p=QF(null,p,f,E,y)):(p.tag=0,p=F_(null,p,f,E,y));else{if(f!=null){var R=f.$$typeof;if(R===O){p.tag=11,p=qF(null,p,f,E,y);break e}else if(R===F){p.tag=14,p=GF(null,p,f,E,y);break e}}throw p=A(f)||f,Error(r(306,p,""))}}return p;case 0:return F_(f,p,p.type,p.pendingProps,y);case 1:return E=p.type,R=ap(E,p.pendingProps),QF(f,p,E,R,y);case 3:e:{if(Te(p,p.stateNode.containerInfo),f===null)throw Error(r(387));E=p.pendingProps;var B=p.memoizedState;R=B.element,h_(f,p),Wv(p,E,null,y);var ne=p.memoizedState;if(E=ne.cache,of(p,ci,E),E!==B.cache&&a_(p,[ci],y,!0),Kv(),E=ne.element,B.isDehydrated)if(B={element:E,isDehydrated:!1,cache:ne.cache},p.updateQueue.baseState=B,p.memoizedState=B,p.flags&256){p=ZF(f,p,E,y);break e}else if(E!==R){R=ba(Error(r(424)),p),$v(R),p=ZF(f,p,E,y);break e}else{switch(f=p.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(br=Ta(f.firstChild),Qi=p,Cn=!0,rf=null,Sa=!0,y=WU(p,null,E,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Zh(),E===R){p=gu(f,p,y);break e}es(f,p,E,y)}p=p.child}return p;case 26:return wS(f,p),f===null?(y=p$(p.type,null,p.pendingProps,null))?p.memoizedState=y:Cn||(y=p.type,f=p.pendingProps,E=BS(se.current).createElement(y),E[At]=p,E[bn]=f,ts(E,y,f),vr(E),p.stateNode=E):p.memoizedState=p$(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:return ve(p),f===null&&Cn&&(E=p.stateNode=d$(p.type,p.pendingProps,se.current),Qi=p,Sa=!0,R=br,vf(p.type)?(kI=R,br=Ta(E.firstChild)):br=R),es(f,p,p.pendingProps.children,y),wS(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&Cn&&((R=E=br)&&(E=yxe(E,p.type,p.pendingProps,Sa),E!==null?(p.stateNode=E,Qi=p,br=Ta(E.firstChild),Sa=!1,R=!0):R=!1),R||sf(p)),ve(p),R=p.type,B=p.pendingProps,ne=f!==null?f.memoizedProps:null,E=B.children,wI(R,B)?E=null:ne!==null&&wI(R,ne)&&(p.flags|=32),p.memoizedState!==null&&(R=b_(f,p,Rye,null,null,y),pb._currentValue=R),wS(f,p),es(f,p,E,y),p.child;case 6:return f===null&&Cn&&((f=y=br)&&(y=xxe(y,p.pendingProps,Sa),y!==null?(p.stateNode=y,Qi=p,br=null,f=!0):f=!1),f||sf(p)),null;case 13:return e9(f,p,y);case 4:return Te(p,p.stateNode.containerInfo),E=p.pendingProps,f===null?p.child=sp(p,null,E,y):es(f,p,E,y),p.child;case 11:return qF(f,p,p.type,p.pendingProps,y);case 7:return es(f,p,p.pendingProps,y),p.child;case 8:return es(f,p,p.pendingProps.children,y),p.child;case 12:return es(f,p,p.pendingProps.children,y),p.child;case 10:return E=p.pendingProps,of(p,p.type,E.value),es(f,p,E.children,y),p.child;case 9:return R=p.type._context,E=p.pendingProps.children,tp(p),R=Zi(R),E=E(R),p.flags|=1,es(f,p,E,y),p.child;case 14:return GF(f,p,p.type,p.pendingProps,y);case 15:return KF(f,p,p.type,p.pendingProps,y);case 19:return n9(f,p,y);case 31:return Fye(f,p,y);case 22:return WF(f,p,y,p.pendingProps);case 24:return tp(p),E=Zi(ci),f===null?(R=u_(),R===null&&(R=lr,B=l_(),R.pooledCache=B,B.refCount++,B!==null&&(R.pooledCacheLanes|=y),R=B),p.memoizedState={parent:E,cache:R},f_(p),of(p,ci,R)):((f.lanes&y)!==0&&(h_(f,p),Wv(p,null,null,y),Kv()),R=f.memoizedState,B=p.memoizedState,R.parent!==E?(R={parent:E,cache:E},p.memoizedState=R,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=R),of(p,ci,E)):(E=B.cache,of(p,ci,E),E!==R.cache&&a_(p,[ci],y,!0))),es(f,p,p.pendingProps.children,y),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function yu(f){f.flags|=4}function W_(f,p,y,E,R){if((p=(f.mode&32)!==0)&&(p=!1),p){if(f.flags|=16777216,(R&335544128)===R)if(f.stateNode.complete)f.flags|=8192;else if(_9())f.flags|=8192;else throw ip=oS,d_}else f.flags&=-16777217}function i9(f,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!v$(p))if(_9())f.flags|=8192;else throw ip=oS,d_}function SS(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?Vn():536870912,f.lanes|=p,U0|=p)}function eb(f,p){if(!Cn)switch(f.tailMode){case"hidden":p=f.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?f.tail=null:y.sibling=null;break;case"collapsed":y=f.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function wr(f){var p=f.alternate!==null&&f.alternate.child===f.child,y=0,E=0;if(p)for(var R=f.child;R!==null;)y|=R.lanes|R.childLanes,E|=R.subtreeFlags&65011712,E|=R.flags&65011712,R.return=f,R=R.sibling;else for(R=f.child;R!==null;)y|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=f,R=R.sibling;return f.subtreeFlags|=E,f.childLanes=y,p}function zye(f,p,y){var E=p.pendingProps;switch(n_(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(p),null;case 1:return wr(p),null;case 3:return y=p.stateNode,E=null,f!==null&&(E=f.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),hu(ci),oe(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(f===null||f.child===null)&&(k0(p)?yu(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,i_())),wr(p),null;case 26:var R=p.type,B=p.memoizedState;return f===null?(yu(p),B!==null?(wr(p),i9(p,B)):(wr(p),W_(p,R,null,E,y))):B?B!==f.memoizedState?(yu(p),wr(p),i9(p,B)):(wr(p),p.flags&=-16777217):(f=f.memoizedProps,f!==E&&yu(p),wr(p),W_(p,R,f,E,y)),null;case 27:if(ke(p),y=se.current,R=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==E&&yu(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return wr(p),null}f=W.current,k0(p)?jU(p):(f=d$(R,E,y),p.stateNode=f,yu(p))}return wr(p),null;case 5:if(ke(p),R=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==E&&yu(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return wr(p),null}if(B=W.current,k0(p))jU(p);else{var ne=BS(se.current);switch(B){case 1:B=ne.createElementNS("http://www.w3.org/2000/svg",R);break;case 2:B=ne.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;default:switch(R){case"svg":B=ne.createElementNS("http://www.w3.org/2000/svg",R);break;case"math":B=ne.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;case"script":B=ne.createElement("div"),B.innerHTML="<script><\/script>",B=B.removeChild(B.firstChild);break;case"select":B=typeof E.is=="string"?ne.createElement("select",{is:E.is}):ne.createElement("select"),E.multiple?B.multiple=!0:E.size&&(B.size=E.size);break;default:B=typeof E.is=="string"?ne.createElement(R,{is:E.is}):ne.createElement(R)}}B[At]=p,B[bn]=E;e:for(ne=p.child;ne!==null;){if(ne.tag===5||ne.tag===6)B.appendChild(ne.stateNode);else if(ne.tag!==4&&ne.tag!==27&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===p)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===p)break e;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}p.stateNode=B;e:switch(ts(B,R,E),R){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&yu(p)}}return wr(p),W_(p,p.type,f===null?null:f.memoizedProps,p.pendingProps,y),null;case 6:if(f&&p.stateNode!=null)f.memoizedProps!==E&&yu(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(r(166));if(f=se.current,k0(p)){if(f=p.stateNode,y=p.memoizedProps,E=null,R=Qi,R!==null)switch(R.tag){case 27:case 5:E=R.memoizedProps}f[At]=p,f=!!(f.nodeValue===y||E!==null&&E.suppressHydrationWarning===!0||e$(f.nodeValue,y)),f||sf(p,!0)}else f=BS(f).createTextNode(E),f[At]=p,p.stateNode=f}return wr(p),null;case 31:if(y=p.memoizedState,f===null||f.memoizedState!==null){if(E=k0(p),y!==null){if(f===null){if(!E)throw Error(r(318));if(f=p.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(557));f[At]=p}else Zh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;wr(p),f=!1}else y=i_(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=y),f=!0;if(!f)return p.flags&256?(Vo(p),p):(Vo(p),null);if((p.flags&128)!==0)throw Error(r(558))}return wr(p),null;case 13:if(E=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(R=k0(p),E!==null&&E.dehydrated!==null){if(f===null){if(!R)throw Error(r(318));if(R=p.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[At]=p}else Zh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;wr(p),R=!1}else R=i_(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=R),R=!0;if(!R)return p.flags&256?(Vo(p),p):(Vo(p),null)}return Vo(p),(p.flags&128)!==0?(p.lanes=y,p):(y=E!==null,f=f!==null&&f.memoizedState!==null,y&&(E=p.child,R=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(R=E.alternate.memoizedState.cachePool.pool),B=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(B=E.memoizedState.cachePool.pool),B!==R&&(E.flags|=2048)),y!==f&&y&&(p.child.flags|=8192),SS(p,p.updateQueue),wr(p),null);case 4:return oe(),f===null&&gI(p.stateNode.containerInfo),wr(p),null;case 10:return hu(p.type),wr(p),null;case 19:if(M(ei),E=p.memoizedState,E===null)return wr(p),null;if(R=(p.flags&128)!==0,B=E.rendering,B===null)if(R)eb(E,!1);else{if(Vr!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(B=uS(f),B!==null){for(p.flags|=128,eb(E,!1),f=B.updateQueue,p.updateQueue=f,SS(p,f),p.subtreeFlags=0,f=y,y=p.child;y!==null;)RU(y,f),y=y.sibling;return P(ei,ei.current&1|2),Cn&&du(p,E.treeForkCount),p.child}f=f.sibling}E.tail!==null&&et()>CS&&(p.flags|=128,R=!0,eb(E,!1),p.lanes=4194304)}else{if(!R)if(f=uS(B),f!==null){if(p.flags|=128,R=!0,f=f.updateQueue,p.updateQueue=f,SS(p,f),eb(E,!0),E.tail===null&&E.tailMode==="hidden"&&!B.alternate&&!Cn)return wr(p),null}else 2*et()-E.renderingStartTime>CS&&y!==536870912&&(p.flags|=128,R=!0,eb(E,!1),p.lanes=4194304);E.isBackwards?(B.sibling=p.child,p.child=B):(f=E.last,f!==null?f.sibling=B:p.child=B,E.last=B)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=et(),f.sibling=null,y=ei.current,P(ei,R?y&1|2:y&1),Cn&&du(p,E.treeForkCount),f):(wr(p),null);case 22:case 23:return Vo(p),y_(),E=p.memoizedState!==null,f!==null?f.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(y&536870912)!==0&&(p.flags&128)===0&&(wr(p),p.subtreeFlags&6&&(p.flags|=8192)):wr(p),y=p.updateQueue,y!==null&&SS(p,y.retryQueue),y=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==y&&(p.flags|=2048),f!==null&&M(np),null;case 24:return y=null,f!==null&&(y=f.memoizedState.cache),p.memoizedState.cache!==y&&(p.flags|=2048),hu(ci),wr(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function Vye(f,p){switch(n_(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return hu(ci),oe(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return ke(p),null;case 31:if(p.memoizedState!==null){if(Vo(p),p.alternate===null)throw Error(r(340));Zh()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 13:if(Vo(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Zh()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return M(ei),null;case 4:return oe(),null;case 10:return hu(p.type),null;case 22:case 23:return Vo(p),y_(),f!==null&&M(np),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return hu(ci),null;case 25:return null;default:return null}}function s9(f,p){switch(n_(p),p.tag){case 3:hu(ci),oe();break;case 26:case 27:case 5:ke(p);break;case 4:oe();break;case 31:p.memoizedState!==null&&Vo(p);break;case 13:Vo(p);break;case 19:M(ei);break;case 10:hu(p.type);break;case 22:case 23:Vo(p),y_(),f!==null&&M(np);break;case 24:hu(ci)}}function tb(f,p){try{var y=p.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var R=E.next;y=R;do{if((y.tag&f)===f){E=void 0;var B=y.create,ne=y.inst;E=B(),ne.destroy=E}y=y.next}while(y!==R)}}catch(ce){Jn(p,p.return,ce)}}function ff(f,p,y){try{var E=p.updateQueue,R=E!==null?E.lastEffect:null;if(R!==null){var B=R.next;E=B;do{if((E.tag&f)===f){var ne=E.inst,ce=ne.destroy;if(ce!==void 0){ne.destroy=void 0,R=p;var Ee=y,Ue=ce;try{Ue()}catch(Ye){Jn(R,Ee,Ye)}}}E=E.next}while(E!==B)}}catch(Ye){Jn(p,p.return,Ye)}}function o9(f){var p=f.updateQueue;if(p!==null){var y=f.stateNode;try{JU(p,y)}catch(E){Jn(f,f.return,E)}}}function a9(f,p,y){y.props=ap(f.type,f.memoizedProps),y.state=f.memoizedState;try{y.componentWillUnmount()}catch(E){Jn(f,p,E)}}function nb(f,p){try{var y=f.ref;if(y!==null){switch(f.tag){case 26:case 27:case 5:var E=f.stateNode;break;case 30:E=f.stateNode;break;default:E=f.stateNode}typeof y=="function"?f.refCleanup=y(E):y.current=E}}catch(R){Jn(f,p,R)}}function ic(f,p){var y=f.ref,E=f.refCleanup;if(y!==null)if(typeof E=="function")try{E()}catch(R){Jn(f,p,R)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){Jn(f,p,R)}else y.current=null}function l9(f){var p=f.type,y=f.memoizedProps,E=f.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":y.autoFocus&&E.focus();break e;case"img":y.src?E.src=y.src:y.srcSet&&(E.srcset=y.srcSet)}}catch(R){Jn(f,f.return,R)}}function Y_(f,p,y){try{var E=f.stateNode;dxe(E,f.type,y,p),E[bn]=p}catch(R){Jn(f,f.return,R)}}function c9(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&vf(f.type)||f.tag===4}function J_(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||c9(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&vf(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function X_(f,p,y){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(f,p):(p=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,p.appendChild(f),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=lu));else if(E!==4&&(E===27&&vf(f.type)&&(y=f.stateNode,p=null),f=f.child,f!==null))for(X_(f,p,y),f=f.sibling;f!==null;)X_(f,p,y),f=f.sibling}function AS(f,p,y){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?y.insertBefore(f,p):y.appendChild(f);else if(E!==4&&(E===27&&vf(f.type)&&(y=f.stateNode),f=f.child,f!==null))for(AS(f,p,y),f=f.sibling;f!==null;)AS(f,p,y),f=f.sibling}function u9(f){var p=f.stateNode,y=f.memoizedProps;try{for(var E=f.type,R=p.attributes;R.length;)p.removeAttributeNode(R[0]);ts(p,E,y),p[At]=f,p[bn]=y}catch(B){Jn(f,f.return,B)}}var xu=!1,fi=!1,Q_=!1,d9=typeof WeakSet=="function"?WeakSet:Set,Mi=null;function Hye(f,p){if(f=f.containerInfo,vI=qS,f=SU(f),qP(f)){if("selectionStart"in f)var y={start:f.selectionStart,end:f.selectionEnd};else e:{y=(y=f.ownerDocument)&&y.defaultView||window;var E=y.getSelection&&y.getSelection();if(E&&E.rangeCount!==0){y=E.anchorNode;var R=E.anchorOffset,B=E.focusNode;E=E.focusOffset;try{y.nodeType,B.nodeType}catch{y=null;break e}var ne=0,ce=-1,Ee=-1,Ue=0,Ye=0,nt=f,$e=null;t:for(;;){for(var Ge;nt!==y||R!==0&&nt.nodeType!==3||(ce=ne+R),nt!==B||E!==0&&nt.nodeType!==3||(Ee=ne+E),nt.nodeType===3&&(ne+=nt.nodeValue.length),(Ge=nt.firstChild)!==null;)$e=nt,nt=Ge;for(;;){if(nt===f)break t;if($e===y&&++Ue===R&&(ce=ne),$e===B&&++Ye===E&&(Ee=ne),(Ge=nt.nextSibling)!==null)break;nt=$e,$e=nt.parentNode}nt=Ge}y=ce===-1||Ee===-1?null:{start:ce,end:Ee}}else y=null}y=y||{start:0,end:0}}else y=null;for(bI={focusedElem:f,selectionRange:y},qS=!1,Mi=p;Mi!==null;)if(p=Mi,f=p.child,(p.subtreeFlags&1028)!==0&&f!==null)f.return=p,Mi=f;else for(;Mi!==null;){switch(p=Mi,B=p.alternate,f=p.flags,p.tag){case 0:if((f&4)!==0&&(f=p.updateQueue,f=f!==null?f.events:null,f!==null))for(y=0;y<f.length;y++)R=f[y],R.ref.impl=R.nextImpl;break;case 11:case 15:break;case 1:if((f&1024)!==0&&B!==null){f=void 0,y=p,R=B.memoizedProps,B=B.memoizedState,E=y.stateNode;try{var Rt=ap(y.type,R);f=E.getSnapshotBeforeUpdate(Rt,B),E.__reactInternalSnapshotBeforeUpdate=f}catch(Yt){Jn(y,y.return,Yt)}}break;case 3:if((f&1024)!==0){if(f=p.stateNode.containerInfo,y=f.nodeType,y===9)SI(f);else if(y===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":SI(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=p.sibling,f!==null){f.return=p.return,Mi=f;break}Mi=p.return}}function f9(f,p,y){var E=y.flags;switch(y.tag){case 0:case 11:case 15:bu(f,y),E&4&&tb(5,y);break;case 1:if(bu(f,y),E&4)if(f=y.stateNode,p===null)try{f.componentDidMount()}catch(ne){Jn(y,y.return,ne)}else{var R=ap(y.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(R,p,f.__reactInternalSnapshotBeforeUpdate)}catch(ne){Jn(y,y.return,ne)}}E&64&&o9(y),E&512&&nb(y,y.return);break;case 3:if(bu(f,y),E&64&&(f=y.updateQueue,f!==null)){if(p=null,y.child!==null)switch(y.child.tag){case 27:case 5:p=y.child.stateNode;break;case 1:p=y.child.stateNode}try{JU(f,p)}catch(ne){Jn(y,y.return,ne)}}break;case 27:p===null&&E&4&&u9(y);case 26:case 5:bu(f,y),p===null&&E&4&&l9(y),E&512&&nb(y,y.return);break;case 12:bu(f,y);break;case 31:bu(f,y),E&4&&m9(f,y);break;case 13:bu(f,y),E&4&&g9(f,y),E&64&&(f=y.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(y=Zye.bind(null,y),vxe(f,y))));break;case 22:if(E=y.memoizedState!==null||xu,!E){p=p!==null&&p.memoizedState!==null||fi,R=xu;var B=fi;xu=E,(fi=p)&&!B?wu(f,y,(y.subtreeFlags&8772)!==0):bu(f,y),xu=R,fi=B}break;case 30:break;default:bu(f,y)}}function h9(f){var p=f.alternate;p!==null&&(f.alternate=null,h9(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&fl(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var kr=null,yo=!1;function vu(f,p,y){for(y=y.child;y!==null;)p9(f,p,y),y=y.sibling}function p9(f,p,y){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(ue,y)}catch{}switch(y.tag){case 26:fi||ic(y,p),vu(f,p,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:fi||ic(y,p);var E=kr,R=yo;vf(y.type)&&(kr=y.stateNode,yo=!1),vu(f,p,y),db(y.stateNode),kr=E,yo=R;break;case 5:fi||ic(y,p);case 6:if(E=kr,R=yo,kr=null,vu(f,p,y),kr=E,yo=R,kr!==null)if(yo)try{(kr.nodeType===9?kr.body:kr.nodeName==="HTML"?kr.ownerDocument.body:kr).removeChild(y.stateNode)}catch(B){Jn(y,p,B)}else try{kr.removeChild(y.stateNode)}catch(B){Jn(y,p,B)}break;case 18:kr!==null&&(yo?(f=kr,o$(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,y.stateNode),K0(f)):o$(kr,y.stateNode));break;case 4:E=kr,R=yo,kr=y.stateNode.containerInfo,yo=!0,vu(f,p,y),kr=E,yo=R;break;case 0:case 11:case 14:case 15:ff(2,y,p),fi||ff(4,y,p),vu(f,p,y);break;case 1:fi||(ic(y,p),E=y.stateNode,typeof E.componentWillUnmount=="function"&&a9(y,p,E)),vu(f,p,y);break;case 21:vu(f,p,y);break;case 22:fi=(E=fi)||y.memoizedState!==null,vu(f,p,y),fi=E;break;default:vu(f,p,y)}}function m9(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{K0(f)}catch(y){Jn(p,p.return,y)}}}function g9(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{K0(f)}catch(y){Jn(p,p.return,y)}}function qye(f){switch(f.tag){case 31:case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new d9),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new d9),p;default:throw Error(r(435,f.tag))}}function TS(f,p){var y=qye(f);p.forEach(function(E){if(!y.has(E)){y.add(E);var R=exe.bind(null,f,E);E.then(R,R)}})}function xo(f,p){var y=p.deletions;if(y!==null)for(var E=0;E<y.length;E++){var R=y[E],B=f,ne=p,ce=ne;e:for(;ce!==null;){switch(ce.tag){case 27:if(vf(ce.type)){kr=ce.stateNode,yo=!1;break e}break;case 5:kr=ce.stateNode,yo=!1;break e;case 3:case 4:kr=ce.stateNode.containerInfo,yo=!0;break e}ce=ce.return}if(kr===null)throw Error(r(160));p9(B,ne,R),kr=null,yo=!1,B=R.alternate,B!==null&&(B.return=null),R.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)y9(p,f),p=p.sibling}var pl=null;function y9(f,p){var y=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:xo(p,f),vo(f),E&4&&(ff(3,f,f.return),tb(3,f),ff(5,f,f.return));break;case 1:xo(p,f),vo(f),E&512&&(fi||y===null||ic(y,y.return)),E&64&&xu&&(f=f.updateQueue,f!==null&&(E=f.callbacks,E!==null&&(y=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=y===null?E:y.concat(E))));break;case 26:var R=pl;if(xo(p,f),vo(f),E&512&&(fi||y===null||ic(y,y.return)),E&4){var B=y!==null?y.memoizedState:null;if(E=f.memoizedState,y===null)if(E===null)if(f.stateNode===null){e:{E=f.type,y=f.memoizedProps,R=R.ownerDocument||R;t:switch(E){case"title":B=R.getElementsByTagName("title")[0],(!B||B[Do]||B[At]||B.namespaceURI==="http://www.w3.org/2000/svg"||B.hasAttribute("itemprop"))&&(B=R.createElement(E),R.head.insertBefore(B,R.querySelector("head > title"))),ts(B,E,y),B[At]=f,vr(B),E=B;break e;case"link":var ne=y$("link","href",R).get(E+(y.href||""));if(ne){for(var ce=0;ce<ne.length;ce++)if(B=ne[ce],B.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&B.getAttribute("rel")===(y.rel==null?null:y.rel)&&B.getAttribute("title")===(y.title==null?null:y.title)&&B.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){ne.splice(ce,1);break t}}B=R.createElement(E),ts(B,E,y),R.head.appendChild(B);break;case"meta":if(ne=y$("meta","content",R).get(E+(y.content||""))){for(ce=0;ce<ne.length;ce++)if(B=ne[ce],B.getAttribute("content")===(y.content==null?null:""+y.content)&&B.getAttribute("name")===(y.name==null?null:y.name)&&B.getAttribute("property")===(y.property==null?null:y.property)&&B.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&B.getAttribute("charset")===(y.charSet==null?null:y.charSet)){ne.splice(ce,1);break t}}B=R.createElement(E),ts(B,E,y),R.head.appendChild(B);break;default:throw Error(r(468,E))}B[At]=f,vr(B),E=B}f.stateNode=E}else x$(R,f.type,f.stateNode);else f.stateNode=g$(R,E,f.memoizedProps);else B!==E?(B===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):B.count--,E===null?x$(R,f.type,f.stateNode):g$(R,E,f.memoizedProps)):E===null&&f.stateNode!==null&&Y_(f,f.memoizedProps,y.memoizedProps)}break;case 27:xo(p,f),vo(f),E&512&&(fi||y===null||ic(y,y.return)),y!==null&&E&4&&Y_(f,f.memoizedProps,y.memoizedProps);break;case 5:if(xo(p,f),vo(f),E&512&&(fi||y===null||ic(y,y.return)),f.flags&32){R=f.stateNode;try{g0(R,"")}catch(Rt){Jn(f,f.return,Rt)}}E&4&&f.stateNode!=null&&(R=f.memoizedProps,Y_(f,R,y!==null?y.memoizedProps:R)),E&1024&&(Q_=!0);break;case 6:if(xo(p,f),vo(f),E&4){if(f.stateNode===null)throw Error(r(162));E=f.memoizedProps,y=f.stateNode;try{y.nodeValue=E}catch(Rt){Jn(f,f.return,Rt)}}break;case 3:if($S=null,R=pl,pl=US(p.containerInfo),xo(p,f),pl=R,vo(f),E&4&&y!==null&&y.memoizedState.isDehydrated)try{K0(p.containerInfo)}catch(Rt){Jn(f,f.return,Rt)}Q_&&(Q_=!1,x9(f));break;case 4:E=pl,pl=US(f.stateNode.containerInfo),xo(p,f),vo(f),pl=E;break;case 12:xo(p,f),vo(f);break;case 31:xo(p,f),vo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,TS(f,E)));break;case 13:xo(p,f),vo(f),f.child.flags&8192&&f.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(NS=et()),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,TS(f,E)));break;case 22:R=f.memoizedState!==null;var Ee=y!==null&&y.memoizedState!==null,Ue=xu,Ye=fi;if(xu=Ue||R,fi=Ye||Ee,xo(p,f),fi=Ye,xu=Ue,vo(f),E&8192)e:for(p=f.stateNode,p._visibility=R?p._visibility&-2:p._visibility|1,R&&(y===null||Ee||xu||fi||lp(f)),y=null,p=f;;){if(p.tag===5||p.tag===26){if(y===null){Ee=y=p;try{if(B=Ee.stateNode,R)ne=B.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none";else{ce=Ee.stateNode;var nt=Ee.memoizedProps.style,$e=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;ce.style.display=$e==null||typeof $e=="boolean"?"":(""+$e).trim()}}catch(Rt){Jn(Ee,Ee.return,Rt)}}}else if(p.tag===6){if(y===null){Ee=p;try{Ee.stateNode.nodeValue=R?"":Ee.memoizedProps}catch(Rt){Jn(Ee,Ee.return,Rt)}}}else if(p.tag===18){if(y===null){Ee=p;try{var Ge=Ee.stateNode;R?a$(Ge,!0):a$(Ee.stateNode,!1)}catch(Rt){Jn(Ee,Ee.return,Rt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;y===p&&(y=null),p=p.return}y===p&&(y=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=f.updateQueue,E!==null&&(y=E.retryQueue,y!==null&&(E.retryQueue=null,TS(f,y))));break;case 19:xo(p,f),vo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,TS(f,E)));break;case 30:break;case 21:break;default:xo(p,f),vo(f)}}function vo(f){var p=f.flags;if(p&2){try{for(var y,E=f.return;E!==null;){if(c9(E)){y=E;break}E=E.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var R=y.stateNode,B=J_(f);AS(f,B,R);break;case 5:var ne=y.stateNode;y.flags&32&&(g0(ne,""),y.flags&=-33);var ce=J_(f);AS(f,ce,ne);break;case 3:case 4:var Ee=y.stateNode.containerInfo,Ue=J_(f);X_(f,Ue,Ee);break;default:throw Error(r(161))}}catch(Ye){Jn(f,f.return,Ye)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function x9(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;x9(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),f=f.sibling}}function bu(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)f9(f,p.alternate,p),p=p.sibling}function lp(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:ff(4,p,p.return),lp(p);break;case 1:ic(p,p.return);var y=p.stateNode;typeof y.componentWillUnmount=="function"&&a9(p,p.return,y),lp(p);break;case 27:db(p.stateNode);case 26:case 5:ic(p,p.return),lp(p);break;case 22:p.memoizedState===null&&lp(p);break;case 30:lp(p);break;default:lp(p)}f=f.sibling}}function wu(f,p,y){for(y=y&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,R=f,B=p,ne=B.flags;switch(B.tag){case 0:case 11:case 15:wu(R,B,y),tb(4,B);break;case 1:if(wu(R,B,y),E=B,R=E.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Ue){Jn(E,E.return,Ue)}if(E=B,R=E.updateQueue,R!==null){var ce=E.stateNode;try{var Ee=R.shared.hiddenCallbacks;if(Ee!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Ee.length;R++)YU(Ee[R],ce)}catch(Ue){Jn(E,E.return,Ue)}}y&&ne&64&&o9(B),nb(B,B.return);break;case 27:u9(B);case 26:case 5:wu(R,B,y),y&&E===null&&ne&4&&l9(B),nb(B,B.return);break;case 12:wu(R,B,y);break;case 31:wu(R,B,y),y&&ne&4&&m9(R,B);break;case 13:wu(R,B,y),y&&ne&4&&g9(R,B);break;case 22:B.memoizedState===null&&wu(R,B,y),nb(B,B.return);break;case 30:break;default:wu(R,B,y)}p=p.sibling}}function Z_(f,p){var y=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==y&&(f!=null&&f.refCount++,y!=null&&zv(y))}function eI(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&zv(f))}function ml(f,p,y,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)v9(f,p,y,E),p=p.sibling}function v9(f,p,y,E){var R=p.flags;switch(p.tag){case 0:case 11:case 15:ml(f,p,y,E),R&2048&&tb(9,p);break;case 1:ml(f,p,y,E);break;case 3:ml(f,p,y,E),R&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&zv(f)));break;case 12:if(R&2048){ml(f,p,y,E),f=p.stateNode;try{var B=p.memoizedProps,ne=B.id,ce=B.onPostCommit;typeof ce=="function"&&ce(ne,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Ee){Jn(p,p.return,Ee)}}else ml(f,p,y,E);break;case 31:ml(f,p,y,E);break;case 13:ml(f,p,y,E);break;case 23:break;case 22:B=p.stateNode,ne=p.alternate,p.memoizedState!==null?B._visibility&2?ml(f,p,y,E):rb(f,p):B._visibility&2?ml(f,p,y,E):(B._visibility|=2,D0(f,p,y,E,(p.subtreeFlags&10256)!==0||!1)),R&2048&&Z_(ne,p);break;case 24:ml(f,p,y,E),R&2048&&eI(p.alternate,p);break;default:ml(f,p,y,E)}}function D0(f,p,y,E,R){for(R=R&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var B=f,ne=p,ce=y,Ee=E,Ue=ne.flags;switch(ne.tag){case 0:case 11:case 15:D0(B,ne,ce,Ee,R),tb(8,ne);break;case 23:break;case 22:var Ye=ne.stateNode;ne.memoizedState!==null?Ye._visibility&2?D0(B,ne,ce,Ee,R):rb(B,ne):(Ye._visibility|=2,D0(B,ne,ce,Ee,R)),R&&Ue&2048&&Z_(ne.alternate,ne);break;case 24:D0(B,ne,ce,Ee,R),R&&Ue&2048&&eI(ne.alternate,ne);break;default:D0(B,ne,ce,Ee,R)}p=p.sibling}}function rb(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var y=f,E=p,R=E.flags;switch(E.tag){case 22:rb(y,E),R&2048&&Z_(E.alternate,E);break;case 24:rb(y,E),R&2048&&eI(E.alternate,E);break;default:rb(y,E)}p=p.sibling}}var ib=8192;function j0(f,p,y){if(f.subtreeFlags&ib)for(f=f.child;f!==null;)b9(f,p,y),f=f.sibling}function b9(f,p,y){switch(f.tag){case 26:j0(f,p,y),f.flags&ib&&f.memoizedState!==null&&Ixe(y,pl,f.memoizedState,f.memoizedProps);break;case 5:j0(f,p,y);break;case 3:case 4:var E=pl;pl=US(f.stateNode.containerInfo),j0(f,p,y),pl=E;break;case 22:f.memoizedState===null&&(E=f.alternate,E!==null&&E.memoizedState!==null?(E=ib,ib=16777216,j0(f,p,y),ib=E):j0(f,p,y));break;default:j0(f,p,y)}}function w9(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function sb(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];Mi=E,S9(E,f)}w9(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)E9(f),f=f.sibling}function E9(f){switch(f.tag){case 0:case 11:case 15:sb(f),f.flags&2048&&ff(9,f,f.return);break;case 3:sb(f);break;case 12:sb(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,kS(f)):sb(f);break;default:sb(f)}}function kS(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];Mi=E,S9(E,f)}w9(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:ff(8,p,p.return),kS(p);break;case 22:y=p.stateNode,y._visibility&2&&(y._visibility&=-3,kS(p));break;default:kS(p)}f=f.sibling}}function S9(f,p){for(;Mi!==null;){var y=Mi;switch(y.tag){case 0:case 11:case 15:ff(8,y,p);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var E=y.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:zv(y.memoizedState.cache)}if(E=y.child,E!==null)E.return=y,Mi=E;else e:for(y=f;Mi!==null;){E=Mi;var R=E.sibling,B=E.return;if(h9(E),E===y){Mi=null;break e}if(R!==null){R.return=B,Mi=R;break e}Mi=B}}}var Gye={getCacheForType:function(f){var p=Zi(ci),y=p.data.get(f);return y===void 0&&(y=f(),p.data.set(f,y)),y},cacheSignal:function(){return Zi(ci).controller.signal}},Kye=typeof WeakMap=="function"?WeakMap:Map,Hn=0,lr=null,wn=null,kn=0,Yn=0,Ho=null,hf=!1,B0=!1,tI=!1,Eu=0,Vr=0,pf=0,cp=0,nI=0,qo=0,U0=0,ob=null,bo=null,rI=!1,NS=0,A9=0,CS=1/0,PS=null,mf=null,Si=0,gf=null,F0=null,Su=0,iI=0,sI=null,T9=null,ab=0,oI=null;function Go(){return(Hn&2)!==0&&kn!==0?kn&-kn:L.T!==null?fI():qt()}function k9(){if(qo===0)if((kn&536870912)===0||Cn){var f=wt;wt<<=1,(wt&3932160)===0&&(wt=262144),qo=f}else qo=536870912;return f=zo.current,f!==null&&(f.flags|=32),qo}function wo(f,p,y){(f===lr&&(Yn===2||Yn===9)||f.cancelPendingCommit!==null)&&($0(f,0),yf(f,kn,qo,!1)),Q(f,y),((Hn&2)===0||f!==lr)&&(f===lr&&((Hn&2)===0&&(cp|=y),Vr===4&&yf(f,kn,qo,!1)),sc(f))}function N9(f,p,y){if((Hn&6)!==0)throw Error(r(327));var E=!y&&(p&127)===0&&(p&f.expiredLanes)===0||rn(f,p),R=E?Jye(f,p):lI(f,p,!0),B=E;do{if(R===0){B0&&!E&&yf(f,p,0,!1);break}else{if(y=f.current.alternate,B&&!Wye(y)){R=lI(f,p,!1),B=!1;continue}if(R===2){if(B=p,f.errorRecoveryDisabledLanes&B)var ne=0;else ne=f.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){p=ne;e:{var ce=f;R=ob;var Ee=ce.current.memoizedState.isDehydrated;if(Ee&&($0(ce,ne).flags|=256),ne=lI(ce,ne,!1),ne!==2){if(tI&&!Ee){ce.errorRecoveryDisabledLanes|=B,cp|=B,R=4;break e}B=bo,bo=R,B!==null&&(bo===null?bo=B:bo.push.apply(bo,B))}R=ne}if(B=!1,R!==2)continue}}if(R===1){$0(f,0),yf(f,p,0,!0);break}e:{switch(E=f,B=R,B){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:yf(E,p,qo,!hf);break e;case 2:bo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(R=NS+300-et(),10<R)){if(yf(E,p,qo,!hf),tn(E,0,!0)!==0)break e;Su=p,E.timeoutHandle=i$(C9.bind(null,E,y,bo,PS,rI,p,qo,cp,U0,hf,B,"Throttled",-0,0),R);break e}C9(E,y,bo,PS,rI,p,qo,cp,U0,hf,B,null,-0,0)}}break}while(!0);sc(f)}function C9(f,p,y,E,R,B,ne,ce,Ee,Ue,Ye,nt,$e,Ge){if(f.timeoutHandle=-1,nt=p.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lu},b9(p,B,nt);var Rt=(B&62914560)===B?NS-et():(B&4194048)===B?A9-et():0;if(Rt=Rxe(nt,Rt),Rt!==null){Su=B,f.cancelPendingCommit=Rt(D9.bind(null,f,p,B,y,E,R,ne,ce,Ee,Ye,nt,null,$e,Ge)),yf(f,B,ne,!Ue);return}}D9(f,p,B,y,E,R,ne,ce,Ee)}function Wye(f){for(var p=f;;){var y=p.tag;if((y===0||y===11||y===15)&&p.flags&16384&&(y=p.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var E=0;E<y.length;E++){var R=y[E],B=R.getSnapshot;R=R.value;try{if(!Fo(B(),R))return!1}catch{return!1}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function yf(f,p,y,E){p&=~nI,p&=~cp,f.suspendedLanes|=p,f.pingedLanes&=~p,E&&(f.warmLanes|=p),E=f.expirationTimes;for(var R=p;0<R;){var B=31-ge(R),ne=1<<B;E[B]=-1,R&=~ne}y!==0&&fe(f,y,p)}function _S(){return(Hn&6)===0?(lb(0),!1):!0}function aI(){if(wn!==null){if(Yn===0)var f=wn.return;else f=wn,fu=ep=null,S_(f),I0=null,Hv=0,f=wn;for(;f!==null;)s9(f.alternate,f),f=f.return;wn=null}}function $0(f,p){var y=f.timeoutHandle;y!==-1&&(f.timeoutHandle=-1,pxe(y)),y=f.cancelPendingCommit,y!==null&&(f.cancelPendingCommit=null,y()),Su=0,aI(),lr=f,wn=y=uu(f.current,null),kn=p,Yn=0,Ho=null,hf=!1,B0=rn(f,p),tI=!1,U0=qo=nI=cp=pf=Vr=0,bo=ob=null,rI=!1,(p&8)!==0&&(p|=p&32);var E=f.entangledLanes;if(E!==0)for(f=f.entanglements,E&=p;0<E;){var R=31-ge(E),B=1<<R;p|=f[R],E&=~B}return Eu=p,XE(),y}function P9(f,p){on=null,L.H=Qv,p===_0||p===sS?(p=qU(),Yn=3):p===d_?(p=qU(),Yn=4):Yn=p===U_?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Ho=p,wn===null&&(Vr=1,vS(f,ba(p,f.current)))}function _9(){var f=zo.current;return f===null?!0:(kn&4194048)===kn?Aa===null:(kn&62914560)===kn||(kn&536870912)!==0?f===Aa:!1}function I9(){var f=L.H;return L.H=Qv,f===null?Qv:f}function R9(){var f=L.A;return L.A=Gye,f}function IS(){Vr=4,hf||(kn&4194048)!==kn&&zo.current!==null||(B0=!0),(pf&134217727)===0&&(cp&134217727)===0||lr===null||yf(lr,kn,qo,!1)}function lI(f,p,y){var E=Hn;Hn|=2;var R=I9(),B=R9();(lr!==f||kn!==p)&&(PS=null,$0(f,p)),p=!1;var ne=Vr;e:do try{if(Yn!==0&&wn!==null){var ce=wn,Ee=Ho;switch(Yn){case 8:aI(),ne=6;break e;case 3:case 2:case 9:case 6:zo.current===null&&(p=!0);var Ue=Yn;if(Yn=0,Ho=null,z0(f,ce,Ee,Ue),y&&B0){ne=0;break e}break;default:Ue=Yn,Yn=0,Ho=null,z0(f,ce,Ee,Ue)}}Yye(),ne=Vr;break}catch(Ye){P9(f,Ye)}while(!0);return p&&f.shellSuspendCounter++,fu=ep=null,Hn=E,L.H=R,L.A=B,wn===null&&(lr=null,kn=0,XE()),ne}function Yye(){for(;wn!==null;)O9(wn)}function Jye(f,p){var y=Hn;Hn|=2;var E=I9(),R=R9();lr!==f||kn!==p?(PS=null,CS=et()+500,$0(f,p)):B0=rn(f,p);e:do try{if(Yn!==0&&wn!==null){p=wn;var B=Ho;t:switch(Yn){case 1:Yn=0,Ho=null,z0(f,p,B,1);break;case 2:case 9:if(VU(B)){Yn=0,Ho=null,M9(p);break}p=function(){Yn!==2&&Yn!==9||lr!==f||(Yn=7),sc(f)},B.then(p,p);break e;case 3:Yn=7;break e;case 4:Yn=5;break e;case 7:VU(B)?(Yn=0,Ho=null,M9(p)):(Yn=0,Ho=null,z0(f,p,B,7));break;case 5:var ne=null;switch(wn.tag){case 26:ne=wn.memoizedState;case 5:case 27:var ce=wn;if(ne?v$(ne):ce.stateNode.complete){Yn=0,Ho=null;var Ee=ce.sibling;if(Ee!==null)wn=Ee;else{var Ue=ce.return;Ue!==null?(wn=Ue,RS(Ue)):wn=null}break t}}Yn=0,Ho=null,z0(f,p,B,5);break;case 6:Yn=0,Ho=null,z0(f,p,B,6);break;case 8:aI(),Vr=6;break e;default:throw Error(r(462))}}Xye();break}catch(Ye){P9(f,Ye)}while(!0);return fu=ep=null,L.H=E,L.A=R,Hn=y,wn!==null?0:(lr=null,kn=0,XE(),Vr)}function Xye(){for(;wn!==null&&!Je();)O9(wn)}function O9(f){var p=r9(f.alternate,f,Eu);f.memoizedProps=f.pendingProps,p===null?RS(f):wn=p}function M9(f){var p=f,y=p.alternate;switch(p.tag){case 15:case 0:p=XF(y,p,p.pendingProps,p.type,void 0,kn);break;case 11:p=XF(y,p,p.pendingProps,p.type.render,p.ref,kn);break;case 5:S_(p);default:s9(y,p),p=wn=RU(p,Eu),p=r9(y,p,Eu)}f.memoizedProps=f.pendingProps,p===null?RS(f):wn=p}function z0(f,p,y,E){fu=ep=null,S_(p),I0=null,Hv=0;var R=p.return;try{if(Uye(f,R,p,y,kn)){Vr=1,vS(f,ba(y,f.current)),wn=null;return}}catch(B){if(R!==null)throw wn=R,B;Vr=1,vS(f,ba(y,f.current)),wn=null;return}p.flags&32768?(Cn||E===1?f=!0:B0||(kn&536870912)!==0?f=!1:(hf=f=!0,(E===2||E===9||E===3||E===6)&&(E=zo.current,E!==null&&E.tag===13&&(E.flags|=16384))),L9(p,f)):RS(p)}function RS(f){var p=f;do{if((p.flags&32768)!==0){L9(p,hf);return}f=p.return;var y=zye(p.alternate,p,Eu);if(y!==null){wn=y;return}if(p=p.sibling,p!==null){wn=p;return}wn=p=f}while(p!==null);Vr===0&&(Vr=5)}function L9(f,p){do{var y=Vye(f.alternate,f);if(y!==null){y.flags&=32767,wn=y;return}if(y=f.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!p&&(f=f.sibling,f!==null)){wn=f;return}wn=f=y}while(f!==null);Vr=6,wn=null}function D9(f,p,y,E,R,B,ne,ce,Ee){f.cancelPendingCommit=null;do OS();while(Si!==0);if((Hn&6)!==0)throw Error(r(327));if(p!==null){if(p===f.current)throw Error(r(177));if(B=p.lanes|p.childLanes,B|=JP,ee(f,y,B,ne,ce,Ee),f===lr&&(wn=lr=null,kn=0),F0=p,gf=f,Su=y,iI=B,sI=R,T9=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,txe(yt,function(){return $9(),null})):(f.callbackNode=null,f.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=L.T,L.T=null,R=q.p,q.p=2,ne=Hn,Hn|=4;try{Hye(f,p,y)}finally{Hn=ne,q.p=R,L.T=E}}Si=1,j9(),B9(),U9()}}function j9(){if(Si===1){Si=0;var f=gf,p=F0,y=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||y){y=L.T,L.T=null;var E=q.p;q.p=2;var R=Hn;Hn|=4;try{y9(p,f);var B=bI,ne=SU(f.containerInfo),ce=B.focusedElem,Ee=B.selectionRange;if(ne!==ce&&ce&&ce.ownerDocument&&EU(ce.ownerDocument.documentElement,ce)){if(Ee!==null&&qP(ce)){var Ue=Ee.start,Ye=Ee.end;if(Ye===void 0&&(Ye=Ue),"selectionStart"in ce)ce.selectionStart=Ue,ce.selectionEnd=Math.min(Ye,ce.value.length);else{var nt=ce.ownerDocument||document,$e=nt&&nt.defaultView||window;if($e.getSelection){var Ge=$e.getSelection(),Rt=ce.textContent.length,Yt=Math.min(Ee.start,Rt),nr=Ee.end===void 0?Yt:Math.min(Ee.end,Rt);!Ge.extend&&Yt>nr&&(ne=nr,nr=Yt,Yt=ne);var Re=wU(ce,Yt),Ce=wU(ce,nr);if(Re&&Ce&&(Ge.rangeCount!==1||Ge.anchorNode!==Re.node||Ge.anchorOffset!==Re.offset||Ge.focusNode!==Ce.node||Ge.focusOffset!==Ce.offset)){var Be=nt.createRange();Be.setStart(Re.node,Re.offset),Ge.removeAllRanges(),Yt>nr?(Ge.addRange(Be),Ge.extend(Ce.node,Ce.offset)):(Be.setEnd(Ce.node,Ce.offset),Ge.addRange(Be))}}}}for(nt=[],Ge=ce;Ge=Ge.parentNode;)Ge.nodeType===1&&nt.push({element:Ge,left:Ge.scrollLeft,top:Ge.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<nt.length;ce++){var Ze=nt[ce];Ze.element.scrollLeft=Ze.left,Ze.element.scrollTop=Ze.top}}qS=!!vI,bI=vI=null}finally{Hn=R,q.p=E,L.T=y}}f.current=p,Si=2}}function B9(){if(Si===2){Si=0;var f=gf,p=F0,y=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||y){y=L.T,L.T=null;var E=q.p;q.p=2;var R=Hn;Hn|=4;try{f9(f,p.alternate,p)}finally{Hn=R,q.p=E,L.T=y}}Si=3}}function U9(){if(Si===4||Si===3){Si=0,Le();var f=gf,p=F0,y=Su,E=T9;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Si=5:(Si=0,F0=gf=null,F9(f,f.pendingLanes));var R=f.pendingLanes;if(R===0&&(mf=null),Qt(y),p=p.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(ue,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=L.T,R=q.p,q.p=2,L.T=null;try{for(var B=f.onRecoverableError,ne=0;ne<E.length;ne++){var ce=E[ne];B(ce.value,{componentStack:ce.stack})}}finally{L.T=p,q.p=R}}(Su&3)!==0&&OS(),sc(f),R=f.pendingLanes,(y&261930)!==0&&(R&42)!==0?f===oI?ab++:(ab=0,oI=f):ab=0,lb(0)}}function F9(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,zv(p)))}function OS(){return j9(),B9(),U9(),$9()}function $9(){if(Si!==5)return!1;var f=gf,p=iI;iI=0;var y=Qt(Su),E=L.T,R=q.p;try{q.p=32>y?32:y,L.T=null,y=sI,sI=null;var B=gf,ne=Su;if(Si=0,F0=gf=null,Su=0,(Hn&6)!==0)throw Error(r(331));var ce=Hn;if(Hn|=4,E9(B.current),v9(B,B.current,ne,y),Hn=ce,lb(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(ue,B)}catch{}return!0}finally{q.p=R,L.T=E,F9(f,p)}}function z9(f,p,y){p=ba(y,p),p=B_(f.stateNode,p,2),f=cf(f,p,2),f!==null&&(Q(f,2),sc(f))}function Jn(f,p,y){if(f.tag===3)z9(f,f,y);else for(;p!==null;){if(p.tag===3){z9(p,f,y);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(mf===null||!mf.has(E))){f=ba(y,f),y=VF(2),E=cf(p,y,2),E!==null&&(HF(y,E,p,f),Q(E,2),sc(E));break}}p=p.return}}function cI(f,p,y){var E=f.pingCache;if(E===null){E=f.pingCache=new Kye;var R=new Set;E.set(p,R)}else R=E.get(p),R===void 0&&(R=new Set,E.set(p,R));R.has(y)||(tI=!0,R.add(y),f=Qye.bind(null,f,p,y),p.then(f,f))}function Qye(f,p,y){var E=f.pingCache;E!==null&&E.delete(p),f.pingedLanes|=f.suspendedLanes&y,f.warmLanes&=~y,lr===f&&(kn&y)===y&&(Vr===4||Vr===3&&(kn&62914560)===kn&&300>et()-NS?(Hn&2)===0&&$0(f,0):nI|=y,U0===kn&&(U0=0)),sc(f)}function V9(f,p){p===0&&(p=Vn()),f=Xh(f,p),f!==null&&(Q(f,p),sc(f))}function Zye(f){var p=f.memoizedState,y=0;p!==null&&(y=p.retryLane),V9(f,y)}function exe(f,p){var y=0;switch(f.tag){case 31:case 13:var E=f.stateNode,R=f.memoizedState;R!==null&&(y=R.retryLane);break;case 19:E=f.stateNode;break;case 22:E=f.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(p),V9(f,y)}function txe(f,p){return st(f,p)}var MS=null,V0=null,uI=!1,LS=!1,dI=!1,xf=0;function sc(f){f!==V0&&f.next===null&&(V0===null?MS=V0=f:V0=V0.next=f),LS=!0,uI||(uI=!0,rxe())}function lb(f,p){if(!dI&&LS){dI=!0;do for(var y=!1,E=MS;E!==null;){if(f!==0){var R=E.pendingLanes;if(R===0)var B=0;else{var ne=E.suspendedLanes,ce=E.pingedLanes;B=(1<<31-ge(42|f)+1)-1,B&=R&~(ne&~ce),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(y=!0,K9(E,B))}else B=kn,B=tn(E,E===lr?B:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(B&3)===0||rn(E,B)||(y=!0,K9(E,B));E=E.next}while(y);dI=!1}}function nxe(){H9()}function H9(){LS=uI=!1;var f=0;xf!==0&&hxe()&&(f=xf);for(var p=et(),y=null,E=MS;E!==null;){var R=E.next,B=q9(E,p);B===0?(E.next=null,y===null?MS=R:y.next=R,R===null&&(V0=y)):(y=E,(f!==0||(B&3)!==0)&&(LS=!0)),E=R}Si!==0&&Si!==5||lb(f),xf!==0&&(xf=0)}function q9(f,p){for(var y=f.suspendedLanes,E=f.pingedLanes,R=f.expirationTimes,B=f.pendingLanes&-62914561;0<B;){var ne=31-ge(B),ce=1<<ne,Ee=R[ne];Ee===-1?((ce&y)===0||(ce&E)!==0)&&(R[ne]=Oi(ce,p)):Ee<=p&&(f.expiredLanes|=ce),B&=~ce}if(p=lr,y=kn,y=tn(f,f===p?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E=f.callbackNode,y===0||f===p&&(Yn===2||Yn===9)||f.cancelPendingCommit!==null)return E!==null&&E!==null&&ut(E),f.callbackNode=null,f.callbackPriority=0;if((y&3)===0||rn(f,y)){if(p=y&-y,p===f.callbackPriority)return p;switch(E!==null&&ut(E),Qt(y)){case 2:case 8:y=qe;break;case 32:y=yt;break;case 268435456:y=ie;break;default:y=yt}return E=G9.bind(null,f),y=st(y,E),f.callbackPriority=p,f.callbackNode=y,p}return E!==null&&E!==null&&ut(E),f.callbackPriority=2,f.callbackNode=null,2}function G9(f,p){if(Si!==0&&Si!==5)return f.callbackNode=null,f.callbackPriority=0,null;var y=f.callbackNode;if(OS()&&f.callbackNode!==y)return null;var E=kn;return E=tn(f,f===lr?E:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E===0?null:(N9(f,E,p),q9(f,et()),f.callbackNode!=null&&f.callbackNode===y?G9.bind(null,f):null)}function K9(f,p){if(OS())return null;N9(f,p,!0)}function rxe(){mxe(function(){(Hn&6)!==0?st(Ie,nxe):H9()})}function fI(){if(xf===0){var f=C0;f===0&&(f=Vt,Vt<<=1,(Vt&261888)===0&&(Vt=256)),xf=f}return xf}function W9(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:VE(""+f)}function Y9(f,p){var y=p.ownerDocument.createElement("input");return y.name=p.name,y.value=p.value,f.id&&y.setAttribute("form",f.id),p.parentNode.insertBefore(y,p),f=new FormData(f),y.parentNode.removeChild(y),f}function ixe(f,p,y,E,R){if(p==="submit"&&y&&y.stateNode===R){var B=W9((R[bn]||null).action),ne=E.submitter;ne&&(p=(p=ne[bn]||null)?W9(p.formAction):ne.getAttribute("formAction"),p!==null&&(B=p,ne=null));var ce=new KE("action","action",null,E,R);f.push({event:ce,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(xf!==0){var Ee=ne?Y9(R,ne):new FormData(R);R_(y,{pending:!0,data:Ee,method:R.method,action:B},null,Ee)}}else typeof B=="function"&&(ce.preventDefault(),Ee=ne?Y9(R,ne):new FormData(R),R_(y,{pending:!0,data:Ee,method:R.method,action:B},B,Ee))},currentTarget:R}]})}}for(var hI=0;hI<YP.length;hI++){var pI=YP[hI],sxe=pI.toLowerCase(),oxe=pI[0].toUpperCase()+pI.slice(1);hl(sxe,"on"+oxe)}hl(kU,"onAnimationEnd"),hl(NU,"onAnimationIteration"),hl(CU,"onAnimationStart"),hl("dblclick","onDoubleClick"),hl("focusin","onFocus"),hl("focusout","onBlur"),hl(Eye,"onTransitionRun"),hl(Sye,"onTransitionStart"),hl(Aye,"onTransitionCancel"),hl(PU,"onTransitionEnd"),Zn("onMouseEnter",["mouseout","mouseover"]),Zn("onMouseLeave",["mouseout","mouseover"]),Zn("onPointerEnter",["pointerout","pointerover"]),Zn("onPointerLeave",["pointerout","pointerover"]),mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mo("onBeforeInput",["compositionend","keypress","textInput","paste"]),mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),axe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cb));function J9(f,p){p=(p&4)!==0;for(var y=0;y<f.length;y++){var E=f[y],R=E.event;E=E.listeners;e:{var B=void 0;if(p)for(var ne=E.length-1;0<=ne;ne--){var ce=E[ne],Ee=ce.instance,Ue=ce.currentTarget;if(ce=ce.listener,Ee!==B&&R.isPropagationStopped())break e;B=ce,R.currentTarget=Ue;try{B(R)}catch(Ye){JE(Ye)}R.currentTarget=null,B=Ee}else for(ne=0;ne<E.length;ne++){if(ce=E[ne],Ee=ce.instance,Ue=ce.currentTarget,ce=ce.listener,Ee!==B&&R.isPropagationStopped())break e;B=ce,R.currentTarget=Ue;try{B(R)}catch(Ye){JE(Ye)}R.currentTarget=null,B=Ee}}}}function En(f,p){var y=p[ar];y===void 0&&(y=p[ar]=new Set);var E=f+"__bubble";y.has(E)||(X9(p,f,2,!1),y.add(E))}function mI(f,p,y){var E=0;p&&(E|=4),X9(y,f,E,p)}var DS="_reactListening"+Math.random().toString(36).slice(2);function gI(f){if(!f[DS]){f[DS]=!0,su.forEach(function(y){y!=="selectionchange"&&(axe.has(y)||mI(y,!1,f),mI(y,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[DS]||(p[DS]=!0,mI("selectionchange",!1,p))}}function X9(f,p,y,E){switch(k$(p)){case 2:var R=Lxe;break;case 8:R=Dxe;break;default:R=II}y=R.bind(null,p,y,f),R=void 0,!DP||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(R=!0),E?R!==void 0?f.addEventListener(p,y,{capture:!0,passive:R}):f.addEventListener(p,y,!0):R!==void 0?f.addEventListener(p,y,{passive:R}):f.addEventListener(p,y,!1)}function yI(f,p,y,E,R){var B=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var ne=E.tag;if(ne===3||ne===4){var ce=E.stateNode.containerInfo;if(ce===R)break;if(ne===4)for(ne=E.return;ne!==null;){var Ee=ne.tag;if((Ee===3||Ee===4)&&ne.stateNode.containerInfo===R)return;ne=ne.return}for(;ce!==null;){if(ne=jo(ce),ne===null)return;if(Ee=ne.tag,Ee===5||Ee===6||Ee===26||Ee===27){E=B=ne;continue e}ce=ce.parentNode}}E=E.return}nU(function(){var Ue=B,Ye=MP(y),nt=[];e:{var $e=_U.get(f);if($e!==void 0){var Ge=KE,Rt=f;switch(f){case"keypress":if(qE(y)===0)break e;case"keydown":case"keyup":Ge=eye;break;case"focusin":Rt="focus",Ge=FP;break;case"focusout":Rt="blur",Ge=FP;break;case"beforeblur":case"afterblur":Ge=FP;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=sU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=zge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=rye;break;case kU:case NU:case CU:Ge=qge;break;case PU:Ge=sye;break;case"scroll":case"scrollend":Ge=Fge;break;case"wheel":Ge=aye;break;case"copy":case"cut":case"paste":Ge=Kge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=aU;break;case"toggle":case"beforetoggle":Ge=cye}var Yt=(p&4)!==0,nr=!Yt&&(f==="scroll"||f==="scrollend"),Re=Yt?$e!==null?$e+"Capture":null:$e;Yt=[];for(var Ce=Ue,Be;Ce!==null;){var Ze=Ce;if(Be=Ze.stateNode,Ze=Ze.tag,Ze!==5&&Ze!==26&&Ze!==27||Be===null||Re===null||(Ze=Iv(Ce,Re),Ze!=null&&Yt.push(ub(Ce,Ze,Be))),nr)break;Ce=Ce.return}0<Yt.length&&($e=new Ge($e,Rt,null,y,Ye),nt.push({event:$e,listeners:Yt}))}}if((p&7)===0){e:{if($e=f==="mouseover"||f==="pointerover",Ge=f==="mouseout"||f==="pointerout",$e&&y!==OP&&(Rt=y.relatedTarget||y.fromElement)&&(jo(Rt)||Rt[dl]))break e;if((Ge||$e)&&($e=Ye.window===Ye?Ye:($e=Ye.ownerDocument)?$e.defaultView||$e.parentWindow:window,Ge?(Rt=y.relatedTarget||y.toElement,Ge=Ue,Rt=Rt?jo(Rt):null,Rt!==null&&(nr=s(Rt),Yt=Rt.tag,Rt!==nr||Yt!==5&&Yt!==27&&Yt!==6)&&(Rt=null)):(Ge=null,Rt=Ue),Ge!==Rt)){if(Yt=sU,Ze="onMouseLeave",Re="onMouseEnter",Ce="mouse",(f==="pointerout"||f==="pointerover")&&(Yt=aU,Ze="onPointerLeave",Re="onPointerEnter",Ce="pointer"),nr=Ge==null?$e:ga(Ge),Be=Rt==null?$e:ga(Rt),$e=new Yt(Ze,Ce+"leave",Ge,y,Ye),$e.target=nr,$e.relatedTarget=Be,Ze=null,jo(Ye)===Ue&&(Yt=new Yt(Re,Ce+"enter",Rt,y,Ye),Yt.target=Be,Yt.relatedTarget=nr,Ze=Yt),nr=Ze,Ge&&Rt)t:{for(Yt=lxe,Re=Ge,Ce=Rt,Be=0,Ze=Re;Ze;Ze=Yt(Ze))Be++;Ze=0;for(var Ht=Ce;Ht;Ht=Yt(Ht))Ze++;for(;0<Be-Ze;)Re=Yt(Re),Be--;for(;0<Ze-Be;)Ce=Yt(Ce),Ze--;for(;Be--;){if(Re===Ce||Ce!==null&&Re===Ce.alternate){Yt=Re;break t}Re=Yt(Re),Ce=Yt(Ce)}Yt=null}else Yt=null;Ge!==null&&Q9(nt,$e,Ge,Yt,!1),Rt!==null&&nr!==null&&Q9(nt,nr,Rt,Yt,!0)}}e:{if($e=Ue?ga(Ue):window,Ge=$e.nodeName&&$e.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&$e.type==="file")var Ln=mU;else if(hU($e))if(gU)Ln=vye;else{Ln=yye;var jt=gye}else Ge=$e.nodeName,!Ge||Ge.toLowerCase()!=="input"||$e.type!=="checkbox"&&$e.type!=="radio"?Ue&&RP(Ue.elementType)&&(Ln=mU):Ln=xye;if(Ln&&(Ln=Ln(f,Ue))){pU(nt,Ln,y,Ye);break e}jt&&jt(f,$e,Ue),f==="focusout"&&Ue&&$e.type==="number"&&Ue.memoizedProps.value!=null&&IP($e,"number",$e.value)}switch(jt=Ue?ga(Ue):window,f){case"focusin":(hU(jt)||jt.contentEditable==="true")&&(b0=jt,GP=Ue,Uv=null);break;case"focusout":Uv=GP=b0=null;break;case"mousedown":KP=!0;break;case"contextmenu":case"mouseup":case"dragend":KP=!1,AU(nt,y,Ye);break;case"selectionchange":if(wye)break;case"keydown":case"keyup":AU(nt,y,Ye)}var cn;if(zP)e:{switch(f){case"compositionstart":var Nn="onCompositionStart";break e;case"compositionend":Nn="onCompositionEnd";break e;case"compositionupdate":Nn="onCompositionUpdate";break e}Nn=void 0}else v0?dU(f,y)&&(Nn="onCompositionEnd"):f==="keydown"&&y.keyCode===229&&(Nn="onCompositionStart");Nn&&(lU&&y.locale!=="ko"&&(v0||Nn!=="onCompositionStart"?Nn==="onCompositionEnd"&&v0&&(cn=rU()):(tf=Ye,jP="value"in tf?tf.value:tf.textContent,v0=!0)),jt=jS(Ue,Nn),0<jt.length&&(Nn=new oU(Nn,f,null,y,Ye),nt.push({event:Nn,listeners:jt}),cn?Nn.data=cn:(cn=fU(y),cn!==null&&(Nn.data=cn)))),(cn=dye?fye(f,y):hye(f,y))&&(Nn=jS(Ue,"onBeforeInput"),0<Nn.length&&(jt=new oU("onBeforeInput","beforeinput",null,y,Ye),nt.push({event:jt,listeners:Nn}),jt.data=cn)),ixe(nt,f,Ue,y,Ye)}J9(nt,p)})}function ub(f,p,y){return{instance:f,listener:p,currentTarget:y}}function jS(f,p){for(var y=p+"Capture",E=[];f!==null;){var R=f,B=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||B===null||(R=Iv(f,y),R!=null&&E.unshift(ub(f,R,B)),R=Iv(f,p),R!=null&&E.push(ub(f,R,B))),f.tag===3)return E;f=f.return}return[]}function lxe(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function Q9(f,p,y,E,R){for(var B=p._reactName,ne=[];y!==null&&y!==E;){var ce=y,Ee=ce.alternate,Ue=ce.stateNode;if(ce=ce.tag,Ee!==null&&Ee===E)break;ce!==5&&ce!==26&&ce!==27||Ue===null||(Ee=Ue,R?(Ue=Iv(y,B),Ue!=null&&ne.unshift(ub(y,Ue,Ee))):R||(Ue=Iv(y,B),Ue!=null&&ne.push(ub(y,Ue,Ee)))),y=y.return}ne.length!==0&&f.push({event:p,listeners:ne})}var cxe=/\r\n?/g,uxe=/\u0000|\uFFFD/g;function Z9(f){return(typeof f=="string"?f:""+f).replace(cxe,`
`).replace(uxe,"")}function e$(f,p){return p=Z9(p),Z9(f)===p}function tr(f,p,y,E,R,B){switch(y){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||g0(f,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&g0(f,""+E);break;case"className":ef(f,"class",E);break;case"tabIndex":ef(f,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ef(f,y,E);break;case"style":eU(f,E,B);break;case"data":if(p!=="object"){ef(f,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||y!=="href")){f.removeAttribute(y);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(y);break}E=VE(""+E),f.setAttribute(y,E);break;case"action":case"formAction":if(typeof E=="function"){f.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof B=="function"&&(y==="formAction"?(p!=="input"&&tr(f,p,"name",R.name,R,null),tr(f,p,"formEncType",R.formEncType,R,null),tr(f,p,"formMethod",R.formMethod,R,null),tr(f,p,"formTarget",R.formTarget,R,null)):(tr(f,p,"encType",R.encType,R,null),tr(f,p,"method",R.method,R,null),tr(f,p,"target",R.target,R,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(y);break}E=VE(""+E),f.setAttribute(y,E);break;case"onClick":E!=null&&(f.onclick=lu);break;case"onScroll":E!=null&&En("scroll",f);break;case"onScrollEnd":E!=null&&En("scrollend",f);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(y=E.__html,y!=null){if(R.children!=null)throw Error(r(60));f.innerHTML=y}}break;case"multiple":f.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":f.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){f.removeAttribute("xlink:href");break}y=VE(""+E),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(y,""+E):f.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(y,""):f.removeAttribute(y);break;case"capture":case"download":E===!0?f.setAttribute(y,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(y,E):f.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?f.setAttribute(y,E):f.removeAttribute(y);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?f.removeAttribute(y):f.setAttribute(y,E);break;case"popover":En("beforetoggle",f),En("toggle",f),Zd(f,"popover",E);break;case"xlinkActuate":au(f,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":au(f,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":au(f,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":au(f,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":au(f,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":au(f,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":au(f,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":au(f,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":au(f,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Zd(f,"is",E);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Bge.get(y)||y,Zd(f,y,E))}}function xI(f,p,y,E,R,B){switch(y){case"style":eU(f,E,B);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(y=E.__html,y!=null){if(R.children!=null)throw Error(r(60));f.innerHTML=y}}break;case"children":typeof E=="string"?g0(f,E):(typeof E=="number"||typeof E=="bigint")&&g0(f,""+E);break;case"onScroll":E!=null&&En("scroll",f);break;case"onScrollEnd":E!=null&&En("scrollend",f);break;case"onClick":E!=null&&(f.onclick=lu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ou.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(R=y.endsWith("Capture"),p=y.slice(2,R?y.length-7:void 0),B=f[bn]||null,B=B!=null?B[y]:null,typeof B=="function"&&f.removeEventListener(p,B,R),typeof E=="function")){typeof B!="function"&&B!==null&&(y in f?f[y]=null:f.hasAttribute(y)&&f.removeAttribute(y)),f.addEventListener(p,E,R);break e}y in f?f[y]=E:E===!0?f.setAttribute(y,""):Zd(f,y,E)}}}function ts(f,p,y){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":En("error",f),En("load",f);var E=!1,R=!1,B;for(B in y)if(y.hasOwnProperty(B)){var ne=y[B];if(ne!=null)switch(B){case"src":E=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:tr(f,p,B,ne,y,null)}}R&&tr(f,p,"srcSet",y.srcSet,y,null),E&&tr(f,p,"src",y.src,y,null);return;case"input":En("invalid",f);var ce=B=ne=R=null,Ee=null,Ue=null;for(E in y)if(y.hasOwnProperty(E)){var Ye=y[E];if(Ye!=null)switch(E){case"name":R=Ye;break;case"type":ne=Ye;break;case"checked":Ee=Ye;break;case"defaultChecked":Ue=Ye;break;case"value":B=Ye;break;case"defaultValue":ce=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,p));break;default:tr(f,p,E,Ye,y,null)}}J7(f,B,ce,Ee,Ue,ne,R,!1);return;case"select":En("invalid",f),E=ne=B=null;for(R in y)if(y.hasOwnProperty(R)&&(ce=y[R],ce!=null))switch(R){case"value":B=ce;break;case"defaultValue":ne=ce;break;case"multiple":E=ce;default:tr(f,p,R,ce,y,null)}p=B,y=ne,f.multiple=!!E,p!=null?m0(f,!!E,p,!1):y!=null&&m0(f,!!E,y,!0);return;case"textarea":En("invalid",f),B=R=E=null;for(ne in y)if(y.hasOwnProperty(ne)&&(ce=y[ne],ce!=null))switch(ne){case"value":E=ce;break;case"defaultValue":R=ce;break;case"children":B=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(91));break;default:tr(f,p,ne,ce,y,null)}Q7(f,E,R,B);return;case"option":for(Ee in y)if(y.hasOwnProperty(Ee)&&(E=y[Ee],E!=null))switch(Ee){case"selected":f.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:tr(f,p,Ee,E,y,null)}return;case"dialog":En("beforetoggle",f),En("toggle",f),En("cancel",f),En("close",f);break;case"iframe":case"object":En("load",f);break;case"video":case"audio":for(E=0;E<cb.length;E++)En(cb[E],f);break;case"image":En("error",f),En("load",f);break;case"details":En("toggle",f);break;case"embed":case"source":case"link":En("error",f),En("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ue in y)if(y.hasOwnProperty(Ue)&&(E=y[Ue],E!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:tr(f,p,Ue,E,y,null)}return;default:if(RP(p)){for(Ye in y)y.hasOwnProperty(Ye)&&(E=y[Ye],E!==void 0&&xI(f,p,Ye,E,y,void 0));return}}for(ce in y)y.hasOwnProperty(ce)&&(E=y[ce],E!=null&&tr(f,p,ce,E,y,null))}function dxe(f,p,y,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,B=null,ne=null,ce=null,Ee=null,Ue=null,Ye=null;for(Ge in y){var nt=y[Ge];if(y.hasOwnProperty(Ge)&&nt!=null)switch(Ge){case"checked":break;case"value":break;case"defaultValue":Ee=nt;default:E.hasOwnProperty(Ge)||tr(f,p,Ge,null,E,nt)}}for(var $e in E){var Ge=E[$e];if(nt=y[$e],E.hasOwnProperty($e)&&(Ge!=null||nt!=null))switch($e){case"type":B=Ge;break;case"name":R=Ge;break;case"checked":Ue=Ge;break;case"defaultChecked":Ye=Ge;break;case"value":ne=Ge;break;case"defaultValue":ce=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(137,p));break;default:Ge!==nt&&tr(f,p,$e,Ge,E,nt)}}_P(f,ne,ce,Ee,Ue,Ye,B,R);return;case"select":Ge=ne=ce=$e=null;for(B in y)if(Ee=y[B],y.hasOwnProperty(B)&&Ee!=null)switch(B){case"value":break;case"multiple":Ge=Ee;default:E.hasOwnProperty(B)||tr(f,p,B,null,E,Ee)}for(R in E)if(B=E[R],Ee=y[R],E.hasOwnProperty(R)&&(B!=null||Ee!=null))switch(R){case"value":$e=B;break;case"defaultValue":ce=B;break;case"multiple":ne=B;default:B!==Ee&&tr(f,p,R,B,E,Ee)}p=ce,y=ne,E=Ge,$e!=null?m0(f,!!y,$e,!1):!!E!=!!y&&(p!=null?m0(f,!!y,p,!0):m0(f,!!y,y?[]:"",!1));return;case"textarea":Ge=$e=null;for(ce in y)if(R=y[ce],y.hasOwnProperty(ce)&&R!=null&&!E.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:tr(f,p,ce,null,E,R)}for(ne in E)if(R=E[ne],B=y[ne],E.hasOwnProperty(ne)&&(R!=null||B!=null))switch(ne){case"value":$e=R;break;case"defaultValue":Ge=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==B&&tr(f,p,ne,R,E,B)}X7(f,$e,Ge);return;case"option":for(var Rt in y)if($e=y[Rt],y.hasOwnProperty(Rt)&&$e!=null&&!E.hasOwnProperty(Rt))switch(Rt){case"selected":f.selected=!1;break;default:tr(f,p,Rt,null,E,$e)}for(Ee in E)if($e=E[Ee],Ge=y[Ee],E.hasOwnProperty(Ee)&&$e!==Ge&&($e!=null||Ge!=null))switch(Ee){case"selected":f.selected=$e&&typeof $e!="function"&&typeof $e!="symbol";break;default:tr(f,p,Ee,$e,E,Ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in y)$e=y[Yt],y.hasOwnProperty(Yt)&&$e!=null&&!E.hasOwnProperty(Yt)&&tr(f,p,Yt,null,E,$e);for(Ue in E)if($e=E[Ue],Ge=y[Ue],E.hasOwnProperty(Ue)&&$e!==Ge&&($e!=null||Ge!=null))switch(Ue){case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(r(137,p));break;default:tr(f,p,Ue,$e,E,Ge)}return;default:if(RP(p)){for(var nr in y)$e=y[nr],y.hasOwnProperty(nr)&&$e!==void 0&&!E.hasOwnProperty(nr)&&xI(f,p,nr,void 0,E,$e);for(Ye in E)$e=E[Ye],Ge=y[Ye],!E.hasOwnProperty(Ye)||$e===Ge||$e===void 0&&Ge===void 0||xI(f,p,Ye,$e,E,Ge);return}}for(var Re in y)$e=y[Re],y.hasOwnProperty(Re)&&$e!=null&&!E.hasOwnProperty(Re)&&tr(f,p,Re,null,E,$e);for(nt in E)$e=E[nt],Ge=y[nt],!E.hasOwnProperty(nt)||$e===Ge||$e==null&&Ge==null||tr(f,p,nt,$e,E,Ge)}function t$(f){switch(f){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fxe(){if(typeof performance.getEntriesByType=="function"){for(var f=0,p=0,y=performance.getEntriesByType("resource"),E=0;E<y.length;E++){var R=y[E],B=R.transferSize,ne=R.initiatorType,ce=R.duration;if(B&&ce&&t$(ne)){for(ne=0,ce=R.responseEnd,E+=1;E<y.length;E++){var Ee=y[E],Ue=Ee.startTime;if(Ue>ce)break;var Ye=Ee.transferSize,nt=Ee.initiatorType;Ye&&t$(nt)&&(Ee=Ee.responseEnd,ne+=Ye*(Ee<ce?1:(ce-Ue)/(Ee-Ue)))}if(--E,p+=8*(B+ne)/(R.duration/1e3),f++,10<f)break}}if(0<f)return p/f/1e6}return navigator.connection&&(f=navigator.connection.downlink,typeof f=="number")?f:5}var vI=null,bI=null;function BS(f){return f.nodeType===9?f:f.ownerDocument}function n$(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r$(f,p){if(f===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&p==="foreignObject"?0:f}function wI(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var EI=null;function hxe(){var f=window.event;return f&&f.type==="popstate"?f===EI?!1:(EI=f,!0):(EI=null,!1)}var i$=typeof setTimeout=="function"?setTimeout:void 0,pxe=typeof clearTimeout=="function"?clearTimeout:void 0,s$=typeof Promise=="function"?Promise:void 0,mxe=typeof queueMicrotask=="function"?queueMicrotask:typeof s$<"u"?function(f){return s$.resolve(null).then(f).catch(gxe)}:i$;function gxe(f){setTimeout(function(){throw f})}function vf(f){return f==="head"}function o$(f,p){var y=p,E=0;do{var R=y.nextSibling;if(f.removeChild(y),R&&R.nodeType===8)if(y=R.data,y==="/$"||y==="/&"){if(E===0){f.removeChild(R),K0(p);return}E--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")E++;else if(y==="html")db(f.ownerDocument.documentElement);else if(y==="head"){y=f.ownerDocument.head,db(y);for(var B=y.firstChild;B;){var ne=B.nextSibling,ce=B.nodeName;B[Do]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&B.rel.toLowerCase()==="stylesheet"||y.removeChild(B),B=ne}}else y==="body"&&db(f.ownerDocument.body);y=R}while(y);K0(p)}function a$(f,p){var y=f;f=0;do{var E=y.nextSibling;if(y.nodeType===1?p?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(p?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),E&&E.nodeType===8)if(y=E.data,y==="/$"){if(f===0)break;f--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||f++;y=E}while(y)}function SI(f){var p=f.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var y=p;switch(p=p.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":SI(y),fl(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}f.removeChild(y)}}function yxe(f,p,y,E){for(;f.nodeType===1;){var R=y;if(f.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(E){if(!f[Do])switch(p){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(B=f.getAttribute("rel"),B==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(B!==R.rel||f.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||f.getAttribute("title")!==(R.title==null?null:R.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(B=f.getAttribute("src"),(B!==(R.src==null?null:R.src)||f.getAttribute("type")!==(R.type==null?null:R.type)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&B&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(p==="input"&&f.type==="hidden"){var B=R.name==null?null:""+R.name;if(R.type==="hidden"&&f.getAttribute("name")===B)return f}else return f;if(f=Ta(f.nextSibling),f===null)break}return null}function xxe(f,p,y){if(p==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!y||(f=Ta(f.nextSibling),f===null))return null;return f}function l$(f,p){for(;f.nodeType!==8;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!p||(f=Ta(f.nextSibling),f===null))return null;return f}function AI(f){return f.data==="$?"||f.data==="$~"}function TI(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState!=="loading"}function vxe(f,p){var y=f.ownerDocument;if(f.data==="$~")f._reactRetry=p;else if(f.data!=="$?"||y.readyState!=="loading")p();else{var E=function(){p(),y.removeEventListener("DOMContentLoaded",E)};y.addEventListener("DOMContentLoaded",E),f._reactRetry=E}}function Ta(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return f}var kI=null;function c$(f){f=f.nextSibling;for(var p=0;f;){if(f.nodeType===8){var y=f.data;if(y==="/$"||y==="/&"){if(p===0)return Ta(f.nextSibling);p--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||p++}f=f.nextSibling}return null}function u$(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var y=f.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(p===0)return f;p--}else y!=="/$"&&y!=="/&"||p++}f=f.previousSibling}return null}function d$(f,p,y){switch(p=BS(y),f){case"html":if(f=p.documentElement,!f)throw Error(r(452));return f;case"head":if(f=p.head,!f)throw Error(r(453));return f;case"body":if(f=p.body,!f)throw Error(r(454));return f;default:throw Error(r(451))}}function db(f){for(var p=f.attributes;p.length;)f.removeAttributeNode(p[0]);fl(f)}var ka=new Map,f$=new Set;function US(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Au=q.d;q.d={f:bxe,r:wxe,D:Exe,C:Sxe,L:Axe,m:Txe,X:Nxe,S:kxe,M:Cxe};function bxe(){var f=Au.f(),p=_S();return f||p}function wxe(f){var p=Bo(f);p!==null&&p.tag===5&&p.type==="form"?PF(p):Au.r(f)}var H0=typeof document>"u"?null:document;function h$(f,p,y){var E=H0;if(E&&typeof p=="string"&&p){var R=xa(p);R='link[rel="'+f+'"][href="'+R+'"]',typeof y=="string"&&(R+='[crossorigin="'+y+'"]'),f$.has(R)||(f$.add(R),f={rel:f,crossOrigin:y,href:p},E.querySelector(R)===null&&(p=E.createElement("link"),ts(p,"link",f),vr(p),E.head.appendChild(p)))}}function Exe(f){Au.D(f),h$("dns-prefetch",f,null)}function Sxe(f,p){Au.C(f,p),h$("preconnect",f,p)}function Axe(f,p,y){Au.L(f,p,y);var E=H0;if(E&&f&&p){var R='link[rel="preload"][as="'+xa(p)+'"]';p==="image"&&y&&y.imageSrcSet?(R+='[imagesrcset="'+xa(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(R+='[imagesizes="'+xa(y.imageSizes)+'"]')):R+='[href="'+xa(f)+'"]';var B=R;switch(p){case"style":B=q0(f);break;case"script":B=G0(f)}ka.has(B)||(f=h({rel:"preload",href:p==="image"&&y&&y.imageSrcSet?void 0:f,as:p},y),ka.set(B,f),E.querySelector(R)!==null||p==="style"&&E.querySelector(fb(B))||p==="script"&&E.querySelector(hb(B))||(p=E.createElement("link"),ts(p,"link",f),vr(p),E.head.appendChild(p)))}}function Txe(f,p){Au.m(f,p);var y=H0;if(y&&f){var E=p&&typeof p.as=="string"?p.as:"script",R='link[rel="modulepreload"][as="'+xa(E)+'"][href="'+xa(f)+'"]',B=R;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":B=G0(f)}if(!ka.has(B)&&(f=h({rel:"modulepreload",href:f},p),ka.set(B,f),y.querySelector(R)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(hb(B)))return}E=y.createElement("link"),ts(E,"link",f),vr(E),y.head.appendChild(E)}}}function kxe(f,p,y){Au.S(f,p,y);var E=H0;if(E&&f){var R=Uo(E).hoistableStyles,B=q0(f);p=p||"default";var ne=R.get(B);if(!ne){var ce={loading:0,preload:null};if(ne=E.querySelector(fb(B)))ce.loading=5;else{f=h({rel:"stylesheet",href:f,"data-precedence":p},y),(y=ka.get(B))&&NI(f,y);var Ee=ne=E.createElement("link");vr(Ee),ts(Ee,"link",f),Ee._p=new Promise(function(Ue,Ye){Ee.onload=Ue,Ee.onerror=Ye}),Ee.addEventListener("load",function(){ce.loading|=1}),Ee.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,FS(ne,p,E)}ne={type:"stylesheet",instance:ne,count:1,state:ce},R.set(B,ne)}}}function Nxe(f,p){Au.X(f,p);var y=H0;if(y&&f){var E=Uo(y).hoistableScripts,R=G0(f),B=E.get(R);B||(B=y.querySelector(hb(R)),B||(f=h({src:f,async:!0},p),(p=ka.get(R))&&CI(f,p),B=y.createElement("script"),vr(B),ts(B,"link",f),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},E.set(R,B))}}function Cxe(f,p){Au.M(f,p);var y=H0;if(y&&f){var E=Uo(y).hoistableScripts,R=G0(f),B=E.get(R);B||(B=y.querySelector(hb(R)),B||(f=h({src:f,async:!0,type:"module"},p),(p=ka.get(R))&&CI(f,p),B=y.createElement("script"),vr(B),ts(B,"link",f),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},E.set(R,B))}}function p$(f,p,y,E){var R=(R=se.current)?US(R):null;if(!R)throw Error(r(446));switch(f){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(p=q0(y.href),y=Uo(R).hoistableStyles,E=y.get(p),E||(E={type:"style",instance:null,count:0,state:null},y.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){f=q0(y.href);var B=Uo(R).hoistableStyles,ne=B.get(f);if(ne||(R=R.ownerDocument||R,ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},B.set(f,ne),(B=R.querySelector(fb(f)))&&!B._p&&(ne.instance=B,ne.state.loading=5),ka.has(f)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},ka.set(f,y),B||Pxe(R,f,y,ne.state))),p&&E===null)throw Error(r(528,""));return ne}if(p&&E!==null)throw Error(r(529,""));return null;case"script":return p=y.async,y=y.src,typeof y=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=G0(y),y=Uo(R).hoistableScripts,E=y.get(p),E||(E={type:"script",instance:null,count:0,state:null},y.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,f))}}function q0(f){return'href="'+xa(f)+'"'}function fb(f){return'link[rel="stylesheet"]['+f+"]"}function m$(f){return h({},f,{"data-precedence":f.precedence,precedence:null})}function Pxe(f,p,y,E){f.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=f.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),ts(p,"link",y),vr(p),f.head.appendChild(p))}function G0(f){return'[src="'+xa(f)+'"]'}function hb(f){return"script[async]"+f}function g$(f,p,y){if(p.count++,p.instance===null)switch(p.type){case"style":var E=f.querySelector('style[data-href~="'+xa(y.href)+'"]');if(E)return p.instance=E,vr(E),E;var R=h({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return E=(f.ownerDocument||f).createElement("style"),vr(E),ts(E,"style",R),FS(E,y.precedence,f),p.instance=E;case"stylesheet":R=q0(y.href);var B=f.querySelector(fb(R));if(B)return p.state.loading|=4,p.instance=B,vr(B),B;E=m$(y),(R=ka.get(R))&&NI(E,R),B=(f.ownerDocument||f).createElement("link"),vr(B);var ne=B;return ne._p=new Promise(function(ce,Ee){ne.onload=ce,ne.onerror=Ee}),ts(B,"link",E),p.state.loading|=4,FS(B,y.precedence,f),p.instance=B;case"script":return B=G0(y.src),(R=f.querySelector(hb(B)))?(p.instance=R,vr(R),R):(E=y,(R=ka.get(B))&&(E=h({},y),CI(E,R)),f=f.ownerDocument||f,R=f.createElement("script"),vr(R),ts(R,"link",E),f.head.appendChild(R),p.instance=R);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,FS(E,y.precedence,f));return p.instance}function FS(f,p,y){for(var E=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=E.length?E[E.length-1]:null,B=R,ne=0;ne<E.length;ne++){var ce=E[ne];if(ce.dataset.precedence===p)B=ce;else if(B!==R)break}B?B.parentNode.insertBefore(f,B.nextSibling):(p=y.nodeType===9?y.head:y,p.insertBefore(f,p.firstChild))}function NI(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.title==null&&(f.title=p.title)}function CI(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.integrity==null&&(f.integrity=p.integrity)}var $S=null;function y$(f,p,y){if($S===null){var E=new Map,R=$S=new Map;R.set(y,E)}else R=$S,E=R.get(y),E||(E=new Map,R.set(y,E));if(E.has(f))return E;for(E.set(f,null),y=y.getElementsByTagName(f),R=0;R<y.length;R++){var B=y[R];if(!(B[Do]||B[At]||f==="link"&&B.getAttribute("rel")==="stylesheet")&&B.namespaceURI!=="http://www.w3.org/2000/svg"){var ne=B.getAttribute(p)||"";ne=f+ne;var ce=E.get(ne);ce?ce.push(B):E.set(ne,[B])}}return E}function x$(f,p,y){f=f.ownerDocument||f,f.head.insertBefore(y,p==="title"?f.querySelector("head > title"):null)}function _xe(f,p,y){if(y===1||p.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return f=p.disabled,typeof p.precedence=="string"&&f==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function v$(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}function Ixe(f,p,y,E){if(y.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var R=q0(E.href),B=p.querySelector(fb(R));if(B){p=B._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(f.count++,f=zS.bind(f),p.then(f,f)),y.state.loading|=4,y.instance=B,vr(B);return}B=p.ownerDocument||p,E=m$(E),(R=ka.get(R))&&NI(E,R),B=B.createElement("link"),vr(B);var ne=B;ne._p=new Promise(function(ce,Ee){ne.onload=ce,ne.onerror=Ee}),ts(B,"link",E),y.instance=B}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(y,p),(p=y.state.preload)&&(y.state.loading&3)===0&&(f.count++,y=zS.bind(f),p.addEventListener("load",y),p.addEventListener("error",y))}}var PI=0;function Rxe(f,p){return f.stylesheets&&f.count===0&&HS(f,f.stylesheets),0<f.count||0<f.imgCount?function(y){var E=setTimeout(function(){if(f.stylesheets&&HS(f,f.stylesheets),f.unsuspend){var B=f.unsuspend;f.unsuspend=null,B()}},6e4+p);0<f.imgBytes&&PI===0&&(PI=62500*fxe());var R=setTimeout(function(){if(f.waitingForImages=!1,f.count===0&&(f.stylesheets&&HS(f,f.stylesheets),f.unsuspend)){var B=f.unsuspend;f.unsuspend=null,B()}},(f.imgBytes>PI?50:800)+p);return f.unsuspend=y,function(){f.unsuspend=null,clearTimeout(E),clearTimeout(R)}}:null}function zS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)HS(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var VS=null;function HS(f,p){f.stylesheets=null,f.unsuspend!==null&&(f.count++,VS=new Map,p.forEach(Oxe,f),VS=null,zS.call(f))}function Oxe(f,p){if(!(p.state.loading&4)){var y=VS.get(f);if(y)var E=y.get(null);else{y=new Map,VS.set(f,y);for(var R=f.querySelectorAll("link[data-precedence],style[data-precedence]"),B=0;B<R.length;B++){var ne=R[B];(ne.nodeName==="LINK"||ne.getAttribute("media")!=="not all")&&(y.set(ne.dataset.precedence,ne),E=ne)}E&&y.set(null,E)}R=p.instance,ne=R.getAttribute("data-precedence"),B=y.get(ne)||E,B===E&&y.set(null,R),y.set(ne,R),this.count++,E=zS.bind(this),R.addEventListener("load",E),R.addEventListener("error",E),B?B.parentNode.insertBefore(R,B.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(R,f.firstChild)),p.state.loading|=4}}var pb={$$typeof:N,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Mxe(f,p,y,E,R,B,ne,ce,Ee){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.hiddenUpdates=le(null),this.identifierPrefix=E,this.onUncaughtError=R,this.onCaughtError=B,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function b$(f,p,y,E,R,B,ne,ce,Ee,Ue,Ye,nt){return f=new Mxe(f,p,y,ne,Ee,Ue,Ye,nt,ce),p=1,B===!0&&(p|=24),B=$o(3,null,null,p),f.current=B,B.stateNode=f,p=l_(),p.refCount++,f.pooledCache=p,p.refCount++,B.memoizedState={element:E,isDehydrated:y,cache:p},f_(B),f}function w$(f){return f?(f=S0,f):S0}function E$(f,p,y,E,R,B){R=w$(R),E.context===null?E.context=R:E.pendingContext=R,E=lf(p),E.payload={element:y},B=B===void 0?null:B,B!==null&&(E.callback=B),y=cf(f,E,p),y!==null&&(wo(y,f,p),Gv(y,f,p))}function S$(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var y=f.retryLane;f.retryLane=y!==0&&y<p?y:p}}function _I(f,p){S$(f,p),(f=f.alternate)&&S$(f,p)}function A$(f){if(f.tag===13||f.tag===31){var p=Xh(f,67108864);p!==null&&wo(p,f,67108864),_I(f,67108864)}}function T$(f){if(f.tag===13||f.tag===31){var p=Go();p=He(p);var y=Xh(f,p);y!==null&&wo(y,f,p),_I(f,p)}}var qS=!0;function Lxe(f,p,y,E){var R=L.T;L.T=null;var B=q.p;try{q.p=2,II(f,p,y,E)}finally{q.p=B,L.T=R}}function Dxe(f,p,y,E){var R=L.T;L.T=null;var B=q.p;try{q.p=8,II(f,p,y,E)}finally{q.p=B,L.T=R}}function II(f,p,y,E){if(qS){var R=RI(E);if(R===null)yI(f,p,E,GS,y),N$(f,E);else if(Bxe(R,f,p,y,E))E.stopPropagation();else if(N$(f,E),p&4&&-1<jxe.indexOf(f)){for(;R!==null;){var B=Bo(R);if(B!==null)switch(B.tag){case 3:if(B=B.stateNode,B.current.memoizedState.isDehydrated){var ne=fn(B.pendingLanes);if(ne!==0){var ce=B;for(ce.pendingLanes|=2,ce.entangledLanes|=2;ne;){var Ee=1<<31-ge(ne);ce.entanglements[1]|=Ee,ne&=~Ee}sc(B),(Hn&6)===0&&(CS=et()+500,lb(0))}}break;case 31:case 13:ce=Xh(B,2),ce!==null&&wo(ce,B,2),_S(),_I(B,2)}if(B=RI(E),B===null&&yI(f,p,E,GS,y),B===R)break;R=B}R!==null&&E.stopPropagation()}else yI(f,p,E,null,y)}}function RI(f){return f=MP(f),OI(f)}var GS=null;function OI(f){if(GS=null,f=jo(f),f!==null){var p=s(f);if(p===null)f=null;else{var y=p.tag;if(y===13){if(f=o(p),f!==null)return f;f=null}else if(y===31){if(f=a(p),f!==null)return f;f=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null)}}return GS=f,null}function k$(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ut()){case Ie:return 2;case qe:return 8;case yt:case ht:return 32;case ie:return 268435456;default:return 32}default:return 32}}var MI=!1,bf=null,wf=null,Ef=null,mb=new Map,gb=new Map,Sf=[],jxe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N$(f,p){switch(f){case"focusin":case"focusout":bf=null;break;case"dragenter":case"dragleave":wf=null;break;case"mouseover":case"mouseout":Ef=null;break;case"pointerover":case"pointerout":mb.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":gb.delete(p.pointerId)}}function yb(f,p,y,E,R,B){return f===null||f.nativeEvent!==B?(f={blockedOn:p,domEventName:y,eventSystemFlags:E,nativeEvent:B,targetContainers:[R]},p!==null&&(p=Bo(p),p!==null&&A$(p)),f):(f.eventSystemFlags|=E,p=f.targetContainers,R!==null&&p.indexOf(R)===-1&&p.push(R),f)}function Bxe(f,p,y,E,R){switch(p){case"focusin":return bf=yb(bf,f,p,y,E,R),!0;case"dragenter":return wf=yb(wf,f,p,y,E,R),!0;case"mouseover":return Ef=yb(Ef,f,p,y,E,R),!0;case"pointerover":var B=R.pointerId;return mb.set(B,yb(mb.get(B)||null,f,p,y,E,R)),!0;case"gotpointercapture":return B=R.pointerId,gb.set(B,yb(gb.get(B)||null,f,p,y,E,R)),!0}return!1}function C$(f){var p=jo(f.target);if(p!==null){var y=s(p);if(y!==null){if(p=y.tag,p===13){if(p=o(y),p!==null){f.blockedOn=p,ct(f.priority,function(){T$(y)});return}}else if(p===31){if(p=a(y),p!==null){f.blockedOn=p,ct(f.priority,function(){T$(y)});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){f.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}f.blockedOn=null}function KS(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var y=RI(f.nativeEvent);if(y===null){y=f.nativeEvent;var E=new y.constructor(y.type,y);OP=E,y.target.dispatchEvent(E),OP=null}else return p=Bo(y),p!==null&&A$(p),f.blockedOn=y,!1;p.shift()}return!0}function P$(f,p,y){KS(f)&&y.delete(p)}function Uxe(){MI=!1,bf!==null&&KS(bf)&&(bf=null),wf!==null&&KS(wf)&&(wf=null),Ef!==null&&KS(Ef)&&(Ef=null),mb.forEach(P$),gb.forEach(P$)}function WS(f,p){f.blockedOn===p&&(f.blockedOn=null,MI||(MI=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Uxe)))}var YS=null;function _$(f){YS!==f&&(YS=f,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){YS===f&&(YS=null);for(var p=0;p<f.length;p+=3){var y=f[p],E=f[p+1],R=f[p+2];if(typeof E!="function"){if(OI(E||y)===null)continue;break}var B=Bo(y);B!==null&&(f.splice(p,3),p-=3,R_(B,{pending:!0,data:R,method:y.method,action:E},E,R))}}))}function K0(f){function p(Ee){return WS(Ee,f)}bf!==null&&WS(bf,f),wf!==null&&WS(wf,f),Ef!==null&&WS(Ef,f),mb.forEach(p),gb.forEach(p);for(var y=0;y<Sf.length;y++){var E=Sf[y];E.blockedOn===f&&(E.blockedOn=null)}for(;0<Sf.length&&(y=Sf[0],y.blockedOn===null);)C$(y),y.blockedOn===null&&Sf.shift();if(y=(f.ownerDocument||f).$$reactFormReplay,y!=null)for(E=0;E<y.length;E+=3){var R=y[E],B=y[E+1],ne=R[bn]||null;if(typeof B=="function")ne||_$(y);else if(ne){var ce=null;if(B&&B.hasAttribute("formAction")){if(R=B,ne=B[bn]||null)ce=ne.formAction;else if(OI(R)!==null)continue}else ce=ne.action;typeof ce=="function"?y[E+1]=ce:(y.splice(E,3),E-=3),_$(y)}}}function I$(){function f(B){B.canIntercept&&B.info==="react-transition"&&B.intercept({handler:function(){return new Promise(function(ne){return R=ne})},focusReset:"manual",scroll:"manual"})}function p(){R!==null&&(R(),R=null),E||setTimeout(y,20)}function y(){if(!E&&!navigation.transition){var B=navigation.currentEntry;B&&B.url!=null&&navigation.navigate(B.url,{state:B.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,R=null;return navigation.addEventListener("navigate",f),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(y,100),function(){E=!0,navigation.removeEventListener("navigate",f),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),R!==null&&(R(),R=null)}}}function LI(f){this._internalRoot=f}JS.prototype.render=LI.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(r(409));var y=p.current,E=Go();E$(y,E,f,p,null,null)},JS.prototype.unmount=LI.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;E$(f.current,2,null,f,null,null),_S(),p[dl]=null}};function JS(f){this._internalRoot=f}JS.prototype.unstable_scheduleHydration=function(f){if(f){var p=qt();f={blockedOn:null,target:f,priority:p};for(var y=0;y<Sf.length&&p!==0&&p<Sf[y].priority;y++);Sf.splice(y,0,f),y===0&&C$(f)}};var R$=e.version;if(R$!=="19.2.3")throw Error(r(527,R$,"19.2.3"));q.findDOMNode=function(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=c(p),f=f!==null?d(f):null,f=f===null?null:f.stateNode,f};var Fxe={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var XS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!XS.isDisabled&&XS.supportsFiber)try{ue=XS.inject(Fxe),Se=XS}catch{}}return bb.createRoot=function(f,p){if(!i(f))throw Error(r(299));var y=!1,E="",R=UF,B=FF,ne=$F;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(R=p.onUncaughtError),p.onCaughtError!==void 0&&(B=p.onCaughtError),p.onRecoverableError!==void 0&&(ne=p.onRecoverableError)),p=b$(f,1,!1,null,null,y,E,null,R,B,ne,I$),f[dl]=p.current,gI(f),new LI(p)},bb.hydrateRoot=function(f,p,y){if(!i(f))throw Error(r(299));var E=!1,R="",B=UF,ne=FF,ce=$F,Ee=null;return y!=null&&(y.unstable_strictMode===!0&&(E=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onUncaughtError!==void 0&&(B=y.onUncaughtError),y.onCaughtError!==void 0&&(ne=y.onCaughtError),y.onRecoverableError!==void 0&&(ce=y.onRecoverableError),y.formState!==void 0&&(Ee=y.formState)),p=b$(f,1,!0,p,y??null,E,R,Ee,B,ne,ce,I$),p.context=w$(null),y=p.current,E=Go(),E=He(E),R=lf(E),R.callback=null,cf(y,R,E),y=E,p.current.lanes=y,Q(p,y),sc(p),f[dl]=p.current,gI(f),new JS(p)},bb.version="19.2.3",bb}var V$;function uve(){if(V$)return FI.exports;V$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),FI.exports=cve(),FI.exports}var dve=uve();const fve=bs(dve),hve="modulepreload",pve=function(t){return"/"+t},H$={},ko=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(n.map(c=>{if(c=pve(c),c in H$)return;H$[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":hve,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var Tc=function(){return Tc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Tc.apply(this,arguments)};function Kx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function mve(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function gve(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}const yve=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class KD extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class xve extends KD{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class q$ extends KD{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class G$ extends KD{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var p4;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(p4||(p4={}));class vve{constructor(e,{headers:n={},customFetch:r,region:i=p4.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=yve(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return mve(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:d,timeout:h}=r;let m={},{region:g}=r;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let x;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",x=c):typeof c=="string"?(m["Content-Type"]="text/plain",x=c):typeof FormData<"u"&&c instanceof FormData?x=c:(m["Content-Type"]="application/json",x=JSON.stringify(c)):x=c;let b=d;h&&(o=new AbortController,s=setTimeout(()=>o.abort(),h),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const w=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:x,signal:b}).catch(j=>{throw new xve(j)}),T=w.headers.get("x-relay-error");if(T&&T==="true")throw new q$(w);if(!w.ok)throw new G$(w);let N=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),O;return N==="application/json"?O=yield w.json():N==="application/octet-stream"||N==="application/pdf"?O=yield w.blob():N==="text/event-stream"?O=w:N==="multipart/form-data"?O=yield w.formData():O=yield w.text(),{data:O,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof G$||a instanceof q$?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var bve=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},wve=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,c=s.status,d=s.statusText;if(s.ok){var h,m;if(n.method!=="HEAD"){var g;const w=await s.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?a=w:a=JSON.parse(w))}const x=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(m=s.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");x&&b&&b.length>1&&(l=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var v;const x=await s.text();try{o=JSON.parse(x),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,d="OK")}catch{s.status===404&&x===""?(c=204,d="No Content"):o={message:x}}if(o&&n.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,c=200,d="OK"),o&&n.shouldThrowOnError)throw new bve(o)}return{error:o,data:a,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="";const l=s==null?void 0:s.cause;if(l){var c,d,h,m;const v=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",x=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(h=s==null?void 0:s.name)!==null&&h!==void 0?h:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(m=l==null?void 0:l.name)!==null&&m!==void 0?m:"Error"}: ${v}`,x&&(a+=` (${x})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var g;a=(g=s==null?void 0:s.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},Eve=class extends wve{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const K$=new RegExp("[,()]");var Ag=class extends Eve{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&K$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&K$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Sve=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Ag({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(s.length>0){const o=[...new Set(s)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Ag({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ag({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Ag({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Ag({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Ave=class ote{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Sve(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ote(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{l.searchParams.append(h,m)})):(a="POST",c=n);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new Ag({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Tve{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof Fl<"u"){const n=Fl.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const kve="2.89.0",Nve=`realtime-js/${kve}`,ate="1.0.0",Cve="2.0.0",W$=ate,m4=1e4,Pve=1e3,_ve=100;var Vf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Vf||(Vf={}));var Ti;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ti||(Ti={}));var Rl;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Rl||(Rl={}));var g4;(function(t){t.websocket="websocket"})(g4||(g4={}));var Pp;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Pp||(Pp={}));class Ive{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),x=0;v.setUint8(x++,this.KINDS.userBroadcastPush),v.setUint8(x++,l.length),v.setUint8(x++,a.length),v.setUint8(x++,o.length),v.setUint8(x++,c.length),v.setUint8(x++,h.length),v.setUint8(x++,n),Array.from(l,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(a,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(o,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(c,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(h,w=>v.setUint8(x++,w.charCodeAt(0)));var b=new Uint8Array(g.byteLength+r.byteLength);return b.set(new Uint8Array(g),0),b.set(new Uint8Array(r),g.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+s));l=l+s;const h=r.decode(e.slice(l,l+o));l=l+o;const m=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,v={type:this.BROADCAST_EVENT,event:d,payload:g};return o>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class lte{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pr||(pr={}));const Y$=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=Rve(o,t,e,i),s),{}):{}},Rve=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?cte(s,o):y4(o)},cte=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Dve(e,n)}switch(t){case pr.bool:return Ove(e);case pr.float4:case pr.float8:case pr.int2:case pr.int4:case pr.int8:case pr.numeric:case pr.oid:return Mve(e);case pr.json:case pr.jsonb:return Lve(e);case pr.timestamp:return jve(e);case pr.abstime:case pr.date:case pr.daterange:case pr.int4range:case pr.int8range:case pr.money:case pr.reltime:case pr.text:case pr.time:case pr.timestamptz:case pr.timetz:case pr.tsrange:case pr.tstzrange:return y4(e);default:return y4(e)}},y4=t=>t,Ove=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Mve=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Lve=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Dve=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>cte(e,a))}return t},jve=t=>typeof t=="string"?t.replace(" ","T"):t,ute=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class HI{constructor(e,n,r={},i=m4){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var J$;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(J$||(J$={}));class lw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lw.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=lw.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=lw.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const h=s[c];if(h){const m=d.map(b=>b.presence_ref),g=h.map(b=>b.presence_ref),v=d.filter(b=>g.indexOf(b.presence_ref)<0),x=h.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(a[c]=v),x.length>0&&(l[c]=x)}else a[c]=d}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(g=>g.presence_ref),m=d.filter(g=>h.indexOf(g.presence_ref)<0);e[a].unshift(...m)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var X$;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(X$||(X$={}));var cw;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(cw||(cw={}));var Ou;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ou||(Ou={}));class Lg{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ti.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new HI(this,Rl.join,this.params,this.timeout),this.rejoinTimer=new lte(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ti.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ti.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ti.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ti.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ti.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rl.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new lw(this),this.broadcastEndpointURL=ute(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ti.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[cw.PRESENCE]&&this.bindings[cw.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Ou.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Ou.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(Ou.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,w=[];for(let T=0;T<b;T++){const N=x[T],{filter:{event:O,schema:j,table:_,filter:F}}=N,z=g&&g[T];if(z&&z.event===O&&Lg.isFilterValueEqual(z.schema,j)&&Lg.isFilterValueEqual(z.table,_)&&Lg.isFilterValueEqual(z.filter,F))w.push(Object.assign(Object.assign({},N),{id:z.id}));else{this.unsubscribe(),this.state=Ti.errored,e==null||e(Ou.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Ou.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ti.errored,e==null||e(Ou.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ou.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ti.joined&&e===cw.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ti.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rl.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new HI(this,Rl.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ti.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new HI(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>_ve){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=Rl;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,x,b;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(x=g.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var v,x,b,w,T,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const O=g.id,j=(v=g.filter)===null||v===void 0?void 0:v.event;return O&&((x=n.ids)===null||x===void 0?void 0:x.includes(O))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const O=(T=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return O==="*"||O===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:x,table:b,commit_timestamp:w,type:T,errors:N}=v;m=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:w,eventType:T,new:{},old:{},errors:N}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===Ti.closed}_isJoined(){return this.state===Ti.joined}_isJoining(){return this.state===Ti.joining}_isLeaving(){return this.state===Ti.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Lg.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Rl.close,{},e)}_onError(e){this._on(Rl.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ti.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Y$(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Y$(e.columns,e.old_record)),n}}const qI=()=>{},QS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bve=[1e3,2e3,5e3,1e4],Uve=1e4,Fve=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $ve{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=m4,this.transport=null,this.heartbeatIntervalMs=QS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qI,this.ref=0,this.reconnectTimer=null,this.vsn=W$,this.logger=qI,this.conn=null,this.sendBuffer=[],this.serializer=new Ive,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${g4.websocket}`,this.httpEndpoint=ute(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Tve.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vf.connecting:return Pp.Connecting;case Vf.open:return Pp.Open;case Vf.closing:return Pp.Closing;default:return Pp.Closed}}isConnected(){return this.connectionState()===Pp.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Lg(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Pve,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},QS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Vf.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vf.open||this.conn.readyState===Vf.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Rl.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Fve],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:Nve};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Rl.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new lte(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},QS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,d,h,m,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:m4,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:QS.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:qI,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:W$,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(v=>Bve[v-1]||Uve),this.vsn){case ate:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:((v,x)=>x(JSON.stringify(v))),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:((v,x)=>x(JSON.parse(v)));break;case Cve:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Aw=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function zve(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function Vve(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Hve(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=zve(t.baseUrl,r,i),l=await Vve(t.auth),c=await e(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),m=h&&d?JSON.parse(d):d;if(!c.ok){const g=h?m:void 0,v=g==null?void 0:g.error;throw new Aw((v==null?void 0:v.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:c.status,headers:c.headers,data:m}}}}function ZS(t){return t.join("")}var qve=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ZS(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ZS(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ZS(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ZS(t.namespace)}`}),!0}catch(e){if(e instanceof Aw&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Aw&&n.status===409)return;throw n}}};function Y0(t){return t.join("")}var Gve=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Y0(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Y0(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Y0(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Y0(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Y0(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Y0(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Aw&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Aw&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Kve=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Hve({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new qve(this.client,e),this.tableOps=new Gve(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},vN=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Lr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Wve=class extends vN{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},x4=class extends vN{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const WD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Yve=()=>Response,v4=t=>{if(Array.isArray(t))return t.map(n=>v4(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=v4(r)}),e},Jve=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Xve=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Tw(t){"@babel/helpers - typeof";return Tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tw(t)}function Qve(t,e){if(Tw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zve(t){var e=Qve(t,"string");return Tw(e)=="symbol"?e:e+""}function ebe(t,e,n){return(e=Zve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q$(Object(n),!0).forEach(function(r){ebe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const GI=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},tbe=async(t,e,n)=>{t instanceof await Yve()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new Wve(GI(r),i,s))}).catch(r=>{e(new x4(GI(r),r))}):e(new x4(GI(t),t))},nbe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Jve(r)?(i.headers=Xt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Xt(Xt({},i),n))};async function z1(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,nbe(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>tbe(l,a,r))})}async function kw(t,e,n,r){return z1(t,"GET",e,n,r)}async function Al(t,e,n,r,i){return z1(t,"POST",e,r,i,n)}async function b4(t,e,n,r,i){return z1(t,"PUT",e,r,i,n)}async function rbe(t,e,n,r){return z1(t,"HEAD",e,Xt(Xt({},n),{},{noResolveJson:!0}),r)}async function YD(t,e,n,r,i){return z1(t,"DELETE",e,r,i,n)}var ibe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Lr(e))return{data:null,error:e};throw e}}};let dte;dte=Symbol.toStringTag;var sbe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[dte]="BlobDownloadBuilder",this.promise=null}asStream(){return new ibe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Lr(e))return{data:null,error:e};throw e}}};const obe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Z$={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var abe=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=WD(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const o=Xt(Xt({},Z$),r);let a=Xt(Xt({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=Xt(Xt({},a),r.headers));const c=i._removeEmptyFolders(e),d=i._getFinalPath(c),h=await(t=="PUT"?b4:Al)(i.fetch,`${i.url}/object/${d}`,s,Xt({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Lr(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Xt({upsert:Z$.upsert},r),d=Xt(Xt({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:s,fullPath:(await b4(i.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Lr(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=Xt({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await Al(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new vN("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Al(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Lr(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await Al(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Lr(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await Al(r.fetch,`${r.url}/object/sign/${i}`,Xt({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Lr(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await Al(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Xt(Xt({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Lr(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),o=()=>kw(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new sbe(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:v4(await kw(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await rbe(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Lr(r)&&r instanceof x4){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await YD(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=Xt(Xt(Xt({},obe),e),{},{prefix:t||""});return{data:await Al(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Lr(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=Xt({},t);return{data:await Al(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof an<"u"?an.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const fte="2.89.0",hte={"X-Client-Info":`storage-js/${fte}`};var lbe=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Xt(Xt({},hte),e),this.fetch=WD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await kw(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await kw(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Al(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await b4(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Al(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await YD(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},cbe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Xt(Xt({},hte),e),this.fetch=WD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Al(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await kw(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await YD(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Xve(t))throw new vN("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Kve({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const JD={"X-Client-Info":`storage-js/${fte}`,"Content-Type":"application/json"};var pte=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function oa(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var KI=class extends pte{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ube=class extends pte{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const XD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),dbe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ez=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fbe=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new KI(ez(s),r,o))}).catch(()=>{const s=r+"";e(new KI(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new KI(i.statusText||`HTTP ${r} error`,r,s))}}else e(new ube(ez(t),t))},hbe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(dbe(r)?(i.headers=Xt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Xt(Xt({},i),n)):i};async function pbe(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,hbe(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>fbe(l,a,r))})}async function aa(t,e,n,r,i){return pbe(t,"POST",e,r,i,n)}var mbe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Xt(Xt({},JD),e),this.fetch=XD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await aa(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await aa(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(oa(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await aa(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await aa(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(oa(r))return{data:null,error:r};throw r}}},gbe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Xt(Xt({},JD),e),this.fetch=XD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await aa(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await aa(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await aa(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await aa(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await aa(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}},ybe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Xt(Xt({},JD),e),this.fetch=XD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await aa(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await aa(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await aa(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await aa(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(oa(n))return{data:null,error:n};throw n}}},xbe=class extends ybe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new vbe(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},vbe=class extends mbe{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new bbe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},bbe=class extends gbe{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Xt(Xt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},wbe=class extends lbe{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new abe(this.url,this.headers,t,this.fetch)}get vectors(){return new xbe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new cbe(this.url+"/iceberg",this.headers,this.fetch)}};const mte="2.89.0",Tg=30*1e3,w4=3,WI=w4*Tg,Ebe="http://localhost:9999",Sbe="supabase.auth.token",Abe={"X-Client-Info":`gotrue-js/${mte}`},E4="X-Supabase-Api-Version",gte={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Tbe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kbe=600*1e3;class Nw extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $t(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Nbe extends Nw{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Cbe(t){return $t(t)&&t.name==="AuthApiError"}class _p extends Nw{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class jd extends Nw{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Ko extends jd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Pbe(t){return $t(t)&&t.name==="AuthSessionMissingError"}class J0 extends jd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eA extends jd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tA extends jd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _be(t){return $t(t)&&t.name==="AuthImplicitGrantRedirectError"}class tz extends jd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ibe extends jd{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class S4 extends jd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function YI(t){return $t(t)&&t.name==="AuthRetryableFetchError"}class nz extends jd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class A4 extends jd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ZT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rz=` 	
\r=`.split(""),Rbe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<rz.length;e+=1)t[rz[e].charCodeAt(0)]=-2;for(let e=0;e<ZT.length;e+=1)t[ZT[e].charCodeAt(0)]=e;return t})();function iz(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ZT[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ZT[r]),e.queuedBits-=6}}function yte(t,e,n){const r=Rbe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function sz(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{Lbe(o,r,n)};for(let o=0;o<t.length;o+=1)yte(t.charCodeAt(o),i,s);return e.join("")}function Obe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Mbe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Obe(r,e)}}function Lbe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ny(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)yte(t.charCodeAt(i),n,r);return new Uint8Array(e)}function Dbe(t){const e=[];return Mbe(t,n=>e.push(n)),new Uint8Array(e)}function jp(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>iz(i,n,r)),iz(null,n,r),e.join("")}function jbe(t){return Math.round(Date.now()/1e3)+t}function Bbe(){return Symbol("auth-callback")}const ss=()=>typeof window<"u"&&typeof document<"u",up={tested:!1,writable:!1},xte=()=>{if(!ss())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(up.tested)return up.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),up.tested=!0,up.writable=!0}catch{up.tested=!0,up.writable=!1}return up.writable};function Ube(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const vte=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Fbe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",kg=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},dp=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ns=async(t,e)=>{await t.removeItem(e)};class bN{constructor(){this.promise=new bN.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}bN.promiseConstructor=Promise;function JI(t){const e=t.split(".");if(e.length!==3)throw new A4("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Tbe.test(e[r]))throw new A4("JWT not in base64url format");return{header:JSON.parse(sz(e[0])),payload:JSON.parse(sz(e[1])),signature:ny(e[2]),raw:{header:e[0],payload:e[1]}}}async function $be(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function zbe(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Vbe(t){return("0"+t.toString(16)).substr(-2)}function Hbe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Vbe).join("")}async function qbe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Gbe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await qbe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function X0(t,e,n=!1){const r=Hbe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await kg(t,`${e}-code-verifier`,i);const s=await Gbe(r);return[s,r===s?"plain":"s256"]}const Kbe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wbe(t){const e=t.headers.get(E4);if(!e||!e.match(Kbe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ybe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Jbe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Xbe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Q0(t){if(!Xbe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function XI(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qbe(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function oz(t){return JSON.parse(JSON.stringify(t))}const bp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zbe=[502,503,504];async function az(t){var e;if(!Fbe(t))throw new S4(bp(t),0);if(Zbe.includes(t.status))throw new S4(bp(t),t.status);let n;try{n=await t.json()}catch(s){throw new _p(bp(s),s)}let r;const i=Wbe(t);if(i&&i.getTime()>=gte["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new nz(bp(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ko}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new nz(bp(n),t.status,n.weak_password.reasons);throw new Nbe(bp(n),t.status||500,r)}const ewe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Jt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[E4]||(s[E4]=gte["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await twe(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function twe(t,e,n,r,i,s){const o=ewe(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new S4(bp(l),0)}if(a.ok||await az(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await az(l)}}function xl(t){var e;let n=null;iwe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=jbe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function lz(t){const e=xl(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Yf(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function nwe(t){return{data:t,error:null}}function rwe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=Kx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function cz(t){return t}function iwe(t){return t.access_token&&t.refresh_token&&t.expires_in}const QI=["global","local","others"];class swe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=vte(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=QI[0]){if(QI.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${QI.join(", ")}`);try{return await Jt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Yf})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Kx(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:rwe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($t(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Jt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Yf})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await Jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:cz});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=x}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if($t(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Q0(e);try{return await Jt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Yf})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Q0(e);try{return await Jt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Yf})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Q0(e);try{return await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Yf})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Q0(e.userId);try{const{data:n,error:r}=await Jt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if($t(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Q0(e.userId),Q0(e.id);try{return{data:await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($t(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await Jt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:cz});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=x}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if($t(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Jt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Jt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Jt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($t(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Jt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if($t(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Jt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}}function uz(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Z0={debug:!!(globalThis&&xte()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bte extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class owe extends bte{}async function awe(t,e,n){Z0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Z0.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Z0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Z0.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Z0.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new owe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Z0.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function lwe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wte(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function cwe(t){return parseInt(t,16)}function uwe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function dwe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:h,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=wte(t.address),v=d?`${d}://${r}`:r,x=t.statement?`${t.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${g}

${x}`;let w=`URI: ${h}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let T=`
Resources:`;for(const N of c){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);T+=`
- ${N}`}w+=T}return`${b}
${w}`}class pi extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class e2 extends pi{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function fwe({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new pi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new pi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new pi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new pi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new pi({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new pi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new pi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Ete(o)){if(s.rp.id!==o)return new pi({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new pi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new pi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function hwe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new pi({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Ete(r)){if(n.rpId!==r)return new pi({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new pi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class pwe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const mwe=new pwe;function gwe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Kx(t,["challenge","user","excludeCredentials"]),s=ny(e).buffer,o=Object.assign(Object.assign({},n),{id:ny(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:ny(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function ywe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Kx(t,["challenge","allowCredentials"]),i=ny(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ny(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function xwe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:jp(new Uint8Array(t.response.attestationObject)),clientDataJSON:jp(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vwe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:jp(new Uint8Array(i.authenticatorData)),clientDataJSON:jp(new Uint8Array(i.clientDataJSON)),signature:jp(new Uint8Array(i.signature)),userHandle:i.userHandle?jp(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ete(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function dz(){var t,e;return!!(ss()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function bwe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new e2("Browser returned unexpected credential type",e)}:{data:null,error:new e2("Empty credential response",e)}}catch(e){return{data:null,error:fwe({error:e,options:t})}}}async function wwe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new e2("Browser returned unexpected credential type",e)}:{data:null,error:new e2("Empty credential response",e)}}catch(e){return{data:null,error:hwe({error:e,options:t})}}}const Ewe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Swe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function t2(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=t2(a,o):r[s]=t2(o)}else r[s]=o}return r}function Awe(t,e){return t2(Ewe,t,e||{})}function Twe(t,e){return t2(Swe,t,e||{})}class kwe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??mwe.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Awe(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:h}=await bwe({publicKey:c,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=Twe(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:h}=await wwe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new _p("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Nw("rpId is required for WebAuthn authentication")};try{if(!dz())return{data:null,error:new _p("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new _p("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Nw("rpId is required for WebAuthn registration")};try{if(!dz())return{data:null,error:new _p("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return $t(o)?{data:null,error:o}:{data:null,error:new _p("Unexpected error in register",o)}}}}lwe();const Nwe={url:Ebe,storageKey:Sbe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Abe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function fz(t,e,n){return await n()}const eg={};class Cw{get jwks(){var e,n;return(n=(e=eg[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){eg[this.storageKey]=Object.assign(Object.assign({},eg[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=eg[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){eg[this.storageKey]=Object.assign(Object.assign({},eg[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Nwe),e);if(this.storageKey=s.storageKey,this.instanceID=(n=Cw.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Cw.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&ss()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new swe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=vte(s.fetch),this.lock=s.lock||fz,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&ss()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=awe:this.lock=fz,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kwe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:xte()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uz(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=uz(this.memoryStorage)),ss()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mte}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(ss()&&(n=Ube(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),ss()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),_be(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $t(n)?this._returnResult({error:n}):this._returnResult({error:new _p("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:xl}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if($t(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:d,password:h,options:m}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await X0(this.storage,this.storageKey)),s=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:xl})}else if("phone"in e){const{phone:d,password:h,options:m}=e;s=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:xl})}else throw new eA("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await ns(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await ns(this.storage,`${this.storageKey}-code-verifier`),$t(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:lz})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:lz})}else throw new eA("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new J0;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if($t(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,d,h,m;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:x,wallet:b,statement:w,options:T}=e;let N;if(ss())if(typeof b=="object")N=b;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")N=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=b}const O=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href),j=await N.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=wte(j[0]);let F=(r=T==null?void 0:T.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!F){const D=await N.request({method:"eth_chainId"});F=cwe(D)}const z={domain:O.host,address:_,statement:w,uri:O.href,version:"1",chainId:F,nonce:(i=T==null?void 0:T.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=T==null?void 0:T.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=T==null?void 0:T.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=T==null?void 0:T.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=T==null?void 0:T.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=T==null?void 0:T.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=dwe(z),v=await N.request({method:"personal_sign",params:[uwe(g),_]})}try{const{data:x,error:b}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:xl});if(b)throw b;if(!x||!x.session||!x.user){const w=new J0;return this._returnResult({data:{user:null,session:null},error:w})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if($t(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,d,h,m,g;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:b,wallet:w,statement:T,options:N}=e;let O;if(ss())if(typeof w=="object")O=w;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))O=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=w}const j=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const _=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),T?{statement:T}:null));let F;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")F=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)F=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)v=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),x=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${j.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(i=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=N==null?void 0:N.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((h=(d=N==null?void 0:N.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...N.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const _=await O.signMessage(new TextEncoder().encode(v),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=_}}try{const{data:b,error:w}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:jp(x)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:xl});if(w)throw w;if(!b||!b.session||!b.user){const T=new J0;return this._returnResult({data:{user:null,session:null},error:T})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if($t(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await dp(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Ibe;const{data:s,error:o}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:xl});if(await ns(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new J0;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await ns(this.storage,`${this.storageKey}-code-verifier`),$t(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:xl}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new J0;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if($t(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await X0(this.storage,this.storageKey));const{error:h}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new eA("You must provide either an email or phone number.")}catch(a){if(await ns(this.storage,`${this.storageKey}-code-verifier`),$t(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:xl});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if($t(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await X0(this.storage,this.storageKey));const c=await Jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:nwe});return!((s=c.data)===null||s===void 0)&&s.url&&ss()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await ns(this.storage,`${this.storageKey}-code-verifier`),$t(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ko;const{error:i}=await Jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if($t(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Jt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Jt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new eA("You must provide either an email or phone number and a type")}catch(n){if($t(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await dp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<WI:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await dp(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=XI()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Qbe(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Yf}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ko}:await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Yf})})}catch(n){if($t(n))return Pbe(n)&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Ko;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await X0(this.storage,this.storageKey));const{data:c,error:d}=await Jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Yf});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await ns(this.storage,`${this.storageKey}-code-verifier`),$t(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ko;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=JI(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if($t(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ko;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if($t(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!ss())throw new tA("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tA(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new tz("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tA("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new tz("No code detected.");const{data:T,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new tA("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let m=d+h;l&&(m=parseInt(l));const g=m-d;g*1e3<=Tg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:x,error:b}=await this._getUser(s);if(b)throw b;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:m,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(r){if($t(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await dp(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Cbe(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Bbe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await X0(this.storage,this.storageKey,!0));try{return await Jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await ns(this.storage,`${this.storageKey}-code-verifier`),$t(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,d;const{data:h,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Jt(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return ss()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if($t(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:d}=e,h=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:xl}),{data:m,error:g}=h;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new J0}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(await ns(this.storage,`${this.storageKey}-code-verifier`),$t(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Jt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await zbe(async i=>(i>0&&await $be(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:xl})),(i,s)=>{const o=200*Math.pow(2,i);return s&&YI(s)&&Date.now()+o-r<Tg})}catch(r){if(this._debug(n,"error",r),$t(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),ss()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await dp(this.storage,this.storageKey);if(i&&this.userStorage){let o=await dp(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await kg(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:XI()}else if(i&&!i.user&&!i.user){const o=await dp(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await ns(this.storage,this.storageKey+"-user"),await kg(this.storage,this.storageKey,i)):i.user=XI()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<WI;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${WI}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),YI(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ko;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new bN;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Ko;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),$t(s)){const o={data:null,error:s};return YI(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ns(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await kg(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=oz(i);await kg(this.storage,this.storageKey,s)}else{const i=oz(n);await kg(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ns(this.storage,this.storageKey),await ns(this.storage,this.storageKey+"-code-verifier"),await ns(this.storage,this.storageKey+"-user"),this.userStorage&&await ns(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ss()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Tg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Tg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Tg}ms, refresh threshold is ${w4} ticks`),i<=w4&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof bte)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ss()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await X0(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await Jt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Jt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?xwe(e.webauthn.credential_response):vwe(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await Jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:gwe(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:ywe(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=JI(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Jt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ko})})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Ko});const o=await Jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ss()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Ko});const o=await Jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&ss()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Jt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ko})})}catch(e){if($t(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Jt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ko})})}catch(n){if($t(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+kbe>i)return r;const{data:s,error:o}=await Jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=JI(r);n!=null&&n.allowExpired||Ybe(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const d=Jbe(i.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Dbe(`${a}.${l}`)))throw new A4("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if($t(r))return this._returnResult({data:null,error:r});throw r}}}Cw.nextInstanceID={};const Cwe=Cw,Pwe="2.89.0";let Gb="";typeof Deno<"u"?Gb="deno":typeof document<"u"?Gb="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gb="react-native":Gb="node";const _we={"X-Client-Info":`supabase-js-${Gb}/${Pwe}`},Iwe={headers:_we},Rwe={schema:"public"},Owe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mwe={};function Pw(t){"@babel/helpers - typeof";return Pw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pw(t)}function Lwe(t,e){if(Pw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dwe(t){var e=Lwe(t,"string");return Pw(e)=="symbol"?e:e+""}function jwe(t,e,n){return(e=Dwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hz(Object(n),!0).forEach(function(r){jwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Bwe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Uwe=()=>Headers,Fwe=(t,e,n)=>{const r=Bwe(n),i=Uwe();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,qr(qr({},o),{},{headers:c}))}};function $we(t){return t.endsWith("/")?t:t+"/"}function zwe(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:h}=e,m={db:qr(qr({},l),i),auth:qr(qr({},c),s),realtime:qr(qr({},d),o),storage:{},global:qr(qr(qr({},h),a),{},{headers:qr(qr({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function Vwe(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($we(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Hwe=class extends Cwe{constructor(t){super(t)}},qwe=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=Vwe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:Rwe,realtime:Mwe,auth:qr(qr({},Owe),{},{storageKey:o}),global:Iwe},l=zwe(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=Fwe(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(qr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Ave(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new wbe(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new vve(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:c},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hwe({url:this.authUrl.href,headers:qr(qr({},m),d),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new $ve(this.realtimeUrl.href,qr(qr({},t),{},{params:qr(qr({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ste=(t,e,n)=>new qwe(t,e,n);function Gwe(){if(typeof window<"u"||typeof Fl>"u")return!1;const t=Fl.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Gwe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function Ate(){return{url:"https://rhkkqojnaiyrxmiiykay.supabase.co",anonKey:"sb_publishable_Kd3ZVGh8x-DOQs8gEuVxYQ_tX2sBfpA"}}let n2=null;async function Kwe(){if(n2)return!0;const t=Ate();if(!t.url||!t.anonKey)return console.error("[Supabase] Cannot initialize: missing configuration"),!1;try{return n2=Ste(t.url,t.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),!0}catch(e){return console.error("[Supabase] Initialization failed:",e),!1}}function us(){return n2||console.warn("[Supabase] Client not initialized. Call initializeSupabase() first."),n2}function Wwe(){const t=Ate();return!!(t.url&&t.anonKey)}function tg(t){var e,n,r;return t?{id:t.id,email:t.email||null,displayName:((e=t.user_metadata)==null?void 0:e.full_name)||((n=t.email)==null?void 0:n.split("@")[0])||null,photoURL:((r=t.user_metadata)==null?void 0:r.avatar_url)||null,emailVerified:t.email_confirmed_at!==null,createdAt:t.created_at}:null}class Ywe{constructor(){this.currentUser=null,this.listeners=[]}getUser(){return this.currentUser}onAuthStateChange(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}async signInWithGoogle(){return this.signInWithProvider("google",{queryParams:{access_type:"offline",prompt:"consent"}})}async signInWithGitHub(){return this.signInWithProvider("github",{scopes:"read:user user:email"})}async signInWithDiscord(){return this.signInWithProvider("discord",{scopes:"identify email"})}async signInWithProvider(e,n){const r=us();if(!r)throw console.error("[Auth] Supabase client not initialized"),new Error("Supabase not initialized");console.log(`[Auth] Starting sign in with ${e}...`,n);try{const{data:i,error:s}=await r.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin,scopes:n==null?void 0:n.scopes,queryParams:n==null?void 0:n.queryParams,skipBrowserRedirect:!1}});if(s)throw console.error(`[Auth] Error signing in with ${e}:`,s),s;return console.log(`[Auth] params for ${e} sign in initiated`,i),this.currentUser}catch(i){throw console.error(`[Auth] Unexpected error during ${e} sign in:`,i),i}}async signInWithEthereum(){const e=us();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.ethereum)throw new Error("No Ethereum wallet detected. Please install MetaMask or another Web3 wallet.");const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"ethereum",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=tg(n.user),this.notifyListeners(),this.currentUser}async signInWithSolana(){const e=us();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.solana)throw new Error("No Solana wallet detected. Please install Phantom or another Solana wallet.");try{await window.solana.connect()}catch{throw new Error("Failed to connect to Solana wallet")}const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"solana",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=tg(n.user),this.notifyListeners(),this.currentUser}async signInWithEmail(e,n){const r=us();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signInWithPassword({email:e,password:n});if(s)throw s;return this.currentUser=tg(i.user),this.notifyListeners(),this.currentUser}async signUp(e,n){const r=us();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signUp({email:e,password:n});if(s)throw s;return this.currentUser=tg(i.user),this.notifyListeners(),this.currentUser}async logout(){const e=us();if(!e)throw new Error("Supabase not initialized");const{error:n}=await e.auth.signOut();if(n)throw n;this.currentUser=null,this.notifyListeners()}async deleteAccount(){var r;const e=us();if(!e)throw new Error("Supabase not initialized");const{data:{user:n}}=await e.auth.getUser();if(!n)throw new Error("Not authenticated");try{const{StorageService:i}=await ko(async()=>{const{StorageService:s}=await Promise.resolve().then(()=>Zwe);return{StorageService:s}},void 0);await i.clearUserData(n.id),console.log("[Auth] Local storage cleared")}catch(i){console.warn("[Auth] Failed to clear local storage:",i)}try{const{error:i}=await e.rpc("delete_user");if(i)throw console.warn("[Auth] RPC delete_user not available, signing out only:",i.message),await this.logout(),new Error("Account deletion requires admin action. Please contact support or delete via Supabase dashboard.")}catch(i){throw(r=i.message)!=null&&r.includes("contact support")?i:(await this.logout(),new Error("Account deletion failed. You have been signed out. Please contact support to complete account deletion."))}this.currentUser=null,this.notifyListeners(),console.log("[Auth] Account deleted successfully")}async initialize(){const e=us();if(!e){console.warn("[SupabaseAuth] Cannot initialize: client not available");return}e.auth.onAuthStateChange((r,i)=>{this.currentUser=i?tg(i.user):null,this.notifyListeners()});const{data:{session:n}}=await e.auth.getSession();this.currentUser=n?tg(n.user):null,this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>{try{e(this.currentUser)}catch(n){console.error("[SupabaseAuth] Listener error:",n)}})}getUserId(){var e;return((e=this.currentUser)==null?void 0:e.id)||null}isAuthenticated(){return this.currentUser!==null}async getAccessToken(){const e=us();if(!e)return null;const{data:{session:n}}=await e.auth.getSession();return(n==null?void 0:n.access_token)||null}}const Na=new Ywe;function e0(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Jwe(t,e){let n;const r=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=e0(i),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let ZI;function V1(){return ZI||(ZI=Jwe("keyval-store","keyval")),ZI}function eR(t,e=V1()){return e("readonly",n=>e0(n.get(t)))}function tR(t,e,n=V1()){return n("readwrite",r=>(r.put(e,t),e0(r.transaction)))}function nR(t,e=V1()){return e("readwrite",n=>(n.delete(t),e0(n.transaction)))}function Xwe(t=V1()){return t("readwrite",e=>(e.clear(),e0(e.transaction)))}function Qwe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},e0(t.transaction)}function pz(t=V1()){return t("readonly",e=>{if(e.getAllKeys)return e0(e.getAllKeys());const n=[];return Qwe(e,r=>n.push(r.key)).then(()=>n)})}const $7=class $7{static setUserId(e){console.log(`[StorageService] User context set to: ${e?e.substring(0,8)+"...":"null"}`),this.currentUserId=e}static getUserId(){return this.currentUserId}static getUserKey(e){return this.currentUserId?`${e}_${this.currentUserId}`:(console.warn(`[StorageService] No user context set! Using global key for: ${e}`),e)}static async getItem(e){try{return await eR(e)}catch(n){return console.error(`[StorageService] Failed to get item ${e}:`,n),null}}static async setItem(e,n){try{await tR(e,n)}catch(r){console.error(`[StorageService] Failed to set item ${e}:`,r)}}static async removeItem(e){try{await nR(e)}catch(n){console.error(`[StorageService] Failed to remove item ${e}:`,n)}}static async clear(){try{await Xwe()}catch(e){console.error("[StorageService] Failed to clear storage:",e)}}static async clearUserData(e){try{const n=await pz(),r=`_${e}`,i=n.filter(s=>typeof s=="string"&&s.endsWith(r));console.log(`[StorageService] Clearing ${i.length} keys for user ${e.substring(0,8)}...`);for(const s of i)await nR(s);console.log("[StorageService] User data cleared.")}catch(n){console.error("[StorageService] Failed to clear user data:",n)}}static async migrateFromLocalStorage(){console.log("[StorageService] Checking for legacy localStorage data...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","agent_chat_history","agent_chat_sessions","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_dealer_settings"];let n=0;for(const r of e){const i=localStorage.getItem(r);if(i)try{await tR(r,i),console.log(`[StorageService] Migrated key: ${r}`),n++}catch(s){console.error(`[StorageService] Failed to migrate key ${r}:`,s)}}if(n>0){console.log(`[StorageService] Migration complete. Moved ${n} items.`);for(const r of e)localStorage.removeItem(r);console.log("[StorageService] Legacy localStorage keys cleared.")}else console.log("[StorageService] No legacy data found to migrate.")}static async migrateToUserScoped(){if(!this.currentUserId){console.warn("[StorageService] Cannot migrate to user-scoped: no userId set");return}console.log("[StorageService] Checking for unscoped IndexedDB data to migrate...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_conversations_metadata","vault_dealer_storage","vault_polymarket_storage","ai_config_store","vault_balance_history","token_usage_store"],r=(await pz()).filter(o=>typeof o=="string"&&o.startsWith("agent_conversation_")&&!o.includes("_"+this.currentUserId)),i=[...e,...r];let s=0;for(const o of i)try{const a=await eR(o);if(a){const l=`${o}_${this.currentUserId}`;await eR(l)||(await tR(l,a),console.log(`[StorageService] Migrated to user-scoped: ${o} -> ${l}`),s++),await nR(o)}}catch(a){console.error(`[StorageService] Failed to migrate key ${o}:`,a)}s>0?console.log(`[StorageService] User-scoped migration complete. Moved ${s} items.`):console.log("[StorageService] No unscoped data found to migrate.")}};$7.currentUserId=null;let Ae=$7;const Zwe=Object.freeze(Object.defineProperty({__proto__:null,StorageService:Ae},Symbol.toStringTag,{value:"Module"})),e1e={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},Tte={gemini:{providerType:"gemini",apiKey:"",isConfigured:!1},openai:{providerType:"openai",apiKey:"",isConfigured:!1},claude:{providerType:"claude",apiKey:"",isConfigured:!1}},kte={operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}},rR={credentials:Tte,componentConfigs:kte},mz="ai_config_store";class t1e{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=rR,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){if(!this.isInitialized){if(!Ae.getUserId()){console.log("[AIConfigStore] No user context yet, skipping initial load"),this.isInitialized=!0;return}await this.loadFromStorage(),this.isInitialized=!0,this.notifyListeners()}}async reload(){console.log("[AIConfigStore] Reloading from storage..."),await this.loadFromStorage(),this.notifyListeners()}reset(){console.log("[AIConfigStore] Resetting to initial state..."),this.state={...rR},this.notifyListeners()}async loadFromStorage(){try{const e=await Ae.getItem(Ae.getUserKey(mz));if(e){const n=JSON.parse(e);this.state={...rR,...n,credentials:{...Tte,...n.credentials},componentConfigs:{...kte,...n.componentConfigs}},console.log("[AIConfigStore] Loaded credentials from storage")}}catch(e){console.error("Failed to load AI config state:",e)}}async waitForInit(){this.initPromise&&await this.initPromise}async saveState(){try{await Ae.setItem(Ae.getUserKey(mz),JSON.stringify(this.state))}catch(e){console.error("Failed to save AI config state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}setApiKey(e,n){this.state={...this.state,credentials:{...this.state.credentials,[e]:{providerType:e,apiKey:n,isConfigured:n.trim().length>0}}},this.notify()}getApiKey(e){return this.state.credentials[e].apiKey}clearApiKey(e){this.setApiKey(e,"")}isProviderConfigured(e){return this.state.credentials[e].isConfigured}getConfiguredProviders(){return Object.entries(this.state.credentials).filter(([e,n])=>n.isConfigured).map(([e,n])=>e)}setComponentConfig(e,n){return this.state.credentials[n.providerType].isConfigured?e1e[n.providerType].find(i=>i.id===n.modelId)?(this.state={...this.state,componentConfigs:{...this.state.componentConfigs,[e]:n}},this.notify(),!0):(console.warn(`Invalid model ${n.modelId} for provider ${n.providerType}`),!1):(console.warn(`Cannot set ${e} to use ${n.providerType}: API key not configured`),!1)}getComponentConfig(e){return this.state.componentConfigs[e]}getComponentProvider(e){return this.state.componentConfigs[e].providerType}getComponentModel(e){return this.state.componentConfigs[e].modelId}getComponentApiKey(e){const n=this.getComponentProvider(e);return this.getApiKey(n)}isComponentConfigValid(e){const n=this.state.componentConfigs[e];return this.state.credentials[n.providerType].isConfigured}getInvalidComponents(){return Object.keys(this.state.componentConfigs).filter(e=>!this.isComponentConfigValid(e))}}const Fn=new t1e,wN={trend:{name:"Trend / Structure",color:"purple",icon:"TrendingUp",maxIndicators:2,indicators:["ema","sma","adx","ichimoku"],description:"Market direction and trend strength"},momentum:{name:"Momentum",color:"blue",icon:"Activity",maxIndicators:2,indicators:["rsi","macd","stoch"],description:"Entry/exit timing and divergences"},volume:{name:"Volume",color:"green",icon:"BarChart2",maxIndicators:1,indicators:["obv","vwap"],description:"Move confirmation with participation"},volatility:{name:"Volatility / Risk",color:"orange",icon:"Zap",maxIndicators:1,indicators:["atr","bollinger"],description:"Risk context and market regime"}},Nte=5,ad={balanced:{name:"Balanced",description:"Trend + Momentum + Timing + Risk",emoji:"",indicators:["ema","rsi","macd","atr"],marketCondition:"uncertain or mixed signals"},scalp:{name:"Scalp Momentum",description:"Fast entries, frequent trades (5m-15m)",emoji:"",indicators:["ema","rsi","stoch","vwap"],marketCondition:"high volatility with quick reversals"},trendFollowing:{name:"Trend Following",description:"Sustained movements (15m-1h)",emoji:"",indicators:["ema","sma","adx","macd"],marketCondition:"strong directional trend"},meanReversion:{name:"Mean Reversion",description:"Range / Lateral markets",emoji:"",indicators:["bollinger","rsi","stoch","vwap"],marketCondition:"ranging or sideways market"},volumeConfirm:{name:"Volume Confirmation",description:"Avoid fake breakouts",emoji:"",indicators:["ema","rsi","obv","vwap"],marketCondition:"breakout scenarios or unusual volume"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",indicators:[],marketCondition:"user-defined"}},T4={balanced:`You are Hyperliquid Dealer, an autonomous trading engine.
Your goal is to identify balanced trading opportunities using a combination of indicators.

RULES:
1. Use EMA for trend confirmation, RSI for timing, MACD for momentum, and ATR for risk management.
2. Enter LONG when: EMA points UP + RSI < 40 + MACD histogram positive.
3. Enter SHORT when: EMA points DOWN + RSI > 60 + MACD histogram negative.
4. Stop Loss: Position at 1.5x ATR from entry price.
5. Take Profit: Target 2x risk (1:2 ratio).
6. HOLD if indicators give conflicting signals.`,scalp:`You are Hyperliquid Dealer, a high-frequency scalping engine.
Your goal is to capture quick price movements (5m-15m) in volatile markets.

RULES:
1. Use EMA(9) for immediate direction, RSI for entry, Stoch for confirmation, VWAP as support/resistance.
2. LONG: Price above VWAP + RSI < 35 + Stoch crossing up.
3. SHORT: Price below VWAP + RSI > 65 + Stoch crossing down.
4. Quick trades: Target 0.3-0.5% profit per trade.
5. Tight stop: 0.5% maximum.
6. AVOID trades during low volatility.`,trendFollowing:`You are Hyperliquid Dealer, specialized in following strong trends.
Your goal is to ride sustained directional movements (15m-1h).

RULES:
1. Use EMA/SMA to confirm trend, ADX for strength, MACD for timing.
2. ONLY enter when ADX > 25 (strong trend).
3. LONG: EMA(20) > SMA(50) + ADX > 25 + MACD positive.
4. SHORT: EMA(20) < SMA(50) + ADX > 25 + MACD negative.
5. Let profits run: Trailing stop at 2x ATR.
6. HOLD in sideways markets (ADX < 20).`,meanReversion:`You are Hyperliquid Dealer, specialized in mean reversion.
Your goal is to trade ranging/sideways markets, buying dips and selling tops.

RULES:
1. Use Bollinger Bands for extremes, RSI for oversold/overbought, Stoch for confirmation, VWAP as anchor.
2. LONG: Price touches lower Bollinger + RSI < 30 + Stoch < 20.
3. SHORT: Price touches upper Bollinger + RSI > 70 + Stoch > 80.
4. Target: Return to mean (Bollinger middle or VWAP).
5. Stop: Outside the opposite band.
6. AVOID trading when Bollinger expands (breakout).`,volumeConfirm:`You are Hyperliquid Dealer with focus on volume confirmation.
Your goal is to avoid false breakouts by only trading with volume confirmation.

RULES:
1. Use EMA for trend, RSI for timing, OBV for volume flow, VWAP for institutional levels.
2. LONG: EMA up + RSI < 45 + OBV making higher highs + price above VWAP.
3. SHORT: EMA down + RSI > 55 + OBV making lower lows + price below VWAP.
4. Volume is KING: No OBV confirmation = no trade.
5. Breakouts: Only enter if volume > 1.5x average.
6. HOLD if OBV diverges from price (possible reversal signal).`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a conservative trader focused on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`},ry={rsi:{enabled:!0,params:{period:14},weight:1},macd:{enabled:!0,params:{fast:12,slow:26,signal:9},weight:1},bollinger:{enabled:!1,params:{period:20,stdDev:2},weight:1},atr:{enabled:!0,params:{period:14},weight:1},adx:{enabled:!1,params:{period:14},weight:1},obv:{enabled:!1,params:{},weight:1},vwap:{enabled:!1,params:{},weight:1},ichimoku:{enabled:!1,params:{conversion:9,base:26,spanB:52,displacement:26},weight:1},ema:{enabled:!0,params:{period:20},weight:1},sma:{enabled:!1,params:{period:20},weight:1},stoch:{enabled:!1,params:{period:14,signalPeriod:3},weight:1}},n1e=T4.balanced,Cte={strategyPrompt:n1e,aggressiveMode:!1,maxLeverage:5,maxPositionSizeUSDC:50,maxOpenPositions:3,bankrollType:"MANUAL",manualBankroll:100,tradingPairs:["BTC","ETH","SOL"],checkIntervalSeconds:300,analysisTimeframe:"60",historyCandles:30,macroTimeframeEnabled:!1,macroTimeframe:"240",macroEnabledIndicators:["rsi","macd","ema"],indicatorSettings:ry,autonomousIndicators:!1,selectedPreset:"balanced",promptMode:"preset",stopLossEnabled:!1,stopLossPercent:null,takeProfitEnabled:!1,takeProfitPercent:null},iR={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",executionMode:"local",currentTask:null,currentSignal:null,trendAssessment:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:Cte,logs:[],operationHistory:[]};class r1e{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=iR,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[DealerStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[DealerStore] Resetting to initial state..."),this.state={...iR},this.notifyListeners()}async loadState(){var e,n;try{const r=await Ae.getItem(Ae.getUserKey("vault_dealer_storage"));if(r){const i=JSON.parse(r);let s=((e=i.settings)==null?void 0:e.indicatorSettings)||ry;const o={};for(const a of Object.keys(ry)){const l=s[a],c=ry[a];o[a]={enabled:(l==null?void 0:l.enabled)??c.enabled,params:(l==null?void 0:l.params)??c.params,weight:(l==null?void 0:l.weight)??1}}this.state={...iR,...i,settings:{...Cte,...i.settings||{},indicatorSettings:o,selectedPreset:((n=i.settings)==null?void 0:n.selectedPreset)||"balanced"},isAnalyzing:!1,pendingExecution:!1,logs:i.logs||[]}}}catch(r){console.error("Failed to load dealer state:",r)}}async saveState(){try{await Ae.setItem(Ae.getUserKey("vault_dealer_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save dealer state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Dealer Activated":"Dealer Stopped"},this.addLog("INFO",`Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,trendAssessment:r!==void 0?r:this.state.trendAssessment,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,trendAssessment:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","System reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.cloid===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e,n=10,r=!0){let i=this.state.operationHistory;e&&(i=i.filter(a=>a.coin.toUpperCase()===e.toUpperCase()));const s=r?this.state.logs.filter(a=>a.type==="REASONING"||a.type==="TRADE"||a.type==="SIGNAL"):[];return{operations:i.slice(0,n).map(a=>{var c,d;const l=s.find(h=>h.message.includes(a.coin)&&Math.abs(h.timestamp-a.timestamp)<6e4);return{...a,fullReasoning:((c=l==null?void 0:l.details)==null?void 0:c.fullReason)||a.reasoning,analysisContext:(d=l==null?void 0:l.details)==null?void 0:d.context}}),totalOperations:i.length,recentLogs:s.slice(0,5)}}}const mt=new r1e,i1e=[{value:"politics",label:"Politics",icon:""},{value:"crypto",label:"Crypto",icon:""},{value:"sports",label:"Sports",icon:""},{value:"pop-culture",label:"Pop Culture",icon:""},{value:"science",label:"Science",icon:""},{value:"business",label:"Business",icon:""},{value:"other",label:"Other",icon:""}],uw={balanced:{name:"Balanced",description:"Trade across all categories with balanced risk",emoji:"",categories:["politics","crypto","business","science"],marketCondition:"diverse markets with good liquidity"},highVolume:{name:"High Volume",description:"Focus on most liquid markets",emoji:"",categories:["politics","crypto","sports"],marketCondition:"high volume markets with tight spreads"},crypto:{name:"Crypto Focus",description:"Only cryptocurrency-related markets",emoji:"",categories:["crypto"],marketCondition:"crypto market events and predictions"},conservative:{name:"Conservative",description:"Low risk, high confidence trades only",emoji:"",categories:["politics","business"],marketCondition:"stable markets with clear probable outcomes"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",categories:[],marketCondition:"user-defined"}},r2={balanced:`You are Polymarket Dealer, an autonomous prediction market trading engine.
Your goal is to identify high-probability trading opportunities across diverse markets.

RULES:
1. Analyze market question, current probability, volume, and time to resolution.
2. BUY YES when probability is undervalued (market < 40% but your analysis suggests > 60%).
3. BUY NO when probability is overvalued (market > 60% but your analysis suggests < 40%).
4. SELL positions when probability has moved 15%+ in your favor OR if new information changes thesis.
5. AVOID markets with < $10k liquidity or < 7 days to resolution (unless very high confidence).
6. Max position: 5% of bankroll per market.
7. HOLD if confidence < 65%.`,highVolume:`You are Polymarket Dealer, focused on liquid markets with high volume.
Your goal is to trade actively in markets with the best liquidity and tightest spreads.

RULES:
1. Only trade markets with > $50k volume in 24h.
2. Target spreads < 5% for entries and exits.
3. Look for momentum: price moving in a direction with increasing volume.
4. Use smaller positions (2% max) but trade more frequently.
5. Take profits quickly: exit at 10%+ gain.
6. Cut losses at 8%.
7. AVOID low-liquidity markets even if edge seems large.`,crypto:`You are Polymarket Dealer, specialized in cryptocurrency prediction markets.
Your goal is to leverage crypto market knowledge for prediction market alpha.

RULES:
1. Trade only crypto-related markets (price predictions, ETF approvals, protocol events).
2. Use your understanding of crypto market dynamics and sentiment.
3. BUY YES on bullish crypto catalysts you believe are underpriced.
4. BUY NO when crypto hype seems overextended.
5. Watch for correlation with actual crypto prices.
6. Higher conviction trades allowed (up to 8% of bankroll).
7. AVOID markets about specific coins you lack knowledge of.`,conservative:`You are Polymarket Dealer, taking a conservative low-risk approach.
Your goal is to identify very high probability trades with minimal downside.

RULES:
1. Only trade when confidence > 80%.
2. Focus on markets where outcome seems nearly certain (price > 85% or < 15%).
3. Look for arbitrage opportunities and mispriced markets.
4. Small position sizes (max 3% of bankroll).
5. AVOID volatile markets or those with incoming news catalysts.
6. Prefer longer time horizons (> 30 days to resolution).
7. HOLD cash if no clear opportunities.`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a specialized Polymarket trader.
// 1. Focus on political markets only.
// 2. Trade based on polling data and historical patterns.
// 3. Never risk more than 2% per trade.`},s1e=r2.balanced,Pte={strategyPrompt:s1e,marketSelectionMode:"AI_DISCOVERY",selectedMarkets:[],allowedCategories:["politics","crypto","business","science"],maxPositionSizeUSDC:50,maxOpenPositions:5,minLiquidity:1e4,minVolume24h:5e3,minVolumeThreshold:5e3,minLiquidityThreshold:1e4,minSpreadThreshold:.02,confidenceThreshold:.6,bankrollType:"MANUAL",manualBankroll:100,checkIntervalSeconds:300,promptMode:"preset",selectedPreset:"balanced"},sR={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",currentTask:null,currentSignal:null,analysisNote:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:Pte,logs:[],operationHistory:[]};class o1e{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=sR,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[PolymarketStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[PolymarketStore] Resetting to initial state..."),this.state={...sR},this.notifyListeners()}async loadState(){try{const e=Ae.getUserKey("vault_polymarket_storage");console.log("[PolymarketStore] Loading from key:",e);const n=await Ae.getItem(e);if(n){const r=JSON.parse(n);console.log("[PolymarketStore] Loaded settings:",r.settings),this.state={...sR,...r,settings:{...Pte,...r.settings||{}},isAnalyzing:!1,pendingExecution:!1,logs:r.logs||[]}}else console.log("[PolymarketStore] No saved data found")}catch(e){console.error("Failed to load Polymarket state:",e)}}async saveState(){try{await Ae.setItem(Ae.getUserKey("vault_polymarket_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save Polymarket state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Polymarket Dealer Activated":"Polymarket Dealer Stopped"},this.addLog("INFO",`Polymarket Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Polymarket settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}setCurrentTask(e){this.state={...this.state,currentTask:e},this.notify()}setStatusMessage(e){this.state={...this.state,statusMessage:e},this.notify()}setStatusDetail(e){this.state={...this.state,statusDetail:e},this.notify()}setAnalysisNote(e){this.state={...this.state,analysisNote:e},this.notify()}setCurrentSignal(e){this.state={...this.state,currentSignal:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,analysisNote:r!==void 0?r:this.state.analysisNote,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,analysisNote:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","Polymarket system reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.id===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e=10,n=!0){let r=this.state.operationHistory;const i=n?this.state.logs.filter(o=>o.type==="REASONING"||o.type==="TRADE"||o.type==="SIGNAL"):[];return{operations:r.slice(0,e).map(o=>{var l,c;const a=i.find(d=>d.message.includes(o.question.slice(0,30))&&Math.abs(d.timestamp-o.timestamp)<6e4);return{...o,fullReasoning:((l=a==null?void 0:a.details)==null?void 0:l.fullReason)||o.reasoning,analysisContext:(c=a==null?void 0:a.details)==null?void 0:c.context}}),totalOperations:r.length,recentLogs:i.slice(0,5)}}}const ft=new o1e,_te=S.createContext(void 0);function H1(){const t=S.useContext(_te);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function gz(t){return t?{uid:t.id,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified}:null}function a1e({children:t}){const[e,n]=S.useState(null),[r,i]=S.useState(!0);S.useEffect(()=>{(async()=>{if(!Wwe()){console.warn("[AuthContext] Supabase not configured. Auth will not work until configured."),i(!1);return}await Kwe(),await Na.initialize();const w=gz(Na.getUser());n(w),Ae.setUserId((w==null?void 0:w.uid)||null),w!=null&&w.uid&&(await Ae.migrateToUserScoped(),await Fn.reload(),await mt.reloadFromStorage(),await ft.reloadFromStorage()),i(!1)})();const b=Na.onAuthStateChange(async w=>{const T=gz(w);n(T),Ae.setUserId((T==null?void 0:T.uid)||null),T!=null&&T.uid?(await Ae.migrateToUserScoped(),await Fn.reload(),await mt.reloadFromStorage(),await ft.reloadFromStorage()):(mt.reset(),ft.reset())});return()=>b()},[]);const v={user:e,loading:r,signInWithGoogle:async()=>{try{await Na.signInWithGoogle()}catch(x){throw console.error("Google sign-in error:",x),x}},signInWithGitHub:async()=>{try{await Na.signInWithGitHub()}catch(x){throw console.error("GitHub sign-in error:",x),x}},signInWithDiscord:async()=>{try{await Na.signInWithDiscord()}catch(x){throw console.error("Discord sign-in error:",x),x}},signInWithEthereum:async()=>{try{await Na.signInWithEthereum()}catch(x){throw console.error("Ethereum sign-in error:",x),x}},signInWithSolana:async()=>{try{await Na.signInWithSolana()}catch(x){throw console.error("Solana sign-in error:",x),x}},signInWithEmail:async(x,b)=>{try{await Na.signInWithEmail(x,b)}catch(w){throw console.error("Email sign-in error:",w),w}},signUp:async(x,b)=>{try{await Na.signUp(x,b)}catch(w){throw console.error("Sign-up error:",w),w}},logout:async()=>{try{await Na.logout()}catch(x){throw console.error("Logout error:",x),x}},deleteAccount:async()=>{try{await Na.deleteAccount()}catch(x){throw console.error("Delete account error:",x),x}}};return u.jsx(_te.Provider,{value:v,children:t})}var be=(t=>(t.DASHBOARD="dashboard",t.VAULT="vault",t.AGENT="agent",t.SCHEDULER="scheduler",t.HYPERLIQUID="hyperliquid",t.VAULT_DEALER="vault_dealer",t.DEALER_DASHBOARD="dealer_dashboard",t.DEALER_THINKING="dealer_thinking",t.DEALER_CONFIG="dealer_config",t.DEALER_PROMPT="dealer_prompt",t.CONFIGURATION="configuration",t.SETTINGS="settings",t.HISTORY="history",t.TOKEN_COSTS="token_costs",t.POLYMARKET_DEALER="polymarket_dealer",t.POLYMARKET_DASHBOARD="polymarket_dashboard",t.POLYMARKET_THINKING="polymarket_thinking",t.POLYMARKET_CONFIG="polymarket_config",t.POLYMARKET_PROMPT="polymarket_prompt",t.SOLANA_DEALER="solana_dealer",t.SOLANA_DEALER_DASHBOARD="solana_dealer_dashboard",t.SOLANA_DEALER_THINKING="solana_dealer_thinking",t.SOLANA_DEALER_POLICY="solana_dealer_policy",t.SOLANA_DEALER_LOG="solana_dealer_log",t.PRIVACY="privacy",t.TERMS="terms",t))(be||{});const QD=S.createContext({});function ZD(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const e8=typeof window<"u",Ite=e8?S.useLayoutEffect:S.useEffect,EN=S.createContext(null);function t8(t,e){t.indexOf(e)===-1&&t.push(e)}function n8(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const pd=(t,e,n)=>n>e?e:n<t?t:n;let r8=()=>{};const md={},Rte=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Ote(t){return typeof t=="object"&&t!==null}const Mte=t=>/^0[^.\s]+$/u.test(t);function i8(t){let e;return()=>(e===void 0&&(e=t()),e)}const tl=t=>t,l1e=(t,e)=>n=>e(t(n)),q1=(...t)=>t.reduce(l1e),_w=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class s8{constructor(){this.subscriptions=[]}add(e){return t8(this.subscriptions,e),()=>n8(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Oc=t=>t*1e3,Za=t=>t/1e3;function Lte(t,e){return e?t*(1e3/e):0}const Dte=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,c1e=1e-7,u1e=12;function d1e(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Dte(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>c1e&&++a<u1e);return o}function G1(t,e,n,r){if(t===e&&n===r)return tl;const i=s=>d1e(s,0,1,t,n);return s=>s===0||s===1?s:Dte(i(s),e,r)}const jte=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Bte=t=>e=>1-t(1-e),Ute=G1(.33,1.53,.69,.99),o8=Bte(Ute),Fte=jte(o8),$te=t=>(t*=2)<1?.5*o8(t):.5*(2-Math.pow(2,-10*(t-1))),a8=t=>1-Math.sin(Math.acos(t)),zte=Bte(a8),Vte=jte(a8),f1e=G1(.42,0,1,1),h1e=G1(0,0,.58,1),Hte=G1(.42,0,.58,1),p1e=t=>Array.isArray(t)&&typeof t[0]!="number",qte=t=>Array.isArray(t)&&typeof t[0]=="number",m1e={linear:tl,easeIn:f1e,easeInOut:Hte,easeOut:h1e,circIn:a8,circInOut:Vte,circOut:zte,backIn:o8,backInOut:Fte,backOut:Ute,anticipate:$te},g1e=t=>typeof t=="string",yz=t=>{if(qte(t)){r8(t.length===4);const[e,n,r,i]=t;return G1(e,n,r,i)}else if(g1e(t))return m1e[t];return t},nA=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function y1e(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){o.has(d)&&(c.schedule(d),t()),d(a)}const c={schedule:(d,h=!1,m=!1)=>{const v=m&&i?n:r;return h&&o.add(d),v.has(d)||v.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(d))}};return c}const x1e=40;function Gte(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=nA.reduce((N,O)=>(N[O]=y1e(s),N),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:m,render:g,postRender:v}=o,x=()=>{const N=md.useManualTiming?i.timestamp:performance.now();n=!1,md.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,x1e),1)),i.timestamp=N,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),d.process(i),h.process(i),m.process(i),g.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},b=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:nA.reduce((N,O)=>{const j=o[O];return N[O]=(_,F=!1,z=!1)=>(n||b(),j.schedule(_,F,z)),N},{}),cancel:N=>{for(let O=0;O<nA.length;O++)o[nA[O]].cancel(N)},state:i,steps:o}}const{schedule:Cr,cancel:Eh,state:ls,steps:oR}=Gte(typeof requestAnimationFrame<"u"?requestAnimationFrame:tl,!0);let vT;function v1e(){vT=void 0}const Po={now:()=>(vT===void 0&&Po.set(ls.isProcessing||md.useManualTiming?ls.timestamp:performance.now()),vT),set:t=>{vT=t,queueMicrotask(v1e)}},Kte=t=>e=>typeof e=="string"&&e.startsWith(t),Wte=Kte("--"),b1e=Kte("var(--"),l8=t=>b1e(t)?w1e.test(t.split("/*")[0].trim()):!1,w1e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wx={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Iw={...Wx,transform:t=>pd(0,1,t)},rA={...Wx,default:1},dw=t=>Math.round(t*1e5)/1e5,c8=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function E1e(t){return t==null}const S1e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,u8=(t,e)=>n=>!!(typeof n=="string"&&S1e.test(n)&&n.startsWith(t)||e&&!E1e(n)&&Object.prototype.hasOwnProperty.call(n,e)),Yte=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(c8);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},A1e=t=>pd(0,255,t),aR={...Wx,transform:t=>Math.round(A1e(t))},Bp={test:u8("rgb","red"),parse:Yte("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+aR.transform(t)+", "+aR.transform(e)+", "+aR.transform(n)+", "+dw(Iw.transform(r))+")"};function T1e(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const k4={test:u8("#"),parse:T1e,transform:Bp.transform},K1=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Uf=K1("deg"),Mc=K1("%"),Zt=K1("px"),k1e=K1("vh"),N1e=K1("vw"),xz={...Mc,parse:t=>Mc.parse(t)/100,transform:t=>Mc.transform(t*100)},Dg={test:u8("hsl","hue"),parse:Yte("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Mc.transform(dw(e))+", "+Mc.transform(dw(n))+", "+dw(Iw.transform(r))+")"},mi={test:t=>Bp.test(t)||k4.test(t)||Dg.test(t),parse:t=>Bp.test(t)?Bp.parse(t):Dg.test(t)?Dg.parse(t):k4.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Bp.transform(t):Dg.transform(t),getAnimatableNone:t=>{const e=mi.parse(t);return e.alpha=0,mi.transform(e)}},C1e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function P1e(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(c8))==null?void 0:e.length)||0)+(((n=t.match(C1e))==null?void 0:n.length)||0)>0}const Jte="number",Xte="color",_1e="var",I1e="var(",vz="${}",R1e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rw(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(R1e,l=>(mi.test(l)?(r.color.push(s),i.push(Xte),n.push(mi.parse(l))):l.startsWith(I1e)?(r.var.push(s),i.push(_1e),n.push(l)):(r.number.push(s),i.push(Jte),n.push(parseFloat(l))),++s,vz)).split(vz);return{values:n,split:a,indexes:r,types:i}}function Qte(t){return Rw(t).values}function Zte(t){const{split:e,types:n}=Rw(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Jte?s+=dw(i[o]):a===Xte?s+=mi.transform(i[o]):s+=i[o]}return s}}const O1e=t=>typeof t=="number"?0:mi.test(t)?mi.getAnimatableNone(t):t;function M1e(t){const e=Qte(t);return Zte(t)(e.map(O1e))}const Sh={test:P1e,parse:Qte,createTransformer:Zte,getAnimatableNone:M1e};function lR(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function L1e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=lR(l,a,t+1/3),s=lR(l,a,t),o=lR(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function i2(t,e){return n=>n>0?e:t}const Br=(t,e,n)=>t+(e-t)*n,cR=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},D1e=[k4,Bp,Dg],j1e=t=>D1e.find(e=>e.test(t));function bz(t){const e=j1e(t);if(!e)return!1;let n=e.parse(t);return e===Dg&&(n=L1e(n)),n}const wz=(t,e)=>{const n=bz(t),r=bz(e);if(!n||!r)return i2(t,e);const i={...n};return s=>(i.red=cR(n.red,r.red,s),i.green=cR(n.green,r.green,s),i.blue=cR(n.blue,r.blue,s),i.alpha=Br(n.alpha,r.alpha,s),Bp.transform(i))},N4=new Set(["none","hidden"]);function B1e(t,e){return N4.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function U1e(t,e){return n=>Br(t,e,n)}function d8(t){return typeof t=="number"?U1e:typeof t=="string"?l8(t)?i2:mi.test(t)?wz:z1e:Array.isArray(t)?ene:typeof t=="object"?mi.test(t)?wz:F1e:i2}function ene(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>d8(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function F1e(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=d8(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function $1e(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const z1e=(t,e)=>{const n=Sh.createTransformer(e),r=Rw(t),i=Rw(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?N4.has(t)&&!i.values.length||N4.has(e)&&!r.values.length?B1e(t,e):q1(ene($1e(r,i),i.values),n):i2(t,e)};function tne(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Br(t,e,n):d8(t)(t,e)}const V1e=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Cr.update(e,n),stop:()=>Eh(e),now:()=>ls.isProcessing?ls.timestamp:Po.now()}},nne=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},s2=2e4;function f8(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<s2;)e+=n,r=t.next(e);return e>=s2?1/0:e}function H1e(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(f8(r),s2);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Za(i)}}const q1e=5;function rne(t,e,n){const r=Math.max(e-q1e,0);return Lte(n-t(r),e-r)}const Gr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},uR=.001;function G1e({duration:t=Gr.duration,bounce:e=Gr.bounce,velocity:n=Gr.velocity,mass:r=Gr.mass}){let i,s,o=1-e;o=pd(Gr.minDamping,Gr.maxDamping,o),t=pd(Gr.minDuration,Gr.maxDuration,Za(t)),o<1?(i=c=>{const d=c*o,h=d*t,m=d-n,g=C4(c,o),v=Math.exp(-h);return uR-m/g*v},s=c=>{const h=c*o*t,m=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-h),x=C4(Math.pow(c,2),o);return(-i(c)+uR>0?-1:1)*((m-g)*v)/x}):(i=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-uR+d*h},s=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=W1e(i,s,a);if(t=Oc(t),isNaN(l))return{stiffness:Gr.stiffness,damping:Gr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const K1e=12;function W1e(t,e,n){let r=n;for(let i=1;i<K1e;i++)r=r-t(r)/e(r);return r}function C4(t,e){return t*Math.sqrt(1-e*e)}const Y1e=["duration","bounce"],J1e=["stiffness","damping","mass"];function Ez(t,e){return e.some(n=>t[n]!==void 0)}function X1e(t){let e={velocity:Gr.velocity,stiffness:Gr.stiffness,damping:Gr.damping,mass:Gr.mass,isResolvedFromDuration:!1,...t};if(!Ez(t,J1e)&&Ez(t,Y1e))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*pd(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Gr.mass,stiffness:i,damping:s}}else{const n=G1e(t);e={...e,...n,mass:Gr.mass},e.isResolvedFromDuration=!0}return e}function o2(t=Gr.visualDuration,e=Gr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:h,velocity:m,isResolvedFromDuration:g}=X1e({...n,velocity:-Za(n.velocity||0)}),v=m||0,x=c/(2*Math.sqrt(l*d)),b=o-s,w=Za(Math.sqrt(l/d)),T=Math.abs(b)<5;r||(r=T?Gr.restSpeed.granular:Gr.restSpeed.default),i||(i=T?Gr.restDelta.granular:Gr.restDelta.default);let N;if(x<1){const j=C4(w,x);N=_=>{const F=Math.exp(-x*w*_);return o-F*((v+x*w*b)/j*Math.sin(j*_)+b*Math.cos(j*_))}}else if(x===1)N=j=>o-Math.exp(-w*j)*(b+(v+w*b)*j);else{const j=w*Math.sqrt(x*x-1);N=_=>{const F=Math.exp(-x*w*_),z=Math.min(j*_,300);return o-F*((v+x*w*b)*Math.sinh(z)+j*b*Math.cosh(z))/j}}const O={calculatedDuration:g&&h||null,next:j=>{const _=N(j);if(g)a.done=j>=h;else{let F=j===0?v:0;x<1&&(F=j===0?Oc(v):rne(N,j,_));const z=Math.abs(F)<=r,D=Math.abs(o-_)<=i;a.done=z&&D}return a.value=a.done?o:_,a},toString:()=>{const j=Math.min(f8(O),s2),_=nne(F=>O.next(j*F).value,j,30);return j+"ms "+_},toTransition:()=>{}};return O}o2.applyToOptions=t=>{const e=H1e(t,100,o2);return t.ease=e.ease,t.duration=Oc(e.duration),t.type="keyframes",t};function P4({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],m={done:!1,value:h},g=z=>a!==void 0&&z<a||l!==void 0&&z>l,v=z=>a===void 0?l:l===void 0||Math.abs(a-z)<Math.abs(l-z)?a:l;let x=n*e;const b=h+x,w=o===void 0?b:o(b);w!==b&&(x=w-h);const T=z=>-x*Math.exp(-z/r),N=z=>w+T(z),O=z=>{const D=T(z),$=N(z);m.done=Math.abs(D)<=c,m.value=m.done?w:$};let j,_;const F=z=>{g(m.value)&&(j=z,_=o2({keyframes:[m.value,v(m.value)],velocity:rne(N,z,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return F(0),{calculatedDuration:null,next:z=>{let D=!1;return!_&&j===void 0&&(D=!0,O(z),F(z)),j!==void 0&&z>=j?_.next(z-j):(!D&&O(z),m)}}}function Q1e(t,e,n){const r=[],i=n||md.mix||tne,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||tl:e;a=q1(l,a)}r.push(a)}return r}function Z1e(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(r8(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Q1e(e,r,i),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const m=_w(t[h],t[h+1],d);return a[h](m)};return n?d=>c(pd(t[0],t[s-1],d)):c}function eEe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=_w(0,e,r);t.push(Br(n,1,i))}}function tEe(t){const e=[0];return eEe(e,t.length-1),e}function nEe(t,e){return t.map(n=>n*e)}function rEe(t,e){return t.map(()=>e||Hte).splice(0,t.length-1)}function fw({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=p1e(r)?r.map(yz):yz(r),s={done:!1,value:e[0]},o=nEe(n&&n.length===e.length?n:tEe(e),t),a=Z1e(o,e,{ease:Array.isArray(i)?i:rEe(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const iEe=t=>t!==null;function h8(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(iEe),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const sEe={decay:P4,inertia:P4,tween:fw,keyframes:fw,spring:o2};function ine(t){typeof t.type=="string"&&(t.type=sEe[t.type])}class p8{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const oEe=t=>t/100;class m8 extends p8{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Po.now()&&this.tick(Po.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ine(e);const{type:n=fw,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||fw;l!==fw&&typeof a[0]!="number"&&(this.mixKeyframes=q1(oEe,tne(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=f8(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:g,type:v,onUpdate:x,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,O=r;if(h){const z=Math.min(this.currentTime,i)/a;let D=Math.floor(z),$=z%1;!$&&z>=1&&($=1),$===1&&D--,D=Math.min(D,h+1),!!(D%2)&&(m==="reverse"?($=1-$,g&&($-=g/a)):m==="mirror"&&(O=o)),N=pd(0,1,$)*a}const j=T?{done:!1,value:d[0]}:O.next(N);s&&(j.value=s(j.value));let{done:_}=j;!T&&l!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return F&&v!==P4&&(j.value=h8(d,this.options,b,this.speed)),x&&x(j.value),F&&this.finish(),j}then(e,n){return this.finished.then(e,n)}get duration(){return Za(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Za(e)}get time(){return Za(this.currentTime)}set time(e){var n;e=Oc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Po.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Za(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=V1e,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Po.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function aEe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Up=t=>t*180/Math.PI,_4=t=>{const e=Up(Math.atan2(t[1],t[0]));return I4(e)},lEe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:_4,rotateZ:_4,skewX:t=>Up(Math.atan(t[1])),skewY:t=>Up(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},I4=t=>(t=t%360,t<0&&(t+=360),t),Sz=_4,Az=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Tz=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),cEe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Az,scaleY:Tz,scale:t=>(Az(t)+Tz(t))/2,rotateX:t=>I4(Up(Math.atan2(t[6],t[5]))),rotateY:t=>I4(Up(Math.atan2(-t[2],t[0]))),rotateZ:Sz,rotate:Sz,skewX:t=>Up(Math.atan(t[4])),skewY:t=>Up(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function R4(t){return t.includes("scale")?1:0}function O4(t,e){if(!t||t==="none")return R4(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=cEe,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=lEe,i=a}if(!i)return R4(e);const s=r[e],o=i[1].split(",").map(dEe);return typeof s=="function"?s(o):o[s]}const uEe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return O4(n,e)};function dEe(t){return parseFloat(t.trim())}const Yx=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jx=new Set(Yx),kz=t=>t===Wx||t===Zt,fEe=new Set(["x","y","z"]),hEe=Yx.filter(t=>!fEe.has(t));function pEe(t){const e=[];return hEe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const vm={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>O4(e,"x"),y:(t,{transform:e})=>O4(e,"y")};vm.translateX=vm.x;vm.translateY=vm.y;const bm=new Set;let M4=!1,L4=!1,D4=!1;function sne(){if(L4){const t=Array.from(bm).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=pEe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}L4=!1,M4=!1,bm.forEach(t=>t.complete(D4)),bm.clear()}function one(){bm.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(L4=!0)})}function mEe(){D4=!0,one(),sne(),D4=!1}class g8{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(bm.add(this),M4||(M4=!0,Cr.read(one),Cr.resolveKeyframes(sne))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}aEe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bm.delete(this)}cancel(){this.state==="scheduled"&&(bm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gEe=t=>t.startsWith("--");function yEe(t,e,n){gEe(e)?t.style.setProperty(e,n):t.style[e]=n}const xEe=i8(()=>window.ScrollTimeline!==void 0),vEe={};function bEe(t,e){const n=i8(t);return()=>vEe[e]??n()}const ane=bEe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Kb=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Nz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kb([0,.65,.55,1]),circOut:Kb([.55,0,1,.45]),backIn:Kb([.31,.01,.66,-.59]),backOut:Kb([.33,1.53,.69,.99])};function lne(t,e){if(t)return typeof t=="function"?ane()?nne(t,e):"ease-out":qte(t)?Kb(t):Array.isArray(t)?t.map(n=>lne(n,e)||Nz.easeOut):Nz[t]}function wEe(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const h=lne(a,i);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(d,m)}function cne(t){return typeof t=="function"&&"applyToOptions"in t}function EEe({type:t,...e}){return cne(t)&&ane()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class SEe extends p8{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,r8(typeof e.type!="string");const c=EEe(e);this.animation=wEe(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=h8(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):yEe(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Za(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Za(e)}get time(){return Za(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Oc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&xEe()?(this.animation.timeline=e,tl):n(this)}}const une={anticipate:$te,backInOut:Fte,circInOut:Vte};function AEe(t){return t in une}function TEe(t){typeof t.ease=="string"&&AEe(t.ease)&&(t.ease=une[t.ease])}const Cz=10;class kEe extends SEe{constructor(e){TEe(e),ine(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new m8({...o,autoplay:!1}),l=Oc(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Cz).value,a.sample(l).value,Cz),a.stop()}}const Pz=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Sh.test(t)||t==="0")&&!t.startsWith("url("));function NEe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function CEe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Pz(i,e),a=Pz(s,e);return!o||!a?!1:NEe(t)||(n==="spring"||cne(n))&&r}function j4(t){t.duration=0,t.type="keyframes"}const PEe=new Set(["opacity","clipPath","filter","transform"]),_Ee=i8(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function IEe(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return _Ee()&&n&&PEe.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const REe=40;class OEe extends p8{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:d,...h}){var v;super(),this.stop=()=>{var x,b;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Po.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||g8;this.keyframeResolver=new g(a,(x,b,w)=>this.onKeyframesResolved(x,b,m,!w),l,c,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=Po.now(),CEe(e,s,o,a)||((md.instantAnimations||!l)&&(d==null||d(h8(e,r,n))),e[0]=e[e.length-1],j4(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>REe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&IEe(m)?new kEe({...m,element:m.motionValue.owner.current}):new m8(m);g.finished.then(()=>this.notifyFinished()).catch(tl),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),mEe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const MEe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function LEe(t){const e=MEe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function dne(t,e,n=1){const[r,i]=LEe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Rte(o)?parseFloat(o):o}return l8(i)?dne(i,e,n+1):i}function y8(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const fne=new Set(["width","height","top","left","right","bottom",...Yx]),DEe={test:t=>t==="auto",parse:t=>t},hne=t=>e=>e.test(t),pne=[Wx,Zt,Mc,Uf,N1e,k1e,DEe],_z=t=>pne.find(hne(t));function jEe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Mte(t):!0}const BEe=new Set(["brightness","contrast","saturate","opacity"]);function UEe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(c8)||[];if(!r)return t;const i=n.replace(r,"");let s=BEe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const FEe=/\b([a-z-]*)\(.*?\)/gu,B4={...Sh,getAnimatableNone:t=>{const e=t.match(FEe);return e?e.map(UEe).join(" "):t}},Iz={...Wx,transform:Math.round},$Ee={rotate:Uf,rotateX:Uf,rotateY:Uf,rotateZ:Uf,scale:rA,scaleX:rA,scaleY:rA,scaleZ:rA,skew:Uf,skewX:Uf,skewY:Uf,distance:Zt,translateX:Zt,translateY:Zt,translateZ:Zt,x:Zt,y:Zt,z:Zt,perspective:Zt,transformPerspective:Zt,opacity:Iw,originX:xz,originY:xz,originZ:Zt},x8={borderWidth:Zt,borderTopWidth:Zt,borderRightWidth:Zt,borderBottomWidth:Zt,borderLeftWidth:Zt,borderRadius:Zt,radius:Zt,borderTopLeftRadius:Zt,borderTopRightRadius:Zt,borderBottomRightRadius:Zt,borderBottomLeftRadius:Zt,width:Zt,maxWidth:Zt,height:Zt,maxHeight:Zt,top:Zt,right:Zt,bottom:Zt,left:Zt,padding:Zt,paddingTop:Zt,paddingRight:Zt,paddingBottom:Zt,paddingLeft:Zt,margin:Zt,marginTop:Zt,marginRight:Zt,marginBottom:Zt,marginLeft:Zt,backgroundPositionX:Zt,backgroundPositionY:Zt,...$Ee,zIndex:Iz,fillOpacity:Iw,strokeOpacity:Iw,numOctaves:Iz},zEe={...x8,color:mi,backgroundColor:mi,outlineColor:mi,fill:mi,stroke:mi,borderColor:mi,borderTopColor:mi,borderRightColor:mi,borderBottomColor:mi,borderLeftColor:mi,filter:B4,WebkitFilter:B4},mne=t=>zEe[t];function gne(t,e){let n=mne(t);return n!==B4&&(n=Sh),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const VEe=new Set(["auto","none","0"]);function HEe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!VEe.has(s)&&Rw(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=gne(n,i)}class qEe extends g8{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),l8(c))){const d=dne(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!fne.has(r)||e.length!==2)return;const[i,s]=e,o=_z(i),a=_z(s);if(o!==a)if(kz(o)&&kz(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else vm[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||jEe(e[i]))&&r.push(i);r.length&&HEe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vm[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=vm[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function GEe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const yne=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function xne(t){return Ote(t)&&"offsetHeight"in t}const Rz=30,KEe=t=>!isNaN(parseFloat(t));class WEe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Po.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Po.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=KEe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new s8);const r=this.events[e].add(n);return e==="change"?()=>{r(),Cr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Po.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Rz)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Rz);return Lte(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gx(t,e){return new WEe(t,e)}const{schedule:v8}=Gte(queueMicrotask,!1),vl={x:!1,y:!1};function vne(){return vl.x||vl.y}function YEe(t){return t==="x"||t==="y"?vl[t]?null:(vl[t]=!0,()=>{vl[t]=!1}):vl.x||vl.y?null:(vl.x=vl.y=!0,()=>{vl.x=vl.y=!1})}function bne(t,e){const n=GEe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Oz(t){return!(t.pointerType==="touch"||vne())}function JEe(t,e,n={}){const[r,i,s]=bne(t,n),o=a=>{if(!Oz(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const d=h=>{Oz(h)&&(c(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const wne=(t,e)=>e?t===e?!0:wne(t,e.parentElement):!1,b8=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,XEe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QEe(t){return XEe.has(t.tagName)||t.tabIndex!==-1}const bT=new WeakSet;function Mz(t){return e=>{e.key==="Enter"&&t(e)}}function dR(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ZEe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Mz(()=>{if(bT.has(n))return;dR(n,"down");const i=Mz(()=>{dR(n,"up")}),s=()=>dR(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Lz(t){return b8(t)&&!vne()}function eSe(t,e,n={}){const[r,i,s]=bne(t,n),o=a=>{const l=a.currentTarget;if(!Lz(a))return;bT.add(l);const c=e(l,a),d=(g,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),bT.has(l)&&bT.delete(l),Lz(g)&&typeof c=="function"&&c(g,{success:v})},h=g=>{d(g,l===window||l===document||n.useGlobalTarget||wne(l,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),xne(a)&&(a.addEventListener("focus",c=>ZEe(c,i)),!QEe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function Ene(t){return Ote(t)&&"ownerSVGElement"in t}function tSe(t){return Ene(t)&&t.tagName==="svg"}const Us=t=>!!(t&&t.getVelocity),nSe=[...pne,mi,Sh],rSe=t=>nSe.find(hne(t)),w8=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Dz(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function iSe(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Dz(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Dz(t[i],null)}}}}function sSe(...t){return S.useCallback(iSe(...t),t)}class oSe extends S.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=xne(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function aSe({children:t,isPresent:e,anchorX:n,root:r}){const i=S.useId(),s=S.useRef(null),o=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=S.useContext(w8),l=sSe(s,t==null?void 0:t.ref);return S.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:m,right:g}=o.current;if(e||!s.current||!c||!d)return;const v=n==="left"?`left: ${m}`:`right: ${g}`;s.current.dataset.motionPopId=i;const x=document.createElement("style");a&&(x.nonce=a);const b=r??document.head;return b.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${v}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(x)&&b.removeChild(x)}},[e]),u.jsx(oSe,{isPresent:e,childRef:s,sizeRef:o,children:S.cloneElement(t,{ref:l})})}const lSe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=ZD(cSe),d=S.useId();let h=!0,m=S.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:n,custom:i,onExitComplete:g=>{c.set(g,!0);for(const v of c.values())if(!v)return;r&&r()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[n,c,r]);return s&&h&&(m={...m}),S.useMemo(()=>{c.forEach((g,v)=>c.set(v,!1))},[n]),S.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=u.jsx(aSe,{isPresent:n,anchorX:a,root:l,children:t})),u.jsx(EN.Provider,{value:m,children:t})};function cSe(){return new Map}function Sne(t=!0){const e=S.useContext(EN);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=S.useId();S.useEffect(()=>{if(t)return i(s)},[t]);const o=S.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const iA=t=>t.key||"";function jz(t){const e=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&e.push(n)}),e}const Wi=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,d]=Sne(o),h=S.useMemo(()=>jz(t),[t]),m=o&&!c?[]:h.map(iA),g=S.useRef(!0),v=S.useRef(h),x=ZD(()=>new Map),[b,w]=S.useState(h),[T,N]=S.useState(h);Ite(()=>{g.current=!1,v.current=h;for(let _=0;_<T.length;_++){const F=iA(T[_]);m.includes(F)?x.delete(F):x.get(F)!==!0&&x.set(F,!1)}},[T,m.length,m.join("-")]);const O=[];if(h!==b){let _=[...h];for(let F=0;F<T.length;F++){const z=T[F],D=iA(z);m.includes(D)||(_.splice(F,0,z),O.push(z))}return s==="wait"&&O.length&&(_=O),N(jz(_)),w(h),null}const{forceRender:j}=S.useContext(QD);return u.jsx(u.Fragment,{children:T.map(_=>{const F=iA(_),z=o&&!c?!1:h===T||m.includes(F),D=()=>{if(x.has(F))x.set(F,!0);else return;let $=!0;x.forEach(G=>{G||($=!1)}),$&&(j==null||j(),N(v.current),o&&(d==null||d()),r&&r())};return u.jsx(lSe,{isPresent:z,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:z?void 0:D,anchorX:a,children:_},F)})})},Ane=S.createContext({strict:!1}),Bz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yx={};for(const t in Bz)yx[t]={isEnabled:e=>Bz[t].some(n=>!!e[n])};function uSe(t){for(const e in t)yx[e]={...yx[e],...t[e]}}const dSe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function a2(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||dSe.has(t)}let Tne=t=>!a2(t);function fSe(t){typeof t=="function"&&(Tne=e=>e.startsWith("on")?!a2(e):t(e))}try{fSe(require("@emotion/is-prop-valid").default)}catch{}function hSe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Tne(i)||n===!0&&a2(i)||!e&&!a2(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const SN=S.createContext({});function AN(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ow(t){return typeof t=="string"||Array.isArray(t)}const E8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],S8=["initial",...E8];function TN(t){return AN(t.animate)||S8.some(e=>Ow(t[e]))}function kne(t){return!!(TN(t)||t.variants)}function pSe(t,e){if(TN(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ow(n)?n:void 0,animate:Ow(r)?r:void 0}}return t.inherit!==!1?e:{}}function mSe(t){const{initial:e,animate:n}=pSe(t,S.useContext(SN));return S.useMemo(()=>({initial:e,animate:n}),[Uz(e),Uz(n)])}function Uz(t){return Array.isArray(t)?t.join(" "):t}function Fz(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const wb={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Zt.test(t))t=parseFloat(t);else return t;const n=Fz(t,e.target.x),r=Fz(t,e.target.y);return`${n}% ${r}%`}},gSe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Sh.parse(t);if(i.length>5)return r;const s=Sh.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Br(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},U4={borderRadius:{...wb,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:wb,borderTopRightRadius:wb,borderBottomLeftRadius:wb,borderBottomRightRadius:wb,boxShadow:gSe};function Nne(t,{layout:e,layoutId:n}){return Jx.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!U4[t]||t==="opacity")}const ySe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xSe=Yx.length;function vSe(t,e,n){let r="",i=!0;for(let s=0;s<xSe;s++){const o=Yx[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=yne(a,x8[o]);if(!l){i=!1;const d=ySe[o]||o;r+=`${d}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function A8(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Jx.has(l)){o=!0;continue}else if(Wte(l)){i[l]=c;continue}else{const d=yne(c,x8[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=vSe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const T8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Cne(t,e,n){for(const r in e)!Us(e[r])&&!Nne(r,n)&&(t[r]=e[r])}function bSe({transformTemplate:t},e){return S.useMemo(()=>{const n=T8();return A8(n,e,t),Object.assign({},n.vars,n.style)},[e])}function wSe(t,e){const n=t.style||{},r={};return Cne(r,n,t),Object.assign(r,bSe(t,e)),r}function ESe(t,e){const n={},r=wSe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const SSe={offset:"stroke-dashoffset",array:"stroke-dasharray"},ASe={offset:"strokeDashoffset",array:"strokeDasharray"};function TSe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?SSe:ASe;t[s.offset]=Zt.transform(-r);const o=Zt.transform(e),a=Zt.transform(n);t[s.array]=`${o} ${a}`}function Pne(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,d){if(A8(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&TSe(h,i,s,o,!1)}const _ne=()=>({...T8(),attrs:{}}),Ine=t=>typeof t=="string"&&t.toLowerCase()==="svg";function kSe(t,e,n,r){const i=S.useMemo(()=>{const s=_ne();return Pne(s,e,Ine(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Cne(s,t.style,t),i.style={...s,...i.style}}return i}const NSe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function k8(t){return typeof t!="string"||t.includes("-")?!1:!!(NSe.indexOf(t)>-1||/[A-Z]/u.test(t))}function CSe(t,e,n,{latestValues:r},i,s=!1){const a=(k8(t)?kSe:ESe)(e,r,i,t),l=hSe(e,typeof t=="string",s),c=t!==S.Fragment?{...l,...a,ref:n}:{},{children:d}=e,h=S.useMemo(()=>Us(d)?d.get():d,[d]);return S.createElement(t,{...c,children:h})}function $z(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function N8(t,e,n,r){if(typeof e=="function"){const[i,s]=$z(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=$z(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function wT(t){return Us(t)?t.get():t}function PSe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:_Se(n,r,i,t),renderState:e()}}function _Se(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=wT(s[m]);let{initial:o,animate:a}=t;const l=TN(t),c=kne(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!AN(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const v=N8(t,m[g]);if(v){const{transitionEnd:x,transition:b,...w}=v;for(const T in w){let N=w[T];if(Array.isArray(N)){const O=d?N.length-1:0;N=N[O]}N!==null&&(i[T]=N)}for(const T in x)i[T]=x[T]}}}return i}const Rne=t=>(e,n)=>{const r=S.useContext(SN),i=S.useContext(EN),s=()=>PSe(t,e,r,i);return n?s():ZD(s)};function C8(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Us(r[o])||e.style&&Us(e.style[o])||Nne(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const ISe=Rne({scrapeMotionValuesFromProps:C8,createRenderState:T8});function One(t,e,n){const r=C8(t,e,n);for(const i in t)if(Us(t[i])||Us(e[i])){const s=Yx.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const RSe=Rne({scrapeMotionValuesFromProps:One,createRenderState:_ne}),OSe=Symbol.for("motionComponentSymbol");function jg(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function MSe(t,e,n){return S.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):jg(n)&&(n.current=r))},[e])}const P8=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),LSe="framerAppearId",Mne="data-"+P8(LSe),Lne=S.createContext({});function DSe(t,e,n,r,i){var x,b;const{visualElement:s}=S.useContext(SN),o=S.useContext(Ane),a=S.useContext(EN),l=S.useContext(w8).reducedMotion,c=S.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,h=S.useContext(Lne);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&jSe(c.current,n,i,h);const m=S.useRef(!1);S.useInsertionEffect(()=>{d&&m.current&&d.update(n,a)});const g=n[Mne],v=S.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return Ite(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),v.current&&d.animationState&&d.animationState.animateChanges())}),S.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),v.current=!1),d.enteringChildren=void 0)}),d}function jSe(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Dne(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&jg(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function Dne(t){if(t)return t.options.allowProjection!==!1?t.projection:Dne(t.parent)}function fR(t,{forwardMotionProps:e=!1}={},n,r){n&&uSe(n);const i=k8(t)?RSe:ISe;function s(a,l){let c;const d={...S.useContext(w8),...a,layoutId:BSe(a)},{isStatic:h}=d,m=mSe(a),g=i(a,h);if(!h&&e8){USe();const v=FSe(d);c=v.MeasureLayout,m.visualElement=DSe(t,g,d,r,v.ProjectionNode)}return u.jsxs(SN.Provider,{value:m,children:[c&&m.visualElement?u.jsx(c,{visualElement:m.visualElement,...d}):null,CSe(t,a,MSe(g,m.visualElement,l),g,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=S.forwardRef(s);return o[OSe]=t,o}function BSe({layoutId:t}){const e=S.useContext(QD).id;return e&&t!==void 0?e+"-"+t:t}function USe(t,e){S.useContext(Ane).strict}function FSe(t){const{drag:e,layout:n}=yx;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function $Se(t,e){if(typeof Proxy>"u")return fR;const n=new Map,r=(s,o)=>fR(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,fR(o,void 0,t,e)),n.get(o))})}function jne({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function zSe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function VSe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function hR(t){return t===void 0||t===1}function F4({scale:t,scaleX:e,scaleY:n}){return!hR(t)||!hR(e)||!hR(n)}function wp(t){return F4(t)||Bne(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Bne(t){return zz(t.x)||zz(t.y)}function zz(t){return t&&t!=="0%"}function l2(t,e,n){const r=t-n,i=e*r;return n+i}function Vz(t,e,n,r,i){return i!==void 0&&(t=l2(t,i,r)),l2(t,n,r)+e}function $4(t,e=0,n=1,r,i){t.min=Vz(t.min,e,n,r,i),t.max=Vz(t.max,e,n,r,i)}function Une(t,{x:e,y:n}){$4(t.x,e.translate,e.scale,e.originPoint),$4(t.y,n.translate,n.scale,n.originPoint)}const Hz=.999999999999,qz=1.0000000000001;function HSe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ug(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Une(t,o)),r&&wp(s.latestValues)&&Ug(t,s.latestValues))}e.x<qz&&e.x>Hz&&(e.x=1),e.y<qz&&e.y>Hz&&(e.y=1)}function Bg(t,e){t.min=t.min+e,t.max=t.max+e}function Gz(t,e,n,r,i=.5){const s=Br(t.min,t.max,i);$4(t,e,n,s,r)}function Ug(t,e){Gz(t.x,e.x,e.scaleX,e.scale,e.originX),Gz(t.y,e.y,e.scaleY,e.scale,e.originY)}function Fne(t,e){return jne(VSe(t.getBoundingClientRect(),e))}function qSe(t,e,n){const r=Fne(t,n),{scroll:i}=e;return i&&(Bg(r.x,i.offset.x),Bg(r.y,i.offset.y)),r}const Kz=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fg=()=>({x:Kz(),y:Kz()}),Wz=()=>({min:0,max:0}),ki=()=>({x:Wz(),y:Wz()}),z4={current:null},$ne={current:!1};function GSe(){if($ne.current=!0,!!e8)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>z4.current=t.matches;t.addEventListener("change",e),e()}else z4.current=!1}const KSe=new WeakMap;function WSe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Us(i))t.addValue(r,i);else if(Us(s))t.addValue(r,gx(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,gx(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Yz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YSe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=g8,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Po.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Cr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=TN(n),this.isVariantNode=kne(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&Us(g)&&g.set(l[m])}}mount(e){var n;this.current=e,KSe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),$ne.current||GSe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:z4.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Eh(this.notifyUpdate),Eh(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Jx.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Cr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yx){const n=yx[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ki()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Yz.length;r++){const i=Yz[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=WSe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=gx(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Rte(r)||Mte(r))?r=parseFloat(r):!rSe(r)&&Sh.test(n)&&(r=gne(e,n)),this.setBaseTarget(e,Us(r)?r.get():r)),Us(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=N8(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Us(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new s8),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){v8.render(this.render)}}class zne extends YSe{constructor(){super(...arguments),this.KeyframeResolver=qEe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Us(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Vne(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function JSe(t){return window.getComputedStyle(t)}class XSe extends zne{constructor(){super(...arguments),this.type="html",this.renderInstance=Vne}readValueFromInstance(e,n){var r;if(Jx.has(n))return(r=this.projection)!=null&&r.isProjecting?R4(n):uEe(e,n);{const i=JSe(e),s=(Wte(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Fne(e,n)}build(e,n,r){A8(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return C8(e,n,r)}}const Hne=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function QSe(t,e,n,r){Vne(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Hne.has(i)?i:P8(i),e.attrs[i])}class ZSe extends zne{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ki}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Jx.has(n)){const r=mne(n);return r&&r.default||0}return n=Hne.has(n)?n:P8(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return One(e,n,r)}build(e,n,r){Pne(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){QSe(e,n,r,i)}mount(e){this.isSVGTag=Ine(e.tagName),super.mount(e)}}const eAe=(t,e)=>k8(t)?new ZSe(e):new XSe(e,{allowProjection:t!==S.Fragment});function iy(t,e,n){const r=t.getProps();return N8(r,e,n!==void 0?n:r.custom,t)}const V4=t=>Array.isArray(t);function tAe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,gx(n))}function nAe(t){return V4(t)?t[t.length-1]||0:t}function rAe(t,e){const n=iy(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=nAe(s[o]);tAe(t,o,a)}}function iAe(t){return!!(Us(t)&&t.add)}function H4(t,e){const n=t.getValue("willChange");if(iAe(n))return n.add(e);if(!n&&md.WillChange){const r=new md.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function qne(t){return t.props[Mne]}const sAe=t=>t!==null;function oAe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(sAe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const aAe={type:"spring",stiffness:500,damping:25,restSpeed:10},lAe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),cAe={type:"keyframes",duration:.8},uAe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dAe=(t,{keyframes:e})=>e.length>2?cAe:Jx.has(t)?t.startsWith("scale")?lAe(e[1]):aAe:uAe;function fAe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const _8=(t,e,n,r={},i,s)=>o=>{const a=y8(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Oc(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};fAe(a)||Object.assign(d,dAe(t,d)),d.duration&&(d.duration=Oc(d.duration)),d.repeatDelay&&(d.repeatDelay=Oc(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(j4(d),d.delay===0&&(h=!0)),(md.instantAnimations||md.skipAnimations)&&(h=!0,j4(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const m=oAe(d.keyframes,a);if(m!==void 0){Cr.update(()=>{d.onUpdate(m),d.onComplete()});return}}return a.isSync?new m8(d):new OEe(d)};function hAe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Gne(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const d in a){const h=t.getValue(d,t.latestValues[d]??null),m=a[d];if(m===void 0||c&&hAe(c,d))continue;const g={delay:n,...y8(s||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===v&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const w=qne(t);if(w){const T=window.MotionHandoffAnimation(w,d,Cr);T!==null&&(g.startTime=T,x=!0)}}H4(t,d),h.start(_8(d,h,m,t.shouldReduceMotion&&fne.has(d)?{type:!1}:g,t,x));const b=h.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{Cr.update(()=>{o&&rAe(t,o)})}),l}function Kne(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,d)=>c.sortNodePosition(d)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function q4(t,e,n={}){var l;const r=iy(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Gne(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=i;return pAe(t,e,c,d,h,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,d]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function pAe(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(q4(l,e,{...o,delay:n+(typeof r=="function"?0:r)+Kne(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function mAe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>q4(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=q4(t,e,n);else{const i=typeof e=="function"?iy(t,e,n.custom):e;r=Promise.all(Gne(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Wne(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const gAe=S8.length;function Yne(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Yne(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<gAe;n++){const r=S8[n],i=t.props[r];(Ow(i)||i===!1)&&(e[r]=i)}return e}const yAe=[...E8].reverse(),xAe=E8.length;function vAe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>mAe(t,n,r)))}function bAe(t){let e=vAe(t),n=Jz(),r=!0;const i=l=>(c,d)=>{var m;const h=iy(t,d,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:g,transitionEnd:v,...x}=h;c={...c,...x,...v}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,d=Yne(t.parent)||{},h=[],m=new Set;let g={},v=1/0;for(let b=0;b<xAe;b++){const w=yAe[b],T=n[w],N=c[w]!==void 0?c[w]:d[w],O=Ow(N),j=w===l?T.isActive:null;j===!1&&(v=b);let _=N===d[w]&&N!==c[w]&&O;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),T.protectedKeys={...g},!T.isActive&&j===null||!N&&!T.prevProp||AN(N)||typeof N=="boolean")continue;const F=wAe(T.prevProp,N);let z=F||w===l&&T.isActive&&!_&&O||b>v&&O,D=!1;const $=Array.isArray(N)?N:[N];let G=$.reduce(i(w),{});j===!1&&(G={});const{prevResolvedValues:H={}}=T,U={...H,...G},A=q=>{z=!0,m.has(q)&&(D=!0,m.delete(q)),T.needsAnimating[q]=!0;const K=t.getValue(q);K&&(K.liveStyle=!1)};for(const q in U){const K=G[q],te=H[q];if(g.hasOwnProperty(q))continue;let Y=!1;V4(K)&&V4(te)?Y=!Wne(K,te):Y=K!==te,Y?K!=null?A(q):m.add(q):K!==void 0&&m.has(q)?A(q):T.protectedKeys[q]=!0}T.prevProp=N,T.prevResolvedValues=G,T.isActive&&(g={...g,...G}),r&&t.blockInitialAnimation&&(z=!1);const I=_&&F;z&&(!I||D)&&h.push(...$.map(q=>{const K={type:w};if(typeof q=="string"&&r&&!I&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,Y=iy(te,q);if(te.enteringChildren&&Y){const{delayChildren:V}=Y.transition||{};K.delay=Kne(te.enteringChildren,t,V)}}return{animation:q,options:K}}))}if(m.size){const b={};if(typeof c.initial!="boolean"){const w=iy(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(b.transition=w.transition)}m.forEach(w=>{const T=t.getBaseTarget(w),N=t.getValue(w);N&&(N.liveStyle=!0),b[w]=T??null}),h.push({animation:b})}let x=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Jz()}}}function wAe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Wne(e,t):!1}function fp(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jz(){return{animate:fp(!0),whileInView:fp(),whileHover:fp(),whileTap:fp(),whileDrag:fp(),whileFocus:fp(),exit:fp()}}class Lh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class EAe extends Lh{constructor(e){super(e),e.animationState||(e.animationState=bAe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();AN(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let SAe=0;class AAe extends Lh{constructor(){super(...arguments),this.id=SAe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const TAe={animation:{Feature:EAe},exit:{Feature:AAe}};function Mw(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function W1(t){return{point:{x:t.pageX,y:t.pageY}}}const kAe=t=>e=>b8(e)&&t(e,W1(e));function hw(t,e,n,r){return Mw(t,e,kAe(n),r)}const Jne=1e-4,NAe=1-Jne,CAe=1+Jne,Xne=.01,PAe=0-Xne,_Ae=0+Xne;function ro(t){return t.max-t.min}function IAe(t,e,n){return Math.abs(t-e)<=n}function Xz(t,e,n,r=.5){t.origin=r,t.originPoint=Br(e.min,e.max,t.origin),t.scale=ro(n)/ro(e),t.translate=Br(n.min,n.max,t.origin)-t.originPoint,(t.scale>=NAe&&t.scale<=CAe||isNaN(t.scale))&&(t.scale=1),(t.translate>=PAe&&t.translate<=_Ae||isNaN(t.translate))&&(t.translate=0)}function pw(t,e,n,r){Xz(t.x,e.x,n.x,r?r.originX:void 0),Xz(t.y,e.y,n.y,r?r.originY:void 0)}function Qz(t,e,n){t.min=n.min+e.min,t.max=t.min+ro(e)}function RAe(t,e,n){Qz(t.x,e.x,n.x),Qz(t.y,e.y,n.y)}function Zz(t,e,n){t.min=e.min-n.min,t.max=t.min+ro(e)}function c2(t,e,n){Zz(t.x,e.x,n.x),Zz(t.y,e.y,n.y)}function ja(t){return[t("x"),t("y")]}const Qne=({current:t})=>t?t.ownerDocument.defaultView:null,eV=(t,e)=>Math.abs(t-e);function OAe(t,e){const n=eV(t.x,e.x),r=eV(t.y,e.y);return Math.sqrt(n**2+r**2)}class Zne{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=mR(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,v=OAe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!v)return;const{point:x}=m,{timestamp:b}=ls;this.history.push({...x,timestamp:b});const{onStart:w,onMove:T}=this.handlers;g||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=pR(g,this.transformPagePoint),Cr.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=mR(m.type==="pointercancel"?this.lastMoveEventInfo:pR(g,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,w),x&&x(m,w)},!b8(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=W1(e),l=pR(a,this.transformPagePoint),{point:c}=l,{timestamp:d}=ls;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,mR(l,this.history)),this.removeListeners=q1(hw(this.contextWindow,"pointermove",this.handlePointerMove),hw(this.contextWindow,"pointerup",this.handlePointerUp),hw(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Eh(this.updatePoint)}}function pR(t,e){return e?{point:e(t.point)}:t}function tV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function mR({point:t},e){return{point:t,delta:tV(t,ere(e)),offset:tV(t,MAe(e)),velocity:LAe(e,.1)}}function MAe(t){return t[0]}function ere(t){return t[t.length-1]}function LAe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=ere(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Oc(e)));)n--;if(!r)return{x:0,y:0};const s=Za(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function DAe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Br(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Br(n,t,r.max):Math.min(t,n)),t}function nV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function jAe(t,{top:e,left:n,bottom:r,right:i}){return{x:nV(t.x,n,i),y:nV(t.y,e,r)}}function rV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function BAe(t,e){return{x:rV(t.x,e.x),y:rV(t.y,e.y)}}function UAe(t,e){let n=.5;const r=ro(t),i=ro(e);return i>r?n=_w(e.min,e.max-r,t.min):r>i&&(n=_w(t.min,t.max-i,e.min)),pd(0,1,n)}function FAe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const G4=.35;function $Ae(t=G4){return t===!1?t=0:t===!0&&(t=G4),{x:iV(t,"left","right"),y:iV(t,"top","bottom")}}function iV(t,e,n){return{min:sV(t,e),max:sV(t,n)}}function sV(t,e){return typeof t=="number"?t:t[e]||0}const zAe=new WeakMap;class VAe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ki(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(W1(h).point)},o=(h,m)=>{const{drag:g,dragPropagation:v,onDragStart:x}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=YEe(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ja(w=>{let T=this.getAxisMotionValue(w).get()||0;if(Mc.test(T)){const{projection:N}=this.visualElement;if(N&&N.layout){const O=N.layout.layoutBox[w];O&&(T=ro(O)*(parseFloat(T)/100))}}this.originPoint[w]=T}),x&&Cr.postRender(()=>x(h,m)),H4(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:x,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=m;if(v&&this.currentDirection===null){this.currentDirection=HAe(w),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),b&&b(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>ja(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Zne(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Qne(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Cr.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!sA(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=DAe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&jg(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=jAe(r.layoutBox,e):this.constraints=!1,this.elastic=$Ae(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ja(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=FAe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!jg(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=qSe(r,i.root,this.visualElement.getTransformPagePoint());let o=BAe(i.layout.layoutBox,s);if(n){const a=n(zSe(o));this.hasMutatedConstraints=!!a,a&&(o=jne(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ja(d=>{if(!sA(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return H4(this.visualElement,e),r.start(_8(e,r,0,n,this.visualElement,!1))}stopAnimation(){ja(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ja(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ja(n=>{const{drag:r}=this.getProps();if(!sA(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Br(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!jg(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ja(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=UAe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ja(o=>{if(!sA(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Br(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;zAe.set(this.visualElement,this);const e=this.visualElement.current,n=hw(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();jg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Cr.read(r);const o=Mw(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ja(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=G4,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function sA(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function HAe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class qAe extends Lh{constructor(e){super(e),this.removeGroupControls=tl,this.removeListeners=tl,this.controls=new VAe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tl}unmount(){this.removeGroupControls(),this.removeListeners()}}const oV=t=>(e,n)=>{t&&Cr.postRender(()=>t(e,n))};class GAe extends Lh{constructor(){super(...arguments),this.removePointerDownListener=tl}onPointerDown(e){this.session=new Zne(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qne(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:oV(e),onStart:oV(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Cr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=hw(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ET={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let gR=!1;class KAe extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),gR&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ET.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,gR=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Cr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),v8.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;gR=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function tre(t){const[e,n]=Sne(),r=S.useContext(QD);return u.jsx(KAe,{...t,layoutGroup:r,switchLayoutGroup:S.useContext(Lne),isPresent:e,safeToRemove:n})}function WAe(t,e,n){const r=Us(t)?t:gx(t);return r.start(_8("",r,e,n)),r.animation}const YAe=(t,e)=>t.depth-e.depth;class JAe{constructor(){this.children=[],this.isDirty=!1}add(e){t8(this.children,e),this.isDirty=!0}remove(e){n8(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(YAe),this.isDirty=!1,this.children.forEach(e)}}function XAe(t,e){const n=Po.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Eh(r),t(s-e))};return Cr.setup(r,!0),()=>Eh(r)}const nre=["TopLeft","TopRight","BottomLeft","BottomRight"],QAe=nre.length,aV=t=>typeof t=="string"?parseFloat(t):t,lV=t=>typeof t=="number"||Zt.test(t);function ZAe(t,e,n,r,i,s){i?(t.opacity=Br(0,n.opacity??1,eTe(r)),t.opacityExit=Br(e.opacity??1,0,tTe(r))):s&&(t.opacity=Br(e.opacity??1,n.opacity??1,r));for(let o=0;o<QAe;o++){const a=`border${nre[o]}Radius`;let l=cV(e,a),c=cV(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||lV(l)===lV(c)?(t[a]=Math.max(Br(aV(l),aV(c),r),0),(Mc.test(c)||Mc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Br(e.rotate||0,n.rotate||0,r))}function cV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const eTe=rre(0,.5,zte),tTe=rre(.5,.95,tl);function rre(t,e,n){return r=>r<t?0:r>e?1:n(_w(t,e,r))}function uV(t,e){t.min=e.min,t.max=e.max}function gl(t,e){uV(t.x,e.x),uV(t.y,e.y)}function dV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function fV(t,e,n,r,i){return t-=e,t=l2(t,1/n,r),i!==void 0&&(t=l2(t,1/i,r)),t}function nTe(t,e=0,n=1,r=.5,i,s=t,o=t){if(Mc.test(e)&&(e=parseFloat(e),e=Br(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Br(s.min,s.max,r);t===s&&(a-=e),t.min=fV(t.min,e,n,a,i),t.max=fV(t.max,e,n,a,i)}function hV(t,e,[n,r,i],s,o){nTe(t,e[n],e[r],e[i],e.scale,s,o)}const rTe=["x","scaleX","originX"],iTe=["y","scaleY","originY"];function pV(t,e,n,r){hV(t.x,e,rTe,n?n.x:void 0,r?r.x:void 0),hV(t.y,e,iTe,n?n.y:void 0,r?r.y:void 0)}function mV(t){return t.translate===0&&t.scale===1}function ire(t){return mV(t.x)&&mV(t.y)}function gV(t,e){return t.min===e.min&&t.max===e.max}function sTe(t,e){return gV(t.x,e.x)&&gV(t.y,e.y)}function yV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function sre(t,e){return yV(t.x,e.x)&&yV(t.y,e.y)}function xV(t){return ro(t.x)/ro(t.y)}function vV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class oTe{constructor(){this.members=[]}add(e){t8(this.members,e),e.scheduleRender()}remove(e){if(n8(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aTe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:m,skewX:g,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const yR=["","X","Y","Z"],lTe=1e3;let cTe=0;function xR(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function ore(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=qne(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Cr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&ore(r)}function are({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=cTe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fTe),this.nodes.forEach(gTe),this.nodes.forEach(yTe),this.nodes.forEach(hTe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new JAe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new s8),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Ene(o)&&!tSe(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d,h=0;const m=()=>this.root.updateBlockedByResize=!1;Cr.read(()=>{h=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,d&&d(),d=XAe(m,250),ET.hasAnimatedSinceResize&&(ET.hasAnimatedSinceResize=!1,this.nodes.forEach(EV)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||ETe,{onLayoutAnimationStart:x,onLayoutAnimationComplete:b}=c.getProps(),w=!this.targetLayout||!sre(this.targetLayout,g),T=!h&&m;if(this.options.layoutRoot||this.resumeFrom||T||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...y8(v,"layout"),onPlay:x,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(d,T)}else h||EV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Eh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xTe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ore(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(wV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(mTe),this.nodes.forEach(uTe),this.nodes.forEach(dTe)):this.nodes.forEach(wV),this.clearAllSnapshots();const a=Po.now();ls.delta=pd(0,1e3/60,a-ls.timestamp),ls.timestamp=a,ls.isProcessing=!0,oR.update.process(ls),oR.preRender.process(ls),oR.render.process(ls),ls.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,v8.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pTe),this.sharedNodes.forEach(vTe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Cr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Cr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ro(this.snapshot.measuredBox.x)&&!ro(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ki(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!ire(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||wp(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),STe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return ki();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(ATe))){const{scroll:d}=this.root;d&&(Bg(a.x,d.offset.x),Bg(a.y,d.offset.y))}return a}removeElementScroll(o){var l;const a=ki();if(gl(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&gl(a,o),Bg(a.x,h.offset.x),Bg(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=ki();gl(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ug(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),wp(d.latestValues)&&Ug(l,d.latestValues)}return wp(this.latestValues)&&Ug(l,this.latestValues),l}removeTransform(o){const a=ki();gl(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!wp(c.latestValues))continue;F4(c.latestValues)&&c.updateSnapshot();const d=ki(),h=c.measurePageBox();gl(d,h),pV(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return wp(this.latestValues)&&pV(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ls.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=ls.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ki(),this.targetWithTransforms=ki()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RAe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gl(this.target,this.layout.layoutBox),Une(this.target,this.targetDelta)):gl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||F4(this.parent.latestValues)||Bne(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ki(),this.relativeTargetOrigin=ki(),c2(this.relativeTargetOrigin,a,l),gl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ls.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;gl(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;HSe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ki());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(dV(this.prevProjectionDelta.x,this.projectionDelta.x),dV(this.prevProjectionDelta.y,this.projectionDelta.y)),pw(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!vV(this.projectionDelta.x,this.prevProjectionDelta.x)||!vV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fg(),this.projectionDelta=Fg(),this.projectionDeltaWithTransform=Fg()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=Fg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=ki(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=g!==v,b=this.getStack(),w=!b||b.members.length<=1,T=!!(x&&!w&&this.options.crossfade===!0&&!this.path.some(wTe));this.animationProgress=0;let N;this.mixTargetDelta=O=>{const j=O/1e3;SV(h.x,o.x,j),SV(h.y,o.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(c2(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bTe(this.relativeTarget,this.relativeTargetOrigin,m,j),N&&sTe(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=ki()),gl(N,this.relativeTarget)),x&&(this.animationValues=d,ZAe(d,c,this.latestValues,j,T,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Eh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Cr.update(()=>{ET.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gx(0)),this.currentAnimation=WAe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lTe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&lre(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ki();const h=ro(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=ro(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}gl(a,l),Ug(a,d),pw(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new oTe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&xR("z",o,c,this.animationValues);for(let d=0;d<yR.length;d++)xR(`rotate${yR[d]}`,o,c,this.animationValues),xR(`skew${yR[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=wT(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=wT(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!wp(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=aTe(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),o.transform=h;const{x:m,y:g}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in U4){if(d[v]===void 0)continue;const{correct:x,applyTo:b,isCSSVariable:w}=U4[v],T=h==="none"?d[v]:x(d[v],c);if(b){const N=b.length;for(let O=0;O<N;O++)o[b[O]]=T}else w?this.options.visualElement.renderState.vars[v]=T:o[v]=T}this.options.layoutId&&(o.pointerEvents=c===this?wT(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(bV),this.root.sharedNodes.clear()}}}function uTe(t){t.updateLayout()}function dTe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?ja(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],g=ro(m);m.min=r[h].min,m.max=m.min+g}):lre(s,e.layoutBox,r)&&ja(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],g=ro(r[h]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=Fg();pw(a,r,e.layoutBox);const l=Fg();o?pw(l,t.applyTransform(i,!0),e.measuredBox):pw(l,r,e.layoutBox);const c=!ire(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const v=ki();c2(v,e.layoutBox,m.layoutBox);const x=ki();c2(x,r,g.layoutBox),sre(v,x)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function fTe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hTe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pTe(t){t.clearSnapshot()}function bV(t){t.clearMeasurements()}function wV(t){t.isLayoutDirty=!1}function mTe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function EV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gTe(t){t.resolveTargetDelta()}function yTe(t){t.calcProjection()}function xTe(t){t.resetSkewAndRotation()}function vTe(t){t.removeLeadSnapshot()}function SV(t,e,n){t.translate=Br(e.translate,0,n),t.scale=Br(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function AV(t,e,n,r){t.min=Br(e.min,n.min,r),t.max=Br(e.max,n.max,r)}function bTe(t,e,n,r){AV(t.x,e.x,n.x,r),AV(t.y,e.y,n.y,r)}function wTe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ETe={duration:.45,ease:[.4,0,.1,1]},TV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),kV=TV("applewebkit/")&&!TV("chrome/")?Math.round:tl;function NV(t){t.min=kV(t.min),t.max=kV(t.max)}function STe(t){NV(t.x),NV(t.y)}function lre(t,e,n){return t==="position"||t==="preserve-aspect"&&!IAe(xV(e),xV(n),.2)}function ATe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const TTe=are({attachResizeListener:(t,e)=>Mw(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vR={current:void 0},cre=are({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vR.current){const t=new TTe({});t.mount(window),t.setOptions({layoutScroll:!0}),vR.current=t}return vR.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),kTe={pan:{Feature:GAe},drag:{Feature:qAe,ProjectionNode:cre,MeasureLayout:tre}};function CV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Cr.postRender(()=>s(e,W1(e)))}class NTe extends Lh{mount(){const{current:e}=this.node;e&&(this.unmount=JEe(e,(n,r)=>(CV(this.node,r,"Start"),i=>CV(this.node,i,"End"))))}unmount(){}}class CTe extends Lh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=q1(Mw(this.node.current,"focus",()=>this.onFocus()),Mw(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function PV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Cr.postRender(()=>s(e,W1(e)))}class PTe extends Lh{mount(){const{current:e}=this.node;e&&(this.unmount=eSe(e,(n,r)=>(PV(this.node,r,"Start"),(i,{success:s})=>PV(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const K4=new WeakMap,bR=new WeakMap,_Te=t=>{const e=K4.get(t.target);e&&e(t)},ITe=t=>{t.forEach(_Te)};function RTe({root:t,...e}){const n=t||document;bR.has(n)||bR.set(n,{});const r=bR.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(ITe,{root:t,...e})),r[i]}function OTe(t,e,n){const r=RTe(e);return K4.set(t,n),r.observe(t),()=>{K4.delete(t),r.unobserve(t)}}const MTe={some:0,all:1};class LTe extends Lh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:MTe[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=c?d:h;m&&m(l)};return OTe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(DTe(e,n))&&this.startObserver()}unmount(){}}function DTe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const jTe={inView:{Feature:LTe},tap:{Feature:PTe},focus:{Feature:CTe},hover:{Feature:NTe}},BTe={layout:{ProjectionNode:cre,MeasureLayout:tre}},UTe={...TAe,...jTe,...kTe,...BTe},_t=$Se(UTe,eAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FTe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$Te=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),_V=t=>{const e=$Te(t);return e.charAt(0).toUpperCase()+e.slice(1)},ure=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),zTe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VTe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HTe=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...VTe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:ure("lucide",i),...!s&&!zTe(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(t,e)=>{const n=S.forwardRef(({className:r,...i},s)=>S.createElement(HTe,{ref:s,iconNode:e,className:ure(`lucide-${FTe(_V(t))}`,`lucide-${t}`,r),...i}));return n.displayName=_V(t),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qTe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ys=xt("activity",qTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GTe=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],KTe=xt("arrow-down-left",GTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WTe=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],YTe=xt("arrow-down-to-line",WTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JTe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],u2=xt("arrow-left",JTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XTe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],kN=xt("arrow-right",XTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QTe=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],dre=xt("arrow-up-right",QTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZTe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],$g=xt("bot",ZTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2e=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],ao=xt("brain",e2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2e=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],n2e=xt("briefcase",t2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2e=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],i2e=xt("bug",r2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2e=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],I8=xt("calendar-clock",s2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],a2e=xt("chart-bar",o2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],fre=xt("chart-column",l2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2e=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Bl=xt("chart-no-axes-column",c2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2e=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Lw=xt("chart-pie",u2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wm=xt("check",d2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pa=xt("chevron-down",f2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Dw=xt("chevron-left",h2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rl=xt("chevron-right",p2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2e=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ah=xt("chevron-up",m2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],R8=xt("circle-alert",g2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Im=xt("circle-check-big",y2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],O8=xt("circle-check",x2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],b2e=xt("circle-question-mark",v2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Rm=xt("circle-x",w2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qr=xt("clock",E2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2e=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],d2=xt("coins",S2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2e=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Em=xt("copy",A2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2e=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],hre=xt("cpu",T2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2e=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],NN=xt("database",k2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2e=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Y1=xt("dollar-sign",N2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Qs=xt("download",C2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2e=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],jw=xt("droplets",P2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],gd=xt("external-link",_2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],CN=xt("eye-off",I2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],M8=xt("eye",R2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],IV=xt("file-text",O2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],pre=xt("funnel",M2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ST=xt("globe",L2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],J1=xt("info",D2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],W4=xt("key",j2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2e=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],f2=xt("layers",B2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2e=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],F2e=xt("lightbulb",U2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],L8=xt("loader-circle",$2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2e=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],V2e=xt("lock-keyhole",z2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],mre=xt("lock-open",H2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],yd=xt("lock",q2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],RV=xt("log-out",G2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],W2e=xt("mail",K2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2e=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],OV=xt("menu",Y2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],gre=xt("message-square-plus",J2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],h2=xt("message-square",X2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2e=[["path",{d:"M5 12h14",key:"1ays0h"}]],Xr=xt("minus",Q2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2e=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],eke=xt("percent",Z2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tke=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sr=xt("plus",tke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nke=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ql=xt("refresh-cw",nke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rke=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yre=xt("rotate-ccw",rke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ike=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],D8=xt("save",ike);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ske=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],j8=xt("scroll-text",ske);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oke=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],B8=xt("search",oke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ake=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],xre=xt("send",ake);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lke=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],p2=xt("settings",lke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],uke=xt("shield-alert",cke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xd=xt("shield-check",dke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vd=xt("shield",fke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hke=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Bw=xt("sparkles",hke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],sy=xt("target",pke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mke=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],PN=xt("terminal",mke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gke=[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]],U8=xt("thumbs-down",gke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yke=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],vre=xt("thumbs-up",yke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xke=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Th=xt("trash-2",xke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vke=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],ld=xt("trending-down",vke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bke=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dn=xt("trending-up",bke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wke=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ci=xt("triangle-alert",wke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eke=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],m2=xt("upload",Eke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ske=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ake=xt("user",Ske);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tke=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],kh=xt("wallet",Tke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kke=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],bre=xt("wand-sparkles",kke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nke=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xx=xt("x",Nke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cke=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ro=xt("zap",Cke),wre="6.16.0";function Pke(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function Os(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Bt(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&Pke(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function zg(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>zg(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return zg(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${zg(r,e)}: ${zg(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ms(t,e){return t&&t.code===e}function F8(t){return ms(t,"CALL_EXCEPTION")}function Mr(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${zg(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+zg(a))}}s.push(`code=${e}`),s.push(`version=${wre}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Bt(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Bt(i,{shortMessage:r}),i}function Xe(t,e,n,r){if(!t)throw Mr(e,n,r)}function xe(t,e,n,r){Xe(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Ere(t,e,n){n==null&&(n=""),n&&(n=": "+n),Xe(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),Xe(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const _ke=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Sre(t){Xe(_ke.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function Dh(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),Xe(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function Are(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}xe(!1,"invalid BytesLike value",e||"value",t)}function bt(t,e){return Are(t,e,!1)}function gs(t,e){return Are(t,e,!0)}function xr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function _N(t){return xr(t,!0)||t instanceof Uint8Array}const MV="0123456789abcdef";function at(t){const e=bt(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=MV[(i&240)>>4]+MV[i&15]}return n}function On(t){return"0x"+t.map(e=>at(e).substring(2)).join("")}function oy(t){return xr(t,!0)?(t.length-2)/2:bt(t).length}function yr(t,e,n){const r=bt(t);return n!=null&&n>r.length&&Xe(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),at(r.slice(e??0,n??r.length))}function xgt(t){let e=at(t).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function Tre(t,e,n){const r=bt(t);Xe(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),at(i)}function bd(t,e){return Tre(t,e,!0)}function Ike(t,e){return Tre(t,e,!1)}const X1=BigInt(0),Ml=BigInt(1),Vg=9007199254740991;function g2(t,e){const n=IN(t,"value"),r=BigInt(en(e,"width"));if(Xe(n>>r===X1,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Ml){const i=(Ml<<r)-Ml;return-((~n&i)+Ml)}return n}function kre(t,e){let n=Ct(t,"value");const r=BigInt(en(e,"width")),i=Ml<<r-Ml;if(n<X1){n=-n,Xe(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(Ml<<r)-Ml;return(~n&s)+Ml}else Xe(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Fp(t,e){const n=IN(t,"value"),r=BigInt(en(e,"bits"));return n&(Ml<<r)-Ml}function Ct(t,e){switch(typeof t){case"bigint":return t;case"number":return xe(Number.isInteger(t),"underflow",e||"value",t),xe(t>=-Vg&&t<=Vg,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){xe(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}xe(!1,"invalid BigNumberish value",e||"value",t)}function IN(t,e){const n=Ct(t,e);return Xe(n>=X1,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const LV="0123456789abcdef";function Q1(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=LV[n>>4],e+=LV[n&15];return BigInt(e)}return Ct(t)}function en(t,e){switch(typeof t){case"bigint":return xe(t>=-Vg&&t<=Vg,"overflow",e||"value",t),Number(t);case"number":return xe(Number.isInteger(t),"underflow",e||"value",t),xe(t>=-Vg&&t<=Vg,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return en(BigInt(t),e)}catch(n){xe(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}xe(!1,"invalid numeric value",e||"value",t)}function Rke(t){return en(Q1(t))}function wd(t,e){const n=IN(t,"value");let r=n.toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=en(e,"width");if(i===0&&n===X1)return"0x";for(Xe(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function Ur(t,e){const n=IN(t,"value");if(n===X1){const s=e!=null?en(e,"width"):0;return new Uint8Array(s)}let r=n.toString(16);if(r.length%2&&(r="0"+r),e!=null){const s=en(e,"width");for(;r.length<s*2;)r="00"+r;Xe(s*2===r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:t})}const i=new Uint8Array(r.length/2);for(let s=0;s<i.length;s++){const o=s*2;i[s]=parseInt(r.substring(o,o+2),16)}return i}function Ol(t){let e=at(_N(t)?t:Ur(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const y2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let oA=null;function Oke(t){if(oA==null){oA={};for(let n=0;n<y2.length;n++)oA[y2[n]]=BigInt(n)}const e=oA[t];return xe(e!=null,"invalid base58 value","letter",t),e}const Mke=BigInt(0),Y4=BigInt(58);function Nre(t){const e=bt(t);let n=Q1(e),r="";for(;n;)r=y2[Number(n%Y4)]+r,n/=Y4;for(let i=0;i<e.length&&!e[i];i++)r=y2[0]+r;return r}function Lke(t){let e=Mke;for(let n=0;n<t.length;n++)e*=Y4,e+=Oke(t[n]);return e}function Dke(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return bt(e)}function jke(t){const e=bt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var Ny;class Cre{constructor(e,n,r){Ne(this,"filter");Ne(this,"emitter");Fe(this,Ny);me(this,Ny,n),Bt(this,{emitter:e,filter:r})}async removeListener(){re(this,Ny)!=null&&await this.emitter.off(this.filter,re(this,Ny))}}Ny=new WeakMap;function Bke(t,e,n,r,i){xe(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Pre(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function Uke(t,e,n,r,i){return t==="OVERLONG"?(xe(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),Pre(t,e,n))}const Fke=Object.freeze({error:Bke,ignore:Pre,replace:Uke});function _re(t,e){e==null&&(e=Fke.error);const n=bt(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(s>>7===0){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let d=n[i];if((d&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|d&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=e("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function vi(t,e){xe(typeof t=="string","invalid string value","str",t),e!=null&&(Sre(e),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);xe(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function $ke(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function x2(t,e){return $ke(_re(t,e))}function vgt(t,e){return _re(vi(t,e))}function Ire(t){async function e(n,r){Xe(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();Xe(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Xe(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=Mr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=Mr("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let c;try{c=await fetch(n.url,l)}catch(g){throw clearTimeout(a),s||g}clearTimeout(a);const d={};c.headers.forEach((g,v)=>{d[v.toLowerCase()]=g});const h=await c.arrayBuffer(),m=h==null?null:new Uint8Array(h);return{statusCode:c.status,statusMessage:c.statusText,headers:d,body:m}}return e}const zke=12,Vke=250;let DV=Ire();const Hke=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),qke=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let wR=!1;async function Rre(t,e){try{const n=t.match(Hke);if(!n)throw new Error("invalid data");return new yh(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Dke(n[3]):Kke(n[3]))}catch{return new yh(599,"BAD REQUEST (invalid data: URI)",{},null,new Ed(t))}}function Ore(t){async function e(n,r){try{const i=n.match(qke);if(!i)throw new Error("invalid link");return new Ed(`${t}${i[2]}`)}catch{return new yh(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ed(n))}}return e}const aA={data:Rre,ipfs:Ore("https://gateway.ipfs.io/ipfs/")},Mre=new WeakMap;var Xp,Xf;class Gke{constructor(e){Fe(this,Xp);Fe(this,Xf);me(this,Xp,[]),me(this,Xf,!1),Mre.set(e,()=>{if(!re(this,Xf)){me(this,Xf,!0);for(const n of re(this,Xp))setTimeout(()=>{n()},0);me(this,Xp,[])}})}addListener(e){Xe(!re(this,Xf),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),re(this,Xp).push(e)}get cancelled(){return re(this,Xf)}checkSignal(){Xe(!this.cancelled,"cancelled","CANCELLED",{})}}Xp=new WeakMap,Xf=new WeakMap;function lA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Cy,Py,kl,Uu,_y,Iy,ji,Xo,Fu,Qp,Zp,em,pc,Nl,Qf,tm,Wb;const uN=class uN{constructor(e){Fe(this,tm);Fe(this,Cy);Fe(this,Py);Fe(this,kl);Fe(this,Uu);Fe(this,_y);Fe(this,Iy);Fe(this,ji);Fe(this,Xo);Fe(this,Fu);Fe(this,Qp);Fe(this,Zp);Fe(this,em);Fe(this,pc);Fe(this,Nl);Fe(this,Qf);me(this,Iy,String(e)),me(this,Cy,!1),me(this,Py,!0),me(this,kl,{}),me(this,Uu,""),me(this,_y,3e5),me(this,Nl,{slotInterval:Vke,maxAttempts:zke}),me(this,Qf,null)}get url(){return re(this,Iy)}set url(e){me(this,Iy,String(e))}get body(){return re(this,ji)==null?null:new Uint8Array(re(this,ji))}set body(e){if(e==null)me(this,ji,void 0),me(this,Xo,void 0);else if(typeof e=="string")me(this,ji,vi(e)),me(this,Xo,"text/plain");else if(e instanceof Uint8Array)me(this,ji,e),me(this,Xo,"application/octet-stream");else if(typeof e=="object")me(this,ji,vi(JSON.stringify(e))),me(this,Xo,"application/json");else throw new Error("invalid body")}hasBody(){return re(this,ji)!=null}get method(){return re(this,Uu)?re(this,Uu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),me(this,Uu,String(e).toUpperCase())}get headers(){const e=Object.assign({},re(this,kl));return re(this,Fu)&&(e.authorization=`Basic ${jke(vi(re(this,Fu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&re(this,Xo)&&(e["content-type"]=re(this,Xo)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){re(this,kl)[String(e).toLowerCase()]=String(n)}clearHeaders(){me(this,kl,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return re(this,Fu)||null}setCredentials(e,n){xe(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),me(this,Fu,`${e}:${n}`)}get allowGzip(){return re(this,Py)}set allowGzip(e){me(this,Py,!!e)}get allowInsecureAuthentication(){return!!re(this,Cy)}set allowInsecureAuthentication(e){me(this,Cy,!!e)}get timeout(){return re(this,_y)}set timeout(e){xe(e>=0,"timeout must be non-zero","timeout",e),me(this,_y,e)}get preflightFunc(){return re(this,Qp)||null}set preflightFunc(e){me(this,Qp,e)}get processFunc(){return re(this,Zp)||null}set processFunc(e){me(this,Zp,e)}get retryFunc(){return re(this,em)||null}set retryFunc(e){me(this,em,e)}get getUrlFunc(){return re(this,Qf)||DV}set getUrlFunc(e){me(this,Qf,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${re(this,ji)?at(re(this,ji)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(re(this,Nl).slotInterval=e.slotInterval),e.maxAttempts!=null&&(re(this,Nl).maxAttempts=e.maxAttempts)}send(){return Xe(re(this,pc)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),me(this,pc,new Gke(this)),rt(this,tm,Wb).call(this,0,jV()+this.timeout,0,this,new yh(0,"",{},null,this))}cancel(){Xe(re(this,pc)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Mre.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();Xe(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new uN(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,me(i,kl,Object.assign({},re(this,kl))),re(this,ji)&&me(i,ji,new Uint8Array(re(this,ji))),me(i,Xo,re(this,Xo)),i}clone(){const e=new uN(this.url);return me(e,Uu,re(this,Uu)),re(this,ji)&&me(e,ji,re(this,ji)),me(e,Xo,re(this,Xo)),me(e,kl,Object.assign({},re(this,kl))),me(e,Fu,re(this,Fu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),me(e,Qp,re(this,Qp)),me(e,Zp,re(this,Zp)),me(e,em,re(this,em)),me(e,Nl,Object.assign({},re(this,Nl))),me(e,Qf,re(this,Qf)),e}static lockConfig(){wR=!0}static getGateway(e){return aA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(wR)throw new Error("gateways locked");aA[e]=n}static registerGetUrl(e){if(wR)throw new Error("gateways locked");DV=e}static createGetUrlFunc(e){return Ire(e)}static createDataGateway(){return Rre}static createIpfsGatewayFunc(e){return Ore(e)}};Cy=new WeakMap,Py=new WeakMap,kl=new WeakMap,Uu=new WeakMap,_y=new WeakMap,Iy=new WeakMap,ji=new WeakMap,Xo=new WeakMap,Fu=new WeakMap,Qp=new WeakMap,Zp=new WeakMap,em=new WeakMap,pc=new WeakMap,Nl=new WeakMap,Qf=new WeakMap,tm=new WeakSet,Wb=async function(e,n,r,i,s){var d,h,m;if(e>=re(this,Nl).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Xe(jV()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await Wke(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in aA){const g=await aA[a](o.url,lA(re(i,pc)));if(g instanceof yh){let v=g;if(this.processFunc){lA(re(i,pc));try{v=await this.processFunc(o,v)}catch(x){(x.throttle==null||typeof x.stall!="number")&&v.makeServerError("error in post-processing function",x).assertOk()}}return v}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,lA(re(i,pc)));let c=new yh(l.statusCode,l.statusMessage,l.headers,l.body,i);if(c.statusCode===301||c.statusCode===302){try{const g=c.headers.location||"";return rt(d=o.redirect(g),tm,Wb).call(d,e+1,n,0,i,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const g=c.headers["retry-after"];let v=re(this,Nl).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(v=parseInt(g)),rt(h=o.clone(),tm,Wb).call(h,e+1,n,v,i,c)}if(this.processFunc){lA(re(i,pc));try{c=await this.processFunc(o,c)}catch(g){(g.throttle==null||typeof g.stall!="number")&&c.makeServerError("error in post-processing function",g).assertOk();let v=re(this,Nl).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return g.stall>=0&&(v=g.stall),rt(m=o.clone(),tm,Wb).call(m,e+1,n,v,i,c)}}return c};let Ed=uN;var k1,N1,C1,Qo,Ry,nm;const z7=class z7{constructor(e,n,r,i,s){Fe(this,k1);Fe(this,N1);Fe(this,C1);Fe(this,Qo);Fe(this,Ry);Fe(this,nm);me(this,k1,e),me(this,N1,n),me(this,C1,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),me(this,Qo,i==null?null:new Uint8Array(i)),me(this,Ry,s||null),me(this,nm,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${re(this,Qo)?at(re(this,Qo)):"null"}>`}get statusCode(){return re(this,k1)}get statusMessage(){return re(this,N1)}get headers(){return Object.assign({},re(this,C1))}get body(){return re(this,Qo)==null?null:new Uint8Array(re(this,Qo))}get bodyText(){try{return re(this,Qo)==null?"":x2(re(this,Qo))}catch{Xe(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Xe(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new z7(599,r,this.headers,this.body,re(this,Ry)||void 0);return me(i,nm,{message:e,error:n}),i}throwThrottleError(e,n){n==null?n=-1:xe(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Bt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return re(this,Qo)!=null}get request(){return re(this,Ry)}ok(){return re(this,nm).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=re(this,nm);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{re(this,Qo)&&(i=x2(re(this,Qo)))}catch{}Xe(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};k1=new WeakMap,N1=new WeakMap,C1=new WeakMap,Qo=new WeakMap,Ry=new WeakMap,nm=new WeakMap;let yh=z7;function jV(){return new Date().getTime()}function Kke(t){return vi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function Wke(t){return new Promise(e=>setTimeout(e,t))}const Yke=BigInt(-1),bl=BigInt(0),Hg=BigInt(1),Jke=BigInt(5),ng={};let ay="0000";for(;ay.length<80;)ay+=ay;function hp(t){let e=ay;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Eb(t,e,n){const r=BigInt(e.width);if(e.signed){const i=Hg<<r-Hg;Xe(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>bl?t=g2(Fp(t,r),r):t=-g2(Fp(-t,r),r)}else{const i=Hg<<r;Xe(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Hg}return t}function ER(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);xe(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,l,c)=>s[a]==null?c:(xe(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}xe(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),xe(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function Xke(t,e){let n="";t<bl&&(n="-",t*=Yke);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=ay+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var Cl,ir,Ys,Gn,Ep,_u,J4,X4,Q4,Z4;const Kf=class Kf{constructor(e,n,r){Fe(this,Gn);Ne(this,"format");Fe(this,Cl);Fe(this,ir);Fe(this,Ys);Ne(this,"_value");Dh(e,ng,"FixedNumber"),me(this,ir,n),me(this,Cl,r);const i=Xke(n,r.decimals);Bt(this,{format:r.name,_value:i}),me(this,Ys,hp(r.decimals))}get signed(){return re(this,Cl).signed}get width(){return re(this,Cl).width}get decimals(){return re(this,Cl).decimals}get value(){return re(this,ir)}addUnsafe(e){return rt(this,Gn,J4).call(this,e)}add(e){return rt(this,Gn,J4).call(this,e,"add")}subUnsafe(e){return rt(this,Gn,X4).call(this,e)}sub(e){return rt(this,Gn,X4).call(this,e,"sub")}mulUnsafe(e){return rt(this,Gn,Q4).call(this,e)}mul(e){return rt(this,Gn,Q4).call(this,e,"mul")}mulSignal(e){rt(this,Gn,Ep).call(this,e);const n=re(this,ir)*re(e,ir);return Xe(n%re(this,Ys)===bl,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),rt(this,Gn,_u).call(this,n/re(this,Ys),"mulSignal")}divUnsafe(e){return rt(this,Gn,Z4).call(this,e)}div(e){return rt(this,Gn,Z4).call(this,e,"div")}divSignal(e){Xe(re(e,ir)!==bl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),rt(this,Gn,Ep).call(this,e);const n=re(this,ir)*re(this,Ys);return Xe(n%re(e,ir)===bl,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),rt(this,Gn,_u).call(this,n/re(e,ir),"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=hp(i):i<0&&(n*=hp(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=re(this,ir);return re(this,ir)<bl&&(e-=re(this,Ys)-Hg),e=re(this,ir)/re(this,Ys)*re(this,Ys),rt(this,Gn,_u).call(this,e,"floor")}ceiling(){let e=re(this,ir);return re(this,ir)>bl&&(e+=re(this,Ys)-Hg),e=re(this,ir)/re(this,Ys)*re(this,Ys),rt(this,Gn,_u).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=Jke*hp(n-1);let i=this.value+r;const s=hp(n);return i=i/s*s,Eb(i,re(this,Cl),"round"),new Kf(ng,i,re(this,Cl))}isZero(){return re(this,ir)===bl}isNegative(){return re(this,ir)<bl}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Kf.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:en(n),s=ER(r);let o=Ct(e,"value");const a=i-s.decimals;if(a>0){const l=hp(a);Xe(o%l===bl,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=hp(-a));return Eb(o,s,"fromValue"),new Kf(ng,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);xe(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=ER(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=ay;Xe(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return Eb(a,i,"fromString"),new Kf(ng,a,i)}static fromBytes(e,n){let r=Q1(bt(e,"value"));const i=ER(n);return i.signed&&(r=g2(r,i.width)),Eb(r,i,"fromBytes"),new Kf(ng,r,i)}};Cl=new WeakMap,ir=new WeakMap,Ys=new WeakMap,Gn=new WeakSet,Ep=function(e){xe(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},_u=function(e,n){return e=Eb(e,re(this,Cl),n),new Kf(ng,e,re(this,Cl))},J4=function(e,n){return rt(this,Gn,Ep).call(this,e),rt(this,Gn,_u).call(this,re(this,ir)+re(e,ir),n)},X4=function(e,n){return rt(this,Gn,Ep).call(this,e),rt(this,Gn,_u).call(this,re(this,ir)-re(e,ir),n)},Q4=function(e,n){return rt(this,Gn,Ep).call(this,e),rt(this,Gn,_u).call(this,re(this,ir)*re(e,ir)/re(this,Ys),n)},Z4=function(e,n){return Xe(re(e,ir)!==bl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),rt(this,Gn,Ep).call(this,e),rt(this,Gn,_u).call(this,re(this,ir)*re(this,Ys)/re(e,ir),n)};let v2=Kf;function Qke(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function BV(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function UV(t,e,n,r){const i=[];for(;n<e+1+r;){const s=Lre(t,n);i.push(s.result),n+=s.consumed,Xe(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function Lre(t,e){Xe(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{Xe(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=BV(t,e+1,r);return n(e+1+r+i),UV(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),UV(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=BV(t,e+1,r);n(e+1+r+i);const s=at(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=at(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:Qke(t[e])}}function Z1(t){const e=bt(t,"data"),n=Lre(e,0);return xe(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function FV(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Dre(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(Dre(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=FV(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(bt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=FV(e.length);return n.unshift(183+n.length),n.concat(e)}const $V="0123456789abcdef";function Lc(t){let e="0x";for(const n of Dre(t))e+=$V[n>>4],e+=$V[n&15];return e}const jre=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Bre(t,e){let n=18;if(typeof e=="string"){const r=jre.indexOf(e);xe(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=en(e,"unit"));return v2.fromValue(t,n,{decimals:n,width:512}).toString()}function Zke(t,e){xe(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=jre.indexOf(e);xe(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=en(e,"unit"));return v2.fromString(t,{decimals:n,width:512}).value}function bgt(t){return Bre(t,18)}function wgt(t){return Zke(t,18)}function eNe(t){const e=bt(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=at(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const io=32,eM=new Uint8Array(io),tNe=["then"],cA={},Ure=new WeakMap;function Ip(t){return Ure.get(t)}function zV(t,e){Ure.set(t,e)}function Sb(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function tM(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof vx?tM(Ip(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof vx&&(o=tM(Ip(o),o,n)),r[i]=o),r},{})}var Oy;const Qg=class Qg extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==cA&&(i=n,s=[],o=!1);super(i.length);Fe(this,Oy);i.forEach((c,d)=>{this[d]=c});const a=s.reduce((c,d)=>(typeof d=="string"&&c.set(d,(c.get(d)||0)+1),c),new Map);if(zV(this,Object.freeze(i.map((c,d)=>{const h=s[d];return h!=null&&a.get(h)===1?h:null}))),me(this,Oy,[]),re(this,Oy)==null&&re(this,Oy),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(c,d,h)=>{if(typeof d=="string"){if(d.match(/^[0-9]+$/)){const g=en(d,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const v=c[g];return v instanceof Error&&Sb(`index ${g}`,v),v}if(tNe.indexOf(d)>=0)return Reflect.get(c,d,h);const m=c[d];if(m instanceof Function)return function(...g){return m.apply(this===h?c:this,g)};if(!(d in c))return c.getValue.apply(this===h?c:this,[d])}return Reflect.get(c,d,h)}});return zV(l,Ip(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&Sb(`index ${s}`,i),n&&i instanceof Qg&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=Ip(this);return r.reduce((i,s,o)=>(Xe(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),tM(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=Ip(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new Qg(cA,s,o)}filter(n,r){const i=Ip(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&Sb(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Qg(cA,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&Sb(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=Ip(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&Sb(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new Qg(cA,n,r)}};Oy=new WeakMap;let vx=Qg;function Egt(t){const e=[],n=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{n(o,i[s])}catch(a){e.push({path:o,error:a})}}};return n([],t),e}function VV(t){let e=Ur(t);return Xe(e.length<=io,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:io,offset:e.length}),e.length!==io&&(e=gs(On([eM.slice(e.length%io),e]))),e}class Bd{constructor(e,n,r,i){Ne(this,"name");Ne(this,"type");Ne(this,"localName");Ne(this,"dynamic");Bt(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){xe(!1,e,this.localName,n)}}var $u,rm,My,AT;class nM{constructor(){Fe(this,My);Fe(this,$u);Fe(this,rm);me(this,$u,[]),me(this,rm,0)}get data(){return On(re(this,$u))}get length(){return re(this,rm)}appendWriter(e){return rt(this,My,AT).call(this,gs(e.data))}writeBytes(e){let n=gs(e);const r=n.length%io;return r&&(n=gs(On([n,eM.slice(r)]))),rt(this,My,AT).call(this,n)}writeValue(e){return rt(this,My,AT).call(this,VV(e))}writeUpdatableValue(){const e=re(this,$u).length;return re(this,$u).push(eM),me(this,rm,re(this,rm)+io),n=>{re(this,$u)[e]=VV(n)}}}$u=new WeakMap,rm=new WeakMap,My=new WeakSet,AT=function(e){return re(this,$u).push(e),me(this,rm,re(this,rm)+e.length),e.length};var So,Zo,im,sm,Zf,Zm,iM,Fre;const V7=class V7{constructor(e,n,r){Fe(this,Zm);Ne(this,"allowLoose");Fe(this,So);Fe(this,Zo);Fe(this,im);Fe(this,sm);Fe(this,Zf);Bt(this,{allowLoose:!!n}),me(this,So,gs(e)),me(this,im,0),me(this,sm,null),me(this,Zf,r??1024),me(this,Zo,0)}get data(){return at(re(this,So))}get dataLength(){return re(this,So).length}get consumed(){return re(this,Zo)}get bytes(){return new Uint8Array(re(this,So))}subReader(e){const n=new V7(re(this,So).slice(re(this,Zo)+e),this.allowLoose,re(this,Zf));return me(n,sm,this),n}readBytes(e,n){let r=rt(this,Zm,Fre).call(this,0,e,!!n);return rt(this,Zm,iM).call(this,e),me(this,Zo,re(this,Zo)+r.length),r.slice(0,e)}readValue(){return Q1(this.readBytes(io))}readIndex(){return Rke(this.readBytes(io))}};So=new WeakMap,Zo=new WeakMap,im=new WeakMap,sm=new WeakMap,Zf=new WeakMap,Zm=new WeakSet,iM=function(e){var n;if(re(this,sm))return rt(n=re(this,sm),Zm,iM).call(n,e);me(this,im,re(this,im)+e),Xe(re(this,Zf)<1||re(this,im)<=re(this,Zf)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${re(this,Zf)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:gs(re(this,So)),offset:re(this,Zo),length:e,info:{bytesRead:re(this,im),dataLength:this.dataLength}})},Fre=function(e,n,r){let i=Math.ceil(n/io)*io;return re(this,Zo)+i>re(this,So).length&&(this.allowLoose&&r&&re(this,Zo)+n<=re(this,So).length?i=n:Xe(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:gs(re(this,So)),length:re(this,So).length,offset:re(this,Zo)+i})),re(this,So).slice(re(this,Zo),re(this,Zo)+i)};let rM=V7;function ia(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function $8(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function $re(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ia(t.outputLen),ia(t.blockLen)}function bx(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zre(t,e){$8(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const SR=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vre=t=>t instanceof Uint8Array,TT=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),kT=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),oc=(t,e)=>t<<32-e|t>>>e,nNe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!nNe)throw new Error("Non little-endian hardware is not supported");const rNe=async()=>{};async function HV(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);const s=Date.now()-r;s>=0&&s<e||(await rNe(),r+=s)}}function iNe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function wx(t){if(typeof t=="string"&&(t=iNe(t)),!Vre(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function sNe(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!Vre(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let z8=class{clone(){return this._cloneInto()}};const oNe={}.toString;function Hre(t,e){if(e!==void 0&&oNe.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function RN(t){const e=r=>t().update(wx(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function aNe(t=32){if(SR&&typeof SR.getRandomValues=="function")return SR.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}let qre=class extends z8{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,$re(e);const r=wx(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return bx(this),this.iHash.update(e),this}digestInto(e){bx(this),$8(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ON=(t,e,n)=>new qre(t,e).update(n).digest();ON.create=(t,e)=>new qre(t,e);function lNe(t,e,n,r){$re(t);const i=Hre({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(ia(s),ia(o),ia(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=wx(e),c=wx(n),d=new Uint8Array(o),h=ON.create(t,l),m=h._cloneInto().update(c);return{c:s,dkLen:o,asyncTick:a,DK:d,PRF:h,PRFSalt:m}}function cNe(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}function V8(t,e,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=lNe(t,e,n,r);let c;const d=new Uint8Array(4),h=kT(d),m=new Uint8Array(a.outputLen);for(let g=1,v=0;v<s;g++,v+=a.outputLen){const x=o.subarray(v,v+a.outputLen);h.setInt32(0,g,!1),(c=l._cloneInto(c)).update(d).digestInto(m),x.set(m.subarray(0,x.length));for(let b=1;b<i;b++){a._cloneInto(c).update(m).digestInto(m);for(let w=0;w<x.length;w++)x[w]^=m[w]}}return cNe(a,l,o,c,m)}function uNe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}class H8 extends z8{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kT(this.buffer)}update(e){bx(this);const{view:n,buffer:r,blockLen:i}=this;e=wx(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=kT(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){bx(this),zre(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;uNe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=kT(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const dNe=(t,e,n)=>t&e^~t&n,fNe=(t,e,n)=>t&e^t&n^e&n,hNe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),kf=new Uint32Array(64);let pNe=class extends H8{constructor(){super(64,32,8,!1),this.A=Tf[0]|0,this.B=Tf[1]|0,this.C=Tf[2]|0,this.D=Tf[3]|0,this.E=Tf[4]|0,this.F=Tf[5]|0,this.G=Tf[6]|0,this.H=Tf[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)kf[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=kf[h-15],g=kf[h-2],v=oc(m,7)^oc(m,18)^m>>>3,x=oc(g,17)^oc(g,19)^g>>>10;kf[h]=x+kf[h-7]+v+kf[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:d}=this;for(let h=0;h<64;h++){const m=oc(a,6)^oc(a,11)^oc(a,25),g=d+m+dNe(a,l,c)+hNe[h]+kf[h]|0,x=(oc(r,2)^oc(r,13)^oc(r,22))+fNe(r,i,s)|0;d=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+x|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,l,c,d)}roundClean(){kf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Xx=RN(()=>new pNe),uA=BigInt(2**32-1),sM=BigInt(32);function Gre(t,e=!1){return e?{h:Number(t&uA),l:Number(t>>sM&uA)}:{h:Number(t>>sM&uA)|0,l:Number(t&uA)|0}}function Kre(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Gre(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const mNe=(t,e)=>BigInt(t>>>0)<<sM|BigInt(e>>>0),gNe=(t,e,n)=>t>>>n,yNe=(t,e,n)=>t<<32-n|e>>>n,xNe=(t,e,n)=>t>>>n|e<<32-n,vNe=(t,e,n)=>t<<32-n|e>>>n,bNe=(t,e,n)=>t<<64-n|e>>>n-32,wNe=(t,e,n)=>t>>>n-32|e<<64-n,ENe=(t,e)=>e,SNe=(t,e)=>t,Wre=(t,e,n)=>t<<n|e>>>32-n,Yre=(t,e,n)=>e<<n|t>>>32-n,Jre=(t,e,n)=>e<<n-32|t>>>64-n,Xre=(t,e,n)=>t<<n-32|e>>>64-n;function ANe(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const TNe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),kNe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,NNe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),CNe=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,PNe=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),_Ne=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,hn={fromBig:Gre,split:Kre,toBig:mNe,shrSH:gNe,shrSL:yNe,rotrSH:xNe,rotrSL:vNe,rotrBH:bNe,rotrBL:wNe,rotr32H:ENe,rotr32L:SNe,rotlSH:Wre,rotlSL:Yre,rotlBH:Jre,rotlBL:Xre,add:ANe,add3L:TNe,add3H:kNe,add4L:NNe,add4H:CNe,add5H:_Ne,add5L:PNe},[INe,RNe]=hn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Nf=new Uint32Array(80),Cf=new Uint32Array(80);let ONe=class extends H8{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:d,Fh:h,Fl:m,Gh:g,Gl:v,Hh:x,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b]}set(e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=d|0,this.Fh=h|0,this.Fl=m|0,this.Gh=g|0,this.Gl=v|0,this.Hh=x|0,this.Hl=b|0}process(e,n){for(let N=0;N<16;N++,n+=4)Nf[N]=e.getUint32(n),Cf[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const O=Nf[N-15]|0,j=Cf[N-15]|0,_=hn.rotrSH(O,j,1)^hn.rotrSH(O,j,8)^hn.shrSH(O,j,7),F=hn.rotrSL(O,j,1)^hn.rotrSL(O,j,8)^hn.shrSL(O,j,7),z=Nf[N-2]|0,D=Cf[N-2]|0,$=hn.rotrSH(z,D,19)^hn.rotrBH(z,D,61)^hn.shrSH(z,D,6),G=hn.rotrSL(z,D,19)^hn.rotrBL(z,D,61)^hn.shrSL(z,D,6),H=hn.add4L(F,G,Cf[N-7],Cf[N-16]),U=hn.add4H(H,_,$,Nf[N-7],Nf[N-16]);Nf[N]=U|0,Cf[N]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:d,Eh:h,El:m,Fh:g,Fl:v,Gh:x,Gl:b,Hh:w,Hl:T}=this;for(let N=0;N<80;N++){const O=hn.rotrSH(h,m,14)^hn.rotrSH(h,m,18)^hn.rotrBH(h,m,41),j=hn.rotrSL(h,m,14)^hn.rotrSL(h,m,18)^hn.rotrBL(h,m,41),_=h&g^~h&x,F=m&v^~m&b,z=hn.add5L(T,j,F,RNe[N],Cf[N]),D=hn.add5H(z,w,O,_,INe[N],Nf[N]),$=z|0,G=hn.rotrSH(r,i,28)^hn.rotrBH(r,i,34)^hn.rotrBH(r,i,39),H=hn.rotrSL(r,i,28)^hn.rotrBL(r,i,34)^hn.rotrBL(r,i,39),U=r&s^r&a^s&a,A=i&o^i&l^o&l;w=x|0,T=b|0,x=g|0,b=v|0,g=h|0,v=m|0,{h,l:m}=hn.add(c|0,d|0,D|0,$|0),c=a|0,d=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const I=hn.add3L($,H,A);r=hn.add3H(I,D,G,U),i=I|0}({h:r,l:i}=hn.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=hn.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=hn.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:d}=hn.add(this.Dh|0,this.Dl|0,c|0,d|0),{h,l:m}=hn.add(this.Eh|0,this.El|0,h|0,m|0),{h:g,l:v}=hn.add(this.Fh|0,this.Fl|0,g|0,v|0),{h:x,l:b}=hn.add(this.Gh|0,this.Gl|0,x|0,b|0),{h:w,l:T}=hn.add(this.Hh|0,this.Hl|0,w|0,T|0),this.set(r,i,s,o,a,l,c,d,h,m,g,v,x,b,w,T)}roundClean(){Nf.fill(0),Cf.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const q8=RN(()=>new ONe);function MNe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const qV=MNe(),GV=qV.crypto||qV.msCrypto;function Qre(t){switch(t){case"sha256":return Xx.create();case"sha512":return q8.create()}xe(!1,"invalid hashing algorithm name","algorithm",t)}function LNe(t,e){const n={sha256:Xx,sha512:q8}[t];return xe(n!=null,"invalid hmac algorithm","algorithm",t),ON.create(n,e)}function DNe(t,e,n,r,i){const s={sha256:Xx,sha512:q8}[i];return xe(s!=null,"invalid pbkdf2 algorithm","algorithm",i),V8(s,t,e,{c:n,dkLen:r})}function jNe(t){Xe(GV!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),xe(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return GV.getRandomValues(e),e}let Zre=!1;const eie=function(t,e,n){return LNe(t,e).update(n).digest()};let tie=eie;function Qx(t,e,n){const r=bt(e,"key"),i=bt(n,"data");return at(tie(t,r,i))}Qx._=eie;Qx.lock=function(){Zre=!0};Qx.register=function(t){if(Zre)throw new Error("computeHmac is locked");tie=t};Object.freeze(Qx);const[nie,rie,iie]=[[],[],[]],BNe=BigInt(0),Ab=BigInt(1),UNe=BigInt(2),FNe=BigInt(7),$Ne=BigInt(256),zNe=BigInt(113);for(let t=0,e=Ab,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],nie.push(2*(5*r+n)),rie.push((t+1)*(t+2)/2%64);let i=BNe;for(let s=0;s<7;s++)e=(e<<Ab^(e>>FNe)*zNe)%$Ne,e&UNe&&(i^=Ab<<(Ab<<BigInt(s))-Ab);iie.push(i)}const[VNe,HNe]=Kre(iie,!0),KV=(t,e,n)=>n>32?Jre(t,e,n):Wre(t,e,n),WV=(t,e,n)=>n>32?Xre(t,e,n):Yre(t,e,n);function qNe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],d=n[l+1],h=KV(c,d,1)^n[a],m=WV(c,d,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=m}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=rie[o],l=KV(i,s,a),c=WV(i,s,a),d=nie[o];i=t[d],s=t[d+1],t[d]=l,t[d+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=VNe[r],t[1]^=HNe[r]}n.fill(0)}class G8 extends z8{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ia(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=TT(this.state)}keccak(){qNe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){bx(this);const{blockLen:n,state:r}=this;e=wx(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){bx(this,!1),$8(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ia(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(zre(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new G8(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const GNe=(t,e,n)=>RN(()=>new G8(e,t,n)),KNe=GNe(1,136,256/8);let sie=!1;const oie=function(t){return KNe(t)};let aie=oie;function Kn(t){const e=bt(t,"data");return at(aie(e))}Kn._=oie;Kn.lock=function(){sie=!0};Kn.register=function(t){if(sie)throw new TypeError("keccak256 is locked");aie=t};Object.freeze(Kn);const WNe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),lie=Uint8Array.from({length:16},(t,e)=>e),YNe=lie.map(t=>(9*t+5)%16);let K8=[lie],W8=[YNe];for(let t=0;t<4;t++)for(let e of[K8,W8])e.push(e[t].map(n=>WNe[n]));const cie=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),JNe=K8.map((t,e)=>t.map(n=>cie[e][n])),XNe=W8.map((t,e)=>t.map(n=>cie[e][n])),QNe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),ZNe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),dA=(t,e)=>t<<e|t>>>32-e;function YV(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const fA=new Uint32Array(16);class eCe extends H8{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:i,h4:s}=this;return[e,n,r,i,s]}set(e,n,r,i,s){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,n){for(let g=0;g<16;g++,n+=4)fA[g]=e.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,l=a,c=this.h3|0,d=c,h=this.h4|0,m=h;for(let g=0;g<5;g++){const v=4-g,x=QNe[g],b=ZNe[g],w=K8[g],T=W8[g],N=JNe[g],O=XNe[g];for(let j=0;j<16;j++){const _=dA(r+YV(g,s,a,c)+fA[w[j]]+x,N[j])+h|0;r=h,h=c,c=dA(a,10)|0,a=s,s=_}for(let j=0;j<16;j++){const _=dA(i+YV(v,o,l,d)+fA[T[j]]+b,O[j])+m|0;i=m,m=d,d=dA(l,10)|0,l=o,o=_}}this.set(this.h1+a+d|0,this.h2+c+m|0,this.h3+h+i|0,this.h4+r+o|0,this.h0+s+l|0)}roundClean(){fA.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const tCe=RN(()=>new eCe);let uie=!1;const die=function(t){return tCe(t)};let fie=die;function Zx(t){const e=bt(t,"data");return at(fie(e))}Zx._=die;Zx.lock=function(){uie=!0};Zx.register=function(t){if(uie)throw new TypeError("ripemd160 is locked");fie=t};Object.freeze(Zx);let hie=!1;const pie=function(t,e,n,r,i){return DNe(t,e,n,r,i)};let mie=pie;function jh(t,e,n,r,i){const s=bt(t,"password"),o=bt(e,"salt");return at(mie(s,o,n,r,i))}jh._=pie;jh.lock=function(){hie=!0};jh.register=function(t){if(hie)throw new Error("pbkdf2 is locked");mie=t};Object.freeze(jh);let gie=!1;const yie=function(t){return new Uint8Array(jNe(t))};let xie=yie;function cd(t){return xie(t)}cd._=yie;cd.lock=function(){gie=!0};cd.register=function(t){if(gie)throw new Error("randomBytes is locked");xie=t};Object.freeze(cd);const jn=(t,e)=>t<<e|t>>>32-e;function JV(t,e,n,r,i,s){let o=t[e++]^n[r++],a=t[e++]^n[r++],l=t[e++]^n[r++],c=t[e++]^n[r++],d=t[e++]^n[r++],h=t[e++]^n[r++],m=t[e++]^n[r++],g=t[e++]^n[r++],v=t[e++]^n[r++],x=t[e++]^n[r++],b=t[e++]^n[r++],w=t[e++]^n[r++],T=t[e++]^n[r++],N=t[e++]^n[r++],O=t[e++]^n[r++],j=t[e++]^n[r++],_=o,F=a,z=l,D=c,$=d,G=h,H=m,U=g,A=v,I=x,L=b,q=w,K=T,te=N,Y=O,V=j;for(let M=0;M<8;M+=2)$^=jn(_+K|0,7),A^=jn($+_|0,9),K^=jn(A+$|0,13),_^=jn(K+A|0,18),I^=jn(G+F|0,7),te^=jn(I+G|0,9),F^=jn(te+I|0,13),G^=jn(F+te|0,18),Y^=jn(L+H|0,7),z^=jn(Y+L|0,9),H^=jn(z+Y|0,13),L^=jn(H+z|0,18),D^=jn(V+q|0,7),U^=jn(D+V|0,9),q^=jn(U+D|0,13),V^=jn(q+U|0,18),F^=jn(_+D|0,7),z^=jn(F+_|0,9),D^=jn(z+F|0,13),_^=jn(D+z|0,18),H^=jn(G+$|0,7),U^=jn(H+G|0,9),$^=jn(U+H|0,13),G^=jn($+U|0,18),q^=jn(L+I|0,7),A^=jn(q+L|0,9),I^=jn(A+q|0,13),L^=jn(I+A|0,18),K^=jn(V+Y|0,7),te^=jn(K+V|0,9),Y^=jn(te+K|0,13),V^=jn(Y+te|0,18);i[s++]=o+_|0,i[s++]=a+F|0,i[s++]=l+z|0,i[s++]=c+D|0,i[s++]=d+$|0,i[s++]=h+G|0,i[s++]=m+H|0,i[s++]=g+U|0,i[s++]=v+A|0,i[s++]=x+I|0,i[s++]=b+L|0,i[s++]=w+q|0,i[s++]=T+K|0,i[s++]=N+te|0,i[s++]=O+Y|0,i[s++]=j+V|0}function ly(t,e,n,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)n[o+a]=t[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)JV(n,o,t,e,n,s),a>0&&(o+=16),JV(n,s,t,e+=16,n,o)}function vie(t,e,n){const r=Hre({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:i,r:s,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:d}=r;if(ia(i),ia(s),ia(o),ia(a),ia(l),ia(c),d!==void 0&&typeof d!="function")throw new Error("progressCb should be function");const h=128*s,m=h/4;if(i<=1||(i&i-1)!==0||i>=2**(h/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/h)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=h*(i+o);if(g>c)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${c} (maxmem)`);const v=V8(Xx,t,e,{c:1,dkLen:h*o}),x=TT(v),b=TT(new Uint8Array(h*i)),w=TT(new Uint8Array(h));let T=()=>{};if(d){const N=2*i*o,O=Math.max(Math.floor(N/1e4),1);let j=0;T=()=>{j++,d&&(!(j%O)||j===N)&&d(j/N)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:m,V:b,B32:x,B:v,tmp:w,blockMixCb:T,asyncTick:l}}function bie(t,e,n,r,i){const s=V8(Xx,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),i.fill(0),s}function nCe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:d,tmp:h,blockMixCb:m}=vie(t,e,n);for(let g=0;g<s;g++){const v=a*g;for(let x=0;x<a;x++)l[x]=c[v+x];for(let x=0,b=0;x<r-1;x++)ly(l,b,l,b+=a,i),m();ly(l,(r-1)*a,c,v,i),m();for(let x=0;x<r;x++){const b=c[v+a-16]%r;for(let w=0;w<a;w++)h[w]=c[v+w]^l[b*a+w];ly(h,0,c,v,i),m()}}return bie(t,o,d,l,h)}async function rCe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:d,tmp:h,blockMixCb:m,asyncTick:g}=vie(t,e,n);for(let v=0;v<s;v++){const x=a*v;for(let w=0;w<a;w++)l[w]=c[x+w];let b=0;await HV(r-1,g,()=>{ly(l,b,l,b+=a,i),m()}),ly(l,(r-1)*a,c,x,i),m(),await HV(r,g,()=>{const w=c[x+a-16]%r;for(let T=0;T<a;T++)h[T]=c[x+T]^l[w*a+T];ly(h,0,c,x,i),m()})}return bie(t,o,d,l,h)}let wie=!1,Eie=!1;const Sie=async function(t,e,n,r,i,s,o){return await rCe(t,e,{N:n,r,p:i,dkLen:s,onProgress:o})},Aie=function(t,e,n,r,i,s){return nCe(t,e,{N:n,r,p:i,dkLen:s})};let Tie=Sie,kie=Aie;async function ev(t,e,n,r,i,s,o){const a=bt(t,"passwd"),l=bt(e,"salt");return at(await Tie(a,l,n,r,i,s,o))}ev._=Sie;ev.lock=function(){Eie=!0};ev.register=function(t){if(Eie)throw new Error("scrypt is locked");Tie=t};Object.freeze(ev);function tv(t,e,n,r,i,s){const o=bt(t,"passwd"),a=bt(e,"salt");return at(kie(o,a,n,r,i,s))}tv._=Aie;tv.lock=function(){wie=!0};tv.register=function(t){if(wie)throw new Error("scryptSync is locked");kie=t};Object.freeze(tv);const Nie=function(t){return Qre("sha256").update(t).digest()},Cie=function(t){return Qre("sha512").update(t).digest()};let Pie=Nie,_ie=Cie,Iie=!1,Rie=!1;function il(t){const e=bt(t,"data");return at(Pie(e))}il._=Nie;il.lock=function(){Iie=!0};il.register=function(t){if(Iie)throw new Error("sha256 is locked");Pie=t};Object.freeze(il);function Y8(t){const e=bt(t,"data");return at(_ie(e))}Y8._=Cie;Y8.lock=function(){Rie=!0};Y8.register=function(t){if(Rie)throw new Error("sha512 is locked");_ie=t};Object.freeze(il);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oie=BigInt(0),MN=BigInt(1),iCe=BigInt(2),LN=t=>t instanceof Uint8Array,sCe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ex(t){if(!LN(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=sCe[t[n]];return e}function Mie(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function J8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Sx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Sm(t){return J8(Ex(t))}function X8(t){if(!LN(t))throw new Error("Uint8Array expected");return J8(Ex(Uint8Array.from(t).reverse()))}function Ax(t,e){return Sx(t.toString(16).padStart(e*2,"0"))}function Q8(t,e){return Ax(t,e).reverse()}function oCe(t){return Sx(Mie(t))}function Tl(t,e,n){let r;if(typeof e=="string")try{r=Sx(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(LN(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Uw(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!LN(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function aCe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function lCe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function cCe(t){let e;for(e=0;t>Oie;t>>=MN,e+=1);return e}function uCe(t,e){return t>>BigInt(e)&MN}const dCe=(t,e,n)=>t|(n?MN:Oie)<<BigInt(e),Z8=t=>(iCe<<BigInt(t-1))-MN,AR=t=>new Uint8Array(t),XV=t=>Uint8Array.from(t);function Lie(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=AR(t),i=AR(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),l=(h=AR())=>{i=a(XV([0]),h),r=a(),h.length!==0&&(i=a(XV([1]),h),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const m=[];for(;h<e;){r=a();const g=r.slice();m.push(g),h+=r.length}return Uw(...m)};return(h,m)=>{o(),l(h);let g;for(;!(g=m(c()));)l();return o(),g}}const fCe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function eE(t,e,n={}){const r=(i,s,o)=>{const a=fCe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const hCe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:uCe,bitLen:cCe,bitMask:Z8,bitSet:dCe,bytesToHex:Ex,bytesToNumberBE:Sm,bytesToNumberLE:X8,concatBytes:Uw,createHmacDrbg:Lie,ensureBytes:Tl,equalBytes:aCe,hexToBytes:Sx,hexToNumber:J8,numberToBytesBE:Ax,numberToBytesLE:Q8,numberToHexUnpadded:Mie,numberToVarBytesBE:oCe,utf8ToBytes:lCe,validateObject:eE},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qi=BigInt(0),oi=BigInt(1),Rp=BigInt(2),pCe=BigInt(3),oM=BigInt(4),QV=BigInt(5),ZV=BigInt(8);BigInt(9);BigInt(16);function To(t,e){const n=t%e;return n>=qi?n:e+n}function mCe(t,e,n){if(n<=qi||e<qi)throw new Error("Expected power/modulo > 0");if(n===oi)return qi;let r=oi;for(;e>qi;)e&oi&&(r=r*t%n),t=t*t%n,e>>=oi;return r}function Ca(t,e,n){let r=t;for(;e-- >qi;)r*=r,r%=n;return r}function aM(t,e){if(t===qi||e<=qi)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=To(t,e),r=e,i=qi,s=oi;for(;n!==qi;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==oi)throw new Error("invert: does not exist");return To(i,e)}function gCe(t){const e=(t-oi)/Rp;let n,r,i;for(n=t-oi,r=0;n%Rp===qi;n/=Rp,r++);for(i=Rp;i<t&&mCe(i,e,t)!==t-oi;i++);if(r===1){const o=(t+oi)/oM;return function(l,c){const d=l.pow(c,o);if(!l.eql(l.sqr(d),c))throw new Error("Cannot find square root");return d}}const s=(n+oi)/Rp;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,d=a.pow(a.mul(a.ONE,i),n),h=a.pow(l,s),m=a.pow(l,n);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let g=1;for(let x=a.sqr(m);g<c&&!a.eql(x,a.ONE);g++)x=a.sqr(x);const v=a.pow(d,oi<<BigInt(c-g-1));d=a.sqr(v),h=a.mul(h,v),m=a.mul(m,d),c=g}return h}}function yCe(t){if(t%oM===pCe){const e=(t+oi)/oM;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%ZV===QV){const e=(t-QV)/ZV;return function(r,i){const s=r.mul(i,Rp),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,Rp),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return gCe(t)}const xCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=xCe.reduce((r,i)=>(r[i]="function",r),e);return eE(t,n)}function bCe(t,e,n){if(n<qi)throw new Error("Expected power > 0");if(n===qi)return t.ONE;if(n===oi)return e;let r=t.ONE,i=e;for(;n>qi;)n&oi&&(r=t.mul(r,i)),i=t.sqr(i),n>>=oi;return r}function wCe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Die(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ECe(t,e,n=!1,r={}){if(t<=qi)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Die(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=yCe(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:Z8(i),ZERO:qi,ONE:oi,create:l=>To(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return qi<=l&&l<t},is0:l=>l===qi,isOdd:l=>(l&oi)===oi,neg:l=>To(-l,t),eql:(l,c)=>l===c,sqr:l=>To(l*l,t),add:(l,c)=>To(l+c,t),sub:(l,c)=>To(l-c,t),mul:(l,c)=>To(l*c,t),pow:(l,c)=>bCe(a,l,c),div:(l,c)=>To(l*aM(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>aM(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>wCe(a,l),cmov:(l,c,d)=>d?c:l,toBytes:l=>n?Q8(l,s):Ax(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?X8(l):Sm(l)}});return Object.freeze(a)}function jie(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Bie(t){const e=jie(t);return e+Math.ceil(e/2)}function SCe(t,e,n=!1){const r=t.length,i=jie(e),s=Bie(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?Sm(t):X8(t),a=To(o,e-oi)+oi;return n?Q8(a,i):Ax(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ACe=BigInt(0),TR=BigInt(1);function TCe(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>ACe;)s&TR&&(o=o.add(a)),a=a.double(),s>>=TR;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,d=c;for(let h=0;h<o;h++){d=c,l.push(d);for(let m=1;m<a;m++)d=d.add(c),l.push(d);c=d.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=t.ZERO,d=t.BASE;const h=BigInt(2**i-1),m=2**i,g=BigInt(i);for(let v=0;v<a;v++){const x=v*l;let b=Number(o&h);o>>=g,b>l&&(b-=m,o+=TR);const w=x,T=x+Math.abs(b)-1,N=v%2!==0,O=b<0;b===0?d=d.add(n(N,s[w])):c=c.add(n(O,s[T]))}return{p:c,f:d}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function Uie(t){return vCe(t.Fp),eE(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Die(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kCe(t){const e=Uie(t);eE(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:NCe,hexToBytes:CCe}=hCe,$p={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=$p;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:NCe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=$p,n=typeof t=="string"?CCe(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=$p._parseInt(n.subarray(2)),{d:o,l:a}=$p._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const d=c.toString(16);return d.length&1?`0${d}`:d},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},Ju=BigInt(0),Ga=BigInt(1);BigInt(2);const eH=BigInt(3);BigInt(4);function PCe(t){const e=kCe(t),{Fp:n}=e,r=e.toBytes||((v,x,b)=>{const w=x.toAffine();return Uw(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(v=>{const x=v.subarray(1),b=n.fromBytes(x.subarray(0,n.BYTES)),w=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:b,y:w}});function s(v){const{a:x,b}=e,w=n.sqr(v),T=n.mul(w,v);return n.add(n.add(T,n.mul(v,x)),b)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(v){return typeof v=="bigint"&&Ju<v&&v<e.n}function a(v){if(!o(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(v){const{allowedPrivateKeyLengths:x,nByteLength:b,wrapPrivateKey:w,n:T}=e;if(x&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=Ex(v)),typeof v!="string"||!x.includes(v.length))throw new Error("Invalid key");v=v.padStart(b*2,"0")}let N;try{N=typeof v=="bigint"?v:Sm(Tl("private key",v,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof v}`)}return w&&(N=To(N,T)),a(N),N}const c=new Map;function d(v){if(!(v instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(x,b,w){if(this.px=x,this.py=b,this.pz=w,x==null||!n.isValid(x))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(x){const{x:b,y:w}=x||{};if(!x||!n.isValid(b)||!n.isValid(w))throw new Error("invalid affine point");if(x instanceof h)throw new Error("projective point not allowed");const T=N=>n.eql(N,n.ZERO);return T(b)&&T(w)?h.ZERO:new h(b,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const b=n.invertBatch(x.map(w=>w.pz));return x.map((w,T)=>w.toAffine(b[T])).map(h.fromAffine)}static fromHex(x){const b=h.fromAffine(i(Tl("pointHex",x)));return b.assertValidity(),b}static fromPrivateKey(x){return h.BASE.multiply(l(x))}_setWindowSize(x){this._WINDOW_SIZE=x,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:b}=this.toAffine();if(!n.isValid(x)||!n.isValid(b))throw new Error("bad point: x or y not FE");const w=n.sqr(b),T=s(x);if(!n.eql(w,T))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(n.isOdd)return!n.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){d(x);const{px:b,py:w,pz:T}=this,{px:N,py:O,pz:j}=x,_=n.eql(n.mul(b,j),n.mul(N,T)),F=n.eql(n.mul(w,j),n.mul(O,T));return _&&F}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:x,b}=e,w=n.mul(b,eH),{px:T,py:N,pz:O}=this;let j=n.ZERO,_=n.ZERO,F=n.ZERO,z=n.mul(T,T),D=n.mul(N,N),$=n.mul(O,O),G=n.mul(T,N);return G=n.add(G,G),F=n.mul(T,O),F=n.add(F,F),j=n.mul(x,F),_=n.mul(w,$),_=n.add(j,_),j=n.sub(D,_),_=n.add(D,_),_=n.mul(j,_),j=n.mul(G,j),F=n.mul(w,F),$=n.mul(x,$),G=n.sub(z,$),G=n.mul(x,G),G=n.add(G,F),F=n.add(z,z),z=n.add(F,z),z=n.add(z,$),z=n.mul(z,G),_=n.add(_,z),$=n.mul(N,O),$=n.add($,$),z=n.mul($,G),j=n.sub(j,z),F=n.mul($,D),F=n.add(F,F),F=n.add(F,F),new h(j,_,F)}add(x){d(x);const{px:b,py:w,pz:T}=this,{px:N,py:O,pz:j}=x;let _=n.ZERO,F=n.ZERO,z=n.ZERO;const D=e.a,$=n.mul(e.b,eH);let G=n.mul(b,N),H=n.mul(w,O),U=n.mul(T,j),A=n.add(b,w),I=n.add(N,O);A=n.mul(A,I),I=n.add(G,H),A=n.sub(A,I),I=n.add(b,T);let L=n.add(N,j);return I=n.mul(I,L),L=n.add(G,U),I=n.sub(I,L),L=n.add(w,T),_=n.add(O,j),L=n.mul(L,_),_=n.add(H,U),L=n.sub(L,_),z=n.mul(D,I),_=n.mul($,U),z=n.add(_,z),_=n.sub(H,z),z=n.add(H,z),F=n.mul(_,z),H=n.add(G,G),H=n.add(H,G),U=n.mul(D,U),I=n.mul($,I),H=n.add(H,U),U=n.sub(G,U),U=n.mul(D,U),I=n.add(I,U),G=n.mul(H,I),F=n.add(F,G),G=n.mul(L,I),_=n.mul(A,_),_=n.sub(_,G),G=n.mul(A,H),z=n.mul(L,z),z=n.add(z,G),new h(_,F,z)}subtract(x){return this.add(x.negate())}is0(){return this.equals(h.ZERO)}wNAF(x){return g.wNAFCached(this,c,x,b=>{const w=n.invertBatch(b.map(T=>T.pz));return b.map((T,N)=>T.toAffine(w[N])).map(h.fromAffine)})}multiplyUnsafe(x){const b=h.ZERO;if(x===Ju)return b;if(a(x),x===Ga)return this;const{endo:w}=e;if(!w)return g.unsafeLadder(this,x);let{k1neg:T,k1:N,k2neg:O,k2:j}=w.splitScalar(x),_=b,F=b,z=this;for(;N>Ju||j>Ju;)N&Ga&&(_=_.add(z)),j&Ga&&(F=F.add(z)),z=z.double(),N>>=Ga,j>>=Ga;return T&&(_=_.negate()),O&&(F=F.negate()),F=new h(n.mul(F.px,w.beta),F.py,F.pz),_.add(F)}multiply(x){a(x);let b=x,w,T;const{endo:N}=e;if(N){const{k1neg:O,k1:j,k2neg:_,k2:F}=N.splitScalar(b);let{p:z,f:D}=this.wNAF(j),{p:$,f:G}=this.wNAF(F);z=g.constTimeNegate(O,z),$=g.constTimeNegate(_,$),$=new h(n.mul($.px,N.beta),$.py,$.pz),w=z.add($),T=D.add(G)}else{const{p:O,f:j}=this.wNAF(b);w=O,T=j}return h.normalizeZ([w,T])[0]}multiplyAndAddUnsafe(x,b,w){const T=h.BASE,N=(j,_)=>_===Ju||_===Ga||!j.equals(T)?j.multiplyUnsafe(_):j.multiply(_),O=N(this,b).add(N(x,w));return O.is0()?void 0:O}toAffine(x){const{px:b,py:w,pz:T}=this,N=this.is0();x==null&&(x=N?n.ONE:n.inv(T));const O=n.mul(b,x),j=n.mul(w,x),_=n.mul(T,x);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:O,y:j}}isTorsionFree(){const{h:x,isTorsionFree:b}=e;if(x===Ga)return!0;if(b)return b(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:b}=e;return x===Ga?this:b?b(h,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return this.assertValidity(),r(h,this,x)}toHex(x=!0){return Ex(this.toRawBytes(x))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const m=e.nBitLength,g=TCe(h,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function _Ce(t){const e=Uie(t);return eE(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ICe(t){const e=_Ce(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(I){return Ju<I&&I<n.ORDER}function a(I){return To(I,r)}function l(I){return aM(I,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:m}=PCe({...e,toBytes(I,L,q){const K=L.toAffine(),te=n.toBytes(K.x),Y=Uw;return q?Y(Uint8Array.from([L.hasEvenY()?2:3]),te):Y(Uint8Array.from([4]),te,n.toBytes(K.y))},fromBytes(I){const L=I.length,q=I[0],K=I.subarray(1);if(L===i&&(q===2||q===3)){const te=Sm(K);if(!o(te))throw new Error("Point is not on curve");const Y=h(te);let V=n.sqrt(Y);const M=(V&Ga)===Ga;return(q&1)===1!==M&&(V=n.neg(V)),{x:te,y:V}}else if(L===s&&q===4){const te=n.fromBytes(K.subarray(0,n.BYTES)),Y=n.fromBytes(K.subarray(n.BYTES,2*n.BYTES));return{x:te,y:Y}}else throw new Error(`Point of length ${L} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=I=>Ex(Ax(I,e.nByteLength));function v(I){const L=r>>Ga;return I>L}function x(I){return v(I)?a(-I):I}const b=(I,L,q)=>Sm(I.slice(L,q));class w{constructor(L,q,K){this.r=L,this.s=q,this.recovery=K,this.assertValidity()}static fromCompact(L){const q=e.nByteLength;return L=Tl("compactSignature",L,q*2),new w(b(L,0,q),b(L,q,2*q))}static fromDER(L){const{r:q,s:K}=$p.toSig(Tl("DER",L));return new w(q,K)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(L){return new w(this.r,this.s,L)}recoverPublicKey(L){const{r:q,s:K,recovery:te}=this,Y=F(Tl("msgHash",L));if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");const V=te===2||te===3?q+e.n:q;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=(te&1)===0?"02":"03",P=c.fromHex(M+g(V)),W=l(V),X=a(-Y*W),se=a(K*W),ae=c.BASE.multiplyAndAddUnsafe(P,X,se);if(!ae)throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Sx(this.toDERHex())}toDERHex(){return $p.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Sx(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const T={isValidPrivateKey(I){try{return d(I),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const I=Bie(e.n);return SCe(e.randomBytes(I),e.n)},precompute(I=8,L=c.BASE){return L._setWindowSize(I),L.multiply(BigInt(3)),L}};function N(I,L=!0){return c.fromPrivateKey(I).toRawBytes(L)}function O(I){const L=I instanceof Uint8Array,q=typeof I=="string",K=(L||q)&&I.length;return L?K===i||K===s:q?K===2*i||K===2*s:I instanceof c}function j(I,L,q=!0){if(O(I))throw new Error("first arg must be private key");if(!O(L))throw new Error("second arg must be public key");return c.fromHex(L).multiply(d(I)).toRawBytes(q)}const _=e.bits2int||function(I){const L=Sm(I),q=I.length*8-e.nBitLength;return q>0?L>>BigInt(q):L},F=e.bits2int_modN||function(I){return a(_(I))},z=Z8(e.nBitLength);function D(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Ju<=I&&I<z))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ax(I,e.nByteLength)}function $(I,L,q=G){if(["recovered","canonical"].some(oe=>oe in q))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:te}=e;let{lowS:Y,prehash:V,extraEntropy:M}=q;Y==null&&(Y=!0),I=Tl("msgHash",I),V&&(I=Tl("prehashed msgHash",K(I)));const P=F(I),W=d(L),X=[D(W),D(P)];if(M!=null){const oe=M===!0?te(n.BYTES):M;X.push(Tl("extraEntropy",oe))}const se=Uw(...X),ae=P;function Te(oe){const ve=_(oe);if(!m(ve))return;const ke=l(ve),pe=c.BASE.multiply(ve).toAffine(),ze=a(pe.x);if(ze===Ju)return;const Me=a(ke*a(ae+ze*W));if(Me===Ju)return;let he=(pe.x===ze?0:2)|Number(pe.y&Ga),_e=Me;return Y&&v(Me)&&(_e=x(Me),he^=1),new w(ze,_e,he)}return{seed:se,k2sig:Te}}const G={lowS:e.lowS,prehash:!1},H={lowS:e.lowS,prehash:!1};function U(I,L,q=G){const{seed:K,k2sig:te}=$(I,L,q),Y=e;return Lie(Y.hash.outputLen,Y.nByteLength,Y.hmac)(K,te)}c.BASE._setWindowSize(8);function A(I,L,q,K=H){var pe;const te=I;if(L=Tl("msgHash",L),q=Tl("publicKey",q),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:V}=K;let M,P;try{if(typeof te=="string"||te instanceof Uint8Array)try{M=w.fromDER(te)}catch(ze){if(!(ze instanceof $p.Err))throw ze;M=w.fromCompact(te)}else if(typeof te=="object"&&typeof te.r=="bigint"&&typeof te.s=="bigint"){const{r:ze,s:Me}=te;M=new w(ze,Me)}else throw new Error("PARSE");P=c.fromHex(q)}catch(ze){if(ze.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&M.hasHighS())return!1;V&&(L=e.hash(L));const{r:W,s:X}=M,se=F(L),ae=l(X),Te=a(se*ae),oe=a(W*ae),ve=(pe=c.BASE.multiplyAndAddUnsafe(P,Te,oe))==null?void 0:pe.toAffine();return ve?a(ve.x)===W:!1}return{CURVE:e,getPublicKey:N,getSharedSecret:j,sign:U,verify:A,ProjectivePoint:c,Signature:w,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function RCe(t){return{hash:t,hmac:(e,...n)=>ON(t,e,sNe(...n)),randomBytes:aNe}}function OCe(t,e){const n=r=>ICe({...t,...RCe(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fie=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),tH=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MCe=BigInt(1),lM=BigInt(2),nH=(t,e)=>(t+e/lM)/e;function LCe(t){const e=Fie,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,d=c*c*t%e,h=Ca(d,n,e)*d%e,m=Ca(h,n,e)*d%e,g=Ca(m,lM,e)*c%e,v=Ca(g,i,e)*g%e,x=Ca(v,s,e)*v%e,b=Ca(x,a,e)*x%e,w=Ca(b,l,e)*b%e,T=Ca(w,a,e)*x%e,N=Ca(T,n,e)*d%e,O=Ca(N,o,e)*v%e,j=Ca(O,r,e)*c%e,_=Ca(j,lM,e);if(!cM.eql(cM.sqr(_),t))throw new Error("Cannot find square root");return _}const cM=ECe(Fie,void 0,void 0,{sqrt:LCe}),Ff=OCe({a:BigInt(0),b:BigInt(7),Fp:cM,n:tH,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=tH,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-MCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=nH(s*t,e),l=nH(-r*t,e);let c=To(t-a*n-l*i,e),d=To(-a*r-l*s,e);const h=c>o,m=d>o;if(h&&(c=e-c),m&&(d=e-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:d}}}},Xx);BigInt(0);Ff.ProjectivePoint;const Fw="0x0000000000000000000000000000000000000000",rH="0x0000000000000000000000000000000000000000000000000000000000000000",Cgt="",DCe=`Ethereum Signed Message:
`,iH=BigInt(0),sH=BigInt(1),uM=BigInt(2),oH=BigInt(27),aH=BigInt(28),hA=BigInt(35),$ie=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),jCe=$ie/uM,BCe=Symbol.for("nodejs.util.inspect.custom"),pp={};function kR(t){return bd(Ur(t),32)}var Ly,mc,Dy,eh;const Ba=class Ba{constructor(e,n,r,i){Fe(this,Ly);Fe(this,mc);Fe(this,Dy);Fe(this,eh);Dh(e,pp,"Signature"),me(this,Ly,n),me(this,mc,r),me(this,Dy,i),me(this,eh,null)}get r(){return re(this,Ly)}set r(e){xe(oy(e)===32,"invalid r","value",e),me(this,Ly,at(e))}get s(){return xe(parseInt(re(this,mc).substring(0,3))<8,"non-canonical s; use ._s","s",re(this,mc)),re(this,mc)}set s(e){xe(oy(e)===32,"invalid s","value",e),me(this,mc,at(e))}get _s(){return re(this,mc)}isValid(){return BigInt(re(this,mc))<=jCe}get v(){return re(this,Dy)}set v(e){const n=en(e,"value");xe(n===27||n===28,"invalid v","v",e),me(this,Dy,n)}get networkV(){return re(this,eh)}get legacyChainId(){const e=this.networkV;return e==null?null:Ba.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=bt(this.s);return this.yParity&&(e[0]|=128),at(e)}get compactSerialized(){return On([this.r,this.yParityAndS])}get serialized(){return On([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=$ie-BigInt(this._s),n=55-this.v,r=new Ba(pp,this.r,kR(e),n);return this.networkV&&me(r,eh,this.networkV),r}clone(){const e=new Ba(pp,this.r,this._s,this.v);return this.networkV&&me(e,eh,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[BCe](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=Ct(e,"v");return n==oH||n==aH?iH:(xe(n>=hA,"invalid EIP-155 v","v",e),(n-hA)/uM)}static getChainIdV(e,n){return Ct(e)*uM+BigInt(35+n-27)}static getNormalizedV(e){const n=Ct(e);return n===iH||n===oH?27:n===sH||n===aH?28:(xe(n>=hA,"invalid v","v",e),n&sH?27:28)}static from(e){function n(c,d){xe(c,d,"signature",e)}if(e==null)return new Ba(pp,rH,rH,27);if(typeof e=="string"){const c=bt(e,"signature");if(c.length===64){const d=at(c.slice(0,32)),h=c.slice(32,64),m=h[0]&128?28:27;return h[0]&=127,new Ba(pp,d,at(h),m)}if(c.length===65){const d=at(c.slice(0,32)),h=at(c.slice(32,64)),m=Ba.getNormalizedV(c[64]);return new Ba(pp,d,h,m)}n(!1,"invalid raw signature length")}if(e instanceof Ba)return e.clone();const r=e.r;n(r!=null,"missing r");const i=kR(r),s=(function(c,d){if(c!=null)return kR(c);if(d!=null){n(xr(d,32),"invalid yParityAndS");const h=bt(d);return h[0]&=127,at(h)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,d,h){if(c!=null){const m=Ct(c);return{networkV:m>=hA?m:void 0,v:Ba.getNormalizedV(m)}}if(d!=null)return n(xr(d,32),"invalid yParityAndS"),{v:bt(d)[0]&128?28:27};if(h!=null){switch(en(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new Ba(pp,i,s,a);return o&&me(l,eh,o),n(e.yParity==null||en(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Ly=new WeakMap,mc=new WeakMap,Dy=new WeakMap,eh=new WeakMap;let lo=Ba;var zu;const Op=class Op{constructor(e){Fe(this,zu);xe(oy(e)===32,"invalid private key","privateKey","[REDACTED]"),me(this,zu,at(e))}get privateKey(){return re(this,zu)}get publicKey(){return Op.computePublicKey(re(this,zu))}get compressedPublicKey(){return Op.computePublicKey(re(this,zu),!0)}sign(e){xe(oy(e)===32,"invalid digest length","digest",e);const n=Ff.sign(gs(e),gs(re(this,zu)),{lowS:!0});return lo.from({r:wd(n.r,32),s:wd(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Op.computePublicKey(e);return at(Ff.getSharedSecret(gs(re(this,zu)),bt(n),!1))}static computePublicKey(e,n){let r=bt(e,"key");if(r.length===32){const s=Ff.getPublicKey(r,!!n);return at(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Ff.ProjectivePoint.fromHex(r);return at(i.toRawBytes(n))}static recoverPublicKey(e,n){xe(oy(e)===32,"invalid digest length","digest",e);const r=lo.from(n);let i=Ff.Signature.fromCompact(gs(On([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(gs(e));return xe(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=Ff.ProjectivePoint.fromHex(Op.computePublicKey(e).substring(2)),s=Ff.ProjectivePoint.fromHex(Op.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};zu=new WeakMap;let Dc=Op;const UCe=BigInt(0),FCe=BigInt(36);function lH(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=bt(Kn(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const ej={};for(let t=0;t<10;t++)ej[String(t)]=String(t);for(let t=0;t<26;t++)ej[String.fromCharCode(65+t)]=String(10+t);const cH=15;function zie(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>ej[r]).join("");for(;e.length>=cH;){let r=e.substring(0,cH);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const $Ce=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function zCe(t){t=t.toLowerCase();let e=UCe;for(let n=0;n<t.length;n++)e=e*FCe+$Ce[t[n]];return e}function xn(t){if(xe(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=lH(t);return xe(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){xe(t.substring(2,4)===zie(t),"bad icap checksum","address",t);let e=zCe(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return lH("0x"+e)}xe(!1,"invalid address","address",t)}function Pgt(t){let e=BigInt(xn(t)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+zie("XE00"+e)+e}function VCe(t){const e=xn(t.from);let r=Ct(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,xn(yr(Kn(Lc([e,r])),12))}function _gt(t,e,n){const r=xn(t),i=bt(e,"salt"),s=bt(n,"initCodeHash");return xe(i.length===32,"salt must be 32 bytes","salt",e),xe(s.length===32,"initCodeHash must be 32 bytes","initCodeHash",n),xn(yr(Kn(On(["0xff",r,i,s])),12))}function Vie(t){return t&&typeof t.getAddress=="function"}function Igt(t){try{return xn(t),!0}catch{}return!1}async function NR(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Xe(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),xe(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),xn(n)}function Gi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?xn(t):(Xe(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),NR(t,e.resolveName(t)));if(Vie(t))return NR(t,t.getAddress());if(t&&typeof t.then=="function")return NR(t,t);xe(!1,"unsupported addressable value","target",t)}const Mu={};function Pt(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new zs(Mu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Bn(t,e){return new zs(Mu,`bytes${e||""}`,t,{size:e})}const uH=Symbol.for("_ethers_typed");var om;const Lu=class Lu{constructor(e,n,r,i){Ne(this,"type");Ne(this,"value");Fe(this,om);Ne(this,"_typedSymbol");i==null&&(i=null),Dh(Mu,e,"Typed"),Bt(this,{_typedSymbol:uH,type:n,value:r}),me(this,om,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return re(this,om)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return re(this,om)===!0?-1:re(this,om)===!1?this.value.length:null}static from(e,n){return new Lu(Mu,e,n)}static uint8(e){return Pt(e,8)}static uint16(e){return Pt(e,16)}static uint24(e){return Pt(e,24)}static uint32(e){return Pt(e,32)}static uint40(e){return Pt(e,40)}static uint48(e){return Pt(e,48)}static uint56(e){return Pt(e,56)}static uint64(e){return Pt(e,64)}static uint72(e){return Pt(e,72)}static uint80(e){return Pt(e,80)}static uint88(e){return Pt(e,88)}static uint96(e){return Pt(e,96)}static uint104(e){return Pt(e,104)}static uint112(e){return Pt(e,112)}static uint120(e){return Pt(e,120)}static uint128(e){return Pt(e,128)}static uint136(e){return Pt(e,136)}static uint144(e){return Pt(e,144)}static uint152(e){return Pt(e,152)}static uint160(e){return Pt(e,160)}static uint168(e){return Pt(e,168)}static uint176(e){return Pt(e,176)}static uint184(e){return Pt(e,184)}static uint192(e){return Pt(e,192)}static uint200(e){return Pt(e,200)}static uint208(e){return Pt(e,208)}static uint216(e){return Pt(e,216)}static uint224(e){return Pt(e,224)}static uint232(e){return Pt(e,232)}static uint240(e){return Pt(e,240)}static uint248(e){return Pt(e,248)}static uint256(e){return Pt(e,256)}static uint(e){return Pt(e,256)}static int8(e){return Pt(e,-8)}static int16(e){return Pt(e,-16)}static int24(e){return Pt(e,-24)}static int32(e){return Pt(e,-32)}static int40(e){return Pt(e,-40)}static int48(e){return Pt(e,-48)}static int56(e){return Pt(e,-56)}static int64(e){return Pt(e,-64)}static int72(e){return Pt(e,-72)}static int80(e){return Pt(e,-80)}static int88(e){return Pt(e,-88)}static int96(e){return Pt(e,-96)}static int104(e){return Pt(e,-104)}static int112(e){return Pt(e,-112)}static int120(e){return Pt(e,-120)}static int128(e){return Pt(e,-128)}static int136(e){return Pt(e,-136)}static int144(e){return Pt(e,-144)}static int152(e){return Pt(e,-152)}static int160(e){return Pt(e,-160)}static int168(e){return Pt(e,-168)}static int176(e){return Pt(e,-176)}static int184(e){return Pt(e,-184)}static int192(e){return Pt(e,-192)}static int200(e){return Pt(e,-200)}static int208(e){return Pt(e,-208)}static int216(e){return Pt(e,-216)}static int224(e){return Pt(e,-224)}static int232(e){return Pt(e,-232)}static int240(e){return Pt(e,-240)}static int248(e){return Pt(e,-248)}static int256(e){return Pt(e,-256)}static int(e){return Pt(e,-256)}static bytes1(e){return Bn(e,1)}static bytes2(e){return Bn(e,2)}static bytes3(e){return Bn(e,3)}static bytes4(e){return Bn(e,4)}static bytes5(e){return Bn(e,5)}static bytes6(e){return Bn(e,6)}static bytes7(e){return Bn(e,7)}static bytes8(e){return Bn(e,8)}static bytes9(e){return Bn(e,9)}static bytes10(e){return Bn(e,10)}static bytes11(e){return Bn(e,11)}static bytes12(e){return Bn(e,12)}static bytes13(e){return Bn(e,13)}static bytes14(e){return Bn(e,14)}static bytes15(e){return Bn(e,15)}static bytes16(e){return Bn(e,16)}static bytes17(e){return Bn(e,17)}static bytes18(e){return Bn(e,18)}static bytes19(e){return Bn(e,19)}static bytes20(e){return Bn(e,20)}static bytes21(e){return Bn(e,21)}static bytes22(e){return Bn(e,22)}static bytes23(e){return Bn(e,23)}static bytes24(e){return Bn(e,24)}static bytes25(e){return Bn(e,25)}static bytes26(e){return Bn(e,26)}static bytes27(e){return Bn(e,27)}static bytes28(e){return Bn(e,28)}static bytes29(e){return Bn(e,29)}static bytes30(e){return Bn(e,30)}static bytes31(e){return Bn(e,31)}static bytes32(e){return Bn(e,32)}static address(e){return new Lu(Mu,"address",e)}static bool(e){return new Lu(Mu,"bool",!!e)}static bytes(e){return new Lu(Mu,"bytes",e)}static string(e){return new Lu(Mu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Lu(Mu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===uH}static dereference(e,n){if(Lu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};om=new WeakMap;let zs=Lu;class HCe extends Bd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=zs.dereference(n,"string");try{r=xn(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return xn(wd(e.readValue(),20))}}class qCe extends Bd{constructor(n){super(n.name,n.type,"_",n.dynamic);Ne(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function Hie(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=e.map(c=>{const d=c.localName;return Xe(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),Xe(!l[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),l[d]=!0,n[d]})}else xe(!1,"invalid tuple value","tuple",n);xe(e.length===r.length,"types/value length mismatch","tuple",n);let i=new nM,s=new nM,o=[];e.forEach((l,c)=>{let d=r[c];if(l.dynamic){let h=s.length;l.encode(s,d);let m=i.writeUpdatableValue();o.push(g=>{m(g+h)})}else l.encode(i,d)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function qie(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(c){if(ms(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(ms(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),vx.fromItems(n,r)}class GCe extends Bd{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);Ne(this,"coder");Ne(this,"length");Bt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=zs.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),Ere(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return Hie(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Xe(r*io<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*io,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new qCe(this.coder));return qie(n,i)}}class KCe extends Bd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=zs.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Gie extends Bd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=gs(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class WCe extends Gie{constructor(e){super("bytes",e)}decode(e){return at(super.decode(e))}}class YCe extends Bd{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);Ne(this,"size");Bt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=gs(zs.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return at(n.readBytes(this.size))}}const JCe=new Uint8Array([]);class XCe extends Bd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(JCe)}decode(e){return e.readBytes(0),null}}const QCe=BigInt(0),ZCe=BigInt(1),ePe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class tPe extends Bd{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);Ne(this,"size");Ne(this,"signed");Bt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=Ct(zs.dereference(r,this.type)),s=Fp(ePe,io*8);if(this.signed){let o=Fp(s,this.size*8-1);(i>o||i<-(o+ZCe))&&this._throwError("value out-of-bounds",r),i=kre(i,8*io)}else(i<QCe||i>Fp(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=Fp(n.readValue(),this.size*8);return this.signed&&(r=g2(r,this.size*8)),r}}class nPe extends Gie{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,vi(zs.dereference(n,"string")))}decode(e){return x2(super.decode(e))}}class pA extends Bd{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);Ne(this,"coders");Bt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=zs.dereference(r,"tuple");return Hie(n,this.coders,i)}decode(n){return qie(n,this.coders)}}function CR(t,e){return{address:xn(t),storageKeys:e.map((n,r)=>(xe(xr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function t0(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(xe(n.length===2,"invalid slot set",`value[${r}]`,n),CR(n[0],n[1])):(xe(n!=null&&typeof n=="object","invalid address-slot set","value",t),CR(n.address,n.storageKeys)));xe(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return CR(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Kie(t){return{address:xn(t.address),nonce:Ct(t.nonce!=null?t.nonce:0),chainId:Ct(t.chainId!=null?t.chainId:0),signature:lo.from(t.signature)}}function tE(t){let e;return typeof t=="string"?e=Dc.computePublicKey(t,!1):e=t.publicKey,xn(Kn("0x"+e.substring(4)).substring(26))}function DN(t,e){return tE(Dc.recoverPublicKey(t,e))}const Vi=BigInt(0),rPe=BigInt(2),iPe=BigInt(27),sPe=BigInt(28),oPe=BigInt(35),aPe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),lPe=Symbol.for("nodejs.util.inspect.custom"),PR=4096*32,NT=128;function cPe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return bt(t.blobToKzgCommitment(at(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return bt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return bt(t.blobToKZGCommitment(at(r)));xe(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return bt(t.computeBlobProof(at(r),at(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return bt(t.computeBlobKZGProof(at(r),at(i)));xe(!1,"unsupported KZG library","kzg",t)}}}function dH(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=il(e).substring(4),"0x"+n}function nv(t){return t==="0x"?null:xn(t)}function jN(t,e){try{return t0(t)}catch(n){xe(!1,n.message,e,t)}}function uPe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:nv(i[1]),nonce:or(i[2],"nonce"),chainId:or(i[0],"chainId"),signature:lo.from({yParity:n0(i[3],"yParity"),r:bd(i[4],32),s:bd(i[5],32)})})}return n}catch(n){xe(!1,n.message,e,t)}}function n0(t,e){return t==="0x"?0:en(t,e)}function or(t,e){if(t==="0x")return Vi;const n=Ct(t,e);return xe(n<=aPe,"value exceeds uint size",e,n),n}function _n(t,e){const n=Ct(t,"value"),r=Ur(n);return xe(r.length<=32,"value too large",`tx.${e}`,n),r}function BN(t){return t0(t).map(e=>[e.address,e.storageKeys])}function dPe(t){return t.map(e=>[_n(e.chainId,"chainId"),e.address,_n(e.nonce,"nonce"),_n(e.signature.yParity,"yParity"),Ur(e.signature.r),Ur(e.signature._s)])}function fPe(t,e){xe(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)xe(xr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function hPe(t){const e=Z1(t);xe(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:n0(e[0],"nonce"),gasPrice:or(e[1],"gasPrice"),gasLimit:or(e[2],"gasLimit"),to:nv(e[3]),value:or(e[4],"value"),data:at(e[5]),chainId:Vi};if(e.length===6)return n;const r=or(e[6],"v"),i=or(e[7],"r"),s=or(e[8],"s");if(i===Vi&&s===Vi)n.chainId=r;else{let o=(r-oPe)/rPe;o<Vi&&(o=Vi),n.chainId=o,xe(o!==Vi||r===iPe||r===sPe,"non-canonical legacy v","v",e[6]),n.signature=lo.from({r:bd(e[7],32),s:bd(e[8],32),v:r})}return n}function pPe(t,e){const n=[_n(t.nonce,"nonce"),_n(t.gasPrice||0,"gasPrice"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data];let r=Vi;if(t.chainId!=Vi)r=Ct(t.chainId,"tx.chainId"),xe(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Vi&&(n.push(Ur(r)),n.push("0x"),n.push("0x")),Lc(n);let i=BigInt(27+e.yParity);return r!==Vi?i=lo.getChainIdV(r,e.v):BigInt(e.v)!==i&&xe(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Ur(i)),n.push(Ur(e.r)),n.push(Ur(e._s)),Lc(n)}function UN(t,e){let n;try{if(n=n0(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{xe(!1,"invalid yParity","yParity",e[0])}const r=bd(e[1],32),i=bd(e[2],32),s=lo.from({r,s:i,yParity:n});t.signature=s}function mPe(t){const e=Z1(bt(t).slice(1));xe(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",at(t));const n={type:2,chainId:or(e[0],"chainId"),nonce:n0(e[1],"nonce"),maxPriorityFeePerGas:or(e[2],"maxPriorityFeePerGas"),maxFeePerGas:or(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:or(e[4],"gasLimit"),to:nv(e[5]),value:or(e[6],"value"),data:at(e[7]),accessList:jN(e[8],"accessList")};return e.length===9||UN(n,e.slice(9)),n}function gPe(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,BN(t.accessList||[])];return e&&(n.push(_n(e.yParity,"yParity")),n.push(Ur(e.r)),n.push(Ur(e.s))),On(["0x02",Lc(n)])}function yPe(t){const e=Z1(bt(t).slice(1));xe(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",at(t));const n={type:1,chainId:or(e[0],"chainId"),nonce:n0(e[1],"nonce"),gasPrice:or(e[2],"gasPrice"),gasLimit:or(e[3],"gasLimit"),to:nv(e[4]),value:or(e[5],"value"),data:at(e[6]),accessList:jN(e[7],"accessList")};return e.length===8||UN(n,e.slice(8)),n}function xPe(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.gasPrice||0,"gasPrice"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,BN(t.accessList||[])];return e&&(n.push(_n(e.yParity,"recoveryParam")),n.push(Ur(e.r)),n.push(Ur(e.s))),On(["0x01",Lc(n)])}function vPe(t){let e=Z1(bt(t).slice(1)),n="3",r=null,i=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];xe(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),xe(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),xe(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),xe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),xe(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<e[1].length;c++)i.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",r=en(e[1]);const o=e[2],a=e[3],l=e[4];xe(r===1,`unsupported EIP-7594 network format version: ${r}`,"fields[1]",r),xe(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),xe(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),xe(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),xe(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),xe(o.length*NT===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<o.length;c++){const d=[];for(let h=0;h<NT;h++)d.push(l[c*NT+h]);i.push({data:o[c],commitment:a[c],proof:On(d)})}e=e[0]}xe(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",at(t));const s={type:3,chainId:or(e[0],"chainId"),nonce:n0(e[1],"nonce"),maxPriorityFeePerGas:or(e[2],"maxPriorityFeePerGas"),maxFeePerGas:or(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:or(e[4],"gasLimit"),to:nv(e[5]),value:or(e[6],"value"),data:at(e[7]),accessList:jN(e[8],"accessList"),maxFeePerBlobGas:or(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:r};i&&(s.blobs=i),xe(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),xe(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<s.blobVersionedHashes.length;o++)xe(xr(s.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||UN(s,e.slice(11)),s}function bPe(t,e,n){const r=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||Fw,_n(t.value,"value"),t.data,BN(t.accessList||[]),_n(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),fPe(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(r.push(_n(e.yParity,"yParity")),r.push(Ur(e.r)),r.push(Ur(e.s)),n)){if(t.blobWrapperVersion!=null){const i=Ur(t.blobWrapperVersion),s=[];for(const{proof:o}of n){const a=bt(o),l=a.length/NT;for(let c=0;c<a.length;c+=l)s.push(a.subarray(c,c+l))}return On(["0x03",Lc([r,i,n.map(o=>o.data),n.map(o=>o.commitment),s])])}return On(["0x03",Lc([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])])}return On(["0x03",Lc(r)])}function wPe(t){const e=Z1(bt(t).slice(1));xe(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",at(t));const n={type:4,chainId:or(e[0],"chainId"),nonce:n0(e[1],"nonce"),maxPriorityFeePerGas:or(e[2],"maxPriorityFeePerGas"),maxFeePerGas:or(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:or(e[4],"gasLimit"),to:nv(e[5]),value:or(e[6],"value"),data:at(e[7]),accessList:jN(e[8],"accessList"),authorizationList:uPe(e[9],"authorizationList")};return e.length===10||UN(n,e.slice(10)),n}function EPe(t,e){const n=[_n(t.chainId,"chainId"),_n(t.nonce,"nonce"),_n(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_n(t.maxFeePerGas||0,"maxFeePerGas"),_n(t.gasLimit,"gasLimit"),t.to||"0x",_n(t.value,"value"),t.data,BN(t.accessList||[]),dPe(t.authorizationList||[])];return e&&(n.push(_n(e.yParity,"yParity")),n.push(Ur(e.r)),n.push(Ur(e.s))),On(["0x04",Lc(n)])}var Pl,jy,By,Uy,Fy,$y,zy,Vy,Hy,qy,Gy,Ky,am,th,gc,nh,Wy,Yy,Jy,CT,ta;let tj=(ta=class{constructor(){Fe(this,Jy);Fe(this,Pl);Fe(this,jy);Fe(this,By);Fe(this,Uy);Fe(this,Fy);Fe(this,$y);Fe(this,zy);Fe(this,Vy);Fe(this,Hy);Fe(this,qy);Fe(this,Gy);Fe(this,Ky);Fe(this,am);Fe(this,th);Fe(this,gc);Fe(this,nh);Fe(this,Wy);Fe(this,Yy);me(this,Pl,null),me(this,jy,null),me(this,Uy,0),me(this,Fy,Vi),me(this,$y,null),me(this,zy,null),me(this,Vy,null),me(this,By,"0x"),me(this,Hy,Vi),me(this,qy,Vi),me(this,Gy,null),me(this,Ky,null),me(this,am,null),me(this,th,null),me(this,gc,null),me(this,nh,null),me(this,Wy,null),me(this,Yy,null)}get type(){return re(this,Pl)}set type(e){switch(e){case null:me(this,Pl,null);break;case 0:case"legacy":me(this,Pl,0);break;case 1:case"berlin":case"eip-2930":me(this,Pl,1);break;case 2:case"london":case"eip-1559":me(this,Pl,2);break;case 3:case"cancun":case"eip-4844":me(this,Pl,3);break;case 4:case"pectra":case"eip-7702":me(this,Pl,4);break;default:xe(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=re(this,jy);return e==null&&this.type===3?Fw:e}set to(e){me(this,jy,e==null?null:xn(e))}get nonce(){return re(this,Uy)}set nonce(e){me(this,Uy,en(e,"value"))}get gasLimit(){return re(this,Fy)}set gasLimit(e){me(this,Fy,Ct(e))}get gasPrice(){const e=re(this,$y);return e==null&&(this.type===0||this.type===1)?Vi:e}set gasPrice(e){me(this,$y,e==null?null:Ct(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=re(this,zy);return e??(this.type===2||this.type===3?Vi:null)}set maxPriorityFeePerGas(e){me(this,zy,e==null?null:Ct(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=re(this,Vy);return e??(this.type===2||this.type===3?Vi:null)}set maxFeePerGas(e){me(this,Vy,e==null?null:Ct(e,"maxFeePerGas"))}get data(){return re(this,By)}set data(e){me(this,By,at(e))}get value(){return re(this,Hy)}set value(e){me(this,Hy,Ct(e,"value"))}get chainId(){return re(this,qy)}set chainId(e){me(this,qy,Ct(e))}get signature(){return re(this,Gy)||null}set signature(e){me(this,Gy,e==null?null:lo.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const r of n)if(!r.signature.isValid())return!1}return!0}get accessList(){const e=re(this,Ky)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){me(this,Ky,e==null?null:t0(e))}get authorizationList(){const e=re(this,Wy)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){me(this,Wy,e==null?null:e.map(n=>Kie(n)))}get maxFeePerBlobGas(){const e=re(this,am);return e==null&&this.type===3?Vi:e}set maxFeePerBlobGas(e){me(this,am,e==null?null:Ct(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=re(this,th);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){xe(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)xe(xr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}me(this,th,e)}get blobs(){return re(this,nh)==null?null:re(this,nh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){me(this,nh,null);return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(_N(s)){Xe(re(this,gc),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=bt(s);if(xe(o.length<=PR,"blob is too large",`blobs[${i}]`,s),o.length!==PR){const c=new Uint8Array(PR);c.set(o),o=c}const a=re(this,gc).blobToKzgCommitment(o),l=at(re(this,gc).computeBlobKzgProof(o,a));n.push({data:at(o),commitment:at(a),proof:l}),r.push(dH(1,a))}else{const o=at(s.data),a=at(s.commitment),l=at(s.proof);n.push({data:o,commitment:a,proof:l}),r.push(dH(1,a))}}me(this,nh,n),me(this,th,r)}get kzg(){return re(this,gc)}set kzg(e){e==null?me(this,gc,null):me(this,gc,cPe(e))}get blobWrapperVersion(){return re(this,Yy)}set blobWrapperVersion(e){me(this,Yy,e)}get hash(){return this.signature==null?null:Kn(rt(this,Jy,CT).call(this,!0,!1))}get unsignedHash(){return Kn(this.unsignedSerialized)}get from(){return this.signature==null?null:DN(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Dc.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return rt(this,Jy,CT).call(this,!0,!0)}get unsignedSerialized(){return rt(this,Jy,CT).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=re(this,am)!=null||re(this,th);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Xe(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Xe(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Xe(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ta.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[lPe](){return this.toString()}toString(){const e=[],n=i=>{let s=this[i];typeof s=="string"&&(s=JSON.stringify(s)),e.push(`${i}: ${s}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const r=this.authorizationList;if(r){const i=[];for(const s of r){const o=[];o.push(`address: ${JSON.stringify(s.address)}`),s.nonce!=null&&o.push(`nonce: ${s.nonce}`),s.chainId!=null&&o.push(`chainId: ${s.chainId}`),s.signature&&o.push(`signature: ${s.signature.toString()}`),i.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${i.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new ta;if(typeof e=="string"){const r=bt(e);if(r[0]>=127)return ta.from(hPe(r));switch(r[0]){case 1:return ta.from(yPe(r));case 2:return ta.from(mPe(r));case 3:return ta.from(vPe(r));case 4:return ta.from(wPe(r))}Xe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new ta;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=lo.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(xe(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),xe(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(xe(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),xe(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}},Pl=new WeakMap,jy=new WeakMap,By=new WeakMap,Uy=new WeakMap,Fy=new WeakMap,$y=new WeakMap,zy=new WeakMap,Vy=new WeakMap,Hy=new WeakMap,qy=new WeakMap,Gy=new WeakMap,Ky=new WeakMap,am=new WeakMap,th=new WeakMap,gc=new WeakMap,nh=new WeakMap,Wy=new WeakMap,Yy=new WeakMap,Jy=new WeakSet,CT=function(e,n){Xe(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return pPe(this,r);case 1:return xPe(this,r);case 2:return gPe(this,r);case 3:return bPe(this,r,n?this.blobs:null);case 4:return EPe(this,r)}Xe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},ta);function Wie(t){return xe(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),Kn(On(["0x05",Lc([t.chainId!=null?Ur(t.chainId):"0x",xn(t.address),t.nonce!=null?Ur(t.nonce):"0x"])]))}function Rgt(t,e){return DN(Wie(t),e)}function Sd(t){return Kn(vi(t))}var SPe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const fH=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),hH=4;function APe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let j=1;j<r;j++)s.push(i+=n());let o=n(),a=e;e+=o;let l=0,c=0;function d(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const h=31,m=2**h,g=m>>>1,v=g>>1,x=m-1;let b=0;for(let j=0;j<h;j++)b=b<<1|d();let w=[],T=0,N=m;for(;;){let j=Math.floor(((b-T+1)*i-1)/N),_=0,F=r;for(;F-_>1;){let $=_+F>>>1;j<s[$]?F=$:_=$}if(_==0)break;w.push(_);let z=T+Math.floor(N*s[_]/i),D=T+Math.floor(N*s[_+1]/i)-1;for(;((z^D)&g)==0;)b=b<<1&x|d(),z=z<<1&x,D=D<<1&x|1;for(;z&~D&v;)b=b&g|b<<1&x>>>1|d(),z=z<<1^g,D=(D^g)<<1|g|1;T=z,N=1+D-z}let O=r-4;return w.map(j=>{switch(j-O){case 3:return O+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return O+256+(t[a++]<<8|t[a++]);case 1:return O+t[a++];default:return j-1}})}function TPe(t){let e=0;return()=>t[e++]}function Yie(t){return TPe(APe(kPe(t)))}function kPe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function NPe(t){return t&1?~t>>1:t>>1}function CPe(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=NPe(e());return n}function $w(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function Jie(t){return zw(()=>{let e=$w(t);if(e.length)return e})}function Xie(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(PPe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(_Pe(n,t))}return e.flat()}function zw(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Qie(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)CPe(t,n).forEach((s,o)=>r[o].push(s));return r}function PPe(t,e){let n=1+e(),r=e(),i=zw(e);return Qie(i.length,1+t,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((d,h)=>{let m=h*r;return[l+h*n,c.map(g=>g+m)]})})}function _Pe(t,e){let n=1+e();return Qie(n,1+t,e).map(i=>[i[0],i.slice(1)])}function IPe(t){let e=[],n=$w(t);return i(r([]),[]),e;function r(s){let o=t(),a=zw(()=>{let l=$w(t).map(c=>n[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let d of c.Q)i(c,[...a,d],l)}}}function RPe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Zie(t){return`{${RPe(t)}}`}function OPe(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function Tx(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function MPe(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var LPe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Vw=44032,b2=4352,w2=4449,E2=4519,ese=19,tse=21,kx=28,S2=tse*kx,DPe=ese*S2,jPe=Vw+DPe,BPe=b2+ese,UPe=w2+tse,FPe=E2+kx;function Yb(t){return t>>24&255}function nse(t){return t&16777215}let dM,pH,fM,PT;function $Pe(){let t=Yie(LPe);dM=new Map(Jie(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),pH=new Set($w(t)),fM=new Map,PT=new Map;for(let[e,n]of Xie(t)){if(!pH.has(e)&&n.length==2){let[r,i]=n,s=PT.get(r);s||(s=new Map,PT.set(r,s)),s.set(i,e)}fM.set(e,n.reverse())}}function rse(t){return t>=Vw&&t<jPe}function zPe(t,e){if(t>=b2&&t<BPe&&e>=w2&&e<UPe)return Vw+(t-b2)*S2+(e-w2)*kx;if(rse(t)&&e>E2&&e<FPe&&(t-Vw)%kx==0)return t+(e-E2);{let n=PT.get(t);return n&&(n=n.get(e),n)?n:-1}}function ise(t){dM||$Pe();let e=[],n=[],r=!1;function i(s){let o=dM.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(rse(s)){let o=s-Vw,a=o/S2|0,l=o%S2/kx|0,c=o%kx;i(b2+a),i(w2+l),c>0&&i(E2+c)}else{let o=fM.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=Yb(e[0]);for(let o=1;o<e.length;o++){let a=Yb(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=Yb(e[--l]),s<=a))break}s=Yb(e[o])}}return e}function VPe(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=Yb(s),a=nse(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=zPe(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function sse(t){return ise(t).map(nse)}function HPe(t){return VPe(ise(t))}const mH=45,ose=".",ase=65039,lse=1,A2=t=>Array.from(t);function Hw(t,e){return t.P.has(e)||t.Q.has(e)}class qPe extends Array{get is_emoji(){return!0}}let hM,cse,zp,pM,use,cy,_R,Ng,Sp,gH,mM;function nj(){if(hM)return;let t=Yie(SPe);const e=()=>$w(t),n=()=>new Set(e()),r=(d,h)=>h.forEach(m=>d.add(m));hM=new Map(Xie(t)),cse=n(),zp=e(),pM=new Set(e().map(d=>zp[d])),zp=new Set(zp),use=n(),n();let i=Jie(t),s=t();const o=()=>{let d=new Set;return e().forEach(h=>r(d,i[h])),r(d,e()),d};cy=zw(d=>{let h=zw(t).map(m=>m+96);if(h.length){let m=d>=s;h[0]-=32,h=Tx(h),m&&(h=`Restricted[${h}]`);let g=o(),v=o(),x=!t();return{N:h,P:g,Q:v,M:x,R:m}}}),_R=n(),Ng=new Map;let a=e().concat(A2(_R)).sort((d,h)=>d-h);a.forEach((d,h)=>{let m=t(),g=a[h]=m?a[h-m]:{V:[],M:new Map};g.V.push(d),_R.has(d)||Ng.set(d,g)});for(let{V:d,M:h}of new Set(Ng.values())){let m=[];for(let v of d){let x=cy.filter(w=>Hw(w,v)),b=m.find(({G:w})=>x.some(T=>w.has(T)));b||(b={G:new Set,V:[]},m.push(b)),b.V.push(v),r(b.G,x)}let g=m.flatMap(v=>A2(v.G));for(let{G:v,V:x}of m){let b=new Set(g.filter(w=>!v.has(w)));for(let w of x)h.set(w,b)}}Sp=new Set;let l=new Set;const c=d=>Sp.has(d)?l.add(d):Sp.add(d);for(let d of cy){for(let h of d.P)c(h);for(let h of d.Q)c(h)}for(let d of Sp)!Ng.has(d)&&!l.has(d)&&Ng.set(d,lse);r(Sp,sse(Sp)),gH=IPe(t).map(d=>qPe.from(d)).sort(MPe),mM=new Map;for(let d of gH){let h=[mM];for(let m of d){let g=h.map(v=>{let x=v.get(m);return x||(x=new Map,v.set(m,x)),x});m===ase?h.push(...g):h=g}for(let m of h)m.V=d}}function rj(t){return(dse(t)?"":`${ij(FN([t]))} `)+Zie(t)}function ij(t){return`"${t}"`}function GPe(t){if(t.length>=4&&t[2]==mH&&t[3]==mH)throw new Error(`invalid label extension: "${Tx(t.slice(0,4))}"`)}function KPe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function WPe(t){let e=t[0],n=fH.get(e);if(n)throw mw(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=fH.get(e);if(o){if(i==s)throw mw(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw mw(`trailing ${n}`)}function FN(t,e=1/0,n=Zie){let r=[];YPe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];dse(a)&&(r.push(Tx(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(Tx(t.slice(i,s))),r.join("")}function YPe(t){return nj(),zp.has(t)}function dse(t){return nj(),use.has(t)}function JPe(t){return e_e(XPe(t,HPe,r_e))}function XPe(t,e,n){if(!t)return[];nj();let r=0;return t.split(ose).map(i=>{let s=OPe(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=n_e(s,e,n),l=a.length,c;if(!l)throw new Error("empty label");let d=o.output=a.flat();if(KPe(d),!(o.emoji=l>1||a[0].is_emoji)&&d.every(m=>m<128))GPe(d),c="ASCII";else{let m=a.flatMap(g=>g.is_emoji?[]:g);if(!m.length)c="Emoji";else{if(zp.has(d[0]))throw mw("leading combining mark");for(let x=1;x<l;x++){let b=a[x];if(!b.is_emoji&&zp.has(b[0]))throw mw(`emoji + combining mark: "${Tx(a[x-1])} + ${FN([b[0]])}"`)}WPe(d);let g=A2(new Set(m)),[v]=ZPe(g);t_e(v,m),QPe(v,g),c=v.N}}o.type=c}catch(a){o.error=a}return o})}function QPe(t,e){let n,r=[];for(let i of e){let s=Ng.get(i);if(s===lse)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):A2(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>Hw(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function ZPe(t){let e=cy;for(let n of t){let r=e.filter(i=>Hw(i,n));if(!r.length)throw cy.some(i=>Hw(i,n))?hse(e[0],n):fse(n);if(e=r,r.length==1)break}return e}function e_e(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${ij(FN(e,63))}: ${i}`)}return Tx(r)}).join(ose)}function fse(t){return new Error(`disallowed character: ${rj(t)}`)}function hse(t,e){let n=rj(e),r=cy.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function mw(t){return new Error(`illegal placement: ${t}`)}function t_e(t,e){for(let n of e)if(!Hw(t,n))throw hse(t,n);if(t.M){let n=sse(e);for(let r=1,i=n.length;r<i;r++)if(pM.has(n[r])){let s=r+1;for(let o;s<i&&pM.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${rj(o)}`);if(s-r>hH)throw new Error(`excessive non-spacing marks: ${ij(FN(n.slice(r-1,s)))} (${s-r}/${hH})`);r=s}}}function n_e(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=i_e(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(Sp.has(o))i.push(o);else{let a=hM.get(o);if(a)i.push(...a);else if(!cse.has(o))throw fse(o)}}}return i.length&&r.push(e(i)),r}function r_e(t){return t.filter(e=>e!=ase)}function i_e(t,e){let n=mM,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const pse=new Uint8Array(32);pse.fill(0);function yH(t){return xe(t.length!==0,"invalid ENS name; empty component","comp",t),t}function sj(t){const e=vi(s_e(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(yH(e.slice(r,i))),r=i+1);return xe(r<e.length,"invalid ENS name; empty component","name",t),n.push(yH(e.slice(r))),n}function s_e(t){try{if(t.length===0)throw new Error("empty label");return JPe(t)}catch(e){xe(!1,`invalid ENS name (${e.message})`,"name",t)}}function Ogt(t){try{return sj(t).length!==0}catch{}return!1}function gM(t){xe(typeof t=="string","invalid ENS name; not a string","name",t),xe(t.length,"invalid ENS name (empty label)","name",t);let e=pse;const n=sj(t);for(;n.length;)e=Kn(On([e,Kn(n.pop())]));return at(e)}function o_e(t,e){const n=e??63;return xe(n<=255,"DNS encoded label cannot exceed 255","length",n),at(On(sj(t).map(r=>{xe(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function mse(t){return typeof t=="string"&&(t=vi(t)),Kn(On([vi(DCe),vi(String(t.length)),t]))}function Mgt(t,e){const n=mse(t);return DN(n,e)}const gse=new Uint8Array(32);gse.fill(0);const a_e=BigInt(-1),yse=BigInt(0),xse=BigInt(1),l_e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function c_e(t){const e=bt(t),n=e.length%32;return n?On([e,gse.slice(n)]):at(e)}const u_e=wd(xse,32),d_e=wd(yse,32),xH={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},IR=["name","version","chainId","verifyingContract","salt"];function vH(t){return function(e){return xe(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const f_e={name:vH("name"),version:vH("version"),chainId:function(t){const e=Ct(t,"domain.chainId");return xe(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Ol(e)},verifyingContract:function(t){try{return xn(t).toLowerCase()}catch{}xe(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=bt(t,"domain.salt");return xe(e.length===32,'invalid domain value "salt"',"domain.salt",t),at(e)}};function RR(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);xe(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=Fp(l_e,n?r-1:r),s=n?(i+xse)*a_e:yse;return function(o){const a=Ct(o,"value");return xe(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),wd(n?kre(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return xe(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=bt(r);return xe(i.length===n,`invalid length for ${t}`,"value",r),c_e(r)}}}switch(t){case"address":return function(e){return bd(xn(e),32)};case"bool":return function(e){return e?u_e:d_e};case"bytes":return function(e){return Kn(e)};case"string":return function(e){return Sd(e)}}return null}function bH(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function mA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var P1,Vu,Xy,dN,vse;const Ua=class Ua{constructor(e){Fe(this,dN);Ne(this,"primaryType");Fe(this,P1);Fe(this,Vu);Fe(this,Xy);me(this,Vu,new Map),me(this,Xy,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:d})=>{let{base:h,index:m}=mA(d);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:c,type:h+(m||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),me(this,P1,JSON.stringify(s));for(const l in s){const c=new Set;for(const d of s[l]){xe(!c.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(l)}`,"types",e),c.add(d.name);const h=mA(d.type).base;xe(h!==l,`circular type reference to ${JSON.stringify(h)}`,"types",e),!RR(h)&&(xe(r.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),r.get(h).push(l),n.get(l).add(h))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);xe(o.length!==0,"missing primary type","types",e),xe(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Bt(this,{primaryType:o[0]});function a(l,c){xe(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const d of n.get(l))if(r.has(d)){a(d,c);for(const h of c)i.get(h).add(d)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const d=Array.from(c);d.sort(),re(this,Vu).set(l,bH(l,s[l])+d.map(h=>bH(h,s[h])).join(""))}}get types(){return JSON.parse(re(this,P1))}getEncoder(e){let n=re(this,Xy).get(e);return n||(n=rt(this,dN,vse).call(this,e),re(this,Xy).set(e,n)),n}encodeType(e){const n=re(this,Vu).get(e);return xe(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Kn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(RR(e))return r(e,n);const i=mA(e).array;if(i)return xe(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});xe(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Ua(e)}static getPrimaryType(e){return Ua.from(e).primaryType}static hashStruct(e,n,r){return Ua.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=xH[r];xe(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>IR.indexOf(r.name)-IR.indexOf(i.name)),Ua.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return On(["0x1901",Ua.hashDomain(e),Ua.from(n).hash(r)])}static hash(e,n,r){return Kn(Ua.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!xr(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Ua.from(n);o.visit(r,(a,l)=>(a==="address"&&!xr(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,n,r){Ua.hashDomain(e);const i={},s=[];IR.forEach(l=>{const c=e[l];c!=null&&(i[l]=f_e[l](c),s.push({name:l,type:xH[l]}))});const o=Ua.from(n);n=o.types;const a=Object.assign({},n);return xe(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return at(bt(c));if(l.match(/^u?int/))return Ct(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return xe(typeof c=="string","invalid string","value",c),c}xe(!1,"unsupported type","type",l)})}}};P1=new WeakMap,Vu=new WeakMap,Xy=new WeakMap,dN=new WeakSet,vse=function(e){{const i=RR(e);if(i)return i}const n=mA(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{xe(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return re(this,Vu).has(i)&&(a=a.map(Kn)),Kn(On(a))}}const r=this.types[e];if(r){const i=Sd(re(this,Vu).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return re(this,Vu).has(l)?Kn(c):c});return o.unshift(i),On(o)}}xe(!1,`unknown type: ${e}`,"type",e)};let Om=Ua;function Lgt(t,e,n,r){return DN(Om.hash(t,e,n),r)}function so(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const h_e="external public payable override",p_e=so(h_e.split(" ")),bse="constant external internal payable private public pure view override",m_e=so(bse.split(" ")),wse="constructor error event fallback function receive struct",Ese=so(wse.split(" ")),Sse="calldata memory storage payable indexed",g_e=so(Sse.split(" ")),y_e="tuple returns",x_e=[wse,Sse,y_e,bse].join(" "),v_e=so(x_e.split(" ")),b_e={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},w_e=new RegExp("^(\\s*)"),E_e=new RegExp("^([0-9]+)"),S_e=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Ase=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Tse=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var os,_l,_1,yM;const fN=class fN{constructor(e){Fe(this,_1);Fe(this,os);Fe(this,_l);me(this,os,0),me(this,_l,e.slice())}get offset(){return re(this,os)}get length(){return re(this,_l).length-re(this,os)}clone(){return new fN(re(this,_l))}reset(){me(this,os,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=rt(this,_1,yM).call(this,re(this,os)+1,e.match+1);return me(this,os,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;re(this,os)<e.match-1;){const r=this.peek().linkNext;n.push(rt(this,_1,yM).call(this,re(this,os)+1,r)),me(this,os,r)}return me(this,os,e.match+1),n}peek(){if(re(this,os)>=re(this,_l).length)throw new Error("out-of-bounds");return re(this,_l)[re(this,os)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return xb(this,os)._++,e}toString(){const e=[];for(let n=re(this,os);n<re(this,_l).length;n++){const r=re(this,_l)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};os=new WeakMap,_l=new WeakMap,_1=new WeakSet,yM=function(e=0,n=0){return new fN(re(this,_l).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Gl=fN;function Bh(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(w_e);a&&(s+=a[1].length,o=t.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let c=b_e[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,c==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(c=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let d=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const h=e.pop().text;d=h+d,e[e.length-1].value=en(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=d}continue}if(a=o.match(S_e),a){if(l.text=a[1],s+=l.text.length,v_e.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(Tse)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(E_e),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new Gl(e.map(o=>Object.freeze(o)))}function wH(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function $N(t,e){if(e.peekKeyword(Ese)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Ad(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function kse(t){let e=Ad(t,m_e);return wH(e,so("constant payable nonpayable".split(" "))),wH(e,so("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function ud(t,e){return t.popParams().map(n=>xs.from(n,e))}function Nse(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ct(t.pop().text);throw new Error("invalid gas")}return null}function Mm(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const A_e=new RegExp(/^(.*)\[([0-9]*)\]$/);function EH(t){const e=t.match(Tse);if(xe(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);xe(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);xe(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const jr={},Oo=Symbol.for("_ethers_internal"),SH="_ParamTypeInternal",AH="_ErrorInternal",TH="_EventInternal",kH="_ConstructorInternal",NH="_FallbackInternal",CH="_FunctionInternal",PH="_StructInternal";var Qy,_T;const Fa=class Fa{constructor(e,n,r,i,s,o,a,l){Fe(this,Qy);Ne(this,"name");Ne(this,"type");Ne(this,"baseType");Ne(this,"indexed");Ne(this,"components");Ne(this,"arrayLength");Ne(this,"arrayChildren");if(Dh(e,jr,"ParamType"),Object.defineProperty(this,Oo,{value:SH}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Bt(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],i=[e];return rt(this,Qy,_T).call(this,r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(Fa.isParamType(e))return e;if(typeof e=="string")try{return Fa.from(Bh(e),n)}catch{xe(!1,"invalid param type","obj",e)}else if(e instanceof Gl){let a="",l="",c=null;Ad(e,so(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(x=>Fa.from(x)),a=`tuple(${c.map(x=>x.format()).join(",")})`):(a=EH(e.popType("TYPE")),l=a);let d=null,h=null;for(;e.length&&e.peekType("BRACKET");){const x=e.pop();d=new Fa(jr,"",a,l,null,c,h,d),h=x.value,a+=x.text,l="array",c=null}let m=null;if(Ad(e,g_e).has("indexed")){if(!n)throw new Error("");m=!0}const v=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Fa(jr,v,a,l,m,c,h,d)}const r=e.name;xe(!r||typeof r=="string"&&r.match(Ase),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(xe(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(A_e);if(o){const a=parseInt(o[2]||"-1"),l=Fa.from({type:o[1],components:e.components});return new Fa(jr,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(c=>Fa.from(c)):null;return new Fa(jr,r||"",s,"tuple",i,a,null,null)}return s=EH(e.type),new Fa(jr,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[Oo]===SH}};Qy=new WeakSet,_T=function(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,c)=>{var d;rt(d=o,Qy,_T).call(d,e,l,r,h=>{a[c]=h})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{var d;rt(d=o[c],Qy,_T).call(d,e,l,r,h=>{a[c]=h})}),i(a);return}const s=r(this.type,n);s.then?e.push((async function(){i(await s)})()):i(s)};let xs=Fa;class Lm{constructor(e,n,r){Ne(this,"type");Ne(this,"inputs");Dh(e,jr,"Fragment"),r=Object.freeze(r.slice()),Bt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Lm.from(JSON.parse(e))}catch{}return Lm.from(Bh(e))}if(e instanceof Gl)switch(e.peekKeyword(Ese)){case"constructor":return nd.from(e);case"error":return No.from(e);case"event":return kc.from(e);case"fallback":case"receive":return Du.from(e);case"function":return Nc.from(e);case"struct":return Am.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return nd.from(e);case"error":return No.from(e);case"event":return kc.from(e);case"fallback":case"receive":return Du.from(e);case"function":return Nc.from(e);case"struct":return Am.from(e)}Xe(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}xe(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return nd.isFragment(e)}static isError(e){return No.isFragment(e)}static isEvent(e){return kc.isFragment(e)}static isFunction(e){return Nc.isFragment(e)}static isStruct(e){return Am.isFragment(e)}}class zN extends Lm{constructor(n,r,i,s){super(n,r,s);Ne(this,"name");xe(typeof i=="string"&&i.match(Ase),"invalid identifier","name",i),s=Object.freeze(s.slice()),Bt(this,{name:i})}}function qw(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class No extends zN{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,Oo,{value:AH})}get selector(){return Sd(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+qw(e,this.inputs)),n.join(" ")}static from(e){if(No.isFragment(e))return e;if(typeof e=="string")return No.from(Bh(e));if(e instanceof Gl){const n=$N("error",e),r=ud(e);return Mm(e),new No(jr,n,r)}return new No(jr,e.name,e.inputs?e.inputs.map(xs.from):[])}static isFragment(e){return e&&e[Oo]===AH}}class kc extends zN{constructor(n,r,i,s){super(n,"event",r,i);Ne(this,"anonymous");Object.defineProperty(this,Oo,{value:TH}),Bt(this,{anonymous:s})}get topicHash(){return Sd(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+qw(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>xs.from(s)),new kc(jr,n,r,!1).topicHash}static from(n){if(kc.isFragment(n))return n;if(typeof n=="string")try{return kc.from(Bh(n))}catch{xe(!1,"invalid event fragment","obj",n)}else if(n instanceof Gl){const r=$N("event",n),i=ud(n,!0),s=!!Ad(n,so(["anonymous"])).has("anonymous");return Mm(n),new kc(jr,r,i,s)}return new kc(jr,n.name,n.inputs?n.inputs.map(r=>xs.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Oo]===TH}}class nd extends Lm{constructor(n,r,i,s,o){super(n,r,i);Ne(this,"payable");Ne(this,"gas");Object.defineProperty(this,Oo,{value:kH}),Bt(this,{payable:s,gas:o})}format(n){if(Xe(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${qw(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(nd.isFragment(n))return n;if(typeof n=="string")try{return nd.from(Bh(n))}catch{xe(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Gl){Ad(n,so(["constructor"]));const r=ud(n),i=!!Ad(n,p_e).has("payable"),s=Nse(n);return Mm(n),new nd(jr,"constructor",r,i,s)}return new nd(jr,"constructor",n.inputs?n.inputs.map(xs.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Oo]===kH}}class Du extends Lm{constructor(n,r,i){super(n,"fallback",r);Ne(this,"payable");Object.defineProperty(this,Oo,{value:NH}),Bt(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Du.isFragment(n))return n;if(typeof n=="string")try{return Du.from(Bh(n))}catch{xe(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Gl){const r=n.toString(),i=n.peekKeyword(so(["fallback","receive"]));if(xe(i,"type must be fallback or receive","obj",r),n.popKeyword(so(["fallback","receive"]))==="receive"){const l=ud(n);return xe(l.length===0,"receive cannot have arguments","obj.inputs",l),Ad(n,so(["payable"])),Mm(n),new Du(jr,[],!0)}let o=ud(n);o.length?xe(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[xs.from("bytes")];const a=kse(n);if(xe(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Ad(n,so(["returns"])).has("returns")){const l=ud(n);xe(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return Mm(n),new Du(jr,o,a==="payable")}if(n.type==="receive")return new Du(jr,[],!0);if(n.type==="fallback"){const r=[xs.from("bytes")],i=n.stateMutability==="payable";return new Du(jr,r,i)}xe(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Oo]===NH}}class Nc extends zN{constructor(n,r,i,s,o,a){super(n,"function",r,s);Ne(this,"constant");Ne(this,"outputs");Ne(this,"stateMutability");Ne(this,"payable");Ne(this,"gas");Object.defineProperty(this,Oo,{value:CH}),o=Object.freeze(o.slice()),Bt(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return Sd(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+qw(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(qw(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>xs.from(s)),new Nc(jr,n,"view",r,[],null).selector}static from(n){if(Nc.isFragment(n))return n;if(typeof n=="string")try{return Nc.from(Bh(n))}catch{xe(!1,"invalid function fragment","obj",n)}else if(n instanceof Gl){const i=$N("function",n),s=ud(n),o=kse(n);let a=[];Ad(n,so(["returns"])).has("returns")&&(a=ud(n));const l=Nse(n);return Mm(n),new Nc(jr,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Nc(jr,n.name,r,n.inputs?n.inputs.map(xs.from):[],n.outputs?n.outputs.map(xs.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Oo]===CH}}class Am extends zN{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,Oo,{value:PH})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Am.from(Bh(e))}catch{xe(!1,"invalid struct fragment","obj",e)}else if(e instanceof Gl){const n=$N("struct",e),r=ud(e);return Mm(e),new Am(jr,n,r)}return new Am(jr,e.name,e.inputs?e.inputs.map(xs.from):[])}static isFragment(e){return e&&e[Oo]===PH}}const Ql=new Map;Ql.set(0,"GENERIC_PANIC");Ql.set(1,"ASSERT_FALSE");Ql.set(17,"OVERFLOW");Ql.set(18,"DIVIDE_BY_ZERO");Ql.set(33,"ENUM_RANGE_ERROR");Ql.set(34,"BAD_STORAGE_DATA");Ql.set(49,"STACK_UNDERFLOW");Ql.set(50,"ARRAY_RANGE_ERROR");Ql.set(65,"OUT_OF_MEMORY");Ql.set(81,"UNINITIALIZED_FUNCTION_CALL");const T_e=new RegExp(/^bytes([0-9]*)$/),k_e=new RegExp(/^(u?int)([0-9]*)$/);let OR=null,_H=1024;function N_e(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const c=bt(n);if(n=at(n),c.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(c.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(at(c.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(at(c.slice(0,4))==="0x4e487b71")try{const d=Number(r.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[d]},s=`Panic due to ${Ql.get(d)||"UNKNOWN"}(${d})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?xn(e.to):null,data:e.data||"0x"};return e.from&&(l.from=xn(e.from)),Mr(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:l,invocation:o,revert:a})}var rh,Cg;const hN=class hN{constructor(){Fe(this,rh)}getDefaultValue(e){const n=e.map(i=>rt(this,rh,Cg).call(this,xs.from(i)));return new pA(n,"_").defaultValue()}encode(e,n){Ere(n.length,e.length,"types/values length mismatch");const r=e.map(o=>rt(this,rh,Cg).call(this,xs.from(o))),i=new pA(r,"_"),s=new nM;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>rt(this,rh,Cg).call(this,xs.from(o)));return new pA(i,"_").decode(new rM(n,r,_H))}static _setDefaultMaxInflation(e){xe(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),_H=e}static defaultAbiCoder(){return OR==null&&(OR=new hN),OR}static getBuiltinCallException(e,n,r){return N_e(e,n,r,hN.defaultAbiCoder())}};rh=new WeakSet,Cg=function(e){if(e.isArray())return new GCe(rt(this,rh,Cg).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new pA(e.components.map(r=>rt(this,rh,Cg).call(this,r)),e.name);switch(e.baseType){case"address":return new HCe(e.name);case"bool":return new KCe(e.name);case"string":return new nPe(e.name);case"bytes":return new WCe(e.name);case"":return new XCe(e.name)}let n=e.type.match(k_e);if(n){let r=parseInt(n[2]||"256");return xe(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new tPe(r/8,n[1]==="int",e.name)}if(n=e.type.match(T_e),n){let r=parseInt(n[1]);return xe(r!==0&&r<=32,"invalid bytes length","param",e),new YCe(r,e.name)}xe(!1,"invalid type","type",e.type)};let Gw=hN;class C_e{constructor(e,n,r){Ne(this,"fragment");Ne(this,"name");Ne(this,"signature");Ne(this,"topic");Ne(this,"args");const i=e.name,s=e.format();Bt(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class P_e{constructor(e,n,r,i){Ne(this,"fragment");Ne(this,"name");Ne(this,"args");Ne(this,"signature");Ne(this,"selector");Ne(this,"value");const s=e.name,o=e.format();Bt(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class __e{constructor(e,n,r){Ne(this,"fragment");Ne(this,"name");Ne(this,"args");Ne(this,"signature");Ne(this,"selector");const i=e.name,s=e.format();Bt(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class IH{constructor(e){Ne(this,"hash");Ne(this,"_isIndexed");Bt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const RH={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},OH={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&RH[t.toString()]&&(e=RH[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var yc,xc,vc,Cs,$c,IT,RT;const Mp=class Mp{constructor(e){Fe(this,$c);Ne(this,"fragments");Ne(this,"deploy");Ne(this,"fallback");Ne(this,"receive");Fe(this,yc);Fe(this,xc);Fe(this,vc);Fe(this,Cs);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,me(this,vc,new Map),me(this,yc,new Map),me(this,xc,new Map);const r=[];for(const o of n)try{r.push(Lm.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Bt(this,{fragments:Object.freeze(r)});let i=null,s=!1;me(this,Cs,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Bt(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(xe(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=re(this,vc);break;case"event":l=re(this,xc);break;case"error":l=re(this,yc);break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Bt(this,{deploy:nd.from("constructor()")}),Bt(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return Gw.defaultAbiCoder()}getFunctionName(e){const n=rt(this,$c,IT).call(this,e,null,!1);return xe(n,"no matching function","key",e),n.name}hasFunction(e){return!!rt(this,$c,IT).call(this,e,null,!1)}getFunction(e,n){return rt(this,$c,IT).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(re(this,vc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(re(this,vc).get(i),r)}}getEventName(e){const n=rt(this,$c,RT).call(this,e,null,!1);return xe(n,"no matching event","key",e),n.name}hasEvent(e){return!!rt(this,$c,RT).call(this,e,null,!1)}getEvent(e,n){return rt(this,$c,RT).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(re(this,xc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(re(this,xc).get(i),r)}}getError(e,n){if(xr(e)){const i=e.toLowerCase();if(OH[i])return No.from(OH[i].signature);for(const s of re(this,yc).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of re(this,yc))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?No.from("error Error(string)"):e==="Panic"?No.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");xe(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=No.from(e).format(),e==="Error(string)")return No.from("error Error(string)");if(e==="Panic(uint256)")return No.from("error Panic(uint256)");const r=re(this,yc).get(e);return r||null}forEachError(e){const n=Array.from(re(this,yc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(re(this,yc).get(i),r)}}_decodeParams(e,n){return re(this,Cs).decode(e,n)}_encodeParams(e,n){return re(this,Cs).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);xe(r,"unknown error","fragment",e),e=r}return xe(yr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,yr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);xe(r,"unknown error","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return xe(yr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,yr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);xe(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=gs(n);if(i.length%32===0)try{return re(this,Cs).decode(e.outputs,i)}catch{r="could not decode result data"}Xe(!1,r,"BAD_DATA",{value:at(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=bt(e,"data"),i=Gw.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=at(r.slice(0,4)),l=this.getError(a);if(l)try{const c=re(this,Cs).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:c},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);xe(r,"unknown function","fragment",e),e=r}return at(re(this,Cs).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);xe(s,"unknown event","eventFragment",e),e=s}Xe(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?Sd(o):s.type==="bytes"?Kn(at(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=wd(o):s.type.match(/^bytes/)?o=Ike(o,32):s.type==="address"&&re(this,Cs).encode(["address"],[o]),bd(at(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){xe(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?xe(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);xe(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),xe(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(Sd(l));else if(o.type==="bytes")r.push(Kn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(re(this,Cs).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:re(this,Cs).encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const g=this.getEvent(e);xe(g,"unknown event","eventFragment",e),e=g}if(r!=null&&!e.anonymous){const g=e.topicHash;xe(xr(r[0],32)&&r[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((g,v)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(xs.from({type:"bytes32",name:g.name})),o.push(!0)):(i.push(g),o.push(!1)):(s.push(g),o.push(!1))});const a=r!=null?re(this,Cs).decode(i,On(r)):null,l=re(this,Cs).decode(s,n,!0),c=[],d=[];let h=0,m=0;return e.inputs.forEach((g,v)=>{let x=null;if(g.indexed)if(a==null)x=new IH(null);else if(o[v])x=new IH(a[m++]);else try{x=a[m++]}catch(b){x=b}else try{x=l[h++]}catch(b){x=b}c.push(x),d.push(g.name||null)}),vx.fromItems(c,d)}parseTransaction(e){const n=bt(e.data,"tx.data"),r=Ct(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(at(n.slice(0,4)));if(!i)return null;const s=re(this,Cs).decode(i.inputs,n.slice(4));return new P_e(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new C_e(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=at(e),r=this.getError(yr(n,0,4));if(!r)return null;const i=re(this,Cs).decode(r.inputs,yr(n,4));return new __e(r,r.selector,i)}static from(e){return e instanceof Mp?e:typeof e=="string"?new Mp(JSON.parse(e)):typeof e.formatJson=="function"?new Mp(e.formatJson()):typeof e.format=="function"?new Mp(e.format("json")):new Mp(e)}};yc=new WeakMap,xc=new WeakMap,vc=new WeakMap,Cs=new WeakMap,$c=new WeakSet,IT=function(e,n,r){if(xr(e)){const s=e.toLowerCase();for(const o of re(this,vc).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of re(this,vc))o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;zs.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=s.length-1;c>=0;c--){const d=s[c].inputs.length;d!==a&&(!l||d!==a-1)&&s.splice(c,1)}for(let c=s.length-1;c>=0;c--){const d=s[c].inputs;for(let h=0;h<n.length;h++)if(zs.isTyped(n[h])){if(h>=d.length){if(n[h].type==="overrides")continue;s.splice(c,1);break}if(n[h].type!==d[h].baseType){s.splice(c,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");xe(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=re(this,vc).get(Nc.from(e).format());return i||null},RT=function(e,n,r){if(xr(e)){const s=e.toLowerCase();for(const o of re(this,xc).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of re(this,xc))o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(zs.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");xe(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=re(this,xc).get(kc.from(e).format());return i||null};let xM=Mp;const Cse=BigInt(0);function uy(t){return t??null}function si(t){return t==null?null:t.toString()}class MH{constructor(e,n,r){Ne(this,"gasPrice");Ne(this,"maxFeePerGas");Ne(this,"maxPriorityFeePerGas");Bt(this,{gasPrice:uy(e),maxFeePerGas:uy(n),maxPriorityFeePerGas:uy(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:si(e),maxFeePerGas:si(n),maxPriorityFeePerGas:si(r)}}}function Kw(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=at(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=Ct(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=en(t[i],`request.${i}`));return t.accessList&&(e.accessList=t0(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>_N(i)?at(i):Object.assign({},i))),e}var Hu;class I_e{constructor(e,n){Ne(this,"provider");Ne(this,"number");Ne(this,"hash");Ne(this,"timestamp");Ne(this,"parentHash");Ne(this,"parentBeaconBlockRoot");Ne(this,"nonce");Ne(this,"difficulty");Ne(this,"gasLimit");Ne(this,"gasUsed");Ne(this,"stateRoot");Ne(this,"receiptsRoot");Ne(this,"blobGasUsed");Ne(this,"excessBlobGas");Ne(this,"miner");Ne(this,"prevRandao");Ne(this,"extraData");Ne(this,"baseFeePerGas");Fe(this,Hu);me(this,Hu,e.transactions.map(r=>typeof r!="string"?new Ww(r,n):r)),Bt(this,{provider:n,hash:uy(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:uy(e.prevRandao),extraData:e.extraData,baseFeePerGas:uy(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return re(this,Hu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=re(this,Hu).slice();return e.length===0?[]:(Xe(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:c,number:d,parentHash:h,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:v,timestamp:x,transactions:b}=this;return{_type:"Block",baseFeePerGas:si(e),difficulty:si(n),extraData:r,gasLimit:si(i),gasUsed:si(s),blobGasUsed:si(this.blobGasUsed),excessBlobGas:si(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:d,parentHash:h,timestamp:x,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:v,transactions:b}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return re(this,Hu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=re(this,Hu)[e];else{const r=e.toLowerCase();for(const i of re(this,Hu))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;xe(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return R_e(this)}}Hu=new WeakMap;class nE{constructor(e,n){Ne(this,"provider");Ne(this,"transactionHash");Ne(this,"blockHash");Ne(this,"blockNumber");Ne(this,"removed");Ne(this,"address");Ne(this,"data");Ne(this,"topics");Ne(this,"index");Ne(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Bt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Xe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Xe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Xe(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return O_e(this)}}var I1;class Pse{constructor(e,n){Ne(this,"provider");Ne(this,"to");Ne(this,"from");Ne(this,"contractAddress");Ne(this,"hash");Ne(this,"index");Ne(this,"blockHash");Ne(this,"blockNumber");Ne(this,"logsBloom");Ne(this,"gasUsed");Ne(this,"blobGasUsed");Ne(this,"cumulativeGasUsed");Ne(this,"gasPrice");Ne(this,"blobGasPrice");Ne(this,"type");Ne(this,"status");Ne(this,"root");Fe(this,I1);me(this,I1,Object.freeze(e.logs.map(i=>new nE(i,n))));let r=Cse;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Bt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return re(this,I1)}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:d,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:si(this.cumulativeGasUsed),from:n,gasPrice:si(this.gasPrice),blobGasUsed:si(this.blobGasUsed),blobGasPrice:si(this.blobGasPrice),gasUsed:si(this.gasUsed),hash:i,index:s,logs:c,logsBloom:l,root:h,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Ise(this)}reorderedEvent(e){return Xe(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),_se(this,e)}}I1=new WeakMap;var ih;const H7=class H7{constructor(e,n){Ne(this,"provider");Ne(this,"blockNumber");Ne(this,"blockHash");Ne(this,"index");Ne(this,"hash");Ne(this,"type");Ne(this,"to");Ne(this,"from");Ne(this,"nonce");Ne(this,"gasLimit");Ne(this,"gasPrice");Ne(this,"maxPriorityFeePerGas");Ne(this,"maxFeePerGas");Ne(this,"maxFeePerBlobGas");Ne(this,"data");Ne(this,"value");Ne(this,"chainId");Ne(this,"signature");Ne(this,"accessList");Ne(this,"blobVersionedHashes");Ne(this,"authorizationList");Fe(this,ih);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,me(this,ih,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:c,signature:d,accessList:h,blobVersionedHashes:m}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:n,blobVersionedHashes:m,chainId:si(this.chainId),data:c,from:a,gasLimit:si(this.gasLimit),gasPrice:si(this.gasPrice),hash:i,maxFeePerGas:si(this.maxFeePerGas),maxPriorityFeePerGas:si(this.maxPriorityFeePerGas),maxFeePerBlobGas:si(this.maxFeePerBlobGas),nonce:l,signature:d,to:o,index:r,type:s,value:si(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Os({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=re(this,ih),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:m,nonce:g}=await Os({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){s=m;return}if(a)return null;const v=await this.getTransaction();if(!(v&&v.blockNumber!=null))for(o===-1&&(o=s-3,o<re(this,ih)&&(o=re(this,ih)));o<=m;){if(a)return null;const x=await this.provider.getBlock(o,!0);if(x==null)return;for(const b of x)if(b===this.hash)return;for(let b=0;b<x.length;b++){const w=await x.getTransaction(b);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const T=await this.provider.getTransactionReceipt(w.hash);if(T==null||m-T.blockNumber+1<r)return;let N="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?N="repriced":w.data==="0x"&&w.from===w.to&&w.value===Cse&&(N="cancelled"),Xe(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:N==="replaced"||N==="cancelled",reason:N,replacement:w.replaceableTransaction(s),hash:w.hash,receipt:T})}}o++}},c=m=>{if(m==null||m.status!==0)return m;Xe(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:m.to,from:m.from,data:""},receipt:m})},d=await this.provider.getTransactionReceipt(this.hash);if(r===0)return c(d);if(d){if(r===1||await d.confirmations()>=r)return c(d)}else if(await l(),r===0)return null;return await new Promise((m,g)=>{const v=[],x=()=>{v.forEach(w=>w())};if(v.push(()=>{a=!0}),i>0){const w=setTimeout(()=>{x(),g(Mr("wait for transaction timeout","TIMEOUT"))},i);v.push(()=>{clearTimeout(w)})}const b=async w=>{if(await w.confirmations()>=r){x();try{m(c(w))}catch(T){g(T)}}};if(v.push(()=>{this.provider.off(this.hash,b)}),this.provider.on(this.hash,b),s>=0){const w=async()=>{try{await l()}catch(T){if(ms(T,"TRANSACTION_REPLACED")){x(),g(T);return}}a||this.provider.once("block",w)};v.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Xe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ise(this)}reorderedEvent(e){return Xe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Xe(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),_se(this,e)}replaceableTransaction(e){xe(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new H7(this,this.provider);return me(n,ih,e),n}};ih=new WeakMap;let Ww=H7;function R_e(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function _se(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Ise(t){return{orphan:"drop-transaction",tx:t}}function O_e(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class oj extends nE{constructor(n,r,i){super(n,n.provider);Ne(this,"interface");Ne(this,"fragment");Ne(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);Bt(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Rse extends nE{constructor(n,r){super(n,n.provider);Ne(this,"error");Bt(this,{error:r})}}var Zy;class M_e extends Pse{constructor(n,r,i){super(i,r);Fe(this,Zy);me(this,Zy,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?re(this,Zy).getEvent(n.topics[0]):null;if(r)try{return new oj(n,re(this,Zy),r)}catch(i){return new Rse(n,i)}return n})}}Zy=new WeakMap;var R1;class aj extends Ww{constructor(n,r,i){super(i,r);Fe(this,R1);me(this,R1,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new M_e(re(this,R1),this.provider,i)}}R1=new WeakMap;class Ose extends Cre{constructor(n,r,i,s){super(n,r,i);Ne(this,"log");Bt(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class L_e extends Ose{constructor(e,n,r,i,s){super(e,n,r,new oj(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Bt(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const LH=BigInt(0);function Mse(t){return t&&typeof t.call=="function"}function Lse(t){return t&&typeof t.estimateGas=="function"}function VN(t){return t&&typeof t.resolveName=="function"}function Dse(t){return t&&typeof t.sendTransaction=="function"}function jse(t){if(t!=null){if(VN(t))return t;if(t.provider)return t.provider}}var O1;class D_e{constructor(e,n,r){Fe(this,O1);Ne(this,"fragment");if(Bt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=Dm(e.runner,"resolveName"),s=VN(i)?i:null;me(this,O1,(async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(d,h)=>d==="address"?Array.isArray(h)?Promise.all(h.map(m=>Gi(m,s))):Gi(h,s):h)));return e.interface.encodeFilterTopics(n,o)})())}getTopicFilter(){return re(this,O1)}}O1=new WeakMap;function Dm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Vp(t){return t==null?null:t.provider||null}async function Bse(t,e){const n=zs.dereference(t,"overrides");xe(typeof n=="object","invalid overrides parameter","overrides",t);const r=Kw(n);return xe(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),xe(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function j_e(t,e,n){const r=Dm(t,"resolveName"),i=VN(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=zs.dereference(l,a),a==="address"?Gi(l,i):l))))}function B_e(t){const e=async function(o){const a=await Bse(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Gi(a.from,jse(t.runner)));const l=t.interface,c=Ct(a.value||LH,"overrides.value")===LH,d=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!d&&!c&&xe(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),xe(l.fallback||d,"cannot send data to receive-only contract","overrides.data",a.data);const h=l.receive||l.fallback&&l.fallback.payable;return xe(h||c,"cannot send value to non-payable fallback","overrides.value",a.value),xe(l.fallback||d,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Dm(t.runner,"call");Xe(Mse(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw F8(c)&&c.data?t.interface.makeError(c.data,l):c}},r=async function(o){const a=t.runner;Xe(Dse(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=Vp(t.runner);return new aj(t.interface,c,l)},i=async function(o){const a=Dm(t.runner,"estimateGas");return Xe(Lse(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return Bt(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function U_e(t,e){const n=function(...c){const d=t.interface.getFunction(e,c);return Xe(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),d},r=async function(...c){const d=n(...c);let h={};if(d.inputs.length+1===c.length&&(h=await Bse(c.pop()),h.from&&(h.from=await Gi(h.from,jse(t.runner)))),d.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const m=await j_e(t.runner,d.inputs,c);return Object.assign({},h,await Os({to:t.getAddress(),data:t.interface.encodeFunctionData(d,m)}))},i=async function(...c){const d=await a(...c);return d.length===1?d[0]:d},s=async function(...c){const d=t.runner;Xe(Dse(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await d.sendTransaction(await r(...c)),m=Vp(t.runner);return new aj(t.interface,m,h)},o=async function(...c){const d=Dm(t.runner,"estimateGas");return Xe(Lse(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await r(...c))},a=async function(...c){const d=Dm(t.runner,"call");Xe(Mse(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await r(...c);let m="0x";try{m=await d.call(h)}catch(v){throw F8(v)&&v.data?t.interface.makeError(v.data,h):v}const g=n(...c);return t.interface.decodeFunctionResult(g,m)},l=async(...c)=>n(...c).constant?await i(...c):await s(...c);return Bt(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=t.interface.getFunction(e);return Xe(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function F_e(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return Xe(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new D_e(t,n(...i),i)};return Bt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return Xe(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const T2=Symbol.for("_ethersInternal_contract"),Use=new WeakMap;function $_e(t,e){Use.set(t[T2],e)}function Jo(t){return Use.get(t[T2])}function z_e(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function lj(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(xr(o,32))return o;const a=t.interface.getEvent(o);return xe(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?xr(e,32)?n=[e]:(r=t.interface.getEvent(e),xe(r,"unknown fragment","event",e),n=[r.topicHash]):z_e(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):xe(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Jb(t,e){const{subs:n}=Jo(t);return n.get((await lj(t,e)).tag)||null}async function DH(t,e,n){const r=Vp(t.runner);Xe(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await lj(t,n),{addr:a,subs:l}=Jo(t);let c=l.get(s);if(!c){const h={address:a||t,topics:o},m=b=>{let w=i;if(w==null)try{w=t.interface.getEvent(b.topics[0])}catch{}if(w){const T=w,N=i?t.interface.decodeEventLog(i,b.data,b.topics):[];bM(t,n,N,O=>new L_e(t,O,n,T,b))}else bM(t,n,[],T=>new Ose(t,T,n,b))};let g=[];c={tag:s,listeners:[],start:()=>{g.length||g.push(r.on(h,m))},stop:async()=>{if(g.length==0)return;let b=g;g=[],await Promise.all(b),r.off(h,m)}},l.set(s,c)}return c}let vM=Promise.resolve();async function V_e(t,e,n,r){await vM;const i=await Jb(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(t,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Jo(t).subs.delete(i.tag)),s>0}async function bM(t,e,n,r){try{await vM}catch{}const i=V_e(t,e,n,r);return vM=i,await i}const gA=["then"];var Qee;Qee=T2;const Sw=class Sw{constructor(e,n,r,i){Ne(this,"target");Ne(this,"interface");Ne(this,"runner");Ne(this,"filters");Ne(this,Qee);Ne(this,"fallback");xe(typeof e=="string"||Vie(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=xM.from(n);Bt(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,T2,{value:{}});let o,a=null,l=null;if(i){const h=Vp(r);l=new aj(this.interface,h,i)}let c=new Map;if(typeof e=="string")if(xr(e))a=e,o=Promise.resolve(e);else{const h=Dm(r,"resolveName");if(!VN(h))throw Mr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(e).then(m=>{if(m==null)throw Mr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Jo(this).addr=m,m})}else o=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Jo(this).addr=h,h});$_e(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const d=new Proxy({},{get:(h,m,g)=>{if(typeof m=="symbol"||gA.indexOf(m)>=0)return Reflect.get(h,m,g);try{return this.getEvent(m)}catch(v){if(!ms(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(h,m)=>gA.indexOf(m)>=0?Reflect.has(h,m):Reflect.has(h,m)||this.interface.hasEvent(String(m))});return Bt(this,{filters:d}),Bt(this,{fallback:s.receive||s.fallback?B_e(this):null}),new Proxy(this,{get:(h,m,g)=>{if(typeof m=="symbol"||m in h||gA.indexOf(m)>=0)return Reflect.get(h,m,g);try{return h.getFunction(m)}catch(v){if(!ms(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(h,m)=>typeof m=="symbol"||m in h||gA.indexOf(m)>=0?Reflect.has(h,m):h.interface.hasFunction(m)})}connect(e){return new Sw(this.target,this.interface,e)}attach(e){return new Sw(e,this.interface,this.runner)}async getAddress(){return await Jo(this).addrPromise}async getDeployedCode(){const e=Vp(this.runner);Xe(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Vp(this.runner);return Xe(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Jo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),U_e(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),F_e(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Jo(this),o=i||await s,{fragment:a,topics:l}=await lj(this,e),c={address:o,topics:l,fromBlock:n,toBlock:r},d=Vp(this.runner);return Xe(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(c)).map(h=>{let m=a;if(m==null)try{m=this.interface.getEvent(h.topics[0])}catch{}if(m)try{return new oj(h,this.interface,m)}catch(g){return new Rse(h,g)}return new nE(h,d)})}async on(e,n){const r=await DH(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await DH(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await bM(this,e,n,null)}async listenerCount(e){if(e){const i=await Jb(this,e);return i?i.listeners.length:0}const{subs:n}=Jo(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Jb(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Jo(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await Jb(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Jo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Jb(this,e);if(!n)return this;n.stop(),Jo(this).subs.delete(n.tag)}else{const{subs:n}=Jo(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends Sw{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let wM=Sw;function H_e(){return wM}class dy extends H_e(){}function MR(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):xe(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class q_e{constructor(e){Ne(this,"name");Bt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Fse=new RegExp("^(ipfs)://(.*)$","i"),jH=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Fse,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var sh,lm,oh,Pg,pN,$se;const Zg=class Zg{constructor(e,n,r){Fe(this,oh);Ne(this,"provider");Ne(this,"address");Ne(this,"name");Fe(this,sh);Fe(this,lm);Bt(this,{provider:e,address:n,name:r}),me(this,sh,null),me(this,lm,new dy(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return re(this,sh)==null&&me(this,sh,(async()=>{try{return await re(this,lm).supportsInterface("0x9061b923")}catch(e){if(ms(e,"CALL_EXCEPTION"))return!1;throw me(this,sh,null),e}})()),await re(this,sh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await rt(this,oh,Pg).call(this,"addr(bytes32)");return s==null||s===Fw?null:s}catch(s){if(ms(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await rt(this,oh,Pg).call(this,"addr(bytes32,uint)",[s]);if(xr(o,20))return xn(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof q_e&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await rt(this,oh,Pg).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;Xe(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await rt(this,oh,Pg).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await rt(this,oh,Pg).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${Nre("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Xe(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<jH.length;r++){const i=n.match(jH[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=MR(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],d=new dy(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const x=await d.ownerOf(c);if(a!==x)return e.push({type:"!owner",value:x}),{url:null,linkage:e};e.push({type:"owner",value:x})}else if(s==="erc1155"){const x=await d.balanceOf(a,c);if(!x)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:x.toString()})}let h=await d[o](c);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),s==="erc1155"&&(h=h.replace("{id}",wd(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=MR(h)),e.push({type:"metadata-url",value:h});let m={};const g=await new Ed(h).send();g.assertOk();try{m=g.bodyJson}catch{try{e.push({type:"!metadata",value:g.bodyText})}catch{const w=g.body;return w&&e.push({type:"!metadata",value:at(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!m)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(m)});let v=m.image;if(typeof v!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(Fse)==null)return e.push({type:"!imageUrl-ipfs",value:v}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:v}),v=MR(v)}return e.push({type:"url",value:v}),{linkage:e,url:v}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Xe(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await rt(i=Zg,pN,$se).call(i,e,r);if(s!=null){const o=new Zg(e,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};sh=new WeakMap,lm=new WeakMap,oh=new WeakSet,Pg=async function(e,n){n=(n||[]).slice();const r=re(this,lm).interface;n.unshift(gM(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),Xe(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[o_e(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await re(this,lm)[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!ms(s,"CALL_EXCEPTION"))throw s}return null},pN=new WeakSet,$se=async function(e,n){const r=await Zg.getEnsAddress(e);try{const s=await new dy(r,["function resolver(bytes32) view returns (address)"],e).resolver(gM(n),{enableCcipRead:!0});return s===Fw?null:s}catch(i){throw i}return null},Fe(Zg,pN);let k2=Zg;const BH=BigInt(0);function Pn(t,e){return(function(n){return n==null?e:t(n)})}function Yw(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function rE(t,e){return(n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Xe(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function G_e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}xe(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Nx(t){return xe(xr(t,!0),"invalid data","value",t),t}function hs(t){return xe(xr(t,32),"invalid hash","value",t),t}const K_e=rE({address:xn,blockHash:hs,blockNumber:en,data:Nx,index:en,removed:Pn(G_e,!1),topics:Yw(hs),transactionHash:hs,transactionIndex:en},{index:["logIndex"]});function W_e(t){return K_e(t)}const Y_e=rE({hash:Pn(hs),parentHash:hs,parentBeaconBlockRoot:Pn(hs,null),number:en,timestamp:en,nonce:Pn(Nx),difficulty:Ct,gasLimit:Ct,gasUsed:Ct,stateRoot:Pn(hs,null),receiptsRoot:Pn(hs,null),blobGasUsed:Pn(Ct,null),excessBlobGas:Pn(Ct,null),miner:Pn(xn),prevRandao:Pn(hs,null),extraData:Nx,baseFeePerGas:Pn(Ct)},{prevRandao:["mixHash"]});function J_e(t){const e=Y_e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:zse(n)),e}const X_e=rE({transactionIndex:en,blockNumber:en,transactionHash:hs,address:xn,topics:Yw(hs),data:Nx,index:en,blockHash:hs},{index:["logIndex"]});function Q_e(t){return X_e(t)}const Z_e=rE({to:Pn(xn,null),from:Pn(xn,null),contractAddress:Pn(xn,null),index:en,root:Pn(at),gasUsed:Ct,blobGasUsed:Pn(Ct,null),logsBloom:Pn(Nx),blockHash:hs,hash:hs,logs:Yw(Q_e),blockNumber:en,cumulativeGasUsed:Ct,effectiveGasPrice:Pn(Ct),blobGasPrice:Pn(Ct,null),status:Pn(en),type:Pn(en,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function eIe(t){return Z_e(t)}function zse(t){t.to&&Ct(t.to)===BH&&(t.to="0x0000000000000000000000000000000000000000");const e=rE({hash:hs,index:Pn(en,void 0),type:n=>n==="0x"||n==null?0:en(n),accessList:Pn(t0,null),blobVersionedHashes:Pn(Yw(hs,!0),null),authorizationList:Pn(Yw(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:xn(n.address),chainId:Ct(n.chainId),nonce:Ct(n.nonce),signature:lo.from(r)}},!1),null),blockHash:Pn(hs,null),blockNumber:Pn(en,null),transactionIndex:Pn(en,null),from:xn,gasPrice:Pn(Ct),maxPriorityFeePerGas:Pn(Ct),maxFeePerGas:Pn(Ct),maxFeePerBlobGas:Pn(Ct,null),gasLimit:Ct,to:Pn(xn,null),value:Ct,nonce:en,data:Nx,creates:Pn(xn,null),chainId:Pn(Ct,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=VCe(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=lo.from(t.signature):e.signature=lo.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ct(e.blockHash)===BH&&(e.blockHash=null),e}const tIe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class rv{constructor(e){Ne(this,"name");Bt(this,{name:e})}clone(){return new rv(this.name)}}class HN extends rv{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);Ne(this,"effectiveBlock");Ne(this,"txBase");Ne(this,"txCreate");Ne(this,"txDataZero");Ne(this,"txDataNonzero");Ne(this,"txAccessListStorageKey");Ne(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),xe(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Bt(this,i)}clone(){return new HN(this.effectiveBlock,this)}}class qN extends rv{constructor(n,r){super("org.ethers.plugins.network.Ens");Ne(this,"address");Ne(this,"targetNetwork");Bt(this,{address:n||tIe,targetNetwork:r??1})}clone(){return new qN(this.address,this.targetNetwork)}}var cm;const q7=class q7 extends rv{constructor(n){super("org.ethers.plugins.network.FeeData");Fe(this,cm);me(this,cm,n)}get feeDataFunc(){return re(this,cm)}async getFeeData(n){return await re(this,cm).call(this,n)}clone(){return new q7(re(this,cm))}};cm=new WeakMap;let UH=q7;var M1,L1;class nIe extends rv{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Fe(this,M1);Fe(this,L1);me(this,M1,n),me(this,L1,r)}get url(){return re(this,M1)}get processFunc(){return re(this,L1)}clone(){return this}}M1=new WeakMap,L1=new WeakMap;const LR=new Map;var ex,tx,ah;const ey=class ey{constructor(e,n){Fe(this,ex);Fe(this,tx);Fe(this,ah);me(this,ex,e),me(this,tx,Ct(n)),me(this,ah,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return re(this,ex)}set name(e){me(this,ex,e)}get chainId(){return re(this,tx)}set chainId(e){me(this,tx,Ct(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ct(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ct(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ct(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(re(this,ah).values())}attachPlugin(e){if(re(this,ah).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return re(this,ah).set(e.name,e.clone()),this}getPlugin(e){return re(this,ah).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new ey(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new HN;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=t0(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(rIe(),e==null)return ey.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=LR.get(e);if(n)return n();if(typeof e=="bigint")return new ey("unknown",e);xe(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){xe(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new ey(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new qN(e.ensAddress,e.ensNetwork)),n}xe(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=LR.get(e);r&&xe(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),LR.set(e,n)}};ex=new WeakMap,tx=new WeakMap,ah=new WeakMap;let _c=ey;function FH(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function $H(t){return new nIe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:FH(a.maxFee,9),maxPriorityFeePerGas:FH(a.maxPriorityFee,9)}}catch(s){Xe(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let zH=!1;function rIe(){if(zH)return;zH=!0;function t(e,n,r){const i=function(){const s=new _c(e,n);return r.ensNetwork!=null&&s.attachPlugin(new qN(null,r.ensNetwork)),s.attachPlugin(new HN),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};_c.register(e,i),_c.register(n,i),r.altNames&&r.altNames.forEach(s=>{_c.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("filecoin",314,{}),t("filecoin-calibration",314159,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[$H("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[$H("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function EM(t){return JSON.parse(JSON.stringify(t))}var qu,za,lh,bc,nx,OT;class iIe{constructor(e){Fe(this,nx);Fe(this,qu);Fe(this,za);Fe(this,lh);Fe(this,bc);me(this,qu,e),me(this,za,null),me(this,lh,4e3),me(this,bc,-2)}get pollingInterval(){return re(this,lh)}set pollingInterval(e){me(this,lh,e)}start(){re(this,za)||(me(this,za,re(this,qu)._setTimeout(rt(this,nx,OT).bind(this),re(this,lh))),rt(this,nx,OT).call(this))}stop(){re(this,za)&&(re(this,qu)._clearTimeout(re(this,za)),me(this,za,null))}pause(e){this.stop(),e&&me(this,bc,-2)}resume(){this.start()}}qu=new WeakMap,za=new WeakMap,lh=new WeakMap,bc=new WeakMap,nx=new WeakSet,OT=async function(){try{const e=await re(this,qu).getBlockNumber();if(re(this,bc)===-2){me(this,bc,e);return}if(e!==re(this,bc)){for(let n=re(this,bc)+1;n<=e;n++){if(re(this,za)==null)return;await re(this,qu).emit("block",n)}me(this,bc,e)}}catch{}re(this,za)!=null&&me(this,za,re(this,qu)._setTimeout(rt(this,nx,OT).bind(this),re(this,lh)))};var um,dm,ch;class cj{constructor(e){Fe(this,um);Fe(this,dm);Fe(this,ch);me(this,um,e),me(this,ch,!1),me(this,dm,n=>{this._poll(n,re(this,um))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){re(this,ch)||(me(this,ch,!0),re(this,dm).call(this,-2),re(this,um).on("block",re(this,dm)))}stop(){re(this,ch)&&(me(this,ch,!1),re(this,um).off("block",re(this,dm)))}pause(e){this.stop()}resume(){this.start()}}um=new WeakMap,dm=new WeakMap,ch=new WeakMap;var rx,Gu;class sIe extends cj{constructor(n,r){super(n);Fe(this,rx);Fe(this,Gu);me(this,rx,r),me(this,Gu,-2)}pause(n){n&&me(this,Gu,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(re(this,rx));i!=null&&(re(this,Gu)===-2?me(this,Gu,i.number):i.number>re(this,Gu)&&(r.emit(re(this,rx),i.number),me(this,Gu,i.number)))}}rx=new WeakMap,Gu=new WeakMap;var mN;class oIe extends cj{constructor(n,r){super(n);Fe(this,mN);me(this,mN,EM(r))}async _poll(n,r){throw new Error("@TODO")}}mN=new WeakMap;var ix;class aIe extends cj{constructor(n,r){super(n);Fe(this,ix);me(this,ix,r)}async _poll(n,r){const i=await r.getTransactionReceipt(re(this,ix));i&&r.emit(re(this,ix),i)}}ix=new WeakMap;var Ku,sx,ox,uh,Va,gN,Vse;class uj{constructor(e,n){Fe(this,gN);Fe(this,Ku);Fe(this,sx);Fe(this,ox);Fe(this,uh);Fe(this,Va);me(this,Ku,e),me(this,sx,EM(n)),me(this,ox,rt(this,gN,Vse).bind(this)),me(this,uh,!1),me(this,Va,-2)}start(){re(this,uh)||(me(this,uh,!0),re(this,Va)===-2&&re(this,Ku).getBlockNumber().then(e=>{me(this,Va,e)}),re(this,Ku).on("block",re(this,ox)))}stop(){re(this,uh)&&(me(this,uh,!1),re(this,Ku).off("block",re(this,ox)))}pause(e){this.stop(),e&&me(this,Va,-2)}resume(){this.start()}}Ku=new WeakMap,sx=new WeakMap,ox=new WeakMap,uh=new WeakMap,Va=new WeakMap,gN=new WeakSet,Vse=async function(e){if(re(this,Va)===-2)return;const n=EM(re(this,sx));n.fromBlock=re(this,Va)+1,n.toBlock=e;const r=await re(this,Ku).getLogs(n);if(r.length===0){re(this,Va)<e-60&&me(this,Va,e-60);return}for(const i of r)re(this,Ku).emit(re(this,sx),i),me(this,Va,i.blockNumber)};const lIe=BigInt(2),cIe=10;function yA(t){return t&&typeof t.then=="function"}function MT(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class Hse{constructor(e){Ne(this,"name");Bt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function uIe(t){return JSON.parse(JSON.stringify(t))}function SM(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function DR(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(xr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:MT("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:MT("orphan",n),filter:uIe(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?SM(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{xr(a)?i.push(a):s.push((async()=>{i.push(await Gi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=SM(i.map(a=>a.toLowerCase()))}return{filter:r,tag:MT("event",r),type:"event"}}xe(!1,"unknown ProviderEvent","event",t)}function jR(){return new Date().getTime()}const dIe={cacheTimeout:250,pollingInterval:4e3};var Ps,dh,_s,ax,ea,fm,fh,Wu,D1,Ha,lx,cx,vn,Wo,AM,TM,Xb,kM,Qb,LT;class fIe{constructor(e,n){Fe(this,vn);Fe(this,Ps);Fe(this,dh);Fe(this,_s);Fe(this,ax);Fe(this,ea);Fe(this,fm);Fe(this,fh);Fe(this,Wu);Fe(this,D1);Fe(this,Ha);Fe(this,lx);Fe(this,cx);if(me(this,cx,Object.assign({},dIe,n||{})),e==="any")me(this,fm,!0),me(this,ea,null);else if(e){const r=_c.from(e);me(this,fm,!1),me(this,ea,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else me(this,fm,!1),me(this,ea,null);me(this,Wu,-1),me(this,fh,new Map),me(this,Ps,new Map),me(this,dh,new Map),me(this,_s,null),me(this,ax,!1),me(this,D1,1),me(this,Ha,new Map),me(this,lx,!1)}get pollingInterval(){return re(this,cx).pollingInterval}get provider(){return this}get plugins(){return Array.from(re(this,dh).values())}attachPlugin(e){if(re(this,dh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return re(this,dh).set(e.name,e.connect(this)),this}getPlugin(e){return re(this,dh).get(e)||null}get disableCcipRead(){return re(this,lx)}set disableCcipRead(e){me(this,lx,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),d=new Ed(c);l.indexOf("{data}")===-1&&(d.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:a,urls:r});let h="unknown error",m;try{m=await d.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:g}});continue}try{const g=m.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:g}),g.data;g.message&&(h=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:g})}catch{}Xe(m.statusCode<400||m.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:h}}),o.push(h)}Xe(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new I_e(J_e(e),this)}_wrapLog(e,n){return new nE(W_e(e),this)}_wrapTransactionReceipt(e,n){return new Pse(eIe(e),this)}_wrapTransactionResponse(e,n){return new Ww(zse(e),this)}_detectNetwork(){Xe(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Xe(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=en(await rt(this,vn,Wo).call(this,{method:"getBlockNumber"}),"%response");return re(this,Wu)>=0&&me(this,Wu,e),e}_getAddress(e){return Gi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(xr(e))return xr(e,32)?e:Ol(e);if(typeof e=="bigint"&&(e=en(e,"blockTag")),typeof e=="number")return e>=0?Ol(e):re(this,Wu)>=0?Ol(re(this,Wu)+e):this.getBlockNumber().then(n=>Ol(n+e));xe(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?SM(l.map(c=>c.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(l,c,d)=>{let h;switch(l.length){case 0:break;case 1:h=l[0];break;default:l.sort(),h=l}if(r&&(c!=null||d!=null))throw new Error("invalid filter");const m={};return h&&(m.address=h),n.length&&(m.topics=n),c&&(m.fromBlock=c),d&&(m.toBlock=d),r&&(m.blockHash=r),m};let s=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)s.push(this._getAddress(l));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(e){const n=Kw(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=Gi(n[i],this);yA(s)?r.push((async function(){n[i]=await s})()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);yA(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(re(this,ea)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw re(this,ea)===i&&me(this,ea,null),s}})();return me(this,ea,i),(await i).clone()}const e=re(this,ea),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(re(this,fm)?(this.emit("network",r,n),re(this,ea)===e&&me(this,ea,Promise.resolve(r))):Xe(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await Os({_block:rt(this,vn,kM).call(this,"latest",!1),gasPrice:(async()=>{try{const d=await rt(this,vn,Wo).call(this,{method:"getGasPrice"});return Ct(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await rt(this,vn,Wo).call(this,{method:"getPriorityFee"});return Ct(d,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(i,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*lIe+l),new MH(s,a,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Ed(r.url),s=await r.processFunc(n,this,i);return new MH(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return yA(n)&&(n=await n),Ct(await rt(this,vn,Wo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await Os({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await rt(this,vn,TM).call(this,rt(this,vn,AM).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ct(await rt(this,vn,Xb).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return en(await rt(this,vn,Xb).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return at(await rt(this,vn,Xb).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const i=Ct(n,"position");return at(await rt(this,vn,Xb).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await Os({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=tj.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:i}=await Os({network:this.getNetwork(),params:rt(this,vn,kM).call(this,e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await Os({network:this.getNetwork(),params:rt(this,vn,Wo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Os({network:this.getNetwork(),params:rt(this,vn,Wo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await rt(this,vn,Wo).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Os({network:this.getNetwork(),result:rt(this,vn,Wo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:at(n)}async getLogs(e){let n=this._getFilter(e);yA(n)&&(n=await n);const{network:r,params:i}=await Os({network:this.getNetwork(),params:rt(this,vn,Wo).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){Xe(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await k2.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=xn(e);const n=gM(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await k2.getEnsAddress(this),s=await new dy(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===Fw)return null;const a=await new dy(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(ms(r,"BAD_DATA")&&r.value==="0x"||ms(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const l=(async c=>{try{const d=await this.getTransactionReceipt(e);if(d!=null&&c-d.blockNumber+1>=i){s(d),a&&(clearTimeout(a),a=null);return}}catch(d){console.log("EEE",d)}this.once("block",l)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Mr("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){Xe(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=re(this,Ha).get(e);n&&(n.timer&&clearTimeout(n.timer),re(this,Ha).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=xb(this,D1)._++,i=()=>{re(this,Ha).delete(r),e()};if(this.paused)re(this,Ha).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);re(this,Ha).set(r,{timer:s,func:i,time:jR()})}return r}_forEachSubscriber(e){for(const n of re(this,Ps).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Hse(e.type);case"block":{const n=new iIe(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new sIe(this,e.type);case"event":return new uj(this,e.filter);case"transaction":return new aIe(this,e.hash);case"orphan":return new oIe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of re(this,Ps).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),re(this,_s)!=null&&n.pause(re(this,_s));break}}async on(e,n){const r=await rt(this,vn,LT).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,re(this,_s)!=null&&r.subscriber.pause(re(this,_s))),this}async once(e,n){const r=await rt(this,vn,LT).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,re(this,_s)!=null&&r.subscriber.pause(re(this,_s))),this}async emit(e,...n){const r=await rt(this,vn,Qb).call(this,e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new Cre(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),re(this,Ps).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await rt(this,vn,Qb).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of re(this,Ps).values())n+=r.length;return n}async listeners(e){if(e){const r=await rt(this,vn,Qb).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of re(this,Ps).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await rt(this,vn,Qb).call(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),re(this,Ps).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await rt(this,vn,LT).call(this,e);r&&i.stop(),re(this,Ps).delete(n)}else for(const[n,{started:r,subscriber:i}]of re(this,Ps))r&&i.stop(),re(this,Ps).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return re(this,ax)}destroy(){this.removeAllListeners();for(const e of re(this,Ha).keys())this._clearTimeout(e);me(this,ax,!0)}get paused(){return re(this,_s)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(me(this,Wu,-1),re(this,_s)!=null){if(re(this,_s)==!!e)return;Xe(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),me(this,_s,!!e);for(const n of re(this,Ha).values())n.timer&&clearTimeout(n.timer),n.time=jR()-n.time}resume(){if(re(this,_s)!=null){this._forEachSubscriber(e=>e.resume()),me(this,_s,null);for(const e of re(this,Ha).values()){let n=e.time;n<0&&(n=0),e.time=jR(),setTimeout(e.func,n)}}}}Ps=new WeakMap,dh=new WeakMap,_s=new WeakMap,ax=new WeakMap,ea=new WeakMap,fm=new WeakMap,fh=new WeakMap,Wu=new WeakMap,D1=new WeakMap,Ha=new WeakMap,lx=new WeakMap,cx=new WeakMap,vn=new WeakSet,Wo=async function(e){const n=re(this,cx).cacheTimeout;if(n<0)return await this._perform(e);const r=MT(e.method,e);let i=re(this,fh).get(r);return i||(i=this._perform(e),re(this,fh).set(r,i),setTimeout(()=>{re(this,fh).get(r)===i&&re(this,fh).delete(r)},n)),await i},AM=async function(e,n,r){Xe(r<cIe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=Kw(e);try{return at(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&F8(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&yr(s.data,0,4)==="0x556f1830"){const o=s.data,a=await Gi(i.to,this);let l;try{l=yIe(yr(s.data,4))}catch(h){Xe(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}Xe(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(i,l.calldata,l.urls);Xe(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const d={to:a,data:On([l.selector,gIe([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const h=await rt(this,vn,AM).call(this,d,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:h}),h}}throw s}},TM=async function(e){const{value:n}=await Os({network:this.getNetwork(),value:e});return n},Xb=async function(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await rt(this,vn,TM).call(this,rt(this,vn,Wo).call(this,Object.assign(e,{address:i,blockTag:s})))},kM=async function(e,n){if(xr(e,32))return await rt(this,vn,Wo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await rt(this,vn,Wo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Qb=async function(e,n){let r=await DR(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await DR({orphan:"drop-log",log:n[0]},this)),re(this,Ps).get(r.tag)||null},LT=async function(e){const n=await DR(e,this),r=n.tag;let i=re(this,Ps).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},re(this,Ps).set(r,i)),i};function hIe(t,e){try{const n=NM(t,e);if(n)return x2(n)}catch{}return null}function NM(t,e){if(t==="0x")return null;try{const n=en(yr(t,e,e+32)),r=en(yr(t,n,n+32));return yr(t,n+32,n+32+r)}catch{}return null}function VH(t){const e=Ur(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function pIe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const mIe=new Uint8Array([]);function gIe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(mIe),n+=32;for(let r=0;r<t.length;r++){const i=bt(t[r]);e[r]=VH(n),e.push(VH(i.length)),e.push(pIe(i)),n+=32+Math.ceil(i.length/32)*32}return On(e)}const HH="0x0000000000000000000000000000000000000000000000000000000000000000";function yIe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Xe(oy(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=yr(t,0,32);Xe(yr(n,0,12)===yr(HH,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=yr(n,12);try{const r=[],i=en(yr(t,32,64)),s=en(yr(t,i,i+32)),o=yr(t,i+32);for(let a=0;a<s;a++){const l=hIe(o,a*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{Xe(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=NM(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{Xe(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Xe(yr(t,100,128)===yr(HH,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=yr(t,96,100);try{const r=NM(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{Xe(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function mp(t,e){if(t.provider)return t.provider;Xe(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function qH(t,e){let n=Kw(e);if(n.to!=null&&(n.to=Gi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Gi(r,t)]).then(([i,s])=>(xe(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await Os(n)}class dj{constructor(e){Ne(this,"provider");Bt(this,{provider:e||null})}async getNonce(e){return mp(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await qH(this,e)}async populateTransaction(e){const n=mp(this,"populateTransaction"),r=await qH(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=Ct(r.chainId);xe(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?xe(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&xe(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Xe(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Xe(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Xe(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Os(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await mp(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return mp(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return mp(this,"call").call(await this.populateCall(e))}async resolveName(e){return await mp(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=mp(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=tj.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){Xe(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var ux,DT;const G7=class G7 extends dj{constructor(n,r){super(r);Fe(this,ux);Ne(this,"address");Bt(this,{address:n})}async getAddress(){return this.address}connect(n){return new G7(this.address,n)}async signTransaction(n){rt(this,ux,DT).call(this,"transactions","signTransaction")}async signMessage(n){rt(this,ux,DT).call(this,"messages","signMessage")}async signTypedData(n,r,i){rt(this,ux,DT).call(this,"typed-data","signTypedData")}};ux=new WeakSet,DT=function(n,r){Xe(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:r})};let CM=G7;function xIe(t){return JSON.parse(JSON.stringify(t))}var Js,wc,hm,hh,pm,dx,Mh,PM,_M;class qse{constructor(e){Fe(this,Mh);Fe(this,Js);Fe(this,wc);Fe(this,hm);Fe(this,hh);Fe(this,pm);Fe(this,dx);me(this,Js,e),me(this,wc,null),me(this,hm,rt(this,Mh,PM).bind(this)),me(this,hh,!1),me(this,pm,null),me(this,dx,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){re(this,hh)||(me(this,hh,!0),rt(this,Mh,PM).call(this,-2))}stop(){re(this,hh)&&(me(this,hh,!1),me(this,dx,!0),rt(this,Mh,_M).call(this),re(this,Js).off("block",re(this,hm)))}pause(e){e&&rt(this,Mh,_M).call(this),re(this,Js).off("block",re(this,hm))}resume(){this.start()}}Js=new WeakMap,wc=new WeakMap,hm=new WeakMap,hh=new WeakMap,pm=new WeakMap,dx=new WeakMap,Mh=new WeakSet,PM=async function(e){try{re(this,wc)==null&&me(this,wc,this._subscribe(re(this,Js)));let n=null;try{n=await re(this,wc)}catch(s){if(!ms(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){me(this,wc,null),re(this,Js)._recoverSubscriber(this,this._recover(re(this,Js)));return}const r=await re(this,Js).getNetwork();if(re(this,pm)||me(this,pm,r),re(this,pm).chainId!==r.chainId)throw new Error("chaid changed");if(re(this,dx))return;const i=await re(this,Js).send("eth_getFilterChanges",[n]);await this._emitResults(re(this,Js),i)}catch(n){console.log("@TODO",n)}re(this,Js).once("block",re(this,hm))},_M=function(){const e=re(this,wc);e&&(me(this,wc,null),e.then(n=>{re(this,Js).destroyed||re(this,Js).send("eth_uninstallFilter",[n])}))};var mm;class vIe extends qse{constructor(n,r){super(n);Fe(this,mm);me(this,mm,xIe(r))}_recover(n){return new uj(n,re(this,mm))}async _subscribe(n){return await n.send("eth_newFilter",[re(this,mm)])}async _emitResults(n,r){for(const i of r)n.emit(re(this,mm),n._wrapLog(i,n._network))}}mm=new WeakMap;class bIe extends qse{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const wIe="bigint,boolean,function,number,string,symbol".split(/,/g);function jT(t){if(t==null||wIe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(jT);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function EIe(t){return new Promise(e=>{setTimeout(e,t)})}function rg(t){return t&&t.toLowerCase()}function GH(t){return t&&typeof t.pollingInterval=="number"}const Gse={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class BR extends dj{constructor(n,r){super(n);Ne(this,"address");r=xn(r),Bt(this,{address:r})}connect(n){Xe(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=jT(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await Gi(o,this.provider);xe(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await Gi(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const c=async()=>{try{const d=await this.provider.getTransaction(i);if(d!=null){s(d.replaceableTransaction(r));return}}catch(d){if(ms(d,"CANCELLED")||ms(d,"BAD_DATA")||ms(d,"NETWORK_ERROR")||ms(d,"UNSUPPORTED_OPERATION")){d.info==null&&(d.info={}),d.info.sendTransactionHash=i,o(d);return}if(ms(d,"INVALID_ARGUMENT")&&(l++,d.info==null&&(d.info={}),d.info.sendTransactionHash=i,l>10)){o(d);return}this.provider.emit("error",Mr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:d}))}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(n){const r=jT(n);if(r.from){const s=await Gi(r.from,this.provider);xe(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?vi(n):n;return await this.provider.send("personal_sign",[at(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=jT(i),o=await Om.resolveNames(n,r,s,async a=>{const l=await Gi(a);return xe(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Om.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?vi(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),at(r)])}}var gm,fx,Yu,Ec,Il,qa,Ao,j1,IM;class SIe extends fIe{constructor(n,r){super(n,r);Fe(this,j1);Fe(this,gm);Fe(this,fx);Fe(this,Yu);Fe(this,Ec);Fe(this,Il);Fe(this,qa);Fe(this,Ao);me(this,fx,1),me(this,gm,Object.assign({},Gse,r||{})),me(this,Yu,[]),me(this,Ec,null),me(this,qa,null),me(this,Ao,null);{let s=null;const o=new Promise(a=>{s=a});me(this,Il,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(xe(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&me(this,qa,_c.from(n))):i&&(xe(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),me(this,qa,i))}_getOption(n){return re(this,gm)[n]}get _network(){return Xe(re(this,qa),"network is not available yet","NETWORK_ERROR"),re(this,qa)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&Ct(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(re(this,qa))return re(this,qa)}else return n;return re(this,Ao)?await re(this,Ao):this.ready?(me(this,Ao,(async()=>{try{const r=_c.from(Ct(await this.send("eth_chainId",[])));return me(this,Ao,null),r}catch(r){throw me(this,Ao,null),r}})()),await re(this,Ao)):(me(this,Ao,(async()=>{const r={id:xb(this,fx)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],me(this,Ao,null)}catch(s){throw me(this,Ao,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return _c.from(Ct(i.result));throw this.getRpcError(r,i)})()),await re(this,Ao))}_start(){re(this,Il)==null||re(this,Il).resolve==null||(re(this,Il).resolve(),me(this,Il,null),(async()=>{for(;re(this,qa)==null&&!this.destroyed;)try{me(this,qa,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Mr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await EIe(1e3)}rt(this,j1,IM).call(this)})())}async _waitUntilReady(){if(re(this,Il)!=null)return await re(this,Il).promise}_getSubscriber(n){return n.type==="pending"?new bIe(this):n.type==="event"?this._getOption("polling")?new uj(this,n.filter):new vIe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Hse("orphan"):super._getSubscriber(n)}get ready(){return re(this,Il)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Ol(Ct(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=at(n[i]))}),n.accessList&&(r.accessList=t0(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(i=>{const s=Kie(i);return{address:s.address,nonce:Ol(s.nonce),chainId:Ol(s.chainId),yParity:Ol(s.signature.yParity),r:Ol(s.signature.r),s:Ol(s.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[rg(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[rg(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[rg(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[rg(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(rg):n.filter.address=rg(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return Mr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}});if(l.match(/nonce/i)&&l.match(/too low/i))return Mr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=RM(s),c=Gw.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return c.info={error:s,payload:n},c}const o=JSON.stringify(kIe(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Mr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Mr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Mr("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Mr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return Mr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?Mr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):Mr("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Mr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=xb(this,fx)._++,s=new Promise((o,a)=>{re(this,Yu).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return rt(this,j1,IM).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new BR(this,s[n])}const{accounts:i}=await Os({network:this.getNetwork(),accounts:r});n=xn(n);for(const s of i)if(xn(s)===n)return new BR(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new BR(this,r))}destroy(){re(this,Ec)&&(clearTimeout(re(this,Ec)),me(this,Ec,null));for(const{payload:n,reject:r}of re(this,Yu))r(Mr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));me(this,Yu,[]),super.destroy()}}gm=new WeakMap,fx=new WeakMap,Yu=new WeakMap,Ec=new WeakMap,Il=new WeakMap,qa=new WeakMap,Ao=new WeakMap,j1=new WeakSet,IM=function(){if(re(this,Ec))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");me(this,Ec,setTimeout(()=>{me(this,Ec,null);const r=re(this,Yu);for(me(this,Yu,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==re(this,gm).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>re(this,gm).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:c}of i){if(this.destroyed){l(Mr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const d=o.filter(h=>h.id===c.id)[0];if(d==null){const h=Mr("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",h),l(h);continue}if("error"in d){l(this.getRpcError(c,d));continue}a(d.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var ph;class AIe extends SIe{constructor(n,r){super(n,r);Fe(this,ph);let i=this._getOption("pollingInterval");i==null&&(i=Gse.pollingInterval),me(this,ph,i)}_getSubscriber(n){const r=super._getSubscriber(n);return GH(r)&&(r.pollingInterval=re(this,ph)),r}get pollingInterval(){return re(this,ph)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");me(this,ph,n),this._forEachSubscriber(r=>{GH(r)&&(r.pollingInterval=re(this,ph))})}}ph=new WeakMap;var hx;class TIe extends AIe{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);Fe(this,hx);typeof n=="string"?me(this,hx,new Ed(n)):me(this,hx,n.clone())}_getConnection(){return re(this,hx).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}hx=new WeakMap;function RM(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&xr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=RM(t[e]);if(n)return n}return null}if(typeof t=="string")try{return RM(JSON.parse(t))}catch{}return null}function OM(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)OM(t[n],e);if(typeof t=="string")try{return OM(JSON.parse(t),e)}catch{}}}function kIe(t){const e=[];return OM(t,e),e}var px;const K7=class K7 extends dj{constructor(n,r){super(r);Ne(this,"address");Fe(this,px);xe(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),me(this,px,n);const i=tE(this.signingKey.publicKey);Bt(this,{address:i})}get signingKey(){return re(this,px)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new K7(re(this,px),n)}async signTransaction(n){n=Kw(n);const{to:r,from:i}=await Os({to:n.to?Gi(n.to,this):void 0,from:n.from?Gi(n.from,this):void 0});r!=null&&(n.to=r),i!=null&&(n.from=i),n.from!=null&&(xe(xn(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const s=tj.from(n);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(mse(n)).serialized}authorizeSync(n){xe(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const r=this.signingKey.sign(Wie(n));return Object.assign({},{address:xn(n.address),nonce:Ct(n.nonce||0),chainId:Ct(n.chainId||0)},{signature:r})}async authorize(n){return n=Object.assign({},n,{address:await Gi(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,r,i){const s=await Om.resolveNames(n,r,i,async o=>{Xe(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return Xe(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(Om.hash(s.domain,r,s.value)).serialized}};px=new WeakMap;let N2=K7;const C2=" !#$%&'()*+,-./<=>?@[]^_`{|}~",NIe=/^[a-z]*$/i;function KH(t,e){let n=97;return t.reduce((r,i)=>(i===e?n++:i.match(NIe)?r.push(String.fromCharCode(n)+i):(n=97,r.push(i)),r),[])}function CIe(t,e){for(let i=C2.length-1;i>=0;i--)t=t.split(C2[i]).join(e.substring(2*i,2*i+2));const n=[],r=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(s.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return KH(KH(n,";"),":")}function PIe(t){return xe(t[0]==="0","unsupported auwl data","data",t),CIe(t.substring(1+2*C2.length),t.substring(1,1+2*C2.length))}class _Ie{constructor(e){Ne(this,"locale");Bt(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var mx,B1,ym,U1,MM;class IIe extends _Ie{constructor(n,r,i){super(n);Fe(this,U1);Fe(this,mx);Fe(this,B1);Fe(this,ym);me(this,mx,r),me(this,B1,i),me(this,ym,null)}get _data(){return re(this,mx)}_decodeWords(){return PIe(re(this,mx))}getWord(n){const r=rt(this,U1,MM).call(this);return xe(n>=0&&n<r.length,`invalid word index: ${n}`,"index",n),r[n]}getWordIndex(n){return rt(this,U1,MM).call(this).indexOf(n)}}mx=new WeakMap,B1=new WeakMap,ym=new WeakMap,U1=new WeakSet,MM=function(){if(re(this,ym)==null){const n=this._decodeWords();if(Sd(n.join(`
`)+`
`)!==re(this,B1))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);me(this,ym,n)}return re(this,ym)};const RIe="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",OIe="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let UR=null;class jm extends IIe{constructor(){super("en",RIe,OIe)}static wordlist(){return UR==null&&(UR=new jm),UR}}function Kse(t){return(1<<t)-1<<8-t&255}function MIe(t){return(1<<t)-1&255}function FR(t,e){Sre("NFKD"),e==null&&(e=jm.wordlist());const n=e.split(t);xe(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*n.length/8));let i=0;for(let c=0;c<n.length;c++){let d=e.getWordIndex(n[c].normalize("NFKD"));xe(d>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let h=0;h<11;h++)d&1<<10-h&&(r[i>>3]|=1<<7-i%8),i++}const s=32*n.length/3,o=n.length/3,a=Kse(o),l=bt(il(r.slice(0,s/8)))[0]&a;return xe(l===(r[r.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),at(r.slice(0,s/8))}function $R(t,e){xe(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=jm.wordlist());const n=[0];let r=11;for(let o=0;o<t.length;o++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[o]>>8-r,n.push(t[o]&MIe(8-r)),r+=3);const i=t.length/4,s=parseInt(il(t).substring(2,4),16)&Kse(i);return n[n.length-1]<<=i,n[n.length-1]|=s>>8-i,e.join(n.map(o=>e.getWord(o)))}const zR={};class Cx{constructor(e,n,r,i,s){Ne(this,"phrase");Ne(this,"password");Ne(this,"wordlist");Ne(this,"entropy");i==null&&(i=""),s==null&&(s=jm.wordlist()),Dh(e,zR,"Mnemonic"),Bt(this,{phrase:r,password:i,wordlist:s,entropy:n})}computeSeed(){const e=vi("mnemonic"+this.password,"NFKD");return jh(vi(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,r){const i=FR(e,r);return e=$R(bt(i),r),new Cx(zR,i,e,n,r)}static fromEntropy(e,n,r){const i=bt(e,"entropy"),s=$R(i,r);return new Cx(zR,at(i),s,n,r)}static entropyToPhrase(e,n){const r=bt(e,"entropy");return $R(r,n)}static phraseToEntropy(e,n){return FR(e,n)}static isValidMnemonic(e,n){try{return FR(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var rs=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},VR=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},BT,Ma,cc;const LIe={16:10,24:12,32:14},DIe=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Pa=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],xA=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],jIe=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],BIe=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],UIe=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],FIe=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],$Ie=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],zIe=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],VIe=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],HIe=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],qIe=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],GIe=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],KIe=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],WIe=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function HR(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class fj{get key(){return rs(this,BT,"f").slice()}constructor(e){if(BT.set(this,void 0),Ma.set(this,void 0),cc.set(this,void 0),!(this instanceof fj))throw Error("AES must be instanitated with `new`");VR(this,BT,new Uint8Array(e),"f");const n=LIe[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");VR(this,cc,[],"f"),VR(this,Ma,[],"f");for(let d=0;d<=n;d++)rs(this,cc,"f").push([0,0,0,0]),rs(this,Ma,"f").push([0,0,0,0]);const r=(n+1)*4,i=this.key.length/4,s=HR(this.key);let o;for(let d=0;d<i;d++)o=d>>2,rs(this,cc,"f")[o][d%4]=s[d],rs(this,Ma,"f")[n-o][d%4]=s[d];let a=0,l=i,c;for(;l<r;){if(c=s[i-1],s[0]^=Pa[c>>16&255]<<24^Pa[c>>8&255]<<16^Pa[c&255]<<8^Pa[c>>24&255]^DIe[a]<<24,a+=1,i!=8)for(let g=1;g<i;g++)s[g]^=s[g-1];else{for(let g=1;g<i/2;g++)s[g]^=s[g-1];c=s[i/2-1],s[i/2]^=Pa[c&255]^Pa[c>>8&255]<<8^Pa[c>>16&255]<<16^Pa[c>>24&255]<<24;for(let g=i/2+1;g<i;g++)s[g]^=s[g-1]}let d=0,h,m;for(;d<i&&l<r;)h=l>>2,m=l%4,rs(this,cc,"f")[h][m]=s[d],rs(this,Ma,"f")[n-h][m]=s[d++],l++}for(let d=1;d<n;d++)for(let h=0;h<4;h++)c=rs(this,Ma,"f")[d][h],rs(this,Ma,"f")[d][h]=qIe[c>>24&255]^GIe[c>>16&255]^KIe[c>>8&255]^WIe[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=rs(this,cc,"f").length-1,r=[0,0,0,0];let i=HR(e);for(let a=0;a<4;a++)i[a]^=rs(this,cc,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=jIe[i[l]>>24&255]^BIe[i[(l+1)%4]>>16&255]^UIe[i[(l+2)%4]>>8&255]^FIe[i[(l+3)%4]&255]^rs(this,cc,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=rs(this,cc,"f")[n][a],s[4*a]=(Pa[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(Pa[i[(a+1)%4]>>16&255]^o>>16)&255,s[4*a+2]=(Pa[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(Pa[i[(a+3)%4]&255]^o)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=rs(this,Ma,"f").length-1,r=[0,0,0,0];let i=HR(e);for(let a=0;a<4;a++)i[a]^=rs(this,Ma,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=$Ie[i[l]>>24&255]^zIe[i[(l+3)%4]>>16&255]^VIe[i[(l+2)%4]>>8&255]^HIe[i[(l+1)%4]&255]^rs(this,Ma,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=rs(this,Ma,"f")[n][a],s[4*a]=(xA[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(xA[i[(a+3)%4]>>16&255]^o>>16)&255,s[4*a+2]=(xA[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(xA[i[(a+1)%4]&255]^o)&255;return s}}BT=new WeakMap,Ma=new WeakMap,cc=new WeakMap;class Wse{constructor(e,n,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new fj(n)},name:{enumerable:!0,value:e}})}}var vA=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ig=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Zb,Iu;class hj extends Wse{constructor(e,n){if(super("ECC",e,hj),Zb.set(this,void 0),Iu.set(this,void 0),n){if(n.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");vA(this,Zb,new Uint8Array(n),"f")}else vA(this,Zb,new Uint8Array(16),"f");vA(this,Iu,this.iv,"f")}get iv(){return new Uint8Array(ig(this,Zb,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let i=0;i<16;i++)ig(this,Iu,"f")[i]^=e[r+i];vA(this,Iu,this.aes.encrypt(ig(this,Iu,"f")),"f"),n.set(ig(this,Iu,"f"),r)}return n}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const i=this.aes.decrypt(e.subarray(r,r+16));for(let s=0;s<16;s++)n[r+s]=i[s]^ig(this,Iu,"f")[s],ig(this,Iu,"f")[s]=e[r+s]}return n}}Zb=new WeakMap,Iu=new WeakMap;var sg=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},_a=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ew,Ap,La;class Px extends Wse{constructor(e,n){super("CTR",e,Px),ew.set(this,void 0),Ap.set(this,void 0),La.set(this,void 0),sg(this,La,new Uint8Array(16),"f"),_a(this,La,"f").fill(0),sg(this,ew,_a(this,La,"f"),"f"),sg(this,Ap,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(_a(this,La,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)_a(this,La,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");_a(this,La,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(_a(this,La,"f")[e]===255)_a(this,La,"f")[e]=0;else{_a(this,La,"f")[e]++;break}}encrypt(e){var n,r;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)_a(this,Ap,"f")===16&&(sg(this,ew,this.aes.encrypt(_a(this,La,"f")),"f"),sg(this,Ap,0,"f"),this.increment()),i[s]^=_a(this,ew,"f")[sg(this,Ap,(r=_a(this,Ap,"f"),n=r++,r),"f"),n];return i}decrypt(e){return this.encrypt(e)}}ew=new WeakMap,Ap=new WeakMap,La=new WeakMap;function YIe(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const n=t.length-e;for(let r=0;r<e;r++)if(t[n+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,n))}function Yse(t){return typeof t=="string"&&!t.startsWith("0x")&&(t="0x"+t),gs(t)}function Tb(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function iE(t){return typeof t=="string"?vi(t,"NFKC"):gs(t)}function ri(t,e){const n=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);xe(n!=null,"invalid path","path",e);const r=n[1],i=n[3],s=n[4]==="!";let o=t;for(const a of r.toLowerCase().split(".")){if(Array.isArray(o)){if(!a.match(/^[0-9]+$/))break;o=o[parseInt(a)]}else if(typeof o=="object"){let l=null;for(const c in o)if(c.toLowerCase()===a){l=o[c];break}o=l}else o=null;if(o==null)break}if(xe(!s||o!=null,"missing required value","path",r),i&&o!=null){if(i==="int"){if(typeof o=="string"&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if(i==="number"&&typeof o=="string"&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if(i==="data"&&typeof o=="string")return Yse(o);if(i==="array"&&Array.isArray(o)||i===typeof o)return o;xe(!1,`wrong type found for ${i} `,"path",r)}return o}const Jse="m/44'/60'/0'/0/0";function WH(t){try{const e=JSON.parse(t);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function JIe(t,e,n){if(ri(t,"crypto.cipher:string")==="aes-128-ctr"){const i=ri(t,"crypto.cipherparams.iv:data!"),s=new Px(e,i);return at(s.decrypt(n))}Xe(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function P2(t,e){const n=bt(e),r=ri(t,"crypto.ciphertext:data!"),i=at(Kn(On([n.slice(16,32),r]))).substring(2);xe(i===ri(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=JIe(t,n.slice(0,16),r),o=tE(s);if(t.address){let c=t.address.toLowerCase();c.startsWith("0x")||(c="0x"+c),xe(xn(c)===o,"keystore address/privateKey mismatch","address",t.address)}const a={address:o,privateKey:s};if(ri(t,"x-ethers.version:string")==="0.1"){const c=n.slice(32,64),d=ri(t,"x-ethers.mnemonicCiphertext:data!"),h=ri(t,"x-ethers.mnemonicCounter:data!"),m=new Px(c,h);a.mnemonic={path:ri(t,"x-ethers.path:string")||Jse,locale:ri(t,"x-ethers.locale:string")||"en",entropy:at(bt(m.decrypt(d)))}}return a}function Xse(t){const e=ri(t,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const n=ri(t,"crypto.kdfparams.salt:data!"),r=ri(t,"crypto.kdfparams.n:int!"),i=ri(t,"crypto.kdfparams.r:int!"),s=ri(t,"crypto.kdfparams.p:int!");xe(r>0&&(r&r-1)===0,"invalid kdf.N","kdf.N",r),xe(i>0&&s>0,"invalid kdf","kdf",e);const o=ri(t,"crypto.kdfparams.dklen:int!");return xe(o===32,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:n,N:r,r:i,p:s,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const n=ri(t,"crypto.kdfparams.salt:data!"),r=ri(t,"crypto.kdfparams.prf:string!"),i=r.split("-").pop();xe(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",r);const s=ri(t,"crypto.kdfparams.c:int!"),o=ri(t,"crypto.kdfparams.dklen:int!");return xe(o===32,"invalid kdf.dklen","kdf.dklen",o),{name:"pbkdf2",salt:n,count:s,dkLen:o,algorithm:i}}}xe(!1,"unsupported key-derivation function","kdf",e)}function XIe(t,e){const n=JSON.parse(t),r=iE(e),i=Xse(n);if(i.name==="pbkdf2"){const{salt:h,count:m,dkLen:g,algorithm:v}=i,x=jh(r,h,m,g,v);return P2(n,x)}Xe(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:o,r:a,p:l,dkLen:c}=i,d=tv(r,s,o,a,l,c);return P2(n,d)}function YH(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}async function QIe(t,e,n){const r=JSON.parse(t),i=iE(e),s=Xse(r);if(s.name==="pbkdf2"){n&&(n(0),await YH(0));const{salt:m,count:g,dkLen:v,algorithm:x}=s,b=jh(i,m,g,v,x);return n&&(n(1),await YH(0)),P2(r,b)}Xe(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:o,N:a,r:l,p:c,dkLen:d}=s,h=await ev(i,o,a,l,c,d,n);return P2(r,h)}function Qse(t){const e=t.salt!=null?bt(t.salt,"options.salt"):cd(32);let n=1<<17,r=8,i=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(r=t.scrypt.r),t.scrypt.p&&(i=t.scrypt.p)),xe(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),xe(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),xe(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:n,r,p:i}}function Zse(t,e,n,r){const i=bt(n.privateKey,"privateKey"),s=r.iv!=null?bt(r.iv,"options.iv"):cd(16);xe(s.length===16,"invalid options.iv length","options.iv",r.iv);const o=r.uuid!=null?bt(r.uuid,"options.uuid"):cd(16);xe(o.length===16,"invalid options.uuid length","options.uuid",r.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new Px(a,s),d=bt(c.encrypt(i)),h=Kn(On([l,d])),m={address:n.address.substring(2).toLowerCase(),id:eNe(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:at(s).substring(2)},ciphertext:at(d).substring(2),kdf:"scrypt",kdfparams:{salt:at(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:h.substring(2)}};if(n.mnemonic){const g=r.client!=null?r.client:`ethers/${wre}`,v=n.mnemonic.path||Jse,x=n.mnemonic.locale||"en",b=t.slice(32,64),w=bt(n.mnemonic.entropy,"account.mnemonic.entropy"),T=cd(16),N=new Px(b,T),O=bt(N.encrypt(w)),j=new Date,F="UTC--"+(j.getUTCFullYear()+"-"+Tb(j.getUTCMonth()+1,2)+"-"+Tb(j.getUTCDate(),2)+"T"+Tb(j.getUTCHours(),2)+"-"+Tb(j.getUTCMinutes(),2)+"-"+Tb(j.getUTCSeconds(),2)+".0Z")+"--"+m.address;m["x-ethers"]={client:g,gethFilename:F,path:v,locale:x,mnemonicCounter:at(T).substring(2),mnemonicCiphertext:at(O).substring(2),version:"0.1"}}return JSON.stringify(m)}function eoe(t,e,n){n==null&&(n={});const r=iE(e),i=Qse(n),s=tv(r,i.salt,i.N,i.r,i.p,64);return Zse(bt(s),i,t,n)}async function toe(t,e,n){n==null&&(n={});const r=iE(e),i=Qse(n),s=await ev(r,i.salt,i.N,i.r,i.p,64,n.progressCallback);return Zse(bt(s),i,t,n)}const qR="m/44'/60'/0'/0/0",ZIe=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),jc=2147483648,eRe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),tRe="0123456789abcdef";function _2(t,e){let n="";for(;t;)n=tRe[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function LM(t){const e=bt(t),n=yr(il(il(e)),0,4),r=On([e,n]);return Nre(r)}const hc={};function noe(t,e,n,r){const i=new Uint8Array(37);t&jc?(Xe(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(bt(r),1)):i.set(bt(n));for(let o=24;o>=0;o-=8)i[33+(o>>3)]=t>>24-o&255;const s=bt(Qx("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function roe(t,e){const n=e.split("/");xe(n.length>0,"invalid path","path",e),n[0]==="m"&&(xe(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let r=t;for(let i=0;i<n.length;i++){const s=n[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));xe(o<jc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(jc+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);xe(o<jc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(o)}else xe(!1,"invalid path component",`path[${i}]`,s)}return r}var F1,DM,xm,tw;const Sl=class Sl extends N2{constructor(n,r,i,s,o,a,l,c,d){super(r,d);Fe(this,F1);Ne(this,"publicKey");Ne(this,"fingerprint");Ne(this,"parentFingerprint");Ne(this,"mnemonic");Ne(this,"chainCode");Ne(this,"path");Ne(this,"index");Ne(this,"depth");Dh(n,hc,"HDNodeWallet"),Bt(this,{publicKey:r.compressedPublicKey});const h=yr(Zx(il(this.publicKey)),0,4);Bt(this,{parentFingerprint:i,fingerprint:h,chainCode:s,path:o,index:a,depth:l}),Bt(this,{mnemonic:c})}connect(n){return new Sl(hc,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,r){return await toe(rt(this,F1,DM).call(this),n,{progressCallback:r})}encryptSync(n){return eoe(rt(this,F1,DM).call(this),n)}get extendedKey(){return Xe(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),LM(On(["0x0488ADE4",_2(this.depth,1),this.parentFingerprint,_2(this.index,4),this.chainCode,On(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new Jw(hc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const r=en(n,"index");xe(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~jc),r&jc&&(i+="'"));const{IR:s,IL:o}=noe(r,this.chainCode,this.publicKey,this.privateKey),a=new Dc(wd((Q1(o)+BigInt(this.privateKey))%eRe,32));return new Sl(hc,a,this.fingerprint,at(s),i,r,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return roe(this,n)}static fromExtendedKey(n){const r=Ur(Lke(n));xe(r.length===82||LM(r.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const i=r[4],s=at(r.slice(5,9)),o=parseInt(at(r.slice(9,13)).substring(2),16),a=at(r.slice(13,45)),l=r.slice(45,78);switch(at(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=at(l);return new Jw(hc,tE(c),c,s,a,null,o,i,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new Sl(hc,new Dc(l.slice(1)),s,a,null,o,i,null,null)}xe(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,r,i){var o;n==null&&(n=""),r==null&&(r=qR),i==null&&(i=jm.wordlist());const s=Cx.fromEntropy(cd(16),n,i);return rt(o=Sl,xm,tw).call(o,s.computeSeed(),s).derivePath(r)}static fromMnemonic(n,r){var i;return r||(r=qR),rt(i=Sl,xm,tw).call(i,n.computeSeed(),n).derivePath(r)}static fromPhrase(n,r,i,s){var a;r==null&&(r=""),i==null&&(i=qR),s==null&&(s=jm.wordlist());const o=Cx.fromPhrase(n,r,s);return rt(a=Sl,xm,tw).call(a,o.computeSeed(),o).derivePath(i)}static fromSeed(n){var r;return rt(r=Sl,xm,tw).call(r,n,null)}};F1=new WeakSet,DM=function(){const n={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),n},xm=new WeakSet,tw=function(n,r){xe(_N(n),"invalid seed","seed","[REDACTED]");const i=bt(n,"seed");xe(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=bt(Qx("sha512",ZIe,i)),o=new Dc(at(s.slice(0,32)));return new Sl(hc,o,"0x00000000",at(s.slice(32)),"m",0,0,r,null)},Fe(Sl,xm);let gw=Sl;class Jw extends CM{constructor(n,r,i,s,o,a,l,c,d){super(r,d);Ne(this,"publicKey");Ne(this,"fingerprint");Ne(this,"parentFingerprint");Ne(this,"chainCode");Ne(this,"path");Ne(this,"index");Ne(this,"depth");Dh(n,hc,"HDNodeVoidWallet"),Bt(this,{publicKey:i});const h=yr(Zx(il(i)),0,4);Bt(this,{publicKey:i,fingerprint:h,parentFingerprint:s,chainCode:o,path:a,index:l,depth:c})}connect(n){return new Jw(hc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return Xe(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),LM(On(["0x0488B21E",_2(this.depth,1),this.parentFingerprint,_2(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const r=en(n,"index");xe(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~jc),r&jc&&(i+="'"));const{IR:s,IL:o}=noe(r,this.chainCode,this.publicKey,null),a=Dc.addPoints(o,this.publicKey,!0),l=tE(a);return new Jw(hc,l,a,this.fingerprint,at(s),i,r,this.depth+1,this.provider)}derivePath(n){return roe(this,n)}}function Dgt(t){const e=en(t,"index");return xe(e>=0&&e<jc,"invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function jgt(t){const e=en(t,"index");return xe(e>=0&&e<jc,"invalid account index","index",e),`m/44'/60'/0'/0/${e}`}function JH(t){try{if(JSON.parse(t).encseed)return!0}catch{}return!1}function XH(t,e){const n=JSON.parse(t),r=iE(e),i=xn(ri(n,"ethaddr:string!")),s=Yse(ri(n,"encseed:string!"));xe(s&&s.length%16===0,"invalid encseed","json",t);const o=bt(jh(r,r,2e3,32,"sha256")).slice(0,16),a=s.slice(0,16),l=s.slice(16),c=new hj(o,a),d=YIe(bt(c.decrypt(l)));let h="";for(let m=0;m<d.length;m++)h+=String.fromCharCode(d[m]);return{address:i,privateKey:Sd(h)}}function QH(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}var $1,jM;const Lp=class Lp extends N2{constructor(e,n){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let r=typeof e=="string"?new Dc(e):e;super(r,n)}connect(e){return new Lp(this.signingKey,e)}async encrypt(e,n){const r={address:this.address,privateKey:this.privateKey};return await toe(r,e,{progressCallback:n})}encryptSync(e){const n={address:this.address,privateKey:this.privateKey};return eoe(n,e)}static async fromEncryptedJson(e,n,r){var s;let i=null;return WH(e)?i=await QIe(e,n,r):JH(e)&&(r&&(r(0),await QH(0)),i=XH(e,n),r&&(r(1),await QH(0))),rt(s=Lp,$1,jM).call(s,i)}static fromEncryptedJsonSync(e,n){var i;let r=null;return WH(e)?r=XIe(e,n):JH(e)?r=XH(e,n):xe(!1,"invalid JSON wallet","json","[ REDACTED ]"),rt(i=Lp,$1,jM).call(i,r)}static createRandom(e){const n=gw.createRandom();return e?n.connect(e):n}static fromPhrase(e,n){const r=gw.fromPhrase(e);return n?r.connect(n):r}};$1=new WeakSet,jM=function(e){if(xe(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const r=Cx.fromEntropy(e.mnemonic.entropy),i=gw.fromMnemonic(r,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const n=new Lp(e.privateKey);return xe(n.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),n},Fe(Lp,$1);let xh=Lp;var Pf={},GR={},KR={},WR={},YR={},JR={},kb,ZH;function nRe(){if(ZH)return kb;ZH=1,kb=t(typeof an<"u"&&an)||t(kb.Buffer)||t(typeof window<"u"&&window.Buffer)||kb.Buffer;function t(e){return e&&e.isBuffer&&e}return kb}var XR,eq;function pj(){if(eq)return XR;eq=1;var t={}.toString;return XR=Array.isArray||function(e){return t.call(e)=="[object Array]"},XR}var QR={exports:{}},tq;function rRe(){if(tq)return QR.exports;tq=1;var t=cl(),e=QR.exports=n(0);e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Array(i)}function r(i){if(!t.isBuffer(i)&&t.isView(i))i=t.Uint8Array.from(i);else if(t.isArrayBuffer(i))i=new Uint8Array(i);else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(i)}return QR.exports}var ZR={exports:{}},nq;function iRe(){if(nq)return ZR.exports;nq=1;var t=cl(),e=t.global,n=ZR.exports=t.hasBuffer?r(0):[];n.alloc=t.hasBuffer&&e.alloc||r,n.concat=t.concat,n.from=i;function r(s){return new e(s)}function i(s){if(!t.isBuffer(s)&&t.isView(s))s=t.Uint8Array.from(s);else if(t.isArrayBuffer(s))s=new Uint8Array(s);else{if(typeof s=="string")return t.from.call(n,s);if(typeof s=="number")throw new TypeError('"value" argument must not be a number')}return e.from&&e.from.length!==1?e.from(s):new e(s)}return ZR.exports}var e5={exports:{}},rq;function sRe(){if(rq)return e5.exports;rq=1;var t=cl(),e=e5.exports=t.hasArrayBuffer?n(0):[];e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Uint8Array(i)}function r(i){if(t.isView(i)){var s=i.byteOffset,o=i.byteLength;i=i.buffer,i.byteLength!==o&&(i.slice?i=i.slice(s,s+o):(i=new Uint8Array(i),i.byteLength!==o&&(i=Array.prototype.slice.call(i,s,s+o))))}else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(i)}return e5.exports}var og={},Nb={},iq;function oRe(){if(iq)return Nb;iq=1,Nb.copy=n,Nb.toString=e,Nb.write=t;function t(r,i){for(var s=this,o=i||(i|=0),a=r.length,l=0,c=0;c<a;)l=r.charCodeAt(c++),l<128?s[o++]=l:l<2048?(s[o++]=192|l>>>6,s[o++]=128|l&63):l<55296||l>57343?(s[o++]=224|l>>>12,s[o++]=128|l>>>6&63,s[o++]=128|l&63):(l=(l-55296<<10|r.charCodeAt(c++)-56320)+65536,s[o++]=240|l>>>18,s[o++]=128|l>>>12&63,s[o++]=128|l>>>6&63,s[o++]=128|l&63);return o-i}function e(r,i,s){var o=this,a=i|0;s||(s=o.length);for(var l="",c=0;a<s;){if(c=o[a++],c<128){l+=String.fromCharCode(c);continue}(c&224)===192?c=(c&31)<<6|o[a++]&63:(c&240)===224?c=(c&15)<<12|(o[a++]&63)<<6|o[a++]&63:(c&248)===240&&(c=(c&7)<<18|(o[a++]&63)<<12|(o[a++]&63)<<6|o[a++]&63),c>=65536?(c-=65536,l+=String.fromCharCode((c>>>10)+55296,(c&1023)+56320)):l+=String.fromCharCode(c)}return l}function n(r,i,s,o){var a;s||(s=0),!o&&o!==0&&(o=this.length),i||(i=0);var l=o-s;if(r===this&&s<i&&i<o)for(a=l-1;a>=0;a--)r[a+i]=this[a+s];else for(a=0;a<l;a++)r[a+i]=this[a+s];return l}return Nb}var sq;function mj(){if(sq)return og;sq=1;var t=oRe();og.copy=s,og.slice=o,og.toString=a,og.write=l("write");var e=cl(),n=e.global,r=e.hasBuffer&&"TYPED_ARRAY_SUPPORT"in n,i=r&&!n.TYPED_ARRAY_SUPPORT;function s(c,d,h,m){var g=e.isBuffer(this),v=e.isBuffer(c);if(g&&v)return this.copy(c,d,h,m);if(!i&&!g&&!v&&e.isView(this)&&e.isView(c)){var x=h||m!=null?o.call(this,h,m):this;return c.set(x,d),x.length}else return t.copy.call(this,c,d,h,m)}function o(c,d){var h=this.slice||!i&&this.subarray;if(h)return h.call(this,c,d);var m=e.alloc.call(this,d-c);return s.call(this,m,0,c,d),m}function a(c,d,h){var m=!r&&e.isBuffer(this)?this.toString:t.toString;return m.apply(this,arguments)}function l(c){return d;function d(){var h=this[c]||t[c];return h.apply(this,arguments)}}return og}var oq;function cl(){return oq||(oq=1,(function(t){var e=t.global=nRe(),n=t.hasBuffer=e&&!!e.isBuffer,r=t.hasArrayBuffer=typeof ArrayBuffer<"u",i=t.isArray=pj();t.isArrayBuffer=r?x:T;var s=t.isBuffer=n?e.isBuffer:T,o=t.isView=r?ArrayBuffer.isView||N("ArrayBuffer","buffer"):T;t.alloc=m,t.concat=g,t.from=h;var a=t.Array=rRe(),l=t.Buffer=iRe(),c=t.Uint8Array=sRe(),d=t.prototype=mj();function h(O){return typeof O=="string"?b.call(this,O):w(this).from(O)}function m(O){return w(this).alloc(O)}function g(O,j){j||(j=0,Array.prototype.forEach.call(O,D));var _=this!==t&&this||O[0],F=m.call(_,j),z=0;return Array.prototype.forEach.call(O,$),F;function D(G){j+=G.length}function $(G){z+=d.copy.call(G,F,z)}}var v=N("ArrayBuffer");function x(O){return O instanceof ArrayBuffer||v(O)}function b(O){var j=O.length*3,_=m.call(this,j),F=d.write.call(_,O);return j!==F&&(_=d.slice.call(_,0,F)),_}function w(O){return s(O)?l:o(O)?c:i(O)?a:n?l:r?c:a}function T(){return!1}function N(O,j){return O="[object "+O+"]",function(_){return _!=null&&{}.toString.call(j?_[j]:_)===O}}})(JR)),JR}var aq;function gj(){if(aq)return YR;aq=1,YR.ExtBuffer=e;var t=cl();function e(n,r){if(!(this instanceof e))return new e(n,r);this.buffer=t.from(n),this.type=r}return YR}var t5={},lq;function aRe(){if(lq)return t5;lq=1,t5.setExtPackers=s;var t=cl(),e=t.global,n=t.Uint8Array.from,r,i={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function s(d){d.addExtPacker(14,Error,[c,o]),d.addExtPacker(1,EvalError,[c,o]),d.addExtPacker(2,RangeError,[c,o]),d.addExtPacker(3,ReferenceError,[c,o]),d.addExtPacker(4,SyntaxError,[c,o]),d.addExtPacker(5,TypeError,[c,o]),d.addExtPacker(6,URIError,[c,o]),d.addExtPacker(10,RegExp,[l,o]),d.addExtPacker(11,Boolean,[a,o]),d.addExtPacker(12,String,[a,o]),d.addExtPacker(13,Date,[Number,o]),d.addExtPacker(15,Number,[a,o]),typeof Uint8Array<"u"&&(d.addExtPacker(17,Int8Array,n),d.addExtPacker(18,Uint8Array,n),d.addExtPacker(19,Int16Array,n),d.addExtPacker(20,Uint16Array,n),d.addExtPacker(21,Int32Array,n),d.addExtPacker(22,Uint32Array,n),d.addExtPacker(23,Float32Array,n),typeof Float64Array<"u"&&d.addExtPacker(24,Float64Array,n),typeof Uint8ClampedArray<"u"&&d.addExtPacker(25,Uint8ClampedArray,n),d.addExtPacker(26,ArrayBuffer,n),d.addExtPacker(29,DataView,n)),t.hasBuffer&&d.addExtPacker(27,e,t.from)}function o(d){return r||(r=loe().encode),r(d)}function a(d){return d.valueOf()}function l(d){d=RegExp.prototype.toString.call(d).split("/"),d.shift();var h=[d.pop()];return h.unshift(d.join("/")),h}function c(d){var h={};for(var m in i)h[m]=d[m];return h}return t5}var n5={},bA={},cq;function yj(){return cq||(cq=1,(function(t){(function(e){var n="undefined",r=n!==typeof an&&an,i=n!==typeof Uint8Array&&Uint8Array,s=n!==typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],a=Array.isArray||_,l=4294967296,c=16777216,d;h("Uint64BE",!0,!0),h("Int64BE",!0,!1),h("Uint64LE",!1,!0),h("Int64LE",!1,!1);function h(F,z,D){var $=z?0:4,G=z?4:0,H=z?0:3,U=z?1:2,A=z?2:1,I=z?3:0,L=z?T:O,q=z?N:j,K=V.prototype,te="is"+F,Y="_"+te;return K.buffer=void 0,K.offset=0,K[Y]=!0,K.toNumber=X,K.toString=se,K.toJSON=X,K.toArray=m,r&&(K.toBuffer=g),i&&(K.toArrayBuffer=v),V[te]=M,e[F]=V,V;function V(oe,ve,ke,pe){return this instanceof V?P(this,oe,ve,ke,pe):new V(oe,ve,ke,pe)}function M(oe){return!!(oe&&oe[Y])}function P(oe,ve,ke,pe,ze){if(i&&s&&(ve instanceof s&&(ve=new i(ve)),pe instanceof s&&(pe=new i(pe))),!ve&&!ke&&!pe&&!d){oe.buffer=w(o,0);return}if(!x(ve,ke)){var Me=d||Array;ze=ke,pe=ve,ke=0,ve=new Me(8)}oe.buffer=ve,oe.offset=ke|=0,n!==typeof pe&&(typeof pe=="string"?W(ve,ke,pe,ze||10):x(pe,ze)?b(ve,ke,pe,ze):typeof ze=="number"?(ae(ve,ke+$,pe),ae(ve,ke+G,ze)):pe>0?L(ve,ke,pe):pe<0?q(ve,ke,pe):b(ve,ke,o,0))}function W(oe,ve,ke,pe){var ze=0,Me=ke.length,he=0,_e=0;ke[0]==="-"&&ze++;for(var We=ze;ze<Me;){var Ke=parseInt(ke[ze++],pe);if(!(Ke>=0))break;_e=_e*pe+Ke,he=he*pe+Math.floor(_e/l),_e%=l}We&&(he=~he,_e?_e=l-_e:he++),ae(oe,ve+$,he),ae(oe,ve+G,_e)}function X(){var oe=this.buffer,ve=this.offset,ke=Te(oe,ve+$),pe=Te(oe,ve+G);return D||(ke|=0),ke?ke*l+pe:pe}function se(oe){var ve=this.buffer,ke=this.offset,pe=Te(ve,ke+$),ze=Te(ve,ke+G),Me="",he=!D&&pe&2147483648;for(he&&(pe=~pe,ze=l-ze),oe=oe||10;;){var _e=pe%oe*l+ze;if(pe=Math.floor(pe/oe),ze=Math.floor(_e/oe),Me=(_e%oe).toString(oe)+Me,!pe&&!ze)break}return he&&(Me="-"+Me),Me}function ae(oe,ve,ke){oe[ve+I]=ke&255,ke=ke>>8,oe[ve+A]=ke&255,ke=ke>>8,oe[ve+U]=ke&255,ke=ke>>8,oe[ve+H]=ke&255}function Te(oe,ve){return oe[ve+H]*c+(oe[ve+U]<<16)+(oe[ve+A]<<8)+oe[ve+I]}}function m(F){var z=this.buffer,D=this.offset;return d=null,F!==!1&&D===0&&z.length===8&&a(z)?z:w(z,D)}function g(F){var z=this.buffer,D=this.offset;if(d=r,F!==!1&&D===0&&z.length===8&&an.isBuffer(z))return z;var $=new r(8);return b($,0,z,D),$}function v(F){var z=this.buffer,D=this.offset,$=z.buffer;if(d=i,F!==!1&&D===0&&$ instanceof s&&$.byteLength===8)return $;var G=new i(8);return b(G,0,z,D),G.buffer}function x(F,z){var D=F&&F.length;return z|=0,D&&z+8<=D&&typeof F[z]!="string"}function b(F,z,D,$){z|=0,$|=0;for(var G=0;G<8;G++)F[z++]=D[$++]&255}function w(F,z){return Array.prototype.slice.call(F,z,z+8)}function T(F,z,D){for(var $=z+8;$>z;)F[--$]=D&255,D/=256}function N(F,z,D){var $=z+8;for(D++;$>z;)F[--$]=-D&255^255,D/=256}function O(F,z,D){for(var $=z+8;z<$;)F[z++]=D&255,D/=256}function j(F,z,D){var $=z+8;for(D++;z<$;)F[z++]=-D&255^255,D/=256}function _(F){return!!F&&Object.prototype.toString.call(F)=="[object Array]"}})(typeof t.nodeName!="string"?t:bA||{})})(bA)),bA}var r5={},wA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var uq;function ioe(){return uq||(uq=1,wA.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,g=t[e+h];for(h+=m,s=g&(1<<-d)-1,g>>=-d,d+=a;d>0;s=s*256+t[e+h],h+=m,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)},wA.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,d=(1<<c)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,v=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=v,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=v,o/=256,c-=8);t[n+g-v]|=x*128}),wA}var i5={},dq;function soe(){if(dq)return i5;dq=1;for(var t=i5.uint8=new Array(256),e=0;e<=255;e++)t[e]=n(e);function n(r){return function(i){var s=i.reserve(1);i.buffer[s]=r}}return i5}var fq;function lRe(){if(fq)return r5;fq=1;var t=ioe(),e=yj(),n=e.Uint64BE,r=e.Int64BE,i=soe().uint8,s=cl(),o=s.global,a=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,l=a&&!o.TYPED_ARRAY_SUPPORT,c=s.hasBuffer&&o.prototype||{};r5.getWriteToken=d;function d(_){return _&&_.uint8array?h():l||s.hasBuffer&&_&&_.safe?g():m()}function h(){var _=m();return _[202]=w(202,4,O),_[203]=w(203,8,j),_}function m(){var _=i.slice();return _[196]=v(196),_[197]=x(197),_[198]=b(198),_[199]=v(199),_[200]=x(200),_[201]=b(201),_[202]=w(202,4,c.writeFloatBE||O,!0),_[203]=w(203,8,c.writeDoubleBE||j,!0),_[204]=v(204),_[205]=x(205),_[206]=b(206),_[207]=w(207,8,T),_[208]=v(208),_[209]=x(209),_[210]=b(210),_[211]=w(211,8,N),_[217]=v(217),_[218]=x(218),_[219]=b(219),_[220]=x(220),_[221]=b(221),_[222]=x(222),_[223]=b(223),_}function g(){var _=i.slice();return _[196]=w(196,1,o.prototype.writeUInt8),_[197]=w(197,2,o.prototype.writeUInt16BE),_[198]=w(198,4,o.prototype.writeUInt32BE),_[199]=w(199,1,o.prototype.writeUInt8),_[200]=w(200,2,o.prototype.writeUInt16BE),_[201]=w(201,4,o.prototype.writeUInt32BE),_[202]=w(202,4,o.prototype.writeFloatBE),_[203]=w(203,8,o.prototype.writeDoubleBE),_[204]=w(204,1,o.prototype.writeUInt8),_[205]=w(205,2,o.prototype.writeUInt16BE),_[206]=w(206,4,o.prototype.writeUInt32BE),_[207]=w(207,8,T),_[208]=w(208,1,o.prototype.writeInt8),_[209]=w(209,2,o.prototype.writeInt16BE),_[210]=w(210,4,o.prototype.writeInt32BE),_[211]=w(211,8,N),_[217]=w(217,1,o.prototype.writeUInt8),_[218]=w(218,2,o.prototype.writeUInt16BE),_[219]=w(219,4,o.prototype.writeUInt32BE),_[220]=w(220,2,o.prototype.writeUInt16BE),_[221]=w(221,4,o.prototype.writeUInt32BE),_[222]=w(222,2,o.prototype.writeUInt16BE),_[223]=w(223,4,o.prototype.writeUInt32BE),_}function v(_){return function(F,z){var D=F.reserve(2),$=F.buffer;$[D++]=_,$[D]=z}}function x(_){return function(F,z){var D=F.reserve(3),$=F.buffer;$[D++]=_,$[D++]=z>>>8,$[D]=z}}function b(_){return function(F,z){var D=F.reserve(5),$=F.buffer;$[D++]=_,$[D++]=z>>>24,$[D++]=z>>>16,$[D++]=z>>>8,$[D]=z}}function w(_,F,z,D){return function($,G){var H=$.reserve(F+1);$.buffer[H++]=_,z.call($.buffer,G,H,D)}}function T(_,F){new n(this,F,_)}function N(_,F){new r(this,F,_)}function O(_,F){t.write(this,_,F,!1,23,4)}function j(_,F){t.write(this,_,F,!1,52,8)}return r5}var hq;function cRe(){if(hq)return n5;hq=1;var t=pj(),e=yj(),n=e.Uint64BE,r=e.Int64BE,i=cl(),s=mj(),o=lRe(),a=soe().uint8,l=gj().ExtBuffer,c=typeof Uint8Array<"u",d=typeof Map<"u",h=[];h[1]=212,h[2]=213,h[4]=214,h[8]=215,h[16]=216,n5.getWriteType=m;function m(g){var v=o.getWriteToken(g),x=g&&g.useraw,b=c&&g&&g.binarraybuffer,w=b?i.isArrayBuffer:i.isBuffer,T=b?K:q,N=d&&g&&g.usemap,O=N?V:Y,j={boolean:_,function:I,number:F,object:x?A:U,string:H(x?G:$),symbol:I,undefined:I};return j;function _(P,W){var X=W?195:194;v[X](P,W)}function F(P,W){var X=W|0,se;if(W!==X){se=203,v[se](P,W);return}else-32<=X&&X<=127?se=X&255:0<=X?se=X<=255?204:X<=65535?205:206:se=-128<=X?208:-32768<=X?209:210;v[se](P,X)}function z(P,W){var X=207;v[X](P,W.toArray())}function D(P,W){var X=211;v[X](P,W.toArray())}function $(P){return P<32?1:P<=255?2:P<=65535?3:5}function G(P){return P<32?1:P<=65535?3:5}function H(P){return W;function W(X,se){var ae=se.length,Te=5+ae*3;X.offset=X.reserve(Te);var oe=X.buffer,ve=P(ae),ke=X.offset+ve;ae=s.write.call(oe,se,ke);var pe=P(ae);if(ve!==pe){var ze=ke+pe-ve,Me=ke+ae;s.copy.call(oe,oe,ze,ke,Me)}var he=pe===1?160+ae:pe<=3?215+pe:219;v[he](X,ae),X.offset+=ae}}function U(P,W){if(W===null)return I(P,W);if(w(W))return T(P,W);if(t(W))return L(P,W);if(n.isUint64BE(W))return z(P,W);if(r.isInt64BE(W))return D(P,W);var X=P.codec.getExtPacker(W);if(X&&(W=X(W)),W instanceof l)return te(P,W);O(P,W)}function A(P,W){if(w(W))return M(P,W);U(P,W)}function I(P,W){var X=192;v[X](P,W)}function L(P,W){var X=W.length,se=X<16?144+X:X<=65535?220:221;v[se](P,X);for(var ae=P.codec.encode,Te=0;Te<X;Te++)ae(P,W[Te])}function q(P,W){var X=W.length,se=X<255?196:X<=65535?197:198;v[se](P,X),P.send(W)}function K(P,W){q(P,new Uint8Array(W))}function te(P,W){var X=W.buffer,se=X.length,ae=h[se]||(se<255?199:se<=65535?200:201);v[ae](P,se),a[W.type](P),P.send(X)}function Y(P,W){var X=Object.keys(W),se=X.length,ae=se<16?128+se:se<=65535?222:223;v[ae](P,se);var Te=P.codec.encode;X.forEach(function(oe){Te(P,oe),Te(P,W[oe])})}function V(P,W){if(!(W instanceof Map))return Y(P,W);var X=W.size,se=X<16?128+X:X<=65535?222:223;v[se](P,X);var ae=P.codec.encode;W.forEach(function(Te,oe,ve){ae(P,oe),ae(P,Te)})}function M(P,W){var X=W.length,se=X<32?160+X:X<=65535?218:219;v[se](P,X),P.send(W)}}return n5}var ag={},pq;function GN(){if(pq)return ag;pq=1;var t=pj();ag.createCodec=a,ag.install=r,ag.filter=o;var e=cl();function n(l){if(!(this instanceof n))return new n(l);this.options=l,this.init()}n.prototype.init=function(){var l=this.options;return l&&l.uint8array&&(this.bufferish=e.Uint8Array),this};function r(l){for(var c in l)n.prototype[c]=i(n.prototype[c],l[c])}function i(l,c){return l&&c?d:l||c;function d(){return l.apply(this,arguments),c.apply(this,arguments)}}function s(l){return l=l.slice(),function(d){return l.reduce(c,d)};function c(d,h){return h(d)}}function o(l){return t(l)?s(l):l}function a(l){return new n(l)}return ag.preset=a({preset:!0}),ag}var mq;function xj(){if(mq)return WR;mq=1;var t=gj().ExtBuffer,e=aRe(),n=cRe(),r=GN();r.install({addExtPacker:o,getExtPacker:a,init:s}),WR.preset=s.call(r.preset);function i(l){var c=n.getWriteType(l);return d;function d(h,m){var g=c[typeof m];if(!g)throw new Error('Unsupported type "'+typeof m+'": '+m);g(h,m)}}function s(){var l=this.options;return this.encode=i(l),l&&l.preset&&e.setExtPackers(this),this}function o(l,c,d){d=r.filter(d);var h=c.name;if(h&&h!=="Object"){var m=this.extPackers||(this.extPackers={});m[h]=v}else{var g=this.extEncoderList||(this.extEncoderList=[]);g.unshift([c,v])}function v(x){return d&&(x=d(x)),new t(x,l)}}function a(l){var c=this.extPackers||(this.extPackers={}),d=l.constructor,h=d&&d.name&&c[d.name];if(h)return h;for(var m=this.extEncoderList||(this.extEncoderList=[]),g=m.length,v=0;v<g;v++){var x=m[v];if(d===x[0])return x[1]}}return WR}var EA={},gq;function ooe(){if(gq)return EA;gq=1,EA.FlexDecoder=i,EA.FlexEncoder=s;var t=cl(),e=2048,n=65536,r="BUFFER_SHORTAGE";function i(){if(!(this instanceof i))return new i}function s(){if(!(this instanceof s))return new s}i.mixin=g(o()),i.mixin(i.prototype),s.mixin=g(a()),s.mixin(s.prototype);function o(){return{bufferish:t,write:v,fetch:c,flush:x,push:h,pull:m,read:d,reserve:b,offset:0};function v(w){var T=this.offset?t.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=T?w?this.bufferish.concat([T,w]):T:w,this.offset=0}function x(){for(;this.offset<this.buffer.length;){var w=this.offset,T;try{T=this.fetch()}catch(N){if(N&&N.message!=r)throw N;this.offset=w;break}this.push(T)}}function b(w){var T=this.offset,N=T+w;if(N>this.buffer.length)throw new Error(r);return this.offset=N,T}}function a(){return{bufferish:t,write:l,fetch:v,flush:x,push:h,pull:b,read:d,reserve:w,send:T,maxBufferSize:n,minBufferSize:e,offset:0,start:0};function v(){var N=this.start;if(N<this.offset){var O=this.start=this.offset;return t.prototype.slice.call(this.buffer,N,O)}}function x(){for(;this.start<this.offset;){var N=this.fetch();N&&this.push(N)}}function b(){var N=this.buffers||(this.buffers=[]),O=N.length>1?this.bufferish.concat(N):N[0];return N.length=0,O}function w(N){var O=N|0;if(this.buffer){var j=this.buffer.length,_=this.offset|0,F=_+O;if(F<j)return this.offset=F,_;this.flush(),N=Math.max(N,Math.min(j*2,this.maxBufferSize))}return N=Math.max(N,this.minBufferSize),this.buffer=this.bufferish.alloc(N),this.start=0,this.offset=O,0}function T(N){var O=N.length;if(O>this.minBufferSize)this.flush(),this.push(N);else{var j=this.reserve(O);t.prototype.copy.call(N,this.buffer,j)}}}function l(){throw new Error("method not implemented: write()")}function c(){throw new Error("method not implemented: fetch()")}function d(){var v=this.buffers&&this.buffers.length;return v?(this.flush(),this.pull()):this.fetch()}function h(v){var x=this.buffers||(this.buffers=[]);x.push(v)}function m(){var v=this.buffers||(this.buffers=[]);return v.shift()}function g(v){return x;function x(b){for(var w in v)b[w]=v[w];return b}}return EA}var yq;function aoe(){if(yq)return KR;yq=1,KR.EncodeBuffer=n;var t=xj().preset,e=ooe().FlexEncoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.write=function(r){this.codec.encode(this,r)},KR}var xq;function loe(){if(xq)return GR;xq=1,GR.encode=e;var t=aoe().EncodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return GR}var s5={},o5={},a5={},l5={},vq;function uRe(){if(vq)return l5;vq=1,l5.setExtUnpackers=i;var t=cl(),e=t.global,n,r={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function i(d){d.addExtUnpacker(14,[s,a(Error)]),d.addExtUnpacker(1,[s,a(EvalError)]),d.addExtUnpacker(2,[s,a(RangeError)]),d.addExtUnpacker(3,[s,a(ReferenceError)]),d.addExtUnpacker(4,[s,a(SyntaxError)]),d.addExtUnpacker(5,[s,a(TypeError)]),d.addExtUnpacker(6,[s,a(URIError)]),d.addExtUnpacker(10,[s,o]),d.addExtUnpacker(11,[s,l(Boolean)]),d.addExtUnpacker(12,[s,l(String)]),d.addExtUnpacker(13,[s,l(Date)]),d.addExtUnpacker(15,[s,l(Number)]),typeof Uint8Array<"u"&&(d.addExtUnpacker(17,l(Int8Array)),d.addExtUnpacker(18,l(Uint8Array)),d.addExtUnpacker(19,[c,l(Int16Array)]),d.addExtUnpacker(20,[c,l(Uint16Array)]),d.addExtUnpacker(21,[c,l(Int32Array)]),d.addExtUnpacker(22,[c,l(Uint32Array)]),d.addExtUnpacker(23,[c,l(Float32Array)]),typeof Float64Array<"u"&&d.addExtUnpacker(24,[c,l(Float64Array)]),typeof Uint8ClampedArray<"u"&&d.addExtUnpacker(25,l(Uint8ClampedArray)),d.addExtUnpacker(26,c),d.addExtUnpacker(29,[c,l(DataView)])),t.hasBuffer&&d.addExtUnpacker(27,l(e))}function s(d){return n||(n=doe().decode),n(d)}function o(d){return RegExp.apply(null,d)}function a(d){return function(h){var m=new d;for(var g in r)m[g]=h[g];return m}}function l(d){return function(h){return new d(h)}}function c(d){return new Uint8Array(d).buffer}return l5}var SA={},bq;function coe(){if(bq)return SA;bq=1;var t=ioe(),e=yj(),n=e.Uint64BE,r=e.Int64BE;SA.getReadFormat=l,SA.readUint8=b;var i=cl(),s=mj(),o=typeof Map<"u",a=!0;function l(U){var A=i.hasArrayBuffer&&U&&U.binarraybuffer,I=U&&U.int64,L=o&&U&&U.usemap,q={map:L?d:c,array:h,str:m,bin:A?v:g,ext:x,uint8:b,uint16:T,uint32:O,uint64:_(8,I?D:F),int8:w,int16:N,int32:j,int64:_(8,I?$:z),float32:_(4,G),float64:_(8,H)};return q}function c(U,A){var I={},L,q=new Array(A),K=new Array(A),te=U.codec.decode;for(L=0;L<A;L++)q[L]=te(U),K[L]=te(U);for(L=0;L<A;L++)I[q[L]]=K[L];return I}function d(U,A){var I=new Map,L,q=new Array(A),K=new Array(A),te=U.codec.decode;for(L=0;L<A;L++)q[L]=te(U),K[L]=te(U);for(L=0;L<A;L++)I.set(q[L],K[L]);return I}function h(U,A){for(var I=new Array(A),L=U.codec.decode,q=0;q<A;q++)I[q]=L(U);return I}function m(U,A){var I=U.reserve(A),L=I+A;return s.toString.call(U.buffer,"utf-8",I,L)}function g(U,A){var I=U.reserve(A),L=I+A,q=s.slice.call(U.buffer,I,L);return i.from(q)}function v(U,A){var I=U.reserve(A),L=I+A,q=s.slice.call(U.buffer,I,L);return i.Uint8Array.from(q).buffer}function x(U,A){var I=U.reserve(A+1),L=U.buffer[I++],q=I+A,K=U.codec.getExtUnpacker(L);if(!K)throw new Error("Invalid ext type: "+(L&&"0x"+L.toString(16)));var te=s.slice.call(U.buffer,I,q);return K(te)}function b(U){var A=U.reserve(1);return U.buffer[A]}function w(U){var A=U.reserve(1),I=U.buffer[A];return I&128?I-256:I}function T(U){var A=U.reserve(2),I=U.buffer;return I[A++]<<8|I[A]}function N(U){var A=U.reserve(2),I=U.buffer,L=I[A++]<<8|I[A];return L&32768?L-65536:L}function O(U){var A=U.reserve(4),I=U.buffer;return I[A++]*16777216+(I[A++]<<16)+(I[A++]<<8)+I[A]}function j(U){var A=U.reserve(4),I=U.buffer;return I[A++]<<24|I[A++]<<16|I[A++]<<8|I[A]}function _(U,A){return function(I){var L=I.reserve(U);return A.call(I.buffer,L,a)}}function F(U){return new n(this,U).toNumber()}function z(U){return new r(this,U).toNumber()}function D(U){return new n(this,U)}function $(U){return new r(this,U)}function G(U){return t.read(this,U,!1,23,4)}function H(U){return t.read(this,U,!1,52,8)}return SA}var c5={},wq;function dRe(){if(wq)return c5;wq=1;var t=coe();c5.getReadToken=e;function e(a){var l=t.getReadFormat(a);return a&&a.useraw?r(l):n(l)}function n(a){var l,c=new Array(256);for(l=0;l<=127;l++)c[l]=i(l);for(l=128;l<=143;l++)c[l]=o(l-128,a.map);for(l=144;l<=159;l++)c[l]=o(l-144,a.array);for(l=160;l<=191;l++)c[l]=o(l-160,a.str);for(c[192]=i(null),c[193]=null,c[194]=i(!1),c[195]=i(!0),c[196]=s(a.uint8,a.bin),c[197]=s(a.uint16,a.bin),c[198]=s(a.uint32,a.bin),c[199]=s(a.uint8,a.ext),c[200]=s(a.uint16,a.ext),c[201]=s(a.uint32,a.ext),c[202]=a.float32,c[203]=a.float64,c[204]=a.uint8,c[205]=a.uint16,c[206]=a.uint32,c[207]=a.uint64,c[208]=a.int8,c[209]=a.int16,c[210]=a.int32,c[211]=a.int64,c[212]=o(1,a.ext),c[213]=o(2,a.ext),c[214]=o(4,a.ext),c[215]=o(8,a.ext),c[216]=o(16,a.ext),c[217]=s(a.uint8,a.str),c[218]=s(a.uint16,a.str),c[219]=s(a.uint32,a.str),c[220]=s(a.uint16,a.array),c[221]=s(a.uint32,a.array),c[222]=s(a.uint16,a.map),c[223]=s(a.uint32,a.map),l=224;l<=255;l++)c[l]=i(l-256);return c}function r(a){var l,c=n(a).slice();for(c[217]=c[196],c[218]=c[197],c[219]=c[198],l=160;l<=191;l++)c[l]=o(l-160,a.bin);return c}function i(a){return function(){return a}}function s(a,l){return function(c){var d=a(c);return l(c,d)}}function o(a,l){return function(c){return l(c,a)}}return c5}var Eq;function vj(){if(Eq)return a5;Eq=1;var t=gj().ExtBuffer,e=uRe(),n=coe().readUint8,r=dRe(),i=GN();i.install({addExtUnpacker:a,getExtUnpacker:l,init:o}),a5.preset=o.call(i.preset);function s(c){var d=r.getReadToken(c);return h;function h(m){var g=n(m),v=d[g];if(!v)throw new Error("Invalid type: "+(g&&"0x"+g.toString(16)));return v(m)}}function o(){var c=this.options;return this.decode=s(c),c&&c.preset&&e.setExtUnpackers(this),this}function a(c,d){var h=this.extUnpackers||(this.extUnpackers=[]);h[c]=i.filter(d)}function l(c){var d=this.extUnpackers||(this.extUnpackers=[]);return d[c]||h;function h(m){return new t(m,c)}}return a5}var Sq;function uoe(){if(Sq)return o5;Sq=1,o5.DecodeBuffer=n;var t=vj().preset,e=ooe().FlexDecoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.fetch=function(){return this.codec.decode(this)},o5}var Aq;function doe(){if(Aq)return s5;Aq=1,s5.decode=e;var t=uoe().DecodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return s5}var u5={},d5={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */var Tq;function foe(){return Tq||(Tq=1,(function(t){function e(){if(!(this instanceof e))return new e}(function(n){t.exports=n;var r="listeners",i={on:o,once:a,off:l,emit:c};s(n.prototype),n.mixin=s;function s(h){for(var m in i)h[m]=i[m];return h}function o(h,m){return d(this,h).push(m),this}function a(h,m){var g=this;return v.originalListener=m,d(g,h).push(v),g;function v(){l.call(g,h,v),m.apply(this,arguments)}}function l(h,m){var g=this,v;if(!arguments.length)delete g[r];else if(m){if(v=d(g,h,!0),v){if(v=v.filter(x),!v.length)return l.call(g,h);g[r][h]=v}}else if(v=g[r],v&&(delete v[h],!Object.keys(v).length))return l.call(g);return g;function x(b){return b!==m&&b.originalListener!==m}}function c(h,m){var g=this,v=d(g,h,!0);if(!v)return!1;var x=arguments.length;if(x===1)v.forEach(w);else if(x===2)v.forEach(T);else{var b=Array.prototype.slice.call(arguments,1);v.forEach(N)}return!!v.length;function w(O){O.call(g)}function T(O){O.call(g,m)}function N(O){O.apply(g,b)}}function d(h,m,g){if(!(g&&!h[r])){var v=h[r]||(h[r]={});return v[m]||(v[m]=[])}}})(e)})(d5)),d5.exports}var kq;function fRe(){if(kq)return u5;kq=1,u5.Encoder=n;var t=foe(),e=aoe().EncodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.encode=function(r){this.write(r),this.emit("data",this.read())},n.prototype.end=function(r){arguments.length&&this.encode(r),this.flush(),this.emit("end")},u5}var f5={},Nq;function hRe(){if(Nq)return f5;Nq=1,f5.Decoder=n;var t=foe(),e=uoe().DecodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.decode=function(r){arguments.length&&this.write(r),this.flush()},n.prototype.push=function(r){this.emit("data",r)},n.prototype.end=function(r){this.decode(r),this.emit("end")},f5}var h5={},Cq;function pRe(){return Cq||(Cq=1,vj(),xj(),h5.createCodec=GN().createCodec),h5}var p5={},Pq;function mRe(){return Pq||(Pq=1,vj(),xj(),p5.codec={preset:GN().preset}),p5}var _q;function gRe(){return _q||(_q=1,Pf.encode=loe().encode,Pf.decode=doe().decode,Pf.Encoder=fRe().Encoder,Pf.Decoder=hRe().Decoder,Pf.createCodec=pRe().createCodec,Pf.codec=mRe().codec),Pf}var yRe=gRe();const xRe=bs(yRe),hoe="https://api.hyperliquid-testnet.xyz",vRe=`${hoe}/exchange`,yl=`${hoe}/info`,bRe=!1,Iq=1200,m5=60*1e3,Rq=100,g5=3,Oq=2e3,Mq={l2Book:2,allMids:2,clearinghouseState:2,orderStatus:2,spotClearinghouseState:2,exchangeStatus:2,meta:20,metaAndAssetCtxs:20,candleSnapshot:20,userFills:20,openOrders:20,userRole:60,default:20};class wRe{constructor(){this.weightHistory=[],this.requestQueue=Promise.resolve(),this.lastRequestTime=0,this.cache=new Map,this.CACHE_TTL_MS=5e3,this.PRICE_CACHE_TTL_MS=2e3,this.CANDLE_CACHE_TTL_MS=1e4,this.ASSET_CONTEXT_CACHE_TTL_MS=3e4,this.dealerLockActive=!1,this.dealerLockResolver=null,this.waitingForDealerUnlock=Promise.resolve(),this.sharedDataCache=new Map,this.SHARED_CACHE_TTL_MS=15e3,this.universeCache=[],this.lastCacheUpdate=0}acquireDealerLock(){this.dealerLockActive||(this.dealerLockActive=!0,this.waitingForDealerUnlock=new Promise(e=>{this.dealerLockResolver=e}),console.log("[Hyperliquid]  Dealer lock ACQUIRED - other requests will be skipped"))}releaseDealerLock(){this.dealerLockActive&&(this.dealerLockActive=!1,this.dealerLockResolver&&(this.dealerLockResolver(),this.dealerLockResolver=null),this.waitingForDealerUnlock=Promise.resolve(),console.log("[Hyperliquid]  Dealer lock RELEASED - other requests can proceed"))}isDealerActive(){return this.dealerLockActive}getCurrentWeight(){const n=Date.now()-m5;return this.weightHistory=this.weightHistory.filter(r=>r.timestamp>n),this.weightHistory.reduce((r,i)=>r+i.weight,0)}recordWeight(e){this.weightHistory.push({timestamp:Date.now(),weight:e})}calculateWeight(e,n){const r=Mq[e]||Mq.default;return e==="candleSnapshot"&&n?r+Math.ceil(n/60):r}async waitForBudget(e){const n=this.getCurrentWeight(),r=Iq-n;if(e<=r)return;const i=Date.now(),s=i-m5,o=[...this.weightHistory].sort((d,h)=>d.timestamp-h.timestamp);let a=e-r,l=i;for(const d of o)if(!(d.timestamp<=s)&&(a-=d.weight,l=d.timestamp+m5,a<=0))break;const c=Math.max(0,l-i);c>0&&(console.log(`[Hyperliquid] Rate budget: ${n}/${Iq} used, waiting ${(c/1e3).toFixed(1)}s for budget...`),await new Promise(d=>setTimeout(d,c+100)))}async throttledFetch(e,n,r,i,s="default",o){if(r){const c=this.cache.get(r);if(c&&Date.now()-c.timestamp<(i||this.CACHE_TTL_MS))return new Response(JSON.stringify(c.data),{status:200,headers:{"Content-Type":"application/json"}})}const a=this.calculateWeight(s,o);this.requestQueue=this.requestQueue.then(async()=>{await this.waitForBudget(a);const d=Date.now()-this.lastRequestTime;d<Rq&&await new Promise(h=>setTimeout(h,Rq-d)),this.lastRequestTime=Date.now()}),await this.requestQueue,this.recordWeight(a);let l=null;for(let c=0;c<g5;c++)try{const d=await fetch(e,n);if(d.status===429){const h=parseInt(d.headers.get("Retry-After")||"2",10),m=Math.max(h*1e3,Oq*Math.pow(2,c));console.warn(`[Hyperliquid] Rate limited (429), waiting ${m}ms before retry ${c+1}/${g5}`),await new Promise(g=>setTimeout(g,m));continue}if(d.ok&&r){const h=d.clone();try{const m=await h.json();this.cache.set(r,{data:m,timestamp:Date.now()})}catch{}}return d}catch(d){if(l=d,c<g5-1){const h=Oq*Math.pow(2,c);await new Promise(m=>setTimeout(m,h))}}throw l||new Error("Request failed after retries")}async checkHealth(){try{return await this.getMetadata(),!0}catch(e){return console.error("Hyperliquid Health Check Failed:",e),!1}}createVaultWallet(){const e=xh.createRandom();return new xh(e.privateKey)}getWalletFromPrivateKey(e){return new xh(e)}async getMarketData(e){try{const n=await this.throttledFetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"l2Book",coin:e})},`marketData:${e}`,this.PRICE_CACHE_TTL_MS,"l2Book");if(!n.ok)throw new Error(`Failed to fetch market data: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Market Data Error:",n),n}}async getOrderBookMetrics(e){var n,r,i,s,o,a,l,c;try{const d=await this.getMarketData(e),h=((n=d.levels)==null?void 0:n[0])||[],m=((r=d.levels)==null?void 0:r[1])||[];if(h.length===0||m.length===0)throw new Error(`No order book data for ${e}`);const g=parseFloat(((i=h[0])==null?void 0:i.px)||"0"),v=parseFloat(((s=m[0])==null?void 0:s.px)||"0"),x=(g+v)/2,b=v-g,w=x>0?b/x*100:0,T=5;let N=0,O=0,j=0,_=0;const F=[],z=[];for(let I=0;I<h.length;I++){const L=parseFloat(((o=h[I])==null?void 0:o.px)||"0"),q=parseFloat(((a=h[I])==null?void 0:a.sz)||"0"),K=L*q;I<T&&(N+=K),j+=K,F.push({price:L,volume:K})}for(let I=0;I<m.length;I++){const L=parseFloat(((l=m[I])==null?void 0:l.px)||"0"),q=parseFloat(((c=m[I])==null?void 0:c.sz)||"0"),K=L*q;I<T&&(O+=K),_+=K,z.push({price:L,volume:K})}const D=_>0?j/_:1,$=.2,G=.2;let H,U;for(const{price:I,volume:L}of F)if(j>0&&L/j>$){H=I;break}for(const{price:I,volume:L}of z)if(_>0&&L/_>G){U=I;break}const A={bidAskSpread:parseFloat(w.toFixed(4)),bidAskSpreadUSDC:parseFloat(b.toFixed(4)),imbalanceRatio:parseFloat(D.toFixed(3)),nearBidDepth:parseFloat(N.toFixed(2)),nearAskDepth:parseFloat(O.toFixed(2)),totalBidDepth:parseFloat(j.toFixed(2)),totalAskDepth:parseFloat(_.toFixed(2)),bidWallPrice:H,askWallPrice:U,midPrice:parseFloat(x.toFixed(6)),bestBid:parseFloat(g.toFixed(6)),bestAsk:parseFloat(v.toFixed(6))};return console.log(`[Hyperliquid] OrderBook ${e}: Spread=${A.bidAskSpread}%, Imbalance=${A.imbalanceRatio}, NearDepth(B/A)=${A.nearBidDepth}/${A.nearAskDepth}`),A}catch(d){return console.error(`Hyperliquid OrderBook Metrics Error for ${e}:`,d),{bidAskSpread:0,bidAskSpreadUSDC:0,imbalanceRatio:1,nearBidDepth:0,nearAskDepth:0,totalBidDepth:0,totalAskDepth:0,midPrice:0,bestBid:0,bestAsk:0}}}async getUserState(e){try{const n=await this.throttledFetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"clearinghouseState",user:e})},`userState:${e}`,this.CACHE_TTL_MS,"clearinghouseState");if(!n.ok)throw new Error(`Failed to fetch user state: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid User State Error:",n),n}}async getOpenOrders(e){try{const n=await this.throttledFetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"openOrders",user:e})},`openOrders:${e}`,this.CACHE_TTL_MS,"openOrders");if(!n.ok)throw new Error(`Failed to fetch open orders: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Open Orders Error:",n),n}}async getUserFills(e,n=20){try{const r=await this.throttledFetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFills",user:e})},`userFills:${e}`,this.CACHE_TTL_MS,"userFills");if(!r.ok)throw new Error(`Failed to fetch user fills: ${r.statusText}`);const i=await r.json();return Array.isArray(i)?i.slice(0,n):[]}catch(r){return console.error("Hyperliquid User Fills Error:",r),[]}}async getUserLedgerUpdates(e){try{const n=await this.throttledFetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userNonFundingLedgerUpdates",user:e})},`ledgerUpdates:${e}`,this.CACHE_TTL_MS,"default");if(!n.ok)throw new Error(`Failed to fetch ledger updates: ${n.statusText}`);return await n.json()}catch(n){return console.error("Hyperliquid Ledger Updates Error:",n),[]}}async getCandles(e,n="1h",r=100){try{const i=Date.now(),s=this.intervalToMs(n),o=i-s*r,a=await this.throttledFetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"candleSnapshot",req:{coin:e,interval:n,startTime:o}})},`candles:${e}:${n}:${r}`,this.CANDLE_CACHE_TTL_MS,"candleSnapshot",r);if(!a.ok)throw new Error(`Failed to fetch candles: ${a.statusText}`);const l=await a.json();return Array.isArray(l)?l.map(c=>({time:c.t||c.time,open:parseFloat(c.o||c.open),high:parseFloat(c.h||c.high),low:parseFloat(c.l||c.low),close:parseFloat(c.c||c.close),volume:parseFloat(c.v||c.volume||"0")})):l.t&&Array.isArray(l.t)?l.t.map((c,d)=>{var h;return{time:c,open:parseFloat(l.o[d]),high:parseFloat(l.h[d]),low:parseFloat(l.l[d]),close:parseFloat(l.c[d]),volume:parseFloat(((h=l.v)==null?void 0:h[d])||"0")}}):[]}catch(i){return console.error("Hyperliquid Candles Error:",i),[]}}async getCurrentPrice(e){var n,r;try{const i=await this.getMarketData(e),s=parseFloat(((n=i.levels[0][0])==null?void 0:n.px)||"0"),o=parseFloat(((r=i.levels[1][0])==null?void 0:r.px)||"0");return(s+o)/2}catch(i){throw console.error(`Hyperliquid Price Error for ${e}:`,i),i}}intervalToMs(e){return{"1m":6e4,"5m":3e5,"15m":9e5,"1h":36e5,"4h":144e5,"1d":864e5,"1D":864e5}[e]||3600*1e3}async getMetadata(){try{const e=await this.throttledFetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"metadata",6e4,"meta");if(!e.ok)throw new Error(`Failed to fetch metadata: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Hyperliquid Metadata Error:",e),e}}async getAllAvailableAssets(){try{return(await this.getMetadata()).universe.filter(n=>!n.isDelisted).map(n=>n.name)}catch(e){throw console.error("Hyperliquid Get Available Assets Error:",e),e}}async isValidAsset(e){try{return(await this.getAllAvailableAssets()).some(r=>r.toLowerCase()===e.toLowerCase())}catch(n){return console.error("Hyperliquid Asset Validation Error:",n),!0}}async signL1Action(e,n,r,i,s){const o=this.actionHash(n,r,i,s),a=this.constructPhantomAgent(o,bRe),l={name:"Exchange",version:"1",chainId:1337,verifyingContract:"0x0000000000000000000000000000000000000000"},c={Agent:[{name:"source",type:"string"},{name:"connectionId",type:"bytes32"}]},d=await e.signTypedData(l,c,a),h=lo.from(d);return console.log("[Hyperliquid]  Signing Action:"),console.log("  - Domain:",JSON.stringify(l)),console.log("  - Types:",JSON.stringify(c)),console.log("  - Phantom Agent:",JSON.stringify(a)),console.log("  - Signature:",d),{r:h.r,s:h.s,v:h.v}}actionHash(e,n,r,i){let s=xRe.encode(e);const o=an.alloc(8);if(o.writeBigUInt64BE(BigInt(r),0),s=an.concat([s,o]),n===null)s=an.concat([s,an.from([0])]);else{s=an.concat([s,an.from([1])]);const a=an.from(n.replace("0x",""),"hex");s=an.concat([s,a])}if(i!==void 0){s=an.concat([s,an.from([0])]);const a=an.alloc(8);a.writeBigUInt64BE(BigInt(i),0),s=an.concat([s,a])}return Kn(s)}constructPhantomAgent(e,n){return{source:n?"a":"b",connectionId:e}}floatToWire(e){return e===0?"0":e.toFixed(8).replace(/\.?0+$/,"")}async postAction(e,n,r){var l,c;const i=await this.signL1Action(n,e,null,r),s={action:e,nonce:r,signature:i,vaultAddress:null};console.log("[Hyperliquid]  Sending action:",JSON.stringify({action:e,nonce:r},null,2)),console.log("[Hyperliquid]  Payload:",JSON.stringify(s,null,2));const o=await fetch(vRe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok){let d=`HTTP ${o.status}: ${o.statusText}`;try{const h=await o.text();console.error("[Hyperliquid] Error response:",h);try{const m=JSON.parse(h);d=`Exchange API Error (${o.status}): ${JSON.stringify(m)}`}catch{d=`Exchange API Error (${o.status}): ${h}`}}catch(h){console.error("[Hyperliquid] Failed to read error response:",h)}throw new Error(d)}const a=await o.json();if(console.log("[Hyperliquid]  Raw Response:",JSON.stringify(a,null,2)),a.status!=="ok")throw new Error(`Exchange API Error: ${JSON.stringify(a.response||a)}`);if((c=(l=a.response)==null?void 0:l.data)!=null&&c.statuses){const h=a.response.data.statuses.find(m=>m.error);if(h)throw new Error(`Order Failed: ${h.error}`)}return a}async placeOrder(e,n,r,i,s,o){const a=Date.now(),l=await this.getAssetIndex(n),c=(o==null?void 0:o.orderType)||"limit",d=(o==null?void 0:o.reduceOnly)||!1;let h;c==="market"?h={market:{}}:h={limit:{tif:(o==null?void 0:o.tif)||(c==="ioc"?"Ioc":c==="alo"?"Alo":"Gtc")}};let m="0";if(s){const b=await this.getAssetDecimals(n),w=Math.max(0,6-b);let T=parseFloat(s.toFixed(w));T=parseFloat(T.toPrecision(5)),T=parseFloat(T.toFixed(w)),m=this.floatToWire(T),console.log(`[Hyperliquid] Price rounding: ${s} -> ${m} (maxDecimals=${w}, szDecimals=${b})`)}const g={a:l,b:r,p:m,s:this.floatToWire(i),r:d,t:h};o!=null&&o.cloid&&(g.c=o.cloid);const v={type:"order",orders:[g],grouping:"na"},x=await this.postAction(v,e,a);return(o!=null&&o.stopLoss||o!=null&&o.takeProfit)&&await this.placeTpSlOrders(e,n,r,i,o.stopLoss,o.takeProfit,o.cloid),x}async placeTpSlOrders(e,n,r,i,s,o,a){const l=await this.getAssetIndex(n),d=6-await this.getAssetDecimals(n),h=v=>{let x=parseFloat(v.toFixed(d));return x=parseFloat(x.toPrecision(5)),x=parseFloat(x.toFixed(d)),this.floatToWire(x)},m=()=>{const v=new Uint8Array(16);return crypto.getRandomValues(v),"0x"+Array.from(v,x=>x.toString(16).padStart(2,"0")).join("")},g=[];if(s){const v=h(s),x=m();console.log(`[HL TP/SL] SL Price: ${s} -> Rounded: ${v}, cloid: ${x}`),g.push({a:l,b:!r,p:v,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:v,tpsl:"sl"}},c:x})}if(o){const v=h(o),x=m();console.log(`[HL TP/SL] TP Price: ${o} -> Rounded: ${v}, cloid: ${x}`),g.push({a:l,b:!r,p:v,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:v,tpsl:"tp"}},c:x})}if(g.length>0){const v=Date.now(),x={type:"order",orders:g,grouping:"positionTpsl"};await this.postAction(x,e,v)}}async cancelOrder(e,n,r){const i=Date.now(),s={type:"cancel",cancels:[{a:await this.getAssetIndex(n),o:r}]};return await this.postAction(s,e,i)}async updateLeverage(e,n,r,i){const s=Date.now(),o={type:"updateLeverage",asset:await this.getAssetIndex(n),isCross:i,leverage:r};return await this.postAction(o,e,s)}async updateIsolatedMargin(e,n,r,i){const s=Date.now(),o=Math.floor(i*1e6),a={type:"updateIsolatedMargin",asset:await this.getAssetIndex(n),isBuy:r,ntli:o};return console.log(`[Hyperliquid] Updating Isolated Margin: ${i} USDC -> ntli: ${o} for ${n} (isBuy: ${r})`),await this.postAction(a,e,s)}async closePosition(e,n,r,i="market",s){const a=(await this.getUserState(e.address)).assetPositions.find(g=>g.position.coin===n);if(!a||parseFloat(a.position.szi)===0)throw new Error(`No open position for ${n}`);const l=parseFloat(a.position.szi),c=l<0,d=r||Math.abs(l);let h=i,m=s;if(i==="market"){const g=await this.getMarketData(n),v=parseFloat(g.levels[0][0].px),x=parseFloat(g.levels[1][0].px),b=c?x:v,w=.01;let T=c?b*(1+w):b*(1-w);const O=6-await this.getAssetDecimals(n);let j=parseFloat(T.toFixed(O));j=parseFloat(j.toPrecision(5)),m=parseFloat(j.toFixed(O)),h="ioc",console.log(`[HL Close] Market Close -> Base: ${b}, Price: ${m} `)}return await this.placeOrder(e,n,c,d,m,{orderType:h==="market"?"ioc":h,reduceOnly:!0})}async withdrawUSDC(e,n,r){if(r<=1)throw new Error("Withdrawal amount must be greater than $1 to cover the withdrawal fee");const i=Date.now(),s={type:"usdSend",hyperliquidChain:"Testnet",signatureChainId:"0xa4b1",destination:n,amount:this.floatToWire(r),time:i};return await this.postAction(s,e,i)}async getAssetIndex(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return this.universeCache.indexOf(n)}async getAssetDecimals(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return n.szDecimals}async updateUniverseCache(){const e=Date.now();if(this.universeCache.length>0&&e-this.lastCacheUpdate<300*1e3)return;const r=await(await this.throttledFetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"universeCache",300*1e3)).json();this.universeCache=r.universe,this.lastCacheUpdate=e}async getAssetContexts(){try{const e=await this.throttledFetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"metaAndAssetCtxs"})},"assetContexts",this.ASSET_CONTEXT_CACHE_TTL_MS,"metaAndAssetCtxs");if(!e.ok)throw new Error(`Failed to fetch asset contexts: ${e.statusText}`);const n=await e.json();return Array.isArray(n)&&n.length>1?n[1]:[]}catch(e){return console.error("Hyperliquid Asset Contexts Error:",e),[]}}async getFundingRate(e){try{const n=await this.getAssetContexts();await this.updateUniverseCache();const r=this.universeCache.findIndex(s=>s.name===e);if(r===-1)return null;const i=n[r];return i?{funding:parseFloat(i.funding||"0"),premium:parseFloat(i.premium||"0"),nextFunding:parseFloat(i.funding||"0")}:null}catch(n){return console.error(`Hyperliquid Funding Rate Error for ${e}:`,n),null}}async getUserFees(e){try{const n=await fetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFees",user:e})});if(!n.ok)throw new Error(`Failed to fetch user fees: ${n.statusText}`);const r=await n.json();return{makerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userAddRate)||"0.0002"),takerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userRemoveRate)||"0.0005"),dailyVolume:parseFloat((r==null?void 0:r.dailyUserVlm)||"0"),feeSchedule:(r==null?void 0:r.feeSchedule)||null}}catch(n){return console.error("Hyperliquid User Fees Error:",n),{makerFee:2e-4,takerFee:5e-4,dailyVolume:0,feeSchedule:null}}}async getUserFundingHistory(e,n,r){try{const i=Date.now(),s={type:"userFunding",user:e,startTime:n||i-1440*60*1e3};r&&(s.endTime=r);const o=await fetch(yl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Failed to fetch funding history: ${o.statusText}`);return await o.json()}catch(i){return console.error("Hyperliquid Funding History Error:",i),[]}}calculateBreakevenPrice(e,n,r,i=2e-4,s=5e-4,o=0,a=8){const l=s,c=s,d=a/8,h=Math.abs(o)*d,m=l+c+h,g=e*m,v=r?e+g:e-g,x=.01,b=r?v*(1+x):v*(1-x);return{breakevenPrice:v,minProfitPrice:b,totalCostPercent:m,costBreakdown:{entryFeePercent:l,exitFeePercent:c,fundingCostPercent:h}}}async getUserStateShared(e){const n=`shared:userState:${e}`,r=this.sharedDataCache.get(n);if(r&&Date.now()-r.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userState"),r.data;const i=await this.getUserState(e);return this.sharedDataCache.set(n,{data:i,timestamp:Date.now()}),i}async getUserFillsShared(e,n=20){const r=`shared:userFills:${e}`,i=this.sharedDataCache.get(r);if(i&&Date.now()-i.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userFills"),i.data;const s=await this.getUserFills(e,n);return this.sharedDataCache.set(r,{data:s,timestamp:Date.now()}),s}clearSharedCache(){this.sharedDataCache.clear(),console.log("[Hyperliquid]  Shared cache cleared")}}const zt=new wRe;function mn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Lq(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function iv(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Lq(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Lq(t[i],null)}}}}function Ir(...t){return S.useCallback(iv(...t),t)}function ERe(t,e){const n=S.createContext(e),r=s=>{const{children:o,...a}=s,l=S.useMemo(()=>a,Object.values(a));return u.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function r0(t,e=[]){let n=[];function r(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:m,children:g,...v}=h,x=((w=m==null?void 0:m[t])==null?void 0:w[l])||a,b=S.useMemo(()=>v,Object.values(v));return u.jsx(x.Provider,{value:b,children:g})};c.displayName=s+"Provider";function d(h,m){var x;const g=((x=m==null?void 0:m[t])==null?void 0:x[l])||a,v=S.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,d]}const i=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,SRe(i,...e)]}function SRe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var i0=ste();const ARe=bs(i0);function TRe(t){const e=kRe(t),n=S.forwardRef((r,i)=>{const{children:s,...o}=r,a=S.Children.toArray(s),l=a.find(CRe);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function kRe(t){const e=S.forwardRef((n,r)=>{const{children:i,...s}=n;if(S.isValidElement(i)){const o=_Re(i),a=PRe(s,i.props);return i.type!==S.Fragment&&(a.ref=r?iv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var NRe=Symbol("radix.slottable");function CRe(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===NRe}function PRe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function _Re(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var IRe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mn=IRe.reduce((t,e)=>{const n=TRe(`Primitive.${e}`),r=S.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function RRe(t,e){t&&i0.flushSync(()=>t.dispatchEvent(e))}function Nh(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function ORe(t,e=globalThis==null?void 0:globalThis.document){const n=Nh(t);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var MRe="DismissableLayer",BM="dismissableLayer.update",LRe="dismissableLayer.pointerDownOutside",DRe="dismissableLayer.focusOutside",Dq,poe=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),KN=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(poe),[d,h]=S.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=S.useState({}),v=Ir(e,F=>h(F)),x=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(b),T=d?x.indexOf(d):-1,N=c.layersWithOutsidePointerEventsDisabled.size>0,O=T>=w,j=URe(F=>{const z=F.target,D=[...c.branches].some($=>$.contains(z));!O||D||(i==null||i(F),o==null||o(F),F.defaultPrevented||a==null||a())},m),_=FRe(F=>{const z=F.target;[...c.branches].some($=>$.contains(z))||(s==null||s(F),o==null||o(F),F.defaultPrevented||a==null||a())},m);return ORe(F=>{T===c.layers.size-1&&(r==null||r(F),!F.defaultPrevented&&a&&(F.preventDefault(),a()))},m),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Dq=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),jq(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Dq)}},[d,m,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),jq())},[d,c]),S.useEffect(()=>{const F=()=>g({});return document.addEventListener(BM,F),()=>document.removeEventListener(BM,F)},[]),u.jsx(Mn.div,{...l,ref:v,style:{pointerEvents:N?O?"auto":"none":void 0,...t.style},onFocusCapture:mn(t.onFocusCapture,_.onFocusCapture),onBlurCapture:mn(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:mn(t.onPointerDownCapture,j.onPointerDownCapture)})});KN.displayName=MRe;var jRe="DismissableLayerBranch",BRe=S.forwardRef((t,e)=>{const n=S.useContext(poe),r=S.useRef(null),i=Ir(e,r);return S.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),u.jsx(Mn.div,{...t,ref:i})});BRe.displayName=jRe;function URe(t,e=globalThis==null?void 0:globalThis.document){const n=Nh(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){moe(LRe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function FRe(t,e=globalThis==null?void 0:globalThis.document){const n=Nh(t),r=S.useRef(!1);return S.useEffect(()=>{const i=s=>{s.target&&!r.current&&moe(DRe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function jq(){const t=new CustomEvent(BM);document.dispatchEvent(t)}function moe(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?RRe(i,s):i.dispatchEvent(s)}var Hs=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},$Re=xN[" useId ".trim().toString()]||(()=>{}),zRe=0;function dd(t){const[e,n]=S.useState($Re());return Hs(()=>{n(r=>r??String(zRe++))},[t]),e?`radix-${e}`:""}const VRe=["top","right","bottom","left"],Ch=Math.min,sa=Math.max,I2=Math.round,AA=Math.floor,Bc=t=>({x:t,y:t}),HRe={left:"right",right:"left",bottom:"top",top:"bottom"},qRe={start:"end",end:"start"};function UM(t,e,n){return sa(t,Ch(e,n))}function Td(t,e){return typeof t=="function"?t(e):t}function kd(t){return t.split("-")[0]}function sv(t){return t.split("-")[1]}function bj(t){return t==="x"?"y":"x"}function wj(t){return t==="y"?"height":"width"}const GRe=new Set(["top","bottom"]);function Ic(t){return GRe.has(kd(t))?"y":"x"}function Ej(t){return bj(Ic(t))}function KRe(t,e,n){n===void 0&&(n=!1);const r=sv(t),i=Ej(t),s=wj(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=R2(o)),[o,R2(o)]}function WRe(t){const e=R2(t);return[FM(t),e,FM(e)]}function FM(t){return t.replace(/start|end/g,e=>qRe[e])}const Bq=["left","right"],Uq=["right","left"],YRe=["top","bottom"],JRe=["bottom","top"];function XRe(t,e,n){switch(t){case"top":case"bottom":return n?e?Uq:Bq:e?Bq:Uq;case"left":case"right":return e?YRe:JRe;default:return[]}}function QRe(t,e,n,r){const i=sv(t);let s=XRe(kd(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(FM)))),s}function R2(t){return t.replace(/left|right|bottom|top/g,e=>HRe[e])}function ZRe(t){return{top:0,right:0,bottom:0,left:0,...t}}function goe(t){return typeof t!="number"?ZRe(t):{top:t,right:t,bottom:t,left:t}}function O2(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Fq(t,e,n){let{reference:r,floating:i}=t;const s=Ic(e),o=Ej(e),a=wj(o),l=kd(e),c=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-i.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-i.width,y:h};break;default:g={x:r.x,y:r.y}}switch(sv(e)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const e5e=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=Fq(c,r,l),m=r,g={},v=0;for(let x=0;x<a.length;x++){const{name:b,fn:w}=a[x],{x:T,y:N,data:O,reset:j}=await w({x:d,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});d=T??d,h=N??h,g={...g,[b]:{...g[b],...O}},j&&v<=50&&(v++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(c=j.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):j.rects),{x:d,y:h}=Fq(c,m,l)),x=-1)}return{x:d,y:h,placement:m,strategy:i,middlewareData:g}};async function Xw(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Td(e,t),v=goe(g),b=a[m?h==="floating"?"reference":"floating":h],w=O2(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),T=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),O=await(s.isElement==null?void 0:s.isElement(N))?await(s.getScale==null?void 0:s.getScale(N))||{x:1,y:1}:{x:1,y:1},j=O2(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:N,strategy:l}):T);return{top:(w.top-j.top+v.top)/O.y,bottom:(j.bottom-w.bottom+v.bottom)/O.y,left:(w.left-j.left+v.left)/O.x,right:(j.right-w.right+v.right)/O.x}}const t5e=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Td(t,e)||{};if(c==null)return{};const h=goe(d),m={x:n,y:r},g=Ej(i),v=wj(g),x=await o.getDimensions(c),b=g==="y",w=b?"top":"left",T=b?"bottom":"right",N=b?"clientHeight":"clientWidth",O=s.reference[v]+s.reference[g]-m[g]-s.floating[v],j=m[g]-s.reference[g],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let F=_?_[N]:0;(!F||!await(o.isElement==null?void 0:o.isElement(_)))&&(F=a.floating[N]||s.floating[v]);const z=O/2-j/2,D=F/2-x[v]/2-1,$=Ch(h[w],D),G=Ch(h[T],D),H=$,U=F-x[v]-G,A=F/2-x[v]/2+z,I=UM(H,A,U),L=!l.arrow&&sv(i)!=null&&A!==I&&s.reference[v]/2-(A<H?$:G)-x[v]/2<0,q=L?A<H?A-H:A-U:0;return{[g]:m[g]+q,data:{[g]:I,centerOffset:A-I-q,...L&&{alignmentOffset:q}},reset:L}}}),n5e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...b}=Td(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const w=kd(i),T=Ic(a),N=kd(a)===a,O=await(l.isRTL==null?void 0:l.isRTL(c.floating)),j=m||(N||!x?[R2(a)]:WRe(a)),_=v!=="none";!m&&_&&j.push(...QRe(a,x,v,O));const F=[a,...j],z=await Xw(e,b),D=[];let $=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&D.push(z[w]),h){const A=KRe(i,o,O);D.push(z[A[0]],z[A[1]])}if($=[...$,{placement:i,overflows:D}],!D.every(A=>A<=0)){var G,H;const A=(((G=s.flip)==null?void 0:G.index)||0)+1,I=F[A];if(I&&(!(h==="alignment"?T!==Ic(I):!1)||$.every(K=>Ic(K.placement)===T?K.overflows[0]>0:!0)))return{data:{index:A,overflows:$},reset:{placement:I}};let L=(H=$.filter(q=>q.overflows[0]<=0).sort((q,K)=>q.overflows[1]-K.overflows[1])[0])==null?void 0:H.placement;if(!L)switch(g){case"bestFit":{var U;const q=(U=$.filter(K=>{if(_){const te=Ic(K.placement);return te===T||te==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(te=>te>0).reduce((te,Y)=>te+Y,0)]).sort((K,te)=>K[1]-te[1])[0])==null?void 0:U[0];q&&(L=q);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function $q(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function zq(t){return VRe.some(e=>t[e]>=0)}const r5e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Td(t,e);switch(r){case"referenceHidden":{const s=await Xw(e,{...i,elementContext:"reference"}),o=$q(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:zq(o)}}}case"escaped":{const s=await Xw(e,{...i,altBoundary:!0}),o=$q(s,n.floating);return{data:{escapedOffsets:o,escaped:zq(o)}}}default:return{}}}}},yoe=new Set(["left","top"]);async function i5e(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=kd(n),a=sv(n),l=Ic(n)==="y",c=yoe.has(o)?-1:1,d=s&&l?-1:1,h=Td(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*d,y:m*c}:{x:m*c,y:g*d}}const s5e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await i5e(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},o5e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:w,y:T}=b;return{x:w,y:T}}},...l}=Td(t,e),c={x:n,y:r},d=await Xw(e,l),h=Ic(kd(i)),m=bj(h);let g=c[m],v=c[h];if(s){const b=m==="y"?"top":"left",w=m==="y"?"bottom":"right",T=g+d[b],N=g-d[w];g=UM(T,g,N)}if(o){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",T=v+d[b],N=v-d[w];v=UM(T,v,N)}const x=a.fn({...e,[m]:g,[h]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[m]:s,[h]:o}}}}}},a5e=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Td(t,e),d={x:n,y:r},h=Ic(i),m=bj(h);let g=d[m],v=d[h];const x=Td(a,e),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const N=m==="y"?"height":"width",O=s.reference[m]-s.floating[N]+b.mainAxis,j=s.reference[m]+s.reference[N]-b.mainAxis;g<O?g=O:g>j&&(g=j)}if(c){var w,T;const N=m==="y"?"width":"height",O=yoe.has(kd(i)),j=s.reference[h]-s.floating[N]+(O&&((w=o.offset)==null?void 0:w[h])||0)+(O?0:b.crossAxis),_=s.reference[h]+s.reference[N]+(O?0:((T=o.offset)==null?void 0:T[h])||0)-(O?b.crossAxis:0);v<j?v=j:v>_&&(v=_)}return{[m]:g,[h]:v}}}},l5e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Td(t,e),d=await Xw(e,c),h=kd(i),m=sv(i),g=Ic(i)==="y",{width:v,height:x}=s.floating;let b,w;h==="top"||h==="bottom"?(b=h,w=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,b=m==="end"?"top":"bottom");const T=x-d.top-d.bottom,N=v-d.left-d.right,O=Ch(x-d[b],T),j=Ch(v-d[w],N),_=!e.middlewareData.shift;let F=O,z=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(z=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(F=T),_&&!m){const $=sa(d.left,0),G=sa(d.right,0),H=sa(d.top,0),U=sa(d.bottom,0);g?z=v-2*($!==0||G!==0?$+G:sa(d.left,d.right)):F=x-2*(H!==0||U!==0?H+U:sa(d.top,d.bottom))}await l({...e,availableWidth:z,availableHeight:F});const D=await o.getDimensions(a.floating);return v!==D.width||x!==D.height?{reset:{rects:!0}}:{}}}};function WN(){return typeof window<"u"}function ov(t){return xoe(t)?(t.nodeName||"").toLowerCase():"#document"}function ua(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Yc(t){var e;return(e=(xoe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function xoe(t){return WN()?t instanceof Node||t instanceof ua(t).Node:!1}function Kl(t){return WN()?t instanceof Element||t instanceof ua(t).Element:!1}function zc(t){return WN()?t instanceof HTMLElement||t instanceof ua(t).HTMLElement:!1}function Vq(t){return!WN()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ua(t).ShadowRoot}const c5e=new Set(["inline","contents"]);function sE(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Wl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!c5e.has(i)}const u5e=new Set(["table","td","th"]);function d5e(t){return u5e.has(ov(t))}const f5e=[":popover-open",":modal"];function YN(t){return f5e.some(e=>{try{return t.matches(e)}catch{return!1}})}const h5e=["transform","translate","scale","rotate","perspective"],p5e=["transform","translate","scale","rotate","perspective","filter"],m5e=["paint","layout","strict","content"];function Sj(t){const e=Aj(),n=Kl(t)?Wl(t):t;return h5e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||p5e.some(r=>(n.willChange||"").includes(r))||m5e.some(r=>(n.contain||"").includes(r))}function g5e(t){let e=Ph(t);for(;zc(e)&&!_x(e);){if(Sj(e))return e;if(YN(e))return null;e=Ph(e)}return null}function Aj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const y5e=new Set(["html","body","#document"]);function _x(t){return y5e.has(ov(t))}function Wl(t){return ua(t).getComputedStyle(t)}function JN(t){return Kl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ph(t){if(ov(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Vq(t)&&t.host||Yc(t);return Vq(e)?e.host:e}function voe(t){const e=Ph(t);return _x(e)?t.ownerDocument?t.ownerDocument.body:t.body:zc(e)&&sE(e)?e:voe(e)}function Qw(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=voe(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ua(i);if(s){const a=$M(o);return e.concat(o,o.visualViewport||[],sE(i)?i:[],a&&n?Qw(a):[])}return e.concat(i,Qw(i,[],n))}function $M(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function boe(t){const e=Wl(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=zc(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=I2(n)!==s||I2(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Tj(t){return Kl(t)?t:t.contextElement}function fy(t){const e=Tj(t);if(!zc(e))return Bc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=boe(e);let o=(s?I2(n.width):n.width)/r,a=(s?I2(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const x5e=Bc(0);function woe(t){const e=ua(t);return!Aj()||!e.visualViewport?x5e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function v5e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ua(t)?!1:e}function Bm(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Tj(t);let o=Bc(1);e&&(r?Kl(r)&&(o=fy(r)):o=fy(t));const a=v5e(s,n,r)?woe(s):Bc(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const m=ua(s),g=r&&Kl(r)?ua(r):r;let v=m,x=$M(v);for(;x&&r&&g!==v;){const b=fy(x),w=x.getBoundingClientRect(),T=Wl(x),N=w.left+(x.clientLeft+parseFloat(T.paddingLeft))*b.x,O=w.top+(x.clientTop+parseFloat(T.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,h*=b.y,l+=N,c+=O,v=ua(x),x=$M(v)}}return O2({width:d,height:h,x:l,y:c})}function XN(t,e){const n=JN(t).scrollLeft;return e?e.left+n:Bm(Yc(t)).left+n}function Eoe(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-XN(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function b5e(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Yc(r),a=e?YN(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Bc(1);const d=Bc(0),h=zc(r);if((h||!h&&!s)&&((ov(r)!=="body"||sE(o))&&(l=JN(r)),zc(r))){const g=Bm(r);c=fy(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=o&&!h&&!s?Eoe(o,l):Bc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+m.x,y:n.y*c.y-l.scrollTop*c.y+d.y+m.y}}function w5e(t){return Array.from(t.getClientRects())}function E5e(t){const e=Yc(t),n=JN(t),r=t.ownerDocument.body,i=sa(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=sa(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+XN(t);const a=-n.scrollTop;return Wl(r).direction==="rtl"&&(o+=sa(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const Hq=25;function S5e(t,e){const n=ua(t),r=Yc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const d=Aj();(!d||d&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=XN(r);if(c<=0){const d=r.ownerDocument,h=d.body,m=getComputedStyle(h),g=d.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(r.clientWidth-h.clientWidth-g);v<=Hq&&(s-=v)}else c<=Hq&&(s+=c);return{width:s,height:o,x:a,y:l}}const A5e=new Set(["absolute","fixed"]);function T5e(t,e){const n=Bm(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=zc(t)?fy(t):Bc(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function qq(t,e,n){let r;if(e==="viewport")r=S5e(t,n);else if(e==="document")r=E5e(Yc(t));else if(Kl(e))r=T5e(e,n);else{const i=woe(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return O2(r)}function Soe(t,e){const n=Ph(t);return n===e||!Kl(n)||_x(n)?!1:Wl(n).position==="fixed"||Soe(n,e)}function k5e(t,e){const n=e.get(t);if(n)return n;let r=Qw(t,[],!1).filter(a=>Kl(a)&&ov(a)!=="body"),i=null;const s=Wl(t).position==="fixed";let o=s?Ph(t):t;for(;Kl(o)&&!_x(o);){const a=Wl(o),l=Sj(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&A5e.has(i.position)||sE(o)&&!l&&Soe(t,o))?r=r.filter(d=>d!==o):i=a,o=Ph(o)}return e.set(t,r),r}function N5e(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?YN(e)?[]:k5e(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=qq(e,d,i);return c.top=sa(h.top,c.top),c.right=Ch(h.right,c.right),c.bottom=Ch(h.bottom,c.bottom),c.left=sa(h.left,c.left),c},qq(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function C5e(t){const{width:e,height:n}=boe(t);return{width:e,height:n}}function P5e(t,e,n){const r=zc(e),i=Yc(e),s=n==="fixed",o=Bm(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Bc(0);function c(){l.x=XN(i)}if(r||!r&&!s)if((ov(e)!=="body"||sE(i))&&(a=JN(e)),r){const g=Bm(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();s&&!r&&i&&c();const d=i&&!r&&!s?Eoe(i,a):Bc(0),h=o.left+a.scrollLeft-l.x-d.x,m=o.top+a.scrollTop-l.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function y5(t){return Wl(t).position==="static"}function Gq(t,e){if(!zc(t)||Wl(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Yc(t)===n&&(n=n.ownerDocument.body),n}function Aoe(t,e){const n=ua(t);if(YN(t))return n;if(!zc(t)){let i=Ph(t);for(;i&&!_x(i);){if(Kl(i)&&!y5(i))return i;i=Ph(i)}return n}let r=Gq(t,e);for(;r&&d5e(r)&&y5(r);)r=Gq(r,e);return r&&_x(r)&&y5(r)&&!Sj(r)?n:r||g5e(t)||n}const _5e=async function(t){const e=this.getOffsetParent||Aoe,n=this.getDimensions,r=await n(t.floating);return{reference:P5e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function I5e(t){return Wl(t).direction==="rtl"}const R5e={convertOffsetParentRelativeRectToViewportRelativeRect:b5e,getDocumentElement:Yc,getClippingRect:N5e,getOffsetParent:Aoe,getElementRects:_5e,getClientRects:w5e,getDimensions:C5e,getScale:fy,isElement:Kl,isRTL:I5e};function Toe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function O5e(t,e){let n=null,r;const i=Yc(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:d,top:h,width:m,height:g}=c;if(a||e(),!m||!g)return;const v=AA(h),x=AA(i.clientWidth-(d+m)),b=AA(i.clientHeight-(h+g)),w=AA(d),N={rootMargin:-v+"px "+-x+"px "+-b+"px "+-w+"px",threshold:sa(0,Ch(1,l))||1};let O=!0;function j(_){const F=_[0].intersectionRatio;if(F!==l){if(!O)return o();F?o(!1,F):r=setTimeout(()=>{o(!1,1e-7)},1e3)}F===1&&!Toe(c,t.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(j,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(j,N)}n.observe(t)}return o(!0),s}function M5e(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Tj(t),d=i||s?[...c?Qw(c):[],...Qw(e)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const h=c&&a?O5e(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(w=>{let[T]=w;T&&T.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var N;(N=g)==null||N.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let v,x=l?Bm(t):null;l&&b();function b(){const w=Bm(t);x&&!Toe(x,w)&&n(),x=w,v=requestAnimationFrame(b)}return n(),()=>{var w;d.forEach(T=>{i&&T.removeEventListener("scroll",n),s&&T.removeEventListener("resize",n)}),h==null||h(),(w=g)==null||w.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const L5e=s5e,D5e=o5e,j5e=n5e,B5e=l5e,U5e=r5e,Kq=t5e,F5e=a5e,$5e=(t,e,n)=>{const r=new Map,i={platform:R5e,...n},s={...i.platform,_c:r};return e5e(t,e,{...i,platform:s})};var z5e=typeof document<"u",V5e=function(){},UT=z5e?S.useLayoutEffect:V5e;function M2(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!M2(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!M2(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function koe(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Wq(t,e){const n=koe(t);return Math.round(e*n)/n}function x5(t){const e=S.useRef(t);return UT(()=>{e.current=t}),e}function H5e(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=S.useState(r);M2(m,r)||g(r);const[v,x]=S.useState(null),[b,w]=S.useState(null),T=S.useCallback(K=>{K!==_.current&&(_.current=K,x(K))},[]),N=S.useCallback(K=>{K!==F.current&&(F.current=K,w(K))},[]),O=s||v,j=o||b,_=S.useRef(null),F=S.useRef(null),z=S.useRef(d),D=l!=null,$=x5(l),G=x5(i),H=x5(c),U=S.useCallback(()=>{if(!_.current||!F.current)return;const K={placement:e,strategy:n,middleware:m};G.current&&(K.platform=G.current),$5e(_.current,F.current,K).then(te=>{const Y={...te,isPositioned:H.current!==!1};A.current&&!M2(z.current,Y)&&(z.current=Y,i0.flushSync(()=>{h(Y)}))})},[m,e,n,G,H]);UT(()=>{c===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[c]);const A=S.useRef(!1);UT(()=>(A.current=!0,()=>{A.current=!1}),[]),UT(()=>{if(O&&(_.current=O),j&&(F.current=j),O&&j){if($.current)return $.current(O,j,U);U()}},[O,j,U,$,D]);const I=S.useMemo(()=>({reference:_,floating:F,setReference:T,setFloating:N}),[T,N]),L=S.useMemo(()=>({reference:O,floating:j}),[O,j]),q=S.useMemo(()=>{const K={position:n,left:0,top:0};if(!L.floating)return K;const te=Wq(L.floating,d.x),Y=Wq(L.floating,d.y);return a?{...K,transform:"translate("+te+"px, "+Y+"px)",...koe(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:Y}},[n,a,L.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:U,refs:I,elements:L,floatingStyles:q}),[d,U,I,L,q])}const q5e=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Kq({element:r.current,padding:i}).fn(n):{}:r?Kq({element:r,padding:i}).fn(n):{}}}},G5e=(t,e)=>({...L5e(t),options:[t,e]}),K5e=(t,e)=>({...D5e(t),options:[t,e]}),W5e=(t,e)=>({...F5e(t),options:[t,e]}),Y5e=(t,e)=>({...j5e(t),options:[t,e]}),J5e=(t,e)=>({...B5e(t),options:[t,e]}),X5e=(t,e)=>({...U5e(t),options:[t,e]}),Q5e=(t,e)=>({...q5e(t),options:[t,e]});var Z5e="Arrow",Noe=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return u.jsx(Mn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});Noe.displayName=Z5e;var e3e=Noe;function t3e(t){const[e,n]=S.useState(void 0);return Hs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var kj="Popper",[Coe,QN]=r0(kj),[n3e,Poe]=Coe(kj),_oe=t=>{const{__scopePopper:e,children:n}=t,[r,i]=S.useState(null);return u.jsx(n3e,{scope:e,anchor:r,onAnchorChange:i,children:n})};_oe.displayName=kj;var Ioe="PopperAnchor",Roe=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=Poe(Ioe,n),o=S.useRef(null),a=Ir(e,o),l=S.useRef(null);return S.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&s.onAnchorChange(l.current)}),r?null:u.jsx(Mn.div,{...i,ref:a})});Roe.displayName=Ioe;var Nj="PopperContent",[r3e,i3e]=Coe(Nj),Ooe=S.forwardRef((t,e)=>{var ae,Te,oe,ve,ke,pe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...x}=t,b=Poe(Nj,n),[w,T]=S.useState(null),N=Ir(e,ze=>T(ze)),[O,j]=S.useState(null),_=t3e(O),F=(_==null?void 0:_.width)??0,z=(_==null?void 0:_.height)??0,D=r+(s!=="center"?"-"+s:""),$=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},G=Array.isArray(c)?c:[c],H=G.length>0,U={padding:$,boundary:G.filter(o3e),altBoundary:H},{refs:A,floatingStyles:I,placement:L,isPositioned:q,middlewareData:K}=H5e({strategy:"fixed",placement:D,whileElementsMounted:(...ze)=>M5e(...ze,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[G5e({mainAxis:i+z,alignmentAxis:o}),l&&K5e({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?W5e():void 0,...U}),l&&Y5e({...U}),J5e({...U,apply:({elements:ze,rects:Me,availableWidth:he,availableHeight:_e})=>{const{width:We,height:Ke}=Me.reference,it=ze.floating.style;it.setProperty("--radix-popper-available-width",`${he}px`),it.setProperty("--radix-popper-available-height",`${_e}px`),it.setProperty("--radix-popper-anchor-width",`${We}px`),it.setProperty("--radix-popper-anchor-height",`${Ke}px`)}}),O&&Q5e({element:O,padding:a}),a3e({arrowWidth:F,arrowHeight:z}),m&&X5e({strategy:"referenceHidden",...U})]}),[te,Y]=Doe(L),V=Nh(v);Hs(()=>{q&&(V==null||V())},[q,V]);const M=(ae=K.arrow)==null?void 0:ae.x,P=(Te=K.arrow)==null?void 0:Te.y,W=((oe=K.arrow)==null?void 0:oe.centerOffset)!==0,[X,se]=S.useState();return Hs(()=>{w&&se(window.getComputedStyle(w).zIndex)},[w]),u.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:q?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(ve=K.transformOrigin)==null?void 0:ve.x,(ke=K.transformOrigin)==null?void 0:ke.y].join(" "),...((pe=K.hide)==null?void 0:pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:u.jsx(r3e,{scope:n,placedSide:te,onArrowChange:j,arrowX:M,arrowY:P,shouldHideArrow:W,children:u.jsx(Mn.div,{"data-side":te,"data-align":Y,...x,ref:N,style:{...x.style,animation:q?void 0:"none"}})})})});Ooe.displayName=Nj;var Moe="PopperArrow",s3e={top:"bottom",right:"left",bottom:"top",left:"right"},Loe=S.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=i3e(Moe,r),o=s3e[s.placedSide];return u.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:u.jsx(e3e,{...i,ref:n,style:{...i.style,display:"block"}})})});Loe.displayName=Moe;function o3e(t){return t!==null}var a3e=t=>({name:"transformOrigin",options:t,fn(e){var b,w,T;const{placement:n,rects:r,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=Doe(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((w=i.arrow)==null?void 0:w.x)??0)+a/2,g=(((T=i.arrow)==null?void 0:T.y)??0)+l/2;let v="",x="";return c==="bottom"?(v=o?h:`${m}px`,x=`${-l}px`):c==="top"?(v=o?h:`${m}px`,x=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,x=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,x=o?h:`${g}px`),{data:{x:v,y:x}}}});function Doe(t){const[e,n="center"]=t.split("-");return[e,n]}var joe=_oe,Boe=Roe,Uoe=Ooe,Foe=Loe,l3e="Portal",ZN=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=S.useState(!1);Hs(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?ARe.createPortal(u.jsx(Mn.div,{...r,ref:e}),o):null});ZN.displayName=l3e;function c3e(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var s0=t=>{const{present:e,children:n}=t,r=u3e(e),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),s=Ir(r.ref,d3e(i));return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:s}):null};s0.displayName="Presence";function u3e(t){const[e,n]=S.useState(),r=S.useRef(null),i=S.useRef(t),s=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=c3e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=TA(r.current);s.current=a==="mounted"?c:"none"},[a]),Hs(()=>{const c=r.current,d=i.current;if(d!==t){const m=s.current,g=TA(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Hs(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=g=>{const x=TA(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&x&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(s.current=TA(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function TA(t){return(t==null?void 0:t.animationName)||"none"}function d3e(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var f3e=Symbol("radix.slottable");function h3e(t){const e=({children:n})=>u.jsx(u.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=f3e,e}var p3e=xN[" useInsertionEffect ".trim().toString()]||Hs;function Ix({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=m3e({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const d=S.useRef(t!==void 0);S.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=S.useCallback(d=>{var h;if(a){const m=g3e(d)?d(t):d;m!==t&&((h=o.current)==null||h.call(o,m))}else s(d)},[a,t,s,o]);return[l,c]}function m3e({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),i=S.useRef(n),s=S.useRef(e);return p3e(()=>{s.current=e},[e]),S.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function g3e(t){return typeof t=="function"}var $oe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),y3e="VisuallyHidden",zoe=S.forwardRef((t,e)=>u.jsx(Mn.span,{...t,ref:e,style:{...$oe,...t.style}}));zoe.displayName=y3e;var x3e=zoe,[eC]=r0("Tooltip",[QN]),tC=QN(),Voe="TooltipProvider",v3e=700,zM="tooltip.open",[b3e,Cj]=eC(Voe),Hoe=t=>{const{__scopeTooltip:e,delayDuration:n=v3e,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),u.jsx(b3e,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};Hoe.displayName=Voe;var Zw="Tooltip",[w3e,oE]=eC(Zw),qoe=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,l=Cj(Zw,t.__scopeTooltip),c=tC(e),[d,h]=S.useState(null),m=dd(),g=S.useRef(0),v=o??l.disableHoverableContent,x=a??l.delayDuration,b=S.useRef(!1),[w,T]=Ix({prop:r,defaultProp:i??!1,onChange:F=>{F?(l.onOpen(),document.dispatchEvent(new CustomEvent(zM))):l.onClose(),s==null||s(F)},caller:Zw}),N=S.useMemo(()=>w?b.current?"delayed-open":"instant-open":"closed",[w]),O=S.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,T(!0)},[T]),j=S.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T(!1)},[T]),_=S.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,T(!0),g.current=0},x)},[x,T]);return S.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),u.jsx(joe,{...c,children:u.jsx(w3e,{scope:e,contentId:m,open:w,stateAttribute:N,trigger:d,onTriggerChange:h,onTriggerEnter:S.useCallback(()=>{l.isOpenDelayedRef.current?_():O()},[l.isOpenDelayedRef,_,O]),onTriggerLeave:S.useCallback(()=>{v?j():(window.clearTimeout(g.current),g.current=0)},[j,v]),onOpen:O,onClose:j,disableHoverableContent:v,children:n})})};qoe.displayName=Zw;var VM="TooltipTrigger",Goe=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=oE(VM,n),s=Cj(VM,n),o=tC(n),a=S.useRef(null),l=Ir(e,a,i.onTriggerChange),c=S.useRef(!1),d=S.useRef(!1),h=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),u.jsx(Boe,{asChild:!0,...o,children:u.jsx(Mn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:mn(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:mn(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:mn(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:mn(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:mn(t.onBlur,i.onClose),onClick:mn(t.onClick,i.onClose)})})});Goe.displayName=VM;var Pj="TooltipPortal",[E3e,S3e]=eC(Pj,{forceMount:void 0}),Koe=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=oE(Pj,e);return u.jsx(E3e,{scope:e,forceMount:n,children:u.jsx(s0,{present:n||s.open,children:u.jsx(ZN,{asChild:!0,container:i,children:r})})})};Koe.displayName=Pj;var Rx="TooltipContent",Woe=S.forwardRef((t,e)=>{const n=S3e(Rx,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=oE(Rx,t.__scopeTooltip);return u.jsx(s0,{present:r||o.open,children:o.disableHoverableContent?u.jsx(Yoe,{side:i,...s,ref:e}):u.jsx(A3e,{side:i,...s,ref:e})})}),A3e=S.forwardRef((t,e)=>{const n=oE(Rx,t.__scopeTooltip),r=Cj(Rx,t.__scopeTooltip),i=S.useRef(null),s=Ir(e,i),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,d=i.current,{onPointerInTransitChange:h}=r,m=S.useCallback(()=>{a(null),h(!1)},[h]),g=S.useCallback((v,x)=>{const b=v.currentTarget,w={x:v.clientX,y:v.clientY},T=P3e(w,b.getBoundingClientRect()),N=_3e(w,T),O=I3e(x.getBoundingClientRect()),j=O3e([...N,...O]);a(j),h(!0)},[h]);return S.useEffect(()=>()=>m(),[m]),S.useEffect(()=>{if(l&&d){const v=b=>g(b,d),x=b=>g(b,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",x)}}},[l,d,g,m]),S.useEffect(()=>{if(o){const v=x=>{const b=x.target,w={x:x.clientX,y:x.clientY},T=(l==null?void 0:l.contains(b))||(d==null?void 0:d.contains(b)),N=!R3e(w,o);T?m():N&&(m(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,o,c,m]),u.jsx(Yoe,{...t,ref:s})}),[T3e,k3e]=eC(Zw,{isInside:!1}),N3e=h3e("TooltipContent"),Yoe=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=oE(Rx,n),c=tC(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(zM,d),()=>document.removeEventListener(zM,d)),[d]),S.useEffect(()=>{if(l.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),u.jsx(KN,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:u.jsxs(Uoe,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(N3e,{children:r}),u.jsx(T3e,{scope:n,isInside:!0,children:u.jsx(x3e,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Woe.displayName=Rx;var Joe="TooltipArrow",C3e=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=tC(n);return k3e(Joe,n).isInside?null:u.jsx(Foe,{...i,...r,ref:e})});C3e.displayName=Joe;function P3e(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function _3e(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function I3e(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function R3e(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,d=a.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-c)*(r-d)/(m-d)+c&&(i=!i)}return i}function O3e(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),M3e(e)}function M3e(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var L3e=Hoe,D3e=qoe,j3e=Goe,B3e=Koe,Xoe=Woe;function Qoe(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Qoe(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Rn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Qoe(t))&&(r&&(r+=" "),r+=e);return r}const U3e=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},F3e=(t,e)=>({classGroupId:t,validator:e}),Zoe=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),L2="-",Yq=[],$3e="arbitrary..",z3e=t=>{const e=H3e(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return V3e(o);const a=o.split(L2),l=a[0]===""&&a.length>1?1:0;return eae(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],c=n[o];return l?c?U3e(c,l):l:c||Yq}return n[o]||Yq}}},eae=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const c=eae(t,e+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=e===0?t.join(L2):t.slice(e).join(L2),l=o.length;for(let c=0;c<l;c++){const d=o[c];if(d.validator(a))return d.classGroupId}},V3e=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?$3e+r:void 0})(),H3e=t=>{const{theme:e,classGroups:n}=t;return q3e(n,e)},q3e=(t,e)=>{const n=Zoe();for(const r in t){const i=t[r];_j(i,n,r,e)}return n},_j=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const o=t[s];G3e(o,e,n,r)}},G3e=(t,e,n,r)=>{if(typeof t=="string"){K3e(t,e,n);return}if(typeof t=="function"){W3e(t,e,n,r);return}Y3e(t,e,n,r)},K3e=(t,e,n)=>{const r=t===""?e:tae(e,t);r.classGroupId=n},W3e=(t,e,n,r)=>{if(J3e(t)){_j(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(F3e(n,t))},Y3e=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];_j(l,tae(e,a),n,r)}},tae=(t,e)=>{let n=t;const r=e.split(L2),i=r.length;for(let s=0;s<i;s++){const o=r[s];let a=n.nextPart.get(o);a||(a=Zoe(),n.nextPart.set(o,a)),n=a}return n},J3e=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,X3e=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,o)=>{n[s]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=r[s])!==void 0)return i(s,o),o},set(s,o){s in n?n[s]=o:i(s,o)}}},HM="!",Jq=":",Q3e=[],Xq=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),Z3e=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;const d=i.length;for(let x=0;x<d;x++){const b=i[x];if(o===0&&a===0){if(b===Jq){s.push(i.slice(l,x)),l=x+1;continue}if(b==="/"){c=x;continue}}b==="["?o++:b==="]"?o--:b==="("?a++:b===")"&&a--}const h=s.length===0?i:i.slice(l);let m=h,g=!1;h.endsWith(HM)?(m=h.slice(0,-1),g=!0):h.startsWith(HM)&&(m=h.slice(1),g=!0);const v=c&&c>l?c-l:void 0;return Xq(s,g,m,v)};if(e){const i=e+Jq,s=r;r=o=>o.startsWith(i)?s(o.slice(i.length)):Xq(Q3e,!1,o,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},eOe=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=e.has(o);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},tOe=t=>({cache:X3e(t.cacheSize),parseClassName:Z3e(t),sortModifiers:eOe(t),...z3e(t)}),nOe=/\s+/,rOe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(nOe);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let b=!!x,w=r(b?v.substring(0,x):v);if(!w){if(!b){l=d+(l.length>0?" "+l:l);continue}if(w=r(v),!w){l=d+(l.length>0?" "+l:l);continue}b=!1}const T=m.length===0?"":m.length===1?m[0]:s(m).join(":"),N=g?T+HM:T,O=N+w;if(o.indexOf(O)>-1)continue;o.push(O);const j=i(w,b);for(let _=0;_<j.length;++_){const F=j[_];o.push(N+F)}l=d+(l.length>0?" "+l:l)}return l},iOe=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=nae(n))&&(i&&(i+=" "),i+=r);return i},nae=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=nae(t[r]))&&(n&&(n+=" "),n+=e);return n},sOe=(t,...e)=>{let n,r,i,s;const o=l=>{const c=e.reduce((d,h)=>h(d),t());return n=tOe(c),r=n.cache.get,i=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const d=rOe(l,n);return i(l,d),d};return s=o,(...l)=>s(iOe(...l))},oOe=[],Ai=t=>{const e=n=>n[t]||oOe;return e.isThemeGetter=!0,e},rae=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,iae=/^\((?:(\w[\w-]*):)?(.+)\)$/i,aOe=/^\d+\/\d+$/,lOe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cOe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uOe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,dOe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fOe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lg=t=>aOe.test(t),yn=t=>!!t&&!Number.isNaN(Number(t)),_f=t=>!!t&&Number.isInteger(Number(t)),v5=t=>t.endsWith("%")&&yn(t.slice(0,-1)),Tu=t=>lOe.test(t),hOe=()=>!0,pOe=t=>cOe.test(t)&&!uOe.test(t),sae=()=>!1,mOe=t=>dOe.test(t),gOe=t=>fOe.test(t),yOe=t=>!Mt(t)&&!Lt(t),xOe=t=>av(t,lae,sae),Mt=t=>rae.test(t),gp=t=>av(t,cae,pOe),b5=t=>av(t,SOe,yn),Qq=t=>av(t,oae,sae),vOe=t=>av(t,aae,gOe),kA=t=>av(t,uae,mOe),Lt=t=>iae.test(t),Cb=t=>lv(t,cae),bOe=t=>lv(t,AOe),Zq=t=>lv(t,oae),wOe=t=>lv(t,lae),EOe=t=>lv(t,aae),NA=t=>lv(t,uae,!0),av=(t,e,n)=>{const r=rae.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},lv=(t,e,n=!1)=>{const r=iae.exec(t);return r?r[1]?e(r[1]):n:!1},oae=t=>t==="position"||t==="percentage",aae=t=>t==="image"||t==="url",lae=t=>t==="length"||t==="size"||t==="bg-size",cae=t=>t==="length",SOe=t=>t==="number",AOe=t=>t==="family-name",uae=t=>t==="shadow",TOe=()=>{const t=Ai("color"),e=Ai("font"),n=Ai("text"),r=Ai("font-weight"),i=Ai("tracking"),s=Ai("leading"),o=Ai("breakpoint"),a=Ai("container"),l=Ai("spacing"),c=Ai("radius"),d=Ai("shadow"),h=Ai("inset-shadow"),m=Ai("text-shadow"),g=Ai("drop-shadow"),v=Ai("blur"),x=Ai("perspective"),b=Ai("aspect"),w=Ai("ease"),T=Ai("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...O(),Lt,Mt],_=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],z=()=>[Lt,Mt,l],D=()=>[lg,"full","auto",...z()],$=()=>[_f,"none","subgrid",Lt,Mt],G=()=>["auto",{span:["full",_f,Lt,Mt]},_f,Lt,Mt],H=()=>[_f,"auto",Lt,Mt],U=()=>["auto","min","max","fr",Lt,Mt],A=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],I=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...z()],q=()=>[lg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],K=()=>[t,Lt,Mt],te=()=>[...O(),Zq,Qq,{position:[Lt,Mt]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],V=()=>["auto","cover","contain",wOe,xOe,{size:[Lt,Mt]}],M=()=>[v5,Cb,gp],P=()=>["","none","full",c,Lt,Mt],W=()=>["",yn,Cb,gp],X=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>[yn,v5,Zq,Qq],Te=()=>["","none",v,Lt,Mt],oe=()=>["none",yn,Lt,Mt],ve=()=>["none",yn,Lt,Mt],ke=()=>[yn,Lt,Mt],pe=()=>[lg,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Tu],breakpoint:[Tu],color:[hOe],container:[Tu],"drop-shadow":[Tu],ease:["in","out","in-out"],font:[yOe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Tu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Tu],shadow:[Tu],spacing:["px",yn],text:[Tu],"text-shadow":[Tu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",lg,Mt,Lt,b]}],container:["container"],columns:[{columns:[yn,Mt,Lt,a]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[_f,"auto",Lt,Mt]}],basis:[{basis:[lg,"full","auto",a,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[yn,lg,"auto","initial","none",Mt]}],grow:[{grow:["",yn,Lt,Mt]}],shrink:[{shrink:["",yn,Lt,Mt]}],order:[{order:[_f,"first","last","none",Lt,Mt]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":U()}],"auto-rows":[{"auto-rows":U()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...A(),"normal"]}],"justify-items":[{"justify-items":[...I(),"normal"]}],"justify-self":[{"justify-self":["auto",...I()]}],"align-content":[{content:["normal",...A()]}],"align-items":[{items:[...I(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...I(),{baseline:["","last"]}]}],"place-content":[{"place-content":A()}],"place-items":[{"place-items":[...I(),"baseline"]}],"place-self":[{"place-self":["auto",...I()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[a,"screen",...q()]}],"min-w":[{"min-w":[a,"screen","none",...q()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",n,Cb,gp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Lt,b5]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",v5,Mt]}],"font-family":[{font:[bOe,Mt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Lt,Mt]}],"line-clamp":[{"line-clamp":[yn,"none",Lt,b5]}],leading:[{leading:[s,...z()]}],"list-image":[{"list-image":["none",Lt,Mt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Lt,Mt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[yn,"from-font","auto",Lt,gp]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[yn,"auto",Lt,Mt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Lt,Mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Lt,Mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:V()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_f,Lt,Mt],radial:["",Lt,Mt],conic:[_f,Lt,Mt]},EOe,vOe]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:W()}],"border-w-x":[{"border-x":W()}],"border-w-y":[{"border-y":W()}],"border-w-s":[{"border-s":W()}],"border-w-e":[{"border-e":W()}],"border-w-t":[{"border-t":W()}],"border-w-r":[{"border-r":W()}],"border-w-b":[{"border-b":W()}],"border-w-l":[{"border-l":W()}],"divide-x":[{"divide-x":W()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":W()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[yn,Lt,Mt]}],"outline-w":[{outline:["",yn,Cb,gp]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",d,NA,kA]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",h,NA,kA]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[yn,gp]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":W()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",m,NA,kA]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[yn,Lt,Mt]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[yn]}],"mask-image-linear-from-pos":[{"mask-linear-from":ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":ae()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":ae()}],"mask-image-t-to-pos":[{"mask-t-to":ae()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":ae()}],"mask-image-r-to-pos":[{"mask-r-to":ae()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":ae()}],"mask-image-b-to-pos":[{"mask-b-to":ae()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":ae()}],"mask-image-l-to-pos":[{"mask-l-to":ae()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":ae()}],"mask-image-x-to-pos":[{"mask-x-to":ae()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":ae()}],"mask-image-y-to-pos":[{"mask-y-to":ae()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[Lt,Mt]}],"mask-image-radial-from-pos":[{"mask-radial-from":ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":ae()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[yn]}],"mask-image-conic-from-pos":[{"mask-conic-from":ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":ae()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:V()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Lt,Mt]}],filter:[{filter:["","none",Lt,Mt]}],blur:[{blur:Te()}],brightness:[{brightness:[yn,Lt,Mt]}],contrast:[{contrast:[yn,Lt,Mt]}],"drop-shadow":[{"drop-shadow":["","none",g,NA,kA]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",yn,Lt,Mt]}],"hue-rotate":[{"hue-rotate":[yn,Lt,Mt]}],invert:[{invert:["",yn,Lt,Mt]}],saturate:[{saturate:[yn,Lt,Mt]}],sepia:[{sepia:["",yn,Lt,Mt]}],"backdrop-filter":[{"backdrop-filter":["","none",Lt,Mt]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[yn,Lt,Mt]}],"backdrop-contrast":[{"backdrop-contrast":[yn,Lt,Mt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",yn,Lt,Mt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[yn,Lt,Mt]}],"backdrop-invert":[{"backdrop-invert":["",yn,Lt,Mt]}],"backdrop-opacity":[{"backdrop-opacity":[yn,Lt,Mt]}],"backdrop-saturate":[{"backdrop-saturate":[yn,Lt,Mt]}],"backdrop-sepia":[{"backdrop-sepia":["",yn,Lt,Mt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Lt,Mt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[yn,"initial",Lt,Mt]}],ease:[{ease:["linear","initial",w,Lt,Mt]}],delay:[{delay:[yn,Lt,Mt]}],animate:[{animate:["none",T,Lt,Mt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Lt,Mt]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:oe()}],"rotate-x":[{"rotate-x":oe()}],"rotate-y":[{"rotate-y":oe()}],"rotate-z":[{"rotate-z":oe()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:ke()}],"skew-x":[{"skew-x":ke()}],"skew-y":[{"skew-y":ke()}],transform:[{transform:[Lt,Mt,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:pe()}],"translate-x":[{"translate-x":pe()}],"translate-y":[{"translate-y":pe()}],"translate-z":[{"translate-z":pe()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Lt,Mt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Lt,Mt]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[yn,Cb,gp,b5]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},kOe=sOe(TOe);function kt(...t){return kOe(Rn(t))}const dae=L3e,Ij=D3e,Rj=j3e,nC=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>u.jsx(B3e,{children:u.jsx(Xoe,{ref:r,sideOffset:e,className:kt("z-50 overflow-hidden rounded-md bg-slate-800 border border-slate-700 px-3 py-1.5 text-xs text-slate-200 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));nC.displayName=Xoe.displayName;const yp=({icon:t,label:e,isActive:n,onClick:r,isSubItem:i=!1,infoTooltip:s})=>u.jsxs("div",{className:"relative flex items-center group",children:[u.jsxs("button",{onClick:r,className:kt("w-full flex items-center gap-3 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",i?"px-3 py-2 pl-6":"px-3 py-2.5",n?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40",s&&"pr-8"),title:e,children:[n&&u.jsx("div",{className:kt("absolute top-1/2 -translate-y-1/2 w-1 rounded-full bg-[#E7FE55]",i?"left-0 h-4":"left-0 h-6")}),u.jsx("span",{className:kt("flex items-center justify-center transition-colors",!i&&"ml-1",n&&"text-[#E7FE55]"),children:t}),u.jsx("span",{className:"tracking-wide",children:e})]}),s&&u.jsxs(Ij,{children:[u.jsx(Rj,{asChild:!0,children:u.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#4a4b53] hover:text-[#E7FE55] transition-all duration-200 cursor-help hover:scale-110 opacity-0 group-hover:opacity-100",children:u.jsx(J1,{size:14,strokeWidth:2})})}),u.jsx(nC,{side:"right",className:"max-w-[250px] text-xs leading-relaxed bg-[#1a1b21] border-[#2a2b30] text-[#a0a1a8]",children:s})]})]}),NOe=({icon:t,label:e,isExpanded:n,onToggle:r,hasActiveChild:i,children:s,infoTooltip:o})=>u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"relative flex items-center group",children:[u.jsxs("button",{onClick:r,className:kt("w-full flex items-center justify-between px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden","text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40",o&&"pr-12"),title:e,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:kt("flex items-center justify-center transition-colors ml-1"),children:t}),u.jsx("span",{className:"tracking-wide",children:e})]}),u.jsx(_t.span,{initial:!1,animate:{rotate:n?180:0},transition:{duration:.2},className:"text-[#5a5b63]",children:u.jsx(pa,{size:14})})]}),o&&u.jsxs(Ij,{children:[u.jsx(Rj,{asChild:!0,children:u.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#4a4b53] hover:text-[#E7FE55] transition-all duration-200 cursor-help hover:scale-110 opacity-0 group-hover:opacity-100",children:u.jsx(J1,{size:14,strokeWidth:2})})}),u.jsx(nC,{side:"right",className:"max-w-[250px] text-xs leading-relaxed bg-[#1a1b21] border-[#2a2b30] text-[#a0a1a8]",children:o})]})]}),u.jsx(Wi,{initial:!1,children:n&&u.jsx(_t.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:u.jsx("div",{className:"relative ml-1 pl-2 border-l border-[#2a2b30]",children:s})})})]}),eG=({status:t,label:e,latency:n,network:r})=>{const i=t==="Down",s=t==="Checking",o=i?"#ef4444":s?"#747580":"#E7FE55";return u.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[u.jsx("span",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:e}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"text-[9px] font-mono text-[#5a5b63]",children:i?"DOWN":s?"...":n}),u.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:o}})]})]})},COe=({activeTab:t,setActiveTab:e,isVaultUnlocked:n,onSelectConversation:r,onNewChat:i,currentConversationId:s,password:o,isOpen:a=!1,onClose:l})=>{const[c,d]=S.useState("Checking"),h=[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t),m=[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t),g=[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t),v=h||m||g,[x,b]=S.useState(v),w=t===be.AGENT;S.useEffect(()=>{v&&b(!0)},[v]),S.useEffect(()=>{const N=async()=>{const j=await zt.checkHealth();d(j?"Online":"Down")};N();const O=setInterval(N,3e4);return()=>clearInterval(O)},[]);const T=N=>{e(N),l&&l()};return u.jsxs(dae,{delayDuration:300,children:[u.jsx(Wi,{children:a&&u.jsx(_t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-40 xl:hidden",onClick:l})}),u.jsxs("aside",{className:kt("m-3 p-5 flex flex-col fixed h-[calc(100%-24px)] bg-[#0f1015]/95 backdrop-blur-xl z-50 w-60 transform transition-transform duration-300 ease-in-out","rounded-2xl border border-[#232328]/60 shadow-2xl shadow-black/20",a?"translate-x-0":"-translate-x-full","xl:translate-x-0"),children:[u.jsxs("div",{className:"mb-8 flex items-center gap-3 px-2",children:[u.jsx("div",{className:"w-8 h-8 flex-shrink-0 bg-[#E7FE55] rounded flex items-center justify-center",children:u.jsx(xd,{className:"text-black w-5 h-5"})}),u.jsx("h1",{className:"text-[15px] font-semibold text-white tracking-tight hidden xl:block",children:"AutonomousVault"})]}),u.jsxs("nav",{className:"space-y-1 flex-1",children:[u.jsx(yp,{icon:u.jsx(ys,{size:18}),label:"Dashboard",isActive:t===be.DASHBOARD,onClick:()=>T(be.DASHBOARD)}),u.jsx(yp,{icon:u.jsx($g,{size:18}),label:"Vault Operator",isActive:w,onClick:()=>T(be.AGENT),infoTooltip:"Manual control and oversight of your vault. Execute discretionary operations, manage capital flows, and supervise the Vault Dealer."}),u.jsxs(NOe,{icon:u.jsx(n2e,{size:18}),label:"Vault Dealer",isExpanded:x,onToggle:()=>b(!x),hasActiveChild:v,infoTooltip:"Autonomous trading agent. Operates continuously within your predefined strategy and risk limits.",children:[u.jsx(yp,{icon:u.jsx(Ro,{size:16}),label:"Hyperliquid",isActive:h,onClick:()=>T(be.VAULT_DEALER),isSubItem:!0}),u.jsx(yp,{icon:u.jsx(jw,{size:16}),label:"Solana",isActive:g,onClick:()=>T(be.SOLANA_DEALER),isSubItem:!0}),u.jsx(yp,{icon:u.jsx(dn,{size:16}),label:"Polymarket",isActive:m,onClick:()=>T(be.POLYMARKET_DEALER),isSubItem:!0})]}),u.jsx(yp,{icon:u.jsx(V2e,{size:18}),label:"Vault",isActive:t===be.VAULT,onClick:()=>T(be.VAULT)}),u.jsx(yp,{icon:u.jsx(d2,{size:18}),label:"Token Costs",isActive:t===be.TOKEN_COSTS,onClick:()=>T(be.TOKEN_COSTS)})]}),u.jsxs("div",{className:"pt-6 border-t border-[#232328]",children:[u.jsx("div",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-3 px-2",children:"Network Status"}),u.jsxs("div",{className:"space-y-2 px-2",children:[u.jsx(eG,{status:"Online",label:"Solana Devnet",latency:"18m",network:"solana"}),u.jsx(eG,{status:c,label:"Hyperliquid Testnet",latency:"450ms",network:"hyperliquid"})]})]})]})]})};var POe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Oj(t){if(typeof t!="string")return!1;var e=POe;return e.includes(t)}var _Oe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],IOe=new Set(_Oe);function fae(t){return typeof t!="string"?!1:IOe.has(t)}function hae(t){return typeof t=="string"&&t.startsWith("data-")}function co(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(fae(n)||hae(n))&&(e[n]=t[n]);return e}function Um(t){if(t==null)return null;if(S.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return co(e)}return typeof t=="object"&&!Array.isArray(t)?co(t):null}function qs(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(fae(n)||hae(n)||Oj(n))&&(e[n]=t[n]);return e}function ROe(t){return t==null?null:S.isValidElement(t)?qs(t.props):typeof t=="object"&&!Array.isArray(t)?qs(t):null}var OOe=["children","width","height","viewBox","className","style","title","desc"];function qM(){return qM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qM.apply(null,arguments)}function MOe(t,e){if(t==null)return{};var n,r,i=LOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function LOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var pae=S.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:a,title:l,desc:c}=t,d=MOe(t,OOe),h=s||{width:r,height:i,x:0,y:0},m=Rn("recharts-surface",o);return S.createElement("svg",qM({},qs(d),{className:m,width:r,height:i,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),S.createElement("title",null,l),S.createElement("desc",null,c),n)}),DOe=["children","className"];function GM(){return GM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GM.apply(null,arguments)}function jOe(t,e){if(t==null)return{};var n,r,i=BOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Zr=S.forwardRef((t,e)=>{var{children:n,className:r}=t,i=jOe(t,DOe),s=Rn("recharts-layer",r);return S.createElement("g",GM({className:s},qs(i),{ref:e}),n)}),UOe=S.createContext(null);function gr(t){return function(){return t}}const mae=Math.cos,D2=Math.sin,Zl=Math.sqrt,j2=Math.PI,rC=2*j2,KM=Math.PI,WM=2*KM,Tp=1e-6,FOe=WM-Tp;function gae(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $Oe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return gae;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class zOe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?gae:$Oe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,d=o-e,h=a-n,m=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>Tp)if(!(Math.abs(h*l-c*d)>Tp)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,v=i-a,x=l*l+c*c,b=g*g+v*v,w=Math.sqrt(x),T=Math.sqrt(m),N=s*Math.tan((KM-Math.acos((x+m-b)/(2*w*T)))/2),O=N/T,j=N/w;Math.abs(O-1)>Tp&&this._append`L${e+O*d},${n+O*h}`,this._append`A${s},${s},0,0,${+(h*g>d*v)},${this._x1=e+j*l},${this._y1=n+j*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,d=n+l,h=1^o,m=o?i-s:s-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Tp||Math.abs(this._y1-d)>Tp)&&this._append`L${c},${d}`,r&&(m<0&&(m=m%WM+WM),m>FOe?this._append`A${r},${r},0,1,${h},${e-a},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=d}`:m>Tp&&this._append`A${r},${r},0,${+(m>=KM)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Mj(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new zOe(e)}function Lj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yae(t){this._context=t}yae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function iC(t){return new yae(t)}function xae(t){return t[0]}function vae(t){return t[1]}function bae(t,e){var n=gr(!0),r=null,i=iC,s=null,o=Mj(a);t=typeof t=="function"?t:t===void 0?xae:gr(t),e=typeof e=="function"?e:e===void 0?vae:gr(e);function a(l){var c,d=(l=Lj(l)).length,h,m=!1,g;for(r==null&&(s=i(g=o())),c=0;c<=d;++c)!(c<d&&n(h=l[c],c,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(h,c,l),+e(h,c,l));if(g)return s=null,g+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:gr(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:gr(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:gr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function CA(t,e,n){var r=null,i=gr(!0),s=null,o=iC,a=null,l=Mj(c);t=typeof t=="function"?t:t===void 0?xae:gr(+t),e=typeof e=="function"?e:gr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?vae:gr(+n);function c(h){var m,g,v,x=(h=Lj(h)).length,b,w=!1,T,N=new Array(x),O=new Array(x);for(s==null&&(a=o(T=l())),m=0;m<=x;++m){if(!(m<x&&i(b=h[m],m,h))===w)if(w=!w)g=m,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),v=m-1;v>=g;--v)a.point(N[v],O[v]);a.lineEnd(),a.areaEnd()}w&&(N[m]=+t(b,m,h),O[m]=+e(b,m,h),a.point(r?+r(b,m,h):N[m],n?+n(b,m,h):O[m]))}if(T)return a=null,T+""||null}function d(){return bae().defined(i).curve(o).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:gr(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:gr(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:gr(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:gr(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:gr(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:gr(+h),c):n},c.lineX0=c.lineY0=function(){return d().x(t).y(e)},c.lineY1=function(){return d().x(t).y(n)},c.lineX1=function(){return d().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:gr(!!h),c):i},c.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),c):o},c.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),c):s},c}class wae{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function VOe(t){return new wae(t,!0)}function HOe(t){return new wae(t,!1)}const Dj={draw(t,e){const n=Zl(e/j2);t.moveTo(n,0),t.arc(0,0,n,0,rC)}},qOe={draw(t,e){const n=Zl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Eae=Zl(1/3),GOe=Eae*2,KOe={draw(t,e){const n=Zl(e/GOe),r=n*Eae;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},WOe={draw(t,e){const n=Zl(e),r=-n/2;t.rect(r,r,n,n)}},YOe=.8908130915292852,Sae=D2(j2/10)/D2(7*j2/10),JOe=D2(rC/10)*Sae,XOe=-mae(rC/10)*Sae,QOe={draw(t,e){const n=Zl(e*YOe),r=JOe*n,i=XOe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=rC*s/5,a=mae(o),l=D2(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},w5=Zl(3),ZOe={draw(t,e){const n=-Zl(e/(w5*3));t.moveTo(0,n*2),t.lineTo(-w5*n,-n),t.lineTo(w5*n,-n),t.closePath()}},Ia=-.5,Ra=Zl(3)/2,YM=1/Zl(12),e4e=(YM/2+1)*3,t4e={draw(t,e){const n=Zl(e/e4e),r=n/2,i=n*YM,s=r,o=n*YM+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Ia*r-Ra*i,Ra*r+Ia*i),t.lineTo(Ia*s-Ra*o,Ra*s+Ia*o),t.lineTo(Ia*a-Ra*l,Ra*a+Ia*l),t.lineTo(Ia*r+Ra*i,Ia*i-Ra*r),t.lineTo(Ia*s+Ra*o,Ia*o-Ra*s),t.lineTo(Ia*a+Ra*l,Ia*l-Ra*a),t.closePath()}};function n4e(t,e){let n=null,r=Mj(i);t=typeof t=="function"?t:gr(t||Dj),e=typeof e=="function"?e:gr(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:gr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:gr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function B2(){}function U2(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Aae(t){this._context=t}Aae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:U2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:U2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function r4e(t){return new Aae(t)}function Tae(t){this._context=t}Tae.prototype={areaStart:B2,areaEnd:B2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:U2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function i4e(t){return new Tae(t)}function kae(t){this._context=t}kae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:U2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function s4e(t){return new kae(t)}function Nae(t){this._context=t}Nae.prototype={areaStart:B2,areaEnd:B2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function o4e(t){return new Nae(t)}function tG(t){return t<0?-1:1}function nG(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(tG(s)+tG(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function rG(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function E5(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function F2(t){this._context=t}F2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:E5(this,this._t0,rG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,E5(this,rG(this,n=nG(this,t,e)),n);break;default:E5(this,this._t0,n=nG(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Cae(t){this._context=new Pae(t)}(Cae.prototype=Object.create(F2.prototype)).point=function(t,e){F2.prototype.point.call(this,e,t)};function Pae(t){this._context=t}Pae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function a4e(t){return new F2(t)}function l4e(t){return new Cae(t)}function _ae(t){this._context=t}_ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=iG(t),i=iG(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function iG(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function c4e(t){return new _ae(t)}function sC(t,e){this._context=t,this._t=e}sC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function u4e(t){return new sC(t,.5)}function d4e(t){return new sC(t,0)}function f4e(t){return new sC(t,1)}function Fm(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function JM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function h4e(t,e){return t[e]}function p4e(t){const e=[];return e.key=t,e}function m4e(){var t=gr([]),e=JM,n=Fm,r=h4e;function i(s){var o=Array.from(t.apply(this,arguments),p4e),a,l=o.length,c=-1,d;for(const h of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(h,o[a].key,c,s)]).data=h;for(a=0,d=Lj(e(o));a<l;++a)o[d[a]].index=a;return n(o,d),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:gr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:gr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?JM:typeof s=="function"?s:gr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Fm,i):n},i}function g4e(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Fm(t,e)}}function y4e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Fm(t,e)}}function x4e(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var d=t[e[a]],h=d[r][1]||0,m=d[r-1][1]||0,g=(h-m)/2,v=0;v<a;++v){var x=t[e[v]],b=x[r][1]||0,w=x[r-1][1]||0;g+=b-w}l+=h,c+=g*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Fm(t,e)}}var S5={},A5={},sG;function v4e(){return sG||(sG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(A5)),A5}var T5={},oG;function Iae(){return oG||(oG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(T5)),T5}var k5={},aG;function jj(){return aG||(aG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(k5)),k5}var N5={},C5={},lG;function b4e(){return lG||(lG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(C5)),C5}var cG;function Bj(){return cG||(cG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=b4e(),n=jj();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let a=0,l="",c="",d=!1;for(i.charCodeAt(0)===46&&(s.push(""),a++);a<o;){const h=i[a];c?h==="\\"&&a+1<o?(a++,l+=i[a]):h===c?c="":l+=h:d?h==='"'||h==="'"?c=h:h==="]"?(d=!1,s.push(l),l=""):l+=h:h==="["?(d=!0,l&&(s.push(l),l="")):h==="."?l&&(s.push(l),l=""):l+=h,a++}return l&&s.push(l),s}t.toPath=r})(N5)),N5}var uG;function Uj(){return uG||(uG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v4e(),n=Iae(),r=jj(),i=Bj();function s(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const d=a[l];return d===void 0?n.isDeepKey(l)?s(a,i.toPath(l),c):c:d}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const d=a[l];return d===void 0?c:d}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const d=a[l];return d===void 0?c:d}}}function o(a,l,c){if(l.length===0)return c;let d=a;for(let h=0;h<l.length;h++){if(d==null||e.isUnsafeProperty(l[h]))return c;d=d[l[h]]}return d===void 0?c:d}t.get=s})(S5)),S5}var P5,dG;function w4e(){return dG||(dG=1,P5=Uj().get),P5}var E4e=w4e();const $m=bs(E4e);var S4e=4;function mh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S4e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Kr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,s,o)=>{var a=n[o-1];return typeof a=="string"?i+a+s:a!==void 0?i+mh(a)+s:i+s},"")}var Ki=t=>t===0?0:t>0?1:-1,sl=t=>typeof t=="number"&&t!=+t,Nd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Nt=t=>(typeof t=="number"||t instanceof Number)&&!sl(t),Vc=t=>Nt(t)||typeof t=="string",A4e=0,e1=t=>{var e=++A4e;return"".concat(t||"").concat(e)},Vs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Nt(e)&&typeof e!="string")return r;var s;if(Nd(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return sl(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},Rae=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function qn(t,e,n){return Nt(t)&&Nt(e)?mh(t+n*(e-t)):e}function Oae(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):$m(r,e))===n)}var Ar=t=>t===null||typeof t>"u",aE=t=>Ar(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function T4e(t){return t!=null}function lE(){}var k4e=["type","size","sizeType"];function XM(){return XM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XM.apply(null,arguments)}function fG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fG(Object(n),!0).forEach(function(r){N4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N4e(t,e,n){return(e=C4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C4e(t){var e=P4e(t,"string");return typeof e=="symbol"?e:e+""}function P4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _4e(t,e){if(t==null)return{};var n,r,i=I4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function I4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Mae={symbolCircle:Dj,symbolCross:qOe,symbolDiamond:KOe,symbolSquare:WOe,symbolStar:QOe,symbolTriangle:ZOe,symbolWye:t4e},R4e=Math.PI/180,O4e=t=>{var e="symbol".concat(aE(t));return Mae[e]||Dj},M4e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*R4e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},L4e=(t,e)=>{Mae["symbol".concat(aE(t))]=e},Lae=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=_4e(t,k4e),s=hG(hG({},i),{},{type:e,size:n,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var a=()=>{var m=O4e(o),g=n4e().type(m).size(M4e(n,r,o)),v=g();if(v!==null)return v},{className:l,cx:c,cy:d}=s,h=qs(s);return Nt(c)&&Nt(d)&&Nt(n)?S.createElement("path",XM({},h,{className:Rn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:a()})):null};Lae.registerSymbol=L4e;var Dae=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,Fj=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(S.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{Oj(i)&&(r[i]=(s=>n[i](n,s)))}),r},D4e=(t,e,n)=>r=>(t(e,n,r),null),oC=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];Oj(i)&&typeof s=="function"&&(r||(r={}),r[i]=D4e(s,e,n))}),r};function pG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function j4e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pG(Object(n),!0).forEach(function(r){B4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B4e(t,e,n){return(e=U4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U4e(t){var e=F4e(t,"string");return typeof e=="symbol"?e:e+""}function F4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ei(t,e){var n=j4e({},t),r=e,i=Object.keys(e),s=i.reduce((o,a)=>(o[a]===void 0&&r[a]!==void 0&&(o[a]=r[a]),o),n);return s}var _5={},I5={},mG;function $4e(){return mG||(mG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],a=r(o);i.has(a)||i.set(a,o)}return Array.from(i.values())}t.uniqBy=e})(I5)),I5}var R5={},gG;function jae(){return gG||(gG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(R5)),R5}var O5={},M5={},L5={},yG;function z4e(){return yG||(yG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(L5)),L5}var xG;function $j(){return xG||(xG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=z4e();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(M5)),M5}var D5={},vG;function V4e(){return vG||(vG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(D5)),D5}var bG;function H4e(){return bG||(bG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$j(),n=V4e();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(O5)),O5}var j5={},B5={},wG;function q4e(){return wG||(wG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Uj();function n(r){return function(i){return e.get(i,r)}}t.property=n})(B5)),B5}var U5={},F5={},$5={},z5={},EG;function Bae(){return EG||(EG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(z5)),z5}var V5={},SG;function Uae(){return SG||(SG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(V5)),V5}var H5={},AG;function Fae(){return AG||(AG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(H5)),H5}var TG;function G4e(){return TG||(TG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Bae(),n=Uae(),r=Fae();function i(d,h,m){return typeof m!="function"?i(d,h,()=>{}):s(d,h,function g(v,x,b,w,T,N){const O=m(v,x,b,w,T,N);return O!==void 0?!!O:s(v,x,g,N)},new Map)}function s(d,h,m,g){if(h===d)return!0;switch(typeof h){case"object":return o(d,h,m,g);case"function":return Object.keys(h).length>0?s(d,{...h},m,g):r.eq(d,h);default:return e.isObject(d)?typeof h=="string"?h==="":!0:r.eq(d,h)}}function o(d,h,m,g){if(h==null)return!0;if(Array.isArray(h))return l(d,h,m,g);if(h instanceof Map)return a(d,h,m,g);if(h instanceof Set)return c(d,h,m,g);const v=Object.keys(h);if(d==null||n.isPrimitive(d))return v.length===0;if(v.length===0)return!0;if(g!=null&&g.has(h))return g.get(h)===d;g==null||g.set(h,d);try{for(let x=0;x<v.length;x++){const b=v[x];if(!n.isPrimitive(d)&&!(b in d)||h[b]===void 0&&d[b]!==void 0||h[b]===null&&d[b]!==null||!m(d[b],h[b],b,d,h,g))return!1}return!0}finally{g==null||g.delete(h)}}function a(d,h,m,g){if(h.size===0)return!0;if(!(d instanceof Map))return!1;for(const[v,x]of h.entries()){const b=d.get(v);if(m(b,x,v,d,h,g)===!1)return!1}return!0}function l(d,h,m,g){if(h.length===0)return!0;if(!Array.isArray(d))return!1;const v=new Set;for(let x=0;x<h.length;x++){const b=h[x];let w=!1;for(let T=0;T<d.length;T++){if(v.has(T))continue;const N=d[T];let O=!1;if(m(N,b,x,d,h,g)&&(O=!0),O){v.add(T),w=!0;break}}if(!w)return!1}return!0}function c(d,h,m,g){return h.size===0?!0:d instanceof Set?l([...d],[...h],m,g):!1}t.isMatchWith=i,t.isSetMatch=c})($5)),$5}var kG;function $ae(){return kG||(kG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G4e();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(F5)),F5}var q5={},G5={},K5={},NG;function K4e(){return NG||(NG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(K5)),K5}var W5={},CG;function zae(){return CG||(CG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(W5)),W5}var Y5={},PG;function Vae(){return PG||(PG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",d="[object Array]",h="[object Function]",m="[object ArrayBuffer]",g="[object Object]",v="[object Error]",x="[object DataView]",b="[object Uint8Array]",w="[object Uint8ClampedArray]",T="[object Uint16Array]",N="[object Uint32Array]",O="[object BigUint64Array]",j="[object Int8Array]",_="[object Int16Array]",F="[object Int32Array]",z="[object BigInt64Array]",D="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=m,t.arrayTag=d,t.bigInt64ArrayTag=z,t.bigUint64ArrayTag=O,t.booleanTag=i,t.dataViewTag=x,t.dateTag=a,t.errorTag=v,t.float32ArrayTag=D,t.float64ArrayTag=$,t.functionTag=h,t.int16ArrayTag=_,t.int32ArrayTag=F,t.int8ArrayTag=j,t.mapTag=l,t.numberTag=r,t.objectTag=g,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=T,t.uint32ArrayTag=N,t.uint8ArrayTag=b,t.uint8ClampedArrayTag=w})(Y5)),Y5}var J5={},_G;function W4e(){return _G||(_G=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(J5)),J5}var IG;function Hae(){return IG||(IG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K4e(),n=zae(),r=Vae(),i=Uae(),s=W4e();function o(d,h){return a(d,void 0,d,new Map,h)}function a(d,h,m,g=new Map,v=void 0){const x=v==null?void 0:v(d,h,m,g);if(x!==void 0)return x;if(i.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const b=new Array(d.length);g.set(d,b);for(let w=0;w<d.length;w++)b[w]=a(d[w],w,m,g,v);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;g.set(d,b);for(const[w,T]of d)b.set(w,a(T,w,m,g,v));return b}if(d instanceof Set){const b=new Set;g.set(d,b);for(const w of d)b.add(a(w,void 0,m,g,v));return b}if(typeof an<"u"&&an.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,b);for(let w=0;w<d.length;w++)b[w]=a(d[w],w,m,g,v);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,b),l(b,d,m,g,v),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return g.set(d,b),l(b,d,m,g,v),b}if(typeof Blob<"u"&&d instanceof Blob){const b=new Blob([d],{type:d.type});return g.set(d,b),l(b,d,m,g,v),b}if(d instanceof Error){const b=new d.constructor;return g.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,l(b,d,m,g,v),b}if(d instanceof Boolean){const b=new Boolean(d.valueOf());return g.set(d,b),l(b,d,m,g,v),b}if(d instanceof Number){const b=new Number(d.valueOf());return g.set(d,b),l(b,d,m,g,v),b}if(d instanceof String){const b=new String(d.valueOf());return g.set(d,b),l(b,d,m,g,v),b}if(typeof d=="object"&&c(d)){const b=Object.create(Object.getPrototypeOf(d));return g.set(d,b),l(b,d,m,g,v),b}return d}function l(d,h,m=d,g,v){const x=[...Object.keys(h),...e.getSymbols(h)];for(let b=0;b<x.length;b++){const w=x[b],T=Object.getOwnPropertyDescriptor(d,w);(T==null||T.writable)&&(d[w]=a(h[w],w,m,g,v))}}function c(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=a,t.copyProperties=l})(G5)),G5}var RG;function Y4e(){return RG||(RG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hae();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(q5)),q5}var OG;function J4e(){return OG||(OG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$ae(),n=Y4e();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(U5)),U5}var X5={},Q5={},Z5={},MG;function X4e(){return MG||(MG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hae(),n=Vae();function r(i,s){return e.cloneDeepWith(i,(o,a,l,c)=>{const d=s==null?void 0:s(o,a,l,c);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(Z5)),Z5}var LG;function Q4e(){return LG||(LG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X4e();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Q5)),Q5}var e3={},t3={},DG;function qae(){return DG||(DG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(t3)),t3}var n3={},jG;function Z4e(){return jG||(jG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zae();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(n3)),n3}var BG;function eMe(){return BG||(BG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Iae(),n=qae(),r=Z4e(),i=Bj();function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&e.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=i.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let d=0;d<l.length;d++){const h=l[d];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}t.has=s})(e3)),e3}var UG;function tMe(){return UG||(UG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$ae(),n=jj(),r=Q4e(),i=Uj(),s=eMe();function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return l=r.cloneDeep(l),function(c){const d=i.get(c,a);return d===void 0?s.has(c,a):l===void 0?d===void 0:e.isMatch(d,l)}}t.matchesProperty=o})(X5)),X5}var FG;function nMe(){return FG||(FG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jae(),n=q4e(),r=J4e(),i=tMe();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(j5)),j5}var $G;function rMe(){return $G||($G=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$4e(),n=jae(),r=H4e(),i=nMe();function s(o,a=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(a)):[]}t.uniqBy=s})(_5)),_5}var r3,zG;function iMe(){return zG||(zG=1,r3=rMe().uniqBy),r3}var sMe=iMe();const VG=bs(sMe);function oMe(t,e,n){return e===!0?VG(t,n):typeof e=="function"?VG(t,e):t}var i3={exports:{}},s3={},o3={exports:{}},a3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HG;function aMe(){if(HG)return a3;HG=1;var t=Gx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,m){var g=m(),v=r({inst:{value:g,getSnapshot:m}}),x=v[0].inst,b=v[1];return s(function(){x.value=g,x.getSnapshot=m,l(x)&&b({inst:x})},[h,g,m]),i(function(){return l(x)&&b({inst:x}),h(function(){l(x)&&b({inst:x})})},[h]),o(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!n(h,g)}catch{return!0}}function c(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return a3.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,a3}var qG;function lMe(){return qG||(qG=1,o3.exports=aMe()),o3.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GG;function cMe(){if(GG)return s3;GG=1;var t=Gx(),e=lMe();function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return s3.useSyncExternalStoreWithSelector=function(c,d,h,m,g){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=a(function(){function w(_){if(!T){if(T=!0,N=_,_=m(_),g!==void 0&&x.hasValue){var F=x.value;if(g(F,_))return O=F}return O=_}if(F=O,r(N,_))return F;var z=m(_);return g!==void 0&&g(F,z)?(N=_,F):(N=_,O=z)}var T=!1,N,O,j=h===void 0?null:h;return[function(){return w(d())},j===null?void 0:function(){return w(j())}]},[d,h,m,g]);var b=i(c,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),l(b),b},s3}var KG;function uMe(){return KG||(KG=1,i3.exports=cMe()),i3.exports}var dMe=uMe(),zj=S.createContext(null),fMe=t=>t,Rr=()=>{var t=S.useContext(zj);return t?t.store.dispatch:fMe},FT=()=>{},hMe=()=>FT,pMe=(t,e)=>t===e;function Dt(t){var e=S.useContext(zj);return dMe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:hMe,e?e.store.getState:FT,e?e.store.getState:FT,e?t:FT,pMe)}function mMe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function gMe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function yMe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var WG=t=>Array.isArray(t)?t:[t];function xMe(t){const e=Array.isArray(t[0])?t[0]:t;return yMe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function vMe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var bMe=class{constructor(t){this.value=t}deref(){return this.value}},wMe=typeof WeakRef<"u"?WeakRef:bMe,EMe=0,YG=1;function PA(){return{s:EMe,v:void 0,o:null,p:null}}function Gae(t,e={}){let n=PA();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var h;let a=n;const{length:l}=arguments;for(let m=0,g=l;m<g;m++){const v=arguments[m];if(typeof v=="function"||typeof v=="object"&&v!==null){let x=a.o;x===null&&(a.o=x=new WeakMap);const b=x.get(v);b===void 0?(a=PA(),x.set(v,a)):a=b}else{let x=a.p;x===null&&(a.p=x=new Map);const b=x.get(v);b===void 0?(a=PA(),x.set(v,a)):a=b}}const c=a;let d;if(a.s===YG)d=a.v;else if(d=t.apply(null,arguments),s++,r){const m=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;m!=null&&r(m,d)&&(d=m,s!==0&&s--),i=typeof d=="object"&&d!==null||typeof d=="function"?new wMe(d):d}return c.s=YG,c.v=d,d}return o.clearCache=()=>{n=PA(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function SMe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),mMe(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...n,...l},{memoize:h,memoizeOptions:m=[],argsMemoize:g=Gae,argsMemoizeOptions:v=[]}=d,x=WG(m),b=WG(v),w=xMe(i),T=h(function(){return s++,c.apply(null,arguments)},...x),N=g(function(){o++;const j=vMe(w,arguments);return a=T.apply(null,j),a},...b);return Object.assign(N,{resultFunc:c,memoizedResultFunc:T,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var je=SMe(Gae),AMe=Object.assign((t,e=je)=>{gMe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>AMe}),l3={},c3={},u3={},JG;function TMe(){return JG||(JG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),a=e(i);if(o===a&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};t.compareValues=n})(u3)),u3}var d3={},f3={},XG;function Kae(){return XG||(XG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(f3)),f3}var QG;function kMe(){return QG||(QG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kae(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(d3)),d3}var ZG;function NMe(){return ZG||(ZG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TMe(),n=kMe(),r=Bj();function i(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(g=>String(g));const c=(g,v)=>{let x=g;for(let b=0;b<v.length&&x!=null;++b)x=x[v[b]];return x},d=(g,v)=>v==null||g==null?v:typeof g=="object"&&"key"in g?Object.hasOwn(v,g.key)?v[g.key]:c(v,g.path):typeof g=="function"?g(v):Array.isArray(g)?c(v,g):typeof v=="object"?v[g]:v,h=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return s.map(g=>({original:g,criteria:h.map(v=>d(v,g))})).slice().sort((g,v)=>{for(let x=0;x<h.length;x++){const b=e.compareValues(g.criteria[x],v.criteria[x],a[x]);if(b!==0)return b}return 0}).map(g=>g.original)}t.orderBy=i})(c3)),c3}var h3={},eK;function CMe(){return eK||(eK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(a,l)=>{for(let c=0;c<a.length;c++){const d=a[c];Array.isArray(d)&&l<s?o(d,l+1):i.push(d)}};return o(n,0),i}t.flatten=e})(h3)),h3}var p3={},tK;function Wae(){return tK||(tK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qae(),n=$j(),r=Bae(),i=Fae();function s(o,a,l){return r.isObject(l)&&(typeof a=="number"&&n.isArrayLike(l)&&e.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?i.eq(l[a],o):!1}t.isIterateeCall=s})(p3)),p3}var nK;function PMe(){return nK||(nK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NMe(),n=CMe(),r=Wae();function i(s,...o){const a=o.length;return a>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(l3)),l3}var m3,rK;function _Me(){return rK||(rK=1,m3=PMe().sortBy),m3}var IMe=_Me();const aC=bs(IMe);var Yae=t=>t.legend.settings,RMe=t=>t.legend.size,OMe=t=>t.legend.payload;je([OMe,Yae],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?aC(r,n):r});var _A=1;function MMe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=S.useState({height:0,left:0,top:0,width:0}),r=S.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>_A||Math.abs(o.left-e.left)>_A||Math.abs(o.top-e.top)>_A||Math.abs(o.width-e.width)>_A)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function as(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var LMe=typeof Symbol=="function"&&Symbol.observable||"@@observable",iK=LMe,g3=()=>Math.random().toString(36).substring(7).split("").join("."),DMe={INIT:`@@redux/INIT${g3()}`,REPLACE:`@@redux/REPLACE${g3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${g3()}`},$2=DMe;function Vj(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Jae(t,e,n){if(typeof t!="function")throw new Error(as(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(as(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(as(1));return n(Jae)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((b,w)=>{o.set(w,b)}))}function d(){if(l)throw new Error(as(3));return i}function h(b){if(typeof b!="function")throw new Error(as(4));if(l)throw new Error(as(5));let w=!0;c();const T=a++;return o.set(T,b),function(){if(w){if(l)throw new Error(as(6));w=!1,c(),o.delete(T),s=null}}}function m(b){if(!Vj(b))throw new Error(as(7));if(typeof b.type>"u")throw new Error(as(8));if(typeof b.type!="string")throw new Error(as(17));if(l)throw new Error(as(9));try{l=!0,i=r(i,b)}finally{l=!1}return(s=o).forEach(T=>{T()}),b}function g(b){if(typeof b!="function")throw new Error(as(10));r=b,m({type:$2.REPLACE})}function v(){const b=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(as(11));function T(){const O=w;O.next&&O.next(d())}return T(),{unsubscribe:b(T)}},[iK](){return this}}}return m({type:$2.INIT}),{dispatch:m,subscribe:h,getState:d,replaceReducer:g,[iK]:v}}function jMe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:$2.INIT})>"u")throw new Error(as(12));if(typeof n(void 0,{type:$2.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(as(13))})}function Xae(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{jMe(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let d=0;d<r.length;d++){const h=r[d],m=n[h],g=o[h],v=m(g,a);if(typeof v>"u")throw a&&a.type,new Error(as(14));c[h]=v,l=l||v!==g}return l=l||r.length!==Object.keys(o).length,l?c:o}}function z2(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function BMe(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(as(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=z2(...a)(i.dispatch),{...i,dispatch:s}}}function Qae(t){return Vj(t)&&"type"in t&&typeof t.type=="string"}var Zae=Symbol.for("immer-nothing"),sK=Symbol.for("immer-draftable"),uo=Symbol.for("immer-state");function Ll(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ca=Object,Ox=ca.getPrototypeOf,V2="constructor",lC="prototype",QM="configurable",H2="enumerable",$T="writable",t1="value",Cd=t=>!!t&&!!t[uo];function Yl(t){var e;return t?ele(t)||cC(t)||!!t[sK]||!!((e=t[V2])!=null&&e[sK])||uC(t)||dC(t):!1}var UMe=ca[lC][V2].toString(),oK=new WeakMap;function ele(t){if(!t||!Hj(t))return!1;const e=Ox(t);if(e===null||e===ca[lC])return!0;const n=ca.hasOwnProperty.call(e,V2)&&e[V2];if(n===Object)return!0;if(!_g(n))return!1;let r=oK.get(n);return r===void 0&&(r=Function.toString.call(n),oK.set(n,r)),r===UMe}function cE(t,e,n=!0){uE(t)===0?(n?Reflect.ownKeys(t):ca.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function uE(t){const e=t[uo];return e?e.type_:cC(t)?1:uC(t)?2:dC(t)?3:0}var aK=(t,e,n=uE(t))=>n===2?t.has(e):ca[lC].hasOwnProperty.call(t,e),ZM=(t,e,n=uE(t))=>n===2?t.get(e):t[e],q2=(t,e,n,r=uE(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function FMe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var cC=Array.isArray,uC=t=>t instanceof Map,dC=t=>t instanceof Set,Hj=t=>typeof t=="object",_g=t=>typeof t=="function",y3=t=>typeof t=="boolean";function $Me(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var ju=t=>t.copy_||t.base_,qj=t=>t.modified_?t.copy_:t.base_;function eL(t,e){if(uC(t))return new Map(t);if(dC(t))return new Set(t);if(cC(t))return Array[lC].slice.call(t);const n=ele(t);if(e===!0||e==="class_only"&&!n){const r=ca.getOwnPropertyDescriptors(t);delete r[uo];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a[$T]===!1&&(a[$T]=!0,a[QM]=!0),(a.get||a.set)&&(r[o]={[QM]:!0,[$T]:!0,[H2]:a[H2],[t1]:t[o]})}return ca.create(Ox(t),r)}else{const r=Ox(t);if(r!==null&&n)return{...t};const i=ca.create(r);return ca.assign(i,t)}}function Gj(t,e=!1){return fC(t)||Cd(t)||!Yl(t)||(uE(t)>1&&ca.defineProperties(t,{set:IA,add:IA,clear:IA,delete:IA}),ca.freeze(t),e&&cE(t,(n,r)=>{Gj(r,!0)},!1)),t}function zMe(){Ll(2)}var IA={[t1]:zMe};function fC(t){return t===null||!Hj(t)?!0:ca.isFrozen(t)}var G2="MapSet",tL="Patches",lK="ArrayMethods",tle={};function zm(t){const e=tle[t];return e||Ll(0,t),e}var cK=t=>!!tle[t],n1,nle=()=>n1,VMe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:cK(G2)?zm(G2):void 0,arrayMethodsPlugin_:cK(lK)?zm(lK):void 0});function uK(t,e){e&&(t.patchPlugin_=zm(tL),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function nL(t){rL(t),t.drafts_.forEach(HMe),t.drafts_=null}function rL(t){t===n1&&(n1=t.parent_)}var dK=t=>n1=VMe(n1,t);function HMe(t){const e=t[uo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function fK(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[uo].modified_&&(nL(e),Ll(4)),Yl(t)&&(t=hK(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[uo].base_,t,e)}else t=hK(e,n);return qMe(e,t,!0),nL(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Zae?t:void 0}function hK(t,e){if(fC(e))return e;const n=e[uo];if(!n)return Kj(e,t.handledSet_,t);if(!hC(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);sle(n,t)}return n.copy_}function qMe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Gj(e,n)}function rle(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var hC=(t,e)=>t.scope_===e,GMe=[];function ile(t,e,n,r){const i=ju(t),s=t.type_;if(r!==void 0&&ZM(i,r,s)===e){q2(i,r,n,s);return}if(!t.draftLocations_){const a=t.draftLocations_=new Map;cE(i,(l,c)=>{if(Cd(c)){const d=a.get(c)||[];d.push(l),a.set(c,d)}})}const o=t.draftLocations_.get(e)??GMe;for(const a of o)q2(i,a,n,s)}function KMe(t,e,n){t.callbacks_.push(function(i){var a;const s=e;if(!s||!hC(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const o=qj(s);ile(t,s.draft_??s,o,n),sle(s,i)})}function sle(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}rle(t)}}function WMe(t,e,n){const{scope_:r}=t;if(Cd(n)){const i=n[uo];hC(i,r)&&i.callbacks_.push(function(){zT(t);const o=qj(i);ile(t,n,o,e)})}else Yl(n)&&t.callbacks_.push(function(){const s=ju(t);ZM(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Kj(ZM(t.copy_,e,t.type_),r.handledSet_,r)})}function Kj(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Cd(t)||e.has(t)||!Yl(t)||fC(t)||(e.add(t),cE(t,(r,i)=>{if(Cd(i)){const s=i[uo];if(hC(s,n)){const o=qj(s);q2(t,r,o,t.type_),rle(s)}}else Yl(i)&&Kj(i,e,n)})),t}function YMe(t,e){const n=cC(t),r={type_:n?1:0,scope_:e?e.scope_:nle(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=Wj;n&&(i=[r],s=r1);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,[a,r]}var Wj={get(t,e){if(e===uo)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=ju(t);if(!aK(i,e,t.type_))return JMe(t,i,e);const s=i[e];if(t.finalized_||!Yl(s)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&$Me(e))return s;if(s===x3(t.base_,e)){zT(t);const o=t.type_===1?+e:e,a=sL(t.scope_,s,t,o);return t.copy_[o]=a}return s},has(t,e){return e in ju(t)},ownKeys(t){return Reflect.ownKeys(ju(t))},set(t,e,n){const r=ole(ju(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=x3(ju(t),e),s=i==null?void 0:i[uo];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(FMe(n,i)&&(n!==void 0||aK(t.base_,e,t.type_)))return!0;zT(t),iL(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),WMe(t,e,n)),!0},deleteProperty(t,e){return zT(t),x3(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),iL(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ju(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[$T]:!0,[QM]:t.type_!==1||e!=="length",[H2]:r[H2],[t1]:n[e]}},defineProperty(){Ll(11)},getPrototypeOf(t){return Ox(t.base_)},setPrototypeOf(){Ll(12)}},r1={};cE(Wj,(t,e)=>{r1[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});r1.deleteProperty=function(t,e){return r1.set.call(this,t,e,void 0)};r1.set=function(t,e,n){return Wj.set.call(this,t[0],e,n,t[0])};function x3(t,e){const n=t[uo];return(n?ju(n):t)[e]}function JMe(t,e,n){var i;const r=ole(e,n);return r?t1 in r?r[t1]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function ole(t,e){if(!(e in t))return;let n=Ox(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ox(n)}}function iL(t){t.modified_||(t.modified_=!0,t.parent_&&iL(t.parent_))}function zT(t){t.copy_||(t.assigned_=new Map,t.copy_=eL(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var XMe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(_g(n)&&!_g(r)){const o=r;r=n;const a=this;return function(c=o,...d){return a.produce(c,h=>r.call(this,h,...d))}}_g(r)||Ll(6),i!==void 0&&!_g(i)&&Ll(7);let s;if(Yl(n)){const o=dK(this),a=sL(o,n,void 0);let l=!0;try{s=r(a),l=!1}finally{l?nL(o):rL(o)}return uK(o,i),fK(s,o)}else if(!n||!Hj(n)){if(s=r(n),s===void 0&&(s=n),s===Zae&&(s=void 0),this.autoFreeze_&&Gj(s,!0),i){const o=[],a=[];zm(tL).generateReplacementPatches_(n,s,{patches_:o,inversePatches_:a}),i(o,a)}return s}else Ll(1,n)},this.produceWithPatches=(n,r)=>{if(_g(n))return(a,...l)=>this.produceWithPatches(a,c=>n(c,...l));let i,s;return[this.produce(n,r,(a,l)=>{i=a,s=l}),i,s]},y3(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),y3(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),y3(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Yl(e)||Ll(8),Cd(e)&&(e=$l(e));const n=dK(this),r=sL(n,e,void 0);return r[uo].isManual_=!0,rL(n),r}finishDraft(e,n){const r=e&&e[uo];(!r||!r.isManual_)&&Ll(9);const{scope_:i}=r;return uK(i,n),fK(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=zm(tL).applyPatches_;return Cd(e)?i(e,n):this.produce(e,s=>i(s,n))}};function sL(t,e,n,r){const[i,s]=uC(e)?zm(G2).proxyMap_(e,n):dC(e)?zm(G2).proxySet_(e,n):YMe(e,n);return((n==null?void 0:n.scope_)??nle()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?KMe(n,s,r):s.callbacks_.push(function(l){var d;(d=l.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function $l(t){return Cd(t)||Ll(10,t),ale(t)}function ale(t){if(!Yl(t)||fC(t))return t;const e=t[uo];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=eL(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=eL(t,!0);return cE(n,(i,s)=>{q2(n,i,ale(s))},r),e&&(e.finalized_=!1),n}var QMe=new XMe,lle=QMe.produce;function cle(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var ZMe=cle(),eLe=cle,tLe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?z2:z2.apply(null,arguments)};function ol(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(da(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>Qae(r)&&r.type===t,n}var ule=class nw extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,nw.prototype)}static get[Symbol.species](){return nw}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new nw(...e[0].concat(this)):new nw(...e.concat(this))}};function pK(t){return Yl(t)?lle(t,()=>{}):t}function RA(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function nLe(t){return typeof t=="boolean"}var rLe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new ule;return n&&(nLe(n)?o.push(ZMe):o.push(eLe(n.extraArgument))),o},dle="RTK_autoBatch",Nr=()=>t=>({payload:t,meta:{[dle]:!0}}),mK=t=>e=>{setTimeout(e,t)},fle=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mK(10):t.type==="callback"?t.queueNotification:mK(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const h=()=>i&&d(),m=r.subscribe(h);return a.add(d),()=>{m(),a.delete(d)}},dispatch(d){var h;try{return i=!((h=d==null?void 0:d.meta)!=null&&h[dle]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(d)}finally{i=!0}}})},iLe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new ule(t);return r&&i.push(fle(typeof r=="object"?r:void 0)),i};function sLe(t){const e=rLe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(Vj(n))a=Xae(n);else throw new Error(da(1));let l;typeof r=="function"?l=r(e):l=e();let c=z2;i&&(c=tLe({trace:!1,...typeof i=="object"&&i}));const d=BMe(...l),h=iLe(d);let m=typeof o=="function"?o(h):h();const g=c(...m);return Jae(a,s,g)}function hle(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(da(28));if(a in e)throw new Error(da(29));return e[a]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function oLe(t){return typeof t=="function"}function aLe(t,e){let[n,r,i]=hle(e),s;if(oLe(t))s=()=>pK(t());else{const a=pK(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,h)=>{if(h)if(Cd(d)){const g=h(d,l);return g===void 0?d:g}else{if(Yl(d))return lle(d,m=>h(m,l));{const m=h(d,l);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},a)}return o.getInitialState=s,o}var lLe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",cLe=(t=21)=>{let e="",n=t;for(;n--;)e+=lLe[Math.random()*64|0];return e},uLe=Symbol.for("rtk-slice-createasyncthunk");function dLe(t,e){return`${t}/${e}`}function fLe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[uLe];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(da(11));const a=(typeof i.reducers=="function"?i.reducers(pLe()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(O,j){const _=typeof O=="string"?O:O.type;if(!_)throw new Error(da(12));if(_ in c.sliceCaseReducersByType)throw new Error(da(13));return c.sliceCaseReducersByType[_]=j,d},addMatcher(O,j){return c.sliceMatchers.push({matcher:O,reducer:j}),d},exposeAction(O,j){return c.actionCreators[O]=j,d},exposeCaseReducer(O,j){return c.sliceCaseReducersByName[O]=j,d}};l.forEach(O=>{const j=a[O],_={reducerName:O,type:dLe(s,O),createNotation:typeof i.reducers=="function"};gLe(j)?xLe(_,j,d,e):mLe(_,j,d)});function h(){const[O={},j=[],_=void 0]=typeof i.extraReducers=="function"?hle(i.extraReducers):[i.extraReducers],F={...O,...c.sliceCaseReducersByType};return aLe(i.initialState,z=>{for(let D in F)z.addCase(D,F[D]);for(let D of c.sliceMatchers)z.addMatcher(D.matcher,D.reducer);for(let D of j)z.addMatcher(D.matcher,D.reducer);_&&z.addDefaultCase(_)})}const m=O=>O,g=new Map,v=new WeakMap;let x;function b(O,j){return x||(x=h()),x(O,j)}function w(){return x||(x=h()),x.getInitialState()}function T(O,j=!1){function _(z){let D=z[O];return typeof D>"u"&&j&&(D=RA(v,_,w)),D}function F(z=m){const D=RA(g,j,()=>new WeakMap);return RA(D,z,()=>{const $={};for(const[G,H]of Object.entries(i.selectors??{}))$[G]=hLe(H,z,()=>RA(v,z,w),j);return $})}return{reducerPath:O,getSelectors:F,get selectors(){return F(_)},selectSlice:_}}const N={name:s,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...T(o),injectInto(O,{reducerPath:j,..._}={}){const F=j??o;return O.inject({reducerPath:F,reducer:b},_),{...N,...T(F,!0)}}};return N}}function hLe(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var Mo=fLe();function pLe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function mLe({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!yLe(r))throw new Error(da(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?ol(t,o):ol(t))}function gLe(t){return t._reducerDefinitionType==="asyncThunk"}function yLe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function xLe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(da(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:d}=n,h=i(t,s,d);r.exposeAction(e,h),o&&r.addCase(h.fulfilled,o),a&&r.addCase(h.pending,a),l&&r.addCase(h.rejected,l),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(e,{fulfilled:o||OA,pending:a||OA,rejected:l||OA,settled:c||OA})}function OA(){}var vLe="task",ple="listener",mle="completed",Yj="cancelled",bLe=`task-${Yj}`,wLe=`task-${mle}`,oL=`${ple}-${Yj}`,ELe=`${ple}-${mle}`,pC=class{constructor(t){Ne(this,"name","TaskAbortError");Ne(this,"message");this.code=t,this.message=`${vLe} ${Yj} (reason: ${t})`}},Jj=(t,e)=>{if(typeof t!="function")throw new TypeError(da(32))},K2=()=>{},gle=(t,e=K2)=>(t.catch(e),t),yle=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Tm=t=>{if(t.aborted)throw new pC(t.reason)};function xle(t,e){let n=K2;return new Promise((r,i)=>{const s=()=>i(new pC(t.reason));if(t.aborted){s();return}n=yle(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=K2})}var SLe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof pC?"cancelled":"rejected",error:n}}finally{e==null||e()}},W2=t=>e=>gle(xle(t,e).then(n=>(Tm(t),n))),vle=t=>{const e=W2(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:hy}=Object,gK={},mC="listenerMiddleware",ALe=(t,e)=>{const n=r=>yle(t,()=>r.abort(t.reason));return(r,i)=>{Jj(r);const s=new AbortController;n(s);const o=SLe(async()=>{Tm(t),Tm(s.signal);const a=await r({pause:W2(s.signal),delay:vle(s.signal),signal:s.signal});return Tm(s.signal),a},()=>s.abort(wLe));return i!=null&&i.autoJoin&&e.push(o.catch(K2)),{result:W2(t)(o),cancel(){s.abort(bLe)}}}},TLe=(t,e)=>{const n=async(r,i)=>{Tm(e);let s=()=>{};const a=[new Promise((l,c)=>{let d=t({predicate:r,effect:(h,m)=>{m.unsubscribe(),l([h,m.getState(),m.getOriginalState()])}});s=()=>{d(),c()}})];i!=null&&a.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await xle(e,Promise.race(a));return Tm(e),l}finally{s()}};return(r,i)=>gle(n(r,i))},ble=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=ol(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(da(21));return Jj(s),{predicate:i,type:e,effect:s}},wle=hy(t=>{const{type:e,predicate:n,effect:r}=ble(t);return{id:cLe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(da(22))}}},{withTypes:()=>wle}),yK=(t,e)=>{const{type:n,effect:r,predicate:i}=ble(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},aL=t=>{t.pending.forEach(e=>{e.abort(oL)})},kLe=(t,e)=>()=>{for(const n of e.keys())aL(n);t.clear()},xK=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},Ele=hy(ol(`${mC}/add`),{withTypes:()=>Ele}),NLe=ol(`${mC}/removeAll`),Sle=hy(ol(`${mC}/remove`),{withTypes:()=>Sle}),CLe=(...t)=>{console.error(`${mC}/error`,...t)},dE=(t={})=>{const e=new Map,n=new Map,r=g=>{const v=n.get(g)??0;n.set(g,v+1)},i=g=>{const v=n.get(g)??1;v===1?n.delete(g):n.set(g,v-1)},{extra:s,onError:o=CLe}=t;Jj(o);const a=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),v=>{g.unsubscribe(),v!=null&&v.cancelActive&&aL(g)}),l=g=>{const v=yK(e,g)??wle(g);return a(v)};hy(l,{withTypes:()=>l});const c=g=>{const v=yK(e,g);return v&&(v.unsubscribe(),g.cancelActive&&aL(v)),!!v};hy(c,{withTypes:()=>c});const d=async(g,v,x,b)=>{const w=new AbortController,T=TLe(l,w.signal),N=[];try{g.pending.add(w),r(g),await Promise.resolve(g.effect(v,hy({},x,{getOriginalState:b,condition:(O,j)=>T(O,j).then(Boolean),take:T,delay:vle(w.signal),pause:W2(w.signal),extra:s,signal:w.signal,fork:ALe(w.signal,N),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((O,j,_)=>{O!==w&&(O.abort(oL),_.delete(O))})},cancel:()=>{w.abort(oL),g.pending.delete(w)},throwIfCancelled:()=>{Tm(w.signal)}})))}catch(O){O instanceof pC||xK(o,O,{raisedBy:"effect"})}finally{await Promise.all(N),w.abort(ELe),i(g),g.pending.delete(w)}},h=kLe(e,n);return{middleware:g=>v=>x=>{if(!Qae(x))return v(x);if(Ele.match(x))return l(x.payload);if(NLe.match(x)){h();return}if(Sle.match(x))return c(x.payload);let b=g.getState();const w=()=>{if(b===gK)throw new Error(da(23));return b};let T;try{if(T=v(x),e.size>0){const N=g.getState(),O=Array.from(e.values());for(const j of O){let _=!1;try{_=j.predicate(x,N,b)}catch(F){_=!1,xK(o,F,{raisedBy:"predicate"})}_&&d(j,x,g,w)}}}finally{b=gK}return T},startListening:l,stopListening:c,clearListeners:h}};function da(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var PLe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Ale=Mo({name:"chartLayout",initialState:PLe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:_Le,setLayout:ILe,setChartSize:RLe,setScale:OLe}=Ale.actions,MLe=Ale.reducer;function Tle(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function fr(t){return Number.isFinite(t)}function Hc(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function vK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vK(Object(n),!0).forEach(function(r){LLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LLe(t,e,n){return(e=DLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DLe(t){var e=jLe(t,"string");return typeof e=="symbol"?e:e+""}function jLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wn(t,e,n){return Ar(t)||Ar(e)?n:Vc(e)?$m(t,e,n):typeof e=="function"?e(t):n}var BLe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:a}=e;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&Nt(t[s]))return qg(qg({},t),{},{[s]:t[s]+(r||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&Nt(t[o]))return qg(qg({},t),{},{[o]:t[o]+(i||0)})}return t},Jc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",kle=(t,e,n,r)=>{if(r)return t.map(a=>a.coordinate);var i,s,o=t.map(a=>(a.coordinate===e&&(i=!0),a.coordinate===n&&(s=!0),a.coordinate));return i||o.push(e),s||o.push(n),o},Nle=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:h,niceTicks:m,axisType:g}=t;if(!o)return null;var v=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=i==="category"&&o.bandwidth?o.bandwidth()/v:0;if(x=g==="angleAxis"&&s&&s.length>=2?Ki(s[0]-s[1])*2*x:x,h||m){var b=(h||m||[]).map((w,T)=>{var N=r?r.indexOf(w):w;return{coordinate:o(N)+x,value:w,offset:x,index:T}});return b.filter(w=>!sl(w.coordinate))}return l&&c?c.map((w,T)=>({coordinate:o(w)+x,value:w,index:T,offset:x})):o.ticks&&d!=null?o.ticks(d).map((w,T)=>({coordinate:o(w)+x,value:w,offset:x,index:T})):o.domain().map((w,T)=>({coordinate:o(w)+x,value:r?r[w]:w,index:T,offset:x}))},bK=1e-4,ULe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-bK,s=Math.max(r[0],r[1])+bK,o=t(e[0]),a=t(e[n-1]);(o<i||o>s||a<i||a>s)&&t.domain([e[0],e[n-1]])}},FLe=(t,e)=>{if(!e||e.length!==2||!Nt(e[0])||!Nt(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Nt(t[0])||t[0]<n)&&(i[0]=n),(!Nt(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},$Le=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0,a=0;a<n;++a){var l=t[a],c=l==null?void 0:l[i];if(c!=null){var d=c[1],h=c[0],m=sl(d)?h:d;m>=0?(c[0]=s,c[1]=s+m,s=d):(c[0]=o,c[1]=o+m,o=d)}}}},zLe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0;o<n;++o){var a=t[o],l=a==null?void 0:a[i];if(l!=null){var c=sl(l[1])?l[0]:l[1];c>=0?(l[0]=s,l[1]=s+c,s=l[1]):(l[0]=0,l[1]=0)}}}},VLe={sign:$Le,expand:g4e,none:Fm,silhouette:y4e,wiggle:x4e,positive:zLe},HLe=(t,e,n)=>{var r,i=(r=VLe[n])!==null&&r!==void 0?r:Fm,s=m4e().keys(e).value((a,l)=>Number(Wn(a,l,0))).order(JM).offset(i),o=s(t);return o.forEach((a,l)=>{a.forEach((c,d)=>{var h=Wn(t[d],e[l],0);Array.isArray(h)&&h.length===2&&Nt(h[0])&&Nt(h[1])&&(c[0]=h[0],c[1]=h[1])})}),o};function Cle(t){return t==null?void 0:String(t)}function Y2(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ar(i[e.dataKey])){var a=Oae(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Wn(i,Ar(o)?e.dataKey:o);return Ar(l)?null:e.scale(l)}var wK=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var a=Wn(s,e.dataKey,e.scale.domain()[o]);return Ar(a)?null:e.scale(a)-i/2+r},qLe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},GLe=t=>{var e=t.flat(2).filter(Nt);return[Math.min(...e),Math.max(...e)]},KLe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],WLe=(t,e,n)=>{if(t!=null)return KLe(Object.keys(t).reduce((r,i)=>{var s=t[i];if(!s)return r;var{stackedData:o}=s,a=o.reduce((l,c)=>{var d=Tle(c,e,n),h=GLe(d);return!fr(h[0])||!fr(h[1])?l:[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},EK=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SK=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_h=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=aC(e,d=>d.coordinate),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],c=i[o-1];s=Math.min(((l==null?void 0:l.coordinate)||0)-((c==null?void 0:c.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function AK(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return qg(qg({},e),{},{dataKey:n,payload:r,value:i,name:s})}function Uh(t,e){if(t)return String(t);if(typeof e=="string")return e}var YLe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},JLe=(t,e)=>e==="centric"?t.angle:t.radius,Ud=t=>t.layout.width,Fd=t=>t.layout.height,XLe=t=>t.layout.scale,Ple=t=>t.layout.margin,gC=je(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),yC=je(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),_le="data-recharts-item-index",Ile="data-recharts-item-id",fE=60;function TK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TK(Object(n),!0).forEach(function(r){QLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QLe(t,e,n){return(e=ZLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZLe(t){var e=eDe(t,"string");return typeof e=="symbol"?e:e+""}function eDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tDe=t=>t.brush.height;function nDe(t){var e=yC(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:fE;return n+i}return n},0)}function rDe(t){var e=yC(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:fE;return n+i}return n},0)}function iDe(t){var e=gC(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function sDe(t){var e=gC(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Pi=je([Ud,Fd,Ple,tDe,nDe,rDe,iDe,sDe,Yae,RMe],(t,e,n,r,i,s,o,a,l,c)=>{var d={left:(n.left||0)+i,right:(n.right||0)+s},h={top:(n.top||0)+o,bottom:(n.bottom||0)+a},m=MA(MA({},h),d),g=m.bottom;m.bottom+=r,m=BLe(m,l,c);var v=t-m.left-m.right,x=e-m.top-m.bottom;return MA(MA({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(x,0)})}),oDe=je(Pi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),Xj=je(Ud,Fd,(t,e)=>({x:0,y:0,width:t,height:e})),aDe=S.createContext(null),Yi=()=>S.useContext(aDe)!=null,xC=t=>t.brush,vC=je([xC,Pi,Ple],(t,e,n)=>({height:t.height,x:Nt(t.x)?t.x:e.left,y:Nt(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:Nt(t.width)?t.width:e.width})),v3={},b3={},w3={},kK;function lDe(){return kK||(kK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),d=()=>{a!==null&&(n.apply(o,a),o=void 0,a=null)},h=()=>{c&&d(),x()};let m=null;const g=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,h()},r)},v=()=>{m!==null&&(clearTimeout(m),m=null)},x=()=>{v(),o=void 0,a=null},b=()=>{d()},w=function(...T){if(i!=null&&i.aborted)return;o=this,a=T;const N=m==null;g(),l&&N&&d()};return w.schedule=g,w.cancel=x,w.flush=b,i==null||i.addEventListener("abort",x,{once:!0}),w}t.debounce=e})(w3)),w3}var NK;function cDe(){return NK||(NK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lDe();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let d,h=null;const m=e.debounce(function(...x){d=r.apply(this,x),h=null},i,{edges:c}),g=function(...x){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(d=r.apply(this,x),h=Date.now(),m.cancel(),m.schedule(),d):(m.apply(this,x),d)},v=()=>(m.flush(),d);return g.cancel=m.cancel,g.flush=v,g}t.debounce=n})(b3)),b3}var CK;function uDe(){return CK||(CK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cDe();function n(r,i=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:a})}t.throttle=n})(v3)),v3}var E3,PK;function dDe(){return PK||(PK=1,E3=uDe().throttle),E3}var fDe=dDe();const hDe=bs(fDe);var J2=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},Rle=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:o}=n,a=Nd(r)?t:Number(r),l=Nd(i)?e:Number(i);return s&&s>0&&(a?l=a/s:l&&(a=l*s),o&&l!=null&&l>o&&(l=o)),{calculatedWidth:a,calculatedHeight:l}},pDe={width:0,height:0,overflow:"visible"},mDe={width:0,overflowX:"visible"},gDe={height:0,overflowY:"visible"},yDe={},xDe=t=>{var{width:e,height:n}=t,r=Nd(e),i=Nd(n);return r&&i?pDe:r?mDe:i?gDe:yDe};function vDe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function lL(){return lL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lL.apply(null,arguments)}function _K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_K(Object(n),!0).forEach(function(r){bDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_K(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bDe(t,e,n){return(e=wDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wDe(t){var e=EDe(t,"string");return typeof e=="symbol"?e:e+""}function EDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ole=S.createContext({width:-1,height:-1});function SDe(t){return Hc(t.width)&&Hc(t.height)}function Mle(t){var{children:e,width:n,height:r}=t,i=S.useMemo(()=>({width:n,height:r}),[n,r]);return SDe(i)?S.createElement(Ole.Provider,{value:i},e):null}var Qj=()=>S.useContext(Ole),ADe=S.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:d=0,id:h,className:m,onResize:g,style:v={}}=t,x=S.useRef(null),b=S.useRef();b.current=g,S.useImperativeHandle(e,()=>x.current);var[w,T]=S.useState({containerWidth:r.width,containerHeight:r.height}),N=S.useCallback((z,D)=>{T($=>{var G=Math.round(z),H=Math.round(D);return $.containerWidth===G&&$.containerHeight===H?$:{containerWidth:G,containerHeight:H}})},[]);S.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return lE;var z=H=>{var U,{width:A,height:I}=H[0].contentRect;N(A,I),(U=b.current)===null||U===void 0||U.call(b,A,I)};d>0&&(z=hDe(z,d,{trailing:!0,leading:!1}));var D=new ResizeObserver(z),{width:$,height:G}=x.current.getBoundingClientRect();return N($,G),D.observe(x.current),()=>{D.disconnect()}},[N,d]);var{containerWidth:O,containerHeight:j}=w;J2(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:_,calculatedHeight:F}=Rle(O,j,{width:i,height:s,aspect:n,maxHeight:l});return J2(_!=null&&_>0||F!=null&&F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,F,i,s,o,a,n),S.createElement("div",{id:h?"".concat(h):void 0,className:Rn("recharts-responsive-container",m),style:IK(IK({},v),{},{width:i,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:x},S.createElement("div",{style:xDe({width:i,height:s})},S.createElement(Mle,{width:_,height:F},c)))}),i1=S.forwardRef((t,e)=>{var n=Qj();if(Hc(n.width)&&Hc(n.height))return t.children;var{width:r,height:i}=vDe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=Rle(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Nt(s)&&Nt(o)?S.createElement(Mle,{width:s,height:o},t.children):S.createElement(ADe,lL({},t,{width:r,height:i,ref:e}))});function Lle(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var bC=()=>{var t,e=Yi(),n=Dt(oDe),r=Dt(vC),i=(t=Dt(xC))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},TDe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Dle=()=>{var t;return(t=Dt(Pi))!==null&&t!==void 0?t:TDe},jle=()=>Dt(Ud),Ble=()=>Dt(Fd),Tn=t=>t.layout.layoutType,Fh=()=>Dt(Tn),kDe=()=>{var t=Fh();if(t==="horizontal"||t==="vertical")return t},NDe=()=>{var t=Fh();return t!==void 0},wC=t=>{var e=Rr(),n=Yi(),{width:r,height:i}=t,s=Qj(),o=r,a=i;return s&&(o=s.width>0?s.width:r,a=s.height>0?s.height:i),S.useEffect(()=>{!n&&Hc(o)&&Hc(a)&&e(RLe({width:o,height:a}))},[e,n,o,a]),null},Ule=Symbol.for("immer-nothing"),RK=Symbol.for("immer-draftable"),ma=Symbol.for("immer-state");function Dl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var s1=Object.getPrototypeOf;function Mx(t){return!!t&&!!t[ma]}function Vm(t){var e;return t?Fle(t)||Array.isArray(t)||!!t[RK]||!!((e=t.constructor)!=null&&e[RK])||hE(t)||SC(t):!1}var CDe=Object.prototype.constructor.toString(),OK=new WeakMap;function Fle(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=OK.get(n);return r===void 0&&(r=Function.toString.call(n),OK.set(n,r)),r===CDe}function X2(t,e,n=!0){EC(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function EC(t){const e=t[ma];return e?e.type_:Array.isArray(t)?1:hE(t)?2:SC(t)?3:0}function cL(t,e){return EC(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function $le(t,e,n){const r=EC(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function PDe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function hE(t){return t instanceof Map}function SC(t){return t instanceof Set}function kp(t){return t.copy_||t.base_}function uL(t,e){if(hE(t))return new Map(t);if(SC(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Fle(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ma];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(s1(t),r)}else{const r=s1(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Zj(t,e=!1){return AC(t)||Mx(t)||!Vm(t)||(EC(t)>1&&Object.defineProperties(t,{set:LA,add:LA,clear:LA,delete:LA}),Object.freeze(t),e&&Object.values(t).forEach(n=>Zj(n,!0))),t}function _De(){Dl(2)}var LA={value:_De};function AC(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var IDe={};function Hm(t){const e=IDe[t];return e||Dl(0,t),e}var o1;function zle(){return o1}function RDe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function MK(t,e){e&&(Hm("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function dL(t){fL(t),t.drafts_.forEach(ODe),t.drafts_=null}function fL(t){t===o1&&(o1=t.parent_)}function LK(t){return o1=RDe(o1,t)}function ODe(t){const e=t[ma];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function DK(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ma].modified_&&(dL(e),Dl(4)),Vm(t)&&(t=Q2(e,t),e.parent_||Z2(e,t)),e.patches_&&Hm("Patches").generateReplacementPatches_(n[ma].base_,t,e.patches_,e.inversePatches_)):t=Q2(e,n,[]),dL(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Ule?t:void 0}function Q2(t,e,n){if(AC(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[ma];if(!i)return X2(e,(s,o)=>jK(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Z2(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),X2(o,(l,c)=>jK(t,i,s,l,c,n,a),r),Z2(t,s,!1),n&&t.patches_&&Hm("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function jK(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=AC(i);if(!(a&&!o)){if(Mx(i)){const l=s&&e&&e.type_!==3&&!cL(e.assigned_,r)?s.concat(r):void 0,c=Q2(t,i,l);if($le(n,r,c),Mx(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Vm(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;Q2(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(hE(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Z2(t,i)}}}function Z2(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Zj(e,n)}function MDe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:zle(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=e6;n&&(i=[r],s=a1);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var e6={get(t,e){if(e===ma)return t;const n=kp(t);if(!cL(n,e))return LDe(t,n,e);const r=n[e];return t.finalized_||!Vm(r)?r:r===S3(t.base_,e)?(A3(t),t.copy_[e]=pL(r,t)):r},has(t,e){return e in kp(t)},ownKeys(t){return Reflect.ownKeys(kp(t))},set(t,e,n){const r=Vle(kp(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=S3(kp(t),e),s=i==null?void 0:i[ma];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(PDe(n,i)&&(n!==void 0||cL(t.base_,e)))return!0;A3(t),hL(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return S3(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,A3(t),hL(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=kp(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Dl(11)},getPrototypeOf(t){return s1(t.base_)},setPrototypeOf(){Dl(12)}},a1={};X2(e6,(t,e)=>{a1[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});a1.deleteProperty=function(t,e){return a1.set.call(this,t,e,void 0)};a1.set=function(t,e,n){return e6.set.call(this,t[0],e,n,t[0])};function S3(t,e){const n=t[ma];return(n?kp(n):t)[e]}function LDe(t,e,n){var i;const r=Vle(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Vle(t,e){if(!(e in t))return;let n=s1(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=s1(n)}}function hL(t){t.modified_||(t.modified_=!0,t.parent_&&hL(t.parent_))}function A3(t){t.copy_||(t.copy_=uL(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var DDe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,d=>n.call(this,d,...c))}}typeof n!="function"&&Dl(6),r!==void 0&&typeof r!="function"&&Dl(7);let i;if(Vm(e)){const s=LK(this),o=pL(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?dL(s):fL(s)}return MK(s,r),DK(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Ule&&(i=void 0),this.autoFreeze_&&Zj(i,!0),r){const s=[],o=[];Hm("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Dl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Vm(t)||Dl(8),Mx(t)&&(t=jDe(t));const e=LK(this),n=pL(t,void 0);return n[ma].isManual_=!0,fL(e),n}finishDraft(t,e){const n=t&&t[ma];(!n||!n.isManual_)&&Dl(9);const{scope_:r}=n;return MK(r,e),DK(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Hm("Patches").applyPatches_;return Mx(t)?r(t,e):this.produce(t,i=>r(i,e))}};function pL(t,e){const n=hE(t)?Hm("MapSet").proxyMap_(t,e):SC(t)?Hm("MapSet").proxySet_(t,e):MDe(t,e);return(e?e.scope_:zle()).drafts_.push(n),n}function jDe(t){return Mx(t)||Dl(10,t),Hle(t)}function Hle(t){if(!Vm(t)||AC(t))return t;const e=t[ma];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=uL(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=uL(t,!0);return X2(n,(i,s)=>{$le(n,i,Hle(s))},r),e&&(e.finalized_=!1),n}var BDe=new DDe;BDe.produce;var UDe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},qle=Mo({name:"legend",initialState:UDe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Nr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=$l(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Nr()},removeLegendPayload:{reducer(t,e){var n=$l(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Nr()}}}),{setLegendSize:Ugt,setLegendSettings:Fgt,addLegendPayload:Gle,replaceLegendPayload:Kle,removeLegendPayload:Wle}=qle.actions,FDe=qle.reducer;function mL(){return mL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mL.apply(null,arguments)}function BK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BK(Object(n),!0).forEach(function(r){$De(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $De(t,e,n){return(e=zDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zDe(t){var e=VDe(t,"string");return typeof e=="symbol"?e:e+""}function VDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HDe(t){return Array.isArray(t)&&Vc(t[0])&&Vc(t[1])?t.join(" ~ "):t}var qDe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:d,labelFormatter:h,accessibilityLayer:m=!1}=t,g=()=>{if(s&&s.length){var j={padding:0,margin:0},_=(a?aC(s,a):s).map((F,z)=>{if(F.type==="none")return null;var D=F.formatter||o||HDe,{value:$,name:G}=F,H=$,U=G;if(D){var A=D($,G,F,z,s);if(Array.isArray(A))[H,U]=A;else if(A!=null)H=A;else return null}var I=T3({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},r);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:I},Vc(U)?S.createElement("span",{className:"recharts-tooltip-item-name"},U):null,Vc(U)?S.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,S.createElement("span",{className:"recharts-tooltip-item-value"},H),S.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:j},_)}return null},v=T3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=T3({margin:0},i),b=!Ar(d),w=b?d:"",T=Rn("recharts-default-tooltip",l),N=Rn("recharts-tooltip-label",c);b&&h&&s!==void 0&&s!==null&&(w=h(d,s));var O=m?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",mL({className:T,style:v},O),S.createElement("p",{className:N,style:x},S.isValidElement(w)?w:"".concat(w)),g())},Pb="recharts-tooltip-wrapper",GDe={visibility:"hidden"};function KDe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Rn(Pb,{["".concat(Pb,"-right")]:Nt(n)&&e&&Nt(e.x)&&n>=e.x,["".concat(Pb,"-left")]:Nt(n)&&e&&Nt(e.x)&&n<e.x,["".concat(Pb,"-bottom")]:Nt(r)&&e&&Nt(e.y)&&r>=e.y,["".concat(Pb,"-top")]:Nt(r)&&e&&Nt(e.y)&&r<e.y})}function UK(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=t;if(s&&Nt(s[r]))return s[r];var d=n[r]-a-(i>0?i:0),h=n[r]+i;if(e[r])return o[r]?d:h;var m=l[r];if(m==null)return 0;if(o[r]){var g=d,v=m;return g<v?Math.max(h,m):Math.max(d,m)}if(c==null)return 0;var x=h+a,b=m+c;return x>b?Math.max(d,m):Math.max(h,m)}function WDe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function YDe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:o,useTranslate3d:a,viewBox:l}=t,c,d,h;return o.height>0&&o.width>0&&n?(d=UK({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),h=UK({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=WDe({translateX:d,translateY:h,useTranslate3d:a})):c=GDe,{cssProperties:c,cssClasses:KDe({translateX:d,translateY:h,coordinate:n})}}function FK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FK(Object(n),!0).forEach(function(r){gL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gL(t,e,n){return(e=JDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JDe(t){var e=XDe(t,"string");return typeof e=="symbol"?e:e+""}function XDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class QDe extends S.PureComponent{constructor(){super(...arguments),gL(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),gL(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:d,reverseDirection:h,useTranslate3d:m,viewBox:g,wrapperStyle:v,lastBoundingBox:x,innerRef:b,hasPortalFromProps:w}=this.props,{cssClasses:T,cssProperties:N}=YDe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:d,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:m,viewBox:g}),O=w?{}:DA(DA({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),j=DA(DA({},O),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},v);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:j,ref:b},s)}}var Yle=()=>{var t;return(t=Dt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function yL(){return yL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yL.apply(null,arguments)}function $K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$K(Object(n),!0).forEach(function(r){ZDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$K(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZDe(t,e,n){return(e=e8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e8e(t){var e=t8e(t,"string");return typeof e=="symbol"?e:e+""}function t8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VK={curveBasisClosed:i4e,curveBasisOpen:s4e,curveBasis:r4e,curveBumpX:VOe,curveBumpY:HOe,curveLinearClosed:o4e,curveLinear:iC,curveMonotoneX:a4e,curveMonotoneY:l4e,curveNatural:c4e,curveStep:u4e,curveStepAfter:f4e,curveStepBefore:d4e},ek=t=>fr(t.x)&&fr(t.y),HK=t=>t.base!=null&&ek(t.base)&&ek(t),_b=t=>t.x,Ib=t=>t.y,n8e=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(aE(t));return(n==="curveMonotone"||n==="curveBump")&&e?VK["".concat(n).concat(e==="vertical"?"Y":"X")]:VK[n]||iC},r8e=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,o=n8e(e,i),a=s?n.filter(ek):n,l;if(Array.isArray(r)){var c=n.map((g,v)=>zK(zK({},g),{},{base:r[v]}));i==="vertical"?l=CA().y(Ib).x1(_b).x0(g=>g.base.x):l=CA().x(_b).y1(Ib).y0(g=>g.base.y);var d=l.defined(HK).curve(o),h=s?c.filter(HK):c;return d(h)}i==="vertical"&&Nt(r)?l=CA().y(Ib).x1(_b).x0(r):Nt(r)?l=CA().x(_b).y1(Ib).y0(r):l=bae().x(_b).y(Ib);var m=l.defined(ek).curve(o);return m(a)},py=t=>{var{className:e,points:n,path:r,pathRef:i}=t,s=Fh();if((!n||!n.length)&&!r)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},a=n&&n.length?r8e(o):r;return S.createElement("path",yL({},co(t),Fj(t),{className:Rn("recharts-curve",e),d:a===null?void 0:a,ref:i}))},i8e=["x","y","top","left","width","height","className"];function xL(){return xL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xL.apply(null,arguments)}function qK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s8e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qK(Object(n),!0).forEach(function(r){o8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o8e(t,e,n){return(e=a8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a8e(t){var e=l8e(t,"string");return typeof e=="symbol"?e:e+""}function l8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c8e(t,e){if(t==null)return{};var n,r,i=u8e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function u8e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var d8e=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),f8e=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:a}=t,l=c8e(t,i8e),c=s8e({x:e,y:n,top:r,left:i,width:s,height:o},l);return!Nt(e)||!Nt(n)||!Nt(s)||!Nt(o)||!Nt(r)||!Nt(i)?null:S.createElement("path",xL({},qs(c),{className:Rn("recharts-cross",a),d:d8e(e,n,s,o,r,i)}))};function h8e(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function GK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GK(Object(n),!0).forEach(function(r){p8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p8e(t,e,n){return(e=m8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m8e(t){var e=g8e(t,"string");return typeof e=="symbol"?e:e+""}function g8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y8e=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Jle=(t,e,n)=>t.map(r=>"".concat(y8e(r)," ").concat(e,"ms ").concat(n)).join(","),x8e=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),l1=(t,e)=>Object.keys(e).reduce((n,r)=>KK(KK({},n),{},{[r]:t(r,e[r])}),{});function WK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WK(Object(n),!0).forEach(function(r){v8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v8e(t,e,n){return(e=b8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b8e(t){var e=w8e(t,"string");return typeof e=="symbol"?e:e+""}function w8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tk=(t,e,n)=>t+(e-t)*n,vL=t=>{var{from:e,to:n}=t;return e!==n},Xle=(t,e,n)=>{var r=l1((i,s)=>{if(vL(s)){var[o,a]=t(s.from,s.to,s.velocity);return Ni(Ni({},s),{},{from:o,velocity:a})}return s},e);return n<1?l1((i,s)=>vL(s)&&r[i]!=null?Ni(Ni({},s),{},{velocity:tk(s.velocity,r[i].velocity,n),from:tk(s.from,r[i].from,n)}):s,e):Xle(t,r,n-1)};function E8e(t,e,n,r,i,s){var o,a=r.reduce((m,g)=>Ni(Ni({},m),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),l=()=>l1((m,g)=>g.from,a),c=()=>!Object.values(a).filter(vL).length,d=null,h=m=>{o||(o=m);var g=m-o,v=g/n.dt;a=Xle(n,a,v),i(Ni(Ni(Ni({},t),e),l())),o=m,c()||(d=s.setTimeout(h))};return()=>(d=s.setTimeout(h),()=>{var m;(m=d)===null||m===void 0||m()})}function S8e(t,e,n,r,i,s,o){var a=null,l=i.reduce((h,m)=>{var g=t[m],v=e[m];return g==null||v==null?h:Ni(Ni({},h),{},{[m]:[g,v]})},{}),c,d=h=>{c||(c=h);var m=(h-c)/r,g=l1((x,b)=>tk(...b,n(m)),l);if(s(Ni(Ni(Ni({},t),e),g)),m<1)a=o.setTimeout(d);else{var v=l1((x,b)=>tk(...b,n(1)),l);s(Ni(Ni(Ni({},t),e),v))}};return()=>(a=o.setTimeout(d),()=>{var h;(h=a)===null||h===void 0||h()})}const A8e=(t,e,n,r,i,s)=>{var o=x8e(t,e);return n==null?()=>(i(Ni(Ni({},t),e)),()=>{}):n.isStepper===!0?E8e(t,e,n,o,i,s):S8e(t,e,n,r,o,i,s)};var nk=1e-4,Qle=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Zle=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),YK=(t,e)=>n=>{var r=Qle(t,e);return Zle(r,n)},T8e=(t,e)=>n=>{var r=Qle(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return Zle(i,n)},k8e=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},N8e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=k8e(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},C8e=(t,e,n,r)=>{var i=YK(t,n),s=YK(e,r),o=T8e(t,n),a=c=>c>1?1:c<0?0:c,l=c=>{for(var d=c>1?1:c,h=d,m=0;m<8;++m){var g=i(h)-d,v=o(h);if(Math.abs(g-d)<nk||v<nk)return s(h);h=a(h-g/v)}return s(h)};return l.isStepper=!1,l},JK=function(){return C8e(...N8e(...arguments))},P8e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,a,l)=>{var c=-(o-a)*n,d=l*r,h=l+(c-d)*i/1e3,m=l*i/1e3+o;return Math.abs(m-a)<nk&&Math.abs(h)<nk?[a,0]:[m,h]};return s.isStepper=!0,s.dt=i,s},_8e=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JK(t);case"spring":return P8e();default:if(t.split("(")[0]==="cubic-bezier")return JK(t)}return typeof t=="function"?t:null};function I8e(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class R8e{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function O8e(){return I8e(new R8e)}var M8e=S.createContext(O8e);function L8e(t,e){var n=S.useContext(M8e);return S.useMemo(()=>e??n(t),[t,e,n])}var D8e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),pE={isSsr:D8e()},j8e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},XK={t:0},k3={t:1};function cv(t){var e=Ei(t,j8e),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=e,d=n==="auto"?!pE.isSsr:n,h=L8e(e.animationId,e.animationManager),[m,g]=S.useState(d?XK:k3),v=S.useRef(null);return S.useEffect(()=>{d||g(k3)},[d]),S.useEffect(()=>{if(!d||!r)return lE;var x=A8e(XK,k3,_8e(s),i,g,h.getTimeoutController()),b=()=>{v.current=x()};return h.start([l,o,b,i,a]),()=>{h.stop(),v.current&&v.current(),a()}},[d,r,i,s,o,l,a,h]),c(m.t)}function uv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=S.useRef(e1(e)),r=S.useRef(t);return r.current!==t&&(n.current=e1(e),r.current=t),n.current}var B8e=["radius"],U8e=["radius"],QK,ZK,eW,tW,nW,rW,iW,sW,oW,aW;function lW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lW(Object(n),!0).forEach(function(r){F8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function F8e(t,e,n){return(e=$8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $8e(t){var e=z8e(t,"string");return typeof e=="symbol"?e:e+""}function z8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rk(){return rk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rk.apply(null,arguments)}function uW(t,e){if(t==null)return{};var n,r,i=V8e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function V8e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ac(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var dW=(t,e,n,r,i)=>{var s=mh(n),o=mh(r),a=Math.min(Math.abs(s)/2,Math.abs(o)/2),l=o>=0?1:-1,c=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0,h;if(a>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,v=4;g<v;g++)m[g]=i[g]>a?a:i[g];h=Kr(QK||(QK=ac(["M",",",""])),t,e+l*m[0]),m[0]>0&&(h+=Kr(ZK||(ZK=ac(["A ",",",",0,0,",",",",",""])),m[0],m[0],d,t+c*m[0],e)),h+=Kr(eW||(eW=ac(["L ",",",""])),t+n-c*m[1],e),m[1]>0&&(h+=Kr(tW||(tW=ac(["A ",",",",0,0,",`,
        `,",",""])),m[1],m[1],d,t+n,e+l*m[1])),h+=Kr(nW||(nW=ac(["L ",",",""])),t+n,e+r-l*m[2]),m[2]>0&&(h+=Kr(rW||(rW=ac(["A ",",",",0,0,",`,
        `,",",""])),m[2],m[2],d,t+n-c*m[2],e+r)),h+=Kr(iW||(iW=ac(["L ",",",""])),t+c*m[3],e+r),m[3]>0&&(h+=Kr(sW||(sW=ac(["A ",",",",0,0,",`,
        `,",",""])),m[3],m[3],d,t,e+r-l*m[3])),h+="Z"}else if(a>0&&i===+i&&i>0){var x=Math.min(a,i);h=Kr(oW||(oW=ac(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*x,x,x,d,t+c*x,e,t+n-c*x,e,x,x,d,t+n,e+l*x,t+n,e+r-l*x,x,x,d,t+n-c*x,e+r,t+c*x,e+r,x,x,d,t,e+r-l*x)}else h=Kr(aW||(aW=ac(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},fW={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ece=t=>{var e=Ei(t,fW),n=S.useRef(null),[r,i]=S.useState(-1);S.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var q=n.current.getTotalLength();q&&i(q)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:c,className:d}=e,{animationEasing:h,animationDuration:m,animationBegin:g,isAnimationActive:v,isUpdateAnimationActive:x}=e,b=S.useRef(a),w=S.useRef(l),T=S.useRef(s),N=S.useRef(o),O=S.useMemo(()=>({x:s,y:o,width:a,height:l,radius:c}),[s,o,a,l,c]),j=uv(O,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var _=Rn("recharts-rectangle",d);if(!x){var F=qs(e),{radius:z}=F,D=uW(F,B8e);return S.createElement("path",rk({},D,{x:mh(s),y:mh(o),width:mh(a),height:mh(l),radius:typeof c=="number"?c:void 0,className:_,d:dW(s,o,a,l,c)}))}var $=b.current,G=w.current,H=T.current,U=N.current,A="0px ".concat(r===-1?1:r,"px"),I="".concat(r,"px 0px"),L=Jle(["strokeDasharray"],m,typeof h=="string"?h:fW.animationEasing);return S.createElement(cv,{animationId:j,key:j,canBegin:r>0,duration:m,easing:h,isActive:x,begin:g},q=>{var K=qn($,a,q),te=qn(G,l,q),Y=qn(H,s,q),V=qn(U,o,q);n.current&&(b.current=K,w.current=te,T.current=Y,N.current=V);var M;v?q>0?M={transition:L,strokeDasharray:I}:M={strokeDasharray:A}:M={strokeDasharray:I};var P=qs(e),{radius:W}=P,X=uW(P,U8e);return S.createElement("path",rk({},X,{radius:typeof c=="number"?c:void 0,className:_,d:dW(Y,V,K,te,c),ref:n,style:cW(cW({},M),e.style)}))})};function hW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hW(Object(n),!0).forEach(function(r){H8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H8e(t,e,n){return(e=q8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q8e(t){var e=G8e(t,"string");return typeof e=="symbol"?e:e+""}function G8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ik=Math.PI/180,K8e=t=>t*180/Math.PI,bi=(t,e,n,r)=>({x:t+Math.cos(-ik*r)*n,y:e+Math.sin(-ik*r)*n}),tce=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},W8e=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},Y8e=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=W8e({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var a=(n-i)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:K8e(l),angleInRadian:l}},J8e=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},X8e=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},Q8e=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=Y8e({x:n,y:r},e),{innerRadius:o,outerRadius:a}=e;if(i<o||i>a||i===0)return null;var{startAngle:l,endAngle:c}=J8e(e),d=s,h;if(l<=c){for(;d>c;)d-=360;for(;d<l;)d+=360;h=d>=l&&d<=c}else{for(;d>l;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=l}return h?pW(pW({},e),{},{radius:i,angle:X8e(d,e)}):null};function nce(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=bi(e,n,r,i),a=bi(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}var mW,gW,yW,xW,vW,bW,wW;function bL(){return bL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bL.apply(null,arguments)}function Hp(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Z8e=(t,e)=>{var n=Ki(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},jA=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=t,c=a*(o?1:-1)+r,d=Math.asin(a/c)/ik,h=l?i:i+s*d,m=bi(e,n,c,h),g=bi(e,n,r,h),v=l?i-s*d:i,x=bi(e,n,c*Math.cos(d*ik),v);return{center:m,circleTangency:g,lineTangency:x,theta:d}},rce=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,a=Z8e(s,o),l=s+a,c=bi(e,n,i,s),d=bi(e,n,i,l),h=Kr(mW||(mW=Hp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,i,i,+(Math.abs(a)>180),+(s>l),d.x,d.y);if(r>0){var m=bi(e,n,r,s),g=bi(e,n,r,l);h+=Kr(gW||(gW=Hp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),g.x,g.y,r,r,+(Math.abs(a)>180),+(s<=l),m.x,m.y)}else h+=Kr(yW||(yW=Hp(["L ",","," Z"])),e,n);return h},eje=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=t,d=Ki(c-l),{circleTangency:h,lineTangency:m,theta:g}=jA({cx:e,cy:n,radius:i,angle:l,sign:d,cornerRadius:s,cornerIsExternal:a}),{circleTangency:v,lineTangency:x,theta:b}=jA({cx:e,cy:n,radius:i,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:a}),w=a?Math.abs(l-c):Math.abs(l-c)-g-b;if(w<0)return o?Kr(xW||(xW=Hp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),m.x,m.y,s,s,s*2,s,s,-s*2):rce({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var T=Kr(vW||(vW=Hp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),m.x,m.y,s,s,+(d<0),h.x,h.y,i,i,+(w>180),+(d<0),v.x,v.y,s,s,+(d<0),x.x,x.y);if(r>0){var{circleTangency:N,lineTangency:O,theta:j}=jA({cx:e,cy:n,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:_,lineTangency:F,theta:z}=jA({cx:e,cy:n,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),D=a?Math.abs(l-c):Math.abs(l-c)-j-z;if(D<0&&s===0)return"".concat(T,"L").concat(e,",").concat(n,"Z");T+=Kr(bW||(bW=Hp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),F.x,F.y,s,s,+(d<0),_.x,_.y,r,r,+(D>180),+(d>0),N.x,N.y,s,s,+(d<0),O.x,O.y)}else T+=Kr(wW||(wW=Hp(["L",",","Z"])),e,n);return T},tje={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ice=t=>{var e=Ei(t,tje),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:d,className:h}=e;if(s<i||c===d)return null;var m=Rn("recharts-sector",h),g=s-i,v=Vs(o,g,0,!0),x;return v>0&&Math.abs(c-d)<360?x=eje({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(v,g/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:d}):x=rce({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:d}),S.createElement("path",bL({},qs(e),{className:m,d:x}))};function nje(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(Dae(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:o,angle:a}=e,l=bi(r,i,s,a),c=bi(r,i,o,a);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return nce(e)}}var N3={},C3={},P3={},EW;function rje(){return EW||(EW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kae();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(P3)),P3}var SW;function ije(){return SW||(SW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rje();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(C3)),C3}var AW;function sje(){return AW||(AW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wae(),n=ije();function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const a=Math.max(Math.ceil((s-i)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=i,i+=o;return l}t.range=r})(N3)),N3}var _3,TW;function oje(){return TW||(TW=1,_3=sje().range),_3}var aje=oje();const sce=bs(aje);function vh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lje(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function t6(t){let e,n,r;t.length!==2?(e=vh,n=(a,l)=>vh(t(a),l),r=(a,l)=>t(a)-l):(e=t===vh||t===lje?t:cje,n=t,r=t);function i(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const h=c+d>>>1;n(a[h],l)<0?c=h+1:d=h}while(c<d)}return c}function s(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const h=c+d>>>1;n(a[h],l)<=0?c=h+1:d=h}while(c<d)}return c}function o(a,l,c=0,d=a.length){const h=i(a,l,c,d-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:o,right:s}}function cje(){return 0}function oce(t){return t===null?NaN:+t}function*uje(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const dje=t6(vh),mE=dje.right;t6(oce).center;class kW extends Map{constructor(e,n=pje){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(NW(this,e))}has(e){return super.has(NW(this,e))}set(e,n){return super.set(fje(this,e),n)}delete(e){return super.delete(hje(this,e))}}function NW({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function fje({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function hje({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function pje(t){return t!==null&&typeof t=="object"?t.valueOf():t}function mje(t=vh){if(t===vh)return ace;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function ace(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const gje=Math.sqrt(50),yje=Math.sqrt(10),xje=Math.sqrt(2);function sk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=gje?10:s>=yje?5:s>=xje?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?sk(t,e,n*2):[a,l,c]}function wL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?sk(e,t,n):sk(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function EL(t,e,n){return e=+e,t=+t,n=+n,sk(t,e,n)[2]}function SL(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?EL(e,t,n):EL(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function CW(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function PW(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function lce(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?ace:mje(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+m)),v=Math.min(r,Math.floor(e+(l-c)*h/l+m));lce(t,e,g,v,i)}const s=t[e];let o=n,a=r;for(Rb(t,n,e),i(t[r],s)>0&&Rb(t,n,r);o<a;){for(Rb(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?Rb(t,n,a):(++a,Rb(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Rb(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function vje(t,e,n){if(t=Float64Array.from(uje(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return PW(t);if(e>=1)return CW(t);var r,i=(r-1)*e,s=Math.floor(i),o=CW(lce(t,s).subarray(0,s+1)),a=PW(t.subarray(s+1));return o+(a-o)*(i-s)}}function bje(t,e,n=oce){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function wje(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function ul(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function $d(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const AL=Symbol("implicit");function n6(){var t=new kW,e=[],n=[],r=AL;function i(s){let o=t.get(s);if(o===void 0){if(r!==AL)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new kW;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return n6(e,n).unknown(r)},ul.apply(i,arguments),i}function r6(){var t=n6().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,d=.5;delete t.unknown;function h(){var m=e().length,g=i<r,v=g?i:r,x=g?r:i;s=(x-v)/Math.max(1,m-l+c*2),a&&(s=Math.floor(s)),v+=(x-v-s*(m-l))*d,o=s*(1-l),a&&(v=Math.round(v),o=Math.round(o));var b=wje(m).map(function(w){return v+s*w});return n(g?b.reverse():b)}return t.domain=function(m){return arguments.length?(e(m),h()):e()},t.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(m){return arguments.length?(a=!!m,h()):a},t.padding=function(m){return arguments.length?(l=Math.min(1,c=+m),h()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),h()):l},t.paddingOuter=function(m){return arguments.length?(c=+m,h()):c},t.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),h()):d},t.copy=function(){return r6(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(d)},ul.apply(h(),arguments)}function cce(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return cce(e())},t}function Eje(){return cce(r6.apply(null,arguments).paddingInner(1))}function i6(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function uce(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function gE(){}var c1=.7,ok=1/c1,my="\\s*([+-]?\\d+)\\s*",u1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Uc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sje=/^#([0-9a-f]{3,8})$/,Aje=new RegExp(`^rgb\\(${my},${my},${my}\\)$`),Tje=new RegExp(`^rgb\\(${Uc},${Uc},${Uc}\\)$`),kje=new RegExp(`^rgba\\(${my},${my},${my},${u1}\\)$`),Nje=new RegExp(`^rgba\\(${Uc},${Uc},${Uc},${u1}\\)$`),Cje=new RegExp(`^hsl\\(${u1},${Uc},${Uc}\\)$`),Pje=new RegExp(`^hsla\\(${u1},${Uc},${Uc},${u1}\\)$`),_W={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};i6(gE,d1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:IW,formatHex:IW,formatHex8:_je,formatHsl:Ije,formatRgb:RW,toString:RW});function IW(){return this.rgb().formatHex()}function _je(){return this.rgb().formatHex8()}function Ije(){return dce(this).formatHsl()}function RW(){return this.rgb().formatRgb()}function d1(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Sje.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?OW(e):n===3?new _o(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?BA(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?BA(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Aje.exec(t))?new _o(e[1],e[2],e[3],1):(e=Tje.exec(t))?new _o(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=kje.exec(t))?BA(e[1],e[2],e[3],e[4]):(e=Nje.exec(t))?BA(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Cje.exec(t))?DW(e[1],e[2]/100,e[3]/100,1):(e=Pje.exec(t))?DW(e[1],e[2]/100,e[3]/100,e[4]):_W.hasOwnProperty(t)?OW(_W[t]):t==="transparent"?new _o(NaN,NaN,NaN,0):null}function OW(t){return new _o(t>>16&255,t>>8&255,t&255,1)}function BA(t,e,n,r){return r<=0&&(t=e=n=NaN),new _o(t,e,n,r)}function Rje(t){return t instanceof gE||(t=d1(t)),t?(t=t.rgb(),new _o(t.r,t.g,t.b,t.opacity)):new _o}function TL(t,e,n,r){return arguments.length===1?Rje(t):new _o(t,e,n,r??1)}function _o(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}i6(_o,TL,uce(gE,{brighter(t){return t=t==null?ok:Math.pow(ok,t),new _o(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?c1:Math.pow(c1,t),new _o(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _o(km(this.r),km(this.g),km(this.b),ak(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MW,formatHex:MW,formatHex8:Oje,formatRgb:LW,toString:LW}));function MW(){return`#${qp(this.r)}${qp(this.g)}${qp(this.b)}`}function Oje(){return`#${qp(this.r)}${qp(this.g)}${qp(this.b)}${qp((isNaN(this.opacity)?1:this.opacity)*255)}`}function LW(){const t=ak(this.opacity);return`${t===1?"rgb(":"rgba("}${km(this.r)}, ${km(this.g)}, ${km(this.b)}${t===1?")":`, ${t})`}`}function ak(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function km(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qp(t){return t=km(t),(t<16?"0":"")+t.toString(16)}function DW(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new jl(t,e,n,r)}function dce(t){if(t instanceof jl)return new jl(t.h,t.s,t.l,t.opacity);if(t instanceof gE||(t=d1(t)),!t)return new jl;if(t instanceof jl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new jl(o,a,l,t.opacity)}function Mje(t,e,n,r){return arguments.length===1?dce(t):new jl(t,e,n,r??1)}function jl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}i6(jl,Mje,uce(gE,{brighter(t){return t=t==null?ok:Math.pow(ok,t),new jl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?c1:Math.pow(c1,t),new jl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _o(I3(t>=240?t-240:t+120,i,r),I3(t,i,r),I3(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new jl(jW(this.h),UA(this.s),UA(this.l),ak(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ak(this.opacity);return`${t===1?"hsl(":"hsla("}${jW(this.h)}, ${UA(this.s)*100}%, ${UA(this.l)*100}%${t===1?")":`, ${t})`}`}}));function jW(t){return t=(t||0)%360,t<0?t+360:t}function UA(t){return Math.max(0,Math.min(1,t||0))}function I3(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const s6=t=>()=>t;function Lje(t,e){return function(n){return t+n*e}}function Dje(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function jje(t){return(t=+t)==1?fce:function(e,n){return n-e?Dje(e,n,t):s6(isNaN(e)?n:e)}}function fce(t,e){var n=e-t;return n?Lje(t,n):s6(isNaN(t)?e:t)}const BW=(function t(e){var n=jje(e);function r(i,s){var o=n((i=TL(i)).r,(s=TL(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=fce(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=a(d),i.b=l(d),i.opacity=c(d),i+""}}return r.gamma=t,r})(1);function Bje(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Uje(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fje(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=dv(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function $je(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function lk(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function zje(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=dv(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var kL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R3=new RegExp(kL.source,"g");function Vje(t){return function(){return t}}function Hje(t){return function(e){return t(e)+""}}function qje(t,e){var n=kL.lastIndex=R3.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=kL.exec(t))&&(i=R3.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:lk(r,i)})),n=R3.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Hje(l[0].x):Vje(e):(e=l.length,function(c){for(var d=0,h;d<e;++d)a[(h=l[d]).i]=h.x(c);return a.join("")})}function dv(t,e){var n=typeof e,r;return e==null||n==="boolean"?s6(e):(n==="number"?lk:n==="string"?(r=d1(e))?(e=r,BW):qje:e instanceof d1?BW:e instanceof Date?$je:Uje(e)?Bje:Array.isArray(e)?Fje:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?zje:lk)(t,e)}function o6(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Gje(t,e){e===void 0&&(e=t,t=dv);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Kje(t){return function(){return t}}function ck(t){return+t}var UW=[0,1];function oo(t){return t}function NL(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Kje(isNaN(e)?NaN:.5)}function Wje(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Yje(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=NL(i,r),s=n(o,s)):(r=NL(r,i),s=n(s,o)),function(a){return s(r(a))}}function Jje(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=NL(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=mE(t,a,1,r)-1;return s[l](i[l](a))}}function yE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function TC(){var t=UW,e=UW,n=dv,r,i,s,o=oo,a,l,c;function d(){var m=Math.min(t.length,e.length);return o!==oo&&(o=Wje(t[0],t[m-1])),a=m>2?Jje:Yje,l=c=null,h}function h(m){return m==null||isNaN(m=+m)?s:(l||(l=a(t.map(r),e,n)))(r(o(m)))}return h.invert=function(m){return o(i((c||(c=a(e,t.map(r),lk)))(m)))},h.domain=function(m){return arguments.length?(t=Array.from(m,ck),d()):t.slice()},h.range=function(m){return arguments.length?(e=Array.from(m),d()):e.slice()},h.rangeRound=function(m){return e=Array.from(m),n=o6,d()},h.clamp=function(m){return arguments.length?(o=m?!0:oo,d()):o!==oo},h.interpolate=function(m){return arguments.length?(n=m,d()):n},h.unknown=function(m){return arguments.length?(s=m,h):s},function(m,g){return r=m,i=g,d()}}function a6(){return TC()(oo,oo)}function Xje(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function uk(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Lx(t){return t=uk(Math.abs(t)),t?t[1]:NaN}function Qje(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Zje(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var e6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function f1(t){if(!(e=e6e.exec(t)))throw new Error("invalid format: "+t);var e;return new l6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}f1.prototype=l6.prototype;function l6(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}l6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function t6e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var hce;function n6e(t,e){var n=uk(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(hce=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+uk(t,Math.max(0,e+s-1))[0]}function FW(t,e){var n=uk(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const $W={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Xje,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>FW(t*100,e),r:FW,s:n6e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function zW(t){return t}var VW=Array.prototype.map,HW=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function r6e(t){var e=t.grouping===void 0||t.thousands===void 0?zW:Qje(VW.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?zW:Zje(VW.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=f1(h);var m=h.fill,g=h.align,v=h.sign,x=h.symbol,b=h.zero,w=h.width,T=h.comma,N=h.precision,O=h.trim,j=h.type;j==="n"?(T=!0,j="g"):$W[j]||(N===void 0&&(N=12),O=!0,j="g"),(b||m==="0"&&g==="=")&&(b=!0,m="0",g="=");var _=x==="$"?n:x==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",F=x==="$"?r:/[%p]/.test(j)?o:"",z=$W[j],D=/[defgprs%]/.test(j);N=N===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function $(G){var H=_,U=F,A,I,L;if(j==="c")U=z(G)+U,G="";else{G=+G;var q=G<0||1/G<0;if(G=isNaN(G)?l:z(Math.abs(G),N),O&&(G=t6e(G)),q&&+G==0&&v!=="+"&&(q=!1),H=(q?v==="("?v:a:v==="-"||v==="("?"":v)+H,U=(j==="s"?HW[8+hce/3]:"")+U+(q&&v==="("?")":""),D){for(A=-1,I=G.length;++A<I;)if(L=G.charCodeAt(A),48>L||L>57){U=(L===46?i+G.slice(A+1):G.slice(A))+U,G=G.slice(0,A);break}}}T&&!b&&(G=e(G,1/0));var K=H.length+G.length+U.length,te=K<w?new Array(w-K+1).join(m):"";switch(T&&b&&(G=e(te+G,te.length?w-U.length:1/0),te=""),g){case"<":G=H+G+U+te;break;case"=":G=H+te+G+U;break;case"^":G=te.slice(0,K=te.length>>1)+H+G+U+te.slice(K);break;default:G=te+H+G+U;break}return s(G)}return $.toString=function(){return h+""},$}function d(h,m){var g=c((h=f1(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Lx(m)/3)))*3,x=Math.pow(10,-v),b=HW[8+v/3];return function(w){return g(x*w)+b}}return{format:c,formatPrefix:d}}var FA,c6,pce;i6e({thousands:",",grouping:[3],currency:["$",""]});function i6e(t){return FA=r6e(t),c6=FA.format,pce=FA.formatPrefix,FA}function s6e(t){return Math.max(0,-Lx(Math.abs(t)))}function o6e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lx(e)/3)))*3-Lx(Math.abs(t)))}function a6e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Lx(e)-Lx(t))+1}function mce(t,e,n,r){var i=SL(t,e,n),s;switch(r=f1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=o6e(i,o))&&(r.precision=s),pce(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=a6e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=s6e(i))&&(r.precision=s-(r.type==="%")*2);break}}return c6(r)}function $h(t){var e=t.domain;return t.ticks=function(n){var r=e();return wL(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return mce(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,d=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);d-- >0;){if(c=EL(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function gce(){var t=a6();return t.copy=function(){return yE(t,gce())},ul.apply(t,arguments),$h(t)}function yce(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ck),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return yce(t).unknown(e)},t=arguments.length?Array.from(t,ck):[0,1],$h(n)}function xce(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function qW(t){return Math.log(t)}function GW(t){return Math.exp(t)}function l6e(t){return-Math.log(-t)}function c6e(t){return-Math.exp(-t)}function u6e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function d6e(t){return t===10?u6e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function f6e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function KW(t){return(e,n)=>-t(-e,n)}function u6(t){const e=t(qW,GW),n=e.domain;let r=10,i,s;function o(){return i=f6e(r),s=d6e(r),n()[0]<0?(i=KW(i),s=KW(s),t(l6e,c6e)):t(qW,GW),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],d=l[l.length-1];const h=d<c;h&&([c,d]=[d,c]);let m=i(c),g=i(d),v,x;const b=a==null?10:+a;let w=[];if(!(r%1)&&g-m<b){if(m=Math.floor(m),g=Math.ceil(g),c>0){for(;m<=g;++m)for(v=1;v<r;++v)if(x=m<0?v/s(-m):v*s(m),!(x<c)){if(x>d)break;w.push(x)}}else for(;m<=g;++m)for(v=r-1;v>=1;--v)if(x=m>0?v/s(-m):v*s(m),!(x<c)){if(x>d)break;w.push(x)}w.length*2<b&&(w=wL(c,d,b))}else w=wL(m,g,Math.min(g-m,b)).map(s);return h?w.reverse():w},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=f1(l)).precision==null&&(l.trim=!0),l=c6(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return d=>{let h=d/s(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=c?l(d):""}},e.nice=()=>n(xce(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function vce(){const t=u6(TC()).domain([1,10]);return t.copy=()=>yE(t,vce()).base(t.base()),ul.apply(t,arguments),t}function WW(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function YW(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function d6(t){var e=1,n=t(WW(e),YW(e));return n.constant=function(r){return arguments.length?t(WW(e=+r),YW(e)):e},$h(n)}function bce(){var t=d6(TC());return t.copy=function(){return yE(t,bce()).constant(t.constant())},ul.apply(t,arguments)}function JW(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function h6e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function p6e(t){return t<0?-t*t:t*t}function f6(t){var e=t(oo,oo),n=1;function r(){return n===1?t(oo,oo):n===.5?t(h6e,p6e):t(JW(n),JW(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},$h(e)}function h6(){var t=f6(TC());return t.copy=function(){return yE(t,h6()).exponent(t.exponent())},ul.apply(t,arguments),t}function m6e(){return h6.apply(null,arguments).exponent(.5)}function XW(t){return Math.sign(t)*t*t}function g6e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function wce(){var t=a6(),e=[0,1],n=!1,r;function i(s){var o=g6e(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(XW(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,ck)).map(XW)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return wce(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ul.apply(i,arguments),$h(i)}function Ece(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=bje(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[mE(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(vh),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Ece().domain(t).range(e).unknown(r)},ul.apply(s,arguments)}function Sce(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[mE(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Sce().domain([t,e]).range(i).unknown(s)},ul.apply($h(o),arguments)}function Ace(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[mE(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Ace().domain(t).range(e).unknown(n)},ul.apply(i,arguments)}const O3=new Date,M3=new Date;function _i(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=s=>_i(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(O3.setTime(+s),M3.setTime(+o),t(O3),t(M3),Math.floor(n(O3,M3))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const dk=_i(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);dk.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_i(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):dk);dk.range;const rd=1e3,el=rd*60,id=el*60,Pd=id*24,p6=Pd*7,QW=Pd*30,L3=Pd*365,Gp=_i(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*rd)},(t,e)=>(e-t)/rd,t=>t.getUTCSeconds());Gp.range;const m6=_i(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rd)},(t,e)=>{t.setTime(+t+e*el)},(t,e)=>(e-t)/el,t=>t.getMinutes());m6.range;const g6=_i(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*el)},(t,e)=>(e-t)/el,t=>t.getUTCMinutes());g6.range;const y6=_i(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rd-t.getMinutes()*el)},(t,e)=>{t.setTime(+t+e*id)},(t,e)=>(e-t)/id,t=>t.getHours());y6.range;const x6=_i(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*id)},(t,e)=>(e-t)/id,t=>t.getUTCHours());x6.range;const xE=_i(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*el)/Pd,t=>t.getDate()-1);xE.range;const kC=_i(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pd,t=>t.getUTCDate()-1);kC.range;const Tce=_i(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pd,t=>Math.floor(t/Pd));Tce.range;function o0(t){return _i(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*el)/p6)}const NC=o0(0),fk=o0(1),y6e=o0(2),x6e=o0(3),Dx=o0(4),v6e=o0(5),b6e=o0(6);NC.range;fk.range;y6e.range;x6e.range;Dx.range;v6e.range;b6e.range;function a0(t){return _i(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/p6)}const CC=a0(0),hk=a0(1),w6e=a0(2),E6e=a0(3),jx=a0(4),S6e=a0(5),A6e=a0(6);CC.range;hk.range;w6e.range;E6e.range;jx.range;S6e.range;A6e.range;const v6=_i(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());v6.range;const b6=_i(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());b6.range;const _d=_i(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());_d.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_i(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});_d.range;const Id=_i(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Id.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:_i(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Id.range;function kce(t,e,n,r,i,s){const o=[[Gp,1,rd],[Gp,5,5*rd],[Gp,15,15*rd],[Gp,30,30*rd],[s,1,el],[s,5,5*el],[s,15,15*el],[s,30,30*el],[i,1,id],[i,3,3*id],[i,6,6*id],[i,12,12*id],[r,1,Pd],[r,2,2*Pd],[n,1,p6],[e,1,QW],[e,3,3*QW],[t,1,L3]];function a(c,d,h){const m=d<c;m&&([c,d]=[d,c]);const g=h&&typeof h.range=="function"?h:l(c,d,h),v=g?g.range(c,+d+1):[];return m?v.reverse():v}function l(c,d,h){const m=Math.abs(d-c)/h,g=t6(([,,b])=>b).right(o,m);if(g===o.length)return t.every(SL(c/L3,d/L3,h));if(g===0)return dk.every(Math.max(SL(c,d,h),1));const[v,x]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return v.every(x)}return[a,l]}const[T6e,k6e]=kce(Id,b6,CC,Tce,x6,g6),[N6e,C6e]=kce(_d,v6,NC,xE,y6,m6);function D3(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function j3(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ob(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function P6e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=Mb(i),d=Lb(i),h=Mb(s),m=Lb(s),g=Mb(o),v=Lb(o),x=Mb(a),b=Lb(a),w=Mb(l),T=Lb(l),N={a:q,A:K,b:te,B:Y,c:null,d:iY,e:iY,f:Q6e,g:lBe,G:uBe,H:Y6e,I:J6e,j:X6e,L:Nce,m:Z6e,M:eBe,p:V,q:M,Q:aY,s:lY,S:tBe,u:nBe,U:rBe,V:iBe,w:sBe,W:oBe,x:null,X:null,y:aBe,Y:cBe,Z:dBe,"%":oY},O={a:P,A:W,b:X,B:se,c:null,d:sY,e:sY,f:mBe,g:TBe,G:NBe,H:fBe,I:hBe,j:pBe,L:Pce,m:gBe,M:yBe,p:ae,q:Te,Q:aY,s:lY,S:xBe,u:vBe,U:bBe,V:wBe,w:EBe,W:SBe,x:null,X:null,y:ABe,Y:kBe,Z:CBe,"%":oY},j={a:$,A:G,b:H,B:U,c:A,d:nY,e:nY,f:q6e,g:tY,G:eY,H:rY,I:rY,j:$6e,L:H6e,m:F6e,M:z6e,p:D,q:U6e,Q:K6e,s:W6e,S:V6e,u:M6e,U:L6e,V:D6e,w:O6e,W:j6e,x:I,X:L,y:tY,Y:eY,Z:B6e,"%":G6e};N.x=_(n,N),N.X=_(r,N),N.c=_(e,N),O.x=_(n,O),O.X=_(r,O),O.c=_(e,O);function _(oe,ve){return function(ke){var pe=[],ze=-1,Me=0,he=oe.length,_e,We,Ke;for(ke instanceof Date||(ke=new Date(+ke));++ze<he;)oe.charCodeAt(ze)===37&&(pe.push(oe.slice(Me,ze)),(We=ZW[_e=oe.charAt(++ze)])!=null?_e=oe.charAt(++ze):We=_e==="e"?" ":"0",(Ke=ve[_e])&&(_e=Ke(ke,We)),pe.push(_e),Me=ze+1);return pe.push(oe.slice(Me,ze)),pe.join("")}}function F(oe,ve){return function(ke){var pe=Ob(1900,void 0,1),ze=z(pe,oe,ke+="",0),Me,he;if(ze!=ke.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(ve&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(Me=j3(Ob(pe.y,0,1)),he=Me.getUTCDay(),Me=he>4||he===0?hk.ceil(Me):hk(Me),Me=kC.offset(Me,(pe.V-1)*7),pe.y=Me.getUTCFullYear(),pe.m=Me.getUTCMonth(),pe.d=Me.getUTCDate()+(pe.w+6)%7):(Me=D3(Ob(pe.y,0,1)),he=Me.getDay(),Me=he>4||he===0?fk.ceil(Me):fk(Me),Me=xE.offset(Me,(pe.V-1)*7),pe.y=Me.getFullYear(),pe.m=Me.getMonth(),pe.d=Me.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),he="Z"in pe?j3(Ob(pe.y,0,1)).getUTCDay():D3(Ob(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(he+5)%7:pe.w+pe.U*7-(he+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,j3(pe)):D3(pe)}}function z(oe,ve,ke,pe){for(var ze=0,Me=ve.length,he=ke.length,_e,We;ze<Me;){if(pe>=he)return-1;if(_e=ve.charCodeAt(ze++),_e===37){if(_e=ve.charAt(ze++),We=j[_e in ZW?ve.charAt(ze++):_e],!We||(pe=We(oe,ke,pe))<0)return-1}else if(_e!=ke.charCodeAt(pe++))return-1}return pe}function D(oe,ve,ke){var pe=c.exec(ve.slice(ke));return pe?(oe.p=d.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function $(oe,ve,ke){var pe=g.exec(ve.slice(ke));return pe?(oe.w=v.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function G(oe,ve,ke){var pe=h.exec(ve.slice(ke));return pe?(oe.w=m.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function H(oe,ve,ke){var pe=w.exec(ve.slice(ke));return pe?(oe.m=T.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function U(oe,ve,ke){var pe=x.exec(ve.slice(ke));return pe?(oe.m=b.get(pe[0].toLowerCase()),ke+pe[0].length):-1}function A(oe,ve,ke){return z(oe,e,ve,ke)}function I(oe,ve,ke){return z(oe,n,ve,ke)}function L(oe,ve,ke){return z(oe,r,ve,ke)}function q(oe){return o[oe.getDay()]}function K(oe){return s[oe.getDay()]}function te(oe){return l[oe.getMonth()]}function Y(oe){return a[oe.getMonth()]}function V(oe){return i[+(oe.getHours()>=12)]}function M(oe){return 1+~~(oe.getMonth()/3)}function P(oe){return o[oe.getUTCDay()]}function W(oe){return s[oe.getUTCDay()]}function X(oe){return l[oe.getUTCMonth()]}function se(oe){return a[oe.getUTCMonth()]}function ae(oe){return i[+(oe.getUTCHours()>=12)]}function Te(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var ve=_(oe+="",N);return ve.toString=function(){return oe},ve},parse:function(oe){var ve=F(oe+="",!1);return ve.toString=function(){return oe},ve},utcFormat:function(oe){var ve=_(oe+="",O);return ve.toString=function(){return oe},ve},utcParse:function(oe){var ve=F(oe+="",!0);return ve.toString=function(){return oe},ve}}}var ZW={"-":"",_:" ",0:"0"},Ji=/^\s*\d+/,_6e=/^%/,I6e=/[\\^$*+?|[\]().{}]/g;function $n(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function R6e(t){return t.replace(I6e,"\\$&")}function Mb(t){return new RegExp("^(?:"+t.map(R6e).join("|")+")","i")}function Lb(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function O6e(t,e,n){var r=Ji.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function M6e(t,e,n){var r=Ji.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function L6e(t,e,n){var r=Ji.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function D6e(t,e,n){var r=Ji.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function j6e(t,e,n){var r=Ji.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function eY(t,e,n){var r=Ji.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function tY(t,e,n){var r=Ji.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function B6e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function U6e(t,e,n){var r=Ji.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function F6e(t,e,n){var r=Ji.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nY(t,e,n){var r=Ji.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function $6e(t,e,n){var r=Ji.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function rY(t,e,n){var r=Ji.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function z6e(t,e,n){var r=Ji.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function V6e(t,e,n){var r=Ji.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function H6e(t,e,n){var r=Ji.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function q6e(t,e,n){var r=Ji.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function G6e(t,e,n){var r=_6e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function K6e(t,e,n){var r=Ji.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function W6e(t,e,n){var r=Ji.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function iY(t,e){return $n(t.getDate(),e,2)}function Y6e(t,e){return $n(t.getHours(),e,2)}function J6e(t,e){return $n(t.getHours()%12||12,e,2)}function X6e(t,e){return $n(1+xE.count(_d(t),t),e,3)}function Nce(t,e){return $n(t.getMilliseconds(),e,3)}function Q6e(t,e){return Nce(t,e)+"000"}function Z6e(t,e){return $n(t.getMonth()+1,e,2)}function eBe(t,e){return $n(t.getMinutes(),e,2)}function tBe(t,e){return $n(t.getSeconds(),e,2)}function nBe(t){var e=t.getDay();return e===0?7:e}function rBe(t,e){return $n(NC.count(_d(t)-1,t),e,2)}function Cce(t){var e=t.getDay();return e>=4||e===0?Dx(t):Dx.ceil(t)}function iBe(t,e){return t=Cce(t),$n(Dx.count(_d(t),t)+(_d(t).getDay()===4),e,2)}function sBe(t){return t.getDay()}function oBe(t,e){return $n(fk.count(_d(t)-1,t),e,2)}function aBe(t,e){return $n(t.getFullYear()%100,e,2)}function lBe(t,e){return t=Cce(t),$n(t.getFullYear()%100,e,2)}function cBe(t,e){return $n(t.getFullYear()%1e4,e,4)}function uBe(t,e){var n=t.getDay();return t=n>=4||n===0?Dx(t):Dx.ceil(t),$n(t.getFullYear()%1e4,e,4)}function dBe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$n(e/60|0,"0",2)+$n(e%60,"0",2)}function sY(t,e){return $n(t.getUTCDate(),e,2)}function fBe(t,e){return $n(t.getUTCHours(),e,2)}function hBe(t,e){return $n(t.getUTCHours()%12||12,e,2)}function pBe(t,e){return $n(1+kC.count(Id(t),t),e,3)}function Pce(t,e){return $n(t.getUTCMilliseconds(),e,3)}function mBe(t,e){return Pce(t,e)+"000"}function gBe(t,e){return $n(t.getUTCMonth()+1,e,2)}function yBe(t,e){return $n(t.getUTCMinutes(),e,2)}function xBe(t,e){return $n(t.getUTCSeconds(),e,2)}function vBe(t){var e=t.getUTCDay();return e===0?7:e}function bBe(t,e){return $n(CC.count(Id(t)-1,t),e,2)}function _ce(t){var e=t.getUTCDay();return e>=4||e===0?jx(t):jx.ceil(t)}function wBe(t,e){return t=_ce(t),$n(jx.count(Id(t),t)+(Id(t).getUTCDay()===4),e,2)}function EBe(t){return t.getUTCDay()}function SBe(t,e){return $n(hk.count(Id(t)-1,t),e,2)}function ABe(t,e){return $n(t.getUTCFullYear()%100,e,2)}function TBe(t,e){return t=_ce(t),$n(t.getUTCFullYear()%100,e,2)}function kBe(t,e){return $n(t.getUTCFullYear()%1e4,e,4)}function NBe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?jx(t):jx.ceil(t),$n(t.getUTCFullYear()%1e4,e,4)}function CBe(){return"+0000"}function oY(){return"%"}function aY(t){return+t}function lY(t){return Math.floor(+t/1e3)}var cg,Ice,Rce;PBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function PBe(t){return cg=P6e(t),Ice=cg.format,cg.parse,Rce=cg.utcFormat,cg.utcParse,cg}function _Be(t){return new Date(t)}function IBe(t){return t instanceof Date?+t:+new Date(+t)}function w6(t,e,n,r,i,s,o,a,l,c){var d=a6(),h=d.invert,m=d.domain,g=c(".%L"),v=c(":%S"),x=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),T=c("%b %d"),N=c("%B"),O=c("%Y");function j(_){return(l(_)<_?g:a(_)<_?v:o(_)<_?x:s(_)<_?b:r(_)<_?i(_)<_?w:T:n(_)<_?N:O)(_)}return d.invert=function(_){return new Date(h(_))},d.domain=function(_){return arguments.length?m(Array.from(_,IBe)):m().map(_Be)},d.ticks=function(_){var F=m();return t(F[0],F[F.length-1],_??10)},d.tickFormat=function(_,F){return F==null?j:c(F)},d.nice=function(_){var F=m();return(!_||typeof _.range!="function")&&(_=e(F[0],F[F.length-1],_??10)),_?m(xce(F,_)):d},d.copy=function(){return yE(d,w6(t,e,n,r,i,s,o,a,l,c))},d}function RBe(){return ul.apply(w6(N6e,C6e,_d,v6,NC,xE,y6,m6,Gp,Ice).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function OBe(){return ul.apply(w6(T6e,k6e,Id,b6,CC,kC,x6,g6,Gp,Rce).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function PC(){var t=0,e=1,n,r,i,s,o=oo,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:o(i===0?.5:(h=(s(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(o=h,c):o};function d(h){return function(m){var g,v;return arguments.length?([g,v]=m,o=h(g,v),c):[o(0),o(1)]}}return c.range=d(dv),c.rangeRound=d(o6),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return s=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),c}}function zh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Oce(){var t=$h(PC()(oo));return t.copy=function(){return zh(t,Oce())},$d.apply(t,arguments)}function Mce(){var t=u6(PC()).domain([1,10]);return t.copy=function(){return zh(t,Mce()).base(t.base())},$d.apply(t,arguments)}function Lce(){var t=d6(PC());return t.copy=function(){return zh(t,Lce()).constant(t.constant())},$d.apply(t,arguments)}function E6(){var t=f6(PC());return t.copy=function(){return zh(t,E6()).exponent(t.exponent())},$d.apply(t,arguments)}function MBe(){return E6.apply(null,arguments).exponent(.5)}function Dce(){var t=[],e=oo;function n(r){if(r!=null&&!isNaN(r=+r))return e((mE(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(vh),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>vje(t,s/r))},n.copy=function(){return Dce(e).domain(t)},$d.apply(n,arguments)}function _C(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,c=oo,d,h=!1,m;function g(x){return isNaN(x=+x)?m:(x=.5+((x=+d(x))-s)*(r*x<r*s?a:l),c(h?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,n]=x,i=d(t=+t),s=d(e=+e),o=d(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(x){return arguments.length?(h=!!x,g):h},g.interpolator=function(x){return arguments.length?(c=x,g):c};function v(x){return function(b){var w,T,N;return arguments.length?([w,T,N]=b,c=Gje(x,[w,T,N]),g):[c(0),c(.5),c(1)]}}return g.range=v(dv),g.rangeRound=v(o6),g.unknown=function(x){return arguments.length?(m=x,g):m},function(x){return d=x,i=x(t),s=x(e),o=x(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g}}function jce(){var t=$h(_C()(oo));return t.copy=function(){return zh(t,jce())},$d.apply(t,arguments)}function Bce(){var t=u6(_C()).domain([.1,1,10]);return t.copy=function(){return zh(t,Bce()).base(t.base())},$d.apply(t,arguments)}function Uce(){var t=d6(_C());return t.copy=function(){return zh(t,Uce()).constant(t.constant())},$d.apply(t,arguments)}function S6(){var t=f6(_C());return t.copy=function(){return zh(t,S6()).exponent(t.exponent())},$d.apply(t,arguments)}function LBe(){return S6.apply(null,arguments).exponent(.5)}const rw=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:r6,scaleDiverging:jce,scaleDivergingLog:Bce,scaleDivergingPow:S6,scaleDivergingSqrt:LBe,scaleDivergingSymlog:Uce,scaleIdentity:yce,scaleImplicit:AL,scaleLinear:gce,scaleLog:vce,scaleOrdinal:n6,scalePoint:Eje,scalePow:h6,scaleQuantile:Ece,scaleQuantize:Sce,scaleRadial:wce,scaleSequential:Oce,scaleSequentialLog:Mce,scaleSequentialPow:E6,scaleSequentialQuantile:Dce,scaleSequentialSqrt:MBe,scaleSequentialSymlog:Lce,scaleSqrt:m6e,scaleSymlog:bce,scaleThreshold:Ace,scaleTime:RBe,scaleUtc:OBe,tickFormat:mce},Symbol.toStringTag,{value:"Module"}));var zd=t=>t.chartData,IC=je([zd],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),A6=(t,e,n,r)=>r?IC(t):zd(t),Fce=(t,e,n)=>n?IC(t):zd(t);function Ih(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(fr(e)&&fr(n))return!0}return!1}function cY(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function $ce(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(fr(n))i=n;else if(typeof n=="function")return;if(fr(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(Ih(o))return o}}function DBe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Ih(r))return cY(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,a;if(i==="auto")e!=null&&(o=Math.min(...e));else if(Nt(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&EK.test(i)){var l=EK.exec(i);if(l==null||l[1]==null||e==null)o=void 0;else{var c=+l[1];o=e[0]-c}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(Nt(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&SK.test(s)){var d=SK.exec(s);if(d==null||d[1]==null||e==null)a=void 0;else{var h=+d[1];a=e[1]+h}}else a=e==null?void 0:e[1];var m=[o,a];if(Ih(m))return e==null?m:cY(m,e,n)}}}var fv=1e9,jBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},k6,Pr=!0,al="[DecimalError] ",Nm=al+"Invalid argument: ",T6=al+"Exponent out of range: ",hv=Math.floor,Np=Math.pow,BBe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,la,Fi=1e7,Sr=7,zce=9007199254740991,pk=hv(zce/Sr),It={};It.absoluteValue=It.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};It.comparedTo=It.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};It.decimalPlaces=It.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Sr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};It.dividedBy=It.div=function(t){return fd(this,new this.constructor(t))};It.dividedToIntegerBy=It.idiv=function(t){var e=this,n=e.constructor;return ur(fd(e,new n(t),0,1),n.precision)};It.equals=It.eq=function(t){return!this.cmp(t)};It.exponent=function(){return wi(this)};It.greaterThan=It.gt=function(t){return this.cmp(t)>0};It.greaterThanOrEqualTo=It.gte=function(t){return this.cmp(t)>=0};It.isInteger=It.isint=function(){return this.e>this.d.length-2};It.isNegative=It.isneg=function(){return this.s<0};It.isPositive=It.ispos=function(){return this.s>0};It.isZero=function(){return this.s===0};It.lessThan=It.lt=function(t){return this.cmp(t)<0};It.lessThanOrEqualTo=It.lte=function(t){return this.cmp(t)<1};It.logarithm=It.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(la))throw Error(al+"NaN");if(n.s<1)throw Error(al+(n.s?"NaN":"-Infinity"));return n.eq(la)?new r(0):(Pr=!1,e=fd(h1(n,s),h1(t,s),s),Pr=!0,ur(e,i))};It.minus=It.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?qce(e,t):Vce(e,(t.s=-t.s,t))};It.modulo=It.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(al+"NaN");return n.s?(Pr=!1,e=fd(n,t,0,1).times(t),Pr=!0,n.minus(e)):ur(new r(n),i)};It.naturalExponential=It.exp=function(){return Hce(this)};It.naturalLogarithm=It.ln=function(){return h1(this)};It.negated=It.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};It.plus=It.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Vce(e,t):qce(e,(t.s=-t.s,t))};It.precision=It.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Nm+t);if(e=wi(i)+1,r=i.d.length-1,n=r*Sr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};It.squareRoot=It.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(al+"NaN")}for(t=wi(a),Pr=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Rc(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=hv((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(fd(a,s,o+2)).times(.5),Rc(s.d).slice(0,o)===(e=Rc(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(ur(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return Pr=!0,ur(r,n)};It.times=It.mul=function(t){var e,n,r,i,s,o,a,l,c,d=this,h=d.constructor,m=d.d,g=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,l=m.length,c=g.length,l<c&&(s=m,m=g,g=s,o=l,l=c,c=o),s=[],o=l+c,r=o;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+g[r]*m[i-r-1]+e,s[i--]=a%Fi|0,e=a/Fi|0;s[i]=(s[i]+e)%Fi|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Pr?ur(t,h.precision):t};It.toDecimalPlaces=It.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(qc(t,0,fv),e===void 0?e=r.rounding:qc(e,0,8),ur(n,t+wi(n)+1,e))};It.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=qm(r,!0):(qc(t,0,fv),e===void 0?e=i.rounding:qc(e,0,8),r=ur(new i(r),t+1,e),n=qm(r,!0,t+1)),n};It.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?qm(i):(qc(t,0,fv),e===void 0?e=s.rounding:qc(e,0,8),r=ur(new s(i),t+wi(i)+1,e),n=qm(r.abs(),!1,t+wi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};It.toInteger=It.toint=function(){var t=this,e=t.constructor;return ur(new e(t),wi(t)+1,e.rounding)};It.toNumber=function(){return+this};It.toPower=It.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,c=12,d=+(t=new l(t));if(!t.s)return new l(la);if(a=new l(a),!a.s){if(t.s<1)throw Error(al+"Infinity");return a}if(a.eq(la))return a;if(r=l.precision,t.eq(la))return ur(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=d<0?-d:d)<=zce){for(i=new l(la),e=Math.ceil(r/Sr+4),Pr=!1;n%2&&(i=i.times(a),dY(i.d,e)),n=hv(n/2),n!==0;)a=a.times(a),dY(a.d,e);return Pr=!0,t.s<0?new l(la).div(i):ur(i,r)}}else if(s<0)throw Error(al+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Pr=!1,i=t.times(h1(a,r+c)),Pr=!0,i=Hce(i),i.s=s,i};It.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=wi(i),r=qm(i,n<=s.toExpNeg||n>=s.toExpPos)):(qc(t,1,fv),e===void 0?e=s.rounding:qc(e,0,8),i=ur(new s(i),t,e),n=wi(i),r=qm(i,t<=n||n<=s.toExpNeg,t)),r};It.toSignificantDigits=It.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(qc(t,1,fv),e===void 0?e=r.rounding:qc(e,0,8)),ur(new r(n),t,e)};It.toString=It.valueOf=It.val=It.toJSON=It[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=wi(t),n=t.constructor;return qm(t,e<=n.toExpNeg||e>=n.toExpPos)};function Vce(t,e){var n,r,i,s,o,a,l,c,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Pr?ur(e,h):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,i=o,a=l.length),o=Math.ceil(h/Sr),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/Fi|0,l[s]%=Fi;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Pr?ur(e,h):e}function qc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Nm+t)}function Rc(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=Sr-r.length,n&&(s+=Hf(n)),s+=r;o=t[e],r=o+"",n=Sr-r.length,n&&(s+=Hf(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var fd=(function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%Fi|0,o=s/Fi|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*Fi+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,c,d,h,m,g,v,x,b,w,T,N,O,j,_,F,z,D=r.constructor,$=r.s==i.s?1:-1,G=r.d,H=i.d;if(!r.s)return new D(r);if(!i.s)throw Error(al+"Division by zero");for(l=r.e-i.e,F=H.length,j=G.length,g=new D($),v=g.d=[],c=0;H[c]==(G[c]||0);)++c;if(H[c]>(G[c]||0)&&--l,s==null?T=s=D.precision:o?T=s+(wi(r)-wi(i))+1:T=s,T<0)return new D(0);if(T=T/Sr+2|0,c=0,F==1)for(d=0,H=H[0],T++;(c<j||d)&&T--;c++)N=d*Fi+(G[c]||0),v[c]=N/H|0,d=N%H|0;else{for(d=Fi/(H[0]+1)|0,d>1&&(H=t(H,d),G=t(G,d),F=H.length,j=G.length),O=F,x=G.slice(0,F),b=x.length;b<F;)x[b++]=0;z=H.slice(),z.unshift(0),_=H[0],H[1]>=Fi/2&&++_;do d=0,a=e(H,x,F,b),a<0?(w=x[0],F!=b&&(w=w*Fi+(x[1]||0)),d=w/_|0,d>1?(d>=Fi&&(d=Fi-1),h=t(H,d),m=h.length,b=x.length,a=e(h,x,m,b),a==1&&(d--,n(h,F<m?z:H,m))):(d==0&&(a=d=1),h=H.slice()),m=h.length,m<b&&h.unshift(0),n(x,h,b),a==-1&&(b=x.length,a=e(H,x,F,b),a<1&&(d++,n(x,F<b?z:H,b))),b=x.length):a===0&&(d++,x=[0]),v[c++]=d,a&&x[0]?x[b++]=G[O]||0:(x=[G[O]],b=1);while((O++<j||x[0]!==void 0)&&T--)}return v[0]||v.shift(),g.e=l,ur(g,o?s+wi(g)+1:s)}})();function Hce(t,e){var n,r,i,s,o,a,l=0,c=0,d=t.constructor,h=d.precision;if(wi(t)>16)throw Error(T6+wi(t));if(!t.s)return new d(la);for(Pr=!1,a=h,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(Np(2,c))/Math.LN10*2+5|0,a+=r,n=i=s=new d(la),d.precision=a;;){if(i=ur(i.times(t),a),n=n.times(++l),o=s.plus(fd(i,n,a)),Rc(o.d).slice(0,a)===Rc(s.d).slice(0,a)){for(;c--;)s=ur(s.times(s),a);return d.precision=h,e==null?(Pr=!0,ur(s,h)):s}s=o}}function wi(t){for(var e=t.e*Sr,n=t.d[0];n>=10;n/=10)e++;return e}function B3(t,e,n){if(e>t.LN10.sd())throw Pr=!0,n&&(t.precision=n),Error(al+"LN10 precision limit exceeded");return ur(new t(t.LN10),e)}function Hf(t){for(var e="";t--;)e+="0";return e}function h1(t,e){var n,r,i,s,o,a,l,c,d,h=1,m=10,g=t,v=g.d,x=g.constructor,b=x.precision;if(g.s<1)throw Error(al+(g.s?"NaN":"-Infinity"));if(g.eq(la))return new x(0);if(e==null?(Pr=!1,c=b):c=e,g.eq(10))return e==null&&(Pr=!0),B3(x,c);if(c+=m,x.precision=c,n=Rc(v),r=n.charAt(0),s=wi(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=Rc(g.d),r=n.charAt(0),h++;s=wi(g),r>1?(g=new x("0."+n),s++):g=new x(r+"."+n.slice(1))}else return l=B3(x,c+2,b).times(s+""),g=h1(new x(r+"."+n.slice(1)),c-m).plus(l),x.precision=b,e==null?(Pr=!0,ur(g,b)):g;for(a=o=g=fd(g.minus(la),g.plus(la),c),d=ur(g.times(g),c),i=3;;){if(o=ur(o.times(d),c),l=a.plus(fd(o,new x(i),c)),Rc(l.d).slice(0,c)===Rc(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(B3(x,c+2,b).times(s+""))),a=fd(a,new x(h),c),x.precision=b,e==null?(Pr=!0,ur(a,b)):a;a=l,i+=2}}function uY(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=hv(n/Sr),t.d=[],r=(n+1)%Sr,n<0&&(r+=Sr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Sr;r<i;)t.d.push(+e.slice(r,r+=Sr));e=e.slice(r),r=Sr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Pr&&(t.e>pk||t.e<-pk))throw Error(T6+n)}else t.s=0,t.e=0,t.d=[0];return t}function ur(t,e,n){var r,i,s,o,a,l,c,d,h=t.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Sr,i=e,c=h[d=0];else{if(d=Math.ceil((r+1)/Sr),s=h.length,d>=s)return t;for(c=s=h[d],o=1;s>=10;s/=10)o++;r%=Sr,i=r-Sr+o}if(n!==void 0&&(s=Np(10,o-i-1),a=c/s%10|0,l=e<0||h[d+1]!==void 0||c%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?c/Np(10,o-i):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(s=wi(t),h.length=1,e=e-s-1,h[0]=Np(10,(Sr-e%Sr)%Sr),t.e=hv(-e/Sr)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,s=1,d--):(h.length=d+1,s=Np(10,Sr-r),h[d]=i>0?(c/Np(10,o-i)%Np(10,i)|0)*s:0),l)for(;;)if(d==0){(h[0]+=s)==Fi&&(h[0]=1,++t.e);break}else{if(h[d]+=s,h[d]!=Fi)break;h[d--]=0,s=1}for(r=h.length;h[--r]===0;)h.pop();if(Pr&&(t.e>pk||t.e<-pk))throw Error(T6+wi(t));return t}function qce(t,e){var n,r,i,s,o,a,l,c,d,h,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Pr?ur(e,g):e;if(l=t.d,h=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(d=o<0,d?(n=l,o=-o,a=h.length):(n=h,r=c,a=l.length),i=Math.max(Math.ceil(g/Sr),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=h.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(l[i]!=h[i]){d=l[i]<h[i];break}o=0}for(d&&(n=l,l=h,h=n,e.s=-e.s),a=l.length,i=h.length-a;i>0;--i)l[a++]=0;for(i=h.length;i>o;){if(l[--i]<h[i]){for(s=i;s&&l[--s]===0;)l[s]=Fi-1;--l[s],l[i]+=Fi}l[i]-=h[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Pr?ur(e,g):e):new m(0)}function qm(t,e,n){var r,i=wi(t),s=Rc(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Hf(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Hf(-i-1)+s,n&&(r=n-o)>0&&(s+=Hf(r))):i>=o?(s+=Hf(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Hf(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Hf(r))),t.s<0?"-"+s:s}function dY(t,e){if(t.length>e)return t.length=e,!0}function Gce(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Nm+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return uY(o,s.toString())}else if(typeof s!="string")throw Error(Nm+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,BBe.test(s))uY(o,s);else throw Error(Nm+s)}if(i.prototype=It,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Gce,i.config=i.set=UBe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function UBe(t){if(!t||typeof t!="object")throw Error(al+"Object expected");var e,n,r,i=["precision",1,fv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(hv(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Nm+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Nm+n+": "+r);return this}var k6=Gce(jBe);la=new k6(1);const Qn=k6;var FBe=t=>t,Kce={},Wce=t=>t===Kce,fY=t=>function e(){return arguments.length===0||arguments.length===1&&Wce(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Yce=(t,e)=>t===1?e:fY(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(o=>o!==Kce).length;return s>=t?e(...r):Yce(t-s,fY(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=r.map(d=>Wce(d)?a.shift():d);return e(...c,...a)}))}),$Be=t=>Yce(t.length,t),CL=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},zBe=$Be((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),VBe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return FBe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce((a,l)=>l(a),s(...arguments))}};function Jce(t){var e;return t===0?e=1:e=Math.floor(new Qn(t).abs().log(10).toNumber())+1,e}function Xce(t,e,n){for(var r=new Qn(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Qce=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},Zce=(t,e,n)=>{if(t.lte(0))return new Qn(0);var r=Jce(t.toNumber()),i=new Qn(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new Qn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?new Qn(l.toNumber()):new Qn(Math.ceil(l.toNumber()))},HBe=(t,e,n)=>{var r=new Qn(1),i=new Qn(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Qn(10).pow(Jce(t)-1),i=new Qn(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Qn(Math.floor(t)))}else t===0?i=new Qn(Math.floor((e-1)/2)):n||(i=new Qn(Math.floor(t)));var o=Math.floor((e-1)/2),a=VBe(zBe(l=>i.add(new Qn(l-o).mul(r)).toNumber()),CL);return a(0,e)},eue=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Qn(0),tickMin:new Qn(0),tickMax:new Qn(0)};var o=Zce(new Qn(n).sub(e).div(r-1),i,s),a;e<=0&&n>=0?a=new Qn(0):(a=new Qn(e).add(n).div(2),a=a.sub(new Qn(a).mod(o)));var l=Math.ceil(a.sub(e).div(o).toNumber()),c=Math.ceil(new Qn(n).sub(a).div(o).toNumber()),d=l+c+1;return d>r?eue(e,n,r,i,s+1):(d<r&&(c=n>0?c+(r-d):c,l=n>0?l:l+(r-d)),{step:o,tickMin:a.sub(new Qn(l).mul(o)),tickMax:a.add(new Qn(c).mul(o))})},qBe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[a,l]=Qce([n,r]);if(a===-1/0||l===1/0){var c=l===1/0?[a,...CL(0,i-1).map(()=>1/0)]:[...CL(0,i-1).map(()=>-1/0),l];return n>r?c.reverse():c}if(a===l)return HBe(a,i,s);var{step:d,tickMin:h,tickMax:m}=eue(a,l,o,s,0),g=Xce(h,m.add(new Qn(.1).mul(d)),d);return n>r?g.reverse():g},GBe=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,a]=Qce([r,i]);if(o===-1/0||a===1/0)return[r,i];if(o===a)return[o];var l=Math.max(n,2),c=Zce(new Qn(a).sub(o).div(l-1),s,0),d=[...Xce(new Qn(o),new Qn(a),c),a];return s===!1&&(d=d.map(h=>Math.round(h))),r>i?d.reverse():d},tue=t=>t.rootProps.maxBarSize,KBe=t=>t.rootProps.barGap,nue=t=>t.rootProps.barCategoryGap,WBe=t=>t.rootProps.barSize,vE=t=>t.rootProps.stackOffset,rue=t=>t.rootProps.reverseStackOrder,N6=t=>t.options.chartName,C6=t=>t.rootProps.syncId,iue=t=>t.rootProps.syncMethod,P6=t=>t.options.eventEmitter,YBe=t=>t.rootProps.baseValue,ai={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Xu={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},na={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},RC=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},JBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Xu.angleAxisId,includeHidden:!1,name:void 0,reversed:Xu.reversed,scale:Xu.scale,tick:Xu.tick,tickCount:void 0,ticks:void 0,type:Xu.type,unit:void 0},XBe={allowDataOverflow:na.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:na.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:na.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:na.scale,tick:na.tick,tickCount:na.tickCount,ticks:void 0,type:na.type,unit:void 0},QBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Xu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xu.scale,tick:Xu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ZBe={allowDataOverflow:na.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:na.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:na.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:na.scale,tick:na.tick,tickCount:na.tickCount,ticks:void 0,type:"category",unit:void 0},_6=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?QBe:JBe,I6=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?ZBe:XBe,OC=t=>t.polarOptions,R6=je([Ud,Fd,Pi],tce),sue=je([OC,R6],(t,e)=>{if(t!=null)return Vs(t.innerRadius,e,0)}),oue=je([OC,R6],(t,e)=>{if(t!=null)return Vs(t.outerRadius,e,e*.8)}),e7e=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},aue=je([OC],e7e);je([_6,aue],RC);var lue=je([R6,sue,oue],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});je([I6,lue],RC);var cue=je([Tn,OC,sue,oue,Ud,Fd],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=e;return{cx:Vs(o,i,i/2),cy:Vs(a,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Or=(t,e)=>e,bE=(t,e,n)=>n;function MC(t){return t==null?void 0:t.id}function uue(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,o=new Map;return t.forEach(a=>{var l,c=(l=a.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var d=MC(a);c.forEach((h,m)=>{var g=s==null||i?m:String(Wn(h,s,null)),v=Wn(h,a.dataKey,0),x;o.has(g)?x=o.get(g):x={},Object.assign(x,{[d]:v}),o.set(g,x)})}}),Array.from(o.values())}function LC(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var DC=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function jC(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function t7e(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Ii=t=>{var e=Tn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},pv=t=>t.tooltip.settings.axisId;function hY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hY(Object(n),!0).forEach(function(r){n7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n7e(t,e,n){return(e=r7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r7e(t){var e=i7e(t,"string");return typeof e=="symbol"?e:e+""}function i7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PL=[0,"auto"],Li={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},due=(t,e)=>t.cartesianAxis.xAxis[e],Vd=(t,e)=>{var n=due(t,e);return n??Li},Di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:PL,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:fE},fue=(t,e)=>t.cartesianAxis.yAxis[e],Hd=(t,e)=>{var n=fue(t,e);return n??Di},s7e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},O6=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??s7e},$r=(t,e,n)=>{switch(e){case"xAxis":return Vd(t,n);case"yAxis":return Hd(t,n);case"zAxis":return O6(t,n);case"angleAxis":return _6(t,n);case"radiusAxis":return I6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},o7e=(t,e,n)=>{switch(e){case"xAxis":return Vd(t,n);case"yAxis":return Hd(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},wE=(t,e,n)=>{switch(e){case"xAxis":return Vd(t,n);case"yAxis":return Hd(t,n);case"angleAxis":return _6(t,n);case"radiusAxis":return I6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},hue=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function M6(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var EE=t=>t.graphicalItems.cartesianItems,a7e=je([Or,bE],M6),L6=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),SE=je([EE,$r,a7e],L6,{memoizeOptions:{resultEqualityCheck:jC}}),pue=je([SE],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(LC)),mue=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),l7e=je([SE],mue),D6=t=>t.map(e=>e.data).filter(Boolean).flat(1),c7e=je([SE],D6,{memoizeOptions:{resultEqualityCheck:jC}}),j6=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},B6=je([c7e,A6],j6),U6=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Wn(i,r)}))):t.map(r=>({value:r})),BC=je([B6,$r,SE],U6);function gue(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function VT(t){if(Vc(t)||t instanceof Date){var e=Number(t);if(fr(e))return e}}function pY(t){if(Array.isArray(t)){var e=[VT(t[0]),VT(t[1])];return Ih(e)?e:void 0}var n=VT(t);if(n!=null)return[n,n]}function Rd(t){return t.map(VT).filter(T4e)}function u7e(t,e,n){return!n||typeof e!="number"||sl(e)?[]:n.length?Rd(n.flatMap(r=>{var i=Wn(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!fr(s)||!fr(o)))return[e-s,e+o]})):[]}var Ri=t=>{var e=Ii(t),n=pv(t);return wE(t,e,n)},AE=je([Ri],t=>t==null?void 0:t.dataKey),d7e=je([pue,A6,Ri],uue),yue=(t,e,n,r)=>{var i={},s=e.reduce((o,a)=>{if(a.stackId==null)return o;var l=o[a.stackId];return l==null&&(l=[]),l.push(a),o[a.stackId]=l,o},i);return Object.fromEntries(Object.entries(s).map(o=>{var[a,l]=o,c=r?[...l].reverse():l,d=c.map(MC);return[a,{stackedData:HLe(t,d,n),graphicalItems:c}]}))},gk=je([d7e,pue,vE,rue],yue),xue=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var o=WLe(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},f7e=je([$r],t=>t.allowDataOverflow),F6=t=>{var e;if(t==null||!("domain"in t))return PL;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Rd(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:PL},$6=je([$r],F6),z6=je([$6,f7e],$ce),h7e=je([gk,zd,Or,z6],xue,{memoizeOptions:{resultEqualityCheck:DC}}),UC=t=>t.errorBars,p7e=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>gue(n,r)),yk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},V6=(t,e,n,r,i)=>{var s,o;if(n.length>0&&t.forEach(a=>{n.forEach(l=>{var c,d,h=(c=r[l.id])===null||c===void 0?void 0:c.filter(w=>gue(i,w)),m=Wn(a,(d=e.dataKey)!==null&&d!==void 0?d:l.dataKey),g=u7e(a,m,h);if(g.length>=2){var v=Math.min(...g),x=Math.max(...g);(s==null||v<s)&&(s=v),(o==null||x>o)&&(o=x)}var b=pY(m);b!=null&&(s=s==null?b[0]:Math.min(s,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(a=>{var l=pY(Wn(a,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),o=o==null?l[1]:Math.max(o,l[1]))}),fr(s)&&fr(o))return[s,o]},m7e=je([B6,$r,l7e,UC,Or],V6,{memoizeOptions:{resultEqualityCheck:DC}});function g7e(t){var{value:e}=t;if(Vc(e)||e instanceof Date)return e}var y7e=(t,e,n)=>{var r=t.map(g7e).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&Rae(r))?sce(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},vue=t=>t.referenceElements.dots,mv=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),x7e=je([vue,Or,bE],mv),bue=t=>t.referenceElements.areas,v7e=je([bue,Or,bE],mv),wue=t=>t.referenceElements.lines,b7e=je([wue,Or,bE],mv),Eue=(t,e)=>{if(t!=null){var n=Rd(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},w7e=je(x7e,Or,Eue),Sue=(t,e)=>{if(t!=null){var n=Rd(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},E7e=je([v7e,Or],Sue);function S7e(t){var e;if(t.x!=null)return Rd([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Rd(n)}function A7e(t){var e;if(t.y!=null)return Rd([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Rd(n)}var Aue=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?S7e(r):A7e(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},T7e=je([b7e,Or],Aue),k7e=je(w7e,T7e,E7e,(t,e,n)=>yk(t,n,e)),H6=(t,e,n,r,i,s,o,a)=>{if(n!=null)return n;var l=o==="vertical"&&a==="xAxis"||o==="horizontal"&&a==="yAxis",c=l?yk(r,s,i):yk(s,i);return DBe(e,c,t.allowDataOverflow)},N7e=je([$r,$6,z6,h7e,m7e,k7e,Tn,Or],H6,{memoizeOptions:{resultEqualityCheck:DC}}),C7e=[0,1],q6=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:a,type:l}=t,c=Jc(e,s);if(c&&a==null){var d;return sce(0,(d=n==null?void 0:n.length)!==null&&d!==void 0?d:0)}return l==="category"?y7e(r,t,c):i==="expand"?C7e:o}},G6=je([$r,Tn,B6,BC,vE,Or,N7e],q6),Tue=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(aE(s));return a in rw?a:"point"}}},gv=je([$r,Tn,hue,N6,Or],Tue);function P7e(t){if(t!=null){if(t in rw)return rw[t]();var e="scale".concat(aE(t));if(e in rw)return rw[e]()}}function K6(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=P7e(e);if(i!=null){var s=i.domain(n).range(r);return ULe(s),s}}}var W6=(t,e,n)=>{var r=F6(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ih(t))return qBe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ih(t))return GBe(t,e.tickCount,e.allowDecimals)}},Y6=je([G6,wE,gv],W6),J6=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Ih(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],o=e[1],a=n[n.length-1];return[Math.min(i,s),Math.max(o,a)]}return e},_7e=je([$r,G6,Y6,Or],J6),I7e=je(BC,$r,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Rd(t.map(h=>h.value))).sort((h,m)=>h-m),i=r[0],s=r[r.length-1];if(i==null||s==null)return 1/0;var o=s-i;if(o===0)return 1/0;for(var a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];if(!(l==null||c==null)){var d=c-l;n=Math.min(n,d)}}return n/o}}),kue=je(I7e,Tn,nue,Pi,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!fr(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=Vs(n,t*s),a=t*s/2;return a-o-(a-o)/s*o}return 0}),R7e=(t,e,n)=>{var r=Vd(t,e);return r==null||typeof r.padding!="string"?0:kue(t,"xAxis",e,n,r.padding)},O7e=(t,e,n)=>{var r=Hd(t,e);return r==null||typeof r.padding!="string"?0:kue(t,"yAxis",e,n,r.padding)},M7e=je(Vd,R7e,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),L7e=je(Hd,O7e,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),D7e=je([Pi,M7e,vC,xC,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),j7e=je([Pi,Tn,L7e,vC,xC,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),TE=(t,e,n,r)=>{var i;switch(e){case"xAxis":return D7e(t,n,r);case"yAxis":return j7e(t,n,r);case"zAxis":return(i=O6(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return aue(t);case"radiusAxis":return lue(t,n);default:return}},Nue=je([$r,TE],RC),FC=je([$r,gv,_7e,Nue],K6);je([SE,UC,Or],p7e);function Cue(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var $C=(t,e)=>e,zC=(t,e,n)=>n,B7e=je(gC,$C,zC,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Cue)),U7e=je(yC,$C,zC,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Cue)),Pue=(t,e)=>({width:t.width,height:e.height}),F7e=(t,e)=>{var n=typeof e.width=="number"?e.width:fE;return{width:n,height:t.height}},_ue=je(Pi,Vd,Pue),$7e=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},z7e=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},V7e=je(Fd,Pi,B7e,$C,zC,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=Pue(e,a);o==null&&(o=$7e(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),s}),H7e=je(Ud,Pi,U7e,$C,zC,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=F7e(e,a);o==null&&(o=z7e(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),s}),q7e=(t,e)=>{var n=Vd(t,e);if(n!=null)return V7e(t,n.orientation,n.mirror)},G7e=je([Pi,Vd,q7e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),K7e=(t,e)=>{var n=Hd(t,e);if(n!=null)return H7e(t,n.orientation,n.mirror)},W7e=je([Pi,Hd,K7e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Iue=je(Pi,Hd,(t,e)=>{var n=typeof e.width=="number"?e.width:fE;return{width:n,height:t.height}}),mY=(t,e,n)=>{switch(e){case"xAxis":return _ue(t,n).width;case"yAxis":return Iue(t,n).height;default:return}},Rue=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,a=Jc(t,r),l=e.map(c=>c.value);if(o&&a&&s==="category"&&i&&Rae(l))return l}},X6=je([Tn,BC,$r,Or],Rue),Oue=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=Jc(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(a=>a.value)}},Q6=je([Tn,BC,wE,Or],Oue),gY=je([Tn,o7e,gv,FC,X6,Q6,TE,Y6,Or],(t,e,n,r,i,s,o,a,l)=>{if(e!=null){var c=Jc(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:a,range:o,realScaleType:n,scale:r}}}),Y7e=(t,e,n,r,i,s,o,a,l)=>{if(!(e==null||r==null)){var c=Jc(t,l),{type:d,ticks:h,tickCount:m}=e,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,v=d==="category"&&r.bandwidth?r.bandwidth()/g:0;v=l==="angleAxis"&&s!=null&&s.length>=2?Ki(s[0]-s[1])*2*v:v;var x=h||i;if(x){var b=x.map((w,T)=>{var N=o?o.indexOf(w):w;return{index:T,coordinate:r(N)+v,value:w,offset:v}});return b.filter(w=>fr(w.coordinate))}return c&&a?a.map((w,T)=>({coordinate:r(w)+v,value:w,index:T,offset:v})).filter(w=>fr(w.coordinate)):r.ticks?r.ticks(m).map(w=>({coordinate:r(w)+v,value:w,offset:v})):r.domain().map((w,T)=>({coordinate:r(w)+v,value:o?o[w]:w,index:T,offset:v}))}},Mue=je([Tn,wE,gv,FC,Y6,TE,X6,Q6,Or],Y7e),J7e=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=Jc(t,o),{tickCount:l}=e,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?Ki(r[0]-r[1])*2*c:c,a&&s?s.map((d,h)=>({coordinate:n(d)+c,value:d,index:h,offset:c})):n.ticks?n.ticks(l).map(d=>({coordinate:n(d)+c,value:d,offset:c})):n.domain().map((d,h)=>({coordinate:n(d)+c,value:i?i[d]:d,index:h,offset:c}))}},Gc=je([Tn,wE,FC,TE,X6,Q6,Or],J7e),Kc=je($r,FC,(t,e)=>{if(!(t==null||e==null))return mk(mk({},t),{},{scale:e})}),X7e=je([$r,gv,G6,Nue],K6);je((t,e,n)=>O6(t,n),X7e,(t,e)=>{if(!(t==null||e==null))return mk(mk({},t),{},{scale:e})});var Q7e=je([Tn,gC,yC],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Lue=t=>t.options.defaultTooltipEventType,Due=t=>t.options.validateTooltipEventTypes;function jue(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function Z6(t,e){var n=Lue(t),r=Due(t);return jue(e,n,r)}function Z7e(t){return Dt(e=>Z6(e,t))}var Bue=(t,e)=>{var n,r=Number(e);if(!(sl(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},eUe=t=>t.tooltip.settings,Jf={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},tUe={itemInteraction:{click:Jf,hover:Jf},axisInteraction:{click:Jf,hover:Jf},keyboardInteraction:Jf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Uue=Mo({name:"tooltip",initialState:tUe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Nr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=$l(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Nr()},removeTooltipEntrySettings:{reducer(t,e){var n=$l(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Nr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:nUe,replaceTooltipEntrySettings:rUe,removeTooltipEntrySettings:iUe,setTooltipSettingsState:sUe,setActiveMouseOverItemIndex:Fue,mouseLeaveItem:oUe,mouseLeaveChart:$ue,setActiveClickItemIndex:aUe,setMouseOverAxisIndex:zue,setMouseClickAxisIndex:lUe,setSyncInteraction:_L,setKeyboardInteraction:IL}=Uue.actions,cUe=Uue.reducer;function yY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $A(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yY(Object(n),!0).forEach(function(r){uUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uUe(t,e,n){return(e=dUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dUe(t){var e=fUe(t,"string");return typeof e=="symbol"?e:e+""}function fUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hUe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function pUe(t){return t.index!=null}var Vue=(t,e,n,r)=>{if(e==null)return Jf;var i=hUe(t,e,n);if(i==null)return Jf;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(pUe(i)){if(s)return $A($A({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return $A($A({},Jf),{},{coordinate:i.coordinate})};function mUe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function gUe(t,e){var n=mUe(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),o=Math.max(r,i);return n>=s&&n<=o}function yUe(t,e,n){if(n==null||e==null)return!0;var r=Wn(t,e);return r==null||!Ih(n)?!0:gUe(r,n)}var eB=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!fr(s))return i;var o=0,a=1/0;e.length>0&&(a=e.length-1);var l=Math.max(o,Math.min(s,a)),c=e[l];return c==null||yUe(c,n,r)?String(l):null},Hue=(t,e,n,r,i,s,o,a)=>{if(!(s==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,s);if(c!=null)return c;var d=i==null?void 0:i[Number(s)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:d.coordinate}}}},que=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var a;return((a=o.settings)===null||a===void 0?void 0:a.graphicalItemId)===i})},kE=t=>t.options.tooltipPayloadSearcher,yv=t=>t.tooltip;function xY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xY(Object(n),!0).forEach(function(r){xUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xUe(t,e,n){return(e=vUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vUe(t){var e=bUe(t,"string");return typeof e=="symbol"?e:e+""}function bUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wUe(t,e){return t??e}var Gue=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:d}=n,h=[];return t.reduce((m,g)=>{var v,{dataDefinedOnItem:x,settings:b}=g,w=wUe(x,a),T=Array.isArray(w)?Tle(w,c,d):w,N=(v=b==null?void 0:b.dataKey)!==null&&v!==void 0?v:r,O=b==null?void 0:b.nameKey,j;if(r&&Array.isArray(T)&&!Array.isArray(T[0])&&o==="axis"?j=Oae(T,r,i):j=s(T,e,l,O),Array.isArray(j))j.forEach(F=>{var z=vY(vY({},b),{},{name:F.name,unit:F.unit,color:void 0,fill:void 0});m.push(AK({tooltipEntrySettings:z,dataKey:F.dataKey,payload:F.payload,value:Wn(F.payload,F.dataKey),name:F.name}))});else{var _;m.push(AK({tooltipEntrySettings:b,dataKey:N,payload:j,value:Wn(j,N),name:(_=Wn(j,O))!==null&&_!==void 0?_:b==null?void 0:b.name}))}return m},h)}},tB=je([Ri,Tn,hue,N6,Ii],Tue),EUe=je([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),SUe=je([Ii,pv],M6),xv=je([EUe,Ri,SUe],L6,{memoizeOptions:{resultEqualityCheck:jC}}),AUe=je([xv],t=>t.filter(LC)),TUe=je([xv],D6,{memoizeOptions:{resultEqualityCheck:jC}}),vv=je([TUe,zd],j6),kUe=je([AUe,zd,Ri],uue),nB=je([vv,Ri,xv],U6),Kue=je([Ri],F6),NUe=je([Ri],t=>t.allowDataOverflow),Wue=je([Kue,NUe],$ce),CUe=je([xv],t=>t.filter(LC)),PUe=je([kUe,CUe,vE,rue],yue),_Ue=je([PUe,zd,Ii,Wue],xue),IUe=je([xv],mue),RUe=je([vv,Ri,IUe,UC,Ii],V6,{memoizeOptions:{resultEqualityCheck:DC}}),OUe=je([vue,Ii,pv],mv),MUe=je([OUe,Ii],Eue),LUe=je([bue,Ii,pv],mv),DUe=je([LUe,Ii],Sue),jUe=je([wue,Ii,pv],mv),BUe=je([jUe,Ii],Aue),UUe=je([MUe,BUe,DUe],yk),FUe=je([Ri,Kue,Wue,_Ue,RUe,UUe,Tn,Ii],H6),NE=je([Ri,Tn,vv,nB,vE,Ii,FUe],q6),$Ue=je([NE,Ri,tB],W6),zUe=je([Ri,NE,$Ue,Ii],J6),Yue=t=>{var e=Ii(t),n=pv(t),r=!1;return TE(t,e,n,r)},Jue=je([Ri,Yue],RC),Xue=je([Ri,tB,zUe,Jue],K6),VUe=je([Tn,nB,Ri,Ii],Rue),HUe=je([Tn,nB,Ri,Ii],Oue),qUe=(t,e,n,r,i,s,o,a)=>{if(e){var{type:l}=e,c=Jc(t,a);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=l==="category"&&r.bandwidth?r.bandwidth()/d:0;return h=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Ki(i[0]-i[1])*2*h:h,c&&o?o.map((m,g)=>({coordinate:r(m)+h,value:m,index:g,offset:h})):r.domain().map((m,g)=>({coordinate:r(m)+h,value:s?s[m]:m,index:g,offset:h}))}}},qd=je([Tn,Ri,tB,Xue,Yue,VUe,HUe,Ii],qUe),rB=je([Lue,Due,eUe],(t,e,n)=>jue(n.shared,t,e)),Que=t=>t.tooltip.settings.trigger,iB=t=>t.tooltip.settings.defaultIndex,CE=je([yv,rB,Que,iB],Vue),Rh=je([CE,vv,AE,NE],eB),Zue=je([qd,Rh],Bue),sB=je([CE],t=>{if(t)return t.dataKey}),GUe=je([CE],t=>{if(t)return t.graphicalItemId}),ede=je([yv,rB,Que,iB],que),KUe=je([Ud,Fd,Tn,Pi,qd,iB,ede,kE],Hue),WUe=je([CE,KUe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),YUe=je([CE],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),JUe=je([ede,Rh,zd,AE,Zue,kE,rB],Gue),XUe=je([JUe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function bY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bY(Object(n),!0).forEach(function(r){QUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QUe(t,e,n){return(e=ZUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZUe(t){var e=eFe(t,"string");return typeof e=="symbol"?e:e+""}function eFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tFe=()=>Dt(Ri),nFe=()=>{var t=tFe(),e=Dt(qd),n=Dt(Xue);return _h(!t||!n?void 0:wY(wY({},t),{},{scale:n}),e)};function EY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ug(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EY(Object(n),!0).forEach(function(r){rFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rFe(t,e,n){return(e=iFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iFe(t){var e=sFe(t,"string");return typeof e=="symbol"?e:e+""}function sFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oFe=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},aFe=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:o}=r;return ug(ug(ug({},r),bi(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,{angle:l}=r;return ug(ug(ug({},r),bi(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function lFe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var tde=(t,e,n,r,i)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var a=0;a<o;a++){var l,c,d,h,m,g=a>0?(l=n[a-1])===null||l===void 0?void 0:l.coordinate:(c=n[o-1])===null||c===void 0?void 0:c.coordinate,v=(d=n[a])===null||d===void 0?void 0:d.coordinate,x=a>=o-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(m=n[a+1])===null||m===void 0?void 0:m.coordinate,b=void 0;if(!(g==null||v==null||x==null))if(Ki(v-g)!==Ki(x-v)){var w=[];if(Ki(x-v)===Ki(i[1]-i[0])){b=x;var T=v+i[1]-i[0];w[0]=Math.min(T,(T+g)/2),w[1]=Math.max(T,(T+g)/2)}else{b=g;var N=x+i[1]-i[0];w[0]=Math.min(v,(N+v)/2),w[1]=Math.max(v,(N+v)/2)}var O=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(t>O[0]&&t<=O[1]||t>=w[0]&&t<=w[1]){var j;return(j=n[a])===null||j===void 0?void 0:j.index}}else{var _=Math.min(g,x),F=Math.max(g,x);if(t>(_+v)/2&&t<=(F+v)/2){var z;return(z=n[a])===null||z===void 0?void 0:z.index}}}else if(e)for(var D=0;D<o;D++){var $=e[D];if($!=null){var G=e[D+1],H=e[D-1];if(D===0&&G!=null&&t<=($.coordinate+G.coordinate)/2||D===o-1&&H!=null&&t>($.coordinate+H.coordinate)/2||D>0&&D<o-1&&H!=null&&G!=null&&t>($.coordinate+H.coordinate)/2&&t<=($.coordinate+G.coordinate)/2)return $.index}}return-1},nde=()=>Dt(N6),oB=(t,e)=>e,rde=(t,e,n)=>n,aB=(t,e,n,r)=>r,cFe=je(qd,t=>aC(t,e=>e.coordinate)),lB=je([yv,oB,rde,aB],Vue),cB=je([lB,vv,AE,NE],eB),uFe=(t,e,n)=>{if(e!=null){var r=yv(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},ide=je([yv,oB,rde,aB],que),xk=je([Ud,Fd,Tn,Pi,qd,aB,ide,kE],Hue),dFe=je([lB,xk],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),sde=je([qd,cB],Bue),fFe=je([ide,cB,zd,AE,sde,kE,oB],Gue),hFe=je([lB,cB],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),pFe=(t,e,n,r,i,s,o)=>{if(!(!t||!n||!r||!i)&&lFe(t,o)){var a=YLe(t,e),l=tde(a,s,i,n,r),c=oFe(e,i,l,t);return{activeIndex:String(l),activeCoordinate:c}}},mFe=(t,e,n,r,i,s,o)=>{if(!(!t||!r||!i||!s||!n)){var a=Q8e(t,n);if(a){var l=JLe(a,e),c=tde(l,o,s,r,i),d=aFe(e,s,c,a);return{activeIndex:String(c),activeCoordinate:d}}}},gFe=(t,e,n,r,i,s,o,a)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?pFe(t,e,r,i,s,o,a):mFe(t,e,n,r,i,s,o)},yFe=je(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),xFe=je(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(ai)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:t7e}});function SY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SY(Object(n),!0).forEach(function(r){vFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vFe(t,e,n){return(e=bFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bFe(t){var e=wFe(t,"string");return typeof e=="symbol"?e:e+""}function wFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EFe={},SFe={zIndexMap:Object.values(ai).reduce((t,e)=>AY(AY({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),EFe)},AFe=new Set(Object.values(ai));function TFe(t){return AFe.has(t)}var ode=Mo({name:"zIndex",initialState:SFe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Nr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!TFe(n)&&delete t.zIndexMap[n])},prepare:Nr()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Nr()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Nr()}}}),{registerZIndexPortal:kFe,unregisterZIndexPortal:NFe,registerZIndexPortalElement:CFe,unregisterZIndexPortalElement:PFe}=ode.actions,_Fe=ode.reducer;function po(t){var{zIndex:e,children:n}=t,r=NDe(),i=r&&e!==void 0&&e!==0,s=Yi(),o=Rr();S.useLayoutEffect(()=>i?(o(kFe({zIndex:e})),()=>{o(NFe({zIndex:e}))}):lE,[o,e,i]);var a=Dt(l=>yFe(l,e,s));return i?a?i0.createPortal(n,a):null:n}function RL(){return RL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RL.apply(null,arguments)}function TY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TY(Object(n),!0).forEach(function(r){IFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IFe(t,e,n){return(e=RFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RFe(t){var e=OFe(t,"string");return typeof e=="symbol"?e:e+""}function OFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MFe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return S.isValidElement(e)?S.cloneElement(e,r):S.createElement(n,r)}function LFe(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:o,layout:a,cursor:l,tooltipEventType:c,chartName:d}=t,h=n,m=r,g=i;if(!l||!h||d!=="ScatterChart"&&c!=="axis")return null;var v,x,b;if(d==="ScatterChart")v=h,x=f8e,b=ai.cursorLine;else if(d==="BarChart")v=h8e(a,h,s,o),x=ece,b=ai.cursorRectangle;else if(a==="radial"&&Dae(h)){var{cx:w,cy:T,radius:N,startAngle:O,endAngle:j}=nce(h);v={cx:w,cy:T,startAngle:O,endAngle:j,innerRadius:N,outerRadius:N},x=ice,b=ai.cursorLine}else v={points:nje(a,h,s)},x=py,b=ai.cursorLine;var _=typeof l=="object"&&"className"in l?l.className:void 0,F=zA(zA(zA(zA({stroke:"#ccc",pointerEvents:"none"},s),v),Um(l)),{},{payload:m,payloadIndex:g,className:Rn("recharts-tooltip-cursor",_)});return S.createElement(po,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:b},S.createElement(MFe,{cursor:l,cursorComp:x,cursorProps:F}))}function DFe(t){var e=nFe(),n=Dle(),r=Fh(),i=nde();return e==null||n==null||r==null||i==null?null:S.createElement(LFe,RL({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var ade=S.createContext(null),jFe=()=>S.useContext(ade),U3={exports:{}},kY;function BFe(){return kY||(kY=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new i(d,h||l,m),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)e.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,v=new Array(g);m<g;m++)v[m]=h[m].fn;return v},a.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,d,h,m,g,v){var x=n?n+c:c;if(!this._events[x])return!1;var b=this._events[x],w=arguments.length,T,N;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,m),!0;case 5:return b.fn.call(b.context,d,h,m,g),!0;case 6:return b.fn.call(b.context,d,h,m,g,v),!0}for(N=1,T=new Array(w-1);N<w;N++)T[N-1]=arguments[N];b.fn.apply(b.context,T)}else{var O=b.length,j;for(N=0;N<O;N++)switch(b[N].once&&this.removeListener(c,b[N].fn,void 0,!0),w){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,d);break;case 3:b[N].fn.call(b[N].context,d,h);break;case 4:b[N].fn.call(b[N].context,d,h,m);break;default:if(!T)for(j=1,T=new Array(w-1);j<w;j++)T[j-1]=arguments[j];b[N].fn.apply(b[N].context,T)}}return!0},a.prototype.on=function(c,d,h){return s(this,c,d,h,!1)},a.prototype.once=function(c,d,h){return s(this,c,d,h,!0)},a.prototype.removeListener=function(c,d,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!d)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var x=0,b=[],w=v.length;x<w;x++)(v[x].fn!==d||m&&!v[x].once||h&&v[x].context!==h)&&b.push(v[x]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(U3)),U3.exports}var UFe=BFe();const uB=bs(UFe);var p1=new uB,OL="recharts.syncEvent.tooltip",NY="recharts.syncEvent.brush";function VC(t,e){if(e){var n=Number.parseInt(e,10);if(!sl(n))return t==null?void 0:t[n]}}var FFe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},lde=Mo({name:"options",initialState:FFe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),$Fe=lde.reducer,{createEventEmitter:zFe}=lde.actions;function VFe(t){return t.tooltip.syncInteraction}var HFe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},cde=Mo({name:"chartData",initialState:HFe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:CY,setDataStartEndIndexes:qFe,setComputedData:$gt}=cde.actions,GFe=cde.reducer,KFe=["x","y"];function PY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PY(Object(n),!0).forEach(function(r){WFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WFe(t,e,n){return(e=YFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YFe(t){var e=JFe(t,"string");return typeof e=="symbol"?e:e+""}function JFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XFe(t,e){if(t==null)return{};var n,r,i=QFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ZFe(){var t=Dt(C6),e=Dt(P6),n=Rr(),r=Dt(iue),i=Dt(qd),s=Fh(),o=bC(),a=Dt(l=>l.rootProps.className);S.useEffect(()=>{if(t==null)return lE;var l=(c,d,h)=>{if(e!==h&&t===c){if(r==="index"){var m;if(o&&d!==null&&d!==void 0&&(m=d.payload)!==null&&m!==void 0&&m.coordinate&&d.payload.sourceViewBox){var g=d.payload.coordinate,{x:v,y:x}=g,b=XFe(g,KFe),{x:w,y:T,width:N,height:O}=d.payload.sourceViewBox,j=dg(dg({},b),{},{x:o.x+(N?(v-w)/N:0)*o.width,y:o.y+(O?(x-T)/O:0)*o.height});n(dg(dg({},d),{},{payload:dg(dg({},d.payload),{},{coordinate:j})}))}else n(d);return}if(i!=null){var _;if(typeof r=="function"){var F={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},z=r(i,F);_=i[z]}else r==="value"&&(_=i.find(L=>String(L.value)===d.payload.label));var{coordinate:D}=d.payload;if(_==null||d.payload.active===!1||D==null||o==null){n(_L({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:G}=D,H=Math.min($,o.x+o.width),U=Math.min(G,o.y+o.height),A={x:s==="horizontal"?_.coordinate:H,y:s==="horizontal"?U:_.coordinate},I=_L({active:d.payload.active,coordinate:A,dataKey:d.payload.dataKey,index:String(_.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});n(I)}}};return p1.on(OL,l),()=>{p1.off(OL,l)}},[a,n,e,t,r,i,s,o])}function e9e(){var t=Dt(C6),e=Dt(P6),n=Rr();S.useEffect(()=>{if(t==null)return lE;var r=(i,s,o)=>{e!==o&&t===i&&n(qFe(s))};return p1.on(NY,r),()=>{p1.off(NY,r)}},[n,e,t])}function t9e(){var t=Rr();S.useEffect(()=>{t(zFe())},[t]),ZFe(),e9e()}function n9e(t,e,n,r,i,s){var o=Dt(g=>uFe(g,t,e)),a=Dt(P6),l=Dt(C6),c=Dt(iue),d=Dt(VFe),h=d==null?void 0:d.active,m=bC();S.useEffect(()=>{if(!h&&l!=null&&a!=null){var g=_L({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:m,graphicalItemId:void 0});p1.emit(OL,l,g,a)}},[h,n,o,i,r,a,l,c,s,m])}function _Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_Y(Object(n),!0).forEach(function(r){r9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_Y(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r9e(t,e,n){return(e=i9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i9e(t){var e=s9e(t,"string");return typeof e=="symbol"?e:e+""}function s9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o9e(t){return t.dataKey}function a9e(t,e){return S.isValidElement(t)?S.cloneElement(t,e):typeof t=="function"?S.createElement(t,e):S.createElement(qDe,e)}var RY=[],l9e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function vk(t){var e,n,r=Ei(t,l9e),{active:i,allowEscapeViewBox:s,animationDuration:o,animationEasing:a,content:l,filterNull:c,isAnimationActive:d,offset:h,payloadUniqBy:m,position:g,reverseDirection:v,useTranslate3d:x,wrapperStyle:b,cursor:w,shared:T,trigger:N,defaultIndex:O,portal:j,axisId:_}=r,F=Rr(),z=typeof O=="number"?String(O):O;S.useEffect(()=>{F(sUe({shared:T,trigger:N,axisId:_,active:i,defaultIndex:z}))},[F,T,N,_,i,z]);var D=bC(),$=Yle(),G=Z7e(T),{activeIndex:H,isActive:U}=(e=Dt(ae=>hFe(ae,G,N,z)))!==null&&e!==void 0?e:{},A=Dt(ae=>fFe(ae,G,N,z)),I=Dt(ae=>sde(ae,G,N,z)),L=Dt(ae=>dFe(ae,G,N,z)),q=A,K=jFe(),te=(n=i??U)!==null&&n!==void 0?n:!1,[Y,V]=MMe([q,te]),M=G==="axis"?I:void 0;n9e(G,N,L,M,H,te);var P=j??K;if(P==null||D==null||G==null)return null;var W=q??RY;te||(W=RY),c&&W.length&&(W=oMe(W.filter(ae=>ae.value!=null&&(ae.hide!==!0||r.includeHidden)),m,o9e));var X=W.length>0,se=S.createElement(QDe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:a,isAnimationActive:d,active:te,coordinate:L,hasPayload:X,offset:h,position:g,reverseDirection:v,useTranslate3d:x,viewBox:D,wrapperStyle:b,lastBoundingBox:Y,innerRef:V,hasPortalFromProps:!!j},a9e(l,IY(IY({},r),{},{payload:W,label:M,active:te,activeIndex:H,coordinate:L,accessibilityLayer:$})));return S.createElement(S.Fragment,null,i0.createPortal(se,P),te&&S.createElement(DFe,{cursor:w,tooltipEventType:G,coordinate:L,payload:W,index:H}))}var bv=t=>null;bv.displayName="Cell";function c9e(t,e,n){return(e=u9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u9e(t){var e=d9e(t,"string");return typeof e=="symbol"?e:e+""}function d9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class f9e{constructor(e){c9e(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function OY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h9e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OY(Object(n),!0).forEach(function(r){p9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p9e(t,e,n){return(e=m9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m9e(t){var e=g9e(t,"string");return typeof e=="symbol"?e:e+""}function g9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y9e={cacheSize:2e3,enableCache:!0},ude=h9e({},y9e),MY=new f9e(ude.cacheSize),x9e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},LY="recharts_measurement_span";function v9e(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(a)}var DY=(t,e)=>{try{var n=document.getElementById(LY);n||(n=document.createElement("span"),n.setAttribute("id",LY),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,x9e,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},yw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||pE.isSsr)return{width:0,height:0};if(!ude.enableCache)return DY(e,n);var r=v9e(e,n),i=MY.get(r);if(i)return i;var s=DY(e,n);return MY.set(r,s),s},dde;function b9e(t,e,n){return(e=w9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w9e(t){var e=E9e(t,"string");return typeof e=="symbol"?e:e+""}function E9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,S9e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,A9e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,T9e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},k9e=["cm","mm","pt","pc","in","Q","px"];function N9e(t){return k9e.includes(t)}var Gg="NaN";function C9e(t,e){return t*T9e[e]}class cs{static parse(e){var n,[,r,i]=(n=A9e.exec(e))!==null&&n!==void 0?n:[];return r==null?cs.NaN:new cs(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,sl(e)&&(this.unit=""),n!==""&&!S9e.test(n)&&(this.num=NaN,this.unit=""),N9e(n)&&(this.num=C9e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new cs(NaN,""):new cs(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new cs(NaN,""):new cs(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new cs(NaN,""):new cs(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new cs(NaN,""):new cs(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return sl(this.num)}}dde=cs;b9e(cs,"NaN",new dde(NaN,""));function fde(t){if(t==null||t.includes(Gg))return Gg;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=jY.exec(e))!==null&&n!==void 0?n:[],o=cs.parse(r??""),a=cs.parse(s??""),l=i==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return Gg;e=e.replace(jY,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,d,h,m]=(c=BY.exec(e))!==null&&c!==void 0?c:[],g=cs.parse(d??""),v=cs.parse(m??""),x=h==="+"?g.add(v):g.subtract(v);if(x.isNaN())return Gg;e=e.replace(BY,x.toString())}return e}var UY=/\(([^()]*)\)/;function P9e(t){for(var e=t,n;(n=UY.exec(e))!=null;){var[,r]=n;e=e.replace(UY,fde(r))}return e}function _9e(t){var e=t.replace(/\s+/g,"");return e=P9e(e),e=fde(e),e}function I9e(t){try{return _9e(t)}catch{return Gg}}function F3(t){var e=I9e(t.slice(5,-1));return e===Gg?"":e}var R9e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],O9e=["dx","dy","angle","className","breakAll"];function ML(){return ML=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ML.apply(null,arguments)}function FY(t,e){if(t==null)return{};var n,r,i=M9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function M9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hde=/[ \f\n\r\t\v\u2028\u2029]+/,pde=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Ar(e)||(n?i=e.toString().split(""):i=e.toString().split(hde));var s=i.map(a=>({word:a,width:yw(a,r).width})),o=n?0:yw("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function L9e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var mde=(t,e,n,r)=>t.reduce((i,s)=>{var{word:o,width:a}=s,l=i[i.length-1];if(l&&a!=null&&(e==null||r||l.width+a+n<Number(e)))l.words.push(o),l.width+=a+n;else{var c={words:[o],width:a};i.push(c)}return i},[]),gde=t=>t.reduce((e,n)=>e.width>n.width?e:n),D9e="",$Y=(t,e,n,r,i,s,o,a)=>{var l=t.slice(0,e),c=pde({breakAll:n,style:r,children:l+D9e});if(!c)return[!1,[]];var d=mde(c.wordsWithComputedWidth,s,o,a),h=d.length>i||gde(d).width>Number(s);return[h,d]},j9e=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:a,breakAll:l}=t,c=Nt(s),d=String(o),h=mde(e,r,n,i);if(!c||i)return h;var m=h.length>s||gde(h).width>Number(r);if(!m)return h;for(var g=0,v=d.length-1,x=0,b;g<=v&&x<=d.length-1;){var w=Math.floor((g+v)/2),T=w-1,[N,O]=$Y(d,T,l,a,s,r,n,i),[j]=$Y(d,w,l,a,s,r,n,i);if(!N&&!j&&(g=w+1),N&&j&&(v=w-1),!N&&j){b=O;break}x++}return b||h},zY=t=>{var e=Ar(t)?[]:t.toString().split(hde);return[{words:e,width:void 0}]},B9e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!pE.isSsr){var a,l,c=pde({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:d,spaceWidth:h}=c;a=d,l=h}else return zY(r);return j9e({breakAll:s,children:r,maxLines:o,style:i},a,l,e,!!n)}return zY(r)},yde="#808080",U9e={angle:0,breakAll:!1,capHeight:"0.71em",fill:yde,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},HC=S.forwardRef((t,e)=>{var n=Ei(t,U9e),{x:r,y:i,lineHeight:s,capHeight:o,fill:a,scaleToFit:l,textAnchor:c,verticalAnchor:d}=n,h=FY(n,R9e),m=S.useMemo(()=>B9e({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:v,angle:x,className:b,breakAll:w}=h,T=FY(h,O9e);if(!Vc(r)||!Vc(i)||m.length===0)return null;var N=Number(r)+(Nt(g)?g:0),O=Number(i)+(Nt(v)?v:0);if(!fr(N)||!fr(O))return null;var j;switch(d){case"start":j=F3("calc(".concat(o,")"));break;case"middle":j=F3("calc(".concat((m.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:j=F3("calc(".concat(m.length-1," * -").concat(s,")"));break}var _=[];if(l){var F=m[0].width,{width:z}=h;_.push("scale(".concat(Nt(z)&&Nt(F)?z/F:1,")"))}return x&&_.push("rotate(".concat(x,", ").concat(N,", ").concat(O,")")),_.length&&(T.transform=_.join(" ")),S.createElement("text",ML({},qs(T),{ref:e,x:N,y:O,className:Rn("recharts-text",b),textAnchor:c,fill:a.includes("url")?yde:a}),m.map((D,$)=>{var G=D.words.join(w?"":" ");return S.createElement("tspan",{x:N,dy:$===0?j:s,key:"".concat(G,"-").concat($)},G)}))});HC.displayName="Text";var F9e=["labelRef"],$9e=["content"];function VY(t,e){if(t==null)return{};var n,r,i=z9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function z9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function HY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ni(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HY(Object(n),!0).forEach(function(r){V9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V9e(t,e,n){return(e=H9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H9e(t){var e=q9e(t,"string");return typeof e=="symbol"?e:e+""}function q9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qu(){return Qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qu.apply(null,arguments)}var xde=S.createContext(null),G9e=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o,children:a}=t,l=S.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o}),[e,n,r,i,s,o]);return S.createElement(xde.Provider,{value:l},a)},vde=()=>{var t=S.useContext(xde),e=bC();return t||Lle(e)},K9e=S.createContext(null),W9e=()=>{var t=S.useContext(K9e),e=Dt(cue);return t||e},Y9e=t=>{var{value:e,formatter:n}=t,r=Ar(t.children)?e:t.children;return typeof n=="function"?n(r):r},dB=t=>t!=null&&typeof t=="function",J9e=(t,e)=>{var n=Ki(e-t),r=Math.min(Math.abs(e-t),360);return n*r},X9e=(t,e,n,r,i)=>{var{offset:s,className:o}=t,{cx:a,cy:l,innerRadius:c,outerRadius:d,startAngle:h,endAngle:m,clockWise:g}=i,v=(c+d)/2,x=J9e(h,m),b=x>=0?1:-1,w,T;switch(e){case"insideStart":w=h+b*s,T=g;break;case"insideEnd":w=m-b*s,T=!g;break;case"end":w=m+b*s,T=g;break;default:throw new Error("Unsupported position ".concat(e))}T=x<=0?T:!T;var N=bi(a,l,v,w),O=bi(a,l,v,w+(T?1:-1)*359),j="M".concat(N.x,",").concat(N.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(T?0:1,`,
    `).concat(O.x,",").concat(O.y),_=Ar(t.id)?e1("recharts-radial-line-"):t.id;return S.createElement("text",Qu({},r,{dominantBaseline:"central",className:Rn("recharts-radial-bar-label",o)}),S.createElement("defs",null,S.createElement("path",{id:_,d:j})),S.createElement("textPath",{xlinkHref:"#".concat(_)},n))},Q9e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=t,c=(a+l)/2;if(n==="outside"){var{x:d,y:h}=bi(r,i,o+e,c);return{x:d,y:h,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+o)/2,{x:g,y:v}=bi(r,i,m,c);return{x:g,y:v,textAnchor:"middle",verticalAnchor:"middle"}},LL=t=>"cx"in t&&Nt(t.cx),Z9e=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!LL(n)&&(s=n);var{x:o,y:a,upperWidth:l,lowerWidth:c,height:d}=e,h=o,m=o+(l-c)/2,g=(h+m)/2,v=(l+c)/2,x=h+l/2,b=d>=0?1:-1,w=b*r,T=b>0?"end":"start",N=b>0?"start":"end",O=l>=0?1:-1,j=O*r,_=O>0?"end":"start",F=O>0?"start":"end";if(i==="top"){var z={x:h+l/2,y:a-w,textAnchor:"middle",verticalAnchor:T};return ni(ni({},z),s?{height:Math.max(a-s.y,0),width:l}:{})}if(i==="bottom"){var D={x:m+c/2,y:a+d+w,textAnchor:"middle",verticalAnchor:N};return ni(ni({},D),s?{height:Math.max(s.y+s.height-(a+d),0),width:c}:{})}if(i==="left"){var $={x:g-j,y:a+d/2,textAnchor:_,verticalAnchor:"middle"};return ni(ni({},$),s?{width:Math.max($.x-s.x,0),height:d}:{})}if(i==="right"){var G={x:g+v+j,y:a+d/2,textAnchor:F,verticalAnchor:"middle"};return ni(ni({},G),s?{width:Math.max(s.x+s.width-G.x,0),height:d}:{})}var H=s?{width:v,height:d}:{};return i==="insideLeft"?ni({x:g+j,y:a+d/2,textAnchor:F,verticalAnchor:"middle"},H):i==="insideRight"?ni({x:g+v-j,y:a+d/2,textAnchor:_,verticalAnchor:"middle"},H):i==="insideTop"?ni({x:h+l/2,y:a+w,textAnchor:"middle",verticalAnchor:N},H):i==="insideBottom"?ni({x:m+c/2,y:a+d-w,textAnchor:"middle",verticalAnchor:T},H):i==="insideTopLeft"?ni({x:h+j,y:a+w,textAnchor:F,verticalAnchor:N},H):i==="insideTopRight"?ni({x:h+l-j,y:a+w,textAnchor:_,verticalAnchor:N},H):i==="insideBottomLeft"?ni({x:m+j,y:a+d-w,textAnchor:F,verticalAnchor:T},H):i==="insideBottomRight"?ni({x:m+c-j,y:a+d-w,textAnchor:_,verticalAnchor:T},H):i&&typeof i=="object"&&(Nt(i.x)||Nd(i.x))&&(Nt(i.y)||Nd(i.y))?ni({x:o+Vs(i.x,v),y:a+Vs(i.y,d),textAnchor:"end",verticalAnchor:"end"},H):ni({x,y:a+d/2,textAnchor:"middle",verticalAnchor:"middle"},H)},e$e={angle:0,offset:5,zIndex:ai.label,position:"middle",textBreakAll:!1};function qf(t){var e=Ei(t,e$e),{viewBox:n,position:r,value:i,children:s,content:o,className:a="",textBreakAll:l,labelRef:c}=e,d=W9e(),h=vde(),m=r==="center"?h:d??h,g,v,x;if(n==null?g=m:LL(n)?g=n:g=Lle(n),!g||Ar(i)&&Ar(s)&&!S.isValidElement(o)&&typeof o!="function")return null;var b=ni(ni({},e),{},{viewBox:g});if(S.isValidElement(o)){var{labelRef:w}=b,T=VY(b,F9e);return S.cloneElement(o,T)}if(typeof o=="function"){var{content:N}=b,O=VY(b,$9e);if(v=S.createElement(o,O),S.isValidElement(v))return v}else v=Y9e(e);var j=qs(e);if(LL(g)){if(r==="insideStart"||r==="insideEnd"||r==="end")return X9e(e,r,v,j,g);x=Q9e(g,e.offset,e.position)}else x=Z9e(e,g);return S.createElement(po,{zIndex:e.zIndex},S.createElement(HC,Qu({ref:c,className:Rn("recharts-label",a)},j,x,{textAnchor:L9e(j.textAnchor)?j.textAnchor:x.textAnchor,breakAll:l}),v))}qf.displayName="Label";var t$e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?S.createElement(qf,Qu({key:"label-implicit"},r)):Vc(t)?S.createElement(qf,Qu({key:"label-implicit",value:t},r)):S.isValidElement(t)?t.type===qf?S.cloneElement(t,ni({key:"label-implicit"},r)):S.createElement(qf,Qu({key:"label-implicit",content:t},r)):dB(t)?S.createElement(qf,Qu({key:"label-implicit",content:t},r)):t&&typeof t=="object"?S.createElement(qf,Qu({},t,{key:"label-implicit"},r)):null};function n$e(t){var{label:e,labelRef:n}=t,r=vde();return t$e(e,r,n)||null}var $3={},z3={},qY;function r$e(){return qY||(qY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(z3)),z3}var V3={},GY;function i$e(){return GY||(GY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(V3)),V3}var KY;function s$e(){return KY||(KY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r$e(),n=i$e(),r=$j();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})($3)),$3}var H3,WY;function o$e(){return WY||(WY=1,H3=s$e().last),H3}var a$e=o$e();const l$e=bs(a$e);var c$e=["valueAccessor"],u$e=["dataKey","clockWise","id","textBreakAll","zIndex"];function bk(){return bk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bk.apply(null,arguments)}function YY(t,e){if(t==null)return{};var n,r,i=d$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var f$e=t=>Array.isArray(t.value)?l$e(t.value):t.value,bde=S.createContext(void 0),fB=bde.Provider,wde=S.createContext(void 0),h$e=wde.Provider;function p$e(){return S.useContext(bde)}function m$e(){return S.useContext(wde)}function HT(t){var{valueAccessor:e=f$e}=t,n=YY(t,c$e),{dataKey:r,clockWise:i,id:s,textBreakAll:o,zIndex:a}=n,l=YY(n,u$e),c=p$e(),d=m$e(),h=c||d;return!h||!h.length?null:S.createElement(po,{zIndex:a??ai.label},S.createElement(Zr,{className:"recharts-label-list"},h.map((m,g)=>{var v,x=Ar(r)?e(m,g):Wn(m&&m.payload,r),b=Ar(s)?{}:{id:"".concat(s,"-").concat(g)};return S.createElement(qf,bk({key:"label-".concat(g)},qs(m),l,b,{fill:(v=n.fill)!==null&&v!==void 0?v:m.fill,parentViewBox:m.parentViewBox,value:x,textBreakAll:o,viewBox:m.viewBox,index:g,zIndex:0}))})))}HT.displayName="LabelList";function qC(t){var{label:e}=t;return e?e===!0?S.createElement(HT,{key:"labelList-implicit"}):S.isValidElement(e)||dB(e)?S.createElement(HT,{key:"labelList-implicit",content:e}):typeof e=="object"?S.createElement(HT,bk({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function DL(){return DL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DL.apply(null,arguments)}var Ede=t=>{var{cx:e,cy:n,r,className:i}=t,s=Rn("recharts-dot",i);return Nt(e)&&Nt(n)&&Nt(r)?S.createElement("circle",DL({},co(t),Fj(t),{className:s,cx:e,cy:n,r})):null},Sde=t=>t.graphicalItems.polarItems,g$e=je([Or,bE],M6),GC=je([Sde,$r,g$e],L6),y$e=je([GC],D6),KC=je([y$e,IC],j6),x$e=je([KC,$r,GC],U6);je([KC,$r,GC],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var s,o=Wn(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var JY=()=>{},v$e=je([KC,$r,GC,UC,Or],V6),b$e=je([$r,$6,z6,JY,v$e,JY,Tn,Or],H6),Ade=je([$r,Tn,KC,x$e,vE,Or,b$e],q6),w$e=je([Ade,$r,gv],W6);je([$r,Ade,w$e,Or],J6);var E$e={radiusAxis:{},angleAxis:{}},Tde=Mo({name:"polarAxis",initialState:E$e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:zgt,removeRadiusAxis:Vgt,addAngleAxis:Hgt,removeAngleAxis:qgt}=Tde.actions,S$e=Tde.reducer;function XY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XY(Object(n),!0).forEach(function(r){A$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A$e(t,e,n){return(e=T$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T$e(t){var e=k$e(t,"string");return typeof e=="symbol"?e:e+""}function k$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N$e=(t,e)=>e,hB=je([Sde,N$e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),C$e=[],pB=(t,e,n)=>(n==null?void 0:n.length)===0?C$e:n,kde=je([IC,hB,pB],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>QY(QY({},e.presentationProps),s.props))),i!=null)return i}}),P$e=je([kde,hB,pB],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var s,o=Wn(r,e.nameKey,e.name),a;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?a=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?a=r.fill:a=e.fill,{value:Uh(o,e.dataKey),color:a,payload:r,type:e.legendType}})}),_$e=je([kde,hB,pB,Pi],(t,e,n,r)=>{if(!(e==null||t==null))return Rze({offset:r,pieSettings:e,displayedData:t,cells:n})}),q3={exports:{}},rr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZY;function I$e(){if(ZY)return rr;ZY=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function v(x){if(typeof x=="object"&&x!==null){var b=x.$$typeof;switch(b){case t:switch(x=x.type,x){case n:case i:case r:case l:case c:case m:return x;default:switch(x=x&&x.$$typeof,x){case o:case a:case h:case d:return x;case s:return x;default:return b}}case e:return b}}}return rr.ContextConsumer=s,rr.ContextProvider=o,rr.Element=t,rr.ForwardRef=a,rr.Fragment=n,rr.Lazy=h,rr.Memo=d,rr.Portal=e,rr.Profiler=i,rr.StrictMode=r,rr.Suspense=l,rr.SuspenseList=c,rr.isContextConsumer=function(x){return v(x)===s},rr.isContextProvider=function(x){return v(x)===o},rr.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},rr.isForwardRef=function(x){return v(x)===a},rr.isFragment=function(x){return v(x)===n},rr.isLazy=function(x){return v(x)===h},rr.isMemo=function(x){return v(x)===d},rr.isPortal=function(x){return v(x)===e},rr.isProfiler=function(x){return v(x)===i},rr.isStrictMode=function(x){return v(x)===r},rr.isSuspense=function(x){return v(x)===l},rr.isSuspenseList=function(x){return v(x)===c},rr.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===l||x===c||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===d||x.$$typeof===o||x.$$typeof===s||x.$$typeof===a||x.$$typeof===g||x.getModuleId!==void 0)},rr.typeOf=v,rr}var eJ;function R$e(){return eJ||(eJ=1,q3.exports=I$e()),q3.exports}var O$e=R$e(),tJ=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",nJ=null,G3=null,Nde=t=>{if(t===nJ&&Array.isArray(G3))return G3;var e=[];return S.Children.forEach(t,n=>{Ar(n)||(O$e.isFragment(n)?e=e.concat(Nde(n.props.children)):e.push(n))}),G3=e,nJ=t,e};function mB(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>tJ(i)):r=[tJ(e)],Nde(t).forEach(i=>{var s=$m(i,"type.displayName")||$m(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var gB=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,K3={},rJ;function M$e(){return rJ||(rJ=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(K3)),K3}var W3,iJ;function L$e(){return iJ||(iJ=1,W3=M$e().isPlainObject),W3}var D$e=L$e();const j$e=bs(D$e);var sJ,oJ,aJ,lJ,cJ;function uJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uJ(Object(n),!0).forEach(function(r){B$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B$e(t,e,n){return(e=U$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U$e(t){var e=F$e(t,"string");return typeof e=="symbol"?e:e+""}function F$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wk(){return wk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wk.apply(null,arguments)}function Db(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var fJ=(t,e,n,r,i)=>{var s=n-r,o;return o=Kr(sJ||(sJ=Db(["M ",",",""])),t,e),o+=Kr(oJ||(oJ=Db(["L ",",",""])),t+n,e),o+=Kr(aJ||(aJ=Db(["L ",",",""])),t+n-s/2,e+i),o+=Kr(lJ||(lJ=Db(["L ",",",""])),t+n-s/2-r,e+i),o+=Kr(cJ||(cJ=Db(["L ",","," Z"])),t,e),o},$$e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},z$e=t=>{var e=Ei(t,$$e),{x:n,y:r,upperWidth:i,lowerWidth:s,height:o,className:a}=e,{animationEasing:l,animationDuration:c,animationBegin:d,isUpdateAnimationActive:h}=e,m=S.useRef(null),[g,v]=S.useState(-1),x=S.useRef(i),b=S.useRef(s),w=S.useRef(o),T=S.useRef(n),N=S.useRef(r),O=uv(t,"trapezoid-");if(S.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var A=m.current.getTotalLength();A&&v(A)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var j=Rn("recharts-trapezoid",a);if(!h)return S.createElement("g",null,S.createElement("path",wk({},qs(e),{className:j,d:fJ(n,r,i,s,o)})));var _=x.current,F=b.current,z=w.current,D=T.current,$=N.current,G="0px ".concat(g===-1?1:g,"px"),H="".concat(g,"px 0px"),U=Jle(["strokeDasharray"],c,l);return S.createElement(cv,{animationId:O,key:O,canBegin:g>0,duration:c,easing:l,isActive:h,begin:d},A=>{var I=qn(_,i,A),L=qn(F,s,A),q=qn(z,o,A),K=qn(D,n,A),te=qn($,r,A);m.current&&(x.current=I,b.current=L,w.current=q,T.current=K,N.current=te);var Y=A>0?{transition:U,strokeDasharray:H}:{strokeDasharray:G};return S.createElement("path",wk({},qs(e),{className:j,d:fJ(K,te,I,L,q),ref:m,style:dJ(dJ({},Y),e.style)}))})},V$e=["option","shapeType","activeClassName"];function H$e(t,e){if(t==null)return{};var n,r,i=q$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ek(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hJ(Object(n),!0).forEach(function(r){G$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G$e(t,e,n){return(e=K$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K$e(t){var e=W$e(t,"string");return typeof e=="symbol"?e:e+""}function W$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y$e(t,e){return Ek(Ek({},e),t)}function J$e(t,e){return t==="symbols"}function pJ(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return S.createElement(ece,n);case"trapezoid":return S.createElement(z$e,n);case"sector":return S.createElement(ice,n);case"symbols":if(J$e(e))return S.createElement(Lae,n);break;case"curve":return S.createElement(py,n);default:return null}}function X$e(t){return S.isValidElement(t)?t.props:t}function yB(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=H$e(t,V$e),s;if(S.isValidElement(e))s=S.cloneElement(e,Ek(Ek({},i),X$e(e)));else if(typeof e=="function")s=e(i,i.index);else if(j$e(e)&&typeof e!="boolean"){var o=Y$e(e,i);s=S.createElement(pJ,{shapeType:n,elementProps:o})}else{var a=i;s=S.createElement(pJ,{shapeType:n,elementProps:a})}return i.isActive?S.createElement(Zr,{className:r},s):s}var xB=(t,e,n)=>{var r=Rr();return(i,s)=>o=>{t==null||t(i,s,o),r(Fue({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},vB=t=>{var e=Rr();return(n,r)=>i=>{t==null||t(n,r,i),e(oUe())}},bB=(t,e,n)=>{var r=Rr();return(i,s)=>o=>{t==null||t(i,s,o),r(aUe({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function WC(t){var{tooltipEntrySettings:e}=t,n=Rr(),r=Yi(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(nUe(e)):i.current!==e&&n(rUe({prev:i.current,next:e})),i.current=e)},[e,n,r]),S.useLayoutEffect(()=>()=>{i.current&&(n(iUe(i.current)),i.current=null)},[n]),null}function wB(t){var{legendPayload:e}=t,n=Rr(),r=Yi(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(Gle(e)):i.current!==e&&n(Kle({prev:i.current,next:e})),i.current=e)},[n,r,e]),S.useLayoutEffect(()=>()=>{i.current&&(n(Wle(i.current)),i.current=null)},[n]),null}function Q$e(t){var{legendPayload:e}=t,n=Rr(),r=Dt(Tn),i=S.useRef(null);return S.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(Gle(e)):i.current!==e&&n(Kle({prev:i.current,next:e})),i.current=e)},[n,r,e]),S.useLayoutEffect(()=>()=>{i.current&&(n(Wle(i.current)),i.current=null)},[n]),null}var Y3,Z$e=()=>{var[t]=S.useState(()=>e1("uid-"));return t},eze=(Y3=xN.useId)!==null&&Y3!==void 0?Y3:Z$e;function tze(t,e){var n=eze();return e||(t?"".concat(t,"-").concat(n):n)}var nze=S.createContext(void 0),YC=t=>{var{id:e,type:n,children:r}=t,i=tze("recharts-".concat(n),e);return S.createElement(nze.Provider,{value:i},r(i))},rze={cartesianItems:[],polarItems:[]},Cde=Mo({name:"graphicalItems",initialState:rze,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Nr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=$l(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Nr()},removeCartesianGraphicalItem:{reducer(t,e){var n=$l(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Nr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Nr()},removePolarGraphicalItem:{reducer(t,e){var n=$l(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Nr()}}}),{addCartesianGraphicalItem:ize,replaceCartesianGraphicalItem:sze,removeCartesianGraphicalItem:oze,addPolarGraphicalItem:aze,removePolarGraphicalItem:lze}=Cde.actions,cze=Cde.reducer,uze=t=>{var e=Rr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?e(ize(t)):n.current!==t&&e(sze({prev:n.current,next:t})),n.current=t},[e,t]),S.useLayoutEffect(()=>()=>{n.current&&(e(oze(n.current)),n.current=null)},[e]),null},EB=S.memo(uze);function dze(t){var e=Rr();return S.useLayoutEffect(()=>(e(aze(t)),()=>{e(lze(t))}),[e,t]),null}var fze=["key"],hze=["onMouseEnter","onClick","onMouseLeave"],pze=["id"],mze=["id"];function mJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mJ(Object(n),!0).forEach(function(r){gze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gze(t,e,n){return(e=yze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yze(t){var e=xze(t,"string");return typeof e=="symbol"?e:e+""}function xze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oh(){return Oh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oh.apply(null,arguments)}function JC(t,e){if(t==null)return{};var n,r,i=vze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bze(t){var e=S.useMemo(()=>mB(t.children,bv),[t.children]),n=Dt(r=>P$e(r,t.id,e));return n==null?null:S.createElement(Q$e,{legendPayload:n})}var wze=S.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:o,name:a,hide:l,tooltipType:c,id:d}=t,h={dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:o,dataKey:e,nameKey:n,name:Uh(a,e),hide:l,type:c,color:o,unit:"",graphicalItemId:d}};return S.createElement(WC,{tooltipEntrySettings:h})}),Eze=(t,e)=>t>e?"start":t<e?"end":"middle",Sze=(t,e,n)=>Vs(typeof e=="function"?e(t):e,n,n*.8),Aze=(t,e,n)=>{var{top:r,left:i,width:s,height:o}=e,a=tce(s,o),l=i+Vs(t.cx,s,s/2),c=r+Vs(t.cy,o,o/2),d=Vs(t.innerRadius,a,0),h=Sze(n,t.outerRadius,a),m=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:h,maxRadius:m}},Tze=(t,e)=>{var n=Ki(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function kze(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Nze=(t,e)=>{if(S.isValidElement(t))return S.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Rn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=JC(e,fze);return S.createElement(py,Oh({},i,{type:"linear",className:n}))},Cze=(t,e,n)=>{if(S.isValidElement(t))return S.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),S.isValidElement(r)))return r;var i=Rn("recharts-pie-label-text",kze(t));return S.createElement(HC,Oh({},e,{alignmentBaseline:"middle",className:i}),r)};function Pze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:s,dataKey:o}=n;if(!r||!i||!e)return null;var a=co(n),l=Um(i),c=Um(s),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((m,g)=>{var v=(m.startAngle+m.endAngle)/2,x=bi(m.cx,m.cy,m.outerRadius+d,v),b=Jr(Jr(Jr(Jr({},a),m),{},{stroke:"none"},l),{},{index:g,textAnchor:Eze(x.x,m.cx)},x),w=Jr(Jr(Jr(Jr({},a),m),{},{fill:"none",stroke:m.fill},c),{},{index:g,points:[bi(m.cx,m.cy,m.outerRadius,v),x],key:"line"});return S.createElement(po,{zIndex:ai.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},S.createElement(Zr,null,s&&Nze(s,w),Cze(i,b,Wn(m,o))))});return S.createElement(Zr,{className:"recharts-pie-labels"},h)}function _ze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?S.createElement(qC,{label:i}):S.createElement(Pze,{sectors:e,props:n,showLabels:r})}function Ize(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:s,id:o}=t,a=Dt(Rh),l=Dt(sB),c=Dt(GUe),{onMouseEnter:d,onClick:h,onMouseLeave:m}=i,g=JC(i,hze),v=xB(d,i.dataKey,o),x=vB(m),b=bB(h,i.dataKey,o);return e==null||e.length===0?null:S.createElement(S.Fragment,null,e.map((w,T)=>{if((w==null?void 0:w.startAngle)===0&&(w==null?void 0:w.endAngle)===0&&e.length!==1)return null;var N=c==null||c===o,O=String(T)===a&&(l==null||i.dataKey===l)&&N,j=a?r:null,_=n&&O?n:j,F=Jr(Jr({},w),{},{stroke:w.stroke,tabIndex:-1,[_le]:T,[Ile]:o});return S.createElement(Zr,Oh({key:"sector-".concat(w==null?void 0:w.startAngle,"-").concat(w==null?void 0:w.endAngle,"-").concat(w.midAngle,"-").concat(T),tabIndex:-1,className:"recharts-pie-sector"},oC(g,w,T),{onMouseEnter:v(w,T),onMouseLeave:x(w,T),onClick:b(w,T)}),S.createElement(yB,Oh({option:s??_,index:T,shapeType:"sector",isActive:O},F)))}))}function Rze(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:s}=t,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:d,tooltipType:h}=n,m=Math.abs(n.minAngle),g=Tze(a,l),v=Math.abs(g),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,b=r.filter(_=>Wn(_,c,0)!==0).length,w=(v>=360?b:b-1)*x,T=v-b*m-w,N=r.reduce((_,F)=>{var z=Wn(F,c,0);return _+(Nt(z)?z:0)},0),O;if(N>0){var j;O=r.map((_,F)=>{var z=Wn(_,c,0),D=Wn(_,d,F),$=Aze(n,s,_),G=(Nt(z)?z:0)/N,H,U=Jr(Jr({},_),i&&i[F]&&i[F].props);F?H=j.endAngle+Ki(g)*x*(z!==0?1:0):H=a;var A=H+Ki(g)*((z!==0?m:0)+G*T),I=(H+A)/2,L=($.innerRadius+$.outerRadius)/2,q=[{name:D,value:z,payload:U,dataKey:c,type:h,graphicalItemId:n.id}],K=bi($.cx,$.cy,L,I);return j=Jr(Jr(Jr(Jr({},n.presentationProps),{},{percent:G,cornerRadius:typeof o=="string"?parseFloat(o):o,name:D,tooltipPayload:q,midAngle:I,middleRadius:L,tooltipPosition:K},U),$),{},{value:z,dataKey:c,startAngle:H,endAngle:A,payload:U,paddingAngle:Ki(g)*x}),j})}return O}function Oze(t){var{showLabels:e,sectors:n,children:r}=t,i=S.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return S.createElement(h$e,{value:e?i:void 0},r)}function Mze(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:h,onAnimationEnd:m}=e,g=uv(e,"recharts-pie-"),v=n.current,[x,b]=S.useState(!1),w=S.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),T=S.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return S.createElement(Oze,{showLabels:!x,sectors:i},S.createElement(cv,{animationId:g,begin:o,duration:a,isActive:s,easing:l,onAnimationStart:T,onAnimationEnd:w,key:g},N=>{var O=[],j=i&&i[0],_=j==null?void 0:j.startAngle;return i==null||i.forEach((F,z)=>{var D=v&&v[z],$=z>0?$m(F,"paddingAngle",0):0;if(D){var G=qn(D.endAngle-D.startAngle,F.endAngle-F.startAngle,N),H=Jr(Jr({},F),{},{startAngle:_+$,endAngle:_+G+$});O.push(H),_=H.endAngle}else{var{endAngle:U,startAngle:A}=F,I=qn(0,U-A,N),L=Jr(Jr({},F),{},{startAngle:_+$,endAngle:_+I+$});O.push(L),_=L.endAngle}}),n.current=O,S.createElement(Zr,null,S.createElement(Ize,{sectors:O,activeShape:c,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:r}))}),S.createElement(_ze,{showLabels:!x,sectors:i,props:e}),e.children)}var Lze={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ai.area};function Dze(t){var{id:e}=t,n=JC(t,pze),{hide:r,className:i,rootTabIndex:s}=t,o=S.useMemo(()=>mB(t.children,bv),[t.children]),a=Dt(d=>_$e(d,e,o)),l=S.useRef(null),c=Rn("recharts-pie",i);return r||a==null?(l.current=null,S.createElement(Zr,{tabIndex:s,className:c})):S.createElement(po,{zIndex:t.zIndex},S.createElement(wze,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:a,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),S.createElement(Zr,{tabIndex:s,className:c},S.createElement(Mze,{props:Jr(Jr({},n),{},{sectors:a}),previousSectorsRef:l,id:e})))}function SB(t){var e=Ei(t,Lze),{id:n}=e,r=JC(e,mze),i=co(r);return S.createElement(YC,{id:n,type:"pie"},s=>S.createElement(S.Fragment,null,S.createElement(dze,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),S.createElement(bze,Oh({},r,{id:s})),S.createElement(Dze,Oh({},r,{id:s}))))}SB.displayName="Pie";var jze=["points"];function gJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gJ(Object(n),!0).forEach(function(r){Bze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bze(t,e,n){return(e=Uze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uze(t){var e=Fze(t,"string");return typeof e=="symbol"?e:e+""}function Fze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sk(){return Sk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sk.apply(null,arguments)}function $ze(t,e){if(t==null)return{};var n,r,i=zze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Vze(t){var{option:e,dotProps:n,className:r}=t;if(S.isValidElement(e))return S.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Rn(r,typeof e!="boolean"?e.className:""),s=n??{},{points:o}=s,a=$ze(s,jze);return S.createElement(Ede,Sk({},a,{className:i}))}function Hze(t,e){return t==null?!1:e?!0:t.length===1}function Pde(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:o,needClip:a,clipPathId:l,zIndex:c=ai.scatter}=t;if(!Hze(e,n))return null;var d=gB(n),h=ROe(n),m=e.map((v,x)=>{var b,w,T=J3(J3(J3({r:3},o),h),{},{index:x,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(w=v.y)!==null&&w!==void 0?w:void 0,dataKey:s,value:v.value,payload:v.payload,points:e});return S.createElement(Vze,{key:"dot-".concat(x),option:n,dotProps:T,className:i})}),g={};return a&&l!=null&&(g.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(l,")")),S.createElement(po,{zIndex:c},S.createElement(Zr,Sk({className:r},g),m))}function yJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yJ(Object(n),!0).forEach(function(r){qze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qze(t,e,n){return(e=Gze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gze(t){var e=Kze(t,"string");return typeof e=="symbol"?e:e+""}function Kze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _de=0,Wze={xAxis:{},yAxis:{},zAxis:{}},Ide=Mo({name:"cartesianAxis",initialState:Wze,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Nr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Nr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Nr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Nr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Nr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Nr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Nr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Nr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Nr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=xJ(xJ({},t.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:Yze,replaceXAxis:Jze,removeXAxis:Xze,addYAxis:Qze,replaceYAxis:Zze,removeYAxis:eVe,addZAxis:Ggt,replaceZAxis:Kgt,removeZAxis:Wgt,updateYAxisWidth:tVe}=Ide.actions,nVe=Ide.reducer,rVe=je([Pi],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),iVe=je([rVe,Ud,Fd],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),XC=()=>Dt(iVe),sVe=()=>Dt(XUe);function vJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vJ(Object(n),!0).forEach(function(r){oVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oVe(t,e,n){return(e=aVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aVe(t){var e=lVe(t,"string");return typeof e=="symbol"?e:e+""}function lVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cVe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:o}=t;if(i===!1||e.x==null||e.y==null)return null;var a={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=X3(X3(X3({},a),Um(i)),Fj(i)),c;return S.isValidElement(i)?c=S.cloneElement(i,l):typeof i=="function"?c=i(l):c=S.createElement(Ede,l),S.createElement(Zr,{className:"recharts-active-dot",clipPath:o},c)};function jL(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:o=ai.activeDot}=t,a=Dt(Rh),l=sVe();if(e==null||l==null)return null;var c=e.find(d=>l.includes(d.payload));return Ar(c)?null:S.createElement(po,{zIndex:o},S.createElement(cVe,{point:c,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var bJ=(t,e,n)=>{var r=n??t;if(!Ar(r))return Vs(r,e,0)},uVe=(t,e,n)=>{var r={},i=t.filter(LC),s=t.filter(c=>c.stackId==null),o=i.reduce((c,d)=>(c[d.stackId]||(c[d.stackId]=[]),c[d.stackId].push(d),c),r),a=Object.entries(o).map(c=>{var[d,h]=c,m=h.map(v=>v.dataKey),g=bJ(e,n,h[0].barSize);return{stackId:d,dataKeys:m,barSize:g}}),l=s.map(c=>{var d=[c.dataKey].filter(m=>m!=null),h=bJ(e,n,c.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...a,...l]};function wJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wJ(Object(n),!0).forEach(function(r){dVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dVe(t,e,n){return(e=fVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fVe(t){var e=hVe(t,"string");return typeof e=="symbol"?e:e+""}function hVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pVe(t,e,n,r,i){var s=r.length;if(!(s<1)){var o=Vs(t,n,0,!0),a,l=[];if(fr(r[0].barSize)){var c=!1,d=n/s,h=r.reduce((w,T)=>w+(T.barSize||0),0);h+=(s-1)*o,h>=n&&(h-=(s-1)*o,o=0),h>=n&&d>0&&(c=!0,d*=.9,h=s*d);var m=(n-h)/2>>0,g={offset:m-o,size:0};a=r.reduce((w,T)=>{var N,O={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:g.offset+g.size+o,size:c?d:(N=T.barSize)!==null&&N!==void 0?N:0}},j=[...w,O];return g=j[j.length-1].position,j},l)}else{var v=Vs(e,n,0,!0);n-2*v-(s-1)*o<=0&&(o=0);var x=(n-2*v-(s-1)*o)/s;x>1&&(x>>=0);var b=fr(i)?Math.min(x,i):x;a=r.reduce((w,T,N)=>[...w,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:v+(x+o)*N+(x-b)/2,size:b}}],l)}return a}}var mVe=(t,e,n,r,i,s,o)=>{var a=Ar(o)?e:o,l=pVe(n,r,i!==s?i:s,t,a);return i!==s&&l!=null&&(l=l.map(c=>VA(VA({},c),{},{position:VA(VA({},c.position),{},{offset:c.position.offset-i/2})}))),l},gVe=(t,e)=>{var n=MC(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===n)}}}};function yVe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&fr(t.zIndex)?t.zIndex:e}var Rde=t=>{var{chartData:e}=t,n=Rr(),r=Yi();return S.useEffect(()=>r?()=>{}:(n(CY(e)),()=>{n(CY(void 0))}),[e,n,r]),null},EJ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Ode=Mo({name:"brush",initialState:EJ,reducers:{setBrushSettings(t,e){return e.payload==null?EJ:e.payload}}}),{setBrushSettings:Ygt}=Ode.actions,xVe=Ode.reducer;function vVe(t,e,n){return(e=bVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bVe(t){var e=wVe(t,"string");return typeof e=="symbol"?e:e+""}function wVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class AB{static create(e){return new AB(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}vVe(AB,"EPS",1e-4);function EVe(t){return(t%180+180)%180}var SVe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=EVe(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},AVe={dots:[],areas:[],lines:[]},Mde=Mo({name:"referenceElements",initialState:AVe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=$l(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=$l(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=$l(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Jgt,removeDot:Xgt,addArea:Qgt,removeArea:Zgt,addLine:eyt,removeLine:tyt}=Mde.actions,TVe=Mde.reducer,kVe=S.createContext(void 0),NVe=t=>{var{children:e}=t,[n]=S.useState("".concat(e1("recharts"),"-clip")),r=XC();if(r==null)return null;var{x:i,y:s,width:o,height:a}=r;return S.createElement(kVe.Provider,{value:n},S.createElement("defs",null,S.createElement("clipPath",{id:n},S.createElement("rect",{x:i,y:s,height:a,width:o}))),e)};function Lde(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function CVe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return SVe(r,n)}function PVe(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:a}=t;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function m1(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function _Ve(t,e){return Lde(t,e+1)}function IVe(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:a}=e,l=0,c=1,d=o,h=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:Lde(r,c)};var x=l,b,w=()=>(b===void 0&&(b=n(v,x)),b),T=v.coordinate,N=l===0||m1(t,T,w,d,a);N||(l=0,d=o,c+=1),N&&(d=T+t*(w()/2+i),l+=c)},m;c<=s.length;)if(m=h(),m)return m.v;return[]}function RVe(t,e,n,r,i){var s=(r||[]).slice(),o=s.length;if(o===0)return[];for(var{start:a,end:l}=e,c=1;c<=o;c++){for(var d=(o-1)%c,h=a,m=!0,g=function(){var T=r[v],N=v,O,j=()=>(O===void 0&&(O=n(T,N)),O),_=T.coordinate,F=v===d||m1(t,_,j,h,l);if(!F)return m=!1,1;F&&(h=_+t*(j()/2+i))},v=d;v<o&&!g();v+=c);if(m){for(var x=[],b=d;b<o;b+=c)x.push(r[b]);return x}}return[]}function SJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SJ(Object(n),!0).forEach(function(r){OVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OVe(t,e,n){return(e=MVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MVe(t){var e=LVe(t,"string");return typeof e=="symbol"?e:e+""}function LVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DVe(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:a}=e,{end:l}=e,c=function(m){var g=s[m],v,x=()=>(v===void 0&&(v=n(g,m)),v);if(m===o-1){var b=t*(g.coordinate+t*x()/2-l);s[m]=g=Rs(Rs({},g),{},{tickCoord:b>0?g.coordinate-b*t:g.coordinate})}else s[m]=g=Rs(Rs({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var w=m1(t,g.tickCoord,x,a,l);w&&(l=g.tickCoord-t*(x()/2+i),s[m]=Rs(Rs({},g),{},{isShow:!0}))}},d=o-1;d>=0;d--)c(d);return s}function jVe(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,{start:l,end:c}=e;if(s){var d=r[a-1],h=n(d,a-1),m=t*(d.coordinate+t*h/2-c);if(o[a-1]=d=Rs(Rs({},d),{},{tickCoord:m>0?d.coordinate-m*t:d.coordinate}),d.tickCoord!=null){var g=m1(t,d.tickCoord,()=>h,l,c);g&&(c=d.tickCoord-t*(h/2+i),o[a-1]=Rs(Rs({},d),{},{isShow:!0}))}}for(var v=s?a-1:a,x=function(T){var N=o[T],O,j=()=>(O===void 0&&(O=n(N,T)),O);if(T===0){var _=t*(N.coordinate-t*j()/2-l);o[T]=N=Rs(Rs({},N),{},{tickCoord:_<0?N.coordinate-_*t:N.coordinate})}else o[T]=N=Rs(Rs({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var F=m1(t,N.tickCoord,j,l,c);F&&(l=N.tickCoord+t*(j()/2+i),o[T]=Rs(Rs({},N),{},{isShow:!0}))}},b=0;b<v;b++)x(b);return o}function TB(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:d,angle:h}=t;if(!i||!i.length||!r)return[];if(Nt(l)||pE.isSsr){var m;return(m=_Ve(i,Nt(l)?l:0))!==null&&m!==void 0?m:[]}var g=[],v=a==="top"||a==="bottom"?"width":"height",x=d&&v==="width"?yw(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=(N,O)=>{var j=typeof c=="function"?c(N.value,O):N.value;return v==="width"?CVe(yw(j,{fontSize:e,letterSpacing:n}),x,h):yw(j,{fontSize:e,letterSpacing:n})[v]},w=i.length>=2?Ki(i[1].coordinate-i[0].coordinate):1,T=PVe(s,w,v);return l==="equidistantPreserveStart"?IVe(w,T,b,i,o):l==="equidistantPreserveEnd"?RVe(w,T,b,i,o):(l==="preserveStart"||l==="preserveStartEnd"?g=jVe(w,T,b,i,o,l==="preserveStartEnd"):g=DVe(w,T,b,i,o),g.filter(N=>N.isShow))}var BVe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>o&&(o=h.width)}});var a=n?n.getBoundingClientRect().width:0,l=i+s,c=o+l+a+(n?r:0);return Math.round(c)}return 0},UVe=["axisLine","width","height","className","hide","ticks","axisType"];function FVe(t,e){if(t==null)return{};var n,r,i=$Ve(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $Ve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Gm(){return Gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gm.apply(null,arguments)}function AJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AJ(Object(n),!0).forEach(function(r){zVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zVe(t,e,n){return(e=VVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VVe(t){var e=HVe(t,"string");return typeof e=="symbol"?e:e+""}function HVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hd={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ai.axis};function qVe(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:a,otherSvgProps:l}=t;if(!a)return null;var c=gi(gi(gi({},l),co(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);c=gi(gi({},c),{},{x1:e,y1:n+d*i,x2:e+r,y2:n+d*i})}else{var h=+(s==="left"&&!o||s==="right"&&o);c=gi(gi({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return S.createElement("line",Gm({},c,{className:Rn("recharts-cartesian-axis-line",$m(a,"className"))}))}function GVe(t,e,n,r,i,s,o,a,l){var c,d,h,m,g,v,x=a?-1:1,b=t.tickSize||o,w=Nt(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=d=t.coordinate,m=n+ +!a*i,h=m-x*b,v=h-x*l,g=w;break;case"left":h=m=t.coordinate,d=e+ +!a*r,c=d-x*b,g=c-x*l,v=w;break;case"right":h=m=t.coordinate,d=e+ +a*r,c=d+x*b,g=c+x*l,v=w;break;default:c=d=t.coordinate,m=n+ +a*i,h=m+x*b,v=h+x*l,g=w;break}return{line:{x1:c,y1:h,x2:d,y2:m},tick:{x:g,y:v}}}function KVe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function WVe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function YVe(t){var{option:e,tickProps:n,value:r}=t,i,s=Rn(n.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(e))i=S.cloneElement(e,gi(gi({},n),{},{className:s}));else if(typeof e=="function")i=e(gi(gi({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Rn(o,e==null?void 0:e.className)),i=S.createElement(HC,Gm({},n,{className:o}),r)}return i}var JVe=S.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:o,unit:a,padding:l,tickTextProps:c,orientation:d,mirror:h,x:m,y:g,width:v,height:x,tickSize:b,tickMargin:w,fontSize:T,letterSpacing:N,getTicksConfig:O,events:j,axisType:_}=t,F=TB(gi(gi({},O),{},{ticks:n}),T,N),z=KVe(d,h),D=WVe(d,h),$=co(O),G=Um(r),H={};typeof i=="object"&&(H=i);var U=gi(gi({},$),{},{fill:"none"},H),A=F.map(q=>gi({entry:q},GVe(q,m,g,v,x,d,b,h,w))),I=A.map(q=>{var{entry:K,line:te}=q;return S.createElement(Zr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},i&&S.createElement("line",Gm({},U,te,{className:Rn("recharts-cartesian-axis-tick-line",$m(i,"className"))})))}),L=A.map((q,K)=>{var{entry:te,tick:Y}=q,V=gi(gi(gi(gi({textAnchor:z,verticalAnchor:D},$),{},{stroke:"none",fill:s},G),Y),{},{index:K,payload:te,visibleTicksCount:F.length,tickFormatter:o,padding:l},c);return S.createElement(Zr,Gm({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},oC(j,te,K)),r&&S.createElement(YVe,{option:r,tickProps:V,value:"".concat(typeof o=="function"?o(te.value,K):te.value).concat(a||"")}))});return S.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},L.length>0&&S.createElement(po,{zIndex:ai.label},S.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:e},L)),I.length>0&&S.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},I))}),XVe=S.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:o,ticks:a,axisType:l}=t,c=FVe(t,UVe),[d,h]=S.useState(""),[m,g]=S.useState(""),v=S.useRef(null);S.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return BVe({ticks:v.current,label:(b=t.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=S.useCallback(b=>{if(b){var w=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=w;var T=w[0];if(T){var N=window.getComputedStyle(T),O=N.fontSize,j=N.letterSpacing;(O!==d||j!==m)&&(h(O),g(j))}}},[d,m]);return o||r!=null&&r<=0||i!=null&&i<=0?null:S.createElement(po,{zIndex:t.zIndex},S.createElement(Zr,{className:Rn("recharts-cartesian-axis",s)},S.createElement(qVe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:co(t)}),S.createElement(JVe,{ref:x,axisType:l,events:c,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:m,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),S.createElement(G9e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},S.createElement(n$e,{label:t.label,labelRef:t.labelRef}),t.children)))}),kB=S.forwardRef((t,e)=>{var n=Ei(t,hd);return S.createElement(XVe,Gm({},n,{ref:e}))});kB.displayName="CartesianAxis";var QVe=["x1","y1","x2","y2","key"],ZVe=["offset"],eHe=["xAxisId","yAxisId"],tHe=["xAxisId","yAxisId"];function TJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TJ(Object(n),!0).forEach(function(r){nHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nHe(t,e,n){return(e=rHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rHe(t){var e=iHe(t,"string");return typeof e=="symbol"?e:e+""}function iHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kp.apply(null,arguments)}function Ak(t,e){if(t==null)return{};var n,r,i=sHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oHe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:o,ry:a}=t;return S.createElement("rect",{x:r,y:i,ry:a,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Dde(t){var{option:e,lineItemProps:n}=t,r;if(S.isValidElement(e))r=S.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:o,x2:a,y2:l,key:c}=n,d=Ak(n,QVe),h=(i=co(d))!==null&&i!==void 0?i:{},{offset:m}=h,g=Ak(h,ZVe);r=S.createElement("line",Kp({},g,{x1:s,y1:o,x2:a,y2:l,fill:"none",key:c}))}return r}function aHe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=Ak(t,eHe),l=i.map((c,d)=>{var h=js(js({},a),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(d),index:d});return S.createElement(Dde,{key:"line-".concat(d),option:r,lineItemProps:h})});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function lHe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=Ak(t,tHe),l=i.map((c,d)=>{var h=js(js({},a),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(d),index:d});return S.createElement(Dde,{option:r,lineItemProps:h,key:"line-".concat(d)})});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function cHe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:o,horizontalPoints:a,horizontal:l=!0}=t;if(!l||!e||!e.length||a==null)return null;var c=a.map(h=>Math.round(h+i-i)).sort((h,m)=>h-m);i!==c[0]&&c.unshift(0);var d=c.map((h,m)=>{var g=!c[m+1],v=g?i+o-h:c[m+1]-h;if(v<=0)return null;var x=m%e.length;return S.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:v,width:s,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function uHe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:o,height:a,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(h=>Math.round(h+i-i)).sort((h,m)=>h-m);i!==c[0]&&c.unshift(0);var d=c.map((h,m)=>{var g=!c[m+1],v=g?i+o-h:c[m+1]-h;if(v<=0)return null;var x=m%n.length;return S.createElement("rect",{key:"react-".concat(m),x:h,y:s,width:v,height:a,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var dHe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return kle(TB(js(js(js({},hd),n),{},{ticks:Nle(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},fHe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return kle(TB(js(js(js({},hd),n),{},{ticks:Nle(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},hHe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ai.grid};function g1(t){var e=jle(),n=Ble(),r=Dle(),i=js(js({},Ei(t,hHe)),{},{x:Nt(t.x)?t.x:r.left,y:Nt(t.y)?t.y:r.top,width:Nt(t.width)?t.width:r.width,height:Nt(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:o,x:a,y:l,width:c,height:d,syncWithTicks:h,horizontalValues:m,verticalValues:g}=i,v=Yi(),x=Dt(D=>gY(D,"xAxis",s,v)),b=Dt(D=>gY(D,"yAxis",o,v));if(!Hc(c)||!Hc(d)||!Nt(a)||!Nt(l))return null;var w=i.verticalCoordinatesGenerator||dHe,T=i.horizontalCoordinatesGenerator||fHe,{horizontalPoints:N,verticalPoints:O}=i;if((!N||!N.length)&&typeof T=="function"){var j=m&&m.length,_=T({yAxis:b?js(js({},b),{},{ticks:j?m:b.ticks}):void 0,width:e??c,height:n??d,offset:r},j?!0:h);J2(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(N=_)}if((!O||!O.length)&&typeof w=="function"){var F=g&&g.length,z=w({xAxis:x?js(js({},x),{},{ticks:F?g:x.ticks}):void 0,width:e??c,height:n??d,offset:r},F?!0:h);J2(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(O=z)}return S.createElement(po,{zIndex:i.zIndex},S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(oHe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),S.createElement(cHe,Kp({},i,{horizontalPoints:N})),S.createElement(uHe,Kp({},i,{verticalPoints:O})),S.createElement(aHe,Kp({},i,{offset:r,horizontalPoints:N,xAxis:x,yAxis:b})),S.createElement(lHe,Kp({},i,{offset:r,verticalPoints:O,xAxis:x,yAxis:b}))))}g1.displayName="CartesianGrid";var pHe={},jde=Mo({name:"errorBars",initialState:pHe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:nyt,replaceErrorBar:ryt,removeErrorBar:iyt}=jde.actions,mHe=jde.reducer,gHe=["children"];function yHe(t,e){if(t==null)return{};var n,r,i=xHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var vHe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},bHe=S.createContext(vHe);function Bde(t){var{children:e}=t,n=yHe(t,gHe);return S.createElement(bHe.Provider,{value:n},e)}function QC(t,e){var n,r,i=Dt(c=>Vd(c,t)),s=Dt(c=>Hd(c,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Li.allowDataOverflow,a=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Di.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function NB(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=XC(),{needClipX:s,needClipY:o,needClip:a}=QC(e,n);if(!a||!i)return null;var{x:l,y:c,width:d,height:h}=i;return S.createElement("clipPath",{id:"clipPath-".concat(r)},S.createElement("rect",{x:s?l:l-d/2,y:o?c:c-h/2,width:s?d:d*2,height:o?h:h*2}))}var Ude=(t,e,n,r)=>Kc(t,"xAxis",e,r),Fde=(t,e,n,r)=>Gc(t,"xAxis",e,r),$de=(t,e,n,r)=>Kc(t,"yAxis",n,r),zde=(t,e,n,r)=>Gc(t,"yAxis",n,r),wHe=je([Tn,Ude,$de,Fde,zde],(t,e,n,r,i)=>Jc(t,"xAxis")?_h(e,r,!1):_h(n,i,!1)),EHe=(t,e,n,r,i)=>i;function SHe(t){return t.type==="line"}var AHe=je([EE,EHe],(t,e)=>t.filter(SHe).find(n=>n.id===e)),THe=je([Tn,Ude,$de,Fde,zde,AHe,wHe,A6],(t,e,n,r,i,s,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:d}=a;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:h,data:m}=s,g;if(m!=null&&m.length>0?g=m:g=l==null?void 0:l.slice(c,d+1),g!=null)return cqe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:h,bandSize:o,displayedData:g})}});function Vde(t){var e=Um(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,o=Number(i),a=Number(s);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(a)||a<0)&&(a=r),{r:o,strokeWidth:a}}return{r:n,strokeWidth:r}}var Q3={exports:{}},Z3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kJ;function kHe(){if(kJ)return Z3;kJ=1;var t=Gx();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,a=t.useDebugValue;return Z3.useSyncExternalStoreWithSelector=function(l,c,d,h,m){var g=i(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=o(function(){function b(j){if(!w){if(w=!0,T=j,j=h(j),m!==void 0&&v.hasValue){var _=v.value;if(m(_,j))return N=_}return N=j}if(_=N,n(T,j))return _;var F=h(j);return m!==void 0&&m(_,F)?(T=j,_):(T=j,N=F)}var w=!1,T,N,O=d===void 0?null:d;return[function(){return b(c())},O===null?void 0:function(){return b(O())}]},[c,d,h,m]);var x=r(l,g[0],g[1]);return s(function(){v.hasValue=!0,v.value=x},[x]),a(x),x},Z3}var NJ;function NHe(){return NJ||(NJ=1,Q3.exports=kHe()),Q3.exports}NHe();function CHe(t){t()}function PHe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){CHe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var CJ={notify(){},get:()=>[]};function _He(t,e){let n,r=CJ,i=0,s=!1;function o(x){d();const b=r.subscribe(x);let w=!1;return()=>{w||(w=!0,b(),h())}}function a(){r.notify()}function l(){v.onStateChange&&v.onStateChange()}function c(){return s}function d(){i++,n||(n=t.subscribe(l),r=PHe())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=CJ)}function m(){s||(s=!0,d())}function g(){s&&(s=!1,h())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:m,tryUnsubscribe:g,getListeners:()=>r};return v}var IHe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RHe=IHe(),OHe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",MHe=OHe(),LHe=()=>RHe||MHe?S.useLayoutEffect:S.useEffect,DHe=LHe();function PJ(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function jHe(t,e){if(PJ(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!PJ(t[n[i]],e[n[i]]))return!1;return!0}var eO=Symbol.for("react-redux-context"),tO=typeof globalThis<"u"?globalThis:{};function BHe(){if(!S.createContext)return{};const t=tO[eO]??(tO[eO]=new Map);let e=t.get(S.createContext);return e||(e=S.createContext(null),t.set(S.createContext,e)),e}var UHe=BHe();function FHe(t){const{children:e,context:n,serverState:r,store:i}=t,s=S.useMemo(()=>{const l=_He(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=S.useMemo(()=>i.getState(),[i]);DHe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||UHe;return S.createElement(a.Provider,{value:s},e)}var $He=FHe,zHe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function VHe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function PE(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(zHe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!jHe(t[r],e[r]))return!1}else if(!VHe(t[r],e[r]))return!1;return!0}var HHe=["id"],qHe=["type","layout","connectNulls","needClip","shape"],GHe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function y1(){return y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y1.apply(null,arguments)}function _J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_J(Object(n),!0).forEach(function(r){KHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_J(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KHe(t,e,n){return(e=WHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WHe(t){var e=YHe(t,"string");return typeof e=="symbol"?e:e+""}function YHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CB(t,e){if(t==null)return{};var n,r,i=JHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function JHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var XHe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Uh(n,e),payload:t}]},QHe=S.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:d}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Uh(o,e),hide:a,type:c,color:r,unit:l,graphicalItemId:d}};return S.createElement(WC,{tooltipEntrySettings:h})}),Hde=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function ZHe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var eqe=(t,e,n)=>{var r=n.reduce((h,m)=>h+m);if(!r)return Hde(e,t);for(var i=Math.floor(t/r),s=t%r,o=e-t,a=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>s){a=[...n.slice(0,l),s-c];break}var d=a.length%2===0?[0,o]:[o];return[...ZHe(n,i),...a,...d].map(h=>"".concat(h,"px")).join(", ")};function tqe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:o}=r,{id:a}=r,l=CB(r,HHe),c=co(l);return S.createElement(Pde,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:o,clipPathId:e})}function nqe(t){var{showLabels:e,children:n,points:r}=t,i=S.useMemo(()=>r==null?void 0:r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Sc(Sc({},l),{},{value:s.value,payload:s.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[r]);return S.createElement(fB,{value:e?i:void 0},n)}function IJ(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s}=t,{type:o,layout:a,connectNulls:l,needClip:c,shape:d}=s,h=CB(s,qHe),m=Sc(Sc({},qs(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:o,layout:a,connectNulls:l,strokeDasharray:i??s.strokeDasharray});return S.createElement(S.Fragment,null,(r==null?void 0:r.length)>1&&S.createElement(yB,y1({shapeType:"curve",option:d},m,{pathRef:n})),S.createElement(tqe,{points:r,clipPathId:e,props:s}))}function rqe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function iqe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:h,animateNewValues:m,width:g,height:v,onAnimationEnd:x,onAnimationStart:b}=n,w=i.current,T=uv(o,"recharts-line-"),N=S.useRef(T),[O,j]=S.useState(!1),_=!O,F=S.useCallback(()=>{typeof x=="function"&&x(),j(!1)},[x]),z=S.useCallback(()=>{typeof b=="function"&&b(),j(!0)},[b]),D=rqe(r.current),$=S.useRef(0);N.current!==T&&($.current=s.current,N.current=T);var G=$.current;return S.createElement(nqe,{points:o,showLabels:_},n.children,S.createElement(cv,{animationId:T,begin:c,duration:d,isActive:l,easing:h,onAnimationEnd:F,onAnimationStart:z,key:T},H=>{var U=qn(G,D+G,H),A=Math.min(U,D),I;if(l)if(a){var L="".concat(a).split(/[,\s]+/gim).map(te=>parseFloat(te));I=eqe(A,D,L)}else I=Hde(D,A);else I=a==null?void 0:String(a);if(H>0&&D>0&&(i.current=o,s.current=Math.max(s.current,A)),w){var q=w.length/o.length,K=H===1?o:o.map((te,Y)=>{var V=Math.floor(Y*q);if(w[V]){var M=w[V];return Sc(Sc({},te),{},{x:qn(M.x,te.x,H),y:qn(M.y,te.y,H)})}return m?Sc(Sc({},te),{},{x:qn(g*2,te.x,H),y:qn(v/2,te.y,H)}):Sc(Sc({},te),{},{x:te.x,y:te.y})});return i.current=K,S.createElement(IJ,{props:n,points:K,clipPathId:e,pathRef:r,strokeDasharray:I})}return S.createElement(IJ,{props:n,points:o,clipPathId:e,pathRef:r,strokeDasharray:I})}),S.createElement(qC,{label:n.label}))}function sqe(t){var{clipPathId:e,props:n}=t,r=S.useRef(null),i=S.useRef(0),s=S.useRef(null);return S.createElement(iqe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var oqe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Wn(t.payload,e)}};class aqe extends S.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:s,yAxisId:o,top:a,left:l,width:c,height:d,id:h,needClip:m,zIndex:g}=this.props;if(e)return null;var v=Rn("recharts-line",i),x=h,{r:b,strokeWidth:w}=Vde(n),T=gB(n),N=b*2+w,O=m?"url(#clipPath-".concat(T?"":"dots-").concat(x,")"):void 0;return S.createElement(po,{zIndex:g},S.createElement(Zr,{className:v},m&&S.createElement("defs",null,S.createElement(NB,{clipPathId:x,xAxisId:s,yAxisId:o}),!T&&S.createElement("clipPath",{id:"clipPath-dots-".concat(x)},S.createElement("rect",{x:l-N/2,y:a-N/2,width:c+N,height:d+N}))),S.createElement(Bde,{xAxisId:s,yAxisId:o,data:r,dataPointFormatter:oqe,errorBarOffset:0},S.createElement(sqe,{props:this.props,clipPathId:x}))),S.createElement(jL,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:O}))}}var qde={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ai.line,type:"linear"};function lqe(t){var e=Ei(t,qde),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:d,label:h,legendType:m,xAxisId:g,yAxisId:v,id:x}=e,b=CB(e,GHe),{needClip:w}=QC(g,v),T=XC(),N=Fh(),O=Yi(),j=Dt($=>THe($,g,v,O,x));if(N!=="horizontal"&&N!=="vertical"||j==null||T==null)return null;var{height:_,width:F,x:z,y:D}=T;return S.createElement(aqe,y1({},b,{id:x,connectNulls:a,dot:l,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,isAnimationActive:d,hide:c,label:h,legendType:m,xAxisId:g,yAxisId:v,points:j,layout:N,height:_,width:F,left:z,top:D,needClip:w}))}function cqe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:o,bandSize:a,displayedData:l}=t;return l.map((c,d)=>{var h=Wn(c,o);if(e==="horizontal"){var m=Y2({axis:n,ticks:i,bandSize:a,entry:c,index:d}),g=Ar(h)?null:r.scale(h);return{x:m,y:g,value:h,payload:c}}var v=Ar(h)?null:n.scale(h),x=Y2({axis:r,ticks:s,bandSize:a,entry:c,index:d});return v==null||x==null?null:{x:v,y:x,value:h,payload:c}}).filter(Boolean)}function uqe(t){var e=Ei(t,qde),n=Yi();return S.createElement(YC,{id:e.id,type:"line"},r=>S.createElement(S.Fragment,null,S.createElement(wB,{legendPayload:XHe(e)}),S.createElement(QHe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),S.createElement(EB,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),S.createElement(lqe,y1({},e,{id:r}))))}var qT=S.memo(uqe,PE);qT.displayName="Line";function Xc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:_de}function Qc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:_de}var Gde=(t,e,n)=>Kc(t,"xAxis",Xc(t,e),n),Kde=(t,e,n)=>Gc(t,"xAxis",Xc(t,e),n),Wde=(t,e,n)=>Kc(t,"yAxis",Qc(t,e),n),Yde=(t,e,n)=>Gc(t,"yAxis",Qc(t,e),n),dqe=je([Tn,Gde,Wde,Kde,Yde],(t,e,n,r,i)=>Jc(t,"xAxis")?_h(e,r,!1):_h(n,i,!1)),fqe=(t,e)=>e,Jde=je([EE,fqe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),Xde=t=>{var e=Tn(t),n=Jc(e,"xAxis");return n?"yAxis":"xAxis"},hqe=(t,e)=>{var n=Xde(t);return n==="yAxis"?Qc(t,e):Xc(t,e)},pqe=(t,e,n)=>gk(t,Xde(t),hqe(t,e),n),mqe=je([Jde,pqe],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=MC(t);if(!(r==null||i==null)){var s=(n=e[r])===null||n===void 0?void 0:n.stackedData,o=s==null?void 0:s.find(a=>a.key===i);if(o!=null)return o.map(a=>[a[0],a[1]])}}}),gqe=je([Tn,Gde,Wde,Kde,Yde,mqe,Fce,dqe,Jde,YBe],(t,e,n,r,i,s,o,a,l,c)=>{var{chartData:d,dataStartIndex:h,dataEndIndex:m}=o;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||a==null)){var{data:g}=l,v;if(g&&g.length>0?v=g:v=d==null?void 0:d.slice(h,m+1),v!=null)return Lqe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:h,areaSettings:l,stackedData:s,displayedData:v,chartBaseValue:c,bandSize:a})}}),yqe=["id"],xqe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cm.apply(null,arguments)}function Qde(t,e){if(t==null)return{};var n,r,i=vqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function RJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RJ(Object(n),!0).forEach(function(r){bqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bqe(t,e,n){return(e=wqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wqe(t){var e=Eqe(t,"string");return typeof e=="symbol"?e:e+""}function Eqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tk(t,e){return t&&t!=="none"?t:e}var Sqe=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:s,hide:o}=t;return[{inactive:o,dataKey:e,type:s,color:Tk(r,i),value:Uh(n,e),payload:t}]},Aqe=S.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:d}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Uh(o,e),hide:a,type:c,color:Tk(r,s),unit:l,graphicalItemId:d}};return S.createElement(WC,{tooltipEntrySettings:h})});function Tqe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:s,dataKey:o}=r,a=co(r);return S.createElement(Pde,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:a,needClip:i,clipPathId:e})}function kqe(t){var{showLabels:e,children:n,points:r}=t,i=r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Kg(Kg({},l),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return S.createElement(fB,{value:e?i:void 0},n)}function OJ(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:s}=t,{layout:o,type:a,stroke:l,connectNulls:c,isRange:d}=s,{id:h}=s,m=Qde(s,yqe),g=co(m),v=qs(m);return S.createElement(S.Fragment,null,(e==null?void 0:e.length)>1&&S.createElement(Zr,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},S.createElement(py,Cm({},v,{id:h,points:e,connectNulls:c,type:a,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),l!=="none"&&S.createElement(py,Cm({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:e})),l!=="none"&&d&&S.createElement(py,Cm({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:n}))),S.createElement(Tqe,{points:e,props:m,clipPathId:i}))}function Nqe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.y,l=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!fr(a)||!fr(l))return null;var c=r*Math.abs(a-l),d=Math.max(...s.map(h=>h.x||0));return Nt(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(h=>h.x||0),d)),Nt(d)?S.createElement("rect",{x:0,y:a<l?a:a-c,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(c)}):null}function Cqe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.x,l=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!fr(a)||!fr(l))return null;var c=r*Math.abs(a-l),d=Math.max(...s.map(h=>h.y||0));return Nt(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(h=>h.y||0),d)),Nt(d)?S.createElement("rect",{x:a<l?a:a-c,y:0,width:c,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}function Pqe(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:s}=t;return n==="vertical"?S.createElement(Nqe,{alpha:e,points:r,baseLine:i,strokeWidth:s}):S.createElement(Cqe,{alpha:e,points:r,baseLine:i,strokeWidth:s})}function _qe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=t,{points:o,baseLine:a,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:h,onAnimationStart:m,onAnimationEnd:g}=r,v=S.useMemo(()=>({points:o,baseLine:a}),[o,a]),x=uv(v,"recharts-area-"),b=kDe(),[w,T]=S.useState(!1),N=!w,O=S.useCallback(()=>{typeof g=="function"&&g(),T(!1)},[g]),j=S.useCallback(()=>{typeof m=="function"&&m(),T(!0)},[m]);if(b==null)return null;var _=i.current,F=s.current;return S.createElement(kqe,{showLabels:N,points:o},r.children,S.createElement(cv,{animationId:x,begin:c,duration:d,isActive:l,easing:h,onAnimationEnd:O,onAnimationStart:j,key:x},z=>{if(_){var D=_.length/o.length,$=z===1?o:o.map((H,U)=>{var A=Math.floor(U*D);if(_[A]){var I=_[A];return Kg(Kg({},H),{},{x:qn(I.x,H.x,z),y:qn(I.y,H.y,z)})}return H}),G;return Nt(a)?G=qn(F,a,z):Ar(a)||sl(a)?G=qn(F,0,z):G=a.map((H,U)=>{var A=Math.floor(U*D);if(Array.isArray(F)&&F[A]){var I=F[A];return Kg(Kg({},H),{},{x:qn(I.x,H.x,z),y:qn(I.y,H.y,z)})}return H}),z>0&&(i.current=$,s.current=G),S.createElement(OJ,{points:$,baseLine:G,needClip:e,clipPathId:n,props:r})}return z>0&&(i.current=o,s.current=a),S.createElement(Zr,null,l&&S.createElement("defs",null,S.createElement("clipPath",{id:"animationClipPath-".concat(n)},S.createElement(Pqe,{alpha:z,points:o,baseLine:a,layout:b,strokeWidth:r.strokeWidth}))),S.createElement(Zr,{clipPath:"url(#animationClipPath-".concat(n,")")},S.createElement(OJ,{points:o,baseLine:a,needClip:e,clipPathId:n,props:r})))}),S.createElement(qC,{label:r.label}))}function Iqe(t){var{needClip:e,clipPathId:n,props:r}=t,i=S.useRef(null),s=S.useRef();return S.createElement(_qe,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s})}class Rqe extends S.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:s,left:o,needClip:a,xAxisId:l,yAxisId:c,width:d,height:h,id:m,baseLine:g,zIndex:v}=this.props;if(e)return null;var x=Rn("recharts-area",i),b=m,{r:w,strokeWidth:T}=Vde(n),N=gB(n),O=w*2+T,j=a?"url(#clipPath-".concat(N?"":"dots-").concat(b,")"):void 0;return S.createElement(po,{zIndex:v},S.createElement(Zr,{className:x},a&&S.createElement("defs",null,S.createElement(NB,{clipPathId:b,xAxisId:l,yAxisId:c}),!N&&S.createElement("clipPath",{id:"clipPath-dots-".concat(b)},S.createElement("rect",{x:o-O/2,y:s-O/2,width:d+O,height:h+O}))),S.createElement(Iqe,{needClip:a,clipPathId:b,props:this.props})),S.createElement(jL,{points:r,mainColor:Tk(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}),this.props.isRange&&Array.isArray(g)&&S.createElement(jL,{points:g,mainColor:Tk(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}))}}var Zde={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:ai.area};function Oqe(t){var e,n=Ei(t,Zde),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,fill:c,fillOpacity:d,hide:h,isAnimationActive:m,legendType:g,stroke:v,xAxisId:x,yAxisId:b}=n,w=Qde(n,xqe),T=Fh(),N=nde(),{needClip:O}=QC(x,b),j=Yi(),{points:_,isRange:F,baseLine:z}=(e=Dt(A=>gqe(A,t.id,j)))!==null&&e!==void 0?e:{},D=XC();if(T!=="horizontal"&&T!=="vertical"||D==null||N!=="AreaChart"&&N!=="ComposedChart")return null;var{height:$,width:G,x:H,y:U}=D;return!_||!_.length?null:S.createElement(Rqe,Cm({},w,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,baseLine:z,connectNulls:a,dot:l,fill:c,fillOpacity:d,height:$,hide:h,layout:T,isAnimationActive:m==="auto"?!pE.isSsr:m,isRange:F,legendType:g,needClip:O,points:_,stroke:v,width:G,left:H,top:U,xAxisId:x,yAxisId:b}))}var Mqe=(t,e,n,r,i)=>{var s=n??e;if(Nt(s))return s;var o=t==="horizontal"?i:r,a=o.scale.domain();if(o.type==="number"){var l=Math.max(a[0],a[1]),c=Math.min(a[0],a[1]);return s==="dataMin"?c:s==="dataMax"||l<0?l:Math.max(Math.min(a[0],a[1]),0)}return s==="dataMin"?a[0]:s==="dataMax"?a[1]:a[0]};function Lqe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:o,xAxis:a,yAxis:l,displayedData:c,dataStartIndex:d,xAxisTicks:h,yAxisTicks:m,bandSize:g}=t,v=i&&i.length,x=Mqe(s,o,n,a,l),b=s==="horizontal",w=!1,T=c.map((O,j)=>{var _,F,z;if(v)z=i[d+j];else{var D=Wn(O,r);Array.isArray(D)?(z=D,w=!0):z=[x,D]}var $=(_=(F=z)===null||F===void 0?void 0:F[1])!==null&&_!==void 0?_:null,G=$==null||v&&!e&&Wn(O,r)==null;return b?{x:Y2({axis:a,ticks:h,bandSize:g,entry:O,index:j}),y:G?null:l.scale($),value:z,payload:O}:{x:G?null:a.scale($),y:Y2({axis:l,ticks:m,bandSize:g,entry:O,index:j}),value:z,payload:O}}),N;return v||w?N=T.map(O=>{var j=Array.isArray(O.value)?O.value[0]:null;return b?{x:O.x,y:j!=null&&O.y!=null?l.scale(j):null,payload:O.payload}:{x:j!=null?a.scale(j):null,y:O.y,payload:O.payload}}):N=b?l.scale(x):a.scale(x),{points:T,baseLine:N,isRange:w}}function Dqe(t){var e=Ei(t,Zde),n=Yi();return S.createElement(YC,{id:e.id,type:"area"},r=>S.createElement(S.Fragment,null,S.createElement(wB,{legendPayload:Sqe(e)}),S.createElement(Aqe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),S.createElement(EB,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Cle(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),S.createElement(Oqe,Cm({},e,{id:r}))))}var ZC=S.memo(Dqe,PE);ZC.displayName="Area";var jqe="Invariant failed";function Bqe(t,e){throw new Error(jqe)}function BL(){return BL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BL.apply(null,arguments)}function kk(t){return S.createElement(yB,BL({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Uqe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Nt(e))return e;var s=Nt(r)||Ar(r);return s?e(r,i):(s||Bqe(),n)}},Fqe=(t,e,n)=>n,$qe=(t,e)=>e,_E=je([EE,$qe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),zqe=je([_E],t=>t==null?void 0:t.maxBarSize),Vqe=(t,e,n,r)=>r,Hqe=je([Tn,EE,Xc,Qc,Fqe],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),qqe=(t,e,n)=>{var r=Tn(t),i=Xc(t,e),s=Qc(t,e);if(!(i==null||s==null))return r==="horizontal"?gk(t,"yAxis",s,n):gk(t,"xAxis",i,n)},Gqe=(t,e)=>{var n=Tn(t),r=Xc(t,e),i=Qc(t,e);if(!(r==null||i==null))return n==="horizontal"?mY(t,"xAxis",r):mY(t,"yAxis",i)},Kqe=je([Hqe,WBe,Gqe],uVe),Wqe=(t,e,n)=>{var r,i,s=_E(t,e);if(s!=null){var o=Xc(t,e),a=Qc(t,e);if(!(o==null||a==null)){var l=Tn(t),c=tue(t),{maxBarSize:d}=s,h=Ar(d)?c:d,m,g;return l==="horizontal"?(m=Kc(t,"xAxis",o,n),g=Gc(t,"xAxis",o,n)):(m=Kc(t,"yAxis",a,n),g=Gc(t,"yAxis",a,n)),(r=(i=_h(m,g,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},efe=(t,e,n)=>{var r=Tn(t),i=Xc(t,e),s=Qc(t,e);if(!(i==null||s==null)){var o,a;return r==="horizontal"?(o=Kc(t,"xAxis",i,n),a=Gc(t,"xAxis",i,n)):(o=Kc(t,"yAxis",s,n),a=Gc(t,"yAxis",s,n)),_h(o,a)}},Yqe=je([Kqe,tue,KBe,nue,Wqe,efe,zqe],mVe),Jqe=(t,e,n)=>{var r=Xc(t,e);if(r!=null)return Kc(t,"xAxis",r,n)},Xqe=(t,e,n)=>{var r=Qc(t,e);if(r!=null)return Kc(t,"yAxis",r,n)},Qqe=(t,e,n)=>{var r=Xc(t,e);if(r!=null)return Gc(t,"xAxis",r,n)},Zqe=(t,e,n)=>{var r=Qc(t,e);if(r!=null)return Gc(t,"yAxis",r,n)},eGe=je([Yqe,_E],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),tGe=je([qqe,_E],gVe),nGe=je([Pi,Xj,Jqe,Xqe,Qqe,Zqe,eGe,Tn,Fce,efe,tGe,_E,Vqe],(t,e,n,r,i,s,o,a,l,c,d,h,m)=>{var{chartData:g,dataStartIndex:v,dataEndIndex:x}=l;if(!(h==null||o==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||s==null||c==null)){var{data:b}=h,w;if(b!=null&&b.length>0?w=b:w=g==null?void 0:g.slice(v,x+1),w!=null)return IGe({layout:a,barSettings:h,pos:o,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:d,displayedData:w,offset:t,cells:m,dataStartIndex:v})}}),rGe=["index"];function UL(){return UL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UL.apply(null,arguments)}function iGe(t,e){if(t==null)return{};var n,r,i=sGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var tfe=S.createContext(void 0),oGe=t=>{var e=S.useContext(tfe);if(e!=null)return e.stackId;if(t!=null)return Cle(t)},aGe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),lGe=t=>{var e=S.useContext(tfe);if(e!=null){var{stackId:n}=e;return"url(#".concat(aGe(n,t),")")}},cGe=t=>{var{index:e}=t,n=iGe(t,rGe),r=lGe(e);return S.createElement(Zr,UL({className:"recharts-bar-stack-layer",clipPath:r},n))},uGe=["onMouseEnter","onMouseLeave","onClick"],dGe=["value","background","tooltipPosition"],fGe=["id"],hGe=["onMouseEnter","onClick","onMouseLeave"];function Od(){return Od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Od.apply(null,arguments)}function MJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function to(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MJ(Object(n),!0).forEach(function(r){pGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pGe(t,e,n){return(e=mGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mGe(t){var e=gGe(t,"string");return typeof e=="symbol"?e:e+""}function gGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nk(t,e){if(t==null)return{};var n,r,i=yGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xGe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Uh(n,e),payload:t}]},vGe=S.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:o,unit:a,tooltipType:l,id:c}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Uh(s,e),hide:o,type:l,color:i,unit:a,graphicalItemId:c}};return S.createElement(WC,{tooltipEntrySettings:d})});function bGe(t){var e=Dt(Rh),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:a,onClick:l}=s,c=Nk(s,uGe),d=xB(o,r,s.id),h=vB(a),m=bB(l,r,s.id);if(!i||n==null)return null;var g=Um(i);return S.createElement(po,{zIndex:yVe(i,ai.barBackground)},n.map((v,x)=>{var{value:b,background:w,tooltipPosition:T}=v,N=Nk(v,dGe);if(!w)return null;var O=d(v,x),j=h(v,x),_=m(v,x),F=to(to(to(to(to({option:i,isActive:String(x)===e},N),{},{fill:"#eee"},w),g),oC(c,v,x)),{},{onMouseEnter:O,onMouseLeave:j,onClick:_,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return S.createElement(kk,Od({key:"background-bar-".concat(x)},F))}))}function wGe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return to(to({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return S.createElement(fB,{value:e?i:void 0},n)}function EGe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:o}=t,a=Dt(Rh),l=Dt(sB),c=n&&String(s)===a&&(l==null||o===l),d=c?n:e;return c?S.createElement(po,{zIndex:ai.activeBar},S.createElement(kk,Od({},r,{name:String(r.name)},i,{isActive:c,option:d,index:s,dataKey:o}))):S.createElement(kk,Od({},r,{name:String(r.name)},i,{isActive:c,option:d,index:s,dataKey:o}))}function SGe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return S.createElement(kk,Od({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function AGe(t){var e,{data:n,props:r}=t,i=(e=co(r))!==null&&e!==void 0?e:{},{id:s}=i,o=Nk(i,fGe),{shape:a,dataKey:l,activeBar:c}=r,{onMouseEnter:d,onClick:h,onMouseLeave:m}=r,g=Nk(r,hGe),v=xB(d,l,s),x=vB(m),b=bB(h,l,s);return n?S.createElement(S.Fragment,null,n.map((w,T)=>S.createElement(cGe,Od({index:T,key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(T),className:"recharts-bar-rectangle"},oC(g,w,T),{onMouseEnter:v(w,T),onMouseLeave:x(w,T),onClick:b(w,T)}),c?S.createElement(EGe,{shape:a,activeBar:c,baseProps:o,entry:w,index:T,dataKey:l}):S.createElement(SGe,{shape:a,baseProps:o,entry:w,index:T,dataKey:l})))):null}function TGe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,onAnimationEnd:c,onAnimationStart:d}=e,h=n.current,m=uv(e,"recharts-bar-"),[g,v]=S.useState(!1),x=!g,b=S.useCallback(()=>{typeof c=="function"&&c(),v(!1)},[c]),w=S.useCallback(()=>{typeof d=="function"&&d(),v(!0)},[d]);return S.createElement(wGe,{showLabels:x,rects:r},S.createElement(cv,{animationId:m,begin:o,duration:a,isActive:s,easing:l,onAnimationEnd:b,onAnimationStart:w,key:m},T=>{var N=T===1?r:r==null?void 0:r.map((O,j)=>{var _=h&&h[j];if(_)return to(to({},O),{},{x:qn(_.x,O.x,T),y:qn(_.y,O.y,T),width:qn(_.width,O.width,T),height:qn(_.height,O.height,T)});if(i==="horizontal"){var F=qn(0,O.height,T),z=qn(O.stackedBarStart,O.y,T);return to(to({},O),{},{y:z,height:F})}var D=qn(0,O.width,T),$=qn(O.stackedBarStart,O.x,T);return to(to({},O),{},{width:D,x:$})});return T>0&&(n.current=N??null),N==null?null:S.createElement(Zr,null,S.createElement(AGe,{props:e,data:N}))}),S.createElement(qC,{label:e.label}),e.children)}function kGe(t){var e=S.useRef(null);return S.createElement(TGe,{previousRectanglesRef:e,props:t})}var nfe=0,NGe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Wn(t,e)}};class CGe extends S.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:o,needClip:a,background:l,id:c}=this.props;if(e||n==null)return null;var d=Rn("recharts-bar",i),h=c;return S.createElement(Zr,{className:d,id:c},a&&S.createElement("defs",null,S.createElement(NB,{clipPathId:h,xAxisId:s,yAxisId:o})),S.createElement(Zr,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(h,")"):void 0},S.createElement(bGe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),S.createElement(kGe,this.props)))}}var PGe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:nfe,xAxisId:0,yAxisId:0,zIndex:ai.bar};function _Ge(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:d}=t,{needClip:h}=QC(e,n),m=Fh(),g=Yi(),v=mB(t.children,bv),x=Dt(T=>nGe(T,t.id,g,v));if(m!=="vertical"&&m!=="horizontal")return null;var b,w=x==null?void 0:x[0];return w==null||w.height==null||w.width==null?b=0:b=m==="vertical"?w.height/2:w.width/2,S.createElement(Bde,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:NGe,errorBarOffset:b},S.createElement(CGe,Od({},t,{layout:m,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:d})))}function IGe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:o,yAxis:a,xAxisTicks:l,yAxisTicks:c,stackedData:d,displayedData:h,offset:m,cells:g,parentViewBox:v,dataStartIndex:x}=t,b=e==="horizontal"?a:o,w=d?b.scale.domain():null,T=qLe({numericAxis:b}),N=b.scale(T);return h.map((O,j)=>{var _,F,z,D,$,G;if(d){var H=d[j+x];if(H==null)return null;_=FLe(H,w)}else _=Wn(O,n),Array.isArray(_)||(_=[T,_]);var U=Uqe(r,nfe)(_[1],j);if(e==="horizontal"){var A,[I,L]=[a.scale(_[0]),a.scale(_[1])];F=wK({axis:o,ticks:l,bandSize:s,offset:i.offset,entry:O,index:j}),z=(A=L??I)!==null&&A!==void 0?A:void 0,D=i.size;var q=I-L;if($=sl(q)?0:q,G={x:F,y:m.top,width:D,height:m.height},Math.abs(U)>0&&Math.abs($)<Math.abs(U)){var K=Ki($||U)*(Math.abs(U)-Math.abs($));z-=K,$+=K}}else{var[te,Y]=[o.scale(_[0]),o.scale(_[1])];if(F=te,z=wK({axis:a,ticks:c,bandSize:s,offset:i.offset,entry:O,index:j}),D=Y-te,$=i.size,G={x:m.left,y:z,width:m.width,height:$},Math.abs(U)>0&&Math.abs(D)<Math.abs(U)){var V=Ki(D||U)*(Math.abs(U)-Math.abs(D));D+=V}}if(F==null||z==null||D==null||$==null)return null;var M=to(to({},O),{},{stackedBarStart:N,x:F,y:z,width:D,height:$,value:d?_:_[1],payload:O,background:G,tooltipPosition:{x:F+D/2,y:z+$/2},parentViewBox:v},g&&g[j]&&g[j].props);return M}).filter(Boolean)}function RGe(t){var e=Ei(t,PGe),n=oGe(e.stackId),r=Yi();return S.createElement(YC,{id:e.id,type:"bar"},i=>S.createElement(S.Fragment,null,S.createElement(wB,{legendPayload:xGe(e)}),S.createElement(vGe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),S.createElement(EB,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),S.createElement(po,{zIndex:e.zIndex},S.createElement(_Ge,Od({},e,{id:i})))))}var rfe=S.memo(RGe,PE);rfe.displayName="Bar";var OGe=["domain","range"],MGe=["domain","range"];function LJ(t,e){if(t==null)return{};var n,r,i=LGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function LGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function DJ(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function ife(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=LJ(t,OGe),{domain:s,range:o}=e,a=LJ(e,MGe);return!DJ(n,s)||!DJ(r,o)?!1:PE(i,a)}var DGe=["dangerouslySetInnerHTML","ticks","scale"],jGe=["id","scale"];function FL(){return FL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FL.apply(null,arguments)}function jJ(t,e){if(t==null)return{};var n,r,i=BGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function UGe(t){var e=Rr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?e(Yze(t)):n.current!==t&&e(Jze({prev:n.current,next:t})),n.current=t},[t,e]),S.useLayoutEffect(()=>()=>{n.current&&(e(Xze(n.current)),n.current=null)},[e]),null}var FGe=t=>{var{xAxisId:e,className:n}=t,r=Dt(Xj),i=Yi(),s="xAxis",o=Dt(w=>Mue(w,s,e,i)),a=Dt(w=>_ue(w,e)),l=Dt(w=>G7e(w,e)),c=Dt(w=>due(w,e));if(a==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:m}=t,g=jJ(t,DGe),{id:v,scale:x}=c,b=jJ(c,jGe);return S.createElement(kB,FL({},g,b,{x:l.x,y:l.y,width:a.width,height:a.height,className:Rn("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},$Ge={allowDataOverflow:Li.allowDataOverflow,allowDecimals:Li.allowDecimals,allowDuplicatedCategory:Li.allowDuplicatedCategory,angle:Li.angle,axisLine:hd.axisLine,height:Li.height,hide:!1,includeHidden:Li.includeHidden,interval:Li.interval,minTickGap:Li.minTickGap,mirror:Li.mirror,orientation:Li.orientation,padding:Li.padding,reversed:Li.reversed,scale:Li.scale,tick:Li.tick,tickCount:Li.tickCount,tickLine:hd.tickLine,tickSize:hd.tickSize,type:Li.type,xAxisId:0},zGe=t=>{var e=Ei(t,$Ge);return S.createElement(S.Fragment,null,S.createElement(UGe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),S.createElement(FGe,e))},x1=S.memo(zGe,ife);x1.displayName="XAxis";var VGe=["dangerouslySetInnerHTML","ticks","scale"],HGe=["id","scale"];function $L(){return $L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$L.apply(null,arguments)}function BJ(t,e){if(t==null)return{};var n,r,i=qGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function GGe(t){var e=Rr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?e(Qze(t)):n.current!==t&&e(Zze({prev:n.current,next:t})),n.current=t},[t,e]),S.useLayoutEffect(()=>()=>{n.current&&(e(eVe(n.current)),n.current=null)},[e]),null}var KGe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=S.useRef(null),o=S.useRef(null),a=Dt(Xj),l=Yi(),c=Rr(),d="yAxis",h=Dt(_=>Iue(_,e)),m=Dt(_=>W7e(_,e)),g=Dt(_=>Mue(_,d,e,l)),v=Dt(_=>fue(_,e));if(S.useLayoutEffect(()=>{if(!(r!=="auto"||!h||dB(i)||S.isValidElement(i)||v==null)){var _=s.current;if(_){var F=_.getCalculatedWidth();Math.round(h.width)!==Math.round(F)&&c(tVe({id:e,width:F}))}}},[g,h,c,i,e,r,v]),h==null||m==null||v==null)return null;var{dangerouslySetInnerHTML:x,ticks:b,scale:w}=t,T=BJ(t,VGe),{id:N,scale:O}=v,j=BJ(v,HGe);return S.createElement(kB,$L({},T,j,{ref:s,labelRef:o,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Rn("recharts-".concat(d," ").concat(d),n),viewBox:a,ticks:g,axisType:d}))},WGe={allowDataOverflow:Di.allowDataOverflow,allowDecimals:Di.allowDecimals,allowDuplicatedCategory:Di.allowDuplicatedCategory,angle:Di.angle,axisLine:hd.axisLine,hide:!1,includeHidden:Di.includeHidden,interval:Di.interval,minTickGap:Di.minTickGap,mirror:Di.mirror,orientation:Di.orientation,padding:Di.padding,reversed:Di.reversed,scale:Di.scale,tick:Di.tick,tickCount:Di.tickCount,tickLine:hd.tickLine,tickSize:hd.tickSize,type:Di.type,width:Di.width,yAxisId:0},YGe=t=>{var e=Ei(t,WGe);return S.createElement(S.Fragment,null,S.createElement(GGe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),S.createElement(KGe,e))},v1=S.memo(YGe,ife);v1.displayName="YAxis";var JGe=(t,e)=>e,PB=je([JGe,Tn,cue,Ii,Jue,qd,cFe,Pi],gFe),_B=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},sfe=ol("mouseClick"),ofe=dE();ofe.startListening({actionCreator:sfe,effect:(t,e)=>{var n=t.payload,r=PB(e.getState(),_B(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(lUe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var zL=ol("mouseMove"),afe=dE(),HA=null;afe.startListening({actionCreator:zL,effect:(t,e)=>{var n=t.payload;HA!==null&&cancelAnimationFrame(HA);var r=_B(n);HA=requestAnimationFrame(()=>{var i=e.getState(),s=Z6(i,i.tooltip.settings.shared);if(s==="axis"){var o=PB(i,r);(o==null?void 0:o.activeIndex)!=null?e.dispatch(zue({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch($ue())}HA=null})}});function XGe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var UJ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},lfe=Mo({name:"rootProps",initialState:UJ,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:UJ.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),QGe=lfe.reducer,{updateOptions:ZGe}=lfe.actions,cfe=Mo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:eKe}=cfe.actions,tKe=cfe.reducer,ufe=ol("keyDown"),dfe=ol("focus"),IB=dE();IB.startListening({actionCreator:ufe,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=eB(i,vv(n),AE(n),NE(n)),a=o==null?-1:Number(o);if(!(!Number.isFinite(a)||a<0)){var l=qd(n);if(s==="Enter"){var c=xk(n,"axis","hover",String(i.index));e.dispatch(IL({active:!i.active,activeIndex:i.index,activeCoordinate:c}));return}var d=Q7e(n),h=d==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=a+m*h;if(!(l==null||g>=l.length||g<0)){var v=xk(n,"axis","hover",String(g));e.dispatch(IL({active:!0,activeIndex:g.toString(),activeCoordinate:v}))}}}}}});IB.startListening({actionCreator:dfe,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=xk(n,"axis","hover",String(s));e.dispatch(IL({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Da=ol("externalEvent"),ffe=dE(),nO=new Map;ffe.startListening({actionCreator:Da,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=nO.get(i);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var a=e.getState(),l={activeCoordinate:WUe(a),activeDataKey:sB(a),activeIndex:Rh(a),activeLabel:Zue(a),activeTooltipIndex:Rh(a),isTooltipActive:YUe(a)};n(l,r)}finally{nO.delete(i)}});nO.set(i,o)}}});var nKe=je([yv],t=>t.tooltipItemPayloads),rKe=je([nKe,kE,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.graphicalItemId===r);if(i!=null){var{positions:s}=i;if(s!=null){var o=e(s,n);return o}}}),hfe=ol("touchMove"),pfe=dE();pfe.startListening({actionCreator:hfe,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=Z6(r,r.tooltip.settings.shared);if(i==="axis"){var s=n.touches[0];if(s==null)return;var o=PB(r,_B({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(zue({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var a,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(_le),h=(a=c.getAttribute(Ile))!==null&&a!==void 0?a:void 0,m=xv(r).find(x=>x.id===h);if(d==null||m==null||h==null)return;var{dataKey:g}=m,v=rKe(r,d,h);e.dispatch(Fue({activeDataKey:g,activeIndex:d,activeCoordinate:v,activeGraphicalItemId:h}))}}}});var iKe=Xae({brush:xVe,cartesianAxis:nVe,chartData:GFe,errorBars:mHe,graphicalItems:cze,layout:MLe,legend:FDe,options:$Fe,polarAxis:S$e,polarOptions:tKe,referenceElements:TVe,rootProps:QGe,tooltip:cUe,zIndex:_Fe}),sKe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return sLe({reducer:iKe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([ofe.middleware,afe.middleware,IB.middleware,ffe.middleware,pfe.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(fle({type:"raf"}))},devTools:{serialize:{replacer:XGe},name:"recharts-".concat(n)}})};function mfe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Yi(),s=S.useRef(null);if(i)return n;s.current==null&&(s.current=sKe(e,r));var o=zj;return S.createElement($He,{context:o,store:s.current},n)}function oKe(t){var{layout:e,margin:n}=t,r=Rr(),i=Yi();return S.useEffect(()=>{i||(r(ILe(e)),r(_Le(n)))},[r,i,e,n]),null}var gfe=S.memo(oKe,PE);function yfe(t){var e=Rr();return S.useEffect(()=>{e(ZGe(t))},[e,t]),null}function FJ(t){var{zIndex:e,isPanorama:n}=t,r=S.useRef(null),i=Rr();return S.useLayoutEffect(()=>(r.current&&i(CFe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(PFe({zIndex:e,isPanorama:n}))}),[i,e,n]),S.createElement("g",{tabIndex:-1,ref:r})}function $J(t){var{children:e,isPanorama:n}=t,r=Dt(xFe);if(!r||r.length===0)return e;var i=r.filter(o=>o<0),s=r.filter(o=>o>0);return S.createElement(S.Fragment,null,i.map(o=>S.createElement(FJ,{key:o,zIndex:o,isPanorama:n})),e,s.map(o=>S.createElement(FJ,{key:o,zIndex:o,isPanorama:n})))}var aKe=["children"];function lKe(t,e){if(t==null)return{};var n,r,i=cKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ck(){return Ck=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ck.apply(null,arguments)}var uKe={width:"100%",height:"100%",display:"block"},dKe=S.forwardRef((t,e)=>{var n=jle(),r=Ble(),i=Yle();if(!Hc(n)||!Hc(r))return null;var{children:s,otherAttributes:o,title:a,desc:l}=t,c,d;return o!=null&&(typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?d=o.role:d=i?"application":void 0),S.createElement(pae,Ck({},o,{title:a,desc:l,role:d,tabIndex:c,width:n,height:r,style:uKe,ref:e}),s)}),fKe=t=>{var{children:e}=t,n=Dt(vC);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return S.createElement(pae,{width:r,height:i,x:o,y:s},e)},zJ=S.forwardRef((t,e)=>{var{children:n}=t,r=lKe(t,aKe),i=Yi();return i?S.createElement(fKe,null,S.createElement($J,{isPanorama:!0},n)):S.createElement(dKe,Ck({ref:e},r),S.createElement($J,{isPanorama:!1},n))});function hKe(){var t=Rr(),[e,n]=S.useState(null),r=Dt(XLe);return S.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;fr(s)&&s!==r&&t(OLe(s))}},[e,t,r]),n}function VJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pKe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VJ(Object(n),!0).forEach(function(r){mKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mKe(t,e,n){return(e=gKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gKe(t){var e=yKe(t,"string");return typeof e=="symbol"?e:e+""}function yKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Km(){return Km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Km.apply(null,arguments)}var xKe=()=>(t9e(),null);function Pk(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var vKe=S.forwardRef((t,e)=>{var n,r,i=S.useRef(null),[s,o]=S.useState({containerWidth:Pk((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Pk((r=t.style)===null||r===void 0?void 0:r.height)}),a=S.useCallback((c,d)=>{o(h=>{var m=Math.round(c),g=Math.round(d);return h.containerWidth===m&&h.containerHeight===g?h:{containerWidth:m,containerHeight:g}})},[]),l=S.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:d,height:h}=c.getBoundingClientRect();a(d,h);var m=v=>{var{width:x,height:b}=v[0].contentRect;a(x,b)},g=new ResizeObserver(m);g.observe(c),i.current=g}},[e,a]);return S.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[a]),S.createElement(S.Fragment,null,S.createElement(wC,{width:s.containerWidth,height:s.containerHeight}),S.createElement("div",Km({ref:l},t)))}),bKe=S.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=S.useState({containerWidth:Pk(n),containerHeight:Pk(r)}),o=S.useCallback((l,c)=>{s(d=>{var h=Math.round(l),m=Math.round(c);return d.containerWidth===h&&d.containerHeight===m?d:{containerWidth:h,containerHeight:m}})},[]),a=S.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:d}=l.getBoundingClientRect();o(c,d)}},[e,o]);return S.createElement(S.Fragment,null,S.createElement(wC,{width:i.containerWidth,height:i.containerHeight}),S.createElement("div",Km({ref:a},t)))}),wKe=S.forwardRef((t,e)=>{var{width:n,height:r}=t;return S.createElement(S.Fragment,null,S.createElement(wC,{width:n,height:r}),S.createElement("div",Km({ref:e},t)))}),EKe=S.forwardRef((t,e)=>{var{width:n,height:r}=t;return Nd(n)||Nd(r)?S.createElement(bKe,Km({},t,{ref:e})):S.createElement(wKe,Km({},t,{ref:e}))});function SKe(t){return t===!0?vKe:EKe}var AKe=S.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,onMouseMove:h,onMouseUp:m,onTouchEnd:g,onTouchMove:v,onTouchStart:x,style:b,width:w,responsive:T,dispatchTouchEvents:N=!0}=t,O=S.useRef(null),j=Rr(),[_,F]=S.useState(null),[z,D]=S.useState(null),$=hKe(),G=Qj(),H=(G==null?void 0:G.width)>0?G.width:w,U=(G==null?void 0:G.height)>0?G.height:i,A=S.useCallback(oe=>{$(oe),typeof e=="function"&&e(oe),F(oe),D(oe),oe!=null&&(O.current=oe)},[$,e,F,D]),I=S.useCallback(oe=>{j(sfe(oe)),j(Da({handler:s,reactEvent:oe}))},[j,s]),L=S.useCallback(oe=>{j(zL(oe)),j(Da({handler:c,reactEvent:oe}))},[j,c]),q=S.useCallback(oe=>{j($ue()),j(Da({handler:d,reactEvent:oe}))},[j,d]),K=S.useCallback(oe=>{j(zL(oe)),j(Da({handler:h,reactEvent:oe}))},[j,h]),te=S.useCallback(()=>{j(dfe())},[j]),Y=S.useCallback(oe=>{j(ufe(oe.key))},[j]),V=S.useCallback(oe=>{j(Da({handler:o,reactEvent:oe}))},[j,o]),M=S.useCallback(oe=>{j(Da({handler:a,reactEvent:oe}))},[j,a]),P=S.useCallback(oe=>{j(Da({handler:l,reactEvent:oe}))},[j,l]),W=S.useCallback(oe=>{j(Da({handler:m,reactEvent:oe}))},[j,m]),X=S.useCallback(oe=>{j(Da({handler:x,reactEvent:oe}))},[j,x]),se=S.useCallback(oe=>{N&&j(hfe(oe)),j(Da({handler:v,reactEvent:oe}))},[j,N,v]),ae=S.useCallback(oe=>{j(Da({handler:g,reactEvent:oe}))},[j,g]),Te=SKe(T);return S.createElement(ade.Provider,{value:_},S.createElement(UOe.Provider,{value:z},S.createElement(Te,{width:H??(b==null?void 0:b.width),height:U??(b==null?void 0:b.height),className:Rn("recharts-wrapper",r),style:pKe({position:"relative",cursor:"default",width:H,height:U},b),onClick:I,onContextMenu:V,onDoubleClick:M,onFocus:te,onKeyDown:Y,onMouseDown:P,onMouseEnter:L,onMouseLeave:q,onMouseMove:K,onMouseUp:W,onTouchEnd:ae,onTouchMove:se,onTouchStart:X,ref:A},S.createElement(xKe,null),n)))}),TKe=["width","height","responsive","children","className","style","compact","title","desc"];function kKe(t,e){if(t==null)return{};var n,r,i=NKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function NKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xfe=S.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:o,style:a,compact:l,title:c,desc:d}=t,h=kKe(t,TKe),m=co(h);return l?S.createElement(S.Fragment,null,S.createElement(wC,{width:n,height:r}),S.createElement(zJ,{otherAttributes:m,title:c,desc:d},s)):S.createElement(AKe,{className:o,style:a,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},S.createElement(zJ,{otherAttributes:m,title:c,desc:d,ref:e},S.createElement(NVe,null,s)))});function VL(){return VL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VL.apply(null,arguments)}var CKe={top:5,right:5,bottom:5,left:5},PKe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:CKe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},RB=S.forwardRef(function(e,n){var r,i=Ei(e.categoricalChartProps,PKe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,eventEmitter:void 0};return S.createElement(mfe,{preloadedState:{options:d},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},S.createElement(Rde,{chartData:c.data}),S.createElement(gfe,{layout:i.layout,margin:i.margin}),S.createElement(yfe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),S.createElement(xfe,VL({},i,{ref:n})))}),_Ke=["axis","item"],IKe=S.forwardRef((t,e)=>S.createElement(RB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_Ke,tooltipPayloadSearcher:VC,categoricalChartProps:t,ref:e}));function RKe(t){var e=Rr();return S.useEffect(()=>{e(eKe(t))},[e,t]),null}var OKe=["layout"];function HL(){return HL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HL.apply(null,arguments)}function MKe(t,e){if(t==null)return{};var n,r,i=LKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function LKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var DKe={top:5,right:5,bottom:5,left:5},vfe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:DKe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},jKe=S.forwardRef(function(e,n){var r,i=Ei(e.categoricalChartProps,vfe),{layout:s}=i,o=MKe(i,OKe),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d}=e,h={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return S.createElement(mfe,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:a},S.createElement(Rde,{chartData:i.data}),S.createElement(gfe,{layout:s,margin:i.margin}),S.createElement(yfe,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),S.createElement(RKe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),S.createElement(xfe,HL({},o,{ref:n})))});function HJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HJ(Object(n),!0).forEach(function(r){BKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BKe(t,e,n){return(e=UKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UKe(t){var e=FKe(t,"string");return typeof e=="symbol"?e:e+""}function FKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $Ke=["item"],zKe=qJ(qJ({},vfe),{},{layout:"centric",startAngle:0,endAngle:360}),bfe=S.forwardRef((t,e)=>{var n=Ei(t,zKe);return S.createElement(jKe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:$Ke,tooltipPayloadSearcher:VC,categoricalChartProps:n,ref:e})}),VKe=["axis"],wfe=S.forwardRef((t,e)=>S.createElement(RB,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:VKe,tooltipPayloadSearcher:VC,categoricalChartProps:t,ref:e})),HKe=["axis"],qKe=S.forwardRef((t,e)=>S.createElement(RB,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:HKe,tooltipPayloadSearcher:VC,categoricalChartProps:t,ref:e}));const OB="https://api.devnet.solana.com",GKe="HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8",bh=[{symbol:"SOL",name:"Solana",mint:"So11111111111111111111111111111111111111112",decimals:9,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"},{symbol:"USDC",name:"USD Coin (Devnet)",mint:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png"}],Cc={SOL:145.5,USDC:1,RAY:1.85},KKe="https://dlmm-api.meteora.ag",GJ=({network:t})=>{const e={solana:"bg-[#9b87f5]/15 text-[#9b87f5] border-[#9b87f5]/30",hyperliquid:"bg-[#34d399]/15 text-[#34d399] border-[#34d399]/30",polymarket:"bg-[#60a5fa]/15 text-[#60a5fa] border-[#60a5fa]/30"},n={solana:"SOL",hyperliquid:"HL",polymarket:"PM"};return u.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-semibold rounded uppercase tracking-[0.05em] border ${e[t]}`,children:n[t]})},WKe=({vault:t,connectOwnerWallet:e,disconnectOwnerWallet:n,connectHLOwnerWallet:r,disconnectHLOwnerWallet:i,connectPMOwnerWallet:s,disconnectPMOwnerWallet:o,assetPrices:a,portfolioHistoryDaily:l,portfolioHistoryLongTerm:c,scheduledTasks:d,assetAllocationData:h,activityFeed:m,activityDisplayCount:g,setActivityDisplayCount:v,setActiveTab:x,refreshData:b,onNewChat:w})=>{const[T,N]=S.useState("all"),[O,j]=S.useState(0),_=2,[F,z]=S.useState("1D"),D=c.length,$=S.useMemo(()=>({"1D":l.length>0||D>=1,"1W":D>=7,"1M":D>=30,"1Y":D>=365}),[D,l.length]),G=S.useMemo(()=>{if(F==="1D")return l;if(c.length===0)return[];const se={"1D":1,"1W":7,"1M":30,"1Y":365}[F]||30;return c.slice(-se)},[l,c,F]),[H,U]=S.useState(0),A=2,[I,L]=S.useState(null),[q,K]=S.useState("pie"),[te,Y]=S.useState(null),[V,M]=S.useState(void 0),P=async X=>{try{await navigator.clipboard.writeText(X),L(X),setTimeout(()=>L(null),2e3)}catch(se){console.error("Failed to copy:",se)}},W=X=>X.network==="solana"&&X.signature?`https://solscan.io/tx/${X.signature}?cluster=devnet`:X.network==="hyperliquid"&&X.signature?`https://app.hyperliquid-testnet.xyz/explorer/tx/${X.signature.replace("hl-","")}`:null;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[u.jsxs("div",{className:"flex flex-col gap-4 lg:gap-6",children:[u.jsxs("div",{className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center group",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:u.jsx(kh,{size:48,className:"text-white"})}),u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-2",children:"Total Net Worth"}),u.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight",children:["$",h.totalValue.toFixed(2)]}),u.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"Cross-Chain Unified Portfolio"})]}),u.jsxs("button",{onClick:w,className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center items-start text-left hover:bg-[#1a1b21] transition-colors group border border-dashed border-[#232328] hover:border-[#E7FE55]/50",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity text-[#E7FE55]",children:u.jsx(sr,{size:48})}),u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:"p-1.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] group-hover:bg-[#E7FE55] group-hover:text-black transition-colors",children:u.jsx(sr,{size:16})}),u.jsx("h3",{className:"text-[#E7FE55] font-medium text-sm",children:"New Conversation"})]}),u.jsx("div",{className:"text-[11px] text-[#747580]",children:"Start a new task or query"})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(ys,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Solana Vault"})}),u.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[t.solBalance.toFixed(4)," SOL"]}),u.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.solBalance*(a.SOL||Cc.SOL)).toFixed(2)]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),t.publicKey&&u.jsxs("a",{href:`https://solscan.io/address/${t.publicKey}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"View on Solscan Explorer",children:[u.jsx(ST,{size:10})," Solscan"]})]}),t.publicKey?u.jsxs("div",{onClick:()=>P(t.publicKey),className:"flex items-center gap-2 cursor-pointer group",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.publicKey.slice(0,4),"...",t.publicKey.slice(-4)]}),I===t.publicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Solana Owner"})}),t.ownerPublicKey?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{onClick:()=>P(t.ownerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.ownerPublicKey.slice(0,4),"...",t.ownerPublicKey.slice(-4)]}),I===t.ownerPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),u.jsx("button",{onClick:n,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),u.jsx("button",{onClick:e,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(dn,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Hyperliquid Vault"})}),u.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.hlBalance||0).toFixed(2)," USDC"]}),u.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:t.hlPositions&&t.hlPositions.length>0?`${t.hlPositions.length} open position${t.hlPositions.length>1?"s":""}`:"No open positions"}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),u.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[u.jsx(dn,{size:10})," Hyperliquid"]})]}),t.hlPublicKey?u.jsxs("div",{onClick:()=>P(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),I===t.hlPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Hyperliquid Owner"})}),t.hlOwnerPublicKey?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{onClick:()=>P(t.hlOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlOwnerPublicKey.slice(0,4),"...",t.hlOwnerPublicKey.slice(-4)]}),I===t.hlOwnerPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),u.jsx("button",{onClick:i,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),u.jsx("button",{onClick:r,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(ST,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Polymarket Vault"})}),u.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.pmBalance||0).toFixed(2)," USDC"]}),u.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.pmBalance||0).toFixed(2)]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),u.jsxs("a",{href:"https://polymarket.com",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Polymarket Platform",children:[u.jsx(ST,{size:10})," Polymarket"]})]}),t.pmPublicKey?u.jsxs("div",{onClick:()=>P(t.pmPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmPublicKey.slice(0,6),"...",t.pmPublicKey.slice(-4)]}),I===t.pmPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Polymarket Owner"})}),t.pmOwnerPublicKey?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{onClick:()=>P(t.pmOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmOwnerPublicKey.slice(0,4),"...",t.pmOwnerPublicKey.slice(-4)]}),I===t.pmOwnerPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),u.jsx("button",{onClick:o,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),u.jsx("button",{onClick:s,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"2xl:col-span-2 space-y-6",children:[u.jsxs("div",{className:"glass-panel p-6 rounded",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(ys,{className:"text-[#E7FE55]",size:18}),"Portfolio Evolution"]}),u.jsx("div",{className:"flex gap-2",children:["1D","1W","1M","1Y"].map(X=>{const se=$[X],ae=X===F;return u.jsx("button",{disabled:!se,onClick:()=>se&&z(X),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${se?ae?"bg-[#E7FE55]/15 text-[#E7FE55] border border-[#E7FE55]/30":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]":"text-[#3a3a40] cursor-not-allowed"}`,children:X},X)})})]}),u.jsx("div",{className:"h-[250px] lg:h-[300px] w-full",children:u.jsx(i1,{width:"100%",height:"100%",children:u.jsxs(qKe,{data:G.length>0?G:[],children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.25}),u.jsx("stop",{offset:"50%",stopColor:"#E7FE55",stopOpacity:.08}),u.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),u.jsx(g1,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),u.jsx(x1,{dataKey:"date",stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),u.jsx(v1,{stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1,tickFormatter:X=>`$${X}`,width:50}),u.jsx(vk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#e4e5e9"},labelStyle:{color:"#747580"},itemSorter:X=>({value:0,solValue:1,hlValue:2,pmValue:3})[X.dataKey]??10,formatter:(X,se)=>[`$${X.toFixed(2)}`,se==="value"?"Total Value":se==="solValue"?"SOL Value":se==="hlValue"?"HL Value":se==="pmValue"?"PM Value":se]}),u.jsx(ZC,{type:"monotone",dataKey:"value",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorValue)"}),u.jsx(qT,{type:"monotone",dataKey:"solValue",stroke:"#9b87f5",strokeWidth:1.5,dot:!1}),u.jsx(qT,{type:"monotone",dataKey:"hlValue",stroke:"#34d399",strokeWidth:1.5,dot:!1}),u.jsx(qT,{type:"monotone",dataKey:"pmValue",stroke:"#60a5fa",strokeWidth:1.5,dot:!1})]})})}),u.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-[11px] text-[#747580]",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#E7FE55]"}),u.jsx("span",{children:"Total Value"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),u.jsx("span",{children:"SOL Value"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34d399]"}),u.jsx("span",{children:"HL Value"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#60a5fa]"}),u.jsx("span",{children:"PM Value"})]})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(dn,{className:"text-[#E7FE55]",size:18}),"Open Trading"]}),u.jsxs("button",{onClick:()=>x(be.HYPERLIQUID),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[u.jsx(dn,{size:12}),"Details"]})]}),!t.hlPositions||t.hlPositions.length===0?u.jsx("div",{className:"text-center py-8 text-[#747580] text-sm bg-[#14151a] rounded border border-[#232328]",children:"No open positions. Start trading to see your portfolio grow!"}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),u.jsx("th",{className:"py-3 font-medium",children:"Size"}),u.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Mark Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),u.jsx("th",{className:"py-3 pr-4 font-medium text-right",children:"Unrealized PnL"})]})}),u.jsx("tbody",{className:"text-sm",children:t.hlPositions.map((X,se)=>{const ae=parseFloat(X.position.szi),Te=parseFloat(X.position.entryPx),oe=a[X.position.coin]||Te,ve=parseFloat(X.position.unrealizedPnl),ke=X.position.leverage.value,pe=ae>0,ze=pe?Te*(1-.9/ke):Te*(1+.9/ke);return u.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[u.jsx("td",{className:"py-3 pl-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`w-1 h-6 rounded-full ${pe?"bg-[#34d399]":"bg-red-500"}`}),u.jsx("span",{className:"font-semibold text-white",children:X.position.coin}),u.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded uppercase tracking-wider ${pe?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:pe?"LONG":"SHORT"})]})}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:Math.abs(ae).toFixed(4)}),u.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",Te.toFixed(4)]}),u.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",oe.toFixed(4)]}),u.jsxs("td",{className:"py-3 text-orange-400/80",children:["$",ze.toFixed(4)]}),u.jsxs("td",{className:"py-3 text-[#747580]",children:[ke,"x"]}),u.jsxs("td",{className:`py-3 pr-4 text-right font-medium ${ve>=0?"text-[#34d399]":"text-red-400"}`,children:[ve>=0?"+":"",ve.toFixed(2)," USDC"]})]},se)})})]})})]}),u.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(Qr,{className:"text-[#E7FE55]",size:18}),"Open Tasks"]}),u.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[d.filter(X=>X.status==="active").length," Active"]}),u.jsxs("button",{onClick:()=>x(be.SCHEDULER),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[u.jsx(Qr,{size:12}),"Details"]})]}),u.jsx("div",{className:"flex-1 flex flex-col",children:d.filter(X=>X.status==="active").length===0?u.jsx("div",{className:"text-center py-8 text-[#747580] text-sm my-auto bg-[#14151a] rounded border border-[#232328]",children:"No active tasks scheduled. Ask the AI to schedule a swap or transfer."}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-3",children:d.filter(X=>X.status==="active").slice(H*A,(H+1)*A).map(X=>u.jsxs("div",{className:"bg-[#14151a] p-4 rounded border border-[#232328] flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-sm font-medium text-white flex items-center gap-2",children:[X.type,X.type==="HL_ORDER"&&u.jsx(GJ,{network:"hyperliquid"}),X.condition&&u.jsx("span",{className:"text-[10px] text-yellow-500",children:"(Condition)"})]}),u.jsx("div",{className:"text-[11px] text-[#747580]",children:X.condition?`${X.condition.indicator.toUpperCase()} ${X.condition.operator} ${X.condition.value} (${X.condition.symbol})`:`Executes in ${Math.max(0,Math.round(((X.executeAt||0)-Date.now())/6e4))} mins`})]})]}),u.jsxs("div",{className:"text-[10px] font-mono text-[#747580]",children:["ID: ",X.id.slice(-4)]})]},X.id))}),u.jsx("div",{className:"mt-auto",children:d.filter(X=>X.status==="active").length>A&&u.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[u.jsx("button",{onClick:()=>U(Math.max(0,H-1)),disabled:H===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${H===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:u.jsx(Dw,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",H+1," of ",Math.ceil(d.filter(X=>X.status==="active").length/A)]}),u.jsx("button",{onClick:()=>U(Math.min(Math.ceil(d.filter(X=>X.status==="active").length/A)-1,H+1)),disabled:H>=Math.ceil(d.filter(X=>X.status==="active").length/A)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${H>=Math.ceil(d.filter(X=>X.status==="active").length/A)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:u.jsx(rl,{size:16})})]})})]})})]})]}),u.jsxs("div",{className:"space-y-6 flex flex-col",children:[u.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-white",children:"Asset Allocation"}),u.jsxs("div",{className:"flex gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[u.jsx("button",{onClick:()=>K("bar"),className:`p-1.5 rounded transition-colors ${q==="bar"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Bar View",children:u.jsx(a2e,{size:14})}),u.jsx("button",{onClick:()=>K("pie"),className:`p-1.5 rounded transition-colors ${q==="pie"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Pie View",children:u.jsx(Lw,{size:14})})]})]}),u.jsx("div",{className:"h-[180px] w-full relative flex-shrink-0",children:u.jsx(i1,{width:"100%",height:"100%",children:q==="pie"?u.jsxs(bfe,{children:[u.jsx(SB,{data:h.data,cx:"50%",cy:"50%",innerRadius:45,outerRadius:V!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:(X,se)=>M(se),onMouseLeave:()=>M(void 0),animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:h.data.map((X,se)=>u.jsx(bv,{fill:X.color,stroke:V===se?X.color:"transparent",strokeWidth:V===se?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:V===se?`brightness(1.2) drop-shadow(0 0 8px ${X.color})`:"brightness(1)",transform:V===se?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${se}`))}),V!==void 0&&h.data[V]&&u.jsxs("g",{children:[u.jsx("text",{x:"50%",y:"42%",textAnchor:"middle",fill:"#fff",fontSize:12,fontWeight:"bold",children:h.data[V].symbol}),u.jsxs("text",{x:"50%",y:"54%",textAnchor:"middle",fill:h.data[V].color,fontSize:15,fontWeight:"bold",fontFamily:"monospace",children:["$",h.data[V].value.toFixed(2)]}),u.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[(h.data[V].value/(h.totalValue||1)*100).toFixed(1),"%"]})]}),V===void 0&&u.jsxs("g",{children:[u.jsx("text",{x:"50%",y:"46%",textAnchor:"middle",fill:"#747580",fontSize:10,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"Total"}),u.jsxs("text",{x:"50%",y:"58%",textAnchor:"middle",fill:"#fff",fontSize:18,fontWeight:"600",children:["$",h.totalValue.toFixed(0)]})]})]}):u.jsxs(IKe,{data:[h.data.reduce((X,se)=>({...X,[se.symbol]:se.value}),{name:"Total"})],layout:"vertical",margin:{top:20,right:30,left:20,bottom:5},children:[u.jsx(g1,{strokeDasharray:"3 3",horizontal:!0,vertical:!0,stroke:"#232328"}),u.jsx(x1,{type:"number",tickFormatter:X=>`$${X}`,tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),u.jsx(v1,{type:"category",dataKey:"name",hide:!0}),u.jsx(vk,{cursor:{fill:"transparent"},content:({active:X,payload:se})=>{if(!X||!se||!se.length||!te)return null;const ae=se.find(Te=>Te.dataKey===te);return ae?u.jsxs("div",{className:"bg-[#14151a] border border-[#232328] p-2 rounded shadow-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:ae.color}}),u.jsx("span",{className:"text-[#a0a1a8] font-semibold text-[11px]",children:ae.name})]}),u.jsxs("p",{className:"text-white font-mono text-sm",children:["$",Number(ae.value).toFixed(2)]})]}):null}}),h.data.map((X,se)=>u.jsx(rfe,{dataKey:X.symbol,stackId:"a",fill:X.color,onMouseEnter:()=>Y(X.symbol),onMouseLeave:()=>Y(null),radius:se===0&&h.data.length===1?[4,4,4,4]:se===0?[4,0,0,4]:se===h.data.length-1?[0,4,4,0]:[0,0,0,0],barSize:40},X.symbol))]})})}),u.jsx("div",{className:"mt-4 space-y-1 flex-1 overflow-y-auto pr-2 custom-scrollbar",children:h.data.map((X,se)=>u.jsxs("div",{className:`flex items-center justify-between text-sm p-2 rounded-lg transition-all cursor-pointer ${V===se?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>M(se),onMouseLeave:()=>M(void 0),children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 transition-transform",style:{backgroundColor:X.color,transform:V===se?"scale(1.3)":"scale(1)",boxShadow:V===se?`0 0 8px ${X.color}`:"none"}}),u.jsx("span",{className:`truncate max-w-[80px] sm:max-w-[100px] text-xs transition-colors ${V===se?"text-white":"text-[#a0a1a8]"}`,children:X.symbol}),X.network&&u.jsx("span",{className:`text-[9px] px-1 rounded uppercase tracking-wider ${X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":X.network==="hyperliquid"?"bg-[#34d399]/15 text-[#34d399]":"bg-[#60a5fa]/15 text-[#60a5fa]"}`,children:X.network==="solana"?"SOL":X.network==="hyperliquid"?"HL":"PM"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:`text-xs font-mono transition-colors ${V===se?"text-white":"text-[#747580]"}`,children:["$",X.value.toFixed(2)]}),u.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:X.color},children:[(X.value/(h.totalValue||1)*100).toFixed(1),"%"]})]})]},se))})]}),u.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-white",children:"Recent Activity"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{N(T==="solana"?"all":"solana"),j(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${T==="solana"?"bg-[#9b87f5] text-white":"bg-[#9b87f5]/15 text-[#9b87f5] hover:bg-[#9b87f5]/25"}`,children:"SOL"}),u.jsx("button",{onClick:()=>{N(T==="hyperliquid"?"all":"hyperliquid"),j(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${T==="hyperliquid"?"bg-[#34d399] text-[#0f1015]":"bg-[#34d399]/15 text-[#34d399] hover:bg-[#34d399]/25"}`,children:"HL"})]})]}),u.jsx("div",{className:"flex-1 flex flex-col",children:m.filter(X=>T==="all"||X.network===T).length===0?u.jsx("div",{className:"text-center text-[#747580] text-sm py-4 my-auto bg-[#14151a] rounded border border-[#232328]",children:"No recent activity"}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-3",children:m.filter(X=>T==="all"||X.network===T).slice(O*_,(O+1)*_).map((X,se)=>u.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328] last:border-0",children:[u.jsx("div",{className:`mt-1 p-1.5 rounded-full ${X.status==="failed"?"bg-red-500/15 text-red-400":X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":"bg-[#34d399]/15 text-[#34d399]"}`,children:X.status==="failed"?u.jsx(KTe,{size:14}):u.jsx(dre,{size:14})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-sm font-medium ${X.status==="failed"?"text-red-400":X.network==="solana"?"text-[#9b87f5]":"text-[#34d399]"}`,children:X.type}),u.jsx(GJ,{network:X.network})]}),u.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:X.time})]}),u.jsx("div",{className:"text-[11px] text-[#747580] truncate mt-0.5",children:X.desc}),X.signature&&W(X)&&u.jsxs("a",{href:W(X),target:"_blank",rel:"noopener noreferrer",className:`text-[10px] ${X.network==="solana"?"text-[#9b87f5] hover:text-[#a78bfa]":"text-[#34d399] hover:text-[#4ade80]"} flex items-center gap-1 mt-1`,children:[X.network==="solana"?"View on Solscan Explorer":"View on HL Explorer"," ",u.jsx(gd,{size:10})]})]})]},se))}),u.jsx("div",{className:"mt-auto",children:m.filter(X=>T==="all"||X.network===T).length>_&&u.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[u.jsx("button",{onClick:()=>j(Math.max(0,O-1)),disabled:O===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${O===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:u.jsx(Dw,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",O+1," of ",Math.ceil(m.filter(X=>T==="all"||X.network===T).length/_)]}),u.jsx("button",{onClick:()=>j(Math.min(Math.ceil(m.filter(X=>T==="all"||X.network===T).length/_)-1,O+1)),disabled:O>=Math.ceil(m.filter(X=>T==="all"||X.network===T).length/_)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${O>=Math.ceil(m.filter(X=>T==="all"||X.network===T).length/_)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:u.jsx(rl,{size:16})})]})})]})})]})]})]})]})},YKe=({vault:t,password:e,setPassword:n,withdrawAmount:r,setWithdrawAmount:i,withdrawNetwork:s,setWithdrawNetwork:o,isImporting:a,setIsImporting:l,importKey:c,setImportKey:d,createVault:h,unlockVault:m,requestAirdrop:g,handleWithdraw:v,handleWithdrawHL:x,handleWithdrawPM:b,importVault:w,addNotification:T,isImportingSolana:N,setIsImportingSolana:O,isImportingHyperliquid:j,setIsImportingHyperliquid:_,isImportingPolymarket:F,setIsImportingPolymarket:z,solanaPassword:D,setSolanaPassword:$,hyperliquidPassword:G,setHyperliquidPassword:H,polymarketPassword:U,setPolymarketPassword:A,solanaImportKey:I,setSolanaImportKey:L,hlImportKey:q,setHLImportKey:K,pmImportKey:te,setPMImportKey:Y,createSolanaVault:V,createHyperliquidVault:M,createPolymarketVault:P,importSolanaVault:W,importHyperliquidVault:X,importPolymarketVault:se,setActiveTab:ae,activeVaultTab:Te,setActiveVaultTab:oe})=>{var it,st,ut,Je;const ve=S.useMemo(()=>{const Le=(t.solBalance||0)*Cc.SOL,et=t.hlBalance||0,Ut=t.pmBalance||0;return Le+et+Ut},[t.solBalance,t.hlBalance,t.pmBalance]),ke=S.useMemo(()=>{const Le=(t.solBalance||0)*Cc.SOL,et=t.hlBalance||0,Ut=t.pmBalance||0,Ie=Le+et+Ut;return{solana:{value:Le,percent:Ie>0?Le/Ie*100:0},hyperliquid:{value:et,percent:Ie>0?et/Ie*100:0},polymarket:{value:Ut,percent:Ie>0?Ut/Ie*100:0},total:Ie}},[t.solBalance,t.hlBalance,t.pmBalance]);!t.publicKey&&!t.hlPublicKey||t.isUnlocked;const pe={solana:"#E7FE55",hyperliquid:"#E7FE55",polymarket:"#60a5fa"},ze=()=>{const{solana:Le,hyperliquid:et,polymarket:Ut,total:Ie}=ke,[qe,yt]=S.useState(void 0),ht=S.useMemo(()=>Ie===0?[]:[{name:"Solana",value:Le.value,percent:Le.percent,color:pe.solana},{name:"Hyperliquid",value:et.value,percent:et.percent,color:pe.hyperliquid},{name:"Polymarket",value:Ut.value,percent:Ut.percent,color:pe.polymarket}].filter(Z=>Z.value>0),[Le,et,Ut,Ie]);if(Ie===0)return u.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[u.jsx("div",{className:"w-32 h-32 rounded-full bg-[#1a1b21] border-2 border-dashed border-[#232328] flex items-center justify-center",children:u.jsx(Lw,{size:32,className:"text-[#747580]"})}),u.jsx("p",{className:"text-[#747580] text-xs mt-4",children:"No assets"})]});const ie=(Z,ue)=>{yt(ue)},J=()=>{yt(void 0)};return u.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full gap-4",children:[u.jsx("div",{className:"w-full h-[180px] relative",children:u.jsx(i1,{width:"100%",height:"100%",children:u.jsxs(bfe,{children:[u.jsxs("defs",{children:[u.jsxs("linearGradient",{id:"solanaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#E7FE55",stopOpacity:.8}),u.jsx("stop",{offset:"100%",stopColor:"#E7FE55",stopOpacity:.4})]}),u.jsxs("linearGradient",{id:"hyperliquidGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#f3ffad"}),u.jsx("stop",{offset:"100%",stopColor:"#E7FE55"})]}),u.jsxs("linearGradient",{id:"polymarketGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#7db4fb"}),u.jsx("stop",{offset:"100%",stopColor:"#60a5fa"})]})]}),u.jsx(SB,{data:ht,cx:"50%",cy:"50%",innerRadius:45,outerRadius:qe!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:ie,onMouseLeave:J,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:ht.map((Z,ue)=>u.jsx(bv,{fill:Z.color,stroke:qe===ue?Z.color:"transparent",strokeWidth:qe===ue?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:qe===ue?`brightness(1.2) drop-shadow(0 0 8px ${Z.color})`:"brightness(1)",transform:qe===ue?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${ue}`))}),qe!==void 0&&ht[qe]&&u.jsxs("g",{children:[u.jsx("text",{x:"50%",y:"45%",textAnchor:"middle",fill:"#fff",fontSize:13,fontWeight:"bold",children:ht[qe].name}),u.jsxs("text",{x:"50%",y:"55%",textAnchor:"middle",fill:ht[qe].color,fontSize:16,fontWeight:"bold",fontFamily:"monospace",children:["$",ht[qe].value.toFixed(2)]}),u.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[ht[qe].percent.toFixed(1),"%"]})]})]})})}),u.jsx("div",{className:"flex flex-col gap-2 w-full",children:ht.map((Z,ue)=>u.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg transition-all cursor-pointer ${qe===ue?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>yt(ue),onMouseLeave:()=>yt(void 0),children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 rounded-full transition-transform",style:{backgroundColor:Z.color,transform:qe===ue?"scale(1.3)":"scale(1)",boxShadow:qe===ue?`0 0 8px ${Z.color}`:"none"}}),u.jsx("span",{className:`text-xs transition-colors ${qe===ue?"text-white":"text-[#747580]"}`,children:Z.name})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:`text-xs font-mono transition-colors ${qe===ue?"text-white":"text-[#747580]"}`,children:["$",Z.value.toFixed(2)]}),u.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:Z.color},children:[Z.percent.toFixed(1),"%"]})]})]},Z.name))})]})},Me=u.jsxs("div",{className:"glass-panel p-4 flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#E7FE55] mb-3",children:[u.jsx(m2,{size:14}),"Fast Withdraw"]}),u.jsxs("div",{className:"flex gap-1 mb-3 bg-[#0f1015] p-1 rounded",children:[u.jsx("button",{onClick:()=>o("SOL"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="SOL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"SOL"}),u.jsx("button",{onClick:()=>o("HYPE"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="HYPE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"HYPE"}),u.jsx("button",{onClick:()=>o("POLY"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="POLY"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"POLY"})]}),u.jsxs("div",{className:"flex-1 flex flex-col justify-end space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"swiss-label block mb-1.5",children:"Amount"}),u.jsxs("div",{className:"flex items-center relative",children:[u.jsx("input",{type:"number",value:r,onChange:Le=>i(Le.target.value),className:"w-full bg-[#0f1015] border border-[#232328] rounded pl-3 pr-12 py-2.5 text-sm text-white focus:ring-1 outline-none transition-all focus:ring-[#E7FE55]",placeholder:"0.00"}),u.jsx("button",{onClick:()=>{i(s==="SOL"?Math.max(0,t.solBalance-.005).toFixed(4):s==="HYPE"?Math.max(0,(t.hlBalance||0)-1).toFixed(2):Math.max(0,t.pmBalance||0).toFixed(2))},className:"absolute right-2 text-[9px] font-semibold px-1.5 py-0.5 rounded bg-[#E7FE55]/20 text-[#E7FE55]",children:"MAX"})]})]}),u.jsxs("button",{onClick:s==="SOL"?v:s==="HYPE"?x:b,disabled:s==="SOL"&&!t.publicKey||s==="HYPE"&&!t.hlPublicKey||s==="POLY"&&!t.pmPublicKey,className:`w-full font-semibold py-2.5 rounded transition-all flex items-center justify-center gap-2 text-xs ${s==="SOL"&&t.publicKey||s==="HYPE"&&t.hlPublicKey||s==="POLY"&&t.pmPublicKey?"bg-[#E7FE55] hover:brightness-110 text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed"}`,children:[u.jsx(m2,{size:14}),s==="SOL"?"Withdraw SOL":"Withdraw USDC"]})]})]}),he=u.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[u.jsxs("div",{className:"glass-panel glass-panel-solana p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5] mb-3",children:[u.jsx("img",{src:bh[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"}),"Solana Vault"]}),t.publicKey?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[u.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.publicKey}),u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.publicKey),T("Copied!")},className:"text-[#747580] hover:text-white",children:u.jsx(Em,{size:12})})]}),u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("div",{className:"swiss-label",children:"Balance"}),u.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[t.solBalance.toFixed(4)," ",u.jsx("span",{className:"text-xs text-[#747580]",children:"SOL"})]})]}),u.jsxs("div",{className:"text-xs text-[#9b87f5] font-mono",children:[" $",(t.solBalance*Cc.SOL).toFixed(2)]})]})]}):u.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx("p",{className:"text-xs text-[#747580]",children:"No Solana wallet found."}),u.jsx("input",{type:"password",value:D,onChange:Le=>$(Le.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none",placeholder:"Password..."}),N&&u.jsx("input",{type:"password",value:I,onChange:Le=>L(Le.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none font-mono",placeholder:"Private Key..."}),u.jsx("div",{className:"flex gap-2",children:N?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:W,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),u.jsx("button",{onClick:()=>O(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:V,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[u.jsx(sr,{size:12})," New"]}),u.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[u.jsx(Qs,{size:12})," Import"]})]})})]})]}),t.publicKey&&u.jsxs("div",{className:"glass-panel glass-panel-solana flex flex-col overflow-hidden flex-1",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5]",children:[u.jsx(ql,{size:12})," Solana Assets"]}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((it=t.assets)==null?void 0:it.filter(Le=>!Le.isNft&&Le.symbol!=="SOL").length)||0," Assets"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:u.jsxs("table",{className:"swiss-table w-full",children:[u.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4",children:"Asset"}),u.jsx("th",{className:"px-4 text-right",children:"Balance"}),u.jsx("th",{className:"px-4 text-right",children:"Value"})]})}),u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{className:"px-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center",children:u.jsx("img",{src:bh[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:"SOL"}),u.jsx("span",{className:"text-[9px] text-[#747580]",children:"Native"})]})]})}),u.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:t.solBalance.toFixed(4)}),u.jsxs("td",{className:"px-4 text-right font-mono text-xs text-[#9b87f5]",children:["$",(t.solBalance*Cc.SOL).toFixed(2)]})]}),t.assets&&t.assets.filter(Le=>!Le.isNft&&Le.symbol!=="SOL").length>0?t.assets.filter(Le=>!Le.isNft&&Le.symbol!=="SOL").map((Le,et)=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center text-[10px] font-bold text-[#747580] border border-[#232328]",children:Le.symbol[0]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:Le.symbol}),u.jsx("span",{className:"text-[9px] text-[#747580] truncate max-w-[60px]",children:Le.name})]})]})}),u.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:(parseFloat(Le.amount)/Math.pow(10,Le.decimals)).toFixed(4)}),u.jsx("td",{className:"px-4 text-right font-mono text-xs text-[#34d399]",children:Le.symbol!=="UNKNOWN"?`$${(parseFloat(Le.amount)/Math.pow(10,Le.decimals)*(Cc[Le.symbol]||0)).toFixed(2)}`:"-"})]},et)):null]})]})})]})]}),_e=u.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[u.jsxs("div",{className:"glass-panel glass-panel-hyperliquid p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399] mb-3",children:[u.jsx(dn,{size:14}),"Hyperliquid Vault"]}),t.hlPublicKey?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[u.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.hlPublicKey}),u.jsx("button",{onClick:()=>{t.hlPublicKey&&(navigator.clipboard.writeText(t.hlPublicKey),T("Copied!"))},className:"text-[#747580] hover:text-white",children:u.jsx(Em,{size:12})})]}),u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("div",{className:"swiss-label",children:"Balance"}),u.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((st=t.hlBalance)==null?void 0:st.toFixed(2))||"0.00"," ",u.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),u.jsx("div",{className:"text-xs text-[#E7FE55] font-mono",children:"Testnet"})]})]}):u.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx("p",{className:"text-xs text-[#747580]",children:"No Hyperliquid wallet found."}),u.jsx("input",{type:"password",value:G,onChange:Le=>H(Le.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none",placeholder:"Password..."}),j&&u.jsx("input",{type:"password",value:q,onChange:Le=>K(Le.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),u.jsx("div",{className:"flex gap-2",children:j?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:X,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded",children:"Confirm"}),u.jsx("button",{onClick:()=>_(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:M,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[u.jsx(sr,{size:12})," New"]}),u.jsxs("button",{onClick:()=>_(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[u.jsx(Qs,{size:12})," Import"]})]})})]})]}),t.hlPublicKey&&u.jsxs("div",{className:"glass-panel glass-panel-hyperliquid flex flex-col overflow-hidden flex-1",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399]",children:[u.jsx(dn,{size:12})," Active Positions"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((ut=t.hlPositions)==null?void 0:ut.filter(Le=>parseFloat(Le.position.szi)!==0).length)||0," Open"]}),u.jsxs("button",{onClick:()=>ae(be.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/15 hover:bg-[#E7FE55]/25 text-[#E7FE55] border border-[#E7FE55]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[u.jsx(dn,{size:10}),"Details"]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:u.jsxs("table",{className:"swiss-table w-full",children:[u.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3",children:"Ticker"}),u.jsx("th",{className:"px-3",children:"Side"}),u.jsx("th",{className:"px-3 text-right",children:"Size"}),u.jsx("th",{className:"px-3 text-right",children:"PnL"})]})}),u.jsx("tbody",{children:t.hlPositions&&t.hlPositions.filter(Le=>parseFloat(Le.position.szi)!==0).length>0?t.hlPositions.filter(Le=>parseFloat(Le.position.szi)!==0).map((Le,et)=>{const Ut=parseFloat(Le.position.szi),Ie=Ut>0,qe=parseFloat(Le.position.unrealizedPnl||"0");return u.jsxs("tr",{children:[u.jsx("td",{className:"px-3",children:u.jsx("span",{className:"text-xs font-semibold text-white",children:Le.position.coin})}),u.jsx("td",{className:"px-3",children:u.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${Ie?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:Ie?"LONG":"SHORT"})}),u.jsx("td",{className:"px-3 text-right font-mono text-xs text-slate-300",children:Math.abs(Ut).toFixed(4)}),u.jsxs("td",{className:`px-3 text-right font-mono text-xs font-semibold ${qe>=0?"text-[#34d399]":"text-red-400"}`,children:[qe>=0?"+":"",qe.toFixed(2)]})]},`hl-${et}`)}):u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-[#747580] text-xs italic",children:"No active positions."})})})]})})]})]}),We=u.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[u.jsxs("div",{className:"glass-panel glass-panel-polymarket p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa] mb-3",children:[u.jsx(Bl,{size:14}),"Polymarket Vault"]}),t.pmPublicKey?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[u.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.pmPublicKey}),u.jsx("button",{onClick:()=>{t.pmPublicKey&&(navigator.clipboard.writeText(t.pmPublicKey),T("Copied!"))},className:"text-[#747580] hover:text-white",children:u.jsx(Em,{size:12})})]}),u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("div",{className:"swiss-label",children:"Balance"}),u.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((Je=t.pmBalance)==null?void 0:Je.toFixed(2))||"0.00"," ",u.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),u.jsx("div",{className:"text-xs text-[#60a5fa] font-mono",children:"Polygon"})]})]}):u.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx("p",{className:"text-xs text-[#747580]",children:"No Polymarket wallet found."}),u.jsx("input",{type:"password",value:U,onChange:Le=>A(Le.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none",placeholder:"Password..."}),F&&u.jsx("input",{type:"password",value:te,onChange:Le=>Y(Le.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),u.jsx("div",{className:"flex gap-2",children:F?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:se,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),u.jsx("button",{onClick:()=>z(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:P,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[u.jsx(sr,{size:12})," New"]}),u.jsxs("button",{onClick:()=>z(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[u.jsx(Qs,{size:12})," Import"]})]})})]})]}),t.pmPublicKey&&u.jsxs("div",{className:"glass-panel glass-panel-polymarket flex flex-col overflow-hidden flex-1",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa]",children:[u.jsx(Bl,{size:12})," Market Positions"]}),u.jsxs("button",{onClick:()=>ae(be.POLYMARKET_DASHBOARD),className:"text-[10px] bg-[#60a5fa]/15 hover:bg-[#60a5fa]/25 text-[#60a5fa] border border-[#60a5fa]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[u.jsx(Bl,{size:10}),"Details"]})]}),u.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:u.jsx("p",{className:"text-xs text-[#747580] text-center",children:"View your Polymarket positions in the Polymarket Dealer dashboard."})})]})]}),Ke=u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[u.jsxs("div",{className:"glass-panel p-4 flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-white",children:[u.jsx(Lw,{size:14}),"Asset Allocation"]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:"Net Worth"}),u.jsxs("div",{className:"text-lg font-bold font-mono text-white",children:["$",ve.toFixed(2)]})]})]}),u.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[200px]",children:u.jsx(ze,{})})]}),Me]});return u.jsx("div",{className:"h-full flex flex-col gap-6 overflow-y-auto custom-scrollbar p-1",children:!t.publicKey&&!t.hlPublicKey?u.jsxs(_t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto relative z-10 flex flex-col items-center justify-center flex-1",children:[u.jsxs(_t.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"w-20 h-20 glass-panel rounded-full flex items-center justify-center mb-6 border-[#E7FE55]/30 relative group",children:[u.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/5 rounded-full blur-xl group-hover:bg-[#E7FE55]/10 transition-colors"}),u.jsx(yd,{size:32,className:"text-[#E7FE55] relative z-10"})]}),u.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Configure Your Vault"}),u.jsx("p",{className:"text-[#747580] text-center mb-8 text-sm",children:"Securely manage your assets across multiple networks."}),u.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"glass-panel glass-panel-solana p-6 space-y-4 border-[#9b87f5]/20 transition-transform duration-200 hover:-translate-y-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-[#9b87f5]/10 rounded-lg flex items-center justify-center border border-[#9b87f5]/20",children:u.jsx("img",{src:bh[0].logoURI,alt:"SOL",className:"w-5 h-5 rounded-full"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold",children:"Solana"}),u.jsx("span",{className:"text-[10px] text-[#9b87f5] uppercase tracking-widest font-bold",children:"Devnet"})]})]}),u.jsx("input",{type:"password",value:D,onChange:Le=>$(Le.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),N&&u.jsx("input",{type:"password",value:I,onChange:Le=>L(Le.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (Base58)"}),u.jsx("div",{className:"flex gap-2",children:N?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:W,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[u.jsx(Qs,{size:14})," Import"]}),u.jsx("button",{onClick:()=>O(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:V,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[u.jsx(sr,{size:14})," Create"]}),u.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[u.jsx(Qs,{size:14})," Import"]})]})})]}),u.jsxs("div",{className:"glass-panel p-6 space-y-4 border-[#34d399]/20 transition-transform duration-200 hover:-translate-y-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-[#34d399]/10 rounded-lg flex items-center justify-center border border-[#34d399]/20",children:u.jsx(dn,{size:20,className:"text-[#34d399]"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold",children:"Hyperliquid"}),u.jsx("span",{className:"text-[10px] text-[#34d399] uppercase tracking-widest font-bold",children:"Testnet"})]})]}),u.jsx("input",{type:"password",value:G,onChange:Le=>H(Le.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),j&&u.jsx("input",{type:"password",value:q,onChange:Le=>K(Le.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),u.jsx("div",{className:"flex gap-2",children:j?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:X,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[u.jsx(Qs,{size:14})," Import"]}),u.jsx("button",{onClick:()=>_(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:M,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[u.jsx(sr,{size:14})," Create"]}),u.jsxs("button",{onClick:()=>_(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[u.jsx(Qs,{size:14})," Import"]})]})})]}),u.jsxs("div",{className:"glass-panel glass-panel-polymarket p-6 space-y-4 border-[#60a5fa]/20 transition-transform duration-200 hover:-translate-y-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-[#60a5fa]/10 rounded-lg flex items-center justify-center border border-[#60a5fa]/20",children:u.jsx(Bl,{size:20,className:"text-[#60a5fa]"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold",children:"Polymarket"}),u.jsx("span",{className:"text-[10px] text-[#60a5fa] uppercase tracking-widest font-bold",children:"Polygon"})]})]}),u.jsx("input",{type:"password",value:U,onChange:Le=>A(Le.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),F&&u.jsx("input",{type:"password",value:te,onChange:Le=>Y(Le.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),u.jsx("div",{className:"flex gap-2",children:F?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:se,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[u.jsx(Qs,{size:14})," Import"]}),u.jsx("button",{onClick:()=>z(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:P,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[u.jsx(sr,{size:14})," Create"]}),u.jsxs("button",{onClick:()=>z(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[u.jsx(Qs,{size:14})," Import"]})]})})]})]}),u.jsx("p",{className:"text-xs text-[#747580] mt-8 text-center max-w-sm",children:"Wallets are stored locally and encrypted. Never share your private keys or password."})]}):t.isUnlocked?u.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[Te==="main"&&Ke,Te==="solana"&&he,Te==="hyperliquid"&&_e,Te==="polymarket"&&We]}):u.jsxs(_t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"max-w-md mx-auto relative z-10 flex flex-col items-center justify-center min-h-[calc(100vh-120px)] w-full",children:[u.jsxs(_t.div,{animate:{rotate:[0,-10,10,-10,10,0]},transition:{delay:.5,duration:.5,ease:"easeInOut"},className:"w-24 h-24 glass-panel rounded-full flex items-center justify-center mb-8 border-[#E7FE55]/30 relative",children:[u.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/10 rounded-full blur-2xl animate-pulse"}),u.jsx(yd,{size:40,className:"text-[#E7FE55] relative z-10"})]}),u.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Vault Locked"}),u.jsx("p",{className:"text-[#747580] text-center mb-10 text-sm",children:"Authentication required to access your assets."}),u.jsxs("div",{className:"w-full glass-panel p-8 space-y-6 border-[#E7FE55]/10 shadow-2xl",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"swiss-label px-1",children:"Security Password"}),u.jsx("input",{type:"password",value:e,onChange:Le=>n(Le.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-md px-4 py-4 text-white focus:ring-1 focus:ring-[#E7FE55]/50 outline-none transition-all placeholder:text-[#333540] text-lg font-mono",placeholder:"",onKeyDown:Le=>Le.key==="Enter"&&m()})]}),u.jsxs("button",{onClick:m,className:"w-full bg-[#E7FE55] hover:brightness-110 active:scale-[0.98] text-black font-bold py-4 rounded-md transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-widest",children:[u.jsx(mre,{size:18})," Unlock Vault"]})]})]})})};function JKe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const XKe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,QKe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ZKe={};function KJ(t,e){return(ZKe.jsx?QKe:XKe).test(t)}const eWe=/[ \t\n\f\r]/g;function tWe(t){return typeof t=="object"?t.type==="text"?WJ(t.value):!1:WJ(t)}function WJ(t){return t.replace(eWe,"")===""}class IE{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}IE.prototype.normal={};IE.prototype.property={};IE.prototype.space=void 0;function Efe(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new IE(n,r,e)}function qL(t){return t.toLowerCase()}class Lo{constructor(e,n){this.attribute=n,this.property=e}}Lo.prototype.attribute="";Lo.prototype.booleanish=!1;Lo.prototype.boolean=!1;Lo.prototype.commaOrSpaceSeparated=!1;Lo.prototype.commaSeparated=!1;Lo.prototype.defined=!1;Lo.prototype.mustUseProperty=!1;Lo.prototype.number=!1;Lo.prototype.overloadedBoolean=!1;Lo.prototype.property="";Lo.prototype.spaceSeparated=!1;Lo.prototype.space=void 0;let nWe=0;const un=l0(),hi=l0(),GL=l0(),dt=l0(),mr=l0(),gy=l0(),Yo=l0();function l0(){return 2**++nWe}const KL=Object.freeze(Object.defineProperty({__proto__:null,boolean:un,booleanish:hi,commaOrSpaceSeparated:Yo,commaSeparated:gy,number:dt,overloadedBoolean:GL,spaceSeparated:mr},Symbol.toStringTag,{value:"Module"})),rO=Object.keys(KL);class MB extends Lo{constructor(e,n,r,i){let s=-1;if(super(e,n),YJ(this,"space",i),typeof r=="number")for(;++s<rO.length;){const o=rO[s];YJ(this,rO[s],(r&KL[o])===KL[o])}}}MB.prototype.defined=!0;function YJ(t,e,n){n&&(t[e]=n)}function wv(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new MB(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[qL(r)]=r,n[qL(s.attribute)]=r}return new IE(e,n,t.space)}const Sfe=wv({properties:{ariaActiveDescendant:null,ariaAtomic:hi,ariaAutoComplete:null,ariaBusy:hi,ariaChecked:hi,ariaColCount:dt,ariaColIndex:dt,ariaColSpan:dt,ariaControls:mr,ariaCurrent:null,ariaDescribedBy:mr,ariaDetails:null,ariaDisabled:hi,ariaDropEffect:mr,ariaErrorMessage:null,ariaExpanded:hi,ariaFlowTo:mr,ariaGrabbed:hi,ariaHasPopup:null,ariaHidden:hi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:mr,ariaLevel:dt,ariaLive:null,ariaModal:hi,ariaMultiLine:hi,ariaMultiSelectable:hi,ariaOrientation:null,ariaOwns:mr,ariaPlaceholder:null,ariaPosInSet:dt,ariaPressed:hi,ariaReadOnly:hi,ariaRelevant:null,ariaRequired:hi,ariaRoleDescription:mr,ariaRowCount:dt,ariaRowIndex:dt,ariaRowSpan:dt,ariaSelected:hi,ariaSetSize:dt,ariaSort:null,ariaValueMax:dt,ariaValueMin:dt,ariaValueNow:dt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Afe(t,e){return e in t?t[e]:e}function Tfe(t,e){return Afe(t,e.toLowerCase())}const rWe=wv({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gy,acceptCharset:mr,accessKey:mr,action:null,allow:null,allowFullScreen:un,allowPaymentRequest:un,allowUserMedia:un,alt:null,as:null,async:un,autoCapitalize:null,autoComplete:mr,autoFocus:un,autoPlay:un,blocking:mr,capture:null,charSet:null,checked:un,cite:null,className:mr,cols:dt,colSpan:null,content:null,contentEditable:hi,controls:un,controlsList:mr,coords:dt|gy,crossOrigin:null,data:null,dateTime:null,decoding:null,default:un,defer:un,dir:null,dirName:null,disabled:un,download:GL,draggable:hi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:un,formTarget:null,headers:mr,height:dt,hidden:GL,high:dt,href:null,hrefLang:null,htmlFor:mr,httpEquiv:mr,id:null,imageSizes:null,imageSrcSet:null,inert:un,inputMode:null,integrity:null,is:null,isMap:un,itemId:null,itemProp:mr,itemRef:mr,itemScope:un,itemType:mr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:un,low:dt,manifest:null,max:null,maxLength:dt,media:null,method:null,min:null,minLength:dt,multiple:un,muted:un,name:null,nonce:null,noModule:un,noValidate:un,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:un,optimum:dt,pattern:null,ping:mr,placeholder:null,playsInline:un,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:un,referrerPolicy:null,rel:mr,required:un,reversed:un,rows:dt,rowSpan:dt,sandbox:mr,scope:null,scoped:un,seamless:un,selected:un,shadowRootClonable:un,shadowRootDelegatesFocus:un,shadowRootMode:null,shape:null,size:dt,sizes:null,slot:null,span:dt,spellCheck:hi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:dt,step:null,style:null,tabIndex:dt,target:null,title:null,translate:null,type:null,typeMustMatch:un,useMap:null,value:hi,width:dt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:mr,axis:null,background:null,bgColor:null,border:dt,borderColor:null,bottomMargin:dt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:un,declare:un,event:null,face:null,frame:null,frameBorder:null,hSpace:dt,leftMargin:dt,link:null,longDesc:null,lowSrc:null,marginHeight:dt,marginWidth:dt,noResize:un,noHref:un,noShade:un,noWrap:un,object:null,profile:null,prompt:null,rev:null,rightMargin:dt,rules:null,scheme:null,scrolling:hi,standby:null,summary:null,text:null,topMargin:dt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:dt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:un,disableRemotePlayback:un,prefix:null,property:null,results:dt,security:null,unselectable:null},space:"html",transform:Tfe}),iWe=wv({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Yo,accentHeight:dt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:dt,amplitude:dt,arabicForm:null,ascent:dt,attributeName:null,attributeType:null,azimuth:dt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:dt,by:null,calcMode:null,capHeight:dt,className:mr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:dt,diffuseConstant:dt,direction:null,display:null,dur:null,divisor:dt,dominantBaseline:null,download:un,dx:null,dy:null,edgeMode:null,editable:null,elevation:dt,enableBackground:null,end:null,event:null,exponent:dt,externalResourcesRequired:null,fill:null,fillOpacity:dt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gy,g2:gy,glyphName:gy,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:dt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:dt,horizOriginX:dt,horizOriginY:dt,id:null,ideographic:dt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:dt,k:dt,k1:dt,k2:dt,k3:dt,k4:dt,kernelMatrix:Yo,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:dt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:dt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:dt,overlineThickness:dt,paintOrder:null,panose1:null,path:null,pathLength:dt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:mr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:dt,pointsAtY:dt,pointsAtZ:dt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Yo,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Yo,rev:Yo,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Yo,requiredFeatures:Yo,requiredFonts:Yo,requiredFormats:Yo,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:dt,specularExponent:dt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:dt,strikethroughThickness:dt,string:null,stroke:null,strokeDashArray:Yo,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:dt,strokeOpacity:dt,strokeWidth:null,style:null,surfaceScale:dt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Yo,tabIndex:dt,tableValues:null,target:null,targetX:dt,targetY:dt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Yo,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:dt,underlineThickness:dt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:dt,values:null,vAlphabetic:dt,vMathematical:dt,vectorEffect:null,vHanging:dt,vIdeographic:dt,version:null,vertAdvY:dt,vertOriginX:dt,vertOriginY:dt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:dt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Afe}),kfe=wv({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Nfe=wv({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Tfe}),Cfe=wv({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),sWe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},oWe=/[A-Z]/g,JJ=/-[a-z]/g,aWe=/^data[-\w.:]+$/i;function lWe(t,e){const n=qL(e);let r=e,i=Lo;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&aWe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(JJ,uWe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!JJ.test(s)){let o=s.replace(oWe,cWe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=MB}return new i(r,e)}function cWe(t){return"-"+t.toLowerCase()}function uWe(t){return t.charAt(1).toUpperCase()}const dWe=Efe([Sfe,rWe,kfe,Nfe,Cfe],"html"),LB=Efe([Sfe,iWe,kfe,Nfe,Cfe],"svg");function fWe(t){return t.join(" ").trim()}var fg={},iO,XJ;function hWe(){if(XJ)return iO;XJ=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",d="*",h="",m="comment",g="declaration";function v(b,w){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];w=w||{};var T=1,N=1;function O(A){var I=A.match(e);I&&(T+=I.length);var L=A.lastIndexOf(l);N=~L?A.length-L:N+A.length}function j(){var A={line:T,column:N};return function(I){return I.position=new _(A),D(),I}}function _(A){this.start=A,this.end={line:T,column:N},this.source=w.source}_.prototype.content=b;function F(A){var I=new Error(w.source+":"+T+":"+N+": "+A);if(I.reason=A,I.filename=w.source,I.line=T,I.column=N,I.source=b,!w.silent)throw I}function z(A){var I=A.exec(b);if(I){var L=I[0];return O(L),b=b.slice(L.length),I}}function D(){z(n)}function $(A){var I;for(A=A||[];I=G();)I!==!1&&A.push(I);return A}function G(){var A=j();if(!(c!=b.charAt(0)||d!=b.charAt(1))){for(var I=2;h!=b.charAt(I)&&(d!=b.charAt(I)||c!=b.charAt(I+1));)++I;if(I+=2,h===b.charAt(I-1))return F("End of comment missing");var L=b.slice(2,I-2);return N+=2,O(L),b=b.slice(I),N+=2,A({type:m,comment:L})}}function H(){var A=j(),I=z(r);if(I){if(G(),!z(i))return F("property missing ':'");var L=z(s),q=A({type:g,property:x(I[0].replace(t,h)),value:L?x(L[0].replace(t,h)):h});return z(o),q}}function U(){var A=[];$(A);for(var I;I=H();)I!==!1&&(A.push(I),$(A));return A}return D(),U()}function x(b){return b?b.replace(a,h):h}return iO=v,iO}var QJ;function pWe(){if(QJ)return fg;QJ=1;var t=fg&&fg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fg,"__esModule",{value:!0}),fg.default=n;const e=t(hWe());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const o=(0,e.default)(r),a=typeof i=="function";return o.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:d}=l;a?i(c,d,l):d&&(s=s||{},s[c]=d)}),s}return fg}var jb={},ZJ;function mWe(){if(ZJ)return jb;ZJ=1,Object.defineProperty(jb,"__esModule",{value:!0}),jb.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(c){return!c||n.test(c)||t.test(c)},o=function(c,d){return d.toUpperCase()},a=function(c,d){return"".concat(d,"-")},l=function(c,d){return d===void 0&&(d={}),s(c)?c:(c=c.toLowerCase(),d.reactCompat?c=c.replace(i,a):c=c.replace(r,a),c.replace(e,o))};return jb.camelCase=l,jb}var Bb,eX;function gWe(){if(eX)return Bb;eX=1;var t=Bb&&Bb.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(pWe()),n=mWe();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,l){a&&l&&(o[(0,n.camelCase)(a,s)]=l)}),o}return r.default=r,Bb=r,Bb}var yWe=gWe();const xWe=bs(yWe),Pfe=_fe("end"),DB=_fe("start");function _fe(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function vWe(t){const e=DB(t),n=Pfe(t);if(e&&n)return{start:e,end:n}}function xw(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?tX(t.position):"start"in t||"end"in t?tX(t):"line"in t||"column"in t?WL(t):""}function WL(t){return nX(t&&t.line)+":"+nX(t&&t.column)}function tX(t){return WL(t&&t.start)+"-"+WL(t&&t.end)}function nX(t){return t&&typeof t=="number"?t:1}class Gs extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=xw(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Gs.prototype.file="";Gs.prototype.name="";Gs.prototype.reason="";Gs.prototype.message="";Gs.prototype.stack="";Gs.prototype.column=void 0;Gs.prototype.line=void 0;Gs.prototype.ancestors=void 0;Gs.prototype.cause=void 0;Gs.prototype.fatal=void 0;Gs.prototype.place=void 0;Gs.prototype.ruleId=void 0;Gs.prototype.source=void 0;const jB={}.hasOwnProperty,bWe=new Map,wWe=/[A-Z]/g,EWe=new Set(["table","tbody","thead","tfoot","tr"]),SWe=new Set(["td","th"]),Ife="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function AWe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=RWe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=IWe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?LB:dWe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=Rfe(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function Rfe(t,e,n){if(e.type==="element")return TWe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return kWe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return CWe(t,e,n);if(e.type==="mdxjsEsm")return NWe(t,e);if(e.type==="root")return PWe(t,e,n);if(e.type==="text")return _We(t,e)}function TWe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=LB,t.schema=i),t.ancestors.push(e);const s=Mfe(t,e.tagName,!1),o=OWe(t,e);let a=UB(t,e);return EWe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!tWe(l):!0})),Ofe(t,o,s,e),BB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function kWe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}b1(t,e.position)}function NWe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);b1(t,e.position)}function CWe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=LB,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:Mfe(t,e.name,!0),o=MWe(t,e),a=UB(t,e);return Ofe(t,o,s,e),BB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function PWe(t,e,n){const r={};return BB(r,UB(t,e)),t.create(e,t.Fragment,r,n)}function _We(t,e){return e.value}function Ofe(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function BB(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function IWe(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function RWe(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=DB(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function OWe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&jB.call(e.properties,i)){const s=LWe(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&SWe.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function MWe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else b1(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else b1(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function UB(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:bWe;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=Rfe(t,s,o);a!==void 0&&n.push(a)}return n}function LWe(t,e,n){const r=lWe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?JKe(n):fWe(n)),r.property==="style"){let i=typeof n=="object"?n:DWe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=jWe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?sWe[r.property]||r.property:r.attribute,n]}}function DWe(t,e){try{return xWe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Gs("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=Ife+"#cannot-parse-style-attribute",i}}function Mfe(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=KJ(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=KJ(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return jB.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);b1(t)}function b1(t,e){const n=new Gs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Ife+"#cannot-handle-mdx-estrees-without-createevaluater",n}function jWe(t){const e={};let n;for(n in t)jB.call(t,n)&&(e[BWe(n)]=t[n]);return e}function BWe(t){let e=t.replace(wWe,UWe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function UWe(t){return"-"+t.toLowerCase()}const sO={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},FWe={};function FB(t,e){const n=FWe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Lfe(t,r,i)}function Lfe(t,e,n){if($We(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return rX(t.children,e,n)}return Array.isArray(t)?rX(t,e,n):""}function rX(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=Lfe(t[i],e,n);return r.join("")}function $We(t){return!!(t&&typeof t=="object")}const iX=document.createElement("i");function $B(t){const e="&"+t+";";iX.innerHTML=e;const n=iX.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function fa(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ja(t,e){return t.length>0?(fa(t,t.length,0,e),t):e}const sX={}.hasOwnProperty;function Dfe(t){const e={};let n=-1;for(;++n<t.length;)zWe(e,t[n]);return e}function zWe(t,e){let n;for(n in e){const i=(sX.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){sX.call(i,o)||(i[o]=[]);const a=s[o];VWe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function VWe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);fa(t,0,0,r)}function jfe(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function zl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const no=Vh(/[A-Za-z]/),Fs=Vh(/[\dA-Za-z]/),HWe=Vh(/[#-'*+\--9=?A-Z^-~]/);function _k(t){return t!==null&&(t<32||t===127)}const YL=Vh(/\d/),qWe=Vh(/[\dA-Fa-f]/),GWe=Vh(/[!-/:-@[-`{-~]/);function Wt(t){return t!==null&&t<-2}function dr(t){return t!==null&&(t<0||t===32)}function An(t){return t===-2||t===-1||t===32}const eP=Vh(new RegExp("\\p{P}|\\p{S}","u")),Wm=Vh(/\s/);function Vh(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ev(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Fs(t.charCodeAt(n+1))&&Fs(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function In(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return An(l)?(t.enter(n),a(l)):e(l)}function a(l){return An(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const KWe={tokenize:WWe};function WWe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),In(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Wt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const YWe={tokenize:JWe},oX={tokenize:XWe};function JWe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(N){if(r<n.length){const O=n[r];return e.containerState=O[1],t.attempt(O[0].continuation,l,c)(N)}return c(N)}function l(N){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&T();const O=e.events.length;let j=O,_;for(;j--;)if(e.events[j][0]==="exit"&&e.events[j][1].type==="chunkFlow"){_=e.events[j][1].end;break}w(r);let F=O;for(;F<e.events.length;)e.events[F][1].end={..._},F++;return fa(e.events,j+1,0,e.events.slice(O)),e.events.length=F,c(N)}return a(N)}function c(N){if(r===n.length){if(!i)return m(N);if(i.currentConstruct&&i.currentConstruct.concrete)return v(N);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(oX,d,h)(N)}function d(N){return i&&T(),w(r),m(N)}function h(N){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,v(N)}function m(N){return e.containerState={},t.attempt(oX,g,v)(N)}function g(N){return r++,n.push([e.currentConstruct,e.containerState]),m(N)}function v(N){if(N===null){i&&T(),w(0),t.consume(N);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),x(N)}function x(N){if(N===null){b(t.exit("chunkFlow"),!0),w(0),t.consume(N);return}return Wt(N)?(t.consume(N),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(N),x)}function b(N,O){const j=e.sliceStream(N);if(O&&j.push(null),N.previous=s,s&&(s.next=N),s=N,i.defineSkip(N.start),i.write(j),e.parser.lazy[N.start.line]){let _=i.events.length;for(;_--;)if(i.events[_][1].start.offset<o&&(!i.events[_][1].end||i.events[_][1].end.offset>o))return;const F=e.events.length;let z=F,D,$;for(;z--;)if(e.events[z][0]==="exit"&&e.events[z][1].type==="chunkFlow"){if(D){$=e.events[z][1].end;break}D=!0}for(w(r),_=F;_<e.events.length;)e.events[_][1].end={...$},_++;fa(e.events,z+1,0,e.events.slice(F)),e.events.length=_}}function w(N){let O=n.length;for(;O-- >N;){const j=n[O];e.containerState=j[1],j[0].exit.call(e,t)}n.length=N}function T(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function XWe(t,e,n){return In(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Bx(t){if(t===null||dr(t)||Wm(t))return 1;if(eP(t))return 2}function tP(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const JL={name:"attention",resolveAll:QWe,tokenize:ZWe};function QWe(t,e){let n=-1,r,i,s,o,a,l,c,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},m={...t[n][1].start};aX(h,-l),aX(m,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Ja(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Ja(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Ja(c,tP(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Ja(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,c=Ja(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,fa(t,r-1,n-r+3,c),n=r+c.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function ZWe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Bx(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),d=Bx(l),h=!d||d===2&&i||n.includes(l),m=!i||i===2&&d||n.includes(r);return c._open=!!(s===42?h:h&&(i||!m)),c._close=!!(s===42?m:m&&(d||!h)),e(l)}}function aX(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const eYe={name:"autolink",tokenize:tYe};function tYe(t,e,n){let r=0;return i;function i(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return no(g)?(t.consume(g),o):g===64?n(g):c(g)}function o(g){return g===43||g===45||g===46||Fs(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(t.consume(g),r=0,l):(g===43||g===45||g===46||Fs(g))&&r++<32?(t.consume(g),a):(r=0,c(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||_k(g)?n(g):(t.consume(g),l)}function c(g){return g===64?(t.consume(g),d):HWe(g)?(t.consume(g),c):n(g)}function d(g){return Fs(g)?h(g):n(g)}function h(g){return g===46?(t.consume(g),r=0,d):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||Fs(g))&&r++<63){const v=g===45?m:h;return t.consume(g),v}return n(g)}}const RE={partial:!0,tokenize:nYe};function nYe(t,e,n){return r;function r(s){return An(s)?In(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Wt(s)?e(s):n(s)}}const Bfe={continuation:{tokenize:iYe},exit:sYe,name:"blockQuote",tokenize:rYe};function rYe(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return An(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function iYe(t,e,n){const r=this;return i;function i(o){return An(o)?In(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(Bfe,e,n)(o)}}function sYe(t){t.exit("blockQuote")}const Ufe={name:"characterEscape",tokenize:oYe};function oYe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return GWe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const Ffe={name:"characterReference",tokenize:aYe};function aYe(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Fs,d(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=qWe,d):(t.enter("characterReferenceValue"),s=7,o=YL,d(h))}function d(h){if(h===59&&i){const m=t.exit("characterReferenceValue");return o===Fs&&!$B(r.sliceSerialize(m))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),d):n(h)}}const lX={partial:!0,tokenize:cYe},cX={concrete:!0,name:"codeFenced",tokenize:lYe};function lYe(t,e,n){const r=this,i={partial:!0,tokenize:j};let s=0,o=0,a;return l;function l(_){return c(_)}function c(_){const F=r.events[r.events.length-1];return s=F&&F[1].type==="linePrefix"?F[2].sliceSerialize(F[1],!0).length:0,a=_,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(_)}function d(_){return _===a?(o++,t.consume(_),d):o<3?n(_):(t.exit("codeFencedFenceSequence"),An(_)?In(t,h,"whitespace")(_):h(_))}function h(_){return _===null||Wt(_)?(t.exit("codeFencedFence"),r.interrupt?e(_):t.check(lX,x,O)(_)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===null||Wt(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(_)):An(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),In(t,g,"whitespace")(_)):_===96&&_===a?n(_):(t.consume(_),m)}function g(_){return _===null||Wt(_)?h(_):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(_))}function v(_){return _===null||Wt(_)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(_)):_===96&&_===a?n(_):(t.consume(_),v)}function x(_){return t.attempt(i,O,b)(_)}function b(_){return t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),w}function w(_){return s>0&&An(_)?In(t,T,"linePrefix",s+1)(_):T(_)}function T(_){return _===null||Wt(_)?t.check(lX,x,O)(_):(t.enter("codeFlowValue"),N(_))}function N(_){return _===null||Wt(_)?(t.exit("codeFlowValue"),T(_)):(t.consume(_),N)}function O(_){return t.exit("codeFenced"),e(_)}function j(_,F,z){let D=0;return $;function $(I){return _.enter("lineEnding"),_.consume(I),_.exit("lineEnding"),G}function G(I){return _.enter("codeFencedFence"),An(I)?In(_,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):H(I)}function H(I){return I===a?(_.enter("codeFencedFenceSequence"),U(I)):z(I)}function U(I){return I===a?(D++,_.consume(I),U):D>=o?(_.exit("codeFencedFenceSequence"),An(I)?In(_,A,"whitespace")(I):A(I)):z(I)}function A(I){return I===null||Wt(I)?(_.exit("codeFencedFence"),F(I)):z(I)}}}function cYe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const oO={name:"codeIndented",tokenize:dYe},uYe={partial:!0,tokenize:fYe};function dYe(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),In(t,s,"linePrefix",5)(c)}function s(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Wt(c)?t.attempt(uYe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Wt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function fYe(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):In(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Wt(o)?i(o):n(o)}}const hYe={name:"codeText",previous:mYe,resolve:pYe,tokenize:gYe};function pYe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function mYe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function gYe(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,d(h)):Wt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||Wt(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function d(h){return h===96?(t.consume(h),i++,d):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class yYe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Ub(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ub(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ub(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Ub(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ub(this.left,n.reverse())}}}function Ub(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function $fe(t){const e={};let n=-1,r,i,s,o,a,l,c;const d=new yYe(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,xYe(d,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},a=d.slice(i,n),a.unshift(r),d.splice(i,n-i+1,a))}}return fa(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function xYe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let d,h,m=-1,g=n,v=0,x=0;const b=[x];for(;g;){for(;t.get(++i)[1]!==g;);s.push(i),g._tokenizer||(d=r.sliceStream(g),g.next||d.push(null),h&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(x=m+1,b.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):b.pop(),m=b.length;m--;){const w=a.slice(b[m],b[m+1]),T=s.pop();l.push([T,T+w.length-1]),t.splice(T,2,w)}for(l.reverse(),m=-1;++m<l.length;)c[v+l[m][0]]=v+l[m][1],v+=l[m][1]-l[m][0]-1;return c}const vYe={resolve:wYe,tokenize:EYe},bYe={partial:!0,tokenize:SYe};function wYe(t){return $fe(t),t}function EYe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Wt(a)?t.check(bYe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function SYe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),In(t,s,"linePrefix")}function s(o){if(o===null||Wt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function zfe(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return h;function h(w){return w===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(w),t.exit(s),m):w===null||w===32||w===41||_k(w)?n(w):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),x(w))}function m(w){return w===62?(t.enter(s),t.consume(w),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===62?(t.exit("chunkString"),t.exit(a),m(w)):w===null||w===60||Wt(w)?n(w):(t.consume(w),w===92?v:g)}function v(w){return w===60||w===62||w===92?(t.consume(w),g):g(w)}function x(w){return!d&&(w===null||w===41||dr(w))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(w)):d<c&&w===40?(t.consume(w),d++,x):w===41?(t.consume(w),d--,x):w===null||w===32||w===40||_k(w)?n(w):(t.consume(w),w===92?b:x)}function b(w){return w===40||w===41||w===92?(t.consume(w),x):x(w)}}function Vfe(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(g){return t.enter(r),t.enter(i),t.consume(g),t.exit(i),t.enter(s),d}function d(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):Wt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===null||g===91||g===93||Wt(g)||a++>999?(t.exit("chunkString"),d(g)):(t.consume(g),l||(l=!An(g)),g===92?m:h)}function m(g){return g===91||g===92||g===93?(t.consume(g),a++,h):h(g)}}function Hfe(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,l):n(m)}function l(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),c(m))}function c(m){return m===o?(t.exit(s),l(o)):m===null?n(m):Wt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),In(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===o||m===null||Wt(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?h:d)}function h(m){return m===o||m===92?(t.consume(m),d):d(m)}}function vw(t,e){let n;return r;function r(i){return Wt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):An(i)?In(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const AYe={name:"definition",tokenize:kYe},TYe={partial:!0,tokenize:NYe};function kYe(t,e,n){const r=this;let i;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return Vfe.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=zl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return dr(g)?vw(t,c)(g):c(g)}function c(g){return zfe(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function d(g){return t.attempt(TYe,h,h)(g)}function h(g){return An(g)?In(t,m,"whitespace")(g):m(g)}function m(g){return g===null||Wt(g)?(t.exit("definition"),r.parser.defined.push(i),e(g)):n(g)}}function NYe(t,e,n){return r;function r(a){return dr(a)?vw(t,i)(a):n(a)}function i(a){return Hfe(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return An(a)?In(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Wt(a)?e(a):n(a)}}const CYe={name:"hardBreakEscape",tokenize:PYe};function PYe(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Wt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const _Ye={name:"headingAtx",resolve:IYe,tokenize:RYe};function IYe(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},fa(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function RYe(t,e,n){let r=0;return i;function i(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(t.consume(d),o):d===null||dr(d)?(t.exit("atxHeadingSequence"),a(d)):n(d)}function a(d){return d===35?(t.enter("atxHeadingSequence"),l(d)):d===null||Wt(d)?(t.exit("atxHeading"),e(d)):An(d)?In(t,a,"whitespace")(d):(t.enter("atxHeadingText"),c(d))}function l(d){return d===35?(t.consume(d),l):(t.exit("atxHeadingSequence"),a(d))}function c(d){return d===null||d===35||dr(d)?(t.exit("atxHeadingText"),a(d)):(t.consume(d),c)}}const OYe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],uX=["pre","script","style","textarea"],MYe={concrete:!0,name:"htmlFlow",resolveTo:jYe,tokenize:BYe},LYe={partial:!0,tokenize:FYe},DYe={partial:!0,tokenize:UYe};function jYe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function BYe(t,e,n){const r=this;let i,s,o,a,l;return c;function c(P){return d(P)}function d(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),h}function h(P){return P===33?(t.consume(P),m):P===47?(t.consume(P),s=!0,x):P===63?(t.consume(P),i=3,r.interrupt?e:Y):no(P)?(t.consume(P),o=String.fromCharCode(P),b):n(P)}function m(P){return P===45?(t.consume(P),i=2,g):P===91?(t.consume(P),i=5,a=0,v):no(P)?(t.consume(P),i=4,r.interrupt?e:Y):n(P)}function g(P){return P===45?(t.consume(P),r.interrupt?e:Y):n(P)}function v(P){const W="CDATA[";return P===W.charCodeAt(a++)?(t.consume(P),a===W.length?r.interrupt?e:H:v):n(P)}function x(P){return no(P)?(t.consume(P),o=String.fromCharCode(P),b):n(P)}function b(P){if(P===null||P===47||P===62||dr(P)){const W=P===47,X=o.toLowerCase();return!W&&!s&&uX.includes(X)?(i=1,r.interrupt?e(P):H(P)):OYe.includes(o.toLowerCase())?(i=6,W?(t.consume(P),w):r.interrupt?e(P):H(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):s?T(P):N(P))}return P===45||Fs(P)?(t.consume(P),o+=String.fromCharCode(P),b):n(P)}function w(P){return P===62?(t.consume(P),r.interrupt?e:H):n(P)}function T(P){return An(P)?(t.consume(P),T):$(P)}function N(P){return P===47?(t.consume(P),$):P===58||P===95||no(P)?(t.consume(P),O):An(P)?(t.consume(P),N):$(P)}function O(P){return P===45||P===46||P===58||P===95||Fs(P)?(t.consume(P),O):j(P)}function j(P){return P===61?(t.consume(P),_):An(P)?(t.consume(P),j):N(P)}function _(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),l=P,F):An(P)?(t.consume(P),_):z(P)}function F(P){return P===l?(t.consume(P),l=null,D):P===null||Wt(P)?n(P):(t.consume(P),F)}function z(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||dr(P)?j(P):(t.consume(P),z)}function D(P){return P===47||P===62||An(P)?N(P):n(P)}function $(P){return P===62?(t.consume(P),G):n(P)}function G(P){return P===null||Wt(P)?H(P):An(P)?(t.consume(P),G):n(P)}function H(P){return P===45&&i===2?(t.consume(P),L):P===60&&i===1?(t.consume(P),q):P===62&&i===4?(t.consume(P),V):P===63&&i===3?(t.consume(P),Y):P===93&&i===5?(t.consume(P),te):Wt(P)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(LYe,M,U)(P)):P===null||Wt(P)?(t.exit("htmlFlowData"),U(P)):(t.consume(P),H)}function U(P){return t.check(DYe,A,M)(P)}function A(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),I}function I(P){return P===null||Wt(P)?U(P):(t.enter("htmlFlowData"),H(P))}function L(P){return P===45?(t.consume(P),Y):H(P)}function q(P){return P===47?(t.consume(P),o="",K):H(P)}function K(P){if(P===62){const W=o.toLowerCase();return uX.includes(W)?(t.consume(P),V):H(P)}return no(P)&&o.length<8?(t.consume(P),o+=String.fromCharCode(P),K):H(P)}function te(P){return P===93?(t.consume(P),Y):H(P)}function Y(P){return P===62?(t.consume(P),V):P===45&&i===2?(t.consume(P),Y):H(P)}function V(P){return P===null||Wt(P)?(t.exit("htmlFlowData"),M(P)):(t.consume(P),V)}function M(P){return t.exit("htmlFlow"),e(P)}}function UYe(t,e,n){const r=this;return i;function i(o){return Wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function FYe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(RE,e,n)}}const $Ye={name:"htmlText",tokenize:zYe};function zYe(t,e,n){const r=this;let i,s,o;return a;function a(Y){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(Y),l}function l(Y){return Y===33?(t.consume(Y),c):Y===47?(t.consume(Y),j):Y===63?(t.consume(Y),N):no(Y)?(t.consume(Y),z):n(Y)}function c(Y){return Y===45?(t.consume(Y),d):Y===91?(t.consume(Y),s=0,v):no(Y)?(t.consume(Y),T):n(Y)}function d(Y){return Y===45?(t.consume(Y),g):n(Y)}function h(Y){return Y===null?n(Y):Y===45?(t.consume(Y),m):Wt(Y)?(o=h,q(Y)):(t.consume(Y),h)}function m(Y){return Y===45?(t.consume(Y),g):h(Y)}function g(Y){return Y===62?L(Y):Y===45?m(Y):h(Y)}function v(Y){const V="CDATA[";return Y===V.charCodeAt(s++)?(t.consume(Y),s===V.length?x:v):n(Y)}function x(Y){return Y===null?n(Y):Y===93?(t.consume(Y),b):Wt(Y)?(o=x,q(Y)):(t.consume(Y),x)}function b(Y){return Y===93?(t.consume(Y),w):x(Y)}function w(Y){return Y===62?L(Y):Y===93?(t.consume(Y),w):x(Y)}function T(Y){return Y===null||Y===62?L(Y):Wt(Y)?(o=T,q(Y)):(t.consume(Y),T)}function N(Y){return Y===null?n(Y):Y===63?(t.consume(Y),O):Wt(Y)?(o=N,q(Y)):(t.consume(Y),N)}function O(Y){return Y===62?L(Y):N(Y)}function j(Y){return no(Y)?(t.consume(Y),_):n(Y)}function _(Y){return Y===45||Fs(Y)?(t.consume(Y),_):F(Y)}function F(Y){return Wt(Y)?(o=F,q(Y)):An(Y)?(t.consume(Y),F):L(Y)}function z(Y){return Y===45||Fs(Y)?(t.consume(Y),z):Y===47||Y===62||dr(Y)?D(Y):n(Y)}function D(Y){return Y===47?(t.consume(Y),L):Y===58||Y===95||no(Y)?(t.consume(Y),$):Wt(Y)?(o=D,q(Y)):An(Y)?(t.consume(Y),D):L(Y)}function $(Y){return Y===45||Y===46||Y===58||Y===95||Fs(Y)?(t.consume(Y),$):G(Y)}function G(Y){return Y===61?(t.consume(Y),H):Wt(Y)?(o=G,q(Y)):An(Y)?(t.consume(Y),G):D(Y)}function H(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?n(Y):Y===34||Y===39?(t.consume(Y),i=Y,U):Wt(Y)?(o=H,q(Y)):An(Y)?(t.consume(Y),H):(t.consume(Y),A)}function U(Y){return Y===i?(t.consume(Y),i=void 0,I):Y===null?n(Y):Wt(Y)?(o=U,q(Y)):(t.consume(Y),U)}function A(Y){return Y===null||Y===34||Y===39||Y===60||Y===61||Y===96?n(Y):Y===47||Y===62||dr(Y)?D(Y):(t.consume(Y),A)}function I(Y){return Y===47||Y===62||dr(Y)?D(Y):n(Y)}function L(Y){return Y===62?(t.consume(Y),t.exit("htmlTextData"),t.exit("htmlText"),e):n(Y)}function q(Y){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),K}function K(Y){return An(Y)?In(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):te(Y)}function te(Y){return t.enter("htmlTextData"),o(Y)}}const zB={name:"labelEnd",resolveAll:GYe,resolveTo:KYe,tokenize:WYe},VYe={tokenize:YYe},HYe={tokenize:JYe},qYe={tokenize:XYe};function GYe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&fa(t,0,t.length,n),t}function KYe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},d={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Ja(a,t.slice(s+1,s+r+3)),a=Ja(a,[["enter",d,e]]),a=Ja(a,tP(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Ja(a,[["exit",d,e],t[o-2],t[o-1],["exit",c,e]]),a=Ja(a,t.slice(o+1)),a=Ja(a,[["exit",l,e]]),fa(t,s,t.length,a),t}function WYe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?h(m):(o=r.parser.defined.includes(zl(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(VYe,d,o?d:h)(m):m===91?t.attempt(HYe,d,o?c:h)(m):o?d(m):h(m)}function c(m){return t.attempt(qYe,d,h)(m)}function d(m){return e(m)}function h(m){return s._balanced=!0,n(m)}}function YYe(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return dr(h)?vw(t,s)(h):s(h)}function s(h){return h===41?d(h):zfe(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return dr(h)?vw(t,l)(h):d(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?Hfe(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function c(h){return dr(h)?vw(t,d)(h):d(h)}function d(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function JYe(t,e,n){const r=this;return i;function i(a){return Vfe.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(zl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function XYe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const QYe={name:"labelStartImage",resolveAll:zB.resolveAll,tokenize:ZYe};function ZYe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const eJe={name:"labelStartLink",resolveAll:zB.resolveAll,tokenize:tJe};function tJe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const aO={name:"lineEnding",tokenize:nJe};function nJe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),In(t,e,"linePrefix")}}const GT={name:"thematicBreak",tokenize:rJe};function rJe(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Wt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),An(c)?In(t,a,"whitespace")(c):a(c))}}const Eo={continuation:{tokenize:aJe},exit:cJe,name:"list",tokenize:oJe},iJe={partial:!0,tokenize:uJe},sJe={partial:!0,tokenize:lJe};function oJe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:YL(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(GT,n,c)(g):c(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return YL(g)&&++o<10?(t.consume(g),l):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(RE,r.interrupt?n:d,t.attempt(iJe,m,h))}function d(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function h(g){return An(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function aJe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(RE,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,In(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!An(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(sJe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,In(t,t.attempt(Eo,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function lJe(t,e,n){const r=this;return In(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function cJe(t){t.exit(this.containerState.type)}function uJe(t,e,n){const r=this;return In(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!An(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const dX={name:"setextUnderline",resolveTo:dJe,tokenize:fJe};function dJe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function fJe(t,e,n){const r=this;let i;return s;function s(c){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),An(c)?In(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Wt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const hJe={tokenize:pJe};function pJe(t){const e=this,n=t.attempt(RE,r,t.attempt(this.parser.constructs.flowInitial,i,In(t,t.attempt(this.parser.constructs.flow,i,t.attempt(vYe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const mJe={resolveAll:Gfe()},gJe=qfe("string"),yJe=qfe("text");function qfe(t){return{resolveAll:Gfe(t==="text"?xJe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(d){return c(d)?s(d):a(d)}function a(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return c(d)?(n.exit("data"),s(d)):(n.consume(d),l)}function c(d){if(d===null)return!0;const h=i[d];let m=-1;if(h)for(;++m<h.length;){const g=h[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function Gfe(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function xJe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const vJe={42:Eo,43:Eo,45:Eo,48:Eo,49:Eo,50:Eo,51:Eo,52:Eo,53:Eo,54:Eo,55:Eo,56:Eo,57:Eo,62:Bfe},bJe={91:AYe},wJe={[-2]:oO,[-1]:oO,32:oO},EJe={35:_Ye,42:GT,45:[dX,GT],60:MYe,61:dX,95:GT,96:cX,126:cX},SJe={38:Ffe,92:Ufe},AJe={[-5]:aO,[-4]:aO,[-3]:aO,33:QYe,38:Ffe,42:JL,60:[eYe,$Ye],91:eJe,92:[CYe,Ufe],93:zB,95:JL,96:hYe},TJe={null:[JL,mJe]},kJe={null:[42,95]},NJe={null:[]},CJe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:kJe,contentInitial:bJe,disable:NJe,document:vJe,flow:EJe,flowInitial:wJe,insideSpan:TJe,string:SJe,text:AJe},Symbol.toStringTag,{value:"Module"}));function PJe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:F(j),check:F(_),consume:T,enter:N,exit:O,interrupt:F(_,{interrupt:!0})},c={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:h};let d=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(G){return o=Ja(o,G),b(),o[o.length-1]!==null?[]:(z(e,0),c.events=tP(s,c.events,c),c.events)}function m(G,H){return IJe(g(G),H)}function g(G){return _Je(o,G)}function v(){const{_bufferIndex:G,_index:H,line:U,column:A,offset:I}=r;return{_bufferIndex:G,_index:H,line:U,column:A,offset:I}}function x(G){i[G.line]=G.column,$()}function b(){let G;for(;r._index<o.length;){const H=o[r._index];if(typeof H=="string")for(G=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===G&&r._bufferIndex<H.length;)w(H.charCodeAt(r._bufferIndex));else w(H)}}function w(G){d=d(G)}function T(G){Wt(G)?(r.line++,r.column=1,r.offset+=G===-3?2:1,$()):G!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=G}function N(G,H){const U=H||{};return U.type=G,U.start=v(),c.events.push(["enter",U,c]),a.push(U),U}function O(G){const H=a.pop();return H.end=v(),c.events.push(["exit",H,c]),H}function j(G,H){z(G,H.from)}function _(G,H){H.restore()}function F(G,H){return U;function U(A,I,L){let q,K,te,Y;return Array.isArray(A)?M(A):"tokenize"in A?M([A]):V(A);function V(se){return ae;function ae(Te){const oe=Te!==null&&se[Te],ve=Te!==null&&se.null,ke=[...Array.isArray(oe)?oe:oe?[oe]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return M(ke)(Te)}}function M(se){return q=se,K=0,se.length===0?L:P(se[K])}function P(se){return ae;function ae(Te){return Y=D(),te=se,se.partial||(c.currentConstruct=se),se.name&&c.parser.constructs.disable.null.includes(se.name)?X():se.tokenize.call(H?Object.assign(Object.create(c),H):c,l,W,X)(Te)}}function W(se){return G(te,Y),I}function X(se){return Y.restore(),++K<q.length?P(q[K]):L}}}function z(G,H){G.resolveAll&&!s.includes(G)&&s.push(G),G.resolve&&fa(c.events,H,c.events.length-H,G.resolve(c.events.slice(H),c)),G.resolveTo&&(c.events=G.resolveTo(c.events,c))}function D(){const G=v(),H=c.previous,U=c.currentConstruct,A=c.events.length,I=Array.from(a);return{from:A,restore:L};function L(){r=G,c.previous=H,c.currentConstruct=U,c.events.length=A,a=I,$()}}function $(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function _Je(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function IJe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function RJe(t){const r={constructs:Dfe([CJe,...(t||{}).extensions||[]]),content:i(KWe),defined:[],document:i(YWe),flow:i(hJe),lazy:{},string:i(gJe),text:i(yJe)};return r;function i(s){return o;function o(a){return PJe(r,s,a)}}}function OJe(t){for(;!$fe(t););return t}const fX=/[\0\t\n\r]/g;function MJe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,d,h,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(fX.lastIndex=h,c=fX.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){e=s.slice(h);break}if(g===10&&h===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<m&&(l.push(s.slice(h,m)),t+=m-h),g){case 0:{l.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,l.push(-2);t++<d;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=m+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const LJe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function DJe(t){return t.replace(LJe,jJe)}function jJe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return jfe(n.slice(s?2:1),s?16:10)}return $B(n)||t}const Kfe={}.hasOwnProperty;function BJe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),UJe(n)(OJe(RJe(n).document().write(MJe()(t,e,!0))))}function UJe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(it),autolinkProtocol:D,autolinkEmail:D,atxHeading:s(he),blockQuote:s(ve),characterEscape:D,characterReference:D,codeFenced:s(ke),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ke,o),codeText:s(pe,o),codeTextData:D,data:D,codeFlowValue:D,definition:s(ze),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Me),hardBreakEscape:s(_e),hardBreakTrailing:s(_e),htmlFlow:s(We,o),htmlFlowData:D,htmlText:s(We,o),htmlTextData:D,image:s(Ke),label:o,link:s(it),listItem:s(ut),listItemValue:m,listOrdered:s(st,h),listUnordered:s(st),paragraph:s(Je),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(he),strong:s(Le),thematicBreak:s(Ut)},exit:{atxHeading:l(),atxHeadingSequence:j,autolink:l(),autolinkEmail:oe,autolinkProtocol:Te,blockQuote:l(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:se,characterReference:ae,codeFenced:l(b),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:$,codeIndented:l(w),codeText:l(I),codeTextData:$,data:$,definition:l(),definitionDestinationString:O,definitionLabelString:T,definitionTitleString:N,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(U),htmlFlowData:$,htmlText:l(A),htmlTextData:$,image:l(q),label:te,labelText:K,lineEnding:G,link:l(L),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:W,resourceDestinationString:Y,resourceTitleString:V,resource:M,setextHeading:l(z),setextHeadingLineSequence:F,setextHeadingText:_,strong:l(),thematicBreak:l()}};Wfe(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Ie){let qe={type:"root",children:[]};const yt={stack:[qe],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:d,data:n},ht=[];let ie=-1;for(;++ie<Ie.length;)if(Ie[ie][1].type==="listOrdered"||Ie[ie][1].type==="listUnordered")if(Ie[ie][0]==="enter")ht.push(ie);else{const J=ht.pop();ie=i(Ie,J,ie)}for(ie=-1;++ie<Ie.length;){const J=e[Ie[ie][0]];Kfe.call(J,Ie[ie][1].type)&&J[Ie[ie][1].type].call(Object.assign({sliceSerialize:Ie[ie][2].sliceSerialize},yt),Ie[ie][1])}if(yt.tokenStack.length>0){const J=yt.tokenStack[yt.tokenStack.length-1];(J[1]||hX).call(yt,void 0,J[0])}for(qe.position={start:If(Ie.length>0?Ie[0][1].start:{line:1,column:1,offset:0}),end:If(Ie.length>0?Ie[Ie.length-2][1].end:{line:1,column:1,offset:0})},ie=-1;++ie<e.transforms.length;)qe=e.transforms[ie](qe)||qe;return qe}function i(Ie,qe,yt){let ht=qe-1,ie=-1,J=!1,Z,ue,Se,de;for(;++ht<=yt;){const ge=Ie[ht];switch(ge[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ge[0]==="enter"?ie++:ie--,de=void 0;break}case"lineEndingBlank":{ge[0]==="enter"&&(Z&&!de&&!ie&&!Se&&(Se=ht),de=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:de=void 0}if(!ie&&ge[0]==="enter"&&ge[1].type==="listItemPrefix"||ie===-1&&ge[0]==="exit"&&(ge[1].type==="listUnordered"||ge[1].type==="listOrdered")){if(Z){let Qe=ht;for(ue=void 0;Qe--;){const tt=Ie[Qe];if(tt[1].type==="lineEnding"||tt[1].type==="lineEndingBlank"){if(tt[0]==="exit")continue;ue&&(Ie[ue][1].type="lineEndingBlank",J=!0),tt[1].type="lineEnding",ue=Qe}else if(!(tt[1].type==="linePrefix"||tt[1].type==="blockQuotePrefix"||tt[1].type==="blockQuotePrefixWhitespace"||tt[1].type==="blockQuoteMarker"||tt[1].type==="listItemIndent"))break}Se&&(!ue||Se<ue)&&(Z._spread=!0),Z.end=Object.assign({},ue?Ie[ue][1].start:ge[1].end),Ie.splice(ue||ht,0,["exit",Z,ge[2]]),ht++,yt++}if(ge[1].type==="listItemPrefix"){const Qe={type:"listItem",_spread:!1,start:Object.assign({},ge[1].start),end:void 0};Z=Qe,Ie.splice(ht,0,["enter",Qe,ge[2]]),ht++,yt++,Se=void 0,de=!0}}}return Ie[qe][1]._spread=J,yt}function s(Ie,qe){return yt;function yt(ht){a.call(this,Ie(ht),ht),qe&&qe.call(this,ht)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ie,qe,yt){this.stack[this.stack.length-1].children.push(Ie),this.stack.push(Ie),this.tokenStack.push([qe,yt||void 0]),Ie.position={start:If(qe.start),end:void 0}}function l(Ie){return qe;function qe(yt){Ie&&Ie.call(this,yt),c.call(this,yt)}}function c(Ie,qe){const yt=this.stack.pop(),ht=this.tokenStack.pop();if(ht)ht[0].type!==Ie.type&&(qe?qe.call(this,Ie,ht[0]):(ht[1]||hX).call(this,Ie,ht[0]));else throw new Error("Cannot close `"+Ie.type+"` ("+xw({start:Ie.start,end:Ie.end})+"): its not open");yt.position.end=If(Ie.end)}function d(){return FB(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(Ie){if(this.data.expectingFirstListItemValue){const qe=this.stack[this.stack.length-2];qe.start=Number.parseInt(this.sliceSerialize(Ie),10),this.data.expectingFirstListItemValue=void 0}}function g(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.lang=Ie}function v(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.meta=Ie}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ie.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ie.replace(/(\r?\n|\r)$/g,"")}function T(Ie){const qe=this.resume(),yt=this.stack[this.stack.length-1];yt.label=qe,yt.identifier=zl(this.sliceSerialize(Ie)).toLowerCase()}function N(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.title=Ie}function O(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.url=Ie}function j(Ie){const qe=this.stack[this.stack.length-1];if(!qe.depth){const yt=this.sliceSerialize(Ie).length;qe.depth=yt}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function F(Ie){const qe=this.stack[this.stack.length-1];qe.depth=this.sliceSerialize(Ie).codePointAt(0)===61?1:2}function z(){this.data.setextHeadingSlurpLineEnding=void 0}function D(Ie){const yt=this.stack[this.stack.length-1].children;let ht=yt[yt.length-1];(!ht||ht.type!=="text")&&(ht=et(),ht.position={start:If(Ie.start),end:void 0},yt.push(ht)),this.stack.push(ht)}function $(Ie){const qe=this.stack.pop();qe.value+=this.sliceSerialize(Ie),qe.position.end=If(Ie.end)}function G(Ie){const qe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const yt=qe.children[qe.children.length-1];yt.position.end=If(Ie.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(qe.type)&&(D.call(this,Ie),$.call(this,Ie))}function H(){this.data.atHardBreak=!0}function U(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ie}function A(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ie}function I(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.value=Ie}function L(){const Ie=this.stack[this.stack.length-1];if(this.data.inReference){const qe=this.data.referenceType||"shortcut";Ie.type+="Reference",Ie.referenceType=qe,delete Ie.url,delete Ie.title}else delete Ie.identifier,delete Ie.label;this.data.referenceType=void 0}function q(){const Ie=this.stack[this.stack.length-1];if(this.data.inReference){const qe=this.data.referenceType||"shortcut";Ie.type+="Reference",Ie.referenceType=qe,delete Ie.url,delete Ie.title}else delete Ie.identifier,delete Ie.label;this.data.referenceType=void 0}function K(Ie){const qe=this.sliceSerialize(Ie),yt=this.stack[this.stack.length-2];yt.label=DJe(qe),yt.identifier=zl(qe).toLowerCase()}function te(){const Ie=this.stack[this.stack.length-1],qe=this.resume(),yt=this.stack[this.stack.length-1];if(this.data.inReference=!0,yt.type==="link"){const ht=Ie.children;yt.children=ht}else yt.alt=qe}function Y(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.url=Ie}function V(){const Ie=this.resume(),qe=this.stack[this.stack.length-1];qe.title=Ie}function M(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function W(Ie){const qe=this.resume(),yt=this.stack[this.stack.length-1];yt.label=qe,yt.identifier=zl(this.sliceSerialize(Ie)).toLowerCase(),this.data.referenceType="full"}function X(Ie){this.data.characterReferenceType=Ie.type}function se(Ie){const qe=this.sliceSerialize(Ie),yt=this.data.characterReferenceType;let ht;yt?(ht=jfe(qe,yt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ht=$B(qe);const ie=this.stack[this.stack.length-1];ie.value+=ht}function ae(Ie){const qe=this.stack.pop();qe.position.end=If(Ie.end)}function Te(Ie){$.call(this,Ie);const qe=this.stack[this.stack.length-1];qe.url=this.sliceSerialize(Ie)}function oe(Ie){$.call(this,Ie);const qe=this.stack[this.stack.length-1];qe.url="mailto:"+this.sliceSerialize(Ie)}function ve(){return{type:"blockquote",children:[]}}function ke(){return{type:"code",lang:null,meta:null,value:""}}function pe(){return{type:"inlineCode",value:""}}function ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Me(){return{type:"emphasis",children:[]}}function he(){return{type:"heading",depth:0,children:[]}}function _e(){return{type:"break"}}function We(){return{type:"html",value:""}}function Ke(){return{type:"image",title:null,url:"",alt:null}}function it(){return{type:"link",title:null,url:"",children:[]}}function st(Ie){return{type:"list",ordered:Ie.type==="listOrdered",start:null,spread:Ie._spread,children:[]}}function ut(Ie){return{type:"listItem",spread:Ie._spread,checked:null,children:[]}}function Je(){return{type:"paragraph",children:[]}}function Le(){return{type:"strong",children:[]}}function et(){return{type:"text",value:""}}function Ut(){return{type:"thematicBreak"}}}function If(t){return{line:t.line,column:t.column,offset:t.offset}}function Wfe(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Wfe(t,r):FJe(t,r)}}function FJe(t,e){let n;for(n in e)if(Kfe.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function hX(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+xw({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+xw({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+xw({start:e.start,end:e.end})+") is still open")}function $Je(t){const e=this;e.parser=n;function n(r){return BJe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function zJe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function VJe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function HJe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function qJe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function GJe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function KJe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Ev(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function WJe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YJe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Yfe(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function JJe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Yfe(t,e);const i={src:Ev(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function XJe(t,e){const n={src:Ev(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function QJe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function ZJe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Yfe(t,e);const i={href:Ev(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function eXe(t,e){const n={href:Ev(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function tXe(t,e,n){const r=t.all(e),i=n?nXe(n):Jfe(e),s={},o=[];if(typeof e.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const d=r[a];(i||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function nXe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=Jfe(n[r])}return e}function Jfe(t){const e=t.spread;return e??t.children.length>1}function rXe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function iXe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function sXe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function oXe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function aXe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=DB(e.children[1]),l=Pfe(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function lXe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],m={},g=o?o[l]:void 0;g&&(m.align=g);let v={type:"element",tagName:s,properties:m,children:[]};h&&(v.children=t.all(h),t.patch(h,v),v=t.applyData(h,v)),c.push(v)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,d),t.applyData(e,d)}function cXe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const pX=9,mX=32;function uXe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(gX(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(gX(e.slice(i),i>0,!1)),s.join("")}function gX(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===pX||s===mX;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===pX||s===mX;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function dXe(t,e){const n={type:"text",value:uXe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function fXe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const hXe={blockquote:zJe,break:VJe,code:HJe,delete:qJe,emphasis:GJe,footnoteReference:KJe,heading:WJe,html:YJe,imageReference:JJe,image:XJe,inlineCode:QJe,linkReference:ZJe,link:eXe,listItem:tXe,list:rXe,paragraph:iXe,root:sXe,strong:oXe,table:aXe,tableCell:cXe,tableRow:lXe,text:dXe,thematicBreak:fXe,toml:qA,yaml:qA,definition:qA,footnoteDefinition:qA};function qA(){}const Xfe=-1,nP=0,bw=1,Ik=2,VB=3,HB=4,qB=5,GB=6,Qfe=7,Zfe=8,yX=typeof self=="object"?self:globalThis,pXe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case nP:case Xfe:return n(o,i);case bw:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Ik:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case VB:return n(new Date(o),i);case HB:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case qB:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case GB:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case Qfe:{const{name:a,message:l}=o;return n(new yX[a](l),i)}case Zfe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new yX[s](o),i)};return r},xX=t=>pXe(new Map,t)(0),hg="",{toString:mXe}={},{keys:gXe}=Object,Fb=t=>{const e=typeof t;if(e!=="object"||!t)return[nP,e];const n=mXe.call(t).slice(8,-1);switch(n){case"Array":return[bw,hg];case"Object":return[Ik,hg];case"Date":return[VB,hg];case"RegExp":return[HB,hg];case"Map":return[qB,hg];case"Set":return[GB,hg];case"DataView":return[bw,n]}return n.includes("Array")?[bw,n]:n.includes("Error")?[Qfe,n]:[Ik,n]},GA=([t,e])=>t===nP&&(e==="function"||e==="symbol"),yXe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Fb(o);switch(a){case nP:{let d=o;switch(l){case"bigint":a=Zfe,d=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return i([Xfe],o)}return i([a,d],o)}case bw:{if(l){let m=o;return l==="DataView"?m=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(o)),i([l,[...m]],o)}const d=[],h=i([a,d],o);for(const m of o)d.push(s(m));return h}case Ik:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const d=[],h=i([a,d],o);for(const m of gXe(o))(t||!GA(Fb(o[m])))&&d.push([s(m),s(o[m])]);return h}case VB:return i([a,o.toISOString()],o);case HB:{const{source:d,flags:h}=o;return i([a,{source:d,flags:h}],o)}case qB:{const d=[],h=i([a,d],o);for(const[m,g]of o)(t||!(GA(Fb(m))||GA(Fb(g))))&&d.push([s(m),s(g)]);return h}case GB:{const d=[],h=i([a,d],o);for(const m of o)(t||!GA(Fb(m)))&&d.push(s(m));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},vX=(t,{json:e,lossy:n}={})=>{const r=[];return yXe(!(e||n),!!e,new Map,r)(t),r},Rk=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?xX(vX(t,e)):structuredClone(t):(t,e)=>xX(vX(t,e));function xXe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function vXe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function bXe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||xXe,r=t.options.footnoteBackLabel||vXe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const d=t.all(c),h=String(c.identifier).toUpperCase(),m=Ev(h.toLowerCase());let g=0;const v=[],x=t.footnoteCounts.get(h);for(;x!==void 0&&++g<=x;){v.length>0&&v.push({type:"text",value:" "});let T=typeof n=="string"?n:n(l,g);typeof T=="string"&&(T={type:"text",value:T}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const b=d[d.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const T=b.children[b.children.length-1];T&&T.type==="text"?T.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...v)}else d.push(...v);const w={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(d,!0)};t.patch(c,w),a.push(w)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Rk(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const rP=(function(t){if(t==null)return AXe;if(typeof t=="function")return iP(t);if(typeof t=="object")return Array.isArray(t)?wXe(t):EXe(t);if(typeof t=="string")return SXe(t);throw new Error("Expected function, string, or object as test")});function wXe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=rP(t[n]);return iP(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function EXe(t){const e=t;return iP(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function SXe(t){return iP(e);function e(n){return n&&n.type===t}}function iP(t){return e;function e(n,r,i){return!!(TXe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function AXe(){return!0}function TXe(t){return t!==null&&typeof t=="object"&&"type"in t}const ehe=[],kXe=!0,XL=!1,NXe="skip";function the(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=rP(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,d){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const g=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=ehe,v,x,b;if((!e||s(l,c,d[d.length-1]||void 0))&&(g=CXe(n(l,d)),g[0]===XL))return g;if("children"in l&&l.children){const w=l;if(w.children&&g[0]!==NXe)for(x=(r?w.children.length:-1)+o,b=d.concat(w);x>-1&&x<w.children.length;){const T=w.children[x];if(v=a(T,x,b)(),v[0]===XL)return v;x=typeof v[1]=="number"?v[1]:x+o}}return g}}}function CXe(t){return Array.isArray(t)?t:typeof t=="number"?[kXe,t]:t==null?ehe:[t]}function KB(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),the(t,s,a,i);function a(l,c){const d=c[c.length-1],h=d?d.children.indexOf(l):void 0;return o(l,h,d)}}const QL={}.hasOwnProperty,PXe={};function _Xe(t,e){const n=e||PXe,r=new Map,i=new Map,s=new Map,o={...hXe,...n.handlers},a={all:c,applyData:RXe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:IXe,wrap:MXe};return KB(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:i,m=String(d.identifier).toUpperCase();h.has(m)||h.set(m,d)}}),a;function l(d,h){const m=d.type,g=a.handlers[m];if(QL.call(a.handlers,m)&&g)return g(a,d,h);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in d){const{children:x,...b}=d,w=Rk(b);return w.children=a.all(d),w}return Rk(d)}return(a.options.unknownHandler||OXe)(a,d,h)}function c(d){const h=[];if("children"in d){const m=d.children;let g=-1;for(;++g<m.length;){const v=a.one(m[g],d);if(v){if(g&&m[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=bX(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=bX(x.value))}Array.isArray(v)?h.push(...v):h.push(v)}}}return h}}function IXe(t,e){t.position&&(e.position=vWe(t))}function RXe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Rk(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function OXe(t,e){const n=e.data||{},r="value"in e&&!(QL.call(n,"hProperties")||QL.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function MXe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function bX(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function wX(t,e){const n=_Xe(t,e),r=n.one(t,void 0),i=bXe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function LXe(t,e){return t&&"run"in t?async function(n,r){const i=wX(n,{file:r,...e});await t.run(i,r)}:function(n,r){return wX(n,{file:r,...t||e})}}function EX(t){if(t)throw t}var lO,SX;function DXe(){if(SX)return lO;SX=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},s=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var d=t.call(c,"constructor"),h=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!d&&!h)return!1;var m;for(m in c);return typeof m>"u"||t.call(c,m)},o=function(c,d){n&&d.name==="__proto__"?n(c,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):c[d.name]=d.newValue},a=function(c,d){if(d==="__proto__")if(t.call(c,d)){if(r)return r(c,d).value}else return;return c[d]};return lO=function l(){var c,d,h,m,g,v,x=arguments[0],b=1,w=arguments.length,T=!1;for(typeof x=="boolean"&&(T=x,x=arguments[1]||{},b=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});b<w;++b)if(c=arguments[b],c!=null)for(d in c)h=a(x,d),m=a(c,d),x!==m&&(T&&m&&(s(m)||(g=i(m)))?(g?(g=!1,v=h&&i(h)?h:[]):v=h&&s(h)?h:{},o(x,{name:d,newValue:l(T,v,m)})):typeof m<"u"&&o(x,{name:d,newValue:m}));return x},lO}var jXe=DXe();const cO=bs(jXe);function ZL(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function BXe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const d=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,d?UXe(d,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function UXe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const d=c;if(a&&n)throw d;return i(d)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const uc={basename:FXe,dirname:$Xe,extname:zXe,join:VXe,sep:"/"};function FXe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');OE(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function $Xe(t){if(OE(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function zXe(t){OE(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function VXe(...t){let e=-1,n;for(;++e<t.length;)OE(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":HXe(n)}function HXe(t){OE(t);const e=t.codePointAt(0)===47;let n=qXe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function qXe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function OE(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const GXe={cwd:KXe};function KXe(){return"/"}function eD(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function WXe(t){if(typeof t=="string")t=new URL(t);else if(!eD(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return YXe(t)}function YXe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const uO=["history","path","basename","stem","extname","dirname"];class nhe{constructor(e){let n;e?eD(e)?n={path:e}:typeof e=="string"||JXe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":GXe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<uO.length;){const s=uO[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)uO.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?uc.basename(this.path):void 0}set basename(e){fO(e,"basename"),dO(e,"basename"),this.path=uc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?uc.dirname(this.path):void 0}set dirname(e){AX(this.basename,"dirname"),this.path=uc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?uc.extname(this.path):void 0}set extname(e){if(dO(e,"extname"),AX(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=uc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){eD(e)&&(e=WXe(e)),fO(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?uc.basename(this.path,this.extname):void 0}set stem(e){fO(e,"stem"),dO(e,"stem"),this.path=uc.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Gs(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function dO(t,e){if(t&&t.includes(uc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+uc.sep+"`")}function fO(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function AX(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function JXe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const XXe=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),QXe={}.hasOwnProperty;class WB extends XXe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=BXe()}copy(){const e=new WB;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(cO(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(mO("data",this.frozen),this.namespace[e]=n,this):QXe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(mO("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=KA(e),r=this.parser||this.Parser;return hO("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),hO("process",this.parser||this.Parser),pO("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=KA(e),l=r.parse(a);r.run(l,a,function(d,h,m){if(d||!h||!m)return c(d);const g=h,v=r.stringify(g,m);tQe(v)?m.value=v:m.result=v,c(d,m)});function c(d,h){d||!h?o(d):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),hO("processSync",this.parser||this.Parser),pO("processSync",this.compiler||this.Compiler),this.process(e,i),kX("processSync","process",n),r;function i(s,o){n=!0,EX(s),r=o}}run(e,n,r){TX(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=KA(n);i.run(e,l,c);function c(d,h,m){const g=h||e;d?a(d):o?o(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),kX("runSync","run",r),i;function s(o,a){EX(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=KA(n),i=this.compiler||this.Compiler;return pO("stringify",i),TX(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(mO("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...h]=c;l(d,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=cO(!0,i.settings,c.settings))}function a(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const h=c[d];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===c){m=h;break}if(m===-1)r.push([c,...d]);else if(d.length>0){let[g,...v]=d;const x=r[m][1];ZL(x)&&ZL(g)&&(g=cO(!0,x,g)),r[m]=[c,g,...v]}}}}const ZXe=new WB().freeze();function hO(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function pO(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function mO(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function TX(t){if(!ZL(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function kX(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function KA(t){return eQe(t)?t:new nhe(t)}function eQe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function tQe(t){return typeof t=="string"||nQe(t)}function nQe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const rQe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",NX=[],CX={allowDangerousHtml:!0},iQe=/^(https?|ircs?|mailto|xmpp)$/i,sQe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function oQe(t){const e=aQe(t),n=lQe(t);return cQe(e.runSync(e.parse(n),n),t)}function aQe(t){const e=t.rehypePlugins||NX,n=t.remarkPlugins||NX,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...CX}:CX;return ZXe().use($Je).use(n).use(LXe,r).use(e)}function lQe(t){const e=t.children||"",n=new nhe;return typeof e=="string"&&(n.value=e),n}function cQe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||uQe;for(const d of sQe)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+rQe+d.id,void 0);return KB(t,c),AWe(t,{Fragment:u.Fragment,components:i,ignoreInvalidStyle:!0,jsx:u.jsx,jsxs:u.jsxs,passKeys:!0,passNode:!0});function c(d,h,m){if(d.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let g;for(g in sO)if(Object.hasOwn(sO,g)&&Object.hasOwn(d.properties,g)){const v=d.properties[g],x=sO[g];(x===null||x.includes(d.tagName))&&(d.properties[g]=l(String(v||""),g,d))}}if(d.type==="element"){let g=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!g&&r&&typeof h=="number"&&(g=!r(d,h,m)),g&&m&&typeof h=="number")return a&&d.children?m.children.splice(h,1,...d.children):m.children.splice(h,1),h}}}function uQe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||iQe.test(t.slice(0,e))?t:""}function PX(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function dQe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function fQe(t,e,n){const i=rP((n||{}).ignore||[]),s=hQe(e);let o=-1;for(;++o<s.length;)the(t,"text",a);function a(c,d){let h=-1,m;for(;++h<d.length;){const g=d[h],v=m?m.children:void 0;if(i(g,v?v.indexOf(g):void 0,m))return;m=g}if(m)return l(c,d)}function l(c,d){const h=d[d.length-1],m=s[o][0],g=s[o][1];let v=0;const b=h.children.indexOf(c);let w=!1,T=[];m.lastIndex=0;let N=m.exec(c.value);for(;N;){const O=N.index,j={index:N.index,input:N.input,stack:[...d,c]};let _=g(...N,j);if(typeof _=="string"&&(_=_.length>0?{type:"text",value:_}:void 0),_===!1?m.lastIndex=O+1:(v!==O&&T.push({type:"text",value:c.value.slice(v,O)}),Array.isArray(_)?T.push(..._):_&&T.push(_),v=O+N[0].length,w=!0),!m.global)break;N=m.exec(c.value)}return w?(v<c.value.length&&T.push({type:"text",value:c.value.slice(v)}),h.children.splice(b,1,...T)):T=[c],b+T.length}}function hQe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([pQe(i[0]),mQe(i[1])])}return e}function pQe(t){return typeof t=="string"?new RegExp(dQe(t),"g"):t}function mQe(t){return typeof t=="function"?t:function(){return t}}const gO="phrasing",yO=["autolink","link","image","label"];function gQe(){return{transforms:[SQe],enter:{literalAutolink:xQe,literalAutolinkEmail:xO,literalAutolinkHttp:xO,literalAutolinkWww:xO},exit:{literalAutolink:EQe,literalAutolinkEmail:wQe,literalAutolinkHttp:vQe,literalAutolinkWww:bQe}}}function yQe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:gO,notInConstruct:yO},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:gO,notInConstruct:yO},{character:":",before:"[ps]",after:"\\/",inConstruct:gO,notInConstruct:yO}]}}function xQe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function xO(t){this.config.enter.autolinkProtocol.call(this,t)}function vQe(t){this.config.exit.autolinkProtocol.call(this,t)}function bQe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function wQe(t){this.config.exit.autolinkEmail.call(this,t)}function EQe(t){this.exit(t)}function SQe(t){fQe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,AQe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),TQe]],{ignore:["link","linkReference"]})}function AQe(t,e,n,r,i){let s="";if(!rhe(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!kQe(n)))return!1;const o=NQe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function TQe(t,e,n,r){return!rhe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function kQe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function NQe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=PX(t,"(");let s=PX(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function rhe(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Wm(n)||eP(n))&&(!e||n!==47)}ihe.peek=DQe;function CQe(){this.buffer()}function PQe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function _Qe(){this.buffer()}function IQe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function RQe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function OQe(t){this.exit(t)}function MQe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function LQe(t){this.exit(t)}function DQe(){return"["}function ihe(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function jQe(){return{enter:{gfmFootnoteCallString:CQe,gfmFootnoteCall:PQe,gfmFootnoteDefinitionLabelString:_Qe,gfmFootnoteDefinition:IQe},exit:{gfmFootnoteCallString:RQe,gfmFootnoteCall:OQe,gfmFootnoteDefinitionLabelString:MQe,gfmFootnoteDefinition:LQe}}}function BQe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:ihe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),d=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),d(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?she:UQe))),c(),l}}function UQe(t,e,n){return e===0?t:she(t,e,n)}function she(t,e,n){return(n?"":"    ")+t}const FQe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ohe.peek=qQe;function $Qe(){return{canContainEols:["delete"],enter:{strikethrough:VQe},exit:{strikethrough:HQe}}}function zQe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:FQe}],handlers:{delete:ohe}}}function VQe(t){this.enter({type:"delete",children:[]},t)}function HQe(t){this.exit(t)}function ohe(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function qQe(){return"~"}function GQe(t){return t.length}function KQe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||GQe,s=[],o=[],a=[],l=[];let c=0,d=-1;for(;++d<t.length;){const x=[],b=[];let w=-1;for(t[d].length>c&&(c=t[d].length);++w<t[d].length;){const T=WQe(t[d][w]);if(n.alignDelimiters!==!1){const N=i(T);b[w]=N,(l[w]===void 0||N>l[w])&&(l[w]=N)}x.push(T)}o[d]=x,a[d]=b}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<c;)s[h]=_X(r[h]);else{const x=_X(r);for(;++h<c;)s[h]=x}h=-1;const m=[],g=[];for(;++h<c;){const x=s[h];let b="",w="";x===99?(b=":",w=":"):x===108?b=":":x===114&&(w=":");let T=n.alignDelimiters===!1?1:Math.max(1,l[h]-b.length-w.length);const N=b+"-".repeat(T)+w;n.alignDelimiters!==!1&&(T=b.length+T+w.length,T>l[h]&&(l[h]=T),g[h]=T),m[h]=N}o.splice(1,0,m),a.splice(1,0,g),d=-1;const v=[];for(;++d<o.length;){const x=o[d],b=a[d];h=-1;const w=[];for(;++h<c;){const T=x[h]||"";let N="",O="";if(n.alignDelimiters!==!1){const j=l[h]-(b[h]||0),_=s[h];_===114?N=" ".repeat(j):_===99?j%2?(N=" ".repeat(j/2+.5),O=" ".repeat(j/2-.5)):(N=" ".repeat(j/2),O=N):O=" ".repeat(j)}n.delimiterStart!==!1&&!h&&w.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&T==="")&&(n.delimiterStart!==!1||h)&&w.push(" "),n.alignDelimiters!==!1&&w.push(N),w.push(T),n.alignDelimiters!==!1&&w.push(O),n.padding!==!1&&w.push(" "),(n.delimiterEnd!==!1||h!==c-1)&&w.push("|")}v.push(n.delimiterEnd===!1?w.join("").replace(/ +$/,""):w.join(""))}return v.join(`
`)}function WQe(t){return t==null?"":String(t)}function _X(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function YQe(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),JQe);return i(),o}function JQe(t,e,n){return">"+(n?"":" ")+t}function XQe(t,e){return IX(t,e.inConstruct,!0)&&!IX(t,e.notInConstruct,!1)}function IX(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function RX(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&XQe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function QQe(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function ZQe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function eZe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function tZe(t,e,n,r){const i=eZe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(ZQe(t,n)){const h=n.enter("codeIndented"),m=n.indentLines(s,nZe);return h(),m}const a=n.createTracker(r),l=i.repeat(Math.max(QQe(s,i)+1,3)),c=n.enter("codeFenced");let d=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);d+=a.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);d+=a.move(" "),d+=a.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...a.current()})),h()}return d+=a.move(`
`),s&&(d+=a.move(s+`
`)),d+=a.move(l),c(),d}function nZe(t,e,n){return(n?"":"    ")+t}function YB(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function rZe(t,e,n,r){const i=YB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function iZe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function w1(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Ok(t,e,n){const r=Bx(t),i=Bx(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}ahe.peek=sZe;function ahe(t,e,n,r){const i=iZe(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),d=Ok(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(l=w1(c)+l.slice(1));const h=l.charCodeAt(l.length-1),m=Ok(r.after.charCodeAt(0),h,i);m.inside&&(l=l.slice(0,-1)+w1(h));const g=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},a+l+g}function sZe(t,e,n){return n.options.emphasis||"*"}function oZe(t,e){let n=!1;return KB(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,XL}),!!((!t.depth||t.depth<3)&&FB(t)&&(e.options.setext||n))}function aZe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(oZe(t,n)){const d=n.enter("headingSetext"),h=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),d(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=w1(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}lhe.peek=lZe;function lhe(t){return t.value||""}function lZe(){return"<"}che.peek=cZe;function che(t,e,n,r){const i=YB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function cZe(){return"!"}uhe.peek=uZe;function uhe(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function uZe(){return"!"}dhe.peek=dZe;function dhe(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function dZe(){return"`"}function fhe(t,e){const n=FB(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}hhe.peek=fZe;function hhe(t,e,n,r){const i=YB(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(fhe(t,n)){const d=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=d,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function fZe(t,e,n){return fhe(t,n)?"<":"["}phe.peek=hZe;function phe(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function hZe(){return"["}function JB(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function pZe(t){const e=JB(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function mZe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function mhe(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function gZe(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?mZe(n):JB(n);const a=t.ordered?o==="."?")":".":pZe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),mhe(n)===o&&d){let h=-1;for(;++h<t.children.length;){const m=t.children[h];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function yZe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function xZe(t,e,n,r){const i=yZe(n);let s=n.bulletCurrent||JB(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),d);return l(),c;function d(h,m,g){return m?(g?"":" ".repeat(o))+h:(g?s:s+" ".repeat(o-s.length))+h}}function vZe(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const bZe=rP(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function wZe(t,e,n,r){return(t.children.some(function(o){return bZe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function EZe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}ghe.peek=SZe;function ghe(t,e,n,r){const i=EZe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),d=Ok(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(l=w1(c)+l.slice(1));const h=l.charCodeAt(l.length-1),m=Ok(r.after.charCodeAt(0),h,i);m.inside&&(l=l.slice(0,-1)+w1(h));const g=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},a+l+g}function SZe(t,e,n){return n.options.strong||"*"}function AZe(t,e,n,r){return n.safe(t.value,r)}function TZe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function kZe(t,e,n){const r=(mhe(n)+(n.options.ruleSpaces?" ":"")).repeat(TZe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const yhe={blockquote:YQe,break:RX,code:tZe,definition:rZe,emphasis:ahe,hardBreak:RX,heading:aZe,html:lhe,image:che,imageReference:uhe,inlineCode:dhe,link:hhe,linkReference:phe,list:gZe,listItem:xZe,paragraph:vZe,root:wZe,strong:ghe,text:AZe,thematicBreak:kZe};function NZe(){return{enter:{table:CZe,tableData:OX,tableHeader:OX,tableRow:_Ze},exit:{codeText:IZe,table:PZe,tableData:vO,tableHeader:vO,tableRow:vO}}}function CZe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function PZe(t){this.exit(t),this.data.inTable=void 0}function _Ze(t){this.enter({type:"tableRow",children:[]},t)}function vO(t){this.exit(t)}function OX(t){this.enter({type:"tableCell",children:[]},t)}function IZe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,RZe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function RZe(t,e){return e==="|"?e:t}function OZe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:l,tableRow:a}};function o(g,v,x,b){return c(d(g,x,b),g.align)}function a(g,v,x,b){const w=h(g,x,b),T=c([w]);return T.slice(0,T.indexOf(`
`))}function l(g,v,x,b){const w=x.enter("tableCell"),T=x.enter("phrasing"),N=x.containerPhrasing(g,{...b,before:s,after:s});return T(),w(),N}function c(g,v){return KQe(g,{align:v,alignDelimiters:r,padding:n,stringLength:i})}function d(g,v,x){const b=g.children;let w=-1;const T=[],N=v.enter("table");for(;++w<b.length;)T[w]=h(b[w],v,x);return N(),T}function h(g,v,x){const b=g.children;let w=-1;const T=[],N=v.enter("tableRow");for(;++w<b.length;)T[w]=l(b[w],g,v,x);return N(),T}function m(g,v,x){let b=yhe.inlineCode(g,v,x);return x.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function MZe(){return{exit:{taskListCheckValueChecked:MX,taskListCheckValueUnchecked:MX,paragraph:DZe}}}function LZe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:jZe}}}function MX(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function DZe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function jZe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=yhe.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(d){return d+o}}function BZe(){return[gQe(),jQe(),$Qe(),NZe(),MZe()]}function UZe(t){return{extensions:[yQe(),BQe(t),zQe(),OZe(t),LZe()]}}const FZe={tokenize:GZe,partial:!0},xhe={tokenize:KZe,partial:!0},vhe={tokenize:WZe,partial:!0},bhe={tokenize:YZe,partial:!0},$Ze={tokenize:JZe,partial:!0},whe={name:"wwwAutolink",tokenize:HZe,previous:She},Ehe={name:"protocolAutolink",tokenize:qZe,previous:Ahe},Gd={name:"emailAutolink",tokenize:VZe,previous:The},Zc={};function zZe(){return{text:Zc}}let xp=48;for(;xp<123;)Zc[xp]=Gd,xp++,xp===58?xp=65:xp===91&&(xp=97);Zc[43]=Gd;Zc[45]=Gd;Zc[46]=Gd;Zc[95]=Gd;Zc[72]=[Gd,Ehe];Zc[104]=[Gd,Ehe];Zc[87]=[Gd,whe];Zc[119]=[Gd,whe];function VZe(t,e,n){const r=this;let i,s;return o;function o(h){return!tD(h)||!The.call(r,r.previous)||XB(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return tD(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check($Ze,d,c)(h):h===45||h===95||Fs(h)?(s=!0,t.consume(h),l):d(h)}function c(h){return t.consume(h),i=!0,l}function d(h){return s&&i&&no(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function HZe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!She.call(r,r.previous)||XB(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(FZe,t.attempt(xhe,t.attempt(vhe,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function qZe(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&Ahe.call(r,r.previous)&&!XB(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(no(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const m=i.toLowerCase();if(m==="http"||m==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),s?c:(s=!0,l)):n(h)}function c(h){return h===null||_k(h)||dr(h)||Wm(h)||eP(h)?n(h):t.attempt(xhe,t.attempt(vhe,d),n)(h)}function d(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function GZe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function KZe(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(bhe,l,a)(c):c===null||dr(c)||Wm(c)||c!==45&&eP(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function WZe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(bhe,e,s)(o):o===null||dr(o)||Wm(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function YZe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||dr(a)||Wm(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||dr(a)||Wm(a)?e(a):r(a)}function s(a){return no(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):no(a)?(t.consume(a),o):n(a)}}function JZe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Fs(s)?n(s):e(s)}}function She(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||dr(t)}function Ahe(t){return!no(t)}function The(t){return!(t===47||tD(t))}function tD(t){return t===43||t===45||t===46||t===95||Fs(t)}function XB(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const XZe={tokenize:set,partial:!0};function QZe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:net,continuation:{tokenize:ret},exit:iet}},text:{91:{name:"gfmFootnoteCall",tokenize:tet},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:ZZe,resolveTo:eet}}}}function ZZe(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=zl(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function eet(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function tet(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||dr(h))return n(h);if(h===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return i.includes(zl(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return dr(h)||(o=!0),s++,t.consume(h),h===92?d:c}function d(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function net(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(v)}function d(v){if(o>999||v===93&&!a||v===null||v===91||dr(v))return n(v);if(v===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return s=zl(r.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return dr(v)||(a=!0),o++,t.consume(v),v===92?h:d}function h(v){return v===91||v===92||v===93?(t.consume(v),o++,d):d(v)}function m(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),i.includes(s)||i.push(s),In(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function ret(t,e,n){return t.check(RE,e,t.attempt(XZe,e,n))}function iet(t){t.exit("gfmFootnoteDefinition")}function set(t,e,n){const r=this;return In(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function oet(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},m=[["enter",d,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],g=a.parser.constructs.insideSpan.null;g&&fa(m,m.length,0,tP(g,o.slice(c+1,l),a)),fa(m,m.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",d,a]]),fa(o,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,d=this.events;let h=0;return m;function m(v){return c===126&&d[d.length-1][1].type!=="characterEscape"?l(v):(o.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const x=Bx(c);if(v===126)return h>1?l(v):(o.consume(v),h++,g);if(h<2&&!n)return l(v);const b=o.exit("strikethroughSequenceTemporary"),w=Bx(v);return b._open=!w||w===2&&!!x,b._close=!x||x===2&&!!w,a(v)}}}class aet{constructor(){this.map=[]}add(e,n,r){cet(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function cet(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function uet(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function det(){return{flow:{null:{name:"table",tokenize:fet,resolveAll:het}}}}function fet(t,e,n){const r=this;let i=0,s=0,o;return a;function a($){let G=r.events.length-1;for(;G>-1;){const A=r.events[G][1].type;if(A==="lineEnding"||A==="linePrefix")G--;else break}const H=G>-1?r.events[G][1].type:null,U=H==="tableHead"||H==="tableRow"?_:l;return U===_&&r.parser.lazy[r.now().line]?n($):U($)}function l($){return t.enter("tableHead"),t.enter("tableRow"),c($)}function c($){return $===124||(o=!0,s+=1),d($)}function d($){return $===null?n($):Wt($)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),g):n($):An($)?In(t,d,"whitespace")($):(s+=1,o&&(o=!1,i+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,d):(t.enter("data"),h($)))}function h($){return $===null||$===124||dr($)?(t.exit("data"),d($)):(t.consume($),$===92?m:h)}function m($){return $===92||$===124?(t.consume($),h):h($)}function g($){return r.interrupt=!1,r.parser.lazy[r.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,An($)?In(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):v($))}function v($){return $===45||$===58?b($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),x):j($)}function x($){return An($)?In(t,b,"whitespace")($):b($)}function b($){return $===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),w):$===45?(s+=1,w($)):$===null||Wt($)?O($):j($)}function w($){return $===45?(t.enter("tableDelimiterFiller"),T($)):j($)}function T($){return $===45?(t.consume($),T):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),N):(t.exit("tableDelimiterFiller"),N($))}function N($){return An($)?In(t,O,"whitespace")($):O($)}function O($){return $===124?v($):$===null||Wt($)?!o||i!==s?j($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):j($)}function j($){return n($)}function _($){return t.enter("tableRow"),F($)}function F($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),F):$===null||Wt($)?(t.exit("tableRow"),e($)):An($)?In(t,F,"whitespace")($):(t.enter("data"),z($))}function z($){return $===null||$===124||dr($)?(t.exit("data"),F($)):(t.consume($),$===92?D:z)}function D($){return $===92||$===124?(t.consume($),z):z($)}}function het(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,d,h;const m=new aet;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(a=!1,l!==0&&(LX(m,e,l,c,d),d=void 0,l=0),c={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(n,0,[["enter",c,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,d={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(n,0,[["enter",d,e]])),i=v.type==="tableDelimiterRow"?2:d?3:1):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=WA(m,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=WA(m,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):v.type==="tableHead"?(a=!0,l=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],h=WA(m,e,s,i,n,h)):o[1]!==0&&(h=WA(m,e,o,i,n,h)),i=0):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&LX(m,e,l,c,d),m.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=uet(e.events,n))}return t}function WA(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Ig(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Ig(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=Ig(e.events,n[2]),d=Ig(e.events,n[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const m=e.events[n[2]],g=e.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,x=n[3]-n[2]-1;t.add(v,x,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},Ig(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function LX(t,e,n,r,i){const s=[],o=Ig(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Ig(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const pet={name:"tasklistCheck",tokenize:get};function met(){return{text:{91:pet}}}function get(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return dr(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Wt(l)?e(l):An(l)?t.check({tokenize:yet},e,n)(l):n(l)}}function yet(t,e,n){return In(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function xet(t){return Dfe([zZe(),QZe(),oet(t),det(),met()])}const vet={};function bet(t){const e=this,n=t||vet,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(xet(n)),s.push(BZe()),o.push(UZe(n))}const Zs=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:kt("rounded border border-[#232328] bg-[#14151a] text-card-foreground shadow-sm",t),...e}));Zs.displayName="Card";const nD=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:kt("flex flex-col space-y-1.5 p-6",t),...e}));nD.displayName="CardHeader";const rD=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:kt("font-semibold leading-none tracking-tight text-white",t),...e}));rD.displayName="CardTitle";const iD=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:kt("text-sm text-muted-foreground",t),...e}));iD.displayName="CardDescription";const Ru=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:kt("p-6 pt-0",t),...e}));Ru.displayName="CardContent";const wet=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:kt("flex items-center p-6 pt-0",t),...e}));wet.displayName="CardFooter";const Eet=({messages:t})=>{const e=S.useRef(null),n=S.useMemo(()=>{const r=[];return t.forEach(i=>{i.role==="model"&&i.toolResults&&i.toolResults.length>0&&i.toolResults.forEach(s=>{if(s.type==="error")return;const o=s.title||"",a=s.details||"";if(o.includes("Swap")||o.includes("Order")||o.includes("Transfer")||o.includes("Withdraw")||o.includes("Position")||o.includes("Leverage")){let l="info";o.includes("Swap")?l="swap":o.includes("Order")||o.includes("Position")||o.includes("Leverage")?l="order":(o.includes("Transfer")||o.includes("Withdraw"))&&(l="transfer"),r.push({type:l,title:o,details:a.split(`
`)[0]||a,subDetails:s.tx?"Transaction Executed":void 0,timestamp:i.timestamp,tx:s.tx})}else o.includes("Task")||o.includes("Scheduled")?r.push({type:"info",title:o,details:a,timestamp:i.timestamp}):o.includes("Price")||o.includes("OHLCV")||o.includes("Indicator")||o.includes("TradingView")||o.includes("Summary")||o.includes("Market Data")?r.push({type:"price",title:o,details:a,timestamp:i.timestamp}):o.includes("Balance")?r.push({type:"balance",title:"Balance Checked",details:a.split(`
`)[0],subDetails:"View specific assets in chat",timestamp:i.timestamp}):r.push({type:"info",title:o,details:a.substring(0,100)+(a.length>100?"...":""),timestamp:i.timestamp})})}),r},[t]);return S.useEffect(()=>{e.current&&e.current.scrollTo({top:e.current.scrollHeight,behavior:"smooth"})},[n.length]),n.length===0?null:u.jsxs("div",{ref:e,className:"w-full h-full overflow-y-auto pr-1 custom-scrollbar space-y-3 pb-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 sticky top-0 bg-slate-900/90 backdrop-blur-sm py-2 z-10",children:[u.jsx(ys,{size:12,className:"text-indigo-400"}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500",children:"Activity Feed"})]}),u.jsx(Wi,{children:n.map((r,i)=>{var l;const s=r.tx,o=r.title.includes("Hyperliquid")||r.title.includes("Order"),a=s?o?`https://app.hyperliquid.xyz/explorer/tx/${s}`:`https://solscan.io/tx/${s}`:null;return u.jsx(_t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.05},children:u.jsxs(Zs,{className:"p-3 relative overflow-hidden group hover:border-indigo-500/30 transition-all duration-300",children:[u.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-indigo-500/5 rounded-full blur-xl -z-10 transition-all duration-700 group-hover:bg-indigo-500/10"}),u.jsx("div",{className:"flex items-center justify-between mb-1.5",children:u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:kt("w-1 h-1 rounded-full",r.type==="error"?"bg-red-500":"bg-indigo-500")}),u.jsx("span",{className:"text-[9px] text-slate-600 font-mono",children:new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"text-xs font-bold text-white leading-tight",children:r.title}),u.jsx("div",{className:"py-1",children:r.type==="swap"?u.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:u.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}):r.type==="price"&&r.details.includes(":")&&!r.details.includes(`
`)?u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("div",{className:"text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:(l=r.details.split(":")[1])==null?void 0:l.trim()}),u.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:r.details.split(":")[0]})]}):u.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}),u.jsxs("div",{className:"flex items-center justify-between mt-1 pt-1 border-t border-slate-800/50",children:[r.subDetails&&!s&&u.jsx("div",{className:"flex items-center gap-1.5 text-[10px] text-emerald-400 font-medium",children:r.subDetails}),s&&u.jsxs("a",{href:a||"#",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-[10px] text-indigo-400 hover:text-indigo-300 transition-colors group/link ml-auto",children:["View Transaction",u.jsx(dre,{size:10,className:"group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]})]})]})]})},`${r.timestamp}-${i}`)})})]})},khe={meteora:{label:"Meteora",shortLabel:"MET",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"rgba(139, 92, 246, 0.3)"},raydium:{label:"Raydium",shortLabel:"RAY",color:"#14B8A6",bgColor:"rgba(20, 184, 166, 0.15)",borderColor:"rgba(20, 184, 166, 0.3)"},hyperliquid:{label:"Hyperliquid",shortLabel:"HL",color:"#E7FE55",bgColor:"rgba(231, 254, 85, 0.15)",borderColor:"rgba(231, 254, 85, 0.3)"},solana:{label:"Solana",shortLabel:"SOL",color:"#9945FF",bgColor:"rgba(153, 69, 255, 0.15)",borderColor:"rgba(153, 69, 255, 0.3)"},polymarket:{label:"Polymarket",shortLabel:"PM",color:"#2563EB",bgColor:"rgba(37, 99, 235, 0.15)",borderColor:"rgba(37, 99, 235, 0.3)"}};function sD(t,e){switch(t){case"meteora":return`https://app.meteora.ag/pools/${e}`;case"raydium":return`https://raydium.io/liquidity-v2/?mode=add&pool_id=${e}`;default:return""}}function Aet(t,e){switch(t){case"solana":return`https://solscan.io/tx/${e}`;case"hyperliquid":return`https://app.hyperliquid.xyz/explorer/tx/${e}`;case"polygon":return`https://polygonscan.com/tx/${e}`;default:return""}}function E1(t,e={}){if(t==null||isNaN(t))return"N/A";const{prefix:n="$",suffix:r="",decimals:i=2,showSign:s=!1}=e,o=Math.abs(t),a=s&&t>0?"+":t<0?"-":"";let l,c="";return o>=1e9?(l=(o/1e9).toFixed(i),c="B"):o>=1e6?(l=(o/1e6).toFixed(i),c="M"):o>=1e3?(l=(o/1e3).toFixed(i),c="K"):o>=1?l=o.toFixed(i):o>0?l=o.toFixed(Math.max(i,4)):l="0",l=l.replace(/\.?0+$/,""),c&&!l.includes(".")&&(l+=".0"),`${a}${n}${l}${c}${r}`}function Gf(t,e={}){if(t==null||isNaN(t))return"N/A";const{decimals:n=2,showSign:r=!1,isRaw:i=!0}=e,s=i?t:t*100;return`${r&&s>0?"+":""}${s.toFixed(n)}%`}function Nhe(t,e={}){if(t==null||isNaN(t))return"N/A";const{symbol:n="",maxDecimals:r=6,minDecimals:i=2}=e;let s;return t>=1e3?s=t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):t>=1?s=t.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:Math.min(4,r)}):t>0?s=t.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:r}):s="0",n?`${s} ${n}`:s}function oD(t,e={}){if(t==null||isNaN(t))return"N/A";const{compact:n=!1,showSign:r=!1,decimals:i=2}=e;return n?E1(t,{prefix:"$",showSign:r,decimals:i}):`${r&&t>0?"+":""}$${Math.abs(t).toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:i})}`}function DX(t,e={}){if(!t)return"N/A";const{startChars:n=6,endChars:r=4}=e;return t.length<=n+r+3?t:`${t.slice(0,n)}...${t.slice(-r)}`}const QB=({protocol:t,size:e="sm",showLabel:n=!1,className:r})=>{const i=khe[t];if(!i)return null;const s={sm:"text-[9px] px-1.5 py-0.5",md:"text-[10px] px-2 py-1",lg:"text-xs px-2.5 py-1"};return u.jsx("span",{className:kt("inline-flex items-center font-bold uppercase tracking-wider rounded",s[e],r),style:{color:i.color,backgroundColor:i.bgColor,border:`1px solid ${i.borderColor}`},children:n?i.label:i.shortLabel})},jX=({data:t,index:e=0,compact:n=!1,className:r})=>{const i=t.poolUrl||sD(t.protocol,t.poolAddress),s=o=>{o.preventDefault(),i&&window.open(i,"_blank","noopener,noreferrer")};return u.jsxs(_t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:kt("bg-[#1a1b21] border border-[#232328] rounded-lg p-3 group","hover:border-[#E7FE55]/30 transition-all duration-300","relative overflow-hidden",r),children:[u.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-[#E7FE55]/5 rounded-full blur-2xl -z-0 opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsxs("div",{className:"flex items-center justify-between mb-2 relative z-10",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(QB,{protocol:t.protocol,size:"sm"}),u.jsxs("span",{className:"text-sm font-bold text-white",children:[t.tokenA.symbol," / ",t.tokenB.symbol]})]}),i&&u.jsx("button",{onClick:s,className:"p-1.5 rounded hover:bg-[#E7FE55]/10 text-[#747580] hover:text-[#E7FE55] transition-colors",title:"Open Pool",children:u.jsx(gd,{size:14})})]}),u.jsxs("div",{className:kt("grid gap-2 text-[11px] relative z-10",n?"grid-cols-2":"grid-cols-3"),children:[t.volume24h!==void 0&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(dn,{size:12,className:"text-[#60a5fa]"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider",children:"Vol"}),u.jsx("div",{className:"font-semibold text-white",children:E1(t.volume24h)})]})]}),t.tvl!==void 0&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(jw,{size:12,className:"text-[#8b5cf6]"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider",children:"TVL"}),u.jsx("div",{className:"font-semibold text-white",children:E1(t.tvl)})]})]}),t.apy!==void 0&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(eke,{size:12,className:"text-[#34d399]"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider",children:"APY"}),u.jsx("div",{className:kt("font-semibold",t.apy>0?"text-[#34d399]":"text-white"),children:Gf(t.apy)})]})]})]}),t.currentPrice!==void 0&&!n&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-[#232328] text-[10px] text-[#747580] relative z-10",children:["Price: ",u.jsxs("span",{className:"text-white font-mono",children:["$",t.currentPrice.toFixed(4)]})]})]})},Tet={solana:{color:"#9945FF",label:"Solana"},hyperliquid:{color:"#E7FE55",label:"Hyperliquid"},polygon:{color:"#8247E5",label:"Polygon"}},aD=({data:t,index:e=0,className:n})=>{const r=Tet[t.network],i=t.valueUsd!==void 0&&t.valueUsd>0;return u.jsxs(_t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:kt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",n),children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:`${r.color}15`,border:`1px solid ${r.color}30`},children:u.jsx(kh,{size:16,style:{color:r.color}})}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-white",children:[t.token.symbol," Balance"]}),u.jsx("div",{className:"text-[10px] text-[#747580]",children:r.label})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xl font-bold text-white",children:Nhe(t.amount,{symbol:t.token.symbol})}),t.valueUsd!==void 0&&u.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[u.jsx("span",{className:"text-[#747580]",children:""}),u.jsx("span",{className:kt("font-medium",i?"text-[#34d399]":"text-[#747580]"),children:oD(t.valueUsd)})]})]})]})},ket=({balances:t,className:e})=>u.jsx("div",{className:kt("grid grid-cols-1 sm:grid-cols-2 gap-3",e),children:t.map((n,r)=>u.jsx(aD,{data:n,index:r},`${n.network}-${n.token.symbol}-${r}`))}),Net={success:{icon:Im,color:"#34d399",bgColor:"rgba(52, 211, 153, 0.1)",borderColor:"rgba(52, 211, 153, 0.3)",label:"Success"},pending:{icon:Qr,color:"#fbbf24",bgColor:"rgba(251, 191, 36, 0.1)",borderColor:"rgba(251, 191, 36, 0.3)",label:"Pending"},failed:{icon:Rm,color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)",label:"Failed"}},Cet=({data:t,index:e=0,className:n})=>{const r=Net[t.status],i=r.icon,s=t.explorerUrl||(t.txHash?Aet(t.network,t.txHash):null),o=a=>{a.preventDefault(),s&&window.open(s,"_blank","noopener,noreferrer")};return u.jsxs(_t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:kt("bg-[#1a1b21] border rounded-lg p-4 group","transition-all duration-300",n),style:{borderColor:r.borderColor},children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:r.bgColor},children:u.jsx(i,{size:16,style:{color:r.color}})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold text-white",children:t.title}),u.jsx("div",{className:"text-[10px]",style:{color:r.color},children:r.label})]})]})}),t.details&&u.jsxs("div",{className:"p-3 rounded-lg mb-3 text-sm",style:{backgroundColor:r.bgColor},children:[t.details.amount!==void 0&&t.details.token&&u.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[u.jsx("span",{children:Nhe(t.details.amount,{symbol:t.details.token})}),t.details.from&&t.details.to&&u.jsxs(u.Fragment,{children:[u.jsx(kN,{size:14,className:"text-[#747580]"}),u.jsx("span",{className:"text-[#747580] text-xs font-mono",children:DX(t.details.to)})]})]}),t.details.fee!==void 0&&u.jsxs("div",{className:"text-[10px] text-[#747580] mt-1",children:["Fee: $",t.details.fee.toFixed(2)]})]}),t.description&&u.jsx("p",{className:"text-xs text-[#a0a0a8] mb-3",children:t.description}),s&&u.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 text-[11px] text-[#60a5fa] hover:text-[#93c5fd] transition-colors group/link",children:["View Transaction",u.jsx(gd,{size:12,className:"group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]}),t.txHash&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-[#232328] text-[9px] font-mono text-[#747580]",children:["TX: ",DX(t.txHash,{startChars:10,endChars:8})]})]})},Pet={high:{color:"#34d399",label:"High",emoji:""},medium:{color:"#fbbf24",label:"Medium",emoji:""},low:{color:"#ef4444",label:"Low",emoji:""}},_et={conservative:{color:"#34d399",bgColor:"rgba(52, 211, 153, 0.1)",emoji:""},moderate:{color:"#fbbf24",bgColor:"rgba(251, 191, 36, 0.1)",emoji:""},aggressive:{color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",emoji:""}},Iet=({data:t,rangeSuggestions:e,index:n=0,className:r,onSendMessage:i})=>{const s=Pet[t.confidence],o=t.priceChange24h!==void 0&&t.priceChange24h>=0,a=t.priceChange7d!==void 0&&t.priceChange7d>=0;return u.jsxs(_t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:n*.05},className:kt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",r),children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-[#60a5fa]/10 border border-[#60a5fa]/30 flex items-center justify-center",children:u.jsx(fre,{size:16,className:"text-[#60a5fa]"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm font-semibold text-white",children:t.poolName||`Pool ${t.poolAddress.slice(0,8)}...`}),u.jsx(QB,{protocol:t.protocol,size:"sm"})]}),u.jsx("div",{className:"text-[10px] text-[#747580]",children:"Volatility Analysis"})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-xs font-mono text-white",children:["$",t.currentPrice.toFixed(4)]}),u.jsx("div",{className:"text-[9px] text-[#747580]",children:"Current Price"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[u.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-4",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Volume 24h"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg font-bold text-[#f59e0b]",children:E1(t.volume24h||0)}),t.volumeChange24h!==void 0&&u.jsxs("div",{className:kt("text-xs flex items-center gap-0.5",t.volumeChange24h>=0?"text-[#34d399]":"text-[#ef4444]"),children:[t.volumeChange24h>=0?u.jsx(dn,{size:12}):u.jsx(ld,{size:12}),Gf(Math.abs(t.volumeChange24h))]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-4",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"APY"}),u.jsx("div",{className:kt("text-lg font-bold",(t.apy||0)>0?"text-[#34d399]":"text-[#747580]"),children:Gf(t.apy||0)})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-4",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Daily Volatility"}),u.jsx("div",{className:"text-lg font-bold text-[#60a5fa]",children:Gf(t.volatilityDaily)})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-4",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Monthly Volatility"}),u.jsx("div",{className:"text-lg font-bold text-[#8b5cf6]",children:Gf(t.volatilityAnnualized/Math.sqrt(12))})]})]}),u.jsxs("div",{className:"flex items-center gap-4 text-xs mb-4",children:[t.tvl!==void 0&&u.jsxs("div",{className:"text-[#747580]",children:["TVL: ",u.jsx("span",{className:"text-white font-medium",children:E1(t.tvl)})]}),t.priceChange24h!==void 0&&u.jsxs("div",{className:"flex items-center gap-1",children:[o?u.jsx(dn,{size:12,className:"text-[#34d399]"}):u.jsx(ld,{size:12,className:"text-[#ef4444]"}),u.jsx("span",{className:o?"text-[#34d399]":"text-[#ef4444]",children:Gf(t.priceChange24h,{showSign:!0})}),u.jsx("span",{className:"text-[#747580]",children:"24h"})]}),t.priceChange7d!==void 0&&u.jsxs("div",{className:"flex items-center gap-1",children:[a?u.jsx(dn,{size:12,className:"text-[#34d399]"}):u.jsx(ld,{size:12,className:"text-[#ef4444]"}),u.jsx("span",{className:a?"text-[#34d399]":"text-[#ef4444]",children:Gf(t.priceChange7d,{showSign:!0})}),u.jsx("span",{className:"text-[#747580]",children:"7d"})]})]}),e&&e.length>0&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsx("span",{className:"text-[10px] text-[#747580] uppercase tracking-wider font-medium",children:"Suggested Ranges"})]}),u.jsx("div",{className:"space-y-2",children:e.map((l,c)=>{const d=_et[l.strategy];return u.jsxs("div",{className:"group/range p-3 rounded-lg border transition-all duration-300 hover:scale-[1.01]",style:{backgroundColor:d.bgColor,borderColor:`${d.color}20`},children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold uppercase tracking-wide",style:{color:d.color},children:[d.emoji," ",l.strategy]}),u.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full font-mono",style:{backgroundColor:`${d.color}20`,color:d.color},children:["",l.sigmaMultiple,""]})]}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-medium",children:[l.widthPercent.toFixed(1),"% width"]})]}),u.jsxs("div",{className:"bg-[#0f1015]/60 rounded-md px-3 py-2 mb-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase",children:"Min"}),u.jsx("div",{className:"text-[9px] text-[#747580] uppercase",children:"Max"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"font-mono text-sm text-white font-semibold",children:["$",l.priceMin.toFixed(4)]}),u.jsx("div",{className:"flex-1 mx-3 h-px bg-gradient-to-r from-transparent via-[#747580]/30 to-transparent"}),u.jsxs("span",{className:"font-mono text-sm text-white font-semibold",children:["$",l.priceMax.toFixed(4)]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-[#a0a0a8]",children:[u.jsx(ys,{size:10,className:"text-[#747580]"}),u.jsx("span",{children:l.estimatedTimeInRange})]}),i&&u.jsxs("button",{onClick:()=>{const m=`Adicionar liquidez na pool ${t.poolName||t.poolAddress.slice(0,8)} com range ${l.strategy}: min $${l.priceMin.toFixed(4)}, max $${l.priceMax.toFixed(4)}`;i(m)},className:"flex items-center gap-1 px-2 py-1 rounded text-[9px] font-medium transition-all duration-200 hover:scale-105",style:{backgroundColor:`${d.color}20`,color:d.color,border:`1px solid ${d.color}40`},children:[u.jsx("span",{children:"Use Range"}),u.jsx(kN,{size:10})]})]})]},c)})})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328] flex items-center justify-between text-[10px]",children:[u.jsxs("span",{className:"text-[#747580]",children:[t.dataPoints," data points"]}),u.jsxs("span",{style:{color:s.color},children:[s.emoji," ",s.label," Confidence"]})]}),t.confidence==="low"&&u.jsxs("div",{className:"mt-2 flex items-center gap-1.5 text-[10px] text-[#fbbf24] bg-[#fbbf24]/10 p-2 rounded",children:[u.jsx(Ci,{size:12}),u.jsx("span",{children:"Ranges based on estimated volatility due to limited data"})]})]})},Ret=({data:t,index:e=0,className:n})=>{var o,a;const r=t.direction==="long",i=t.pnl!==void 0,s=i&&t.pnl.value>=0;return u.jsxs(_t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:kt("bg-[#1a1b21] border rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",r?"border-[#34d399]/30":"border-[#ef4444]/30",n),children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(QB,{protocol:t.protocol,size:"sm"}),u.jsx("span",{className:"text-base font-bold text-white",children:t.coin}),u.jsx("span",{className:kt("text-xs font-bold px-2 py-0.5 rounded",r?"bg-[#34d399]/20 text-[#34d399]":"bg-[#ef4444]/20 text-[#ef4444]"),children:r?" LONG":" SHORT"})]}),t.leverage&&u.jsxs("span",{className:"text-xs text-[#747580]",children:[t.leverage,"x"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 text-xs",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Size"}),u.jsxs("div",{className:"font-semibold text-white",children:[(o=t.size)==null?void 0:o.toFixed(4)," ",t.coin]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Entry"}),u.jsxs("div",{className:"font-mono text-white",children:["$",(a=t.entryPrice)==null?void 0:a.toFixed(2)]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Value"}),u.jsx("div",{className:"font-bold text-white",children:oD(t.valueUsd)})]}),i&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Unrealized PnL"}),u.jsxs("div",{className:kt("flex items-center gap-1 font-bold",s?"text-[#34d399]":"text-[#ef4444]"),children:[s?u.jsx(dn,{size:12}):u.jsx(ld,{size:12}),oD(t.pnl.value,{showSign:!0}),u.jsxs("span",{className:"text-[10px] opacity-70",children:["(",Gf(t.pnl.percent,{showSign:!0}),")"]})]})]})]}),t.liquidationPrice&&t.liquidationPrice>0&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328] flex items-center gap-2 text-[10px] text-[#fbbf24]",children:[u.jsx(Ci,{size:12}),u.jsxs("span",{children:["Liq. Price: $",t.liquidationPrice.toFixed(2)]})]})]})},Oet=({data:t,index:e=0})=>{const n=khe.hyperliquid,r=o=>{switch(o){case"BUY":return u.jsx(dn,{className:"w-3.5 h-3.5 text-[#34d399]"});case"SELL":return u.jsx(ld,{className:"w-3.5 h-3.5 text-[#f87171]"});case"CLOSE":return u.jsx(Xr,{className:"w-3.5 h-3.5 text-[#fbbf24]"});default:return u.jsx(Xr,{className:"w-3.5 h-3.5 text-[#747580]"})}},i=o=>{switch(o){case"BUY":return{text:"text-[#34d399]",bg:"bg-[#34d399]/10"};case"SELL":return{text:"text-[#f87171]",bg:"bg-[#f87171]/10"};case"CLOSE":return{text:"text-[#fbbf24]",bg:"bg-[#fbbf24]/10"};default:return{text:"text-[#747580]",bg:"bg-[#747580]/10"}}},s=o=>o>=.7?"#34d399":o>=.4?"#fbbf24":"#f87171";return u.jsxs("div",{className:"bg-[#1a1b21] border rounded-lg overflow-hidden",style:{borderColor:n.borderColor},children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{backgroundColor:n.bgColor,borderColor:n.borderColor},children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ao,{className:"w-4 h-4",style:{color:n.color}}),u.jsx("span",{className:"font-semibold text-white text-sm",children:"Hyperliquid Dealer Thinking"}),t.cycleNumber&&u.jsxs("span",{className:"text-[#747580] text-xs",children:["Cycle #",t.cycleNumber]})]}),u.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded font-bold uppercase",style:{color:n.color,backgroundColor:"rgba(231,254,85,0.2)"},children:n.shortLabel})]}),u.jsxs("div",{className:"p-4 space-y-4",children:[t.aiSummary&&u.jsxs("div",{className:"bg-[#0d0e12] rounded-lg p-3 border-l-2",style:{borderColor:n.color},children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[u.jsx(fre,{className:"w-3 h-3",style:{color:n.color}}),u.jsx("span",{className:"text-[10px] uppercase tracking-wider font-medium",style:{color:n.color},children:"AI Analysis"})]}),u.jsx("p",{className:"text-[#a0a0a8] text-xs leading-relaxed",children:t.aiSummary})]}),t.decisions.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[#747580] text-[10px] uppercase tracking-wider mb-2 font-medium",children:["Decisions (",t.decisions.length,")"]}),u.jsx("div",{className:"space-y-1.5",children:t.decisions.map((o,a)=>{const l=i(o.action);return u.jsxs("div",{className:"flex items-center justify-between bg-[#0d0e12] rounded-lg px-3 py-2.5",children:[u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:`p-1 rounded ${l.bg}`,children:r(o.action)}),u.jsx("span",{className:"font-medium text-white text-xs",children:o.asset}),u.jsx("span",{className:`text-xs font-bold ${l.text}`,children:o.action})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"text-[#747580] text-[10px]",children:"Confidence"}),u.jsxs("div",{className:"text-xs font-bold px-1.5 py-0.5 rounded",style:{color:s(o.confidence),backgroundColor:`${s(o.confidence)}15`},children:[(o.confidence*100).toFixed(0),"%"]})]})]},`${o.asset}-${a}`)})})]}),t.decisions.length===0&&!t.aiSummary&&u.jsx("div",{className:"text-center py-4 text-[#747580] text-xs",children:"No decisions recorded for this cycle"})]}),u.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 border-t text-[10px]",style:{borderColor:n.borderColor},children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[#747580]",children:[u.jsx(Qr,{className:"w-3 h-3"}),u.jsx("span",{children:new Date(t.cycleTimestamp).toLocaleString()})]}),t.assetsAnalyzed.length>0&&u.jsxs("span",{className:"text-[#747580]",children:[t.assetsAnalyzed.length," assets: ",t.assetsAnalyzed.slice(0,3).join(", "),t.assetsAnalyzed.length>3&&` +${t.assetsAnalyzed.length-3}`]})]})]})},Met=({children:t,columns:e=2,gap:n="md",className:r})=>{const i={1:"grid-cols-1",2:"grid-cols-1 sm:grid-cols-2",3:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"},s={sm:"gap-2",md:"gap-3",lg:"gap-4"};return u.jsx("div",{className:kt("grid",i[e],s[n],r),children:t})},Let=({data:t,onSendMessage:e})=>{const n=()=>!t.summary&&!t.title?null:u.jsxs("div",{className:"mb-3",children:[t.title&&u.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:t.title}),t.summary&&u.jsx("p",{className:"text-xs text-[#a0a0a8]",children:t.summary})]});switch(t.resultType){case"pool":case"pools":{const r=t.items.filter(i=>i.type==="pool");return r.length===0?null:r.length===1?u.jsxs("div",{children:[n(),u.jsx(jX,{data:r[0]})]}):u.jsxs("div",{children:[n(),u.jsx(Met,{columns:2,children:r.map((i,s)=>u.jsx(jX,{data:i,index:s,compact:r.length>4},i.poolAddress||s))})]})}case"balance":case"balances":{const r=t.items.filter(i=>i.type==="balance");return r.length===0?null:r.length===1?u.jsxs("div",{children:[n(),u.jsx(aD,{data:r[0]})]}):u.jsxs("div",{children:[n(),u.jsx(ket,{balances:r})]})}case"transaction":{const r=t.items.filter(i=>i.type==="transaction");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-3",children:r.map((i,s)=>u.jsx(Cet,{data:i,index:s},i.txHash||s))})]})}case"volatility":{const r=t.items.filter(i=>i.type==="volatility");return r.length===0?null:r.length>1?u.jsxs("div",{children:[n(),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-xs",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-left text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"pb-2 pr-2",children:"Pool"}),u.jsx("th",{className:"pb-2 px-2",children:"Protocol"}),u.jsx("th",{className:"pb-2 px-2",children:"TVL"}),u.jsx("th",{className:"pb-2 px-2",children:"Daily Vol"}),u.jsx("th",{className:"pb-2 px-2",children:"Ann. Vol"}),u.jsx("th",{className:"pb-2 pl-2",children:"Price"})]})}),u.jsx("tbody",{children:r.map((i,s)=>{var o;return u.jsxs("tr",{className:"border-b border-[#232328]/50",children:[u.jsx("td",{className:"py-2 pr-2 text-white font-medium",children:((o=i.poolName)==null?void 0:o.slice(0,15))||i.poolAddress.slice(0,8)+"..."}),u.jsx("td",{className:"py-2 px-2",children:u.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded font-bold uppercase",style:{color:i.protocol==="meteora"?"#8B5CF6":"#14B8A6",backgroundColor:i.protocol==="meteora"?"rgba(139, 92, 246, 0.15)":"rgba(20, 184, 166, 0.15)"},children:i.protocol==="meteora"?"MET":"RAY"})}),u.jsx("td",{className:"py-2 px-2 text-white",children:i.tvl?`$${(i.tvl/1e3).toFixed(1)}K`:"N/A"}),u.jsxs("td",{className:"py-2 px-2 text-[#60a5fa]",children:[i.volatilityDaily.toFixed(2),"%"]}),u.jsxs("td",{className:"py-2 px-2 text-[#8b5cf6]",children:[i.volatilityAnnualized.toFixed(1),"%"]}),u.jsxs("td",{className:"py-2 pl-2 text-white font-mono",children:["$",i.currentPrice.toFixed(4)]})]},i.poolAddress)})})]})})]}):u.jsxs("div",{children:[n(),u.jsx(Iet,{data:r[0],rangeSuggestions:t.rangeSuggestions,onSendMessage:e})]})}case"position":case"positions":{const r=t.items.filter(o=>o.type==="balance"),i=t.items.filter(o=>o.type==="position"),s=i.filter(o=>o.protocol==="hyperliquid"&&o.coin);return s.length>0?u.jsxs("div",{children:[n(),r.length>0&&u.jsx("div",{className:"mb-3",children:u.jsx(aD,{data:r[0]})}),u.jsx("div",{className:"space-y-3",children:s.map((o,a)=>u.jsx(Ret,{data:o,index:a},`${o.coin}-${a}`))})]}):u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-2",children:i.map((o,a)=>u.jsxs("div",{className:"bg-[#1a1b21] border border-[#232328] rounded-lg p-3 text-xs",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"font-semibold text-white",children:o.poolName||"Position"}),u.jsxs("span",{className:"text-[#34d399] font-bold",children:["$",o.valueUsd.toLocaleString()]})]}),o.tokenA&&o.tokenB&&u.jsxs("div",{className:"text-[#747580]",children:[o.tokenA.amount.toFixed(4)," ",o.tokenA.symbol," / ",o.tokenB.amount.toFixed(4)," ",o.tokenB.symbol]}),o.unclaimedFeesUsd!==void 0&&o.unclaimedFeesUsd>0&&u.jsxs("div",{className:"text-[#E7FE55] mt-1",children:["Unclaimed: $",o.unclaimedFeesUsd.toFixed(2)]})]},o.poolAddress||a))})]})}case"hl-thinking":{const r=t.items.filter(i=>i.type==="hl-thinking");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-3",children:r.map((i,s)=>u.jsx(Oet,{data:i,index:s},i.cycleTimestamp||s))})]})}default:return null}},Det=[{id:"pools",label:"Liquidity Pools",icon:u.jsx(jw,{size:14}),color:"#9b87f5",suggestions:["Show top pools by volatility","Find SOL/USDC pools","What is the best APY pool?","Suggest optimal range for SOL/USDC"]},{id:"hyperliquid",label:"Hyperliquid",icon:u.jsx(dn,{size:14}),color:"#34d399",suggestions:["Check my HL balance","Open long BTC 5x","Show my open positions","Close my ETH position"]},{id:"solana",label:"Solana",icon:u.jsx(kh,{size:14}),color:"#9b87f5",suggestions:["Check my wallet balance","Show SOL price","List my token holdings","Transfer 1 SOL to me"]},{id:"withdrawals",label:"Withdrawals",icon:u.jsx(YTe,{size:14}),color:"#60a5fa",suggestions:["Withdraw 100 USDC from HL","Show pending withdrawals","Check withdrawal status"]}],jet=({onSuggestionClick:t})=>{const[e,n]=S.useState(null);return u.jsxs("div",{className:"w-full max-w-2xl mx-auto mt-6",children:[u.jsx("p",{className:"text-[10px] uppercase tracking-[0.15em] text-[#747580] text-center mb-4 font-medium",children:"Try asking about"}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Det.map(r=>u.jsxs("div",{className:"relative",onMouseEnter:()=>n(r.id),onMouseLeave:()=>n(null),children:[u.jsxs(_t.button,{className:"flex items-center gap-2 px-3 py-1.5 rounded text-[11px] font-medium transition-all border",style:{backgroundColor:e===r.id?`${r.color}15`:"transparent",borderColor:e===r.id?`${r.color}40`:"#232328",color:e===r.id?r.color:"#747580"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[r.icon,r.label,u.jsx(rl,{size:12,className:"transition-transform",style:{transform:e===r.id?"rotate(90deg)":"rotate(0deg)",opacity:e===r.id?1:.5}})]}),u.jsx(Wi,{children:e===r.id&&u.jsx(_t.div,{className:"absolute top-full left-0 mt-1 z-50 min-w-[200px]",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15},children:u.jsx("div",{className:"bg-[#14151a] border border-[#232328] rounded p-1 shadow-lg",style:{borderColor:`${r.color}30`},children:r.suggestions.map((i,s)=>u.jsx(_t.button,{className:"w-full text-left px-3 py-2 text-[11px] text-[#e4e5e9] hover:bg-[#1a1b21] rounded transition-colors",onClick:()=>t(i),whileHover:{x:2},children:i},s))})})})]},r.id))})]})};var bO="focusScope.autoFocusOnMount",wO="focusScope.autoFocusOnUnmount",BX={bubbles:!1,cancelable:!0},Bet="FocusScope",ZB=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=S.useState(null),c=Nh(i),d=Nh(s),h=S.useRef(null),m=Ir(e,x=>l(x)),g=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let x=function(N){if(g.paused||!a)return;const O=N.target;a.contains(O)?h.current=O:$f(h.current,{select:!0})},b=function(N){if(g.paused||!a)return;const O=N.relatedTarget;O!==null&&(a.contains(O)||$f(h.current,{select:!0}))},w=function(N){if(document.activeElement===document.body)for(const j of N)j.removedNodes.length>0&&$f(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const T=new MutationObserver(w);return a&&T.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),T.disconnect()}}},[r,a,g.paused]),S.useEffect(()=>{if(a){FX.add(g);const x=document.activeElement;if(!a.contains(x)){const w=new CustomEvent(bO,BX);a.addEventListener(bO,c),a.dispatchEvent(w),w.defaultPrevented||(Uet(Het(Che(a)),{select:!0}),document.activeElement===x&&$f(a))}return()=>{a.removeEventListener(bO,c),setTimeout(()=>{const w=new CustomEvent(wO,BX);a.addEventListener(wO,d),a.dispatchEvent(w),w.defaultPrevented||$f(x??document.body,{select:!0}),a.removeEventListener(wO,d),FX.remove(g)},0)}}},[a,c,d,g]);const v=S.useCallback(x=>{if(!n&&!r||g.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(b&&w){const T=x.currentTarget,[N,O]=Fet(T);N&&O?!x.shiftKey&&w===O?(x.preventDefault(),n&&$f(N,{select:!0})):x.shiftKey&&w===N&&(x.preventDefault(),n&&$f(O,{select:!0})):w===T&&x.preventDefault()}},[n,r,g.paused]);return u.jsx(Mn.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});ZB.displayName=Bet;function Uet(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if($f(r,{select:e}),document.activeElement!==n)return}function Fet(t){const e=Che(t),n=UX(e,t),r=UX(e.reverse(),t);return[n,r]}function Che(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function UX(t,e){for(const n of t)if(!$et(n,{upTo:e}))return n}function $et(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function zet(t){return t instanceof HTMLInputElement&&"select"in t}function $f(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&zet(t)&&e&&t.select()}}var FX=Vet();function Vet(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=$X(t,e),t.unshift(e)},remove(e){var n;t=$X(t,e),(n=t[0])==null||n.resume()}}}function $X(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Het(t){return t.filter(e=>e.tagName!=="A")}var EO=0;function Phe(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??zX()),document.body.insertAdjacentElement("beforeend",t[1]??zX()),EO++,()=>{EO===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),EO--}},[])}function zX(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var KT="right-scroll-bar-position",WT="width-before-scroll-bar",qet="with-scroll-bars-hidden",Get="--removed-body-scroll-bar-size";function SO(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Ket(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Wet=typeof window<"u"?S.useLayoutEffect:S.useEffect,VX=new WeakMap;function Yet(t,e){var n=Ket(null,function(r){return t.forEach(function(i){return SO(i,r)})});return Wet(function(){var r=VX.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||SO(a,null)}),s.forEach(function(a){i.has(a)||SO(a,o)})}VX.set(n,t)},[t]),n}function Jet(t){return t}function Xet(t,e){e===void 0&&(e=Jet);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return i}function Qet(t){t===void 0&&(t={});var e=Xet(null);return e.options=Tc({async:!0,ssr:!1},t),e}var _he=function(t){var e=t.sideCar,n=Kx(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,Tc({},n))};_he.isSideCarExport=!0;function Zet(t,e){return t.useMedium(e),_he}var Ihe=Qet(),AO=function(){},sP=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:AO,onWheelCapture:AO,onTouchMoveCapture:AO}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noRelative,v=t.noIsolation,x=t.inert,b=t.allowPinchZoom,w=t.as,T=w===void 0?"div":w,N=t.gapMode,O=Kx(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,_=Yet([n,e]),F=Tc(Tc({},O),i);return S.createElement(S.Fragment,null,d&&S.createElement(j,{sideCar:Ihe,removeScrollBar:c,shards:h,noRelative:g,noIsolation:v,inert:x,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:N}),o?S.cloneElement(S.Children.only(a),Tc(Tc({},F),{ref:_})):S.createElement(T,Tc({},F,{className:l,ref:_}),a))});sP.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sP.classNames={fullWidth:WT,zeroRight:KT};var ett=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ttt(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ett();return e&&t.setAttribute("nonce",e),t}function ntt(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function rtt(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var itt=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ttt())&&(ntt(e,n),rtt(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},stt=function(){var t=itt();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Rhe=function(){var t=stt(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},ott={left:0,top:0,right:0,gap:0},TO=function(t){return parseInt(t||"",10)||0},att=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[TO(n),TO(r),TO(i)]},ltt=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ott;var e=att(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},ctt=Rhe(),yy="data-scroll-locked",utt=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(qet,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(yy,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(KT,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(WT,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(KT," .").concat(KT,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(WT," .").concat(WT,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(yy,`] {
    `).concat(Get,": ").concat(a,`px;
  }
`)},HX=function(){var t=parseInt(document.body.getAttribute(yy)||"0",10);return isFinite(t)?t:0},dtt=function(){S.useEffect(function(){return document.body.setAttribute(yy,(HX()+1).toString()),function(){var t=HX()-1;t<=0?document.body.removeAttribute(yy):document.body.setAttribute(yy,t.toString())}},[])},ftt=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;dtt();var s=S.useMemo(function(){return ltt(i)},[i]);return S.createElement(ctt,{styles:utt(s,!e,i,n?"":"!important")})},lD=!1;if(typeof window<"u")try{var YA=Object.defineProperty({},"passive",{get:function(){return lD=!0,!0}});window.addEventListener("test",YA,YA),window.removeEventListener("test",YA,YA)}catch{lD=!1}var pg=lD?{passive:!1}:!1,htt=function(t){return t.tagName==="TEXTAREA"},Ohe=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!htt(t)&&n[e]==="visible")},ptt=function(t){return Ohe(t,"overflowY")},mtt=function(t){return Ohe(t,"overflowX")},qX=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Mhe(t,r);if(i){var s=Lhe(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},gtt=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},ytt=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Mhe=function(t,e){return t==="v"?ptt(e):mtt(e)},Lhe=function(t,e){return t==="v"?gtt(e):ytt(e)},xtt=function(t,e){return t==="h"&&e==="rtl"?-1:1},vtt=function(t,e,n,r,i){var s=xtt(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,m=0;do{if(!a)break;var g=Lhe(t,a),v=g[0],x=g[1],b=g[2],w=x-b-s*v;(v||w)&&Mhe(t,a)&&(h+=w,m+=v);var T=a.parentNode;a=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(c=!0),c},JA=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},GX=function(t){return[t.deltaX,t.deltaY]},KX=function(t){return t&&"current"in t?t.current:t},btt=function(t,e){return t[0]===e[0]&&t[1]===e[1]},wtt=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Ett=0,mg=[];function Stt(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),i=S.useState(Ett++)[0],s=S.useState(Rhe)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=gve([t.lockRef.current],(t.shards||[]).map(KX),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var w=JA(x),T=n.current,N="deltaX"in x?x.deltaX:T[0]-w[0],O="deltaY"in x?x.deltaY:T[1]-w[1],j,_=x.target,F=Math.abs(N)>Math.abs(O)?"h":"v";if("touches"in x&&F==="h"&&_.type==="range")return!1;var z=window.getSelection(),D=z&&z.anchorNode,$=D?D===_||D.contains(_):!1;if($)return!1;var G=qX(F,_);if(!G)return!0;if(G?j=F:(j=F==="v"?"h":"v",G=qX(F,_)),!G)return!1;if(!r.current&&"changedTouches"in x&&(N||O)&&(r.current=j),!j)return!0;var H=r.current||j;return vtt(H,b,x,H==="h"?N:O)},[]),l=S.useCallback(function(x){var b=x;if(!(!mg.length||mg[mg.length-1]!==s)){var w="deltaY"in b?GX(b):JA(b),T=e.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&btt(j.delta,w)})[0];if(T&&T.should){b.cancelable&&b.preventDefault();return}if(!T){var N=(o.current.shards||[]).map(KX).filter(Boolean).filter(function(j){return j.contains(b.target)}),O=N.length>0?a(b,N[0]):!o.current.noIsolation;O&&b.cancelable&&b.preventDefault()}}},[]),c=S.useCallback(function(x,b,w,T){var N={name:x,delta:b,target:w,should:T,shadowParent:Att(w)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(O){return O!==N})},1)},[]),d=S.useCallback(function(x){n.current=JA(x),r.current=void 0},[]),h=S.useCallback(function(x){c(x.type,GX(x),x.target,a(x,t.lockRef.current))},[]),m=S.useCallback(function(x){c(x.type,JA(x),x.target,a(x,t.lockRef.current))},[]);S.useEffect(function(){return mg.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,pg),document.addEventListener("touchmove",l,pg),document.addEventListener("touchstart",d,pg),function(){mg=mg.filter(function(x){return x!==s}),document.removeEventListener("wheel",l,pg),document.removeEventListener("touchmove",l,pg),document.removeEventListener("touchstart",d,pg)}},[]);var g=t.removeScrollBar,v=t.inert;return S.createElement(S.Fragment,null,v?S.createElement(s,{styles:wtt(i)}):null,g?S.createElement(ftt,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Att(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Ttt=Zet(Ihe,Stt);var e7=S.forwardRef(function(t,e){return S.createElement(sP,Tc({},t,{ref:e,sideCar:Ttt}))});e7.classNames=sP.classNames;var ktt=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},gg=new WeakMap,XA=new WeakMap,QA={},kO=0,Dhe=function(t){return t&&(t.host||Dhe(t.parentNode))},Ntt=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Dhe(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Ctt=function(t,e,n,r){var i=Ntt(e,Array.isArray(t)?t:[t]);QA[n]||(QA[n]=new WeakMap);var s=QA[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(a.has(m))d(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",x=(gg.get(m)||0)+1,b=(s.get(m)||0)+1;gg.set(m,x),s.set(m,b),o.push(m),x===1&&v&&XA.set(m,!0),b===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(e),a.clear(),kO++,function(){o.forEach(function(h){var m=gg.get(h)-1,g=s.get(h)-1;gg.set(h,m),s.set(h,g),m||(XA.has(h)||h.removeAttribute(r),XA.delete(h)),g||h.removeAttribute(n)}),kO--,kO||(gg=new WeakMap,gg=new WeakMap,XA=new WeakMap,QA={})}},jhe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=ktt(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Ctt(r,i,n,"aria-hidden")):function(){return null}};function Ptt(t){const e=_tt(t),n=S.forwardRef((r,i)=>{const{children:s,...o}=r,a=S.Children.toArray(s),l=a.find(Rtt);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function _tt(t){const e=S.forwardRef((n,r)=>{const{children:i,...s}=n;if(S.isValidElement(i)){const o=Mtt(i),a=Ott(s,i.props);return i.type!==S.Fragment&&(a.ref=r?iv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Itt=Symbol("radix.slottable");function Rtt(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Itt}function Ott(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Mtt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var oP="Dialog",[Bhe]=r0(oP),[Ltt,ec]=Bhe(oP),Uhe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c,d]=Ix({prop:r,defaultProp:i??!1,onChange:s,caller:oP});return u.jsx(Ltt,{scope:e,triggerRef:a,contentRef:l,contentId:dd(),titleId:dd(),descriptionId:dd(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};Uhe.displayName=oP;var Fhe="DialogTrigger",Dtt=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ec(Fhe,n),s=Ir(e,i.triggerRef);return u.jsx(Mn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":r7(i.open),...r,ref:s,onClick:mn(t.onClick,i.onOpenToggle)})});Dtt.displayName=Fhe;var t7="DialogPortal",[jtt,$he]=Bhe(t7,{forceMount:void 0}),zhe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=ec(t7,e);return u.jsx(jtt,{scope:e,forceMount:n,children:S.Children.map(r,o=>u.jsx(s0,{present:n||s.open,children:u.jsx(ZN,{asChild:!0,container:i,children:o})}))})};zhe.displayName=t7;var Mk="DialogOverlay",Vhe=S.forwardRef((t,e)=>{const n=$he(Mk,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=ec(Mk,t.__scopeDialog);return s.modal?u.jsx(s0,{present:r||s.open,children:u.jsx(Utt,{...i,ref:e})}):null});Vhe.displayName=Mk;var Btt=Ptt("DialogOverlay.RemoveScroll"),Utt=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ec(Mk,n);return u.jsx(e7,{as:Btt,allowPinchZoom:!0,shards:[i.contentRef],children:u.jsx(Mn.div,{"data-state":r7(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ym="DialogContent",Hhe=S.forwardRef((t,e)=>{const n=$he(Ym,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=ec(Ym,t.__scopeDialog);return u.jsx(s0,{present:r||s.open,children:s.modal?u.jsx(Ftt,{...i,ref:e}):u.jsx($tt,{...i,ref:e})})});Hhe.displayName=Ym;var Ftt=S.forwardRef((t,e)=>{const n=ec(Ym,t.__scopeDialog),r=S.useRef(null),i=Ir(e,n.contentRef,r);return S.useEffect(()=>{const s=r.current;if(s)return jhe(s)},[]),u.jsx(qhe,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:mn(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:mn(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:mn(t.onFocusOutside,s=>s.preventDefault())})}),$tt=S.forwardRef((t,e)=>{const n=ec(Ym,t.__scopeDialog),r=S.useRef(!1),i=S.useRef(!1);return u.jsx(qhe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),qhe=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=ec(Ym,n),l=S.useRef(null),c=Ir(e,l);return Phe(),u.jsxs(u.Fragment,{children:[u.jsx(ZB,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:u.jsx(KN,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":r7(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(ztt,{titleId:a.titleId}),u.jsx(Htt,{contentRef:l,descriptionId:a.descriptionId})]})]})}),n7="DialogTitle",Ghe=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ec(n7,n);return u.jsx(Mn.h2,{id:i.titleId,...r,ref:e})});Ghe.displayName=n7;var Khe="DialogDescription",Whe=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ec(Khe,n);return u.jsx(Mn.p,{id:i.descriptionId,...r,ref:e})});Whe.displayName=Khe;var Yhe="DialogClose",Jhe=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ec(Yhe,n);return u.jsx(Mn.button,{type:"button",...r,ref:e,onClick:mn(t.onClick,()=>i.onOpenChange(!1))})});Jhe.displayName=Yhe;function r7(t){return t?"open":"closed"}var Xhe="DialogTitleWarning",[syt,Qhe]=ERe(Xhe,{contentName:Ym,titleName:n7,docsSlug:"dialog"}),ztt=({titleId:t})=>{const e=Qhe(Xhe),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Vtt="DialogDescriptionWarning",Htt=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Qhe(Vtt).contentName}}.`;return S.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},qtt=Uhe,Gtt=zhe,Zhe=Vhe,epe=Hhe,tpe=Ghe,npe=Whe,Ktt=Jhe;const Kd=qtt,Wtt=Gtt,rpe=S.forwardRef(({className:t,...e},n)=>u.jsx(Zhe,{ref:n,className:kt("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));rpe.displayName=Zhe.displayName;const eu=S.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(Wtt,{children:[u.jsx(rpe,{}),u.jsxs(epe,{ref:r,className:kt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-700 bg-slate-900 p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl",t),...n,children:[e,u.jsxs(Ktt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(xx,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));eu.displayName=epe.displayName;const tu=({className:t,...e})=>u.jsx("div",{className:kt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});tu.displayName="DialogHeader";const Wd=({className:t,...e})=>u.jsx("div",{className:kt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Wd.displayName="DialogFooter";const nu=S.forwardRef(({className:t,...e},n)=>u.jsx(tpe,{ref:n,className:kt("text-lg font-semibold leading-none tracking-tight text-white",t),...e}));nu.displayName=tpe.displayName;const Yd=S.forwardRef(({className:t,...e},n)=>u.jsx(npe,{ref:n,className:kt("text-sm text-muted-foreground",t),...e}));Yd.displayName=npe.displayName;var Ytt=Symbol.for("react.lazy"),Lk=xN[" use ".trim().toString()];function Jtt(t){return typeof t=="object"&&t!==null&&"then"in t}function ipe(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Ytt&&"_payload"in t&&Jtt(t._payload)}function Xtt(t){const e=Ztt(t),n=S.forwardRef((r,i)=>{let{children:s,...o}=r;ipe(s)&&typeof Lk=="function"&&(s=Lk(s._payload));const a=S.Children.toArray(s),l=a.find(tnt);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var Qtt=Xtt("Slot");function Ztt(t){const e=S.forwardRef((n,r)=>{let{children:i,...s}=n;if(ipe(i)&&typeof Lk=="function"&&(i=Lk(i._payload)),S.isValidElement(i)){const o=rnt(i),a=nnt(s,i.props);return i.type!==S.Fragment&&(a.ref=r?iv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ent=Symbol("radix.slottable");function tnt(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ent}function nnt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function rnt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const WX=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,YX=Rn,spe=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return YX(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],h=s==null?void 0:s[c];if(d===null)return null;const m=WX(d)||WX(h);return i[c][m]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(v=>{let[x,b]=v;return Array.isArray(b)?b.includes({...s,...a}[x]):{...s,...a}[x]===b})?[...c,h,m]:c},[]);return YX(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},int=spe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-slate-700 bg-transparent hover:bg-slate-800 hover:text-slate-100",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-slate-800 hover:text-slate-100",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow hover:bg-emerald-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_r=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Qtt:"button";return u.jsx(o,{className:kt(int({variant:e,size:n,className:t})),ref:s,...i})});_r.displayName="Button";const snt=({isOpen:t,onClose:e,onSubmit:n})=>{const[r,i]=S.useState(""),[s,o]=S.useState(!1),a=async c=>{o(!0),await n(c?r.trim():""),o(!1),l()},l=()=>{i(""),e()};return u.jsx(Kd,{open:t,onOpenChange:c=>!c&&l(),children:u.jsxs(eu,{className:"sm:max-w-[400px] bg-[#14151a] border-[#232328]",children:[u.jsxs(tu,{children:[u.jsxs(nu,{className:"flex items-center gap-2 text-white",children:[u.jsx(U8,{size:18,className:"text-[#747580]"}),"What went wrong?"]}),u.jsx(Yd,{className:"text-[#747580]",children:"Help us understand - your feedback is optional but appreciated."})]}),u.jsx("div",{className:"space-y-2 mt-2",children:u.jsx("textarea",{value:r,onChange:c=>i(c.target.value),placeholder:"What could have been better? (optional)",className:"w-full h-24 px-4 py-3 rounded-lg bg-[#1a1b21] border border-[#232328] text-white text-sm placeholder:text-[#747580] resize-none focus:outline-none focus:border-[#E7FE55]/30 focus:ring-1 focus:ring-[#E7FE55]/20",autoFocus:!0})}),u.jsxs(Wd,{className:"mt-4 gap-2",children:[u.jsx(_r,{variant:"outline",onClick:()=>a(!1),disabled:s,className:"border-[#232328] text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21]",children:"Skip"}),u.jsx(_r,{onClick:()=>a(!0),disabled:s,className:"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:s?"Sending...":"Submit"})]})]})})};class ont{async submitGeneralFeedback(e){const n=us();if(!n)return console.error("[FeedbackService] Supabase client not initialized"),{success:!1,error:"Supabase not connected"};try{const{data:{user:r}}=await n.auth.getUser();if(!r)return{success:!1,error:"User not authenticated"};const{error:i}=await n.from("feedback").insert({user_id:r.id,type:"general",category:e.category,message:e.message,metadata:e.metadata||{}});return i?(console.error("[FeedbackService] Insert error:",i),{success:!1,error:i.message}):(console.log("[FeedbackService] General feedback submitted successfully"),{success:!0})}catch(r){return console.error("[FeedbackService] Unexpected error:",r),{success:!1,error:"Failed to submit feedback"}}}async submitMessageRating(e){const n=us();if(!n)return console.error("[FeedbackService] Supabase client not initialized"),{success:!1,error:"Supabase not connected"};try{const{data:{user:r}}=await n.auth.getUser();if(!r)return{success:!1,error:"User not authenticated"};const{error:i}=await n.from("feedback").insert({user_id:r.id,type:"message_rating",rating:e.rating,message:e.feedback||null,message_id:e.messageId,conversation_id:e.conversationId,metadata:{}});return i?(console.error("[FeedbackService] Insert error:",i),{success:!1,error:i.message}):(console.log("[FeedbackService] Message rating submitted:",e.rating),{success:!0})}catch(r){return console.error("[FeedbackService] Unexpected error:",r),{success:!1,error:"Failed to submit rating"}}}getSetupSQL(){return`
-- Feedback table for storing all user feedback
CREATE TABLE IF NOT EXISTS public.feedback (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  type TEXT NOT NULL CHECK (type IN ('general', 'message_rating')),
  category TEXT, -- For general: 'suggestion', 'bug', 'other'
  rating TEXT, -- For message_rating: 'positive', 'negative'
  message TEXT,
  message_id TEXT, -- For message_rating
  conversation_id TEXT, -- For message_rating
  metadata JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE public.feedback ENABLE ROW LEVEL SECURITY;

-- Allow authenticated users to insert their own feedback
CREATE POLICY "Users can insert own feedback" ON public.feedback
  FOR INSERT TO authenticated
  WITH CHECK (auth.uid() = user_id);

-- Allow users to view their own feedback
CREATE POLICY "Users can view own feedback" ON public.feedback
  FOR SELECT TO authenticated
  USING (auth.uid() = user_id);
`}}const cD=new ont,Ux=S.forwardRef(({className:t,type:e,...n},r)=>u.jsx("input",{type:e,className:kt("flex h-10 w-full rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-500/50 focus-visible:border-slate-500/50 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",t),ref:r,...n}));Ux.displayName="Input";const ant=({messages:t,inputMessage:e,setInputMessage:n,handleSendMessage:r,isAiProcessing:i,aiStatus:s,scrollRef:o,isVaultUnlocked:a,password:l,setPassword:c,unlockVault:d,hasVault:h,onNavigate:m,conversationId:g})=>{const v=S.useRef(null),[x,b]=S.useState(new Map),[w,T]=S.useState(null),N=async(_,F)=>{if(x.get(_)===F){b(D=>{const $=new Map(D);return $.delete(_),$});return}F==="negative"?T(_):(b(D=>new Map(D).set(_,F)),await cD.submitMessageRating({messageId:_,conversationId:g||"unknown",rating:"positive"}))},O=async _=>{w&&(b(F=>new Map(F).set(w,"negative")),await cD.submitMessageRating({messageId:w,conversationId:g||"unknown",rating:"negative",feedback:_}),T(null))},j=S.useMemo(()=>t.some(_=>_.role==="model"&&_.toolResults&&_.toolResults.length>0&&_.toolResults.some(F=>F.type!=="error")),[t]);return S.useEffect(()=>{!i&&a&&v.current&&v.current.focus()},[i,a]),S.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[t,o]),!a&&h?u.jsx(_t.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx(_t.div,{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:u.jsx(yd,{size:32,className:"text-[#E7FE55]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Unlock Vault Operator"}),u.jsx("p",{className:"text-[#747580] mt-2 text-sm",children:"Enter your password to start using Vault Operator."})]}),u.jsxs(Zs,{className:"p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em] mb-2",children:"Password"}),u.jsx(Ux,{type:"password",value:l,onChange:_=>c(_.target.value),placeholder:"Enter password...",onKeyDown:_=>_.key==="Enter"&&d(),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30",autoFocus:!0})]}),u.jsxs(_r,{onClick:d,className:"w-full",size:"lg",children:[u.jsx(mre,{size:18})," Unlock Vault Operator"]})]}),u.jsx("p",{className:"text-center text-[11px] text-[#747580]",children:"This is the same password used to unlock your Vault."})]})}):h?u.jsxs("div",{className:"flex h-[calc(100vh-9rem)] gap-6",children:[u.jsxs("div",{className:kt("flex-1 flex flex-col bg-transparent rounded overflow-hidden relative min-w-0",j&&"lg:pr-2"),children:[u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",ref:o,children:[u.jsxs(Wi,{children:[t.length===0&&u.jsxs(_t.div,{className:"flex flex-col items-center justify-center h-full",initial:{opacity:0},animate:{opacity:1},children:[u.jsx($g,{size:48,className:"mb-4 text-[#E7FE55] opacity-60"}),u.jsx("p",{className:"text-sm font-semibold text-white",children:"Vault Operator Ready"}),u.jsx("p",{className:"text-[11px] text-[#747580] mb-2",children:"Ask me to check balances, swap tokens, or schedule automations."}),u.jsx(jet,{onSuggestionClick:_=>{r(_)}})]}),t.map((_,F)=>u.jsx(_t.div,{className:kt("flex",_.role==="user"?"justify-end":"justify-start"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:F*.05},children:u.jsxs("div",{className:kt("flex gap-4 group",j?"max-w-[85%]":"max-w-[90%]",_.role==="user"?"flex-row-reverse":"flex-row"),children:[u.jsx("div",{className:kt("w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 border",_.role==="user"?"bg-[#9b87f5]/10 border-[#9b87f5]/20":"bg-[#E7FE55]/10 border-[#E7FE55]/20"),children:_.role==="user"?u.jsx(Ake,{size:18,className:"text-[#9b87f5]"}):u.jsx($g,{size:18,className:"text-[#E7FE55]"})}),u.jsxs("div",{className:kt("flex flex-col",_.role==="user"?"items-end":"items-start"),children:[u.jsxs("div",{className:kt("px-4 py-3 rounded-lg bg-[#1a1b21] text-[#e4e5e9] border border-[#232328]",_.role==="user"?"rounded-tr-sm":"rounded-tl-sm"),children:[_.toolResults&&_.toolResults.length>0&&u.jsx("div",{className:"mb-4 space-y-3 w-full",children:_.toolResults.map((z,D)=>u.jsx("div",{children:z.structuredData?u.jsx(Let,{data:z.structuredData,onSendMessage:r}):u.jsxs("div",{className:kt("text-[11px] p-3 rounded border",z.type==="success"?"bg-[#34d399]/10 border-[#34d399]/30 text-[#34d399]":z.type==="error"?"bg-red-500/10 border-red-500/30 text-red-400":"bg-[#60a5fa]/10 border-[#60a5fa]/30 text-[#60a5fa]"),children:[u.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[z.type==="success"?u.jsx(Im,{size:14}):z.type==="error"?u.jsx(Ci,{size:14}):u.jsx(J1,{size:14}),z.title]}),u.jsx("div",{className:"whitespace-pre-wrap font-mono opacity-90",children:z.details}),z.tx&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10 text-[10px] font-mono opacity-70 truncate",children:["TX: ",z.tx]})]})},D))}),u.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:u.jsx(oQe,{remarkPlugins:[bet],components:{a:({href:z,children:D})=>{if(z!=null&&z.startsWith("nav://")){const $=z.replace("nav://",""),H={DEALER_CONFIG:be.DEALER_CONFIG,DEALER_DASHBOARD:be.DEALER_DASHBOARD,DEALER_THINKING:be.DEALER_THINKING,VAULT_DEALER:be.VAULT_DEALER,DASHBOARD:be.DASHBOARD,VAULT:be.VAULT,SCHEDULER:be.SCHEDULER}[$];return H&&m?u.jsxs(_r,{onClick:U=>{U.preventDefault(),U.stopPropagation(),m(H)},className:"mt-3 inline-flex",children:[u.jsx(p2,{size:16}),u.jsx("span",{children:D}),u.jsx(kN,{size:14})]}):u.jsx("span",{className:"text-indigo-400",children:D})}return u.jsx("a",{href:z,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 underline",children:D})},pre:({children:z})=>u.jsx("pre",{className:"overflow-x-auto overflow-y-auto max-h-[400px] custom-scrollbar bg-[#0f1015] rounded border border-[#232328] p-4 my-4",children:z}),code:({node:z,inline:D,className:$,children:G,...H})=>D?u.jsx("code",{className:"bg-[#1a1b21] px-1.5 py-0.5 rounded text-sm text-[#E7FE55] font-mono border border-[#232328]",...H,children:G}):u.jsx("code",{className:`${$} text-sm`,...H,children:G})},children:_.content})})]}),u.jsxs("div",{className:"flex items-center justify-between w-full mt-1.5 px-1",children:[u.jsx("span",{className:"text-[10px] text-[#747580]",children:new Date(_.timestamp).toLocaleTimeString()}),_.role==="model"&&u.jsxs("div",{className:kt("flex items-center gap-1 transition-opacity",x.has(_.id)?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[u.jsx("button",{onClick:()=>N(_.id,"positive"),className:kt("p-1 rounded transition-colors",x.get(_.id)==="positive"?"text-[#E7FE55]":"text-[#747580] hover:text-[#E7FE55] hover:bg-[#E7FE55]/10"),title:"Good response",children:u.jsx(vre,{size:14})}),u.jsx("button",{onClick:()=>N(_.id,"negative"),className:kt("p-1 rounded transition-colors",x.get(_.id)==="negative"?"text-red-400":"text-[#747580] hover:text-red-400 hover:bg-red-400/10"),title:"Bad response",children:u.jsx(U8,{size:14})})]})]})]})]})},_.id))]}),u.jsx(Wi,{children:i&&u.jsx(_t.div,{className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:u.jsxs("div",{className:"flex gap-4 max-w-[80%]",children:[u.jsx(_t.div,{className:"w-9 h-9 rounded-full bg-[#E7FE55]/10 border border-[#E7FE55]/20 flex items-center justify-center flex-shrink-0",animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:u.jsx($g,{size:18,className:"text-[#E7FE55]"})}),u.jsxs("div",{className:"bg-[#1a1b21] px-4 py-3 rounded-lg rounded-tl-sm border border-[#232328] flex items-center gap-3",children:[u.jsxs("div",{className:"flex space-x-1",children:[u.jsx(_t.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:0}}),u.jsx(_t.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.15}}),u.jsx(_t.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.3}})]}),u.jsx("span",{className:"text-[11px] text-[#E7FE55] font-medium",children:s})]})]})})})]}),u.jsxs("div",{className:"p-4 bg-transparent z-10 box-border",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Ux,{ref:v,type:"text",value:e,onChange:_=>n(_.target.value),onKeyDown:_=>_.key==="Enter"&&!i&&a&&r(),placeholder:"Ask Vault Operator to swap tokens, check prices, or schedule a task...",className:"pl-5 pr-14 py-5 text-sm bg-[#1a1b21] border-[#232328] focus-visible:ring-1 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30 placeholder:text-[#747580]",disabled:i}),u.jsx(_r,{onClick:()=>r(),disabled:!e.trim()||i,size:"icon",className:"absolute right-2 top-2 bottom-2 h-auto bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:i?u.jsx(Qr,{size:18,className:"animate-spin"}):u.jsx(xre,{size:18})})]}),u.jsx("p",{className:"text-center mt-3 text-[10px] text-[#747580] tracking-wide",children:"Vault Operator can make mistakes. Always verify transactions."})]})]}),u.jsx(Wi,{children:j&&u.jsx(_t.div,{className:"hidden lg:block w-64 xl:w-72 h-full flex-shrink-0",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:u.jsx(Eet,{messages:t})})}),u.jsx(snt,{isOpen:w!==null,onClose:()=>T(null),onSubmit:O})]}):u.jsx(_t.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:u.jsx($g,{size:32,className:"text-[#747580]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),u.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a vault before using Vault Operator. Go to the ",u.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallets."]})]})})},lnt=spe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-red-500/20 text-red-400 border-red-500/30",outline:"text-foreground border-slate-600",success:"border-transparent bg-emerald-500/20 text-emerald-400 border-emerald-500/30",warning:"border-transparent bg-yellow-500/20 text-yellow-400 border-yellow-500/30",info:"border-transparent bg-blue-500/20 text-blue-400 border-blue-500/30",purple:"border-transparent bg-purple-500/20 text-purple-400 border-purple-500/30"}},defaultVariants:{variant:"default"}}),Hi=S.forwardRef(({className:t,variant:e,...n},r)=>u.jsx("div",{ref:r,className:kt(lnt({variant:e}),t),...n}));Hi.displayName="Badge";const cnt=({scheduledTasks:t,setScheduledTasks:e,addNotification:n})=>{const r=t.filter(a=>a.status==="active"||a.status==="executing"),i=t.filter(a=>a.status==="completed"||a.status==="failed").sort((a,l)=>(l.lastExecuted||0)-(a.lastExecuted||0)),s=()=>{window.confirm("Clear all task history?")&&(e(a=>{const l=a.filter(c=>c.status==="active"||c.status==="executing");return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(l)),l}),n("Task history cleared"))},o=a=>{window.confirm("Cancel this task?")&&(e(l=>{const c=l.map(d=>d.id===a?{...d,status:"failed",result:"Cancelled by user"}:d);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(c)),c}),n(`Task #${a.slice(-4)} cancelled`))};return u.jsx(_t.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(Qr,{size:20,className:"text-emerald-400"})," Active Tasks"]}),u.jsx(Wi,{children:r.length===0?u.jsx(_t.div,{initial:{opacity:0},animate:{opacity:1},children:u.jsxs(Zs,{className:"p-8 text-center border-dashed border-2 border-slate-800",children:[u.jsx(I8,{size:48,className:"mx-auto text-slate-700 mb-4"}),u.jsx("p",{className:"text-slate-500",children:"No active tasks."}),u.jsx("p",{className:"text-xs text-slate-600 mt-2",children:'Ask the AI to "schedule a swap in 10 mins" or "alert me when BTC > 100k"'})]})}):r.map((a,l)=>{const c=JSON.parse(a.params||"{}");let d=0,h=0,m=0;if(a.type==="HL_ORDER"&&c.price&&c.size){const{price:g,size:v,leverage:x=1,side:b,takeProfit:w,stopLoss:T}=c,N=b==="B";w&&(d=(N?w-g:g-w)*v),T&&(h=(N?g-T:T-g)*v);const O=1/x-.005;m=N?g*(1-O):g*(1+O)}return u.jsx(_t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:l*.1},children:u.jsxs(Zs,{className:"p-5 border-l-4 border-l-emerald-500 relative overflow-hidden",children:[a.status==="executing"&&u.jsx("div",{className:"absolute top-2 right-2",children:u.jsxs("span",{className:"relative flex h-3 w-3",children:[u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),u.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]})}),u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Hi,{variant:a.type==="SWAP"||a.type==="TRANSFER"?"info":a.type==="HL_ORDER"?"purple":a.type==="ALERT"?"warning":"secondary",children:a.type}),u.jsxs("span",{className:"text-xs font-mono text-slate-500",children:["#",a.id.slice(-4)]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-xs text-slate-400",children:["Created: ",new Date(a.createdAt).toLocaleTimeString()]}),a.status!=="executing"&&u.jsxs(_r,{variant:"ghost",size:"sm",onClick:()=>o(a.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:[u.jsx(Th,{size:12})," Cancel"]})]})]}),u.jsxs("div",{className:"mb-3 space-y-2",children:[a.type==="SWAP"&&u.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800",children:[u.jsx("div",{className:"text-xs text-slate-500 mb-1 font-bold uppercase",children:"Swap Details"}),u.jsxs("div",{className:"text-sm text-white font-medium",children:[c.amount," ",c.inputToken,"  ",c.outputToken]})]}),a.type==="HL_ORDER"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-purple-900/30 space-y-2",children:[u.jsx("div",{className:"text-xs text-slate-500 mb-2 font-bold uppercase",children:"Hyperliquid Order"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Asset:"}),u.jsx("span",{className:"ml-2 text-white font-bold",children:c.coin})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Direction:"}),u.jsx("span",{className:kt("ml-2 font-bold",c.side==="B"?"text-emerald-400":"text-red-400"),children:c.side==="B"?"LONG":"SHORT"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Size:"}),u.jsx("span",{className:"ml-2 text-white font-medium",children:c.size})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Type:"}),u.jsx("span",{className:"ml-2 text-white font-medium uppercase",children:c.orderType})]}),c.price&&u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Price:"}),u.jsxs("span",{className:"ml-2 text-white font-medium",children:["$",c.price.toLocaleString()]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Leverage:"}),u.jsxs("span",{className:"ml-2 text-yellow-400 font-bold",children:[c.leverage,"x"]})]})]}),(c.stopLoss||c.takeProfit)&&u.jsxs("div",{className:"pt-2 border-t border-slate-800 grid grid-cols-2 gap-2 text-xs",children:[c.stopLoss&&u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Stop Loss:"}),u.jsxs("span",{className:"ml-2 text-red-400 font-medium",children:["$",c.stopLoss.toLocaleString()]})]}),c.takeProfit&&u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Take Profit:"}),u.jsxs("span",{className:"ml-2 text-emerald-400 font-medium",children:["$",c.takeProfit.toLocaleString()]})]})]})]}),c.price&&u.jsxs("div",{className:"bg-gradient-to-br from-slate-950/80 to-purple-950/20 p-3 rounded-lg border border-purple-900/40 space-y-2",children:[u.jsxs("div",{className:"text-xs text-purple-300 mb-2 font-bold uppercase flex items-center gap-2",children:[u.jsx(dn,{size:12})," Risk Analysis"]}),u.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[c.takeProfit&&u.jsxs("div",{className:"bg-emerald-900/20 p-2 rounded border border-emerald-800/30",children:[u.jsx("div",{className:"text-emerald-500 text-[10px] mb-1",children:"MAX PROFIT"}),u.jsxs("div",{className:"text-emerald-400 font-bold",children:["$",d.toFixed(2)]})]}),c.stopLoss&&u.jsxs("div",{className:"bg-red-900/20 p-2 rounded border border-red-800/30",children:[u.jsx("div",{className:"text-red-500 text-[10px] mb-1",children:"MAX LOSS"}),u.jsxs("div",{className:"text-red-400 font-bold",children:["-$",h.toFixed(2)]})]}),u.jsxs("div",{className:"bg-orange-900/20 p-2 rounded border border-orange-800/30",children:[u.jsx("div",{className:"text-orange-500 text-[10px] mb-1",children:"LIQUIDATION"}),u.jsxs("div",{className:"text-orange-400 font-bold",children:["$",m.toFixed(2)]})]})]})]})]})]}),u.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800 text-xs",children:[u.jsx("div",{className:"flex items-center gap-2 mb-2 text-slate-500 font-bold uppercase tracking-wider",children:"Trigger Condition"}),a.condition?u.jsx("div",{className:"space-y-1",children:u.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-medium",children:[u.jsx(dn,{size:14}),a.condition.indicator.toUpperCase()," (",a.condition.symbol,") ",a.condition.operator," ",a.condition.value]})}):u.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[u.jsx(Qr,{size:14}),"Time: ",new Date(a.executeAt).toLocaleString()]})]})]})},a.id)})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(Im,{size:20,className:"text-slate-400"})," History"]}),u.jsxs(_r,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-500 hover:text-white",children:[u.jsx(Th,{size:14})," Clear History"]})]}),u.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar pr-2",children:i.length===0?u.jsx("div",{className:"text-center py-8 text-slate-600 text-sm",children:"No history available."}):i.map((a,l)=>u.jsx(_t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:l*.05},children:u.jsxs(Zs,{className:kt("p-4",a.status==="completed"?"opacity-70 hover:opacity-100 transition-opacity":"border-red-900/30 bg-red-900/10"),children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[a.status==="completed"?u.jsx(Im,{size:16,className:"text-emerald-500"}):u.jsx(Ci,{size:16,className:"text-red-500"}),u.jsx(Hi,{variant:a.status==="completed"?"success":"destructive",children:a.status.toUpperCase()})]}),u.jsx("span",{className:"text-xs text-slate-500",children:a.lastExecuted?new Date(a.lastExecuted).toLocaleString():"Unknown"})]}),u.jsxs("div",{className:"text-xs text-slate-300 mb-2",children:[a.type," - ",a.condition?"Condition":"Time"," Trigger"]}),u.jsx("div",{className:"bg-black/30 p-2 rounded text-[10px] font-mono text-slate-400 break-all",children:a.result})]})},a.id))})]})]})})},unt=5,dnt="dealer_cycle_summary",$b={recentCycles:[],aiSummary:null,lastSummaryTime:0,isGenerating:!1};class fnt{constructor(){this.state=new Map,this.listeners=new Map,this.initialized=new Map,this.state.set("hyperliquid",{...$b}),this.state.set("polymarket",{...$b}),this.listeners.set("hyperliquid",new Set),this.listeners.set("polymarket",new Set),this.initialized.set("hyperliquid",!1),this.initialized.set("polymarket",!1)}getStorageKey(e){return Ae.getUserKey(`${dnt}_${e}`)}async loadState(e){var n;if(!this.initialized.get(e)){try{const r=this.getStorageKey(e),i=await Ae.getItem(r);if(i){const s=JSON.parse(i);this.state.set(e,{...$b,...s,isGenerating:!1}),console.log(`[CycleSummaryStore] Loaded ${e} state: ${((n=s.recentCycles)==null?void 0:n.length)||0} cycles`)}}catch(r){console.warn(`[CycleSummaryStore] Failed to load ${e} state:`,r)}this.initialized.set(e,!0)}}async saveState(e){try{const n=this.getStorageKey(e),r=this.state.get(e);if(r){const{isGenerating:i,...s}=r;await Ae.setItem(n,JSON.stringify(s))}}catch(n){console.warn(`[CycleSummaryStore] Failed to save ${e} state:`,n)}}getSnapshot(e){return this.state.get(e)||{...$b}}subscribe(e,n){const r=this.listeners.get(e);return r&&r.add(n),()=>{r==null||r.delete(n)}}notify(e){const n=this.listeners.get(e);n==null||n.forEach(r=>r())}recordCycle(e,n){const r=this.state.get(e);if(!r)return;const i=r.recentCycles.length+1,o=[{...n,cycleNumber:i},...r.recentCycles].slice(0,unt);this.state.set(e,{...r,recentCycles:o}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Recorded ${e} cycle #${i}: ${n.decisions.length} decisions`)}setGenerating(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,isGenerating:n}),this.notify(e))}setSummary(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,aiSummary:n,lastSummaryTime:Date.now(),isGenerating:!1}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Updated ${e} AI summary (${n.length} chars)`))}clear(e){this.state.set(e,{...$b}),this.notify(e),this.saveState(e)}getContextForAI(e){const n=this.state.get(e);return!n||!n.aiSummary?null:n.aiSummary}getCyclesForSummary(e){const n=this.state.get(e);return(n==null?void 0:n.recentCycles)||[]}}const Fc=new fnt;let JX=class{constructor(e,n,r){this.next=r,r&&(r.prev=this),this.prev=n,n&&(n.next=this),this.data=e}};class ope{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new JX(e,this._tail),this._length===0&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new JX(e,void 0,this._head),this._length===0&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(e!==void 0)return this._next=e.next,this._current=e,e.data}}class xy extends ope{constructor(e,n,r,i){if(super(),this.size=e,this.maintainHigh=n,this.maintainLow=r,this.maintainSum=i,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||typeof e!="number")throw"Size required and should be a number.";this._push=this.push,this.push=function(s){this.add(s),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}let hnt={};function pnt(t){return hnt[t]}function mnt(t){let e=pnt("precision");return e?parseFloat(t.toPrecision(e)):t}class Kt{constructor(e){this.format=e.format||mnt}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class Jl extends Kt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){var i=new ope,s=0,o=1,a=yield,l;for(i.push(0);;)o<r?(o++,i.push(a),s=s+a):(s=s-i.shift()+a,l=s/r,i.push(a)),a=yield l});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!==void 0&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Jl.calculate=gnt;function gnt(t){Kt.reverseInputs(t);var e=new Jl(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class Fx extends Kt{constructor(e){super(e);var n=e.period,r=e.values,i=2/(n+1),s;this.result=[],s=new Jl({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Fx.calculate=ynt;function ynt(t){Kt.reverseInputs(t);var e=new Fx(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class aP extends Kt{constructor(e){super(e);var n=e.period,r=e.values,i=1/n,s;this.result=[],s=new Jl({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l!==void 0&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}aP.calculate=xnt;function xnt(t){Kt.reverseInputs(t);var e=new aP(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class Dk extends Kt{constructor(e){super(e);var n=e.SimpleMAOscillator?Jl:Fx,r=e.SimpleMASignal?Jl:Fx,i=new n({period:e.fastPeriod,values:[],format:l=>l}),s=new n({period:e.slowPeriod,values:[],format:l=>l}),o=new r({period:e.signalPeriod,values:[],format:l=>l}),a=this.format;this.result=[],this.generator=(function*(){for(var l=0,c,d,h,m,g,v;;){if(l<e.slowPeriod){c=yield,g=i.nextValue(c),v=s.nextValue(c),l++;continue}g&&v&&(d=g-v,h=o.nextValue(d)),m=d-h,c=yield{MACD:a(d),signal:h?a(h):void 0,histogram:isNaN(m)?void 0:a(m)},g=i.nextValue(c),v=s.nextValue(c)}})(),this.generator.next(),e.values.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){var n=this.generator.next(e).value;return n}}Dk.calculate=vnt;function vnt(t){Kt.reverseInputs(t);var e=new Dk(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class i7 extends Kt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,d,h=o;for(o=yield;;)d=o-h,d=d>0?d:0,d>0&&(l=l+d),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+d)/s,h=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}i7.calculate=bnt;function bnt(t){Kt.reverseInputs(t);var e=new i7(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class s7 extends Kt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,d,h=o;for(o=yield;;)d=h-o,d=d>0?d:0,d>0&&(l=l+d),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+d)/s,h=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}s7.calculate=wnt;function wnt(t){Kt.reverseInputs(t);var e=new s7(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class jk extends Kt{constructor(e){super(e);var n=e.period,r=e.values,i=new i7({period:n,values:[]}),s=new s7({period:n,values:[]});this.generator=(function*(o){for(var a=yield,l,c,d,h;;)l=i.nextValue(a),c=s.nextValue(a),l!==void 0&&c!==void 0&&(c===0?h=100:l===0?h=0:(d=l/c,d=isNaN(d)?0:d,h=parseFloat((100-100/(1+d)).toFixed(2)))),a=yield h})(),this.generator.next(),this.result=[],r.forEach(o=>{var a=this.generator.next(o);a.value!==void 0&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}jk.calculate=Ent;function Ent(t){Kt.reverseInputs(t);var e=new jk(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class o7 extends Kt{constructor(e){super(e);var n=e.period,r=e.values,i=new Jl({period:n,values:[],format:s=>s});this.result=[],this.generator=(function*(){var s,o,a=new xy(n);s=yield;for(var l;;){if(a.push(s),o=i.nextValue(s),o){let c=0;for(let d of a.iterator())c=c+Math.pow(d-o,2);l=Math.sqrt(c/n)}s=yield l}})(),this.generator.next(),r.forEach(s=>{var o=this.generator.next(s);o.value!=null&&this.result.push(this.format(o.value))})}nextValue(e){var n=this.generator.next(e);if(n.value!=null)return this.format(n.value)}}o7.calculate=Snt;function Snt(t){Kt.reverseInputs(t);var e=new o7(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class Bk extends Kt{constructor(e){super(e);var n=e.period,r=e.values,i=e.stdDev,s=this.format,o,a;this.result=[],o=new Jl({period:n,values:[],format:l=>l}),a=new o7({period:n,values:[],format:l=>l}),this.generator=(function*(){var l,c,d,h;for(c=yield;;){if(d=o.nextValue(c),h=a.nextValue(c),d){let m=s(d),g=s(d+h*i),v=s(d-h*i),x=s((c-v)/(g-v));l={middle:m,upper:g,lower:v,pb:x}}c=yield l}})(),this.generator.next(),r.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}Bk.calculate=Ant;function Ant(t){Kt.reverseInputs(t);var e=new Bk(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class ww extends Kt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){for(var i=0,s=1,o=yield,a=0;;)s<r?(s++,i=i+o,a=void 0):s==r?(s++,i=i+o,a=i):a=a-a/r+o,o=yield a});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!=null&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}ww.calculate=Tnt;function Tnt(t){Kt.reverseInputs(t);var e=new ww(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class a7 extends Kt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(c>l&&c>0?c:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Kt.reverseInputs(e);var n=new a7(e).result;return e.reversedInput&&n.reverse(),Kt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class l7 extends Kt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(l>c&&l>0?l:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Kt.reverseInputs(e);var n=new l7(e).result;return e.reversedInput&&n.reverse(),Kt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class lP extends Kt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var o=yield,a,l;;)a===void 0&&(a=o.close,o=yield l),l=Math.max(o.high-o.low,isNaN(Math.abs(o.high-a))?0:Math.abs(o.high-a),isNaN(Math.abs(o.low-a))?0:Math.abs(o.low-a)),a=o.close,l!=null&&(l=s(l)),o=yield l})(),this.generator.next(),n.forEach((o,a)=>{var l=this.generator.next({high:r[a],low:n[a],close:i[a]});l.value!=null&&this.result.push(l.value)})}nextValue(e){return this.generator.next(e).value}}lP.calculate=knt;function knt(t){Kt.reverseInputs(t);var e=new lP(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class Uk extends Kt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format,a=new l7({high:[],low:[]}),l=new a7({high:[],low:[]}),c=new ww({period:s,values:[],format:v=>v}),d=new ww({period:s,values:[],format:v=>v}),h=new ww({period:s,values:[],format:v=>v}),m=new aP({period:s,values:[],format:v=>v}),g=new lP({low:[],high:[],close:[]});if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){for(var v=yield,x,b,w,T;;){let N=g.nextValue(v),O=a.nextValue(v),j=l.nextValue(v);if(N===void 0){v=yield;continue}let _=h.nextValue(N),F=c.nextValue(O),z=d.nextValue(j);if(_!=null&&F!=null&&z!=null){x=F*100/_,b=z*100/_;let D=Math.abs(x-b),$=x+b;w=D/$*100,T=m.nextValue(w)}v=yield{adx:T,pdi:x,mdi:b}}})(),this.generator.next(),n.forEach((v,x)=>{var b=this.generator.next({high:r[x],low:n[x],close:i[x]});b.value!=null&&b.value.adx!=null&&this.result.push({adx:o(b.value.adx),pdi:o(b.value.pdi),mdi:o(b.value.mdi)})})}nextValue(e){let n=this.generator.next(e).value;if(n!=null&&n.adx!=null)return{adx:this.format(n.adx),pdi:this.format(n.pdi),mdi:this.format(n.mdi)}}}Uk.calculate=Nnt;function Nnt(t){Kt.reverseInputs(t);var e=new Uk(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class Fk extends Kt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";var a=new lP({low:[],high:[],close:[]}),l=new aP({period:s,values:[],format:c=>c});this.result=[],this.generator=(function*(){for(var c=yield,d,h;;)h=a.nextValue({low:c.low,high:c.high,close:c.close}),h===void 0?d=void 0:d=l.nextValue(h),c=yield d})(),this.generator.next(),n.forEach((c,d)=>{var h=this.generator.next({high:r[d],low:n[d],close:i[d]});h.value!==void 0&&this.result.push(o(h.value))})}nextValue(e){return this.generator.next(e).value}}Fk.calculate=Cnt;function Cnt(t){Kt.reverseInputs(t);var e=new Fk(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class $k extends Kt{constructor(e){super(e);let n=e.low,r=e.high,i=e.close,s=e.period,o=e.signalPeriod,a=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){let l=1,c=new xy(s,!0,!1),d=new xy(s,!1,!0),h=new Jl({period:o,values:[],format:x=>x}),m,g;for(var v=yield;;){if(c.push(v.high),d.push(v.low),l<s){l++,v=yield;continue}let x=d.periodLow;m=(v.close-x)/(c.periodHigh-x)*100,m=isNaN(m)?0:m,g=h.nextValue(m),v=yield{k:a(m),d:g!==void 0?a(g):void 0}}})(),this.generator.next(),n.forEach((l,c)=>{var d=this.generator.next({high:r[c],low:n[c],close:i[c]});d.value!==void 0&&this.result.push(d.value)})}nextValue(e){let n=this.generator.next(e);if(n.value!==void 0)return n.value}}$k.calculate=Pnt;function Pnt(t){Kt.reverseInputs(t);var e=new $k(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class zk extends Kt{constructor(e){super(e);var n=e.close,r=e.volume;this.result=[],this.generator=(function*(){var i=0,s,o;for(s=yield,s.close&&typeof s.close=="number"&&(o=s.close,s=yield);;)o<s.close?i=i+s.volume:s.close<o&&(i=i-s.volume),o=s.close,s=yield i})(),this.generator.next(),n.forEach((i,s)=>{let o={close:n[s],volume:r[s]},a=this.generator.next(o);a.value!=null&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}zk.calculate=_nt;function _nt(t){Kt.reverseInputs(t);var e=new zk(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class Vk extends Kt{constructor(e){super(e),this.result=[];var n={conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},r=Object.assign({},n,e),i=new xy(r.conversionPeriod*2,!0,!0,!1),s=new xy(r.basePeriod*2,!0,!0,!1),o=new xy(r.spanPeriod*2,!0,!0,!1);this.generator=(function*(){let a,l,c=Math.max(r.conversionPeriod,r.basePeriod,r.spanPeriod,r.displacement),d=1;for(l=yield;;){if(i.push(l.high),i.push(l.low),s.push(l.high),s.push(l.low),o.push(l.high),o.push(l.low),d<c)d++;else{let h=(i.periodHigh+i.periodLow)/2,m=(s.periodHigh+s.periodLow)/2,g=(h+m)/2,v=(o.periodHigh+o.periodLow)/2;a={conversion:h,base:m,spanA:g,spanB:v}}l=yield a}})(),this.generator.next(),e.low.forEach((a,l)=>{var c=this.generator.next({high:e.high[l],low:e.low[l]});c.value&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}Vk.calculate=Int;function Int(t){Kt.reverseInputs(t);var e=new Vk(t).result;return t.reversedInput&&e.reverse(),Kt.reverseInputs(t),e}class Rnt{normalizeInterval(e){const n=e.toLowerCase();return{1:"1m",5:"5m",15:"15m",60:"1h",240:"4h",d:"1d","1d":"1d",w:"1d","1w":"1d","7d":"1d"}[n]||"1h"}async getMarketPrice(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,"");return{price:await zt.getCurrentPrice(n),exchange:"Hyperliquid",lastUpdate:new Date().toISOString()}}catch(n){throw console.error(`Error fetching market price for ${e}:`,n),new Error(`Failed to get market price: ${n.message}`)}}async getOHLCV(e,n="60"){try{const r=e.replace(/USDT$/i,"").replace(/USD$/i,""),i=this.normalizeInterval(n),s=await zt.getCandles(r,i,1);if(!s||s.length===0)throw new Error("No candle data available");const o=s[s.length-1];return{open:o.open,high:o.high,low:o.low,close:o.close,volume:o.volume||0,timestamp:new Date(o.time).toISOString()}}catch(r){throw console.error(`Error fetching OHLCV for ${e}:`,r),new Error(`Failed to get OHLCV data: ${r.message}`)}}async getHistory(e,n="1D",r=100){try{const i=e.replace(/USDT$/i,"").replace(/USD$/i,""),s=this.normalizeInterval(n);return(await zt.getCandles(i,s,r)).map(a=>({time:Math.floor(a.time/1e3),open:a.open,high:a.high,low:a.low,close:a.close,volume:a.volume}))}catch(i){return console.error(`Error fetching history for ${e}:`,i),[]}}async getIndicator(e,n,r="60",i){try{const s=e.replace(/USDT$/i,"").replace(/USD$/i,""),o=this.normalizeInterval(r),a=await zt.getCandles(s,o,200);if(!a||a.length===0)throw new Error("No data available for indicator calculation");const l=a.map(x=>x.close),c=a.map(x=>x.high),d=a.map(x=>x.low),h=a.map(x=>x.volume||0);let m=0,g=[];switch(n.toLowerCase()){case"rsi":const x=(i==null?void 0:i.period)||14,b={values:l,period:x},w=jk.calculate(b);m=w[w.length-1],g=w.slice(-100);break;case"macd":const T={values:l,fastPeriod:(i==null?void 0:i.fast)||12,slowPeriod:(i==null?void 0:i.slow)||26,signalPeriod:(i==null?void 0:i.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1},N=Dk.calculate(T),O=N[N.length-1];m={macd:(O==null?void 0:O.MACD)||0,signal:(O==null?void 0:O.signal)||0,histogram:(O==null?void 0:O.histogram)||0},g=N.slice(-100);break;case"ema":const _={period:(i==null?void 0:i.period)||20,values:l},F=Fx.calculate(_);m=F[F.length-1],g=F.slice(-100);break;case"sma":const D={period:(i==null?void 0:i.period)||20,values:l},$=Jl.calculate(D);m=$[$.length-1],g=$.slice(-100);break;case"stoch":const G={high:c,low:d,close:l,period:(i==null?void 0:i.period)||14,signalPeriod:(i==null?void 0:i.signalPeriod)||3},H=$k.calculate(G),U=H[H.length-1];m={k:(U==null?void 0:U.k)||0,d:(U==null?void 0:U.d)||0},g=H.slice(-100);break;case"bollinger":const A=(i==null?void 0:i.period)||20,I=(i==null?void 0:i.stdDev)||2,L={period:A,values:l,stdDev:I},q=Bk.calculate(L),K=q[q.length-1],te=l[l.length-1],Y=K?(te-K.lower)/(K.upper-K.lower):.5;m={upper:(K==null?void 0:K.upper)||0,middle:(K==null?void 0:K.middle)||0,lower:(K==null?void 0:K.lower)||0,pb:Y},g=q.slice(-100);break;case"atr":const V=(i==null?void 0:i.period)||14,M={high:c,low:d,close:l,period:V},P=Fk.calculate(M);m=P[P.length-1]||0,g=P.slice(-100);break;case"adx":const W=(i==null?void 0:i.period)||14,X={high:c,low:d,close:l,period:W},se=Uk.calculate(X),ae=se[se.length-1];m={adx:(ae==null?void 0:ae.adx)||0,pdi:(ae==null?void 0:ae.pdi)||0,mdi:(ae==null?void 0:ae.mdi)||0},g=se.slice(-100);break;case"obv":const Te={close:l,volume:h},oe=zk.calculate(Te);m=oe[oe.length-1]||0,g=oe.slice(-100);break;case"vwap":let ve=0,ke=0;const pe=[];for(let st=0;st<a.length;st++){const ut=(c[st]+d[st]+l[st])/3;ve+=ut*h[st],ke+=h[st],pe.push(ke>0?ve/ke:ut)}m=pe[pe.length-1]||l[l.length-1],g=pe.slice(-100);break;case"ichimoku":const ze=(i==null?void 0:i.conversion)||9,Me=(i==null?void 0:i.base)||26,he=(i==null?void 0:i.spanB)||52,_e=(i==null?void 0:i.displacement)||26,We={high:c,low:d,conversionPeriod:ze,basePeriod:Me,spanPeriod:he,displacement:_e},Ke=Vk.calculate(We),it=Ke[Ke.length-1];m={tenkanSen:(it==null?void 0:it.conversion)||0,kijunSen:(it==null?void 0:it.base)||0,senkouSpanA:(it==null?void 0:it.spanA)||0,senkouSpanB:(it==null?void 0:it.spanB)||0,chikouSpan:l[l.length-_e]||l[l.length-1]},g=Ke.slice(-100);break;case"price":m=l[l.length-1],g=l.slice(-100);break;default:throw new Error(`Unsupported indicator: ${n}`)}return{symbol:e,indicator:n.toUpperCase(),value:m,history:g,timestamp:Date.now()}}catch(s){throw console.error(`Error calculating indicator ${n} for ${e}:`,s),new Error(`Failed to calculate indicator: ${s.message}`)}}async getTradingViewSummary(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,""),r=await zt.getCandles(n,"1h",12);if(!r||r.length<2)return{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"};let i=0,s=0;for(let l=1;l<r.length;l++)r[l].close>r[l-1].close?i++:s++;const o=Math.max(0,r.length-1-i-s);let a;return i>8?a="STRONG_BUY":i>6?a="BUY":s>8?a="STRONG_SELL":s>6?a="SELL":a="NEUTRAL",{buy:i,sell:s,neutral:o,recommendation:a}}catch(n){return console.error(`Error fetching summary for ${e}:`,n),{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"}}}detectDivergences(e,n,r){const i=[];if(e.length<20||n.length<20)return i;const o=(m,g=5)=>{const v=[],x=[];for(let b=g;b<m.length-g;b++){let w=!0,T=!0;for(let N=b-g;N<=b+g;N++)N!==b&&(m[N]<=m[b]&&(w=!1),m[N]>=m[b]&&(T=!1));w&&v.push(b),T&&x.push(b)}return{minima:v,maxima:x}},a=e.slice(-20),l=n.slice(-20),c=r.slice(-20),d=o(a),h=o(l);if(d.minima.length>=2&&h.minima.length>=2){const m=d.minima[d.minima.length-1],g=d.minima[d.minima.length-2],v=h.minima[h.minima.length-1],x=h.minima[h.minima.length-2],b=a[m]<a[g],w=l[v]>l[x];if(b&&w){const O=l[v]<30?"STRONG":l[v]<40?"MODERATE":"WEAK";i.push({type:"BULLISH",indicator:"RSI",description:`Price made lower low (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made higher low (${l[x].toFixed(1)}  ${l[v].toFixed(1)}). Potential reversal UP.`,strength:O,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}const T=a[m]>a[g],N=l[v]<l[x];T&&N&&i.push({type:"HIDDEN_BULLISH",indicator:"RSI",description:"Price made higher low but RSI made lower low. Bullish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}if(d.maxima.length>=2&&h.maxima.length>=2){const m=d.maxima[d.maxima.length-1],g=d.maxima[d.maxima.length-2],v=h.maxima[h.maxima.length-1],x=h.maxima[h.maxima.length-2],b=a[m]>a[g],w=l[v]<l[x];if(b&&w){const O=l[v]>70?"STRONG":l[v]>60?"MODERATE":"WEAK";i.push({type:"BEARISH",indicator:"RSI",description:`Price made higher high (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made lower high (${l[x].toFixed(1)}  ${l[v].toFixed(1)}). Potential reversal DOWN.`,strength:O,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}const T=a[m]<a[g],N=l[v]>l[x];T&&N&&i.push({type:"HIDDEN_BEARISH",indicator:"RSI",description:"Price made lower high but RSI made higher high. Bearish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}if(c.length>=10){const m=c[c.length-1]-c[c.length-5],g=a[a.length-1]-a[a.length-5];m<-.5&&g>0&&i.push({type:"BEARISH",indicator:"MACD",description:"MACD histogram declining while price rising. Momentum weakening.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}}),m>.5&&g<0&&i.push({type:"BULLISH",indicator:"MACD",description:"MACD histogram rising while price falling. Momentum building.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}})}return i}calculateIndicatorFromCandles(e,n,r){if(!e||e.length===0)return{value:0,history:[]};const i=e.map(h=>h.close),s=e.map(h=>h.high),o=e.map(h=>h.low),a=e.map(h=>h.volume||0);let l=0,c=[];switch(n.toLowerCase()){case"rsi":const h=(r==null?void 0:r.period)||14,m=jk.calculate({values:i,period:h});l=m[m.length-1]||0,c=m.slice(-100);break;case"macd":const g=Dk.calculate({values:i,fastPeriod:(r==null?void 0:r.fast)||12,slowPeriod:(r==null?void 0:r.slow)||26,signalPeriod:(r==null?void 0:r.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1}),v=g[g.length-1];l={macd:(v==null?void 0:v.MACD)||0,signal:(v==null?void 0:v.signal)||0,histogram:(v==null?void 0:v.histogram)||0},c=g.slice(-100).map(q=>({macd:(q==null?void 0:q.MACD)||0,signal:(q==null?void 0:q.signal)||0,histogram:(q==null?void 0:q.histogram)||0}));break;case"ema":const x=Fx.calculate({period:(r==null?void 0:r.period)||20,values:i});l=x[x.length-1]||0,c=x.slice(-100);break;case"sma":const b=Jl.calculate({period:(r==null?void 0:r.period)||20,values:i});l=b[b.length-1]||0,c=b.slice(-100);break;case"stoch":const w=$k.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14,signalPeriod:(r==null?void 0:r.signalPeriod)||3}),T=w[w.length-1];l={k:(T==null?void 0:T.k)||0,d:(T==null?void 0:T.d)||0},c=w.slice(-100);break;case"bollinger":const N=Bk.calculate({period:(r==null?void 0:r.period)||20,values:i,stdDev:(r==null?void 0:r.stdDev)||2}),O=N[N.length-1],j=i[i.length-1],_=O?(j-O.lower)/(O.upper-O.lower):.5;l={upper:(O==null?void 0:O.upper)||0,middle:(O==null?void 0:O.middle)||0,lower:(O==null?void 0:O.lower)||0,pb:_},c=N.slice(-100);break;case"atr":const F=Fk.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14});l=F[F.length-1]||0,c=F.slice(-100);break;case"adx":const z=Uk.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14}),D=z[z.length-1];l={adx:(D==null?void 0:D.adx)||0,pdi:(D==null?void 0:D.pdi)||0,mdi:(D==null?void 0:D.mdi)||0},c=z.slice(-100);break;case"obv":const $=zk.calculate({close:i,volume:a});l=$[$.length-1]||0,c=$.slice(-100);break;case"vwap":let G=0,H=0;const U=[];for(let q=0;q<e.length;q++){const K=(s[q]+o[q]+i[q])/3;G+=K*a[q],H+=a[q],U.push(H>0?G/H:K)}l=U[U.length-1]||i[i.length-1],c=U.slice(-100);break;case"ichimoku":const A=Vk.calculate({high:s,low:o,conversionPeriod:(r==null?void 0:r.conversion)||9,basePeriod:(r==null?void 0:r.base)||26,spanPeriod:(r==null?void 0:r.spanB)||52,displacement:(r==null?void 0:r.displacement)||26}),I=A[A.length-1],L=(r==null?void 0:r.displacement)||26;l={tenkanSen:(I==null?void 0:I.conversion)||0,kijunSen:(I==null?void 0:I.base)||0,senkouSpanA:(I==null?void 0:I.spanA)||0,senkouSpanB:(I==null?void 0:I.spanB)||0,chikouSpan:i[i.length-L]||i[i.length-1]},c=A.slice(-100);break;default:console.warn(`[MarketDataMCP] Unknown indicator: ${n}`)}return{value:l,history:c}}}const Co=new Rnt,Un={async getMarketData(t){return await zt.getMarketData(t)},async getPositions(t){return(await zt.getUserState(t)).assetPositions},async getOpenOrders(t){return await zt.getOpenOrders(t)},async getUserFills(t){return await zt.getUserFills(t)},async getUserLedgerUpdates(t){return await zt.getUserLedgerUpdates(t)},async createOrder(t,e,n,r,i,s){return await zt.placeOrder(t,e,n,r,i,s)},async cancelOrder(t,e,n){return await zt.cancelOrder(t,e,n)},async getUserState(t){return await zt.getUserState(t)},async updateLeverage(t,e,n,r){return await zt.updateLeverage(t,e,n,r)},async updateIsolatedMargin(t,e,n,r){return await zt.updateIsolatedMargin(t,e,n,r)},async closePosition(t,e,n,r="market",i){return await zt.closePosition(t,e,n,r,i)},async withdrawUSDC(t,e,n){return await zt.withdrawUSDC(t,e,n)},async getAvailableAssets(){return await zt.getAllAvailableAssets()},async getAssetDecimals(t){return await zt.getAssetDecimals(t)},async validateAsset(t){return await zt.isValidAsset(t)},async getAssetContexts(){return await zt.getAssetContexts()},async getFundingRate(t){return await zt.getFundingRate(t)},async getUserFees(t){return await zt.getUserFees(t)},async getUserFundingHistory(t,e,n){return await zt.getUserFundingHistory(t,e,n)},calculateBreakevenPrice(t,e,n,r,i,s,o){return zt.calculateBreakevenPrice(t,e,n,r,i,s,o)}};function ape(t){for(const[e,n]of Object.entries(wN))if(n.indicators.includes(t))return e;return null}function lpe(t,e){return wN[e].indicators.filter(r=>{var i;return(i=t[r])==null?void 0:i.enabled}).length}function cpe(t,e){return lpe(t,e)>=wN[e].maxIndicators}function upe(t){return Object.values(t).filter(e=>e.enabled).length}function dpe(t){return upe(t)>=Nte}function XX(t,e){var r;if((r=t[e])!=null&&r.enabled)return!0;if(dpe(t))return!1;const n=ape(e);return!(n&&cpe(t,n))}function Ont(t,e){const r={...e||ry};for(const i of Object.keys(r))r[i]={...r[i],enabled:!1};if(t!=="custom"){const i=ad[t];for(const s of i.indicators)r[s]&&(r[s]={...r[s],enabled:!0})}return r}function Mnt(t){const e=Object.keys(t).filter(n=>t[n].enabled).sort();for(const[n,r]of Object.entries(ad)){if(n==="custom")continue;const i=[...r.indicators].sort();if(JSON.stringify(e)===JSON.stringify(i))return n}return"custom"}class Lnt{constructor(){this.userFeesCache=null,this.userFeesCacheTime=0,this.FEES_CACHE_TTL=300*1e3}async getUserFeesFromCache(e){const n=Date.now();if(this.userFeesCache&&n-this.userFeesCacheTime<this.FEES_CACHE_TTL)return this.userFeesCache;if(e)try{const r=await Un.getUserFees(e);return this.userFeesCache={makerFee:r.makerFee,takerFee:r.takerFee},this.userFeesCacheTime=n,this.userFeesCache}catch{console.warn("[DealerMCP] Failed to fetch user fees, using defaults")}return{makerFee:2e-4,takerFee:5e-4}}async getMarketContext(e,n,r="60",i,s=100){var a,l;const o=`${e}USDT`;try{const c=await Co.getMarketPrice(o),h=await Co.getHistory(o,r,200),m=h.slice(-s);console.log(`[DealerMCP] Fetched ${h.length} candles, using last ${m.length} for history (config: ${s})`);const g={},v=[],x=h.map(H=>({open:H.open,high:H.high,low:H.low,close:H.close,volume:H.volume||0})),b=i?Object.entries(i).filter(([H,U])=>U.enabled).map(([H,U])=>({name:H,params:U.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:H,params:U}of b)try{const A=Co.calculateIndicatorFromCandles(x,H,U),I=i==null?void 0:i[H],L=(I==null?void 0:I.weight)??1,q=ape(H);g[H]={value:A.value,history:A.history,weight:L,category:q},v.push(H)}catch(A){console.warn(`[DealerMCP] Failed to calculate ${H} for ${e}:`,A)}const[w,T,N]=await Promise.all([Un.getFundingRate(e).catch(()=>null),this.getUserFeesFromCache(n),zt.getOrderBookMetrics(e).catch(()=>null)]),O=(w==null?void 0:w.funding)||0,j=Math.abs(O)*3,_={fundingRate:O,dailyHoldingCost:j},F=((a=g.rsi)==null?void 0:a.history)||[],D=(((l=g.macd)==null?void 0:l.history)||[]).map(H=>(H==null?void 0:H.histogram)||0),$=m.map(H=>H.close),G=Co.detectDivergences($,F,D);return G.length>0&&console.log(`[DealerMCP] Divergences detected for ${e}:`,G.map(H=>`${H.type}(${H.indicator})`).join(", ")),console.log(`[DealerMCP] Context for ${e} (${r}m): Price=${c.price}, Indicators=[${v.join(",")}], Divergences=${G.length}, OrderBook=${N?"OK":"N/A"}`),{symbol:e,currentPrice:c.price,history:m,indicators:g,divergences:G,tradingCosts:_,orderBook:N||void 0,ts:Math.floor(Date.now()/1e3)}}catch(c){return console.error(`[DealerMCP] Failed to gather context for ${e}:`,c),{symbol:e,currentPrice:0,history:[],indicators:{},divergences:[],tradingCosts:{fundingRate:0,dailyHoldingCost:0},error:c.message||"Data unavailable",ts:Math.floor(Date.now()/1e3)}}}calculatePositionBreakevens(e,n,r){return e.map(i=>{var x,b,w,T,N,O,j;const s=((x=i.position)==null?void 0:x.coin)||i.coin,o=parseFloat(((b=i.position)==null?void 0:b.entryPx)||i.entryPx||"0"),a=((T=(w=i.position)==null?void 0:w.leverage)==null?void 0:T.value)||1,c=parseFloat(((N=i.position)==null?void 0:N.szi)||i.szi||"0")>0,d=r.get(s)||0,h=Un.calculateBreakevenPrice(o,a,c,n.makerFee,n.takerFee,d,8),m=parseFloat(((O=i.position)==null?void 0:O.unrealizedPnl)||"0"),g=parseFloat(((j=i.position)==null?void 0:j.positionValue)||"0"),v=g>0?m/g*100:0;return{coin:s,entryPrice:o,breakevenPrice:h.breakevenPrice,minProfitPrice:h.minProfitPrice,currentPnlPercent:v,isAboveBreakeven:m>0}})}async getMacroSnapshot(e,n,r){const i=`${e}USDT`;try{const o=await Co.getHistory(i,n,50);if(o.length<20)return console.warn(`[DealerMCP] Insufficient candles for macro ${e}@${n}`),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)};const a=o.map(d=>({open:d.open,high:d.high,low:d.low,close:d.close,volume:d.volume||0})),l={},c=r?Object.entries(r).filter(([d,h])=>h.enabled).map(([d,h])=>({name:d,params:h.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:d,params:h}of c)try{const m=Co.calculateIndicatorFromCandles(a,d,h);l[d]={value:m.value}}catch(m){console.warn(`[DealerMCP] Failed to calc macro ${d} for ${e}:`,m)}return console.log(`[DealerMCP] Macro snapshot for ${e}@${n}: ${Object.keys(l).join(",")}`),{timeframe:n,indicators:l,ts:Math.floor(Date.now()/1e3)}}catch(s){return console.error(`[DealerMCP] Macro snapshot failed for ${e}:`,s),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)}}}}const NO=new Lnt;var Dnt={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let jnt,Bnt;function Unt(){return{geminiUrl:jnt,vertexUrl:Bnt}}function Fnt(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=Unt();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jd{}function Tt(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function C(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const d=l[c];C(d,e.slice(s+1),n[c])}else for(const c of l)C(c,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];C(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function k(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>k(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function $nt(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}uD(t,i,s,0,o)}}function uD(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])uD(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,d]of Object.entries(l)){const h=[];for(const m of n.slice(r))m==="*"?h.push(c):h.push(m);C(o,h,d)}for(const c of a)delete o[c]}}else{const o=t;s in o&&uD(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c7(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function znt(t){const e={},n=k(t,["operationName"]);n!=null&&C(e,["operationName"],n);const r=k(t,["resourceName"]);return r!=null&&C(e,["_url","resourceName"],r),e}function Vnt(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=k(t,["done"]);i!=null&&C(e,["done"],i);const s=k(t,["error"]);s!=null&&C(e,["error"],s);const o=k(t,["response","generateVideoResponse"]);return o!=null&&C(e,["response"],qnt(o)),e}function Hnt(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=k(t,["done"]);i!=null&&C(e,["done"],i);const s=k(t,["error"]);s!=null&&C(e,["error"],s);const o=k(t,["response"]);return o!=null&&C(e,["response"],Gnt(o)),e}function qnt(t){const e={},n=k(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Knt(o))),C(e,["generatedVideos"],s)}const r=k(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=k(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function Gnt(t){const e={},n=k(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Wnt(o))),C(e,["generatedVideos"],s)}const r=k(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=k(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function Knt(t){const e={},n=k(t,["video"]);return n!=null&&C(e,["video"],ert(n)),e}function Wnt(t){const e={},n=k(t,["_self"]);return n!=null&&C(e,["video"],trt(n)),e}function Ynt(t){const e={},n=k(t,["operationName"]);return n!=null&&C(e,["_url","operationName"],n),e}function Jnt(t){const e={},n=k(t,["operationName"]);return n!=null&&C(e,["_url","operationName"],n),e}function Xnt(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=k(t,["done"]);i!=null&&C(e,["done"],i);const s=k(t,["error"]);s!=null&&C(e,["error"],s);const o=k(t,["response"]);return o!=null&&C(e,["response"],Qnt(o)),e}function Qnt(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["parent"]);r!=null&&C(e,["parent"],r);const i=k(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function fpe(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=k(t,["done"]);i!=null&&C(e,["done"],i);const s=k(t,["error"]);s!=null&&C(e,["error"],s);const o=k(t,["response"]);return o!=null&&C(e,["response"],Znt(o)),e}function Znt(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["parent"]);r!=null&&C(e,["parent"],r);const i=k(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function ert(t){const e={},n=k(t,["uri"]);n!=null&&C(e,["uri"],n);const r=k(t,["encodedVideo"]);r!=null&&C(e,["videoBytes"],c7(r));const i=k(t,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function trt(t){const e={},n=k(t,["gcsUri"]);n!=null&&C(e,["uri"],n);const r=k(t,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],c7(r));const i=k(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var QX;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(QX||(QX={}));var ZX;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ZX||(ZX={}));var eQ;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(eQ||(eQ={}));var ye;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ye||(ye={}));var tQ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(tQ||(tQ={}));var nQ;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(nQ||(nQ={}));var rQ;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(rQ||(rQ={}));var iQ;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(iQ||(iQ={}));var sQ;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(sQ||(sQ={}));var oQ;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(oQ||(oQ={}));var aQ;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(aQ||(aQ={}));var lQ;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(lQ||(lQ={}));var cQ;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(cQ||(cQ={}));var uQ;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(uQ||(uQ={}));var dQ;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(dQ||(dQ={}));var fQ;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(fQ||(fQ={}));var hQ;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(hQ||(hQ={}));var pQ;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(pQ||(pQ={}));var mQ;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(mQ||(mQ={}));var Hk;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Hk||(Hk={}));var gQ;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gQ||(gQ={}));var yQ;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(yQ||(yQ={}));var xQ;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xQ||(xQ={}));var dD;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(dD||(dD={}));var vQ;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(vQ||(vQ={}));var bQ;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(bQ||(bQ={}));var wQ;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(wQ||(wQ={}));var EQ;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(EQ||(EQ={}));var SQ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(SQ||(SQ={}));var AQ;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(AQ||(AQ={}));var TQ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(TQ||(TQ={}));var kQ;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(kQ||(kQ={}));var NQ;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(NQ||(NQ={}));var CQ;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(CQ||(CQ={}));var PQ;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(PQ||(PQ={}));var _Q;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_Q||(_Q={}));var IQ;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(IQ||(IQ={}));var RQ;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(RQ||(RQ={}));var OQ;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(OQ||(OQ={}));var MQ;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(MQ||(MQ={}));var LQ;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(LQ||(LQ={}));var DQ;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(DQ||(DQ={}));var jQ;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(jQ||(jQ={}));var BQ;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(BQ||(BQ={}));var UQ;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(UQ||(UQ={}));var FQ;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(FQ||(FQ={}));var $Q;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})($Q||($Q={}));var zQ;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(zQ||(zQ={}));var VQ;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(VQ||(VQ={}));var HQ;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(HQ||(HQ={}));var qQ;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(qQ||(qQ={}));var GQ;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(GQ||(GQ={}));var KQ;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(KQ||(KQ={}));var WQ;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(WQ||(WQ={}));var YQ;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(YQ||(YQ={}));var Wg;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Wg||(Wg={}));class fD{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class zb{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const h=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const h of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class JQ{}class XQ{}class nrt{}class rrt{}class irt{}class srt{}class QQ{}class ZQ{}class eZ{}class ort{}class qk{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new qk;let i;const s=e;return n?i=Hnt(s):i=Vnt(s),Object.assign(r,i),r}}class tZ{}class nZ{}class rZ{}class iZ{}class art{}class lrt{}class crt{}class u7{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new u7,s=Xnt(e);return Object.assign(r,s),r}}class urt{}class drt{}class frt{}class sZ{}class hrt{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class prt{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class d7{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new d7,s=fpe(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function hpe(t,e){const n=zn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ppe(t){return Array.isArray(t)?t.map(e=>Gk(e)):[Gk(t)]}function Gk(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function mpe(t){const e=Gk(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gpe(t){const e=Gk(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function oZ(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function ype(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>oZ(e)):[oZ(t)]}function hD(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function aZ(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function lZ(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function $s(t){if(t==null)throw new Error("ContentUnion is required");return hD(t)?t:{role:"user",parts:ype(t)}}function f7(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=$s(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=$s(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>$s(n)):[$s(e)]}function nl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(aZ(t)||lZ(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[$s(t)]}const e=[],n=[],r=hD(t[0]);for(const i of t){const s=hD(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(aZ(i)||lZ(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:ype(n)}),e}function mrt(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ye).includes(n[0].toUpperCase())?n[0].toUpperCase():ye.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ye).includes(r.toUpperCase())?r.toUpperCase():ye.TYPE_UNSPECIFIED})}}function vy(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&mrt(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(ye).includes(a.toUpperCase())?a.toUpperCase():ye.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=vy(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(vy(c))}e[o]=l}else if(i.includes(o)){const l={};for(const[c,d]of Object.entries(a))l[c]=vy(d);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function h7(t){return vy(t)}function p7(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function m7(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Sv(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=vy(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=vy(e.response));return t}function Av(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function grt(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Xd(t,e){if(typeof e!="string")throw new Error("name must be a string");return grt(t,e,"cachedContents")}function xpe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Hh(t){return c7(t)}function yrt(t){return t!=null&&typeof t=="object"&&"name"in t}function xrt(t){return t!=null&&typeof t=="object"&&"video"in t}function vrt(t){return t!=null&&typeof t=="object"&&"uri"in t}function vpe(t){var e;let n;if(yrt(t)&&(n=t.name),!(vrt(t)&&(n=t.uri,n===void 0))&&!(xrt(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function bpe(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function wpe(t){for(const e of["models","tunedModels","publisherModels"])if(brt(t,e))return t[e];return[]}function brt(t,e){return t!==null&&typeof t=="object"&&e in t}function wrt(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Ert(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=wrt(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function Epe(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Srt(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Spe(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Tv(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Ape(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Art(t){const e={},n=k(t,["responsesFile"]);n!=null&&C(e,["fileName"],n);const r=k(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>iit(o))),C(e,["inlinedResponses"],s)}const i=k(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["inlinedEmbedContentResponses"],s)}return e}function Trt(t){const e={},n=k(t,["predictionsFormat"]);n!=null&&C(e,["format"],n);const r=k(t,["gcsDestination","outputUriPrefix"]);r!=null&&C(e,["gcsUri"],r);const i=k(t,["bigqueryDestination","outputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function krt(t){const e={},n=k(t,["format"]);n!=null&&C(e,["predictionsFormat"],n);const r=k(t,["gcsUri"]);r!=null&&C(e,["gcsDestination","outputUriPrefix"],r);const i=k(t,["bigqueryUri"]);if(i!=null&&C(e,["bigqueryDestination","outputUri"],i),k(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(k(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(k(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function YT(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["metadata","displayName"]);r!=null&&C(e,["displayName"],r);const i=k(t,["metadata","state"]);i!=null&&C(e,["state"],Ape(i));const s=k(t,["metadata","createTime"]);s!=null&&C(e,["createTime"],s);const o=k(t,["metadata","endTime"]);o!=null&&C(e,["endTime"],o);const a=k(t,["metadata","updateTime"]);a!=null&&C(e,["updateTime"],a);const l=k(t,["metadata","model"]);l!=null&&C(e,["model"],l);const c=k(t,["metadata","output"]);return c!=null&&C(e,["dest"],Art(Spe(c))),e}function pD(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=k(t,["state"]);i!=null&&C(e,["state"],Ape(i));const s=k(t,["error"]);s!=null&&C(e,["error"],s);const o=k(t,["createTime"]);o!=null&&C(e,["createTime"],o);const a=k(t,["startTime"]);a!=null&&C(e,["startTime"],a);const l=k(t,["endTime"]);l!=null&&C(e,["endTime"],l);const c=k(t,["updateTime"]);c!=null&&C(e,["updateTime"],c);const d=k(t,["model"]);d!=null&&C(e,["model"],d);const h=k(t,["inputConfig"]);h!=null&&C(e,["src"],Nrt(h));const m=k(t,["outputConfig"]);m!=null&&C(e,["dest"],Trt(Spe(m)));const g=k(t,["completionStats"]);return g!=null&&C(e,["completionStats"],g),e}function Nrt(t){const e={},n=k(t,["instancesFormat"]);n!=null&&C(e,["format"],n);const r=k(t,["gcsSource","uris"]);r!=null&&C(e,["gcsUri"],r);const i=k(t,["bigquerySource","inputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function Crt(t,e){const n={};if(k(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(k(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(k(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=k(e,["fileName"]);r!=null&&C(n,["fileName"],r);const i=k(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>rit(t,o))),C(n,["requests","requests"],s)}return n}function Prt(t){const e={},n=k(t,["format"]);n!=null&&C(e,["instancesFormat"],n);const r=k(t,["gcsUri"]);r!=null&&C(e,["gcsSource","uris"],r);const i=k(t,["bigqueryUri"]);if(i!=null&&C(e,["bigquerySource","inputUri"],i),k(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(k(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _rt(t){const e={},n=k(t,["data"]);if(n!=null&&C(e,["data"],n),k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Irt(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Tv(t,r)),n}function Rrt(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Tv(t,r)),n}function Ort(t){const e={},n=k(t,["content"]);n!=null&&C(e,["content"],n);const r=k(t,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],Mrt(r));const i=k(t,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const s=k(t,["finishReason"]);s!=null&&C(e,["finishReason"],s);const o=k(t,["avgLogprobs"]);o!=null&&C(e,["avgLogprobs"],o);const a=k(t,["groundingMetadata"]);a!=null&&C(e,["groundingMetadata"],a);const l=k(t,["index"]);l!=null&&C(e,["index"],l);const c=k(t,["logprobsResult"]);c!=null&&C(e,["logprobsResult"],c);const d=k(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),C(e,["safetyRatings"],m)}const h=k(t,["urlContextMetadata"]);return h!=null&&C(e,["urlContextMetadata"],h),e}function Mrt(t){const e={},n=k(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function Tpe(t){const e={},n=k(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>dit(s))),C(e,["parts"],i)}const r=k(t,["role"]);return r!=null&&C(e,["role"],r),e}function Lrt(t,e){const n={},r=k(t,["displayName"]);if(e!==void 0&&r!=null&&C(e,["batch","displayName"],r),k(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Drt(t,e){const n={},r=k(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=k(t,["dest"]);return e!==void 0&&i!=null&&C(e,["outputConfig"],krt(Srt(i))),n}function cZ(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["src"]);i!=null&&C(n,["batch","inputConfig"],Crt(t,Epe(t,i)));const s=k(e,["config"]);return s!=null&&Lrt(s,n),n}function jrt(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["model"],zn(t,r));const i=k(e,["src"]);i!=null&&C(n,["inputConfig"],Prt(Epe(t,i)));const s=k(e,["config"]);return s!=null&&Drt(s,n),n}function Brt(t,e){const n={},r=k(t,["displayName"]);return e!==void 0&&r!=null&&C(e,["batch","displayName"],r),n}function Urt(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["src"]);i!=null&&C(n,["batch","inputConfig"],Grt(t,i));const s=k(e,["config"]);return s!=null&&Brt(s,n),n}function Frt(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Tv(t,r)),n}function $rt(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Tv(t,r)),n}function zrt(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["name"]);r!=null&&C(e,["name"],r);const i=k(t,["done"]);i!=null&&C(e,["done"],i);const s=k(t,["error"]);return s!=null&&C(e,["error"],s),e}function Vrt(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["name"]);r!=null&&C(e,["name"],r);const i=k(t,["done"]);i!=null&&C(e,["done"],i);const s=k(t,["error"]);return s!=null&&C(e,["error"],s),e}function Hrt(t,e){const n={},r=k(e,["contents"]);if(r!=null){let s=f7(t,r);Array.isArray(s)&&(s=s.map(o=>o)),C(n,["requests[]","request","content"],s)}const i=k(e,["config"]);return i!=null&&(C(n,["_self"],qrt(i,n)),$nt(n,{"requests[].*":"requests[].request.*"})),n}function qrt(t,e){const n={},r=k(t,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=k(t,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const s=k(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&C(e,["requests[]","outputDimensionality"],s),k(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(k(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Grt(t,e){const n={},r=k(e,["fileName"]);r!=null&&C(n,["file_name"],r);const i=k(e,["inlinedRequests"]);return i!=null&&C(n,["requests"],Hrt(t,i)),n}function Krt(t){const e={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=k(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Wrt(t){const e={},n=k(t,["id"]);n!=null&&C(e,["id"],n);const r=k(t,["args"]);r!=null&&C(e,["args"],r);const i=k(t,["name"]);if(i!=null&&C(e,["name"],i),k(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(k(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Yrt(t){const e={},n=k(t,["mode"]);n!=null&&C(e,["mode"],n);const r=k(t,["allowedFunctionNames"]);if(r!=null&&C(e,["allowedFunctionNames"],r),k(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Jrt(t,e,n){const r={},i=k(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],Tpe($s(i)));const s=k(e,["temperature"]);s!=null&&C(r,["temperature"],s);const o=k(e,["topP"]);o!=null&&C(r,["topP"],o);const a=k(e,["topK"]);a!=null&&C(r,["topK"],a);const l=k(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=k(e,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const d=k(e,["stopSequences"]);d!=null&&C(r,["stopSequences"],d);const h=k(e,["responseLogprobs"]);h!=null&&C(r,["responseLogprobs"],h);const m=k(e,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=k(e,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const v=k(e,["frequencyPenalty"]);v!=null&&C(r,["frequencyPenalty"],v);const x=k(e,["seed"]);x!=null&&C(r,["seed"],x);const b=k(e,["responseMimeType"]);b!=null&&C(r,["responseMimeType"],b);const w=k(e,["responseSchema"]);w!=null&&C(r,["responseSchema"],h7(w));const T=k(e,["responseJsonSchema"]);if(T!=null&&C(r,["responseJsonSchema"],T),k(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(k(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=k(e,["safetySettings"]);if(n!==void 0&&N!=null){let U=N;Array.isArray(U)&&(U=U.map(A=>fit(A))),C(n,["safetySettings"],U)}const O=k(e,["tools"]);if(n!==void 0&&O!=null){let U=Av(O);Array.isArray(U)&&(U=U.map(A=>pit(Sv(A)))),C(n,["tools"],U)}const j=k(e,["toolConfig"]);if(n!==void 0&&j!=null&&C(n,["toolConfig"],hit(j)),k(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=k(e,["cachedContent"]);n!==void 0&&_!=null&&C(n,["cachedContent"],Xd(t,_));const F=k(e,["responseModalities"]);F!=null&&C(r,["responseModalities"],F);const z=k(e,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const D=k(e,["speechConfig"]);if(D!=null&&C(r,["speechConfig"],p7(D)),k(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=k(e,["thinkingConfig"]);$!=null&&C(r,["thinkingConfig"],$);const G=k(e,["imageConfig"]);G!=null&&C(r,["imageConfig"],nit(G));const H=k(e,["enableEnhancedCivicAnswers"]);return H!=null&&C(r,["enableEnhancedCivicAnswers"],H),r}function Xrt(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Ort(c))),C(e,["candidates"],l)}const i=k(t,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const s=k(t,["promptFeedback"]);s!=null&&C(e,["promptFeedback"],s);const o=k(t,["responseId"]);o!=null&&C(e,["responseId"],o);const a=k(t,["usageMetadata"]);return a!=null&&C(e,["usageMetadata"],a),e}function Qrt(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Tv(t,r)),n}function Zrt(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Tv(t,r)),n}function eit(t){const e={};if(k(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=k(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function tit(t){const e={};if(k(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(k(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=k(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function nit(t){const e={},n=k(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=k(t,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),k(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(k(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rit(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["request","model"],zn(t,r));const i=k(e,["contents"]);if(i!=null){let a=nl(i);Array.isArray(a)&&(a=a.map(l=>Tpe(l))),C(n,["request","contents"],a)}const s=k(e,["metadata"]);s!=null&&C(n,["metadata"],s);const o=k(e,["config"]);return o!=null&&C(n,["request","generationConfig"],Jrt(t,o,k(n,["request"],{}))),n}function iit(t){const e={},n=k(t,["response"]);n!=null&&C(e,["response"],Xrt(n));const r=k(t,["error"]);return r!=null&&C(e,["error"],r),e}function sit(t,e){const n={},r=k(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=k(t,["pageToken"]);if(e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),k(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function oit(t,e){const n={},r=k(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=k(t,["pageToken"]);e!==void 0&&i!=null&&C(e,["_query","pageToken"],i);const s=k(t,["filter"]);return e!==void 0&&s!=null&&C(e,["_query","filter"],s),n}function ait(t){const e={},n=k(t,["config"]);return n!=null&&sit(n,e),e}function lit(t){const e={},n=k(t,["config"]);return n!=null&&oit(n,e),e}function cit(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=k(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>YT(o))),C(e,["batchJobs"],s)}return e}function uit(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=k(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>pD(o))),C(e,["batchJobs"],s)}return e}function dit(t){const e={},n=k(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=k(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=k(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=k(t,["fileData"]);s!=null&&C(e,["fileData"],Krt(s));const o=k(t,["functionCall"]);o!=null&&C(e,["functionCall"],Wrt(o));const a=k(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=k(t,["inlineData"]);l!=null&&C(e,["inlineData"],_rt(l));const c=k(t,["text"]);c!=null&&C(e,["text"],c);const d=k(t,["thought"]);d!=null&&C(e,["thought"],d);const h=k(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=k(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function fit(t){const e={},n=k(t,["category"]);if(n!=null&&C(e,["category"],n),k(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=k(t,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function hit(t){const e={},n=k(t,["functionCallingConfig"]);n!=null&&C(e,["functionCallingConfig"],Yrt(n));const r=k(t,["retrievalConfig"]);return r!=null&&C(e,["retrievalConfig"],r),e}function pit(t){const e={},n=k(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=k(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=k(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=k(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=k(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=k(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],eit(a));const l=k(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],tit(l));const c=k(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Md;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Md||(Md={}));class c0{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mit extends Jd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new c0(Md.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=cZ(this.apiClient,e),r=n._url,i=Tt("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const d of l){const h=Object.assign({},d);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=m,h.request=g}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=jrt(this.apiClient,e);return a=Tt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>pD(d))}else{const c=cZ(this.apiClient,e);return a=Tt("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>YT(d))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Urt(this.apiClient,e);return s=Tt("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>YT(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Zrt(this.apiClient,e);return a=Tt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>pD(d))}else{const c=Qrt(this.apiClient,e);return a=Tt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>YT(d))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=Rrt(this.apiClient,e);o=Tt("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=Irt(this.apiClient,e);o=Tt("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=lit(e);return a=Tt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=uit(d),m=new sZ;return Object.assign(m,h),m})}else{const c=ait(e);return a=Tt("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=cit(d),m=new sZ;return Object.assign(m,h),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=$rt(this.apiClient,e);return a=Tt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>Vrt(d))}else{const c=Frt(this.apiClient,e);return a=Tt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>zrt(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function git(t){const e={},n=k(t,["data"]);if(n!=null&&C(e,["data"],n),k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function uZ(t){const e={},n=k(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Uit(s))),C(e,["parts"],i)}const r=k(t,["role"]);return r!=null&&C(e,["role"],r),e}function yit(t,e){const n={},r=k(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=k(t,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const s=k(t,["displayName"]);e!==void 0&&s!=null&&C(e,["displayName"],s);const o=k(t,["contents"]);if(e!==void 0&&o!=null){let d=nl(o);Array.isArray(d)&&(d=d.map(h=>uZ(h))),C(e,["contents"],d)}const a=k(t,["systemInstruction"]);e!==void 0&&a!=null&&C(e,["systemInstruction"],uZ($s(a)));const l=k(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>$it(h))),C(e,["tools"],d)}const c=k(t,["toolConfig"]);if(e!==void 0&&c!=null&&C(e,["toolConfig"],Fit(c)),k(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function xit(t,e){const n={},r=k(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=k(t,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const s=k(t,["displayName"]);e!==void 0&&s!=null&&C(e,["displayName"],s);const o=k(t,["contents"]);if(e!==void 0&&o!=null){let h=nl(o);Array.isArray(h)&&(h=h.map(m=>m)),C(e,["contents"],h)}const a=k(t,["systemInstruction"]);e!==void 0&&a!=null&&C(e,["systemInstruction"],$s(a));const l=k(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>zit(m))),C(e,["tools"],h)}const c=k(t,["toolConfig"]);e!==void 0&&c!=null&&C(e,["toolConfig"],c);const d=k(t,["kmsKeyName"]);return e!==void 0&&d!=null&&C(e,["encryption_spec","kmsKeyName"],d),n}function vit(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["model"],hpe(t,r));const i=k(e,["config"]);return i!=null&&yit(i,n),n}function bit(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["model"],hpe(t,r));const i=k(e,["config"]);return i!=null&&xit(i,n),n}function wit(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Xd(t,r)),n}function Eit(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Xd(t,r)),n}function Sit(t){const e={},n=k(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Ait(t){const e={},n=k(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Tit(t){const e={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=k(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function kit(t){const e={},n=k(t,["id"]);n!=null&&C(e,["id"],n);const r=k(t,["args"]);r!=null&&C(e,["args"],r);const i=k(t,["name"]);if(i!=null&&C(e,["name"],i),k(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(k(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Nit(t){const e={},n=k(t,["mode"]);n!=null&&C(e,["mode"],n);const r=k(t,["allowedFunctionNames"]);if(r!=null&&C(e,["allowedFunctionNames"],r),k(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Cit(t){const e={};if(k(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=k(t,["description"]);n!=null&&C(e,["description"],n);const r=k(t,["name"]);r!=null&&C(e,["name"],r);const i=k(t,["parameters"]);i!=null&&C(e,["parameters"],i);const s=k(t,["parametersJsonSchema"]);s!=null&&C(e,["parametersJsonSchema"],s);const o=k(t,["response"]);o!=null&&C(e,["response"],o);const a=k(t,["responseJsonSchema"]);return a!=null&&C(e,["responseJsonSchema"],a),e}function Pit(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Xd(t,r)),n}function _it(t,e){const n={},r=k(e,["name"]);return r!=null&&C(n,["_url","name"],Xd(t,r)),n}function Iit(t){const e={};if(k(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=k(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Rit(t){const e={};if(k(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(k(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=k(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Oit(t,e){const n={},r=k(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=k(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function Mit(t,e){const n={},r=k(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=k(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function Lit(t){const e={},n=k(t,["config"]);return n!=null&&Oit(n,e),e}function Dit(t){const e={},n=k(t,["config"]);return n!=null&&Mit(n,e),e}function jit(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=k(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["cachedContents"],s)}return e}function Bit(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=k(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["cachedContents"],s)}return e}function Uit(t){const e={},n=k(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=k(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=k(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=k(t,["fileData"]);s!=null&&C(e,["fileData"],Tit(s));const o=k(t,["functionCall"]);o!=null&&C(e,["functionCall"],kit(o));const a=k(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=k(t,["inlineData"]);l!=null&&C(e,["inlineData"],git(l));const c=k(t,["text"]);c!=null&&C(e,["text"],c);const d=k(t,["thought"]);d!=null&&C(e,["thought"],d);const h=k(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=k(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function Fit(t){const e={},n=k(t,["functionCallingConfig"]);n!=null&&C(e,["functionCallingConfig"],Nit(n));const r=k(t,["retrievalConfig"]);return r!=null&&C(e,["retrievalConfig"],r),e}function $it(t){const e={},n=k(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=k(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=k(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=k(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=k(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=k(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],Iit(a));const l=k(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],Rit(l));const c=k(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function zit(t){const e={},n=k(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>Cit(m))),C(e,["functionDeclarations"],h)}const r=k(t,["retrieval"]);r!=null&&C(e,["retrieval"],r);const i=k(t,["googleSearchRetrieval"]);i!=null&&C(e,["googleSearchRetrieval"],i);const s=k(t,["computerUse"]);if(s!=null&&C(e,["computerUse"],s),k(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=k(t,["codeExecution"]);o!=null&&C(e,["codeExecution"],o);const a=k(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const l=k(t,["googleMaps"]);l!=null&&C(e,["googleMaps"],l);const c=k(t,["googleSearch"]);c!=null&&C(e,["googleSearch"],c);const d=k(t,["urlContext"]);return d!=null&&C(e,["urlContext"],d),e}function Vit(t,e){const n={},r=k(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=k(t,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),n}function Hit(t,e){const n={},r=k(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=k(t,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),n}function qit(t,e){const n={},r=k(e,["name"]);r!=null&&C(n,["_url","name"],Xd(t,r));const i=k(e,["config"]);return i!=null&&Vit(i,n),n}function Git(t,e){const n={},r=k(e,["name"]);r!=null&&C(n,["_url","name"],Xd(t,r));const i=k(e,["config"]);return i!=null&&Hit(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kit extends Jd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new c0(Md.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=bit(this.apiClient,e);return a=Tt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=vit(this.apiClient,e);return a=Tt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=_it(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=Pit(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Eit(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Ait(d),m=new rZ;return Object.assign(m,h),m})}else{const c=wit(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Sit(d),m=new rZ;return Object.assign(m,h),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Git(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=qit(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Dit(e);return a=Tt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Bit(d),m=new iZ;return Object.assign(m,h),m})}else{const c=Lit(e);return a=Tt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=jit(d),m=new iZ;return Object.assign(m,h),m})}}}function Kk(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dZ(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nn(t){return this instanceof nn?(this.v=t,this):new nn(t)}function Vl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){r[g]&&(i[g]=function(x){return new Promise(function(b,w){s.push([g,x,b,w])>1||l(g,x)})},v&&(i[g]=v(i[g])))}function l(g,v){try{c(r[g](v))}catch(x){m(s[0][3],x)}}function c(g){g.value instanceof nn?Promise.resolve(g.value.v).then(d,h):m(s[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function m(g,v){g(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Hl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dZ=="function"?dZ(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wit(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:kpe(n)}function kpe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Yit(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function fZ(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!kpe(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class Jit{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Xit(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Xit{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Yit(s)}async sendMessage(e){var n;await this.sendPromise;const r=$s(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,c=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(a=d.slice(h))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=$s(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?fZ(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Vl(this,arguments,function*(){var i,s,o,a,l,c;const d=[];try{for(var h=!0,m=Hl(e),g;g=yield nn(m.next()),i=g.done,!i;h=!0){a=g.value,h=!1;const v=a;if(Wit(v)){const x=(c=(l=v.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;x!==void 0&&d.push(x)}yield yield nn(v)}}catch(v){s={error:v}}finally{try{!h&&!i&&(o=m.return)&&(yield nn(o.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...fZ(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cP extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,cP.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qit(t){const e={},n=k(t,["file"]);return n!=null&&C(e,["file"],n),e}function Zit(t){const e={},n=k(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function est(t){const e={},n=k(t,["name"]);return n!=null&&C(e,["_url","file"],vpe(n)),e}function tst(t){const e={},n=k(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function nst(t){const e={},n=k(t,["name"]);return n!=null&&C(e,["_url","file"],vpe(n)),e}function rst(t,e){const n={},r=k(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=k(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function ist(t){const e={},n=k(t,["config"]);return n!=null&&rst(n,e),e}function sst(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=k(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ost extends Jd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new c0(Md.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ist(e);return s=Tt("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=sst(l),d=new urt;return Object.assign(d,c),d})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Qit(e);return s=Tt("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Zit(l),d=new drt;return Object.assign(d,c),d})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nst(e);return s=Tt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=est(e);return s=Tt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=tst(l),d=new frt;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JT(t){const e={},n=k(t,["data"]);if(n!=null&&C(e,["data"],n),k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function ast(t){const e={},n=k(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Sst(s))),C(e,["parts"],i)}const r=k(t,["role"]);return r!=null&&C(e,["role"],r),e}function lst(t){const e={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=k(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function cst(t){const e={},n=k(t,["id"]);n!=null&&C(e,["id"],n);const r=k(t,["args"]);r!=null&&C(e,["args"],r);const i=k(t,["name"]);if(i!=null&&C(e,["name"],i),k(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(k(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ust(t){const e={};if(k(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=k(t,["description"]);n!=null&&C(e,["description"],n);const r=k(t,["name"]);r!=null&&C(e,["name"],r);const i=k(t,["parameters"]);i!=null&&C(e,["parameters"],i);const s=k(t,["parametersJsonSchema"]);s!=null&&C(e,["parametersJsonSchema"],s);const o=k(t,["response"]);o!=null&&C(e,["response"],o);const a=k(t,["responseJsonSchema"]);return a!=null&&C(e,["responseJsonSchema"],a),e}function dst(t){const e={},n=k(t,["modelSelectionConfig"]);n!=null&&C(e,["modelConfig"],n);const r=k(t,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=k(t,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const s=k(t,["candidateCount"]);s!=null&&C(e,["candidateCount"],s);const o=k(t,["enableAffectiveDialog"]);o!=null&&C(e,["enableAffectiveDialog"],o);const a=k(t,["frequencyPenalty"]);a!=null&&C(e,["frequencyPenalty"],a);const l=k(t,["logprobs"]);l!=null&&C(e,["logprobs"],l);const c=k(t,["maxOutputTokens"]);c!=null&&C(e,["maxOutputTokens"],c);const d=k(t,["mediaResolution"]);d!=null&&C(e,["mediaResolution"],d);const h=k(t,["presencePenalty"]);h!=null&&C(e,["presencePenalty"],h);const m=k(t,["responseLogprobs"]);m!=null&&C(e,["responseLogprobs"],m);const g=k(t,["responseMimeType"]);g!=null&&C(e,["responseMimeType"],g);const v=k(t,["responseModalities"]);v!=null&&C(e,["responseModalities"],v);const x=k(t,["responseSchema"]);x!=null&&C(e,["responseSchema"],x);const b=k(t,["routingConfig"]);b!=null&&C(e,["routingConfig"],b);const w=k(t,["seed"]);w!=null&&C(e,["seed"],w);const T=k(t,["speechConfig"]);T!=null&&C(e,["speechConfig"],T);const N=k(t,["stopSequences"]);N!=null&&C(e,["stopSequences"],N);const O=k(t,["temperature"]);O!=null&&C(e,["temperature"],O);const j=k(t,["thinkingConfig"]);j!=null&&C(e,["thinkingConfig"],j);const _=k(t,["topK"]);_!=null&&C(e,["topK"],_);const F=k(t,["topP"]);if(F!=null&&C(e,["topP"],F),k(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function fst(t){const e={};if(k(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=k(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function hst(t){const e={};if(k(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(k(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=k(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function pst(t,e){const n={},r=k(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=k(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const s=k(t,["temperature"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","temperature"],s);const o=k(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const a=k(t,["topK"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topK"],a);const l=k(t,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const c=k(t,["mediaResolution"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","mediaResolution"],c);const d=k(t,["seed"]);e!==void 0&&d!=null&&C(e,["setup","generationConfig","seed"],d);const h=k(t,["speechConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","speechConfig"],m7(h));const m=k(t,["thinkingConfig"]);e!==void 0&&m!=null&&C(e,["setup","generationConfig","thinkingConfig"],m);const g=k(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=k(t,["systemInstruction"]);e!==void 0&&v!=null&&C(e,["setup","systemInstruction"],ast($s(v)));const x=k(t,["tools"]);if(e!==void 0&&x!=null){let _=Av(x);Array.isArray(_)&&(_=_.map(F=>Tst(Sv(F)))),C(e,["setup","tools"],_)}const b=k(t,["sessionResumption"]);e!==void 0&&b!=null&&C(e,["setup","sessionResumption"],Ast(b));const w=k(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","inputAudioTranscription"],w);const T=k(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&C(e,["setup","outputAudioTranscription"],T);const N=k(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&C(e,["setup","realtimeInputConfig"],N);const O=k(t,["contextWindowCompression"]);e!==void 0&&O!=null&&C(e,["setup","contextWindowCompression"],O);const j=k(t,["proactivity"]);if(e!==void 0&&j!=null&&C(e,["setup","proactivity"],j),k(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function mst(t,e){const n={},r=k(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],dst(r));const i=k(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const s=k(t,["temperature"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","temperature"],s);const o=k(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const a=k(t,["topK"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topK"],a);const l=k(t,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const c=k(t,["mediaResolution"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","mediaResolution"],c);const d=k(t,["seed"]);e!==void 0&&d!=null&&C(e,["setup","generationConfig","seed"],d);const h=k(t,["speechConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","speechConfig"],m7(h));const m=k(t,["thinkingConfig"]);e!==void 0&&m!=null&&C(e,["setup","generationConfig","thinkingConfig"],m);const g=k(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=k(t,["systemInstruction"]);e!==void 0&&v!=null&&C(e,["setup","systemInstruction"],$s(v));const x=k(t,["tools"]);if(e!==void 0&&x!=null){let F=Av(x);Array.isArray(F)&&(F=F.map(z=>kst(Sv(z)))),C(e,["setup","tools"],F)}const b=k(t,["sessionResumption"]);e!==void 0&&b!=null&&C(e,["setup","sessionResumption"],b);const w=k(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","inputAudioTranscription"],w);const T=k(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&C(e,["setup","outputAudioTranscription"],T);const N=k(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&C(e,["setup","realtimeInputConfig"],N);const O=k(t,["contextWindowCompression"]);e!==void 0&&O!=null&&C(e,["setup","contextWindowCompression"],O);const j=k(t,["proactivity"]);e!==void 0&&j!=null&&C(e,["setup","proactivity"],j);const _=k(t,["explicitVadSignal"]);return e!==void 0&&_!=null&&C(e,["setup","explicitVadSignal"],_),n}function gst(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["setup","model"],zn(t,r));const i=k(e,["config"]);return i!=null&&C(n,["config"],pst(i,n)),n}function yst(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["setup","model"],zn(t,r));const i=k(e,["config"]);return i!=null&&C(n,["config"],mst(i,n)),n}function xst(t){const e={},n=k(t,["musicGenerationConfig"]);return n!=null&&C(e,["musicGenerationConfig"],n),e}function vst(t){const e={},n=k(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["weightedPrompts"],r)}return e}function bst(t){const e={},n=k(t,["media"]);if(n!=null){let c=ppe(n);Array.isArray(c)&&(c=c.map(d=>JT(d))),C(e,["mediaChunks"],c)}const r=k(t,["audio"]);r!=null&&C(e,["audio"],JT(gpe(r)));const i=k(t,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const s=k(t,["video"]);s!=null&&C(e,["video"],JT(mpe(s)));const o=k(t,["text"]);o!=null&&C(e,["text"],o);const a=k(t,["activityStart"]);a!=null&&C(e,["activityStart"],a);const l=k(t,["activityEnd"]);return l!=null&&C(e,["activityEnd"],l),e}function wst(t){const e={},n=k(t,["media"]);if(n!=null){let c=ppe(n);Array.isArray(c)&&(c=c.map(d=>d)),C(e,["mediaChunks"],c)}const r=k(t,["audio"]);r!=null&&C(e,["audio"],gpe(r));const i=k(t,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const s=k(t,["video"]);s!=null&&C(e,["video"],mpe(s));const o=k(t,["text"]);o!=null&&C(e,["text"],o);const a=k(t,["activityStart"]);a!=null&&C(e,["activityStart"],a);const l=k(t,["activityEnd"]);return l!=null&&C(e,["activityEnd"],l),e}function Est(t){const e={},n=k(t,["setupComplete"]);n!=null&&C(e,["setupComplete"],n);const r=k(t,["serverContent"]);r!=null&&C(e,["serverContent"],r);const i=k(t,["toolCall"]);i!=null&&C(e,["toolCall"],i);const s=k(t,["toolCallCancellation"]);s!=null&&C(e,["toolCallCancellation"],s);const o=k(t,["usageMetadata"]);o!=null&&C(e,["usageMetadata"],Nst(o));const a=k(t,["goAway"]);a!=null&&C(e,["goAway"],a);const l=k(t,["sessionResumptionUpdate"]);l!=null&&C(e,["sessionResumptionUpdate"],l);const c=k(t,["voiceActivityDetectionSignal"]);return c!=null&&C(e,["voiceActivityDetectionSignal"],c),e}function Sst(t){const e={},n=k(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=k(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=k(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=k(t,["fileData"]);s!=null&&C(e,["fileData"],lst(s));const o=k(t,["functionCall"]);o!=null&&C(e,["functionCall"],cst(o));const a=k(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=k(t,["inlineData"]);l!=null&&C(e,["inlineData"],JT(l));const c=k(t,["text"]);c!=null&&C(e,["text"],c);const d=k(t,["thought"]);d!=null&&C(e,["thought"],d);const h=k(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=k(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function Ast(t){const e={},n=k(t,["handle"]);if(n!=null&&C(e,["handle"],n),k(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Tst(t){const e={},n=k(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=k(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=k(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=k(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=k(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=k(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],fst(a));const l=k(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],hst(l));const c=k(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function kst(t){const e={},n=k(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>ust(m))),C(e,["functionDeclarations"],h)}const r=k(t,["retrieval"]);r!=null&&C(e,["retrieval"],r);const i=k(t,["googleSearchRetrieval"]);i!=null&&C(e,["googleSearchRetrieval"],i);const s=k(t,["computerUse"]);if(s!=null&&C(e,["computerUse"],s),k(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=k(t,["codeExecution"]);o!=null&&C(e,["codeExecution"],o);const a=k(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const l=k(t,["googleMaps"]);l!=null&&C(e,["googleMaps"],l);const c=k(t,["googleSearch"]);c!=null&&C(e,["googleSearch"],c);const d=k(t,["urlContext"]);return d!=null&&C(e,["urlContext"],d),e}function Nst(t){const e={},n=k(t,["promptTokenCount"]);n!=null&&C(e,["promptTokenCount"],n);const r=k(t,["cachedContentTokenCount"]);r!=null&&C(e,["cachedContentTokenCount"],r);const i=k(t,["candidatesTokenCount"]);i!=null&&C(e,["responseTokenCount"],i);const s=k(t,["toolUsePromptTokenCount"]);s!=null&&C(e,["toolUsePromptTokenCount"],s);const o=k(t,["thoughtsTokenCount"]);o!=null&&C(e,["thoughtsTokenCount"],o);const a=k(t,["totalTokenCount"]);a!=null&&C(e,["totalTokenCount"],a);const l=k(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["promptTokensDetails"],g)}const c=k(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["cacheTokensDetails"],g)}const d=k(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["responseTokensDetails"],g)}const h=k(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["toolUsePromptTokensDetails"],g)}const m=k(t,["trafficType"]);return m!=null&&C(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cst(t){const e={},n=k(t,["data"]);if(n!=null&&C(e,["data"],n),k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Pst(t){const e={},n=k(t,["content"]);n!=null&&C(e,["content"],n);const r=k(t,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],_st(r));const i=k(t,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const s=k(t,["finishReason"]);s!=null&&C(e,["finishReason"],s);const o=k(t,["avgLogprobs"]);o!=null&&C(e,["avgLogprobs"],o);const a=k(t,["groundingMetadata"]);a!=null&&C(e,["groundingMetadata"],a);const l=k(t,["index"]);l!=null&&C(e,["index"],l);const c=k(t,["logprobsResult"]);c!=null&&C(e,["logprobsResult"],c);const d=k(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),C(e,["safetyRatings"],m)}const h=k(t,["urlContextMetadata"]);return h!=null&&C(e,["urlContextMetadata"],h),e}function _st(t){const e={},n=k(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function Ist(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["contents"]);if(i!=null){let s=nl(i);Array.isArray(s)&&(s=s.map(o=>o)),C(n,["contents"],s)}return n}function Rst(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),C(e,["tokensInfo"],i)}return e}function Ost(t){const e={},n=k(t,["values"]);n!=null&&C(e,["values"],n);const r=k(t,["statistics"]);return r!=null&&C(e,["statistics"],Mst(r)),e}function Mst(t){const e={},n=k(t,["truncated"]);n!=null&&C(e,["truncated"],n);const r=k(t,["token_count"]);return r!=null&&C(e,["tokenCount"],r),e}function uP(t){const e={},n=k(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Vot(s))),C(e,["parts"],i)}const r=k(t,["role"]);return r!=null&&C(e,["role"],r),e}function Lst(t){const e={},n=k(t,["controlType"]);n!=null&&C(e,["controlType"],n);const r=k(t,["enableControlImageComputation"]);return r!=null&&C(e,["computeControl"],r),e}function Dst(t){const e={};if(k(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(k(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(k(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function jst(t,e){const n={},r=k(t,["systemInstruction"]);e!==void 0&&r!=null&&C(e,["systemInstruction"],$s(r));const i=k(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_pe(a))),C(e,["tools"],o)}const s=k(t,["generationConfig"]);return e!==void 0&&s!=null&&C(e,["generationConfig"],Cot(s)),n}function Bst(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["contents"]);if(i!=null){let o=nl(i);Array.isArray(o)&&(o=o.map(a=>uP(a))),C(n,["contents"],o)}const s=k(e,["config"]);return s!=null&&Dst(s),n}function Ust(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["contents"]);if(i!=null){let o=nl(i);Array.isArray(o)&&(o=o.map(a=>a)),C(n,["contents"],o)}const s=k(e,["config"]);return s!=null&&jst(s,n),n}function Fst(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["totalTokens"]);r!=null&&C(e,["totalTokens"],r);const i=k(t,["cachedContentTokenCount"]);return i!=null&&C(e,["cachedContentTokenCount"],i),e}function $st(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["totalTokens"]);return r!=null&&C(e,["totalTokens"],r),e}function zst(t,e){const n={},r=k(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function Vst(t,e){const n={},r=k(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function Hst(t){const e={},n=k(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function qst(t){const e={},n=k(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Gst(t,e){const n={},r=k(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=k(t,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const s=k(t,["numberOfImages"]);e!==void 0&&s!=null&&C(e,["parameters","sampleCount"],s);const o=k(t,["aspectRatio"]);e!==void 0&&o!=null&&C(e,["parameters","aspectRatio"],o);const a=k(t,["guidanceScale"]);e!==void 0&&a!=null&&C(e,["parameters","guidanceScale"],a);const l=k(t,["seed"]);e!==void 0&&l!=null&&C(e,["parameters","seed"],l);const c=k(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&C(e,["parameters","safetySetting"],c);const d=k(t,["personGeneration"]);e!==void 0&&d!=null&&C(e,["parameters","personGeneration"],d);const h=k(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&C(e,["parameters","includeSafetyAttributes"],h);const m=k(t,["includeRaiReason"]);e!==void 0&&m!=null&&C(e,["parameters","includeRaiReason"],m);const g=k(t,["language"]);e!==void 0&&g!=null&&C(e,["parameters","language"],g);const v=k(t,["outputMimeType"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","mimeType"],v);const x=k(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&C(e,["parameters","outputOptions","compressionQuality"],x);const b=k(t,["addWatermark"]);e!==void 0&&b!=null&&C(e,["parameters","addWatermark"],b);const w=k(t,["labels"]);e!==void 0&&w!=null&&C(e,["labels"],w);const T=k(t,["editMode"]);e!==void 0&&T!=null&&C(e,["parameters","editMode"],T);const N=k(t,["baseSteps"]);return e!==void 0&&N!=null&&C(e,["parameters","editConfig","baseSteps"],N),n}function Kst(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=k(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Yot(l))),C(n,["instances[0]","referenceImages"],a)}const o=k(e,["config"]);return o!=null&&Gst(o,n),n}function Wst(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>dP(s))),C(e,["generatedImages"],i)}return e}function Yst(t,e){const n={},r=k(t,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=k(t,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const s=k(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&C(e,["requests[]","outputDimensionality"],s),k(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(k(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Jst(t,e){const n={},r=k(t,["taskType"]);e!==void 0&&r!=null&&C(e,["instances[]","task_type"],r);const i=k(t,["title"]);e!==void 0&&i!=null&&C(e,["instances[]","title"],i);const s=k(t,["outputDimensionality"]);e!==void 0&&s!=null&&C(e,["parameters","outputDimensionality"],s);const o=k(t,["mimeType"]);e!==void 0&&o!=null&&C(e,["instances[]","mimeType"],o);const a=k(t,["autoTruncate"]);return e!==void 0&&a!=null&&C(e,["parameters","autoTruncate"],a),n}function Xst(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["contents"]);if(i!=null){let a=f7(t,i);Array.isArray(a)&&(a=a.map(l=>l)),C(n,["requests[]","content"],a)}const s=k(e,["config"]);s!=null&&Yst(s,n);const o=k(e,["model"]);return o!==void 0&&C(n,["requests[]","model"],zn(t,o)),n}function Qst(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["contents"]);if(i!=null){let o=f7(t,i);Array.isArray(o)&&(o=o.map(a=>a)),C(n,["instances[]","content"],o)}const s=k(e,["config"]);return s!=null&&Jst(s,n),n}function Zst(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["embeddings"],s)}const i=k(t,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function eot(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Ost(o))),C(e,["embeddings"],s)}const i=k(t,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function tot(t){const e={},n=k(t,["endpoint"]);n!=null&&C(e,["name"],n);const r=k(t,["deployedModelId"]);return r!=null&&C(e,["deployedModelId"],r),e}function not(t){const e={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=k(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function rot(t){const e={},n=k(t,["id"]);n!=null&&C(e,["id"],n);const r=k(t,["args"]);r!=null&&C(e,["args"],r);const i=k(t,["name"]);if(i!=null&&C(e,["name"],i),k(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(k(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iot(t){const e={},n=k(t,["mode"]);n!=null&&C(e,["mode"],n);const r=k(t,["allowedFunctionNames"]);if(r!=null&&C(e,["allowedFunctionNames"],r),k(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sot(t){const e={};if(k(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=k(t,["description"]);n!=null&&C(e,["description"],n);const r=k(t,["name"]);r!=null&&C(e,["name"],r);const i=k(t,["parameters"]);i!=null&&C(e,["parameters"],i);const s=k(t,["parametersJsonSchema"]);s!=null&&C(e,["parametersJsonSchema"],s);const o=k(t,["response"]);o!=null&&C(e,["response"],o);const a=k(t,["responseJsonSchema"]);return a!=null&&C(e,["responseJsonSchema"],a),e}function oot(t,e,n){const r={},i=k(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],uP($s(i)));const s=k(e,["temperature"]);s!=null&&C(r,["temperature"],s);const o=k(e,["topP"]);o!=null&&C(r,["topP"],o);const a=k(e,["topK"]);a!=null&&C(r,["topK"],a);const l=k(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=k(e,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const d=k(e,["stopSequences"]);d!=null&&C(r,["stopSequences"],d);const h=k(e,["responseLogprobs"]);h!=null&&C(r,["responseLogprobs"],h);const m=k(e,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=k(e,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const v=k(e,["frequencyPenalty"]);v!=null&&C(r,["frequencyPenalty"],v);const x=k(e,["seed"]);x!=null&&C(r,["seed"],x);const b=k(e,["responseMimeType"]);b!=null&&C(r,["responseMimeType"],b);const w=k(e,["responseSchema"]);w!=null&&C(r,["responseSchema"],h7(w));const T=k(e,["responseJsonSchema"]);if(T!=null&&C(r,["responseJsonSchema"],T),k(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(k(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=k(e,["safetySettings"]);if(n!==void 0&&N!=null){let U=N;Array.isArray(U)&&(U=U.map(A=>Jot(A))),C(n,["safetySettings"],U)}const O=k(e,["tools"]);if(n!==void 0&&O!=null){let U=Av(O);Array.isArray(U)&&(U=U.map(A=>rat(Sv(A)))),C(n,["tools"],U)}const j=k(e,["toolConfig"]);if(n!==void 0&&j!=null&&C(n,["toolConfig"],nat(j)),k(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=k(e,["cachedContent"]);n!==void 0&&_!=null&&C(n,["cachedContent"],Xd(t,_));const F=k(e,["responseModalities"]);F!=null&&C(r,["responseModalities"],F);const z=k(e,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const D=k(e,["speechConfig"]);if(D!=null&&C(r,["speechConfig"],p7(D)),k(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=k(e,["thinkingConfig"]);$!=null&&C(r,["thinkingConfig"],$);const G=k(e,["imageConfig"]);G!=null&&C(r,["imageConfig"],Oot(G));const H=k(e,["enableEnhancedCivicAnswers"]);return H!=null&&C(r,["enableEnhancedCivicAnswers"],H),r}function aot(t,e,n){const r={},i=k(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],$s(i));const s=k(e,["temperature"]);s!=null&&C(r,["temperature"],s);const o=k(e,["topP"]);o!=null&&C(r,["topP"],o);const a=k(e,["topK"]);a!=null&&C(r,["topK"],a);const l=k(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=k(e,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const d=k(e,["stopSequences"]);d!=null&&C(r,["stopSequences"],d);const h=k(e,["responseLogprobs"]);h!=null&&C(r,["responseLogprobs"],h);const m=k(e,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=k(e,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const v=k(e,["frequencyPenalty"]);v!=null&&C(r,["frequencyPenalty"],v);const x=k(e,["seed"]);x!=null&&C(r,["seed"],x);const b=k(e,["responseMimeType"]);b!=null&&C(r,["responseMimeType"],b);const w=k(e,["responseSchema"]);w!=null&&C(r,["responseSchema"],h7(w));const T=k(e,["responseJsonSchema"]);T!=null&&C(r,["responseJsonSchema"],T);const N=k(e,["routingConfig"]);N!=null&&C(r,["routingConfig"],N);const O=k(e,["modelSelectionConfig"]);O!=null&&C(r,["modelConfig"],O);const j=k(e,["safetySettings"]);if(n!==void 0&&j!=null){let L=j;Array.isArray(L)&&(L=L.map(q=>q)),C(n,["safetySettings"],L)}const _=k(e,["tools"]);if(n!==void 0&&_!=null){let L=Av(_);Array.isArray(L)&&(L=L.map(q=>_pe(Sv(q)))),C(n,["tools"],L)}const F=k(e,["toolConfig"]);n!==void 0&&F!=null&&C(n,["toolConfig"],F);const z=k(e,["labels"]);n!==void 0&&z!=null&&C(n,["labels"],z);const D=k(e,["cachedContent"]);n!==void 0&&D!=null&&C(n,["cachedContent"],Xd(t,D));const $=k(e,["responseModalities"]);$!=null&&C(r,["responseModalities"],$);const G=k(e,["mediaResolution"]);G!=null&&C(r,["mediaResolution"],G);const H=k(e,["speechConfig"]);H!=null&&C(r,["speechConfig"],p7(H));const U=k(e,["audioTimestamp"]);U!=null&&C(r,["audioTimestamp"],U);const A=k(e,["thinkingConfig"]);A!=null&&C(r,["thinkingConfig"],A);const I=k(e,["imageConfig"]);if(I!=null&&C(r,["imageConfig"],Mot(I)),k(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function hZ(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["contents"]);if(i!=null){let o=nl(i);Array.isArray(o)&&(o=o.map(a=>uP(a))),C(n,["contents"],o)}const s=k(e,["config"]);return s!=null&&C(n,["generationConfig"],oot(t,s,n)),n}function pZ(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["contents"]);if(i!=null){let o=nl(i);Array.isArray(o)&&(o=o.map(a=>a)),C(n,["contents"],o)}const s=k(e,["config"]);return s!=null&&C(n,["generationConfig"],aot(t,s,n)),n}function mZ(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Pst(c))),C(e,["candidates"],l)}const i=k(t,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const s=k(t,["promptFeedback"]);s!=null&&C(e,["promptFeedback"],s);const o=k(t,["responseId"]);o!=null&&C(e,["responseId"],o);const a=k(t,["usageMetadata"]);return a!=null&&C(e,["usageMetadata"],a),e}function gZ(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),C(e,["candidates"],c)}const i=k(t,["createTime"]);i!=null&&C(e,["createTime"],i);const s=k(t,["modelVersion"]);s!=null&&C(e,["modelVersion"],s);const o=k(t,["promptFeedback"]);o!=null&&C(e,["promptFeedback"],o);const a=k(t,["responseId"]);a!=null&&C(e,["responseId"],a);const l=k(t,["usageMetadata"]);return l!=null&&C(e,["usageMetadata"],l),e}function lot(t,e){const n={};if(k(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(k(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=k(t,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=k(t,["aspectRatio"]);e!==void 0&&i!=null&&C(e,["parameters","aspectRatio"],i);const s=k(t,["guidanceScale"]);if(e!==void 0&&s!=null&&C(e,["parameters","guidanceScale"],s),k(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=k(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&C(e,["parameters","safetySetting"],o);const a=k(t,["personGeneration"]);e!==void 0&&a!=null&&C(e,["parameters","personGeneration"],a);const l=k(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&C(e,["parameters","includeSafetyAttributes"],l);const c=k(t,["includeRaiReason"]);e!==void 0&&c!=null&&C(e,["parameters","includeRaiReason"],c);const d=k(t,["language"]);e!==void 0&&d!=null&&C(e,["parameters","language"],d);const h=k(t,["outputMimeType"]);e!==void 0&&h!=null&&C(e,["parameters","outputOptions","mimeType"],h);const m=k(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&C(e,["parameters","outputOptions","compressionQuality"],m),k(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(k(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=k(t,["imageSize"]);if(e!==void 0&&g!=null&&C(e,["parameters","sampleImageSize"],g),k(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function cot(t,e){const n={},r=k(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=k(t,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const s=k(t,["numberOfImages"]);e!==void 0&&s!=null&&C(e,["parameters","sampleCount"],s);const o=k(t,["aspectRatio"]);e!==void 0&&o!=null&&C(e,["parameters","aspectRatio"],o);const a=k(t,["guidanceScale"]);e!==void 0&&a!=null&&C(e,["parameters","guidanceScale"],a);const l=k(t,["seed"]);e!==void 0&&l!=null&&C(e,["parameters","seed"],l);const c=k(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&C(e,["parameters","safetySetting"],c);const d=k(t,["personGeneration"]);e!==void 0&&d!=null&&C(e,["parameters","personGeneration"],d);const h=k(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&C(e,["parameters","includeSafetyAttributes"],h);const m=k(t,["includeRaiReason"]);e!==void 0&&m!=null&&C(e,["parameters","includeRaiReason"],m);const g=k(t,["language"]);e!==void 0&&g!=null&&C(e,["parameters","language"],g);const v=k(t,["outputMimeType"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","mimeType"],v);const x=k(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&C(e,["parameters","outputOptions","compressionQuality"],x);const b=k(t,["addWatermark"]);e!==void 0&&b!=null&&C(e,["parameters","addWatermark"],b);const w=k(t,["labels"]);e!==void 0&&w!=null&&C(e,["labels"],w);const T=k(t,["imageSize"]);e!==void 0&&T!=null&&C(e,["parameters","sampleImageSize"],T);const N=k(t,["enhancePrompt"]);return e!==void 0&&N!=null&&C(e,["parameters","enhancePrompt"],N),n}function uot(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=k(e,["config"]);return s!=null&&lot(s,n),n}function dot(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=k(e,["config"]);return s!=null&&cot(s,n),n}function fot(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Aot(o))),C(e,["generatedImages"],s)}const i=k(t,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],Cpe(i)),e}function hot(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>dP(o))),C(e,["generatedImages"],s)}const i=k(t,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],Ppe(i)),e}function pot(t,e){const n={},r=k(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r),k(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(k(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=k(t,["durationSeconds"]);if(e!==void 0&&i!=null&&C(e,["parameters","durationSeconds"],i),k(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=k(t,["aspectRatio"]);e!==void 0&&s!=null&&C(e,["parameters","aspectRatio"],s);const o=k(t,["resolution"]);e!==void 0&&o!=null&&C(e,["parameters","resolution"],o);const a=k(t,["personGeneration"]);if(e!==void 0&&a!=null&&C(e,["parameters","personGeneration"],a),k(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=k(t,["negativePrompt"]);e!==void 0&&l!=null&&C(e,["parameters","negativePrompt"],l);const c=k(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&C(e,["parameters","enhancePrompt"],c),k(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=k(t,["lastFrame"]);e!==void 0&&d!=null&&C(e,["instances[0]","lastFrame"],fP(d));const h=k(t,["referenceImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>gat(g))),C(e,["instances[0]","referenceImages"],m)}if(k(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(k(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function mot(t,e){const n={},r=k(t,["numberOfVideos"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=k(t,["outputGcsUri"]);e!==void 0&&i!=null&&C(e,["parameters","storageUri"],i);const s=k(t,["fps"]);e!==void 0&&s!=null&&C(e,["parameters","fps"],s);const o=k(t,["durationSeconds"]);e!==void 0&&o!=null&&C(e,["parameters","durationSeconds"],o);const a=k(t,["seed"]);e!==void 0&&a!=null&&C(e,["parameters","seed"],a);const l=k(t,["aspectRatio"]);e!==void 0&&l!=null&&C(e,["parameters","aspectRatio"],l);const c=k(t,["resolution"]);e!==void 0&&c!=null&&C(e,["parameters","resolution"],c);const d=k(t,["personGeneration"]);e!==void 0&&d!=null&&C(e,["parameters","personGeneration"],d);const h=k(t,["pubsubTopic"]);e!==void 0&&h!=null&&C(e,["parameters","pubsubTopic"],h);const m=k(t,["negativePrompt"]);e!==void 0&&m!=null&&C(e,["parameters","negativePrompt"],m);const g=k(t,["enhancePrompt"]);e!==void 0&&g!=null&&C(e,["parameters","enhancePrompt"],g);const v=k(t,["generateAudio"]);e!==void 0&&v!=null&&C(e,["parameters","generateAudio"],v);const x=k(t,["lastFrame"]);e!==void 0&&x!=null&&C(e,["instances[0]","lastFrame"],tc(x));const b=k(t,["referenceImages"]);if(e!==void 0&&b!=null){let N=b;Array.isArray(N)&&(N=N.map(O=>yat(O))),C(e,["instances[0]","referenceImages"],N)}const w=k(t,["mask"]);e!==void 0&&w!=null&&C(e,["instances[0]","mask"],mat(w));const T=k(t,["compressionQuality"]);return e!==void 0&&T!=null&&C(e,["parameters","compressionQuality"],T),n}function got(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=k(t,["done"]);i!=null&&C(e,["done"],i);const s=k(t,["error"]);s!=null&&C(e,["error"],s);const o=k(t,["response","generateVideoResponse"]);return o!=null&&C(e,["response"],bot(o)),e}function yot(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=k(t,["done"]);i!=null&&C(e,["done"],i);const s=k(t,["error"]);s!=null&&C(e,["error"],s);const o=k(t,["response"]);return o!=null&&C(e,["response"],wot(o)),e}function xot(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=k(e,["image"]);s!=null&&C(n,["instances[0]","image"],fP(s));const o=k(e,["video"]);o!=null&&C(n,["instances[0]","video"],Ipe(o));const a=k(e,["source"]);a!=null&&Eot(a,n);const l=k(e,["config"]);return l!=null&&pot(l,n),n}function vot(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=k(e,["image"]);s!=null&&C(n,["instances[0]","image"],tc(s));const o=k(e,["video"]);o!=null&&C(n,["instances[0]","video"],Rpe(o));const a=k(e,["source"]);a!=null&&Sot(a,n);const l=k(e,["config"]);return l!=null&&mot(l,n),n}function bot(t){const e={},n=k(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>kot(o))),C(e,["generatedVideos"],s)}const r=k(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=k(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function wot(t){const e={},n=k(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Not(o))),C(e,["generatedVideos"],s)}const r=k(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=k(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function Eot(t,e){const n={},r=k(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=k(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],fP(i));const s=k(t,["video"]);return e!==void 0&&s!=null&&C(e,["instances[0]","video"],Ipe(s)),n}function Sot(t,e){const n={},r=k(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=k(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],tc(i));const s=k(t,["video"]);return e!==void 0&&s!=null&&C(e,["instances[0]","video"],Rpe(s)),n}function Aot(t){const e={},n=k(t,["_self"]);n!=null&&C(e,["image"],Lot(n));const r=k(t,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=k(t,["_self"]);return i!=null&&C(e,["safetyAttributes"],Cpe(i)),e}function dP(t){const e={},n=k(t,["_self"]);n!=null&&C(e,["image"],Npe(n));const r=k(t,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=k(t,["_self"]);i!=null&&C(e,["safetyAttributes"],Ppe(i));const s=k(t,["prompt"]);return s!=null&&C(e,["enhancedPrompt"],s),e}function Tot(t){const e={},n=k(t,["_self"]);n!=null&&C(e,["mask"],Npe(n));const r=k(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),C(e,["labels"],i)}return e}function kot(t){const e={},n=k(t,["video"]);return n!=null&&C(e,["video"],hat(n)),e}function Not(t){const e={},n=k(t,["_self"]);return n!=null&&C(e,["video"],pat(n)),e}function Cot(t){const e={},n=k(t,["modelSelectionConfig"]);n!=null&&C(e,["modelConfig"],n);const r=k(t,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=k(t,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const s=k(t,["candidateCount"]);s!=null&&C(e,["candidateCount"],s);const o=k(t,["enableAffectiveDialog"]);o!=null&&C(e,["enableAffectiveDialog"],o);const a=k(t,["frequencyPenalty"]);a!=null&&C(e,["frequencyPenalty"],a);const l=k(t,["logprobs"]);l!=null&&C(e,["logprobs"],l);const c=k(t,["maxOutputTokens"]);c!=null&&C(e,["maxOutputTokens"],c);const d=k(t,["mediaResolution"]);d!=null&&C(e,["mediaResolution"],d);const h=k(t,["presencePenalty"]);h!=null&&C(e,["presencePenalty"],h);const m=k(t,["responseLogprobs"]);m!=null&&C(e,["responseLogprobs"],m);const g=k(t,["responseMimeType"]);g!=null&&C(e,["responseMimeType"],g);const v=k(t,["responseModalities"]);v!=null&&C(e,["responseModalities"],v);const x=k(t,["responseSchema"]);x!=null&&C(e,["responseSchema"],x);const b=k(t,["routingConfig"]);b!=null&&C(e,["routingConfig"],b);const w=k(t,["seed"]);w!=null&&C(e,["seed"],w);const T=k(t,["speechConfig"]);T!=null&&C(e,["speechConfig"],T);const N=k(t,["stopSequences"]);N!=null&&C(e,["stopSequences"],N);const O=k(t,["temperature"]);O!=null&&C(e,["temperature"],O);const j=k(t,["thinkingConfig"]);j!=null&&C(e,["thinkingConfig"],j);const _=k(t,["topK"]);_!=null&&C(e,["topK"],_);const F=k(t,["topP"]);if(F!=null&&C(e,["topP"],F),k(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Pot(t,e){const n={},r=k(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function _ot(t,e){const n={},r=k(e,["model"]);return r!=null&&C(n,["_url","name"],zn(t,r)),n}function Iot(t){const e={};if(k(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=k(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Rot(t){const e={};if(k(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(k(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=k(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Oot(t){const e={},n=k(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=k(t,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),k(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(k(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Mot(t){const e={},n=k(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=k(t,["imageSize"]);r!=null&&C(e,["imageSize"],r);const i=k(t,["outputMimeType"]);i!=null&&C(e,["imageOutputOptions","mimeType"],i);const s=k(t,["outputCompressionQuality"]);return s!=null&&C(e,["imageOutputOptions","compressionQuality"],s),e}function Lot(t){const e={},n=k(t,["bytesBase64Encoded"]);n!=null&&C(e,["imageBytes"],Hh(n));const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Npe(t){const e={},n=k(t,["gcsUri"]);n!=null&&C(e,["gcsUri"],n);const r=k(t,["bytesBase64Encoded"]);r!=null&&C(e,["imageBytes"],Hh(r));const i=k(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function fP(t){const e={};if(k(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=k(t,["imageBytes"]);n!=null&&C(e,["bytesBase64Encoded"],Hh(n));const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function tc(t){const e={},n=k(t,["gcsUri"]);n!=null&&C(e,["gcsUri"],n);const r=k(t,["imageBytes"]);r!=null&&C(e,["bytesBase64Encoded"],Hh(r));const i=k(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function Dot(t,e,n){const r={},i=k(e,["pageSize"]);n!==void 0&&i!=null&&C(n,["_query","pageSize"],i);const s=k(e,["pageToken"]);n!==void 0&&s!=null&&C(n,["_query","pageToken"],s);const o=k(e,["filter"]);n!==void 0&&o!=null&&C(n,["_query","filter"],o);const a=k(e,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],bpe(t,a)),r}function jot(t,e,n){const r={},i=k(e,["pageSize"]);n!==void 0&&i!=null&&C(n,["_query","pageSize"],i);const s=k(e,["pageToken"]);n!==void 0&&s!=null&&C(n,["_query","pageToken"],s);const o=k(e,["filter"]);n!==void 0&&o!=null&&C(n,["_query","filter"],o);const a=k(e,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],bpe(t,a)),r}function Bot(t,e){const n={},r=k(e,["config"]);return r!=null&&Dot(t,r,n),n}function Uot(t,e){const n={},r=k(e,["config"]);return r!=null&&jot(t,r,n),n}function Fot(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=k(t,["_self"]);if(i!=null){let s=wpe(i);Array.isArray(s)&&(s=s.map(o=>mD(o))),C(e,["models"],s)}return e}function $ot(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=k(t,["_self"]);if(i!=null){let s=wpe(i);Array.isArray(s)&&(s=s.map(o=>gD(o))),C(e,["models"],s)}return e}function zot(t){const e={},n=k(t,["maskMode"]);n!=null&&C(e,["maskMode"],n);const r=k(t,["segmentationClasses"]);r!=null&&C(e,["maskClasses"],r);const i=k(t,["maskDilation"]);return i!=null&&C(e,["dilation"],i),e}function mD(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=k(t,["description"]);i!=null&&C(e,["description"],i);const s=k(t,["version"]);s!=null&&C(e,["version"],s);const o=k(t,["_self"]);o!=null&&C(e,["tunedModelInfo"],iat(o));const a=k(t,["inputTokenLimit"]);a!=null&&C(e,["inputTokenLimit"],a);const l=k(t,["outputTokenLimit"]);l!=null&&C(e,["outputTokenLimit"],l);const c=k(t,["supportedGenerationMethods"]);c!=null&&C(e,["supportedActions"],c);const d=k(t,["temperature"]);d!=null&&C(e,["temperature"],d);const h=k(t,["maxTemperature"]);h!=null&&C(e,["maxTemperature"],h);const m=k(t,["topP"]);m!=null&&C(e,["topP"],m);const g=k(t,["topK"]);g!=null&&C(e,["topK"],g);const v=k(t,["thinking"]);return v!=null&&C(e,["thinking"],v),e}function gD(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=k(t,["description"]);i!=null&&C(e,["description"],i);const s=k(t,["versionId"]);s!=null&&C(e,["version"],s);const o=k(t,["deployedModels"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>tot(m))),C(e,["endpoints"],h)}const a=k(t,["labels"]);a!=null&&C(e,["labels"],a);const l=k(t,["_self"]);l!=null&&C(e,["tunedModelInfo"],sat(l));const c=k(t,["defaultCheckpointId"]);c!=null&&C(e,["defaultCheckpointId"],c);const d=k(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>m)),C(e,["checkpoints"],h)}return e}function Vot(t){const e={},n=k(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=k(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=k(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=k(t,["fileData"]);s!=null&&C(e,["fileData"],not(s));const o=k(t,["functionCall"]);o!=null&&C(e,["functionCall"],rot(o));const a=k(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=k(t,["inlineData"]);l!=null&&C(e,["inlineData"],Cst(l));const c=k(t,["text"]);c!=null&&C(e,["text"],c);const d=k(t,["thought"]);d!=null&&C(e,["thought"],d);const h=k(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=k(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function Hot(t){const e={},n=k(t,["productImage"]);return n!=null&&C(e,["image"],tc(n)),e}function qot(t,e){const n={},r=k(t,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=k(t,["baseSteps"]);e!==void 0&&i!=null&&C(e,["parameters","baseSteps"],i);const s=k(t,["outputGcsUri"]);e!==void 0&&s!=null&&C(e,["parameters","storageUri"],s);const o=k(t,["seed"]);e!==void 0&&o!=null&&C(e,["parameters","seed"],o);const a=k(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&C(e,["parameters","safetySetting"],a);const l=k(t,["personGeneration"]);e!==void 0&&l!=null&&C(e,["parameters","personGeneration"],l);const c=k(t,["addWatermark"]);e!==void 0&&c!=null&&C(e,["parameters","addWatermark"],c);const d=k(t,["outputMimeType"]);e!==void 0&&d!=null&&C(e,["parameters","outputOptions","mimeType"],d);const h=k(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&C(e,["parameters","outputOptions","compressionQuality"],h);const m=k(t,["enhancePrompt"]);e!==void 0&&m!=null&&C(e,["parameters","enhancePrompt"],m);const g=k(t,["labels"]);return e!==void 0&&g!=null&&C(e,["labels"],g),n}function Got(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["source"]);i!=null&&Wot(i,n);const s=k(e,["config"]);return s!=null&&qot(s,n),n}function Kot(t){const e={},n=k(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>dP(i))),C(e,["generatedImages"],r)}return e}function Wot(t,e){const n={},r=k(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=k(t,["personImage"]);e!==void 0&&i!=null&&C(e,["instances[0]","personImage","image"],tc(i));const s=k(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Hot(a))),C(e,["instances[0]","productImages"],o)}return n}function Yot(t){const e={},n=k(t,["referenceImage"]);n!=null&&C(e,["referenceImage"],tc(n));const r=k(t,["referenceId"]);r!=null&&C(e,["referenceId"],r);const i=k(t,["referenceType"]);i!=null&&C(e,["referenceType"],i);const s=k(t,["maskImageConfig"]);s!=null&&C(e,["maskImageConfig"],zot(s));const o=k(t,["controlImageConfig"]);o!=null&&C(e,["controlImageConfig"],Lst(o));const a=k(t,["styleImageConfig"]);a!=null&&C(e,["styleImageConfig"],a);const l=k(t,["subjectImageConfig"]);return l!=null&&C(e,["subjectImageConfig"],l),e}function Cpe(t){const e={},n=k(t,["safetyAttributes","categories"]);n!=null&&C(e,["categories"],n);const r=k(t,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=k(t,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function Ppe(t){const e={},n=k(t,["safetyAttributes","categories"]);n!=null&&C(e,["categories"],n);const r=k(t,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=k(t,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function Jot(t){const e={},n=k(t,["category"]);if(n!=null&&C(e,["category"],n),k(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=k(t,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function Xot(t){const e={},n=k(t,["image"]);return n!=null&&C(e,["image"],tc(n)),e}function Qot(t,e){const n={},r=k(t,["mode"]);e!==void 0&&r!=null&&C(e,["parameters","mode"],r);const i=k(t,["maxPredictions"]);e!==void 0&&i!=null&&C(e,["parameters","maxPredictions"],i);const s=k(t,["confidenceThreshold"]);e!==void 0&&s!=null&&C(e,["parameters","confidenceThreshold"],s);const o=k(t,["maskDilation"]);e!==void 0&&o!=null&&C(e,["parameters","maskDilation"],o);const a=k(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&C(e,["parameters","binaryColorThreshold"],a);const l=k(t,["labels"]);return e!==void 0&&l!=null&&C(e,["labels"],l),n}function Zot(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["source"]);i!=null&&tat(i,n);const s=k(e,["config"]);return s!=null&&Qot(s,n),n}function eat(t){const e={},n=k(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Tot(i))),C(e,["generatedMasks"],r)}return e}function tat(t,e){const n={},r=k(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=k(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],tc(i));const s=k(t,["scribbleImage"]);return e!==void 0&&s!=null&&C(e,["instances[0]","scribble"],Xot(s)),n}function nat(t){const e={},n=k(t,["functionCallingConfig"]);n!=null&&C(e,["functionCallingConfig"],iot(n));const r=k(t,["retrievalConfig"]);return r!=null&&C(e,["retrievalConfig"],r),e}function rat(t){const e={},n=k(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=k(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=k(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=k(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=k(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=k(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],Iot(a));const l=k(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],Rot(l));const c=k(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function _pe(t){const e={},n=k(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>sot(m))),C(e,["functionDeclarations"],h)}const r=k(t,["retrieval"]);r!=null&&C(e,["retrieval"],r);const i=k(t,["googleSearchRetrieval"]);i!=null&&C(e,["googleSearchRetrieval"],i);const s=k(t,["computerUse"]);if(s!=null&&C(e,["computerUse"],s),k(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=k(t,["codeExecution"]);o!=null&&C(e,["codeExecution"],o);const a=k(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const l=k(t,["googleMaps"]);l!=null&&C(e,["googleMaps"],l);const c=k(t,["googleSearch"]);c!=null&&C(e,["googleSearch"],c);const d=k(t,["urlContext"]);return d!=null&&C(e,["urlContext"],d),e}function iat(t){const e={},n=k(t,["baseModel"]);n!=null&&C(e,["baseModel"],n);const r=k(t,["createTime"]);r!=null&&C(e,["createTime"],r);const i=k(t,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function sat(t){const e={},n=k(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&C(e,["baseModel"],n);const r=k(t,["createTime"]);r!=null&&C(e,["createTime"],r);const i=k(t,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function oat(t,e){const n={},r=k(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=k(t,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const s=k(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&C(e,["defaultCheckpointId"],s),n}function aat(t,e){const n={},r=k(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=k(t,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const s=k(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&C(e,["defaultCheckpointId"],s),n}function lat(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","name"],zn(t,r));const i=k(e,["config"]);return i!=null&&oat(i,n),n}function cat(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["config"]);return i!=null&&aat(i,n),n}function uat(t,e){const n={},r=k(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=k(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&C(e,["parameters","safetySetting"],i);const s=k(t,["personGeneration"]);e!==void 0&&s!=null&&C(e,["parameters","personGeneration"],s);const o=k(t,["includeRaiReason"]);e!==void 0&&o!=null&&C(e,["parameters","includeRaiReason"],o);const a=k(t,["outputMimeType"]);e!==void 0&&a!=null&&C(e,["parameters","outputOptions","mimeType"],a);const l=k(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&C(e,["parameters","outputOptions","compressionQuality"],l);const c=k(t,["enhanceInputImage"]);e!==void 0&&c!=null&&C(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=k(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&C(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const h=k(t,["labels"]);e!==void 0&&h!=null&&C(e,["labels"],h);const m=k(t,["numberOfImages"]);e!==void 0&&m!=null&&C(e,["parameters","sampleCount"],m);const g=k(t,["mode"]);return e!==void 0&&g!=null&&C(e,["parameters","mode"],g),n}function dat(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["_url","model"],zn(t,r));const i=k(e,["image"]);i!=null&&C(n,["instances[0]","image"],tc(i));const s=k(e,["upscaleFactor"]);s!=null&&C(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=k(e,["config"]);return o!=null&&uat(o,n),n}function fat(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>dP(s))),C(e,["generatedImages"],i)}return e}function hat(t){const e={},n=k(t,["uri"]);n!=null&&C(e,["uri"],n);const r=k(t,["encodedVideo"]);r!=null&&C(e,["videoBytes"],Hh(r));const i=k(t,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function pat(t){const e={},n=k(t,["gcsUri"]);n!=null&&C(e,["uri"],n);const r=k(t,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],Hh(r));const i=k(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function mat(t){const e={},n=k(t,["image"]);n!=null&&C(e,["_self"],tc(n));const r=k(t,["maskMode"]);return r!=null&&C(e,["maskMode"],r),e}function gat(t){const e={},n=k(t,["image"]);n!=null&&C(e,["image"],fP(n));const r=k(t,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function yat(t){const e={},n=k(t,["image"]);n!=null&&C(e,["image"],tc(n));const r=k(t,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function Ipe(t){const e={},n=k(t,["uri"]);n!=null&&C(e,["uri"],n);const r=k(t,["videoBytes"]);r!=null&&C(e,["encodedVideo"],Hh(r));const i=k(t,["mimeType"]);return i!=null&&C(e,["encoding"],i),e}function Rpe(t){const e={},n=k(t,["uri"]);n!=null&&C(e,["gcsUri"],n);const r=k(t,["videoBytes"]);r!=null&&C(e,["bytesBase64Encoded"],Hh(r));const i=k(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xat(t,e){const n={},r=k(t,["displayName"]);return e!==void 0&&r!=null&&C(e,["displayName"],r),n}function vat(t){const e={},n=k(t,["config"]);return n!=null&&xat(n,e),e}function bat(t,e){const n={},r=k(t,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),n}function wat(t){const e={},n=k(t,["name"]);n!=null&&C(e,["_url","name"],n);const r=k(t,["config"]);return r!=null&&bat(r,e),e}function Eat(t){const e={},n=k(t,["name"]);return n!=null&&C(e,["_url","name"],n),e}function Sat(t,e){const n={},r=k(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["customMetadata"],s)}const i=k(t,["chunkingConfig"]);return e!==void 0&&i!=null&&C(e,["chunkingConfig"],i),n}function Aat(t){const e={},n=k(t,["name"]);n!=null&&C(e,["name"],n);const r=k(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=k(t,["done"]);i!=null&&C(e,["done"],i);const s=k(t,["error"]);s!=null&&C(e,["error"],s);const o=k(t,["response"]);return o!=null&&C(e,["response"],kat(o)),e}function Tat(t){const e={},n=k(t,["fileSearchStoreName"]);n!=null&&C(e,["_url","file_search_store_name"],n);const r=k(t,["fileName"]);r!=null&&C(e,["fileName"],r);const i=k(t,["config"]);return i!=null&&Sat(i,e),e}function kat(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["parent"]);r!=null&&C(e,["parent"],r);const i=k(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function Nat(t,e){const n={},r=k(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=k(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function Cat(t){const e={},n=k(t,["config"]);return n!=null&&Nat(n,e),e}function Pat(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=k(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["fileSearchStores"],s)}return e}function Ope(t,e){const n={},r=k(t,["mimeType"]);e!==void 0&&r!=null&&C(e,["mimeType"],r);const i=k(t,["displayName"]);e!==void 0&&i!=null&&C(e,["displayName"],i);const s=k(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),C(e,["customMetadata"],a)}const o=k(t,["chunkingConfig"]);return e!==void 0&&o!=null&&C(e,["chunkingConfig"],o),n}function _at(t){const e={},n=k(t,["fileSearchStoreName"]);n!=null&&C(e,["_url","file_search_store_name"],n);const r=k(t,["config"]);return r!=null&&Ope(r,e),e}function Iat(t){const e={},n=k(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rat="Content-Type",Oat="X-Server-Timeout",Mat="User-Agent",yD="x-goog-api-client",Lat="1.34.0",Dat=`google-genai-sdk/${Lat}`,jat="v1beta1",Bat="v1beta";class Uat{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:jat,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Bat,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&Fat(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await yZ(i),new fD(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await yZ(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Vl(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:d}=yield nn(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=s.decode(d,{stream:!0});try{const v=JSON.parse(h);if("error"in v){const x=JSON.parse(JSON.stringify(v.error)),b=x.status,w=x.code,T=`got status: ${b}. ${JSON.stringify(v)}`;if(w>=400&&w<600)throw new cP({message:T,status:w})}}catch(v){if(v.name==="ApiError")throw v}o+=h;let m=-1,g=0;for(;;){m=-1,g=0;for(const b of l){const w=o.indexOf(b);w!==-1&&(m===-1||w<m)&&(m=w,g=b.length)}if(m===-1)break;const v=o.substring(0,m);o=o.substring(m+g);const x=v.trim();if(x.startsWith(a)){const b=x.substring(a.length).trim();try{const w=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield nn(new fD(w))}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Dat+" "+this.clientOptions.userAgentExtra;return e[Mat]=n,e[yD]=n,e[Rat]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(Oat,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),d=Tt("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(d,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),h={};r!=null&&Ope(r,h);const m=await this.fetchUploadUrl(c,a,l,d,h,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function yZ(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new cP({message:i,status:n}):new Error(i)}}function Fat(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=r(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $at="mcp_used/unknown";let zat=!1;function Mpe(t){for(const e of t)if(Vat(e)||typeof e=="object"&&"inputSchema"in e)return!0;return zat}function Lpe(t){var e;const n=(e=t[yD])!==null&&e!==void 0?e:"";t[yD]=(n+` ${$at}`).trimStart()}function Vat(t){return t!==null&&typeof t=="object"&&t instanceof g7}function Hat(t){return Vl(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield nn(n.listTools({cursor:i}));for(const a of o.tools)yield yield nn(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class g7{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new g7(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,Hl(Hat(d))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const h=i;o.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Ert(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function qat(t,e,n){const r=new prt;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class Gat{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=Yat(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const d=new Promise(N=>{c=N}),h=e.callbacks,m=function(){c({})},g=this.apiClient,v={onopen:m,onmessage:N=>{qat(g,h.onmessage,N)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(N){}},x=this.webSocketFactory.create(l,Wat(o),v);x.connect(),await d;const T={setup:{model:zn(this.apiClient,e.model)}};return x.send(JSON.stringify(T)),new Kat(x,this.apiClient)}}class Kat{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=vst(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=xst(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Wg.PLAY)}pause(){this.sendPlaybackControl(Wg.PAUSE)}stop(){this.sendPlaybackControl(Wg.STOP)}resetContext(){this.sendPlaybackControl(Wg.RESET_CONTEXT)}close(){this.conn.close()}}function Wat(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Yat(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jat="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Xat(t,e,n){const r=new hrt;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=Est(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class Qat{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Gat(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Mpe(e.config.tools)&&Lpe(h);const m=nlt(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d);else{const D=this.apiClient.getApiKey();let $="BidiGenerateContent",G="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",G="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${$}?${G}=${D}`}let g=()=>{};const v=new Promise(D=>{g=D}),x=e.callbacks,b=function(){var D;(D=x==null?void 0:x.onopen)===null||D===void 0||D.call(x),g({})},w=this.apiClient,T={onopen:b,onmessage:D=>{Xat(w,x.onmessage,D)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(D){}},N=this.webSocketFactory.create(d,tlt(m),T);N.connect(),await v;let O=zn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const D=this.apiClient.getProject(),$=this.apiClient.getLocation();O=`projects/${D}/locations/${$}/`+O}let j={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Hk.AUDIO]}:e.config.responseModalities=[Hk.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],F=[];for(const D of _)if(this.isCallableTool(D)){const $=D;F.push(await $.tool())}else F.push(D);F.length>0&&(e.config.tools=F);const z={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=yst(this.apiClient,z):j=gst(this.apiClient,z),delete j.config,N.send(JSON.stringify(j)),new elt(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Zat={turnComplete:!0};class elt{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=nl(n.turns),e.isVertexAI()||(r=r.map(i=>uP(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Jat)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Zat),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:wst(e)}:n={realtimeInput:bst(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function tlt(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function nlt(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xZ=10;function vZ(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(by(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function by(t){return"callTool"in t&&typeof t.callTool=="function"}function rlt(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>by(i)))!==null&&r!==void 0?r:!1}function bZ(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(by(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function wZ(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ilt extends Jd{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!rlt(n)||vZ(n.config))return await this.generateContentInternal(l);const c=bZ(n);if(c.length>0){const x=c.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,h;const m=nl(l.contents),g=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:xZ;let v=0;for(;v<g&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,b=[];for(const w of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(by(w)){const N=await w.callTool(d.functionCalls);b.push(...N)}v++,h={role:"user",parts:b},l.contents=nl(l.contents),l.contents.push(x),l.contents.push(h),wZ(l.config)&&(m.push(x),m.push(h))}return wZ(l.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),vZ(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const l=bZ(n);if(l.length>0){const h=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,d=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new c0(Md.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>by(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&Mpe(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Lpe(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(by(o)){const a=o,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:xZ;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,d,h){return Vl(this,arguments,function*(){for(var m,g,v,x,b,w;a<s;){o&&(a++,o=!1);const j=yield nn(c.processParamsMaybeAddMcpUsage(h)),_=yield nn(c.generateContentStreamInternal(j)),F=[],z=[];try{for(var T=!0,N=(g=void 0,Hl(_)),O;O=yield nn(N.next()),m=O.done,!m;T=!0){x=O.value,T=!1;const D=x;if(yield yield nn(D),D.candidates&&(!((b=D.candidates[0])===null||b===void 0)&&b.content)){z.push(D.candidates[0].content);for(const $ of(w=D.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(a<s&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has($.functionCall.name)){const G=yield nn(d.get($.functionCall.name).callTool([$.functionCall]));F.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(D){g={error:D}}finally{try{!T&&!m&&(v=N.return)&&(yield nn(v.call(N)))}finally{if(g)throw g.error}}if(F.length>0){o=!0;const D=new zb;D.candidates=[{content:{role:"user",parts:F}}],yield yield nn(D);const $=[];$.push(...z),$.push({role:"user",parts:F});const G=nl(h.contents).concat($);h.contents=G}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=pZ(this.apiClient,e);return a=Tt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=gZ(d),m=new zb;return Object.assign(m,h),m})}else{const c=hZ(this.apiClient,e);return a=Tt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=mZ(d),m=new zb;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=pZ(this.apiClient,e);return a=Tt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(h){return Vl(this,arguments,function*(){var m,g,v,x;try{for(var b=!0,w=Hl(h),T;T=yield nn(w.next()),m=T.done,!m;b=!0){x=T.value,b=!1;const N=x,O=gZ(yield nn(N.json()));O.sdkHttpResponse={headers:N.headers};const j=new zb;Object.assign(j,O),yield yield nn(j)}}catch(N){g={error:N}}finally{try{!b&&!m&&(v=w.return)&&(yield nn(v.call(w)))}finally{if(g)throw g.error}}})})}else{const c=hZ(this.apiClient,e);return a=Tt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(h){return Vl(this,arguments,function*(){var m,g,v,x;try{for(var b=!0,w=Hl(h),T;T=yield nn(w.next()),m=T.done,!m;b=!0){x=T.value,b=!1;const N=x,O=mZ(yield nn(N.json()));O.sdkHttpResponse={headers:N.headers};const j=new zb;Object.assign(j,O),yield yield nn(j)}}catch(N){g={error:N}}finally{try{!b&&!m&&(v=w.return)&&(yield nn(v.call(w)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Qst(this.apiClient,e);return a=Tt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=eot(d),m=new JQ;return Object.assign(m,h),m})}else{const c=Xst(this.apiClient,e);return a=Tt("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Zst(d),m=new JQ;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dot(this.apiClient,e);return a=Tt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=hot(d),m=new XQ;return Object.assign(m,h),m})}else{const c=uot(this.apiClient,e);return a=Tt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=fot(d),m=new XQ;return Object.assign(m,h),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Kst(this.apiClient,e);return s=Tt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=Wst(l),d=new nrt;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=dat(this.apiClient,e);return s=Tt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=fat(l),d=new rrt;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Got(this.apiClient,e);return s=Tt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Kot(l),d=new irt;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Zot(this.apiClient,e);return s=Tt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=eat(l),d=new srt;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=_ot(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>gD(d))}else{const c=Pot(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>mD(d))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Uot(this.apiClient,e);return a=Tt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=$ot(d),m=new QQ;return Object.assign(m,h),m})}else{const c=Bot(this.apiClient,e);return a=Tt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Fot(d),m=new QQ;return Object.assign(m,h),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=cat(this.apiClient,e);return a=Tt("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>gD(d))}else{const c=lat(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>mD(d))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Vst(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=qst(d),m=new ZQ;return Object.assign(m,h),m})}else{const c=zst(this.apiClient,e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Hst(d),m=new ZQ;return Object.assign(m,h),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Ust(this.apiClient,e);return a=Tt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=$st(d),m=new eZ;return Object.assign(m,h),m})}else{const c=Bst(this.apiClient,e);return a=Tt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Fst(d),m=new eZ;return Object.assign(m,h),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Ist(this.apiClient,e);return s=Tt("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=Rst(l),d=new ort;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=vot(this.apiClient,e);return a=Tt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const h=yot(d),m=new qk;return Object.assign(m,h),m})}else{const c=xot(this.apiClient,e);return a=Tt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const h=got(d),m=new qk;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class slt extends Jd{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Jnt(e);return a=Tt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const c=Ynt(e);return a=Tt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=znt(e);return s=Tt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function olt(t){const e={},n=k(t,["data"]);if(n!=null&&C(e,["data"],n),k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function alt(t){const e={},n=k(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>glt(s))),C(e,["parts"],i)}const r=k(t,["role"]);return r!=null&&C(e,["role"],r),e}function llt(t,e,n){const r={},i=k(e,["expireTime"]);n!==void 0&&i!=null&&C(n,["expireTime"],i);const s=k(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&C(n,["newSessionExpireTime"],s);const o=k(e,["uses"]);n!==void 0&&o!=null&&C(n,["uses"],o);const a=k(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&C(n,["bidiGenerateContentSetup"],mlt(t,a));const l=k(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&C(n,["fieldMask"],l),r}function clt(t,e){const n={},r=k(e,["config"]);return r!=null&&C(n,["config"],llt(t,r,n)),n}function ult(t){const e={};if(k(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=k(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=k(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function dlt(t){const e={},n=k(t,["id"]);n!=null&&C(e,["id"],n);const r=k(t,["args"]);r!=null&&C(e,["args"],r);const i=k(t,["name"]);if(i!=null&&C(e,["name"],i),k(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(k(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function flt(t){const e={};if(k(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=k(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function hlt(t){const e={};if(k(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(k(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=k(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function plt(t,e){const n={},r=k(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=k(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const s=k(t,["temperature"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","temperature"],s);const o=k(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const a=k(t,["topK"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topK"],a);const l=k(t,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const c=k(t,["mediaResolution"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","mediaResolution"],c);const d=k(t,["seed"]);e!==void 0&&d!=null&&C(e,["setup","generationConfig","seed"],d);const h=k(t,["speechConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","speechConfig"],m7(h));const m=k(t,["thinkingConfig"]);e!==void 0&&m!=null&&C(e,["setup","generationConfig","thinkingConfig"],m);const g=k(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=k(t,["systemInstruction"]);e!==void 0&&v!=null&&C(e,["setup","systemInstruction"],alt($s(v)));const x=k(t,["tools"]);if(e!==void 0&&x!=null){let _=Av(x);Array.isArray(_)&&(_=_.map(F=>xlt(Sv(F)))),C(e,["setup","tools"],_)}const b=k(t,["sessionResumption"]);e!==void 0&&b!=null&&C(e,["setup","sessionResumption"],ylt(b));const w=k(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","inputAudioTranscription"],w);const T=k(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&C(e,["setup","outputAudioTranscription"],T);const N=k(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&C(e,["setup","realtimeInputConfig"],N);const O=k(t,["contextWindowCompression"]);e!==void 0&&O!=null&&C(e,["setup","contextWindowCompression"],O);const j=k(t,["proactivity"]);if(e!==void 0&&j!=null&&C(e,["setup","proactivity"],j),k(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function mlt(t,e){const n={},r=k(e,["model"]);r!=null&&C(n,["setup","model"],zn(t,r));const i=k(e,["config"]);return i!=null&&C(n,["config"],plt(i,n)),n}function glt(t){const e={},n=k(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=k(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=k(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=k(t,["fileData"]);s!=null&&C(e,["fileData"],ult(s));const o=k(t,["functionCall"]);o!=null&&C(e,["functionCall"],dlt(o));const a=k(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=k(t,["inlineData"]);l!=null&&C(e,["inlineData"],olt(l));const c=k(t,["text"]);c!=null&&C(e,["text"],c);const d=k(t,["thought"]);d!=null&&C(e,["thought"],d);const h=k(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=k(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function ylt(t){const e={},n=k(t,["handle"]);if(n!=null&&C(e,["handle"],n),k(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xlt(t){const e={},n=k(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(k(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=k(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=k(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=k(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=k(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),k(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=k(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],flt(a));const l=k(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],hlt(l));const c=k(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vlt(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function blt(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=vlt(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class wlt extends Jd{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=clt(this.apiClient,e);s=Tt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=blt(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Elt(t,e){const n={},r=k(t,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),n}function Slt(t){const e={},n=k(t,["name"]);n!=null&&C(e,["_url","name"],n);const r=k(t,["config"]);return r!=null&&Elt(r,e),e}function Alt(t){const e={},n=k(t,["name"]);return n!=null&&C(e,["_url","name"],n),e}function Tlt(t,e){const n={},r=k(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=k(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function klt(t){const e={},n=k(t,["parent"]);n!=null&&C(e,["_url","parent"],n);const r=k(t,["config"]);return r!=null&&Tlt(r,e),e}function Nlt(t){const e={},n=k(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=k(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=k(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Clt extends Jd{constructor(e){super(),this.apiClient=e,this.list=async n=>new c0(Md.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Alt(e);return s=Tt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Slt(e);i=Tt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=klt(e);return s=Tt("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Nlt(l),d=new art;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Plt extends Jd{constructor(e,n=new Clt(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new c0(Md.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vat(e);return s=Tt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Eat(e);return s=Tt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=wat(e);i=Tt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Cat(e);return s=Tt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Pat(l),d=new lrt;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_at(e);return s=Tt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Iat(l),d=new crt;return Object.assign(d,c),d})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Tat(e);return s=Tt("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Aat(l),d=new u7;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Dpe=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Dpe=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const _lt=()=>Dpe();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xD(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const vD=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ll extends Error{}class fo extends ll{constructor(e,n,r,i){super(`${fo.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new hP({message:r,cause:vD(n)});const s=n;return e===400?new Bpe(e,s,r,i):e===401?new Upe(e,s,r,i):e===403?new Fpe(e,s,r,i):e===404?new $pe(e,s,r,i):e===409?new zpe(e,s,r,i):e===422?new Vpe(e,s,r,i):e===429?new Hpe(e,s,r,i):e>=500?new qpe(e,s,r,i):new fo(e,s,r,i)}}class bD extends fo{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class hP extends fo{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class jpe extends hP{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Bpe extends fo{}class Upe extends fo{}class Fpe extends fo{}class $pe extends fo{}class zpe extends fo{}class Vpe extends fo{}class Hpe extends fo{}class qpe extends fo{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ilt=/^[a-z][a-z0-9+.-]*:/i,Rlt=t=>Ilt.test(t);let wD=t=>(wD=Array.isArray,wD(t));const Olt=wD;let Mlt=Olt;const EZ=Mlt;function Llt(t){if(!t)return!0;for(const e in t)return!1;return!0}function Dlt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const jlt=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ll(`${t} must be an integer`);if(e<0)throw new ll(`${t} must be a positive integer`);return e},Blt=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ult=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rg="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Flt(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const $lt=()=>{var t,e,n,r,i;const s=Flt();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rg,"X-Stainless-OS":AZ(Deno.build.os),"X-Stainless-Arch":SZ(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rg,"X-Stainless-OS":AZ((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":SZ((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=zlt();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Rg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function zlt(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const SZ=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",AZ=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ZA;const Vlt=()=>ZA??(ZA=$lt());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hlt(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Gpe(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function qlt(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Gpe({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Kpe(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Glt(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Klt=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wpe=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function CO(t,e,n){return Wpe(),new File(t,e??"unknown_file",n)}function Wlt(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Ylt=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ype=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Jlt=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Ype(t),Xlt=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Qlt(t,e,n){if(Wpe(),t=await t,Jlt(t))return t instanceof File?t:CO([await t.arrayBuffer()],t.name);if(Xlt(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),CO(await ED(i),e,n)}const r=await ED(t);if(e||(e=Wlt(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return CO(r,e,n)}async function ED(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(Ype(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(Ylt(t))try{for(var a=!0,l=Hl(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const d=i;o.push(...await ED(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const d=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${Zlt(t)}`)}return o}function Zlt(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jpe{constructor(e){this._client=e}}Jpe._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xpe(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const TZ=Object.freeze(Object.create(null)),ect=(t=Xpe)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((d,h,m)=>{var g,v,x;/[?#]/.test(h)&&(i=!0);const b=r[m];let w=(i?encodeURIComponent:t)(""+b);return m!==r.length&&(b==null||typeof b=="object"&&b.toString===((x=Object.getPrototypeOf((v=Object.getPrototypeOf((g=b.hasOwnProperty)!==null&&g!==void 0?g:TZ))!==null&&v!==void 0?v:TZ))===null||x===void 0?void 0:x.toString))&&(w=b+"",s.push({start:d.length+h.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),d+h+(m===r.length?"":w)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((d,h)=>d.start-h.start),s.length>0){let d=0;const h=s.reduce((m,g)=>{const v=" ".repeat(g.start-d),x="^".repeat(g.length);return d=g.start+g.length,m+v+x},"");throw new ll(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${h}`)}return o}),eT=ect(Xpe);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qpe extends Jpe{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=Kk(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new ll("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new ll("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(eT`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(eT`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(eT`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=Kk(s,["api_version"]);return this._client.get(eT`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}Qpe._key=Object.freeze(["interactions"]);class Zpe extends Qpe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tct(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let tT;function y7(t){let e;return(tT??(e=new globalThis.TextEncoder,tT=e.encode.bind(e)))(t)}let nT;function kZ(t){let e;return(nT??(e=new globalThis.TextDecoder,nT=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pP{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?y7(e):e;this.buffer=tct([this.buffer,n]);const r=[];let i;for(;(i=nct(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(kZ(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=kZ(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}pP.NEWLINE_CHARS=new Set([`
`,"\r"]);pP.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function nct(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function rct(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wk={off:0,error:200,warn:300,info:400,debug:500},NZ=(t,e,n)=>{if(t){if(Dlt(Wk,t))return t;Xs(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Wk))}`)}};function iw(){}function rT(t,e,n){return!e||Wk[t]>Wk[n]?iw:e[t].bind(e)}const ict={error:iw,warn:iw,info:iw,debug:iw};let CZ=new WeakMap;function Xs(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return ict;const i=CZ.get(n);if(i&&i[0]===r)return i[1];const s={error:rT("error",n,r),warn:rT("warn",n,r),info:rT("info",n,r),debug:rT("debug",n,r)};return CZ.set(n,[r,s]),s}const Cp=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sct=class sw{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?Xs(r):console;function o(){return Vl(this,arguments,function*(){var l,c,d,h;if(i)throw new ll("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,v=Hl(oct(e,n)),x;x=yield nn(v.next()),l=x.done,!l;g=!0){h=x.value,g=!1;const b=h;if(!m)if(b.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield nn(JSON.parse(b.data))}catch(w){throw s.error("Could not parse message into JSON:",b.data),s.error("From chunk:",b.raw),w}}}catch(b){c={error:b}}finally{try{!g&&!l&&(d=v.return)&&(yield nn(d.call(v)))}finally{if(c)throw c.error}}m=!0}catch(b){if(xD(b))return yield nn(void 0);throw b}finally{m||n.abort()}})}return new sw(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return Vl(this,arguments,function*(){var l,c,d,h;const m=new pP,g=Kpe(e);try{for(var v=!0,x=Hl(g),b;b=yield nn(x.next()),l=b.done,!l;v=!0){h=b.value,v=!1;const w=h;for(const T of m.decode(w))yield yield nn(T)}}catch(w){c={error:w}}finally{try{!v&&!l&&(d=x.return)&&(yield nn(d.call(x)))}finally{if(c)throw c.error}}for(const w of m.flush())yield yield nn(w)})}function o(){return Vl(this,arguments,function*(){var l,c,d,h;if(i)throw new ll("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,v=Hl(s()),x;x=yield nn(v.next()),l=x.done,!l;g=!0){h=x.value,g=!1;const b=h;m||b&&(yield yield nn(JSON.parse(b)))}}catch(b){c={error:b}}finally{try{!g&&!l&&(d=v.return)&&(yield nn(d.call(v)))}finally{if(c)throw c.error}}m=!0}catch(b){if(xD(b))return yield nn(void 0);throw b}finally{m||n.abort()}})}return new sw(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new sw(()=>i(e),this.controller,this.client),new sw(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Gpe({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=y7(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function oct(t,e){return Vl(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ll("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ll("Attempted to iterate over a response with no body");const a=new lct,l=new pP,c=Kpe(t.body);try{for(var d=!0,h=Hl(act(c)),m;m=yield nn(h.next()),r=m.done,!r;d=!0){o=m.value,d=!1;const g=o;for(const v of l.decode(g)){const x=a.decode(v);x&&(yield yield nn(x))}}}catch(g){i={error:g}}finally{try{!d&&!r&&(s=h.return)&&(yield nn(s.call(h)))}finally{if(i)throw i.error}}for(const g of l.flush()){const v=a.decode(g);v&&(yield yield nn(v))}})}function act(t){return Vl(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Hl(t),c;c=yield nn(l.next()),n=c.done,!n;a=!0){s=c.value,a=!1;const d=s;if(d==null)continue;const h=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?y7(d):d;let m=new Uint8Array(o.length+h.length);m.set(o),m.set(h,o.length),o=m;let g;for(;(g=rct(o))!==-1;)yield yield nn(o.slice(0,g)),o=o.slice(g)}}catch(d){r={error:d}}finally{try{!a&&!n&&(i=l.return)&&(yield nn(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield nn(o))})}class lct{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=cct(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function cct(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function uct(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return Xs(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):sct.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Xs(t).debug(`[${r}] response parsed`,Cp({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x7 extends Promise{constructor(e,n,r=uct){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new x7(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eme=Symbol("brand.privateNullableHeaders");function*dct(t){if(!t)return;if(eme in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():EZ(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=EZ(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Vb=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of dct(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[eme]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PO=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=Dnt)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var tme;class mP{constructor(e){var n,r,i,s,o,a,l,{baseURL:c=PO("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=PO("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,m=Kk(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:d,apiVersion:h},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:mP.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const v="warn";this.logLevel=v,this.logLevel=(o=(s=NZ(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:NZ(PO("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:Hlt(),this.encoder=Klt,this._options=g,this.apiKey=d,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Vb([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Vb([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Vb([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ll(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Rg}`}defaultIdempotencyKey(){return`stainless-node-retry-${_lt()}`}makeStatusError(e,n,r,i){return fo.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=Rlt(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Llt(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new x7(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:d,timeout:h}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,v=Date.now();if(Xs(this).debug(`[${m}] sending request`,Cp({retryOfRequestLogID:r,method:a.method,url:d,options:a,headers:c.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new bD;const x=new AbortController,b=await this.fetchWithTimeout(d,c,h,x).catch(vD),w=Date.now();if(b instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new bD;const O=xD(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return Xs(this).info(`[${m}] connection ${O?"timed out":"failed"} - ${N}`),Xs(this).debug(`[${m}] connection ${O?"timed out":"failed"} (${N})`,Cp({retryOfRequestLogID:r,url:d,durationMs:w-v,message:b.message})),this.retryRequest(a,n,r??m);throw Xs(this).info(`[${m}] connection ${O?"timed out":"failed"} - error; no more retries left`),Xs(this).debug(`[${m}] connection ${O?"timed out":"failed"} (error; no more retries left)`,Cp({retryOfRequestLogID:r,url:d,durationMs:w-v,message:b.message})),O?new jpe:new hP({cause:b})}const T=`[${m}${g}] ${c.method} ${d} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${w-v}ms`;if(!b.ok){const N=await this.shouldRetry(b);if(n&&N){const D=`retrying, ${n} attempts remaining`;return await Glt(b.body),Xs(this).info(`${T} - ${D}`),Xs(this).debug(`[${m}] response error (${D})`,Cp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-v})),this.retryRequest(a,n,r??m,b.headers)}const O=N?"error; no more retries left":"error; not retryable";Xs(this).info(`${T} - ${O}`);const j=await b.text().catch(D=>vD(D).message),_=Blt(j),F=_?void 0:j;throw Xs(this).debug(`[${m}] response error (${O})`,Cp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:F,durationMs:Date.now()-v})),this.makeStatusError(b.status,_,F,b.headers)}return Xs(this).info(T),Xs(this).debug(`[${m}] response start`,Cp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-v})),{response:b,options:a,controller:x,requestLogID:m,retryOfRequestLogID:r,startTime:v}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=Kk(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Ult(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:d}=o,h=this.buildURL(l,c,d);"timeout"in o&&jlt("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:o}),v=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:v},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Vb([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Vlt()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Vb([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:qlt(e)}:this.encoder({body:e,headers:r})}}mP.DEFAULT_TIMEOUT=6e4;class Xi extends mP{constructor(){super(...arguments),this.interactions=new Zpe(this)}}tme=Xi;Xi.GeminiNextGenAPIClient=tme;Xi.GeminiNextGenAPIClientError=ll;Xi.APIError=fo;Xi.APIConnectionError=hP;Xi.APIConnectionTimeoutError=jpe;Xi.APIUserAbortError=bD;Xi.NotFoundError=$pe;Xi.ConflictError=zpe;Xi.RateLimitError=Hpe;Xi.BadRequestError=Bpe;Xi.AuthenticationError=Upe;Xi.InternalServerError=qpe;Xi.PermissionDeniedError=Fpe;Xi.UnprocessableEntityError=Vpe;Xi.toFile=Qlt;Xi.Interactions=Zpe;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fct(t,e){const n={},r=k(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function hct(t,e){const n={},r=k(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function pct(t,e){const n={},r=k(t,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function mct(t,e){const n={},r=k(t,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function gct(t,e,n){const r={};if(k(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=k(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&C(e,["displayName"],i),k(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=k(t,["epochCount"]);e!==void 0&&s!=null&&C(e,["tuningTask","hyperparameters","epochCount"],s);const o=k(t,["learningRateMultiplier"]);if(o!=null&&C(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),k(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(k(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(k(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=k(t,["batchSize"]);e!==void 0&&a!=null&&C(e,["tuningTask","hyperparameters","batchSize"],a);const l=k(t,["learningRate"]);if(e!==void 0&&l!=null&&C(e,["tuningTask","hyperparameters","learningRate"],l),k(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(k(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function yct(t,e,n){const r={};let i=k(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=k(t,["validationDataset"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec"],PZ(g))}else if(i==="PREFERENCE_TUNING"){const g=k(t,["validationDataset"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec"],PZ(g))}const s=k(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&C(e,["tunedModelDisplayName"],s);const o=k(t,["description"]);e!==void 0&&o!=null&&C(e,["description"],o);let a=k(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=k(t,["epochCount"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=k(t,["epochCount"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=k(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=k(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=k(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=k(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=k(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=k(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let d=k(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=k(t,["adapterSize"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(d==="PREFERENCE_TUNING"){const g=k(t,["adapterSize"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(k(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(k(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=k(t,["labels"]);e!==void 0&&h!=null&&C(e,["labels"],h);const m=k(t,["beta"]);return e!==void 0&&m!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function xct(t,e){const n={},r=k(t,["baseModel"]);r!=null&&C(n,["baseModel"],r);const i=k(t,["preTunedModel"]);i!=null&&C(n,["preTunedModel"],i);const s=k(t,["trainingDataset"]);s!=null&&Pct(s);const o=k(t,["config"]);return o!=null&&gct(o,n),n}function vct(t,e){const n={},r=k(t,["baseModel"]);r!=null&&C(n,["baseModel"],r);const i=k(t,["preTunedModel"]);i!=null&&C(n,["preTunedModel"],i);const s=k(t,["trainingDataset"]);s!=null&&_ct(s,n,e);const o=k(t,["config"]);return o!=null&&yct(o,n,e),n}function bct(t,e){const n={},r=k(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function wct(t,e){const n={},r=k(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Ect(t,e,n){const r={},i=k(t,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const s=k(t,["pageToken"]);e!==void 0&&s!=null&&C(e,["_query","pageToken"],s);const o=k(t,["filter"]);return e!==void 0&&o!=null&&C(e,["_query","filter"],o),r}function Sct(t,e,n){const r={},i=k(t,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const s=k(t,["pageToken"]);e!==void 0&&s!=null&&C(e,["_query","pageToken"],s);const o=k(t,["filter"]);return e!==void 0&&o!=null&&C(e,["_query","filter"],o),r}function Act(t,e){const n={},r=k(t,["config"]);return r!=null&&Ect(r,n),n}function Tct(t,e){const n={},r=k(t,["config"]);return r!=null&&Sct(r,n),n}function kct(t,e){const n={},r=k(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=k(t,["nextPageToken"]);i!=null&&C(n,["nextPageToken"],i);const s=k(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>nme(a))),C(n,["tuningJobs"],o)}return n}function Nct(t,e){const n={},r=k(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=k(t,["nextPageToken"]);i!=null&&C(n,["nextPageToken"],i);const s=k(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>SD(a))),C(n,["tuningJobs"],o)}return n}function Cct(t,e){const n={},r=k(t,["name"]);r!=null&&C(n,["model"],r);const i=k(t,["name"]);return i!=null&&C(n,["endpoint"],i),n}function Pct(t,e){const n={};if(k(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(k(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=k(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),C(n,["examples","examples"],i)}return n}function _ct(t,e,n){const r={};let i=k(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=k(t,["gcsUri"]);e!==void 0&&o!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=k(t,["gcsUri"]);e!==void 0&&o!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=k(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=k(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=k(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(k(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function nme(t,e){const n={},r=k(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=k(t,["name"]);i!=null&&C(n,["name"],i);const s=k(t,["state"]);s!=null&&C(n,["state"],xpe(s));const o=k(t,["createTime"]);o!=null&&C(n,["createTime"],o);const a=k(t,["tuningTask","startTime"]);a!=null&&C(n,["startTime"],a);const l=k(t,["tuningTask","completeTime"]);l!=null&&C(n,["endTime"],l);const c=k(t,["updateTime"]);c!=null&&C(n,["updateTime"],c);const d=k(t,["description"]);d!=null&&C(n,["description"],d);const h=k(t,["baseModel"]);h!=null&&C(n,["baseModel"],h);const m=k(t,["_self"]);return m!=null&&C(n,["tunedModel"],Cct(m)),n}function SD(t,e){const n={},r=k(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=k(t,["name"]);i!=null&&C(n,["name"],i);const s=k(t,["state"]);s!=null&&C(n,["state"],xpe(s));const o=k(t,["createTime"]);o!=null&&C(n,["createTime"],o);const a=k(t,["startTime"]);a!=null&&C(n,["startTime"],a);const l=k(t,["endTime"]);l!=null&&C(n,["endTime"],l);const c=k(t,["updateTime"]);c!=null&&C(n,["updateTime"],c);const d=k(t,["error"]);d!=null&&C(n,["error"],d);const h=k(t,["description"]);h!=null&&C(n,["description"],h);const m=k(t,["baseModel"]);m!=null&&C(n,["baseModel"],m);const g=k(t,["tunedModel"]);g!=null&&C(n,["tunedModel"],g);const v=k(t,["preTunedModel"]);v!=null&&C(n,["preTunedModel"],v);const x=k(t,["supervisedTuningSpec"]);x!=null&&C(n,["supervisedTuningSpec"],x);const b=k(t,["preferenceOptimizationSpec"]);b!=null&&C(n,["preferenceOptimizationSpec"],b);const w=k(t,["tuningDataStats"]);w!=null&&C(n,["tuningDataStats"],w);const T=k(t,["encryptionSpec"]);T!=null&&C(n,["encryptionSpec"],T);const N=k(t,["partnerModelTuningSpec"]);N!=null&&C(n,["partnerModelTuningSpec"],N);const O=k(t,["customBaseModel"]);O!=null&&C(n,["customBaseModel"],O);const j=k(t,["experiment"]);j!=null&&C(n,["experiment"],j);const _=k(t,["labels"]);_!=null&&C(n,["labels"],_);const F=k(t,["outputUri"]);F!=null&&C(n,["outputUri"],F);const z=k(t,["pipelineJob"]);z!=null&&C(n,["pipelineJob"],z);const D=k(t,["serviceAccount"]);D!=null&&C(n,["serviceAccount"],D);const $=k(t,["tunedModelDisplayName"]);$!=null&&C(n,["tunedModelDisplayName"],$);const G=k(t,["veoTuningSpec"]);return G!=null&&C(n,["veoTuningSpec"],G),n}function Ict(t,e){const n={},r=k(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=k(t,["name"]);i!=null&&C(n,["name"],i);const s=k(t,["metadata"]);s!=null&&C(n,["metadata"],s);const o=k(t,["done"]);o!=null&&C(n,["done"],o);const a=k(t,["error"]);return a!=null&&C(n,["error"],a),n}function PZ(t,e){const n={},r=k(t,["gcsUri"]);r!=null&&C(n,["validationDatasetUri"],r);const i=k(t,["vertexDatasetResource"]);return i!=null&&C(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rct extends Jd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new c0(Md.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:dD.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=wct(e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>SD(d))}else{const c=bct(e);return a=Tt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>nme(d))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Tct(e);return a=Tt("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Nct(d),m=new tZ;return Object.assign(m,h),m})}else{const c=Act(e);return a=Tt("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=kct(d),m=new tZ;return Object.assign(m,h),m})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hct(e);return a=Tt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=mct(d),m=new nZ;return Object.assign(m,h),m})}else{const c=fct(e);return a=Tt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=pct(d),m=new nZ;return Object.assign(m,h),m})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=vct(e,e);return s=Tt("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>SD(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xct(e);return s=Tt("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>Ict(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oct{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Mct=1024*1024*8,Lct=3,Dct=1e3,jct=2,Yk="x-goog-upload-status";async function Bct(t,e,n){var r;const i=await rme(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Yk])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Uct(t,e,n){var r;const i=await rme(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Yk])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=fpe(s),a=new d7;return Object.assign(a,o),a}async function rme(t,e,n){var r,i;let s=0,o=0,a=new fD(new Response),l="upload";for(s=t.size;o<s;){const c=Math.min(Mct,s-o),d=t.slice(o,o+c);o+c>=s&&(l+=", finalize");let h=0,m=Dct;for(;h<Lct&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Yk]));)h++,await $ct(m),m=m*jct;if(o+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[Yk])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function Fct(t){return{size:t.size,type:t.type}}function $ct(t){return new Promise(e=>setTimeout(e,t))}class zct{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Bct(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Uct(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Fct(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vct{create(e,n,r){return new Hct(e,n,r)}}class Hct{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _Z="x-goog-api-key";class qct{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(_Z)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_Z,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gct="gl-node/";class ime{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Xi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Fnt(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new qct(this.apiKey);this.apiClient=new Uat({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Gct+"web",uploader:new zct,downloader:new Oct}),this.models=new ilt(this.apiClient),this.live=new Qat(this.apiClient,i,new Vct),this.batches=new mit(this.apiClient),this.chats=new Jit(this.models,this.apiClient),this.caches=new Kit(this.apiClient),this.files=new ost(this.apiClient),this.operations=new slt(this.apiClient),this.authTokens=new wlt(this.apiClient),this.tunings=new Rct(this.apiClient),this.fileSearchStores=new Plt(this.apiClient)}}const sme={inputPricePerMillion:.5,outputPricePerMillion:2.5,customModelPricing:{"gemini-3-flash-preview":{input:.5,output:2.5},"gemini-2.5-pro":{input:1.25,output:10},"gemini-2.5-flash":{input:.15,output:.6},"gemini-2.5-flash-lite":{input:.075,output:.3},"gemini-2.0-flash":{input:.1,output:.4},"gemini-2.0-flash-lite":{input:.075,output:.3}}},IZ={records:[],pricing:sme},RZ="token_usage_store";class Kct{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=IZ,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async loadState(){try{const e=await Ae.getItem(Ae.getUserKey(RZ));if(e){const n=JSON.parse(e);this.state={...IZ,...n,pricing:{...sme,...n.pricing||{}}}}}catch(e){console.error("[TokenUsageStore] Failed to load state:",e)}}async saveState(){try{await Ae.setItem(Ae.getUserKey(RZ),JSON.stringify(this.state))}catch(e){console.error("[TokenUsageStore] Failed to save state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}addRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,6),timestamp:Date.now()},...this.state.records].slice(0,1e3);this.state={...this.state,records:r},this.notify(),console.log(`[TokenUsageStore] Recorded: ${e.source} ${e.operation} - In: ${e.inputTokens}, Out: ${e.outputTokens}`)}updatePricing(e){this.state={...this.state,pricing:{...this.state.pricing,...e}},this.notify()}clearHistory(){this.state={...this.state,records:[]},this.notify()}calculateCost(e,n,r){var s;const i=this.state.pricing;if(r&&((s=i.customModelPricing)!=null&&s[r])){const o=i.customModelPricing[r];return e*o.input/1e6+n*o.output/1e6}return e*i.inputPricePerMillion/1e6+n*i.outputPricePerMillion/1e6}getStats(){var l;const e=this.state.records,n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime(),i=new Date(n.getFullYear(),n.getMonth(),1).getTime(),s={totalInputTokens:0,totalOutputTokens:0,totalCost:0,bySource:{MANAGER:{input:0,output:0,cost:0,count:0},DEALER:{input:0,output:0,cost:0,count:0},POLYMARKET_DEALER:{input:0,output:0,cost:0,count:0}},byOperation:{},today:{input:0,output:0,cost:0},thisMonth:{input:0,output:0,cost:0},dealerMetrics:{avgTokensPerCoin:0,avgTokensPerCycle:0,totalCoinsAnalyzed:0},managerMetrics:{avgTokensPerQuery:0,totalQueries:0}};let o=0,a=0;for(const c of e){const d=this.calculateCost(c.inputTokens,c.outputTokens,c.model);s.totalInputTokens+=c.inputTokens,s.totalOutputTokens+=c.outputTokens,s.totalCost+=d,s.bySource[c.source].input+=c.inputTokens,s.bySource[c.source].output+=c.outputTokens,s.bySource[c.source].cost+=d,s.bySource[c.source].count++,s.byOperation[c.operation]||(s.byOperation[c.operation]={input:0,output:0,cost:0,count:0}),s.byOperation[c.operation].input+=c.inputTokens,s.byOperation[c.operation].output+=c.outputTokens,s.byOperation[c.operation].cost+=d,s.byOperation[c.operation].count++,c.timestamp>=r&&(s.today.input+=c.inputTokens,s.today.output+=c.outputTokens,s.today.cost+=d),c.timestamp>=i&&(s.thisMonth.input+=c.inputTokens,s.thisMonth.output+=c.outputTokens,s.thisMonth.cost+=d),c.source==="DEALER"&&(o+=c.inputTokens+c.outputTokens,a++,(l=c.metadata)!=null&&l.coinsAnalyzed&&(s.dealerMetrics.totalCoinsAnalyzed+=c.metadata.coinsAnalyzed)),c.source==="MANAGER"&&s.managerMetrics.totalQueries++}if(s.dealerMetrics.totalCoinsAnalyzed>0&&(s.dealerMetrics.avgTokensPerCoin=o/s.dealerMetrics.totalCoinsAnalyzed),a>0&&(s.dealerMetrics.avgTokensPerCycle=o/a),s.managerMetrics.totalQueries>0){const c=s.bySource.MANAGER.input+s.bySource.MANAGER.output;s.managerMetrics.avgTokensPerQuery=c/s.managerMetrics.totalQueries}return s}getRecords(e=50,n){let r=this.state.records;return n&&(r=r.filter(i=>i.source===n)),r.slice(0,e)}}const Ms=new Kct,wy={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash-Lite",description:"Economy",inputPricePerMillion:.075,outputPricePerMillion:.3}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},ku={gemini:{name:"Google Gemini",icon:"",color:"#4285F4",keyUrl:"https://aistudio.google.com/apikey"},openai:{name:"OpenAI",icon:"",color:"#10A37F",keyUrl:"https://platform.openai.com/api-keys"},claude:{name:"Anthropic Claude",icon:"",color:"#D97757",keyUrl:"https://console.anthropic.com/settings/keys"}},Wct={gemini:{minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},openai:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500},claude:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500}},OZ={CRITICAL:100,HIGH:75,NORMAL:50,LOW:25};class Yg{constructor(){this.queue=[],this.isProcessing=!1,this.lastRequestTime=0,this.consecutiveRateLimits=0,this.blockedUntil=0,this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,this.config={minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},this.rateLimitListeners=[],console.log("[AIRequestQueue]  Initialized global request queue")}static getInstance(){return Yg.instance||(Yg.instance=new Yg),Yg.instance}setConfig(e){const n=Wct[e];n&&(this.config={...n},console.log(`[AIRequestQueue]  Config updated for provider: ${e}`))}addRateLimitListener(e){return this.rateLimitListeners.push(e),()=>{this.rateLimitListeners=this.rateLimitListeners.filter(n=>n!==e)}}setOnRateLimit(e){e&&this.addRateLimitListener(e)}enqueue(e){return new Promise((n,r)=>{const i=this.generateId(),s={id:i,priority:e.priority,source:e.source,execute:e.execute,resolve:n,reject:r,timestamp:Date.now(),retries:0,provider:e.provider||"gemini"};this.insertByPriority(s);const o=this.queue.findIndex(a=>a.id===i)+1;console.log(`[AIRequestQueue]  Queued request #${i.slice(-6)} (position: ${o}, priority: ${e.priority}, source: ${e.source})`),this.isProcessing||this.processQueue()})}insertByPriority(e){const n=OZ[e.priority];let r=this.queue.length;for(let i=0;i<this.queue.length;i++){const s=OZ[this.queue[i].priority];if(n>s){r=i;break}}this.queue.splice(r,0,e)}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0,console.log("[AIRequestQueue]  Starting queue processing");this.queue.length>0;){const e=this.queue.shift();try{await this.waitForSlot();const n=Date.now(),r=await this.executeWithRetry(e),i=Date.now()-e.timestamp;this.successCount++,this.totalWaitTimeMs+=i,this.requestCount++,this.consecutiveRateLimits=0,console.log(`[AIRequestQueue]  Request #${e.id.slice(-6)} completed (wait: ${(i/1e3).toFixed(1)}s)`),e.resolve(r)}catch(n){this.failureCount++,console.error(`[AIRequestQueue]  Request #${e.id.slice(-6)} failed:`,n.message),e.reject(n)}}this.isProcessing=!1,console.log("[AIRequestQueue]  Queue empty, processing stopped")}}async executeWithRetry(e){let n;for(let r=0;r<=this.config.maxRetries;r++)try{return r>0&&console.log(`[AIRequestQueue]  Retry attempt ${r}/${this.config.maxRetries} for #${e.id.slice(-6)}`),await e.execute()}catch(i){if(n=i,this.isRateLimitError(i)){const o=this.parseRetryDelay(i);if(this.handleRateLimit(o),r<this.config.maxRetries){await this.waitForSlot();continue}}if(r===this.config.maxRetries)break;const s=this.calculateBackoff(r);console.log(`[AIRequestQueue]  Waiting ${(s/1e3).toFixed(1)}s before retry...`),await this.sleep(s)}throw n}async waitForSlot(){const e=Date.now();if(this.blockedUntil>e){const l=this.blockedUntil-e;console.log(`[AIRequestQueue]  Rate limited, waiting ${(l/1e3).toFixed(1)}s...`),await this.sleep(l)}const n=Math.pow(2,Math.min(this.consecutiveRateLimits,6)),r=this.config.minIntervalMs*n,i=Math.min(r,this.config.maxBackoffMs),s=Math.random()*this.config.jitterMs,o=i+s,a=e-this.lastRequestTime;if(a<o){const l=o-a;this.consecutiveRateLimits>0&&console.log(`[AIRequestQueue]  Throttling: waiting ${(l/1e3).toFixed(1)}s (backoff level: ${this.consecutiveRateLimits})...`),await this.sleep(l)}this.lastRequestTime=Date.now()}handleRateLimit(e){this.consecutiveRateLimits++;const n=Math.min(this.config.baseBackoffMs+Math.pow(2,this.consecutiveRateLimits)*5e3,this.config.maxBackoffMs);this.blockedUntil=Date.now()+e*1e3+n;const r=e+Math.ceil(n/1e3);console.log(`[AIRequestQueue]  Rate limited (hit #${this.consecutiveRateLimits}). Blocked for ${r}s`);const i=this.consecutiveRateLimits>=this.config.maxRetries;this.rateLimitListeners.forEach(s=>{try{s({consecutiveHits:this.consecutiveRateLimits,blockedForSeconds:r,exhausted:i})}catch(o){console.error("[AIRequestQueue] Error in rate limit listener:",o)}})}calculateBackoff(e){const n=this.config.baseBackoffMs*Math.pow(2,e),r=Math.random()*this.config.jitterMs;return Math.min(n+r,this.config.maxBackoffMs)}isRateLimitError(e){const n=typeof e=="string"?e:JSON.stringify(e);return n.includes("429")||n.includes("RESOURCE_EXHAUSTED")||n.includes("Too Many Requests")||n.includes("quota")||n.includes("rate_limit")||n.includes("rate limit")}parseRetryDelay(e){try{const n=typeof e=="string"?e:JSON.stringify(e),r=n.match(/retry in (\d+\.?\d*)s/i);if(r)return Math.ceil(parseFloat(r[1]));const i=n.match(/"retryDelay"\s*:\s*"(\d+)s?"/i);if(i)return parseInt(i[1]);const s=n.match(/retry-after[:\s]+(\d+)/i);if(s)return parseInt(s[1])}catch{}return 30}generateId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}sleep(e){return new Promise(n=>setTimeout(n,e))}getMetrics(){return{queueLength:this.queue.length,avgWaitTimeMs:this.requestCount>0?this.totalWaitTimeMs/this.requestCount:0,successCount:this.successCount,failureCount:this.failureCount,lastRequestTime:this.lastRequestTime,consecutiveRateLimits:this.consecutiveRateLimits,isProcessing:this.isProcessing}}clear(){const e=this.queue.length;this.queue.forEach(n=>{n.reject(new Error("Queue cleared"))}),this.queue=[],console.log(`[AIRequestQueue]  Cleared ${e} pending requests`)}resetMetrics(){this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,console.log("[AIRequestQueue]  Metrics reset")}}const Bs=Yg.getInstance();class Yct{constructor(){this.providerType="gemini",this.client=null,this.modelName="gemini-2.5-flash"}isInitialized(){return this.client!==null}initialize(e){this.client=new ime({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance.",parameters:{type:ye.OBJECT,properties:{token:{type:ye.STRING,description:"Optional: Symbol or Mint Address of specific token to check."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet.",parameters:{type:ye.OBJECT,properties:{inputToken:{type:ye.STRING,description:"Symbol or Mint Address of token to sell"},outputToken:{type:ye.STRING,description:"Symbol or Mint Address of token to buy"},amount:{type:ye.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:ye.OBJECT,properties:{amount:{type:ye.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet.",parameters:{type:ye.OBJECT,properties:{tokenMint:{type:ye.STRING,description:"Mint address of the token to transfer"},amount:{type:ye.NUMBER,description:"Amount of tokens to transfer"}},required:["tokenMint","amount"]}},s={name:"getMarketPrice",description:"Get the current market price for a given symbol.",parameters:{type:ye.OBJECT,properties:{symbol:{type:ye.STRING,description:'Trading symbol (e.g., "BTCUSDT")'}},required:["symbol"]}},o={name:"getOHLCV",description:"Get OHLCV candlestick data for a symbol.",parameters:{type:ye.OBJECT,properties:{symbol:{type:ye.STRING,description:"Trading symbol"},timeframe:{type:ye.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D")'}},required:["symbol"]}},a={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:ye.OBJECT,properties:{symbol:{type:ye.STRING,description:"Trading symbol"},indicator:{type:ye.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:ye.STRING,description:"Timeframe"}},required:["symbol","indicator"]}},l={name:"getTradingViewSummary",description:"Get TradingView buy/sell/neutral recommendation summary.",parameters:{type:ye.OBJECT,properties:{symbol:{type:ye.STRING,description:"Trading symbol"}},required:["symbol"]}},c={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault and positions.",parameters:{type:ye.OBJECT,properties:{}}},d={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:ye.OBJECT,properties:{}}},h={name:"getHLMarketData",description:"Get market data for a Hyperliquid asset.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:'Asset symbol (e.g., "BTC", "ETH")'}},required:["coin"]}},m={name:"createHLOrder",description:"Place an order on Hyperliquid Testnet.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:"Asset symbol"},isBuy:{type:ye.BOOLEAN,description:"True for LONG, False for SHORT"},size:{type:ye.NUMBER,description:"Size of the order"},usdcAmount:{type:ye.NUMBER,description:"Amount in USDC to spend"},orderType:{type:ye.STRING,description:'Order type: "limit", "market"'},price:{type:ye.NUMBER,description:"Limit price"},leverage:{type:ye.NUMBER,description:"Leverage multiplier (1-50)"},stopLoss:{type:ye.NUMBER,description:"Stop loss price"},takeProfit:{type:ye.NUMBER,description:"Take profit price"},reduceOnly:{type:ye.BOOLEAN,description:"True to only reduce existing position"}},required:["coin","isBuy","orderType"]}},g={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:"Asset symbol"},orderId:{type:ye.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},v={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:"Asset symbol"},leverage:{type:ye.NUMBER,description:"New leverage (1-50)"},isCross:{type:ye.BOOLEAN,description:"True for cross margin"}},required:["coin","leverage","isCross"]}},x={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:"Asset symbol"},size:{type:ye.NUMBER,description:"Optional: partial close size"},orderType:{type:ye.STRING,description:'Order type: "market" or "limit"'},price:{type:ye.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},b={name:"withdrawFromHL",description:"Execute a USDC withdrawal from Hyperliquid Testnet.",parameters:{type:ye.OBJECT,properties:{amount:{type:ye.NUMBER,description:"Amount of USDC to withdraw"}},required:["amount"]}},w={name:"getDealerTradeHistory",description:"Query the Hyperliquid Dealer's trade history and AI reasoning.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:"Optional: Filter by coin"},limit:{type:ye.NUMBER,description:"Max records to return (default 10)"},includeReasoning:{type:ye.BOOLEAN,description:"Include full AI reasoning"}}}},T={name:"getHLDealerThinking",description:`Get the Hyperliquid Dealer's AI reasoning from recent analysis cycles.
            Use when user asks about dealer thinking, reasoning, or analysis.`,parameters:{type:ye.OBJECT,properties:{cycleIndex:{type:ye.NUMBER,description:"Cycle index: 0=latest, 1=previous, 2=oldest (max 3 cycles)"}}}},N={name:"scheduleTask",description:"Schedule a task to execute at a specific time or when a market condition is met.",parameters:{type:ye.OBJECT,properties:{taskType:{type:ye.STRING,description:"Type: SWAP, TRANSFER, ALERT, or HL_ORDER"},inputToken:{type:ye.STRING,description:"For SWAP/TRANSFER: Input token"},outputToken:{type:ye.STRING,description:"For SWAP: Output token"},amount:{type:ye.NUMBER,description:"Amount to swap or transfer"},coin:{type:ye.STRING,description:"For HL_ORDER: Asset symbol"},isBuy:{type:ye.BOOLEAN,description:"For HL_ORDER: True for LONG"},size:{type:ye.NUMBER,description:"For HL_ORDER: Order size"},orderType:{type:ye.STRING,description:"For HL_ORDER: Order type"},price:{type:ye.NUMBER,description:"For HL_ORDER: Limit price"},leverage:{type:ye.NUMBER,description:"For HL_ORDER: Leverage"},stopLoss:{type:ye.NUMBER,description:"For HL_ORDER: Stop loss"},takeProfit:{type:ye.NUMBER,description:"For HL_ORDER: Take profit"},reduceOnly:{type:ye.BOOLEAN,description:"For HL_ORDER: Reduce only"},delayMinutes:{type:ye.NUMBER,description:"For time-based: Delay in minutes"},conditionIndicator:{type:ye.STRING,description:"For condition-based: Indicator name"},conditionSymbol:{type:ye.STRING,description:"For condition-based: Trading symbol"},conditionOperator:{type:ye.STRING,description:"For condition-based: Comparison operator"},conditionValue:{type:ye.NUMBER,description:"For condition-based: Threshold value"},conditionTimeframe:{type:ye.STRING,description:"For condition-based: Timeframe"}},required:["taskType"]}};return[{functionDeclarations:[e,n,r,i,N,s,o,a,l,c,d,h,m,g,v,x,b,w,T]}]}async sendMessage(e,n,r,i){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");const s=this.client,o=this.modelName,a=()=>this.getTools();return Bs.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{var m,g,v;const l=e.map(x=>({role:x.role==="model"?"model":"user",parts:[{text:x.content}]})),d=await s.chats.create({model:o,config:{systemInstruction:r,tools:i||a()},history:l}).sendMessage({message:n});let h="";if(d.candidates&&((g=(m=d.candidates[0])==null?void 0:m.content)!=null&&g.parts))for(const x of d.candidates[0].content.parts)x.text&&(h+=x.text);return{text:h,usageMetadata:d.usageMetadata?{promptTokenCount:d.usageMetadata.promptTokenCount||0,candidatesTokenCount:d.usageMetadata.candidatesTokenCount||0}:void 0,functionCalls:((v=d.functionCalls)==null?void 0:v.map(x=>({name:x.name,args:x.args})))||void 0}}})}async sendJsonAnalysis(e,n){if(!this.client)return console.warn("[GeminiProvider] Client not initialized"),null;const r=this.client,i=this.modelName;return Bs.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await r.chats.create({model:i,config:{systemInstruction:n,responseMimeType:"application/json"}}).sendMessage({message:e});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const d of o.candidates[0].content.parts)d.text&&(a+=d.text);return a||null}})}async sendBatchAnalysis(e,n,r){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.client,s=this.modelName,o=this.getBatchDealerSystemInstruction(),a=(d,h,m)=>this.normalizeDecisions(d,h,m),l=e.cycleSummary?`
[RECENT ACTIVITY CONTEXT]
${e.cycleSummary}
`:"",c=`
            [USER STRATEGY]
            ${n}
            ${l}
            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON Array of decisions.
        `;return Bs.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var x,b;if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const h=await i.chats.create({model:s,config:{systemInstruction:o,responseMimeType:"application/json"}}).sendMessage({message:c});if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");let m="";if(h.candidates&&((b=(x=h.candidates[0])==null?void 0:x.content)!=null&&b.parts))for(const w of h.candidates[0].content.parts)w.text&&(m+=w.text);if(!m)return console.warn("[GeminiProvider] Empty response from batch analysis"),{decisions:[]};const g=m.replace(/```json/g,"").replace(/```/g,"").trim();let v;try{v=JSON.parse(g)}catch(w){return console.error("[GeminiProvider] Failed to parse batch response:",w),{decisions:[]}}return a(v,h.usageMetadata,e)}})}normalizeDecisions(e,n,r){let i=[],s;Array.isArray(e)?i=e:typeof e=="object"&&(e.decisions?i=e.decisions:i=[e],e.cycleSummary&&typeof e.cycleSummary=="string"&&(s=e.cycleSummary.slice(0,350)));const a=i.map(d=>d.action==="LONG"?{...d,action:"BUY"}:d.action==="SHORT"?{...d,action:"SELL"}:d.action==="WAIT"?{...d,action:"HOLD"}:d).filter(d=>{const h=typeof d.coin=="string"&&d.coin.length>0,m=["BUY","SELL","HOLD","CLOSE"].includes(d.action);return h&&m}),l=new Map,c={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const d of a){const h=d.coin.toUpperCase(),m=l.get(h);if(!m)l.set(h,d);else{const g=c[m.action]||0,v=c[d.action]||0;(v>g||v===g&&(d.confidence||0)>(m.confidence||0))&&l.set(h,d)}}return{decisions:Array.from(l.values()),cycleSummary:s}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            You will receive:
            1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
            2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
            3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.
            4. [RECENT ACTIVITY CONTEXT]: Summary of your previous analysis cycles (if available).

            You must return valid JSON with this EXACT structure:
            {
                "decisions": [
                    {
                        "coin": "Symbol analyzed",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": number (0.0 to 1.0),
                        "reason": "Format: [ACTION] Position Status + Explanation. Max 600 chars.",
                        "suggestedLeverage": number (1-50, optional),
                        "sizeUSDC": number (optional),
                        "orderType": "limit" | "market",
                        "price": number (for limit orders, optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ],
                "cycleSummary": "Brief 1-2 sentence summary of this analysis cycle for context in the next cycle. Include: key market observations, actions taken, and any notable patterns. Max 300 chars."
            }

            CRITICAL RULES:
            1. ONLY output valid JSON with the structure above.
            2. Must return one decision object per coin provided in the decisions array.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
            5. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            6. CYCLE SUMMARY: ALWAYS include a cycleSummary field with a brief context for the next cycle.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD with no position: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY with no position: "LONG: No position. RSI divergence detected. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE with position: "CLOSE: In LONG at $95000, PnL: +$150. Take profit target reached."
        `}}class Jct{constructor(){this.providerType="openai",this.apiKey="",this.modelName="gpt-4o-mini",this.baseUrl="https://api.openai.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToOpenAI(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({type:"function",function:{name:i.name,description:i.description,parameters:this.convertGeminiParamsToOpenAI(i.parameters)}});return n}convertGeminiParamsToOpenAI(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertGeminiTypeToOpenAI(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertGeminiTypeToOpenAI(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");return Bs.enqueue({priority:"HIGH",source:"operator",provider:"openai",execute:async()=>{var g;const s=[{role:"system",content:r}];for(const v of e)s.push({role:v.role==="model"?"assistant":"user",content:v.content});s.push({role:"user",content:n});const o=this.convertToolsToOpenAI(i),a={model:this.modelName,messages:s};o.length>0&&(a.tools=o,a.tool_choice="auto");const l=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(a)});if(!l.ok){const v=await l.text();throw new Error(`OpenAI API error: ${l.status} ${v}`)}const c=await l.json(),d=(g=c.choices)==null?void 0:g[0],h=d==null?void 0:d.message,m=[];if(h!=null&&h.tool_calls)for(const v of h.tool_calls)v.type==="function"&&m.push({name:v.function.name,args:JSON.parse(v.function.arguments||"{}")});return{text:(h==null?void 0:h.content)||"",usageMetadata:c.usage?{promptTokenCount:c.usage.prompt_tokens||0,candidatesTokenCount:c.usage.completion_tokens||0}:void 0,functionCalls:m.length>0?m:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Bs.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"openai",execute:async()=>{var s,o,a;const r=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:n},{role:"user",content:e}],response_format:{type:"json_object"}})});if(!r.ok){const l=await r.text();throw new Error(`OpenAI API error: ${r.status} ${l}`)}return((a=(o=(s=(await r.json()).choices)==null?void 0:s[0])==null?void 0:o.message)==null?void 0:a.content)||null}}):(console.warn("[OpenAIProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with decisions array and cycleSummary.
        `;return Bs.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"openai",execute:async()=>{var d,h,m,g,v;const o=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:i},{role:"user",content:s}],response_format:{type:"json_object"}}),signal:r});if(!o.ok){const x=await o.text();throw new Error(`OpenAI API error: ${o.status} ${x}`)}const a=await o.json(),l=(m=(h=(d=a.choices)==null?void 0:d[0])==null?void 0:h.message)==null?void 0:m.content;if(!l)throw new Error("Empty response from OpenAI");if(((v=(g=a.choices)==null?void 0:g[0])==null?void 0:v.finish_reason)==="length")throw new Error("Response truncated by length limit");let c;try{c=JSON.parse(l)}catch(x){throw new Error(`Failed to parse JSON response: ${x.message}`)}return this.normalizeDecisions(c)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,d=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&d}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),d=o.get(c);if(!d)o.set(c,l);else{const h=a[d.action]||0,m=a[l.action]||0;(m>h||m===h&&(l.confidence||0)>(d.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            RESPONSE FORMAT:
            You MUST return a JSON object with a "decisions" array:
            {
                "decisions": [
                    {
                        "coin": "BTC",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": 0.0 to 1.0,
                        "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
                        "suggestedLeverage": 1-50,
                        "sizeUSDC": number,
                        "orderType": "limit" | "market",
                        "price": number (optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ]
            }

            CRITICAL RULES:
            1. Return valid JSON with "decisions" array.
            2. One decision per coin provided.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            5. Consider trading costs before recommending trades.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."
        `}}class Xct{constructor(){this.providerType="claude",this.apiKey="",this.modelName="claude-sonnet-4-20250514",this.baseUrl="https://api.anthropic.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToClaudeFormat(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({name:i.name,description:i.description,input_schema:this.convertParamsToJsonSchema(i.parameters)});return n}convertParamsToJsonSchema(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertTypeToJsonSchema(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertTypeToJsonSchema(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");return Bs.enqueue({priority:"HIGH",source:"operator",provider:"claude",execute:async()=>{const s=[];for(const m of e)s.push({role:m.role==="model"?"assistant":"user",content:m.content});s.push({role:"user",content:n});const o=this.convertToolsToClaudeFormat(i),a={model:this.modelName,max_tokens:4096,system:r,messages:s};o.length>0&&(a.tools=o);const l=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify(a)});if(!l.ok){const m=await l.text();throw new Error(`Claude API error: ${l.status} ${m}`)}const c=await l.json();let d="";const h=[];for(const m of c.content||[])m.type==="text"?d+=m.text:m.type==="tool_use"&&h.push({name:m.name,args:m.input||{}});return{text:d,usageMetadata:c.usage?{promptTokenCount:c.usage.input_tokens||0,candidatesTokenCount:c.usage.output_tokens||0}:void 0,functionCalls:h.length>0?h:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Bs.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"claude",execute:async()=>{const r=`${n}

IMPORTANT: You MUST respond with ONLY valid JSON. No explanations, no markdown code blocks, just the raw JSON object.`,i=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:r,messages:[{role:"user",content:e},{role:"assistant",content:"{"}]})});if(!i.ok){const a=await i.text();throw new Error(`Claude API error: ${i.status} ${a}`)}const s=await i.json();let o="";for(const a of s.content||[])a.type==="text"&&(o+=a.text);return"{"+o}}):(console.warn("[ClaudeProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with a "decisions" array.
        `;return Bs.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"claude",execute:async()=>{const o=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:i,messages:[{role:"user",content:s},{role:"assistant",content:'{"decisions":'}]}),signal:r});if(!o.ok){const h=await o.text();throw new Error(`Claude API error: ${o.status} ${h}`)}const a=await o.json();let l="";for(const h of a.content||[])h.type==="text"&&(l+=h.text);if(!l)throw new Error("Empty response from Claude");const c='{"decisions":'+l;let d;try{d=JSON.parse(c)}catch{try{const h=l.replace(/```json/g,"").replace(/```/g,"").trim();d={decisions:JSON.parse("["+h)}}catch(h){throw new Error(`Failed to parse JSON response: ${h.message}`)}}return this.normalizeDecisions(d)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,d=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&d}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),d=o.get(c);if(!d)o.set(c,l);else{const h=a[d.action]||0,m=a[l.action]||0;(m>h||m===h&&(l.confidence||0)>(d.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`You are Hyperliquid Dealer, an autonomous crypto trading engine.
Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

RESPONSE FORMAT:
You MUST respond with ONLY valid JSON. The response will be prefilled with '{"decisions":' so you should continue with the array.

Each decision in the array should have:
{
    "coin": "BTC",
    "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
    "confidence": 0.0 to 1.0,
    "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
    "suggestedLeverage": 1-50,
    "sizeUSDC": number,
    "orderType": "limit" | "market",
    "price": number (optional),
    "stopLoss": number (optional, ONLY for BUY/SELL actions),
    "takeProfit": number (optional, ONLY for BUY/SELL actions)
}

CRITICAL RULES:
1. Continue the JSON array after the prefill.
2. One decision per coin provided.
3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
5. Consider trading costs before recommending trades.

REASONING FORMAT (CRITICAL - MUST FOLLOW):
- Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
- POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
  - Check each coin's 'openPosition.hasPosition' field.
  - If hasPosition === false: MUST say "No position." at the START of your reason.
  - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
- ENTRY/SL/TP VALUES:
  - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
  - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
- CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
- Examples:
  - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
  - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
  - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."`}}class Qct{constructor(){this.providers=new Map,this.providers.set("gemini",new Yct),this.providers.set("openai",new Jct),this.providers.set("claude",new Xct),this.initializeFromConfig(),Fn.subscribe(()=>{this.initializeFromConfig()})}initializeFromConfig(){const e=Fn.getSnapshot();for(const[n,r]of Object.entries(e.credentials))r.isConfigured&&r.apiKey&&this.initializeProvider(n,r.apiKey);for(const[n,r]of Object.entries(e.componentConfigs)){const i=this.getProvider(r.providerType);i&&"setModel"in i&&i.setModel(r.modelId)}}getProvider(e){return this.providers.get(e)||null}initializeProvider(e,n){const r=this.providers.get(e);r&&(r.initialize(n),console.log(`[ProviderFactory] Initialized ${e} provider`))}getProviderForComponent(e){const r=Fn.getSnapshot().componentConfigs[e];if(!r)return console.warn(`[ProviderFactory] No config found for component: ${e}`),null;const i=this.providers.get(r.providerType);if(!i)return console.warn(`[ProviderFactory] Provider ${r.providerType} not found`),null;if(!i.isInitialized()){const s=Fn.getApiKey(r.providerType);if(s)i.initialize(s);else return console.warn(`[ProviderFactory] Provider ${r.providerType} not initialized (no API key)`),null}return"setModel"in i&&i.setModel(r.modelId),i}getModelForComponent(e){var r;return((r=Fn.getSnapshot().componentConfigs[e])==null?void 0:r.modelId)||""}isComponentReady(e){const n=this.getProviderForComponent(e);return n!==null&&n.isInitialized()}getAvailableProviders(){return Array.from(this.providers.keys())}getModelsForProvider(e){return wy[e]||[]}validateConfiguration(){const e=[],n=["operator","hyperliquidDealer","polymarketDealer"];for(const r of n)this.isComponentReady(r)||e.push(r);return{valid:e.length===0,missing:e}}}const yg=new Qct;function Zct(){const t={name:"searchLiquidityPools",description:`Search and filter liquidity pools on Meteora and Raydium (Solana DEVNET).
        
        Supports filtering by:
        - Token pair (e.g., SOL/USDC)
        - Protocol (meteora, raydium, or both)
        - Minimum TVL
        - Minimum volume (with timeframe)
        - Minimum APY
        - Sorting by tvl, volume, apy, or fee
        
        IMPORTANT: If user doesn't specify protocol, ASK which they prefer.`,parameters:{type:ye.OBJECT,properties:{tokenA:{type:ye.STRING,description:'First token symbol (e.g., "SOL")'},tokenB:{type:ye.STRING,description:'Second token symbol (e.g., "USDC")'},protocol:{type:ye.STRING,description:'Filter by protocol: "meteora", "raydium", or empty for both'},minTVL:{type:ye.NUMBER,description:"Minimum TVL in USD"},minVolume:{type:ye.NUMBER,description:"Minimum volume in USD"},volumeTimeframe:{type:ye.STRING,description:'Timeframe for volume: "5m", "1h", "24h", "7d"'},minAPY:{type:ye.NUMBER,description:"Minimum APY percentage"},sortBy:{type:ye.STRING,description:'Sort by: "tvl", "volume", "apy"'},limit:{type:ye.NUMBER,description:"Maximum results (default 10)"}}}},e={name:"getPoolDetails",description:"Get detailed information about a specific liquidity pool.",parameters:{type:ye.OBJECT,properties:{poolAddress:{type:ye.STRING,description:"Pool address or ID"}},required:["poolAddress"]}},n={name:"getTopLiquidityPools",description:`Get ranked list of top liquidity pools by volume, APY, or TVL.
        
        Examples:
        - "pools com maior volume em 5 minutos"  criteria: "volume", volumeTimeframe: "5m"
        - "melhor rentabilidade com TVL > $5000"  criteria: "apy", minTVL: 5000`,parameters:{type:ye.OBJECT,properties:{criteria:{type:ye.STRING,description:'Ranking criteria: "volume", "apy", or "tvl"'},volumeTimeframe:{type:ye.STRING,description:'Timeframe for volume criteria: "5m", "1h", "24h", "7d"'},minTVL:{type:ye.NUMBER,description:"Minimum TVL filter in USD"},protocol:{type:ye.STRING,description:'Filter by protocol: "meteora", "raydium", or empty for all'},limit:{type:ye.NUMBER,description:"Number of results (default 10)"}},required:["criteria"]}},r={name:"getTopVolatilityPools",description:`Get ranked list of liquidity pools by volatility (highest first).
        
        Use this when user asks for:
        - "pools com maior volatilidade"
        - "most volatile pools"
        - "quais pools esto mais volteis?"
        - "ranking de volatilidade"
        - "pools mais arriscadas"
        
        Returns pools sorted by daily volatility percentage, including price changes and confidence levels.`,parameters:{type:ye.OBJECT,properties:{limit:{type:ye.NUMBER,description:"Number of results (default 10)"},days:{type:ye.NUMBER,description:"Days for volatility calculation (default 7)"},minTVL:{type:ye.NUMBER,description:"Minimum TVL in USD (optional filter)"},protocol:{type:ye.STRING,description:'Filter by protocol: "meteora" or "raydium" (optional)'}}}},i={name:"compareLiquidityPools",description:"Compare multiple pools side by side or compare protocols for a token pair.",parameters:{type:ye.OBJECT,properties:{poolAddresses:{type:ye.ARRAY,items:{type:ye.STRING},description:"Array of pool addresses to compare"},tokenPair:{type:ye.STRING,description:'Token pair to compare across protocols (e.g., "SOL/USDC")'}}}},s={name:"getPoolHistory",description:"Get historical data for a pool (TVL, volume, APY over time).",parameters:{type:ye.OBJECT,properties:{poolAddress:{type:ye.STRING,description:"Pool address"},metric:{type:ye.STRING,description:'Metric: "tvl", "volume", or "apy"'},days:{type:ye.NUMBER,description:"Number of days of history (default 7)"}},required:["poolAddress","metric"]}},o={name:"getLPPositions",description:"Get all liquidity positions for the connected wallet across Meteora and Raydium.",parameters:{type:ye.OBJECT,properties:{protocol:{type:ye.STRING,description:'Optional: filter by "meteora" or "raydium"'}}}},a={name:"getLPPositionDetails",description:"Get detailed information about a specific LP position.",parameters:{type:ye.OBJECT,properties:{positionAddress:{type:ye.STRING,description:"Position address or NFT mint"}},required:["positionAddress"]}},l={name:"getUnclaimedLPRewards",description:"Get unclaimed fees and rewards from LP positions.",parameters:{type:ye.OBJECT,properties:{positionAddress:{type:ye.STRING,description:"Optional: specific position. If empty, shows all."}}}},c={name:"estimateLPPositionPnL",description:"Calculate profit/loss for an LP position including impermanent loss and fees earned.",parameters:{type:ye.OBJECT,properties:{positionAddress:{type:ye.STRING,description:"Position address"}},required:["positionAddress"]}},d={name:"addLiquidity",description:`Add liquidity to a pool on Meteora or Raydium.
        
        BEFORE EXECUTING:
        1. Confirm pool address and protocol
        2. Confirm token amounts
        3. For concentrated liquidity (DLMM/CLMM), confirm price range
        4. Show simulation result first
        5. Get user confirmation
        
        IMPORTANT: If protocol not specified, ASK the user first.`,parameters:{type:ye.OBJECT,properties:{poolAddress:{type:ye.STRING,description:"Pool address"},amountA:{type:ye.NUMBER,description:"Amount of first token"},amountB:{type:ye.NUMBER,description:"Amount of second token"},priceMin:{type:ye.NUMBER,description:"Minimum price for range (DLMM/CLMM)"},priceMax:{type:ye.NUMBER,description:"Maximum price for range (DLMM/CLMM)"},slippageBps:{type:ye.NUMBER,description:"Slippage tolerance in basis points (default 50)"}},required:["poolAddress","amountA","amountB"]}},h={name:"removeLiquidity",description:`Remove liquidity from an LP position.
        
        BEFORE EXECUTING:
        1. Show current position value
        2. Confirm removal percentage
        3. Get user confirmation`,parameters:{type:ye.OBJECT,properties:{positionAddress:{type:ye.STRING,description:"Position address"},percentage:{type:ye.NUMBER,description:"Percentage to remove (1-100)"},slippageBps:{type:ye.NUMBER,description:"Slippage tolerance in basis points"}},required:["positionAddress","percentage"]}},m={name:"claimLPFees",description:"Claim accumulated trading fees from an LP position.",parameters:{type:ye.OBJECT,properties:{positionAddress:{type:ye.STRING,description:"Position address"}},required:["positionAddress"]}},g={name:"claimLPRewards",description:"Claim farming/staking rewards from an LP position.",parameters:{type:ye.OBJECT,properties:{positionAddress:{type:ye.STRING,description:"Position address"}},required:["positionAddress"]}},v={name:"rebalanceLPPosition",description:"Rebalance an LP position to a new price range (closes and reopens with new range).",parameters:{type:ye.OBJECT,properties:{positionAddress:{type:ye.STRING,description:"Current position address"},newPriceMin:{type:ye.NUMBER,description:"New minimum price"},newPriceMax:{type:ye.NUMBER,description:"New maximum price"}},required:["positionAddress","newPriceMin","newPriceMax"]}},x={name:"simulateAddLiquidity",description:"Simulate adding liquidity without executing. Shows expected outcome, share of pool, and price impact.",parameters:{type:ye.OBJECT,properties:{poolAddress:{type:ye.STRING,description:"Pool address"},amountA:{type:ye.NUMBER,description:"Amount of first token"},amountB:{type:ye.NUMBER,description:"Amount of second token"},priceMin:{type:ye.NUMBER,description:"Min price for range (optional)"},priceMax:{type:ye.NUMBER,description:"Max price for range (optional)"}},required:["poolAddress","amountA","amountB"]}},b={name:"estimateImpermanentLoss",description:"Calculate potential impermanent loss for a pool based on price change scenarios.",parameters:{type:ye.OBJECT,properties:{poolAddress:{type:ye.STRING,description:"Pool address"},priceChangePercent:{type:ye.NUMBER,description:"Expected price change in percentage (e.g., 10 for +10%, -20 for -20%)"}},required:["poolAddress","priceChangePercent"]}},w={name:"calculateOptimalPriceRange",description:"Suggest an optimal price range for concentrated liquidity based on volatility and risk level.",parameters:{type:ye.OBJECT,properties:{poolAddress:{type:ye.STRING,description:"Pool address"},riskLevel:{type:ye.STRING,description:'Risk tolerance: "conservative", "moderate", or "aggressive"'}},required:["poolAddress","riskLevel"]}},T={name:"getLPSwapQuote",description:"Get a swap quote through liquidity pools.",parameters:{type:ye.OBJECT,properties:{inputToken:{type:ye.STRING,description:"Input token symbol or mint"},outputToken:{type:ye.STRING,description:"Output token symbol or mint"},amount:{type:ye.NUMBER,description:"Amount to swap"},slippageBps:{type:ye.NUMBER,description:"Slippage tolerance in basis points"}},required:["inputToken","outputToken","amount"]}},N={name:"createLiquidityPool",description:`Create a new liquidity pool on Meteora or Raydium.
        
        REQUIRES CONFIRMATION:
        1. Protocol (Meteora DLMM or Raydium CLMM/CPMM)
        2. Token pair
        3. Fee tier
        4. Initial price
        5. Initial liquidity amounts`,parameters:{type:ye.OBJECT,properties:{protocol:{type:ye.STRING,description:'Protocol: "meteora_dlmm", "raydium_clmm", or "raydium_cpmm"'},tokenA:{type:ye.STRING,description:"First token mint address"},tokenB:{type:ye.STRING,description:"Second token mint address"},feeBps:{type:ye.NUMBER,description:"Fee in basis points (e.g., 25 = 0.25%)"},initialPrice:{type:ye.NUMBER,description:"Initial price of tokenA in terms of tokenB"},initialLiquidityA:{type:ye.NUMBER,description:"Optional: initial amount of tokenA"},initialLiquidityB:{type:ye.NUMBER,description:"Optional: initial amount of tokenB"}},required:["protocol","tokenA","tokenB","feeBps","initialPrice"]}},O={name:"estimatePoolCreationCost",description:"Estimate the cost (in SOL) to create a new liquidity pool.",parameters:{type:ye.OBJECT,properties:{protocol:{type:ye.STRING,description:'Protocol: "meteora_dlmm", "raydium_clmm", or "raydium_cpmm"'}},required:["protocol"]}};return[t,e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b,w,T,N,O]}class eut{constructor(){this.client=null,this.modelName="gemini-2.5-flash",this.initFromConfig()}initFromConfig(){var i,s;const e=Fn.getApiKey("gemini"),n=(s=(i=window.process)==null?void 0:i.env)==null?void 0:s.GEMINI_API_KEY,r=e||n;r&&this.initialize(r)}initialize(e){this.client=new ime({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}setApiKey(e){Fn.setApiKey("gemini",e),this.initialize(e)}getApiKey(){return Fn.getApiKey("gemini")}clearApiKey(){Fn.clearApiKey("gemini"),this.client=null}isInitialized(){return this.client!==null}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance. If no token is specified, ask the user if they want to see all balances or a specific token.",parameters:{type:ye.OBJECT,properties:{token:{type:ye.STRING,description:"Optional: Symbol (e.g., SOL, USDC) or Mint Address of specific token to check. If not provided, show all balances."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet. If the token symbol is not known (not SOL/USDC/RAY), you MUST ask the user for the Mint Address.",parameters:{type:ye.OBJECT,properties:{inputToken:{type:ye.STRING,description:"Symbol (e.g., SOL) or Mint Address of token to sell"},outputToken:{type:ye.STRING,description:"Symbol (e.g., RAY) or Mint Address of token to buy"},amount:{type:ye.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:ye.OBJECT,properties:{amount:{type:ye.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"scheduleTask",description:`Schedule a task (swap, transfer, alert, or Hyperliquid order) to execute either at a specific time OR when a market condition is met.
      
      CRITICAL: You MUST provide ALL required parameters. If ANY information is missing, ask the user for it instead of calling this tool.
      
      For TIME-BASED tasks: provide 'delayMinutes'
      For CONDITION-BASED tasks: provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'.
      
      IMPORTANT: 'conditionTimeframe' is REQUIRED for condition-based tasks. If the user does not specify it (e.g., "1h", "4h", "1d"), you MUST ASK them for it. DO NOT DEFAULT TO 'D'.

      Examples:
      - Time-based: delayMinutes=5
      - Condition (SWAP): taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"
      - Condition (HL_ORDER): taskType="HL_ORDER", coin="BTC", isBuy=true, size=0.001, orderType="limit", price=90000, leverage=10, stopLoss=88000, takeProfit=99000, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"`,parameters:{type:ye.OBJECT,properties:{taskType:{type:ye.STRING,description:"Type of task: SWAP, TRANSFER, ALERT, or HL_ORDER (Hyperliquid order)"},inputToken:{type:ye.STRING,description:"For SWAP: Input token symbol or mint address. For TRANSFER: Token to transfer. Not used for ALERT or HL_ORDER."},outputToken:{type:ye.STRING,description:"For SWAP: Output token symbol or mint address. Not used for other task types."},amount:{type:ye.NUMBER,description:"Amount to swap or transfer. Not used for ALERT or HL_ORDER."},coin:{type:ye.STRING,description:'For HL_ORDER: Asset symbol (e.g., "BTC", "ETH", "SOL"). Required for HL_ORDER.'},isBuy:{type:ye.BOOLEAN,description:"For HL_ORDER: True for LONG/BUY, False for SHORT/SELL. Required for HL_ORDER."},size:{type:ye.NUMBER,description:"For HL_ORDER: Size of the order. Required for HL_ORDER."},orderType:{type:ye.STRING,description:'For HL_ORDER: Order type ("limit", "market", "ioc", "alo"). Ask user if not specified.'},price:{type:ye.NUMBER,description:"For HL_ORDER: Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:ye.NUMBER,description:"For HL_ORDER: Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:ye.NUMBER,description:"For HL_ORDER: Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:ye.NUMBER,description:"For HL_ORDER: Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:ye.BOOLEAN,description:"For HL_ORDER: True to only reduce existing position. Default false."},delayMinutes:{type:ye.NUMBER,description:"For time-based: Number of minutes to wait before executing. Leave empty for condition-based."},conditionIndicator:{type:ye.STRING,description:"For condition-based: Indicator name (rsi, macd, ema, sma, stoch, price). Required for condition-based tasks."},conditionSymbol:{type:ye.STRING,description:"For condition-based: Trading symbol (e.g., BTCUSDT, SOLUSDT). Required for condition-based tasks."},conditionOperator:{type:ye.STRING,description:"For condition-based: Comparison operator (<, >, <=, >=, ==). Required for condition-based tasks."},conditionValue:{type:ye.NUMBER,description:"For condition-based: Threshold value to compare against. Required for condition-based tasks."},conditionTimeframe:{type:ye.STRING,description:"For condition-based: Timeframe (1, 5, 15, 60, 240, D, W). REQUIRED. If missing, ask user."}},required:["taskType"]}},s={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet. You can ONLY send to the Owner, not to any other address.",parameters:{type:ye.OBJECT,properties:{tokenMint:{type:ye.STRING,description:"Mint address of the token to transfer"},amount:{type:ye.NUMBER,description:"Amount of tokens to transfer (in human-readable units, not raw)"}},required:["tokenMint","amount"]}},o={name:"getMarketPrice",description:"Get the current market price, exchange, and last update time for a given symbol.",parameters:{type:ye.OBJECT,properties:{symbol:{type:ye.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},a={name:"getOHLCV",description:"Get OHLCV (Open, High, Low, Close, Volume) candlestick data for a symbol.",parameters:{type:ye.OBJECT,properties:{symbol:{type:ye.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},timeframe:{type:ye.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol"]}},l={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:ye.OBJECT,properties:{symbol:{type:ye.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},indicator:{type:ye.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:ye.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol","indicator"]}},c={name:"getTradingViewSummary",description:"Get the TradingView buy/sell/neutral recommendation summary for a symbol.",parameters:{type:ye.OBJECT,properties:{symbol:{type:ye.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},d={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault (USDC) and positions.",parameters:{type:ye.OBJECT,properties:{}}},h={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:ye.OBJECT,properties:{}}},m={name:"getHLMarketData",description:"Get market data (price, orderbook) for a Hyperliquid asset.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL")'}},required:["coin"]}},g={name:"createHLOrder",description:`Place an order on Hyperliquid Testnet. 
      
      **USDC-BASED ORDERS:**
      If user says "comprar X USDC de COIN", provide usdcAmount=X and the system will automatically calculate the size.
      
      CRITICAL: You MUST ask the user for ALL required information before calling this tool:
      1. Coin (asset symbol)
      2. Direction (LONG/BUY or SHORT/SELL)
      3. Size (amount) OR usdcAmount (USDC to spend)
      4. Order Type (LIMIT or MARKET)
      5. Price (required for LIMIT orders)
      6. Leverage (1-50x, default 1x if not specified)
      7. Stop Loss (optional)
      8. Take Profit (optional)
      
      Minimum order value: $10 USD`,parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL", "HYPE")'},isBuy:{type:ye.BOOLEAN,description:"True for LONG/BUY, False for SHORT/SELL"},size:{type:ye.NUMBER,description:"Size of the order in token units. Leave empty if usdcAmount is provided."},usdcAmount:{type:ye.NUMBER,description:"Amount in USDC to spend (for buys) or receive (for sells). If provided, size will be auto-calculated."},orderType:{type:ye.STRING,description:'Order type: "limit", "market", "ioc", "alo". Ask user if not specified.'},price:{type:ye.NUMBER,description:"Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:ye.NUMBER,description:"Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:ye.NUMBER,description:"Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:ye.NUMBER,description:"Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:ye.BOOLEAN,description:"True to only reduce existing position. Default false."}},required:["coin","isBuy","orderType"]}},v={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:"Asset symbol"},orderId:{type:ye.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},x={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:"Asset symbol"},leverage:{type:ye.NUMBER,description:"New leverage (1-50)"},isCross:{type:ye.BOOLEAN,description:"True for cross margin, false for isolated"}},required:["coin","leverage","isCross"]}},b={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:"Asset symbol"},size:{type:ye.NUMBER,description:"Optional: partial close size. If not provided, closes entire position."},orderType:{type:ye.STRING,description:'Order type: "market" (immediate) or "limit"'},price:{type:ye.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},w={name:"withdrawFromHL",description:`Execute a USDC withdrawal from Hyperliquid Testnet Vault to the Owner's wallet.
      
      This tool EXECUTES the withdrawal immediately. Only call this when the user explicitly wants to withdraw/send/transfer USDC from Hyperliquid.
      
      Requirements:
      - Amount must be > $1 (to cover the $1 USDC withdrawal fee)
      - Vault must be unlocked
      - Owner wallet must be connected
      
      Network: Hyperliquid Testnet
      Fee: $1 USDC (deducted from withdrawal amount)
      Processing time: ~5 minutes`,parameters:{type:ye.OBJECT,properties:{amount:{type:ye.NUMBER,description:"Amount of USDC to withdraw (must be > $1 to cover fee)"}},required:["amount"]}},T={name:"getDealerTradeHistory",description:`Query the Hyperliquid Dealer's trade operation history and AI reasoning.
      
      Use this tool when users ask about:
      - Why a specific position was opened/closed
      - The reasoning behind Dealer trades
      - Details about past or current operations
      - What the Dealer did or is doing
      
      Returns:
      - Operation records with coin, action, price, size, PnL
      - Full AI reasoning and confidence for each trade
      - Recent activity logs`,parameters:{type:ye.OBJECT,properties:{coin:{type:ye.STRING,description:'Optional: Filter by specific coin (e.g., "BTC", "ETH"). If not provided, returns all operations.'},limit:{type:ye.NUMBER,description:"Optional: Maximum number of records to return (default 10, max 50)"},includeReasoning:{type:ye.BOOLEAN,description:"Optional: Whether to include full AI reasoning (default true). Set to false for basic info only."}}}},N={name:"getHLDealerThinking",description:`Get the Hyperliquid Dealer's AI reasoning and decisions from recent analysis cycles.
      
      Returns the complete AI thinking process including:
      - Market analysis summary from the AI
      - Individual asset decisions with confidence levels
      - Assets analyzed in the cycle
      
      Use this when user asks about Hyperliquid Dealer:
      - "O que o dealer pensou?" / "What did the dealer think?"
      - "Qual foi o raciocnio?" / "What was the reasoning?"
      - "Por que essa deciso?" / "Why this decision?"
      - "Mostra a anlise" / "Show the analysis"
      
      Can access up to 3 previous cycles (0=latest, 1=previous, 2=oldest).`,parameters:{type:ye.OBJECT,properties:{cycleIndex:{type:ye.NUMBER,description:"Cycle index: 0=latest (default), 1=previous, 2=oldest. Max 3 cycles available."}}}},O=Zct();return[{functionDeclarations:[e,n,r,s,i,o,a,l,c,d,h,m,g,v,x,b,w,T,N,...O]}]}async sendMessage(e,n,r){if(!this.client)throw new Error("AI Agent not initialized. Please set API Key.");const i=this.client,s=this.modelName,o=()=>this.getTools(),a=l=>{l.usageMetadata&&Ms.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:l.usageMetadata.promptTokenCount||0,outputTokens:l.usageMetadata.candidatesTokenCount||0,model:s})};return Bs.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{const l=e.map(h=>({role:h.role==="model"?"model":"user",parts:[{text:h.content}]})),d=await i.chats.create({model:s,config:{systemInstruction:r,tools:o()},history:l}).sendMessage({message:n});return a(d),d}})}async getDealerAnalysis(e,n){if(!this.client)throw new Error("AI Agent not initialized.");const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze provided market data and output a TRADING DECISION based strictly on the user's Strategy and Portfolio Constraints.

      You will receive:
      1. Market Data (Prices, Indicators, Orderbook)
      2. Portfolio Context (Current Balance, Open Positions, PnL, Risk Limits)
      3. TRADING COSTS (Maker/Taker Fees, Funding Rate, Breakeven Prices)

      You must return valid JSON with this schema:
      {
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Detailed explanation citing technicals, fees, and costs. Include Entry Price, Stop Loss, and Take Profit values if applicable. (Max 600 characters)",
        "coin": "Symbol analyzed",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output the JSON decision. No markdown blocks, no fluff.
      2. If data is insufficient or unclear, action="HOLD".
      3. CHECK PORTFOLIO LIMITS: Do not buy if 'maxPositions' is reached.
      4. CLOSE POSITIONS: If an open position hits target or stop loss criteria in your analysis, output "CLOSE".
      5. BANKROLL: Using 'manualBankroll' or 'availableBalance' from context, suggest a safe 'sizeUSDC' for new trades.
      7. USER FEEDBACK (CRITICAL - LEARN FROM THIS):
      ${e.userFeedback||"No recent feedback."}

      8. REASONING FORMAT (CRITICAL - MUST FOLLOW):
      7. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      TRADING COSTS AWARENESS (CRITICAL FOR PROFIT CALCULATION):
      8. FEE CONSIDERATION: Context includes 'tradingCosts.makerFee' and 'tradingCosts.takerFee' (as decimals, e.g., 0.0005 = 0.05%).
         - Total round-trip cost = (takerFee * 2) for market orders or (makerFee * 2) for limit orders.
         - Only enter trades where expected price movement > total round-trip cost.
      9. FUNDING RATE: Context includes 'tradingCosts.fundingRate' (8h rate) and 'estimatedDailyHoldingCost'.
         - Positive funding: Longs pay shorts.
         - Negative funding: Shorts pay longs.
         - Factor funding into holding decisions for swing trades.
      10. BREAKEVEN PRICES: If 'portfolio.positionBreakevens' exists, it contains:
         - breakevenPrice: Price needed to cover entry/exit fees
         - minProfitPrice: Price needed for 1% profit after costs
         - Use these to decide when to CLOSE positions profitably.
      11. PROFIT THRESHOLD: Only suggest trades where expected move > 2x trading costs (to be safe).
    `;return Bs.enqueue({priority:"HIGH",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var d,h;const o=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),a=`
            [USER STRATEGY]
            ${n}

            [MARKET CONTEXT]
            ${JSON.stringify(e)}
        `,l=await o.sendMessage({message:a});let c="";if(l.candidates&&((h=(d=l.candidates[0])==null?void 0:d.content)!=null&&h.parts))for(const m of l.candidates[0].content.parts)m.text&&(c+=m.text);try{const m=c.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(m)}catch{return console.error("Failed to parse Dealer JSON response:",c),{action:"HOLD",reason:"Failed to parse AI response"}}}})}async getBatchDealerAnalysis(e,n){var o,a;if(!this.client){console.warn("[AIService] Client not initialized. Attempting lazy init...");const l=Fn.getApiKey("gemini"),c=(a=(o=window.process)==null?void 0:o.env)==null?void 0:a.GEMINI_API_KEY,d=l||c;if(d)this.initialize(d),console.log("[AIService] Lazy init successful.");else throw new Error("AI Agent not initialized and no API Key found. Please configure your API key in Settings.")}const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

      You will receive:
      1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
      2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
      3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.

      DATA STRUCTURE NOTES:
      - 'portfolio.userFees' contains global makerFee and takerFee (applies to all coins).
      - Each coin's 'tradingCosts' contains only fundingRate and dailyHoldingCost (unique per coin).
      - The keys in each coin's 'indicators' object tell you which indicators are active (e.g., {rsi: ..., macd: ...}).
      - 'ts' is a Unix timestamp (seconds since epoch).

      INDICATOR WEIGHTING SYSTEM:
      - Each indicator includes a 'weight' field (0.5 to 2.0, default 1.0).
      - Each indicator includes a 'category' field (trend, momentum, volume, volatility).
      - weight > 1.0: User considers this indicator MORE important (prioritize its signals)
      - weight < 1.0: User considers this indicator LESS important (lower priority)
      - weight = 1.0: Standard importance
      - When indicators conflict, prefer higher-weighted signals.
      - Give each category's signals equal base weight, then apply individual indicator weights.

      INDICATOR CATEGORIES (do NOT stack similar signals from same category):
      - TREND (EMA, SMA, ADX, Ichimoku): Direction of market
      - MOMENTUM (RSI, MACD, Stochastic): Timing of entry/exit
      - VOLUME (OBV, VWAP): Confirmation of moves
      - VOLATILITY (ATR, Bollinger): Risk context

      AUTONOMOUS MODE (when 'autonomousMode' is true in context):
      - The context includes 'availablePresets' with preset configurations.
      - You MUST analyze market conditions first and choose the best preset.
      - Add a 'chosenPreset' field to your JSON response (outside the decisions array) with one of:
        - 'balanced': For uncertain/mixed signals (default fallback)
        - 'scalp': For high volatility with quick reversals
        - 'trendFollowing': For strong directional trends (ADX > 25)
        - 'meanReversion': For ranging/sideways markets
        - 'volumeConfirm': For breakout scenarios or unusual volume
      - Add a 'presetReason' field explaining why you chose that preset.
      - Focus your analysis on the indicators most relevant to your chosen preset.

      RESPONSE FORMAT:
      - For NORMAL mode: Return JSON array of decisions directly.
      - For AUTONOMOUS mode: Return { "chosenPreset": "...", "presetReason": "...", "decisions": [...] }

      You must return valid JSON with this EXACT schema for each decision:
      {
        "coin": "Symbol analyzed",
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Format: [ACTION] Position Status + Explanation. POSITION STATUS RULES: If NO open position, say 'No position.' If HAVE open position, say 'In LONG/SHORT at $X, PnL: $Y'. ENTRY/SL/TP RULES: Only include Entry/SL/TP values for BUY or SELL actions. For HOLD/CLOSE, do NOT include Entry/SL/TP. Examples: HOLD='WAIT: No position. RSI neutral.' BUY='LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800' CLOSE='CLOSE: In LONG at $95000, PnL: +$150. TP reached.'. Max 600 chars.",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output valid JSON.
      2. Must return one decision object per coin provided in the input.
      3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if 'portfolio.maxPositions' is reached.
      4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
      5. PROFITABILITY: Consider 'portfolio.userFees' and coin's 'tradingCosts'. Only trade if potential > costs.
      6. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      7. RISK PROTECTION (CRITICAL - MANDATORY JSON FIELDS):
         - Check 'portfolio.settings.stopLossEnabled' and 'portfolio.settings.takeProfitEnabled'.
         - If 'stopLossEnabled' is true AND 'stopLossPercent' is null: You MUST include the numeric field "stopLoss" in your JSON response (not just in reason text). Example: "stopLoss": 93100.50
         - If 'takeProfitEnabled' is true AND 'takeProfitPercent' is null: You MUST include the numeric field "takeProfit" in your JSON response (not just in reason text). Example: "takeProfit": 98800.00
         - These are SEPARATE JSON FIELDS, not just mentions in the "reason" string.
         - For BUY/LONG: stopLoss should be BELOW entry price, takeProfit should be ABOVE entry price.
         - For SELL/SHORT: stopLoss should be ABOVE entry price, takeProfit should be BELOW entry price.
      
      8. DIVERGENCE SIGNALS (HIGH PRIORITY): Each coin includes a 'divergences' array with pre-calculated signals:
         - BULLISH: Price lower low + RSI/MACD higher low  potential reversal UP
         - BEARISH: Price higher high + RSI/MACD lower high  potential reversal DOWN
         - HIDDEN_BULLISH: Trend continuation signal UP
         - HIDDEN_BEARISH: Trend continuation signal DOWN
         - Strength: WEAK, MODERATE, STRONG (prioritize MODERATE and STRONG signals)
         - Use these divergences with HIGH PRIORITY - they are algorithmically detected and reliable.
       8. REASONING FORMAT (CRITICAL - MUST FOLLOW):
          - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
          - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
            - Check each coin's 'openPosition.hasPosition' field.
            - If hasPosition === false: MUST say "No position." at the START of your reason.
            - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
          - ENTRY/SL/TP VALUES:
            - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
            - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
          - CRITICAL: Use ONLY the openPosition data from each coin's context. NEVER invent or guess PnL values.
          - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
          - MANDATORY: If divergences are present, mention them in your reasoning.
          - RECOMMENDED: Mention indicator weights if they influenced your decision.
         - RECOMMENDED: If 'macro' data is present, mention macro alignment in your reasoning.

      USER FEEDBACK (CRITICAL - LEARN FROM THIS):
      ${e.userFeedback||"No recent feedback."}

      MACRO TIMEFRAME CONFIRMATION (CRITICAL FOR ACCURACY):
      - Each coin MAY include a 'macro' object with indicator values from a HIGHER timeframe.
      - 'macro.timeframe' tells you the macro timeframe (e.g., '240' = 4H, 'D' = Daily, 'W' = Weekly).
      - 'macro.indicators' contains current values only (no history).
      
      MACRO ALIGNMENT RULES:
      - If main timeframe shows OVERBOUGHT but macro shows OVERSOLD: Consider HOLD or reduce confidence by 20-30%.
      - If main timeframe shows OVERSOLD but macro shows OVERBOUGHT: Consider HOLD or reduce confidence by 20-30%.
      - If main and macro ALIGN (both overbought or both oversold): Full confidence trade.
      - If conflicting signals: MENTION THE CONFLICT in your reasoning (e.g., "Main RSI=75 but Macro RSI=30 - conflicting").
      
      EXAMPLES:
      - Main RSI=25 (oversold) + Macro RSI=35 (neutral-oversold) = ALIGNED = Full confidence BUY.
      - Main RSI=75 (overbought) + Macro RSI=30 (oversold) = CONFLICTING = HOLD or reduce size.
      - Use macro as a FILTER to avoid trading against the higher timeframe trend.
    `;return Bs.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var N,O,j;const l=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),c=`
          [USER STRATEGY]
          ${n}

          [BATCH MARKET DATA]
          ${JSON.stringify(e)}

          Analyze all assets in the batch. Return a JSON Array of decisions.
        `,d=await l.sendMessage({message:c});d.usageMetadata&&Ms.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:d.usageMetadata.promptTokenCount||0,outputTokens:d.usageMetadata.candidatesTokenCount||0,model:i,metadata:{coinsAnalyzed:((N=e==null?void 0:e.coins)==null?void 0:N.length)||0}});let h="";if(d.candidates&&((j=(O=d.candidates[0])==null?void 0:O.content)!=null&&j.parts))for(const _ of d.candidates[0].content.parts)_.text&&(h+=_.text);if(!h)return console.warn("[AIService] Empty response from Batch Dealer Analysis"),[];const m=h.replace(/```json/g,"").replace(/```/g,"").trim();let g;try{g=JSON.parse(m)}catch(_){return console.warn("[AIService] JSON Parse Error:",_),[]}let v=[];if(Array.isArray(g))v=g;else if(typeof g=="object")v=[g];else return[];const b=v.map(_=>_.action==="LONG"?{..._,action:"BUY"}:_.action==="SHORT"?{..._,action:"SELL"}:_.action==="WAIT"?{..._,action:"HOLD"}:_).filter(_=>{const F=typeof _.coin=="string"&&_.coin.length>0,z=["BUY","SELL","HOLD","CLOSE"].includes(_.action);return!(!F||!z)}),w={CLOSE:3,BUY:2,SELL:2,HOLD:1},T=new Map;for(const _ of b){const F=_.coin.toUpperCase(),z=T.get(F);if(!z)T.set(F,_);else{const D=w[z.action]||0,$=w[_.action]||0;if($>D)T.set(F,_);else if($===D){const G=z.confidence||0;(_.confidence||0)>G&&T.set(F,_)}}}return Array.from(T.values())}})}async analyzePolymarket(e){if(!this.client)return console.warn("[AIService] Client not initialized for Polymarket analysis"),null;const n=this.client,r=this.modelName,i=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      You will receive market data including:
      - Market questions and current YES/NO prices
      - Time to resolution
      - Volume and liquidity data
      - Current portfolio positions

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution (avoid markets expiring soon without clear edge)
      3. Factor in liquidity - avoid illiquid markets
      4. Look for mispriced probabilities based on news/fundamentals
      5. Diversify across different categories when possible
    `;return Bs.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await n.chats.create({model:r,config:{systemInstruction:i,responseMimeType:"application/json"}}).sendMessage({message:e});o.usageMetadata&&Ms.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:r});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const d of o.candidates[0].content.parts)d.text&&(a+=d.text);return a||null}})}getProviderFactory(){return yg}getConfigStore(){return Fn}getAvailableProviders(){return["gemini","openai","claude"]}getModelsForProvider(e){return wy[e]||[]}async sendOperatorMessage(e,n,r){var s;const i=yg.getProviderForComponent("operator");if(!i)return console.log("[AIService] Falling back to legacy Gemini for operator"),this.sendMessage(e,n,r);try{const o=await i.sendMessage(e,n,r,((s=i.getTools)==null?void 0:s.call(i))||this.getTools());if(o.usageMetadata){const a=Fn.getComponentConfig("operator");Ms.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:a.modelId})}return{text:o.text,functionCalls:o.functionCalls,usageMetadata:o.usageMetadata,candidates:[{content:{parts:[{text:o.text}]}}]}}catch(o){return console.error("[AIService] Operator provider error:",o),this.sendMessage(e,n,r)}}async getDealerBatchAnalysis(e,n,r){var s;const i=yg.getProviderForComponent("hyperliquidDealer");if(!i)return console.log("[AIService] Falling back to legacy batch analysis"),{decisions:await this.getBatchDealerAnalysis(e,n)};try{const o=await i.sendBatchAnalysis(e,n,r),a=Fn.getComponentConfig("hyperliquidDealer");return Ms.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(o).length/4),model:a.modelId,metadata:{coinsAnalyzed:((s=e==null?void 0:e.coins)==null?void 0:s.length)||0}}),o}catch(o){if((o==null?void 0:o.name)==="AbortError")throw console.log("[AIService] Dealer analysis aborted"),o;return console.error("[AIService] Dealer provider error:",o),{decisions:await this.getBatchDealerAnalysis(e,n)}}}async getDealerAnalysisViaOracle(e,n,r){const i=Fn.getComponentConfig("hyperliquidDealer"),s=Fn.getComponentApiKey("hyperliquidDealer");if(!s)throw new Error("No AI API key configured for Hyperliquid Dealer");const o={marketContext:e,aiConfig:{provider:i.providerType,apiKey:s,modelId:i.modelId},portfolioContext:n};try{const a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const c=await a.text();throw new Error(`Strategy Oracle error: ${c}`)}const l=await a.json();return Ms.addRecord({source:"DEALER",operation:"ORACLE_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(l).length/4),model:i.modelId,metadata:{via:"strategy-oracle"}}),{decisions:l.decisions||[],timestamp:l.timestamp||new Date().toISOString()}}catch(a){throw console.error("[AIService] Strategy Oracle call failed:",a),a}}async getPolymarketAnalysis(e){const n=yg.getProviderForComponent("polymarketDealer");if(!n)return console.log("[AIService] Falling back to legacy Polymarket analysis"),this.analyzePolymarket(e);const r=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution
      3. Factor in liquidity
      4. Look for mispriced probabilities
      5. Diversify when possible
    `;try{const i=await n.sendJsonAnalysis(e,r);if(i){const s=Fn.getComponentConfig("polymarketDealer");Ms.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:Math.round(e.length/4),outputTokens:Math.round(i.length/4),model:s.modelId})}return i}catch(i){return console.error("[AIService] Polymarket provider error:",i),this.analyzePolymarket(e)}}isComponentReady(e){return yg.isComponentReady(e)}getComponentProviderInfo(e){const n=Fn.getComponentConfig(e),i=wy[n.providerType].find(s=>s.id===n.modelId);return{provider:n.providerType,model:n.modelId,modelName:(i==null?void 0:i.name)||n.modelId,isReady:yg.isComponentReady(e)}}async generateCycleSummary(e,n){if(!this.client)return console.warn("[AIService] Client not initialized for cycle summary"),"";if(e.length===0)return"";const r=this.client,i=this.modelName,o=`You are a trading analyst summarizing recent trading activity.
Generate a CONCISE contextual summary for an AI trader about to analyze ${n==="hyperliquid"?"crypto perpetual futures trading on Hyperliquid":"prediction market trading on Polymarket"}.

The summary should help the AI understand:
1. Recent market sentiment and patterns observed
2. Actions taken in previous cycles (buys, sells, holds)
3. Key assets/markets being monitored
4. Any notable patterns or trends

CRITICAL RULES:
- Output ONLY plain text, max 300 characters
- Be extremely concise - every word must add value
- Focus on actionable context for the next analysis
- No JSON, no markdown, no formatting`,a=e.map(c=>({time:new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),actions:c.decisions.map(d=>`${d.asset}:${d.action}(${Math.round(d.confidence*100)}%)`).join(", "),assets:c.assetsAnalyzed.length})),l=`Recent ${n} trading cycles (newest first):
${a.map((c,d)=>`Cycle ${e.length-d}: ${c.time} - Analyzed ${c.assets} assets. Actions: ${c.actions||"None"}`).join(`
`)}

Generate a brief contextual summary for the next analysis cycle.`;return Bs.enqueue({priority:"LOW",source:n==="hyperliquid"?"hyperliquidDealer":"polymarketDealer",provider:"gemini",execute:async()=>{var c,d;try{const m=await r.chats.create({model:i,config:{systemInstruction:o}}).sendMessage({message:l});m.usageMetadata&&Ms.addRecord({source:n==="hyperliquid"?"DEALER":"POLYMARKET_DEALER",operation:"CYCLE_SUMMARY",inputTokens:m.usageMetadata.promptTokenCount||0,outputTokens:m.usageMetadata.candidatesTokenCount||0,model:i});let g="";if(m.candidates&&((d=(c=m.candidates[0])==null?void 0:c.content)!=null&&d.parts))for(const v of m.candidates[0].content.parts)v.text&&(g+=v.text);return g.trim().slice(0,350)}catch(h){return console.error("[AIService] Cycle summary generation failed:",h),""}}})}}const Pm=new eut;class tut{constructor(){this.worker=null,this.callbacks=new Map,this.fallbackTimers=new Map,this.isSupported=typeof Worker<"u",this.isSupported?this.initWorker():console.warn("[BackgroundTimer]  Web Workers not supported, falling back to setInterval (will be throttled in background)")}initWorker(){try{const e=`
                const timers = new Map();
                
                self.onmessage = (event) => {
                    const { type, timerId, intervalMs } = event.data;
                    
                    if (type === 'START' && timerId && intervalMs) {
                        // Clear existing timer if any
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        
                        // Start new timer
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        
                        // Log start (visible in browser console under Worker context)
                        console.log('[TimerWorker] Started timer "' + timerId + '" with ' + intervalMs + 'ms interval');
                    }
                    
                    if (type === 'STOP' && timerId) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                            timers.delete(timerId);
                            console.log('[TimerWorker] Stopped timer "' + timerId + '"');
                        }
                    }
                    
                    if (type === 'UPDATE_INTERVAL' && timerId && intervalMs) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        console.log('[TimerWorker] Updated timer "' + timerId + '" to ' + intervalMs + 'ms');
                    }
                };
            `,n=new Blob([e],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(n)),this.worker.onmessage=r=>{const{type:i,timerId:s,timestamp:o}=r.data;if(i==="TICK"&&this.callbacks.has(s))try{this.callbacks.get(s)(o)}catch(a){console.error(`[BackgroundTimer] Error in callback for "${s}":`,a)}},this.worker.onerror=r=>{console.error("[BackgroundTimer] Worker error:",r)},console.log("[BackgroundTimer]  Web Worker initialized - timers will run in background")}catch(e){console.error("[BackgroundTimer] Failed to initialize Worker:",e),this.isSupported=!1}}start(e,n,r){if(this.callbacks.set(e,r),this.worker)this.worker.postMessage({type:"START",timerId:e,intervalMs:n});else{console.warn(`[BackgroundTimer] Using fallback for "${e}" - may be throttled in background`);const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}stop(e){this.callbacks.delete(e),this.worker&&this.worker.postMessage({type:"STOP",timerId:e}),this.fallbackTimers.has(e)&&(clearInterval(this.fallbackTimers.get(e)),this.fallbackTimers.delete(e))}updateInterval(e,n){if(this.worker&&this.callbacks.has(e))this.worker.postMessage({type:"UPDATE_INTERVAL",timerId:e,intervalMs:n});else if(this.fallbackTimers.has(e)){const r=this.callbacks.get(e);if(r){clearInterval(this.fallbackTimers.get(e));const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}}isRunning(e){return this.callbacks.has(e)}getActiveTimers(){return Array.from(this.callbacks.keys())}destroy(){for(const e of this.callbacks.keys())this.stop(e);this.worker&&(this.worker.terminate(),this.worker=null),this.callbacks.clear(),this.fallbackTimers.clear()}}const Xa=new tut;class nut{constructor(){this.audioContext=null,this.oscillator=null,this.gainNode=null,this.isActive=!1,this.checkInterval=null,this.visibilityHandler=null,this.userInteractionHandler=null}start(){var e;if(this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running")return console.log("[KeepAlive] Already active and running"),!0;try{return this.audioContext&&this.audioContext.state!=="closed"&&this.cleanupAudio(),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.oscillator=this.audioContext.createOscillator(),this.oscillator.type="sine",this.oscillator.frequency.setValueAtTime(1,this.audioContext.currentTime),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.setValueAtTime(.001,this.audioContext.currentTime),this.oscillator.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.oscillator.start(),this.isActive=!0,console.log("[KeepAlive]  Silent audio started - tab will stay active in background"),this.setupMaintenance(),!0}catch(n){return console.error("[KeepAlive]  Failed to start silent audio:",n),!1}}setupMaintenance(){this.cleanupMaintenance(),this.visibilityHandler=()=>{document.visibilityState==="visible"&&this.isActive&&(console.log("[KeepAlive]  Tab became visible, checking audio..."),this.ensureRunning())},document.addEventListener("visibilitychange",this.visibilityHandler),this.userInteractionHandler=()=>{var e;this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="suspended"&&(console.log("[KeepAlive]  User interaction detected, resuming audio..."),this.resume())},["click","keydown","touchstart","mousedown"].forEach(e=>{document.addEventListener(e,this.userInteractionHandler,{passive:!0})}),this.checkInterval=setInterval(()=>{this.isActive&&this.ensureRunning()},5e3)}async ensureRunning(){var n;if(!this.isActive)return;const e=(n=this.audioContext)==null?void 0:n.state;e==="suspended"?(console.log("[KeepAlive]  AudioContext suspended, attempting resume..."),await this.resume()):(e==="closed"||!this.audioContext)&&(console.log("[KeepAlive]  AudioContext closed, restarting..."),this.isActive=!1,this.start())}cleanupMaintenance(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.visibilityHandler&&(document.removeEventListener("visibilitychange",this.visibilityHandler),this.visibilityHandler=null),this.userInteractionHandler&&(["click","keydown","touchstart","mousedown"].forEach(e=>{document.removeEventListener(e,this.userInteractionHandler)}),this.userInteractionHandler=null)}cleanupAudio(){try{this.oscillator&&(this.oscillator.stop(),this.oscillator.disconnect(),this.oscillator=null),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close(),this.audioContext=null}catch{}}stop(){if(this.isActive)try{this.cleanupMaintenance(),this.cleanupAudio(),this.isActive=!1,console.log("[KeepAlive]  Silent audio stopped")}catch(e){console.error("[KeepAlive] Error stopping:",e)}}async resume(){if(!this.audioContext)return this.start();if(this.audioContext.state==="suspended")try{return await this.audioContext.resume(),console.log("[KeepAlive]  AudioContext resumed"),!0}catch(e){return console.error("[KeepAlive] Failed to resume:",e),this.isActive=!1,this.start()}return!0}getIsActive(){var e;return this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running"}getState(){var e;return((e=this.audioContext)==null?void 0:e.state)||"not-initialized"}}const Jk=new nut,_O="user_supabase_config",MZ=["encrypted_keys","execution_sessions"];class rut{constructor(){this.client=null,this.config=null,this.listeners=new Set,this.loadStoredConfig()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){const e=this.isConnected();this.listeners.forEach(n=>n(e))}isConnected(){return this.client!==null&&this.config!==null}getConfig(){return this.config}getClient(){return this.client}async loadStoredConfig(){try{const e=await Ae.getItem(Ae.getUserKey(_O));if(!e)return console.log("[UserDataSupabase] No stored configuration found"),!1;const n=JSON.parse(e),r=await this.connect(n.url,n.anonKey);return r.success?(console.log("[UserDataSupabase] Reconnected using stored config"),!0):(console.warn("[UserDataSupabase] Failed to reconnect:",r.error),!1)}catch(e){return console.error("[UserDataSupabase] Failed to load stored config:",e),!1}}validateUrl(e){return e?e.startsWith("https://")?e.includes(".supabase.co")?{valid:!0}:{valid:!1,error:"URL must be a Supabase project URL (*.supabase.co)"}:{valid:!1,error:"URL must start with https://"}:{valid:!1,error:"URL is required"}}validateAnonKey(e){return e?e.length<100?{valid:!1,error:"Anon key appears invalid (too short)"}:e.startsWith("eyJ")?{valid:!0}:{valid:!1,error:"Anon key should be a JWT token"}:{valid:!1,error:"Anon key is required"}}async connect(e,n){var s;const r=this.validateUrl(e);if(!r.valid)return{success:!1,projectId:null,error:r.error};const i=this.validateAnonKey(n);if(!i.valid)return{success:!1,projectId:null,error:i.error};try{const o=Ste(e,n,{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}}),{error:a}=await o.auth.getSession();if(a&&a.message!=="Auth session missing!")return{success:!1,projectId:null,error:`Connection failed: ${a.message}`};const l=((s=e.split("//")[1])==null?void 0:s.split(".")[0])||null;return this.config={url:e,anonKey:n,projectId:l||"",connectedAt:new Date().toISOString()},this.client=o,await this.saveConfig(),console.log("[UserDataSupabase] Connected to project:",l),this.notify(),{success:!0,projectId:l}}catch(o){return{success:!1,projectId:null,error:o instanceof Error?o.message:"Unknown error"}}}async validateSchema(){if(!this.client)return{valid:!1,missingTables:MZ,error:"Not connected"};const e=[];for(const n of MZ)try{const{error:r}=await this.client.from(n).select("id").limit(1);r&&(r.code==="42P01"||r.message.includes("does not exist"))&&e.push(n)}catch{e.push(n)}return{valid:e.length===0,missingTables:e}}async disconnect(){this.client=null,this.config=null,await Ae.removeItem(Ae.getUserKey(_O)),console.log("[UserDataSupabase] Disconnected and cleared config"),this.notify()}getSetupSQL(){return`-- AutonomousVault Security Tier Schema
-- Run this in your Supabase SQL Editor

-- Table for storing encrypted keys (Tier B & C)
CREATE TABLE IF NOT EXISTS encrypted_keys (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    key_name TEXT NOT NULL,
    encrypted_blob TEXT NOT NULL,
    encryption_salt TEXT NOT NULL,
    encrypted_password TEXT, -- Only for Tier C (persistent)
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    UNIQUE(user_id, key_name)
);

-- Table for execution sessions (Tier B)
CREATE TABLE IF NOT EXISTS execution_sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    encrypted_session_token TEXT NOT NULL,
    expires_at TIMESTAMPTZ NOT NULL,
    revoked BOOLEAN DEFAULT false,
    created_at TIMESTAMPTZ DEFAULT now()
);

-- Row Level Security (RLS) policies
ALTER TABLE encrypted_keys ENABLE ROW LEVEL SECURITY;
ALTER TABLE execution_sessions ENABLE ROW LEVEL SECURITY;

-- Users can only access their own data
CREATE POLICY "Users can manage own keys" ON encrypted_keys
    FOR ALL USING (auth.uid() = user_id);

CREATE POLICY "Users can manage own sessions" ON execution_sessions
    FOR ALL USING (auth.uid() = user_id);

-- Indexes for performance
CREATE INDEX IF NOT EXISTS idx_encrypted_keys_user ON encrypted_keys(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_user ON execution_sessions(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_expires ON execution_sessions(expires_at);
`}async saveConfig(){if(this.config)try{await Ae.setItem(Ae.getUserKey(_O),JSON.stringify(this.config))}catch(e){console.error("[UserDataSupabase] Failed to save config:",e)}}}const fs=new rut;class iut{get supabase(){return fs.getClient()}isAvailable(){return this.supabase!==null}async runCycle(e){if(!this.supabase)throw new Error("Supabase not connected");const{data:n,error:r}=await this.supabase.functions.invoke("dealer-cycle",{body:e});return r?(console.error("[SupabaseDealerClient] Cycle error:",r),{success:!1,decisions:[],usage:{cyclesUsed:0,cyclesRemaining:0},timestamp:new Date().toISOString(),error:r.message}):n}async syncPortfolio(){if(!this.supabase)throw new Error("Supabase not connected");const{data:e,error:n}=await this.supabase.functions.invoke("sync-portfolio",{body:{}});return n?(console.error("[SupabaseDealerClient] Sync error:",n),{positions:[],portfolioValue:0,error:n.message}):e}async enableSchedule(e){if(!this.supabase)throw new Error("Supabase not connected");const n=Ae.getUserId();if(!n)return{success:!1,error:"Not authenticated"};const{error:r}=await this.supabase.from("cron_schedules").upsert({user_id:n,schedule_name:"default",enabled:e.enabled,interval_seconds:e.intervalSeconds,coins:e.coins,next_run_at:e.enabled?new Date().toISOString():null},{onConflict:"user_id,schedule_name"});return r?(console.error("[SupabaseDealerClient] Schedule error:",r),{success:!1,error:r.message}):{success:!0}}async disableSchedule(){return this.enableSchedule({enabled:!1,intervalSeconds:300,coins:[]})}async getScheduleStatus(){if(!this.supabase)return null;const e=Ae.getUserId();if(!e)return null;const{data:n,error:r}=await this.supabase.from("cron_schedules").select("*").eq("user_id",e).eq("schedule_name","default").single();return r||!n?null:{enabled:n.enabled,intervalSeconds:n.interval_seconds,coins:n.coins||[],lastRunAt:n.last_run_at?new Date(n.last_run_at):void 0,nextRunAt:n.next_run_at?new Date(n.next_run_at):void 0,runCount:n.run_count||0,lastError:n.last_error}}async getSessionStatus(){if(!this.supabase)return{hasActiveSession:!1,tier:"local"};const e=Ae.getUserId();if(!e)return{hasActiveSession:!1,tier:"local"};const{data:n}=await this.supabase.from("encrypted_keys").select("encrypted_password").eq("user_id",e).eq("key_name","hyperliquid").single();if(n!=null&&n.encrypted_password)return{hasActiveSession:!0,tier:"persistent"};const{data:r}=await this.supabase.from("execution_sessions").select("expires_at").eq("user_id",e).eq("revoked",!1).gt("expires_at",new Date().toISOString()).order("expires_at",{ascending:!1}).limit(1).single();return r?{hasActiveSession:!0,expiresAt:new Date(r.expires_at),tier:"session"}:{hasActiveSession:!1,tier:"local"}}async getUsageStats(){if(!this.supabase)return null;const e=Ae.getUserId();if(!e)return null;const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1),{data:i,error:s}=await this.supabase.from("usage_tracking").select("*").eq("user_id",e).eq("period_start",r.toISOString().split("T")[0]).single();if(s&&s.code!=="PGRST116")return console.error("[SupabaseDealerClient] Usage error:",s),null;const{data:o}=await this.supabase.from("user_plans").select("cycles_limit").eq("user_id",e).single(),a=(o==null?void 0:o.cycles_limit)||1e3;return{cyclesExecuted:(i==null?void 0:i.cycles_executed)||0,tradesExecuted:(i==null?void 0:i.trades_executed)||0,cyclesRemaining:Math.max(0,a-((i==null?void 0:i.cycles_executed)||0)),periodStart:r}}}const sut=new iut,AD={local:{tier:"local",label:"Local Keys",description:"Maximum security. Keys never leave your browser. Browser must remain open for execution.",icon:"",securityLevel:3,execution24x7:!1,requiresBrowserOpen:!0},session:{tier:"session",label:"Session Keys",description:"Balanced security. 24-hour execution sessions on your server.Re-authenticate daily.",icon:"",securityLevel:2,execution24x7:!1,requiresBrowserOpen:!1},persistent:{tier:"persistent",label:"Persistent Keys",description:"Full automation. 24/7 execution. Lower security - password stored encrypted on your server.",icon:"",securityLevel:1,execution24x7:!0,requiresBrowserOpen:!1}},LZ="security_tier",DZ=24;class out{constructor(){this.state={currentTier:"local",session:null,keysInSupabase:!1,passwordStoredInSupabase:!1},this.listeners=new Set,this.loadState()}async loadState(){try{const e=await Ae.getItem(Ae.getUserKey(LZ));if(e){const n=JSON.parse(e);this.state={...this.state,currentTier:n.currentTier||"local",session:n.session?{...n.session,createdAt:new Date(n.session.createdAt),expiresAt:new Date(n.session.expiresAt)}:null},this.state.session&&new Date>this.state.session.expiresAt&&(console.log("[SecurityTierService] Session expired, reverting to local"),this.state.session=null,this.state.currentTier==="session"&&(this.state.currentTier="local"))}await this.syncSupabaseState()}catch(e){console.error("[SecurityTierService] Failed to load state:",e)}}async saveState(){try{await Ae.setItem(Ae.getUserKey(LZ),JSON.stringify({currentTier:this.state.currentTier,session:this.state.session}))}catch(e){console.error("[SecurityTierService] Failed to save state:",e)}}notify(){this.listeners.forEach(e=>e()),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getState(){return this.state}getCurrentTier(){return this.state.currentTier}getTierInfo(e){return AD[e||this.state.currentTier]}getSessionStatus(){if(!this.state.session)return{active:!1};const e=new Date,n=e<this.state.session.expiresAt,r=this.state.session.expiresAt.getTime()-e.getTime(),i=Math.max(0,r/(1e3*60*60));return{active:n,expiresAt:this.state.session.expiresAt,remainingHours:Math.round(i*10)/10}}async migrateToSession(e,n,r,i=DZ){try{const s=fs.getClient();if(!s)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const o=Ae.getUserId();if(!o)return{success:!1,error:"Not authenticated"};const{error:a}=await s.from("encrypted_keys").upsert({user_id:o,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:null},{onConflict:"user_id,key_name"});if(a)return{success:!1,error:`Failed to upload key: ${a.message}`};const l=new Date,c=new Date(l.getTime()+i*60*60*1e3),d=crypto.randomUUID(),h=await this.createSessionToken(o,r,c),{error:m}=await s.from("execution_sessions").insert({id:d,user_id:o,encrypted_session_token:h,expires_at:c.toISOString(),revoked:!1});return m?{success:!1,error:`Failed to create session: ${m.message}`}:(this.state={...this.state,currentTier:"session",keysInSupabase:!0,passwordStoredInSupabase:!1,session:{id:d,userId:o,createdAt:l,expiresAt:c,active:!0}},this.notify(),console.log("[SecurityTierService] Migrated to Tier B (Session)"),{success:!0})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async migrateToPersistent(e,n,r){try{const i=fs.getClient();if(!i)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const s=Ae.getUserId();if(!s)return{success:!1,error:"Not authenticated"};const o=await this.encryptPasswordForStorage(r),{error:a}=await i.from("encrypted_keys").upsert({user_id:s,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:o},{onConflict:"user_id,key_name"});return a?{success:!1,error:`Failed to upload key: ${a.message}`}:(this.state={...this.state,currentTier:"persistent",keysInSupabase:!0,passwordStoredInSupabase:!0,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier C (Persistent)"),{success:!0})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async migrateToLocal(){try{const e=fs.getClient();if(!e)return this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),{success:!0};const n=Ae.getUserId();return n?(await e.from("encrypted_keys").delete().eq("user_id",n).eq("key_name","hyperliquid"),await e.from("execution_sessions").update({revoked:!0}).eq("user_id",n),this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier A (Local)"),{success:!0}):{success:!1,error:"Not authenticated"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async endSession(){if(this.state.session){try{const e=fs.getClient();e&&await e.from("execution_sessions").update({revoked:!0}).eq("id",this.state.session.id)}catch(e){console.error("[SecurityTierService] Failed to revoke session:",e)}this.state={...this.state,session:null},this.notify()}}async refreshSession(e,n=DZ){if(this.state.currentTier!=="session")return{success:!1,error:"Not in session mode"};await this.endSession();const r=fs.getClient();if(!r)return{success:!1,error:"Your Supabase not connected"};const i=Ae.getUserId();if(!i)return{success:!1,error:"Not authenticated"};const{data:s}=await r.from("encrypted_keys").select("encrypted_blob, encryption_salt").eq("user_id",i).eq("key_name","hyperliquid").single();return s?this.migrateToSession(s.encrypted_blob,s.encryption_salt,e,n):{success:!1,error:"No key found in Supabase"}}async syncSupabaseState(){var e;try{const n=fs.getClient();if(!n)return;const r=Ae.getUserId();if(!r)return;const{data:i}=await n.from("encrypted_keys").select("encrypted_password").eq("user_id",r).eq("key_name","hyperliquid").single();this.state.keysInSupabase=!!i,this.state.passwordStoredInSupabase=!!(i!=null&&i.encrypted_password),this.state.keysInSupabase?this.state.passwordStoredInSupabase?this.state.currentTier="persistent":(e=this.state.session)!=null&&e.active?this.state.currentTier="session":this.state.currentTier="local":this.state.currentTier="local"}catch(n){console.error("[SecurityTierService] Failed to sync Supabase state:",n)}}async createSessionToken(e,n,r){const i=JSON.stringify({userId:e,password:n,expiresAt:r.toISOString()}),o=new TextEncoder().encode(i),a=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]),l=crypto.getRandomValues(new Uint8Array(12)),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:l},a,o),d=await crypto.subtle.exportKey("raw",a),h=new Uint8Array(l.length+c.byteLength+d.byteLength);return h.set(l,0),h.set(new Uint8Array(c),l.length),h.set(new Uint8Array(d),l.length+c.byteLength),btoa(String.fromCharCode(...h))}async encryptPasswordForStorage(e){const n=new TextEncoder,r=n.encode(e),i=n.encode("autonomousvault-persistent-key-v1"),s=await crypto.subtle.importKey("raw",n.encode("server-managed-key-placeholder"),"PBKDF2",!1,["deriveKey"]),o=await crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt"]),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,r),c=new Uint8Array(a.length+l.byteLength);return c.set(a,0),c.set(new Uint8Array(l),a.length),btoa(String.fromCharCode(...c))}}const zf=new out,jZ="hyperliquid-dealer-cycle",IO="hyperliquid-dealer-sync";class aut{constructor(){this.isLoopRunning=!1,this.currentCycleAbortController=null,this.vaultContext={balance:0,positions:[]},this.lastError=null,this.consecutiveFailures=0,this.executor=null,mt.subscribe(()=>{const e=mt.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()}),Bs.setOnRateLimit(e=>{e.exhausted?(mt.addLog("ERROR"," AI API Quota Exhausted! Credits may be depleted. System paused.",{consecutiveHits:e.consecutiveHits}),mt.updateStatus(" Quota Exhausted",null,"Check your AI API credits or billing",void 0,`Retried ${e.consecutiveHits}x without success`)):(mt.addLog("WARNING",` AI Rate Limited! Waiting ${e.blockedForSeconds}s before retry... (attempt ${e.consecutiveHits})`,{consecutiveHits:e.consecutiveHits}),mt.updateStatus(" Rate Limited",null,"AI credits/quota may be running low",void 0,`Retry in ${e.blockedForSeconds}s (attempt ${e.consecutiveHits})`))})}startLoop(){if(this.isLoopRunning)return;this.isLoopRunning=!0,console.log("[DealerService]  Starting loop with Web Worker timer (background-safe)..."),Jk.start();const n=mt.getSnapshot().settings.checkIntervalSeconds*1e3||6e4;Xa.start(jZ,n,()=>this.runCycle()),this.startSyncLoop(),this.runCycle()}startSyncLoop(){Xa.stop(IO),console.log("[DealerService] Starting sync loop with Web Worker timer..."),Xa.start(IO,15e3,()=>this.syncPortfolio()),this.syncPortfolio()}async syncPortfolio(){if(this.vaultContext.walletAddress){if(zt.isDealerActive()){console.log("[DealerService]   Skipping sync - dealer is active");return}try{const e=await zt.getUserStateShared(this.vaultContext.walletAddress);let n=[],r=0;e&&(e.assetPositions&&(n=e.assetPositions.filter(l=>parseFloat(l.position.szi)!==0),this.vaultContext.positions=n),e.marginSummary&&(r=parseFloat(e.marginSummary.accountValue||"0")));let i=0;const s=n.map(l=>{var m;const c=parseFloat(l.position.szi),d=parseFloat(l.position.entryPx),h=Math.abs(c*d);return i+=h,{coin:l.position.coin,size:c,entryPrice:d,unrealizedPnl:parseFloat(l.position.unrealizedPnl||"0"),side:c>0?"LONG":"SHORT",leverage:parseFloat(((m=l.position.leverage)==null?void 0:m.value)||"1"),liquidationPrice:l.position.liquidationPx?parseFloat(l.position.liquidationPx):void 0}});this.vaultContext.balance=r;const o=s.reduce((l,c)=>l+c.unrealizedPnl,0);if(mt.updatePortfolioState(s,r,i),mt.getSnapshot().isOn){const{profitHistoryService:l}=await ko(async()=>{const{profitHistoryService:c}=await import("./profitHistoryService-CW2kO2tU.js");return{profitHistoryService:c}},[]);l.recordSnapshot({timestamp:Date.now(),portfolioValue:r,unrealizedPnl:o,positionCount:n.length,trigger:"sync"})}}catch(e){console.warn("[DealerService] syncPortfolio failed:",e)}}}stopLoop(){this.isLoopRunning&&(console.log("[DealerService]  Stopping loop..."),this.currentCycleAbortController&&(console.log("[DealerService]  Aborting current cycle requests..."),this.currentCycleAbortController.abort(),this.currentCycleAbortController=null),Xa.stop(jZ),Xa.stop(IO),Jk.stop(),this.isLoopRunning=!1,mt.updateStatus(null,null,"System paused",void 0,"Dealer offline"))}setVaultContext(e){this.vaultContext={...this.vaultContext,...e}}async runCycle(){if(!mt.getSnapshot().isOn){this.stopLoop();return}const n=zf.getCurrentTier();return n==="session"||n==="persistent"?this.runSupabaseCycle():this.runLocalCycle()}async runSupabaseCycle(){var s,o;const e=mt.getSnapshot();mt.setAnalyzing(!0),mt.updateStatus(" Supabase Cycle",null,"Executing via Edge Function...",void 0,`Mode: ${e.executionMode}`);const n=Fn.getComponentConfig("hyperliquidDealer"),r=Fn.getComponentApiKey("hyperliquidDealer"),i={provider:n.providerType,apiKey:r,modelId:n.modelId,systemPrompt:e.settings.strategyPrompt};try{const a=await sut.runCycle({coins:e.settings.tradingPairs,settings:{intervalMs:e.settings.checkIntervalSeconds*1e3,maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,maxPositionSizeUSDC:e.settings.maxPositionSizeUSDC,analysisTimeframe:e.settings.analysisTimeframe||"60",historyCandles:e.settings.historyCandles||100,macroTimeframeEnabled:e.settings.macroTimeframeEnabled,macroTimeframe:e.settings.macroTimeframe,macroEnabledIndicators:e.settings.macroEnabledIndicators,indicatorSettings:e.settings.indicatorSettings,autonomousIndicators:e.settings.autonomousIndicators,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent,strategyPrompt:e.settings.strategyPrompt},portfolioContext:{balance:((s=this.vaultContext)==null?void 0:s.balance)||0,positions:(((o=this.vaultContext)==null?void 0:o.positions)||[]).map(l=>{var c,d,h,m,g,v,x,b;return{coin:((c=l.position)==null?void 0:c.coin)||l.coin,side:parseFloat(((d=l.position)==null?void 0:d.szi)||l.szi||"0")>0?"LONG":"SHORT",size:Math.abs(parseFloat(((h=l.position)==null?void 0:h.szi)||l.szi||"0")),entryPrice:parseFloat(((m=l.position)==null?void 0:m.entryPx)||l.entryPx||"0"),unrealizedPnl:parseFloat(((g=l.position)==null?void 0:g.unrealizedPnl)||l.unrealizedPnl||"0"),leverage:parseFloat(((x=(v=l.position)==null?void 0:v.leverage)==null?void 0:x.value)||((b=l.leverage)==null?void 0:b.value)||"1")}})},aiConfig:i,executeTradesIfSignal:!0});if(a.success){for(const l of a.decisions){const c=l.action==="BUY"?"":l.action==="SELL"?"":l.action==="CLOSE"?"":"";mt.addLog(l.executed?"TRADE":"SIGNAL",`${c} ${l.coin}: ${l.action} (${(l.confidence*100).toFixed(0)}%)${l.executed?" ":""}`,{fullReason:l.reason,orderId:l.orderId,error:l.error})}mt.updateStatus(" Waiting",null,`Supabase cycle complete. ${a.decisions.length} decisions.`,void 0,`Cycles remaining: ${a.usage.cyclesRemaining}`)}else throw new Error(a.error||"Supabase cycle failed")}catch(a){console.error("[DealerService] Supabase cycle error:",a),mt.addLog("ERROR",`Supabase cycle failed: ${a.message}`),mt.updateStatus(" Error",null,a.message,void 0,"Will retry next interval")}finally{mt.setAnalyzing(!1)}}async runLocalCycle(){var x,b,w,T;const e=mt.getSnapshot();this.currentCycleAbortController=new AbortController;const n=this.currentCycleAbortController.signal;zt.acquireDealerLock();const r=e.settings.indicatorSettings,s=Object.entries(r).filter(([N,O])=>O.enabled).map(([N,O])=>N.toUpperCase()).join(", ")||"Default",o=e.settings.tradingPairs.length,a=e.settings.analysisTimeframe,l=a==="1"?"1m":a==="5"?"5m":a==="15"?"15m":a==="60"?"1h":a==="240"?"4h":a==="D"?"1D":`${a}m`,c=e.settings.macroTimeframe,d=e.settings.macroTimeframeEnabled?`  ${c==="15"?"15m":c==="60"?"1H":c==="240"?"4H":c==="D"?"1D":c==="W"?"1W":c}`:"";mt.setAnalyzing(!0),mt.updateStatus(" Scanning Markets",null,"Initializing market analysis cycle...",void 0,` ${o} pairs  ${l}${d}  ${s}`);const h=Date.now();let m=0,g=0,v=0;try{let N=this.vaultContext.positions||[];this.vaultContext.walletAddress&&(!N||N.length===0)&&(await this.syncPortfolio(),N=this.vaultContext.positions||[]);const O=e.settings.tradingPairs;if(O.length===0){mt.addLog("WARNING","No trading pairs configured.");return}const j=5,_=[];for(let A=0;A<O.length;A+=j)_.push(O.slice(A,A+j));const F=e.settings.maxOpenPositions||3,z=[],D=new Map;for(let A=0;A<_.length;A++){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const I=_[A],L=A+1,q=I.join(", ");mt.updateStatus(" Fetching Data",null,`Collecting market data for ${q}...`,void 0,`Batch ${L}/${_.length}  ${I.length} coins`);const K=Date.now(),te=[];for(const ve of I){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const ke=e.settings.autonomousIndicators?void 0:e.settings.indicatorSettings,pe=await NO.getMarketContext(ve,this.vaultContext.walletAddress,e.settings.analysisTimeframe||"60",ke,e.settings.historyCandles||100);if(e.settings.macroTimeframeEnabled&&e.settings.macroTimeframe&&!pe.error){let ze=ke;if(ze&&e.settings.macroEnabledIndicators){ze={...ze};const he={},_e=e.settings.macroEnabledIndicators;for(const[We,Ke]of Object.entries(ze))he[We]={...Ke,enabled:Ke.enabled&&_e.includes(We)};ze=he}const Me=await NO.getMacroSnapshot(ve,e.settings.macroTimeframe,ze);Object.keys(Me.indicators).length>0&&(pe.macro=Me)}pe.error||(te.push(pe),D.set(ve,pe)),await new Promise(ze=>setTimeout(ze,200))}if(m+=Date.now()-K,te.length===0)continue;for(const ve of te){const ke=ve.symbol,pe=N.find(ze=>{var Me;return((Me=ze.position)==null?void 0:Me.coin)===ke||ze.coin===ke});if(pe&&parseFloat(((x=pe.position)==null?void 0:x.szi)||pe.szi||"0")!==0){const ze=pe.position||pe;ve.openPosition={hasPosition:!0,side:parseFloat(ze.szi)>0?"LONG":"SHORT",size:Math.abs(parseFloat(ze.szi)),entryPrice:parseFloat(ze.entryPx||"0"),unrealizedPnl:parseFloat(ze.unrealizedPnl||"0"),leverage:parseFloat(((b=ze.leverage)==null?void 0:b.value)||"1")}}else ve.openPosition={hasPosition:!1}}const Y=N.length>0?NO.calculatePositionBreakevens(N,{makerFee:2e-4,takerFee:5e-4},new Map(te.map(ve=>{var ke;return[ve.symbol,((ke=ve.tradingCosts)==null?void 0:ke.fundingRate)||0]}))):[],V={coins:te,portfolio:{balance:this.vaultContext.balance,positions:N,positionBreakevens:Y,settings:{maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,bankrollType:e.settings.bankrollType,manualBankroll:e.settings.manualBankroll,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent},userFees:{makerFee:2e-4,takerFee:5e-4},lastExecutionError:this.lastError&&Date.now()-this.lastError.timestamp<6e4?{message:this.lastError.message,timestamp:this.lastError.timestamp}:null},autonomousMode:e.settings.autonomousIndicators,availablePresets:e.settings.autonomousIndicators?ad:void 0,cycleSummary:Fc.getContextForAI("hyperliquid"),userFeedback:await(await ko(async()=>{const{dealerFeedbackService:ve}=await Promise.resolve().then(()=>mut);return{dealerFeedbackService:ve}},void 0)).dealerFeedbackService.getContextForAI()},M=te.map(ve=>ve.symbol).join(", ");mt.updateStatus(" Analyzing",null,`AI processing ${M}...`,void 0,`Using ${s} indicators`);const P=e.settings.strategyPrompt||"Scalp trading. Buy low RSI, Sell high RSI.",W=V.cycleSummary;W&&mt.addLog("INFO",` Cycle Summary: Including ${W.length} char context from previous cycles`);const X=Date.now();if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const se=await Pm.getDealerBatchAnalysis(V,P,n);g+=Date.now()-X;let ae=[],Te;const oe=se;oe&&typeof oe=="object"&&!Array.isArray(oe)?(ae=oe.decisions||[],Te=oe.cycleSummary,e.settings.autonomousIndicators&&oe.chosenPreset&&(mt.addLog("INFO",` AI chose preset: ${((w=ad[oe.chosenPreset])==null?void 0:w.emoji)||""} ${oe.chosenPreset}`),oe.presetReason&&mt.addLog("INFO",` Preset reason: ${oe.presetReason}`))):Array.isArray(oe)&&(ae=oe),Te&&(Fc.setSummary("hyperliquid",Te),mt.addLog("INFO",` AI Summary: ${Te.slice(0,80)}...`));for(const ve of ae){const ke=ve.coin,pe=ve.action,ze=ve.reason,Me=ve.confidence||0,he=D.get(ke);if(mt.addLog("REASONING",`${ke}: ${pe} (Conf: ${(Me*100).toFixed(0)}%)`,{fullReason:ze,context:{...ve,currentPrice:he==null?void 0:he.currentPrice,indicators:he==null?void 0:he.indicators,enabledIndicators:he==null?void 0:he.enabledIndicators,tradingCosts:he==null?void 0:he.tradingCosts,orderBook:he==null?void 0:he.orderBook,macro:he==null?void 0:he.macro}}),pe==="HOLD")continue;const _e=e.settings.aggressiveMode?.5:.6;if(Me<_e){mt.addLog("INFO",`Skipped ${pe} on ${ke}: Confidence ${(Me*100).toFixed(0)}% < ${(_e*100).toFixed(0)}%`);continue}z.push({decision:ve,marketContext:D.get(ke)})}A<_.length-1&&await new Promise(ve=>setTimeout(ve,500))}const $=z.length;mt.updateStatus(" Prioritizing",null,$>0?`Found ${$} trading signal${$>1?"s":""}`:"No actionable signals found",void 0,$>0?"Ranking by confidence...":"Monitoring for opportunities"),z.sort((A,I)=>{const L=(A.decision.confidence||0)+(A.decision.action==="CLOSE"?.5:0);return(I.decision.confidence||0)+(I.decision.action==="CLOSE"?.5:0)-L}),z.length>F&&mt.addLog("INFO",` Prioritizing top ${F} trades from ${z.length} signals (sorted by confidence)`);let G=0;const H=Date.now();for(const{decision:A,marketContext:I}of z){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const L=A.coin,q=A.action,K=A.reason,te=A.confidence||0;if(G>=F&&q!=="CLOSE"){mt.addLog("INFO",` Skipping ${q} on ${L} (${(te*100).toFixed(0)}%): Cycle limit reached, lower priority`);continue}const Y=N.length;if(q==="BUY"&&Y>=e.settings.maxOpenPositions&&!N.some(M=>{var P;return M.coin===L||((P=M.position)==null?void 0:P.coin)===L})){mt.addLog("WARNING",`Ignored BUY on ${L}: Max positions reached.`);continue}if(mt.addLog("SIGNAL",` Executing ${q} on ${L} (${(te*100).toFixed(0)}% confidence)`),this.executor){let V=A.sizeUSDC||e.settings.maxPositionSizeUSDC||20;e.settings.maxPositionSizeUSDC&&(V=Math.min(V,e.settings.maxPositionSizeUSDC));const M=A.suggestedLeverage||e.settings.maxLeverage||1,P=Math.min(M,e.settings.maxLeverage||1);M>P&&mt.addLog("INFO",` Leverage capped for ${L}: ${M}x  ${P}x (max: ${e.settings.maxLeverage}x)`);const X=(this.vaultContext.balance||0)*P*.95;if(V>X&&(V=X),V<10&&q!=="CLOSE"){mt.addLog("WARNING",`Trade skipped on ${L}: Size < $10`);continue}try{const se=q==="BUY"?"":q==="SELL"?"":"";mt.updateStatus(`${se} Executing`,null,`${q} ${L} @ $${((T=I==null?void 0:I.currentPrice)==null?void 0:T.toFixed(2))||"market"}`,void 0,`Confidence: ${(te*100).toFixed(0)}%  Size: $${V.toFixed(0)}`),await this.executor({coin:L,action:q,type:A.orderType||"limit",price:A.price||(I==null?void 0:I.currentPrice),sizeUSDC:V,leverage:P,reason:K,cloid:this.generateCloid(),stopLoss:A.stopLoss,takeProfit:A.takeProfit}),G+=q!=="CLOSE"?1:0,await new Promise(ae=>setTimeout(ae,2e3))}catch(se){console.error(`[DealerService] Execution failed for ${L}:`,se),mt.addLog("ERROR",`Execution failed for ${L}: ${se.message}`)}}}v+=Date.now()-H;const U=(Date.now()-h)/1e3;console.log(`[DealerService] Cycle Telemetry: Total=${U.toFixed(1)}s, Fetch=${(m/1e3).toFixed(1)}s, AI=${(g/1e3).toFixed(1)}s, Exec=${(v/1e3).toFixed(1)}s`),Fc.recordCycle("hyperliquid",{timestamp:Date.now(),decisions:z.map(A=>({asset:A.decision.coin,action:A.decision.action,confidence:A.decision.confidence||0})),assetsAnalyzed:O}),this.consecutiveFailures=0}catch(N){if((N==null?void 0:N.name)==="AbortError"){console.log("[DealerService]  Cycle aborted by user"),mt.addLog("INFO"," Analysis cycle cancelled");return}console.error("[DealerService] Cycle Error:",N),mt.addLog("ERROR",`Cycle failed: ${N.message}`),this.lastError={message:N.message,timestamp:Date.now()}}finally{zt.releaseDealerLock(),zt.clearSharedCache(),mt.setAnalyzing(!1);const N=e.settings.checkIntervalSeconds,O=Math.floor(N/60),j=O>=1?`${O}min`:`${N}s`;mt.updateStatus(" Waiting",null,"Analysis complete, waiting for next cycle",void 0,`Next scan in ${j}`)}}setExecutor(e){this.executor=e}generateCloid(){const e=new Uint8Array(16);return crypto.getRandomValues(e),"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}}const xg=new aut;class cr{static async encrypt(e,n){const i=new TextEncoder().encode(e),s=crypto.getRandomValues(new Uint8Array(16)),o=await this.deriveKey(n,s),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,i),c=new Uint8Array(s.byteLength+a.byteLength+l.byteLength);return c.set(s,0),c.set(a,s.byteLength),c.set(new Uint8Array(l),s.byteLength+a.byteLength),btoa(String.fromCharCode(...c))}static async decrypt(e,n){try{const r=atob(e),i=new Uint8Array(r.length);for(let h=0;h<r.length;h++)i[h]=r.charCodeAt(h);const s=i.slice(0,16),o=i.slice(16,28),a=i.slice(28),l=await this.deriveKey(n,s),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},l,a);return new TextDecoder().decode(c)}catch{throw new Error("Failed to decrypt. Wrong password or corrupted data.")}}static async deriveKey(e,n){const r=new TextEncoder,i=await crypto.subtle.importKey("raw",r.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}const lut=(t,e)=>{const n=S.useSyncExternalStore(c=>mt.subscribe(c),()=>mt.getSnapshot()),r=S.useRef(!1);return S.useEffect(()=>{var h,m;const d=Pm.getApiKey()||void 0||((m=(h=window.process)==null?void 0:h.env)==null?void 0:m.GEMINI_API_KEY);d&&Pm.initialize(d)},[]),S.useEffect(()=>{xg.setVaultContext({walletAddress:t.hlPublicKey,balance:t.hlBalance||0})},[t.hlBalance,t.hlPublicKey]),S.useEffect(()=>{xg.setExecutor(async c=>{var d,h,m;if(console.log("[useDealer] GENUINE EXECUTION TRIGGERED:",c),!t.isUnlocked||!t.hlPublicKey||!t.hlEncryptedPrivateKey){mt.addLog("ERROR","Cannot execute: Vault locked or HL not initialized");return}try{if(!e)throw new Error("Password required for execution");const g=await cr.decrypt(t.hlEncryptedPrivateKey,e),v=zt.getWalletFromPrivateKey(g);mt.addLog("TRADE",` EXECUTING ${c.action} ${c.coin}...`,{reason:c.reason,confidence:c.confidence});let x=c.action==="BUY",b=!1;if(c.action==="CLOSE"){console.log("[useDealer] Seeking position for CLOSE:",c.coin),console.log("[useDealer] Cached Positions (may be stale):",(d=t.hlPositions)==null?void 0:d.map(V=>{var M;return((M=V==null?void 0:V.position)==null?void 0:M.coin)||(V==null?void 0:V.coin)})),mt.addLog("INFO",`Fetching current positions for ${c.coin}...`);let te=[];try{const V=await zt.getUserState(t.hlPublicKey);te=(V==null?void 0:V.assetPositions)||[],console.log("[useDealer] Fresh Positions from API:",te.map(M=>{var P;return((P=M==null?void 0:M.position)==null?void 0:P.coin)||(M==null?void 0:M.coin)}))}catch(V){console.error("[useDealer] Failed to fetch fresh positions:",V),mt.addLog("ERROR",`Failed to fetch positions: ${V.message}`);return}const Y=te.find(V=>{var M;return((M=V.position)==null?void 0:M.coin)===c.coin});if(Y&&parseFloat(Y.position.szi)!==0){const V=Y.position.szi,M=parseFloat(V);x=M<0,b=!0,mt.addLog("INFO",`Closing ${M} ${c.coin} (Side: ${x?"BUY":"SELL"}, ReduceOnly: Yes)`)}else{mt.addLog("WARNING",`CLOSE signal ignored: No open position found for ${c.coin}`),console.log("[useDealer] Position not found or size is 0. Available positions:",te.map(V=>{var M,P;return`${(M=V==null?void 0:V.position)==null?void 0:M.coin}: ${(P=V==null?void 0:V.position)==null?void 0:P.szi}`}));return}}const w=c.type==="market";mt.addLog("INFO","Fetching market data...");const T=await Un.getMarketData(c.coin),N=parseFloat(T.levels[0][0].px),O=parseFloat(T.levels[1][0].px),j=x?O:N,_=await Un.getAssetDecimals(c.coin),F=c.sizeUSDC||n.settings.maxPositionSizeUSDC||20,z=F/j,D=parseFloat(z.toFixed(_));let $,G=w?"ioc":"limit";const H=Math.max(0,6-_);if(w){let Y=x?j*1.05:j*.95,V=parseFloat(Y.toFixed(H));V=parseFloat(V.toPrecision(5)),$=parseFloat(V.toFixed(H))}else{const te=c.price||j;let Y=parseFloat(te.toFixed(H));Y=parseFloat(Y.toPrecision(5)),$=parseFloat(Y.toFixed(H)),console.log(`[useDealer] Limit price rounded: ${te} -> ${$} (maxDecimals=${H})`)}const U=c.leverage||n.settings.maxLeverage||1,A=Math.min(U,n.settings.maxLeverage||1);if(U>A&&mt.addLog("INFO",` Leverage capped for ${c.coin}: ${U}x  ${A}x (max: ${n.settings.maxLeverage}x)`),A>1)try{await Un.updateLeverage(v,c.coin,A,!1)}catch(te){console.warn(`[useDealer] Leverage update failed, using current: ${te.message}`),mt.addLog("WARNING",`Leverage update failed (using current): ${te.message.slice(0,50)}...`)}console.log("[useDealer SL/TP DEBUG] Settings:",{stopLossEnabled:n.settings.stopLossEnabled,stopLossPercent:n.settings.stopLossPercent,takeProfitEnabled:n.settings.takeProfitEnabled,takeProfitPercent:n.settings.takeProfitPercent}),console.log("[useDealer SL/TP DEBUG] AI Intent:",{stopLoss:c.stopLoss,takeProfit:c.takeProfit});let I;if(n.settings.stopLossEnabled&&!b)if(n.settings.stopLossPercent!==null){const te=n.settings.stopLossPercent/100;I=x?$*(1-te):$*(1+te),mt.addLog("INFO",` Stop Loss: ${n.settings.stopLossPercent}%  $${I.toFixed(2)}`)}else c.stopLoss&&(I=c.stopLoss,mt.addLog("INFO",` Stop Loss (AI): $${I.toFixed(2)}`));let L;if(n.settings.takeProfitEnabled&&!b)if(n.settings.takeProfitPercent!==null){const te=n.settings.takeProfitPercent/100;L=x?$*(1+te):$*(1-te),mt.addLog("INFO",` Take Profit: ${n.settings.takeProfitPercent}%  $${L.toFixed(2)}`)}else c.takeProfit&&(L=c.takeProfit,mt.addLog("INFO",` Take Profit (AI): $${L.toFixed(2)}`));const q=I||L;mt.addLog("INFO",`Placing ${G.toUpperCase()} order: ${D} ${c.coin} @ ${$.toFixed(2)}${q?" (with SL/TP)":""}`);const K=await Un.createOrder(v,c.coin,x,D,$,{orderType:G,reduceOnly:b,cloid:c.cloid,stopLoss:I,takeProfit:L});mt.addLog("INFO",`Order Placed: ${K.status||"Submitted"}`),mt.addOperationRecord({coin:c.coin,action:c.action,timestamp:Date.now(),entryPrice:$,size:D,sizeUSDC:F,reasoning:c.reason||"AI analysis decision",confidence:c.confidence||.7,status:c.action==="CLOSE"?"CLOSED":"OPEN",cloid:c.cloid});try{const{profitHistoryService:te}=await ko(async()=>{const{profitHistoryService:V}=await import("./profitHistoryService-CW2kO2tU.js");return{profitHistoryService:V}},[]),Y=await zt.getUserState(t.hlPublicKey);if(Y!=null&&Y.marginSummary){const V=parseFloat(Y.marginSummary.accountValue||"0"),M=((h=Y.assetPositions)==null?void 0:h.reduce((P,W)=>P+parseFloat(W.position.unrealizedPnl||"0"),0))||0;te.recordSnapshot({timestamp:Date.now(),portfolioValue:V,unrealizedPnl:M,positionCount:((m=Y.assetPositions)==null?void 0:m.filter(P=>parseFloat(P.position.szi)!==0).length)||0,trigger:"trade"})}}catch(te){console.warn("[useDealer] Snapshot after trade failed:",te)}}catch(g){console.error("Execution Error:",g),mt.addLog("ERROR",`Execution Failed: ${g.message}`)}}),r.current=!0},[t.isUnlocked,t.hlPublicKey,e,n.settings.maxPositionSizeUSDC,n.settings.maxLeverage,n.settings.stopLossEnabled,n.settings.stopLossPercent,n.settings.takeProfitEnabled,n.settings.takeProfitPercent]),{...n,toggleDealer:c=>{mt.toggleDealer(c),c?xg.startLoop():xg.stopLoop()},updateSettings:c=>{mt.updateSettings(c)},applyChanges:()=>{mt.reload(),n.isOn&&(xg.stopLoop(),setTimeout(()=>xg.startLoop(),500))},saveStrategy:c=>{mt.setStrategyPrompt(c)},clearLogs:()=>{mt.clearLogs()}}},cut=({vaultAddress:t,setActiveTab:e})=>{const[n,r]=S.useState([]),[i,s]=S.useState([]),[o,a]=S.useState(!1),[l,c]=S.useState(null),d=S.useSyncExternalStore(m=>mt.subscribe(m),()=>mt.getSnapshot()),h=async()=>{if(t){a(!0);try{const m=await Un.getUserState(t);if(m&&m.assetPositions){const v=m.assetPositions.filter(x=>parseFloat(x.position.szi)!==0).map(x=>({coin:x.position.coin,szi:x.position.szi,entryPx:x.position.entryPx,positionValue:x.position.positionValue,unrealizedPnl:x.position.unrealizedPnl,returnOnEquity:x.position.returnOnEquity,liquidationPx:x.position.liquidationPx,leverage:x.position.leverage}));r(v)}const g=await Un.getOpenOrders(t);g&&Array.isArray(g)&&s(g.map(v=>({oid:v.oid,coin:v.coin,side:v.side,limitPx:v.limitPx,sz:v.sz,orderType:v.orderType,timestamp:v.timestamp}))),c(new Date)}catch(m){console.error("[DealerOpenOrders] Failed to fetch data:",m)}finally{a(!1)}}};return S.useEffect(()=>{d.isAnalyzing||h();const m=setInterval(()=>{!d.isAnalyzing&&!d.pendingExecution&&h()},3e4);return()=>clearInterval(m)},[t,d.isAnalyzing,d.pendingExecution]),u.jsxs("div",{className:"flex flex-col min-h-[150px]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(f2,{className:"h-4 w-4 text-[#E7FE55]"}),"Open Trading"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:()=>e(be.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/30 px-3 py-1.5 rounded transition-colors flex items-center gap-2 uppercase tracking-wider font-medium",title:"View Trading Page",children:[u.jsx(dn,{size:12})," Details"]}),u.jsx("button",{onClick:h,className:`p-1.5 rounded hover:bg-[#1a1b21] transition-colors ${o?"animate-spin text-[#60a5fa]":"text-[#747580]"}`,title:"Refresh",children:u.jsx(ql,{className:"h-3.5 w-3.5"})}),u.jsxs("span",{className:"text-[10px] text-[#747580] bg-[#1a1b21] px-2 py-1 rounded uppercase tracking-wider",children:[n.length," Pos  ",i.length," Ord"]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:n.length===0&&i.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-2 py-8 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx(f2,{className:"h-8 w-8 opacity-30"}),u.jsx("span",{className:"text-[11px]",children:"No open positions or active orders"})]}):u.jsxs("div",{className:"flex flex-col gap-4",children:[n.length>0&&u.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[u.jsx(sy,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),u.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Positions"})]}),u.jsxs("table",{className:"w-full text-left text-[10px]",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),u.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),u.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),u.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Entry"}),u.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Liq. Price"}),u.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"PnL (ROE%)"})]})}),u.jsx("tbody",{children:n.map(m=>{var T;const g=parseFloat(m.unrealizedPnl),v=(parseFloat(m.returnOnEquity)*100).toFixed(2),x=g>=0,b=parseFloat(m.szi)>0,w=((T=m.leverage)==null?void 0:T.value)||0;return u.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[u.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),u.jsx("td",{className:"px-4 py-3",children:u.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${b?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:[b?"LONG":"SHORT"," ",w,"x"]})}),u.jsxs("td",{className:`px-4 py-3 text-right font-mono ${parseFloat(m.szi)>0?"text-[#34d399]":"text-red-400"}`,children:[parseFloat(m.szi)>0?"+":"",m.szi]}),u.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.entryPx).toFixed(4)]}),u.jsx("td",{className:"px-4 py-3 text-right text-[#747580] font-mono",children:m.liquidationPx?`$${parseFloat(m.liquidationPx).toFixed(4)}`:"-"}),u.jsxs("td",{className:`px-4 py-3 text-right font-mono font-semibold ${x?"text-[#34d399]":"text-red-400"}`,children:[x?"+":"",g.toFixed(2)," (",x?"+":"",v,"%)"]})]},m.coin)})})]})]}),i.length>0&&u.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[u.jsx(R8,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),u.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Orders"})]}),u.jsxs("table",{className:"w-full text-left text-[10px]",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),u.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),u.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Type"}),u.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),u.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Price"}),u.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Action"})]})}),u.jsx("tbody",{children:i.map(m=>{var g;return u.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[u.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),u.jsx("td",{className:"px-4 py-3",children:u.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${m.side==="B"?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:m.side==="B"?"BUY":"SELL"})}),u.jsx("td",{className:"px-4 py-3 text-[#a0a1a8] uppercase",children:((g=m.orderType)==null?void 0:g.split(" ")[0])||"Limit"}),u.jsx("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:m.sz}),u.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.limitPx).toFixed(4)]}),u.jsx("td",{className:"px-4 py-3 text-right",children:u.jsx("span",{className:"text-[#747580] text-[9px] italic",children:"Pending"})})]},m.oid)})})]})]})]})}),u.jsx("div",{className:"pt-4 flex justify-end",children:u.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz/trade",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#E7FE55]/80 flex items-center gap-1 transition-colors",title:"Hyperliquid Platform Official Website",children:[u.jsx(dn,{size:10})," Hyperliquid Platform Testnet"]})})]})},ome=t=>{const e=S.useSyncExternalStore(n=>Fc.subscribe(t,n),()=>Fc.getSnapshot(t));return S.useEffect(()=>{Fc.loadState(t)},[t]),{summary:e.aiSummary,isGenerating:e.isGenerating,cycleCount:e.recentCycles.length,lastUpdate:e.lastSummaryTime,hasSummary:!!e.aiSummary&&e.aiSummary.length>0}},uut=t=>{const e=t.match(/(\w+):/);return e?e[1]:null},RO=8,dut=t=>{if(t>=604800&&t%604800===0){const e=t/604800;return`${e} ${e===1?"Week":"Weeks"}`}if(t>=86400&&t%86400===0){const e=t/86400;return`${e} ${e===1?"Day":"Days"}`}if(t>=3600&&t%3600===0){const e=t/3600;return`${e} ${e===1?"Hour":"Hours"}`}if(t>=60&&t%60===0){const e=t/60;return`${e} ${e===1?"Minute":"Minutes"}`}return`${t}s`},fut=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var V,M;const[i,s]=S.useState([]),[o,a]=S.useState(0),[l,c]=S.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[d,h]=S.useState(0),m="hl_dealer_metrics_baseline",[g,v]=S.useState(null),[x,b]=S.useState(!1);S.useEffect(()=>{(async()=>{try{const W=await Ae.getItem(Ae.getUserKey(m));W&&v(parseInt(W,10))}catch(W){console.warn("[DealerDashboard] Failed to load baseline:",W)}b(!0)})()},[]);const w=S.useCallback(async()=>{if(!window.confirm("Are you sure you want to reset the performance metrics? The chart and profit will start measuring from this moment."))return;const W=Date.now();v(W);try{await Ae.setItem(Ae.getUserKey(m),W.toString()),console.log("[DealerDashboard] Metrics baseline reset to:",new Date(W).toISOString())}catch(X){console.error("[DealerDashboard] Failed to save baseline:",X)}},[]),[T,N]=S.useState(!1),{summary:O,isGenerating:j,cycleCount:_,lastUpdate:F,hasSummary:z}=ome("hyperliquid"),D=S.useMemo(()=>{const P=(g?i.filter(se=>se.time>=g):i).filter(se=>parseFloat(se.closedPnl||"0")!==0);if(P.length===0)return[];const W=[...P].sort((se,ae)=>se.time-ae.time);let X=0;return W.map(se=>{const ae=parseFloat(se.closedPnl||"0"),Te=parseFloat(se.fee||"0");return X+=ae-Te,{time:se.time,date:new Date(se.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:X,trade:`${se.coin} ${se.side==="A"?"SELL":"BUY"}`}})},[i,g]),$=S.useMemo(()=>D.length>=2,[D]),[G,H]=S.useState(0),U=S.useMemo(()=>t.logs.filter(P=>P.type==="REASONING"||P.type==="SIGNAL").slice(0,20),[t.logs]),A=S.useMemo(()=>{var W,X;const P=new Map;for(const se of U){const ae=uut(se.message)||((X=(W=se.details)==null?void 0:W.context)==null?void 0:X.coin);ae&&!P.has(ae)&&P.set(ae,se)}return Array.from(P.entries()).sort((se,ae)=>ae[1].timestamp-se[1].timestamp).map(([se,ae])=>({coin:se,log:ae}))},[U]);S.useEffect(()=>{A.length>0&&!t.isAnalyzing&&H(0)},[A.length,t.isAnalyzing]);const I=A[G],L=S.useMemo(()=>[...i].reverse(),[i]);Math.ceil(L.length/RO),S.useMemo(()=>{const P=o*RO;return L.slice(P,P+RO)},[L,o]);const q=S.useCallback((P,W)=>{const X=W?P.filter(Me=>Me.time>=W):P,se=6e4,ae=[];let Te=0,oe=0;[...X].sort((Me,he)=>Me.time-he.time).forEach(Me=>{const he=parseFloat(Me.closedPnl||"0"),_e=parseFloat(Me.fee||"0");if(oe+=parseFloat(Me.px)*parseFloat(Me.sz),he!==0){Te+=he-_e;const We=ae.find(Ke=>Ke.coin===Me.coin&&Me.time-Ke.startTime<se);We?(We.totalPnl+=he,We.totalFee+=_e,We.fillCount++):ae.push({coin:Me.coin,startTime:Me.time,totalPnl:he,totalFee:_e,fillCount:1})}});let ke=0,pe=0;ae.forEach(Me=>{const he=Me.totalPnl-Me.totalFee;he>0?ke++:he<0&&pe++});const ze=ke+pe;c({totalPnl:Te,winRate:ze>0?ke/ze*100:0,totalVolume:oe,tradesWithPnl:ae.length})},[]);S.useEffect(()=>{if(!n||!x)return;const P=async()=>{try{if(zt.isDealerActive()){console.log("[Dashboard]   Skipping fetch - dealer is active");return}const X=await zt.getUserFillsShared(n,500);if(X&&Array.isArray(X)){const Te=[...X.filter(oe=>oe.cloid||oe.c)].sort((oe,ve)=>oe.time-ve.time);s(Te),q(Te,g)}const se=await zt.getUserStateShared(n);if(se&&se.assetPositions){const ae=se.assetPositions.reduce((Te,oe)=>Te+parseFloat(oe.position.unrealizedPnl||"0"),0);h(ae)}}catch(X){console.error("Failed to load dealer history",X)}};P();const W=setInterval(P,3e4);return()=>clearInterval(W)},[n,g,x,q]),S.useEffect(()=>{i.length>0&&q(i,g)},[g,i,q]);const K=()=>{e(!t.isOn)},te=()=>{H(P=>Math.min(A.length-1,P+1))},Y=()=>{H(P=>Math.max(0,P-1))};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[u.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[u.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[u.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),u.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),u.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),u.jsx("button",{onClick:K,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:u.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded relative group",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em]",children:"Total Profit"}),u.jsx("button",{onClick:w,className:"p-1 rounded text-[#747580] hover:text-[#E7FE55] hover:bg-[#1a1b21] transition-colors",title:"Reset metrics from now",children:u.jsx(yre,{size:12})})]}),u.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${l.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[l.totalPnl>=0?"+":"",l.totalPnl.toFixed(2)," USD"]}),g&&u.jsxs("div",{className:"text-[8px] text-[#3a3b42] mt-1",title:`Measuring since ${new Date(g).toLocaleString()}`,children:["Since ",new Date(g).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),u.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${d>=0?"text-[#34d399]":"text-red-400"}`,children:[d>=0?"+":"",d.toFixed(2)," USD"]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),u.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[l.winRate.toFixed(1),"%"]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),u.jsx(xd,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Active Pairs"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.tradingPairs.length})]}),u.jsx(Lw,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:dut(t.settings.checkIntervalSeconds)})]}),u.jsx(Qr,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Leverage"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.maxLeverage,"x"]})]}),u.jsx(Bl,{className:"h-4 w-4 text-[#747580]"})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(dn,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),u.jsx("div",{className:"flex-1 w-full",children:$?u.jsx(i1,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:u.jsxs(wfe,{data:D,children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"colorPnl",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),u.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),u.jsx(g1,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),u.jsx(x1,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),u.jsx(v1,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:P=>`${P>=0?"+":""}$${P.toFixed(0)}`}),u.jsx(vk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:(P,W)=>[`${P>=0?"+":""}$${P.toFixed(2)}`,"Realized Profit"]}),u.jsx(ZC,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnl)"})]})}):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[u.jsx(Bl,{className:"h-8 w-8 mb-2 opacity-40"}),u.jsx("span",{className:"text-[11px]",children:"No closed trades yet..."}),u.jsx("span",{className:"text-[9px] opacity-60 mt-1",children:"Chart shows realized profit from closed positions"})]})})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ao,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),u.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[u.jsx("button",{onClick:()=>N(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${T?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),u.jsx("button",{onClick:()=>z&&N(!0),disabled:!z,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${T?"bg-[#E7FE55] text-black":z?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:z?"View AI Summary":`Available after ${2-_} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!T&&u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&A.length>0&&!T&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:te,disabled:G>=A.length-1,className:`p-1 rounded transition-colors ${G>=A.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous coin",children:u.jsx(Dw,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[G+1,"/",A.length]}),u.jsx("button",{onClick:Y,disabled:G<=0,className:`p-1 rounded transition-colors ${G<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next coin",children:u.jsx(rl,{size:16})})]})]}),T?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[_," cycles"]}),j&&u.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),F>0&&u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(F).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:O?u.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:O}):u.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}):I?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider",children:I.coin}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(I.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),((V=I.log.details)==null?void 0:V.signal)&&u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${I.log.details.signal==="BUY"||I.log.details.signal==="LONG"?"bg-[#34d399]/15 text-[#34d399]":I.log.details.signal==="SELL"||I.log.details.signal==="SHORT"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:I.log.details.signal})]}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',((M=I.log.details)==null?void 0:M.fullReason)||I.log.message,'"']})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}),u.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),u.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),u.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),u.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),u.jsx("div",{className:"glass-panel p-5 rounded shrink-0",children:u.jsx(cut,{vaultAddress:n,setActiveTab:r})})]})},hut=({isOpen:t,onClose:e,onSubmit:n,context:r,initialCategory:i="AGREE"})=>{var h;const[s,o]=S.useState(i),[a,l]=S.useState(""),c=()=>{n(s,a),l(""),e()},d=[{id:"AGREE",label:"Good Decision",icon:Im,color:"text-green-400"},{id:"TOO_BULLISH",label:"Too Bullish",icon:Ci,color:"text-amber-400"},{id:"TOO_BEARISH",label:"Too Bearish",icon:Ci,color:"text-amber-400"},{id:"BAD_TIMING",label:"Bad Timing",icon:Qr,color:"text-blue-400"},{id:"WRONG_COIN",label:"Wrong Coin",icon:Rm,color:"text-red-400"}];return u.jsx(Kd,{open:t,onOpenChange:m=>!m&&e(),children:u.jsxs(eu,{className:"sm:max-w-[400px] bg-[#14151a] border-[#232328]",children:[u.jsx(tu,{children:u.jsxs(nu,{className:"flex items-center gap-2 text-white text-sm uppercase tracking-wider",children:[u.jsx(gre,{className:"h-4 w-4 text-[#E7FE55]"}),"Feedback: ",r.action," ",r.coin]})}),u.jsxs("div",{className:"py-4 space-y-4",children:[u.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.map(m=>u.jsxs("button",{onClick:()=>o(m.id),className:`flex items-center gap-2 p-2 rounded border transition-colors text-xs font-medium ${s===m.id?"bg-[#E7FE55]/10 border-[#E7FE55]/50 text-white":"bg-[#1a1b21] border-[#232328] text-[#747580] hover:bg-[#232328] hover:text-[#a0a1a8]"}`,children:[u.jsx(m.icon,{className:`h-3 w-3 ${s===m.id?"text-[#E7FE55]":m.color}`}),m.label]},m.id))}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] text-[10px] text-[#747580] font-mono",children:["At $",((h=r.price)==null?void 0:h.toFixed(2))||"???","  This feedback will adjust future AI bias."]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-wider",children:"Comment (Optional)"}),u.jsx("textarea",{value:a,onChange:m=>l(m.target.value),maxLength:100,placeholder:"Why do you think this?",className:"w-full h-20 bg-[#0f1015] border border-[#232328] rounded p-2 text-xs text-white placeholder:text-[#505158] focus:outline-none focus:border-[#E7FE55]/50 resize-none font-sans"}),u.jsxs("div",{className:"text-[9px] text-[#505158] text-right",children:[a.length,"/100"]})]})]}),u.jsx(Wd,{children:u.jsxs("div",{className:"flex w-full gap-2",children:[u.jsx(_r,{variant:"outline",onClick:e,className:"flex-1 border-[#232328] text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] h-8 text-xs uppercase",children:"Cancel"}),u.jsx(_r,{onClick:c,className:"flex-1 bg-[#E7FE55] hover:bg-[#d6ec4e] text-black h-8 text-xs uppercase font-semibold",children:"Submit Feedback"})]})})]})})},iT="dealer_feedbacks",BZ=5;class put{async submitFeedback(e){var a,l;const n=crypto.randomUUID(),r=Date.now(),i=this.generateContextSummary(e.context),s={};(a=e.context)!=null&&a.indicators&&Object.entries(e.context.indicators).forEach(([c,d])=>{typeof d=="number"?s[c]=d:d!=null&&d.value&&(s[c]=d.value)});const o={id:n,logId:e.logId,coin:e.coin,action:e.action,category:e.category,comment:(l=e.comment)==null?void 0:l.slice(0,100),contextSummary:i,indicatorSnapshot:s,timestamp:r};return await this.saveFeedback(o),console.log(`[DealerFeedback] Submitted feedback for ${e.coin}: ${e.category}`),o}async getActiveFeedbacks(){const e=await Ae.getItem(Ae.getUserKey(iT));if(!e)return[];try{return JSON.parse(e).sort((r,i)=>i.timestamp-r.timestamp)}catch(n){return console.error("[DealerFeedback] Failed to parse feedbacks:",n),[]}}async deleteFeedback(e){const r=(await this.getActiveFeedbacks()).filter(i=>i.id!==e);await Ae.setItem(Ae.getUserKey(iT),JSON.stringify(r))}async clearAllFeedbacks(){await Ae.removeItem(Ae.getUserKey(iT))}async getContextForAI(){const e=await this.getActiveFeedbacks();if(e.length===0)return"";const n=e.slice(0,BZ);let r=`### USER FEEDBACK - LEARN FROM THIS:
`;for(const i of n){const s=Math.round((Date.now()-i.timestamp)/36e5),o=s===0?"< 1h ago":`${s}h ago`;r+=`-  ${i.coin} (${o}): ${this.getCategoryEmoji(i.category)} ${i.category}
`,i.comment&&(r+=`  User Note: "${i.comment}"
`),r+=`  Context: ${i.contextSummary}

`}return r}async saveFeedback(e){const n=await this.getActiveFeedbacks(),r=[e,...n].slice(0,BZ);await Ae.setItem(Ae.getUserKey(iT),JSON.stringify(r))}getCategoryEmoji(e){switch(e){case"TOO_BULLISH":return"";case"TOO_BEARISH":return"";case"BAD_TIMING":return"";case"WRONG_COIN":return"";case"AGREE":return"";default:return""}}generateContextSummary(e){try{const n=[];if(e.currentPrice&&n.push(`Price=$${e.currentPrice}`),e.indicators&&(e.indicators.rsi&&n.push(`RSI=${this.fmt(e.indicators.rsi)}`),e.indicators.macd)){const r=e.indicators.macd,i=typeof r=="number"?r:r.histogram||r.value;n.push(`MACD=${this.fmt(i)}`)}return e.macro&&n.push(`Macro=${e.macro.timeframe}`),n.join(", ")}catch{return"Context unavailable"}}fmt(e){return typeof e=="number"?e.toFixed(2):e!=null&&e.value?Number(e.value).toFixed(2):"?"}}const Ew=new put,mut=Object.freeze(Object.defineProperty({__proto__:null,dealerFeedbackService:Ew},Symbol.toStringTag,{value:"Module"})),gut=({logs:t,onClearLogs:e})=>{var b,w,T,N,O,j;const[n,r]=S.useState(null),[i,s]=S.useState(!1),[o,a]=S.useState(null),[l,c]=S.useState("AGREE"),d=t.filter(_=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(_.type))return!0;if(["INFO","WARNING"].includes(_.type)){const F=_.message.toLowerCase();return F.includes("executing")||F.includes("skipping")||F.includes("ignored")}return!1}),h=(_,F)=>_==="ERROR"?u.jsx("div",{className:"text-red-400",children:u.jsx(Xr,{size:16})}):_==="TRADE"?u.jsx("div",{className:"text-[#34d399]",children:u.jsx(gd,{size:16})}):F.includes("BUY")||F.includes("BULLISH")?u.jsx("div",{className:"text-[#34d399]",children:u.jsx(dn,{size:16})}):F.includes("SELL")||F.includes("BEARISH")||F.includes("SHORT")?u.jsx("div",{className:"text-red-400",children:u.jsx(ld,{size:16})}):F.includes("CLOSE")?u.jsx("div",{className:"text-orange-400",children:u.jsx(Xr,{size:16})}):u.jsx("div",{className:"text-[#E7FE55]",children:u.jsx(ao,{size:16})}),m=_=>new Date(_).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),g=_=>typeof _=="number"?_.toFixed(2):typeof _=="object"&&_!==null?Object.entries(_).map(([F,z])=>`${F}: ${typeof z=="number"?z.toFixed(2):z}`).join(", "):String(_),v=(_,F)=>{a(_),c(F),s(!0)},x=async(_,F)=>{var $,G;if(!o)return;let z="HOLD",D="UNKNOWN";($=o.details)!=null&&$.context&&(z=o.details.context.action||z,D=o.details.context.coin||D),await Ew.submitFeedback({logId:o.id,coin:D,action:z,category:_,comment:F,context:(G=o.details)==null?void 0:G.context})};return u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[u.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[u.jsx(ao,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),u.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:d.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[u.jsx(ao,{size:48,className:"mb-4 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),u.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):d.map(_=>{var G,H;const F=n===_.id,z=(G=_.details)==null?void 0:G.context,D=(H=_.details)==null?void 0:H.context,$=_.type==="REASONING";return u.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[u.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),u.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[h(_.type,_.message),u.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${_.type==="ERROR"?"text-red-400":_.type==="TRADE"?"text-[#34d399]":_.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:_.type})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[$&&u.jsxs("div",{className:"flex items-center gap-1 transition-opacity",children:[u.jsx("button",{onClick:U=>{U.stopPropagation(),v(_,"AGREE")},className:"p-1 hover:bg-[#34d399]/20 rounded text-[#747580] hover:text-[#34d399] transition-colors",title:"Good Decision",children:u.jsx(vre,{size:12})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),v(_,"TOO_BULLISH")},className:"p-1 hover:bg-yellow-400/20 rounded text-[#747580] hover:text-yellow-400 transition-colors",title:"Too Bullish/Bearish",children:u.jsx(ys,{size:12})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),v(_,"BAD_TIMING")},className:"p-1 hover:bg-blue-400/20 rounded text-[#747580] hover:text-blue-400 transition-colors",title:"Bad Timing",children:u.jsx(Qr,{size:12})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),v(_,"WRONG_COIN")},className:"p-1 hover:bg-red-400/20 rounded text-[#747580] hover:text-red-400 transition-colors",title:"Wrong Coin",children:u.jsx(U8,{size:12})})]}),u.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[u.jsx(Qr,{size:10}),m(_.timestamp)]})]})]}),u.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:_.message}),_.details&&_.details.fullReason&&u.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#60a5fa]/30",children:['"',_.details.fullReason,'"']}),z&&u.jsxs("button",{onClick:()=>r(F?null:_.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#60a5fa] hover:text-[#93c5fd] transition-colors uppercase tracking-wider",children:[F?u.jsx(Ah,{size:12}):u.jsx(pa,{size:12}),F?"Hide":"Show"," Analysis Context"]}),F&&z&&u.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[D.indicators&&Object.keys(D.indicators).length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[u.jsx(ys,{size:10}),u.jsx("span",{children:"Indicators Used"})]}),u.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(D.indicators).map(([U,A])=>u.jsxs("div",{className:"flex justify-between bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:U}),u.jsx("span",{className:"text-[#4ade80] font-mono",children:g((A==null?void 0:A.value)||A)})]},U))})]}),D.macro&&Object.keys(D.macro.indicators||{}).length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-400 mb-2 uppercase tracking-wider font-semibold",children:[u.jsx(dn,{size:10}),u.jsxs("span",{children:["Macro Confirmation (",D.macro.timeframe==="15"?"15m":D.macro.timeframe==="60"?"1H":D.macro.timeframe==="240"?"4H":D.macro.timeframe==="D"?"Daily":D.macro.timeframe==="W"?"Weekly":D.macro.timeframe,")"]})]}),u.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(D.macro.indicators).map(([U,A])=>{var Y,V;const I=(V=(Y=D.indicators)==null?void 0:Y[U])==null?void 0:V.value,L=(A==null?void 0:A.value)||A;let q="";const K=typeof I=="number"?I:typeof I=="object"&&I!==null?Object.values(I)[0]:null,te=typeof L=="number"?L:typeof L=="object"&&L!==null?Object.values(L)[0]:null;if(U==="rsi"&&typeof K=="number"&&typeof te=="number"){const M=K>70,P=K<30,W=te>70,X=te<30;M&&X||P&&W?q=" ":(M&&W||P&&X)&&(q=" ")}return u.jsxs("div",{className:"flex justify-between bg-amber-500/10 border border-amber-500/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-amber-400 uppercase font-medium",children:U}),u.jsxs("span",{className:"text-amber-300 font-mono",children:[q,g(L)]})]},U)})})]}),D.tradingCosts&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#747580] mb-2 uppercase tracking-wider font-semibold",children:[u.jsx(Y1,{size:10}),u.jsx("span",{children:"Trading Costs"})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[u.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[u.jsx("span",{className:"text-[#747580]",children:"Maker: "}),u.jsxs("span",{className:"text-white font-mono",children:[((D.tradingCosts.makerFee??2e-4)*100).toFixed(3),"%"]})]}),u.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[u.jsx("span",{className:"text-[#747580]",children:"Taker: "}),u.jsxs("span",{className:"text-white font-mono",children:[((D.tradingCosts.takerFee??5e-4)*100).toFixed(3),"%"]})]}),u.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[u.jsx("span",{className:"text-[#747580]",children:"Funding: "}),u.jsxs("span",{className:(D.tradingCosts.fundingRate??0)>0?"text-red-400 font-mono":"text-[#34d399] font-mono",children:[((D.tradingCosts.fundingRate??0)*100).toFixed(4),"%"]})]})]})]}),D.currentPrice&&u.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Price at analysis: ",u.jsxs("span",{className:"text-white font-mono",children:["$",D.currentPrice.toLocaleString()]})]}),D.enabledIndicators&&D.enabledIndicators.length>0&&u.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Enabled: ",u.jsx("span",{className:"font-mono",children:D.enabledIndicators.join(", ").toUpperCase()})]})]})]})]},_.id)})}),o&&u.jsx(hut,{isOpen:i,onClose:()=>s(!1),onSubmit:x,initialCategory:l,context:{coin:((w=(b=o.details)==null?void 0:b.context)==null?void 0:w.coin)||"Unknown",action:((N=(T=o.details)==null?void 0:T.context)==null?void 0:N.action)||"Unknown",price:(j=(O=o.details)==null?void 0:O.context)==null?void 0:j.currentPrice}})]})},yut=({onClose:t})=>{const[e,n]=S.useState([]),[r,i]=S.useState(!0),s=async()=>{i(!0);const c=await Ew.getActiveFeedbacks();n(c),i(!1)};S.useEffect(()=>{s()},[]);const o=async c=>{await Ew.deleteFeedback(c),await s()},a=async()=>{confirm("Clear all feedback history? This will reset AI bias adjustments.")&&(await Ew.clearAllFeedbacks(),await s())},l=c=>{switch(c){case"AGREE":return u.jsx(Hi,{variant:"success",className:"text-[9px]",children:"AGREE"});case"TOO_BULLISH":return u.jsx(Hi,{variant:"warning",className:"text-[9px]",children:"TOO BULLISH"});case"TOO_BEARISH":return u.jsx(Hi,{variant:"warning",className:"text-[9px]",children:"TOO BEARISH"});case"BAD_TIMING":return u.jsx(Hi,{variant:"outline",className:"text-[9px] bg-blue-500/10 text-blue-400 border-blue-500/20",children:"TIMING"});case"WRONG_COIN":return u.jsx(Hi,{variant:"destructive",className:"text-[9px]",children:"WRONG COIN"});default:return u.jsx(Hi,{variant:"secondary",className:"text-[9px]",children:c})}};return u.jsxs("div",{className:"flex flex-col h-full bg-[#14151a] border-l border-[#232328] w-[300px]",children:[u.jsx("div",{className:"p-4 border-b border-[#232328] flex flex-col gap-1 bg-[#14151a]",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("h3",{className:"text-xs font-semibold text-white uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Im,{className:"h-3 w-3 text-[#E7FE55]"}),"Decision Review",u.jsx(dae,{children:u.jsxs(Ij,{children:[u.jsx(Rj,{asChild:!0,children:u.jsx(J1,{className:"h-3 w-3 text-[#505158] hover:text-[#747580] cursor-help transition-colors"})}),u.jsx(nC,{side:"bottom",className:"max-w-[220px] text-xs",children:"Rate the dealer's trading decisions to fine-tune its behavior. Your reviews influence the AI's analysis in future cycles."})]})})]}),e.length>0&&u.jsx("button",{onClick:a,className:"text-[10px] text-red-400 hover:text-red-300 transition-colors uppercase",children:"Clear All"})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-2 bg-[#0f1015]",children:r?u.jsx("div",{className:"text-center py-8 text-[#747580] text-xs",children:"Loading..."}):e.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-[#747580] gap-2 opacity-60",children:[u.jsx(Im,{className:"h-16 w-16 opacity-20"}),u.jsx("p",{className:"text-[16px]",children:"No active reviews"}),u.jsx("p",{className:"text-[12px] text-center max-w-[180px]",children:`Rate the AI's decisions in the "Thinking" logs to bias future analysis.`})]}):u.jsx(Wi,{children:e.map(c=>u.jsxs(_t.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-[#1a1b21] rounded border border-[#232328] p-3 shadow-sm group",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-bold text-white",children:c.coin}),l(c.category)]}),u.jsx("button",{onClick:()=>o(c.id),className:"text-[#505158] hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",children:u.jsx(Th,{className:"h-3 w-3"})})]}),c.comment&&u.jsxs("p",{className:"text-[11px] text-[#a0a1a8] italic mb-2 leading-relaxed border-l-2 border-[#232328] pl-2",children:['"',c.comment,'"']}),u.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-[#505158] font-mono mt-1",children:[u.jsx(Qr,{className:"h-2.5 w-2.5"}),new Date(c.timestamp).toLocaleDateString([],{day:"2-digit",month:"short"})," ",new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},c.id))})}),u.jsx("div",{className:"p-3 bg-[#1a1b21] border-t border-[#232328] text-[11px] text-[#505158] text-center",children:"Max 5 active reviews"})]})},xut=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=S.useState(!1),s=t.details&&Object.keys(t.details).length>0;return u.jsxs(_t.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[u.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Hi,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),u.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm",children:t.message}),s&&u.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?u.jsx(pa,{className:"h-4 w-4"}):u.jsx(rl,{className:"h-4 w-4"})})]}),u.jsx(Wi,{children:s&&r&&u.jsx(_t.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},vut=({status:t,onClearLogs:e})=>{const[n,r]=S.useState("thinking"),[i,s]=S.useState(!1),o=S.useRef(null),a=()=>{const c=JSON.stringify(t.logs,null,2),d="data:application/json;charset=utf-8,"+encodeURIComponent(c),h=`dealer_logs_${new Date().toISOString()}.json`,m=document.createElement("a");m.setAttribute("href",d),m.setAttribute("download",h),m.click()},l=c=>{switch(c){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";default:return"secondary"}};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[u.jsx("div",{className:"glass-panel p-4 shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[u.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(ao,{className:"h-4 w-4"}),"Thinking"]}),u.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(j8,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&u.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[n==="thinking"&&u.jsxs("button",{onClick:()=>s(!i),className:`p-2 rounded border transition-colors flex items-center gap-2 text-[10px] uppercase tracking-wider font-semibold ${i?"bg-[#E7FE55] text-black border-[#E7FE55]":"bg-[#1a1b21] text-[#747580] border-[#232328] hover:text-white"}`,title:"Rate the dealer's trading decisions to fine-tune its behavior.",children:[u.jsx(h2,{className:"h-4 w-4"}),"Decision Review"]}),u.jsx(Wi,{children:n==="logs"&&u.jsxs(_t.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[u.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:u.jsx(Th,{className:"h-4 w-4"})}),u.jsx("button",{onClick:a,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:u.jsx(Qs,{className:"h-4 w-4"})})]})})]})]})}),u.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex",children:[u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n==="thinking"&&u.jsx(gut,{logs:t.logs,onClearLogs:e}),n==="logs"&&u.jsx("div",{className:"flex-1 min-h-0 relative",children:u.jsx("div",{ref:o,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?u.jsxs(_t.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[u.jsx(PN,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):u.jsx(Wi,{children:t.logs.map((c,d)=>u.jsx(xut,{log:c,index:d,getLogBadgeVariant:l},c.id))})})})]}),u.jsx(Wi,{children:n==="thinking"&&i&&u.jsx(_t.div,{initial:{width:0,opacity:0},animate:{width:300,opacity:1},exit:{width:0,opacity:0},className:"h-full border-l border-[#232328] overflow-hidden",children:u.jsx(yut,{onClose:()=>s(!1)})})})]})]})},eo=({value:t,onChange:e,className:n})=>{const r=1.1.toLocaleString().includes(","),[i,s]=S.useState(t!=null?t.toLocaleString():""),[o,a]=S.useState(!1);S.useEffect(()=>{!o&&t!=null&&s(t.toLocaleString())},[t,o]);const l=()=>{a(!0),t!=null&&s(t.toLocaleString(void 0,{useGrouping:!1,maximumFractionDigits:20}))},c=()=>{a(!1);let d=i;r?d=d.replace(/\./g,"").replace(",","."):d=d.replace(/,/g,"");const h=parseFloat(d);isNaN(h)?t!=null&&s(t.toLocaleString()):(e(h),s(h.toLocaleString()))};return u.jsx("input",{type:"text",className:n,value:i,onChange:d=>s(d.target.value),onFocus:l,onBlur:c,onKeyDown:d=>{d.key==="Enter"&&d.currentTarget.blur()}})},UZ={M:60,H:3600,D:86400,W:604800},sT={M:"Minutes",H:"Hours",D:"Days",W:"Weeks"},but={M:1,H:1,D:1,W:1},ame=({value:t,onChange:e})=>{const[n,r]=S.useState("M"),i=UZ[n],s=t/i,o=but[n],a=h=>{e(h*i)},l=h=>{r(h),e(s*UZ[h])},c=()=>{a(s+o)},d=()=>{a(Math.max(1,s-o))};return u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-10",value:s,onChange:a}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:c,className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:d,className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]}),u.jsxs("select",{value:n,onChange:h=>l(h.target.value),className:"bg-transparent text-[10px] text-[#747580] font-medium uppercase tracking-wider border-none focus:outline-none cursor-pointer hover:text-white transition-colors appearance-none pr-3",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 24 24' fill='none' stroke='%23747580' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right center"},children:[u.jsx("option",{value:"M",className:"bg-[#0f1015]",children:sT.M}),u.jsx("option",{value:"H",className:"bg-[#0f1015]",children:sT.H}),u.jsx("option",{value:"D",className:"bg-[#0f1015]",children:sT.D}),u.jsx("option",{value:"W",className:"bg-[#0f1015]",children:sT.W})]})]})},FZ={rsi:{name:"RSI",key:"rsi",description:"Relative Strength Index",icon:u.jsx(ys,{size:14}),params:[{key:"period",label:"Period",default:14}]},macd:{name:"MACD",key:"macd",description:"Moving Average Convergence Divergence",icon:u.jsx(dn,{size:14}),params:[{key:"fast",label:"Fast",default:12},{key:"slow",label:"Slow",default:26},{key:"signal",label:"Signal",default:9}]},bollinger:{name:"Bollinger",key:"bollinger",description:"Bollinger Bands",icon:u.jsx(Bl,{size:14}),params:[{key:"period",label:"Period",default:20},{key:"stdDev",label:"StdDev",default:2}]},atr:{name:"ATR",key:"atr",description:"Average True Range",icon:u.jsx(Ro,{size:14}),params:[{key:"period",label:"Period",default:14}]},adx:{name:"ADX",key:"adx",description:"Average Directional Index",icon:u.jsx(dn,{size:14}),params:[{key:"period",label:"Period",default:14}]},obv:{name:"OBV",key:"obv",description:"On-Balance Volume",icon:u.jsx(Bl,{size:14}),params:[]},vwap:{name:"VWAP",key:"vwap",description:"Volume Weighted Avg Price",icon:u.jsx(ys,{size:14}),params:[]},ichimoku:{name:"Ichimoku",key:"ichimoku",description:"Ichimoku Cloud",icon:u.jsx(dn,{size:14}),params:[{key:"conversion",label:"Conv",default:9},{key:"base",label:"Base",default:26},{key:"spanB",label:"SpanB",default:52},{key:"displacement",label:"Disp",default:26}]},ema:{name:"EMA",key:"ema",description:"Exponential Moving Average",icon:u.jsx(dn,{size:14}),params:[{key:"period",label:"Period",default:20}]},sma:{name:"SMA",key:"sma",description:"Simple Moving Average",icon:u.jsx(dn,{size:14}),params:[{key:"period",label:"Period",default:20}]},stoch:{name:"Stochastic",key:"stoch",description:"Stochastic Oscillator",icon:u.jsx(ys,{size:14}),params:[{key:"period",label:"Period",default:14},{key:"signalPeriod",label:"Signal",default:3}]}},wut={trend:{bg:"bg-purple-500/10",text:"text-purple-400",border:"border-purple-500/30"},momentum:{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30"},volume:{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/30"},volatility:{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/30"}},Eut={trend:u.jsx(dn,{size:14}),momentum:u.jsx(ys,{size:14}),volume:u.jsx(Bl,{size:14}),volatility:u.jsx(Ro,{size:14})},Sut=({indicatorSettings:t,autonomousMode:e,selectedPreset:n,onUpdateIndicatorSettings:r,onToggleAutonomousMode:i,onSelectPreset:s})=>{const[o,a]=S.useState("trend"),[l,c]=S.useState(null),[d,h]=S.useState([]),[m,g]=S.useState(!1),[v,x]=S.useState(!1),b=S.useMemo(()=>upe(t),[t]),w=S.useMemo(()=>Mnt(t),[t]),T=S.useMemo(()=>dpe(t),[t]),N=D=>{const $=t[D];!XX(t,D)&&!$.enabled||(r({[D]:{...$,enabled:!$.enabled}}),w!=="custom"&&s("custom"))},O=(D,$)=>{const G=t[D];r({[D]:{...G,weight:Math.max(.5,Math.min(2,$))}})},j=(D,$,G)=>{const H=t[D];r({[D]:{...H,params:{...H.params,[$]:G}}})},_=D=>{if(D==="custom")return;const $=Ont(D,t);r($),s(D)},F=()=>{r(ry),s("balanced")},z=async()=>{g(!0),x(!0);const D=[],$=Object.keys(t).filter(G=>t[G].enabled);for(const G of $){const H=FZ[G];D.push({indicator:H.name,value:null,loading:!0}),h([...D]);try{const U=t[G],A=await Co.getIndicator("BTCUSDT",G,"60",U.params);D[D.length-1]={indicator:H.name,value:A.value,loading:!1}}catch(U){D[D.length-1]={indicator:H.name,value:null,loading:!1,error:U.message}}h([...D])}g(!1)};return e?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[u.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-br from-emerald-500/30 to-cyan-500/30 flex items-center justify-center mb-4 border border-emerald-500/20",children:u.jsx(hre,{className:"h-7 w-7 text-emerald-400"})}),u.jsx("h3",{className:"text-white font-semibold mb-2",children:"Autonomous Mode Active"}),u.jsx("p",{className:"text-xs text-gray-400 max-w-[280px] mb-4",children:"AI will analyze market conditions and choose the optimal preset each cycle:"}),u.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-[320px] text-[10px]",children:Object.entries(ad).filter(([D])=>D!=="custom").map(([D,$])=>u.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/30 rounded-lg p-2 text-left",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[u.jsx("span",{children:$.emoji}),u.jsx("span",{className:"text-gray-300 font-medium",children:$.name})]}),u.jsx("div",{className:"text-gray-500",children:$.marketCondition})]},D))})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider font-semibold",children:"Presets"}),u.jsxs("span",{className:`text-[10px] font-mono ${T?"text-orange-400":"text-gray-400"}`,children:[b," / ",Nte," selected"]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Object.entries(ad).filter(([D])=>D!=="custom").map(([D,$])=>u.jsxs("button",{onClick:()=>_(D),className:`px-2 py-1.5 rounded-lg text-[10px] font-medium transition-all border ${w===D?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-gray-800/30 border-gray-700/30 text-gray-400 hover:border-gray-600"}`,title:$.description,children:[u.jsx("span",{className:"mr-1",children:$.emoji}),$.name]},D))}),w==="custom"&&u.jsx("div",{className:"text-[10px] text-gray-500 text-center",children:" Custom configuration"})]}),u.jsx("div",{className:"space-y-2",children:Object.entries(wN).map(([D,$])=>{const G=o===D,H=lpe(t,D),U=cpe(t,D),A=wut[D];return u.jsxs("div",{className:`rounded-lg border ${A.border} overflow-hidden`,children:[u.jsxs("button",{onClick:()=>a(G?null:D),className:`w-full px-3 py-2 flex items-center justify-between ${A.bg}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:A.text,children:Eut[D]}),u.jsx("span",{className:`text-xs font-medium ${A.text}`,children:$.name})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-mono ${U?"bg-orange-500/20 text-orange-400":"bg-gray-700/50 text-gray-400"}`,children:[H,"/",$.maxIndicators]}),G?u.jsx(Ah,{size:14,className:"text-gray-500"}):u.jsx(pa,{size:14,className:"text-gray-500"})]})]}),G&&u.jsx("div",{className:"p-2 space-y-1.5 bg-gray-900/30",children:$.indicators.map(I=>{const L=t[I],q=FZ[I],K=XX(t,I),te=l===I;return u.jsxs("div",{className:`rounded-lg border transition-all ${L.enabled?`${A.border} ${A.bg}`:"border-gray-700/30 bg-gray-800/20"}`,children:[u.jsxs("div",{className:"px-2.5 py-1.5 flex items-center gap-2",children:[u.jsx("button",{onClick:()=>N(I),disabled:!K&&!L.enabled,className:`shrink-0 w-7 h-3.5 rounded-full relative transition-all ${L.enabled?"bg-purple-500":K?"bg-gray-600":"bg-gray-700 opacity-40 cursor-not-allowed"}`,title:!K&&!L.enabled?"Limit reached":void 0,children:u.jsx("div",{className:"absolute top-0.5 w-2.5 h-2.5 rounded-full bg-white transition-all",style:{left:L.enabled?"14px":"2px"}})}),u.jsxs("button",{onClick:()=>c(te?null:I),className:"flex items-center gap-1.5 flex-1 text-left",children:[u.jsx("span",{className:`text-xs font-medium ${L.enabled?"text-white":"text-gray-400"}`,children:q.name}),u.jsx("span",{className:"text-[9px] text-gray-500 truncate",children:q.description})]}),L.enabled&&u.jsxs("span",{className:`text-[9px] font-mono px-1 py-0.5 rounded ${L.weight>1?"bg-green-500/20 text-green-400":L.weight<1?"bg-yellow-500/20 text-yellow-400":"bg-gray-700/50 text-gray-400"}`,children:[L.weight.toFixed(1),""]}),(q.params.length>0||L.enabled)&&u.jsx("button",{onClick:()=>c(te?null:I),children:te?u.jsx(Ah,{size:12,className:"text-gray-500"}):u.jsx(pa,{size:12,className:"text-gray-500"})})]}),te&&u.jsxs("div",{className:"px-2.5 pb-2 pt-1 border-t border-gray-700/30 space-y-2",children:[L.enabled&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-gray-500 w-10",children:"Weight"}),u.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:L.weight,onChange:Y=>O(I,parseFloat(Y.target.value)),className:"flex-1 h-1 bg-gray-700 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-500"}),u.jsxs("span",{className:`text-[10px] font-mono w-8 text-right ${L.weight>1?"text-green-400":L.weight<1?"text-yellow-400":"text-gray-400"}`,children:[L.weight.toFixed(1),""]})]}),q.params.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1.5",children:q.params.map(Y=>u.jsxs("div",{className:"flex items-center gap-1 bg-gray-900/50 px-1.5 py-0.5 rounded",children:[u.jsx("label",{className:"text-[9px] text-gray-400",children:Y.label}),u.jsx("input",{type:"number",value:L.params[Y.key]||Y.default,onChange:V=>j(I,Y.key,parseInt(V.target.value)),className:"w-10 bg-transparent border border-gray-700/50 rounded px-1 py-0.5 text-[9px] text-white focus:outline-none focus:border-purple-500"})]},Y.key))})]})]},I)})})]},D)})}),u.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 border-t border-gray-700/30",children:[u.jsxs("button",{onClick:z,disabled:m||b===0,className:"flex items-center justify-center gap-1.5 bg-[#E7FE55] hover:bg-[#d4e94d] disabled:bg-gray-700 disabled:text-gray-500 text-black px-3 py-1.5 rounded text-[10px] font-bold uppercase tracking-wide transition-all",children:[m?u.jsx(ql,{size:10,className:"animate-spin"}):u.jsx(Ro,{size:10}),"Test (",b,")"]}),u.jsx("button",{onClick:F,className:"px-2 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded text-[10px] transition-all",title:"Reset to Balanced Preset",children:u.jsx(ql,{size:10})})]}),v&&d.length>0&&u.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700/30 p-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:"Results (BTC 1H)"}),u.jsx("button",{onClick:()=>{h([]),x(!1)},className:"text-[9px] text-gray-500 hover:text-gray-300",children:"Clear"})]}),u.jsx("div",{className:"space-y-1",children:d.map((D,$)=>u.jsxs("div",{className:"flex items-center justify-between text-[10px] bg-gray-800/30 px-2 py-1 rounded",children:[u.jsx("span",{className:"text-gray-300",children:D.indicator}),D.loading?u.jsx("span",{className:"text-gray-500",children:"..."}):D.error?u.jsx("span",{className:"text-red-400",title:D.error,children:"ERR"}):u.jsx("span",{className:"text-emerald-400 font-mono",children:typeof D.value=="object"?"":typeof D.value=="number"?D.value.toFixed(2):String(D.value)})]},$))})]})]})},Aut=({status:t,onToggle:e,onUpdateSettings:n,onApplyChanges:r})=>{const i=t.settings,[s,o]=S.useState(i),[a,l]=S.useState(!1);S.useEffect(()=>{o(i)},[JSON.stringify(i)]),S.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(i))},[s,i]);const c=w=>{o(T=>({...T,...w}))},d=()=>{n(s),r()},[h,m]=S.useState([]),[g,v]=S.useState(!1);S.useEffect(()=>{(async()=>{v(!0);try{const T=await zt.getAllAvailableAssets();m(T.sort())}catch(T){console.error("Failed to fetch assets",T)}finally{v(!1)}})()},[]);const x=w=>{s.tradingPairs.includes(w)||c({tradingPairs:[...s.tradingPairs,w]})},b=w=>{c({tradingPairs:s.tradingPairs.filter(T=>T!==w)})};return u.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{className:"glass-panel p-4 rounded",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${t.isOn?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:u.jsx(Ro,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),u.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[u.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.isOn?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),u.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:t.isOn?"Active & Running":"Stopped"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>e(!t.isOn),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${t.isOn?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),u.jsxs("button",{onClick:d,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[u.jsx(ql,{className:"h-3 w-3"})," Apply"]})]})]})}),u.jsxs("div",{className:"glass-panel p-3 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-2",children:[u.jsx(Y1,{className:"h-3 w-3"})," Capital & Risk"]}),u.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Type"}),u.jsxs("div",{className:"flex gap-0.5",children:[u.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Fix"}),u.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Amount ($)"}),s.bankrollType==="MANUAL"?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-24",value:s.manualBankroll||0,onChange:w=>c({manualBankroll:w})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({manualBankroll:(s.manualBankroll||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({manualBankroll:Math.max(0,(s.manualBankroll||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]}):u.jsx("span",{className:"text-sm font-mono text-[#E7FE55]",children:"Auto"})]}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Leverage"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-baseline gap-0.5",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-8",value:s.maxLeverage||1,onChange:w=>c({maxLeverage:w})}),u.jsx("span",{className:"text-[16px] text-[#747580]",children:"x"})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxLeverage:(s.maxLeverage||1)+1}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({maxLeverage:Math.max(1,(s.maxLeverage||1)-1)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Position/Cycle"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-10",value:s.maxOpenPositions||1,onChange:w=>c({maxOpenPositions:w})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxOpenPositions:(s.maxOpenPositions||1)+1}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({maxOpenPositions:Math.max(1,(s.maxOpenPositions||1)-1)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Max Size ($)"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-24",value:s.maxPositionSizeUSDC||0,onChange:w=>c({maxPositionSizeUSDC:w})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxPositionSizeUSDC:(s.maxPositionSizeUSDC||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({maxPositionSizeUSDC:Math.max(0,(s.maxPositionSizeUSDC||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(xd,{className:"h-3 w-3 text-red-400"}),u.jsx("span",{className:"text-[10px] text-[#747580]",children:"STOP LOSS"}),s.stopLossEnabled&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>c({stopLossPercent:Math.max(.5,(s.stopLossPercent??2)-.5)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})}),u.jsx("input",{type:"text",inputMode:"decimal",value:s.stopLossPercent??"",placeholder:"AI",onChange:w=>{const T=w.target.value;if(T===""||T===null)c({stopLossPercent:null});else{const N=parseFloat(T);isNaN(N)||c({stopLossPercent:N})}},className:"w-8 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono text-center focus:outline-none placeholder:text-[#747580]"}),u.jsx("button",{onClick:()=>c({stopLossPercent:(s.stopLossPercent??1.5)+.5}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),u.jsx("button",{onClick:()=>c({stopLossEnabled:!s.stopLossEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.stopLossEnabled?"bg-red-500":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${s.stopLossEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),u.jsx("div",{className:"w-px h-4 bg-[#232328]"}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(sy,{className:"h-3 w-3 text-[#34d399]"}),u.jsx("span",{className:"text-[10px] text-[#747580]",children:"TAKE PROFIT"}),s.takeProfitEnabled&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>c({takeProfitPercent:Math.max(.5,(s.takeProfitPercent??2)-.5)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})}),u.jsx("input",{type:"text",inputMode:"decimal",value:s.takeProfitPercent??"",placeholder:"AI",onChange:w=>{const T=w.target.value;if(T===""||T===null)c({takeProfitPercent:null});else{const N=parseFloat(T);isNaN(N)||c({takeProfitPercent:N})}},className:"w-8 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono text-center focus:outline-none placeholder:text-[#747580]"}),u.jsx("button",{onClick:()=>c({takeProfitPercent:(s.takeProfitPercent??1.5)+.5}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#34d399] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),u.jsx("button",{onClick:()=>c({takeProfitEnabled:!s.takeProfitEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.takeProfitEnabled?"bg-[#34d399]":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${s.takeProfitEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]})]}),u.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",children:[u.jsx(Ro,{className:"h-3 w-3 text-red-400"}),u.jsx("span",{className:"text-[10px] text-[#747580] group-hover:text-white",children:"Aggressive"}),u.jsx("button",{onClick:()=>c({aggressiveMode:!s.aggressiveMode}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.aggressiveMode?"bg-red-500":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${s.aggressiveMode?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(Bl,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Indicators Timeframe"}),u.jsxs("select",{className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none cursor-pointer [&>option]:bg-[#0f1015]",value:s.analysisTimeframe||"60",onChange:w=>c({analysisTimeframe:w.target.value}),children:[u.jsx("option",{value:"1",children:"1m"}),u.jsx("option",{value:"5",children:"5m"}),u.jsx("option",{value:"15",children:"15m"}),u.jsx("option",{value:"60",children:"1H"}),u.jsx("option",{value:"240",children:"4H"}),u.jsx("option",{value:"D",children:"1D"})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Indicators History"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-12",value:s.historyCandles||100,onChange:w=>c({historyCandles:w})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({historyCandles:Math.min(100,(s.historyCandles||100)+10)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({historyCandles:Math.max(10,(s.historyCandles||100)-10)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsxs("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:[u.jsx(Qr,{className:"inline h-3 w-3 mr-1 opacity-50"}),"Interval/Cycle"]}),u.jsx(ame,{value:s.checkIntervalSeconds||60,onChange:w=>c({checkIntervalSeconds:w})})]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(dn,{className:"h-3.5 w-3.5"})," Macro Timeframe"]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("span",{className:"text-[11px] text-[#747580]",children:"Multi-timeframe confirmation"})}),u.jsxs("div",{className:"flex items-center gap-3",children:[s.macroTimeframeEnabled&&u.jsxs("select",{className:"bg-[#0f1015] border border-[#232328] rounded py-1.5 px-2 text-[11px] text-white focus:outline-none focus:border-amber-500 [&>option]:bg-[#0f1015]",value:s.macroTimeframe||"240",onChange:w=>c({macroTimeframe:w.target.value}),children:[u.jsx("option",{value:"15",children:"15m"}),u.jsx("option",{value:"60",children:"1H"}),u.jsx("option",{value:"240",children:"4H"}),u.jsx("option",{value:"D",children:"1D"}),u.jsx("option",{value:"W",children:"1W"})]}),u.jsx("button",{onClick:()=>c({macroTimeframeEnabled:!s.macroTimeframeEnabled}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.macroTimeframeEnabled?"bg-amber-500":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${s.macroTimeframeEnabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),s.macroTimeframeEnabled&&u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[10px] text-[#747580] mb-2 uppercase tracking-wider",children:"Active Indicators:"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Object.entries(s.indicatorSettings).filter(([w,T])=>T.enabled).map(([w,T])=>{var O;const N=(O=s.macroEnabledIndicators)==null?void 0:O.includes(w);return u.jsx("button",{onClick:()=>{const j=s.macroEnabledIndicators||[],_=j.includes(w)?j.filter(F=>F!==w):[...j,w];c({macroEnabledIndicators:_})},className:`
                                                        px-1.5 py-0.5 rounded text-[10px] font-mono border transition-all truncate
                                                        ${N?"bg-amber-500/20 border-amber-500/50 text-amber-300 hover:bg-amber-500/30":"bg-[#0f1015] border-[#232328] text-[#747580] hover:border-[#747580]"}
                                                    `,title:w.toUpperCase(),children:w.toUpperCase()},w)})}),(!s.macroEnabledIndicators||s.macroEnabledIndicators.length===0)&&u.jsxs("div",{className:"text-[10px] text-red-400 mt-2 flex items-center gap-1",children:[u.jsx(xd,{size:10})," No macro indicators selected"]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[u.jsx(sy,{className:"h-3.5 w-3.5"})," Trading Pairs"]}),u.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.tradingPairs.length})]}),u.jsxs("select",{disabled:g,onChange:w=>{w.target.value&&x(w.target.value),w.target.value=""},className:"w-full bg-[#0f1015] border border-[#232328] rounded py-2 px-3 text-[11px] text-[#747580] focus:outline-none focus:text-white focus:border-[#E7FE55] transition-colors [&>option]:bg-[#0f1015] cursor-pointer hover:border-[#E7FE55]/30 mb-3",children:[u.jsx("option",{value:"",children:g?"Loading...":"+ Add Pair..."}),!g&&h.filter(w=>!s.tradingPairs.includes(w)).map(w=>u.jsx("option",{value:w,children:w},w))]}),u.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-[120px] overflow-y-auto custom-scrollbar",children:[s.tradingPairs.map(w=>u.jsxs("span",{className:"inline-flex items-center gap-1 bg-[#1a1b21] hover:bg-[#232328] border border-[#232328] hover:border-[#E7FE55]/50 text-[#a0a1a8] hover:text-white px-2 py-1 rounded text-[10px] font-mono transition-all",children:[w,u.jsx("button",{onClick:()=>b(w),className:"text-[#747580] hover:text-red-400 transition-colors",children:u.jsx(xx,{size:10})})]},w)),s.tradingPairs.length===0&&u.jsxs("div",{className:"w-full py-4 flex flex-col items-center justify-center text-[#747580] opacity-60 border border-dashed border-[#232328] rounded",children:[u.jsx(sy,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-[10px]",children:"No pairs"})]})]})]})]}),u.jsxs("div",{className:"glass-panel rounded flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"p-3 border-b border-[#232328] flex items-center justify-between shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[u.jsx(ys,{className:"h-3.5 w-3.5"})," Indicators"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] text-[#747580]",children:s.autonomousIndicators?"Auto":"Manual"}),u.jsx("button",{onClick:()=>c({autonomousIndicators:!s.autonomousIndicators}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.autonomousIndicators?"bg-[#34d399]":"bg-[#E7FE55]"}`,title:s.autonomousIndicators?"AI selects indicators":"Manual selection",children:u.jsx("span",{className:`${s.autonomousIndicators?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),u.jsx("div",{className:"p-4",children:u.jsx(Sut,{indicatorSettings:s.indicatorSettings,autonomousMode:s.autonomousIndicators,selectedPreset:s.selectedPreset||"balanced",onUpdateIndicatorSettings:w=>{c({indicatorSettings:{...s.indicatorSettings,...w}})},onToggleAutonomousMode:w=>{c({autonomousIndicators:w})},onSelectPreset:w=>{c({selectedPreset:w})}})})]})]})})},Tut=({status:t,onSaveStrategy:e,onUpdateSettings:n})=>{var b,w;S.useEffect(()=>{console.log("DealerPromptPage Mounted. Status:",t)},[t]);const r=t==null?void 0:t.settings;if(!r)return u.jsx("div",{className:"p-8 text-red-500",children:"Error: Dealer settings not loaded."});const[i,s]=S.useState(r.strategyPrompt||""),[o,a]=S.useState(r.promptMode||"preset"),[l,c]=S.useState(r.selectedPreset||"balanced"),[d,h]=S.useState(!1);S.useEffect(()=>{s(r.strategyPrompt),a(r.promptMode||"preset"),c(r.selectedPreset||"balanced")},[r.strategyPrompt,r.promptMode,r.selectedPreset]);const m=T=>{if(T==="custom")a("custom"),c("custom"),h(!0);else{const N=T4[T];s(N),a("preset"),c(T),h(N!==r.strategyPrompt)}},g=T=>{const N=T.target.value;s(N);const O=Object.entries(T4).find(([j,_])=>_===N);O?(a("preset"),c(O[0])):(a("custom"),c("custom")),h(N!==r.strategyPrompt)},v=()=>{e(i),n&&n({promptMode:o,selectedPreset:l,strategyPrompt:i}),h(!1)},x=T=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${l===T&&o==="preset"||o==="custom"&&T==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return u.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[u.jsx("div",{className:"glass-panel p-4 shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Bw,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),u.jsx("span",{className:"text-[12px] text-[#747580] font-medium leading-tight",children:"Presets are examples only. You are responsible for your strategy prompt."})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${o==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[u.jsx("span",{className:`h-1 w-1 rounded-full ${o==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),o==="preset"?`${(b=ad[l])==null?void 0:b.emoji} ${(w=ad[l])==null?void 0:w.name}`:"Custom"]}),d&&u.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"}),u.jsxs("button",{onClick:v,disabled:!d,className:`
                                flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                                ${d?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                            `,children:[u.jsx(D8,{className:"h-3.5 w-3.5"}),"Save"]})]})]})}),u.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[u.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[u.jsx(bre,{size:12,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(ad).filter(([T])=>T!=="custom").map(([T,N])=>u.jsxs("button",{onClick:()=>m(T),className:x(T),children:[u.jsx("span",{children:N.emoji}),u.jsx("span",{children:N.name})]},T)),u.jsx("div",{className:"h-px bg-[#232328] my-2"}),u.jsxs("button",{onClick:()=>m("custom"),className:x("custom"),children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Custom"})]})]}),u.jsx("div",{className:"mt-auto pt-4 px-1",children:u.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),u.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),u.jsx("textarea",{value:i,onChange:g,className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your trading strategy here...
// 
// Example:
// You are a conservative trader focusing on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`}),u.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),u.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[u.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),u.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})};function $Z(t){const e=kut(t),n=S.forwardRef((r,i)=>{const{children:s,...o}=r,a=S.Children.toArray(s),l=a.find(Cut);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function kut(t){const e=S.forwardRef((n,r)=>{const{children:i,...s}=n;if(S.isValidElement(i)){const o=_ut(i),a=Put(s,i.props);return i.type!==S.Fragment&&(a.ref=r?iv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Nut=Symbol("radix.slottable");function Cut(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Nut}function Put(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function _ut(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function lme(t){const e=t+"CollectionProvider",[n,r]=r0(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:b,children:w}=x,T=Ls.useRef(null),N=Ls.useRef(new Map).current;return u.jsx(i,{scope:b,itemMap:N,collectionRef:T,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=$Z(a),c=Ls.forwardRef((x,b)=>{const{scope:w,children:T}=x,N=s(a,w),O=Ir(b,N.collectionRef);return u.jsx(l,{ref:O,children:T})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=$Z(d),g=Ls.forwardRef((x,b)=>{const{scope:w,children:T,...N}=x,O=Ls.useRef(null),j=Ir(b,O),_=s(d,w);return Ls.useEffect(()=>(_.itemMap.set(O,{ref:O,...N}),()=>void _.itemMap.delete(O))),u.jsx(m,{[h]:"",ref:j,children:T})});g.displayName=d;function v(x){const b=s(t+"CollectionConsumer",x);return Ls.useCallback(()=>{const T=b.collectionRef.current;if(!T)return[];const N=Array.from(T.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((_,F)=>N.indexOf(_.ref.current)-N.indexOf(F.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var Iut=S.createContext(void 0);function v7(t){const e=S.useContext(Iut);return t||e||"ltr"}var OO="rovingFocusGroup.onEntryFocus",Rut={bubbles:!1,cancelable:!0},ME="RovingFocusGroup",[TD,cme,Out]=lme(ME),[Mut,ume]=r0(ME,[Out]),[Lut,Dut]=Mut(ME),dme=S.forwardRef((t,e)=>u.jsx(TD.Provider,{scope:t.__scopeRovingFocusGroup,children:u.jsx(TD.Slot,{scope:t.__scopeRovingFocusGroup,children:u.jsx(jut,{...t,ref:e})})}));dme.displayName=ME;var jut=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...h}=t,m=S.useRef(null),g=Ir(e,m),v=v7(s),[x,b]=Ix({prop:o,defaultProp:a??null,onChange:l,caller:ME}),[w,T]=S.useState(!1),N=Nh(c),O=cme(n),j=S.useRef(!1),[_,F]=S.useState(0);return S.useEffect(()=>{const z=m.current;if(z)return z.addEventListener(OO,N),()=>z.removeEventListener(OO,N)},[N]),u.jsx(Lut,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:x,onItemFocus:S.useCallback(z=>b(z),[b]),onItemShiftTab:S.useCallback(()=>T(!0),[]),onFocusableItemAdd:S.useCallback(()=>F(z=>z+1),[]),onFocusableItemRemove:S.useCallback(()=>F(z=>z-1),[]),children:u.jsx(Mn.div,{tabIndex:w||_===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:mn(t.onMouseDown,()=>{j.current=!0}),onFocus:mn(t.onFocus,z=>{const D=!j.current;if(z.target===z.currentTarget&&D&&!w){const $=new CustomEvent(OO,Rut);if(z.currentTarget.dispatchEvent($),!$.defaultPrevented){const G=O().filter(L=>L.focusable),H=G.find(L=>L.active),U=G.find(L=>L.id===x),I=[H,U,...G].filter(Boolean).map(L=>L.ref.current);pme(I,d)}}j.current=!1}),onBlur:mn(t.onBlur,()=>T(!1))})})}),fme="RovingFocusGroupItem",hme=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=dd(),c=s||l,d=Dut(fme,n),h=d.currentTabStopId===c,m=cme(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:x}=d;return S.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),u.jsx(TD.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:u.jsx(Mn.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:mn(t.onMouseDown,b=>{r?d.onItemFocus(c):b.preventDefault()}),onFocus:mn(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:mn(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=Fut(b,d.orientation,d.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let N=m().filter(O=>O.focusable).map(O=>O.ref.current);if(w==="last")N.reverse();else if(w==="prev"||w==="next"){w==="prev"&&N.reverse();const O=N.indexOf(b.currentTarget);N=d.loop?$ut(N,O+1):N.slice(O+1)}setTimeout(()=>pme(N))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:x!=null}):o})})});hme.displayName=fme;var But={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Uut(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Fut(t,e,n){const r=Uut(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return But[r]}function pme(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function $ut(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var zut=dme,Vut=hme,gP="Tabs",[Hut]=r0(gP,[ume]),mme=ume(),[qut,b7]=Hut(gP),gme=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,d=v7(a),[h,m]=Ix({prop:r,onChange:i,defaultProp:s??"",caller:gP});return u.jsx(qut,{scope:n,baseId:dd(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:l,children:u.jsx(Mn.div,{dir:d,"data-orientation":o,...c,ref:e})})});gme.displayName=gP;var yme="TabsList",xme=S.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=b7(yme,n),o=mme(n);return u.jsx(zut,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:u.jsx(Mn.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});xme.displayName=yme;var vme="TabsTrigger",bme=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=b7(vme,n),a=mme(n),l=Sme(o.baseId,r),c=Ame(o.baseId,r),d=r===o.value;return u.jsx(Vut,{asChild:!0,...a,focusable:!i,active:d,children:u.jsx(Mn.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:mn(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:mn(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:mn(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(r)})})})});bme.displayName=vme;var wme="TabsContent",Eme=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=b7(wme,n),l=Sme(a.baseId,r),c=Ame(a.baseId,r),d=r===a.value,h=S.useRef(d);return S.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),u.jsx(s0,{present:i||d,children:({present:m})=>u.jsx(Mn.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&s})})});Eme.displayName=wme;function Sme(t,e){return`${t}-trigger-${e}`}function Ame(t,e){return`${t}-content-${e}`}var Gut=gme,Tme=xme,kme=bme,Nme=Eme;const Cme=Gut,Kut=S.forwardRef(({className:t,...e},n)=>u.jsx(Tme,{ref:n,className:kt("inline-flex h-9 items-center justify-center rounded bg-[#1a1b21] p-1 text-[#747580] border border-[#232328]",t),...e}));Kut.displayName=Tme.displayName;const Wut=S.forwardRef(({className:t,...e},n)=>u.jsx(kme,{ref:n,className:kt("inline-flex items-center justify-center whitespace-nowrap rounded px-4 py-1.5 text-[11px] font-medium uppercase tracking-[0.05em] ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[#E7FE55] data-[state=active]:text-black data-[state=active]:shadow-sm hover:text-[#a0a1a8]",t),...e}));Wut.displayName=kme.displayName;const sd=S.forwardRef(({className:t,...e},n)=>u.jsx(Nme,{ref:n,className:kt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));sd.displayName=Nme.displayName;const Yut=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.hlPublicKey,s=n===be.VAULT_DEALER?be.DEALER_DASHBOARD:n,{isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:d,currentSignal:h,trendAssessment:m,pendingExecution:g,currentExposure:v,activePositions:x,portfolioValue:b,lastSyncTimestamp:w,settings:T,logs:N,operationHistory:O,toggleDealer:j,updateSettings:_,applyChanges:F,saveStrategy:z,clearLogs:D}=lut(t,e),$={isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:d,currentSignal:h,trendAssessment:m,pendingExecution:g,currentExposure:v,activePositions:x,portfolioValue:b,lastSyncTimestamp:w,settings:T,logs:N,operationHistory:O},G=()=>{switch(s){case be.DEALER_DASHBOARD:return"dashboard";case be.DEALER_THINKING:return"thinking";case be.DEALER_CONFIG:return"config";case be.DEALER_PROMPT:return"prompt";default:return"dashboard"}},H=U=>{switch(U){case"dashboard":r(be.DEALER_DASHBOARD);break;case"thinking":r(be.DEALER_THINKING);break;case"config":r(be.DEALER_CONFIG);break;case"prompt":r(be.DEALER_PROMPT);break}};return i?u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&u.jsx(_t.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:u.jsx(Hi,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),u.jsx(Cme,{value:G(),onValueChange:H,className:"flex-1 flex flex-col min-h-0",children:u.jsxs("div",{className:"flex-1 min-h-0 relative",children:[u.jsx(sd,{value:"dashboard",className:"h-full mt-0 absolute inset-0",children:u.jsx(fut,{status:$,onToggle:j,vaultAddress:t.hlPublicKey,setActiveTab:r})}),u.jsx(sd,{value:"thinking",className:"h-full mt-0 absolute inset-0",children:u.jsx(vut,{status:$,onClearLogs:D})}),u.jsx(sd,{value:"config",className:"h-full mt-0 absolute inset-0 overflow-y-auto",children:u.jsx(Aut,{status:$,onToggle:j,onUpdateSettings:_,onApplyChanges:F,onSaveStrategy:z})}),u.jsx(sd,{value:"prompt",className:"h-full mt-0 absolute inset-0",children:u.jsx(Tut,{status:$,onSaveStrategy:z,onUpdateSettings:_})})]})})]}):u.jsx(_t.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:u.jsx(dn,{size:32,className:"text-[#34d399]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),u.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Hyperliquid wallet before using Hyperliquid Dealer. Go to the ",u.jsx("span",{className:"text-[#34d399]",children:"Vault"})," page to set up your wallet."]}),u.jsx(_r,{onClick:()=>r(be.VAULT),variant:"success",size:"lg",className:"mt-4",children:"Go to Vault"})]})})},Jut=({vault:t,connectHLOwnerWallet:e,refreshHLBalance:n,activityLog:r=[]})=>{var U;const[i,s]=S.useState([]),[o,a]=S.useState([]),[l,c]=S.useState(new Map),[d,h]=S.useState([]),[m,g]=S.useState(""),[v,x]=S.useState(!1),[b,w]=S.useState(Date.now()),[T,N]=S.useState(!0),[O,j]=S.useState(null),_=async A=>{try{await navigator.clipboard.writeText(A),j(A),setTimeout(()=>j(null),2e3)}catch(I){console.error("Failed to copy:",I)}},F=S.useCallback(async()=>{if(t.hlPublicKey){x(!0);try{await n(t.hlPublicKey);const I=(await Un.getUserState(t.hlPublicKey)).assetPositions.filter(P=>parseFloat(P.position.szi)!==0);s(I);const L=await Un.getOpenOrders(t.hlPublicKey);a(L);const q=await Un.getAvailableAssets();h(q);const K=new Set([...I.map(P=>P.position.coin)]);["BTC","ETH","SOL","BNB","DOGE","AVAX","MATIC","ARB","OP","APT"].forEach(P=>K.add(P));const Y=[...K].slice(0,15).map(async P=>{var W,X,se,ae;try{const Te=await Un.getMarketData(P),oe=parseFloat(((X=(W=Te.levels[0])==null?void 0:W[0])==null?void 0:X.px)||0),ve=parseFloat(((ae=(se=Te.levels[1])==null?void 0:se[0])==null?void 0:ae.px)||0),ke=ve-oe,pe=oe>0?ke/oe*100:0;return{coin:P,bid:oe,ask:ve,spread:ke,spreadPercent:pe,lastUpdate:Date.now()}}catch(Te){return console.error(`Failed to fetch market data for ${P}`,Te),null}}),V=await Promise.all(Y),M=new Map;V.forEach(P=>{P&&M.set(P.coin,P)}),c(M),w(Date.now())}catch(A){console.error("Failed to fetch HL data",A)}finally{x(!1)}}},[t.hlPublicKey,n]);S.useEffect(()=>{t.hlPublicKey&&F()},[t.hlPublicKey]),S.useEffect(()=>{if(!T||!t.hlPublicKey)return;const A=setInterval(()=>{F()},6e4);return()=>clearInterval(A)},[T,t.hlPublicKey,F]);const z=i.reduce((A,I)=>A+parseFloat(I.position.unrealizedPnl||0),0),D=i.reduce((A,I)=>{const L=Math.abs(parseFloat(I.position.szi)),q=parseFloat(I.position.entryPx);return A+L*q},0),$=d.filter(A=>A.toLowerCase().includes(m.toLowerCase())),G=new Set(i.map(A=>A.position.coin)),H=r.filter(A=>A.network==="hyperliquid"||A.type==="HL Order"||A.type.startsWith("HL"));return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center group",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:u.jsx(kh,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Balance"})}),u.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",((U=t.hlBalance)==null?void 0:U.toFixed(2))||"0.00"]}),u.jsx("div",{className:"text-[11px] text-[#747580] mb-3",children:"USDC"}),u.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"autoRefresh",checked:T,onChange:A=>N(A.target.checked),className:"w-3.5 h-3.5 rounded border-[#232328] bg-[#1a1b21] key-emerald-600 focus:ring-emerald-500"}),u.jsx("label",{htmlFor:"autoRefresh",className:"text-[10px] text-[#747580] cursor-pointer",children:"Auto-refresh"})]}),u.jsx("button",{onClick:F,disabled:v,className:"p-1.5 hover:bg-[#1a1b21] rounded transition-colors text-[#E7FE55] hover:text-[#f0ff85] disabled:opacity-50",title:"Refresh now",children:u.jsx(ql,{size:14,className:v?"animate-spin":""})})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(dn,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Position Value"})}),u.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",D.toFixed(2)]}),u.jsxs("div",{className:"flex items-center justify-between mt-1",children:[u.jsxs("div",{className:"text-[11px] text-[#747580]",children:[i.length," open position",i.length!==1?"s":""]}),u.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[u.jsx(dn,{size:10})," Hyperliquid"]})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:z>=0?u.jsx(dn,{size:48,className:"text-white"}):u.jsx(ld,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Unrealized PnL"})}),u.jsxs("div",{className:`text-2xl lg:text-3xl font-semibold tracking-tight mb-1 ${z>=0?"text-[#34d399]":"text-red-400"}`,children:[z>=0?"+":"",z.toFixed(2)]}),u.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"USDC"})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(kh,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Address"})}),t.hlPublicKey?u.jsxs("div",{onClick:()=>_(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-sm font-mono text-white truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),O===t.hlPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):u.jsx("div",{className:"text-sm font-mono text-white mb-1 truncate",children:"Not Available"}),u.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:b&&`Updated ${new Date(b).toLocaleTimeString()}`})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(ys,{size:18,className:"text-[#E7FE55]"}),"Open Positions"]}),u.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[i.length," active"]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),u.jsx("th",{className:"py-3 font-medium",children:"Side"}),u.jsx("th",{className:"py-3 font-medium",children:"Size"}),u.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Current Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),u.jsx("th",{className:"py-3 font-medium",children:"Margin Type"}),u.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Unrealized PnL"}),u.jsx("th",{className:"py-3 pr-4 font-medium",children:"ROE"})]})}),u.jsx("tbody",{className:"text-sm",children:i.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:10,className:"p-8 text-center text-slate-500",children:"No open positions"})}):i.map((A,I)=>{var se,ae;const L=parseFloat(A.position.szi)>0,q=Math.abs(parseFloat(A.position.szi)),K=parseFloat(A.position.entryPx),te=parseFloat(A.position.unrealizedPnl),Y=parseFloat(A.position.returnOnEquity),V=((se=A.position.leverage)==null?void 0:se.value)||1,M=((ae=A.position.leverage)==null?void 0:ae.type)||"cross",P=A.position.liquidationPx,W=l.get(A.position.coin),X=L?W==null?void 0:W.bid:W==null?void 0:W.ask;return u.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[u.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:A.position.coin}),u.jsx("td",{className:`py-3 font-semibold ${L?"text-[#34d399]":"text-red-400"}`,children:L?"LONG":"SHORT"}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:q.toFixed(4)}),u.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",K]}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:X?`$${X.toFixed(2)}`:"-"}),u.jsxs("td",{className:"py-3 text-[#E7FE55] font-medium",children:[V,"x"]}),u.jsx("td",{className:"py-3",children:u.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-medium uppercase tracking-wider ${M==="isolated"?"bg-purple-500/15 text-purple-400":"bg-blue-500/15 text-blue-400"}`,children:M})}),u.jsx("td",{className:"py-3 text-red-400/80",children:P?`$${parseFloat(P).toFixed(2)}`:"-"}),u.jsxs("td",{className:`py-3 font-semibold ${te>=0?"text-[#34d399]":"text-red-400"}`,children:[te>=0?"+":"",te.toFixed(2)]}),u.jsxs("td",{className:`py-3 pr-4 font-medium ${Y>=0?"text-[#34d399]":"text-red-400"}`,children:[Y>=0?"+":"",(Y*100).toFixed(2),"%"]})]},I)})})]})})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(Ci,{size:18,className:"text-yellow-500"}),"Open Orders"]}),u.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[o.length," pending"]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),u.jsx("th",{className:"py-3 font-medium",children:"Side"}),u.jsx("th",{className:"py-3 font-medium",children:"Size"}),u.jsx("th",{className:"py-3 font-medium",children:"Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Type"})]})}),u.jsx("tbody",{className:"text-sm",children:o.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No open orders"})}):o.map((A,I)=>u.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21]",children:[u.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:A.coin}),u.jsx("td",{className:`py-3 font-medium ${A.side==="B"?"text-[#34d399]":"text-red-400"}`,children:A.side==="B"?"BUY":"SELL"}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:A.sz}),u.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",A.limitPx]}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:A.orderType})]},I))})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"flex items-center justify-between mb-4 border-b border-[#232328] pb-2",children:u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(ys,{size:18,className:"text-[#E7FE55]"}),"Recent Activity"]})}),u.jsx("div",{className:"flex-1",children:H.length===0?u.jsx("div",{className:"text-center py-8 text-[#747580] text-sm",children:"No recent transactions"}):u.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:H.slice(0,15).map((A,I)=>u.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328]/50 last:border-0 border-dashed",children:[u.jsx("div",{className:"mt-1 p-1.5 rounded-full bg-[#E7FE55]/15 text-[#E7FE55]",children:u.jsx(ys,{size:12})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start gap-2",children:[u.jsx("span",{className:"text-xs font-medium text-[#E7FE55]",children:A.type}),u.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:new Date(A.timestamp).toLocaleTimeString()})]}),u.jsx("div",{className:"text-[11px] text-[#a0a1a8] truncate mt-0.5",children:A.desc}),A.signature&&A.signature!=="pending"&&u.jsxs("div",{className:"text-[9px] text-[#747580] font-mono mt-1 hover:text-[#E7FE55] cursor-pointer transition-colors",children:[A.signature.slice(0,6),"..."]})]})]},I))})})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-[#232328] pb-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(dn,{size:18,className:"text-[#E7FE55]"}),"Market Data"]}),u.jsxs("span",{className:"text-[10px] text-[#747580] mt-1",children:[$.length," assets"]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(B8,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#747580]",size:14}),u.jsx("input",{type:"text",placeholder:"Search assets...",value:m,onChange:A=>g(A.target.value),className:"w-48 pl-9 pr-3 py-1.5 bg-[#14151a] border border-[#232328] text-white rounded text-xs focus:outline-none focus:border-[#E7FE55]"})]})]}),u.jsx("div",{className:"overflow-x-auto max-h-96 custom-scrollbar",children:u.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[u.jsx("thead",{className:"sticky top-0 bg-[#0c0d10] z-10",children:u.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"py-2 pl-2 font-medium",children:"Asset"}),u.jsx("th",{className:"py-2 font-medium",children:"Bid"}),u.jsx("th",{className:"py-2 font-medium",children:"Ask"}),u.jsx("th",{className:"py-2 font-medium",children:"Spread %"})]})}),u.jsx("tbody",{className:"text-sm",children:$.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"py-8 text-center text-[#747580]",children:"No assets found"})}):$.slice(0,20).map(A=>{const I=l.get(A),L=G.has(A);return u.jsxs("tr",{className:`border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors ${L?"bg-[#E7FE55]/5":""}`,children:[u.jsxs("td",{className:"py-2 pl-2 font-medium text-white flex items-center gap-2",children:[A,L&&u.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]",title:"Open Position"})]}),u.jsx("td",{className:"py-2 text-[#34d399] font-medium",children:I?`$${I.bid.toFixed(2)}`:"-"}),u.jsx("td",{className:"py-2 text-red-400 font-medium",children:I?`$${I.ask.toFixed(2)}`:"-"}),u.jsx("td",{className:"py-2 text-[#a0a1a8]",children:I?`${I.spreadPercent.toFixed(3)}%`:"-"})]},A)})})]})})]})]})]})},Xut=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r,onClose:i})=>{const s=async()=>{try{await navigator.clipboard.writeText(t),r("Private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},o=()=>{e(""),n(!1),r("Solana backup confirmed!"),i&&i()};return u.jsx(Kd,{open:!0,onOpenChange:()=>{},children:u.jsxs(eu,{className:"max-w-md",onPointerDownOutside:a=>a.preventDefault(),children:[u.jsxs(tu,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:u.jsx(xd,{className:"text-purple-400 w-5 h-5"})}),u.jsx("div",{children:u.jsxs(nu,{className:"flex items-center gap-2",children:["Backup Your Solana Key",u.jsx(Hi,{variant:"purple",children:"CRITICAL"})]})})]}),u.jsx(Yd,{children:"This is your Solana wallet private key. Save it securely - you will NOT see it again."})]}),u.jsxs(_t.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[u.jsx(Ci,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),u.jsxs("p",{className:"text-red-400 text-sm",children:[u.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[u.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key"}),u.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),u.jsxs(_r,{onClick:s,variant:"outline",className:"w-full",children:[u.jsx(Em,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),u.jsx(Wd,{children:u.jsx(_r,{onClick:o,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},Qut=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Hyperliquid private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Hyperliquid backup confirmed!")};return u.jsx(Kd,{open:!0,onOpenChange:()=>{},children:u.jsxs(eu,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[u.jsxs(tu,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center",children:u.jsx(xd,{className:"text-emerald-400 w-5 h-5"})}),u.jsx("div",{children:u.jsxs(nu,{className:"flex items-center gap-2",children:["Backup Your Hyperliquid Key",u.jsx(Hi,{variant:"success",children:"CRITICAL"})]})})]}),u.jsx(Yd,{children:"This is your Hyperliquid (EVM) wallet private key. Save it securely - you will NOT see it again."})]}),u.jsxs(_t.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[u.jsx(Ci,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),u.jsxs("p",{className:"text-red-400 text-sm",children:[u.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[u.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (EVM)"}),u.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),u.jsxs(_r,{onClick:i,variant:"outline",className:"w-full",children:[u.jsx(Em,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),u.jsx(Wd,{children:u.jsx(_r,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},Zut=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Polymarket private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Polymarket backup confirmed!")};return u.jsx(Kd,{open:!0,onOpenChange:()=>{},children:u.jsxs(eu,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[u.jsxs(tu,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:u.jsx(xd,{className:"text-purple-400 w-5 h-5"})}),u.jsx("div",{children:u.jsxs(nu,{className:"flex items-center gap-2",children:["Backup Your Polymarket Key",u.jsx(Hi,{variant:"destructive",children:"CRITICAL"})]})})]}),u.jsx(Yd,{children:"This is your Polymarket (Polygon) wallet private key. Save it securely - you will NOT see it again."})]}),u.jsxs(_t.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[u.jsx(Ci,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),u.jsxs("p",{className:"text-red-400 text-sm",children:[u.jsx("strong",{children:"Warning:"})," Anyone with this key can access your Polygon funds. Never share it with anyone."]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[u.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (Polygon EVM)"}),u.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),u.jsxs(_r,{onClick:i,variant:"outline",className:"w-full",children:[u.jsx(Em,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),u.jsx(Wd,{children:u.jsx(_r,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},vg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function LE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kD(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function u0(t,...e){if(!LE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Pme(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");kD(t.outputLen),kD(t.blockLen)}function Xk(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function edt(t,e){u0(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function $x(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function MO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function lc(t,e){return t<<32-e|t>>>e}const _me=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",tdt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _m(t){if(u0(t),_me)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=tdt[t[n]];return e}const Nu={_0:48,_9:57,A:65,F:70,a:97,f:102};function zZ(t){if(t>=Nu._0&&t<=Nu._9)return t-Nu._0;if(t>=Nu.A&&t<=Nu.F)return t-(Nu.A-10);if(t>=Nu.a&&t<=Nu.f)return t-(Nu.a-10)}function Qk(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(_me)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=zZ(t.charCodeAt(s)),a=zZ(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function ndt(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function w7(t){return typeof t=="string"&&(t=ndt(t)),u0(t),t}function Pc(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];u0(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class Ime{}function Rme(t){const e=r=>t().update(w7(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function E7(t=32){if(vg&&typeof vg.getRandomValues=="function")return vg.getRandomValues(new Uint8Array(t));if(vg&&typeof vg.randomBytes=="function")return Uint8Array.from(vg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function rdt(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}function idt(t,e,n){return t&e^~t&n}function sdt(t,e,n){return t&e^t&n^e&n}class Ome extends Ime{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=MO(this.buffer)}update(e){Xk(this),e=w7(e),u0(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=MO(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Xk(this),edt(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,$x(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;rdt(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=MO(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Rf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ss=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),oT=BigInt(2**32-1),VZ=BigInt(32);function odt(t,e=!1){return e?{h:Number(t&oT),l:Number(t>>VZ&oT)}:{h:Number(t>>VZ&oT)|0,l:Number(t&oT)|0}}function adt(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=odt(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const HZ=(t,e,n)=>t>>>n,qZ=(t,e,n)=>t<<32-n|e>>>n,bg=(t,e,n)=>t>>>n|e<<32-n,wg=(t,e,n)=>t<<32-n|e>>>n,aT=(t,e,n)=>t<<64-n|e>>>n-32,lT=(t,e,n)=>t>>>n-32|e<<64-n;function Cu(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const ldt=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),cdt=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,udt=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),ddt=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,fdt=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),hdt=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,pdt=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Of=new Uint32Array(64);class mdt extends Ome{constructor(e=32){super(64,e,8,!1),this.A=Rf[0]|0,this.B=Rf[1]|0,this.C=Rf[2]|0,this.D=Rf[3]|0,this.E=Rf[4]|0,this.F=Rf[5]|0,this.G=Rf[6]|0,this.H=Rf[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)Of[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=Of[h-15],g=Of[h-2],v=lc(m,7)^lc(m,18)^m>>>3,x=lc(g,17)^lc(g,19)^g>>>10;Of[h]=x+Of[h-7]+v+Of[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:d}=this;for(let h=0;h<64;h++){const m=lc(a,6)^lc(a,11)^lc(a,25),g=d+m+idt(a,l,c)+pdt[h]+Of[h]|0,x=(lc(r,2)^lc(r,13)^lc(r,22))+sdt(r,i,s)|0;d=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+x|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,l,c,d)}roundClean(){$x(Of)}destroy(){this.set(0,0,0,0,0,0,0,0),$x(this.buffer)}}const Mme=adt(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),gdt=Mme[0],ydt=Mme[1],Mf=new Uint32Array(80),Lf=new Uint32Array(80);class xdt extends Ome{constructor(e=64){super(128,e,16,!1),this.Ah=Ss[0]|0,this.Al=Ss[1]|0,this.Bh=Ss[2]|0,this.Bl=Ss[3]|0,this.Ch=Ss[4]|0,this.Cl=Ss[5]|0,this.Dh=Ss[6]|0,this.Dl=Ss[7]|0,this.Eh=Ss[8]|0,this.El=Ss[9]|0,this.Fh=Ss[10]|0,this.Fl=Ss[11]|0,this.Gh=Ss[12]|0,this.Gl=Ss[13]|0,this.Hh=Ss[14]|0,this.Hl=Ss[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:d,Fh:h,Fl:m,Gh:g,Gl:v,Hh:x,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b]}set(e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=d|0,this.Fh=h|0,this.Fl=m|0,this.Gh=g|0,this.Gl=v|0,this.Hh=x|0,this.Hl=b|0}process(e,n){for(let N=0;N<16;N++,n+=4)Mf[N]=e.getUint32(n),Lf[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const O=Mf[N-15]|0,j=Lf[N-15]|0,_=bg(O,j,1)^bg(O,j,8)^HZ(O,j,7),F=wg(O,j,1)^wg(O,j,8)^qZ(O,j,7),z=Mf[N-2]|0,D=Lf[N-2]|0,$=bg(z,D,19)^aT(z,D,61)^HZ(z,D,6),G=wg(z,D,19)^lT(z,D,61)^qZ(z,D,6),H=udt(F,G,Lf[N-7],Lf[N-16]),U=ddt(H,_,$,Mf[N-7],Mf[N-16]);Mf[N]=U|0,Lf[N]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:d,Eh:h,El:m,Fh:g,Fl:v,Gh:x,Gl:b,Hh:w,Hl:T}=this;for(let N=0;N<80;N++){const O=bg(h,m,14)^bg(h,m,18)^aT(h,m,41),j=wg(h,m,14)^wg(h,m,18)^lT(h,m,41),_=h&g^~h&x,F=m&v^~m&b,z=fdt(T,j,F,ydt[N],Lf[N]),D=hdt(z,w,O,_,gdt[N],Mf[N]),$=z|0,G=bg(r,i,28)^aT(r,i,34)^aT(r,i,39),H=wg(r,i,28)^lT(r,i,34)^lT(r,i,39),U=r&s^r&a^s&a,A=i&o^i&l^o&l;w=x|0,T=b|0,x=g|0,b=v|0,g=h|0,v=m|0,{h,l:m}=Cu(c|0,d|0,D|0,$|0),c=a|0,d=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const I=ldt($,H,A);r=cdt(I,D,G,U),i=I|0}({h:r,l:i}=Cu(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Cu(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Cu(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:d}=Cu(this.Dh|0,this.Dl|0,c|0,d|0),{h,l:m}=Cu(this.Eh|0,this.El|0,h|0,m|0),{h:g,l:v}=Cu(this.Fh|0,this.Fl|0,g|0,v|0),{h:x,l:b}=Cu(this.Gh|0,this.Gl|0,x|0,b|0),{h:w,l:T}=Cu(this.Hh|0,this.Hl|0,w|0,T|0),this.set(r,i,s,o,a,l,c,d,h,m,g,v,x,b,w,T)}roundClean(){$x(Mf,Lf)}destroy(){$x(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Lme=Rme(()=>new mdt),vdt=Rme(()=>new xdt);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const S7=BigInt(0),ND=BigInt(1);function Jm(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Ul(t,e,n=""){const r=LE(t),i=t==null?void 0:t.length,s=e!==void 0;if(!r||s&&i!==e){const o=n&&`"${n}" `,a=s?` of length ${e}`:"",l=r?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return t}function cT(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Dme(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?S7:BigInt("0x"+t)}function yP(t){return Dme(_m(t))}function S1(t){return u0(t),Dme(_m(Uint8Array.from(t).reverse()))}function A7(t,e){return Qk(t.toString(16).padStart(e*2,"0"))}function jme(t,e){return A7(t,e).reverse()}function Wr(t,e,n){let r;if(typeof e=="string")try{r=Qk(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(LE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function GZ(t){return Uint8Array.from(t)}const LO=t=>typeof t=="bigint"&&S7<=t;function bdt(t,e,n){return LO(t)&&LO(e)&&LO(n)&&e<=t&&t<n}function CD(t,e,n,r){if(!bdt(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Bme(t){let e;for(e=0;t>S7;t>>=ND,e+=1);return e}const DE=t=>(ND<<BigInt(t))-ND;function wdt(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=r(t),o=r(t),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},c=(...g)=>n(o,s,...g),d=(g=r(0))=>{o=c(i(0),g),s=c(),g.length!==0&&(o=c(i(1),g),s=c())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const v=[];for(;g<e;){s=c();const x=s.slice();v.push(x),g+=s.length}return Pc(...v)};return(g,v)=>{l(),d(g);let x;for(;!(x=v(h()));)d();return l(),x}}function jE(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(i,s,o){const a=t[i];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${l}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function Zk(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Io=BigInt(0),vs=BigInt(1),Wp=BigInt(2),Ume=BigInt(3),Fme=BigInt(4),$me=BigInt(5),Edt=BigInt(7),zme=BigInt(8),Sdt=BigInt(9),Vme=BigInt(16);function xi(t,e){const n=t%e;return n>=Io?n:e+n}function Hr(t,e,n){let r=t;for(;e-- >Io;)r*=r,r%=n;return r}function KZ(t,e){if(t===Io)throw new Error("invert: expected non-zero number");if(e<=Io)throw new Error("invert: expected positive modulus, got "+e);let n=xi(t,e),r=e,i=Io,s=vs;for(;n!==Io;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==vs)throw new Error("invert: does not exist");return xi(i,e)}function T7(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Hme(t,e){const n=(t.ORDER+vs)/Fme,r=t.pow(e,n);return T7(t,r,e),r}function Adt(t,e){const n=(t.ORDER-$me)/zme,r=t.mul(e,Wp),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Wp),i),a=t.mul(s,t.sub(o,t.ONE));return T7(t,a,e),a}function Tdt(t){const e=d0(t),n=qme(t),r=n(e,e.neg(e.ONE)),i=n(e,r),s=n(e,e.neg(r)),o=(t+Edt)/Vme;return(a,l)=>{let c=a.pow(l,o),d=a.mul(c,r);const h=a.mul(c,i),m=a.mul(c,s),g=a.eql(a.sqr(d),l),v=a.eql(a.sqr(h),l);c=a.cmov(c,d,g),d=a.cmov(m,h,v);const x=a.eql(a.sqr(d),l),b=a.cmov(c,d,x);return T7(a,b,l),b}}function qme(t){if(t<Ume)throw new Error("sqrt is not defined for small field");let e=t-vs,n=0;for(;e%Wp===Io;)e/=Wp,n++;let r=Wp;const i=d0(t);for(;WZ(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Hme;let s=i.pow(r,e);const o=(e+vs)/Wp;return function(l,c){if(l.is0(c))return c;if(WZ(l,c)!==1)throw new Error("Cannot find square root");let d=n,h=l.mul(l.ONE,s),m=l.pow(c,e),g=l.pow(c,o);for(;!l.eql(m,l.ONE);){if(l.is0(m))return l.ZERO;let v=1,x=l.sqr(m);for(;!l.eql(x,l.ONE);)if(v++,x=l.sqr(x),v===d)throw new Error("Cannot find square root");const b=vs<<BigInt(d-v-1),w=l.pow(h,b);d=v,h=l.sqr(w),m=l.mul(m,h),g=l.mul(g,w)}return g}}function kdt(t){return t%Fme===Ume?Hme:t%zme===$me?Adt:t%Vme===Sdt?Tdt(t):qme(t)}const Ndt=(t,e)=>(xi(t,e)&vs)===vs,Cdt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pdt(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Cdt.reduce((r,i)=>(r[i]="function",r),e);return jE(t,n),t}function _dt(t,e,n){if(n<Io)throw new Error("invalid exponent, negatives unsupported");if(n===Io)return t.ONE;if(n===vs)return e;let r=t.ONE,i=e;for(;n>Io;)n&vs&&(r=t.mul(r,i)),i=t.sqr(i),n>>=vs;return r}function Gme(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,l)=>t.is0(a)?o:(r[l]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,l)=>t.is0(a)?o:(r[l]=t.mul(o,r[l]),t.mul(o,a)),s),r}function WZ(t,e){const n=(t.ORDER-vs)/Wp,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Kme(t,e){e!==void 0&&kD(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function d0(t,e,n=!1,r={}){if(t<=Io)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const m=e;m.BITS&&(i=m.BITS),m.sqrt&&(s=m.sqrt),typeof m.isLE=="boolean"&&(n=m.isLE),typeof m.modFromBytes=="boolean"&&(o=m.modFromBytes),a=m.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:l,nByteLength:c}=Kme(t,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const h=Object.freeze({ORDER:t,isLE:n,BITS:l,BYTES:c,MASK:DE(l),ZERO:Io,ONE:vs,allowedLengths:a,create:m=>xi(m,t),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return Io<=m&&m<t},is0:m=>m===Io,isValidNot0:m=>!h.is0(m)&&h.isValid(m),isOdd:m=>(m&vs)===vs,neg:m=>xi(-m,t),eql:(m,g)=>m===g,sqr:m=>xi(m*m,t),add:(m,g)=>xi(m+g,t),sub:(m,g)=>xi(m-g,t),mul:(m,g)=>xi(m*g,t),pow:(m,g)=>_dt(h,m,g),div:(m,g)=>xi(m*KZ(g,t),t),sqrN:m=>m*m,addN:(m,g)=>m+g,subN:(m,g)=>m-g,mulN:(m,g)=>m*g,inv:m=>KZ(m,t),sqrt:s||(m=>(d||(d=kdt(t)),d(h,m))),toBytes:m=>n?jme(m,c):A7(m,c),fromBytes:(m,g=!0)=>{if(a){if(!a.includes(m.length)||m.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+m.length);const x=new Uint8Array(c);x.set(m,n?0:x.length-m.length),m=x}if(m.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+m.length);let v=n?S1(m):yP(m);if(o&&(v=xi(v,t)),!g&&!h.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v},invertBatch:m=>Gme(h,m),cmov:(m,g,v)=>v?g:m});return Object.freeze(h)}function Wme(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Yme(t){const e=Wme(t);return e+Math.ceil(e/2)}function Idt(t,e,n=!1){const r=t.length,i=Wme(e),s=Yme(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?S1(t):yP(t),a=xi(o,e-vs)+vs;return n?jme(a,i):A7(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zx=BigInt(0),Yp=BigInt(1);function eN(t,e){const n=e.negate();return t?n:e}function Jp(t,e){const n=Gme(t.Fp,e.map(r=>r.Z));return e.map((r,i)=>t.fromAffine(r.toAffine(n[i])))}function Jme(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function DO(t,e){Jme(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=DE(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function YZ(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),l=t>>o;a>r&&(a-=s,l+=Yp);const c=e*r,d=c+Math.abs(a)-1,h=a===0,m=a<0,g=e%2!==0;return{nextN:l,offset:d,isZero:h,isNeg:m,isNegF:g,offsetF:c}}function Rdt(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Odt(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const jO=new WeakMap,Xme=new WeakMap;function BO(t){return Xme.get(t)||1}function JZ(t){if(t!==zx)throw new Error("invalid wNAF")}class Qme{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let i=e;for(;n>zx;)n&Yp&&(r=r.add(i)),i=i.double(),n>>=Yp;return r}precomputeWindow(e,n){const{windows:r,windowSize:i}=DO(n,this.bits),s=[];let o=e,a=o;for(let l=0;l<r;l++){a=o,s.push(a);for(let c=1;c<i;c++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=DO(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:c,isZero:d,isNeg:h,isNegF:m,offsetF:g}=YZ(r,a,o);r=l,d?s=s.add(eN(m,n[g])):i=i.add(eN(h,n[c]))}return JZ(r),{p:i,f:s}}wNAFUnsafe(e,n,r,i=this.ZERO){const s=DO(e,this.bits);for(let o=0;o<s.windows&&r!==zx;o++){const{nextN:a,offset:l,isZero:c,isNeg:d}=YZ(r,o,s);if(r=a,!c){const h=n[l];i=i.add(d?h.negate():h)}}return JZ(r),i}getPrecomputes(e,n,r){let i=jO.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(i=r(i)),jO.set(n,i))),i}cached(e,n,r){const i=BO(e);return this.wNAF(i,this.getPrecomputes(i,e,r),n)}unsafe(e,n,r,i){const s=BO(e);return s===1?this._unsafeLadder(e,n,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),n,i)}createCache(e,n){Jme(n,this.bits),Xme.set(e,n),jO.delete(e)}hasCache(e){return BO(e)!==1}}function Mdt(t,e,n,r){let i=e,s=t.ZERO,o=t.ZERO;for(;n>zx||r>zx;)n&Yp&&(s=s.add(i)),r&Yp&&(o=o.add(i)),i=i.double(),n>>=Yp,r>>=Yp;return{p1:s,p2:o}}function Zme(t,e,n,r){Rdt(n,t),Odt(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Bme(BigInt(i));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=DE(l),d=new Array(Number(c)+1).fill(o),h=Math.floor((e.BITS-1)/l)*l;let m=o;for(let g=h;g>=0;g-=l){d.fill(o);for(let x=0;x<s;x++){const b=r[x],w=Number(b>>BigInt(g)&c);d[w]=d[w].add(n[x])}let v=o;for(let x=d.length-1,b=o;x>0;x--)b=b.add(d[x]),v=v.add(b);if(m=m.add(v),g!==0)for(let x=0;x<l;x++)m=m.double()}return m}function XZ(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Pdt(e),e}else return d0(t,{isLE:n})}function e0e(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const l of["p","n","h"]){const c=e[l];if(!(typeof c=="bigint"&&c>zx))throw new Error(`CURVE.${l} must be positive bigint`)}const i=XZ(e.p,n.Fp,r),s=XZ(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const l of a)if(!i.isValid(e[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Df=BigInt(0),Bi=BigInt(1),UO=BigInt(2),Ldt=BigInt(8);function Ddt(t,e,n,r){const i=t.sqr(n),s=t.sqr(r),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}function jdt(t,e={}){const n=e0e("edwards",t,e,e.FpFnLE),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o}=s;jE(e,{},{uvRatio:"function"});const a=UO<<BigInt(i.BYTES*8)-Bi,l=b=>r.create(b),c=e.uvRatio||((b,w)=>{try{return{isValid:!0,value:r.sqrt(r.div(b,w))}}catch{return{isValid:!1,value:Df}}});if(!Ddt(r,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function d(b,w,T=!1){const N=T?Bi:Df;return CD("coordinate "+b,w,N,a),w}function h(b){if(!(b instanceof v))throw new Error("ExtendedPoint expected")}const m=Zk((b,w)=>{const{X:T,Y:N,Z:O}=b,j=b.is0();w==null&&(w=j?Ldt:r.inv(O));const _=l(T*w),F=l(N*w),z=r.mul(O,w);if(j)return{x:Df,y:Bi};if(z!==Bi)throw new Error("invZ was invalid");return{x:_,y:F}}),g=Zk(b=>{const{a:w,d:T}=s;if(b.is0())throw new Error("bad point: ZERO");const{X:N,Y:O,Z:j,T:_}=b,F=l(N*N),z=l(O*O),D=l(j*j),$=l(D*D),G=l(F*w),H=l(D*l(G+z)),U=l($+l(T*l(F*z)));if(H!==U)throw new Error("bad point: equation left != right (1)");const A=l(N*O),I=l(j*_);if(A!==I)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(w,T,N,O){this.X=d("x",w),this.Y=d("y",T),this.Z=d("z",N,!0),this.T=d("t",O),Object.freeze(this)}static CURVE(){return s}static fromAffine(w){if(w instanceof v)throw new Error("extended point not allowed");const{x:T,y:N}=w||{};return d("x",T),d("y",N),new v(T,N,Bi,l(T*N))}static fromBytes(w,T=!1){const N=r.BYTES,{a:O,d:j}=s;w=GZ(Ul(w,N,"point")),Jm(T,"zip215");const _=GZ(w),F=w[N-1];_[N-1]=F&-129;const z=S1(_),D=T?a:r.ORDER;CD("point.y",z,Df,D);const $=l(z*z),G=l($-Bi),H=l(j*$-O);let{isValid:U,value:A}=c(G,H);if(!U)throw new Error("bad point: invalid y coordinate");const I=(A&Bi)===Bi,L=(F&128)!==0;if(!T&&A===Df&&L)throw new Error("bad point: x=0 and x_0=1");return L!==I&&(A=l(-A)),v.fromAffine({x:A,y:z})}static fromHex(w,T=!1){return v.fromBytes(Wr("point",w),T)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(w=8,T=!0){return x.createCache(this,w),T||this.multiply(UO),this}assertValidity(){g(this)}equals(w){h(w);const{X:T,Y:N,Z:O}=this,{X:j,Y:_,Z:F}=w,z=l(T*F),D=l(j*O),$=l(N*F),G=l(_*O);return z===D&&$===G}is0(){return this.equals(v.ZERO)}negate(){return new v(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:w}=s,{X:T,Y:N,Z:O}=this,j=l(T*T),_=l(N*N),F=l(UO*l(O*O)),z=l(w*j),D=T+N,$=l(l(D*D)-j-_),G=z+_,H=G-F,U=z-_,A=l($*H),I=l(G*U),L=l($*U),q=l(H*G);return new v(A,I,q,L)}add(w){h(w);const{a:T,d:N}=s,{X:O,Y:j,Z:_,T:F}=this,{X:z,Y:D,Z:$,T:G}=w,H=l(O*z),U=l(j*D),A=l(F*N*G),I=l(_*$),L=l((O+j)*(z+D)-H-U),q=I-A,K=I+A,te=l(U-T*H),Y=l(L*q),V=l(K*te),M=l(L*te),P=l(q*K);return new v(Y,V,P,M)}subtract(w){return this.add(w.negate())}multiply(w){if(!i.isValidNot0(w))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:T,f:N}=x.cached(this,w,O=>Jp(v,O));return Jp(v,[T,N])[0]}multiplyUnsafe(w,T=v.ZERO){if(!i.isValid(w))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return w===Df?v.ZERO:this.is0()||w===Bi?this:x.unsafe(this,w,N=>Jp(v,N),T)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return x.unsafe(this,s.n).is0()}toAffine(w){return m(this,w)}clearCofactor(){return o===Bi?this:this.multiplyUnsafe(o)}toBytes(){const{x:w,y:T}=this.toAffine(),N=r.toBytes(T);return N[N.length-1]|=w&Bi?128:0,N}toHex(){return _m(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(w){return Jp(v,w)}static msm(w,T){return Zme(v,i,w,T)}_setWindowSize(w){this.precompute(w)}toRawBytes(){return this.toBytes()}}v.BASE=new v(s.Gx,s.Gy,Bi,l(s.Gx*s.Gy)),v.ZERO=new v(Df,Bi,Bi,Df),v.Fp=r,v.Fn=i;const x=new Qme(v,i.BITS);return v.BASE.precompute(8),v}function Bdt(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');jE(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:s,Fn:o}=t,a=n.randomBytes||E7,l=n.adjustScalarBytes||(D=>D),c=n.domain||((D,$,G)=>{if(Jm(G,"phflag"),$.length||G)throw new Error("Contexts/pre-hash are not supported");return D});function d(D){return o.create(S1(D))}function h(D){const $=N.secretKey;D=Wr("private key",D,$);const G=Wr("hashed private key",e(D),2*$),H=l(G.slice(0,$)),U=G.slice($,2*$),A=d(H);return{head:H,prefix:U,scalar:A}}function m(D){const{head:$,prefix:G,scalar:H}=h(D),U=i.multiply(H),A=U.toBytes();return{head:$,prefix:G,scalar:H,point:U,pointBytes:A}}function g(D){return m(D).pointBytes}function v(D=Uint8Array.of(),...$){const G=Pc(...$);return d(e(c(G,Wr("context",D),!!r)))}function x(D,$,G={}){D=Wr("message",D),r&&(D=r(D));const{prefix:H,scalar:U,pointBytes:A}=m($),I=v(G.context,H,D),L=i.multiply(I).toBytes(),q=v(G.context,L,A,D),K=o.create(I+q*U);if(!o.isValid(K))throw new Error("sign failed: invalid s");const te=Pc(L,o.toBytes(K));return Ul(te,N.signature,"result")}const b={zip215:!0};function w(D,$,G,H=b){const{context:U,zip215:A}=H,I=N.signature;D=Wr("signature",D,I),$=Wr("message",$),G=Wr("publicKey",G,N.publicKey),A!==void 0&&Jm(A,"zip215"),r&&($=r($));const L=I/2,q=D.subarray(0,L),K=S1(D.subarray(L,I));let te,Y,V;try{te=t.fromBytes(G,A),Y=t.fromBytes(q,A),V=i.multiplyUnsafe(K)}catch{return!1}if(!A&&te.isSmallOrder())return!1;const M=v(U,Y.toBytes(),te.toBytes(),$);return Y.add(te.multiplyUnsafe(M)).subtract(V).clearCofactor().is0()}const T=s.BYTES,N={secretKey:T,publicKey:T,signature:2*T,seed:T};function O(D=a(N.seed)){return Ul(D,N.seed,"seed")}function j(D){const $=z.randomSecretKey(D);return{secretKey:$,publicKey:g($)}}function _(D){return LE(D)&&D.length===o.BYTES}function F(D,$){try{return!!t.fromBytes(D,$)}catch{return!1}}const z={getExtendedPublicKey:m,randomSecretKey:O,isValidSecretKey:_,isValidPublicKey:F,toMontgomery(D){const{y:$}=t.fromBytes(D),G=N.publicKey,H=G===32;if(!H&&G!==57)throw new Error("only defined for 25519 and 448");const U=H?s.div(Bi+$,Bi-$):s.div($-Bi,$+Bi);return s.toBytes(U)},toMontgomerySecret(D){const $=N.secretKey;Ul(D,$);const G=e(D.subarray(0,$));return l(G).subarray(0,$)},randomPrivateKey:O,precompute(D=8,$=t.BASE){return $.precompute(D,!1)}};return Object.freeze({keygen:j,getPublicKey:g,sign:x,verify:w,utils:z,Point:t,lengths:N})}function Udt(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=d0(e.n,t.nBitLength,!0),i={Fp:n,Fn:r,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:s}}function Fdt(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function $dt(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:i}=Udt(t),s=jdt(e,n),o=Bdt(s,r,i);return Fdt(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zdt=BigInt(1),QZ=BigInt(2);BigInt(3);const Vdt=BigInt(5),Hdt=BigInt(8),k7=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),t0e={p:k7,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Hdt,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function qdt(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=k7,a=t*t%s*t%s,l=Hr(a,QZ,s)*a%s,c=Hr(l,zdt,s)*t%s,d=Hr(c,Vdt,s)*c%s,h=Hr(d,e,s)*d%s,m=Hr(h,n,s)*h%s,g=Hr(m,r,s)*m%s,v=Hr(g,i,s)*g%s,x=Hr(v,i,s)*g%s,b=Hr(x,e,s)*d%s;return{pow_p_5_8:Hr(b,QZ,s)*t%s,b2:a}}function Gdt(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ZZ=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Kdt(t,e){const n=k7,r=xi(e*e*e,n),i=xi(r*r*e,n),s=qdt(t*i).pow_p_5_8;let o=xi(t*r*s,n);const a=xi(e*o*o,n),l=o,c=xi(o*ZZ,n),d=a===t,h=a===xi(-t,n),m=a===xi(-t*ZZ,n);return d&&(o=l),(h||m)&&(o=c),Ndt(o,n)&&(o=xi(-o,n)),{isValid:d||h,value:o}}const Wdt=d0(t0e.p,{isLE:!0}),Ydt={...t0e,Fp:Wdt,hash:vdt,adjustScalarBytes:Gdt,uvRatio:Kdt},kv=$dt(Ydt);var XT={exports:{}},FO={},eee;function N7(){return eee||(eee=1,(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},n={};n.byteLength=d,n.toByteArray=m,n.fromByteArray=x;for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;i[45]=62,i[95]=63;function c(T){var N=T.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=T.indexOf("=");O===-1&&(O=N);var j=O===N?0:4-O%4;return[O,j]}function d(T){var N=c(T),O=N[0],j=N[1];return(O+j)*3/4-j}function h(T,N,O){return(N+O)*3/4-O}function m(T){var N,O=c(T),j=O[0],_=O[1],F=new s(h(T,j,_)),z=0,D=_>0?j-4:j,$;for($=0;$<D;$+=4)N=i[T.charCodeAt($)]<<18|i[T.charCodeAt($+1)]<<12|i[T.charCodeAt($+2)]<<6|i[T.charCodeAt($+3)],F[z++]=N>>16&255,F[z++]=N>>8&255,F[z++]=N&255;return _===2&&(N=i[T.charCodeAt($)]<<2|i[T.charCodeAt($+1)]>>4,F[z++]=N&255),_===1&&(N=i[T.charCodeAt($)]<<10|i[T.charCodeAt($+1)]<<4|i[T.charCodeAt($+2)]>>2,F[z++]=N>>8&255,F[z++]=N&255),F}function g(T){return r[T>>18&63]+r[T>>12&63]+r[T>>6&63]+r[T&63]}function v(T,N,O){for(var j,_=[],F=N;F<O;F+=3)j=(T[F]<<16&16711680)+(T[F+1]<<8&65280)+(T[F+2]&255),_.push(g(j));return _.join("")}function x(T){for(var N,O=T.length,j=O%3,_=[],F=16383,z=0,D=O-j;z<D;z+=F)_.push(v(T,z,z+F>D?D:z+F));return j===1?(N=T[O-1],_.push(r[N>>2]+r[N<<4&63]+"==")):j===2&&(N=(T[O-2]<<8)+T[O-1],_.push(r[N>>10]+r[N>>4&63]+r[N<<2&63]+"=")),_.join("")}var b={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */b.read=function(T,N,O,j,_){var F,z,D=_*8-j-1,$=(1<<D)-1,G=$>>1,H=-7,U=O?_-1:0,A=O?-1:1,I=T[N+U];for(U+=A,F=I&(1<<-H)-1,I>>=-H,H+=D;H>0;F=F*256+T[N+U],U+=A,H-=8);for(z=F&(1<<-H)-1,F>>=-H,H+=j;H>0;z=z*256+T[N+U],U+=A,H-=8);if(F===0)F=1-G;else{if(F===$)return z?NaN:(I?-1:1)*(1/0);z=z+Math.pow(2,j),F=F-G}return(I?-1:1)*z*Math.pow(2,F-j)},b.write=function(T,N,O,j,_,F){var z,D,$,G=F*8-_-1,H=(1<<G)-1,U=H>>1,A=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=j?0:F-1,L=j?1:-1,q=N<0||N===0&&1/N<0?1:0;for(N=Math.abs(N),isNaN(N)||N===1/0?(D=isNaN(N)?1:0,z=H):(z=Math.floor(Math.log(N)/Math.LN2),N*($=Math.pow(2,-z))<1&&(z--,$*=2),z+U>=1?N+=A/$:N+=A*Math.pow(2,1-U),N*$>=2&&(z++,$/=2),z+U>=H?(D=0,z=H):z+U>=1?(D=(N*$-1)*Math.pow(2,_),z=z+U):(D=N*Math.pow(2,U-1)*Math.pow(2,_),z=0));_>=8;T[O+I]=D&255,I+=L,D/=256,_-=8);for(z=z<<_|D,G+=_;G>0;T[O+I]=z&255,I+=L,z/=256,G-=8);T[O+I-L]|=q*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(T){const N=n,O=b,j=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;T.Buffer=H,T.SlowBuffer=P,T.INSPECT_MAX_BYTES=50;const _=2147483647;T.kMaxLength=_;const{Uint8Array:F,ArrayBuffer:z,SharedArrayBuffer:D}=globalThis;H.TYPED_ARRAY_SUPPORT=$(),!H.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function $(){try{const le=new F(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,F.prototype),Object.setPrototypeOf(le,Q),le.foo()===42}catch{return!1}}Object.defineProperty(H.prototype,"parent",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.buffer}}),Object.defineProperty(H.prototype,"offset",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.byteOffset}});function G(le){if(le>_)throw new RangeError('The value "'+le+'" is invalid for option "size"');const Q=new F(le);return Object.setPrototypeOf(Q,H.prototype),Q}function H(le,Q,ee){if(typeof le=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return L(le)}return U(le,Q,ee)}H.poolSize=8192;function U(le,Q,ee){if(typeof le=="string")return q(le,Q);if(z.isView(le))return te(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(fn(le,z)||le&&fn(le.buffer,z)||typeof D<"u"&&(fn(le,D)||le&&fn(le.buffer,D)))return Y(le,Q,ee);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=le.valueOf&&le.valueOf();if(fe!=null&&fe!==le)return H.from(fe,Q,ee);const Pe=V(le);if(Pe)return Pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return H.from(le[Symbol.toPrimitive]("string"),Q,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}H.from=function(le,Q,ee){return U(le,Q,ee)},Object.setPrototypeOf(H.prototype,F.prototype),Object.setPrototypeOf(H,F);function A(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function I(le,Q,ee){return A(le),le<=0?G(le):Q!==void 0?typeof ee=="string"?G(le).fill(Q,ee):G(le).fill(Q):G(le)}H.alloc=function(le,Q,ee){return I(le,Q,ee)};function L(le){return A(le),G(le<0?0:M(le)|0)}H.allocUnsafe=function(le){return L(le)},H.allocUnsafeSlow=function(le){return L(le)};function q(le,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!H.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ee=W(le,Q)|0;let fe=G(ee);const Pe=fe.write(le,Q);return Pe!==ee&&(fe=fe.slice(0,Pe)),fe}function K(le){const Q=le.length<0?0:M(le.length)|0,ee=G(Q);for(let fe=0;fe<Q;fe+=1)ee[fe]=le[fe]&255;return ee}function te(le){if(fn(le,F)){const Q=new F(le);return Y(Q.buffer,Q.byteOffset,Q.byteLength)}return K(le)}function Y(le,Q,ee){if(Q<0||le.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<Q+(ee||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return Q===void 0&&ee===void 0?fe=new F(le):ee===void 0?fe=new F(le,Q):fe=new F(le,Q,ee),Object.setPrototypeOf(fe,H.prototype),fe}function V(le){if(H.isBuffer(le)){const Q=M(le.length)|0,ee=G(Q);return ee.length===0||le.copy(ee,0,0,Q),ee}if(le.length!==void 0)return typeof le.length!="number"||tn(le.length)?G(0):K(le);if(le.type==="Buffer"&&Array.isArray(le.data))return K(le.data)}function M(le){if(le>=_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return le|0}function P(le){return+le!=le&&(le=0),H.alloc(+le)}H.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==H.prototype},H.compare=function(Q,ee){if(fn(Q,F)&&(Q=H.from(Q,Q.offset,Q.byteLength)),fn(ee,F)&&(ee=H.from(ee,ee.offset,ee.byteLength)),!H.isBuffer(Q)||!H.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ee)return 0;let fe=Q.length,Pe=ee.length;for(let Oe=0,He=Math.min(fe,Pe);Oe<He;++Oe)if(Q[Oe]!==ee[Oe]){fe=Q[Oe],Pe=ee[Oe];break}return fe<Pe?-1:Pe<fe?1:0},H.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},H.concat=function(Q,ee){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return H.alloc(0);let fe;if(ee===void 0)for(ee=0,fe=0;fe<Q.length;++fe)ee+=Q[fe].length;const Pe=H.allocUnsafe(ee);let Oe=0;for(fe=0;fe<Q.length;++fe){let He=Q[fe];if(fn(He,F))Oe+He.length>Pe.length?(H.isBuffer(He)||(He=H.from(He)),He.copy(Pe,Oe)):F.prototype.set.call(Pe,He,Oe);else if(H.isBuffer(He))He.copy(Pe,Oe);else throw new TypeError('"list" argument must be an Array of Buffers');Oe+=He.length}return Pe};function W(le,Q){if(H.isBuffer(le))return le.length;if(z.isView(le)||fn(le,z))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const ee=le.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&ee===0)return 0;let Pe=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return tt(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee*2;case"hex":return ee>>>1;case"base64":return wt(le).length;default:if(Pe)return fe?-1:tt(le).length;Q=(""+Q).toLowerCase(),Pe=!0}}H.byteLength=W;function X(le,Q,ee){let fe=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0,Q>>>=0,ee<=Q))return"";for(le||(le="utf8");;)switch(le){case"hex":return st(this,Q,ee);case"utf8":case"utf-8":return he(this,Q,ee);case"ascii":return Ke(this,Q,ee);case"latin1":case"binary":return it(this,Q,ee);case"base64":return Me(this,Q,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ut(this,Q,ee);default:if(fe)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),fe=!0}}H.prototype._isBuffer=!0;function se(le,Q,ee){const fe=le[Q];le[Q]=le[ee],le[ee]=fe}H.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ee=0;ee<Q;ee+=2)se(this,ee,ee+1);return this},H.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ee=0;ee<Q;ee+=4)se(this,ee,ee+3),se(this,ee+1,ee+2);return this},H.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ee=0;ee<Q;ee+=8)se(this,ee,ee+7),se(this,ee+1,ee+6),se(this,ee+2,ee+5),se(this,ee+3,ee+4);return this},H.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?he(this,0,Q):X.apply(this,arguments)},H.prototype.toLocaleString=H.prototype.toString,H.prototype.equals=function(Q){if(!H.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:H.compare(this,Q)===0},H.prototype.inspect=function(){let Q="";const ee=T.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(Q+=" ... "),"<Buffer "+Q+">"},j&&(H.prototype[j]=H.prototype.inspect),H.prototype.compare=function(Q,ee,fe,Pe,Oe){if(fn(Q,F)&&(Q=H.from(Q,Q.offset,Q.byteLength)),!H.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ee===void 0&&(ee=0),fe===void 0&&(fe=Q?Q.length:0),Pe===void 0&&(Pe=0),Oe===void 0&&(Oe=this.length),ee<0||fe>Q.length||Pe<0||Oe>this.length)throw new RangeError("out of range index");if(Pe>=Oe&&ee>=fe)return 0;if(Pe>=Oe)return-1;if(ee>=fe)return 1;if(ee>>>=0,fe>>>=0,Pe>>>=0,Oe>>>=0,this===Q)return 0;let He=Oe-Pe,Qt=fe-ee;const qt=Math.min(He,Qt),ct=this.slice(Pe,Oe),gn=Q.slice(ee,fe);for(let At=0;At<qt;++At)if(ct[At]!==gn[At]){He=ct[At],Qt=gn[At];break}return He<Qt?-1:Qt<He?1:0};function ae(le,Q,ee,fe,Pe){if(le.length===0)return-1;if(typeof ee=="string"?(fe=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),ee=+ee,tn(ee)&&(ee=Pe?0:le.length-1),ee<0&&(ee=le.length+ee),ee>=le.length){if(Pe)return-1;ee=le.length-1}else if(ee<0)if(Pe)ee=0;else return-1;if(typeof Q=="string"&&(Q=H.from(Q,fe)),H.isBuffer(Q))return Q.length===0?-1:Te(le,Q,ee,fe,Pe);if(typeof Q=="number")return Q=Q&255,typeof F.prototype.indexOf=="function"?Pe?F.prototype.indexOf.call(le,Q,ee):F.prototype.lastIndexOf.call(le,Q,ee):Te(le,[Q],ee,fe,Pe);throw new TypeError("val must be string, number or Buffer")}function Te(le,Q,ee,fe,Pe){let Oe=1,He=le.length,Qt=Q.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(le.length<2||Q.length<2)return-1;Oe=2,He/=2,Qt/=2,ee/=2}function qt(gn,At){return Oe===1?gn[At]:gn.readUInt16BE(At*Oe)}let ct;if(Pe){let gn=-1;for(ct=ee;ct<He;ct++)if(qt(le,ct)===qt(Q,gn===-1?0:ct-gn)){if(gn===-1&&(gn=ct),ct-gn+1===Qt)return gn*Oe}else gn!==-1&&(ct-=ct-gn),gn=-1}else for(ee+Qt>He&&(ee=He-Qt),ct=ee;ct>=0;ct--){let gn=!0;for(let At=0;At<Qt;At++)if(qt(le,ct+At)!==qt(Q,At)){gn=!1;break}if(gn)return ct}return-1}H.prototype.includes=function(Q,ee,fe){return this.indexOf(Q,ee,fe)!==-1},H.prototype.indexOf=function(Q,ee,fe){return ae(this,Q,ee,fe,!0)},H.prototype.lastIndexOf=function(Q,ee,fe){return ae(this,Q,ee,fe,!1)};function oe(le,Q,ee,fe){ee=Number(ee)||0;const Pe=le.length-ee;fe?(fe=Number(fe),fe>Pe&&(fe=Pe)):fe=Pe;const Oe=Q.length;fe>Oe/2&&(fe=Oe/2);let He;for(He=0;He<fe;++He){const Qt=parseInt(Q.substr(He*2,2),16);if(tn(Qt))return He;le[ee+He]=Qt}return He}function ve(le,Q,ee,fe){return Ot(tt(Q,le.length-ee),le,ee,fe)}function ke(le,Q,ee,fe){return Ot(lt(Q),le,ee,fe)}function pe(le,Q,ee,fe){return Ot(wt(Q),le,ee,fe)}function ze(le,Q,ee,fe){return Ot(Vt(Q,le.length-ee),le,ee,fe)}H.prototype.write=function(Q,ee,fe,Pe){if(ee===void 0)Pe="utf8",fe=this.length,ee=0;else if(fe===void 0&&typeof ee=="string")Pe=ee,fe=this.length,ee=0;else if(isFinite(ee))ee=ee>>>0,isFinite(fe)?(fe=fe>>>0,Pe===void 0&&(Pe="utf8")):(Pe=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Oe=this.length-ee;if((fe===void 0||fe>Oe)&&(fe=Oe),Q.length>0&&(fe<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");Pe||(Pe="utf8");let He=!1;for(;;)switch(Pe){case"hex":return oe(this,Q,ee,fe);case"utf8":case"utf-8":return ve(this,Q,ee,fe);case"ascii":case"latin1":case"binary":return ke(this,Q,ee,fe);case"base64":return pe(this,Q,ee,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,Q,ee,fe);default:if(He)throw new TypeError("Unknown encoding: "+Pe);Pe=(""+Pe).toLowerCase(),He=!0}},H.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Me(le,Q,ee){return Q===0&&ee===le.length?N.fromByteArray(le):N.fromByteArray(le.slice(Q,ee))}function he(le,Q,ee){ee=Math.min(le.length,ee);const fe=[];let Pe=Q;for(;Pe<ee;){const Oe=le[Pe];let He=null,Qt=Oe>239?4:Oe>223?3:Oe>191?2:1;if(Pe+Qt<=ee){let qt,ct,gn,At;switch(Qt){case 1:Oe<128&&(He=Oe);break;case 2:qt=le[Pe+1],(qt&192)===128&&(At=(Oe&31)<<6|qt&63,At>127&&(He=At));break;case 3:qt=le[Pe+1],ct=le[Pe+2],(qt&192)===128&&(ct&192)===128&&(At=(Oe&15)<<12|(qt&63)<<6|ct&63,At>2047&&(At<55296||At>57343)&&(He=At));break;case 4:qt=le[Pe+1],ct=le[Pe+2],gn=le[Pe+3],(qt&192)===128&&(ct&192)===128&&(gn&192)===128&&(At=(Oe&15)<<18|(qt&63)<<12|(ct&63)<<6|gn&63,At>65535&&At<1114112&&(He=At))}}He===null?(He=65533,Qt=1):He>65535&&(He-=65536,fe.push(He>>>10&1023|55296),He=56320|He&1023),fe.push(He),Pe+=Qt}return We(fe)}const _e=4096;function We(le){const Q=le.length;if(Q<=_e)return String.fromCharCode.apply(String,le);let ee="",fe=0;for(;fe<Q;)ee+=String.fromCharCode.apply(String,le.slice(fe,fe+=_e));return ee}function Ke(le,Q,ee){let fe="";ee=Math.min(le.length,ee);for(let Pe=Q;Pe<ee;++Pe)fe+=String.fromCharCode(le[Pe]&127);return fe}function it(le,Q,ee){let fe="";ee=Math.min(le.length,ee);for(let Pe=Q;Pe<ee;++Pe)fe+=String.fromCharCode(le[Pe]);return fe}function st(le,Q,ee){const fe=le.length;(!Q||Q<0)&&(Q=0),(!ee||ee<0||ee>fe)&&(ee=fe);let Pe="";for(let Oe=Q;Oe<ee;++Oe)Pe+=rn[le[Oe]];return Pe}function ut(le,Q,ee){const fe=le.slice(Q,ee);let Pe="";for(let Oe=0;Oe<fe.length-1;Oe+=2)Pe+=String.fromCharCode(fe[Oe]+fe[Oe+1]*256);return Pe}H.prototype.slice=function(Q,ee){const fe=this.length;Q=~~Q,ee=ee===void 0?fe:~~ee,Q<0?(Q+=fe,Q<0&&(Q=0)):Q>fe&&(Q=fe),ee<0?(ee+=fe,ee<0&&(ee=0)):ee>fe&&(ee=fe),ee<Q&&(ee=Q);const Pe=this.subarray(Q,ee);return Object.setPrototypeOf(Pe,H.prototype),Pe};function Je(le,Q,ee){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+Q>ee)throw new RangeError("Trying to access beyond buffer length")}H.prototype.readUintLE=H.prototype.readUIntLE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||Je(Q,ee,this.length);let Pe=this[Q],Oe=1,He=0;for(;++He<ee&&(Oe*=256);)Pe+=this[Q+He]*Oe;return Pe},H.prototype.readUintBE=H.prototype.readUIntBE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||Je(Q,ee,this.length);let Pe=this[Q+--ee],Oe=1;for(;ee>0&&(Oe*=256);)Pe+=this[Q+--ee]*Oe;return Pe},H.prototype.readUint8=H.prototype.readUInt8=function(Q,ee){return Q=Q>>>0,ee||Je(Q,1,this.length),this[Q]},H.prototype.readUint16LE=H.prototype.readUInt16LE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,2,this.length),this[Q]|this[Q+1]<<8},H.prototype.readUint16BE=H.prototype.readUInt16BE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,2,this.length),this[Q]<<8|this[Q+1]},H.prototype.readUint32LE=H.prototype.readUInt32LE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},H.prototype.readUint32BE=H.prototype.readUInt32BE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},H.prototype.readBigUInt64LE=Oi(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&de(Q,this.length-8);const Pe=ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Oe=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+fe*2**24;return BigInt(Pe)+(BigInt(Oe)<<BigInt(32))}),H.prototype.readBigUInt64BE=Oi(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&de(Q,this.length-8);const Pe=ee*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Oe=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+fe;return(BigInt(Pe)<<BigInt(32))+BigInt(Oe)}),H.prototype.readIntLE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||Je(Q,ee,this.length);let Pe=this[Q],Oe=1,He=0;for(;++He<ee&&(Oe*=256);)Pe+=this[Q+He]*Oe;return Oe*=128,Pe>=Oe&&(Pe-=Math.pow(2,8*ee)),Pe},H.prototype.readIntBE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||Je(Q,ee,this.length);let Pe=ee,Oe=1,He=this[Q+--Pe];for(;Pe>0&&(Oe*=256);)He+=this[Q+--Pe]*Oe;return Oe*=128,He>=Oe&&(He-=Math.pow(2,8*ee)),He},H.prototype.readInt8=function(Q,ee){return Q=Q>>>0,ee||Je(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},H.prototype.readInt16LE=function(Q,ee){Q=Q>>>0,ee||Je(Q,2,this.length);const fe=this[Q]|this[Q+1]<<8;return fe&32768?fe|4294901760:fe},H.prototype.readInt16BE=function(Q,ee){Q=Q>>>0,ee||Je(Q,2,this.length);const fe=this[Q+1]|this[Q]<<8;return fe&32768?fe|4294901760:fe},H.prototype.readInt32LE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},H.prototype.readInt32BE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},H.prototype.readBigInt64LE=Oi(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&de(Q,this.length-8);const Pe=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(fe<<24);return(BigInt(Pe)<<BigInt(32))+BigInt(ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),H.prototype.readBigInt64BE=Oi(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&de(Q,this.length-8);const Pe=(ee<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(Pe)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+fe)}),H.prototype.readFloatLE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,4,this.length),O.read(this,Q,!0,23,4)},H.prototype.readFloatBE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,4,this.length),O.read(this,Q,!1,23,4)},H.prototype.readDoubleLE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,8,this.length),O.read(this,Q,!0,52,8)},H.prototype.readDoubleBE=function(Q,ee){return Q=Q>>>0,ee||Je(Q,8,this.length),O.read(this,Q,!1,52,8)};function Le(le,Q,ee,fe,Pe,Oe){if(!H.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>Pe||Q<Oe)throw new RangeError('"value" argument is out of bounds');if(ee+fe>le.length)throw new RangeError("Index out of range")}H.prototype.writeUintLE=H.prototype.writeUIntLE=function(Q,ee,fe,Pe){if(Q=+Q,ee=ee>>>0,fe=fe>>>0,!Pe){const Qt=Math.pow(2,8*fe)-1;Le(this,Q,ee,fe,Qt,0)}let Oe=1,He=0;for(this[ee]=Q&255;++He<fe&&(Oe*=256);)this[ee+He]=Q/Oe&255;return ee+fe},H.prototype.writeUintBE=H.prototype.writeUIntBE=function(Q,ee,fe,Pe){if(Q=+Q,ee=ee>>>0,fe=fe>>>0,!Pe){const Qt=Math.pow(2,8*fe)-1;Le(this,Q,ee,fe,Qt,0)}let Oe=fe-1,He=1;for(this[ee+Oe]=Q&255;--Oe>=0&&(He*=256);)this[ee+Oe]=Q/He&255;return ee+fe},H.prototype.writeUint8=H.prototype.writeUInt8=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,1,255,0),this[ee]=Q&255,ee+1},H.prototype.writeUint16LE=H.prototype.writeUInt16LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,2,65535,0),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},H.prototype.writeUint16BE=H.prototype.writeUInt16BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,2,65535,0),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},H.prototype.writeUint32LE=H.prototype.writeUInt32LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,4,4294967295,0),this[ee+3]=Q>>>24,this[ee+2]=Q>>>16,this[ee+1]=Q>>>8,this[ee]=Q&255,ee+4},H.prototype.writeUint32BE=H.prototype.writeUInt32BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,4,4294967295,0),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4};function et(le,Q,ee,fe,Pe){ue(Q,fe,Pe,le,ee,7);let Oe=Number(Q&BigInt(4294967295));le[ee++]=Oe,Oe=Oe>>8,le[ee++]=Oe,Oe=Oe>>8,le[ee++]=Oe,Oe=Oe>>8,le[ee++]=Oe;let He=Number(Q>>BigInt(32)&BigInt(4294967295));return le[ee++]=He,He=He>>8,le[ee++]=He,He=He>>8,le[ee++]=He,He=He>>8,le[ee++]=He,ee}function Ut(le,Q,ee,fe,Pe){ue(Q,fe,Pe,le,ee,7);let Oe=Number(Q&BigInt(4294967295));le[ee+7]=Oe,Oe=Oe>>8,le[ee+6]=Oe,Oe=Oe>>8,le[ee+5]=Oe,Oe=Oe>>8,le[ee+4]=Oe;let He=Number(Q>>BigInt(32)&BigInt(4294967295));return le[ee+3]=He,He=He>>8,le[ee+2]=He,He=He>>8,le[ee+1]=He,He=He>>8,le[ee]=He,ee+8}H.prototype.writeBigUInt64LE=Oi(function(Q,ee=0){return et(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),H.prototype.writeBigUInt64BE=Oi(function(Q,ee=0){return Ut(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),H.prototype.writeIntLE=function(Q,ee,fe,Pe){if(Q=+Q,ee=ee>>>0,!Pe){const qt=Math.pow(2,8*fe-1);Le(this,Q,ee,fe,qt-1,-qt)}let Oe=0,He=1,Qt=0;for(this[ee]=Q&255;++Oe<fe&&(He*=256);)Q<0&&Qt===0&&this[ee+Oe-1]!==0&&(Qt=1),this[ee+Oe]=(Q/He>>0)-Qt&255;return ee+fe},H.prototype.writeIntBE=function(Q,ee,fe,Pe){if(Q=+Q,ee=ee>>>0,!Pe){const qt=Math.pow(2,8*fe-1);Le(this,Q,ee,fe,qt-1,-qt)}let Oe=fe-1,He=1,Qt=0;for(this[ee+Oe]=Q&255;--Oe>=0&&(He*=256);)Q<0&&Qt===0&&this[ee+Oe+1]!==0&&(Qt=1),this[ee+Oe]=(Q/He>>0)-Qt&255;return ee+fe},H.prototype.writeInt8=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,1,127,-128),Q<0&&(Q=255+Q+1),this[ee]=Q&255,ee+1},H.prototype.writeInt16LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,2,32767,-32768),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},H.prototype.writeInt16BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,2,32767,-32768),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},H.prototype.writeInt32LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,4,2147483647,-2147483648),this[ee]=Q&255,this[ee+1]=Q>>>8,this[ee+2]=Q>>>16,this[ee+3]=Q>>>24,ee+4},H.prototype.writeInt32BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||Le(this,Q,ee,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4},H.prototype.writeBigInt64LE=Oi(function(Q,ee=0){return et(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),H.prototype.writeBigInt64BE=Oi(function(Q,ee=0){return Ut(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(le,Q,ee,fe,Pe,Oe){if(ee+fe>le.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function qe(le,Q,ee,fe,Pe){return Q=+Q,ee=ee>>>0,Pe||Ie(le,Q,ee,4),O.write(le,Q,ee,fe,23,4),ee+4}H.prototype.writeFloatLE=function(Q,ee,fe){return qe(this,Q,ee,!0,fe)},H.prototype.writeFloatBE=function(Q,ee,fe){return qe(this,Q,ee,!1,fe)};function yt(le,Q,ee,fe,Pe){return Q=+Q,ee=ee>>>0,Pe||Ie(le,Q,ee,8),O.write(le,Q,ee,fe,52,8),ee+8}H.prototype.writeDoubleLE=function(Q,ee,fe){return yt(this,Q,ee,!0,fe)},H.prototype.writeDoubleBE=function(Q,ee,fe){return yt(this,Q,ee,!1,fe)},H.prototype.copy=function(Q,ee,fe,Pe){if(!H.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!Pe&&Pe!==0&&(Pe=this.length),ee>=Q.length&&(ee=Q.length),ee||(ee=0),Pe>0&&Pe<fe&&(Pe=fe),Pe===fe||Q.length===0||this.length===0)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(Pe<0)throw new RangeError("sourceEnd out of bounds");Pe>this.length&&(Pe=this.length),Q.length-ee<Pe-fe&&(Pe=Q.length-ee+fe);const Oe=Pe-fe;return this===Q&&typeof F.prototype.copyWithin=="function"?this.copyWithin(ee,fe,Pe):F.prototype.set.call(Q,this.subarray(fe,Pe),ee),Oe},H.prototype.fill=function(Q,ee,fe,Pe){if(typeof Q=="string"){if(typeof ee=="string"?(Pe=ee,ee=0,fe=this.length):typeof fe=="string"&&(Pe=fe,fe=this.length),Pe!==void 0&&typeof Pe!="string")throw new TypeError("encoding must be a string");if(typeof Pe=="string"&&!H.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);if(Q.length===1){const He=Q.charCodeAt(0);(Pe==="utf8"&&He<128||Pe==="latin1")&&(Q=He)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ee<0||this.length<ee||this.length<fe)throw new RangeError("Out of range index");if(fe<=ee)return this;ee=ee>>>0,fe=fe===void 0?this.length:fe>>>0,Q||(Q=0);let Oe;if(typeof Q=="number")for(Oe=ee;Oe<fe;++Oe)this[Oe]=Q;else{const He=H.isBuffer(Q)?Q:H.from(Q,Pe),Qt=He.length;if(Qt===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Oe=0;Oe<fe-ee;++Oe)this[Oe+ee]=He[Oe%Qt]}return this};const ht={};function ie(le,Q,ee){ht[le]=class extends ee{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(Pe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Pe,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(le,Q){return`The "${le}" argument must be of type number. Received type ${typeof Q}`},TypeError),ie("ERR_OUT_OF_RANGE",function(le,Q,ee){let fe=`The value of "${le}" is out of range.`,Pe=ee;return Number.isInteger(ee)&&Math.abs(ee)>2**32?Pe=J(String(ee)):typeof ee=="bigint"&&(Pe=String(ee),(ee>BigInt(2)**BigInt(32)||ee<-(BigInt(2)**BigInt(32)))&&(Pe=J(Pe)),Pe+="n"),fe+=` It must be ${Q}. Received ${Pe}`,fe},RangeError);function J(le){let Q="",ee=le.length;const fe=le[0]==="-"?1:0;for(;ee>=fe+4;ee-=3)Q=`_${le.slice(ee-3,ee)}${Q}`;return`${le.slice(0,ee)}${Q}`}function Z(le,Q,ee){Se(Q,"offset"),(le[Q]===void 0||le[Q+ee]===void 0)&&de(Q,le.length-(ee+1))}function ue(le,Q,ee,fe,Pe,Oe){if(le>ee||le<Q){const He=typeof Q=="bigint"?"n":"";let Qt;throw Q===0||Q===BigInt(0)?Qt=`>= 0${He} and < 2${He} ** ${(Oe+1)*8}${He}`:Qt=`>= -(2${He} ** ${(Oe+1)*8-1}${He}) and < 2 ** ${(Oe+1)*8-1}${He}`,new ht.ERR_OUT_OF_RANGE("value",Qt,le)}Z(fe,Pe,Oe)}function Se(le,Q){if(typeof le!="number")throw new ht.ERR_INVALID_ARG_TYPE(Q,"number",le)}function de(le,Q,ee){throw Math.floor(le)!==le?(Se(le,ee),new ht.ERR_OUT_OF_RANGE("offset","an integer",le)):Q<0?new ht.ERR_BUFFER_OUT_OF_BOUNDS:new ht.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Q}`,le)}const ge=/[^+/0-9A-Za-z-_]/g;function Qe(le){if(le=le.split("=")[0],le=le.trim().replace(ge,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function tt(le,Q){Q=Q||1/0;let ee;const fe=le.length;let Pe=null;const Oe=[];for(let He=0;He<fe;++He){if(ee=le.charCodeAt(He),ee>55295&&ee<57344){if(!Pe){if(ee>56319){(Q-=3)>-1&&Oe.push(239,191,189);continue}else if(He+1===fe){(Q-=3)>-1&&Oe.push(239,191,189);continue}Pe=ee;continue}if(ee<56320){(Q-=3)>-1&&Oe.push(239,191,189),Pe=ee;continue}ee=(Pe-55296<<10|ee-56320)+65536}else Pe&&(Q-=3)>-1&&Oe.push(239,191,189);if(Pe=null,ee<128){if((Q-=1)<0)break;Oe.push(ee)}else if(ee<2048){if((Q-=2)<0)break;Oe.push(ee>>6|192,ee&63|128)}else if(ee<65536){if((Q-=3)<0)break;Oe.push(ee>>12|224,ee>>6&63|128,ee&63|128)}else if(ee<1114112){if((Q-=4)<0)break;Oe.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,ee&63|128)}else throw new Error("Invalid code point")}return Oe}function lt(le){const Q=[];for(let ee=0;ee<le.length;++ee)Q.push(le.charCodeAt(ee)&255);return Q}function Vt(le,Q){let ee,fe,Pe;const Oe=[];for(let He=0;He<le.length&&!((Q-=2)<0);++He)ee=le.charCodeAt(He),fe=ee>>8,Pe=ee%256,Oe.push(Pe),Oe.push(fe);return Oe}function wt(le){return N.toByteArray(Qe(le))}function Ot(le,Q,ee,fe){let Pe;for(Pe=0;Pe<fe&&!(Pe+ee>=Q.length||Pe>=le.length);++Pe)Q[Pe+ee]=le[Pe];return Pe}function fn(le,Q){return le instanceof Q||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===Q.name}function tn(le){return le!==le}const rn=(function(){const le="0123456789abcdef",Q=new Array(256);for(let ee=0;ee<16;++ee){const fe=ee*16;for(let Pe=0;Pe<16;++Pe)Q[fe+Pe]=le[ee]+le[Pe]}return Q})();function Oi(le){return typeof BigInt>"u"?Vn:le}function Vn(){throw new Error("BigInt not supported")}})(e);const w=e.Buffer;t.Blob=e.Blob,t.BlobOptions=e.BlobOptions,t.Buffer=e.Buffer,t.File=e.File,t.FileOptions=e.FileOptions,t.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,t.SlowBuffer=e.SlowBuffer,t.TranscodeEncoding=e.TranscodeEncoding,t.atob=e.atob,t.btoa=e.btoa,t.constants=e.constants,t.default=w,t.isAscii=e.isAscii,t.isUtf8=e.isUtf8,t.kMaxLength=e.kMaxLength,t.kStringMaxLength=e.kStringMaxLength,t.resolveObjectURL=e.resolveObjectURL,t.transcode=e.transcode})(FO)),FO}var Jdt=XT.exports,tee;function n0e(){return tee||(tee=1,(function(t){(function(e,n){function r(U,A){if(!U)throw new Error(A||"Assertion failed")}function i(U,A){U.super_=A;var I=function(){};I.prototype=A.prototype,U.prototype=new I,U.prototype.constructor=U}function s(U,A,I){if(s.isBN(U))return U;this.negative=0,this.words=null,this.length=0,this.red=null,U!==null&&((A==="le"||A==="be")&&(I=A,A=10),this._init(U||0,A||10,I||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=N7().Buffer}catch{}s.isBN=function(A){return A instanceof s?!0:A!==null&&typeof A=="object"&&A.constructor.wordSize===s.wordSize&&Array.isArray(A.words)},s.max=function(A,I){return A.cmp(I)>0?A:I},s.min=function(A,I){return A.cmp(I)<0?A:I},s.prototype._init=function(A,I,L){if(typeof A=="number")return this._initNumber(A,I,L);if(typeof A=="object")return this._initArray(A,I,L);I==="hex"&&(I=16),r(I===(I|0)&&I>=2&&I<=36),A=A.toString().replace(/\s+/g,"");var q=0;A[0]==="-"&&(q++,this.negative=1),q<A.length&&(I===16?this._parseHex(A,q,L):(this._parseBase(A,I,q),L==="le"&&this._initArray(this.toArray(),I,L)))},s.prototype._initNumber=function(A,I,L){A<0&&(this.negative=1,A=-A),A<67108864?(this.words=[A&67108863],this.length=1):A<4503599627370496?(this.words=[A&67108863,A/67108864&67108863],this.length=2):(r(A<9007199254740992),this.words=[A&67108863,A/67108864&67108863,1],this.length=3),L==="le"&&this._initArray(this.toArray(),I,L)},s.prototype._initArray=function(A,I,L){if(r(typeof A.length=="number"),A.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(A.length/3),this.words=new Array(this.length);for(var q=0;q<this.length;q++)this.words[q]=0;var K,te,Y=0;if(L==="be")for(q=A.length-1,K=0;q>=0;q-=3)te=A[q]|A[q-1]<<8|A[q-2]<<16,this.words[K]|=te<<Y&67108863,this.words[K+1]=te>>>26-Y&67108863,Y+=24,Y>=26&&(Y-=26,K++);else if(L==="le")for(q=0,K=0;q<A.length;q+=3)te=A[q]|A[q+1]<<8|A[q+2]<<16,this.words[K]|=te<<Y&67108863,this.words[K+1]=te>>>26-Y&67108863,Y+=24,Y>=26&&(Y-=26,K++);return this._strip()};function a(U,A){var I=U.charCodeAt(A);if(I>=48&&I<=57)return I-48;if(I>=65&&I<=70)return I-55;if(I>=97&&I<=102)return I-87;r(!1,"Invalid character in "+U)}function l(U,A,I){var L=a(U,I);return I-1>=A&&(L|=a(U,I-1)<<4),L}s.prototype._parseHex=function(A,I,L){this.length=Math.ceil((A.length-I)/6),this.words=new Array(this.length);for(var q=0;q<this.length;q++)this.words[q]=0;var K=0,te=0,Y;if(L==="be")for(q=A.length-1;q>=I;q-=2)Y=l(A,I,q)<<K,this.words[te]|=Y&67108863,K>=18?(K-=18,te+=1,this.words[te]|=Y>>>26):K+=8;else{var V=A.length-I;for(q=V%2===0?I+1:I;q<A.length;q+=2)Y=l(A,I,q)<<K,this.words[te]|=Y&67108863,K>=18?(K-=18,te+=1,this.words[te]|=Y>>>26):K+=8}this._strip()};function c(U,A,I,L){for(var q=0,K=0,te=Math.min(U.length,I),Y=A;Y<te;Y++){var V=U.charCodeAt(Y)-48;q*=L,V>=49?K=V-49+10:V>=17?K=V-17+10:K=V,r(V>=0&&K<L,"Invalid character"),q+=K}return q}s.prototype._parseBase=function(A,I,L){this.words=[0],this.length=1;for(var q=0,K=1;K<=67108863;K*=I)q++;q--,K=K/I|0;for(var te=A.length-L,Y=te%q,V=Math.min(te,te-Y)+L,M=0,P=L;P<V;P+=q)M=c(A,P,P+q,I),this.imuln(K),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(Y!==0){var W=1;for(M=c(A,P,A.length,I),P=0;P<Y;P++)W*=I;this.imuln(W),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this._strip()},s.prototype.copy=function(A){A.words=new Array(this.length);for(var I=0;I<this.length;I++)A.words[I]=this.words[I];A.length=this.length,A.negative=this.negative,A.red=this.red};function d(U,A){U.words=A.words,U.length=A.length,U.negative=A.negative,U.red=A.red}if(s.prototype._move=function(A){d(A,this)},s.prototype.clone=function(){var A=new s(null);return this.copy(A),A},s.prototype._expand=function(A){for(;this.length<A;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(A,I){A=A||10,I=I|0||1;var L;if(A===16||A==="hex"){L="";for(var q=0,K=0,te=0;te<this.length;te++){var Y=this.words[te],V=((Y<<q|K)&16777215).toString(16);K=Y>>>24-q&16777215,q+=2,q>=26&&(q-=26,te--),K!==0||te!==this.length-1?L=m[6-V.length]+V+L:L=V+L}for(K!==0&&(L=K.toString(16)+L);L.length%I!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}if(A===(A|0)&&A>=2&&A<=36){var M=g[A],P=v[A];L="";var W=this.clone();for(W.negative=0;!W.isZero();){var X=W.modrn(P).toString(A);W=W.idivn(P),W.isZero()?L=X+L:L=m[M-X.length]+X+L}for(this.isZero()&&(L="0"+L);L.length%I!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var A=this.words[0];return this.length===2?A+=this.words[1]*67108864:this.length===3&&this.words[2]===1?A+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-A:A},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(A,I){return this.toArrayLike(o,A,I)}),s.prototype.toArray=function(A,I){return this.toArrayLike(Array,A,I)};var x=function(A,I){return A.allocUnsafe?A.allocUnsafe(I):new A(I)};s.prototype.toArrayLike=function(A,I,L){this._strip();var q=this.byteLength(),K=L||Math.max(1,q);r(q<=K,"byte array longer than desired length"),r(K>0,"Requested array length <= 0");var te=x(A,K),Y=I==="le"?"LE":"BE";return this["_toArrayLike"+Y](te,q),te},s.prototype._toArrayLikeLE=function(A,I){for(var L=0,q=0,K=0,te=0;K<this.length;K++){var Y=this.words[K]<<te|q;A[L++]=Y&255,L<A.length&&(A[L++]=Y>>8&255),L<A.length&&(A[L++]=Y>>16&255),te===6?(L<A.length&&(A[L++]=Y>>24&255),q=0,te=0):(q=Y>>>24,te+=2)}if(L<A.length)for(A[L++]=q;L<A.length;)A[L++]=0},s.prototype._toArrayLikeBE=function(A,I){for(var L=A.length-1,q=0,K=0,te=0;K<this.length;K++){var Y=this.words[K]<<te|q;A[L--]=Y&255,L>=0&&(A[L--]=Y>>8&255),L>=0&&(A[L--]=Y>>16&255),te===6?(L>=0&&(A[L--]=Y>>24&255),q=0,te=0):(q=Y>>>24,te+=2)}if(L>=0)for(A[L--]=q;L>=0;)A[L--]=0},Math.clz32?s.prototype._countBits=function(A){return 32-Math.clz32(A)}:s.prototype._countBits=function(A){var I=A,L=0;return I>=4096&&(L+=13,I>>>=13),I>=64&&(L+=7,I>>>=7),I>=8&&(L+=4,I>>>=4),I>=2&&(L+=2,I>>>=2),L+I},s.prototype._zeroBits=function(A){if(A===0)return 26;var I=A,L=0;return(I&8191)===0&&(L+=13,I>>>=13),(I&127)===0&&(L+=7,I>>>=7),(I&15)===0&&(L+=4,I>>>=4),(I&3)===0&&(L+=2,I>>>=2),(I&1)===0&&L++,L},s.prototype.bitLength=function(){var A=this.words[this.length-1],I=this._countBits(A);return(this.length-1)*26+I};function b(U){for(var A=new Array(U.bitLength()),I=0;I<A.length;I++){var L=I/26|0,q=I%26;A[I]=U.words[L]>>>q&1}return A}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=0,I=0;I<this.length;I++){var L=this._zeroBits(this.words[I]);if(A+=L,L!==26)break}return A},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(A){return this.negative!==0?this.abs().inotn(A).iaddn(1):this.clone()},s.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(A){for(;this.length<A.length;)this.words[this.length++]=0;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]|A.words[I];return this._strip()},s.prototype.ior=function(A){return r((this.negative|A.negative)===0),this.iuor(A)},s.prototype.or=function(A){return this.length>A.length?this.clone().ior(A):A.clone().ior(this)},s.prototype.uor=function(A){return this.length>A.length?this.clone().iuor(A):A.clone().iuor(this)},s.prototype.iuand=function(A){var I;this.length>A.length?I=A:I=this;for(var L=0;L<I.length;L++)this.words[L]=this.words[L]&A.words[L];return this.length=I.length,this._strip()},s.prototype.iand=function(A){return r((this.negative|A.negative)===0),this.iuand(A)},s.prototype.and=function(A){return this.length>A.length?this.clone().iand(A):A.clone().iand(this)},s.prototype.uand=function(A){return this.length>A.length?this.clone().iuand(A):A.clone().iuand(this)},s.prototype.iuxor=function(A){var I,L;this.length>A.length?(I=this,L=A):(I=A,L=this);for(var q=0;q<L.length;q++)this.words[q]=I.words[q]^L.words[q];if(this!==I)for(;q<I.length;q++)this.words[q]=I.words[q];return this.length=I.length,this._strip()},s.prototype.ixor=function(A){return r((this.negative|A.negative)===0),this.iuxor(A)},s.prototype.xor=function(A){return this.length>A.length?this.clone().ixor(A):A.clone().ixor(this)},s.prototype.uxor=function(A){return this.length>A.length?this.clone().iuxor(A):A.clone().iuxor(this)},s.prototype.inotn=function(A){r(typeof A=="number"&&A>=0);var I=Math.ceil(A/26)|0,L=A%26;this._expand(I),L>0&&I--;for(var q=0;q<I;q++)this.words[q]=~this.words[q]&67108863;return L>0&&(this.words[q]=~this.words[q]&67108863>>26-L),this._strip()},s.prototype.notn=function(A){return this.clone().inotn(A)},s.prototype.setn=function(A,I){r(typeof A=="number"&&A>=0);var L=A/26|0,q=A%26;return this._expand(L+1),I?this.words[L]=this.words[L]|1<<q:this.words[L]=this.words[L]&~(1<<q),this._strip()},s.prototype.iadd=function(A){var I;if(this.negative!==0&&A.negative===0)return this.negative=0,I=this.isub(A),this.negative^=1,this._normSign();if(this.negative===0&&A.negative!==0)return A.negative=0,I=this.isub(A),A.negative=1,I._normSign();var L,q;this.length>A.length?(L=this,q=A):(L=A,q=this);for(var K=0,te=0;te<q.length;te++)I=(L.words[te]|0)+(q.words[te]|0)+K,this.words[te]=I&67108863,K=I>>>26;for(;K!==0&&te<L.length;te++)I=(L.words[te]|0)+K,this.words[te]=I&67108863,K=I>>>26;if(this.length=L.length,K!==0)this.words[this.length]=K,this.length++;else if(L!==this)for(;te<L.length;te++)this.words[te]=L.words[te];return this},s.prototype.add=function(A){var I;return A.negative!==0&&this.negative===0?(A.negative=0,I=this.sub(A),A.negative^=1,I):A.negative===0&&this.negative!==0?(this.negative=0,I=A.sub(this),this.negative=1,I):this.length>A.length?this.clone().iadd(A):A.clone().iadd(this)},s.prototype.isub=function(A){if(A.negative!==0){A.negative=0;var I=this.iadd(A);return A.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(A),this.negative=1,this._normSign();var L=this.cmp(A);if(L===0)return this.negative=0,this.length=1,this.words[0]=0,this;var q,K;L>0?(q=this,K=A):(q=A,K=this);for(var te=0,Y=0;Y<K.length;Y++)I=(q.words[Y]|0)-(K.words[Y]|0)+te,te=I>>26,this.words[Y]=I&67108863;for(;te!==0&&Y<q.length;Y++)I=(q.words[Y]|0)+te,te=I>>26,this.words[Y]=I&67108863;if(te===0&&Y<q.length&&q!==this)for(;Y<q.length;Y++)this.words[Y]=q.words[Y];return this.length=Math.max(this.length,Y),q!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(A){return this.clone().isub(A)};function w(U,A,I){I.negative=A.negative^U.negative;var L=U.length+A.length|0;I.length=L,L=L-1|0;var q=U.words[0]|0,K=A.words[0]|0,te=q*K,Y=te&67108863,V=te/67108864|0;I.words[0]=Y;for(var M=1;M<L;M++){for(var P=V>>>26,W=V&67108863,X=Math.min(M,A.length-1),se=Math.max(0,M-U.length+1);se<=X;se++){var ae=M-se|0;q=U.words[ae]|0,K=A.words[se]|0,te=q*K+W,P+=te/67108864|0,W=te&67108863}I.words[M]=W|0,V=P|0}return V!==0?I.words[M]=V|0:I.length--,I._strip()}var T=function(A,I,L){var q=A.words,K=I.words,te=L.words,Y=0,V,M,P,W=q[0]|0,X=W&8191,se=W>>>13,ae=q[1]|0,Te=ae&8191,oe=ae>>>13,ve=q[2]|0,ke=ve&8191,pe=ve>>>13,ze=q[3]|0,Me=ze&8191,he=ze>>>13,_e=q[4]|0,We=_e&8191,Ke=_e>>>13,it=q[5]|0,st=it&8191,ut=it>>>13,Je=q[6]|0,Le=Je&8191,et=Je>>>13,Ut=q[7]|0,Ie=Ut&8191,qe=Ut>>>13,yt=q[8]|0,ht=yt&8191,ie=yt>>>13,J=q[9]|0,Z=J&8191,ue=J>>>13,Se=K[0]|0,de=Se&8191,ge=Se>>>13,Qe=K[1]|0,tt=Qe&8191,lt=Qe>>>13,Vt=K[2]|0,wt=Vt&8191,Ot=Vt>>>13,fn=K[3]|0,tn=fn&8191,rn=fn>>>13,Oi=K[4]|0,Vn=Oi&8191,le=Oi>>>13,Q=K[5]|0,ee=Q&8191,fe=Q>>>13,Pe=K[6]|0,Oe=Pe&8191,He=Pe>>>13,Qt=K[7]|0,qt=Qt&8191,ct=Qt>>>13,gn=K[8]|0,At=gn&8191,bn=gn>>>13,dl=K[9]|0,ar=dl&8191,Tr=dl>>>13;L.negative=A.negative^I.negative,L.length=19,V=Math.imul(X,de),M=Math.imul(X,ge),M=M+Math.imul(se,de)|0,P=Math.imul(se,ge);var Kh=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Kh>>>26)|0,Kh&=67108863,V=Math.imul(Te,de),M=Math.imul(Te,ge),M=M+Math.imul(oe,de)|0,P=Math.imul(oe,ge),V=V+Math.imul(X,tt)|0,M=M+Math.imul(X,lt)|0,M=M+Math.imul(se,tt)|0,P=P+Math.imul(se,lt)|0;var iu=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(iu>>>26)|0,iu&=67108863,V=Math.imul(ke,de),M=Math.imul(ke,ge),M=M+Math.imul(pe,de)|0,P=Math.imul(pe,ge),V=V+Math.imul(Te,tt)|0,M=M+Math.imul(Te,lt)|0,M=M+Math.imul(oe,tt)|0,P=P+Math.imul(oe,lt)|0,V=V+Math.imul(X,wt)|0,M=M+Math.imul(X,Ot)|0,M=M+Math.imul(se,wt)|0,P=P+Math.imul(se,Ot)|0;var Do=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Do>>>26)|0,Do&=67108863,V=Math.imul(Me,de),M=Math.imul(Me,ge),M=M+Math.imul(he,de)|0,P=Math.imul(he,ge),V=V+Math.imul(ke,tt)|0,M=M+Math.imul(ke,lt)|0,M=M+Math.imul(pe,tt)|0,P=P+Math.imul(pe,lt)|0,V=V+Math.imul(Te,wt)|0,M=M+Math.imul(Te,Ot)|0,M=M+Math.imul(oe,wt)|0,P=P+Math.imul(oe,Ot)|0,V=V+Math.imul(X,tn)|0,M=M+Math.imul(X,rn)|0,M=M+Math.imul(se,tn)|0,P=P+Math.imul(se,rn)|0;var fl=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(fl>>>26)|0,fl&=67108863,V=Math.imul(We,de),M=Math.imul(We,ge),M=M+Math.imul(Ke,de)|0,P=Math.imul(Ke,ge),V=V+Math.imul(Me,tt)|0,M=M+Math.imul(Me,lt)|0,M=M+Math.imul(he,tt)|0,P=P+Math.imul(he,lt)|0,V=V+Math.imul(ke,wt)|0,M=M+Math.imul(ke,Ot)|0,M=M+Math.imul(pe,wt)|0,P=P+Math.imul(pe,Ot)|0,V=V+Math.imul(Te,tn)|0,M=M+Math.imul(Te,rn)|0,M=M+Math.imul(oe,tn)|0,P=P+Math.imul(oe,rn)|0,V=V+Math.imul(X,Vn)|0,M=M+Math.imul(X,le)|0,M=M+Math.imul(se,Vn)|0,P=P+Math.imul(se,le)|0;var jo=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(jo>>>26)|0,jo&=67108863,V=Math.imul(st,de),M=Math.imul(st,ge),M=M+Math.imul(ut,de)|0,P=Math.imul(ut,ge),V=V+Math.imul(We,tt)|0,M=M+Math.imul(We,lt)|0,M=M+Math.imul(Ke,tt)|0,P=P+Math.imul(Ke,lt)|0,V=V+Math.imul(Me,wt)|0,M=M+Math.imul(Me,Ot)|0,M=M+Math.imul(he,wt)|0,P=P+Math.imul(he,Ot)|0,V=V+Math.imul(ke,tn)|0,M=M+Math.imul(ke,rn)|0,M=M+Math.imul(pe,tn)|0,P=P+Math.imul(pe,rn)|0,V=V+Math.imul(Te,Vn)|0,M=M+Math.imul(Te,le)|0,M=M+Math.imul(oe,Vn)|0,P=P+Math.imul(oe,le)|0,V=V+Math.imul(X,ee)|0,M=M+Math.imul(X,fe)|0,M=M+Math.imul(se,ee)|0,P=P+Math.imul(se,fe)|0;var Bo=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Bo>>>26)|0,Bo&=67108863,V=Math.imul(Le,de),M=Math.imul(Le,ge),M=M+Math.imul(et,de)|0,P=Math.imul(et,ge),V=V+Math.imul(st,tt)|0,M=M+Math.imul(st,lt)|0,M=M+Math.imul(ut,tt)|0,P=P+Math.imul(ut,lt)|0,V=V+Math.imul(We,wt)|0,M=M+Math.imul(We,Ot)|0,M=M+Math.imul(Ke,wt)|0,P=P+Math.imul(Ke,Ot)|0,V=V+Math.imul(Me,tn)|0,M=M+Math.imul(Me,rn)|0,M=M+Math.imul(he,tn)|0,P=P+Math.imul(he,rn)|0,V=V+Math.imul(ke,Vn)|0,M=M+Math.imul(ke,le)|0,M=M+Math.imul(pe,Vn)|0,P=P+Math.imul(pe,le)|0,V=V+Math.imul(Te,ee)|0,M=M+Math.imul(Te,fe)|0,M=M+Math.imul(oe,ee)|0,P=P+Math.imul(oe,fe)|0,V=V+Math.imul(X,Oe)|0,M=M+Math.imul(X,He)|0,M=M+Math.imul(se,Oe)|0,P=P+Math.imul(se,He)|0;var ga=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(ga>>>26)|0,ga&=67108863,V=Math.imul(Ie,de),M=Math.imul(Ie,ge),M=M+Math.imul(qe,de)|0,P=Math.imul(qe,ge),V=V+Math.imul(Le,tt)|0,M=M+Math.imul(Le,lt)|0,M=M+Math.imul(et,tt)|0,P=P+Math.imul(et,lt)|0,V=V+Math.imul(st,wt)|0,M=M+Math.imul(st,Ot)|0,M=M+Math.imul(ut,wt)|0,P=P+Math.imul(ut,Ot)|0,V=V+Math.imul(We,tn)|0,M=M+Math.imul(We,rn)|0,M=M+Math.imul(Ke,tn)|0,P=P+Math.imul(Ke,rn)|0,V=V+Math.imul(Me,Vn)|0,M=M+Math.imul(Me,le)|0,M=M+Math.imul(he,Vn)|0,P=P+Math.imul(he,le)|0,V=V+Math.imul(ke,ee)|0,M=M+Math.imul(ke,fe)|0,M=M+Math.imul(pe,ee)|0,P=P+Math.imul(pe,fe)|0,V=V+Math.imul(Te,Oe)|0,M=M+Math.imul(Te,He)|0,M=M+Math.imul(oe,Oe)|0,P=P+Math.imul(oe,He)|0,V=V+Math.imul(X,qt)|0,M=M+Math.imul(X,ct)|0,M=M+Math.imul(se,qt)|0,P=P+Math.imul(se,ct)|0;var Uo=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Uo>>>26)|0,Uo&=67108863,V=Math.imul(ht,de),M=Math.imul(ht,ge),M=M+Math.imul(ie,de)|0,P=Math.imul(ie,ge),V=V+Math.imul(Ie,tt)|0,M=M+Math.imul(Ie,lt)|0,M=M+Math.imul(qe,tt)|0,P=P+Math.imul(qe,lt)|0,V=V+Math.imul(Le,wt)|0,M=M+Math.imul(Le,Ot)|0,M=M+Math.imul(et,wt)|0,P=P+Math.imul(et,Ot)|0,V=V+Math.imul(st,tn)|0,M=M+Math.imul(st,rn)|0,M=M+Math.imul(ut,tn)|0,P=P+Math.imul(ut,rn)|0,V=V+Math.imul(We,Vn)|0,M=M+Math.imul(We,le)|0,M=M+Math.imul(Ke,Vn)|0,P=P+Math.imul(Ke,le)|0,V=V+Math.imul(Me,ee)|0,M=M+Math.imul(Me,fe)|0,M=M+Math.imul(he,ee)|0,P=P+Math.imul(he,fe)|0,V=V+Math.imul(ke,Oe)|0,M=M+Math.imul(ke,He)|0,M=M+Math.imul(pe,Oe)|0,P=P+Math.imul(pe,He)|0,V=V+Math.imul(Te,qt)|0,M=M+Math.imul(Te,ct)|0,M=M+Math.imul(oe,qt)|0,P=P+Math.imul(oe,ct)|0,V=V+Math.imul(X,At)|0,M=M+Math.imul(X,bn)|0,M=M+Math.imul(se,At)|0,P=P+Math.imul(se,bn)|0;var vr=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(vr>>>26)|0,vr&=67108863,V=Math.imul(Z,de),M=Math.imul(Z,ge),M=M+Math.imul(ue,de)|0,P=Math.imul(ue,ge),V=V+Math.imul(ht,tt)|0,M=M+Math.imul(ht,lt)|0,M=M+Math.imul(ie,tt)|0,P=P+Math.imul(ie,lt)|0,V=V+Math.imul(Ie,wt)|0,M=M+Math.imul(Ie,Ot)|0,M=M+Math.imul(qe,wt)|0,P=P+Math.imul(qe,Ot)|0,V=V+Math.imul(Le,tn)|0,M=M+Math.imul(Le,rn)|0,M=M+Math.imul(et,tn)|0,P=P+Math.imul(et,rn)|0,V=V+Math.imul(st,Vn)|0,M=M+Math.imul(st,le)|0,M=M+Math.imul(ut,Vn)|0,P=P+Math.imul(ut,le)|0,V=V+Math.imul(We,ee)|0,M=M+Math.imul(We,fe)|0,M=M+Math.imul(Ke,ee)|0,P=P+Math.imul(Ke,fe)|0,V=V+Math.imul(Me,Oe)|0,M=M+Math.imul(Me,He)|0,M=M+Math.imul(he,Oe)|0,P=P+Math.imul(he,He)|0,V=V+Math.imul(ke,qt)|0,M=M+Math.imul(ke,ct)|0,M=M+Math.imul(pe,qt)|0,P=P+Math.imul(pe,ct)|0,V=V+Math.imul(Te,At)|0,M=M+Math.imul(Te,bn)|0,M=M+Math.imul(oe,At)|0,P=P+Math.imul(oe,bn)|0,V=V+Math.imul(X,ar)|0,M=M+Math.imul(X,Tr)|0,M=M+Math.imul(se,ar)|0,P=P+Math.imul(se,Tr)|0;var su=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(su>>>26)|0,su&=67108863,V=Math.imul(Z,tt),M=Math.imul(Z,lt),M=M+Math.imul(ue,tt)|0,P=Math.imul(ue,lt),V=V+Math.imul(ht,wt)|0,M=M+Math.imul(ht,Ot)|0,M=M+Math.imul(ie,wt)|0,P=P+Math.imul(ie,Ot)|0,V=V+Math.imul(Ie,tn)|0,M=M+Math.imul(Ie,rn)|0,M=M+Math.imul(qe,tn)|0,P=P+Math.imul(qe,rn)|0,V=V+Math.imul(Le,Vn)|0,M=M+Math.imul(Le,le)|0,M=M+Math.imul(et,Vn)|0,P=P+Math.imul(et,le)|0,V=V+Math.imul(st,ee)|0,M=M+Math.imul(st,fe)|0,M=M+Math.imul(ut,ee)|0,P=P+Math.imul(ut,fe)|0,V=V+Math.imul(We,Oe)|0,M=M+Math.imul(We,He)|0,M=M+Math.imul(Ke,Oe)|0,P=P+Math.imul(Ke,He)|0,V=V+Math.imul(Me,qt)|0,M=M+Math.imul(Me,ct)|0,M=M+Math.imul(he,qt)|0,P=P+Math.imul(he,ct)|0,V=V+Math.imul(ke,At)|0,M=M+Math.imul(ke,bn)|0,M=M+Math.imul(pe,At)|0,P=P+Math.imul(pe,bn)|0,V=V+Math.imul(Te,ar)|0,M=M+Math.imul(Te,Tr)|0,M=M+Math.imul(oe,ar)|0,P=P+Math.imul(oe,Tr)|0;var ou=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(ou>>>26)|0,ou&=67108863,V=Math.imul(Z,wt),M=Math.imul(Z,Ot),M=M+Math.imul(ue,wt)|0,P=Math.imul(ue,Ot),V=V+Math.imul(ht,tn)|0,M=M+Math.imul(ht,rn)|0,M=M+Math.imul(ie,tn)|0,P=P+Math.imul(ie,rn)|0,V=V+Math.imul(Ie,Vn)|0,M=M+Math.imul(Ie,le)|0,M=M+Math.imul(qe,Vn)|0,P=P+Math.imul(qe,le)|0,V=V+Math.imul(Le,ee)|0,M=M+Math.imul(Le,fe)|0,M=M+Math.imul(et,ee)|0,P=P+Math.imul(et,fe)|0,V=V+Math.imul(st,Oe)|0,M=M+Math.imul(st,He)|0,M=M+Math.imul(ut,Oe)|0,P=P+Math.imul(ut,He)|0,V=V+Math.imul(We,qt)|0,M=M+Math.imul(We,ct)|0,M=M+Math.imul(Ke,qt)|0,P=P+Math.imul(Ke,ct)|0,V=V+Math.imul(Me,At)|0,M=M+Math.imul(Me,bn)|0,M=M+Math.imul(he,At)|0,P=P+Math.imul(he,bn)|0,V=V+Math.imul(ke,ar)|0,M=M+Math.imul(ke,Tr)|0,M=M+Math.imul(pe,ar)|0,P=P+Math.imul(pe,Tr)|0;var mo=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(mo>>>26)|0,mo&=67108863,V=Math.imul(Z,tn),M=Math.imul(Z,rn),M=M+Math.imul(ue,tn)|0,P=Math.imul(ue,rn),V=V+Math.imul(ht,Vn)|0,M=M+Math.imul(ht,le)|0,M=M+Math.imul(ie,Vn)|0,P=P+Math.imul(ie,le)|0,V=V+Math.imul(Ie,ee)|0,M=M+Math.imul(Ie,fe)|0,M=M+Math.imul(qe,ee)|0,P=P+Math.imul(qe,fe)|0,V=V+Math.imul(Le,Oe)|0,M=M+Math.imul(Le,He)|0,M=M+Math.imul(et,Oe)|0,P=P+Math.imul(et,He)|0,V=V+Math.imul(st,qt)|0,M=M+Math.imul(st,ct)|0,M=M+Math.imul(ut,qt)|0,P=P+Math.imul(ut,ct)|0,V=V+Math.imul(We,At)|0,M=M+Math.imul(We,bn)|0,M=M+Math.imul(Ke,At)|0,P=P+Math.imul(Ke,bn)|0,V=V+Math.imul(Me,ar)|0,M=M+Math.imul(Me,Tr)|0,M=M+Math.imul(he,ar)|0,P=P+Math.imul(he,Tr)|0;var Zn=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,V=Math.imul(Z,Vn),M=Math.imul(Z,le),M=M+Math.imul(ue,Vn)|0,P=Math.imul(ue,le),V=V+Math.imul(ht,ee)|0,M=M+Math.imul(ht,fe)|0,M=M+Math.imul(ie,ee)|0,P=P+Math.imul(ie,fe)|0,V=V+Math.imul(Ie,Oe)|0,M=M+Math.imul(Ie,He)|0,M=M+Math.imul(qe,Oe)|0,P=P+Math.imul(qe,He)|0,V=V+Math.imul(Le,qt)|0,M=M+Math.imul(Le,ct)|0,M=M+Math.imul(et,qt)|0,P=P+Math.imul(et,ct)|0,V=V+Math.imul(st,At)|0,M=M+Math.imul(st,bn)|0,M=M+Math.imul(ut,At)|0,P=P+Math.imul(ut,bn)|0,V=V+Math.imul(We,ar)|0,M=M+Math.imul(We,Tr)|0,M=M+Math.imul(Ke,ar)|0,P=P+Math.imul(Ke,Tr)|0;var ws=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(ws>>>26)|0,ws&=67108863,V=Math.imul(Z,ee),M=Math.imul(Z,fe),M=M+Math.imul(ue,ee)|0,P=Math.imul(ue,fe),V=V+Math.imul(ht,Oe)|0,M=M+Math.imul(ht,He)|0,M=M+Math.imul(ie,Oe)|0,P=P+Math.imul(ie,He)|0,V=V+Math.imul(Ie,qt)|0,M=M+Math.imul(Ie,ct)|0,M=M+Math.imul(qe,qt)|0,P=P+Math.imul(qe,ct)|0,V=V+Math.imul(Le,At)|0,M=M+Math.imul(Le,bn)|0,M=M+Math.imul(et,At)|0,P=P+Math.imul(et,bn)|0,V=V+Math.imul(st,ar)|0,M=M+Math.imul(st,Tr)|0,M=M+Math.imul(ut,ar)|0,P=P+Math.imul(ut,Tr)|0;var Ks=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,V=Math.imul(Z,Oe),M=Math.imul(Z,He),M=M+Math.imul(ue,Oe)|0,P=Math.imul(ue,He),V=V+Math.imul(ht,qt)|0,M=M+Math.imul(ht,ct)|0,M=M+Math.imul(ie,qt)|0,P=P+Math.imul(ie,ct)|0,V=V+Math.imul(Ie,At)|0,M=M+Math.imul(Ie,bn)|0,M=M+Math.imul(qe,At)|0,P=P+Math.imul(qe,bn)|0,V=V+Math.imul(Le,ar)|0,M=M+Math.imul(Le,Tr)|0,M=M+Math.imul(et,ar)|0,P=P+Math.imul(et,Tr)|0;var Qd=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Qd>>>26)|0,Qd&=67108863,V=Math.imul(Z,qt),M=Math.imul(Z,ct),M=M+Math.imul(ue,qt)|0,P=Math.imul(ue,ct),V=V+Math.imul(ht,At)|0,M=M+Math.imul(ht,bn)|0,M=M+Math.imul(ie,At)|0,P=P+Math.imul(ie,bn)|0,V=V+Math.imul(Ie,ar)|0,M=M+Math.imul(Ie,Tr)|0,M=M+Math.imul(qe,ar)|0,P=P+Math.imul(qe,Tr)|0;var _v=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(_v>>>26)|0,_v&=67108863,V=Math.imul(Z,At),M=Math.imul(Z,bn),M=M+Math.imul(ue,At)|0,P=Math.imul(ue,bn),V=V+Math.imul(ht,ar)|0,M=M+Math.imul(ht,Tr)|0,M=M+Math.imul(ie,ar)|0,P=P+Math.imul(ie,Tr)|0;var Zd=(Y+V|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Zd>>>26)|0,Zd&=67108863,V=Math.imul(Z,ar),M=Math.imul(Z,Tr),M=M+Math.imul(ue,ar)|0,P=Math.imul(ue,Tr);var ef=(Y+V|0)+((M&8191)<<13)|0;return Y=(P+(M>>>13)|0)+(ef>>>26)|0,ef&=67108863,te[0]=Kh,te[1]=iu,te[2]=Do,te[3]=fl,te[4]=jo,te[5]=Bo,te[6]=ga,te[7]=Uo,te[8]=vr,te[9]=su,te[10]=ou,te[11]=mo,te[12]=Zn,te[13]=ws,te[14]=Ks,te[15]=Qd,te[16]=_v,te[17]=Zd,te[18]=ef,Y!==0&&(te[19]=Y,L.length++),L};Math.imul||(T=w);function N(U,A,I){I.negative=A.negative^U.negative,I.length=U.length+A.length;for(var L=0,q=0,K=0;K<I.length-1;K++){var te=q;q=0;for(var Y=L&67108863,V=Math.min(K,A.length-1),M=Math.max(0,K-U.length+1);M<=V;M++){var P=K-M,W=U.words[P]|0,X=A.words[M]|0,se=W*X,ae=se&67108863;te=te+(se/67108864|0)|0,ae=ae+Y|0,Y=ae&67108863,te=te+(ae>>>26)|0,q+=te>>>26,te&=67108863}I.words[K]=Y,L=te,te=q}return L!==0?I.words[K]=L:I.length--,I._strip()}function O(U,A,I){return N(U,A,I)}s.prototype.mulTo=function(A,I){var L,q=this.length+A.length;return this.length===10&&A.length===10?L=T(this,A,I):q<63?L=w(this,A,I):q<1024?L=N(this,A,I):L=O(this,A,I),L},s.prototype.mul=function(A){var I=new s(null);return I.words=new Array(this.length+A.length),this.mulTo(A,I)},s.prototype.mulf=function(A){var I=new s(null);return I.words=new Array(this.length+A.length),O(this,A,I)},s.prototype.imul=function(A){return this.clone().mulTo(A,this)},s.prototype.imuln=function(A){var I=A<0;I&&(A=-A),r(typeof A=="number"),r(A<67108864);for(var L=0,q=0;q<this.length;q++){var K=(this.words[q]|0)*A,te=(K&67108863)+(L&67108863);L>>=26,L+=K/67108864|0,L+=te>>>26,this.words[q]=te&67108863}return L!==0&&(this.words[q]=L,this.length++),this.length=A===0?1:this.length,I?this.ineg():this},s.prototype.muln=function(A){return this.clone().imuln(A)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(A){var I=b(A);if(I.length===0)return new s(1);for(var L=this,q=0;q<I.length&&I[q]===0;q++,L=L.sqr());if(++q<I.length)for(var K=L.sqr();q<I.length;q++,K=K.sqr())I[q]!==0&&(L=L.mul(K));return L},s.prototype.iushln=function(A){r(typeof A=="number"&&A>=0);var I=A%26,L=(A-I)/26,q=67108863>>>26-I<<26-I,K;if(I!==0){var te=0;for(K=0;K<this.length;K++){var Y=this.words[K]&q,V=(this.words[K]|0)-Y<<I;this.words[K]=V|te,te=Y>>>26-I}te&&(this.words[K]=te,this.length++)}if(L!==0){for(K=this.length-1;K>=0;K--)this.words[K+L]=this.words[K];for(K=0;K<L;K++)this.words[K]=0;this.length+=L}return this._strip()},s.prototype.ishln=function(A){return r(this.negative===0),this.iushln(A)},s.prototype.iushrn=function(A,I,L){r(typeof A=="number"&&A>=0);var q;I?q=(I-I%26)/26:q=0;var K=A%26,te=Math.min((A-K)/26,this.length),Y=67108863^67108863>>>K<<K,V=L;if(q-=te,q=Math.max(0,q),V){for(var M=0;M<te;M++)V.words[M]=this.words[M];V.length=te}if(te!==0)if(this.length>te)for(this.length-=te,M=0;M<this.length;M++)this.words[M]=this.words[M+te];else this.words[0]=0,this.length=1;var P=0;for(M=this.length-1;M>=0&&(P!==0||M>=q);M--){var W=this.words[M]|0;this.words[M]=P<<26-K|W>>>K,P=W&Y}return V&&P!==0&&(V.words[V.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(A,I,L){return r(this.negative===0),this.iushrn(A,I,L)},s.prototype.shln=function(A){return this.clone().ishln(A)},s.prototype.ushln=function(A){return this.clone().iushln(A)},s.prototype.shrn=function(A){return this.clone().ishrn(A)},s.prototype.ushrn=function(A){return this.clone().iushrn(A)},s.prototype.testn=function(A){r(typeof A=="number"&&A>=0);var I=A%26,L=(A-I)/26,q=1<<I;if(this.length<=L)return!1;var K=this.words[L];return!!(K&q)},s.prototype.imaskn=function(A){r(typeof A=="number"&&A>=0);var I=A%26,L=(A-I)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=L)return this;if(I!==0&&L++,this.length=Math.min(L,this.length),I!==0){var q=67108863^67108863>>>I<<I;this.words[this.length-1]&=q}return this._strip()},s.prototype.maskn=function(A){return this.clone().imaskn(A)},s.prototype.iaddn=function(A){return r(typeof A=="number"),r(A<67108864),A<0?this.isubn(-A):this.negative!==0?this.length===1&&(this.words[0]|0)<=A?(this.words[0]=A-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(A),this.negative=1,this):this._iaddn(A)},s.prototype._iaddn=function(A){this.words[0]+=A;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},s.prototype.isubn=function(A){if(r(typeof A=="number"),r(A<67108864),A<0)return this.iaddn(-A);if(this.negative!==0)return this.negative=0,this.iaddn(A),this.negative=1,this;if(this.words[0]-=A,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this._strip()},s.prototype.addn=function(A){return this.clone().iaddn(A)},s.prototype.subn=function(A){return this.clone().isubn(A)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(A,I,L){var q=A.length+L,K;this._expand(q);var te,Y=0;for(K=0;K<A.length;K++){te=(this.words[K+L]|0)+Y;var V=(A.words[K]|0)*I;te-=V&67108863,Y=(te>>26)-(V/67108864|0),this.words[K+L]=te&67108863}for(;K<this.length-L;K++)te=(this.words[K+L]|0)+Y,Y=te>>26,this.words[K+L]=te&67108863;if(Y===0)return this._strip();for(r(Y===-1),Y=0,K=0;K<this.length;K++)te=-(this.words[K]|0)+Y,Y=te>>26,this.words[K]=te&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(A,I){var L=this.length-A.length,q=this.clone(),K=A,te=K.words[K.length-1]|0,Y=this._countBits(te);L=26-Y,L!==0&&(K=K.ushln(L),q.iushln(L),te=K.words[K.length-1]|0);var V=q.length-K.length,M;if(I!=="mod"){M=new s(null),M.length=V+1,M.words=new Array(M.length);for(var P=0;P<M.length;P++)M.words[P]=0}var W=q.clone()._ishlnsubmul(K,1,V);W.negative===0&&(q=W,M&&(M.words[V]=1));for(var X=V-1;X>=0;X--){var se=(q.words[K.length+X]|0)*67108864+(q.words[K.length+X-1]|0);for(se=Math.min(se/te|0,67108863),q._ishlnsubmul(K,se,X);q.negative!==0;)se--,q.negative=0,q._ishlnsubmul(K,1,X),q.isZero()||(q.negative^=1);M&&(M.words[X]=se)}return M&&M._strip(),q._strip(),I!=="div"&&L!==0&&q.iushrn(L),{div:M||null,mod:q}},s.prototype.divmod=function(A,I,L){if(r(!A.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var q,K,te;return this.negative!==0&&A.negative===0?(te=this.neg().divmod(A,I),I!=="mod"&&(q=te.div.neg()),I!=="div"&&(K=te.mod.neg(),L&&K.negative!==0&&K.iadd(A)),{div:q,mod:K}):this.negative===0&&A.negative!==0?(te=this.divmod(A.neg(),I),I!=="mod"&&(q=te.div.neg()),{div:q,mod:te.mod}):(this.negative&A.negative)!==0?(te=this.neg().divmod(A.neg(),I),I!=="div"&&(K=te.mod.neg(),L&&K.negative!==0&&K.isub(A)),{div:te.div,mod:K}):A.length>this.length||this.cmp(A)<0?{div:new s(0),mod:this}:A.length===1?I==="div"?{div:this.divn(A.words[0]),mod:null}:I==="mod"?{div:null,mod:new s(this.modrn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new s(this.modrn(A.words[0]))}:this._wordDiv(A,I)},s.prototype.div=function(A){return this.divmod(A,"div",!1).div},s.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod},s.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod},s.prototype.divRound=function(A){var I=this.divmod(A);if(I.mod.isZero())return I.div;var L=I.div.negative!==0?I.mod.isub(A):I.mod,q=A.ushrn(1),K=A.andln(1),te=L.cmp(q);return te<0||K===1&&te===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},s.prototype.modrn=function(A){var I=A<0;I&&(A=-A),r(A<=67108863);for(var L=(1<<26)%A,q=0,K=this.length-1;K>=0;K--)q=(L*q+(this.words[K]|0))%A;return I?-q:q},s.prototype.modn=function(A){return this.modrn(A)},s.prototype.idivn=function(A){var I=A<0;I&&(A=-A),r(A<=67108863);for(var L=0,q=this.length-1;q>=0;q--){var K=(this.words[q]|0)+L*67108864;this.words[q]=K/A|0,L=K%A}return this._strip(),I?this.ineg():this},s.prototype.divn=function(A){return this.clone().idivn(A)},s.prototype.egcd=function(A){r(A.negative===0),r(!A.isZero());var I=this,L=A.clone();I.negative!==0?I=I.umod(A):I=I.clone();for(var q=new s(1),K=new s(0),te=new s(0),Y=new s(1),V=0;I.isEven()&&L.isEven();)I.iushrn(1),L.iushrn(1),++V;for(var M=L.clone(),P=I.clone();!I.isZero();){for(var W=0,X=1;(I.words[0]&X)===0&&W<26;++W,X<<=1);if(W>0)for(I.iushrn(W);W-- >0;)(q.isOdd()||K.isOdd())&&(q.iadd(M),K.isub(P)),q.iushrn(1),K.iushrn(1);for(var se=0,ae=1;(L.words[0]&ae)===0&&se<26;++se,ae<<=1);if(se>0)for(L.iushrn(se);se-- >0;)(te.isOdd()||Y.isOdd())&&(te.iadd(M),Y.isub(P)),te.iushrn(1),Y.iushrn(1);I.cmp(L)>=0?(I.isub(L),q.isub(te),K.isub(Y)):(L.isub(I),te.isub(q),Y.isub(K))}return{a:te,b:Y,gcd:L.iushln(V)}},s.prototype._invmp=function(A){r(A.negative===0),r(!A.isZero());var I=this,L=A.clone();I.negative!==0?I=I.umod(A):I=I.clone();for(var q=new s(1),K=new s(0),te=L.clone();I.cmpn(1)>0&&L.cmpn(1)>0;){for(var Y=0,V=1;(I.words[0]&V)===0&&Y<26;++Y,V<<=1);if(Y>0)for(I.iushrn(Y);Y-- >0;)q.isOdd()&&q.iadd(te),q.iushrn(1);for(var M=0,P=1;(L.words[0]&P)===0&&M<26;++M,P<<=1);if(M>0)for(L.iushrn(M);M-- >0;)K.isOdd()&&K.iadd(te),K.iushrn(1);I.cmp(L)>=0?(I.isub(L),q.isub(K)):(L.isub(I),K.isub(q))}var W;return I.cmpn(1)===0?W=q:W=K,W.cmpn(0)<0&&W.iadd(A),W},s.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var I=this.clone(),L=A.clone();I.negative=0,L.negative=0;for(var q=0;I.isEven()&&L.isEven();q++)I.iushrn(1),L.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;L.isEven();)L.iushrn(1);var K=I.cmp(L);if(K<0){var te=I;I=L,L=te}else if(K===0||L.cmpn(1)===0)break;I.isub(L)}while(!0);return L.iushln(q)},s.prototype.invm=function(A){return this.egcd(A).a.umod(A)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(A){return this.words[0]&A},s.prototype.bincn=function(A){r(typeof A=="number");var I=A%26,L=(A-I)/26,q=1<<I;if(this.length<=L)return this._expand(L+1),this.words[L]|=q,this;for(var K=q,te=L;K!==0&&te<this.length;te++){var Y=this.words[te]|0;Y+=K,K=Y>>>26,Y&=67108863,this.words[te]=Y}return K!==0&&(this.words[te]=K,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(A){var I=A<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this._strip();var L;if(this.length>1)L=1;else{I&&(A=-A),r(A<=67108863,"Number is too big");var q=this.words[0]|0;L=q===A?0:q<A?-1:1}return this.negative!==0?-L|0:L},s.prototype.cmp=function(A){if(this.negative!==0&&A.negative===0)return-1;if(this.negative===0&&A.negative!==0)return 1;var I=this.ucmp(A);return this.negative!==0?-I|0:I},s.prototype.ucmp=function(A){if(this.length>A.length)return 1;if(this.length<A.length)return-1;for(var I=0,L=this.length-1;L>=0;L--){var q=this.words[L]|0,K=A.words[L]|0;if(q!==K){q<K?I=-1:q>K&&(I=1);break}}return I},s.prototype.gtn=function(A){return this.cmpn(A)===1},s.prototype.gt=function(A){return this.cmp(A)===1},s.prototype.gten=function(A){return this.cmpn(A)>=0},s.prototype.gte=function(A){return this.cmp(A)>=0},s.prototype.ltn=function(A){return this.cmpn(A)===-1},s.prototype.lt=function(A){return this.cmp(A)===-1},s.prototype.lten=function(A){return this.cmpn(A)<=0},s.prototype.lte=function(A){return this.cmp(A)<=0},s.prototype.eqn=function(A){return this.cmpn(A)===0},s.prototype.eq=function(A){return this.cmp(A)===0},s.red=function(A){return new G(A)},s.prototype.toRed=function(A){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),A.convertTo(this)._forceRed(A)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(A){return this.red=A,this},s.prototype.forceRed=function(A){return r(!this.red,"Already a number in reduction context"),this._forceRed(A)},s.prototype.redAdd=function(A){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,A)},s.prototype.redIAdd=function(A){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,A)},s.prototype.redSub=function(A){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,A)},s.prototype.redISub=function(A){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,A)},s.prototype.redShl=function(A){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,A)},s.prototype.redMul=function(A){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.mul(this,A)},s.prototype.redIMul=function(A){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.imul(this,A)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(A){return r(this.red&&!A.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,A)};var j={k256:null,p224:null,p192:null,p25519:null};function _(U,A){this.name=U,this.p=new s(A,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var A=new s(null);return A.words=new Array(Math.ceil(this.n/13)),A},_.prototype.ireduce=function(A){var I=A,L;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),L=I.bitLength();while(L>this.n);var q=L<this.n?-1:I.ucmp(this.p);return q===0?(I.words[0]=0,I.length=1):q>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},_.prototype.split=function(A,I){A.iushrn(this.n,0,I)},_.prototype.imulK=function(A){return A.imul(this.k)};function F(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,_),F.prototype.split=function(A,I){for(var L=4194303,q=Math.min(A.length,9),K=0;K<q;K++)I.words[K]=A.words[K];if(I.length=q,A.length<=9){A.words[0]=0,A.length=1;return}var te=A.words[9];for(I.words[I.length++]=te&L,K=10;K<A.length;K++){var Y=A.words[K]|0;A.words[K-10]=(Y&L)<<4|te>>>22,te=Y}te>>>=22,A.words[K-10]=te,te===0&&A.length>10?A.length-=10:A.length-=9},F.prototype.imulK=function(A){A.words[A.length]=0,A.words[A.length+1]=0,A.length+=2;for(var I=0,L=0;L<A.length;L++){var q=A.words[L]|0;I+=q*977,A.words[L]=I&67108863,I=q*64+(I/67108864|0)}return A.words[A.length-1]===0&&(A.length--,A.words[A.length-1]===0&&A.length--),A};function z(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(z,_);function D(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(D,_);function $(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,_),$.prototype.imulK=function(A){for(var I=0,L=0;L<A.length;L++){var q=(A.words[L]|0)*19+I,K=q&67108863;q>>>=26,A.words[L]=K,I=q}return I!==0&&(A.words[A.length++]=I),A},s._prime=function(A){if(j[A])return j[A];var I;if(A==="k256")I=new F;else if(A==="p224")I=new z;else if(A==="p192")I=new D;else if(A==="p25519")I=new $;else throw new Error("Unknown prime "+A);return j[A]=I,I};function G(U){if(typeof U=="string"){var A=s._prime(U);this.m=A.p,this.prime=A}else r(U.gtn(1),"modulus must be greater than 1"),this.m=U,this.prime=null}G.prototype._verify1=function(A){r(A.negative===0,"red works only with positives"),r(A.red,"red works only with red numbers")},G.prototype._verify2=function(A,I){r((A.negative|I.negative)===0,"red works only with positives"),r(A.red&&A.red===I.red,"red works only with red numbers")},G.prototype.imod=function(A){return this.prime?this.prime.ireduce(A)._forceRed(this):(d(A,A.umod(this.m)._forceRed(this)),A)},G.prototype.neg=function(A){return A.isZero()?A.clone():this.m.sub(A)._forceRed(this)},G.prototype.add=function(A,I){this._verify2(A,I);var L=A.add(I);return L.cmp(this.m)>=0&&L.isub(this.m),L._forceRed(this)},G.prototype.iadd=function(A,I){this._verify2(A,I);var L=A.iadd(I);return L.cmp(this.m)>=0&&L.isub(this.m),L},G.prototype.sub=function(A,I){this._verify2(A,I);var L=A.sub(I);return L.cmpn(0)<0&&L.iadd(this.m),L._forceRed(this)},G.prototype.isub=function(A,I){this._verify2(A,I);var L=A.isub(I);return L.cmpn(0)<0&&L.iadd(this.m),L},G.prototype.shl=function(A,I){return this._verify1(A),this.imod(A.ushln(I))},G.prototype.imul=function(A,I){return this._verify2(A,I),this.imod(A.imul(I))},G.prototype.mul=function(A,I){return this._verify2(A,I),this.imod(A.mul(I))},G.prototype.isqr=function(A){return this.imul(A,A.clone())},G.prototype.sqr=function(A){return this.mul(A,A)},G.prototype.sqrt=function(A){if(A.isZero())return A.clone();var I=this.m.andln(3);if(r(I%2===1),I===3){var L=this.m.add(new s(1)).iushrn(2);return this.pow(A,L)}for(var q=this.m.subn(1),K=0;!q.isZero()&&q.andln(1)===0;)K++,q.iushrn(1);r(!q.isZero());var te=new s(1).toRed(this),Y=te.redNeg(),V=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new s(2*M*M).toRed(this);this.pow(M,V).cmp(Y)!==0;)M.redIAdd(Y);for(var P=this.pow(M,q),W=this.pow(A,q.addn(1).iushrn(1)),X=this.pow(A,q),se=K;X.cmp(te)!==0;){for(var ae=X,Te=0;ae.cmp(te)!==0;Te++)ae=ae.redSqr();r(Te<se);var oe=this.pow(P,new s(1).iushln(se-Te-1));W=W.redMul(oe),P=oe.redSqr(),X=X.redMul(P),se=Te}return W},G.prototype.invm=function(A){var I=A._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},G.prototype.pow=function(A,I){if(I.isZero())return new s(1).toRed(this);if(I.cmpn(1)===0)return A.clone();var L=4,q=new Array(1<<L);q[0]=new s(1).toRed(this),q[1]=A;for(var K=2;K<q.length;K++)q[K]=this.mul(q[K-1],A);var te=q[0],Y=0,V=0,M=I.bitLength()%26;for(M===0&&(M=26),K=I.length-1;K>=0;K--){for(var P=I.words[K],W=M-1;W>=0;W--){var X=P>>W&1;if(te!==q[0]&&(te=this.sqr(te)),X===0&&Y===0){V=0;continue}Y<<=1,Y|=X,V++,!(V!==L&&(K!==0||W!==0))&&(te=this.mul(te,q[Y]),V=0,Y=0)}M=26}return te},G.prototype.convertTo=function(A){var I=A.umod(this.m);return I===A?I.clone():I},G.prototype.convertFrom=function(A){var I=A.clone();return I.red=null,I},s.mont=function(A){return new H(A)};function H(U){G.call(this,U),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(H,G),H.prototype.convertTo=function(A){return this.imod(A.ushln(this.shift))},H.prototype.convertFrom=function(A){var I=this.imod(A.mul(this.rinv));return I.red=null,I},H.prototype.imul=function(A,I){if(A.isZero()||I.isZero())return A.words[0]=0,A.length=1,A;var L=A.imul(I),q=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=L.isub(q).iushrn(this.shift),te=K;return K.cmp(this.m)>=0?te=K.isub(this.m):K.cmpn(0)<0&&(te=K.iadd(this.m)),te._forceRed(this)},H.prototype.mul=function(A,I){if(A.isZero()||I.isZero())return new s(0)._forceRed(this);var L=A.mul(I),q=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=L.isub(q).iushrn(this.shift),te=K;return K.cmp(this.m)>=0?te=K.isub(this.m):K.cmpn(0)<0&&(te=K.iadd(this.m)),te._forceRed(this)},H.prototype.invm=function(A){var I=this.imod(A._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(t,Jdt)})(XT)),XT.exports}var Xdt=n0e();const nee=bs(Xdt);var uT={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ree;function r0e(){return ree||(ree=1,(function(t,e){var n=N7(),r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(uT,uT.exports)),uT.exports}var $O,iee;function Qdt(){if(iee)return $O;iee=1;var t=r0e().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function m(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=t.from(x)),!t.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var b=0,w=0,T=0,N=x.length;T!==N&&x[T]===0;)T++,b++;for(var O=(N-T)*h+1>>>0,j=new Uint8Array(O);T!==N;){for(var _=x[T],F=0,z=O-1;(_!==0||F<w)&&z!==-1;z--,F++)_+=256*j[z]>>>0,j[z]=_%l>>>0,_=_/l>>>0;if(_!==0)throw new Error("Non-zero carry");w=F,T++}for(var D=O-w;D!==O&&j[D]===0;)D++;for(var $=c.repeat(b);D<O;++D)$+=n.charAt(j[D]);return $}function g(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return t.alloc(0);for(var b=0,w=0,T=0;x[b]===c;)w++,b++;for(var N=(x.length-b)*d+1>>>0,O=new Uint8Array(N);b<x.length;){var j=x.charCodeAt(b);if(j>255)return;var _=r[j];if(_===255)return;for(var F=0,z=N-1;(_!==0||F<T)&&z!==-1;z--,F++)_+=l*O[z]>>>0,O[z]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");T=F,b++}for(var D=N-T;D!==N&&O[D]===0;)D++;var $=t.allocUnsafe(w+(N-D));$.fill(0,0,w);for(var G=w;D!==N;)$[G++]=O[D++];return $}function v(x){var b=g(x);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:v}}return $O=e,$O}var zO,see;function Zdt(){if(see)return zO;see=1;var t=Qdt(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return zO=t(e),zO}var eft=Zdt();const ps=bs(eft),oee=Lme;var Xn={},VO,aee;function tft(){if(aee)return VO;aee=1;var t=r0e().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function m(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=t.from(x)),!t.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var b=0,w=0,T=0,N=x.length;T!==N&&x[T]===0;)T++,b++;for(var O=(N-T)*h+1>>>0,j=new Uint8Array(O);T!==N;){for(var _=x[T],F=0,z=O-1;(_!==0||F<w)&&z!==-1;z--,F++)_+=256*j[z]>>>0,j[z]=_%l>>>0,_=_/l>>>0;if(_!==0)throw new Error("Non-zero carry");w=F,T++}for(var D=O-w;D!==O&&j[D]===0;)D++;for(var $=c.repeat(b);D<O;++D)$+=n.charAt(j[D]);return $}function g(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return t.alloc(0);for(var b=0,w=0,T=0;x[b]===c;)w++,b++;for(var N=(x.length-b)*d+1>>>0,O=new Uint8Array(N);b<x.length;){var j=x.charCodeAt(b);if(j>255)return;var _=r[j];if(_===255)return;for(var F=0,z=N-1;(_!==0||F<T)&&z!==-1;z--,F++)_+=l*O[z]>>>0,O[z]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");T=F,b++}for(var D=N-T;D!==N&&O[D]===0;)D++;var $=t.allocUnsafe(w+(N-D));$.fill(0,0,w);for(var G=w;D!==N;)$[G++]=O[D++];return $}function v(x){var b=g(x);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:v}}return VO=e,VO}var HO,lee;function nft(){if(lee)return HO;lee=1;var t=tft(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return HO=t(e),HO}function Zu(t,e,n){return e<=t&&t<=n}function xP(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function rft(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function ift(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var tN=-1;function C7(t){this.tokens=[].slice.call(t)}C7.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():tN},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Vx=-1;function qO(t,e){if(t)throw TypeError("Decoder error");return e||65533}var nN="utf-8";function rN(t,e){if(!(this instanceof rN))return new rN(t,e);if(t=t!==void 0?String(t).toLowerCase():nN,t!==nN)throw new Error("Encoding not supported. Only utf-8 is supported");e=xP(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}rN.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=xP(n),this._streaming||(this._decoder=new sft({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new C7(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Vx);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Vx)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),ift(s)}};function iN(t,e){if(!(this instanceof iN))return new iN(t,e);if(t=t!==void 0?String(t).toLowerCase():nN,t!==nN)throw new Error("Encoding not supported. Only utf-8 is supported");e=xP(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}iN.prototype={encode:function(e,n){e=e?String(e):"",n=xP(n),this._streaming||(this._encoder=new oft(this._options)),this._streaming=!!n.stream;for(var r=[],i=new C7(rft(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Vx);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Vx;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function sft(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===tN&&i!==0)return i=0,qO(e);if(l===tN)return Vx;if(i===0){if(Zu(l,0,127))return l;if(Zu(l,194,223))i=1,n=l-192;else if(Zu(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,n=l-224;else if(Zu(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,n=l-240;else return qO(e);return n=n<<6*i,null}if(!Zu(l,s,o))return n=i=r=0,s=128,o=191,a.prepend(l),qO(e);if(s=128,o=191,r+=1,n+=l-128<<6*(i-r),r!==i)return null;var c=n;return n=i=r=0,c}}function oft(t){t.fatal,this.handler=function(e,n){if(n===tN)return Vx;if(Zu(n,0,127))return n;var r,i;Zu(n,128,2047)?(r=1,i=192):Zu(n,2048,65535)?(r=2,i=224):Zu(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const aft=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:rN,TextEncoder:iN},Symbol.toStringTag,{value:"Module"})),lft=ete(aft);var cee;function cft(){if(cee)return Xn;cee=1;var t=Xn&&Xn.__createBinding||(Object.create?(function(D,$,G,H){H===void 0&&(H=G),Object.defineProperty(D,H,{enumerable:!0,get:function(){return $[G]}})}):(function(D,$,G,H){H===void 0&&(H=G),D[H]=$[G]})),e=Xn&&Xn.__setModuleDefault||(Object.create?(function(D,$){Object.defineProperty(D,"default",{enumerable:!0,value:$})}):function(D,$){D.default=$}),n=Xn&&Xn.__decorate||function(D,$,G,H){var U=arguments.length,A=U<3?$:H===null?H=Object.getOwnPropertyDescriptor($,G):H,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(D,$,G,H);else for(var L=D.length-1;L>=0;L--)(I=D[L])&&(A=(U<3?I(A):U>3?I($,G,A):I($,G))||A);return U>3&&A&&Object.defineProperty($,G,A),A},r=Xn&&Xn.__importStar||function(D){if(D&&D.__esModule)return D;var $={};if(D!=null)for(var G in D)G!=="default"&&Object.hasOwnProperty.call(D,G)&&t($,D,G);return e($,D),$},i=Xn&&Xn.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.deserializeUnchecked=Xn.deserialize=Xn.serialize=Xn.BinaryReader=Xn.BinaryWriter=Xn.BorshError=Xn.baseDecode=Xn.baseEncode=void 0;const s=i(n0e()),o=i(nft()),a=r(lft),l=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,c=new l("utf-8",{fatal:!0});function d(D){return typeof D=="string"&&(D=an.from(D,"utf8")),o.default.encode(an.from(D))}Xn.baseEncode=d;function h(D){return an.from(o.default.decode(D))}Xn.baseDecode=h;const m=1024;class g extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Xn.BorshError=g;class v{constructor(){this.buf=an.alloc(m),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=an.concat([this.buf,an.alloc(m)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(an.from(new s.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(an.from(new s.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(an.from(new s.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(an.from(new s.default($).toArray("le",64)))}writeBuffer($){this.buf=an.concat([an.from(this.buf.subarray(0,this.length)),$,an.alloc(m)]),this.length+=$.length}writeString($){this.maybeResize();const G=an.from($,"utf8");this.writeU32(G.length),this.writeBuffer(G)}writeFixedArray($){this.writeBuffer(an.from($))}writeArray($,G){this.maybeResize(),this.writeU32($.length);for(const H of $)this.maybeResize(),G(H)}toArray(){return this.buf.subarray(0,this.length)}}Xn.BinaryWriter=v;function x(D,$,G){const H=G.value;G.value=function(...U){try{return H.apply(this,U)}catch(A){if(A instanceof RangeError){const I=A.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(I)>=0)throw new g("Reached the end of buffer when deserializing")}throw A}}}class b{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new s.default($,"le")}readU128(){const $=this.readBuffer(16);return new s.default($,"le")}readU256(){const $=this.readBuffer(32);return new s.default($,"le")}readU512(){const $=this.readBuffer(64);return new s.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new g(`Expected buffer length ${$} isn't within bounds`);const G=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,G}readString(){const $=this.readU32(),G=this.readBuffer($);try{return c.decode(G)}catch(H){throw new g(`Error decoding UTF-8 string: ${H}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const G=this.readU32(),H=Array();for(let U=0;U<G;++U)H.push($());return H}}n([x],b.prototype,"readU8",null),n([x],b.prototype,"readU16",null),n([x],b.prototype,"readU32",null),n([x],b.prototype,"readU64",null),n([x],b.prototype,"readU128",null),n([x],b.prototype,"readU256",null),n([x],b.prototype,"readU512",null),n([x],b.prototype,"readString",null),n([x],b.prototype,"readFixedArray",null),n([x],b.prototype,"readArray",null),Xn.BinaryReader=b;function w(D){return D.charAt(0).toUpperCase()+D.slice(1)}function T(D,$,G,H,U){try{if(typeof H=="string")U[`write${w(H)}`](G);else if(H instanceof Array)if(typeof H[0]=="number"){if(G.length!==H[0])throw new g(`Expecting byte array of length ${H[0]}, but got ${G.length} bytes`);U.writeFixedArray(G)}else if(H.length===2&&typeof H[1]=="number"){if(G.length!==H[1])throw new g(`Expecting byte array of length ${H[1]}, but got ${G.length} bytes`);for(let A=0;A<H[1];A++)T(D,null,G[A],H[0],U)}else U.writeArray(G,A=>{T(D,$,A,H[0],U)});else if(H.kind!==void 0)switch(H.kind){case"option":{G==null?U.writeU8(0):(U.writeU8(1),T(D,$,G,H.type,U));break}case"map":{U.writeU32(G.size),G.forEach((A,I)=>{T(D,$,I,H.key,U),T(D,$,A,H.value,U)});break}default:throw new g(`FieldType ${H} unrecognized`)}else N(D,G,U)}catch(A){throw A instanceof g&&A.addToFieldPath($),A}}function N(D,$,G){if(typeof $.borshSerialize=="function"){$.borshSerialize(G);return}const H=D.get($.constructor);if(!H)throw new g(`Class ${$.constructor.name} is missing in schema`);if(H.kind==="struct")H.fields.map(([U,A])=>{T(D,U,$[U],A,G)});else if(H.kind==="enum"){const U=$[H.field];for(let A=0;A<H.values.length;++A){const[I,L]=H.values[A];if(I===U){G.writeU8(A),T(D,I,$[I],L,G);break}}}else throw new g(`Unexpected schema kind: ${H.kind} for ${$.constructor.name}`)}function O(D,$,G=v){const H=new G;return N(D,$,H),H.toArray()}Xn.serialize=O;function j(D,$,G,H){try{if(typeof G=="string")return H[`read${w(G)}`]();if(G instanceof Array){if(typeof G[0]=="number")return H.readFixedArray(G[0]);if(typeof G[1]=="number"){const U=[];for(let A=0;A<G[1];A++)U.push(j(D,null,G[0],H));return U}else return H.readArray(()=>j(D,$,G[0],H))}if(G.kind==="option")return H.readU8()?j(D,$,G.type,H):void 0;if(G.kind==="map"){let U=new Map;const A=H.readU32();for(let I=0;I<A;I++){const L=j(D,$,G.key,H),q=j(D,$,G.value,H);U.set(L,q)}return U}return _(D,G,H)}catch(U){throw U instanceof g&&U.addToFieldPath($),U}}function _(D,$,G){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(G);const H=D.get($);if(!H)throw new g(`Class ${$.name} is missing in schema`);if(H.kind==="struct"){const U={};for(const[A,I]of D.get($).fields)U[A]=j(D,A,I,G);return new $(U)}if(H.kind==="enum"){const U=G.readU8();if(U>=H.values.length)throw new g(`Enum index: ${U} is out of range`);const[A,I]=H.values[U],L=j(D,A,I,G);return new $({[A]:L})}throw new g(`Unexpected schema kind: ${H.kind} for ${$.constructor.name}`)}function F(D,$,G,H=b){const U=new H(G),A=_(D,$,U);if(U.offset<G.length)throw new g(`Unexpected ${G.length-U.offset} bytes after deserialized data`);return A}Xn.deserialize=F;function z(D,$,G,H=b){const U=new H(G);return _(D,$,U)}return Xn.deserializeUnchecked=z,Xn}var GO=cft(),Ve={},uee;function uft(){if(uee)return Ve;uee=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.s16=Ve.s8=Ve.nu64be=Ve.u48be=Ve.u40be=Ve.u32be=Ve.u24be=Ve.u16be=Ve.nu64=Ve.u48=Ve.u40=Ve.u32=Ve.u24=Ve.u16=Ve.u8=Ve.offset=Ve.greedy=Ve.Constant=Ve.UTF8=Ve.CString=Ve.Blob=Ve.Boolean=Ve.BitField=Ve.BitStructure=Ve.VariantLayout=Ve.Union=Ve.UnionLayoutDiscriminator=Ve.UnionDiscriminator=Ve.Structure=Ve.Sequence=Ve.DoubleBE=Ve.Double=Ve.FloatBE=Ve.Float=Ve.NearInt64BE=Ve.NearInt64=Ve.NearUInt64BE=Ve.NearUInt64=Ve.IntBE=Ve.Int=Ve.UIntBE=Ve.UInt=Ve.OffsetLayout=Ve.GreedyCount=Ve.ExternalLayout=Ve.bindConstructorLayout=Ve.nameWithProperty=Ve.Layout=Ve.uint8ArrayToBuffer=Ve.checkUint8Array=void 0,Ve.constant=Ve.utf8=Ve.cstr=Ve.blob=Ve.unionLayoutDiscriminator=Ve.union=Ve.seq=Ve.bits=Ve.struct=Ve.f64be=Ve.f64=Ve.f32be=Ve.f32=Ve.ns64be=Ve.s48be=Ve.s40be=Ve.s32be=Ve.s24be=Ve.s16be=Ve.ns64=Ve.s48=Ve.s40=Ve.s32=Ve.s24=void 0;const t=N7();function e(M){if(!(M instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Ve.checkUint8Array=e;function n(M){return e(M),t.Buffer.from(M.buffer,M.byteOffset,M.length)}Ve.uint8ArrayToBuffer=n;let r=class{constructor(P,W){if(!Number.isInteger(P))throw new TypeError("span must be an integer");this.span=P,this.property=W}makeDestinationObject(){return{}}getSpan(P,W){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(P){const W=Object.create(this.constructor.prototype);return Object.assign(W,this),W.property=P,W}fromArray(P){}};Ve.Layout=r;function i(M,P){return P.property?M+"["+P.property+"]":M}Ve.nameWithProperty=i;function s(M,P){if(typeof M!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(M,"layout_"))throw new Error("Class is already bound to a layout");if(!(P&&P instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(P,"boundConstructor_"))throw new Error("layout is already bound to a constructor");M.layout_=P,P.boundConstructor_=M,P.makeDestinationObject=(()=>new M),Object.defineProperty(M.prototype,"encode",{value(W,X){return P.encode(this,W,X)},writable:!0}),Object.defineProperty(M,"decode",{value(W,X){return P.decode(W,X)},writable:!0})}Ve.bindConstructorLayout=s;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}Ve.ExternalLayout=o;class a extends o{constructor(P=1,W){if(!Number.isInteger(P)||0>=P)throw new TypeError("elementSpan must be a (positive) integer");super(-1,W),this.elementSpan=P}isCount(){return!0}decode(P,W=0){e(P);const X=P.length-W;return Math.floor(X/this.elementSpan)}encode(P,W,X){return 0}}Ve.GreedyCount=a;class l extends o{constructor(P,W=0,X){if(!(P instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(W))throw new TypeError("offset must be integer or undefined");super(P.span,X||P.property),this.layout=P,this.offset=W}isCount(){return this.layout instanceof c||this.layout instanceof d}decode(P,W=0){return this.layout.decode(P,W+this.offset)}encode(P,W,X=0){return this.layout.encode(P,W,X+this.offset)}}Ve.OffsetLayout=l;class c extends r{constructor(P,W){if(super(P,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,W=0){return n(P).readUIntLE(W,this.span)}encode(P,W,X=0){return n(W).writeUIntLE(P,X,this.span),this.span}}Ve.UInt=c;class d extends r{constructor(P,W){if(super(P,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,W=0){return n(P).readUIntBE(W,this.span)}encode(P,W,X=0){return n(W).writeUIntBE(P,X,this.span),this.span}}Ve.UIntBE=d;class h extends r{constructor(P,W){if(super(P,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,W=0){return n(P).readIntLE(W,this.span)}encode(P,W,X=0){return n(W).writeIntLE(P,X,this.span),this.span}}Ve.Int=h;class m extends r{constructor(P,W){if(super(P,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,W=0){return n(P).readIntBE(W,this.span)}encode(P,W,X=0){return n(W).writeIntBE(P,X,this.span),this.span}}Ve.IntBE=m;const g=Math.pow(2,32);function v(M){const P=Math.floor(M/g),W=M-P*g;return{hi32:P,lo32:W}}function x(M,P){return M*g+P}class b extends r{constructor(P){super(8,P)}decode(P,W=0){const X=n(P),se=X.readUInt32LE(W),ae=X.readUInt32LE(W+4);return x(ae,se)}encode(P,W,X=0){const se=v(P),ae=n(W);return ae.writeUInt32LE(se.lo32,X),ae.writeUInt32LE(se.hi32,X+4),8}}Ve.NearUInt64=b;class w extends r{constructor(P){super(8,P)}decode(P,W=0){const X=n(P),se=X.readUInt32BE(W),ae=X.readUInt32BE(W+4);return x(se,ae)}encode(P,W,X=0){const se=v(P),ae=n(W);return ae.writeUInt32BE(se.hi32,X),ae.writeUInt32BE(se.lo32,X+4),8}}Ve.NearUInt64BE=w;class T extends r{constructor(P){super(8,P)}decode(P,W=0){const X=n(P),se=X.readUInt32LE(W),ae=X.readInt32LE(W+4);return x(ae,se)}encode(P,W,X=0){const se=v(P),ae=n(W);return ae.writeUInt32LE(se.lo32,X),ae.writeInt32LE(se.hi32,X+4),8}}Ve.NearInt64=T;class N extends r{constructor(P){super(8,P)}decode(P,W=0){const X=n(P),se=X.readInt32BE(W),ae=X.readUInt32BE(W+4);return x(se,ae)}encode(P,W,X=0){const se=v(P),ae=n(W);return ae.writeInt32BE(se.hi32,X),ae.writeUInt32BE(se.lo32,X+4),8}}Ve.NearInt64BE=N;class O extends r{constructor(P){super(4,P)}decode(P,W=0){return n(P).readFloatLE(W)}encode(P,W,X=0){return n(W).writeFloatLE(P,X),4}}Ve.Float=O;class j extends r{constructor(P){super(4,P)}decode(P,W=0){return n(P).readFloatBE(W)}encode(P,W,X=0){return n(W).writeFloatBE(P,X),4}}Ve.FloatBE=j;class _ extends r{constructor(P){super(8,P)}decode(P,W=0){return n(P).readDoubleLE(W)}encode(P,W,X=0){return n(W).writeDoubleLE(P,X),8}}Ve.Double=_;class F extends r{constructor(P){super(8,P)}decode(P,W=0){return n(P).readDoubleBE(W)}encode(P,W,X=0){return n(W).writeDoubleBE(P,X),8}}Ve.DoubleBE=F;class z extends r{constructor(P,W,X){if(!(P instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(W instanceof o&&W.isCount()||Number.isInteger(W)&&0<=W))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let se=-1;!(W instanceof o)&&0<P.span&&(se=W*P.span),super(se,X),this.elementLayout=P,this.count=W}getSpan(P,W=0){if(0<=this.span)return this.span;let X=0,se=this.count;if(se instanceof o&&(se=se.decode(P,W)),0<this.elementLayout.span)X=se*this.elementLayout.span;else{let ae=0;for(;ae<se;)X+=this.elementLayout.getSpan(P,W+X),++ae}return X}decode(P,W=0){const X=[];let se=0,ae=this.count;for(ae instanceof o&&(ae=ae.decode(P,W));se<ae;)X.push(this.elementLayout.decode(P,W)),W+=this.elementLayout.getSpan(P,W),se+=1;return X}encode(P,W,X=0){const se=this.elementLayout,ae=P.reduce((Te,oe)=>Te+se.encode(oe,W,X+Te),0);return this.count instanceof o&&this.count.encode(P.length,W,X),ae}}Ve.Sequence=z;class D extends r{constructor(P,W,X){if(!(Array.isArray(P)&&P.reduce((ae,Te)=>ae&&Te instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof W=="boolean"&&X===void 0&&(X=W,W=void 0);for(const ae of P)if(0>ae.span&&ae.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let se=-1;try{se=P.reduce((ae,Te)=>ae+Te.getSpan(),0)}catch{}super(se,W),this.fields=P,this.decodePrefixes=!!X}getSpan(P,W=0){if(0<=this.span)return this.span;let X=0;try{X=this.fields.reduce((se,ae)=>{const Te=ae.getSpan(P,W);return W+=Te,se+Te},0)}catch{throw new RangeError("indeterminate span")}return X}decode(P,W=0){e(P);const X=this.makeDestinationObject();for(const se of this.fields)if(se.property!==void 0&&(X[se.property]=se.decode(P,W)),W+=se.getSpan(P,W),this.decodePrefixes&&P.length===W)break;return X}encode(P,W,X=0){const se=X;let ae=0,Te=0;for(const oe of this.fields){let ve=oe.span;if(Te=0<ve?ve:0,oe.property!==void 0){const ke=P[oe.property];ke!==void 0&&(Te=oe.encode(ke,W,X),0>ve&&(ve=oe.getSpan(W,X)))}ae=X,X+=ve}return ae+Te-se}fromArray(P){const W=this.makeDestinationObject();for(const X of this.fields)X.property!==void 0&&0<P.length&&(W[X.property]=P.shift());return W}layoutFor(P){if(typeof P!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===P)return W}offsetOf(P){if(typeof P!="string")throw new TypeError("property must be string");let W=0;for(const X of this.fields){if(X.property===P)return W;0>X.span?W=-1:0<=W&&(W+=X.span)}}}Ve.Structure=D;class ${constructor(P){this.property=P}decode(P,W){throw new Error("UnionDiscriminator is abstract")}encode(P,W,X){throw new Error("UnionDiscriminator is abstract")}}Ve.UnionDiscriminator=$;class G extends ${constructor(P,W){if(!(P instanceof o&&P.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(W||P.property||"variant"),this.layout=P}decode(P,W){return this.layout.decode(P,W)}encode(P,W,X){return this.layout.encode(P,W,X)}}Ve.UnionLayoutDiscriminator=G;class H extends r{constructor(P,W,X){let se;if(P instanceof c||P instanceof d)se=new G(new l(P));else if(P instanceof o&&P.isCount())se=new G(P);else if(P instanceof $)se=P;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(W===void 0&&(W=null),!(W===null||W instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(W!==null){if(0>W.span)throw new Error("defaultLayout must have constant span");W.property===void 0&&(W=W.replicate("content"))}let ae=-1;W&&(ae=W.span,0<=ae&&(P instanceof c||P instanceof d)&&(ae+=se.layout.span)),super(ae,X),this.discriminator=se,this.usesPrefixDiscriminator=P instanceof c||P instanceof d,this.defaultLayout=W,this.registry={};let Te=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(oe){return Te(oe)},this.configGetSourceVariant=function(oe){Te=oe.bind(this)}}getSpan(P,W=0){if(0<=this.span)return this.span;const X=this.getVariant(P,W);if(!X)throw new Error("unable to determine span for unrecognized variant");return X.getSpan(P,W)}defaultGetSourceVariant(P){if(Object.prototype.hasOwnProperty.call(P,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(P,this.defaultLayout.property))return;const W=this.registry[P[this.discriminator.property]];if(W&&(!W.layout||W.property&&Object.prototype.hasOwnProperty.call(P,W.property)))return W}else for(const W in this.registry){const X=this.registry[W];if(X.property&&Object.prototype.hasOwnProperty.call(P,X.property))return X}throw new Error("unable to infer src variant")}decode(P,W=0){let X;const se=this.discriminator,ae=se.decode(P,W),Te=this.registry[ae];if(Te===void 0){const oe=this.defaultLayout;let ve=0;this.usesPrefixDiscriminator&&(ve=se.layout.span),X=this.makeDestinationObject(),X[se.property]=ae,X[oe.property]=oe.decode(P,W+ve)}else X=Te.decode(P,W);return X}encode(P,W,X=0){const se=this.getSourceVariant(P);if(se===void 0){const ae=this.discriminator,Te=this.defaultLayout;let oe=0;return this.usesPrefixDiscriminator&&(oe=ae.layout.span),ae.encode(P[ae.property],W,X),oe+Te.encode(P[Te.property],W,X+oe)}return se.encode(P,W,X)}addVariant(P,W,X){const se=new U(this,P,W,X);return this.registry[P]=se,se}getVariant(P,W=0){let X;return P instanceof Uint8Array?X=this.discriminator.decode(P,W):X=P,this.registry[X]}}Ve.Union=H;class U extends r{constructor(P,W,X,se){if(!(P instanceof H))throw new TypeError("union must be a Union");if(!Number.isInteger(W)||0>W)throw new TypeError("variant must be a (non-negative) integer");if(typeof X=="string"&&se===void 0&&(se=X,X=null),X){if(!(X instanceof r))throw new TypeError("layout must be a Layout");if(P.defaultLayout!==null&&0<=X.span&&X.span>P.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof se!="string")throw new TypeError("variant must have a String property")}let ae=P.span;0>P.span&&(ae=X?X.span:0,0<=ae&&P.usesPrefixDiscriminator&&(ae+=P.discriminator.layout.span)),super(ae,se),this.union=P,this.variant=W,this.layout=X||null}getSpan(P,W=0){if(0<=this.span)return this.span;let X=0;this.union.usesPrefixDiscriminator&&(X=this.union.discriminator.layout.span);let se=0;return this.layout&&(se=this.layout.getSpan(P,W+X)),X+se}decode(P,W=0){const X=this.makeDestinationObject();if(this!==this.union.getVariant(P,W))throw new Error("variant mismatch");let se=0;return this.union.usesPrefixDiscriminator&&(se=this.union.discriminator.layout.span),this.layout?X[this.property]=this.layout.decode(P,W+se):this.property?X[this.property]=!0:this.union.usesPrefixDiscriminator&&(X[this.union.discriminator.property]=this.variant),X}encode(P,W,X=0){let se=0;if(this.union.usesPrefixDiscriminator&&(se=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(P,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,W,X);let ae=se;if(this.layout&&(this.layout.encode(P[this.property],W,X+se),ae+=this.layout.getSpan(W,X+se),0<=this.union.span&&ae>this.union.span))throw new Error("encoded variant overruns containing union");return ae}fromArray(P){if(this.layout)return this.layout.fromArray(P)}}Ve.VariantLayout=U;function A(M){return 0>M&&(M+=4294967296),M}class I extends r{constructor(P,W,X){if(!(P instanceof c||P instanceof d))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof W=="string"&&X===void 0&&(X=W,W=!1),4<P.span)throw new RangeError("word cannot exceed 32 bits");super(P.span,X),this.word=P,this.msb=!!W,this.fields=[];let se=0;this._packedSetValue=function(ae){return se=A(ae),this},this._packedGetValue=function(){return se}}decode(P,W=0){const X=this.makeDestinationObject(),se=this.word.decode(P,W);this._packedSetValue(se);for(const ae of this.fields)ae.property!==void 0&&(X[ae.property]=ae.decode(P));return X}encode(P,W,X=0){const se=this.word.decode(W,X);this._packedSetValue(se);for(const ae of this.fields)if(ae.property!==void 0){const Te=P[ae.property];Te!==void 0&&ae.encode(Te)}return this.word.encode(this._packedGetValue(),W,X)}addField(P,W){const X=new L(this,P,W);return this.fields.push(X),X}addBoolean(P){const W=new q(this,P);return this.fields.push(W),W}fieldFor(P){if(typeof P!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===P)return W}}Ve.BitStructure=I;class L{constructor(P,W,X){if(!(P instanceof I))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(W)||0>=W)throw new TypeError("bits must be positive integer");const se=8*P.span,ae=P.fields.reduce((Te,oe)=>Te+oe.bits,0);if(W+ae>se)throw new Error("bits too long for span remainder ("+(se-ae)+" of "+se+" remain)");this.container=P,this.bits=W,this.valueMask=(1<<W)-1,W===32&&(this.valueMask=4294967295),this.start=ae,this.container.msb&&(this.start=se-ae-W),this.wordMask=A(this.valueMask<<this.start),this.property=X}decode(P,W){const X=this.container._packedGetValue();return A(X&this.wordMask)>>>this.start}encode(P){if(typeof P!="number"||!Number.isInteger(P)||P!==A(P&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const W=this.container._packedGetValue(),X=A(P<<this.start);this.container._packedSetValue(A(W&~this.wordMask)|X)}}Ve.BitField=L;class q extends L{constructor(P,W){super(P,1,W)}decode(P,W){return!!super.decode(P,W)}encode(P){typeof P=="boolean"&&(P=+P),super.encode(P)}}Ve.Boolean=q;class K extends r{constructor(P,W){if(!(P instanceof o&&P.isCount()||Number.isInteger(P)&&0<=P))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let X=-1;P instanceof o||(X=P),super(X,W),this.length=P}getSpan(P,W){let X=this.span;return 0>X&&(X=this.length.decode(P,W)),X}decode(P,W=0){let X=this.span;return 0>X&&(X=this.length.decode(P,W)),n(P).slice(W,W+X)}encode(P,W,X){let se=this.length;if(this.length instanceof o&&(se=P.length),!(P instanceof Uint8Array&&se===P.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+se+") Uint8Array as src");if(X+se>W.length)throw new RangeError("encoding overruns Uint8Array");const ae=n(P);return n(W).write(ae.toString("hex"),X,se,"hex"),this.length instanceof o&&this.length.encode(se,W,X),se}}Ve.Blob=K;class te extends r{constructor(P){super(-1,P)}getSpan(P,W=0){e(P);let X=W;for(;X<P.length&&P[X]!==0;)X+=1;return 1+X-W}decode(P,W=0){const X=this.getSpan(P,W);return n(P).slice(W,W+X-1).toString("utf-8")}encode(P,W,X=0){typeof P!="string"&&(P=String(P));const se=t.Buffer.from(P,"utf8"),ae=se.length;if(X+ae>W.length)throw new RangeError("encoding overruns Buffer");const Te=n(W);return se.copy(Te,X),Te[X+ae]=0,ae+1}}Ve.CString=te;class Y extends r{constructor(P,W){if(typeof P=="string"&&W===void 0&&(W=P,P=void 0),P===void 0)P=-1;else if(!Number.isInteger(P))throw new TypeError("maxSpan must be an integer");super(-1,W),this.maxSpan=P}getSpan(P,W=0){return e(P),P.length-W}decode(P,W=0){const X=this.getSpan(P,W);if(0<=this.maxSpan&&this.maxSpan<X)throw new RangeError("text length exceeds maxSpan");return n(P).slice(W,W+X).toString("utf-8")}encode(P,W,X=0){typeof P!="string"&&(P=String(P));const se=t.Buffer.from(P,"utf8"),ae=se.length;if(0<=this.maxSpan&&this.maxSpan<ae)throw new RangeError("text length exceeds maxSpan");if(X+ae>W.length)throw new RangeError("encoding overruns Buffer");return se.copy(n(W),X),ae}}Ve.UTF8=Y;class V extends r{constructor(P,W){super(0,W),this.value=P}decode(P,W){return this.value}encode(P,W,X){return 0}}return Ve.Constant=V,Ve.greedy=((M,P)=>new a(M,P)),Ve.offset=((M,P,W)=>new l(M,P,W)),Ve.u8=(M=>new c(1,M)),Ve.u16=(M=>new c(2,M)),Ve.u24=(M=>new c(3,M)),Ve.u32=(M=>new c(4,M)),Ve.u40=(M=>new c(5,M)),Ve.u48=(M=>new c(6,M)),Ve.nu64=(M=>new b(M)),Ve.u16be=(M=>new d(2,M)),Ve.u24be=(M=>new d(3,M)),Ve.u32be=(M=>new d(4,M)),Ve.u40be=(M=>new d(5,M)),Ve.u48be=(M=>new d(6,M)),Ve.nu64be=(M=>new w(M)),Ve.s8=(M=>new h(1,M)),Ve.s16=(M=>new h(2,M)),Ve.s24=(M=>new h(3,M)),Ve.s32=(M=>new h(4,M)),Ve.s40=(M=>new h(5,M)),Ve.s48=(M=>new h(6,M)),Ve.ns64=(M=>new T(M)),Ve.s16be=(M=>new m(2,M)),Ve.s24be=(M=>new m(3,M)),Ve.s32be=(M=>new m(4,M)),Ve.s40be=(M=>new m(5,M)),Ve.s48be=(M=>new m(6,M)),Ve.ns64be=(M=>new N(M)),Ve.f32=(M=>new O(M)),Ve.f32be=(M=>new j(M)),Ve.f64=(M=>new _(M)),Ve.f64be=(M=>new F(M)),Ve.struct=((M,P,W)=>new D(M,P,W)),Ve.bits=((M,P,W)=>new I(M,P,W)),Ve.seq=((M,P,W)=>new z(M,P,W)),Ve.union=((M,P,W)=>new H(M,P,W)),Ve.unionLayoutDiscriminator=((M,P)=>new G(M,P)),Ve.blob=((M,P)=>new K(M,P)),Ve.cstr=(M=>new te(M)),Ve.utf8=((M,P)=>new Y(M,P)),Ve.constant=((M,P)=>new V(M,P)),Ve}var we=uft(),dft=8078e3,fft=8078001,hft=8078004,pft=8078005,mft=8078006,gft=8078011;function i0e(t){return Array.isArray(t)?"%5B"+t.map(i0e).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function yft([t,e]){return`${t}=${i0e(e)}`}function xft(t){const e=Object.entries(t).map(yft).join("&");return btoa(e)}function vft(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${xft(e)}'`),`${n}\``}}var Ey=class extends Error{constructor(...[e,n]){let r,i;if(n){const{cause:o,...a}=n;o&&(i={cause:o}),Object.keys(a).length>0&&(r=a)}const s=vft(e,r);super(s,i);Ne(this,"cause",this.cause);Ne(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function bft(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function wft(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(bft(e,t));return t.write(e,n,0),n}})}function Eft(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function Eg(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Sft(t,e){if(Eg(t)!==Eg(e))throw new Ey(hft);if(Eg(t)&&Eg(e)&&t.fixedSize!==e.fixedSize)throw new Ey(pft,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Eg(t)&&!Eg(e)&&t.maxSize!==e.maxSize)throw new Ey(mft,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Aft(t,e,n=0){if(e.length-n<=0)throw new Ey(dft,{codecDescription:t})}function Tft(t,e,n,r=0){const i=n.length-r;if(i<e)throw new Ey(fft,{bytesLength:i,codecDescription:t,expected:e})}function kft(t,e,n,r){if(r<e||r>n)throw new Ey(gft,{codecDescription:t,max:n,min:e,value:r})}function s0e(t){return(t==null?void 0:t.endian)!==1}function Nft(t){return wft({fixedSize:t.size,write(e,n,r){t.range&&kft(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,s0e(t.config)),n.set(new Uint8Array(i),r),r+t.size}})}function Cft(t){return Eft({fixedSize:t.size,read(e,n=0){Aft(t.name,e,n),Tft(t.name,t.size,e,n);const r=new DataView(Pft(e,n,t.size));return[t.get(r,s0e(t.config)),n+t.size]}})}function Pft(t,e,n){const r=t.byteOffset+(e??0),i=n??t.byteLength;return t.buffer.slice(r,r+i)}var _ft=(t={})=>Nft({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),Ift=(t={})=>Cft({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),Rft=(t={})=>Sft(_ft(t),Ift(t));class Oft extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function Mft(t){return BE(t)&&typeof t[Symbol.iterator]=="function"}function BE(t){return typeof t=="object"&&t!=null}function sN(t){return BE(t)&&!Array.isArray(t)}function Xl(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Lft(t){const{done:e,value:n}=t.next();return e?void 0:n}function Dft(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Xl(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*dee(t,e,n,r){Mft(t)||(t=[t]);for(const i of t){const s=Dft(i,e,n,r);s&&(yield s)}}function*P7(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,d,h]of e.entries(t,a)){const m=P7(d,h,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,d],coerce:s,mask:o,message:n.message});for(const g of m)g[0]?(l=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):s&&(d=g[1],c===void 0?t=d:t instanceof Map?t.set(c,d):t instanceof Set?t.add(d):BE(t)&&(d!==void 0||c in t)&&(t[c]=d))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let ru=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,c)=>{const d=i(l,c);return dee(d,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const d=s(l,c);return dee(d,c,this,l)}:this.refiner=()=>[]}assert(e,n){return jft(e,this,n)}create(e,n){return vt(e,this,n)}is(e){return o0e(e,this)}mask(e,n){return Bft(e,this,n)}validate(e,n={}){return UE(e,this,n)}};function jft(t,e,n){const r=UE(t,e,{message:n});if(r[0])throw r[0]}function vt(t,e,n){const r=UE(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Bft(t,e,n){const r=UE(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function o0e(t,e){return!UE(t,e)[0]}function UE(t,e,n={}){const r=P7(t,e,n),i=Lft(r);return i[0]?[new Oft(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function f0(t,e){return new ru({type:t,schema:null,validator:e})}function Uft(){return f0("any",()=>!0)}function Et(t){return new ru({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Xl(e)}`}})}function Wc(){return f0("boolean",t=>typeof t=="boolean")}function _7(t){return f0("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Xl(e)}`)}function Dr(t){const e=Xl(t),n=typeof t;return new ru({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Xl(r)}`}})}function Fft(){return f0("never",()=>!1)}function St(t){return new ru({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function De(){return f0("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Xl(t)}`)}function Gt(t){return new ru({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function a0e(t,e){return new ru({type:"record",schema:null,*entries(n){if(BE(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return sN(n)||`Expected an object, but received: ${Xl(n)}`},coercer(n){return sN(n)?{...n}:n}})}function pt(){return f0("string",t=>typeof t=="string"||`Expected a string, but received: ${Xl(t)}`)}function I7(t){const e=Fft();return new ru({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Xl(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function ot(t){const e=Object.keys(t);return new ru({type:"type",schema:t,*entries(n){if(BE(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return sN(n)||`Expected an object, but received: ${Xl(n)}`},coercer(n){return sN(n)?{...n}:n}})}function ho(t){const e=t.map(n=>n.type).join(" | ");return new ru({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=P7(n,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Xl(n)}`,...i]}})}function Nv(){return f0("unknown",()=>!0)}function FE(t,e,n){return new ru({...t,coercer:(r,i)=>o0e(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var dT,$ft=new Uint8Array(16);function l0e(){if(!dT&&(dT=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!dT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dT($ft)}const zft=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function vP(t){return typeof t=="string"&&zft.test(t)}var is=[];for(var KO=0;KO<256;++KO)is.push((KO+256).toString(16).substr(1));function bP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(is[t[e+0]]+is[t[e+1]]+is[t[e+2]]+is[t[e+3]]+"-"+is[t[e+4]]+is[t[e+5]]+"-"+is[t[e+6]]+is[t[e+7]]+"-"+is[t[e+8]]+is[t[e+9]]+"-"+is[t[e+10]]+is[t[e+11]]+is[t[e+12]]+is[t[e+13]]+is[t[e+14]]+is[t[e+15]]).toLowerCase();if(!vP(n))throw TypeError("Stringified UUID is invalid");return n}var fee,WO,YO=0,JO=0;function Vft(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||fee,o=t.clockseq!==void 0?t.clockseq:WO;if(s==null||o==null){var a=t.random||(t.rng||l0e)();s==null&&(s=fee=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=WO=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:JO+1,d=l-YO+(c-JO)/1e4;if(d<0&&t.clockseq===void 0&&(o=o+1&16383),(d<0||l>YO)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");YO=l,JO=c,WO=o,l+=122192928e5;var h=((l&268435455)*1e4+c)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=h&255;var m=l/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=m&255,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var g=0;g<6;++g)i[r+g]=s[g];return e||bP(i)}function c0e(t){if(!vP(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function Hft(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var qft="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Gft="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function u0e(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=Hft(i)),typeof s=="string"&&(s=c0e(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return bP(l)}try{r.name=t}catch{}return r.DNS=qft,r.URL=Gft,r}function Kft(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return Wft(Yft(Jft(t),t.length*8))}function Wft(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function d0e(t){return(t+64>>>9<<4)+14+1}function Yft(t,e){t[e>>5]|=128<<e%32,t[d0e(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=i,d=s;n=As(n,r,i,s,t[o],7,-680876936),s=As(s,n,r,i,t[o+1],12,-389564586),i=As(i,s,n,r,t[o+2],17,606105819),r=As(r,i,s,n,t[o+3],22,-1044525330),n=As(n,r,i,s,t[o+4],7,-176418897),s=As(s,n,r,i,t[o+5],12,1200080426),i=As(i,s,n,r,t[o+6],17,-1473231341),r=As(r,i,s,n,t[o+7],22,-45705983),n=As(n,r,i,s,t[o+8],7,1770035416),s=As(s,n,r,i,t[o+9],12,-1958414417),i=As(i,s,n,r,t[o+10],17,-42063),r=As(r,i,s,n,t[o+11],22,-1990404162),n=As(n,r,i,s,t[o+12],7,1804603682),s=As(s,n,r,i,t[o+13],12,-40341101),i=As(i,s,n,r,t[o+14],17,-1502002290),r=As(r,i,s,n,t[o+15],22,1236535329),n=Ts(n,r,i,s,t[o+1],5,-165796510),s=Ts(s,n,r,i,t[o+6],9,-1069501632),i=Ts(i,s,n,r,t[o+11],14,643717713),r=Ts(r,i,s,n,t[o],20,-373897302),n=Ts(n,r,i,s,t[o+5],5,-701558691),s=Ts(s,n,r,i,t[o+10],9,38016083),i=Ts(i,s,n,r,t[o+15],14,-660478335),r=Ts(r,i,s,n,t[o+4],20,-405537848),n=Ts(n,r,i,s,t[o+9],5,568446438),s=Ts(s,n,r,i,t[o+14],9,-1019803690),i=Ts(i,s,n,r,t[o+3],14,-187363961),r=Ts(r,i,s,n,t[o+8],20,1163531501),n=Ts(n,r,i,s,t[o+13],5,-1444681467),s=Ts(s,n,r,i,t[o+2],9,-51403784),i=Ts(i,s,n,r,t[o+7],14,1735328473),r=Ts(r,i,s,n,t[o+12],20,-1926607734),n=ks(n,r,i,s,t[o+5],4,-378558),s=ks(s,n,r,i,t[o+8],11,-2022574463),i=ks(i,s,n,r,t[o+11],16,1839030562),r=ks(r,i,s,n,t[o+14],23,-35309556),n=ks(n,r,i,s,t[o+1],4,-1530992060),s=ks(s,n,r,i,t[o+4],11,1272893353),i=ks(i,s,n,r,t[o+7],16,-155497632),r=ks(r,i,s,n,t[o+10],23,-1094730640),n=ks(n,r,i,s,t[o+13],4,681279174),s=ks(s,n,r,i,t[o],11,-358537222),i=ks(i,s,n,r,t[o+3],16,-722521979),r=ks(r,i,s,n,t[o+6],23,76029189),n=ks(n,r,i,s,t[o+9],4,-640364487),s=ks(s,n,r,i,t[o+12],11,-421815835),i=ks(i,s,n,r,t[o+15],16,530742520),r=ks(r,i,s,n,t[o+2],23,-995338651),n=Ns(n,r,i,s,t[o],6,-198630844),s=Ns(s,n,r,i,t[o+7],10,1126891415),i=Ns(i,s,n,r,t[o+14],15,-1416354905),r=Ns(r,i,s,n,t[o+5],21,-57434055),n=Ns(n,r,i,s,t[o+12],6,1700485571),s=Ns(s,n,r,i,t[o+3],10,-1894986606),i=Ns(i,s,n,r,t[o+10],15,-1051523),r=Ns(r,i,s,n,t[o+1],21,-2054922799),n=Ns(n,r,i,s,t[o+8],6,1873313359),s=Ns(s,n,r,i,t[o+15],10,-30611744),i=Ns(i,s,n,r,t[o+6],15,-1560198380),r=Ns(r,i,s,n,t[o+13],21,1309151649),n=Ns(n,r,i,s,t[o+4],6,-145523070),s=Ns(s,n,r,i,t[o+11],10,-1120210379),i=Ns(i,s,n,r,t[o+2],15,718787259),r=Ns(r,i,s,n,t[o+9],21,-343485551),n=gh(n,a),r=gh(r,l),i=gh(i,c),s=gh(s,d)}return[n,r,i,s]}function Jft(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(d0e(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function gh(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function Xft(t,e){return t<<e|t>>>32-e}function wP(t,e,n,r,i,s){return gh(Xft(gh(gh(e,t),gh(r,s)),i),n)}function As(t,e,n,r,i,s,o){return wP(e&n|~e&r,t,e,i,s,o)}function Ts(t,e,n,r,i,s,o){return wP(e&r|n&~r,t,e,i,s,o)}function ks(t,e,n,r,i,s,o){return wP(e^n^r,t,e,i,s,o)}function Ns(t,e,n,r,i,s,o){return wP(n^(e|~r),t,e,i,s,o)}var Qft=u0e("v3",48,Kft);function Zft(t,e,n){t=t||{};var r=t.random||(t.rng||l0e)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return bP(r)}function eht(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function XO(t,e){return t<<e|t>>>32-e}function tht(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=t[l*64+d*4]<<24|t[l*64+d*4+1]<<16|t[l*64+d*4+2]<<8|t[l*64+d*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var m=new Uint32Array(80),g=0;g<16;++g)m[g]=a[h][g];for(var v=16;v<80;++v)m[v]=XO(m[v-3]^m[v-8]^m[v-14]^m[v-16],1);for(var x=n[0],b=n[1],w=n[2],T=n[3],N=n[4],O=0;O<80;++O){var j=Math.floor(O/20),_=XO(x,5)+eht(j,b,w,T)+N+e[j]+m[O]>>>0;N=T,T=w,w=XO(b,30)>>>0,b=x,x=_}n[0]=n[0]+x>>>0,n[1]=n[1]+b>>>0,n[2]=n[2]+w>>>0,n[3]=n[3]+T>>>0,n[4]=n[4]+N>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var nht=u0e("v5",80,tht);const rht="00000000-0000-0000-0000-000000000000";function iht(t){if(!vP(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const sht=Object.freeze(Object.defineProperty({__proto__:null,NIL:rht,parse:c0e,stringify:bP,v1:Vft,v3:Qft,v4:Zft,v5:nht,validate:vP,version:iht},Symbol.toStringTag,{value:"Module"})),f0e=ete(sht);var QO,hee;function oht(){if(hee)return QO;hee=1;const t=f0e.v4;return QO=function(n,r,i,s){if(typeof n!="string")throw new TypeError(n+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:n};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof i>"u"){const l=typeof s.generator=="function"?s.generator:function(){return t()};a.id=l(a,s)}else o===2&&i===null?s.notificationIdNull&&(a.id=null):a.id=i;return a},QO}var ZO,pee;function aht(){if(pee)return ZO;pee=1;const t=f0e.v4,e=oht(),n=function(r,i){if(!(this instanceof n))return new n(r,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return t()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=r};return ZO=n,n.prototype.request=function(r,i,s,o){const a=this;let l=null;const c=Array.isArray(r)&&typeof i=="function";if(this.options.version===1&&c)throw new TypeError("JSON-RPC 1.0 does not support batching");if(c||!c&&r&&typeof r=="object"&&typeof i=="function")o=i,l=r;else{typeof s=="function"&&(o=s,s=void 0);const m=typeof o=="function";try{l=e(r,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(m){o(g);return}throw g}if(!m)return l}let h;try{h=JSON.stringify(l,this.options.replacer)}catch(m){o(m);return}return this.callServer(h,function(m,g){a._parseResponse(m,g,o)}),l},n.prototype._parseResponse=function(r,i,s){if(r){s(r);return}if(!i){s();return}let o;try{o=JSON.parse(i,this.options.reviver)}catch(a){s(a);return}if(s.length===3)if(Array.isArray(o)){const a=function(c){return typeof c.error<"u"},l=function(c){return!a(c)};s(null,o.filter(a),o.filter(l));return}else{s(null,o.error,o.result);return}s(null,o)},ZO}var lht=aht();const cht=bs(lht);var uht=class extends uB{constructor(e,n){super();Ne(this,"socket");this.socket=new window.WebSocket(e,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function dht(t,e){return new uht(t,e)}var fht=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},hht=class extends uB{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();Ne(this,"address");Ne(this,"rpc_id");Ne(this,"queue");Ne(this,"options");Ne(this,"autoconnect");Ne(this,"ready");Ne(this,"reconnect");Ne(this,"reconnect_timer_id");Ne(this,"reconnect_interval");Ne(this,"max_reconnects");Ne(this,"rest_options");Ne(this,"current_reconnects");Ne(this,"generate_request_id");Ne(this,"socket");Ne(this,"webSocketFactory");Ne(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new fht,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket&&this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=ln.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}};class h0e extends Ime{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Pme(e);const r=w7(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),$x(s)}update(e){return Xk(this),this.iHash.update(e),this}digestInto(e){Xk(this),u0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const p0e=(t,e,n)=>new h0e(t,e).update(n).digest();p0e.create=(t,e)=>new h0e(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mee=(t,e)=>(t+(t>=0?e:-e)/m0e)/e;function pht(t,e,n){const[[r,i],[s,o]]=e,a=mee(o*t,n),l=mee(-i*t,n);let c=t-a*r-l*s,d=-a*i-l*o;const h=c<od,m=d<od;h&&(c=-c),m&&(d=-d);const g=DE(Math.ceil(Bme(n)/2))+Sy;if(c<od||c>=g||d<od||d>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:d}}function PD(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function e4(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return Jm(n.lowS,"lowS"),Jm(n.prehash,"prehash"),n.format!==void 0&&PD(n.format),n}class mht extends Error{constructor(e=""){super(e)}}const Bu={Err:mht,_tlv:{encode:(t,e)=>{const{Err:n}=Bu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=cT(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?cT(i.length/2|128):"";return cT(t)+s+i+e},decode(t,e){const{Err:n}=Bu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const d of c)o=o<<8|d;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Bu;if(t<od)throw new e("integer: negative integers are not allowed");let n=cT(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Bu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return yP(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Bu,i=Wr("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:c,l:d}=r.decode(2,l);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=Bu,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},od=BigInt(0),Sy=BigInt(1),m0e=BigInt(2),fT=BigInt(3),ght=BigInt(4);function Jg(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let i=Wr("private key",e);try{r=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function yht(t,e={}){const n=e0e("weierstrass",t,e),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o,n:a}=s;jE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!r.is0(s.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=y0e(r,i);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(H,U,A){const{x:I,y:L}=U.toAffine(),q=r.toBytes(I);if(Jm(A,"isCompressed"),A){d();const K=!r.isOdd(L);return Pc(g0e(K),q)}else return Pc(Uint8Array.of(4),q,r.toBytes(L))}function m(H){Ul(H,void 0,"Point");const{publicKey:U,publicKeyUncompressed:A}=c,I=H.length,L=H[0],q=H.subarray(1);if(I===U&&(L===2||L===3)){const K=r.fromBytes(q);if(!r.isValid(K))throw new Error("bad point: is not on curve, wrong x");const te=x(K);let Y;try{Y=r.sqrt(te)}catch(P){const W=P instanceof Error?": "+P.message:"";throw new Error("bad point: is not on curve, sqrt error"+W)}d();const V=r.isOdd(Y);return(L&1)===1!==V&&(Y=r.neg(Y)),{x:K,y:Y}}else if(I===A&&L===4){const K=r.BYTES,te=r.fromBytes(q.subarray(0,K)),Y=r.fromBytes(q.subarray(K,K*2));if(!b(te,Y))throw new Error("bad point: is not on curve");return{x:te,y:Y}}else throw new Error(`bad point: got length ${I}, expected compressed=${U} or uncompressed=${A}`)}const g=e.toBytes||h,v=e.fromBytes||m;function x(H){const U=r.sqr(H),A=r.mul(U,H);return r.add(r.add(A,r.mul(H,s.a)),s.b)}function b(H,U){const A=r.sqr(U),I=x(H);return r.eql(A,I)}if(!b(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const w=r.mul(r.pow(s.a,fT),ght),T=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(w,T)))throw new Error("bad curve params: a or b");function N(H,U,A=!1){if(!r.isValid(U)||A&&r.is0(U))throw new Error(`bad point coordinate ${H}`);return U}function O(H){if(!(H instanceof D))throw new Error("ProjectivePoint expected")}function j(H){if(!l||!l.basises)throw new Error("no endo");return pht(H,l.basises,i.ORDER)}const _=Zk((H,U)=>{const{X:A,Y:I,Z:L}=H;if(r.eql(L,r.ONE))return{x:A,y:I};const q=H.is0();U==null&&(U=q?r.ONE:r.inv(L));const K=r.mul(A,U),te=r.mul(I,U),Y=r.mul(L,U);if(q)return{x:r.ZERO,y:r.ZERO};if(!r.eql(Y,r.ONE))throw new Error("invZ was invalid");return{x:K,y:te}}),F=Zk(H=>{if(H.is0()){if(e.allowInfinityPoint&&!r.is0(H.Y))return;throw new Error("bad point: ZERO")}const{x:U,y:A}=H.toAffine();if(!r.isValid(U)||!r.isValid(A))throw new Error("bad point: x or y not field elements");if(!b(U,A))throw new Error("bad point: equation left != right");if(!H.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function z(H,U,A,I,L){return A=new D(r.mul(A.X,H),A.Y,A.Z),U=eN(I,U),A=eN(L,A),U.add(A)}class D{constructor(U,A,I){this.X=N("x",U),this.Y=N("y",A,!0),this.Z=N("z",I),Object.freeze(this)}static CURVE(){return s}static fromAffine(U){const{x:A,y:I}=U||{};if(!U||!r.isValid(A)||!r.isValid(I))throw new Error("invalid affine point");if(U instanceof D)throw new Error("projective point not allowed");return r.is0(A)&&r.is0(I)?D.ZERO:new D(A,I,r.ONE)}static fromBytes(U){const A=D.fromAffine(v(Ul(U,void 0,"point")));return A.assertValidity(),A}static fromHex(U){return D.fromBytes(Wr("pointHex",U))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(U=8,A=!0){return G.createCache(this,U),A||this.multiply(fT),this}assertValidity(){F(this)}hasEvenY(){const{y:U}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(U)}equals(U){O(U);const{X:A,Y:I,Z:L}=this,{X:q,Y:K,Z:te}=U,Y=r.eql(r.mul(A,te),r.mul(q,L)),V=r.eql(r.mul(I,te),r.mul(K,L));return Y&&V}negate(){return new D(this.X,r.neg(this.Y),this.Z)}double(){const{a:U,b:A}=s,I=r.mul(A,fT),{X:L,Y:q,Z:K}=this;let te=r.ZERO,Y=r.ZERO,V=r.ZERO,M=r.mul(L,L),P=r.mul(q,q),W=r.mul(K,K),X=r.mul(L,q);return X=r.add(X,X),V=r.mul(L,K),V=r.add(V,V),te=r.mul(U,V),Y=r.mul(I,W),Y=r.add(te,Y),te=r.sub(P,Y),Y=r.add(P,Y),Y=r.mul(te,Y),te=r.mul(X,te),V=r.mul(I,V),W=r.mul(U,W),X=r.sub(M,W),X=r.mul(U,X),X=r.add(X,V),V=r.add(M,M),M=r.add(V,M),M=r.add(M,W),M=r.mul(M,X),Y=r.add(Y,M),W=r.mul(q,K),W=r.add(W,W),M=r.mul(W,X),te=r.sub(te,M),V=r.mul(W,P),V=r.add(V,V),V=r.add(V,V),new D(te,Y,V)}add(U){O(U);const{X:A,Y:I,Z:L}=this,{X:q,Y:K,Z:te}=U;let Y=r.ZERO,V=r.ZERO,M=r.ZERO;const P=s.a,W=r.mul(s.b,fT);let X=r.mul(A,q),se=r.mul(I,K),ae=r.mul(L,te),Te=r.add(A,I),oe=r.add(q,K);Te=r.mul(Te,oe),oe=r.add(X,se),Te=r.sub(Te,oe),oe=r.add(A,L);let ve=r.add(q,te);return oe=r.mul(oe,ve),ve=r.add(X,ae),oe=r.sub(oe,ve),ve=r.add(I,L),Y=r.add(K,te),ve=r.mul(ve,Y),Y=r.add(se,ae),ve=r.sub(ve,Y),M=r.mul(P,oe),Y=r.mul(W,ae),M=r.add(Y,M),Y=r.sub(se,M),M=r.add(se,M),V=r.mul(Y,M),se=r.add(X,X),se=r.add(se,X),ae=r.mul(P,ae),oe=r.mul(W,oe),se=r.add(se,ae),ae=r.sub(X,ae),ae=r.mul(P,ae),oe=r.add(oe,ae),X=r.mul(se,oe),V=r.add(V,X),X=r.mul(ve,oe),Y=r.mul(Te,Y),Y=r.sub(Y,X),X=r.mul(Te,se),M=r.mul(ve,M),M=r.add(M,X),new D(Y,V,M)}subtract(U){return this.add(U.negate())}is0(){return this.equals(D.ZERO)}multiply(U){const{endo:A}=e;if(!i.isValidNot0(U))throw new Error("invalid scalar: out of range");let I,L;const q=K=>G.cached(this,K,te=>Jp(D,te));if(A){const{k1neg:K,k1:te,k2neg:Y,k2:V}=j(U),{p:M,f:P}=q(te),{p:W,f:X}=q(V);L=P.add(X),I=z(A.beta,M,W,K,Y)}else{const{p:K,f:te}=q(U);I=K,L=te}return Jp(D,[I,L])[0]}multiplyUnsafe(U){const{endo:A}=e,I=this;if(!i.isValid(U))throw new Error("invalid scalar: out of range");if(U===od||I.is0())return D.ZERO;if(U===Sy)return I;if(G.hasCache(this))return this.multiply(U);if(A){const{k1neg:L,k1:q,k2neg:K,k2:te}=j(U),{p1:Y,p2:V}=Mdt(D,I,q,te);return z(A.beta,Y,V,L,K)}else return G.unsafe(I,U)}multiplyAndAddUnsafe(U,A,I){const L=this.multiplyUnsafe(A).add(U.multiplyUnsafe(I));return L.is0()?void 0:L}toAffine(U){return _(this,U)}isTorsionFree(){const{isTorsionFree:U}=e;return o===Sy?!0:U?U(D,this):G.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:U}=e;return o===Sy?this:U?U(D,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(U=!0){return Jm(U,"isCompressed"),this.assertValidity(),g(D,this,U)}toHex(U=!0){return _m(this.toBytes(U))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(U=!0){return this.toBytes(U)}_setWindowSize(U){this.precompute(U)}static normalizeZ(U){return Jp(D,U)}static msm(U,A){return Zme(D,i,U,A)}static fromPrivateKey(U){return D.BASE.multiply(Jg(i,U))}}D.BASE=new D(s.Gx,s.Gy,r.ONE),D.ZERO=new D(r.ZERO,r.ONE,r.ZERO),D.Fp=r,D.Fn=i;const $=i.BITS,G=new Qme(D,e.endo?Math.ceil($/2):$);return D.BASE.precompute(8),D}function g0e(t){return Uint8Array.of(t?2:3)}function y0e(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function xht(t,e={}){const{Fn:n}=t,r=e.randomBytes||E7,i=Object.assign(y0e(t.Fp,n),{seed:Yme(n.ORDER)});function s(g){try{return!!Jg(n,g)}catch{return!1}}function o(g,v){const{publicKey:x,publicKeyUncompressed:b}=i;try{const w=g.length;return v===!0&&w!==x||v===!1&&w!==b?!1:!!t.fromBytes(g)}catch{return!1}}function a(g=r(i.seed)){return Idt(Ul(g,i.seed,"seed"),n.ORDER)}function l(g,v=!0){return t.BASE.multiply(Jg(n,g)).toBytes(v)}function c(g){const v=a(g);return{secretKey:v,publicKey:l(v)}}function d(g){if(typeof g=="bigint")return!1;if(g instanceof t)return!0;const{secretKey:v,publicKey:x,publicKeyUncompressed:b}=i;if(n.allowedLengths||v===x)return;const w=Wr("key",g).length;return w===x||w===b}function h(g,v,x=!0){if(d(g)===!0)throw new Error("first arg must be private key");if(d(v)===!1)throw new Error("second arg must be public key");const b=Jg(n,g);return t.fromHex(v).multiply(b).toBytes(x)}return Object.freeze({getPublicKey:l,getSharedSecret:h,keygen:c,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:g=>Jg(n,g),precompute(g=8,v=t.BASE){return v.precompute(g,!1)}},lengths:i})}function vht(t,e,n={}){Pme(e),jE(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||E7,i=n.hmac||((A,...I)=>p0e(e,A,Pc(...I))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:l}=o,{keygen:c,getPublicKey:d,getSharedSecret:h,utils:m,lengths:g}=xht(t,n),v={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},x="compact";function b(A){const I=a>>Sy;return A>I}function w(A,I){if(!o.isValidNot0(I))throw new Error(`invalid signature ${A}: out of range 1..Point.Fn.ORDER`);return I}function T(A,I){PD(I);const L=g.signature,q=I==="compact"?L:I==="recovered"?L+1:void 0;return Ul(A,q,`${I} signature`)}class N{constructor(I,L,q){this.r=w("r",I),this.s=w("s",L),q!=null&&(this.recovery=q),Object.freeze(this)}static fromBytes(I,L=x){T(I,L);let q;if(L==="der"){const{r:V,s:M}=Bu.toSig(Ul(I));return new N(V,M)}L==="recovered"&&(q=I[0],L="compact",I=I.subarray(1));const K=o.BYTES,te=I.subarray(0,K),Y=I.subarray(K,K*2);return new N(o.fromBytes(te),o.fromBytes(Y),q)}static fromHex(I,L){return this.fromBytes(Qk(I),L)}addRecoveryBit(I){return new N(this.r,this.s,I)}recoverPublicKey(I){const L=s.ORDER,{r:q,s:K,recovery:te}=this;if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");if(a*m0e<L&&te>1)throw new Error("recovery id is ambiguous for h>1 curve");const V=te===2||te===3?q+a:q;if(!s.isValid(V))throw new Error("recovery id 2 or 3 invalid");const M=s.toBytes(V),P=t.fromBytes(Pc(g0e((te&1)===0),M)),W=o.inv(V),X=j(Wr("msgHash",I)),se=o.create(-X*W),ae=o.create(K*W),Te=t.BASE.multiplyUnsafe(se).add(P.multiplyUnsafe(ae));if(Te.is0())throw new Error("point at infinify");return Te.assertValidity(),Te}hasHighS(){return b(this.s)}toBytes(I=x){if(PD(I),I==="der")return Qk(Bu.hexFromSig(this));const L=o.toBytes(this.r),q=o.toBytes(this.s);if(I==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Pc(Uint8Array.of(this.recovery),L,q)}return Pc(L,q)}toHex(I){return _m(this.toBytes(I))}assertValidity(){}static fromCompact(I){return N.fromBytes(Wr("sig",I),"compact")}static fromDER(I){return N.fromBytes(Wr("sig",I),"der")}normalizeS(){return this.hasHighS()?new N(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return _m(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return _m(this.toBytes("compact"))}}const O=n.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const L=yP(I),q=I.length*8-l;return q>0?L>>BigInt(q):L},j=n.bits2int_modN||function(I){return o.create(O(I))},_=DE(l);function F(A){return CD("num < 2^"+l,A,od,_),o.toBytes(A)}function z(A,I){return Ul(A,void 0,"message"),I?Ul(e(A),void 0,"prehashed message"):A}function D(A,I,L){if(["recovered","canonical"].some(se=>se in L))throw new Error("sign() legacy options not supported");const{lowS:q,prehash:K,extraEntropy:te}=e4(L,v);A=z(A,K);const Y=j(A),V=Jg(o,I),M=[F(V),F(Y)];if(te!=null&&te!==!1){const se=te===!0?r(g.secretKey):te;M.push(Wr("extraEntropy",se))}const P=Pc(...M),W=Y;function X(se){const ae=O(se);if(!o.isValidNot0(ae))return;const Te=o.inv(ae),oe=t.BASE.multiply(ae).toAffine(),ve=o.create(oe.x);if(ve===od)return;const ke=o.create(Te*o.create(W+ve*V));if(ke===od)return;let pe=(oe.x===ve?0:2)|Number(oe.y&Sy),ze=ke;return q&&b(ke)&&(ze=o.neg(ke),pe^=1),new N(ve,ze,pe)}return{seed:P,k2sig:X}}function $(A,I,L={}){A=Wr("message",A);const{seed:q,k2sig:K}=D(A,I,L);return wdt(e.outputLen,o.BYTES,i)(q,K)}function G(A){let I;const L=typeof A=="string"||LE(A),q=!L&&A!==null&&typeof A=="object"&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!L&&!q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(q)I=new N(A.r,A.s);else if(L){try{I=N.fromBytes(Wr("sig",A),"der")}catch(K){if(!(K instanceof Bu.Err))throw K}if(!I)try{I=N.fromBytes(Wr("sig",A),"compact")}catch{return!1}}return I||!1}function H(A,I,L,q={}){const{lowS:K,prehash:te,format:Y}=e4(q,v);if(L=Wr("publicKey",L),I=z(Wr("message",I),te),"strict"in q)throw new Error("options.strict was renamed to lowS");const V=Y===void 0?G(A):N.fromBytes(Wr("sig",A),Y);if(V===!1)return!1;try{const M=t.fromBytes(L);if(K&&V.hasHighS())return!1;const{r:P,s:W}=V,X=j(I),se=o.inv(W),ae=o.create(X*se),Te=o.create(P*se),oe=t.BASE.multiplyUnsafe(ae).add(M.multiplyUnsafe(Te));return oe.is0()?!1:o.create(oe.x)===P}catch{return!1}}function U(A,I,L={}){const{prehash:q}=e4(L,v);return I=z(I,q),N.fromBytes(A,"recovered").recoverPublicKey(I).toBytes()}return Object.freeze({keygen:c,getPublicKey:d,getSharedSecret:h,utils:m,lengths:g,Point:t,sign:$,verify:H,recoverPublicKey:U,Signature:N,hash:e})}function bht(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=d0(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),s={Fp:n,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function wht(t){const{CURVE:e,curveOpts:n}=bht(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function Eht(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,Kme(n.Fn.ORDER,n.Fn.BITS))})}function Sht(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:i}=wht(t),s=yht(e,n),o=vht(s,r,i);return Eht(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Aht(t,e){const n=r=>Sht({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const R7={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Tht={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},gee=BigInt(2);function kht(t){const e=R7.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,d=c*c*t%e,h=Hr(d,n,e)*d%e,m=Hr(h,n,e)*d%e,g=Hr(m,gee,e)*c%e,v=Hr(g,i,e)*g%e,x=Hr(v,s,e)*v%e,b=Hr(x,a,e)*x%e,w=Hr(b,l,e)*b%e,T=Hr(w,a,e)*x%e,N=Hr(T,n,e)*d%e,O=Hr(N,o,e)*v%e,j=Hr(O,r,e)*c%e,_=Hr(j,gee,e);if(!_D.eql(_D.sqr(_),t))throw new Error("Cannot find square root");return _}const _D=d0(R7.p,{sqrt:kht}),Nht=Aht({...R7,Fp:_D,lowS:!0,endo:Tht},Lme);kv.utils.randomPrivateKey;const yee=()=>{const t=kv.utils.randomPrivateKey(),e=ID(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},ID=kv.getPublicKey;function xee(t){try{return kv.ExtendedPoint.fromHex(t),!0}catch{return!1}}const Cht=(t,e)=>kv.sign(t,e.slice(0,32)),Pht=kv.verify,Ui=t=>ln.isBuffer(t)?t:t instanceof Uint8Array?ln.from(t.buffer,t.byteOffset,t.byteLength):ln.from(t);class _ht{constructor(e){Object.assign(this,e)}encode(){return ln.from(GO.serialize(QT,this))}static decode(e){return GO.deserialize(QT,this,e)}static decodeUnchecked(e){return GO.deserializeUnchecked(QT,this,e)}}const QT=new Map;var x0e;const Iht=32,wh=32;function Rht(t){return t._bn!==void 0}let vee=1;class gt extends _ht{constructor(e){if(super({}),this._bn=void 0,Rht(e))this._bn=e._bn;else{if(typeof e=="string"){const n=ps.decode(e);if(n.length!=wh)throw new Error("Invalid public key input");this._bn=new nee(n)}else this._bn=new nee(e);if(this._bn.byteLength()>wh)throw new Error("Invalid public key input")}}static unique(){const e=new gt(vee);return vee+=1,new gt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ps.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ln);if(e.length===wh)return e;const n=ln.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=ln.concat([e.toBuffer(),ln.from(n),r.toBuffer()]),s=oee(i);return new gt(s)}static createProgramAddressSync(e,n){let r=ln.alloc(0);e.forEach(function(s){if(s.length>Iht)throw new TypeError("Max seed length exceeded");r=ln.concat([r,Ui(s)])}),r=ln.concat([r,n.toBuffer(),ln.from("ProgramDerivedAddress")]);const i=oee(r);if(xee(i))throw new Error("Invalid seeds, address must fall off the curve");return new gt(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(ln.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new gt(e);return xee(n.toBytes())}}x0e=gt;gt.default=new x0e("11111111111111111111111111111111");QT.set(gt,{kind:"struct",fields:[["_bn","u256"]]});new gt("BPFLoader1111111111111111111111111111111111");const Ay=1232,v0e=127,b0e=64;class w0e extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(w0e.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class E0e extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(E0e.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ow extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ow.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class oN{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const Sn=(t="publicKey")=>we.blob(32,t),Xg=(t="string")=>{const e=we.struct([we.u32("length"),we.u32("lengthPadding"),we.blob(we.offset(we.u32(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:ln.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>we.u32().span+we.u32().span+ln.from(s,"utf8").length,i},Oht=(t="authorized")=>we.struct([Sn("staker"),Sn("withdrawer")],t),Mht=(t="lockup")=>we.struct([we.ns64("unixTimestamp"),we.ns64("epoch"),Sn("custodian")],t),Lht=(t="voteInit")=>we.struct([Sn("nodePubkey"),Sn("authorizedVoter"),Sn("authorizedWithdrawer"),we.u8("commission")],t),Dht=(t="voteAuthorizeWithSeedArgs")=>we.struct([we.u32("voteAuthorizationType"),Sn("currentAuthorityDerivedKeyOwnerPubkey"),Xg("currentAuthorityDerivedKeySeed"),Sn("newAuthorized")],t);function S0e(t,e){const n=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*n(i.elementLayout)}else if("fields"in i)return S0e({layout:i},e[i.property]);return 0};let r=0;return t.layout.fields.forEach(i=>{r+=n(i)}),r}function Ka(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,(r&128)===0)break}return e}function Wa(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Yr(t,e){if(!t)throw new Error(e||"Assertion failed")}class EP{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new EP(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Yr(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Yr(n.length>0,"Expected at least one writable signer key");const[l]=n[0];Yr(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new gt(l)),...r.map(([l])=>new gt(l)),...i.map(([l])=>new gt(l)),...s.map(([l])=>new gt(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new gt(s),l=e.findIndex(c=>c.equals(a));l>=0&&(Yr(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const A0e="Reached end of buffer unexpectedly";function ed(t){if(t.length===0)throw new Error(A0e);return t.shift()}function Ya(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(A0e);return t.splice(...e)}class Ld{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new gt(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ps.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new oN(this.staticAccountKeys)}static compile(e){const n=EP.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new oN(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:ps.encode(a.data)}));return new Ld({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Wa(n,e);const r=this.instructions.map(h=>{const{accounts:m,programIdIndex:g}=h,v=Array.from(ps.decode(h.data));let x=[];Wa(x,m.length);let b=[];return Wa(b,v.length),{programIdIndex:g,keyIndicesCount:ln.from(x),keyIndices:m,dataLength:ln.from(b),data:v}});let i=[];Wa(i,r.length);let s=ln.alloc(Ay);ln.from(i).copy(s);let o=i.length;r.forEach(h=>{const g=we.struct([we.u8("programIdIndex"),we.blob(h.keyIndicesCount.length,"keyIndicesCount"),we.seq(we.u8("keyIndex"),h.keyIndices.length,"keyIndices"),we.blob(h.dataLength.length,"dataLength"),we.seq(we.u8("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=g}),s=s.slice(0,o);const a=we.struct([we.blob(1,"numRequiredSignatures"),we.blob(1,"numReadonlySignedAccounts"),we.blob(1,"numReadonlyUnsignedAccounts"),we.blob(n.length,"keyCount"),we.seq(Sn("key"),e,"keys"),Sn("recentBlockhash")]),l={numRequiredSignatures:ln.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ln.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ln.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ln.from(n),keys:this.accountKeys.map(h=>Ui(h.toBytes())),recentBlockhash:ps.decode(this.recentBlockhash)};let c=ln.alloc(2048);const d=a.encode(l,c);return s.copy(c,d),c.slice(0,d+s.length)}static from(e){let n=[...e];const r=ed(n);if(r!==(r&v0e))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=ed(n),s=ed(n),o=Ka(n);let a=[];for(let m=0;m<o;m++){const g=Ya(n,0,wh);a.push(new gt(ln.from(g)))}const l=Ya(n,0,wh),c=Ka(n);let d=[];for(let m=0;m<c;m++){const g=ed(n),v=Ka(n),x=Ya(n,0,v),b=Ka(n),w=Ya(n,0,b),T=ps.encode(ln.from(w));d.push({programIdIndex:g,accounts:x,data:T})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:ps.encode(ln.from(l)),accountKeys:a,instructions:d};return new Ld(h)}}class A1{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new oN(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=EP.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const h=n.extractTableLookup(d);if(h!==void 0){const[m,{writable:g,readonly:v}]=h;r.push(m),i.writable.push(...g),i.readonly.push(...v)}}const[o,a]=n.getMessageComponents(),c=new oN(a,i).compileInstructions(e.instructions);return new A1({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();Wa(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Wa(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Wa(s,this.addressTableLookups.length);const o=we.struct([we.u8("prefix"),we.struct([we.u8("numRequiredSignatures"),we.u8("numReadonlySignedAccounts"),we.u8("numReadonlyUnsignedAccounts")],"header"),we.blob(e.length,"staticAccountKeysLength"),we.seq(Sn(),this.staticAccountKeys.length,"staticAccountKeys"),Sn("recentBlockhash"),we.blob(r.length,"instructionsLength"),we.blob(n.length,"serializedInstructions"),we.blob(s.length,"addressTableLookupsLength"),we.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Ay),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:ps.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(Ay);for(const r of this.compiledInstructions){const i=Array();Wa(i,r.accountKeyIndexes.length);const s=Array();Wa(s,r.data.length);const o=we.struct([we.u8("programIdIndex"),we.blob(i.length,"encodedAccountKeyIndexesLength"),we.seq(we.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),we.blob(s.length,"encodedDataLength"),we.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Ay);for(const r of this.addressTableLookups){const i=Array();Wa(i,r.writableIndexes.length);const s=Array();Wa(s,r.readonlyIndexes.length);const o=we.struct([Sn("accountKey"),we.blob(i.length,"encodedWritableIndexesLength"),we.seq(we.u8(),r.writableIndexes.length,"writableIndexes"),we.blob(s.length,"encodedReadonlyIndexesLength"),we.seq(we.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=ed(n),i=r&v0e;Yr(r!==i,"Expected versioned message but received legacy message");const s=i;Yr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:ed(n),numReadonlySignedAccounts:ed(n),numReadonlyUnsignedAccounts:ed(n)},a=[],l=Ka(n);for(let v=0;v<l;v++)a.push(new gt(Ya(n,0,wh)));const c=ps.encode(Ya(n,0,wh)),d=Ka(n),h=[];for(let v=0;v<d;v++){const x=ed(n),b=Ka(n),w=Ya(n,0,b),T=Ka(n),N=new Uint8Array(Ya(n,0,T));h.push({programIdIndex:x,accountKeyIndexes:w,data:N})}const m=Ka(n),g=[];for(let v=0;v<m;v++){const x=new gt(Ya(n,0,wh)),b=Ka(n),w=Ya(n,0,b),T=Ka(n),N=Ya(n,0,T);g.push({accountKey:x,writableIndexes:w,readonlyIndexes:N})}return new A1({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:h,addressTableLookups:g})}}let jf=(function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t})({});const jht=ln.alloc(b0e).fill(0);class $i{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ln.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Qa{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new $i(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<n.length;x++)if(n[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);const i=[],s=[];n.forEach(x=>{x.keys.forEach(w=>{s.push({...w})});const b=x.programId.toString();i.includes(b)||i.push(b)}),i.forEach(x=>{s.push({pubkey:new gt(x),isSigner:!1,isWritable:!1})});const o=[];s.forEach(x=>{const b=x.pubkey.toString(),w=o.findIndex(T=>T.pubkey.toString()===b);w>-1?(o[w].isWritable=o[w].isWritable||x.isWritable,o[w].isSigner=o[w].isSigner||x.isSigner):o.push(x)}),o.sort(function(x,b){if(x.isSigner!==b.isSigner)return x.isSigner?-1:1;if(x.isWritable!==b.isWritable)return x.isWritable?-1:1;const w={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return x.pubkey.toBase58().localeCompare(b.pubkey.toBase58(),"en",w)});const a=o.findIndex(x=>x.pubkey.equals(r));if(a>-1){const[x]=o.splice(a,1);x.isSigner=!0,x.isWritable=!0,o.unshift(x)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const x of this.signatures){const b=o.findIndex(w=>w.pubkey.equals(x.publicKey));if(b>-1)o[b].isSigner||(o[b].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let l=0,c=0,d=0;const h=[],m=[];o.forEach(({pubkey:x,isSigner:b,isWritable:w})=>{b?(h.push(x.toString()),l+=1,w||(c+=1)):(m.push(x.toString()),w||(d+=1))});const g=h.concat(m),v=n.map(x=>{const{data:b,programId:w}=x;return{programIdIndex:g.indexOf(w.toString()),accounts:x.keys.map(T=>g.indexOf(T.pubkey.toString())),data:ps.encode(b)}});return v.forEach(x=>{Yr(x.programIdIndex>=0),x.accounts.forEach(b=>Yr(b>=0))}),new Ld({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:d},accountKeys:g,recentBlockhash:e,instructions:v})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=Cht(r,i.secretKey);this._addSignature(i.publicKey,Ui(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Yr(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=ln.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):Pht(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];Wa(r,n.length);const i=r.length+n.length*64+e.length,s=ln.alloc(i);return Yr(n.length<256),ln.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(Yr(o.length===64,"signature has invalid length"),ln.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),Yr(s.length<=Ay,`Transaction too large: ${s.length} > ${Ay}`),s}get keys(){return Yr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Yr(this.instructions.length===1),this.instructions[0].programId}get data(){return Yr(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Ka(n);let i=[];for(let s=0;s<r;s++){const o=Ya(n,0,b0e);i.push(ps.encode(ln.from(o)))}return Qa.populate(Ld.from(n),i)}static populate(e,n=[]){const r=new Qa;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==ps.encode(jht)?null:ps.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new $i({keys:s,programId:e.accountKeys[i.programIdIndex],data:ps.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class T0e{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,n){const{header:r,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:l}=r,c=o-a;Yr(c>0,"Message header is invalid");const d=e.staticAccountKeys.length-o-l;Yr(d>=0,"Message header is invalid");const h=e.getAccountKeys(n),m=h.get(0);if(m===void 0)throw new Error("Failed to decompile message because no account keys were found");const g=[];for(const v of i){const x=[];for(const w of v.accountKeyIndexes){const T=h.get(w);if(T===void 0)throw new Error(`Failed to find key for account key index ${w}`);const N=w<o;let O;N?O=w<c:w<h.staticAccountKeys.length?O=w-o<d:O=w-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,x.push({pubkey:T,isSigner:w<r.numRequiredSignatures,isWritable:O})}const b=h.get(v.programIdIndex);if(b===void 0)throw new Error(`Failed to find program id for program id index ${v.programIdIndex}`);g.push(new $i({programId:b,data:Ui(v.data),keys:x}))}return new T0e({payerKey:m,instructions:g,recentBlockhash:s})}compileToLegacyMessage(){return Ld.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return A1.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}const Bht=160,Uht=64,Fht=Bht/Uht,$ht=1e3/Fht,uyt=new gt("SysvarC1ock11111111111111111111111111111111");new gt("SysvarEpochSchedu1e111111111111111111111111");new gt("Sysvar1nstructions1111111111111111111111111");const t4=new gt("SysvarRecentB1ockHashes11111111111111111111"),bee=new gt("SysvarRent111111111111111111111111111111111");new gt("SysvarRewards111111111111111111111111111111");new gt("SysvarS1otHashes111111111111111111111111111");new gt("SysvarS1otHistory11111111111111111111111111");new gt("SysvarStakeHistory1111111111111111111111111");class wee extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Ft extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Og(t){return new Promise(e=>setTimeout(e,t))}function Is(t,e){const n=t.layout.span>=0?t.layout.span:S0e(t,e),r=ln.alloc(n),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,r),r}const zht=we.nu64("lamportsPerSignature"),k0e=we.struct([we.u32("version"),we.u32("state"),Sn("authorizedPubkey"),Sn("nonce"),we.struct([zht],"feeCalculator")]),Eee=k0e.span;class O7{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=k0e.decode(Ui(e),0);return new O7({authorizedPubkey:new gt(n.authorizedPubkey),nonce:new gt(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function Hx(t){const e=we.blob(8,t),n=e.decode.bind(e),r=e.encode.bind(e),i=e,s=Rft();return i.decode=(o,a)=>{const l=n(o,a);return s.decode(l)},i.encode=(o,a,l)=>{const c=s.encode(o);return r(c,a,l)},i}const Oa=Object.freeze({Create:{index:0,layout:we.struct([we.u32("instruction"),we.ns64("lamports"),we.ns64("space"),Sn("programId")])},Assign:{index:1,layout:we.struct([we.u32("instruction"),Sn("programId")])},Transfer:{index:2,layout:we.struct([we.u32("instruction"),Hx("lamports")])},CreateWithSeed:{index:3,layout:we.struct([we.u32("instruction"),Sn("base"),Xg("seed"),we.ns64("lamports"),we.ns64("space"),Sn("programId")])},AdvanceNonceAccount:{index:4,layout:we.struct([we.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:we.struct([we.u32("instruction"),we.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:we.struct([we.u32("instruction"),Sn("authorized")])},AuthorizeNonceAccount:{index:7,layout:we.struct([we.u32("instruction"),Sn("authorized")])},Allocate:{index:8,layout:we.struct([we.u32("instruction"),we.ns64("space")])},AllocateWithSeed:{index:9,layout:we.struct([we.u32("instruction"),Sn("base"),Xg("seed"),we.ns64("space"),Sn("programId")])},AssignWithSeed:{index:10,layout:we.struct([we.u32("instruction"),Sn("base"),Xg("seed"),Sn("programId")])},TransferWithSeed:{index:11,layout:we.struct([we.u32("instruction"),Hx("lamports"),Xg("seed"),Sn("programId")])},UpgradeNonceAccount:{index:12,layout:we.struct([we.u32("instruction")])}});class qx{constructor(){}static createAccount(e){const n=Oa.Create,r=Is(n,{lamports:e.lamports,space:e.space,programId:Ui(e.programId.toBuffer())});return new $i({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const i=Oa.TransferWithSeed;n=Is(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ui(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Oa.Transfer;n=Is(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new $i({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const i=Oa.AssignWithSeed;n=Is(i,{base:Ui(e.basePubkey.toBuffer()),seed:e.seed,programId:Ui(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Oa.Assign;n=Is(i,{programId:Ui(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new $i({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=Oa.CreateWithSeed,r=Is(n,{base:Ui(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ui(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new $i({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const n=new Qa;"basePubkey"in e&&"seed"in e?n.add(qx.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Eee,programId:this.programId})):n.add(qx.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Eee,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=Oa.InitializeNonceAccount,r=Is(n,{authorized:Ui(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t4,isSigner:!1,isWritable:!1},{pubkey:bee,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new $i(i)}static nonceAdvance(e){const n=Oa.AdvanceNonceAccount,r=Is(n),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t4,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new $i(i)}static nonceWithdraw(e){const n=Oa.WithdrawNonceAccount,r=Is(n,{lamports:e.lamports});return new $i({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:t4,isSigner:!1,isWritable:!1},{pubkey:bee,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=Oa.AuthorizeNonceAccount,r=Is(n,{authorized:Ui(e.newAuthorizedPubkey.toBuffer())});return new $i({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const i=Oa.AllocateWithSeed;n=Is(i,{base:Ui(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ui(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Oa.Allocate;n=Is(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new $i({keys:r,programId:this.programId,data:n})}}qx.programId=new gt("11111111111111111111111111111111");new gt("BPFLoader2111111111111111111111111111111111");function Vht(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n4,See;function Hht(){if(See)return n4;See=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,l,c,d,h;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(h=t.call(r),h==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(h==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)c=l[s],d=n(r[c],!1),d!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+d),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return n4=function(r){var i=n(r,!1);if(i!==void 0)return""+i},n4}var qht=Hht(),Aee=Vht(qht);const Hb=32;function r4(t){let e=0;for(;t>1;)t/=2,e++;return e}function Ght(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class Kht{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=r4(Ght(e+Hb+1))-r4(Hb)-1,r=this.getSlotsInEpoch(n),i=e-(r-Hb);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Hb:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+r4(Hb)):this.slotsPerEpoch}}var Wht=globalThis.fetch;class Yht extends hht{constructor(e,n,r){const i=s=>{const o=dht(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function Jht(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const Tee=56;class kee{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=Jht(Xht,e),r=e.length-Tee;Yr(r>=0,"lookup table is invalid"),Yr(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=we.struct([we.seq(Sn(),i,"addresses")]).decode(e.slice(Tee));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new gt(n.authority[0]):void 0,addresses:s.map(o=>new gt(o))}}}const Xht={index:1,layout:we.struct([we.u32("typeIndex"),Hx("deactivationSlot"),we.nu64("lastExtendedSlot"),we.u8("lastExtendedStartIndex"),we.u8(),we.seq(Sn(),we.offset(we.u8(),-1),"authority")])},Qht=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Zht(t){const e=t.match(Qht);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const Fr=FE(_7(gt),pt(),t=>new gt(t)),N0e=I7([pt(),Dr("base64")]),M7=FE(_7(ln),N0e,t=>ln.from(t[0],"base64")),ept=30*1e3;function tpt(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function hr(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function Nee(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function C0e(t){return ho([ot({jsonrpc:Dr("2.0"),id:pt(),result:t}),ot({jsonrpc:Dr("2.0"),id:pt(),error:ot({code:Nv(),message:pt(),data:Gt(Uft())})})])}const npt=C0e(Nv());function pn(t){return FE(C0e(t),npt,e=>"error"in e?e:{...e,result:vt(e.result,t)})}function ii(t){return pn(ot({context:ot({slot:De()}),value:t}))}function SP(t){return ot({context:ot({slot:De()}),value:t})}function i4(t,e){return t===0?new A1({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new gt(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:ps.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Ld(e)}const rpt=ot({foundation:De(),foundationTerm:De(),initial:De(),taper:De(),terminal:De()}),ipt=pn(Et(St(ot({epoch:De(),effectiveSlot:De(),amount:De(),postBalance:De(),commission:Gt(St(De()))})))),spt=Et(ot({slot:De(),prioritizationFee:De()})),opt=ot({total:De(),validator:De(),foundation:De(),epoch:De()}),apt=ot({epoch:De(),slotIndex:De(),slotsInEpoch:De(),absoluteSlot:De(),blockHeight:Gt(De()),transactionCount:Gt(De())}),lpt=ot({slotsPerEpoch:De(),leaderScheduleSlotOffset:De(),warmup:Wc(),firstNormalEpoch:De(),firstNormalSlot:De()}),cpt=a0e(pt(),Et(De())),h0=St(ho([ot({}),pt()])),upt=ot({err:h0}),dpt=Dr("receivedSignature"),fpt=ot({"solana-core":pt(),"feature-set":Gt(De())}),hpt=ot({program:pt(),programId:Fr,parsed:Nv()}),ppt=ot({programId:Fr,accounts:Et(Fr),data:pt()}),Cee=ii(ot({err:St(ho([ot({}),pt()])),logs:St(Et(pt())),accounts:Gt(St(Et(St(ot({executable:Wc(),owner:pt(),lamports:De(),data:Et(pt()),rentEpoch:Gt(De())}))))),unitsConsumed:Gt(De()),returnData:Gt(St(ot({programId:pt(),data:I7([pt(),Dr("base64")])}))),innerInstructions:Gt(St(Et(ot({index:De(),instructions:Et(ho([hpt,ppt]))}))))})),mpt=ii(ot({byIdentity:a0e(pt(),Et(De())),range:ot({firstSlot:De(),lastSlot:De()})}));function gpt(t,e,n,r,i,s){const o=n||Wht;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(d,h)=>{const m=await new Promise((g,v)=>{try{r(d,h,(x,b)=>g([x,b]))}catch(x){v(x)}});return await o(...m)}),new cht(async(d,h)=>{const m={method:"POST",body:d,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},gmt)};try{let g=5,v,x=500;for(;l?v=await l(t,m):v=await o(t,m),!(v.status!==429||i===!0||(g-=1,g===0));)console.error(`Server responded with ${v.status} ${v.statusText}.  Retrying after ${x}ms delay...`),await Og(x),x*=2;const b=await v.text();v.ok?h(null,b):h(new Error(`${v.status} ${v.statusText}: ${b}`))}catch(g){g instanceof Error&&h(g)}},{})}function ypt(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function xpt(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const vpt=pn(rpt),bpt=pn(opt),wpt=pn(spt),Ept=pn(apt),Spt=pn(lpt),Apt=pn(cpt),Tpt=pn(De()),kpt=ii(ot({total:De(),circulating:De(),nonCirculating:De(),nonCirculatingAccounts:Et(Fr)})),RD=ot({amount:pt(),uiAmount:St(De()),decimals:De(),uiAmountString:Gt(pt())}),Npt=ii(Et(ot({address:Fr,amount:pt(),uiAmount:St(De()),decimals:De(),uiAmountString:Gt(pt())}))),Cpt=ii(Et(ot({pubkey:Fr,account:ot({executable:Wc(),owner:Fr,lamports:De(),data:M7,rentEpoch:De()})}))),OD=ot({program:pt(),parsed:Nv(),space:De()}),Ppt=ii(Et(ot({pubkey:Fr,account:ot({executable:Wc(),owner:Fr,lamports:De(),data:OD,rentEpoch:De()})}))),_pt=ii(Et(ot({lamports:De(),address:Fr}))),T1=ot({executable:Wc(),owner:Fr,lamports:De(),data:M7,rentEpoch:De()}),Ipt=ot({pubkey:Fr,account:T1}),Rpt=FE(ho([_7(ln),OD]),ho([N0e,OD]),t=>Array.isArray(t)?vt(t,M7):t),MD=ot({executable:Wc(),owner:Fr,lamports:De(),data:Rpt,rentEpoch:De()}),Opt=ot({pubkey:Fr,account:MD}),Mpt=ot({state:ho([Dr("active"),Dr("inactive"),Dr("activating"),Dr("deactivating")]),active:De(),inactive:De()}),Lpt=pn(Et(ot({signature:pt(),slot:De(),err:h0,memo:St(pt()),blockTime:Gt(St(De()))}))),Dpt=pn(Et(ot({signature:pt(),slot:De(),err:h0,memo:St(pt()),blockTime:Gt(St(De()))}))),jpt=ot({subscription:De(),result:SP(T1)}),Bpt=ot({pubkey:Fr,account:T1}),Upt=ot({subscription:De(),result:SP(Bpt)}),Fpt=ot({parent:De(),slot:De(),root:De()}),$pt=ot({subscription:De(),result:Fpt}),zpt=ho([ot({type:ho([Dr("firstShredReceived"),Dr("completed"),Dr("optimisticConfirmation"),Dr("root")]),slot:De(),timestamp:De()}),ot({type:Dr("createdBank"),parent:De(),slot:De(),timestamp:De()}),ot({type:Dr("frozen"),slot:De(),timestamp:De(),stats:ot({numTransactionEntries:De(),numSuccessfulTransactions:De(),numFailedTransactions:De(),maxTransactionsPerEntry:De()})}),ot({type:Dr("dead"),slot:De(),timestamp:De(),err:pt()})]),Vpt=ot({subscription:De(),result:zpt}),Hpt=ot({subscription:De(),result:SP(ho([upt,dpt]))}),qpt=ot({subscription:De(),result:De()}),Gpt=ot({pubkey:pt(),gossip:St(pt()),tpu:St(pt()),rpc:St(pt()),version:St(pt())}),Pee=ot({votePubkey:pt(),nodePubkey:pt(),activatedStake:De(),epochVoteAccount:Wc(),epochCredits:Et(I7([De(),De(),De()])),commission:De(),lastVote:De(),rootSlot:St(De())}),Kpt=pn(ot({current:Et(Pee),delinquent:Et(Pee)})),Wpt=ho([Dr("processed"),Dr("confirmed"),Dr("finalized")]),Ypt=ot({slot:De(),confirmations:St(De()),err:h0,confirmationStatus:Gt(Wpt)}),Jpt=ii(Et(St(Ypt))),Xpt=pn(De()),P0e=ot({accountKey:Fr,writableIndexes:Et(De()),readonlyIndexes:Et(De())}),L7=ot({signatures:Et(pt()),message:ot({accountKeys:Et(pt()),header:ot({numRequiredSignatures:De(),numReadonlySignedAccounts:De(),numReadonlyUnsignedAccounts:De()}),instructions:Et(ot({accounts:Et(De()),data:pt(),programIdIndex:De()})),recentBlockhash:pt(),addressTableLookups:Gt(Et(P0e))})}),_0e=ot({pubkey:Fr,signer:Wc(),writable:Wc(),source:Gt(ho([Dr("transaction"),Dr("lookupTable")]))}),I0e=ot({accountKeys:Et(_0e),signatures:Et(pt())}),R0e=ot({parsed:Nv(),program:pt(),programId:Fr}),O0e=ot({accounts:Et(Fr),data:pt(),programId:Fr}),Qpt=ho([O0e,R0e]),Zpt=ho([ot({parsed:Nv(),program:pt(),programId:pt()}),ot({accounts:Et(pt()),data:pt(),programId:pt()})]),M0e=FE(Qpt,Zpt,t=>"accounts"in t?vt(t,O0e):vt(t,R0e)),L0e=ot({signatures:Et(pt()),message:ot({accountKeys:Et(_0e),instructions:Et(M0e),recentBlockhash:pt(),addressTableLookups:Gt(St(Et(P0e)))})}),aN=ot({accountIndex:De(),mint:pt(),owner:Gt(pt()),programId:Gt(pt()),uiTokenAmount:RD}),D0e=ot({writable:Et(Fr),readonly:Et(Fr)}),AP=ot({err:h0,fee:De(),innerInstructions:Gt(St(Et(ot({index:De(),instructions:Et(ot({accounts:Et(De()),data:pt(),programIdIndex:De()}))})))),preBalances:Et(De()),postBalances:Et(De()),logMessages:Gt(St(Et(pt()))),preTokenBalances:Gt(St(Et(aN))),postTokenBalances:Gt(St(Et(aN))),loadedAddresses:Gt(D0e),computeUnitsConsumed:Gt(De()),costUnits:Gt(De())}),D7=ot({err:h0,fee:De(),innerInstructions:Gt(St(Et(ot({index:De(),instructions:Et(M0e)})))),preBalances:Et(De()),postBalances:Et(De()),logMessages:Gt(St(Et(pt()))),preTokenBalances:Gt(St(Et(aN))),postTokenBalances:Gt(St(Et(aN))),loadedAddresses:Gt(D0e),computeUnitsConsumed:Gt(De()),costUnits:Gt(De())}),Cv=ho([Dr(0),Dr("legacy")]),p0=ot({pubkey:pt(),lamports:De(),postBalance:St(De()),rewardType:St(pt()),commission:Gt(St(De()))}),emt=pn(St(ot({blockhash:pt(),previousBlockhash:pt(),parentSlot:De(),transactions:Et(ot({transaction:L7,meta:St(AP),version:Gt(Cv)})),rewards:Gt(Et(p0)),blockTime:St(De()),blockHeight:St(De())}))),tmt=pn(St(ot({blockhash:pt(),previousBlockhash:pt(),parentSlot:De(),rewards:Gt(Et(p0)),blockTime:St(De()),blockHeight:St(De())}))),nmt=pn(St(ot({blockhash:pt(),previousBlockhash:pt(),parentSlot:De(),transactions:Et(ot({transaction:I0e,meta:St(AP),version:Gt(Cv)})),rewards:Gt(Et(p0)),blockTime:St(De()),blockHeight:St(De())}))),rmt=pn(St(ot({blockhash:pt(),previousBlockhash:pt(),parentSlot:De(),transactions:Et(ot({transaction:L0e,meta:St(D7),version:Gt(Cv)})),rewards:Gt(Et(p0)),blockTime:St(De()),blockHeight:St(De())}))),imt=pn(St(ot({blockhash:pt(),previousBlockhash:pt(),parentSlot:De(),transactions:Et(ot({transaction:I0e,meta:St(D7),version:Gt(Cv)})),rewards:Gt(Et(p0)),blockTime:St(De()),blockHeight:St(De())}))),smt=pn(St(ot({blockhash:pt(),previousBlockhash:pt(),parentSlot:De(),rewards:Gt(Et(p0)),blockTime:St(De()),blockHeight:St(De())}))),omt=pn(St(ot({blockhash:pt(),previousBlockhash:pt(),parentSlot:De(),transactions:Et(ot({transaction:L7,meta:St(AP)})),rewards:Gt(Et(p0)),blockTime:St(De())}))),_ee=pn(St(ot({blockhash:pt(),previousBlockhash:pt(),parentSlot:De(),signatures:Et(pt()),blockTime:St(De())}))),s4=pn(St(ot({slot:De(),meta:St(AP),blockTime:Gt(St(De())),transaction:L7,version:Gt(Cv)}))),hT=pn(St(ot({slot:De(),transaction:L0e,meta:St(D7),blockTime:Gt(St(De())),version:Gt(Cv)}))),amt=ii(ot({blockhash:pt(),lastValidBlockHeight:De()})),lmt=ii(Wc()),cmt=ot({slot:De(),numTransactions:De(),numSlots:De(),samplePeriodSecs:De()}),umt=pn(Et(cmt)),dmt=ii(St(ot({feeCalculator:ot({lamportsPerSignature:De()})}))),fmt=pn(pt()),hmt=pn(pt()),pmt=ot({err:h0,logs:Et(pt()),signature:pt()}),mmt=ot({result:SP(pmt),subscription:De()}),gmt={"solana-client":"js/1.0.0-maintenance"};class j7{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async d=>{const{commitment:h,config:m}=hr(d),g=this._buildArgs([],h,void 0,m),v=Aee(g);return c[v]=c[v]??(async()=>{try{const x=await this._rpcRequest("getBlockHeight",g),b=vt(x,pn(De()));if("error"in b)throw new Ft(b.error,"failed to get block height information");return b.result}finally{delete c[v]}})(),await c[v]}})();let r,i,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=tpt(e),this._rpcWsEndpoint=r||Zht(e),this._rpcClient=gpt(e,i,s,o,a,l),this._rpcRequest=ypt(this._rpcClient),this._rpcBatchRequest=xpt(this._rpcClient),this._rpcWebSocket=new Yht(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=hr(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=vt(o,ii(De()));if("error"in a)throw new Ft(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=vt(n,pn(St(De())));if("error"in r)throw new Ft(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=vt(e,pn(De()));if("error"in n)throw new Ft(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=vt(e,Tpt);if("error"in n)throw new Ft(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=vt(r,kpt);if("error"in i)throw new Ft(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=vt(i,ii(RD));if("error"in s)throw new Ft(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=vt(i,ii(RD));if("error"in s)throw new Ft(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=hr(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=vt(l,Cpt);if("error"in c)throw new Ft(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=vt(o,Ppt);if("error"in a)throw new Ft(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=vt(i,_pt);if("error"in s)throw new Ft(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=vt(i,Npt);if("error"in s)throw new Ft(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=hr(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=vt(o,ii(St(T1)));if("error"in a)throw new Ft(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=hr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=vt(o,ii(St(MD)));if("error"in a)throw new Ft(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=hr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=vt(a,ii(Et(St(MD))));if("error"in l)throw new Ft(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=hr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=vt(a,ii(Et(St(T1))));if("error"in l)throw new Ft(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=hr(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=vt(a,pn(Mpt));if("error"in l)throw new Ft(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=hr(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:Nee(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=Et(Ipt),d=o.withContext===!0?vt(l,ii(c)):vt(l,pn(c));if("error"in d)throw new Ft(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=hr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=vt(o,pn(Et(Opt)));if("error"in a)throw new Ft(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=ps.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Yr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(h,m)=>{r=void 0;const g={context:m,value:h};l({__type:jf.PROCESSED,response:g})},e);const d=new Promise(h=>{r==null?h():i=this._onSubscriptionStateChange(r,m=>{m==="subscribed"&&h()})});(async()=>{if(await d,s)return;const h=await this.getSignatureStatus(n);if(s||h==null)return;const{context:m,value:g}=h;if(g!=null)if(g!=null&&g.err)c(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:jf.PROCESSED,response:{context:m,value:g}})}})()}catch(d){c(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(h=>{const m=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await m();if(!s){for(;g<=r;)if(await Og(1e3),s||(g=await m(),s))return;h({__type:jf.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(n);let d;try{const h=await Promise.race([c,l,o]);if(h.__type===jf.PROCESSED)d=h.response;else throw new w0e(i)}finally{s=!0,a()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(g=>{let v=s,x=null;const b=async()=>{try{const{context:w,value:T}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return x=w.slot,T==null?void 0:T.nonce}catch{return v}};(async()=>{if(v=await b(),!a)for(;;){if(s!==v){g({__type:jf.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await Og(2e3),a||(v=await b(),a))return}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(n);let m;try{const g=await Promise.race([h,d,l]);if(g.__type===jf.PROCESSED)m=g.response;else{let v;for(;;){const x=await this.getSignatureStatus(o);if(x==null)break;if(x.context.slot<(g.slotInWhichNonceDidAdvance??r)){await Og(400);continue}v=x;break}if(v!=null&&v.value){const x=e||"finalized",{confirmationStatus:b}=v.value;switch(x){case"processed":case"recent":if(b!=="processed"&&b!=="confirmed"&&b!=="finalized")throw new ow(o);break;case"confirmed":case"single":case"singleGossip":if(b!=="confirmed"&&b!=="finalized")throw new ow(o);break;case"finalized":case"max":case"root":if(b!=="finalized")throw new ow(o);break;default:}m={context:v.context,value:{err:v.value.err}}}else throw new ow(o)}}finally{a=!0,c()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:jf.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,i]);if(l.__type===jf.PROCESSED)a=l.response;else throw new E0e(n,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=vt(e,pn(Et(Gpt)));if("error"in n)throw new Ft(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=vt(r,Kpt);if("error"in i)throw new Ft(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=hr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=vt(s,pn(De()));if("error"in o)throw new Ft(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=hr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=vt(s,pn(pt()));if("error"in o)throw new Ft(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=vt(i,pn(Et(Fr)));if("error"in s)throw new Ft(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);Yr(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=vt(i,Jpt);if("error"in s)throw new Ft(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=hr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=vt(s,pn(De()));if("error"in o)throw new Ft(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=vt(r,vpt);if("error"in i)throw new Ft(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=hr(r),o=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=vt(a,ipt);if("error"in l)throw new Ft(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=vt(e,bpt);if("error"in n)throw new Ft(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=hr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=vt(s,Ept);if("error"in o)throw new Ft(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=vt(e,Spt);if("error"in n)throw new Ft(n.error,"failed to get epoch schedule");const r=n.result;return new Kht(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=vt(e,Apt);if("error"in n)throw new Ft(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=vt(i,Xpt);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=vt(n,umt);if("error"in r)throw new Ft(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=vt(i,dmt);if("error"in s)throw new Ft(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=Ui(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=vt(s,ii(St(De())));if("error"in o)throw new Ft(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=vt(i,wpt);if("error"in s)throw new Ft(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=hr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=vt(s,amt);if("error"in o)throw new Ft(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=hr(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=vt(o,lmt);if("error"in a)throw new Ft(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=vt(e,pn(fpt));if("error"in n)throw new Ft(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=vt(e,pn(pt()));if("error"in n)throw new Ft(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=hr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=vt(o,nmt);if("error"in a)throw a.error;return a.result}case"none":{const a=vt(o,tmt);if("error"in a)throw a.error;return a.result}default:{const a=vt(o,emt);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:d,version:h})=>({meta:d,transaction:{...c,message:i4(h,c.message)},version:h}))}:null}}}catch(a){throw new Ft(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=hr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=vt(o,imt);if("error"in a)throw a.error;return a.result}case"none":{const a=vt(o,smt);if("error"in a)throw a.error;return a.result}default:{const a=vt(o,rmt);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Ft(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=vt(s,mpt);if("error"in o)throw new Ft(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=hr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=vt(o,s4);if("error"in a)throw new Ft(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:i4(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=hr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=vt(o,hT);if("error"in a)throw new Ft(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=hr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=vt(l,hT);if("error"in c)throw new Ft(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:i}=hr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=vt(l,s4);if("error"in c)throw new Ft(c.error,"failed to get transactions");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:i4(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=vt(i,omt);if("error"in s)throw new Ft(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const d=new Ld(l.message);return{meta:c,transaction:{...l,message:d}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:Qa.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=vt(s,pn(Et(De())));if("error"in o)throw new Ft(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=vt(i,_ee);if("error"in s)throw new Ft(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=vt(i,_ee);if("error"in s)throw new Ft(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=vt(i,s4);if("error"in s)throw new Ft(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Ld(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Qa.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=vt(i,hT);if("error"in s)throw new Ft(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=vt(o,hT);if("error"in a)throw new Ft(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=vt(s,Lpt);if("error"in o)throw new Ft(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=vt(s,Dpt);if("error"in o)throw new Ft(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new kee({key:e,state:kee.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=O7.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=vt(r,fmt);if("error"in i)throw new Ft(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Og(100);const r=Date.now()-this._blockhashInfo.lastFetch>=ept;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Og($ht/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=hr(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=vt(s,ii(De()));if("error"in o)throw new Ft(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const x=e.serialize(),b=ln.from(x).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const w=n||{};w.encoding="base64","commitment"in w||(w.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(w.innerInstructions=n.innerInstructions);const T=[b,w],N=await this._rpcRequest("simulateTransaction",T),O=vt(N,Cee);if("error"in O)throw new Error("failed to simulate transaction: "+O.error.message);return O.result}let i;if(e instanceof Qa){let v=e;i=new Qa,i.feePayer=v.feePayer,i.instructions=e.instructions,i.nonceInfo=v.nonceInfo,i.signatures=v.signatures}else i=Qa.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let v=this._disableBlockhashCaching;for(;;){const x=await this._blockhashWithExpiryBlockHeight(v);if(i.lastValidBlockHeight=x.lastValidBlockHeight,i.recentBlockhash=x.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const b=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(b)&&!this._blockhashInfo.transactionSignatures.includes(b)){this._blockhashInfo.simulatedSignatures.push(b);break}else v=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(r){const v=(Array.isArray(r)?r:o.nonProgramIds()).map(x=>x.toBase58());d.accounts={encoding:"base64",addresses:v}}s&&(d.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(d.innerInstructions=n.innerInstructions);const h=[c,d],m=await this._rpcRequest("simulateTransaction",h),g=vt(m,Cee);if("error"in g){let v;if("data"in g.error&&(v=g.error.data.logs,v&&Array.isArray(v))){const x=`
    `,b=x+v.join(x);console.error(g.error.message,b)}throw new wee({action:"simulate",signature:"",transactionMessage:g.error.message,logs:v})}return g.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=Ui(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=vt(a,hmt);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new wee({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=vt(e,jpt);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=Aee([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Yr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=hr(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=vt(e,Upt);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=hr(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:Nee(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=vt(e,mmt);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=vt(e,$pt);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=vt(e,Vpt);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=vt(e,Hpt);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=vt(e,qpt);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class ha{constructor(e){this._keypair=void 0,this._keypair=e??yee()}static generate(){return new ha(yee())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const i=e.slice(0,32),s=ID(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new ha({publicKey:r,secretKey:e})}static fromSeed(e){const n=ID(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new ha({publicKey:n,secretKey:r})}get publicKey(){return new gt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:we.struct([we.u32("instruction"),Hx("recentSlot"),we.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:we.struct([we.u32("instruction")])},ExtendLookupTable:{index:2,layout:we.struct([we.u32("instruction"),Hx(),we.seq(Sn(),we.offset(we.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:we.struct([we.u32("instruction")])},CloseLookupTable:{index:4,layout:we.struct([we.u32("instruction")])}});new gt("AddressLookupTab1e1111111111111111111111111");const pT=Object.freeze({RequestUnits:{index:0,layout:we.struct([we.u8("instruction"),we.u32("units"),we.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:we.struct([we.u8("instruction"),we.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:we.struct([we.u8("instruction"),we.u32("units")])},SetComputeUnitPrice:{index:3,layout:we.struct([we.u8("instruction"),Hx("microLamports")])}});class ymt{constructor(){}static requestUnits(e){const n=pT.RequestUnits,r=Is(n,e);return new $i({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=pT.RequestHeapFrame,r=Is(n,e);return new $i({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=pT.SetComputeUnitLimit,r=Is(n,e);return new $i({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=pT.SetComputeUnitPrice,r=Is(n,{microLamports:BigInt(e.microLamports)});return new $i({keys:[],programId:this.programId,data:r})}}ymt.programId=new gt("ComputeBudget111111111111111111111111111111");we.struct([we.u8("numSignatures"),we.u8("padding"),we.u16("signatureOffset"),we.u16("signatureInstructionIndex"),we.u16("publicKeyOffset"),we.u16("publicKeyInstructionIndex"),we.u16("messageDataOffset"),we.u16("messageDataSize"),we.u16("messageInstructionIndex")]);new gt("Ed25519SigVerify111111111111111111111111111");Nht.utils.isValidPrivateKey;we.struct([we.u8("numSignatures"),we.u16("signatureOffset"),we.u8("signatureInstructionIndex"),we.u16("ethAddressOffset"),we.u8("ethAddressInstructionIndex"),we.u16("messageDataOffset"),we.u16("messageDataSize"),we.u8("messageInstructionIndex"),we.blob(20,"ethAddress"),we.blob(64,"signature"),we.u8("recoveryId")]);new gt("KeccakSecp256k11111111111111111111111111111");var j0e;new gt("StakeConfig11111111111111111111111111111111");class B0e{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}j0e=B0e;B0e.default=new j0e(0,0,gt.default);Object.freeze({Initialize:{index:0,layout:we.struct([we.u32("instruction"),Oht(),Mht()])},Authorize:{index:1,layout:we.struct([we.u32("instruction"),Sn("newAuthorized"),we.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:we.struct([we.u32("instruction")])},Split:{index:3,layout:we.struct([we.u32("instruction"),we.ns64("lamports")])},Withdraw:{index:4,layout:we.struct([we.u32("instruction"),we.ns64("lamports")])},Deactivate:{index:5,layout:we.struct([we.u32("instruction")])},Merge:{index:7,layout:we.struct([we.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:we.struct([we.u32("instruction"),Sn("newAuthorized"),we.u32("stakeAuthorizationType"),Xg("authoritySeed"),Sn("authorityOwner")])}});new gt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:we.struct([we.u32("instruction"),Lht()])},Authorize:{index:1,layout:we.struct([we.u32("instruction"),Sn("newAuthorized"),we.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:we.struct([we.u32("instruction"),we.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:we.struct([we.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:we.struct([we.u32("instruction"),Dht()])}});new gt("Vote111111111111111111111111111111111111111");new gt("Va1idator1nfo111111111111111111111111111111");ot({name:pt(),website:Gt(pt()),details:Gt(pt()),iconUrl:Gt(pt()),keybaseUsername:Gt(pt())});new gt("Vote111111111111111111111111111111111111111");we.struct([Sn("nodePubkey"),Sn("authorizedWithdrawer"),we.u8("commission"),we.nu64(),we.seq(we.struct([we.nu64("slot"),we.u32("confirmationCount")]),we.offset(we.u32(),-8),"votes"),we.u8("rootSlotValid"),we.nu64("rootSlot"),we.nu64(),we.seq(we.struct([we.nu64("epoch"),Sn("authorizedVoter")]),we.offset(we.u32(),-8),"authorizedVoters"),we.struct([we.seq(we.struct([Sn("authorizedPubkey"),we.nu64("epochOfLastAuthorizedSwitch"),we.nu64("targetEpoch")]),32,"buf"),we.nu64("idx"),we.u8("isEmpty")],"priorVoters"),we.nu64(),we.seq(we.struct([we.nu64("epoch"),we.nu64("credits"),we.nu64("prevCredits")]),we.offset(we.u32(),-8),"epochCredits"),we.struct([we.nu64("slot"),we.nu64("timestamp")],"lastTimestamp")]);const mT=1e9;var o4,Iee;function xmt(){if(Iee)return o4;Iee=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function h(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,b=0,w=0,T=v.length;w!==T&&v[w]===0;)w++,x++;for(var N=(T-w)*d+1>>>0,O=new Uint8Array(N);w!==T;){for(var j=v[w],_=0,F=N-1;(j!==0||_<b)&&F!==-1;F--,_++)j+=256*O[F]>>>0,O[F]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");b=_,w++}for(var z=N-b;z!==N&&O[z]===0;)z++;for(var D=l.repeat(x);z<N;++z)D+=e.charAt(O[z]);return D}function m(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;for(var x=0,b=0,w=0;v[x]===l;)b++,x++;for(var T=(v.length-x)*c+1>>>0,N=new Uint8Array(T);v[x];){var O=v.charCodeAt(x);if(O>255)return;var j=n[O];if(j===255)return;for(var _=0,F=T-1;(j!==0||_<w)&&F!==-1;F--,_++)j+=a*N[F]>>>0,N[F]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");w=_,x++}for(var z=T-w;z!==T&&N[z]===0;)z++;for(var D=new Uint8Array(b+(T-z)),$=b;z!==T;)D[$++]=N[z++];return D}function g(v){var x=m(v);if(x)return x;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:m,decode:g}}return o4=t,o4}var a4,Ree;function vmt(){return Ree||(Ree=1,a4=xmt()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),a4}var gT=vmt();const $E=new gt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new gt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const TP=new gt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new gt("So11111111111111111111111111111111111111112");new gt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const B7=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var vp={},Oee;function bmt(){if(Oee)return vp;Oee=1,Object.defineProperty(vp,"__esModule",{value:!0});function t(i){{const s=an.from(i);s.reverse();const o=s.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}vp.toBigIntLE=t;function e(i){{const s=i.toString("hex");return s.length===0?BigInt(0):BigInt(`0x${s}`)}}vp.toBigIntBE=e;function n(i,s){{const o=i.toString(16),a=an.from(o.padStart(s*2,"0").slice(0,s*2),"hex");return a.reverse(),a}}vp.toBufferLE=n;function r(i,s){{const o=i.toString(16);return an.from(o.padStart(s*2,"0").slice(0,s*2),"hex")}}return vp.toBufferBE=r,vp}var Mee=bmt();const wmt=t=>e=>{const n=we.blob(t,e),{encode:r,decode:i}=B7(n),s=n;return s.decode=(o,a)=>{const l=i(o,a);return Mee.toBigIntLE(an.from(l))},s.encode=(o,a,l)=>{const c=Mee.toBufferLE(o,t);return r(c,a,l)},s},U0e=wmt(8),Emt=t=>{const e=we.u8(t),{encode:n,decode:r}=B7(e),i=e;return i.decode=(s,o)=>!!r(s,o),i.encode=(s,o,a)=>{const l=Number(s);return n(l,o,a)},i},Lee=t=>{const e=we.blob(32,t),{encode:n,decode:r}=B7(e),i=e;return i.decode=(s,o)=>{const a=r(s,o);return new gt(a)},i.encode=(s,o,a)=>{const l=s.toBuffer();return n(l,o,a)},i};class F0e extends Error{constructor(e){super(e)}}class $0e extends F0e{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var lN;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension"})(lN||(lN={}));function Smt(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof gt?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const z0e=we.struct([we.u32("mintAuthorityOption"),Lee("mintAuthority"),U0e("supply"),we.u8("decimals"),Emt("isInitialized"),we.u32("freezeAuthorityOption"),Lee("freezeAuthority")]);z0e.span;async function LD(t,e,n=!1,r=$E,i=TP){if(!n&&!gt.isOnCurve(e.toBuffer()))throw new $0e;const[s]=await gt.findProgramAddress([e.toBuffer(),r.toBuffer(),t.toBuffer()],i);return s}function V0e(t,e,n,r,i=$E,s=TP){return Amt(t,e,n,r,an.alloc(0),i,s)}function Amt(t,e,n,r,i,s=$E,o=TP){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:qx.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new $i({keys:a,programId:o,data:i})}const DD=we.struct([we.u8("instruction"),U0e("amount")]);function H0e(t,e,n,r,i=[],s=$E){const o=Smt([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,i),a=an.alloc(DD.span);return DD.encode({instruction:lN.Transfer,amount:BigInt(r)},a),new $i({keys:o,programId:s,data:a})}const Dee=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:TP,MintLayout:z0e,TOKEN_PROGRAM_ID:$E,TokenError:F0e,get TokenInstruction(){return lN},TokenOwnerOffCurveError:$0e,createAssociatedTokenAccountInstruction:V0e,createTransferInstruction:H0e,getAssociatedTokenAddress:LD,transferInstructionData:DD},Symbol.toStringTag,{value:"Module"}));class Tmt{constructor(){this.connection=new j7(OB,"confirmed")}createVaultKeypair(){return ha.generate()}getKeypairFromSecretKey(e){const n=Uint8Array.from(JSON.parse(e));return ha.fromSecretKey(n)}async getBalance(e){try{return await this.connection.getBalance(new gt(e))/mT}catch(n){return console.error("Error fetching balance:",n),0}}async wait(e){return new Promise(n=>setTimeout(n,e))}async getAccountInfoWithRetry(e,n=5){for(let r=0;r<n;r++)try{return await this.connection.getAccountInfo(e)}catch(i){if(console.warn(`Attempt ${r+1} failed to fetch account info: ${i.message}`),r===n-1)throw i;await this.wait(500*Math.pow(2,r))}return null}async getLatestBlockhashWithRetry(e=5){for(let n=0;n<e;n++)try{return await this.connection.getLatestBlockhash("confirmed")}catch(r){if(console.warn(`Attempt ${n+1} failed to get blockhash: ${r.message}`),n===e-1)throw new Error("Network error: Failed to fetch blockhash. Devnet may be down.");await this.wait(500*Math.pow(2,n))}throw new Error("Failed to get blockhash")}async getTokenBalances(e){const n=await this.getBalance(e);return bh.map(r=>({...r,balance:r.symbol==="SOL"?n:0}))}async airdrop(e){var n,r;try{const i=await this.connection.requestAirdrop(new gt(e),1*mT),s=await this.getLatestBlockhashWithRetry();return await this.connection.confirmTransaction({blockhash:s.blockhash,lastValidBlockHeight:s.lastValidBlockHeight,signature:i}),i}catch(i){throw(n=i.message)!=null&&n.includes("429")?new Error("Devnet Rate Limit Reached. Please try again later."):(r=i.message)!=null&&r.includes("limit reached")?new Error("Daily Airdrop Limit Reached for this IP."):i}}async connectWallet(){try{const{solana:e}=window;if(e&&e.isPhantom)return(await e.connect()).publicKey.toString();throw alert("Solana object not found! Get a Phantom Wallet "),new Error("No wallet found")}catch(e){throw console.error(e),e}}async pollForConfirmation(e,n=15,r=2e3){var i,s,o;for(let a=0;a<n;a++)try{const l=await this.connection.getSignatureStatus(e);if((i=l==null?void 0:l.value)!=null&&i.confirmationStatus){const c=l.value.confirmationStatus;if(c==="confirmed"||c==="finalized")return console.log(`[Solana]  Transaction confirmed (${c}) after ${a+1} attempts`),!0;c==="processed"&&console.log("[Solana]  Transaction processed, waiting for confirmation...")}if((s=l==null?void 0:l.value)!=null&&s.err)throw new Error(`Transaction failed on-chain: ${JSON.stringify(l.value.err)}`);await this.wait(r)}catch(l){if((o=l.message)!=null&&o.includes("failed on-chain"))throw l;console.warn(`[Solana] Poll attempt ${a+1} failed:`,l.message),await this.wait(r)}return!1}async sendTransactionWithRetry(e,n){var i,s;let r="";try{const o=await this.getLatestBlockhashWithRetry();if(e.recentBlockhash=o.blockhash,e.lastValidBlockHeight=o.lastValidBlockHeight,e.sign(...n),r=await this.connection.sendRawTransaction(e.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed"}),console.log(`[Solana]  Transaction sent: ${r.slice(0,16)}...`),!await this.pollForConfirmation(r,15,2e3)){console.warn(`[Solana]  Confirmation polling timed out, but transaction may have succeeded: ${r}`);const l=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw l.signature=r,l.isTimeout=!0,l}return r}catch(o){if(console.warn("Transaction Error:",o.name,o.message),o.name==="TransactionExpiredBlockheightExceededError"||(i=o.message)!=null&&i.includes("block height exceeded")||(s=o.message)!=null&&s.includes("timeout")||o.isTimeout){const a=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw a.signature=r,a.isTimeout=!0,a}throw o}}async transferSol(e,n,r){try{const i=new Qa().add(qx.transfer({fromPubkey:e.publicKey,toPubkey:new gt(n),lamports:Math.floor(r*mT)}));return i.feePayer=e.publicKey,await this.sendTransactionWithRetry(i,[e])}catch(i){throw console.error("Transfer Error",i),new Error(`Transfer failed: ${i.message}`)}}async findPoolKeys(e,n){const{Liquidity:r,MARKET_STATE_LAYOUT_V3:i,LIQUIDITY_STATE_LAYOUT_V4:s,SPL_MINT_LAYOUT:o}=await ko(async()=>{const{Liquidity:N,MARKET_STATE_LAYOUT_V3:O,LIQUIDITY_STATE_LAYOUT_V4:j,SPL_MINT_LAYOUT:_}=await import("./index-TI_xwffy.js");return{Liquidity:N,MARKET_STATE_LAYOUT_V3:O,LIQUIDITY_STATE_LAYOUT_V4:j,SPL_MINT_LAYOUT:_}},[]),a=new gt(e),l=new gt(n),c=new gt(GKe),d=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:a.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:l.toBase58()}}],h=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:l.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:a.toBase58()}}];let m=await this.connection.getProgramAccounts(c,{filters:d});if(m.length===0&&(m=await this.connection.getProgramAccounts(c,{filters:h})),m.length===0)return null;const g=m[0],v=s.decode(g.account.data),x=v.marketId,b=await this.connection.getAccountInfo(x);if(!b)throw new Error("Failed to fetch market info");const w=i.decode(b.data),T=r.getAssociatedAuthority({programId:c}).publicKey;return{id:g.pubkey,baseMint:v.baseMint,quoteMint:v.quoteMint,lpMint:v.lpMint,baseDecimals:v.baseDecimal.toNumber(),quoteDecimals:v.quoteDecimal.toNumber(),lpDecimals:5,version:4,programId:c,authority:T,openOrders:v.openOrders,targetOrders:v.targetOrders,baseVault:v.baseVault,quoteVault:v.quoteVault,withdrawQueue:v.withdrawQueue,lpVault:v.lpVault,marketVersion:3,marketProgramId:v.marketProgramId,marketId:v.marketId,marketAuthority:r.getAssociatedAuthority({programId:v.marketProgramId}).publicKey,marketBaseVault:w.baseVault,marketQuoteVault:w.quoteVault,marketBids:w.bids,marketAsks:w.asks,marketEventQueue:w.eventQueue}}async executeSwap(e,n,r,i,s){const{Liquidity:o,Token:a,TokenAmount:l,Percent:c,TxVersion:d}=await ko(async()=>{const{Liquidity:h,Token:m,TokenAmount:g,Percent:v,TxVersion:x}=await import("./index-TI_xwffy.js");return{Liquidity:h,Token:m,TokenAmount:g,Percent:v,TxVersion:x}},[]);try{const h=U=>{console.log(`[Swap Status] ${U}`),s&&s(U)};h("Initializing Swap Protocol...");const m="So11111111111111111111111111111111111111112",g=n.trim()==="SOL"?m:n.trim(),v=r.trim()==="SOL"?m:r.trim();h("Fetching Pool Keys...");const x=await this.findPoolKeys(g,v);if(!x)throw new Error(`No Liquidity Pool found for ${g} <-> ${v} on Devnet.`);h("Calculating Amount Out...");const b=g===x.baseMint.toBase58(),{TOKEN_PROGRAM_ID:w}=await ko(async()=>{const{TOKEN_PROGRAM_ID:U}=await Promise.resolve().then(()=>Dee);return{TOKEN_PROGRAM_ID:U}},void 0),T=new a(w,new gt(g),b?x.baseDecimals:x.quoteDecimals),N=new a(w,new gt(v),b?x.quoteDecimals:x.baseDecimals),O=new l(T,i,!1),j=new c(25,100);h("Fetching Pool Reserves...");const _=await o.fetchInfo({connection:this.connection,poolKeys:x}),{amountOut:F,minAmountOut:z}=o.computeAmountOut({poolKeys:x,poolInfo:_,amountIn:O,currencyOut:N,slippage:j});h(`Calculated Amount Out: ${F.toFixed()} (Min: ${z.toFixed()})`),h("Building Swap Transaction...");const D=await this.getTokenAccountsByOwner(e.publicKey),{innerTransactions:$}=await o.makeSwapInstructionSimple({connection:this.connection,poolKeys:x,userKeys:{tokenAccounts:D,owner:e.publicKey},amountIn:O,amountOut:z,fixedSide:"in",makeTxVersion:d.V0});h("Sending Transaction to Devnet...");const G=await Promise.all($.map(async U=>{const{instructions:A,signers:I}=U,L=new Qa;return L.add(...A),L.feePayer=e.publicKey,L.recentBlockhash=(await this.connection.getLatestBlockhash()).blockhash,L.sign(e,...I),L}));let H="";for(const U of G){const A=await this.connection.sendRawTransaction(U.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed",maxRetries:5});if(console.log(`[Swap]  Transaction sent: ${A.slice(0,16)}...`),!await this.pollForConfirmation(A,15,2e3))throw new Error("Transaction confirmation timed out - please check explorer for status");H=A}return h("Transaction Confirmed!"),H}catch(h){throw console.error("Swap Error:",h),new Error(`Swap failed: ${h.message}`)}}async getWalletAssets(e){const n=new gt(e),r=await this.getBalance(e),s=(await this.getTokenAccountsByOwner(n)).map(o=>{var a,l;return{mint:o.accountInfo.mint.toBase58(),amount:o.accountInfo.amount,decimals:o.accountInfo.decimals,symbol:((a=bh.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:a.symbol)||"UNKNOWN",name:((l=bh.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:l.name)||"Unknown Token",isNft:o.accountInfo.decimals===0&&o.accountInfo.amount==="1"}});return s.unshift({mint:"So11111111111111111111111111111111111111112",amount:(r*mT).toString(),decimals:9,symbol:"SOL",name:"Solana",isNft:!1}),s}async getTokenAccountsByOwner(e){const{TOKEN_PROGRAM_ID:n}=await ko(async()=>{const{TOKEN_PROGRAM_ID:i}=await Promise.resolve().then(()=>Dee);return{TOKEN_PROGRAM_ID:i}},void 0);return(await this.connection.getParsedTokenAccountsByOwner(e,{programId:n})).value.map(i=>({pubkey:i.pubkey,programId:i.account.owner,accountInfo:{mint:new gt(i.account.data.parsed.info.mint),amount:i.account.data.parsed.info.tokenAmount.amount,decimals:i.account.data.parsed.info.tokenAmount.decimals}}))}async transferToken(e,n,r,i,s){if(n==="So11111111111111111111111111111111111111112"||n==="SOL")return this.transferSol(e,r,i);try{const o=new gt(n),a=new gt(r),l=await LD(o,e.publicKey),c=await LD(o,a),d=new Qa;await this.connection.getAccountInfo(c)||d.add(V0e(e.publicKey,c,a,o));let m;if(await this.connection.getAccountInfo(l)){const v=await this.connection.getTokenAccountBalance(l),x=BigInt(v.value.amount),b=BigInt(Math.round(i*Math.pow(10,s))),w=x>b?x-b:b-x,T=x/BigInt(100);w<=T?(m=x,console.log(`[Transfer] Using actual balance: ${x} (requested: ${b})`)):m=b}else m=BigInt(Math.round(i*Math.pow(10,s)));return d.add(H0e(l,c,e.publicKey,m)),d.feePayer=e.publicKey,await this.sendTransactionWithRetry(d,[e])}catch(o){throw console.error("Token Transfer Error",o),new Error(`Token Transfer failed: ${o.message}`)}}async getRecentTransactions(e,n=20){try{const r=new gt(e);return(await this.connection.getSignaturesForAddress(r,{limit:n})).map(s=>({signature:s.signature,slot:s.slot,err:s.err,memo:s.memo,blockTime:s.blockTime,status:s.err?"failed":"success",confirmationStatus:s.confirmationStatus}))}catch(r){return console.error("Error fetching transactions:",r),[]}}}const Ds=new Tmt,Wf=class Wf{static async setSessionHash(e){try{const n=Date.now(),r=new TextEncoder,i=crypto.getRandomValues(new Uint8Array(16)),s=r.encode(e+n.toString()),o=new Uint8Array(i.length+s.length);o.set(i),o.set(s,i.length);const a=await crypto.subtle.digest("SHA-256",o),l=new Uint8Array(a);this.sessionHash=btoa(String.fromCharCode(...l)),this.sessionTimestamp=n}catch{console.error("[SecurityService] Failed to set session hash")}}static hasValidSession(){return this.sessionHash!==null&&this.sessionTimestamp>0}static getSessionTimestamp(){return this.sessionTimestamp}static clearSession(){this.sessionHash=null,this.sessionTimestamp=0}static initializeDevToolsDetection(){if(this.detectionInterval)return;const e=()=>{const i=window.outerWidth-window.innerWidth>160,s=window.outerHeight-window.innerHeight>160;(i||s)&&!this.devToolsDetected&&this.handleDevToolsDetected()},n=new Image;let r=!1;Object.defineProperty(n,"id",{get:function(){return r=!0,""}}),this.detectionInterval=setInterval(()=>{r=!1,console.log(n),console.clear(),r&&!this.devToolsDetected&&this.handleDevToolsDetected(),e()},2e3),window.addEventListener("resize",e)}static handleDevToolsDetected(){this.devToolsDetected||(this.devToolsDetected=!0,console.clear(),console.warn("%c SECURITY NOTICE ","color: #ff4444; font-size: 28px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);"),console.warn("%cDeveloper tools detected.","color: #ff8800; font-size: 16px;"),console.warn("%cFor your security, sensitive operations may be restricted.","color: #ffaa00; font-size: 14px;"),console.warn("%cIf you are not a developer, please close this panel immediately.","color: #ffffff; font-size: 12px;"),this.securityListeners.forEach(e=>{try{e()}catch{}}))}static isDevToolsDetected(){return this.devToolsDetected}static onSecurityBreach(e){return this.securityListeners.add(e),()=>this.securityListeners.delete(e)}static initializeConsoleSanitization(){const e=[/0x[a-fA-F0-9]{64}/g,/[1-9A-HJ-NP-Za-km-z]{87,88}/g,/0x[a-fA-F0-9]{40,}/g,/[A-Za-z0-9+/]{100,}={0,2}/g],n=r=>r.map(i=>{if(typeof i=="string"){let s=i;for(const o of e)s=s.replace(o,"[REDACTED]");return s}if(typeof i=="object"&&i!==null)try{const s=JSON.stringify(i);let o=!1;for(const a of e)if(a.test(s)){o=!0;break}if(o)return"[Object with sensitive data]"}catch{}return i});console.log=(...r)=>{this.originalConsole.log.apply(console,n(r))},console.warn=(...r)=>{this.originalConsole.warn.apply(console,n(r))},console.info=(...r)=>{this.originalConsole.info.apply(console,n(r))},console.debug=(...r)=>{this.originalConsole.debug.apply(console,n(r))}}static protectGlobalNamespace(){if(typeof window>"u")return;const e=window,n=["__dealerService","__polymarketDealerService","__backgroundTimer"];for(const r of n)try{e[r]&&delete e[r],Object.defineProperty(e,r,{value:void 0,writable:!1,configurable:!1})}catch{}}static initializeProductionSecurity(){console.log("[SecurityService] Initializing production security..."),this.initializeConsoleSanitization(),this.initializeDevToolsDetection(),this.protectGlobalNamespace(),console.log("[SecurityService] Production security initialized")}static cleanup(){this.detectionInterval&&(clearInterval(this.detectionInterval),this.detectionInterval=null),this.securityListeners.clear(),this.devToolsDetected=!1,this.clearSession()}};Wf.sessionHash=null,Wf.sessionTimestamp=0,Wf.devToolsDetected=!1,Wf.detectionInterval=null,Wf.securityListeners=new Set,Wf.originalConsole={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug};let Ty=Wf;const jee="vault_balance_history",Bee="vault_intraday_history",Uee=90,Fee=96;class kmt{constructor(){this.history=[],this.intradayHistory=[],this.listeners=new Set,this.isInitialized=!1,this.initPromise=null,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadFromStorage(),this.isInitialized=!0,this.notify())}async waitForInit(){this.initPromise&&await this.initPromise}async loadFromStorage(){try{const e=await Ae.getItem(Ae.getUserKey(jee));e&&(this.history=JSON.parse(e));const n=await Ae.getItem(Ae.getUserKey(Bee));if(n){this.intradayHistory=JSON.parse(n);const r=Date.now()-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(i=>i.timestamp>r)}}catch(e){console.error("[BalanceHistory] Failed to load:",e),this.history=[],this.intradayHistory=[]}}async saveToStorage(){try{await Ae.setItem(Ae.getUserKey(jee),JSON.stringify(this.history)),await Ae.setItem(Ae.getUserKey(Bee),JSON.stringify(this.intradayHistory))}catch(e){console.error("[BalanceHistory] Failed to save:",e)}}notify(){this.listeners.forEach(e=>e())}getTodayDate(){return new Date().toISOString().split("T")[0]}get15MinTimeKey(){const e=new Date,n=Math.floor(e.getMinutes()/15)*15;return`${e.getHours().toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}async reloadFromStorage(){console.log("[BalanceHistory] Reloading from storage..."),await this.loadFromStorage(),this.notify()}reset(){console.log("[BalanceHistory] Resetting history..."),this.history=[],this.intradayHistory=[],this.notify()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.history}recordSnapshot(e,n,r){const i=this.getTodayDate(),s=e+n+r,o=Date.now(),a=this.history.findIndex(g=>g.date===i),l={date:i,timestamp:o,solValue:e,hlValue:n,pmValue:r,totalValue:s};a>=0?this.history[a]=l:this.history.push(l),this.history.sort((g,v)=>g.date.localeCompare(v.date)),this.history.length>Uee&&(this.history=this.history.slice(-Uee));const c=this.get15MinTimeKey(),d=o-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(g=>g.timestamp>d);const h=this.intradayHistory.findIndex(g=>g.timeKey===c&&o-g.timestamp<900*1e3),m={timestamp:o,timeKey:c,solValue:e,hlValue:n,pmValue:r,totalValue:s};h>=0?this.intradayHistory[h]=m:this.intradayHistory.push(m),this.intradayHistory.length>Fee&&(this.intradayHistory=this.intradayHistory.slice(-Fee)),this.saveToStorage(),this.notify(),console.log(`[BalanceHistory]  Snapshot saved: SOL=$${e.toFixed(2)}, HL=$${n.toFixed(2)}, PM=$${r.toFixed(2)} [${c}]`)}getHistoryForChart(e=30){return e===1?this.intradayHistory.map(r=>({date:r.timeKey,value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue})):this.history.slice(-e).map(r=>({date:new Date(r.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue}))}hasHistory(){return this.history.length>0||this.intradayHistory.length>0}getHistoryDays(){return this.history.length}hasIntradayHistory(){return this.intradayHistory.length>0}clearHistory(){this.history=[],this.intradayHistory=[],this.saveToStorage(),this.notify()}}const wl=new kmt,Nmt=(t,e)=>{const[n,r]=S.useState(!0),[i,s]=S.useState({publicKey:null,encryptedPrivateKey:null,solBalance:0,tokens:bh,assets:[],isUnlocked:!1,ownerPublicKey:null,hlPublicKey:null,hlEncryptedPrivateKey:null,hlBalance:0,hlOwnerPublicKey:null,hlPositions:[],pmPublicKey:null,pmEncryptedPrivateKey:null,pmBalance:0,pmOwnerPublicKey:null}),[o,a]=S.useState(""),[l,c]=S.useState(""),[d,h]=S.useState("SOL"),[m,g]=S.useState(null),[v,x]=S.useState(!1),[b,w]=S.useState(""),[T,N]=S.useState(!1),[O,j]=S.useState(""),[_,F]=S.useState(!1),[z,D]=S.useState(""),[$,G]=S.useState(!1),[H,U]=S.useState(""),[A,I]=S.useState(!1),[L,q]=S.useState(!1),[K,te]=S.useState(!1),[Y,V]=S.useState(""),[M,P]=S.useState(""),[W,X]=S.useState(""),[se,ae]=S.useState(""),[Te,oe]=S.useState(""),[ve,ke]=S.useState("");S.useEffect(()=>{const de=Ty.onSecurityBreach(()=>{i.isUnlocked&&(console.warn("[useVault] Security breach detected - locking vault"),s(ge=>({...ge,isUnlocked:!1})),a(""),g(null),Ty.clearSession(),t("Security alert: Vault locked for protection"))});return()=>de()},[i.isUnlocked,t]),S.useEffect(()=>{if(!e){console.log("[useVault] Waiting for userId before loading vault data..."),r(!0),wl.reset(),mt.reset();return}(async()=>{r(!0);try{await wl.reloadFromStorage(),await mt.reloadFromStorage(),await Ae.migrateFromLocalStorage(),console.log("[useVault] Loading vault data for user:",e.substring(0,8)+"...");const ge=await Ae.getItem(Ae.getUserKey("agent_vault_pubkey")),Qe=await Ae.getItem(Ae.getUserKey("agent_vault_enc")),tt=await Ae.getItem(Ae.getUserKey("agent_owner_pubkey")),lt=await Ae.getItem(Ae.getUserKey("agent_hl_vault_pubkey")),Vt=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),wt=await Ae.getItem(Ae.getUserKey("agent_hl_owner_pubkey")),Ot=await Ae.getItem(Ae.getUserKey("agent_pm_vault_pubkey")),fn=await Ae.getItem(Ae.getUserKey("agent_pm_vault_enc")),tn=await Ae.getItem(Ae.getUserKey("agent_pm_owner_pubkey"));console.log("[useVault] Loaded keys:",{solana:ge?ge.substring(0,8)+"...":null,hyperliquid:lt?lt.substring(0,8)+"...":null,polymarket:Ot?Ot.substring(0,8)+"...":null}),ge&&Qe?(s(rn=>({...rn,publicKey:ge,encryptedPrivateKey:Qe,ownerPublicKey:tt,hlPublicKey:lt,hlEncryptedPrivateKey:Vt,hlOwnerPublicKey:wt,pmPublicKey:Ot,pmEncryptedPrivateKey:fn,pmOwnerPublicKey:tn})),Me(ge),lt&&pe(lt),Ot&&ze(Ot)):lt&&Vt?(s(rn=>({...rn,hlPublicKey:lt,hlEncryptedPrivateKey:Vt,hlOwnerPublicKey:wt,pmPublicKey:Ot,pmEncryptedPrivateKey:fn,pmOwnerPublicKey:tn})),pe(lt),Ot&&ze(Ot)):Ot&&fn&&(s(rn=>({...rn,pmPublicKey:Ot,pmEncryptedPrivateKey:fn,pmOwnerPublicKey:tn})),ze(Ot))}catch(ge){console.error("[useVault] Failed to load vault from storage",ge)}finally{r(!1)}})()},[e]);const pe=async de=>{try{const ge=await zt.getUserState(de),Qe=ge.marginSummary,tt=Qe?parseFloat(Qe.accountValue):0,lt=ge.assetPositions||[];s(Vt=>({...Vt,hlBalance:tt,hlPositions:lt}))}catch(ge){console.error("Failed to refresh HL balance",ge)}},ze=async de=>{try{const{ethers:ge}=await ko(async()=>{const{ethers:fn}=await import("./index-YefuMfv6.js");return{ethers:fn}},[]),Qe=new ge.JsonRpcProvider("https://polygon-rpc.com"),tt="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",lt=["function balanceOf(address) view returns (uint256)"],wt=await new ge.Contract(tt,lt,Qe).balanceOf(de),Ot=parseFloat(ge.formatUnits(wt,6));s(fn=>({...fn,pmBalance:Ot}))}catch(ge){console.error("Failed to refresh Polymarket balance",ge)}},Me=async de=>{try{const ge=await Ds.getBalance(de),Qe=await Ds.getWalletAssets(de);s(tt=>({...tt,solBalance:ge,assets:Qe}))}catch(ge){console.error("Failed to refresh balance",ge)}};return{vault:i,setVault:s,password:o,setPassword:a,withdrawAmount:l,setWithdrawAmount:c,withdrawNetwork:d,setWithdrawNetwork:h,showBackupModal:v,setShowBackupModal:x,backupKey:b,setBackupKey:w,showHLBackupModal:T,setShowHLBackupModal:N,hlBackupKey:O,setHLBackupKey:j,isImporting:$,setIsImporting:G,importKey:H,setImportKey:U,refreshBalance:Me,connectOwnerWallet:async()=>{try{const de=await Ds.connectWallet();s(ge=>({...ge,ownerPublicKey:de})),await Ae.setItem(Ae.getUserKey("agent_owner_pubkey"),de),t("Solana Owner Wallet Connected: "+de.slice(0,6)+"...")}catch{t("Failed to connect Solana wallet.")}},disconnectOwnerWallet:async()=>{s(de=>({...de,ownerPublicKey:null})),await Ae.removeItem(Ae.getUserKey("agent_owner_pubkey")),t("Solana Owner Wallet Disconnected")},connectHLOwnerWallet:async()=>{try{const{ethereum:de}=window;if(de){const Qe=(await de.request({method:"eth_requestAccounts"}))[0];s(tt=>({...tt,hlOwnerPublicKey:Qe})),await Ae.setItem(Ae.getUserKey("agent_hl_owner_pubkey"),Qe),t("Hyperliquid Owner Wallet Connected: "+Qe.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectHLOwnerWallet:async()=>{s(de=>({...de,hlOwnerPublicKey:null})),await Ae.removeItem(Ae.getUserKey("agent_hl_owner_pubkey")),t("Hyperliquid Owner Wallet Disconnected")},createVault:async()=>{if(!o){t("Password is required");return}try{const de=Ds.createVaultKeypair(),ge=Array.from(de.secretKey),Qe=await cr.encrypt(JSON.stringify(ge),o),tt=zt.createVaultWallet(),lt=await cr.encrypt(tt.privateKey,o);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),de.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),Qe),await Ae.setItem(Ae.getUserKey("agent_hl_vault_pubkey"),tt.address),await Ae.setItem(Ae.getUserKey("agent_hl_vault_enc"),lt),s(Vt=>({...Vt,isUnlocked:!0,publicKey:de.publicKey.toBase58(),encryptedPrivateKey:Qe,hlPublicKey:tt.address,hlEncryptedPrivateKey:lt})),j(tt.privateKey),w(gT.encode(de.secretKey)),x(!0),t("Vaults created successfully")}catch(de){console.error("Vault creation failed",de),t("Failed to create vault")}},unlockVault:async()=>{if(!o){t("Password is required");return}try{const de=await Ae.getItem(Ae.getUserKey("agent_vault_enc")),ge=await Ae.getItem(Ae.getUserKey("agent_vault_pubkey")),Qe=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),tt=await Ae.getItem(Ae.getUserKey("agent_hl_vault_pubkey"));if((!de||!ge)&&(!Qe||!tt)){t("No vault found. Please create one.");return}let lt=null,Vt=null,wt=null;if(de&&ge)try{const Ot=await cr.decrypt(de,o),fn=Uint8Array.from(JSON.parse(Ot));if(lt=ha.fromSecretKey(fn),lt.publicKey.toBase58()!==ge)throw new Error("Keypair mismatch");g(lt)}catch(Ot){throw console.error("Solana unlock failed",Ot),new Error("Incorrect password for Solana Vault")}if(Qe&&tt)try{const Ot=await cr.decrypt(Qe,o),{ethers:fn}=await ko(async()=>{const{ethers:rn}=await import("./index-YefuMfv6.js");return{ethers:rn}},[]),tn=new fn.Wallet(Ot);tn.address.toLowerCase()!==tt.toLowerCase()?(console.error(`[Vault]  HL Address Mismatch! Stored: ${tt}, Derived: ${tn.address}`),Vt=tn.address,t("Warning: Stored HL address mismatch. Using derived address.")):Vt=tt,wt=Qe}catch(Ot){throw console.error("Hyperliquid unlock failed",Ot),new Error("Incorrect password for Hyperliquid Vault")}s(Ot=>({...Ot,isUnlocked:!0,publicKey:lt?lt.publicKey.toBase58():null,encryptedPrivateKey:de||null,hlPublicKey:Vt||null,hlEncryptedPrivateKey:wt||null})),Vt&&pe(Vt),lt&&Me(lt.publicKey.toBase58()),await Ty.setSessionHash(o),t("Vault unlocked")}catch(de){console.error("Unlock failed",de),t(de.message||"Incorrect password or corrupted vault")}},requestAirdrop:async()=>{if(i.publicKey)try{t("Requesting 1 SOL Airdrop..."),await Ds.airdrop(i.publicKey),t("Airdrop Successful!"),setTimeout(()=>Me(i.publicKey),2e3)}catch(de){console.error("Airdrop failed",de),t(`Airdrop Failed: ${de.message}`),alert(de.message)}},handleWithdraw:async()=>{if(!i.isUnlocked&&!m){alert("Vault is locked or keypair missing");return}if(!i.isUnlocked||!m){alert("Vault is locked");return}if(!i.ownerPublicKey){alert("Connect Owner Wallet first");return}const de=parseFloat(l);if(isNaN(de)||de<=0){alert("Invalid amount");return}if(de>i.solBalance){alert("Insufficient balance");return}try{t(`Sending ${de} SOL to Owner...`);const ge=await Ds.transferSol(m,i.ownerPublicKey,de);t(`Withdrawal Success! Sig: ${ge.slice(0,8)}...`),c(""),Me(i.publicKey)}catch(ge){console.error(ge),t(`Withdrawal Failed: ${ge.message}`)}},handleWithdrawHL:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.hlOwnerPublicKey){alert("Connect Hyperliquid Owner Wallet first");return}if(!i.hlEncryptedPrivateKey){alert("Hyperliquid vault not found");return}const de=parseFloat(l);if(isNaN(de)||de<=1){alert("Amount must be greater than $1 (withdrawal fee)");return}if(de>(i.hlBalance||0)){alert("Insufficient USDC balance");return}try{const ge=await cr.decrypt(i.hlEncryptedPrivateKey,o),Qe=zt.getWalletFromPrivateKey(ge);t(`Withdrawing ${de} USDC to Hyperliquid Owner...`);const tt=await zt.withdrawUSDC(Qe,i.hlOwnerPublicKey,de);t(`Withdrawal Success! Status: ${tt.status}`),c(""),i.hlPublicKey&&setTimeout(()=>pe(i.hlPublicKey),2e3)}catch(ge){console.error(ge),t(`Withdrawal Failed: ${ge.message}`)}},handleWithdrawPM:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.pmOwnerPublicKey){alert("Connect Polymarket Owner Wallet first");return}if(!i.pmEncryptedPrivateKey){alert("Polymarket vault not found");return}const de=parseFloat(l);if(isNaN(de)||de<=0){alert("Amount must be greater than 0");return}if(de>(i.pmBalance||0)){alert("Insufficient USDC balance");return}try{const ge=await cr.decrypt(i.pmEncryptedPrivateKey,o),{ethers:Qe}=await ko(async()=>{const{ethers:rn}=await import("./index-YefuMfv6.js");return{ethers:rn}},[]),tt=new Qe.JsonRpcProvider("https://polygon-rpc.com"),lt=new Qe.Wallet(ge,tt),Vt="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",wt=["function transfer(address to, uint256 amount) returns (bool)","function balanceOf(address) view returns (uint256)"],Ot=new Qe.Contract(Vt,wt,lt),fn=Qe.parseUnits(de.toString(),6);t(`Withdrawing ${de} USDC to Polymarket Owner...`);const tn=await Ot.transfer(i.pmOwnerPublicKey,fn);await tn.wait(),t(`Withdrawal Success! Tx: ${tn.hash.slice(0,10)}...`),c(""),i.pmPublicKey&&setTimeout(()=>ze(i.pmPublicKey),2e3)}catch(ge){console.error(ge),t(`Withdrawal Failed: ${ge.message}`)}},importVault:async()=>{if(!o||!H){t("Password and Private Key are required");return}try{const de=gT.decode(H),ge=ha.fromSecretKey(de),Qe=Array.from(ge.secretKey),tt=await cr.encrypt(JSON.stringify(Qe),o);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),ge.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),tt),s(lt=>({...lt,isUnlocked:!0,publicKey:ge.publicKey.toBase58(),encryptedPrivateKey:tt})),t("Vault imported successfully"),G(!1),U("")}catch(de){console.error("Vault import failed",de),t("Invalid Private Key or Import Failed")}},resolveTokenMint:de=>{const ge=de.trim(),Qe=bh.find(tt=>tt.symbol.toUpperCase()===ge.toUpperCase());return Qe?Qe.mint:ge},refreshHLBalance:pe,isImportingSolana:A,setIsImportingSolana:I,isImportingHyperliquid:L,setIsImportingHyperliquid:q,solanaPassword:Y,setSolanaPassword:V,hyperliquidPassword:M,setHyperliquidPassword:P,solanaImportKey:se,setSolanaImportKey:ae,hlImportKey:Te,setHLImportKey:oe,createSolanaVault:async()=>{if(!Y){t("Password is required");return}try{const de=Ds.createVaultKeypair(),ge=Array.from(de.secretKey),Qe=await cr.encrypt(JSON.stringify(ge),Y);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),de.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),Qe),s(tt=>({...tt,isUnlocked:!0,publicKey:de.publicKey.toBase58(),encryptedPrivateKey:Qe})),g(de),w(gT.encode(de.secretKey)),x(!0),t("Solana Vault created successfully"),V("")}catch(de){console.error("Solana vault creation failed",de),t("Failed to create Solana vault")}},createHyperliquidVault:async()=>{if(!M){t("Password is required");return}try{const de=zt.createVaultWallet(),ge=await cr.encrypt(de.privateKey,M);await Ae.setItem(Ae.getUserKey("agent_hl_vault_pubkey"),de.address),await Ae.setItem(Ae.getUserKey("agent_hl_vault_enc"),ge),s(Qe=>({...Qe,hlPublicKey:de.address,hlEncryptedPrivateKey:ge})),j(de.privateKey),N(!0),t("Hyperliquid Vault created successfully"),P(""),pe(de.address)}catch(de){console.error("Hyperliquid vault creation failed",de),t("Failed to create Hyperliquid vault")}},importSolanaVault:async()=>{if(!Y||!se){t("Password and Private Key are required");return}try{const de=gT.decode(se),ge=ha.fromSecretKey(de),Qe=Array.from(ge.secretKey),tt=await cr.encrypt(JSON.stringify(Qe),Y);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),ge.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),tt),s(lt=>({...lt,isUnlocked:!0,publicKey:ge.publicKey.toBase58(),encryptedPrivateKey:tt})),g(ge),t("Solana Vault imported successfully"),I(!1),ae(""),V(""),Me(ge.publicKey.toBase58())}catch(de){console.error("Solana vault import failed",de),t("Invalid Private Key or Import Failed")}},importHyperliquidVault:async()=>{if(!M||!Te){t("Password and Private Key are required");return}try{let de=Te.trim();de.startsWith("0x")||(de="0x"+de);const{ethers:ge}=await ko(async()=>{const{ethers:lt}=await import("./index-YefuMfv6.js");return{ethers:lt}},[]),Qe=new ge.Wallet(de),tt=await cr.encrypt(de,M);await Ae.setItem(Ae.getUserKey("agent_hl_vault_pubkey"),Qe.address),await Ae.setItem(Ae.getUserKey("agent_hl_vault_enc"),tt),s(lt=>({...lt,hlPublicKey:Qe.address,hlEncryptedPrivateKey:tt})),t("Hyperliquid Vault imported successfully"),q(!1),oe(""),P(""),pe(Qe.address)}catch(de){console.error("Hyperliquid vault import failed",de),t("Invalid Private Key or Import Failed")}},isImportingPolymarket:K,setIsImportingPolymarket:te,polymarketPassword:W,setPolymarketPassword:X,pmImportKey:ve,setPMImportKey:ke,createPolymarketVault:async()=>{if(!W){t("Password is required");return}try{const{ethers:de}=await ko(async()=>{const{ethers:tt}=await import("./index-YefuMfv6.js");return{ethers:tt}},[]),ge=de.Wallet.createRandom(),Qe=await cr.encrypt(ge.privateKey,W);await Ae.setItem(Ae.getUserKey("agent_pm_vault_pubkey"),ge.address),await Ae.setItem(Ae.getUserKey("agent_pm_vault_enc"),Qe),s(tt=>({...tt,pmPublicKey:ge.address,pmEncryptedPrivateKey:Qe})),D(ge.privateKey),F(!0),t("Polymarket Vault created successfully"),X(""),ze(ge.address)}catch(de){console.error("Polymarket vault creation failed",de),t("Failed to create Polymarket vault")}},importPolymarketVault:async()=>{if(!W||!ve){t("Password and Private Key are required");return}try{let de=ve.trim();de.startsWith("0x")||(de="0x"+de);const{ethers:ge}=await ko(async()=>{const{ethers:lt}=await import("./index-YefuMfv6.js");return{ethers:lt}},[]),Qe=new ge.Wallet(de),tt=await cr.encrypt(de,W);await Ae.setItem(Ae.getUserKey("agent_pm_vault_pubkey"),Qe.address),await Ae.setItem(Ae.getUserKey("agent_pm_vault_enc"),tt),s(lt=>({...lt,pmPublicKey:Qe.address,pmEncryptedPrivateKey:tt})),t("Polymarket Vault imported successfully"),te(!1),ke(""),X(""),ze(Qe.address)}catch(de){console.error("Polymarket vault import failed",de),t("Invalid Private Key or Import Failed")}},connectPMOwnerWallet:async()=>{try{const{ethereum:de}=window;if(de){const Qe=(await de.request({method:"eth_requestAccounts"}))[0];s(tt=>({...tt,pmOwnerPublicKey:Qe})),await Ae.setItem(Ae.getUserKey("agent_pm_owner_pubkey"),Qe),t("Polymarket Owner Wallet Connected: "+Qe.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectPMOwnerWallet:async()=>{s(de=>({...de,pmOwnerPublicKey:null})),await Ae.removeItem(Ae.getUserKey("agent_pm_owner_pubkey")),t("Polymarket Owner Wallet Disconnected")},refreshPMBalance:ze,showPMBackupModal:_,setShowPMBackupModal:F,pmBackupKey:z,setPMBackupKey:D,deleteAccount:async()=>{try{await Ae.clear(),window.location.reload()}catch(de){console.error(de)}}}},Pu=["#E7FE55","#D4EB4C","#C1D843","#AEC53A","#9BB231","#889F28","#758C1F","#627916","#4F660D","#3C5304"];Array.from({length:30},(t,e)=>({date:new Date(Date.now()-(29-e)*24*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:100+Math.random()*50+e*2}));const Cmt=t=>{const[e,n]=S.useState([]),[r,i]=S.useState([]),[s,o]=S.useState({}),a=S.useSyncExternalStore(ft.subscribe.bind(ft),ft.getSnapshot.bind(ft));S.useEffect(()=>{const d=async()=>{const h={};try{const m=await Co.getMarketPrice("SOLUSDT");h.SOL=m.price}catch(m){console.error("Failed to fetch SOL price",m)}for(const m of t.assets||[])if(!(!m.symbol||m.symbol==="UNKNOWN"))try{const g=m.symbol.toUpperCase();if(h[g])continue;const v=await Co.getMarketPrice(`${g}USDT`);h[g]=v.price}catch(g){console.warn(`Failed to fetch price for ${m.symbol}`,g)}h.USDC=1,o(m=>({...m,...h}))};if(t.isUnlocked){d();const h=setInterval(d,6e4);return()=>clearInterval(h)}},[t.isUnlocked,t.assets]);const l=S.useSyncExternalStore(wl.subscribe.bind(wl),wl.getSnapshot.bind(wl));S.useEffect(()=>{if(!t.isUnlocked)return;const d=s.SOL||0,h=t.solBalance*d,m=t.hlBalance||0,g=(a.portfolioValue||0)+(a.currentExposure||0);(h>0||m>0||g>0)&&wl.recordSnapshot(h,m,g)},[t.isUnlocked,t.solBalance,s,t.hlBalance,a.portfolioValue,a.currentExposure]),S.useEffect(()=>{if(!t.isUnlocked)return;const d=()=>{const g=s.SOL||0,v=t.solBalance*g,x=t.hlBalance||0,b=(a.portfolioValue||0)+(a.currentExposure||0);(v>0||x>0||b>0)&&(wl.recordSnapshot(v,x,b),console.log("[useMarketData]  Periodic 15-min snapshot recorded"))};d();const h=900*1e3,m=setInterval(d,h);return()=>clearInterval(m)},[t.isUnlocked]),S.useEffect(()=>{if(wl.hasHistory()){const d=wl.getHistoryForChart(1);n(d);const h=wl.getHistoryForChart(365);i(h)}},[l]);const c=S.useMemo(()=>{const d=[];let h=0,m=0;const g=s.SOL||0,v=t.solBalance*g;t.solBalance>0&&(d.push({name:"Solana",symbol:"SOL",value:v,amount:t.solBalance,price:g,color:Pu[0],hasPrice:g>0,network:"solana"}),g>0?h+=v:m++);const x=t.hlBalance||0;x>0&&(d.push({name:"USDC (Hyperliquid)",symbol:"USDC",value:x,amount:x,price:1,color:Pu[1],hasPrice:!0,network:"hyperliquid"}),h+=x),t.hlPositions&&t.hlPositions.length>0&&t.hlPositions.forEach((w,T)=>{const N=w.position,O=parseFloat(N.szi),j=parseFloat(N.entryPx),_=parseFloat(N.unrealizedPnl),F=Math.abs(O*j)+_;F>0&&(d.push({name:`${N.coin} ${O>=0?"Long":"Short"}`,symbol:N.coin,value:F,amount:Math.abs(O),price:j,color:Pu[(T+2)%Pu.length],hasPrice:!0,network:"hyperliquid",pnl:_}),h+=F)});const b=a.portfolioValue||0;return b>0&&(d.push({name:"USDC (Polymarket)",symbol:"USDC",value:b,amount:b,price:1,color:Pu[2],hasPrice:!0,network:"polymarket"}),h+=b),a.activePositions&&a.activePositions.length>0&&a.activePositions.forEach((w,T)=>{w.currentValue>0&&(d.push({name:`${w.question}`,symbol:w.outcome,value:w.currentValue,amount:w.shares,price:w.currentPrice,color:Pu[(T+4)%Pu.length],hasPrice:!0,network:"polymarket",pnl:w.unrealizedPnl}),h+=w.currentValue)}),(t.assets||[]).forEach((w,T)=>{var O;if(w.isNft||((O=w.symbol)==null?void 0:O.toUpperCase())==="SOL")return;const N=parseFloat(w.amount)/Math.pow(10,w.decimals);if(N>0){const j=s[w.symbol]||0,_=N*j;d.push({name:w.name||w.symbol,symbol:w.symbol,value:_,amount:N,price:j,color:Pu[(T+3)%Pu.length],hasPrice:j>0,network:"solana"}),j>0?h+=_:m++}}),m>0&&d.forEach(w=>{w.hasPrice||(w.value=w.amount*1,w.price=1,h+=w.value)}),{data:d.sort((w,T)=>T.value-w.value),totalValue:h}},[t.solBalance,t.hlBalance,t.hlPositions,t.assets,s,a.portfolioValue,a.currentExposure,a.activePositions]);return{portfolioHistoryDaily:e,portfolioHistoryLongTerm:r,assetPrices:s,assetAllocationData:c}},Pmt=t=>{const[e,n]=S.useState([]),[r,i]=S.useState([]),[s,o]=S.useState(4);S.useEffect(()=>{(async()=>{const c=Ae.getUserKey("agent_activity_log"),d=await Ae.getItem(c);d&&i(JSON.parse(d))})()},[]);const a=(l,c,d)=>{const h={type:l,desc:c,signature:d,timestamp:Date.now(),status:"pending"};i(m=>{const g=[h,...m].slice(0,50);return Ae.setItem(Ae.getUserKey("agent_activity_log"),JSON.stringify(g)),g})};return S.useEffect(()=>{if(!t.isUnlocked)return;const l=async()=>{try{if(zt.isDealerActive()){console.log("[ActivityFeed]   Skipping fetch - dealer is active");return}const d=[];if(t.publicKey){const m=(await Ds.getRecentTransactions(t.publicKey)).map(g=>({type:g.err?"Failed":"Transaction",desc:`Signature: ${g.signature.slice(0,8)}...`,time:g.blockTime?new Date(g.blockTime*1e3).toLocaleTimeString():"Unknown",status:g.err?"failed":"success",signature:g.signature,network:"solana",timestamp:g.blockTime?g.blockTime*1e3:0}));d.push(...m)}if(t.hlPublicKey){const m=(await zt.getUserFillsShared(t.hlPublicKey,20)).map(g=>{const v=g.side==="B"?"Buy":"Sell",x=g.dir||v,b=parseFloat(g.closedPnl||"0"),w=b!==0?` (PnL: ${b>=0?"+":""}$${b.toFixed(2)})`:"";return{type:x,desc:`${g.coin} ${parseFloat(g.sz).toFixed(4)} @ $${parseFloat(g.px).toFixed(2)}${w}`,time:new Date(g.time).toLocaleTimeString(),status:"success",signature:`hl-${g.tid}`,network:"hyperliquid",timestamp:g.time}});d.push(...m)}d.sort((h,m)=>m.timestamp-h.timestamp),n(d)}catch(d){console.error("Failed to fetch history",d)}};l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[t.isUnlocked,t.publicKey,t.hlPublicKey]),{activityFeed:e,localActivityLog:r,activityDisplayCount:s,setActivityDisplayCount:o,addActivityLog:a}},l4="vault-scheduler",_mt=(t,e,n,r,i)=>{const[s,o]=S.useState([]),[a,l]=S.useState(!1);S.useEffect(()=>{(async()=>{const h=Ae.getUserKey("agent_scheduled_tasks"),m=await Ae.getItem(h);m&&o(JSON.parse(m)),l(!0)})()},[]);const c=S.useRef(null);return S.useEffect(()=>{if(!t.isUnlocked){Xa.stop(l4);return}console.log("[Scheduler]  Starting scheduler loop with Web Worker timer (background-safe, checks every 10s)");const d=async()=>{var g,v,x,b,w,T,N,O,j,_,F,z;const h=Date.now(),m=s.filter(D=>D.status==="active");if(m.length===0){console.log("[Scheduler]   No active tasks to check");return}console.log(`[Scheduler]  Checking ${m.length} active task(s)...`);for(const D of m){let $=!1;if(D.executeAt&&D.executeAt<=h)console.log(`[Scheduler]  Time-based task ${String(D.id).slice(0,6)} triggered`),$=!0;else if(D.condition)try{const{symbol:G,indicator:H,operator:U,value:A,timeframe:I}=D.condition;console.log(`[Scheduler]  Checking ${H.toUpperCase()} for ${G} (${I}): target ${U} ${A}`);const L=await Co.getIndicator(G,H,I);let q=0;if(typeof L.value=="number")q=L.value;else if(typeof L.value=="object"&&L.value!==null){const K=H.toLowerCase();K==="macd"?q=L.value.macd||0:K==="stoch"||K==="stochastic"?q=L.value.k||0:"value"in L.value?q=L.value.value:"rsi"in L.value?q=L.value.rsi:console.warn(`[Scheduler] Unknown indicator object structure for ${H}:`,L.value)}console.log(`[Scheduler]  Current ${H.toUpperCase()}: ${q.toFixed(2)} | Condition: ${U} ${A}`),U===">"&&q>A&&($=!0),U==="<"&&q<A&&($=!0),U===">="&&q>=A&&($=!0),U==="<="&&q<=A&&($=!0),U==="=="&&q==A&&($=!0),console.log($?`[Scheduler]  Condition MET! ${q.toFixed(2)} ${U} ${A}`:`[Scheduler]  Condition NOT met: ${q.toFixed(2)} ${U} ${A}`)}catch(G){console.error(`[Scheduler]   Error checking condition for task ${D.id}:`,G)}if($){if(((g=s.find(U=>U.id===D.id))==null?void 0:g.status)==="executing"){console.log(`[Scheduler]   Task ${String(D.id).slice(0,6)} is already executing, skipping...`);continue}const H=(v=s.find(U=>U.id===D.id))==null?void 0:v.lastExecuted;if(H&&Date.now()-H<3e5){console.log(`[Scheduler]  Task ${String(D.id).slice(0,6)} was recently completed (${Math.round((Date.now()-H)/1e3)}s ago), skipping...`);continue}console.log(`[Scheduler]  Executing task ${String(D.id).slice(0,6)} (${D.type})...`),o(U=>U.map(A=>A.id===D.id?{...A,status:"executing"}:A));try{const U=JSON.parse(D.params||"{}");let A="";if(!t.encryptedPrivateKey)throw new Error("Vault encrypted key not available");const I=await cr.decrypt(t.encryptedPrivateKey,e),L=Uint8Array.from(JSON.parse(I)),q=ha.fromSecretKey(L);if(D.type==="SWAP"){console.log(`[Scheduler]  Swapping ${U.amount} ${U.inputToken} -> ${U.outputToken}`);try{A=await Ds.executeSwap(q,U.inputToken,U.outputToken,U.amount,K=>console.log(`[Scheduler] ${K}`)),i("Swap",`Scheduled: Swapped ${U.amount} ${U.inputToken} -> ${U.outputToken}`,A)}catch(K){if((x=K.message)!=null&&x.includes("timeout")||K.isTimeout){console.warn("[Scheduler]   Swap confirmation timeout. Verifying transaction status...");const te=K.signature;if(te)try{const Y=await Ds.connection.getSignatureStatus(te),V=Y==null?void 0:Y.value;if((V==null?void 0:V.confirmationStatus)==="finalized"||(V==null?void 0:V.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),A=te,i("Swap",`Scheduled: Swapped ${U.amount} ${U.inputToken} -> ${U.outputToken}`,te),o(M=>{const P=M.map(W=>W.id===D.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:W);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(D.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(V!=null&&V.err)throw console.error("[Scheduler]  Transaction failed on-chain:",V.err),new Error(`Transaction failed: ${JSON.stringify(V.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const P=M.map(W=>W.id===D.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:W);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(D.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(Y){console.error("[Scheduler]   Failed to verify transaction:",Y)}}throw K}}else if(D.type==="TRANSFER"){if(console.log(`[Scheduler]  Transferring ${U.amount} tokens to Owner`),!t.ownerPublicKey)throw new Error("Owner wallet not connected");try{U.tokenMint==="So11111111111111111111111111111111111111112"?A=await Ds.transferSol(q,t.ownerPublicKey,U.amount):A=await Ds.transferToken(q,U.tokenMint,t.ownerPublicKey,U.amount,U.decimals||9),i("Transfer",`Scheduled: Sent ${U.amount} to Owner`,A)}catch(K){if((b=K.message)!=null&&b.includes("timeout")||K.isTimeout){console.warn("[Scheduler]   Transfer confirmation timeout. Verifying transaction status...");const te=K.signature;if(te)try{const Y=await Ds.connection.getSignatureStatus(te),V=Y==null?void 0:Y.value;if((V==null?void 0:V.confirmationStatus)==="finalized"||(V==null?void 0:V.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),A=te,i("Transfer",`Scheduled: Sent ${U.amount} to Owner`,te),o(M=>{const P=M.map(W=>W.id===D.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:W);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(D.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(V!=null&&V.err)throw console.error("[Scheduler]  Transaction failed on-chain:",V.err),new Error(`Transaction failed: ${JSON.stringify(V.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const P=M.map(W=>W.id===D.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:W);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(D.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(Y){console.error("[Scheduler]   Failed to verify transaction:",Y)}}throw K}}else if(D.type==="ALERT")console.log(`[Scheduler]  Alert triggered for task ${String(D.id).slice(0,6)}`),A="ALERT_TRIGGERED",n(` ALERT: ${(w=D.condition)==null?void 0:w.indicator.toUpperCase()} ${(T=D.condition)==null?void 0:T.operator} ${(N=D.condition)==null?void 0:N.value}`);else if(D.type==="HL_ORDER"){if(console.log(`[Scheduler]  Executing Hyperliquid Order: ${U.side} ${U.size} ${U.coin}`),!t.hlEncryptedPrivateKey)throw new Error("Hyperliquid Vault not available");const K=await cr.decrypt(t.hlEncryptedPrivateKey,e),te=zt.getWalletFromPrivateKey(K);U.leverage&&U.leverage!==1&&await Un.updateLeverage(te,U.coin,U.leverage,!1);const Y=U.isBuy!==void 0?U.isBuy:U.side==="B";let V=U.size;if(V==null&&U.usdcAmount){console.log(`[Scheduler]  Calculating size for ${U.usdcAmount} USDC of ${U.coin}...`);try{let ae=U.price;if(!ae){const ke=await zt.getMarketData(U.coin),pe=parseFloat(ke.levels[1][0].px),ze=parseFloat(ke.levels[0][0].px);ae=Y?pe:ze,console.log(`[Scheduler]   Current Price for ${U.coin}: ${ae}`)}if(!ae||ae===0)throw new Error("Could not determine price for size calculation");const Te=await zt.getAssetDecimals(U.coin),oe=U.usdcAmount/ae,ve=Math.pow(10,Te);V=Math.floor(oe*ve)/ve,console.log(`[Scheduler]  Calculated Size: ${V} ${U.coin} (Decimals: ${Te})`)}catch(ae){throw console.error("[Scheduler]  Error calculating size:",ae),new Error(`Failed to calculate order size: ${ae.message}`)}}if(!V||V<=0)throw new Error(`Invalid order size: ${V}`);let M=U.orderType||"limit",P=U.price;const W=await zt.getAssetDecimals(U.coin),X=Math.max(0,6-W);if(M==="market"){console.log("[Scheduler]  Converting Market Order to Limit IOC with slippage...");const ae=await zt.getMarketData(U.coin),Te=parseFloat(ae.levels[0][0].px),oe=parseFloat(ae.levels[1][0].px),ve=Y?oe:Te,ke=.05;let pe=Y?ve*(1+ke):ve*(1-ke),ze=parseFloat(pe.toFixed(X));ze=parseFloat(ze.toPrecision(5)),P=parseFloat(ze.toFixed(X)),M="ioc",console.log(`[Scheduler]   Market -> IOC: Base ${ve} -> Slippage ${P}`)}else if(P){let ae=parseFloat(P.toFixed(X));ae=parseFloat(ae.toPrecision(5)),P=parseFloat(ae.toFixed(X)),console.log(`[Scheduler]   Limit price rounded: ${U.price} -> ${P} (maxDecimals=${X})`)}const se=await Un.createOrder(te,U.coin,Y,V,P,{orderType:M,reduceOnly:U.reduceOnly||!1,stopLoss:U.stopLoss,takeProfit:U.takeProfit});if(se.status==="ok"){const ae=(_=(j=(O=se.response)==null?void 0:O.data)==null?void 0:j.statuses)==null?void 0:_[0];if(ae!=null&&ae.error)throw new Error(`HL Order Error: ${ae.error}`);A=`HL_ORDER:${((F=ae==null?void 0:ae.filled)==null?void 0:F.oid)||((z=ae==null?void 0:ae.resting)==null?void 0:z.oid)||"placed"}`,i("HL Order",`Placed ${U.side} ${U.size} ${U.coin} @ ${U.price}`,A)}else throw new Error(`HL Order Failed: ${JSON.stringify(se)}`)}o(K=>{const te=K.map(Y=>Y.id===D.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Success: ${A}`}:Y);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(te)),te}),console.log(`[Scheduler]  Task ${String(D.id).slice(0,6)} completed! TX: ${A.slice(0,12)}...`),n(`Task ${String(D.id).slice(0,4)} executed: ${A.slice(0,8)}...`),r(t.publicKey)}catch(U){console.error(`[Scheduler]  Task ${D.id} failed:`,U),o(A=>{const I=A.map(L=>L.id===D.id?{...L,status:"failed",lastExecuted:Date.now(),result:U.message}:L);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(I)),I}),n(`Task ${String(D.id).slice(0,4)} failed: ${U.message}`)}}}};return c.current=d,Xa.start(l4,1e4,()=>{c.current&&c.current()}),d(),()=>{console.log("[Scheduler]  Stopping scheduler loop"),Xa.stop(l4)}},[t.isUnlocked,s]),{scheduledTasks:s,setScheduledTasks:o}};var Imt={};const Rmt="agent_conversation_",Omt="agent_conversations_metadata";class ra{static getConversationKey(e){return Ae.getUserKey(`${Rmt}${e}`)}static getMetadataKey(){return Ae.getUserKey(Omt)}static async saveConversation(e,n){if(!Imt.TEST&&!n)throw new Error("Password required for encryption");try{const r=await cr.encrypt(JSON.stringify(e),n);await Ae.setItem(this.getConversationKey(e.id),r);const i={id:e.id,title:e.title,lastMessage:e.lastMessage,timestamp:e.timestamp};await this.updateMetadata(i)}catch(r){throw console.error("Failed to save conversation:",r),r}}static async updateMetadata(e){const n=await Ae.getItem(this.getMetadataKey());let r=n?JSON.parse(n):[];if(r=r.filter(i=>i.id!==e.id),r.unshift(e),r.length>50){const i=r.pop();i&&await Ae.removeItem(this.getConversationKey(i.id))}await Ae.setItem(this.getMetadataKey(),JSON.stringify(r))}static async getHistory(){const e=this.getMetadataKey();console.log("[ConversationService] Loading history from key:",e);const n=await Ae.getItem(e);if(console.log("[ConversationService] Raw data:",n?`${n.length} characters`:"null"),!n)return[];try{const r=JSON.parse(n);return console.log("[ConversationService] Parsed conversations:",Array.isArray(r)?r.length:"not array"),Array.isArray(r)?r:[]}catch(r){return console.error("Failed to parse conversation history:",r),[]}}static async loadConversation(e,n){const r=await Ae.getItem(this.getConversationKey(e));if(!r)return null;try{const i=await cr.decrypt(r,n);return JSON.parse(i)}catch(i){throw console.error(`Failed to load conversation ${e}:`,i),new Error("Failed to decrypt conversation. Wrong password?")}}static async deleteConversation(e){await Ae.removeItem(this.getConversationKey(e));const n=await Ae.getItem(this.getMetadataKey());if(n){let r=JSON.parse(n);r=r.filter(i=>i.id!==e),await Ae.setItem(this.getMetadataKey(),JSON.stringify(r))}}static generateTitle(e){return e?e.length>30?e.substring(0,30)+"...":e:"New Conversation"}}class Mmt{constructor(){this.connection=new j7(OB,"confirmed"),this.apiBaseUrl=KKe}async getAllPools(e=100){try{const n=await fetch(`${this.apiBaseUrl}/pair/all_by_groups`);if(!n.ok)throw new Error(`Meteora API error: ${n.status}`);const r=await n.json();let i=[];return r.groups&&Array.isArray(r.groups)?r.groups.forEach(s=>{s.pairs&&Array.isArray(s.pairs)&&i.push(...s.pairs)}):Array.isArray(r)?i=r:r.pairs&&(i=r.pairs),i.sort((s,o)=>{const a=parseFloat(s.liquidity)||0;return(parseFloat(o.liquidity)||0)-a}),i.slice(0,e).map(s=>this.mapApiPoolToLiquidityPool(s))}catch(n){throw console.error("[MeteoraService] Error fetching pools:",n),n}}async getPool(e){try{const n=await fetch(`${this.apiBaseUrl}/pair/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return this.mapApiPoolToLiquidityPool(r)}catch(n){return console.error("[MeteoraService] Error fetching pool:",n),null}}async queryPools(e){try{let n=await this.getAllPools(500);if(e.tokenMint){const r=e.tokenMint.toLowerCase();n=n.filter(i=>i.tokenA.mint.toLowerCase()===r||i.tokenB.mint.toLowerCase()===r)}if(e.tokenPair){const{tokenA:r,tokenB:i}=e.tokenPair;n=n.filter(s=>s.tokenA.symbol.toUpperCase()===r.toUpperCase()&&s.tokenB.symbol.toUpperCase()===i.toUpperCase()||s.tokenA.symbol.toUpperCase()===i.toUpperCase()&&s.tokenB.symbol.toUpperCase()===r.toUpperCase())}if(e.minTVL!==void 0&&(n=n.filter(r=>r.tvl>=e.minTVL)),e.maxTVL!==void 0&&(n=n.filter(r=>r.tvl<=e.maxTVL)),e.minVolume!==void 0){const r=e.volumeTimeframe||"24h";n=n.filter(i=>(i.volume[r]||i.volume["24h"]||0)>=e.minVolume)}if(e.minAPY!==void 0&&(n=n.filter(r=>(r.apy||0)>=e.minAPY)),e.sortBy){const r=e.sortOrder==="asc"?1:-1;n.sort((i,s)=>{let o,a;switch(e.sortBy){case"tvl":o=i.tvl,a=s.tvl;break;case"volume":const l=e.volumeTimeframe||"24h";o=i.volume[l]||i.volume["24h"]||0,a=s.volume[l]||s.volume["24h"]||0;break;case"apy":o=i.apy||0,a=s.apy||0;break;case"fee":o=i.feeBps,a=s.feeBps;break;default:o=0,a=0}return(a-o)*r})}return e.limit&&(n=n.slice(0,e.limit)),n}catch(n){return console.error("[MeteoraService] Error querying pools:",n),[]}}async getPoolVolume(e,n){try{const r=this.timeframeToDays(n),i=await fetch(`${this.apiBaseUrl}/pair/${e}/analytic/pair_trade_volume?days=${r}`);if(!i.ok)return 0;const s=await i.json();return Array.isArray(s)&&s.length>0?s.reduce((o,a)=>o+(a.volume||0),0):0}catch(r){return console.error("[MeteoraService] Error fetching pool volume:",r),0}}async getPoolAPY(e){const n=await this.getPool(e);return(n==null?void 0:n.apy)||0}async getPoolTVLHistory(e,n=7){try{const r=await fetch(`${this.apiBaseUrl}/pair/${e}/analytic/pair_tvl?days=${n}`);if(!r.ok)return[];const i=await r.json();return Array.isArray(i)?i.map(s=>({timestamp:new Date(s.date||s.timestamp).getTime(),value:s.tvl||s.value||0})):[]}catch(r){return console.error("[MeteoraService] Error fetching TVL history:",r),[]}}async getPositions(e){try{const n=await fetch(`${this.apiBaseUrl}/wallet/${e}/positions`);if(!n.ok){if(n.status===404)return[];throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return(Array.isArray(r)?r:r.positions||[]).map(s=>this.mapApiPositionToLiquidityPosition(s))}catch(n){return console.error("[MeteoraService] Error fetching positions:",n),[]}}async getPosition(e){try{const n=await fetch(`${this.apiBaseUrl}/position/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return this.mapApiPositionToLiquidityPosition(r)}catch(n){return console.error("[MeteoraService] Error fetching position:",n),null}}async getUnclaimedFees(e){try{const n=await fetch(`${this.apiBaseUrl}/position/${e}/claim_fees`);if(!n.ok)return{tokenA:0,tokenB:0,totalUSD:0};const r=await n.json();return{tokenA:r.feeX||r.tokenA||0,tokenB:r.feeY||r.tokenB||0,totalUSD:r.totalUSD||0}}catch(n){return console.error("[MeteoraService] Error fetching unclaimed fees:",n),{tokenA:0,tokenB:0,totalUSD:0}}}async addLiquidity(e,n){try{console.log("[MeteoraService] Adding liquidity:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await r.create(this.connection,new gt(n.poolAddress)),s=await i.getActiveBin(),o=i.lbPair.binStep;let a,l;n.priceMin&&n.priceMax?(a=i.getBinIdFromPrice(n.priceMin,!0),l=i.getBinIdFromPrice(n.priceMax,!1)):(a=s.binId-5,l=s.binId+5);const c=await i.addLiquidityByStrategy({positionPubKey:e.publicKey,user:e.publicKey,totalXAmount:BigInt(n.amountA*Math.pow(10,9)),totalYAmount:BigInt(n.amountB*Math.pow(10,9)),strategy:{minBinId:a,maxBinId:l,strategyType:"Spot"},slippage:n.slippageBps?n.slippageBps/1e4:.005}),d=await this.connection.sendTransaction(c,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(d,"confirmed"),{success:!0,txSignature:d,positionAddress:e.publicKey.toString(),tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[MeteoraService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async removeLiquidity(e,n){try{console.log("[MeteoraService] Removing liquidity:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n.positionAddress);if(!i)return{success:!1,error:"Position not found"};const s=await r.create(this.connection,new gt(i.poolAddress)),o=Math.floor(n.percentage/100*1e4),a=await s.removeLiquidity({user:e.publicKey,position:new gt(n.positionAddress),binLiquidityRemoval:o,shouldClaimAndClose:n.percentage>=100}),l=await this.connection.sendTransaction(a,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(l,"confirmed"),{success:!0,txSignature:l,tokensReceived:{tokenA:i.tokenAAmount*(n.percentage/100),tokenB:i.tokenBAmount*(n.percentage/100)}}}catch(r){return console.error("[MeteoraService] Error removing liquidity:",r),{success:!1,error:r.message||"Failed to remove liquidity"}}}async claimFees(e,n){try{console.log("[MeteoraService] Claiming fees:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n);if(!i)return{success:!1,error:"Position not found"};const o=await(await r.create(this.connection,new gt(i.poolAddress))).claimSwapFee({owner:e.publicKey,position:new gt(n)}),a=await this.connection.sendTransaction(o,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a,feesClaimed:{tokenA:i.unclaimedFees.tokenA,tokenB:i.unclaimedFees.tokenB,totalUSD:i.unclaimedFees.totalUSD}}}catch(r){return console.error("[MeteoraService] Error claiming fees:",r),{success:!1,error:r.message||"Failed to claim fees"}}}async claimRewards(e,n){try{console.log("[MeteoraService] Claiming rewards:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n);if(!i)return{success:!1,error:"Position not found"};const o=await(await r.create(this.connection,new gt(i.poolAddress))).claimLMReward({owner:e.publicKey,position:new gt(n)}),a=await this.connection.sendTransaction(o,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a}}catch(r){return console.error("[MeteoraService] Error claiming rewards:",r),{success:!1,error:r.message||"Failed to claim rewards"}}}async loadDLMMSDK(){try{const n=await import("@meteora-ag/dlmm");return n.DLMM||n.default}catch{return console.warn("[MeteoraService] DLMM SDK not available - operations will return gracefully"),null}}mapApiPoolToLiquidityPool(e){const n=parseFloat(e.liquidity)||e.tvl||0,r=e.trade_volume_24h||e.volume24h||e.volume||0,i=e.trade_volume_7d||e.volume7d||0;return n>1e4&&console.log("[MeteoraService] Pool with TVL:",e.name,"TVL:",n,"Vol24h:",r),{address:e.address||e.pair_address||e.pubkey,protocol:"meteora_dlmm",name:e.name||`${e.mint_x_symbol||"Token"}-${e.mint_y_symbol||"Token"}`,tokenA:{mint:e.mint_x||e.tokenAMint||"",symbol:e.mint_x_symbol||e.tokenASymbol||"Unknown",decimals:e.mint_x_decimals||e.tokenADecimals||9},tokenB:{mint:e.mint_y||e.tokenBMint||"",symbol:e.mint_y_symbol||e.tokenBSymbol||"Unknown",decimals:e.mint_y_decimals||e.tokenBDecimals||9},tvl:n,feeBps:e.base_fee_bps||e.fee_bps||e.feeBps||0,apy:e.apy||e.apr||0,volume:{"24h":r,"7d":i},binStep:e.bin_step||e.binStep,currentPrice:e.current_price||e.price}}mapApiPositionToLiquidityPosition(e){return{positionAddress:e.address||e.position_address||e.pubkey,poolAddress:e.pair_address||e.pool_address||e.pool,protocol:"meteora_dlmm",tokenAAmount:e.token_x_amount||e.tokenA||0,tokenBAmount:e.token_y_amount||e.tokenB||0,valueUSD:e.value_usd||e.totalValue||0,unclaimedFees:{tokenA:e.unclaimed_fee_x||0,tokenB:e.unclaimed_fee_y||0,totalUSD:e.unclaimed_fee_usd||0},priceRange:e.lower_bin_id&&e.upper_bin_id?{min:e.lower_bin_price||0,max:e.upper_bin_price||0,current:e.current_price||0,inRange:e.in_range??!0}:void 0,binIds:e.bin_ids||[]}}timeframeToDays(e){switch(e){case"5m":return 1;case"15m":return 1;case"1h":return 1;case"4h":return 1;case"24h":return 1;case"7d":return 7;default:return 1}}}const zi=new Mmt;class Lmt{async getPoolContext(e){const n=await zi.getPool(e);return n?{pool:n,volume24h:n.volume["24h"]||0,volume7d:n.volume["7d"]||0,tvl:n.tvl,apy:n.apy||0,feeBps:n.feeBps,binStep:n.binStep,currentPrice:n.currentPrice,timestamp:Date.now()}:null}async getBatchContext(e,n){const r=await zi.queryPools(n||{limit:50}),i=r.map(c=>({pool:c,volume24h:c.volume["24h"]||0,volume7d:c.volume["7d"]||0,tvl:c.tvl,apy:c.apy||0,feeBps:c.feeBps,binStep:c.binStep,currentPrice:c.currentPrice,timestamp:Date.now()})),s=this.rankPools(r,"volume",10),o=this.rankPools(r,"apy",10);let a=[],l=0;return e&&(a=await zi.getPositions(e),l=a.reduce((c,d)=>c+d.valueUSD,0)),{pools:i,topByVolume:s,topByAPY:o,positions:a,totalValueUSD:l,timestamp:Date.now()}}async getPortfolioContext(e){const n=await zi.getPositions(e),r=n.reduce((s,o)=>s+o.valueUSD,0),i=n.reduce((s,o)=>{var a;return s+(((a=o.unclaimedFees)==null?void 0:a.totalUSD)||0)},0);return{positions:n,totalValueUSD:r,totalUnclaimedFeesUSD:i,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"meteora_dlmm",positionCount:n.length,totalValueUSD:r}]}}async getTopPools(e,n){const r={minTVL:n==null?void 0:n.minTVL,volumeTimeframe:n==null?void 0:n.timeframe,sortBy:e,sortOrder:"desc",limit:(n==null?void 0:n.limit)||10},i=await zi.queryPools(r);return this.rankPools(i,e,(n==null?void 0:n.limit)||10)}async findBestPool(e,n,r="tvl"){const i=await zi.queryPools({tokenPair:{tokenA:e,tokenB:n},sortBy:r,sortOrder:"desc",limit:1});return i.length===0?null:{pool:i[0],rank:1,score:this.getPoolScore(i[0],r),reason:`Best Meteora pool for ${e}/${n} by ${r}`}}buildAnalysisPrompt(e,n){const{pools:r,topByVolume:i,topByAPY:s,positions:o,totalValueUSD:a}=e;let l=`## Meteora DLMM Context

`;return l+=`**User Query:** ${n}

`,o.length>0&&(l+=`### Your Meteora Positions
`,l+=`- Total Positions: ${o.length}
`,l+=`- Total Value: $${a.toLocaleString()}

`,o.slice(0,5).forEach((c,d)=>{l+=`${d+1}. Pool: ${c.poolAddress.slice(0,8)}... | `,l+=`Value: $${c.valueUSD.toLocaleString()} | `,l+=`Unclaimed Fees: $${c.unclaimedFees.totalUSD.toFixed(2)}
`}),l+=`
`),l+=`### Top Pools by Volume (24h)
`,i.slice(0,5).forEach((c,d)=>{l+=`${d+1}. ${c.pool.name} | TVL: $${c.pool.tvl.toLocaleString()} | `,l+=`Vol: $${(c.pool.volume["24h"]||0).toLocaleString()} | `,l+=`APY: ${(c.pool.apy||0).toFixed(2)}%
`}),l+=`
`,l+=`### Top Pools by APY
`,s.slice(0,5).forEach((c,d)=>{l+=`${d+1}. ${c.pool.name} | APY: ${(c.pool.apy||0).toFixed(2)}% | `,l+=`TVL: $${c.pool.tvl.toLocaleString()}
`}),l}rankPools(e,n,r){return[...e].sort((s,o)=>{const a=this.getPoolScore(s,n);return this.getPoolScore(o,n)-a}).slice(0,r).map((s,o)=>({pool:s,rank:o+1,score:this.getPoolScore(s,n),reason:`Ranked #${o+1} by ${n}`}))}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}}const Dmt=new Lmt;class jmt{constructor(){this.connection=new j7(OB,"confirmed"),this.apiBaseUrl="https://api-v3.raydium.io"}async getPoolList(e){var n;try{const r=e==="clmm"?"Concentrated":e==="cpmm"?"Standard":"all",i=await fetch(`${this.apiBaseUrl}/pools/info/list?poolType=${r}&poolSortField=default&sortType=desc&pageSize=50&page=1`);if(!i.ok)throw new Error(`Raydium API error: ${i.status}`);const s=await i.json();return(((n=s.data)==null?void 0:n.data)||s.data||[]).map(a=>this.mapApiPoolToLiquidityPool(a,e))}catch(r){return console.error("[RaydiumService] Error fetching pools:",r),[]}}async getPoolById(e){try{const n=await fetch(`${this.apiBaseUrl}/pools/info/ids?ids=${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json(),i=r.data||r||[];return i.length===0?null:this.mapApiPoolToLiquidityPool(i[0])}catch(n){return console.error("[RaydiumService] Error fetching pool:",n),null}}async fetchPoolByMints(e,n){try{const r=await fetch(`${this.apiBaseUrl}/pools/info/mint?mint1=${e}&mint2=${n}`);if(!r.ok)throw new Error(`Raydium API error: ${r.status}`);const i=await r.json();return(i.data||i||[]).map(o=>this.mapApiPoolToLiquidityPool(o))}catch(r){return console.error("[RaydiumService] Error fetching pools by mints:",r),[]}}async queryPools(e){try{let n=await this.getPoolList("all");if(e.protocol&&e.protocol.length>0&&(n=n.filter(r=>e.protocol.includes(r.protocol))),e.tokenMint){const r=e.tokenMint.toLowerCase();n=n.filter(i=>i.tokenA.mint.toLowerCase()===r||i.tokenB.mint.toLowerCase()===r)}if(e.tokenPair){const{tokenA:r,tokenB:i}=e.tokenPair;n=n.filter(s=>s.tokenA.symbol.toUpperCase()===r.toUpperCase()&&s.tokenB.symbol.toUpperCase()===i.toUpperCase()||s.tokenA.symbol.toUpperCase()===i.toUpperCase()&&s.tokenB.symbol.toUpperCase()===r.toUpperCase())}if(e.minTVL!==void 0&&(n=n.filter(r=>r.tvl>=e.minTVL)),e.maxTVL!==void 0&&(n=n.filter(r=>r.tvl<=e.maxTVL)),e.minVolume!==void 0){const r=e.volumeTimeframe||"24h";n=n.filter(i=>(i.volume[r]||i.volume["24h"]||0)>=e.minVolume)}if(e.minAPY!==void 0&&(n=n.filter(r=>(r.apy||0)>=e.minAPY)),e.sortBy){const r=e.sortOrder==="asc"?1:-1;n.sort((i,s)=>{let o,a;switch(e.sortBy){case"tvl":o=i.tvl,a=s.tvl;break;case"volume":const l=e.volumeTimeframe||"24h";o=i.volume[l]||i.volume["24h"]||0,a=s.volume[l]||s.volume["24h"]||0;break;case"apy":o=i.apy||0,a=s.apy||0;break;case"fee":o=i.feeBps,a=s.feeBps;break;default:o=0,a=0}return(a-o)*r})}return e.limit&&(n=n.slice(0,e.limit)),n}catch(n){return console.error("[RaydiumService] Error querying pools:",n),[]}}async getPoolVolume(e,n){const r=await this.getPoolById(e);return r&&(r.volume[n]||r.volume["24h"])||0}async getPoolAPY(e){const n=await this.getPoolById(e);return(n==null?void 0:n.apy)||0}async getPositions(e){try{const n=await fetch(`${this.apiBaseUrl}/clmm/position/byOwner?owner=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json();return(r.data||r||[]).map(s=>this.mapApiPositionToLiquidityPosition(s))}catch(n){return console.error("[RaydiumService] Error fetching positions:",n),[]}}async getPositionByNft(e){try{const n=await fetch(`${this.apiBaseUrl}/clmm/position/byNft?nft=${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json();return this.mapApiPositionToLiquidityPosition(r.data||r)}catch(n){return console.error("[RaydiumService] Error fetching position:",n),null}}async getSwapQuote(e){var n,r,i,s;try{const o=await fetch(`${this.apiBaseUrl}/compute/swap-base-in?inputMint=${e.inputMint}&outputMint=${e.outputMint}&amount=${e.amount}&slippageBps=${e.slippageBps||50}`);if(!o.ok)throw new Error(`Raydium API error: ${o.status}`);const a=await o.json();return{inputMint:e.inputMint,outputMint:e.outputMint,inputAmount:e.amount,outputAmount:((n=a.data)==null?void 0:n.outputAmount)||a.outputAmount||0,priceImpact:((r=a.data)==null?void 0:r.priceImpact)||a.priceImpact||0,fee:((i=a.data)==null?void 0:i.fee)||a.fee||0,route:((s=a.data)==null?void 0:s.routePlan)||a.route||[]}}catch(o){return console.error("[RaydiumService] Error getting swap quote:",o),null}}async swap(e,n){try{console.log("[RaydiumService] Executing swap:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getSwapQuote(n);if(!s)return{success:!1,error:"Could not get swap quote"};const{txId:o}=await i.trade.swap({inputMint:new gt(n.inputMint),outputMint:new gt(n.outputMint),amount:n.amount,slippage:(n.slippageBps||50)/1e4});return await this.connection.confirmTransaction(o,"confirmed"),{success:!0,txSignature:o,details:{inputAmount:n.amount,outputAmount:s.outputAmount,priceImpact:s.priceImpact}}}catch(r){return console.error("[RaydiumService] Error executing swap:",r),{success:!1,error:r.message||"Failed to execute swap"}}}async addLiquidityCLMM(e,n){try{console.log("[RaydiumService] Adding CLMM liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPoolById(n.poolAddress);if(!s)return{success:!1,error:"Pool not found"};let o,a;if(n.priceMin&&n.priceMax)o=this.priceToTick(n.priceMin,s.tokenA.decimals,s.tokenB.decimals),a=this.priceToTick(n.priceMax,s.tokenA.decimals,s.tokenB.decimals);else{const d=this.priceToTick(s.currentPrice||1,s.tokenA.decimals,s.tokenB.decimals);o=d-1e3,a=d+1e3}const{txId:l,nftMint:c}=await i.clmm.openPositionFromBase({poolId:n.poolAddress,ownerInfo:{useSOLBalance:!0},tickLower:o,tickUpper:a,base:"MintA",baseAmount:BigInt(Math.floor(n.amountA*Math.pow(10,s.tokenA.decimals))),otherAmountMax:BigInt(Math.floor(n.amountB*Math.pow(10,s.tokenB.decimals)))});return await this.connection.confirmTransaction(l,"confirmed"),{success:!0,txSignature:l,positionAddress:c==null?void 0:c.toString(),tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[RaydiumService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async addLiquidityCPMM(e,n){try{console.log("[RaydiumService] Adding CPMM liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPoolById(n.poolAddress);if(!s)return{success:!1,error:"Pool not found"};const{txId:o}=await i.cpmm.addLiquidity({poolId:n.poolAddress,inputAmount:BigInt(Math.floor(n.amountA*Math.pow(10,s.tokenA.decimals))),slippage:(n.slippageBps||50)/1e4});return await this.connection.confirmTransaction(o,"confirmed"),{success:!0,txSignature:o,tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[RaydiumService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async removeLiquidity(e,n){try{console.log("[RaydiumService] Removing liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPositionByNft(n.positionAddress);if(!s)return{success:!1,error:"Position not found"};const o=n.percentage>=100,{txId:a}=await i.clmm.decreaseLiquidity({poolId:s.poolAddress,ownerPosition:new gt(n.positionAddress),liquidity:o?"all":`${n.percentage}%`,amountMinA:"0",amountMinB:"0"});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a,tokensReceived:{tokenA:s.tokenAAmount*(n.percentage/100),tokenB:s.tokenBAmount*(n.percentage/100)}}}catch(r){return console.error("[RaydiumService] Error removing liquidity:",r),{success:!1,error:r.message||"Failed to remove liquidity"}}}async loadRaydiumSDK(){try{const n=await import("@raydium-io/raydium-sdk-v2");return n.Raydium||n.default}catch{return console.warn("[RaydiumService] Raydium SDK not available - operations will return gracefully"),null}}priceToTick(e,n,r){const i=e*Math.pow(10,r-n);return Math.floor(Math.log(i)/Math.log(1.0001))}tickToPrice(e,n,r){return Math.pow(1.0001,e)*Math.pow(10,n-r)}mapApiPoolToLiquidityPool(e,n){var a,l,c,d,h,m,g,v,x,b,w;const r=e.type||n,i=r==="Concentrated"||r==="clmm"?"raydium_clmm":"raydium_cpmm",s=((a=e.day)==null?void 0:a.volume)||e.volume24h||0,o=((l=e.week)==null?void 0:l.volume)||e.volume7d||0;return{address:e.id||e.poolId||e.address,protocol:i,name:e.poolName||`${((c=e.mintA)==null?void 0:c.symbol)||"Token"}-${((d=e.mintB)==null?void 0:d.symbol)||"Token"}`,tokenA:{mint:((h=e.mintA)==null?void 0:h.address)||e.baseMint||"",symbol:((m=e.mintA)==null?void 0:m.symbol)||e.baseSymbol||"Unknown",decimals:((g=e.mintA)==null?void 0:g.decimals)||e.baseDecimals||9},tokenB:{mint:((v=e.mintB)==null?void 0:v.address)||e.quoteMint||"",symbol:((x=e.mintB)==null?void 0:x.symbol)||e.quoteSymbol||"Unknown",decimals:((b=e.mintB)==null?void 0:b.decimals)||e.quoteDecimals||9},tvl:e.tvl||e.liquidity||0,feeBps:e.feeRate?e.feeRate*1e4:e.feeBps||0,apy:((w=e.day)==null?void 0:w.apr)||e.apy||0,volume:{"24h":s,"7d":o},tickSpacing:e.tickSpacing,currentPrice:e.price}}mapApiPositionToLiquidityPosition(e){return{positionAddress:e.nftMint||e.positionId||e.address,poolAddress:e.poolId||e.pool,protocol:"raydium_clmm",tokenAAmount:e.amountA||e.tokenA||0,tokenBAmount:e.amountB||e.tokenB||0,valueUSD:e.positionUsd||e.valueUsd||0,unclaimedFees:{tokenA:e.tokenFeeAmountA||0,tokenB:e.tokenFeeAmountB||0,totalUSD:e.unclaimedFeeUsd||0},priceRange:{min:e.priceLower||0,max:e.priceUpper||0,current:e.currentPrice||0,inRange:e.inRange??!0},tickLower:e.tickLower,tickUpper:e.tickUpper,nftMint:e.nftMint}}}const yi=new jmt;class Bmt{async getPoolContext(e){const n=await yi.getPoolById(e);return n?{pool:n,volume24h:n.volume["24h"]||0,volume7d:n.volume["7d"]||0,tvl:n.tvl,apy:n.apy||0,feeBps:n.feeBps,tickSpacing:n.tickSpacing,currentPrice:n.currentPrice,timestamp:Date.now()}:null}async getBatchContext(e,n){const r=await yi.queryPools(n||{limit:50}),i=r.map(c=>({pool:c,volume24h:c.volume["24h"]||0,volume7d:c.volume["7d"]||0,tvl:c.tvl,apy:c.apy||0,feeBps:c.feeBps,tickSpacing:c.tickSpacing,currentPrice:c.currentPrice,timestamp:Date.now()})),s=this.rankPools(r,"volume",10),o=this.rankPools(r,"apy",10);let a=[],l=0;return e&&(a=await yi.getPositions(e),l=a.reduce((c,d)=>c+d.valueUSD,0)),{pools:i,topByVolume:s,topByAPY:o,positions:a,totalValueUSD:l,timestamp:Date.now()}}async getPortfolioContext(e){const n=await yi.getPositions(e),r=n.reduce((a,l)=>a+l.valueUSD,0),i=n.reduce((a,l)=>{var c;return a+(((c=l.unclaimedFees)==null?void 0:c.totalUSD)||0)},0),s=n.filter(a=>a.protocol==="raydium_clmm"),o=n.filter(a=>a.protocol==="raydium_cpmm");return{positions:n,totalValueUSD:r,totalUnclaimedFeesUSD:i,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"raydium_clmm",positionCount:s.length,totalValueUSD:s.reduce((a,l)=>a+l.valueUSD,0)},{protocol:"raydium_cpmm",positionCount:o.length,totalValueUSD:o.reduce((a,l)=>a+l.valueUSD,0)}]}}async getTopPools(e,n){const r={minTVL:n==null?void 0:n.minTVL,volumeTimeframe:n==null?void 0:n.timeframe,sortBy:e,sortOrder:"desc",limit:(n==null?void 0:n.limit)||10};n!=null&&n.poolType&&(r.protocol=[n.poolType==="clmm"?"raydium_clmm":"raydium_cpmm"]);const i=await yi.queryPools(r);return this.rankPools(i,e,(n==null?void 0:n.limit)||10)}async findBestPool(e,n,r="tvl"){const i=await yi.queryPools({tokenPair:{tokenA:e,tokenB:n},sortBy:r,sortOrder:"desc",limit:1});return i.length===0?null:{pool:i[0],rank:1,score:this.getPoolScore(i[0],r),reason:`Best Raydium pool for ${e}/${n} by ${r}`}}async getSwapQuote(e,n,r,i){return yi.getSwapQuote({inputMint:e,outputMint:n,amount:r,slippageBps:i})}priceToTick(e,n,r){return yi.priceToTick(e,n,r)}tickToPrice(e,n,r){return yi.tickToPrice(e,n,r)}calculateOptimalRange(e,n){const i={conservative:.1,moderate:.25,aggressive:.5}[n],s=e*(1-i),o=e*(1+i);return{priceMin:s,priceMax:o,rangeWidth:i*2*100}}buildAnalysisPrompt(e,n){const{pools:r,topByVolume:i,topByAPY:s,positions:o,totalValueUSD:a}=e;let l=`## Raydium Context

`;return l+=`**User Query:** ${n}

`,o.length>0&&(l+=`### Your Raydium Positions
`,l+=`- Total Positions: ${o.length}
`,l+=`- Total Value: $${a.toLocaleString()}

`,o.slice(0,5).forEach((c,d)=>{l+=`${d+1}. Pool: ${c.poolAddress.slice(0,8)}... | `,l+=`Value: $${c.valueUSD.toLocaleString()} | `,l+=`Unclaimed: $${c.unclaimedFees.totalUSD.toFixed(2)}
`}),l+=`
`),l+=`### Top Pools by Volume (24h)
`,i.slice(0,5).forEach((c,d)=>{l+=`${d+1}. ${c.pool.name} | TVL: $${c.pool.tvl.toLocaleString()} | `,l+=`Vol: $${(c.pool.volume["24h"]||0).toLocaleString()} | `,l+=`APY: ${(c.pool.apy||0).toFixed(2)}%
`}),l+=`
`,l+=`### Top Pools by APY
`,s.slice(0,5).forEach((c,d)=>{l+=`${d+1}. ${c.pool.name} | APY: ${(c.pool.apy||0).toFixed(2)}% | `,l+=`TVL: $${c.pool.tvl.toLocaleString()}
`}),l}rankPools(e,n,r){return[...e].sort((s,o)=>{const a=this.getPoolScore(s,n);return this.getPoolScore(o,n)-a}).slice(0,r).map((s,o)=>({pool:s,rank:o+1,score:this.getPoolScore(s,n),reason:`Ranked #${o+1} by ${n}`}))}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}}const q0e=new Bmt;class Umt{async searchPools(e){const n=us();if(!n)return console.warn("[PoolService] Supabase client not initialized, skipping search."),[];try{let r=n.from("liquidity_pools").select(`
                    id,
                    address,
                    protocol,
                    name,
                    token_a_mint,
                    token_b_mint,
                    liquidity_pool_snapshots (
                        tvl,
                        volume_24h,
                        apy,
                        price,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});e.protocol&&e.protocol.length>0&&(r=r.in("protocol",e.protocol)),e.tokenPair;const{data:i,error:s}=await r;if(s)throw s;return i?i.map(o=>this.mapRowToPool(o)):[]}catch(r){return console.error("[PoolService] Error searching pools:",r),[]}}async getTopPools(e,n=1440,r){const i=us();if(!i)return[];try{if(e==="volume"&&n<1440){const{data:l,error:c}=await i.rpc("get_top_pools_with_delta",{timeframe_minutes:n,rank_limit:50});if(c)console.warn("[PoolService] RPC failed, falling back to standard",c);else{let d=(l||[]).map(h=>({address:h.pool_address,protocol:h.protocol,name:h.pool_name,tokenA:{mint:"",symbol:h.pool_name.split("-")[0]||"?",decimals:9},tokenB:{mint:"",symbol:h.pool_name.split("-")[1]||"?",decimals:9},tvl:h.current_tvl,volume:{"24h":h.delta_volume},apy:h.current_apy}));return r&&(d=this.applyFilters(d,r)),d}}const{data:s,error:o}=await i.from("liquidity_pools").select(`
                    *,
                    liquidity_pool_snapshots (
                        tvl,
                        volume_24h,
                        apy,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});if(o)throw o;let a=(s||[]).map(l=>this.mapRowToPool(l));return r&&(a=this.applyFilters(a,r)),a.sort((l,c)=>e==="tvl"?c.tvl-l.tvl:e==="apy"?c.apy-l.apy:(c.volume["24h"]||0)-(l.volume["24h"]||0)),a.slice(0,50)}catch(s){return console.error("[PoolService] Error getting top pools:",s),[]}}applyFilters(e,n){return e.filter(r=>{if(n.minTVL&&r.tvl<n.minTVL||n.minVolume&&(r.volume["24h"]||0)<n.minVolume||n.minAPY&&(r.apy||0)<n.minAPY||n.protocol&&n.protocol.length>0&&!n.protocol.includes(r.protocol))return!1;if(n.tokenAllowlist&&n.tokenAllowlist.length>0){const i=r.tokenA.symbol.toUpperCase(),s=r.tokenB.symbol.toUpperCase(),o=n.tokenAllowlist.map(a=>a.toUpperCase());if(!o.includes(i)&&!o.includes(s))return!1}if(n.tokenBlocklist&&n.tokenBlocklist.length>0){const i=r.tokenA.symbol.toUpperCase(),s=r.tokenB.symbol.toUpperCase(),o=n.tokenBlocklist.map(a=>a.toUpperCase());if(o.includes(i)||o.includes(s))return!1}return!0})}mapRowToPool(e){var r;const n=((r=e.liquidity_pool_snapshots)==null?void 0:r[0])||{};return{address:e.address,protocol:e.protocol,name:e.name,tokenA:{mint:e.token_a_mint,symbol:e.name.split("-")[0]||"Unknown",decimals:9},tokenB:{mint:e.token_b_mint,symbol:e.name.split("-")[1]||"Unknown",decimals:9},tvl:n.tvl||0,feeBps:0,apy:n.apy||0,volume:{"24h":n.volume_24h||0,"7d":0},currentPrice:n.current_price||n.price||0}}}const $ee=new Umt;class Fmt{async discoverPools(e){return await $ee.searchPools(e||{})}async searchPools(e,n,r){const i={tokenPair:{tokenA:e,tokenB:n},sortBy:"tvl",sortOrder:"desc"};if(r==="meteora")return zi.queryPools(i);if(r==="raydium")return yi.queryPools(i);const[s,o]=await Promise.all([zi.queryPools(i),yi.queryPools(i)]);return[...s,...o].sort((a,l)=>l.tvl-a.tvl)}async getAllPositions(e){const[n,r]=await Promise.all([zi.getPositions(e),yi.getPositions(e)]),i=[...n,...r],s=i.reduce((a,l)=>a+l.valueUSD,0),o=i.reduce((a,l)=>{var c;return a+(((c=l.unclaimedFees)==null?void 0:c.totalUSD)||0)},0);return{meteora:n,raydium:r,totalValueUSD:s,totalUnclaimedFeesUSD:o}}async getPortfolioContext(e){const n=await this.getAllPositions(e);return{positions:[...n.meteora,...n.raydium],totalValueUSD:n.totalValueUSD,totalUnclaimedFeesUSD:n.totalUnclaimedFeesUSD,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"meteora_dlmm",positionCount:n.meteora.length,totalValueUSD:n.meteora.reduce((i,s)=>i+s.valueUSD,0)},{protocol:"raydium_clmm",positionCount:n.raydium.length,totalValueUSD:n.raydium.reduce((i,s)=>i+s.valueUSD,0)}]}}async getTopPools(e,n){const r=this.timeframeToMinutes((n==null?void 0:n.timeframe)||"24h"),i={minTVL:n==null?void 0:n.minTVL,minVolume:n==null?void 0:n.minVolume,minAPY:n==null?void 0:n.minAPY,protocol:n==null?void 0:n.protocol},s=await $ee.getTopPools(e,r,i),o=(n==null?void 0:n.limit)||10;return s.slice(0,o).map((a,l)=>({pool:a,rank:l+1,score:this.getPoolScore(a,e),reason:`#${l+1} by ${e} across all protocols`}))}timeframeToMinutes(e){switch(e){case"5m":return 5;case"15m":return 15;case"1h":return 60;case"4h":return 240;case"24h":return 1440;case"7d":return 10080;default:return 1440}}async compareProtocols(e,n){const[r,i]=await Promise.all([zi.queryPools({tokenPair:{tokenA:e,tokenB:n}}),yi.queryPools({tokenPair:{tokenA:e,tokenB:n}})]),s=[...r,...i];let o=null,a=-1;for(const l of s){const c=l.tvl/1e3+(l.volume["24h"]||0)/100+(l.apy||0);c>a&&(a=c,o=l)}return{tokenPair:`${e}/${n}`,meteora:r,raydium:i,recommendation:o?{protocol:o.protocol,poolAddress:o.address,reason:`Best overall score considering TVL ($${o.tvl.toLocaleString()}), volume ($${(o.volume["24h"]||0).toLocaleString()}), and APY (${(o.apy||0).toFixed(2)}%)`}:{protocol:"meteora_dlmm",poolAddress:"",reason:"No pools found for this token pair"}}}async recommendProtocol(e,n,r="tvl"){const i=await this.compareProtocols(e,n),s=[...i.meteora,...i.raydium];return s.length===0?[{protocol:"meteora_dlmm",poolAddress:"",reason:`No pools found for ${e}/${n}`}]:s.sort((a,l)=>{const c=this.getPoolScore(a,r);return this.getPoolScore(l,r)-c}).slice(0,3).map((a,l)=>({protocol:a.protocol,poolAddress:a.address,reason:`#${l+1} by ${r}: ${this.formatScore(a,r)}`}))}async buildUnifiedContext(e,n){const[r,i]=await Promise.all([Dmt.getBatchContext(e,n),q0e.getBatchContext(e,n)]),s=[...r.pools.map(l=>l.pool),...i.pools.map(l=>l.pool)],o=s.sort((l,c)=>(c.volume["24h"]||0)-(l.volume["24h"]||0)).slice(0,10).map((l,c)=>({pool:l,rank:c+1,score:l.volume["24h"]||0,reason:"Top volume"})),a=s.sort((l,c)=>(c.apy||0)-(l.apy||0)).slice(0,10).map((l,c)=>({pool:l,rank:c+1,score:l.apy||0,reason:"Top APY"}));return{meteora:{pools:r.pools.map(l=>l.pool),topByVolume:r.topByVolume,topByAPY:r.topByAPY},raydium:{pools:i.pools.map(l=>l.pool),topByVolume:i.topByVolume,topByAPY:i.topByAPY},combined:{topByVolume:o,topByAPY:a},positions:{meteora:r.positions,raydium:i.positions,totalValueUSD:r.totalValueUSD+i.totalValueUSD,totalUnclaimedFeesUSD:r.positions.reduce((l,c)=>{var d;return l+(((d=c.unclaimedFees)==null?void 0:d.totalUSD)||0)},0)+i.positions.reduce((l,c)=>{var d;return l+(((d=c.unclaimedFees)==null?void 0:d.totalUSD)||0)},0)},timestamp:Date.now()}}buildAnalysisPrompt(e,n){let r=`## Solana Liquidity Pool Context

`;r+=`**Query:** ${n}

`;const{positions:i}=e;return(i.meteora.length>0||i.raydium.length>0)&&(r+=`### Your LP Portfolio
`,r+=`- Total Value: $${i.totalValueUSD.toLocaleString()}
`,r+=`- Unclaimed Fees: $${i.totalUnclaimedFeesUSD.toFixed(2)}
`,r+=`- Meteora Positions: ${i.meteora.length}
`,r+=`- Raydium Positions: ${i.raydium.length}

`),r+=`### Top Pools by Volume (All Protocols)
`,e.combined.topByVolume.slice(0,5).forEach((s,o)=>{const a=s.pool.protocol.includes("meteora")?"MET":"RAY";r+=`${o+1}. [${a}] ${s.pool.name} | `,r+=`TVL: $${s.pool.tvl.toLocaleString()} | `,r+=`Vol: $${(s.pool.volume["24h"]||0).toLocaleString()}
`}),r+=`
`,r+=`### Top Pools by APY
`,e.combined.topByAPY.slice(0,5).forEach((s,o)=>{const a=s.pool.protocol.includes("meteora")?"MET":"RAY";r+=`${o+1}. [${a}] ${s.pool.name} | `,r+=`APY: ${(s.pool.apy||0).toFixed(2)}% | `,r+=`TVL: $${s.pool.tvl.toLocaleString()}
`}),r}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}formatScore(e,n){switch(n){case"volume":return`$${(e.volume["24h"]||0).toLocaleString()}`;case"apy":return`${(e.apy||0).toFixed(2)}%`;case"tvl":return`$${e.tvl.toLocaleString()}`;default:return""}}}const Mg=new Fmt;class $mt{async calculateVolatility(e,n=7){var r,i;try{const s=await this.getPriceHistory(e,n);if(s.length<2)return{poolAddress:e,currentPrice:((r=s[0])==null?void 0:r.price)||0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:s.length,confidence:"low",error:"Insufficient data for volatility calculation"};const o=[];for(let O=1;O<s.length;O++){const j=s[O-1].price,_=s[O].price;j>0&&_>0&&o.push(Math.log(_/j))}if(o.length===0)return{poolAddress:e,currentPrice:((i=s[s.length-1])==null?void 0:i.price)||0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:s.length,confidence:"low",error:"Could not calculate returns from price data"};const a=o.reduce((O,j)=>O+j,0)/o.length,c=o.map(O=>Math.pow(O-a,2)).reduce((O,j)=>O+j,0)/o.length,m=Math.sqrt(c)*Math.sqrt(288)*100,g=m*Math.sqrt(365),v=s[s.length-1].price,x=this.findPriceAtTime(s,1440),b=this.findPriceAtTime(s,10080),w=x>0?(v-x)/x*100:0,T=b>0?(v-b)/b*100:0;let N;return s.length>=288*3?N="high":s.length>=288?N="medium":N="low",{poolAddress:e,currentPrice:v,volatilityDaily:Math.round(m*100)/100,volatilityAnnualized:Math.round(g*100)/100,priceChange24h:Math.round(w*100)/100,priceChange7d:Math.round(T*100)/100,dataPoints:s.length,confidence:N}}catch(s){return console.error("[VolatilityService] Error calculating volatility:",s),{poolAddress:e,currentPrice:0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:0,confidence:"low",error:s.message}}}suggestOptimalRanges(e,n){const r=n.volatilityDaily/100;return r===0||e===0?this.getDefaultRanges(e):[{strategy:"conservative",...this.calculateRange(e,r,2,7),sigmaMultiple:2,estimatedTimeInRange:"~95% do tempo",description:"Faixa ampla, menor rendimento, menor risco de sair da faixa"},{strategy:"moderate",...this.calculateRange(e,r,1.5,7),sigmaMultiple:1.5,estimatedTimeInRange:"~87% do tempo",description:"Balano entre rendimento e risco"},{strategy:"aggressive",...this.calculateRange(e,r,1,7),sigmaMultiple:1,estimatedTimeInRange:"~68% do tempo",description:"Faixa estreita, maior rendimento, maior risco de sair da faixa"}]}async getVolumeChange24h(e){const n=us();if(!n)return console.warn("[VolatilityService] Supabase client not available"),null;try{const{data:r,error:i}=await n.from("liquidity_pools").select("id").eq("address",e).single();if(i||!r)return console.warn("[VolatilityService] Pool not found for volume:",e),null;const{data:s,error:o}=await n.from("liquidity_pool_snapshots").select("volume_24h, timestamp").eq("pool_id",r.id).order("timestamp",{ascending:!1}).limit(1).single();if(o||!s)return null;const a=new Date;a.setHours(a.getHours()-24);const{data:l,error:c}=await n.from("liquidity_pool_snapshots").select("volume_24h, timestamp").eq("pool_id",r.id).lte("timestamp",a.toISOString()).order("timestamp",{ascending:!1}).limit(1).single(),d=parseFloat(s.volume_24h)||0;if(c||!l)return{current:d,previous:0,changePercent:0};const h=parseFloat(l.volume_24h)||0;let m=0;return h>0?m=(d-h)/h*100:d>0&&(m=100),{current:d,previous:h,changePercent:Math.round(m*100)/100}}catch(r){return console.error("[VolatilityService] Error calculating volume change:",r),null}}async getPriceHistory(e,n=7){const r=us();if(!r)return console.warn("[VolatilityService] Supabase client not available"),[];try{const{data:i,error:s}=await r.from("liquidity_pools").select("id, name").eq("address",e).single();if(s||!i)return console.warn("[VolatilityService] Pool not found:",e),[];const o=new Date;o.setDate(o.getDate()-n);const{data:a,error:l}=await r.from("liquidity_pool_snapshots").select("timestamp, price").eq("pool_id",i.id).gte("timestamp",o.toISOString()).order("timestamp",{ascending:!0});return l?(console.error("[VolatilityService] Error fetching snapshots:",l),[]):(a||[]).map(c=>({timestamp:new Date(c.timestamp),price:parseFloat(c.price)||0})).filter(c=>c.price>0)}catch(i){return console.error("[VolatilityService] Error in getPriceHistory:",i),[]}}async searchPoolsByTokenPair(e,n,r=20){const i=us();if(!i)return console.warn("[VolatilityService] Supabase client not available"),[];try{const{data:s,error:o}=await i.from("liquidity_pools").select(`
                    address,
                    name,
                    protocol,
                    liquidity_pool_snapshots (
                        tvl,
                        timestamp
                    )
                `).or(`name.ilike.%${e}%${n}%,name.ilike.%${n}%${e}%`).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});return o?(console.error("[VolatilityService] Error searching pools:",o),[]):(s||[]).filter(c=>{const d=c.name.toUpperCase(),h=e.toUpperCase(),m=n.toUpperCase(),g=new RegExp(`(^|[^A-Z])${h}([^A-Z]|$)`),v=new RegExp(`(^|[^A-Z])${m}([^A-Z]|$)`);return g.test(d)&&v.test(d)}).map(c=>{var d,h;return{address:c.address,name:c.name,protocol:c.protocol,tvl:((h=(d=c.liquidity_pool_snapshots)==null?void 0:d[0])==null?void 0:h.tvl)||0}}).sort((c,d)=>d.tvl-c.tvl).slice(0,r)}catch(s){return console.error("[VolatilityService] Error in searchPoolsByTokenPair:",s),[]}}async getAllPoolsFromDatabase(e=0,n,r=100){const i=us();if(!i)return console.warn("[VolatilityService] Supabase client not available"),[];try{let s=i.from("liquidity_pools").select(`
                    address,
                    name,
                    protocol,
                    liquidity_pool_snapshots (
                        tvl,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});n&&(s=s.ilike("protocol",`%${n}%`));const{data:o,error:a}=await s.limit(r);return a?(console.error("[VolatilityService] Error fetching pools:",a),[]):(o||[]).map(c=>{var d,h;return{address:c.address,name:c.name,protocol:c.protocol,tvl:((h=(d=c.liquidity_pool_snapshots)==null?void 0:d[0])==null?void 0:h.tvl)||0}}).filter(c=>c.tvl>=e).sort((c,d)=>d.tvl-c.tvl)}catch(s){return console.error("[VolatilityService] Error in getAllPoolsFromDatabase:",s),[]}}async getTopPoolsByVolatility(e=10,n=7,r=0,i){try{const s=await this.getAllPoolsFromDatabase(r,i,50);if(s.length===0)return console.warn("[VolatilityService] No pools found in database"),[];const o=[],a=5;for(let c=0;c<s.length;c+=a){const d=s.slice(c,c+a),h=await Promise.all(d.map(async m=>{const g=await this.calculateVolatility(m.address,n);return g.poolName=m.name,{pool:m,volatility:g}}));o.push(...h)}const l=o.filter(c=>!c.volatility.error&&c.volatility.volatilityDaily>0);return l.sort((c,d)=>d.volatility.volatilityDaily-c.volatility.volatilityDaily),l.slice(0,e)}catch(s){return console.error("[VolatilityService] Error in getTopPoolsByVolatility:",s),[]}}calculateRange(e,n,r,i){const s=n*Math.sqrt(i),o=r*s,a=e*(1-o),l=e*(1+o),c=o*2*100;return{priceMin:Math.round(a*1e4)/1e4,priceMax:Math.round(l*1e4)/1e4,widthPercent:Math.round(c*10)/10}}findPriceAtTime(e,n){const r=new Date;r.setMinutes(r.getMinutes()-n);let i=e[0],s=Math.abs(e[0].timestamp.getTime()-r.getTime());for(const o of e){const a=Math.abs(o.timestamp.getTime()-r.getTime());a<s&&(s=a,i=o)}return s<1800*1e3?i.price:0}getDefaultRanges(e){return[{strategy:"conservative",...this.calculateRange(e,.04,2,7),sigmaMultiple:2,estimatedTimeInRange:"~95% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"},{strategy:"moderate",...this.calculateRange(e,.04,1.5,7),sigmaMultiple:1.5,estimatedTimeInRange:"~87% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"},{strategy:"aggressive",...this.calculateRange(e,.04,1,7),sigmaMultiple:1,estimatedTimeInRange:"~68% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"}]}}const Bf=new $mt,ky={EXECUTE_LP_OPS:{label:"Execute LP Operations",description:"General LP management",riskLevel:"medium"},OPEN_POSITION:{label:"Open Position",description:"Create new liquidity position",riskLevel:"high"},CLOSE_POSITION:{label:"Close Position",description:"Remove liquidity from position",riskLevel:"high"},REBALANCE_RANGE:{label:"Rebalance Range",description:"Adjust position price range",riskLevel:"high"},CLAIM_FEES:{label:"Claim Fees",description:"Collect earned trading fees",riskLevel:"low"},CLAIM_REWARDS:{label:"Claim Rewards",description:"Collect farming rewards",riskLevel:"low"}},U7={maxRangeWidthPercent:100,minRangeWidthPercent:1,maxCapitalPerPoolPercent:50,maxTotalLPExposurePercent:100,minTVLRequired:0,minVolumeRequired:0,minAPYRequired:0,tokenAllowlist:[],tokenBlocklist:[],protocolAllowlist:[],requireConfirmationFor:["OPEN_POSITION","CLOSE_POSITION","REBALANCE_RANGE"],enabled:!0};class zmt{validateOperation(e,n,r){const i=[],s=[];if(!r.enabled)return{allowed:!0,violations:[],warnings:[]};if(n.rangeWidthPercent!==void 0&&(n.rangeWidthPercent>r.maxRangeWidthPercent&&i.push(`Range width ${n.rangeWidthPercent.toFixed(1)}% exceeds maximum allowed ${r.maxRangeWidthPercent}%`),n.rangeWidthPercent<r.minRangeWidthPercent&&i.push(`Range width ${n.rangeWidthPercent.toFixed(1)}% is below minimum required ${r.minRangeWidthPercent}%`)),n.capitalPercent!==void 0&&n.capitalPercent>r.maxCapitalPerPoolPercent&&i.push(`Capital allocation ${n.capitalPercent.toFixed(1)}% exceeds maximum ${r.maxCapitalPerPoolPercent}% per pool`),n.tvl!==void 0&&n.tvl<r.minTVLRequired&&i.push(`Pool TVL $${n.tvl.toLocaleString()} is below minimum required $${r.minTVLRequired.toLocaleString()}`),n.volume24h!==void 0&&n.volume24h<r.minVolumeRequired&&i.push(`24h volume $${n.volume24h.toLocaleString()} is below minimum required $${r.minVolumeRequired.toLocaleString()}`),n.apy!==void 0&&n.apy<r.minAPYRequired&&s.push(`Pool APY ${n.apy.toFixed(2)}% is below preferred minimum ${r.minAPYRequired}%`),n.tokens&&r.tokenAllowlist.length>0){const o=n.tokens.filter(a=>!r.tokenAllowlist.some(l=>l.toUpperCase()===a.toUpperCase()));o.length>0&&i.push(`Token(s) not in allowlist: ${o.join(", ")}`)}if(n.tokens&&r.tokenBlocklist.length>0){const o=n.tokens.filter(a=>r.tokenBlocklist.some(l=>l.toUpperCase()===a.toUpperCase()));o.length>0&&i.push(`Blocked token(s) detected: ${o.join(", ")}`)}return n.protocol&&r.protocolAllowlist.length>0&&(r.protocolAllowlist.some(a=>n.protocol.toLowerCase().includes(a.toLowerCase()))||i.push(`Protocol "${n.protocol}" is not in the allowed list`)),{allowed:i.length===0,violations:i,warnings:s}}requiresConfirmation(e,n){return n.enabled?n.requireConfirmationFor.includes(e):!1}getRiskLevel(e){var n;return((n=ky[e])==null?void 0:n.riskLevel)||"medium"}generateRangeRationale(e,n,r){const i=[],s={conservative:"Faixa ampla (2)",moderate:"Faixa moderada (1.5)",aggressive:"Faixa estreita (1)"}[e];if(i.push(`${s} selecionada`),n.volatilityDaily>0&&i.push(`devido  volatilidade diria de ${n.volatilityDaily.toFixed(2)}%`),r!=null&&r.volume24h&&r.volume24h>0){const a=r.volume24h>=1e3?`$${(r.volume24h/1e3).toFixed(1)}K`:`$${r.volume24h.toFixed(0)}`;i.push(`volume 24h de ${a}`)}if(r!=null&&r.tvl&&r.tvl>0){const a=r.tvl>=1e6?`$${(r.tvl/1e6).toFixed(2)}M`:r.tvl>=1e3?`$${(r.tvl/1e3).toFixed(1)}K`:`$${r.tvl.toFixed(0)}`;i.push(`TVL de ${a}`)}if(r!=null&&r.apy&&r.apy>0&&i.push(`APY estimado de ${r.apy.toFixed(2)}%`),n.confidence==="low"?i.push("(dados histricos limitados)"):n.confidence==="high"&&i.push("(alta confiana nos dados)"),i.length<=2)return i.join(" ");const o=i.pop();return i.join(", ")+" e "+o}generateOpenPositionRationale(e,n,r,i,s,o){const a=(i-r)/s.currentPrice*100;let l=`Abertura de posio em ${e} com estratgia ${n}. `;return l+=`Range de $${r.toFixed(4)} a $${i.toFixed(4)} (${a.toFixed(1)}% de largura). `,l+=`Capital: $${o.toLocaleString()}. `,s.volatilityDaily>5?l+=` Alta volatilidade (${s.volatilityDaily.toFixed(2)}%/dia) - maior risco de sair do range. `:s.volatilityDaily<2&&(l+=`Baixa volatilidade (${s.volatilityDaily.toFixed(2)}%/dia) - range deve permanecer ativo. `),s.priceChange24h>10?l+=`Preo subiu ${s.priceChange24h.toFixed(2)}% em 24h - considere range assimtrico para cima.`:s.priceChange24h<-10&&(l+=`Preo caiu ${Math.abs(s.priceChange24h).toFixed(2)}% em 24h - considere range assimtrico para baixo.`),l.trim()}generateClosePositionRationale(e,n,r,i){let s=`Fechamento de posio em ${e}. `;return n||(s+="Posio fora do range - no est gerando fees. "),r>0&&(s+=`Fees no coletados: $${r.toFixed(2)} sero resgatados automaticamente. `),i&&(s+=i),s.trim()}generateRebalanceRationale(e,n,r,i,s){let o=`Rebalanceamento de ${e}. `;if(o+=`Range anterior: $${n.min.toFixed(4)} - $${n.max.toFixed(4)}. `,o+=`Novo range: $${r.min.toFixed(4)} - $${r.max.toFixed(4)}. `,o+=`Preo atual: $${i.toFixed(4)}. `,i<n.min){const a=(n.min-i)/n.min*100;o+=`Preo ${a.toFixed(1)}% abaixo do range anterior. `}else if(i>n.max){const a=(i-n.max)/n.max*100;o+=`Preo ${a.toFixed(1)}% acima do range anterior. `}return o+=`Volatilidade: ${s.volatilityDaily.toFixed(2)}%/dia.`,o.trim()}}const qb=new zmt,G0e={policy:U7,autoClaimFees:!1,autoRebalance:!1,rebalanceThresholdPercent:10},zee={isOn:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",activePositions:[],totalValueUSD:0,totalUnclaimedFeesUSD:0,settings:G0e,logs:[],auditLog:[],pendingConfirmation:null};class Vmt{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=zee,this.listeners=new Set}async init(){if(!this.isInitialized)return this.initPromise?this.initPromise:(this.initPromise=(async()=>{try{const e=await Ae.getItem("solana_dealer_settings");if(e){const n=JSON.parse(e);this.state={...zee,settings:{...G0e,...n.settings}}}this.isInitialized=!0,this.notify()}catch(e){console.error("[SolanaDealerStore] Failed to load settings:",e),this.isInitialized=!0}})(),this.initPromise)}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){this.listeners.forEach(e=>e())}getState(){return this.state}getPolicy(){return this.state.settings.policy}getAuditLog(){return this.state.auditLog}getLogs(){return this.state.logs}setStatus(e,n){this.state={...this.state,statusMessage:e,statusDetail:n||this.state.statusDetail},this.notify()}setOn(e){this.state={...this.state,isOn:e},this.notify(),this.addLog("INFO",e?"Solana Dealer activated":"Solana Dealer deactivated")}updatePolicy(e){this.state={...this.state,settings:{...this.state.settings,policy:{...this.state.settings.policy,...e}}},this.notify(),this.saveSettings(),this.addLog("POLICY","Policy updated",e)}resetPolicy(){this.state={...this.state,settings:{...this.state.settings,policy:U7}},this.notify(),this.saveSettings(),this.addLog("POLICY","Policy reset to defaults")}addAuditEntry(e){const n=`audit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={...e,id:n,timestamp:Date.now()};return this.state={...this.state,auditLog:[r,...this.state.auditLog].slice(0,500)},this.notify(),this.saveAuditLog(),n}updateAuditEntry(e,n){this.state={...this.state,auditLog:this.state.auditLog.map(r=>r.id===e?{...r,...n}:r)},this.notify(),this.saveAuditLog()}addLog(e,n,r){const i={id:`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),type:e,message:n,details:r};this.state={...this.state,logs:[i,...this.state.logs].slice(0,200)},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}updatePositions(e){const n=e.reduce((i,s)=>i+s.valueUSD,0),r=e.reduce((i,s)=>i+s.unclaimedFeesUSD,0);this.state={...this.state,activePositions:e,totalValueUSD:n,totalUnclaimedFeesUSD:r},this.notify()}setPendingConfirmation(e){this.state={...this.state,pendingConfirmation:e},this.notify()}clearPendingConfirmation(){this.state={...this.state,pendingConfirmation:null},this.notify()}async saveSettings(){try{await Ae.setItem("solana_dealer_settings",JSON.stringify({settings:this.state.settings}))}catch(e){console.error("[SolanaDealerStore] Failed to save settings:",e)}}async saveAuditLog(){try{await Ae.setItem("solana_dealer_audit",JSON.stringify(this.state.auditLog.slice(0,100)))}catch(e){console.error("[SolanaDealerStore] Failed to save audit log:",e)}}async loadAuditLog(){try{const e=await Ae.getItem("solana_dealer_audit");if(e){const n=JSON.parse(e);this.state={...this.state,auditLog:n},this.notify()}}catch(e){console.error("[SolanaDealerStore] Failed to load audit log:",e)}}getAuditByScope(e,n=10){return this.state.auditLog.filter(r=>r.scope===e).slice(0,n)}getAuditByPool(e,n=10){return this.state.auditLog.filter(r=>r.poolAddress===e).slice(0,n)}getStats(){const e=this.state.auditLog;return{totalOperations:e.length,successfulOperations:e.filter(n=>n.status==="executed").length,failedOperations:e.filter(n=>n.status==="failed").length,policyViolations:e.filter(n=>n.policyViolations&&n.policyViolations.length>0).length}}}const Er=new Vmt;function Hmt(){const[t,e]=Ls.useState(Er.getState());return Ls.useEffect(()=>(Er.init(),Er.subscribe(()=>{e(Er.getState())})),[]),t}function K0e(t,e){var r;if(!e.enabled)return!0;if(e.minTVLRequired>0&&t.tvl<e.minTVLRequired||e.minVolumeRequired>0&&(((r=t.volume)==null?void 0:r["24h"])||0)<e.minVolumeRequired)return!1;let n=[];return t.tokenA&&t.tokenB?n=[t.tokenA.symbol,t.tokenB.symbol]:n=t.name.split(/[-\/]/).map(i=>i.trim().toUpperCase()),!(e.tokenBlocklist.length>0&&e.tokenBlocklist.some(i=>n.some(s=>s.toUpperCase()===i.toUpperCase()))||e.tokenAllowlist.length>0&&!n.every(s=>e.tokenAllowlist.some(o=>o.toUpperCase()===s.toUpperCase()))||e.protocolAllowlist.length>0&&!e.protocolAllowlist.some(i=>t.protocol.toLowerCase().includes(i.toLowerCase())))}function Vee(t,e){return e.enabled?t.filter(n=>K0e(n,e)):t}async function qmt(t,e,n,r){var s,o,a,l,c,d,h,m,g,v;const i=r||(()=>{});if(t==="searchLiquidityPools")try{i("Searching liquidity pools...");const x=Er.getPolicy(),b=x.enabled?Math.max(x.minTVLRequired||0,e.minTVL||0):e.minTVL,w=x.enabled?Math.max(x.minVolumeRequired||0,e.minVolume||0):e.minVolume,T=x.enabled?Math.max(x.minAPYRequired||0,e.minAPY||0):e.minAPY,N={tokenPair:e.tokenA&&e.tokenB?{tokenA:e.tokenA,tokenB:e.tokenB}:void 0,minTVL:b,minVolume:w,volumeTimeframe:e.volumeTimeframe,minAPY:T,sortBy:e.sortBy||"tvl",sortOrder:"desc",limit:e.limit||10};e.protocol&&(e.protocol==="meteora"?N.protocol=["meteora_dlmm","meteora_damm"]:e.protocol==="raydium"&&(N.protocol=["raydium_clmm","raydium_cpmm"]));const O=await Mg.discoverPools(N),j=Vee(O,x);if(j.length===0)return{type:"info",title:"No Pools Found",details:"No pools match your search criteria."+(x.enabled&&O.length>0?`

_${O.length} pools were filtered out by your Policy settings._`:"")};let _=`Found ${j.length} pools:

`;_+=`| Pool | Protocol | TVL | Volume 24h | APY |
|------|----------|-----|------------|-----|
`,j.forEach(z=>{const D=z.protocol.includes("meteora")?"MET":"RAY";_+=`| ${z.name} | ${D} | $${z.tvl.toLocaleString()} | $${(z.volume["24h"]||0).toLocaleString()} | ${(z.apy||0).toFixed(2)}% |
`}),Er.addLog("INFO",`Searched pools: ${j.length} results (${O.length-j.length} filtered by policy)`,{filters:N});const F=j.map(z=>{const D=z.protocol.includes("meteora")?"meteora":"raydium";return{type:"pool",protocol:D,name:z.name,tokenA:{symbol:z.tokenA.symbol,mint:z.tokenA.mint},tokenB:{symbol:z.tokenB.symbol,mint:z.tokenB.mint},volume24h:z.volume["24h"]||0,tvl:z.tvl,apy:z.apy||0,feeBps:z.feeBps,poolAddress:z.address,poolUrl:sD(D,z.address),currentPrice:z.currentPrice}});return{type:"success",semanticType:"analysis",title:"Liquidity Pools",details:_,structuredData:{resultType:"pools",items:F,summary:`Found ${j.length} pools`}}}catch(x){return{type:"error",semanticType:"analysis",title:"Search Error",details:x.message}}if(t==="getPoolDetails")try{i("Fetching pool details...");let x=await zi.getPool(e.poolAddress);return x||(x=await yi.getPoolById(e.poolAddress)),x?{type:"success",title:"Pool Details",details:`
**${x.name}**
- Protocol: ${x.protocol}
- Address: ${x.address}
- TVL: $${x.tvl.toLocaleString()}
- Volume 24h: $${(x.volume["24h"]||0).toLocaleString()}
- APY: ${(x.apy||0).toFixed(2)}%
- Fee: ${x.feeBps} bps (${(x.feeBps/100).toFixed(2)}%)
- Token A: ${x.tokenA.symbol} (${x.tokenA.mint.slice(0,8)}...)
- Token B: ${x.tokenB.symbol} (${x.tokenB.mint.slice(0,8)}...)
            `.trim()}:{type:"error",title:"Pool Not Found",details:`No pool found with address: ${e.poolAddress}`}}catch(x){return{type:"error",title:"Pool Details Error",details:x.message}}if(t==="getTopLiquidityPools")try{i(`Getting top pools by ${e.criteria}...`);const x=Er.getPolicy(),b=x.enabled?Math.max(x.minTVLRequired||0,e.minTVL||0):e.minTVL,w=x.enabled&&x.minVolumeRequired||0,T=x.enabled?Math.max(x.minAPYRequired||0,0):0,N=await Mg.getTopPools(e.criteria,{timeframe:e.volumeTimeframe,minTVL:b,minVolume:w,minAPY:T,protocol:e.protocol?e.protocol==="meteora"?["meteora_dlmm"]:["raydium_clmm","raydium_cpmm"]:void 0,limit:e.limit||10});if(N.length===0)return{type:"info",title:"No Pools",details:"No pools found matching criteria."};const O=N.filter(z=>Vee([z.pool],x).length>0);if(O.length===0)return{type:"info",title:"No Pools",details:`No pools match criteria.

_${N.length} pools were filtered out by your Policy settings._`};const j=[...O].sort((z,D)=>D.score-z.score);let _=`Top ${j.length} pools by ${e.criteria}:

`;j.forEach((z,D)=>{const $=z.pool.protocol.includes("meteora")?"MET":"RAY";let G="";e.criteria==="volume"?G=`Vol: $${(z.pool.volume["24h"]||0).toLocaleString()}`:e.criteria==="apy"?G=`APY: ${(z.pool.apy||0).toFixed(2)}%`:G=`TVL: $${z.pool.tvl.toLocaleString()}`,_+=`${D+1}. [${$}] ${z.pool.name} - ${G}
`});const F=j.map(z=>{const D=z.pool.protocol.includes("meteora")?"meteora":"raydium";return{type:"pool",protocol:D,name:z.pool.name,tokenA:{symbol:z.pool.tokenA.symbol,mint:z.pool.tokenA.mint},tokenB:{symbol:z.pool.tokenB.symbol,mint:z.pool.tokenB.mint},volume24h:z.pool.volume["24h"]||0,tvl:z.pool.tvl,apy:z.pool.apy||0,feeBps:z.pool.feeBps,poolAddress:z.pool.address,poolUrl:sD(D,z.pool.address),currentPrice:z.pool.currentPrice}});return{type:"success",title:`Top Pools by ${e.criteria.toUpperCase()}`,details:_,structuredData:{resultType:"pools",items:F,summary:`Top ${j.length} pools by ${e.criteria}`,title:`Top Pools by ${e.criteria.toUpperCase()}`}}}catch(x){return{type:"error",title:"Ranking Error",details:x.message}}if(t==="compareLiquidityPools")try{if(i("Comparing pools..."),e.tokenPair){const[x,b]=e.tokenPair.split("/").map(N=>N.trim()),w=await Mg.compareProtocols(x,b);let T=`**Comparison for ${e.tokenPair}**

`;return T+=`Meteora Pools: ${w.meteora.length}
`,T+=`Raydium Pools: ${w.raydium.length}

`,w.recommendation.poolAddress&&(T+=`**Recommendation:** ${w.recommendation.protocol}
`,T+=`Reason: ${w.recommendation.reason}`),{type:"success",title:"Pool Comparison",details:T}}return{type:"error",title:"Compare Error",details:'Please provide tokenPair (e.g., "SOL/USDC")'}}catch(x){return{type:"error",title:"Compare Error",details:x.message}}if(t==="getPoolHistory")try{i("Fetching pool history...");const x=await zi.getPoolTVLHistory(e.poolAddress,e.days||7);if(x.length===0)return{type:"info",title:"No History",details:"No historical data available."};let b=`${e.metric.toUpperCase()} History (${e.days||7} days):

`;return x.slice(-5).forEach(w=>{const T=new Date(w.timestamp).toLocaleDateString();b+=`${T}: $${w.value.toLocaleString()}
`}),{type:"success",title:"Pool History",details:b}}catch(x){return{type:"error",title:"History Error",details:x.message}}if(t==="getLPPositions")try{if(i("Fetching LP positions..."),!n)return{type:"error",title:"Wallet Required",details:"Please connect a wallet to view positions."};const x=await Mg.getAllPositions(n),b=[...x.meteora,...x.raydium];if(b.length===0)return{type:"info",title:"No Positions",details:"You have no active LP positions."};let w=`**Your LP Portfolio**
`;return w+=`Total Value: $${x.totalValueUSD.toLocaleString()}
`,w+=`Unclaimed Fees: $${x.totalUnclaimedFeesUSD.toFixed(2)}

`,w+=`Meteora: ${x.meteora.length} positions
`,w+=`Raydium: ${x.raydium.length} positions

`,b.slice(0,5).forEach((T,N)=>{const O=T.protocol.includes("meteora")?"MET":"RAY";w+=`${N+1}. [${O}] Pool: ${T.poolAddress.slice(0,8)}...
`,w+=`   Value: $${T.valueUSD.toLocaleString()} | Fees: $${T.unclaimedFees.totalUSD.toFixed(2)}
`}),{type:"success",title:"LP Positions",details:w}}catch(x){return{type:"error",title:"Positions Error",details:x.message}}if(t==="getLPPositionDetails")try{i("Fetching position details...");let x=await zi.getPosition(e.positionAddress);return x||(x=await yi.getPositionByNft(e.positionAddress)),x?{type:"success",title:"Position Details",details:`
**Position Details**
- Address: ${x.positionAddress}
- Pool: ${x.poolAddress}
- Protocol: ${x.protocol}
- Value: $${x.valueUSD.toLocaleString()}
- Token A: ${x.tokenAAmount}
- Token B: ${x.tokenBAmount}
- Unclaimed Fees: $${x.unclaimedFees.totalUSD.toFixed(2)}
${x.priceRange?`- Price Range: ${x.priceRange.min.toFixed(4)} - ${x.priceRange.max.toFixed(4)}
- In Range: ${x.priceRange.inRange?"":""}`:""}
            `.trim()}:{type:"error",title:"Position Not Found",details:`Position not found: ${e.positionAddress}`}}catch(x){return{type:"error",title:"Position Error",details:x.message}}if(t==="getUnclaimedLPRewards")try{if(i("Checking unclaimed rewards..."),e.positionAddress){const b=await zi.getUnclaimedFees(e.positionAddress);return{type:"success",title:"Unclaimed Fees",details:`Position ${e.positionAddress.slice(0,8)}...
Token A: ${b.tokenA}
Token B: ${b.tokenB}
Total USD: $${b.totalUSD.toFixed(2)}`}}return n?{type:"success",title:"Total Unclaimed Rewards",details:`Total unclaimed fees across all positions: $${(await Mg.getAllPositions(n)).totalUnclaimedFeesUSD.toFixed(2)}`}:{type:"error",title:"Wallet Required",details:"Please connect a wallet."}}catch(x){return{type:"error",title:"Rewards Error",details:x.message}}if(t==="estimateLPPositionPnL")try{return i("Calculating PnL..."),{type:"info",title:"PnL Estimation",details:"PnL calculation requires entry data. Please check your position details for current value and unclaimed fees."}}catch(x){return{type:"error",title:"PnL Error",details:x.message}}if(t==="addLiquidity"){const x=Er.getPolicy();let b=await zi.getPool(e.poolAddress);b||(b=await yi.getPoolById(e.poolAddress));const w=qb.validateOperation("OPEN_POSITION",{poolAddress:e.poolAddress,poolName:b==null?void 0:b.name,tokens:b?[b.tokenA.symbol,b.tokenB.symbol]:void 0,tvl:b==null?void 0:b.tvl,volume24h:b==null?void 0:b.volume["24h"],apy:b==null?void 0:b.apy,protocol:b==null?void 0:b.protocol,rangeWidthPercent:e.priceMin&&e.priceMax&&e.currentPrice?(e.priceMax-e.priceMin)/e.currentPrice*100:void 0},x);if(!w.allowed)return Er.addAuditEntry({scope:"OPEN_POSITION",action:"Add liquidity blocked by policy",poolAddress:e.poolAddress,rationale:"Policy violation detected",params:{amountA:e.amountA,amountB:e.amountB},status:"rejected",policyViolations:w.violations}),{type:"error",semanticType:"decision",title:"Policy Violation",details:` **Operao bloqueada pela Policy Engine**

${w.violations.map(O=>" "+O).join(`
`)}

Ajuste suas polticas em Solana Dealer > Policy para prosseguir.`};const T=qb.requiresConfirmation("OPEN_POSITION",x),N=`Adio de liquidez na pool ${((s=e.poolAddress)==null?void 0:s.slice(0,8))||"unknown"}. Valores: ${e.amountA} token A + ${e.amountB} token B.`;return T?(Er.addAuditEntry({scope:"OPEN_POSITION",action:"Add liquidity - awaiting confirmation",poolAddress:e.poolAddress,rationale:N,params:{amountA:e.amountA,amountB:e.amountB,priceMin:e.priceMin,priceMax:e.priceMax},status:"pending"}),{type:"info",semanticType:"decision",title:"Confirm Add Liquidity",details:`Adicionando liquidez  pool ${((o=e.poolAddress)==null?void 0:o.slice(0,8))||"unknown"}:
- Amount A: ${e.amountA}
- Amount B: ${e.amountB}
${e.priceMin?`- Range: ${e.priceMin} - ${e.priceMax}`:""}`,rationale:N,requiresConfirmation:!0,confirmationData:{scope:"OPEN_POSITION",action:"Add Liquidity",poolAddress:e.poolAddress,params:{amountA:e.amountA,amountB:e.amountB,priceMin:e.priceMin,priceMax:e.priceMax},rationale:N}}):(Er.addLog("OPERATION",`Add liquidity to ${(a=e.poolAddress)==null?void 0:a.slice(0,8)}`,e),{type:"info",semanticType:"execution",title:"Add Liquidity",details:`To add liquidity to pool ${((l=e.poolAddress)==null?void 0:l.slice(0,8))||"unknown"}...:
- Amount A: ${e.amountA}
- Amount B: ${e.amountB}
${e.priceMin?`- Price Range: ${e.priceMin} - ${e.priceMax}`:""}

 SDK integration required. Please use the protocol's web interface for now.`,rationale:N})}if(t==="removeLiquidity"){const x=Er.getPolicy(),b=qb.requiresConfirmation("CLOSE_POSITION",x),w=`Remoo de ${e.percentage}% da posio ${((c=e.positionAddress)==null?void 0:c.slice(0,8))||"unknown"}.`;return Er.addAuditEntry({scope:"CLOSE_POSITION",action:`Remove ${e.percentage}% liquidity`,poolAddress:e.positionAddress,rationale:w,params:{percentage:e.percentage},status:b?"pending":"executed"}),b?{type:"info",semanticType:"decision",title:"Confirm Remove Liquidity",details:`Removendo ${e.percentage}% da posio ${((d=e.positionAddress)==null?void 0:d.slice(0,8))||"unknown"}`,rationale:w,requiresConfirmation:!0,confirmationData:{scope:"CLOSE_POSITION",action:"Remove Liquidity",poolAddress:e.positionAddress,params:{percentage:e.percentage},rationale:w}}:{type:"info",semanticType:"execution",title:"Remove Liquidity",details:`To remove ${e.percentage}% from position ${((h=e.positionAddress)==null?void 0:h.slice(0,8))||"unknown"}...

 SDK integration required. Please use the protocol's web interface for now.`,rationale:w}}if(t==="claimLPFees"||t==="claimLPRewards"){const x=`Claim de fees/rewards da posio ${((m=e.positionAddress)==null?void 0:m.slice(0,8))||"unknown"}.`;return Er.addAuditEntry({scope:"CLAIM_FEES",action:"Claim fees/rewards",poolAddress:e.positionAddress,rationale:x,params:{},status:"executed"}),{type:"info",semanticType:"execution",title:"Claim Fees/Rewards",details:`To claim from position ${((g=e.positionAddress)==null?void 0:g.slice(0,8))||"unknown"}...

 SDK integration required. Please use the protocol's web interface for now.`,rationale:x}}if(t==="rebalanceLPPosition"){const x=Er.getPolicy(),b=qb.requiresConfirmation("REBALANCE_RANGE",x),w=`Rebalanceamento para novo range: ${e.newPriceMin} - ${e.newPriceMax}.`;return Er.addAuditEntry({scope:"REBALANCE_RANGE",action:"Rebalance to new range",poolAddress:e.positionAddress,rationale:w,params:{newPriceMin:e.newPriceMin,newPriceMax:e.newPriceMax},status:b?"pending":"executed"}),b?{type:"info",semanticType:"decision",title:"Confirm Rebalance",details:`Rebalanceando posio para range ${e.newPriceMin} - ${e.newPriceMax}`,rationale:w,requiresConfirmation:!0,confirmationData:{scope:"REBALANCE_RANGE",action:"Rebalance Position",poolAddress:e.positionAddress,params:{newPriceMin:e.newPriceMin,newPriceMax:e.newPriceMax},rationale:w}}:{type:"info",semanticType:"execution",title:"Rebalance Position",details:`To rebalance position to range ${e.newPriceMin} - ${e.newPriceMax}:

 SDK integration required. Please use the protocol's web interface for now.`,rationale:w}}if(t==="simulateAddLiquidity")try{i("Simulating liquidity addition...");const x=await zi.getPool(e.poolAddress)||await yi.getPoolById(e.poolAddress);if(!x)return{type:"error",title:"Pool Not Found",details:"Cannot simulate - pool not found."};const b=(e.amountA||0)*100+(e.amountB||0),w=x.tvl>0?b/(x.tvl+b)*100:100;return{type:"success",title:"Liquidity Simulation",details:`**Simulation Results**
- Pool: ${x.name}
- Adding: ${e.amountA} token A + ${e.amountB} token B
- Estimated Value: ~$${b.toLocaleString()}
- Share of Pool: ~${w.toFixed(4)}%
- Current Pool TVL: $${x.tvl.toLocaleString()}
- Pool APY: ${(x.apy||0).toFixed(2)}%`}}catch(x){return{type:"error",title:"Simulation Error",details:x.message}}if(t==="estimateImpermanentLoss")try{const x=e.priceChangePercent/100,b=Math.abs(x),T=(2*Math.sqrt(1+b)/(2+b)-1)*100;return{type:"success",title:"Impermanent Loss Estimate",details:`**Price Change: ${e.priceChangePercent>0?"+":""}${e.priceChangePercent}%**

Estimated Impermanent Loss: ${Math.abs(T).toFixed(2)}%

Note: This is a simplified calculation. Actual IL depends on:
- Price range (for concentrated liquidity)
- Pool type (constant product vs concentrated)
- Fees earned (which offset IL)`}}catch(x){return{type:"error",title:"IL Calculation Error",details:x.message}}if(t==="calculateOptimalPriceRange")try{const x=await zi.getPool(e.poolAddress)||await yi.getPoolById(e.poolAddress);if(!x||!x.currentPrice)return{type:"error",title:"Range Error",details:"Could not get current price for pool."};const b=q0e.calculateOptimalRange(x.currentPrice,e.riskLevel);return{type:"success",title:"Optimal Price Range",details:`**${e.riskLevel.toUpperCase()} Range**
- Current Price: $${x.currentPrice.toFixed(4)}
- Suggested Min: $${b.priceMin.toFixed(4)}
- Suggested Max: $${b.priceMax.toFixed(4)}
- Range Width: ${(b.rangeWidth/2).toFixed(1)}%

Wider ranges = more fees earned, less impermanent loss
Tighter ranges = higher capital efficiency, more active management needed`}}catch(x){return{type:"error",title:"Range Error",details:x.message}}if(t==="getLPSwapQuote")try{i("Getting swap quote...");const x=await yi.getSwapQuote({inputMint:e.inputToken,outputMint:e.outputToken,amount:e.amount,slippageBps:e.slippageBps||50});return x?{type:"success",title:"Swap Quote",details:`**${e.inputToken}  ${e.outputToken}**
- Input: ${e.amount}
- Output: ${x.outputAmount}
- Price Impact: ${(x.priceImpact*100).toFixed(2)}%
- Fee: ${x.fee}`}:{type:"error",title:"Quote Error",details:"Could not get swap quote."}}catch(x){return{type:"error",title:"Quote Error",details:x.message}}if(t==="getTopVolatilityPools")try{i("Calculating volatility for all pools...");const x=e.limit||10,b=e.days||7,w=e.minTVL||0,T=e.protocol,N=await Bf.getTopPoolsByVolatility(x,b,w,T),O=Er.getPolicy(),j=N.filter(z=>K0e(z.pool,O));if(j.length===0)return{type:"info",title:"No Pools Found",details:`No pools with volatility data found in database.

This could mean:
- No pools have been synced yet
- No historical data available for volatility calculation

Data sync runs every 5 minutes.`+(O.enabled&&N.length>0?`

_${N.length} pools were filtered out by your Policy settings._`:"")};let _=` **Top ${j.length} Pools by Volatility**

`;_+=`| # | Pool | Protocol | Daily Vol | Ann. Vol | Price  24h | TVL |
`,_+=`|---|------|----------|-----------|----------|-------------|-----|
`;const F=[];return j.forEach((z,D)=>{const $=z.pool.protocol.includes("meteora")?"MET":"RAY",G=z.pool.protocol.includes("meteora")?"meteora":"raydium",H=z.pool.tvl>=1e3?`$${(z.pool.tvl/1e3).toFixed(1)}K`:`$${z.pool.tvl.toFixed(0)}`,U=z.volatility.priceChange24h>=0?`+${z.volatility.priceChange24h.toFixed(2)}%`:`${z.volatility.priceChange24h.toFixed(2)}%`;_+=`| ${D+1} | ${z.pool.name.slice(0,15)} | ${$} | ${z.volatility.volatilityDaily.toFixed(2)}% | ${z.volatility.volatilityAnnualized.toFixed(1)}% | ${U} | ${H} |
`,F.push({type:"volatility",poolName:z.pool.name,poolAddress:z.pool.address,protocol:G,currentPrice:z.volatility.currentPrice,volatilityDaily:z.volatility.volatilityDaily,volatilityAnnualized:z.volatility.volatilityAnnualized,priceChange24h:z.volatility.priceChange24h,priceChange7d:z.volatility.priceChange7d,tvl:z.pool.tvl,confidence:z.volatility.confidence,dataPoints:z.volatility.dataPoints})}),_+=`
*Volatility calculated from ${b} days of historical data.*`,w>0&&(_+=`
*Filtered to pools with TVL  $${w.toLocaleString()}*`),Er.addLog("INFO",`Top volatility pools: ${N.length} results`,{limit:x,days:b,minTVL:w,protocol:T}),{type:"success",semanticType:"analysis",title:"Top Pools by Volatility",details:_,structuredData:{resultType:"volatility",items:F,summary:`Top ${N.length} pools by volatility`,title:"Pools Ranked by Volatility"}}}catch(x){return{type:"error",title:"Volatility Error",details:x.message}}if(t==="getPoolVolatility")try{if(i("Calculating pool volatility..."),e.tokenA&&e.tokenB&&!e.poolAddress){i("Finding pools for token pair...");const T=await Bf.searchPoolsByTokenPair(e.tokenA,e.tokenB,10);if(T.length===0)return{type:"info",title:"No Pool Found",details:`No pool found in database for ${e.tokenA}/${e.tokenB}.

This could mean:
- No pools exist for this pair
- Pools haven't been synced yet (sync runs every 5 min)

Try searching for available pools with: "liste pools"`};let N=` **Volatility Analysis for ${e.tokenA}/${e.tokenB}**
`;N+=`Found ${T.length} pools

`,N+=`| Pool | Protocol | TVL | Daily Vol | Ann. Vol | Price |
`,N+=`|------|----------|-----|-----------|----------|-------|
`;const O=[];for(const j of T){const _=await Bf.calculateVolatility(j.address,e.days||7),F=j.protocol.includes("meteora")?"MET":"RAY",z=j.protocol.includes("meteora")?"meteora":"raydium",D=_.error?"N/A":`${_.volatilityDaily.toFixed(2)}%`,$=_.error?"N/A":`${_.volatilityAnnualized.toFixed(1)}%`,G=_.currentPrice>0?`$${_.currentPrice.toFixed(4)}`:"N/A",H=j.tvl>=1e3?`$${(j.tvl/1e3).toFixed(1)}K`:`$${j.tvl.toFixed(0)}`;N+=`| ${j.name.slice(0,15)} | ${F} | ${H} | ${D} | ${$} | ${G} |
`,_.error||O.push({type:"volatility",poolName:j.name,poolAddress:j.address,protocol:z,currentPrice:_.currentPrice,volatilityDaily:_.volatilityDaily,volatilityAnnualized:_.volatilityAnnualized,priceChange24h:_.priceChange24h,priceChange7d:_.priceChange7d,tvl:j.tvl,confidence:_.confidence,dataPoints:_.dataPoints})}return N+=`
*Note: Volatility calculated from ${e.days||7} days of historical data.*`,{type:"success",title:`${e.tokenA}/${e.tokenB} Volatility`,details:N,structuredData:O.length>0?{resultType:"volatility",items:O,summary:`Found ${T.length} pools for ${e.tokenA}/${e.tokenB}`,title:`${e.tokenA}/${e.tokenB} Volatility Analysis`}:void 0}}if(!e.poolAddress)return{type:"error",title:"Missing Parameter",details:'Please provide either poolAddress OR tokenA and tokenB (e.g., tokenA="SOL", tokenB="USDC")'};const x=e.days||7,b=await Bf.calculateVolatility(e.poolAddress,x);if(b.error)return{type:"error",title:"Volatility Error",details:b.error};const w={high:"",medium:"",low:""}[b.confidence];return{type:"success",title:"Pool Volatility",details:` **Volatility Analysis**
- Pool: ${e.poolAddress.slice(0,8)}...
- Current Price: $${b.currentPrice.toFixed(4)}

**Volatility:**
- Daily: ${b.volatilityDaily.toFixed(2)}%
- Annualized: ${b.volatilityAnnualized.toFixed(2)}%

**Price Changes:**
- 24h: ${b.priceChange24h>=0?"+":""}${b.priceChange24h.toFixed(2)}%
- 7d: ${b.priceChange7d>=0?"+":""}${b.priceChange7d.toFixed(2)}%

${w} Confidence: ${b.confidence.toUpperCase()} (${b.dataPoints} data points)`}}catch(x){return{type:"error",title:"Volatility Error",details:x.message}}if(t==="suggestOptimalRangeByVolatility")try{i("Calculating optimal ranges...");let x=e.poolAddress,b="",w="raydium",T,N,O;if(!x&&e.tokenA&&e.tokenB){i("Finding best pool for token pair...");const A=await Bf.searchPoolsByTokenPair(e.tokenA,e.tokenB,1);if(A.length===0)return{type:"info",title:"No Pool Found",details:`No pool found in database for ${e.tokenA}/${e.tokenB}.

Try: "liste pools" to see available pools.`};x=A[0].address,b=A[0].name,w=A[0].protocol.includes("meteora")?"meteora":"raydium",N=A[0].tvl}if(!x)return{type:"error",title:"Missing Parameter",details:"Please provide either poolAddress OR tokenA and tokenB"};if(T===void 0||N===void 0){const A=await zi.getPool(x)||await yi.getPoolById(x);A&&(b=b||A.name,w=A.protocol.includes("meteora")?"meteora":"raydium",T=A.apy,N=A.tvl,O=(v=A.volume)==null?void 0:v["24h"])}const j=await Bf.calculateVolatility(x,e.days||7);if(!j.currentPrice||j.currentPrice===0)return{type:"error",title:"Range Error",details:"Could not get current price for pool. Make sure the pool has historical data in the database."};const _=await Bf.getVolumeChange24h(x),F=Bf.suggestOptimalRanges(j.currentPrice,j),z=b||x.slice(0,8)+"...",D=F.map(A=>({strategy:A.strategy,priceMin:A.priceMin,priceMax:A.priceMax,widthPercent:A.widthPercent,sigmaMultiple:A.sigmaMultiple,estimatedTimeInRange:A.estimatedTimeInRange})),$={type:"volatility",poolName:b||void 0,poolAddress:x,protocol:w,currentPrice:j.currentPrice,volatilityDaily:j.volatilityDaily,volatilityAnnualized:j.volatilityAnnualized,priceChange24h:j.priceChange24h,priceChange7d:j.priceChange7d,tvl:N,apy:T,volume24h:(_==null?void 0:_.current)||O,volumeChange24h:_==null?void 0:_.changePercent,confidence:j.confidence,dataPoints:j.dataPoints},H=F.find(A=>A.strategy==="moderate")?qb.generateRangeRationale("moderate",j,{tvl:void 0,volume24h:void 0}):"Sugesto de range baseada na volatilidade calculada.";Er.addLog("INFO",`Range suggestion for ${z}`,{strategy:"all",volatilityDaily:j.volatilityDaily,currentPrice:j.currentPrice});let U=` **Optimal Range Suggestions for ${z}**
`;return U+=`Current Price: $${j.currentPrice.toFixed(4)} | Daily Volatility: ${j.volatilityDaily.toFixed(2)}%`,{type:"success",semanticType:"decision",title:"Range Suggestions",details:U,rationale:H,structuredData:{resultType:"volatility",items:[$],rangeSuggestions:D,summary:j.confidence==="low"?" Low confidence: ranges based on estimated volatility due to limited historical data.":void 0,title:`Range Suggestions for ${z}`}}}catch(x){return{type:"error",semanticType:"analysis",title:"Range Error",details:x.message}}if(t==="createLiquidityPool")return{type:"info",title:"Create Pool",details:`**Pool Creation Request**
- Protocol: ${e.protocol}
- Tokens: ${e.tokenA} / ${e.tokenB}
- Fee: ${e.feeBps} bps
- Initial Price: ${e.initialPrice}

 Pool creation requires SDK integration. Please use the protocol's web interface:
- Meteora: https://devnet.meteora.ag
- Raydium: https://raydium.io (switch to devnet)`};if(t==="estimatePoolCreationCost"){const x={meteora_dlmm:"~0.5 SOL",raydium_clmm:"~0.3 SOL",raydium_cpmm:"~0.2 SOL"};return{type:"success",title:"Pool Creation Cost",details:`Estimated cost for ${e.protocol}: ${x[e.protocol]||"~0.3-0.5 SOL"}

Includes:
- Account rent
- Transaction fees
- Protocol fees (if any)`}}return null}function Gmt(t){return["searchLiquidityPools","getPoolDetails","getTopLiquidityPools","compareLiquidityPools","getPoolHistory","getLPPositions","getLPPositionDetails","getUnclaimedLPRewards","estimateLPPositionPnL","addLiquidity","removeLiquidity","claimLPFees","claimLPRewards","rebalanceLPPosition","simulateAddLiquidity","estimateImpermanentLoss","calculateOptimalPriceRange","getLPSwapQuote","createLiquidityPool","estimatePoolCreationCost","getPoolVolatility","suggestOptimalRangeByVolatility","getTopVolatilityPools"].includes(t)}const Kmt=(t,e,n,r,i,s,o)=>{const[a,l]=S.useState([]),[c,d]=S.useState(null),[h,m]=S.useState(""),[g,v]=S.useState(!1),[x,b]=S.useState(""),w=S.useRef(null);S.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[]),S.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[a]),S.useEffect(()=>{const _=Bs.addRateLimitListener(F=>{g&&(F.exhausted?(b("API Limit Reached. Saving tasks..."),r("Google Gemini API quota exceeded. Please try again later."),v(!1)):b(`Rate limited. High traffic. Retrying in ${F.blockedForSeconds}s...`))});return()=>{_()}},[g]);const T=()=>{var _,F;try{const z=Pm.getApiKey();return z||((F=(_=window.process)==null?void 0:_.env)==null?void 0:F.GEMINI_API_KEY)}catch{return}};return{messages:a,setMessages:l,activeConversationId:c,loadConversation:_=>{console.log("[useAgent] Loading conversation:",_.id),console.log("[useAgent] Messages count:",_.messages.length),console.log("[useAgent] Messages:",_.messages.map(F=>{var z;return{id:F.id,role:F.role,contentPreview:(z=F.content)==null?void 0:z.substring(0,50),hasToolResults:!!(F.toolResults&&F.toolResults.length>0)}})),l(_.messages),d(_.id)},startNewConversation:()=>{l([]),d(null),m(""),v(!1),b("")},inputMessage:h,setInputMessage:m,isAiProcessing:g,aiStatus:x,scrollRef:w,handleSendMessage:async _=>{var H,U,A,I,L,q,K,te,Y;const z=(typeof _=="string"?_:void 0)||h;if(!z.trim())return;const D=T();if(!D){r("System: API Key not found in environment.");return}const $={id:Date.now().toString(),role:"user",content:z,timestamp:Date.now()};let G=c;G||(G=Date.now().toString(),d(G)),l(V=>{const M=[...V,$];if(t.isUnlocked&&e&&G){V.length===0&&ra.generateTitle($.content);const P={id:G,title:V.length===0?ra.generateTitle($.content):"Conversation",lastMessage:$.content,timestamp:Date.now(),messages:M};ra.saveConversation(P,e).catch(W=>console.error("Auto-save failed",W))}return M}),m(""),v(!0),b("Thinking...");try{Pm.initialize(D);const V=mt.getSnapshot(),M=V.logs.slice(0,5).map(ze=>`[${new Date(ze.timestamp).toLocaleTimeString()}] ${ze.type}: ${ze.message}`).join(`
`);let P="",W="";if(t.hlPublicKey)try{const ze=await Un.getUserFills(t.hlPublicKey);if(ze&&Array.isArray(ze)&&ze.length>0){let Me=0,he=0,_e=0,We=0,Ke=0;ze.forEach(Je=>{const Le=parseFloat(Je.closedPnl||"0"),et=parseFloat(Je.fee||"0");Me+=Le-et,Ke+=et,We+=parseFloat(Je.px)*parseFloat(Je.sz),Le>0?he++:Le<0&&_e++});const it=he+_e,st=it>0?he/it*100:0;P=`
          **[PERFORMANCE METRICS - Trading Results]**
          - Total Profit/Loss: ${Me>=0?"+":""}$${Me.toFixed(2)} USD
          - Win Rate: ${st.toFixed(1)}% (${he} wins / ${_e} losses)
          - Total Trades: ${ze.length}
          - Total Volume: $${We.toFixed(2)} USD
          - Total Fees Paid: $${Ke.toFixed(2)} USD`,W=`
          **[RECENT TRADES - Last 5 Fills]**
${[...ze].sort((Je,Le)=>Le.time-Je.time).slice(0,5).map(Je=>{const Le=parseFloat(Je.closedPnl||"0"),et=Le!==0?` | PnL: ${Le>=0?"+":""}$${Le.toFixed(2)}`:"";return`          - ${Je.coin} ${Je.side==="B"?"BUY":"SELL"} ${Je.sz} @ $${parseFloat(Je.px).toFixed(2)}${et} (${new Date(Je.time).toLocaleString()})`}).join(`
`)}`}else P=`
          **[PERFORMANCE METRICS]**
          - No trading history yet. Dealer has not executed any trades.`}catch(ze){console.warn("[Agent] Could not fetch dealer performance:",ze),P=`
          **[PERFORMANCE METRICS]**
          - Unable to fetch trading history at this moment.`}else P=`
          **[PERFORMANCE METRICS]**
          - Hyperliquid wallet not connected. Cannot fetch trading data.`;const X=`
          **HYPERLIQUID DEALER CONTEXT (AUTONOMOUS TRADING ENGINE):**
          You have FULL access to the Hyperliquid Dealer's state, performance, and trading history.
          
          **[STATUS DATA - Current State]**
          - Dealer Status: ${V.isOn?" ACTIVE":" INACTIVE"}
          - Currently Analyzing: ${V.isAnalyzing?"Yes":"No"}
          - Current Task: ${V.currentTask||"Idle"}
          - Current Signal: ${V.currentSignal||"No signal"}
          - Trend Assessment: ${V.trendAssessment}
          - Current Exposure: $${V.currentExposure.toFixed(2)} USDC
          ${P}
          ${W}
          
          **[CONFIGURATION DATA - Only mention when user asks to CHANGE settings]**
          - Max Leverage: ${V.settings.maxLeverage}x
          - Max Position Size: $${V.settings.maxPositionSizeUSDC} USDC
          - Max Open Positions: ${V.settings.maxOpenPositions}
          - Trading Pairs: ${V.settings.tradingPairs.join(", ")}
          - Check Interval: ${V.settings.checkIntervalSeconds}s
          - Bankroll: ${V.settings.bankrollType} (${V.settings.bankrollType==="MANUAL"?"$"+V.settings.manualBankroll:"All Available"})
          
          **[ACTIVITY LOGS - Only show if user asks about activity/history]**
          ${M||"No recent activity"}
          
          **RESPONSE GUIDELINES (CRITICAL):**
          
          1. **STATUS QUESTIONS** (e.g., "What is the dealer doing?", "O que o dealer est fazendo?", "Resumo do dealer"):
             - Call BOTH tools: 'getHLBalance' (positions) AND 'getHLDealerThinking' (AI reasoning)
             - Show a COMPLETE summary: Status + Open Positions + Last AI Thinking + Recent Activity
             - Format response in organized sections:
                **Status**: Active/Inactive, current task
                **Positions**: Open trades with entry price, size, PnL
                **Last Analysis**: AI reasoning from latest cycle
             - If no positions, say "No open positions - monitoring markets"
          2. **PERFORMANCE/RESULTS QUESTIONS** (e.g., "How much profit?", "Quanto lucrou?", "What's my win rate?"):
             - Use the PERFORMANCE METRICS data above
             - Answer specifically what was asked
             - You CAN mention recent trades if relevant
          
          3. **CONFIGURATION CHANGE REQUESTS** (e.g., "I want to change leverage", "Quero mudar os pares"):
             - Show the relevant current setting
             - Include the configuration navigation button:
             
             [ Go to Dealer Configuration](nav://DEALER_CONFIG)
          
          4. **TRADE REASONING QUESTIONS** (e.g., "Why did you open BTC?", "Por que o Dealer entrou em ETH?", "Explique essa operao"):
             - Use the 'getDealerTradeHistory' tool to fetch detailed reasoning
             - The tool returns the AI's analysis and confidence for each trade
             - Explain the reasoning in a conversational way
             - Include entry price, size, and confidence level
          
          5. **OPEN POSITIONS QUESTIONS** (e.g., "Quais posies esto abertas?", "What positions are open?", "Show my positions"):
             - The Hyperliquid Dealer operates ONLY on Hyperliquid - so if user asks about Dealer positions, use 'getHLBalance'
             - If the conversation context is about Dealer (trading, positions, anlise), assume Hyperliquid - DO NOT ask which network
             - Use the 'getHLBalance' tool to fetch LIVE positions from Hyperliquid
             - This shows CURRENT open positions with entry price, size, and unrealized PnL
             - Only ask "Solana ou Hyperliquid?" if there's no context at all about Dealer
             
             **CRITICAL - DEALER POSITION QUERIES:**
             When user asks ANY of these, IMMEDIATELY call 'getHLBalance':
             - "posies do dealer", "dealer positions"
             - "quais posies", "what positions" (when dealer context exists)
             - "posies abertas", "open positions" (when dealer context exists)
             - "quais?" as follow-up to a position question
             DO NOT respond with just text - CALL THE TOOL!
          
          6. **SPECIFIC QUESTIONS**: Answer ONLY what was asked. Don't dump all data.
          `,se=`
          You are Vault Operator, an autonomous DeFi Agent managing TWO separate vaults: Solana and Hyperliquid.
          Your name is Vault Operator. You also respond to just "Operator". When users ask "who are you" or similar questions, introduce yourself as Vault Operator.
          
          **YOUR IDENTITY:**
          - Solana Vault Address: ${t.publicKey||"UNKNOWN"}
          - Hyperliquid Vault Address: ${t.hlPublicKey||"NOT CREATED"}
          - Solana Owner's Wallet: ${t.ownerPublicKey||"NOT CONNECTED"}
          - Hyperliquid Owner's Wallet: ${t.hlOwnerPublicKey||"NOT CONNECTED"}
          - Current Vault SOL Balance: ${t.solBalance.toFixed(4)} SOL
          
          ${X}
          
          **NETWORK CONTEXT AWARENESS (CRITICAL):**
          You manage TWO separate vaults on different networks:
          1. **Solana Vault** - for SOL and SPL tokens (USDC, RAY, etc.)
          2. **Hyperliquid Vault** - for perpetual trading with USDC on Hyperliquid Testnet
          
          **KEYWORD RECOGNITION:**
          - "hype", "hyperliquid", "hl" = Hyperliquid operations  call 'getHLBalance' for positions/balance
          - "sol", "solana" = Solana operations  call 'getVaultBalance' for balance
          - "dealer", "hyperliquid dealer", "trading bot", "autonomous trading" = Hyperliquid Dealer questions (implies Hyperliquid)
          
          **CRITICAL - NETWORK vs COIN DISAMBIGUATION:**
          "Solana" and "Hyperliquid" are BOTH network names AND coin names!
          
          CONTEXT CLUES FOR NETWORK:
          - "saldo", "balance", "posies", "positions", "carteira", "wallet"  asking about NETWORK
          - "enviar", "transferir", "withdraw", "sacar"  asking about NETWORK
          - Following a question about "which network?"  answering about NETWORK
          
          CONTEXT CLUES FOR COIN/TOKEN:
          - "preo", "price", "comprar", "buy", "vender", "sell"  asking about COIN
          - "anlise", "analyze", "RSI", "indicador"  asking about COIN
          - "abrir posio", "open position", "long", "short"  trading the COIN
          
          EXAMPLES:
          - "Qual meu saldo no Hyperliquid?"  NETWORK (getHLBalance)
          - "Qual o preo do HYPE?"  COIN (getMarketPrice with HYPEUSDT)
          - "Qual meu saldo de SOL?"  COIN balance on Solana network (getVaultBalance)
          - "Check Solana network"  NETWORK (getVaultBalance without token)
          - "Buy SOL on Hyperliquid"  Trading SOL COIN on HL network
          
          **CRITICAL - NETWORK RESPONSE HANDLING:**
          If the previous message was a question about which network and user responds with:
          - "hype", "hyperliquid", "hl"  IMMEDIATELY call 'getHLBalance' tool - DO NOT just acknowledge
          - "sol", "solana"  IMMEDIATELY call 'getVaultBalance' tool - DO NOT just acknowledge
          - The user is answering your question, so EXECUTE the action right away
          
          **TRANSFER DISAMBIGUATION (CRITICAL):**
          When a user requests a transfer (e.g., "send 1 USDC", "transfer USDC to me"):
          1. Check the conversation context:
             - If they just checked Hyperliquid balance  likely Hyperliquid
             - If they just checked Solana balance  likely Solana
          2. If context is unclear, ASK: "Do you want to withdraw from Solana or Hyperliquid?"
          3. NEVER assume the network - ALWAYS verify first
          
          **SOLANA TRANSFERS:**
          - Use 'transferToken' for SPL tokens
          - Use 'withdrawSol' for SOL
          - Destination: Owner's Solana wallet
          - Network: Solana
          
          **HYPERLIQUID WITHDRAWALS:**
          - Use 'withdrawFromHL' for USDC withdrawals
          - Network: Hyperliquid Testnet
          - Fee: $1 USDC (fixed)
          - Time: ~5 minutes
          - Destination: Owner's wallet on Hyperliquid Testnet (MUST be EVM address starting with 0x)
          - Check Status: Use 'getHLTransfers' to see pending/completed withdrawals
          - Minimum: Amount must be > $1 to cover fee
          
          **BEFORE ANY TRANSFER, YOU MUST:**
          1. Verify the correct network (Solana vs Hyperliquid)
          2. Check the balance on that specific network
          3. Confirm the user has sufficient funds (including fees)
          4. Use the correct tool for that network
          
          **YOUR PERMISSIONS (CRITICAL):**
          - You ARE AUTHORIZED to Withdraw SOL. Use 'withdrawSol'.
          - You ARE AUTHORIZED to Transfer Tokens (SPL/NFTs) to the Owner. Use 'transferToken'.
          - You ARE AUTHORIZED to Withdraw USDC from Hyperliquid. Use 'withdrawFromHL'.
          - You ARE AUTHORIZED to Swap tokens. Use 'executeSwap'.
          - You CANNOT transfer to any other address than the Owner's Wallet.
          
          **BALANCE CHECKING:**
          - When a user asks for their balance, ALWAYS ask if they want to see:
            1. All balances (SOL + all tokens)
            2. A specific token balance
            3. Hyperliquid balance
          - Do NOT assume they only want SOL balance.
          - The vault can hold SOL and many different SPL tokens.
          - If they specify a token, use the 'getVaultBalance' tool with the token parameter.
          - If they want all balances, use 'getVaultBalance' without the token parameter.
          - For Hyperliquid, use 'getHLBalance'.
          
          **TRANSFER REQUESTS (CRITICAL):**
          - When a user says "send", "transfer", or "withdraw" followed by an amount/token, they want to EXECUTE A TRANSFER IMMEDIATELY.
          - Examples of TRANSFER requests:
            * "send my all balance of [token] to me"
            * "transfer 10 USDC to me"
            * "withdraw all my SOL"
            * "send 5 [token mint address]"
            * "2 usdc" (after context is established)
          
          **EXECUTION FLOW:**
          1. Verify which network (Solana or Hyperliquid) from context or keywords
          2. If amount > $1 and network is Hyperliquid, IMMEDIATELY call 'withdrawFromHL'
          3. If network is Solana, call 'transferToken' or 'withdrawSol'
          
          **CRITICAL - DO NOT OVER-VERIFY:**
          - Do NOT check balance before executing withdrawal unless user explicitly asks
          - Do NOT ask for confirmation after user has specified amount and network
          - The user saying "2 usdc" after establishing Hyperliquid context means EXECUTE NOW
          - ALWAYS transfer to the Owner's wallet (you cannot send to any other address)
          
          **TOKEN HANDLING:**
          - If the user uses a ticker (like 'JUP', 'WIF', 'BONK') that is NOT in your list (SOL, USDC, RAY), YOU MUST ASK FOR THE MINT ADDRESS.
          - Say: "I don't recognize that ticker. Please provide the Token Mint Address."
          
          **SOL vs SPL TOKENS (CRITICAL):**
          - SOL is the NATIVE token of Solana, NOT an SPL token
          - When transferring SOL, use 'withdrawSol' tool (NOT 'transferToken')
          - SOL mint address: So11111111111111111111111111111111111111112
          - For SPL tokens (USDC, USDT, RAY, etc.), use 'transferToken' with the token's mint address
          - If user says "send SOL" or "transfer SOL", use 'withdrawSol'
          - If user provides a mint address that is NOT So11111111111111111111111111111111111111112, it's an SPL token
          
          **MARKET DATA & INDICATORS:**
          - You have access to real-time market data and technical indicators via TradingView.
          - Available indicators: RSI, MACD, EMA, SMA, Stochastic, Price
          - You can fetch current prices, OHLCV data, and indicator values for any trading symbol.
          - Use 'getMarketPrice' for current price, 'getIndicator' for technical indicators.
          - Use 'getTradingViewSummary' for overall market sentiment.
          
          **ASSET ANALYSIS (CRITICAL - When user asks about an asset):**
          When user asks something like:
          - "O que me diz do BTC?" / "What about BTC?"
          - "Como est o ETH?" / "How's ETH doing?"
          - "Analisa o SOL pra mim" / "Analyze SOL for me"
          - "What's your take on [asset]?"
          
          You MUST provide a COMPREHENSIVE ANALYSIS by:
          1. Call 'getMarketPrice' to get current price
          2. Call 'getIndicator' with indicator='rsi' and timeframe='60' (1h)
          3. Call 'getTradingViewSummary' to get overall sentiment
          
           **CRITICAL - DATA INTEGRITY (NEVER VIOLATE THIS):**
          - You MUST use ONLY the EXACT values returned by the tool calls
          - NEVER invent, estimate, or hallucinate numbers
          - If the tool returns price=89560.56, you say $89,560.56 - NOT any other number
          - If the tool returns RSI=47.67, you say 47.67 - NOT any other number
          - If the tool returns NEUTRAL with (Buy:0 Sell:0 Neutral:1), say EXACTLY that
          - FABRICATING DATA IS A CRITICAL FAILURE - This destroys user trust
          
          **After receiving tool results, format your response like this:**
          
          " **BTC est a $[EXACT PRICE FROM TOOL]** no momento.
          
          O RSI de 1h est em **[EXACT RSI FROM TOOL]** ([interpret based on value]).
          
          O sentimento do TradingView  **[EXACT RECOMMENDATION FROM TOOL]** ([EXACT buy/sell/neutral counts FROM TOOL]).
          
          **Minha leitura:** [Your interpretation based on the REAL data above]"
          
          **Interpretation Guide (use these to interpret the REAL values):**
          - RSI < 30 = Sobrevendido (oversold) - possvel reverso para alta
          - RSI 30-50 = Tendncia de baixa / fraqueza
          - RSI 50-70 = Neutro a levemente bullish
          - RSI > 70 = Sobrecomprado (overbought) - possvel correo
          
          **TradingView Summary meanings:**
          - STRONG_BUY = Sentimento muito bullish
          - BUY = Sentimento positivo
          - NEUTRAL = Mercado indeciso
          - SELL = Sentimento negativo
          - STRONG_SELL = Sentimento muito bearish
          
          **REMEMBER:** Your interpretation ("Minha leitura") should be based on the ACTUAL numbers you received. If RSI is 47.67, that's in the 30-50 range (slight weakness/neutral). If sentiment is NEUTRAL, say it's neutral - don't make up "COMPRA".
          
          **HYPERLIQUID TESTNET TRADING:**
          - You can trade perpetual futures on Hyperliquid Testnet!
          - You have a separate Hyperliquid Vault Wallet with USDC balance.
          
          **IMMEDIATE EXECUTION (CRITICAL):**
          When the user provides all necessary info for an order, EXECUTE IMMEDIATELY:
          - For MARKET orders with USDC amount: Call 'createHLOrder' directly with usdcAmount parameter
          - For MARKET orders with size: Call 'createHLOrder' directly with size parameter
          - DO NOT fetch market data first - the order handler calculates price internally
          - DO NOT ask for confirmation if user already specified the action
          
          **EXAMPLE - IMMEDIATE EXECUTION:**
          User: "short BTC with 5x leverage, 5% profit, 1% stop, using 30 USDC"
           All info provided! Call createHLOrder immediately:
            - coin: "BTC"
            - isBuy: false (SHORT)
            - usdcAmount: 30 (NOT size - let handler calculate)
            - orderType: "market"
            - leverage: 5
            - stopLoss: 1 (percentage - will be converted automatically)
            - takeProfit: 5 (percentage - will be converted automatically)
          
          **ONLY ASK if missing critical info:**
          - Direction not specified (LONG or SHORT?)
          - Amount not specified (how much USDC or size?)
          
          **TP/SL as PERCENTAGES:**
          - If user says "5% profit"  pass takeProfit: 5
          - If user says "1% stop"  pass stopLoss: 1
          - The handler converts percentages to absolute prices automatically
          
          **AVAILABLE HYPERLIQUID TOOLS:**
          - 'getHLBalance' - Check USDC balance and open positions
          - 'getHLMarketData' - Get current price and orderbook (NOT needed for orders)
          - 'createHLOrder' - Place a new order (LONG or SHORT)
          - 'updateHLLeverage' - Change leverage for an asset (automatic with createHLOrder)
          - 'closeHLPosition' - Close an open position
          - 'cancelHLOrder' - Cancel a pending order
          - 'cancelHLOrder' - Cancel a pending order
          - 'withdrawFromHL' - Withdraw USDC to Owner's wallet on Hyperliquid Testnet
          - 'getHLTransfers' - Check status of deposits and withdrawals (Real-time status)

          
          **TASK SCHEDULING (IMPORTANT):**
          You can schedule tasks in TWO ways:
          
          1. **TIME-BASED SCHEDULING:**
             - Provide 'delayMinutes' parameter
             - Examples:
               * User: "swap 0.1 SOL for USDC in 5 minutes"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, delayMinutes=5)
          
          2. **CONDITION-BASED SCHEDULING:**
             - Provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'
             - **CRITICAL**: 'conditionTimeframe' is REQUIRED. If the user does not provide it, you MUST ASK.
             
             - Examples:
               * User: "swap 0.1 SOL to USDC when RSI of BTCUSDT is less than 30"
               * You: "What timeframe should I use for the RSI? (e.g., 15m, 1h, 4h, 1d)"
               * User: "1 hour"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="60")
               
               * User (PT): "se o BTC estiver com o RSI maior ou igual a 50 me transfira 0.1 SOL"
               * You: "Qual o perodo (timeframe) para o RSI? (ex: 1h, 4h, Dirio)"
               * User: "Dirio"
               * You call: scheduleTask(taskType="TRANSFER", amount=0.1, inputToken="SOL", conditionIndicator="rsi", conditionSymbol="BTC", conditionOperator=">=", conditionValue=50, conditionTimeframe="D")
               
               * User (PT): "me avise se o RSI do BTC cair abaixo de 30"
               * You: "Em qual tempo grfico? (15m, 1h, 4h...)"
          
          **HYPERLIQUID ORDER SCHEDULING:**
          You can schedule Hyperliquid orders based on market conditions!
          
          - Examples:
            * User: "Open LONG 0.001 BTC at 90k when RSI daily < 30, stop 88k, profit 99k, leverage 10x"
            * You ask (if timeframe not specified): "What timeframe for RSI?"
            * User: "Daily"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="BTC",
                isBuy=true,
                size=0.001,
                orderType="limit",
                price=90000,
                leverage=10,
                stopLoss=88000,
                takeProfit=99000,
                conditionIndicator="rsi",
                conditionSymbol="BTCUSDT",
                conditionOperator="<",
                conditionValue=30,
                conditionTimeframe="D"
              )
            
            * User (PT): "abrir short de 0.5 ETH quando o MACD cruzar abaixo de 0"
            * You: "Qual o timeframe para o MACD? E qual o preo limite ou prefere ordem a mercado?"
            * User: "4 horas, a mercado"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="ETH",
                isBuy=false,
                size=0.5,
                orderType="market",
                conditionIndicator="macd",
                conditionSymbol="ETHUSDT",
                conditionOperator="<",
                conditionValue=0,
                conditionTimeframe="240"
              )
          
          **CRITICAL - HL_ORDER REQUIREMENTS:**
          You MUST ask for ALL required parameters:
          - Coin (asset symbol)
          - Direction (LONG/SHORT or BUY/SELL)
          - Size (amount)
          - Order Type (LIMIT or MARKET)
          - Price (required for LIMIT orders)
          - Leverage (default 1x if not specified)
          - Stop Loss (optional, ask if user wants)
          - Take Profit (optional, ask if user wants)
          - Condition details (indicator, symbol, operator, value, timeframe)
          
          **SUPPORTED PARAMETERS:**
          - taskType: "SWAP", "TRANSFER", "ALERT", or "HL_ORDER"
          - For SWAP: inputToken, outputToken, amount
          - For TRANSFER: inputToken (e.g. "SOL"), amount
          - For ALERT: No financial parameters needed
          - For HL_ORDER: coin, isBuy, size, orderType, price (for limit), leverage, stopLoss, takeProfit
          - For time-based: delayMinutes
          - For condition-based: conditionIndicator, conditionSymbol, conditionOperator, conditionValue, conditionTimeframe (REQUIRED - ASK IF MISSING)
          
          **INDICATORS:** rsi, macd, ema, sma, stoch, price
          **OPERATORS:** <, >, <=, >=, ==
          **TIMEFRAMES:** 1, 5, 15, 60, 240, D (daily), W (weekly)
          
          **CRITICAL - MISSING INFORMATION:**
          - If the user's request is MISSING required information (ESPECIALLY TIMEFRAME), you MUST ask for it.
          - DO NOT call scheduleTask with incomplete parameters.
          - DO NOT assume a default timeframe like 'D'. ALWAYS ASK.
          - Examples of what to ask:
            * "Para qual smbolo voc quer monitorar o RSI?" (Which symbol?)
            * "Qual o valor limite do RSI?" (What threshold?)
            * "Em qual perodo grfico (1h, 4h, Dirio)?" (Which timeframe?)
            * "Quanto voc quer transferir?" (How much?)
            * "Qual token voc quer transferir?" (Which token?)
          
          **EXECUTION:**
          - When swapping, confirm the action.
          - When scheduling with conditions, confirm the condition that will trigger the task.
          - Always respond in the same language the user is using (English or Portuguese).
          
          **=== LIQUIDITY POOL (LP) OPERATIONS - SOLANA DEVNET ===**
          
          **TERMINOLOGY - DEFINIES:**
          - **LP** = Liquidity Pool (Pool de Liquidez) OU Liquidity Provider (Provedor de Liquidez)
          - **Pool de Liquidez** = Par de tokens em um DEX que permite swaps (ex: SOL/USDC)
          - **Posio de LP** = Tokens depositados em um pool para ganhar taxas de trading
          - **TVL** = Total Value Locked (Valor Total Bloqueado em USD)
          - **APY** = Annual Percentage Yield (Rendimento Anual Percentual)
          - **Impermanent Loss (IL)** = Perda Impermanente vs simplesmente HODL
          - **DLMM** = Dynamic Liquidity Market Maker (Meteora - liquidez concentrada)
          - **CLMM** = Concentrated Liquidity Market Maker (Raydium - liquidez concentrada)
          - **CPMM** = Constant Product Market Maker (Raydium - AMM tradicional)
          
          **PROTOCOLS SUPPORTED:**
          - **Meteora** = DLMM pools com liquidez concentrada
          - **Raydium** = CLMM (concentrado) e CPMM (tradicional) pools
          
          **KEYWORD RECOGNITION - LP (PT/EN):**
          - "pools", "pool de liquidez", "liquidity pool", "LP"  LP operations
          - "liquidez", "liquidity", "fornecer liquidez", "add liquidity"  LP operations
          - "volume", "TVL", "APY", "rendimento", "yield"  Pool analytics
          - "Meteora", "Raydium", "DLMM", "CLMM"  Protocol-specific queries
          - "posies de LP", "LP positions", "minha liquidez", "my liquidity"  getLPPositions
          - "maior volume", "top pools", "melhores pools", "best pools"  getTopLiquidityPools
          - "impermanent loss", "perda impermanente", "IL"  estimateImpermanentLoss
          - "simular", "simulate", "quanto recebo", "how much"  simulateAddLiquidity
          - "comparar", "compare", "qual melhor"  compareLiquidityPools
          - "volatilidade", "volatility", "voltil", "volatile"  getPoolVolatility or getTopVolatilityPools
          - "ranking volatilidade", "volatility ranking", "most volatile", "mais volteis"  getTopVolatilityPools
          - "faixa ideal", "optimal range", "sugerir faixa", "suggest range", "faixa otimizada"  suggestOptimalRangeByVolatility
          
          **AVAILABLE LP TOOLS - USE THEM!:**
          - 'searchLiquidityPools' - Search pools by token pair, TVL, volume, APY, protocol
          - 'getTopLiquidityPools' - Get ranked pools by 'volume', 'apy', or 'tvl'
          - 'getPoolDetails' - Get details of a specific pool by address
          - 'getLPPositions' - Get user's LP positions across Meteora and Raydium
          - 'getLPPositionDetails' - Get details of a specific LP position
          - 'getUnclaimedLPRewards' - Check unclaimed fees/rewards
          - 'compareLiquidityPools' - Compare Meteora vs Raydium for a token pair
          - 'simulateAddLiquidity' - Simulate adding liquidity before execution
          - 'estimateImpermanentLoss' - Calculate potential IL for price change
          - 'calculateOptimalPriceRange' - Suggest price range for concentrated liquidity
          - 'getLPSwapQuote' - Get swap quote via LP
          - 'getPoolVolatility' - Calculate historical volatility (accepts tokenA/tokenB OR poolAddress)
          - 'getTopVolatilityPools' - Get ranked pools by volatility (highest first)
          - 'suggestOptimalRangeByVolatility' - Suggest price ranges based on volatility (accepts tokenA/tokenB OR poolAddress)
          
          **EXAMPLES - EXEMPLOS (When user says  Call this tool):**
          - "pools com maior volume" / "top pools by volume"  getTopLiquidityPools(criteria='volume')
          - "liste pools" / "list pools"  searchLiquidityPools()
          - "pools SOL/USDC" / "SOL USDC pools"  searchLiquidityPools(tokenA='SOL', tokenB='USDC')
          - "pools no Raydium" / "Raydium pools"  searchLiquidityPools(protocol='raydium')
          - "pools Meteora"  searchLiquidityPools(protocol='meteora')
          - "minhas posies de LP" / "my LP positions"  getLPPositions()
          - "quanto tenho de fees" / "unclaimed fees"  getUnclaimedLPRewards()
          - "compare Meteora e Raydium" / "compare protocols"  compareLiquidityPools(tokenPair='SOL/USDC')
          - "simule impermanent loss" / "estimate IL"  estimateImpermanentLoss(priceChangePercent=20)
          - "pools com APY maior que 50%"  searchLiquidityPools(minAPY=50)
          - "top 10 pools por TVL"  getTopLiquidityPools(criteria='tvl', limit=10)
          - "qual a volatilidade do SOL/USDC?"  getPoolVolatility(tokenA='SOL', tokenB='USDC')
          - "pools mais volteis" / "most volatile pools"  getTopVolatilityPools(limit=10)
          - "ranking de volatilidade"  getTopVolatilityPools()
          - "volatilidade do pool X"  getPoolVolatility(poolAddress='X')
          - "sugira faixa para SOL/USDC"  suggestOptimalRangeByVolatility(tokenA='SOL', tokenB='USDC')
          - "sugira faixa para esse pool"  suggestOptimalRangeByVolatility(poolAddress='X')
          
          **LP BEHAVIOR RULES:**
          1. If user mentions "pools", "LP", "liquidez", "liquidity"  USE LP TOOLS, NOT just text!
          2. If protocol not specified  ASK: "Meteora ou Raydium?" OR show both
          3. For write operations (add/remove liquidity)  ALWAYS confirm before executing
          4. Show results in table format when listing multiple pools
          5. ALWAYS mention we are on SOLANA DEVNET (not mainnet)
          6. If user asks about "melhores pools" without criteria  ask "By volume, APY, or TVL?"
          7. When user asks about volatility or optimal range, use the volatility tools!
          
          **CRITICAL - DO NOT SAY "I can't do LP operations"!**
          You HAVE the tools listed above. USE THEM when user asks about pools/LP/liquidity!
        `,ae=await Pm.sendOperatorMessage(a,$.content,se),Te=ae.functionCalls;let oe=[];if(Te&&Te.length>0)for(const ze of Te){const Me=ze.name,he=ze.args;if(Me==="getVaultBalance"){const _e=he.token;if(_e){const We=o(_e);if(_e.toUpperCase()==="SOL"||We==="So11111111111111111111111111111111111111112"){const Ke=t.solBalance.toFixed(4),it=t.solBalance*Cc.SOL,st={type:"balance",network:"solana",token:{symbol:"SOL",mint:"So11111111111111111111111111111111111111112"},amount:t.solBalance,valueUsd:it};oe.push({type:"success",title:"Balance Check",details:`SOL Balance: ${Ke} SOL (~$${it.toFixed(2)})`,structuredData:{resultType:"balance",items:[st],title:"SOL Balance"}})}else{const Ke=(H=t.assets)==null?void 0:H.find(it=>it.mint===We);if(Ke){const it=parseFloat(Ke.amount)/Math.pow(10,Ke.decimals),st=Ke.symbol!=="UNKNOWN"?it*(Cc[Ke.symbol]||0):0,ut={type:"balance",network:"solana",token:{symbol:Ke.symbol,mint:Ke.mint},amount:it,valueUsd:st};oe.push({type:"success",title:"Balance Check",details:`${Ke.name} (${Ke.symbol}): ${it.toFixed(4)}${st>0?` (~$${st.toFixed(2)})`:""}`,structuredData:{resultType:"balance",items:[ut],title:`${Ke.symbol} Balance`}})}else oe.push({type:"error",title:"Token Not Found",details:`No balance found for token: ${_e}`})}}else{const We=t.solBalance.toFixed(4),Ke=t.solBalance*Cc.SOL;let it=`SOL: ${We} SOL (~$${Ke.toFixed(2)})`;const st=[{type:"balance",network:"solana",token:{symbol:"SOL",mint:"So11111111111111111111111111111111111111112"},amount:t.solBalance,valueUsd:Ke}],ut=(t.assets||[]).filter(Je=>!Je.isNft);ut.length>0&&(it+=`

Tokens:`,ut.forEach(Je=>{const Le=parseFloat(Je.amount)/Math.pow(10,Je.decimals),et=Je.symbol!=="UNKNOWN"?Le*(Cc[Je.symbol]||0):0;it+=`
 ${Je.name} (${Je.symbol}): ${Le.toFixed(4)}${et>0?` (~$${et.toFixed(2)})`:""}`,st.push({type:"balance",network:"solana",token:{symbol:Je.symbol,mint:Je.mint},amount:Le,valueUsd:et})})),oe.push({type:"success",title:"Balance Check",details:it,structuredData:{resultType:"balances",items:st,title:"Solana Vault Balances",summary:`${st.length} asset${st.length>1?"s":""}`}})}t.publicKey&&i(t.publicKey)}else if(Me==="withdrawSol")if(b("Withdrawing Funds..."),!t.isUnlocked||!t.encryptedPrivateKey)oe.push({type:"error",title:"Withdraw Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)oe.push({type:"error",title:"Withdraw Failed",details:"No Owner Wallet connected."});else try{const _e=await cr.decrypt(t.encryptedPrivateKey,e),We=Uint8Array.from(JSON.parse(_e)),Ke=ha.fromSecretKey(We),it=await Ds.transferSol(Ke,t.ownerPublicKey,he.amount);s("Transfer",`Withdrew ${he.amount} SOL to Owner`,it);const st={type:"transaction",network:"solana",status:"success",title:"Withdraw Executed",description:"SOL transferred to Owner wallet",txHash:it,explorerUrl:`https://solscan.io/tx/${it}`,details:{from:t.publicKey,to:t.ownerPublicKey,amount:he.amount,token:"SOL"}};oe.push({type:"success",title:"Withdraw Executed",details:`Sent ${he.amount} SOL to Owner`,tx:it,structuredData:{resultType:"transaction",items:[st],title:"Withdraw Completed"}}),i(t.publicKey)}catch(_e){oe.push({type:"error",title:"Withdraw Error",details:_e.message})}else if(Me==="transferToken")if(b("Transferring Token..."),!t.isUnlocked||!t.encryptedPrivateKey)oe.push({type:"error",title:"Transfer Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)oe.push({type:"error",title:"Transfer Failed",details:"No Owner Wallet connected."});else try{const _e=await cr.decrypt(t.encryptedPrivateKey,e),We=Uint8Array.from(JSON.parse(_e)),Ke=ha.fromSecretKey(We),it=o(he.tokenMint),st=(U=t.assets)==null?void 0:U.find(Ut=>Ut.mint===it),ut=st?st.decimals:9,Je=(st==null?void 0:st.symbol)||he.tokenMint,Le=await Ds.transferToken(Ke,it,t.ownerPublicKey,he.amount,ut);s("Transfer",`Sent ${he.amount} ${Je} to Owner`,Le);const et={type:"transaction",network:"solana",status:"success",title:"Transfer Executed",description:`${Je} transferred to Owner wallet`,txHash:Le,explorerUrl:`https://solscan.io/tx/${Le}`,details:{from:t.publicKey,to:t.ownerPublicKey,amount:he.amount,token:Je}};oe.push({type:"success",title:"Transfer Executed",details:`Sent ${he.amount} of ${Je} to Owner`,tx:Le,structuredData:{resultType:"transaction",items:[et],title:"Transfer Completed"}}),i(t.publicKey)}catch(_e){oe.push({type:"error",title:"Transfer Error",details:_e.message})}else if(Me==="executeSwap")if(!t.isUnlocked||!t.encryptedPrivateKey)oe.push({type:"error",title:"Swap Failed",details:"Vault is locked."});else try{const _e=await cr.decrypt(t.encryptedPrivateKey,e),We=Uint8Array.from(JSON.parse(_e)),Ke=ha.fromSecretKey(We),it=o(he.inputToken),st=o(he.outputToken),ut=await Ds.executeSwap(Ke,it,st,he.amount,Le=>b(Le));s("Swap",`Swapped ${he.amount} ${he.inputToken} -> ${he.outputToken}`,ut);const Je={type:"transaction",network:"solana",status:"success",title:"Swap Executed",description:`${he.inputToken}  ${he.outputToken}`,txHash:ut,explorerUrl:`https://solscan.io/tx/${ut}`,details:{amount:he.amount,token:`${he.inputToken}  ${he.outputToken}`}};oe.push({type:"success",title:"Swap Executed",details:`Swapped ${he.amount} ${he.inputToken} for ${he.outputToken}`,tx:ut,structuredData:{resultType:"transaction",items:[Je],title:"Swap Completed"}}),t.publicKey&&i(t.publicKey)}catch(_e){if((A=_e.message)!=null&&A.includes("timeout")||(I=_e.message)!=null&&I.includes("expired")){console.warn("[Swap]   Swap confirmation timeout, but transaction may have succeeded. Check manually.");const We={type:"transaction",network:"solana",status:"pending",title:"Swap Executed (Slow Confirmation)",description:"Transaction sent but confirmation is slow"};oe.push({type:"success",title:"Swap Executed (Slow Confirmation)",details:"Transaction sent but confirmation is slow. Please verify on explorer.",tx:"Check Explorer",structuredData:{resultType:"transaction",items:[We],title:"Swap Pending Confirmation"}}),i(t.publicKey)}else oe.push({type:"error",title:"Swap Failed",details:_e.message})}else if(Me==="scheduleTask")try{console.log("[Scheduler]  Received scheduleTask call with args:",JSON.stringify(he,null,2));let _e,We;if(he.conditionIndicator&&he.conditionSymbol&&he.conditionOperator&&he.conditionValue!==void 0&&he.conditionTimeframe){let ut=he.conditionIndicator.toLowerCase(),Je=he.conditionSymbol.toUpperCase(),Le=he.conditionTimeframe,et=he.conditionOperator,Ut=parseFloat(he.conditionValue);Je==="BTC"?Je="BTCUSDT":Je==="SOL"?Je="SOLUSDT":Je==="ETH"?Je="ETHUSDT":!Je.includes("USDT")&&!Je.includes("USD")&&(Je=`${Je}USDT`),et==="menor que"||et==="less than"?et="<":et==="maior que"||et==="greater than"?et=">":et==="menor ou igual a"||et==="less than or equal to"?et="<=":et==="maior ou igual a"||et==="greater than or equal to"?et=">=":(et==="igual a"||et==="equal to"||et==="equals")&&(et="=="),We={symbol:Je,indicator:ut,operator:et,value:Ut,timeframe:Le},console.log("[Scheduler]  Condition-based task created:",We)}else if(he.delayMinutes)_e=Date.now()+he.delayMinutes*60*1e3,console.log("[Scheduler]  Time-based task created: executes in",he.delayMinutes,"minutes");else{console.error("[Scheduler]  Missing required parameters for scheduling"),oe.push({type:"error",title:"Scheduling Failed",details:"Missing required parameters. Please provide either time delay or condition details."});continue}let Ke={};if(he.taskType==="SWAP")Ke={inputToken:he.inputToken,outputToken:he.outputToken,amount:he.amount};else if(he.taskType==="TRANSFER"){let ut=he.inputToken;ut==="SOL"||ut==="sol"?ut="So11111111111111111111111111111111111111112":ut=o(ut),Ke={amount:he.amount,tokenMint:ut}}else he.taskType==="ALERT"?Ke={}:he.taskType==="HL_ORDER"&&(Ke={coin:he.coin,side:he.isBuy?"B":"A",isBuy:he.isBuy,size:he.size,usdcAmount:he.usdcAmount,price:he.price,orderType:he.orderType||"limit",leverage:he.leverage||1,stopLoss:he.stopLoss,takeProfit:he.takeProfit,reduceOnly:he.reduceOnly||!1});const it={id:Date.now().toString(),type:he.taskType,params:JSON.stringify(Ke),executeAt:_e,condition:We,status:"active",createdAt:Date.now()};n(ut=>{const Je=[...ut,it];return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(Je)),Je});let st="";if(We)st=`${he.taskType} scheduled to execute when ${We.indicator.toUpperCase()} of ${We.symbol} (${We.timeframe}) ${We.operator} ${We.value}`;else if(_e){const ut=Math.round((_e-Date.now())/1e3);st=`${he.taskType} scheduled to execute in ${ut} seconds`}oe.push({type:"info",title:"Task Scheduled",details:st})}catch(_e){console.error("[Scheduler] Error scheduling task:",_e),oe.push({type:"error",title:"Scheduling Failed",details:_e.message})}else if(Me==="getMarketPrice")try{b("Fetching Market Price...");const _e=await Co.getMarketPrice(he.symbol);oe.push({type:"success",title:"Market Price",details:`${he.symbol}: ${_e.price} (${_e.exchange})`})}catch(_e){oe.push({type:"error",title:"Market Data Error",details:_e.message})}else if(Me==="getOHLCV")try{b("Fetching OHLCV Data...");const _e=await Co.getOHLCV(he.symbol,he.timeframe);oe.push({type:"success",title:"OHLCV Data",details:`${he.symbol} [${he.timeframe||"60"}]: O:${_e.open} H:${_e.high} L:${_e.low} C:${_e.close} V:${_e.volume}`})}catch(_e){oe.push({type:"error",title:"OHLCV Error",details:_e.message})}else if(Me==="getIndicator")try{b(`Calculating ${he.indicator}...`);const _e=await Co.getIndicator(he.symbol,he.indicator,he.timeframe);let We=_e.value;typeof _e.value=="object"&&_e.value!==null&&(We=JSON.stringify(_e.value,null,2)),oe.push({type:"success",title:"Technical Indicator",details:`${he.symbol} ${_e.indicator.toUpperCase()}: ${We}`})}catch(_e){oe.push({type:"error",title:"Indicator Error",details:_e.message})}else if(Me==="getTradingViewSummary")try{b("Fetching TradingView Summary...");const _e=await Co.getTradingViewSummary(he.symbol);oe.push({type:"success",title:"TradingView Summary",details:`${he.symbol}: ${_e.recommendation} (Buy:${_e.buy} Sell:${_e.sell} Neutral:${_e.neutral})`})}catch(_e){oe.push({type:"error",title:"Summary Error",details:_e.message})}else if(Me==="getHLBalance")try{if(!t.hlPublicKey)oe.push({type:"error",title:"HL Error",details:"Hyperliquid Vault not created/unlocked."});else{b("Fetching HL Balance...");const _e=await Un.getUserState(t.hlPublicKey);console.log("[HL Debug] FULL USER STATE:",JSON.stringify(_e,null,2));const We=parseFloat(_e.marginSummary.accountValue),Ke=parseFloat(_e.withdrawable),it=_e.assetPositions.filter(Le=>parseFloat(Le.position.szi)!==0);let st=`USDC Account Value: $${We.toFixed(2)}`;st+=`
Withdrawable: $${Ke.toFixed(2)}`,it.length>0?(st+=`

Open Positions:`,it.forEach(Le=>{st+=`
 ${Le.position.coin} ${parseFloat(Le.position.szi)>0?"LONG":"SHORT"} ${Math.abs(parseFloat(Le.position.szi))} @ ${Le.position.entryPx}`})):st+=`
No open positions.`;const ut={type:"balance",network:"hyperliquid",token:{symbol:"USDC"},amount:We,valueUsd:We},Je=it.map(Le=>{var ie;const et=parseFloat(Le.position.szi),Ut=parseFloat(Le.position.entryPx),Ie=parseFloat(Le.position.unrealizedPnl||0),qe=parseFloat(((ie=Le.position.leverage)==null?void 0:ie.value)||1),yt=parseFloat(Le.position.marginUsed||0),ht=parseFloat(Le.position.liquidationPx||0);return{type:"position",protocol:"hyperliquid",coin:Le.position.coin,direction:et>0?"long":"short",size:Math.abs(et),entryPrice:Ut,valueUsd:Math.abs(et)*Ut,leverage:qe,marginUsed:yt,liquidationPrice:ht>0?ht:void 0,pnl:{value:Ie,percent:Ie/(yt||1)*100}}});oe.push({type:"success",title:"Hyperliquid Balance",details:st,structuredData:{resultType:it.length>0?"positions":"balance",items:it.length>0?[ut,...Je]:[ut],title:"Hyperliquid Account",summary:it.length>0?`$${We.toFixed(2)}  ${it.length} position${it.length>1?"s":""}`:`$${We.toFixed(2)}`}})}}catch(_e){oe.push({type:"error",title:"HL Balance Error",details:_e.message})}else if(Me==="getHLMarketData")try{b("Fetching HL Market Data...");const _e=await Un.getMarketData(he.coin),We=_e.levels[0][0].px,Ke=_e.levels[1][0].px;oe.push({type:"success",title:`Hyperliquid ${he.coin}`,details:`Best Bid: ${We}
Best Ask: ${Ke}`})}catch(_e){oe.push({type:"error",title:"HL Market Data Error",details:_e.message})}else if(Me==="createHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)oe.push({type:"error",title:"Order Failed",details:"Vault is locked."});else try{b("Placing HL Order...");const _e=await cr.decrypt(t.hlEncryptedPrivateKey,e),We=zt.getWalletFromPrivateKey(_e);he.leverage&&await Un.updateLeverage(We,he.coin,he.leverage,!1);let Ke=he.size,it=he.price,st=he.orderType||"limit",ut;const Je=st==="market";if(he.usdcAmount&&!he.size||Je&&!he.price){console.log(`[HL Order]  Fetching price for ${Je?"Market Order":"USDC Calc"}`),b("Fetching current price...");const Se=await Un.getMarketData(he.coin),de=parseFloat(Se.levels[0][0].px),ge=parseFloat(Se.levels[1][0].px),Qe=he.isBuy?ge:de;if(ut=Qe,he.usdcAmount&&!Ke){console.log(`[HL Order]  Fetching decimals for ${he.coin}`);const tt=await Un.getAssetDecimals(he.coin);console.log(`[HL Order]  ${he.coin} decimals: ${tt}`);const lt=he.usdcAmount/Qe;Ke=parseFloat(lt.toFixed(tt)),console.log(`[HL Order]  USDC: ${he.usdcAmount} / Price: ${Qe} = Raw Size: ${lt} -> Rounded: ${Ke}`)}if(Je){let lt=he.isBuy?Qe*1.05:Qe*.95;console.log("[HL Order]  Fetching decimals for price rounding");const wt=6-await Un.getAssetDecimals(he.coin);let Ot=parseFloat(lt.toFixed(wt));Ot=parseFloat(Ot.toPrecision(5)),it=parseFloat(Ot.toFixed(wt)),st="ioc",console.log(`[HL Order]  Market Order: Base ${Qe} -> Raw ${lt.toFixed(6)} -> Rounded ${it}`)}}if(!Ke)throw new Error("Either size or usdcAmount must be provided");if(st==="limit"&&it){const Se=await Un.getAssetDecimals(he.coin),de=Math.max(0,6-Se);let ge=parseFloat(it.toFixed(de));ge=parseFloat(ge.toPrecision(5)),it=parseFloat(ge.toFixed(de)),console.log(`[HL Order]   Limit price rounded: ${he.price} -> ${it} (maxDecimals=${de})`)}if(st==="limit"&&!it)throw new Error("Price is required for Limit orders");let et=he.stopLoss,Ut=he.takeProfit;const Ie=ut||it;Ie&&(he.stopLoss&&he.stopLoss<100&&(he.isBuy?et=Ie*(1-he.stopLoss/100):et=Ie*(1+he.stopLoss/100),console.log(`[HL Order]  SL %: ${he.stopLoss}% -> Absolute: ${et==null?void 0:et.toFixed(2)} (from base ${Ie})`)),he.takeProfit&&he.takeProfit<100&&(he.isBuy?Ut=Ie*(1+he.takeProfit/100):Ut=Ie*(1-he.takeProfit/100),console.log(`[HL Order]  TP %: ${he.takeProfit}% -> Absolute: ${Ut==null?void 0:Ut.toFixed(2)} (from base ${Ie})`))),b("Placing HL Order...");const qe=await Un.createOrder(We,he.coin,he.isBuy,Ke,it,{orderType:st,reduceOnly:he.reduceOnly||!1,stopLoss:et,takeProfit:Ut}),yt=(he.orderType||"limit").toUpperCase(),ht=he.leverage?` (${he.leverage}x leverage)`:"",ie=it?` @ ${it}`:"",J=he.usdcAmount?` (${he.usdcAmount} USDC)`:"",Z=et||Ut?` [SL: ${et?et.toFixed(2):"none"}, TP: ${Ut?Ut.toFixed(2):"none"}]`:"",ue={type:"transaction",network:"hyperliquid",status:"success",title:"Order Placed",description:`${yt} ${he.isBuy?"LONG":"SHORT"} ${he.coin}`,details:{amount:Ke,token:he.coin}};oe.push({type:"success",title:"Order Placed",details:`Placed ${yt} ${he.isBuy?"LONG":"SHORT"} ${Ke.toFixed(4)} ${he.coin}${J}${ie}${ht}${Z}`,structuredData:{resultType:"transaction",items:[ue],title:"Order Executed"}})}catch(_e){oe.push({type:"error",title:"Order Failed",details:_e.message})}else if(Me==="updateHLLeverage")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)oe.push({type:"error",title:"Leverage Update Failed",details:"Vault is locked."});else try{b("Updating Leverage...");const _e=await cr.decrypt(t.hlEncryptedPrivateKey,e),We=zt.getWalletFromPrivateKey(_e),Ke=await Un.updateLeverage(We,he.coin,he.leverage,he.isCross);oe.push({type:"success",title:"Leverage Updated",details:`Set ${he.coin} leverage to ${he.leverage}x (${he.isCross?"Cross":"Isolated"})`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"success",title:"Leverage Updated",description:`${he.coin} leverage set to ${he.leverage}x ${he.isCross?"Cross":"Isolated"}`}],title:"Leverage Updated"}})}catch(_e){oe.push({type:"error",title:"Leverage Update Failed",details:_e.message})}else if(Me==="closeHLPosition")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)oe.push({type:"error",title:"Close Failed",details:"Vault is locked."});else try{b("Closing Position...");const _e=await cr.decrypt(t.hlEncryptedPrivateKey,e),We=zt.getWalletFromPrivateKey(_e);try{b("Closing HL Position...");try{const Ke=await Un.closePosition(We,he.coin,he.size,he.orderType||"market",he.price);oe.push({type:"success",title:"Position Closed",details:`Closed ${he.size?he.size:"entire"} ${he.coin} position via ${he.orderType||"market"} order`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"success",title:"Position Closed",description:`Closed ${he.size?he.size+" ":""}${he.coin} position via ${he.orderType||"market"} order`,details:he.size?{amount:he.size,token:he.coin}:void 0}],title:"Position Closed"}})}catch(Ke){if(Ke.message&&Ke.message.includes("Insufficient margin")){console.log("[HL Close] Insufficient margin detected. Attempting to Add Isolated Margin..."),b("Insufficient Margin. Adding Funds...");const it=await Un.getUserState(We.address),st=it.assetPositions.find(ut=>ut.position.coin===he.coin);if(st){const Je=parseFloat(st.position.szi)>0,Le=parseFloat(it.withdrawable);let et=20;if(Le<25&&(et=Math.max(0,Le-2)),et<1)throw new Error(`Insufficient margin to close and wallet balance is too low ($${Le.toFixed(2)}) to add more margin.`);console.log(`[HL Close] Wallet Balance: ${Le}, Adding Margin: ${et}`),await Un.updateIsolatedMargin(We,he.coin,Je,et),console.log("[HL Close] Retrying close after adding margin..."),b("Retrying Close Position..."),await Un.closePosition(We,he.coin,he.size,he.orderType||"market",he.price),oe.push({type:"success",title:"Position Closed (Recovered)",details:`Added ${et.toFixed(2)} USDC margin to cover loss and closed ${he.coin} position successfully.`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"success",title:"Position Closed (Recovered)",description:`Added ${et.toFixed(2)} USDC margin and closed ${he.coin} position`}],title:"Position Closed"}})}else throw new Error("Position not found during margin recovery.")}else if(Ke.message&&Ke.message.includes("Cross margin is not allowed"))oe.push({type:"error",title:"Close Failed",details:"Cross margin not supported and insufficient isolated margin."});else throw Ke}}catch(Ke){oe.push({type:"error",title:"Close Failed",details:Ke.message})}}catch(_e){oe.push({type:"error",title:"Close Failed",details:_e.message})}else if(Me==="cancelHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)oe.push({type:"error",title:"Cancel Failed",details:"Vault is locked."});else try{b("Cancelling HL Order...");const _e=await cr.decrypt(t.hlEncryptedPrivateKey,e),We=zt.getWalletFromPrivateKey(_e),Ke=await Un.cancelOrder(We,he.coin,he.orderId);oe.push({type:"success",title:"Order Cancelled",details:`Cancelled Order ${he.orderId}. Status: ${Ke.status}`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"success",title:"Order Cancelled",description:`Order ${he.orderId} for ${he.coin} cancelled`}],title:"Order Cancelled"}})}catch(_e){oe.push({type:"error",title:"Cancel Failed",details:_e.message})}else if(Me==="withdrawFromHL")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)oe.push({type:"error",title:"Withdrawal Failed",details:"Hyperliquid Vault is locked."});else if(!t.hlOwnerPublicKey)oe.push({type:"error",title:"Withdrawal Failed",details:"No Hyperliquid Owner Wallet connected. Please connect your MetaMask wallet first."});else if(t.hlOwnerPublicKey&&!t.hlOwnerPublicKey.startsWith("0x"))oe.push({type:"error",title:"Withdrawal Failed",details:`Invalid Hyperliquid Owner Address: ${t.hlOwnerPublicKey}. It must be an EVM address (start with 0x). You might be trying to send to a Solana wallet.`});else try{b("Withdrawing from Hyperliquid...");const _e=await cr.decrypt(t.hlEncryptedPrivateKey,e),We=zt.getWalletFromPrivateKey(_e),Ke=await Un.withdrawUSDC(We,t.hlOwnerPublicKey,he.amount);s("HL Withdrawal",`Withdrew ${he.amount} USDC from Hyperliquid`,((te=(K=(q=(L=Ke.response)==null?void 0:L.data)==null?void 0:q.statuses)==null?void 0:K[0])==null?void 0:te.tx)||"pending"),oe.push({type:"success",title:"Hyperliquid Withdrawal Initiated",details:`Withdrawing ${he.amount} USDC to ${t.hlOwnerPublicKey.slice(0,6)}...${t.hlOwnerPublicKey.slice(-4)}. Fee: $1 USDC. ETA: ~5 minutes.`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"pending",title:"Withdrawal Initiated",description:`${he.amount} USDC to ${t.hlOwnerPublicKey.slice(0,6)}...${t.hlOwnerPublicKey.slice(-4)}`,details:{amount:he.amount,token:"USDC",fee:1}}],title:"Withdrawal Pending"}})}catch(_e){(Y=_e.message)!=null&&Y.includes("Must deposit before performing actions")?oe.push({type:"error",title:"Deposit Required",details:"Your Hyperliquid account needs an initial deposit before you can perform any actions. Please deposit USDC to your Hyperliquid vault address first."}):oe.push({type:"error",title:"Withdrawal Error",details:_e.message})}else if(Me==="getHLTransfers")if(!t.hlPublicKey)oe.push({type:"error",title:"HL Error",details:"Hyperliquid Vault not created/unlocked."});else try{b("Fetching Transfer History...");const _e=await Un.getUserLedgerUpdates(t.hlPublicKey);if(_e.length===0)oe.push({type:"success",title:"Transfer History",details:"No deposits or withdrawals found."});else{const We=Date.now(),Ke=_e.slice(0,10).map(it=>{const st=new Date(it.time),ut=it.delta.amount>0?"Deposit":"Withdrawal",Je=Math.abs(parseFloat(it.delta.amount)),Le=We-it.time<600*1e3?"Processing/Recent":"Completed";return` ${ut} $${Je.toFixed(2)} USDC - ${st.toLocaleString()} (${Le})`}).join(`
`);oe.push({type:"success",title:"Hyperliquid Transfers",details:`Last 10 updates:
${Ke}`,structuredData:{resultType:"transaction",items:_e.map(it=>({type:"transaction",network:"hyperliquid",status:"success",title:it.delta.amount>0?"Deposit":"Withdrawal",description:`${it.delta.amount>0?"Deposit":"Withdrawal"} of $${Math.abs(parseFloat(it.delta.amount)).toFixed(2)} USDC`,details:{amount:Math.abs(parseFloat(it.delta.amount)),token:"USDC",timestamp:it.time}})),title:"Transfer History"}})}}catch(_e){oe.push({type:"error",title:"Transfer History Error",details:_e.message})}else if(Me==="getDealerTradeHistory")try{b("Querying Dealer history...");const _e=he.coin||void 0,We=Math.min(he.limit||10,50),Ke=he.includeReasoning!==!1,it=mt.getSnapshot(),st=mt.getTradeHistory(_e,We,Ke);if(st.operations.length===0&&st.recentLogs.length===0){let ut="";_e?ut=`No h histrico de operaes em ${_e}. O Dealer no executou trades nessa moeda.`:it.logs.length===0?ut="Sem histrico disponvel. O Dealer ainda no executou nenhum trade ou o histrico foi limpo.":ut="O Dealer analisou o mercado mas no executou nenhum trade ainda. Os sinais recebidos no atingiram o nvel de confiana necessrio.",oe.push({type:"success",title:"Dealer History",details:ut})}else{let ut="";st.operations.length>0&&(ut+=` **TRADE OPERATIONS** (${st.totalOperations} total)

`,st.operations.forEach((Je,Le)=>{var Ie,qe;const et=Je.pnl!==void 0?` | PnL: ${Je.pnl>=0?"+":""}$${Je.pnl.toFixed(2)}`:"",Ut=Je.status==="OPEN"?"":"";ut+=`${Ut} **${Je.action} ${Je.coin}** @ $${((Ie=Je.entryPrice)==null?void 0:Ie.toFixed(2))||"N/A"}${et}
`,ut+=`   Size: ${Je.size} ($${(qe=Je.sizeUSDC)==null?void 0:qe.toFixed(2)}) | Confidence: ${(Je.confidence*100).toFixed(0)}%
`,Ke&&Je.fullReasoning&&(ut+=`   **Reasoning:** ${Je.fullReasoning}
`),ut+=`   Time: ${new Date(Je.timestamp).toLocaleString()}

`})),st.operations.length===0&&st.recentLogs.length>0&&(ut+=` **RECENT ANALYSIS LOGS**

`,st.recentLogs.forEach(Je=>{var Le;ut+=` [${Je.type}] ${Je.message}
`,(Le=Je.details)!=null&&Le.fullReason&&(ut+=`  Reasoning: ${Je.details.fullReason}
`)})),oe.push({type:"success",title:_e?`Dealer History: ${_e}`:"Dealer Trade History",details:ut.trim()})}}catch(_e){oe.push({type:"error",title:"Dealer History Error",details:_e.message})}else if(Me==="getHLDealerThinking")try{b(" Fetching Hyperliquid Dealer thinking...");const _e=Fc.getSnapshot("hyperliquid"),We=Math.min(he.cycleIndex||0,2),Ke=_e.recentCycles[We];if(!Ke&&!_e.aiSummary)oe.push({type:"success",title:"Hyperliquid Dealer Thinking",details:"O Hyperliquid Dealer ainda no executou nenhum ciclo de anlise. Ative o Dealer e aguarde o primeiro ciclo."});else{const it={type:"hl-thinking",cycleTimestamp:(Ke==null?void 0:Ke.timestamp)||Date.now(),cycleNumber:Ke==null?void 0:Ke.cycleNumber,aiSummary:_e.aiSummary||void 0,decisions:((Ke==null?void 0:Ke.decisions)||[]).map(Je=>({asset:Je.asset,action:Je.action,confidence:Je.confidence})),assetsAnalyzed:(Ke==null?void 0:Ke.assetsAnalyzed)||[]},st=mt.getSnapshot().logs.filter(Je=>Je.type==="REASONING"||Je.type==="SIGNAL").slice(0,3);let ut=`Cycle #${(Ke==null?void 0:Ke.cycleNumber)||"Latest"}`;st.length>0&&(ut+=`

Recent signals:
`+st.map(Je=>` ${Je.message}`).join(`
`)),oe.push({type:"success",title:"Hyperliquid Dealer Thinking",details:ut,structuredData:{resultType:"hl-thinking",items:[it],title:"Hyperliquid Dealer Analysis"}})}}catch(_e){oe.push({type:"error",title:"HL Dealer Thinking Error",details:_e.message})}else if(Gmt(Me))try{const _e=await qmt(Me,he,t.publicKey||void 0,We=>b(We));_e&&oe.push(_e)}catch(_e){oe.push({type:"error",title:"LP Tool Error",details:_e.message})}}let ve="";if(ae.candidates&&ae.candidates[0].content&&ae.candidates[0].content.parts)for(const ze of ae.candidates[0].content.parts)ze.text&&(ve+=ze.text);let ke="I processed your request.";if(oe.length>0){const ze=oe.some(he=>he.type==="error"),Me=oe.some(he=>he.type==="success");ze&&!Me?ke="I encountered an issue executing that command.":Me?ke="Action completed successfully.":ze&&Me&&(ke="Some actions completed, but others failed.")}const pe={id:(Date.now()+1).toString(),role:"model",content:ve||ke,timestamp:Date.now(),toolResults:oe};l(ze=>{const Me=[...ze,pe];if(t.isUnlocked&&e&&G){const he={id:G,title:ze.length>0&&ze[0].role==="user"?ra.generateTitle(ze[0].content):"Conversation",lastMessage:pe.content.substring(0,50),timestamp:Date.now(),messages:Me};ra.saveConversation(he,e).catch(_e=>console.error("Auto-save after model response failed",_e))}return Me})}catch(V){console.error("AI Error:",V);const M={id:Date.now().toString(),role:"model",content:"Sorry, I encountered a system error while processing that request.",toolResults:[{type:"error",title:"System Error",details:V.message}],timestamp:Date.now()};l(P=>{const W=[...P,M];if(t.isUnlocked&&e&&G){const X={id:G,title:P.length>0&&P[0].role==="user"?ra.generateTitle(P[0].content):"Conversation",lastMessage:M.content.substring(0,50),timestamp:Date.now(),messages:W};ra.saveConversation(X,e).catch(se=>console.error("Auto-save after error response failed",se))}return W})}finally{v(!1),b("")}}}},Sg="/poly-clob",yT="/poly-gamma",Wmt="/poly-data",Hee=200,Ymt=3;class Jmt{constructor(){this.privateKey=null,this.wallet=null,this.apiCredentials=null,this.lastRequestTime=0,this.isInitialized=!1}createWallet(){return xh.createRandom()}getWalletFromPrivateKey(e){return new xh(e)}async initialize(e){try{return this.privateKey=e,this.wallet=new xh(e),this.apiCredentials=await this.createOrDeriveApiKeys(),this.isInitialized=!0,console.log("[PolymarketService] Initialized with address:",this.wallet.address),!0}catch(n){return console.error("[PolymarketService] Failed to initialize:",n),!1}}getIsInitialized(){return this.isInitialized}getAddress(){var e;return((e=this.wallet)==null?void 0:e.address)||null}async throttledFetch(e,n){const i=Date.now()-this.lastRequestTime;i<Hee&&await new Promise(o=>setTimeout(o,Hee-i)),this.lastRequestTime=Date.now();let s=null;for(let o=0;o<Ymt;o++)try{const a=await fetch(e,n);if(a.status===429){const l=parseInt(a.headers.get("Retry-After")||"1",10);console.warn(`[PolymarketService] Rate limited, waiting ${l}s...`),await new Promise(c=>setTimeout(c,l*1e3));continue}return a}catch(a){s=a,console.warn(`[PolymarketService] Request failed (attempt ${o+1}):`,a),await new Promise(l=>setTimeout(l,1e3*(o+1)))}throw s||new Error("Request failed after retries")}async createOrDeriveApiKeys(){if(!this.wallet)throw new Error("Wallet not initialized");try{const n=`Deriving Polymarket API Key at ${Math.floor(Date.now()/1e3)}`,r=await this.wallet.signMessage(n),i=Kn(vi(r+"apiKey")).slice(0,34),s=Kn(vi(r+"secret")).slice(0,66),o=Kn(vi(r+"passphrase")).slice(0,18);return{apiKey:i,secret:s,passphrase:o}}catch(e){throw console.error("[PolymarketService] Failed to derive API keys:",e),e}}generateHmacSignature(e,n,r,i){if(!this.apiCredentials)throw new Error("API credentials not initialized");const s=r+e+n+(i||"");return Kn(vi(this.apiCredentials.secret+s))}getAuthHeaders(e,n,r){if(!this.apiCredentials||!this.wallet)throw new Error("Service not initialized");const i=Math.floor(Date.now()/1e3).toString(),s=this.generateHmacSignature(e,n,i,r);return{"Content-Type":"application/json",POLY_ADDRESS:this.wallet.address,POLY_API_KEY:this.apiCredentials.apiKey,POLY_PASSPHRASE:this.apiCredentials.passphrase,POLY_SIGNATURE:s,POLY_TIMESTAMP:i}}async getActiveMarkets(e,n=50,r=0){try{let i=`${yT}/events?active=true&closed=false&limit=${n}&offset=${r}`;e&&(i+=`&tag=${e}`);const s=await this.throttledFetch(i);if(!s.ok)throw new Error(`Failed to fetch markets: ${s.status}`);const o=await s.json(),a=[];for(const l of o)if(l.markets&&Array.isArray(l.markets))for(const c of l.markets)a.push(this.transformMarket(c,l));return a}catch(i){return console.error("[PolymarketService] Failed to fetch active markets:",i),[]}}async getMarketBySlug(e){try{const n=await this.throttledFetch(`${yT}/markets/slug/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Failed to fetch market: ${n.status}`)}const r=await n.json();return this.transformMarket(r)}catch(n){return console.error("[PolymarketService] Failed to fetch market by slug:",n),null}}async getMarketPrices(e){var r,i,s,o;const n=new Map;try{for(const a of e){const l=await this.throttledFetch(`${Sg}/book?token_id=${a}`);if(l.ok){const c=await l.json(),d=((i=(r=c.bids)==null?void 0:r[0])==null?void 0:i.price)||0,h=((o=(s=c.asks)==null?void 0:s[0])==null?void 0:o.price)||1,m=(parseFloat(d)+parseFloat(h))/2;n.set(a,{yes:m,no:1-m})}}}catch(a){console.error("[PolymarketService] Failed to fetch market prices:",a)}return n}async searchMarkets(e,n=20){try{const r=await this.throttledFetch(`${yT}/search/events?search_string=${encodeURIComponent(e)}&limit=${n}`);if(!r.ok)throw new Error(`Search failed: ${r.status}`);const i=await r.json(),s=[];for(const o of i)if(o.markets&&Array.isArray(o.markets))for(const a of o.markets)s.push(this.transformMarket(a,o));return s}catch(r){return console.error("[PolymarketService] Failed to search markets:",r),[]}}transformMarket(e,n){var r,i,s,o,a,l,c,d;return{id:e.id||e.condition_id,conditionId:e.condition_id||e.conditionId||"",questionId:e.question_id||e.questionId||"",slug:e.slug||"",question:e.question||(n==null?void 0:n.title)||"",description:e.description||(n==null?void 0:n.description)||"",tokenIdYes:((i=(r=e.tokens)==null?void 0:r[0])==null?void 0:i.token_id)||((s=e.clobTokenIds)==null?void 0:s[0])||"",tokenIdNo:((a=(o=e.tokens)==null?void 0:o[1])==null?void 0:a.token_id)||((l=e.clobTokenIds)==null?void 0:l[1])||"",priceYes:parseFloat((c=e.outcomePrices)==null?void 0:c[0])||.5,priceNo:parseFloat((d=e.outcomePrices)==null?void 0:d[1])||.5,volume24h:parseFloat(e.volume24hr)||0,liquidity:parseFloat(e.liquidity)||0,endDate:e.endDate||e.end_date_iso||"",category:this.categorizeMarket((n==null?void 0:n.tags)||[]),active:e.active!==!1,resolved:e.resolved||!1,outcome:e.outcome||null}}categorizeMarket(e){const n=e.join(" ").toLowerCase();return n.includes("crypto")||n.includes("bitcoin")||n.includes("ethereum")?"crypto":n.includes("politic")||n.includes("election")||n.includes("government")?"politics":n.includes("sport")||n.includes("nfl")||n.includes("nba")||n.includes("soccer")?"sports":n.includes("business")||n.includes("economy")||n.includes("stock")?"business":n.includes("science")||n.includes("tech")||n.includes("ai")?"science":n.includes("culture")||n.includes("entertainment")||n.includes("celebrity")?"pop-culture":"other"}async getBalance(){if(!this.wallet)return 0;try{const e="https://polygon-rpc.com",n="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",r=new TIe(e),i=["function balanceOf(address) view returns (uint256)"],o=await new dy(n,i,r).balanceOf(this.wallet.address);return parseFloat(Bre(o,6))}catch(e){return console.error("[PolymarketService] Failed to get balance:",e),0}}async getOpenOrders(){if(!this.isInitialized)return[];try{const e="/orders",n=this.getAuthHeaders("GET",e),r=await this.throttledFetch(`${Sg}${e}`,{method:"GET",headers:n});if(!r.ok)throw new Error(`Failed to fetch orders: ${r.status}`);return(await r.json()).map(s=>this.transformOrder(s))}catch(e){return console.error("[PolymarketService] Failed to fetch open orders:",e),[]}}async getPositions(){if(!this.wallet)return[];try{const e=this.wallet.address,n=await this.throttledFetch(`${Wmt}/positions?user=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Failed to fetch positions: ${n.status}`)}const r=await n.json();return Array.isArray(r)?r.map(i=>this.transformPosition(i)):[]}catch(e){return console.error("[PolymarketService] Failed to fetch positions:",e),[]}}async getTrades(e=20){if(!this.isInitialized)return[];try{const n=`/trades?limit=${e}`,r=this.getAuthHeaders("GET",n),i=await this.throttledFetch(`${Sg}${n}`,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch trades: ${i.status}`);return(await i.json()).map(o=>this.transformTrade(o))}catch(n){return console.error("[PolymarketService] Failed to fetch trades:",n),[]}}async createOrder(e){if(!this.isInitialized)return{success:!1,error:"Service not initialized"};try{const n={tokenID:e.tokenId,price:e.price.toString(),size:e.size.toString(),side:e.side,orderType:"GTC",tickSize:e.tickSize||"0.01",negRisk:e.negRisk||!1},r="/order",i=JSON.stringify(n),s=this.getAuthHeaders("POST",r,i),o=await this.throttledFetch(`${Sg}${r}`,{method:"POST",headers:s,body:i});if(!o.ok)return{success:!1,error:(await o.json().catch(()=>({}))).message||`Order failed: ${o.status}`};const a=await o.json();return{success:!0,orderId:a.orderID||a.order_id}}catch(n){return console.error("[PolymarketService] Failed to create order:",n),{success:!1,error:n.message}}}async cancelOrder(e){if(!this.isInitialized)return!1;try{const n=`/order/${e}`,r=this.getAuthHeaders("DELETE",n);return(await this.throttledFetch(`${Sg}${n}`,{method:"DELETE",headers:r})).ok}catch(n){return console.error("[PolymarketService] Failed to cancel order:",n),!1}}async cancelAllOrders(){if(!this.isInitialized)return!1;try{const e="/orders",n=this.getAuthHeaders("DELETE",e);return(await this.throttledFetch(`${Sg}${e}`,{method:"DELETE",headers:n})).ok}catch(e){return console.error("[PolymarketService] Failed to cancel all orders:",e),!1}}transformOrder(e){var n;return{id:e.id||e.order_id,marketId:e.market||e.marketId||"",tokenId:e.asset_id||e.tokenId||"",side:((n=e.side)==null?void 0:n.toUpperCase())||"BUY",outcome:e.outcome||"YES",price:parseFloat(e.price)||0,size:parseFloat(e.original_size||e.size)||0,filledSize:parseFloat(e.size_matched||e.filledSize)||0,status:this.mapOrderStatus(e.status),createdAt:new Date(e.created_at||e.createdAt).getTime()}}mapOrderStatus(e){return{open:"OPEN",live:"OPEN",matched:"FILLED",filled:"FILLED",cancelled:"CANCELED",canceled:"CANCELED",partial:"PARTIALLY_FILLED"}[e==null?void 0:e.toLowerCase()]||"OPEN"}transformPosition(e){var c;const n=parseFloat(e.size||e.shares)||0,r=parseFloat(e.avgPrice||e.average_price)||0,i=parseFloat(e.currentPrice||e.price)||r,s=n*r,o=n*i,a=o-s,l=s>0?a/s*100:0;return{marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((c=e.outcome)==null?void 0:c.toUpperCase())||"YES",shares:n,avgPrice:r,currentPrice:i,unrealizedPnl:a,unrealizedPnlPercent:l,costBasis:s,currentValue:o}}transformTrade(e){var n,r;return{id:e.id||e.trade_id,marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((n=e.outcome)==null?void 0:n.toUpperCase())||"YES",side:((r=e.side)==null?void 0:r.toUpperCase())||"BUY",price:parseFloat(e.price)||0,size:parseFloat(e.size)||0,fee:parseFloat(e.fee||e.trading_fee)||0,timestamp:new Date(e.created_at||e.timestamp||e.createdAt).getTime(),realizedPnl:e.realized_pnl?parseFloat(e.realized_pnl):void 0}}async checkHealth(){try{return(await this.throttledFetch(`${yT}/health`)).ok}catch{return!1}}}const ds=new Jmt;class Xmt{async getMarketContext(e){try{const n=new Date(e.endDate),r=new Date,i=Math.max(0,Math.ceil((n.getTime()-r.getTime())/(1e3*60*60*24)));let s="neutral";return e.priceYes>.6?s="bullish":e.priceYes<.4&&(s="bearish"),{market:e,timeToResolution:i,sentiment:s,ts:Date.now()}}catch(n){return console.error("[PolymarketMCP] Failed to get market context:",n),{market:e,timeToResolution:0,ts:Date.now(),error:n.message}}}async getBatchContext(e,n,r,i,s=20){const o=[];try{for(const c of e){const h=(await ds.getActiveMarkets(c,Math.ceil(s/e.length))).filter(m=>m.liquidity>=i.minLiquidity&&m.volume24h>=i.minVolume24h&&m.active&&!m.resolved);for(const m of h){const g=await this.getMarketContext(m);o.push(g)}}const a=n.reduce((c,d)=>c+d.currentValue,0),l=n.reduce((c,d)=>c+d.unrealizedPnl,0);return{markets:o.slice(0,s),portfolio:{balance:r,positions:n,totalExposure:a,unrealizedPnl:l},settings:i,ts:Date.now()}}catch(a){return console.error("[PolymarketMCP] Failed to get batch context:",a),{markets:[],portfolio:{balance:r,positions:n,totalExposure:0,unrealizedPnl:0},settings:i,ts:Date.now()}}}calculatePositionsPnL(e){const n=e.reduce((a,l)=>a+l.costBasis,0),r=e.reduce((a,l)=>a+l.currentValue,0),i=r-n,s=n>0?i/n*100:0,o=e.map(a=>({marketId:a.marketId,question:a.question,outcome:a.outcome,pnl:a.unrealizedPnl,pnlPercent:a.unrealizedPnlPercent}));return{totalCostBasis:n,totalValue:r,totalPnl:i,totalPnlPercent:s,byMarket:o}}buildAnalysisPrompt(e,n,r){const{markets:i,portfolio:s,settings:o}=e,a=i.map(d=>{const h=d.market;return`- "${h.question}" [${h.category}]
  ID: ${h.id} | TokenYES: ${h.tokenIdYes} | TokenNO: ${h.tokenIdNo}
  YES: ${(h.priceYes*100).toFixed(1)}% | Volume24h: $${h.volume24h.toLocaleString()} | Liquidity: $${h.liquidity.toLocaleString()}
  Days to Resolution: ${d.timeToResolution} | Sentiment: ${d.sentiment||"neutral"}`}).join(`
`),l=s.positions.length>0?s.positions.map(d=>`- "${d.question.slice(0,50)}..." ${d.outcome}: ${d.shares.toFixed(2)} shares @ ${(d.avgPrice*100).toFixed(1)}% (PnL: $${d.unrealizedPnl.toFixed(2)})`).join(`
`):"No open positions";return`
POLYMARKET DEALER ANALYSIS
${r?`
=== RECENT ACTIVITY CONTEXT ===
${r}
`:""}
=== STRATEGY ===
${n}

=== PORTFOLIO STATUS ===
Balance: $${s.balance.toFixed(2)} USDC
Total Exposure: $${s.totalExposure.toFixed(2)}
Unrealized PnL: $${s.unrealizedPnl.toFixed(2)}
Open Positions: ${s.positions.length} / ${o.maxOpenPositions}

=== CURRENT POSITIONS ===
${l}

=== AVAILABLE MARKETS (${i.length}) ===
${a}

=== CONSTRAINTS ===
- Max Position Size: $${o.maxPositionSizeUSDC}
- Max Open Positions: ${o.maxOpenPositions}
- Min Market Liquidity: $${o.minLiquidity.toLocaleString()}
- Allowed Categories: ${o.allowedCategories.join(", ")}

=== INSTRUCTIONS ===
Analyze each market and provide trading decisions.
For each decision include:
1. Action: BUY_YES, BUY_NO, SELL_YES, SELL_NO, or HOLD
2. Market ID (use the ID provided)
3. Token ID (use TokenYES for BUY_YES/SELL_YES, TokenNO for BUY_NO/SELL_NO)
4. Confidence (0-100)
5. Reasoning
6. Suggested size in USDC (if applicable)
7. Suggested limit price (if applicable)

Respond in JSON format:
{
  "decisions": [
    {
      "action": "BUY_YES",
      "marketId": "...",
      "question": "...",
      "tokenId": "...",
      "confidence": 75,
      "reason": "...",
      "suggestedSize": 25,
      "suggestedPrice": 0.45
    }
  ],
  "marketOverview": "Brief overall market assessment",
  "riskAssessment": "Brief risk commentary",
  "cycleSummary": "Brief 1-2 sentence summary of this analysis for context in next cycle. Include key observations and actions. Max 300 chars."
}
`}parseAIResponse(e){try{const n=e.match(/\{[\s\S]*\}/);if(!n)return console.error("[PolymarketMCP] No JSON found in AI response"),[];const r=JSON.parse(n[0]);return!r.decisions||!Array.isArray(r.decisions)?[]:r.decisions.map(i=>({action:i.action||"HOLD",marketId:i.marketId||"",question:i.question||"",tokenId:i.tokenId||"",confidence:i.confidence||0,reason:i.reason||"",suggestedSize:i.suggestedSize,suggestedPrice:i.suggestedPrice})).filter(i=>i.action!=="HOLD"&&i.confidence>=60)}catch(n){return console.error("[PolymarketMCP] Failed to parse AI response:",n),[]}}}const c4=new Xmt,qee="polymarket-dealer-cycle",Gee="polymarket-dealer-sync";class Qmt{constructor(){this.isLoopRunning=!1,this.executor=null,ft.subscribe(()=>{const e=ft.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()})}startLoop(){if(this.isLoopRunning)return;const e=ft.getSnapshot();if(!e.isOn)return;console.log("[PolymarketDealerService]  Starting main loop with Web Worker timer (background-safe)..."),this.isLoopRunning=!0,Jk.start(),ft.addLog("INFO","Polymarket Dealer loop started"),this.runCycle();const n=e.settings.checkIntervalSeconds*1e3;Xa.start(qee,n,()=>this.runCycle()),this.startSyncLoop()}startSyncLoop(){Xa.start(Gee,3e4,()=>this.syncPortfolio())}async syncPortfolio(){if(ds.getIsInitialized())try{const[e,n]=await Promise.all([ds.getBalance(),ds.getPositions()]),r=n.reduce((i,s)=>i+s.currentValue,0);ft.updatePortfolioState(n,e,r)}catch(e){console.error("[PolymarketDealerService] Sync error:",e)}}stopLoop(){console.log("[PolymarketDealerService]  Stopping loop..."),Xa.stop(qee),Xa.stop(Gee),Jk.stop(),this.isLoopRunning=!1,ft.addLog("INFO","Polymarket Dealer loop stopped"),ft.setAnalyzing(!1)}setExecutor(e){this.executor=e}async runCycle(){const e=ft.getSnapshot();if(!e.isOn){this.stopLoop();return}if(!ds.getIsInitialized()){ft.addLog("WARNING","Polymarket service not initialized, skipping cycle");return}try{console.log("[PolymarketDealerService] === Starting new cycle ==="),ft.setAnalyzing(!0),ft.setStatusMessage("Starting analysis cycle..."),ft.setCurrentTask("Fetching Markets"),ft.setStatusMessage("Fetching active markets from Polymarket...");const n=e.settings,[r,i]=await Promise.all([ds.getBalance(),ds.getPositions()]),s=i.reduce((w,T)=>w+T.currentValue,0);ft.updatePortfolioState(i,r,s);const o=i.length<n.maxOpenPositions,a=n.bankrollType==="MANUAL"?Math.min(n.manualBankroll,r):r;a<n.maxPositionSizeUSDC&&ft.addLog("WARNING","Insufficient balance for new positions"),ft.setCurrentTask("Building Context"),ft.setStatusMessage("Building market context for AI analysis...");const l=await c4.getBatchContext(n.allowedCategories.length>0?n.allowedCategories:["politics","crypto","business"],i,a,{maxPositionSizeUSDC:n.maxPositionSizeUSDC,maxOpenPositions:n.maxOpenPositions,minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories},20);if(l.markets.length===0){ft.addLog("REASONING","No actionable markets found",{fullReason:`Scanned available markets but none met the filtering criteria.
                    Filters: Min Liquidity: $${n.minLiquidity.toLocaleString()}, Min Volume: $${n.minVolume24h.toLocaleString()}
                    Allowed categories: ${n.allowedCategories.join(", ")}
                    Waiting for better opportunities in the next cycle.`,context:{minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories,availableBankroll:a,openPositions:i.length}}),ft.setAnalyzing(!1),ft.setCurrentTask(""),ft.setStatusMessage("Waiting for next cycle...");return}ft.setStatusDetail("Found "+l.markets.length+" markets to analyze"),ft.setCurrentTask("AI Analysis"),ft.setStatusMessage("Consulting AI for trading decisions...");const c=n.promptMode==="preset"?r2[n.selectedPreset]:n.strategyPrompt,d=Fc.getContextForAI("polymarket");d&&ft.addLog("INFO",` Cycle Summary: Including ${d.length} char context from previous cycles`);const h=c4.buildAnalysisPrompt(l,c,d),m=await Pm.getPolymarketAnalysis(h);if(!m){ft.addLog("ERROR","AI analysis failed - no response"),ft.setAnalyzing(!1);return}const g=c4.parseAIResponse(m);let v="",x;try{const w=m.match(/\{[\s\S]*\}/);if(w){const T=JSON.parse(w[0]);T.marketOverview&&(v=T.marketOverview),T.riskAssessment&&v&&(v+=" | Risk: "+T.riskAssessment),T.cycleSummary&&typeof T.cycleSummary=="string"&&(x=T.cycleSummary.slice(0,350))}}catch{v=m.replace(/\{[\s\S]*\}/,"").trim().slice(0,200)||"Analysis complete"}if(x&&(Fc.setSummary("polymarket",x),ft.addLog("INFO",` AI Summary: ${x.slice(0,80)}...`)),ft.addLog("REASONING",v||"AI Analysis Complete",{fullReason:m,context:{marketsAnalyzed:l.markets.length,currentBalance:r,currentExposure:s,openPositions:i.length,maxPositions:n.maxOpenPositions,allowedCategories:n.allowedCategories,intentsFound:g.length}}),ft.setAnalysisNote(v||"Analyzed "+l.markets.length+" markets"),g.length===0)ft.addLog("REASONING","No trades recommended - HOLD strategy",{fullReason:"After analyzing the available markets, no opportunities met the confidence threshold or risk parameters. Current market conditions suggest holding existing positions.",context:{marketsAnalyzed:l.markets.length,currentBalance:r,recommendation:"HOLD"}}),ft.setCurrentSignal("NEUTRAL"),ft.setStatusDetail("No trades recommended - holding");else{const w=g.filter(O=>O.action.startsWith("BUY")).length,T=g.filter(O=>O.action.startsWith("SELL")).length,N=w>T?"BULLISH":T>w?"BEARISH":"NEUTRAL";ft.addLog("SIGNAL",`${g.length} trading signals - ${N}`,{fullReason:`AI identified ${g.length} trading opportunities across the analyzed markets.
                    ${w} BUY signals and ${T} SELL signals indicate a ${N} overall stance.`,context:{totalIntents:g.length,buySignals:w,sellSignals:T,sentiment:N,intents:g.map(O=>{var j;return{market:O.question.slice(0,60),action:O.action,confidence:O.confidence,reason:(j=O.reason)==null?void 0:j.slice(0,100)}})}}),ft.setCurrentSignal(N),ft.setStatusDetail(`${w} buy signals, ${T} sell signals`)}if(g.length>0&&o&&this.executor){ft.setCurrentTask("Executing Trades"),ft.setStatusMessage("Executing trading decisions...");for(const w of g){if(w.confidence<60){ft.addLog("INFO","Skipping low-confidence intent: "+w.question.slice(0,50));continue}if(i.length>=n.maxOpenPositions){ft.addLog("WARNING","Max positions reached, skipping remaining intents");break}try{await this.executor(w),ft.addLog("TRADE",`${w.action} on "${w.question.slice(0,40)}..."`,{fullReason:w.reason||"Trade executed based on AI analysis",context:{action:w.action,confidence:w.confidence,marketId:w.marketId,question:w.question,suggestedPrice:w.suggestedPrice,suggestedSize:w.suggestedSize}})}catch(T){ft.addLog("ERROR","Failed to execute: "+T.message)}}}ft.setAnalyzing(!1),ft.setCurrentTask(""),ft.setStatusMessage("Cycle complete. Waiting "+n.checkIntervalSeconds+"s..."),ft.setStatusDetail(""),console.log("[PolymarketDealerService] === Cycle complete ===");const b=l.markets.map(w=>w.market.question.slice(0,30));Fc.recordCycle("polymarket",{timestamp:Date.now(),decisions:g.map(w=>({asset:w.question.slice(0,40),action:w.action,confidence:w.confidence/100})),assetsAnalyzed:b})}catch(n){console.error("[PolymarketDealerService] Cycle error:",n),ft.addLog("ERROR","Cycle error: "+n.message),ft.setAnalyzing(!1),ft.setCurrentTask(""),ft.setStatusMessage("Error occurred. Retrying next cycle...")}}}const Zmt=new Qmt;function W0e(t,e){const n=S.useSyncExternalStore(ft.subscribe.bind(ft),ft.getSnapshot.bind(ft)),r=S.useRef(!1);S.useEffect(()=>{if(!t.isUnlocked||!t.pmEncryptedPrivateKey||!e||e.trim()==="")return;(async()=>{try{const g=await cr.decrypt(t.pmEncryptedPrivateKey,e);await ds.initialize(g)?ft.addLog("INFO","Polymarket service initialized"):ft.addLog("ERROR","Failed to initialize Polymarket service")}catch(g){console.error("[usePolymarket] Init error:",g),ft.addLog("ERROR","Initialization error: "+g.message)}})()},[t.isUnlocked,t.pmEncryptedPrivateKey,e]),S.useEffect(()=>{r.current||(Zmt.setExecutor(async m=>{await i(m)}),r.current=!0)},[]);const i=async m=>{var T,N;if(!ds.getIsInitialized()){ft.addLog("ERROR","Service not initialized");return}const g=m.suggestedPrice||.5,v=m.suggestedSize||n.settings.maxPositionSizeUSDC;let x=m.tokenId;if(!x){ft.addLog("WARNING",`Skipping "${(T=m.question)==null?void 0:T.slice(0,40)}..." - tokenId not available`);return}const b=(g*100).toFixed(1);ft.addLog("TRADE",`Executing ${m.action} on "${(N=m.question)==null?void 0:N.slice(0,40)}..." @ ${b}`);const w=await ds.createOrder({tokenId:x,side:m.action==="BUY_YES"||m.action==="BUY_NO"?"BUY":"SELL",price:g,size:Math.floor(v/g)});w.success?(ft.addLog("TRADE",`Order placed: ${w.orderId}`),ft.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.action.includes("YES")?"YES":"NO",action:m.action.startsWith("BUY")?"BUY":"SELL",timestamp:Date.now(),price:g,shares:v/g,sizeUSDC:v,reasoning:m.reason||m.reasoning||"",confidence:m.confidence,status:"OPEN"})):ft.addLog("ERROR",`Order failed: ${w.error}`)};S.useEffect(()=>{if(!n.isOn||!ds.getIsInitialized())return;const m=async()=>{try{const[v,x]=await Promise.all([ds.getBalance(),ds.getPositions()]),b=x.reduce((w,T)=>w+T.currentValue,0);ft.updatePortfolioState(x,v,b)}catch(v){console.error("[usePolymarket] Sync error:",v)}};m();const g=setInterval(m,3e4);return()=>clearInterval(g)},[n.isOn]);const s=m=>{ft.toggleDealer(m),m?ft.addLog("INFO","Polymarket Dealer activated"):ft.addLog("INFO","Polymarket Dealer deactivated")},o=m=>{ft.updateSettings(m)},a=()=>{ft.reload(),ft.addLog("INFO","Settings applied")},l=m=>{ft.setStrategyPrompt(m),ft.addLog("INFO","Strategy prompt updated")},c=()=>{ft.clearLogs()},d=async m=>{if(!ds.getIsInitialized())return ft.addLog("ERROR","Service not initialized"),{success:!1,error:"Service not initialized"};const g=(m.price*100).toFixed(1);ft.addLog("TRADE","Executing "+m.side+" "+m.outcome+" @ "+g+"c");const v=await ds.createOrder({tokenId:m.tokenId,side:m.side,price:m.price,size:m.size});return v.success?(ft.addLog("TRADE","Order placed: "+v.orderId),ft.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.outcome,action:m.side,timestamp:Date.now(),price:m.price,shares:m.size,sizeUSDC:m.size*m.price,reasoning:m.reason,confidence:m.confidence,status:"OPEN"})):ft.addLog("ERROR","Order failed: "+v.error),v},h=async m=>{const g=await ds.cancelOrder(m);return g?ft.addLog("INFO","Order "+m+" canceled"):ft.addLog("ERROR","Failed to cancel order "+m),g};return{state:n,isOn:n.isOn,isAnalyzing:n.isAnalyzing,settings:n.settings,logs:n.logs,positions:n.activePositions,operationHistory:n.operationHistory,toggleDealer:s,updateSettings:o,applyChanges:a,saveStrategy:l,clearLogs:c,executeOrder:d,cancelOrder:h}}const e0t=[{id:"suggestion",label:"Suggestion",icon:u.jsx(F2e,{size:20}),description:"Share ideas to improve AutonomousVault"},{id:"bug",label:"Bug Report",icon:u.jsx(i2e,{size:20}),description:"Report something that isn't working"},{id:"other",label:"Other",icon:u.jsx(b2e,{size:20}),description:"General feedback or questions"}],t0t=({isOpen:t,onClose:e})=>{const[n,r]=S.useState("suggestion"),[i,s]=S.useState(""),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=async()=>{if(!i.trim())return;a(!0);const m=await cD.submitGeneralFeedback({category:n,message:i.trim()});a(!1),m.success&&(c(!0),setTimeout(()=>{h()},1500))},h=()=>{r("suggestion"),s(""),c(!1),e()};return u.jsx(Kd,{open:t,onOpenChange:m=>!m&&h(),children:u.jsxs(eu,{className:"sm:max-w-[480px] bg-[#14151a] border-[#232328]",children:[u.jsxs(tu,{children:[u.jsxs(nu,{className:"flex items-center gap-2 text-white",children:[u.jsx(gre,{size:20,className:"text-[#E7FE55]"}),"Send Feedback"]}),u.jsx(Yd,{className:"text-[#747580]",children:"Help us improve AutonomousVault with your feedback."})]}),l?u.jsxs("div",{className:"py-8 text-center",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-[#E7FE55]/10 flex items-center justify-center mx-auto mb-3",children:u.jsx(xre,{size:24,className:"text-[#E7FE55]"})}),u.jsx("p",{className:"text-white font-medium",children:"Thank you for your feedback!"}),u.jsx("p",{className:"text-[#747580] text-sm mt-1",children:"We appreciate your input."})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"space-y-3 mt-2",children:[u.jsx("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em]",children:"Feedback Type"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:e0t.map(m=>u.jsxs("button",{onClick:()=>r(m.id),className:`flex flex-col items-center gap-2 p-3 rounded-lg border transition-all ${n===m.id?"bg-[#E7FE55]/10 border-[#E7FE55]/30 text-[#E7FE55]":"bg-[#1a1b21] border-[#232328] text-[#747580] hover:text-white hover:border-[#3a3b43]"}`,children:[m.icon,u.jsx("span",{className:"text-[11px] font-medium",children:m.label})]},m.id))})]}),u.jsxs("div",{className:"space-y-2 mt-4",children:[u.jsx("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em]",children:"Your Message"}),u.jsx("textarea",{value:i,onChange:m=>s(m.target.value),placeholder:`Describe your ${n==="bug"?"issue":n==="suggestion"?"idea":"feedback"}...`,className:"w-full h-32 px-4 py-3 rounded-lg bg-[#1a1b21] border border-[#232328] text-white text-sm placeholder:text-[#747580] resize-none focus:outline-none focus:border-[#E7FE55]/30 focus:ring-1 focus:ring-[#E7FE55]/20"})]}),u.jsxs(Wd,{className:"mt-4 gap-2",children:[u.jsx(_r,{variant:"outline",onClick:h,className:"border-[#232328] text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21]",children:"Cancel"}),u.jsx(_r,{onClick:d,disabled:!i.trim()||o,className:"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:o?"Sending...":"Send Feedback"})]})]})]})})},n0t=({onSelectConversation:t})=>{const[e,n]=S.useState([]),[r,i]=S.useState(""),{user:s}=H1();S.useEffect(()=>{s!=null&&s.uid&&o()},[s==null?void 0:s.uid]);const o=async()=>{const h=await ra.getHistory();n(Array.isArray(h)?h:[])},a=async(h,m)=>{h.stopPropagation(),window.confirm("Delete this conversation?")&&(await ra.deleteConversation(m),o())},l=e.filter(h=>h.title.toLowerCase().includes(r.toLowerCase())),c=l.reduce((h,m)=>{const g=new Date(m.timestamp),x=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));let b="Older";return x===0?b="Today":x===1?b="Yesterday":x<7?b="Previous 7 Days":x<30&&(b="Previous 30 Days"),h[b]||(h[b]=[]),h[b].push(m),h},{}),d=["Today","Yesterday","Previous 7 Days","Previous 30 Days","Older"];return u.jsxs(_t.div,{className:"h-full flex flex-col p-8 max-w-7xl mx-auto w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsxs("div",{className:"flex items-center justify-between mb-8",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight mb-2",children:"Conversation History"}),u.jsx("p",{className:"text-slate-400",children:"Manage and revisit your past interactions with the Vault Operator."})]}),u.jsxs("div",{className:"relative",children:[u.jsx(B8,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),u.jsx(Ux,{type:"text",placeholder:"Search conversations...",value:r,onChange:h=>i(h.target.value),className:"pl-10 w-64 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:l.length===0?u.jsxs(_t.div,{className:"flex flex-col items-center justify-center h-64 text-slate-500",initial:{opacity:0},animate:{opacity:1},children:[u.jsx(Bw,{size:48,className:"mb-4 opacity-20"}),u.jsx("p",{children:"No conversations found."})]}):u.jsx("div",{className:"space-y-8",children:d.map(h=>{const m=c[h];return!m||m.length===0?null:u.jsxs(_t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"h-px bg-slate-800 flex-1"}),u.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:h}),u.jsx("div",{className:"h-px bg-slate-800 flex-1"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.jsx(Wi,{children:m.map((g,v)=>u.jsx(_t.div,{onClick:()=>t(g.id),className:"group",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:v*.05},whileHover:{scale:1.02},children:u.jsxs(Zs,{className:"p-4 cursor-pointer hover:border-[#E7FE55]/30 hover:shadow-xl hover:shadow-[#E7FE55]/5 relative overflow-hidden h-full",children:[u.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:u.jsx(_r,{variant:"ghost",size:"icon",onClick:x=>a(x,g.id),className:"h-7 w-7 text-slate-400 hover:text-red-400 hover:bg-red-500/20",children:u.jsx(Th,{size:14})})}),u.jsxs("div",{className:"flex flex-col h-full justify-between",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[#E7FE55]",children:[u.jsx(Bw,{size:16}),u.jsxs("span",{className:"text-xs font-mono opacity-70",children:["ID: ",g.id.slice(0,8),"..."]})]}),u.jsx("h3",{className:"text-base font-semibold text-slate-200 group-hover:text-white line-clamp-2 mb-2 transition-colors",children:g.title})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-4 pt-4 border-t border-slate-700/30",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(I8,{size:12}),u.jsx("span",{children:new Date(g.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),u.jsx("div",{className:"group-hover:translate-x-1 transition-transform text-[#E7FE55]/50 group-hover:text-[#E7FE55]",children:u.jsx(rl,{size:14})})]})]})]})},g.id))})})]},h)})})})]})};function Kee(t,[e,n]){return Math.min(n,Math.max(e,t))}function r0t(t){const e=i0t(t),n=S.forwardRef((r,i)=>{const{children:s,...o}=r,a=S.Children.toArray(s),l=a.find(o0t);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function i0t(t){const e=S.forwardRef((n,r)=>{const{children:i,...s}=n;if(S.isValidElement(i)){const o=l0t(i),a=a0t(s,i.props);return i.type!==S.Fragment&&(a.ref=r?iv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var s0t=Symbol("radix.slottable");function o0t(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===s0t}function a0t(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function l0t(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function c0t(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var u0t=[" ","Enter","ArrowUp","ArrowDown"],d0t=[" ","Enter"],Xm="Select",[kP,NP,f0t]=lme(Xm),[Pv]=r0(Xm,[f0t,QN]),CP=QN(),[h0t,qh]=Pv(Xm),[p0t,m0t]=Pv(Xm),Y0e=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:m,required:g,form:v}=t,x=CP(e),[b,w]=S.useState(null),[T,N]=S.useState(null),[O,j]=S.useState(!1),_=v7(c),[F,z]=Ix({prop:r,defaultProp:i??!1,onChange:s,caller:Xm}),[D,$]=Ix({prop:o,defaultProp:a,onChange:l,caller:Xm}),G=S.useRef(null),H=b?v||!!b.closest("form"):!0,[U,A]=S.useState(new Set),I=Array.from(U).map(L=>L.props.value).join(";");return u.jsx(joe,{...x,children:u.jsxs(h0t,{required:g,scope:e,trigger:b,onTriggerChange:w,valueNode:T,onValueNodeChange:N,valueNodeHasChildren:O,onValueNodeHasChildrenChange:j,contentId:dd(),value:D,onValueChange:$,open:F,onOpenChange:z,dir:_,triggerPointerDownPosRef:G,disabled:m,children:[u.jsx(kP.Provider,{scope:e,children:u.jsx(p0t,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(L=>{A(q=>new Set(q).add(L))},[]),onNativeOptionRemove:S.useCallback(L=>{A(q=>{const K=new Set(q);return K.delete(L),K})},[]),children:n})}),H?u.jsxs(vge,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:D,onChange:L=>$(L.target.value),disabled:m,form:v,children:[D===void 0?u.jsx("option",{value:""}):null,Array.from(U)]},I):null]})})};Y0e.displayName=Xm;var J0e="SelectTrigger",X0e=S.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=CP(n),o=qh(J0e,n),a=o.disabled||r,l=Ir(e,o.onTriggerChange),c=NP(n),d=S.useRef("touch"),[h,m,g]=wge(x=>{const b=c().filter(N=>!N.disabled),w=b.find(N=>N.value===o.value),T=Ege(b,x,w);T!==void 0&&o.onValueChange(T.value)}),v=x=>{a||(o.onOpenChange(!0),g()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return u.jsx(Boe,{asChild:!0,...s,children:u.jsx(Mn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":bge(o.value)?"":void 0,...i,ref:l,onClick:mn(i.onClick,x=>{x.currentTarget.focus(),d.current!=="mouse"&&v(x)}),onPointerDown:mn(i.onPointerDown,x=>{d.current=x.pointerType;const b=x.target;b.hasPointerCapture(x.pointerId)&&b.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(v(x),x.preventDefault())}),onKeyDown:mn(i.onKeyDown,x=>{const b=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(b&&x.key===" ")&&u0t.includes(x.key)&&(v(),x.preventDefault())})})})});X0e.displayName=J0e;var Q0e="SelectValue",Z0e=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=qh(Q0e,n),{onValueNodeHasChildrenChange:c}=l,d=s!==void 0,h=Ir(e,l.onValueNodeChange);return Hs(()=>{c(d)},[c,d]),u.jsx(Mn.span,{...a,ref:h,style:{pointerEvents:"none"},children:bge(l.value)?u.jsx(u.Fragment,{children:o}):s})});Z0e.displayName=Q0e;var g0t="SelectIcon",ege=S.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return u.jsx(Mn.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});ege.displayName=g0t;var y0t="SelectPortal",tge=t=>u.jsx(ZN,{asChild:!0,...t});tge.displayName=y0t;var Qm="SelectContent",nge=S.forwardRef((t,e)=>{const n=qh(Qm,t.__scopeSelect),[r,i]=S.useState();if(Hs(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?i0.createPortal(u.jsx(rge,{scope:t.__scopeSelect,children:u.jsx(kP.Slot,{scope:t.__scopeSelect,children:u.jsx("div",{children:t.children})})}),s):null}return u.jsx(ige,{...t,ref:e})});nge.displayName=Qm;var El=10,[rge,Gh]=Pv(Qm),x0t="SelectContentImpl",v0t=r0t("SelectContent.RemoveScroll"),ige=S.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:x,avoidCollisions:b,...w}=t,T=qh(Qm,n),[N,O]=S.useState(null),[j,_]=S.useState(null),F=Ir(e,ae=>O(ae)),[z,D]=S.useState(null),[$,G]=S.useState(null),H=NP(n),[U,A]=S.useState(!1),I=S.useRef(!1);S.useEffect(()=>{if(N)return jhe(N)},[N]),Phe();const L=S.useCallback(ae=>{const[Te,...oe]=H().map(pe=>pe.ref.current),[ve]=oe.slice(-1),ke=document.activeElement;for(const pe of ae)if(pe===ke||(pe==null||pe.scrollIntoView({block:"nearest"}),pe===Te&&j&&(j.scrollTop=0),pe===ve&&j&&(j.scrollTop=j.scrollHeight),pe==null||pe.focus(),document.activeElement!==ke))return},[H,j]),q=S.useCallback(()=>L([z,N]),[L,z,N]);S.useEffect(()=>{U&&q()},[U,q]);const{onOpenChange:K,triggerPointerDownPosRef:te}=T;S.useEffect(()=>{if(N){let ae={x:0,y:0};const Te=ve=>{var ke,pe;ae={x:Math.abs(Math.round(ve.pageX)-(((ke=te.current)==null?void 0:ke.x)??0)),y:Math.abs(Math.round(ve.pageY)-(((pe=te.current)==null?void 0:pe.y)??0))}},oe=ve=>{ae.x<=10&&ae.y<=10?ve.preventDefault():N.contains(ve.target)||K(!1),document.removeEventListener("pointermove",Te),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",oe,{capture:!0})}}},[N,K,te]),S.useEffect(()=>{const ae=()=>K(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[K]);const[Y,V]=wge(ae=>{const Te=H().filter(ke=>!ke.disabled),oe=Te.find(ke=>ke.ref.current===document.activeElement),ve=Ege(Te,ae,oe);ve&&setTimeout(()=>ve.ref.current.focus())}),M=S.useCallback((ae,Te,oe)=>{const ve=!I.current&&!oe;(T.value!==void 0&&T.value===Te||ve)&&(D(ae),ve&&(I.current=!0))},[T.value]),P=S.useCallback(()=>N==null?void 0:N.focus(),[N]),W=S.useCallback((ae,Te,oe)=>{const ve=!I.current&&!oe;(T.value!==void 0&&T.value===Te||ve)&&G(ae)},[T.value]),X=r==="popper"?jD:sge,se=X===jD?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:x,avoidCollisions:b}:{};return u.jsx(rge,{scope:n,content:N,viewport:j,onViewportChange:_,itemRefCallback:M,selectedItem:z,onItemLeave:P,itemTextRefCallback:W,focusSelectedItem:q,selectedItemText:$,position:r,isPositioned:U,searchRef:Y,children:u.jsx(e7,{as:v0t,allowPinchZoom:!0,children:u.jsx(ZB,{asChild:!0,trapped:T.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:mn(i,ae=>{var Te;(Te=T.trigger)==null||Te.focus({preventScroll:!0}),ae.preventDefault()}),children:u.jsx(KN,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:u.jsx(X,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:ae=>ae.preventDefault(),...w,...se,onPlaced:()=>A(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:mn(w.onKeyDown,ae=>{const Te=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!Te&&ae.key.length===1&&V(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let ve=H().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const ke=ae.target,pe=ve.indexOf(ke);ve=ve.slice(pe+1)}setTimeout(()=>L(ve)),ae.preventDefault()}})})})})})})});ige.displayName=x0t;var b0t="SelectItemAlignedPosition",sge=S.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=qh(Qm,n),o=Gh(Qm,n),[a,l]=S.useState(null),[c,d]=S.useState(null),h=Ir(e,F=>d(F)),m=NP(n),g=S.useRef(!1),v=S.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:w,focusSelectedItem:T}=o,N=S.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&x&&b&&w){const F=s.trigger.getBoundingClientRect(),z=c.getBoundingClientRect(),D=s.valueNode.getBoundingClientRect(),$=w.getBoundingClientRect();if(s.dir!=="rtl"){const ke=$.left-z.left,pe=D.left-ke,ze=F.left-pe,Me=F.width+ze,he=Math.max(Me,z.width),_e=window.innerWidth-El,We=Kee(pe,[El,Math.max(El,_e-he)]);a.style.minWidth=Me+"px",a.style.left=We+"px"}else{const ke=z.right-$.right,pe=window.innerWidth-D.right-ke,ze=window.innerWidth-F.right-pe,Me=F.width+ze,he=Math.max(Me,z.width),_e=window.innerWidth-El,We=Kee(pe,[El,Math.max(El,_e-he)]);a.style.minWidth=Me+"px",a.style.right=We+"px"}const G=m(),H=window.innerHeight-El*2,U=x.scrollHeight,A=window.getComputedStyle(c),I=parseInt(A.borderTopWidth,10),L=parseInt(A.paddingTop,10),q=parseInt(A.borderBottomWidth,10),K=parseInt(A.paddingBottom,10),te=I+L+U+K+q,Y=Math.min(b.offsetHeight*5,te),V=window.getComputedStyle(x),M=parseInt(V.paddingTop,10),P=parseInt(V.paddingBottom,10),W=F.top+F.height/2-El,X=H-W,se=b.offsetHeight/2,ae=b.offsetTop+se,Te=I+L+ae,oe=te-Te;if(Te<=W){const ke=G.length>0&&b===G[G.length-1].ref.current;a.style.bottom="0px";const pe=c.clientHeight-x.offsetTop-x.offsetHeight,ze=Math.max(X,se+(ke?P:0)+pe+q),Me=Te+ze;a.style.height=Me+"px"}else{const ke=G.length>0&&b===G[0].ref.current;a.style.top="0px";const ze=Math.max(W,I+x.offsetTop+(ke?M:0)+se)+oe;a.style.height=ze+"px",x.scrollTop=Te-W+x.offsetTop}a.style.margin=`${El}px 0`,a.style.minHeight=Y+"px",a.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,s.trigger,s.valueNode,a,c,x,b,w,s.dir,r]);Hs(()=>N(),[N]);const[O,j]=S.useState();Hs(()=>{c&&j(window.getComputedStyle(c).zIndex)},[c]);const _=S.useCallback(F=>{F&&v.current===!0&&(N(),T==null||T(),v.current=!1)},[N,T]);return u.jsx(E0t,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:_,children:u.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:u.jsx(Mn.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});sge.displayName=b0t;var w0t="SelectPopperPosition",jD=S.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=El,...s}=t,o=CP(n);return u.jsx(Uoe,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jD.displayName=w0t;var[E0t,F7]=Pv(Qm,{}),BD="SelectViewport",oge=S.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Gh(BD,n),o=F7(BD,n),a=Ir(e,s.onViewportChange),l=S.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),u.jsx(kP.Slot,{scope:n,children:u.jsx(Mn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:mn(i.onScroll,c=>{const d=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(l.current-d.scrollTop);if(g>0){const v=window.innerHeight-El*2,x=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),w=Math.max(x,b);if(w<v){const T=w+g,N=Math.min(v,T),O=T-N;h.style.height=N+"px",h.style.bottom==="0px"&&(d.scrollTop=O>0?O:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});oge.displayName=BD;var age="SelectGroup",[S0t,A0t]=Pv(age),T0t=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=dd();return u.jsx(S0t,{scope:n,id:i,children:u.jsx(Mn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});T0t.displayName=age;var lge="SelectLabel",cge=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=A0t(lge,n);return u.jsx(Mn.div,{id:i.id,...r,ref:e})});cge.displayName=lge;var cN="SelectItem",[k0t,uge]=Pv(cN),dge=S.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=qh(cN,n),l=Gh(cN,n),c=a.value===r,[d,h]=S.useState(s??""),[m,g]=S.useState(!1),v=Ir(e,T=>{var N;return(N=l.itemRefCallback)==null?void 0:N.call(l,T,r,i)}),x=dd(),b=S.useRef("touch"),w=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(k0t,{scope:n,value:r,disabled:i,textId:x,isSelected:c,onItemTextChange:S.useCallback(T=>{h(N=>N||((T==null?void 0:T.textContent)??"").trim())},[]),children:u.jsx(kP.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:u.jsx(Mn.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:mn(o.onFocus,()=>g(!0)),onBlur:mn(o.onBlur,()=>g(!1)),onClick:mn(o.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:mn(o.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:mn(o.onPointerDown,T=>{b.current=T.pointerType}),onPointerMove:mn(o.onPointerMove,T=>{var N;b.current=T.pointerType,i?(N=l.onItemLeave)==null||N.call(l):b.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:mn(o.onPointerLeave,T=>{var N;T.currentTarget===document.activeElement&&((N=l.onItemLeave)==null||N.call(l))}),onKeyDown:mn(o.onKeyDown,T=>{var O;((O=l.searchRef)==null?void 0:O.current)!==""&&T.key===" "||(d0t.includes(T.key)&&w(),T.key===" "&&T.preventDefault())})})})})});dge.displayName=cN;var aw="SelectItemText",fge=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=qh(aw,n),a=Gh(aw,n),l=uge(aw,n),c=m0t(aw,n),[d,h]=S.useState(null),m=Ir(e,w=>h(w),l.onItemTextChange,w=>{var T;return(T=a.itemTextRefCallback)==null?void 0:T.call(a,w,l.value,l.disabled)}),g=d==null?void 0:d.textContent,v=S.useMemo(()=>u.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=c;return Hs(()=>(x(v),()=>b(v)),[x,b,v]),u.jsxs(u.Fragment,{children:[u.jsx(Mn.span,{id:l.textId,...s,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?i0.createPortal(s.children,o.valueNode):null]})});fge.displayName=aw;var hge="SelectItemIndicator",pge=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return uge(hge,n).isSelected?u.jsx(Mn.span,{"aria-hidden":!0,...r,ref:e}):null});pge.displayName=hge;var UD="SelectScrollUpButton",mge=S.forwardRef((t,e)=>{const n=Gh(UD,t.__scopeSelect),r=F7(UD,t.__scopeSelect),[i,s]=S.useState(!1),o=Ir(e,r.onScrollButtonChange);return Hs(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?u.jsx(yge,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});mge.displayName=UD;var FD="SelectScrollDownButton",gge=S.forwardRef((t,e)=>{const n=Gh(FD,t.__scopeSelect),r=F7(FD,t.__scopeSelect),[i,s]=S.useState(!1),o=Ir(e,r.onScrollButtonChange);return Hs(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;s(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?u.jsx(yge,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});gge.displayName=FD;var yge=S.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Gh("SelectScrollButton",n),o=S.useRef(null),a=NP(n),l=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),Hs(()=>{var d;const c=a().find(h=>h.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),u.jsx(Mn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:mn(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:mn(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:mn(i.onPointerLeave,()=>{l()})})}),N0t="SelectSeparator",xge=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return u.jsx(Mn.div,{"aria-hidden":!0,...r,ref:e})});xge.displayName=N0t;var $D="SelectArrow",C0t=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=CP(n),s=qh($D,n),o=Gh($D,n);return s.open&&o.position==="popper"?u.jsx(Foe,{...i,...r,ref:e}):null});C0t.displayName=$D;var P0t="SelectBubbleInput",vge=S.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=S.useRef(null),s=Ir(r,i),o=c0t(e);return S.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),u.jsx(Mn.select,{...n,style:{...$oe,...n.style},ref:s,defaultValue:e})});vge.displayName=P0t;function bge(t){return t===""||t===void 0}function wge(t){const e=Nh(t),n=S.useRef(""),r=S.useRef(0),i=S.useCallback(o=>{const a=n.current+o;e(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[e]),s=S.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function Ege(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=_0t(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function _0t(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var I0t=Y0e,Sge=X0e,R0t=Z0e,O0t=ege,M0t=tge,Age=nge,L0t=oge,Tge=cge,kge=dge,D0t=fge,j0t=pge,Nge=mge,Cge=gge,Pge=xge;const Wee=I0t,Yee=R0t,zD=S.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(Sge,{ref:r,className:kt("flex h-10 w-full items-center justify-between whitespace-nowrap rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white ring-offset-background placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,u.jsx(O0t,{asChild:!0,children:u.jsx(pa,{className:"h-4 w-4 opacity-50"})})]}));zD.displayName=Sge.displayName;const _ge=S.forwardRef(({className:t,...e},n)=>u.jsx(Nge,{ref:n,className:kt("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(Ah,{className:"h-4 w-4"})}));_ge.displayName=Nge.displayName;const Ige=S.forwardRef(({className:t,...e},n)=>u.jsx(Cge,{ref:n,className:kt("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(pa,{className:"h-4 w-4"})}));Ige.displayName=Cge.displayName;const VD=S.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>u.jsx(M0t,{children:u.jsxs(Age,{ref:i,className:kt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-700 bg-slate-800 text-slate-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[u.jsx(_ge,{}),u.jsx(L0t,{className:kt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),u.jsx(Ige,{})]})}));VD.displayName=Age.displayName;const B0t=S.forwardRef(({className:t,...e},n)=>u.jsx(Tge,{ref:n,className:kt("px-2 py-1.5 text-sm font-semibold text-slate-400",t),...e}));B0t.displayName=Tge.displayName;const HD=S.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(kge,{ref:r,className:kt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-700 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[u.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(j0t,{children:u.jsx(wm,{className:"h-4 w-4"})})}),u.jsx(D0t,{children:e})]}));HD.displayName=kge.displayName;const U0t=S.forwardRef(({className:t,...e},n)=>u.jsx(Pge,{ref:n,className:kt("-mx-1 my-1 h-px bg-slate-700",t),...e}));U0t.displayName=Pge.displayName;const F0t=({onConnect:t,onCancel:e})=>{var G;const[n,r]=S.useState("input"),[i,s]=S.useState(""),[o,a]=S.useState(""),[l,c]=S.useState(!1),[d,h]=S.useState(null),[m,g]=S.useState(null),[v,x]=S.useState(!1),[b,w]=S.useState(null),[T,N]=S.useState(null),O=S.useCallback(()=>{if(!i){w(null);return}const H=fs.validateUrl(i);w(H.valid?null:H.error||"Invalid URL")},[i]),j=S.useCallback(()=>{if(!o){N(null);return}const H=fs.validateAnonKey(o);N(H.valid?null:H.error||"Invalid key")},[o]),_=S.useCallback(async()=>{const H=fs.getSetupSQL();await navigator.clipboard.writeText(H),x(!0),setTimeout(()=>x(!1),2e3)},[]),F=S.useCallback(async()=>{h(null),r("connecting");const H=await fs.connect(i.trim(),o.trim());if(!H.success){h(H.error||"Connection failed"),r("error");return}r("validating");const U=await fs.validateSchema();if(g(U),!U.valid){r("schema-missing");return}r("success")},[i,o]),z=S.useCallback(async()=>{r("validating");const H=await fs.validateSchema();if(g(H),!H.valid){r("schema-missing");return}r("success")},[]),D=S.useCallback(()=>{t()},[t]),$=i.trim()&&o.trim()&&!b&&!T;return u.jsxs(_t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-5 bg-[#0f1015] border border-[#232328] rounded-xl space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:u.jsx(NN,{className:"w-5 h-5 text-blue-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-base font-semibold text-white",children:"Connect Your Supabase"}),u.jsx("p",{className:"text-xs text-[#747580]",children:"Required for 24/7 execution"})]})]}),u.jsxs(Wi,{mode:"wait",children:[n==="input"&&u.jsxs(_t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[u.jsxs("div",{className:"p-3 bg-blue-500/5 border border-blue-500/20 rounded-lg",children:[u.jsx("p",{className:"text-xs text-blue-200 mb-2 font-medium",children:"Quick Setup:"}),u.jsxs("ol",{className:"text-xs text-blue-200/80 space-y-1 list-decimal list-inside",children:[u.jsxs("li",{children:["Create free account at ",u.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"supabase.com"})]}),u.jsx("li",{children:"Create a new project (any name)"}),u.jsxs("li",{children:["Go to ",u.jsx("strong",{children:"Settings  API"})]}),u.jsx("li",{children:"Copy the values below"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Project URL"}),u.jsx("input",{type:"text",value:i,onChange:H=>s(H.target.value),onBlur:O,placeholder:"https://abc123.supabase.co",className:kt("w-full px-3 py-2 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",b?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),b&&u.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:b})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Anon Key (public)"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:l?"text":"password",value:o,onChange:H=>a(H.target.value),onBlur:j,placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",className:kt("w-full px-3 py-2 pr-9 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",T?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),u.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#747580] hover:text-white transition-colors",children:l?u.jsx(CN,{size:14}):u.jsx(M8,{size:14})})]}),T&&u.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:T})]}),u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("a",{href:"https://supabase.com/dashboard/project/_/settings/api",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-blue-400/70 hover:text-blue-400 transition-colors flex items-center gap-1",children:["Open Supabase API Settings ",u.jsx(gd,{size:10})]})}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:F,disabled:!$,className:kt("flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",$?"bg-blue-600 hover:bg-blue-500 text-white":"bg-[#232328] text-[#3a3b42] cursor-not-allowed"),children:["Connect ",u.jsx(rl,{size:14})]})]})]},"input"),(n==="connecting"||n==="validating")&&u.jsxs(_t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"py-8 flex flex-col items-center gap-4",children:[u.jsx(L8,{className:"w-8 h-8 text-blue-400 animate-spin"}),u.jsx("p",{className:"text-sm text-[#a0a1a8]",children:n==="connecting"?"Connecting to Supabase...":"Validating schema..."})]},"connecting"),n==="schema-missing"&&m&&u.jsxs(_t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[u.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ci,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-amber-200",children:"Schema Setup Required"}),u.jsx("p",{className:"text-xs text-amber-200/70 mt-1",children:"Your Supabase project is connected, but missing required tables:"}),u.jsx("ul",{className:"mt-2 space-y-1",children:m.missingTables.map(H=>u.jsxs("li",{className:"text-xs text-amber-300 flex items-center gap-2",children:[u.jsx(Rm,{size:12}),u.jsx("code",{className:"bg-amber-500/10 px-1 rounded",children:H})]},H))})]})]})}),u.jsxs("div",{className:"p-4 bg-[#14151a] border border-[#232328] rounded-lg space-y-3",children:[u.jsx("p",{className:"text-xs text-[#a0a1a8]",children:"Copy this SQL and run it in your Supabase SQL Editor:"}),u.jsx("button",{onClick:_,className:"w-full px-4 py-3 bg-[#0f1015] border border-[#232328] rounded-lg hover:border-blue-500/30 transition-all flex items-center justify-center gap-2 text-sm",children:v?u.jsxs(u.Fragment,{children:[u.jsx(wm,{size:16,className:"text-green-400"}),u.jsx("span",{className:"text-green-400",children:"Copied!"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Em,{size:16,className:"text-[#747580]"}),u.jsx("span",{className:"text-white",children:"Copy SQL Schema"})]})}),u.jsxs("a",{href:"https://supabase.com/dashboard/project/_/sql/new",target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-2 bg-[#232328] rounded-lg hover:bg-[#2a2b30] transition-all flex items-center justify-center gap-2 text-sm text-white",children:["Open SQL Editor ",u.jsx(gd,{size:14})]})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:["I've Run the SQL ",u.jsx(rl,{size:14})]})]})]},"schema-missing"),n==="error"&&u.jsxs(_t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[u.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Rm,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-red-200",children:"Connection Failed"}),u.jsx("p",{className:"text-xs text-red-200/70 mt-1",children:d})]})]})}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),u.jsx("button",{onClick:()=>r("input"),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Try Again"})]})]},"error"),n==="success"&&u.jsxs(_t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},className:"py-6 flex flex-col items-center gap-4",children:[u.jsx("div",{className:"p-3 rounded-full bg-green-500/10",children:u.jsx(O8,{className:"w-8 h-8 text-green-400"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-sm font-medium text-white",children:"Supabase Connected!"}),u.jsxs("p",{className:"text-xs text-[#747580] mt-1",children:["Project: ",(G=fs.getConfig())==null?void 0:G.projectId]})]}),u.jsx("button",{onClick:D,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Continue"})]},"success")]})]})},$0t=({isOpen:t,onClose:e,onConnect:n})=>u.jsx(Kd,{open:t,onOpenChange:r=>!r&&e(),children:u.jsxs(eu,{className:"max-w-xl bg-[#13141A] border-gray-800 text-white p-0 overflow-hidden",children:[u.jsxs(tu,{className:"sr-only",children:[u.jsx(nu,{children:"Connect Supabase"}),u.jsx(Yd,{children:"Setup your Supabase connection for advanced features"})]}),u.jsx("div",{className:"p-1",children:u.jsx(F0t,{onConnect:n,onCancel:e})})]})}),z0t=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=S.useState(""),[a,l]=S.useState(24),c=async()=>{s&&await n(s,a)};return u.jsx(Kd,{open:t,onOpenChange:e,children:u.jsxs(eu,{className:"max-w-md glass-panel rounded border-[#232328] text-white",children:[u.jsx(tu,{children:u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"p-2.5 rounded bg-amber-500/10",children:u.jsx(Qr,{className:"w-5 h-5 text-amber-400"})}),u.jsxs("div",{children:[u.jsx(nu,{className:"text-base font-bold tracking-wide",children:"Setup Session Keys"}),u.jsx(Yd,{className:"text-[11px] text-[#747580] mt-0.5",children:"Configure temporary keys for 24/7 execution"})]})]})}),u.jsxs("div",{className:"space-y-5 py-3",children:[u.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded",children:[u.jsx("h4",{className:"text-[11px] font-bold text-amber-300 mb-2 uppercase tracking-wide",children:"How it works"}),u.jsxs("ul",{className:"text-[10px] text-amber-200/70 space-y-1 list-disc list-inside leading-relaxed",children:[u.jsx("li",{children:"Keys are decrypted and stored in server memory"}),u.jsx("li",{children:"Bot runs 24/7 within the session duration"}),u.jsx("li",{children:"Keys are automatically wiped when session expires"}),u.jsx("li",{children:"More secure than persistent storage"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Session Duration (Hours)"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",value:a,onChange:d=>l(Math.max(1,Math.min(72,parseInt(d.target.value)||24))),min:1,max:72,className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm font-mono text-white placeholder:text-[#747580] focus:outline-none focus:border-amber-500/50 transition-colors"}),u.jsx(Qr,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]}),u.jsx("p",{className:"text-[9px] text-[#747580] mt-1.5",children:"Maximum 72 hours."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Wallet Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"password",value:s,onChange:d=>o(d.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm text-white placeholder:text-[#747580] focus:outline-none focus:border-amber-500/50 transition-colors"}),u.jsx(yd,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]}),u.jsx("p",{className:"text-[9px] text-[#747580] mt-1.5",children:"Required to decrypt your private key for this session."})]})]}),i&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded text-[10px] text-red-300",children:i})]}),u.jsxs(Wd,{className:"gap-2",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-[#1a1b21] hover:bg-[#232328] text-[#a0a1a8] rounded text-[11px] font-semibold uppercase tracking-wide transition-colors",children:"Cancel"}),u.jsx("button",{onClick:c,disabled:!s||r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-[#1a1b21] disabled:text-[#747580] text-white rounded text-[11px] font-semibold uppercase tracking-wide transition-colors flex items-center gap-2",children:r?u.jsxs(u.Fragment,{children:[u.jsx(L8,{className:"w-3.5 h-3.5 animate-spin"}),"Starting..."]}):"Start Session"})]})]})})},V0t=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=S.useState(""),[a,l]=S.useState(!1),c=async()=>{!s||!a||await n(s)};return u.jsx(Kd,{open:t,onOpenChange:e,children:u.jsxs(eu,{className:"max-w-md glass-panel rounded border-[#232328] text-white",children:[u.jsx(tu,{children:u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"p-2.5 rounded bg-red-500/10",children:u.jsx(Ro,{className:"w-5 h-5 text-red-500"})}),u.jsxs("div",{children:[u.jsx(nu,{className:"text-base font-bold tracking-wide",children:"Setup Persistent Keys"}),u.jsx(Yd,{className:"text-[11px] text-[#747580] mt-0.5",children:"Store encrypted keys for permanent 24/7 execution"})]})]})}),u.jsxs("div",{className:"space-y-5 py-3",children:[u.jsx("div",{className:"p-3 bg-red-500/5 border border-red-500/20 rounded",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(uke,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-[11px] font-bold text-red-300 mb-1 uppercase tracking-wide",children:"Security Warning"}),u.jsx("p",{className:"text-[10px] text-red-200/70 leading-relaxed",children:"This option stores your encrypted private keys and password on the server database. While we use encryption, this is less secure than local or session-based storage. If the server is compromised, your keys could be at risk."})]})]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Wallet Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"password",value:s,onChange:d=>o(d.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm text-white placeholder:text-[#747580] focus:outline-none focus:border-red-500/50 transition-colors"}),u.jsx(yd,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]})]}),u.jsxs("div",{className:"flex items-start gap-3 p-3 bg-[#0f1015] rounded border border-[#232328] hover:border-[#747580] transition-colors cursor-pointer",onClick:()=>l(!a),children:[u.jsx("div",{className:"flex items-center h-5",children:u.jsx("input",{type:"checkbox",checked:a,onChange:d=>l(d.target.checked),className:"w-4 h-4 rounded border-[#232328] text-red-500 focus:ring-red-500 bg-[#0f1015]"})}),u.jsxs("div",{className:"text-[10px] text-[#747580] select-none leading-relaxed",children:[u.jsx("span",{className:"font-bold text-[#a0a1a8]",children:"I understand the risks."}),u.jsx("span",{className:"block mt-0.5",children:"I accept full responsibility for storing my keys on the server."})]})]})]}),i&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded text-[10px] text-red-300",children:i})]}),u.jsxs(Wd,{className:"gap-2",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-[#1a1b21] hover:bg-[#232328] text-[#a0a1a8] rounded text-[11px] font-semibold uppercase tracking-wide transition-colors",children:"Cancel"}),u.jsx("button",{onClick:c,disabled:!s||!a||r,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-[#1a1b21] disabled:text-[#747580] text-white rounded text-[11px] font-semibold uppercase tracking-wide transition-colors flex items-center gap-2",children:r?u.jsxs(u.Fragment,{children:[u.jsx(L8,{className:"w-3.5 h-3.5 animate-spin"}),"Enabling..."]}):"Enable Persistent Keys"})]})]})})},H0t=({onTierChange:t})=>{var z;const e=S.useSyncExternalStore(zf.subscribe.bind(zf),()=>zf.getState()),[n,r]=S.useState(e.currentTier),[i,s]=S.useState(!1),[o,a]=S.useState(null),[l,c]=S.useState(!1),[d,h]=S.useState(fs.isConnected()),[m,g]=S.useState(!1),[v,x]=S.useState(!1),b=zf.getSessionStatus();S.useEffect(()=>{r(e.currentTier)},[e.currentTier]),S.useEffect(()=>{const D=fs.subscribe($=>{h($)});return()=>D()},[]);const w=async D=>{if(D===e.currentTier){r(D);return}if((D==="session"||D==="persistent")&&!d){r(D),c(!0);return}r(D),a(null),D==="local"?await N():D==="session"?g(!0):D==="persistent"&&x(!0)},T=()=>{c(!1),h(!0),n==="session"?g(!0):n==="persistent"&&x(!0)},N=async()=>{s(!0);try{const D=await zf.migrateToLocal();if(!D.success)throw new Error(D.error||"Migration failed");t==null||t("local")}catch(D){a(D instanceof Error?D.message:"Unknown error"),r(e.currentTier)}finally{s(!1)}},O=async(D,$)=>{s(!0);try{const G=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),H=await Ae.getItem(Ae.getUserKey("agent_hl_vault_salt"));if(!G||!H)throw new Error("No encrypted key found. Please set up your wallet first.");const U=await zf.migrateToSession(G,H,D,$);if(!U.success)throw new Error(U.error||"Migration failed");g(!1),t==null||t("session")}catch(G){a(G instanceof Error?G.message:"Unknown error")}finally{s(!1)}},j=async D=>{s(!0);try{const $=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),G=await Ae.getItem(Ae.getUserKey("agent_hl_vault_salt"));if(!$||!G)throw new Error("No encrypted key found. Please set up your wallet first.");const H=await zf.migrateToPersistent($,G,D);if(!H.success)throw new Error(H.error||"Migration failed");x(!1),t==null||t("persistent")}catch($){a($ instanceof Error?$.message:"Unknown error")}finally{s(!1)}},_=D=>{switch(D){case"local":return u.jsx(vd,{className:"w-6 h-6"});case"session":return u.jsx(Qr,{className:"w-6 h-6"});case"persistent":return u.jsx(Ro,{className:"w-6 h-6"})}},F=(D,$,G)=>G?"border-emerald-500/50 bg-emerald-500/5":$?"border-blue-500 bg-blue-500/5":"border-gray-800 hover:border-gray-700 bg-gray-900/40";return u.jsxs("div",{className:"space-y-6",children:[e.currentTier==="session"&&b.active&&u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg animate-in fade-in slide-in-from-top-1",children:[u.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-full animate-pulse",children:u.jsx(Qr,{className:"w-3.5 h-3.5 text-amber-400"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"text-sm font-medium text-amber-200",children:"Session Active"}),u.jsxs("span",{className:"text-xs text-amber-200/70 block",children:[b.remainingHours,"h remaining"]})]})]}),u.jsx("div",{className:"grid gap-3",children:Object.keys(AD).map(D=>{const $=AD[D],G=e.currentTier===D,H=n===D;return u.jsxs("button",{onClick:()=>w(D),className:`
                                group relative p-4 rounded-xl border transition-all duration-300 text-left w-full
                                ${F(D,H,G)}
                            `,children:[G&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 backdrop-blur-sm",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),u.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-wider",children:"Active"})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`
                                    p-3 rounded-xl transition-colors
                                    ${D==="local"?"bg-emerald-500/10 text-emerald-400 group-hover:bg-emerald-500/20":D==="session"?"bg-amber-500/10 text-amber-400 group-hover:bg-amber-500/20":"bg-red-500/10 text-red-400 group-hover:bg-red-500/20"}
                                `,children:_(D)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"flex items-center gap-2 mb-1",children:u.jsx("h4",{className:`font-semibold text-sm ${G?"text-white":"text-gray-200 group-hover:text-white"}`,children:$.label})}),u.jsx("p",{className:"text-xs text-gray-500 leading-relaxed mb-3 pr-8",children:$.description}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${$.execution24x7?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":"bg-gray-800 border-gray-700 text-gray-400"}
                                        `,children:$.execution24x7?"24/7 Cloud Run":"Browser Only"}),u.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${$.securityLevel===3?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":$.securityLevel===2?"bg-amber-500/5 border-amber-500/20 text-amber-400":"bg-red-500/5 border-red-500/20 text-red-400"}
                                        `,children:$.securityLevel===3?"High Security":$.securityLevel===2?"Medium Security":"Low Security"})]})]})]})]},D)})}),(n==="session"||n==="persistent"||d)&&u.jsx("div",{className:"pt-2",children:u.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${d?"bg-emerald-900/10 border-emerald-500/20":"bg-blue-900/10 border-blue-500/20"}`,children:[u.jsx("div",{className:`p-1.5 rounded-md ${d?"bg-emerald-500/20":"bg-blue-500/20"}`,children:u.jsx(NN,{className:`w-3.5 h-3.5 ${d?"text-emerald-400":"text-blue-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-xs font-medium ${d?"text-emerald-200":"text-blue-200"}`,children:d?"Supabase Connected":"Supabase Connection Required"}),u.jsx("p",{className:`text-[10px] truncate ${d?"text-emerald-200/60":"text-blue-200/60"}`,children:d?`Project: ${(z=fs.getConfig())==null?void 0:z.projectId}`:"Required for cloud execution modes"})]}),d&&u.jsx("button",{onClick:()=>c(!0),className:"text-[10px] font-medium text-emerald-400 hover:text-emerald-300 transition-colors px-2 py-1 bg-emerald-500/10 rounded hover:bg-emerald-500/20",children:"Edit"})]})}),o&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg animate-in fade-in slide-in-from-top-1",children:u.jsx("p",{className:"text-xs text-red-300 font-medium",children:o})}),u.jsx($0t,{isOpen:l,onClose:()=>{c(!1),n!==e.currentTier&&r(e.currentTier)},onConnect:T}),u.jsx(z0t,{isOpen:m,onClose:()=>g(!1),onConfirm:O,isLoading:i,error:o}),u.jsx(V0t,{isOpen:v,onClose:()=>x(!1),onConfirm:j,isLoading:i,error:o})]})},q0t=({addNotification:t,password:e})=>{var L,q,K,te;const{user:n,logout:r,deleteAccount:i}=H1(),[s,o]=S.useState(!1),[a,l]=S.useState(!1),[c,d]=S.useState(""),[h,m]=S.useState(!1),[g,v]=S.useState(null),[x,b]=S.useState(!1),[w,T]=S.useState(!1),[N,O]=S.useState(""),j=S.useRef(null),[_,F]=S.useState(!1),[z,D]=S.useState(""),$=async Y=>{var V,M,P,W,X,se,ae,Te,oe,ve,ke,pe,ze,Me,he,_e,We,Ke,it,st,ut,Je,Le,et,Ut,Ie,qe,yt,ht,ie,J,Z,ue,Se,de,ge,Qe,tt,lt,Vt;if(!(n!=null&&n.uid)){t("No user session found");return}b(!0);try{const wt=Ae.getUserKey("agent_activity_log"),Ot=Ae.getUserKey("vault_dealer_strategy"),fn=Ae.getUserKey("agent_scheduler_tasks"),[tn,rn,Oi]=await Promise.all([Ae.getItem(wt),Ae.getItem(Ot),Ae.getItem(fn)]);let Vn=[];if(Y){const ct=await ra.getHistory();for(const gn of ct)try{const At=await ra.loadConversation(gn.id,Y);At&&Vn.push(At)}catch(At){console.warn(`Failed to decrypt conversation ${gn.id}`,At)}}const le=await Ae.getItem(Ae.getUserKey("vault_dealer_storage"));let Q=null;if(le)try{const ct=JSON.parse(le);Q={strategyPrompt:(V=ct.settings)==null?void 0:V.strategyPrompt,aggressiveMode:(M=ct.settings)==null?void 0:M.aggressiveMode,maxLeverage:(P=ct.settings)==null?void 0:P.maxLeverage,maxPositionSizeUSDC:(W=ct.settings)==null?void 0:W.maxPositionSizeUSDC,maxOpenPositions:(X=ct.settings)==null?void 0:X.maxOpenPositions,bankrollType:(se=ct.settings)==null?void 0:se.bankrollType,manualBankroll:(ae=ct.settings)==null?void 0:ae.manualBankroll,tradingPairs:(Te=ct.settings)==null?void 0:Te.tradingPairs,checkIntervalSeconds:(oe=ct.settings)==null?void 0:oe.checkIntervalSeconds,analysisTimeframe:(ve=ct.settings)==null?void 0:ve.analysisTimeframe,historyCandles:(ke=ct.settings)==null?void 0:ke.historyCandles,macroTimeframeEnabled:(pe=ct.settings)==null?void 0:pe.macroTimeframeEnabled,macroTimeframe:(ze=ct.settings)==null?void 0:ze.macroTimeframe,macroEnabledIndicators:(Me=ct.settings)==null?void 0:Me.macroEnabledIndicators,indicatorSettings:(he=ct.settings)==null?void 0:he.indicatorSettings,autonomousIndicators:(_e=ct.settings)==null?void 0:_e.autonomousIndicators,selectedPreset:(We=ct.settings)==null?void 0:We.selectedPreset,promptMode:(Ke=ct.settings)==null?void 0:Ke.promptMode,stopLossEnabled:(it=ct.settings)==null?void 0:it.stopLossEnabled,stopLossPercent:(st=ct.settings)==null?void 0:st.stopLossPercent,takeProfitEnabled:(ut=ct.settings)==null?void 0:ut.takeProfitEnabled,takeProfitPercent:(Je=ct.settings)==null?void 0:Je.takeProfitPercent}}catch(ct){console.error("Failed to parse dealer settings",ct)}const ee=await Ae.getItem(Ae.getUserKey("vault_polymarket_storage"));let fe=null,Pe;if(ee)try{const ct=JSON.parse(ee);fe={strategyPrompt:(Le=ct.settings)==null?void 0:Le.strategyPrompt,promptMode:(et=ct.settings)==null?void 0:et.promptMode,selectedPreset:(Ut=ct.settings)==null?void 0:Ut.selectedPreset,marketSelectionMode:(Ie=ct.settings)==null?void 0:Ie.marketSelectionMode,selectedMarkets:(qe=ct.settings)==null?void 0:qe.selectedMarkets,allowedCategories:(yt=ct.settings)==null?void 0:yt.allowedCategories,maxPositionSizeUSDC:(ht=ct.settings)==null?void 0:ht.maxPositionSizeUSDC,maxOpenPositions:(ie=ct.settings)==null?void 0:ie.maxOpenPositions,minLiquidity:(J=ct.settings)==null?void 0:J.minLiquidity,minVolume24h:(Z=ct.settings)==null?void 0:Z.minVolume24h,minVolumeThreshold:(ue=ct.settings)==null?void 0:ue.minVolumeThreshold,minLiquidityThreshold:(Se=ct.settings)==null?void 0:Se.minLiquidityThreshold,minSpreadThreshold:(de=ct.settings)==null?void 0:de.minSpreadThreshold,confidenceThreshold:(ge=ct.settings)==null?void 0:ge.confidenceThreshold,bankrollType:(Qe=ct.settings)==null?void 0:Qe.bankrollType,manualBankroll:(tt=ct.settings)==null?void 0:tt.manualBankroll,checkIntervalSeconds:(lt=ct.settings)==null?void 0:lt.checkIntervalSeconds},Pe=(Vt=ct.settings)==null?void 0:Vt.strategyPrompt}catch(ct){console.error("Failed to parse polymarket settings",ct)}const Oe={version:"1.0",exportedAt:new Date().toISOString(),data:{activityLog:tn?JSON.parse(tn):[],conversations:Vn.length>0?Vn:void 0,hyperliquidDealer:{settings:Q,strategyPrompt:rn||void 0},polymarketDealer:{settings:fe,strategyPrompt:Pe},schedulerTasks:Oi?JSON.parse(Oi):[]}},He=new Blob([JSON.stringify(Oe,null,2)],{type:"application/json"}),Qt=URL.createObjectURL(He),qt=document.createElement("a");qt.href=Qt,qt.download=`autonomousvault_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(qt),qt.click(),document.body.removeChild(qt),URL.revokeObjectURL(Qt),t("Backup exported successfully!"),F(!1),D("")}catch(wt){console.error("Export failed:",wt),t("Failed to export data")}finally{b(!1)}},G=()=>{D(""),F(!0)},H=()=>{if(!z){t("Please enter your password");return}if(z!==e){t("Incorrect password");return}$(z)},U=Y=>{var P;const V=(P=Y.target.files)==null?void 0:P[0];if(!V)return;const M=new FileReader;M.onload=W=>{var X;try{const se=(X=W.target)==null?void 0:X.result,ae=JSON.parse(se);if(!ae.version||!ae.data){t("Invalid backup file format");return}v(ae),m(!0)}catch(se){console.error("Failed to parse backup file:",se),t("Failed to read backup file")}},M.readAsText(V),j.current&&(j.current.value="")},A=async()=>{var Y,V,M,P,W,X,se;if(!(!g||!(n!=null&&n.uid))){T(!0);try{const{data:ae}=g;if((Y=ae.activityLog)!=null&&Y.length){const oe=Ae.getUserKey("agent_activity_log");await Ae.setItem(oe,JSON.stringify(ae.activityLog))}if((V=ae.schedulerTasks)!=null&&V.length){const oe=Ae.getUserKey("agent_scheduler_tasks");await Ae.setItem(oe,JSON.stringify(ae.schedulerTasks))}if((M=ae.hyperliquidDealer)!=null&&M.strategyPrompt){const oe=Ae.getUserKey("vault_dealer_strategy");await Ae.setItem(oe,ae.hyperliquidDealer.strategyPrompt)}const Te=e||N;if((P=ae.conversations)!=null&&P.length){if(!Te){t("ERROR: Password required to import conversations"),T(!1);return}console.log(`[Import] Restoring ${ae.conversations.length} conversations using provided password...`);for(const oe of ae.conversations)try{await ra.saveConversation(oe,Te)}catch(ve){console.warn(`Failed to restore conversation ${oe.id}`,ve)}}if((W=ae.hyperliquidDealer)!=null&&W.settings){const oe=await Ae.getItem(Ae.getUserKey("vault_dealer_storage"));try{const ve=oe?JSON.parse(oe):{settings:{}};ve.settings={...ve.settings,...ae.hyperliquidDealer.settings},await Ae.setItem(Ae.getUserKey("vault_dealer_storage"),JSON.stringify(ve))}catch(ve){console.error("Failed to merge dealer settings",ve)}}if((X=ae.polymarketDealer)!=null&&X.settings||(se=ae.polymarketDealer)!=null&&se.strategyPrompt){console.log("[Import] Restoring Polymarket settings:",ae.polymarketDealer);const oe=await Ae.getItem(Ae.getUserKey("vault_polymarket_storage"));try{const ve=oe?JSON.parse(oe):{settings:{}};ae.polymarketDealer.settings&&(ve.settings={...ve.settings,...ae.polymarketDealer.settings}),ae.polymarketDealer.strategyPrompt&&(ve.settings={...ve.settings,strategyPrompt:ae.polymarketDealer.strategyPrompt}),console.log("[Import] Saving Polymarket settings:",ve.settings),await Ae.setItem(Ae.getUserKey("vault_polymarket_storage"),JSON.stringify(ve))}catch(ve){console.error("Failed to merge polymarket settings",ve)}}else console.log("[Import] No Polymarket settings to restore");console.log("[Import] Reloading stores from storage..."),await mt.reloadFromStorage(),await ft.reloadFromStorage(),t("Data restored successfully!"),m(!1),v(null)}catch(ae){console.error("Import failed:",ae),t("Failed to import data")}finally{T(!1)}}},I=async()=>{if(!(!n||c!=="DELETE")){l(!0);try{mt.reset(),ft.reset(),await i(),t("Account deleted successfully")}catch(Y){console.error("Delete account failed:",Y),t(Y.message||"Failed to delete account"),l(!1)}}};return u.jsxs(_t.div,{className:"flex flex-col gap-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[u.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-blue-500/10 rounded",children:u.jsx(vd,{className:"h-4 w-4 text-blue-400"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Security & Execution"}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5 font-light",children:"Choose how your bot runs and stores keys"})]})]}),u.jsx("div",{className:"p-6",children:u.jsx(H0t,{onTierChange:Y=>t(`Security tier changed to ${Y}`)})})]}),u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:u.jsx(NN,{className:"h-4 w-4 text-white"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Data Backup"}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:"Export your settings to move to another device"})]})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("p",{className:"text-xs text-gray-500 mb-5 font-light leading-relaxed",children:["Export your full configuration history, conversations, and strategies to a JSON file.",u.jsx("br",{}),u.jsx("span",{className:"text-amber-500/80 font-medium",children:" Note: Private keys and sensitive API tokens are never included in exports."})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("button",{onClick:G,disabled:x,className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[u.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10 text-emerald-500 group-hover:text-emerald-400 transition-colors",children:u.jsx(Qs,{size:18})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:x?"Exporting...":"Export Data"}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Download settings backup file"})]})]}),u.jsxs("button",{onClick:()=>{var Y;return(Y=j.current)==null?void 0:Y.click()},className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[u.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 group-hover:text-blue-400 transition-colors",children:u.jsx(m2,{size:18})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:"Import Data"}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Restore from backup JSON"})]})]}),u.jsx("input",{ref:j,type:"file",accept:".json",onChange:U,className:"hidden"})]})]})]}),u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-red-900/40 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-red-500/10 rounded",children:u.jsx(Ci,{className:"h-4 w-4 text-red-500"})}),u.jsx("div",{className:"flex-1",children:u.jsx("h2",{className:"text-sm font-bold text-red-500 tracking-wide",children:"Danger Zone"})})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("h3",{className:"text-sm font-medium text-red-300 mb-1",children:"Delete Account"}),u.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["Permanently remove your account and all associated data. This involves clearing your local storage, dealer settings, and cloud database records. ",u.jsx("strong",{className:"text-red-400/80",children:"This action cannot be undone."})]})]}),u.jsx("button",{onClick:()=>o(!0),className:"px-5 py-2.5 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-xs font-semibold hover:bg-red-500 hover:text-white hover:border-red-500 transition-all whitespace-nowrap",children:"Delete Account"})]})]})]}),s&&u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:u.jsx(_t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[u.jsx("div",{className:"p-3 rounded-full bg-red-500/10",children:u.jsx(Ci,{size:24,className:"text-red-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Delete Account"}),u.jsx("p",{className:"text-xs text-gray-500",children:"This action is irreversible"})]})]}),u.jsxs("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:["All your data will be permanently deleted.",u.jsx("br",{}),"To confirm, type ",u.jsx("strong",{className:"text-white",children:"DELETE"})," below:"]}),u.jsx("input",{type:"text",value:c,onChange:Y=>d(Y.target.value),placeholder:"Type DELETE to confirm",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-red-500/50 focus:ring-1 focus:ring-red-500/20 transition-all mb-5 text-sm"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{o(!1),d("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:I,disabled:c!=="DELETE"||a,className:kt("flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all",c==="DELETE"?"bg-red-500 text-white hover:bg-red-600":"bg-red-500/20 text-red-500/40 cursor-not-allowed"),children:a?"Deleting...":"Delete Account"})]})]})})}),h&&g&&u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:u.jsx(_t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[u.jsx("div",{className:"p-3 rounded-full bg-blue-500/10",children:u.jsx(m2,{size:24,className:"text-blue-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Import Backup"}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(g.exportedAt).toLocaleDateString()]})]})]}),u.jsxs("div",{className:"border border-gray-800 rounded-lg p-4 mb-5 space-y-2",children:[u.jsx("p",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-2",children:"Data to restore:"}),(L=g.data.activityLog)!=null&&L.length?u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[u.jsx(wm,{size:12,className:"text-emerald-500"}),u.jsxs("span",{children:["Activity Log (",g.data.activityLog.length," items)"]})]}):null,(q=g.data.conversations)!=null&&q.length?u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[u.jsx(wm,{size:12,className:"text-emerald-500"}),u.jsxs("span",{children:["Conversations (",g.data.conversations.length," chats)"]})]}):null,(K=g.data.hyperliquidDealer)!=null&&K.settings?u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[u.jsx(wm,{size:12,className:"text-emerald-500"}),u.jsx("span",{children:"Hyperliquid Dealer Settings"})]}):null,u.jsxs("div",{className:"text-[10px] text-gray-600 pl-5",children:["...and ",Object.keys(g.data).length-2," other data points"]})]}),(te=g.data.conversations)!=null&&te.length?u.jsxs("div",{className:"mb-5",children:[u.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Encryption password required:"}),u.jsx("input",{type:"password",value:N,onChange:Y=>O(Y.target.value),placeholder:"Enter encryption password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-blue-500/50 transition-all text-sm"}),!N&&!e&&u.jsxs("p",{className:"text-[10px] text-amber-500 mt-1.5 flex items-center gap-1",children:[u.jsx(Ci,{size:10})," Password required to decrypt conversations"]})]}):null,u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{m(!1),v(null),O("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:A,disabled:w,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors disabled:opacity-50",children:w?"Importing...":"Restore Data"})]})]})})}),_&&u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:u.jsx(_t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[u.jsx("div",{className:"p-3 rounded-full bg-emerald-500/10",children:u.jsx(Qs,{size:24,className:"text-emerald-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Confirm Export"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Security check required"})]})]}),u.jsx("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:"Please enter your Vault password to authorize the export. This ensures only you can download your data."}),u.jsx("div",{className:"mb-5",children:u.jsx("input",{type:"password",value:z,onChange:Y=>D(Y.target.value),placeholder:"Enter Vault password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-emerald-500/50 transition-all text-sm",onKeyDown:Y=>{Y.key==="Enter"&&H()}})}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{F(!1),D("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:H,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors",children:"Export"})]})]})})})]})},u4={operator:{name:"Chat Operator",shortName:"Operator",icon:u.jsx(h2,{size:16}),description:"Chat assistant",color:"#9b87f5"},hyperliquidDealer:{name:"Hyperliquid Dealer",shortName:"Hyperliquid",icon:u.jsx(dn,{size:16}),description:"Perp trading",color:"#E7FE55"},polymarketDealer:{name:"Polymarket Dealer",shortName:"Polymarket",icon:u.jsx(sy,{size:16}),description:"Predictions",color:"#22d3ee"}},G0t=({vault:t,password:e,addNotification:n,activeTab:r,setActiveTab:i})=>{const[s,o]=S.useState("gemini"),[a,l]=S.useState({gemini:"",openai:"",claude:""}),[c,d]=S.useState({gemini:!1,openai:!1,claude:!1}),[h,m]=S.useState({gemini:"empty",openai:"empty",claude:"empty"}),[g,v]=S.useState({operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}}),[x,b]=S.useState("devnet"),[w,T]=S.useState("testnet");S.useEffect(()=>{const D=Fn.getSnapshot(),$={gemini:"",openai:"",claude:""},G={gemini:"empty",openai:"empty",claude:"empty"};for(const U of["gemini","openai","claude"]){const A=Fn.getApiKey(U);$[U]=A,G[U]=A?"saved":"empty"}l($),m(G),v(D.componentConfigs);const H=Fn.subscribe(()=>{const U=Fn.getSnapshot();v(U.componentConfigs)});return()=>{H()}},[]);const N=(D,$)=>{l(H=>({...H,[D]:$}));const G=Fn.getApiKey(D);m(H=>({...H,[D]:$===""?"empty":$!==G?"modified":"saved"}))},O=D=>{const $=a[D].trim();$&&(Fn.setApiKey(D,$),m(G=>({...G,[D]:"saved"})),n(`${ku[D].name} API Key saved!`))},j=D=>{Fn.clearApiKey(D),l($=>({...$,[D]:""})),m($=>({...$,[D]:"empty"})),n(`${ku[D].name} API Key cleared`)},_=(D,$)=>{var A;const H=((A=wy[$][0])==null?void 0:A.id)||"",U={providerType:$,modelId:H};Fn.isProviderConfigured($)?(Fn.setComponentConfig(D,U),n(`${u4[D].name} now using ${ku[$].name}`)):n(`Please configure ${ku[$].name} API key first`)},F=(D,$)=>{const G=g[D],H={...G,modelId:$};Fn.setComponentConfig(D,H);const U=wy[G.providerType].find(A=>A.id===$);n(`${u4[D].name} model changed to ${(U==null?void 0:U.name)||$}`)},z=()=>Fn.getConfiguredProviders();return u.jsx(_t.div,{className:"h-full flex flex-col overflow-y-auto custom-scrollbar",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:u.jsx("div",{className:"flex-1 w-full max-w-5xl mx-auto px-6 py-8 flex flex-col gap-6",children:r==="user"?u.jsx(q0t,{addNotification:n,password:e}):u.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center justify-between font-light",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:u.jsx(hre,{className:"h-4 w-4 text-white"})}),u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"AI Providers"})]}),u.jsx("div",{className:"flex items-center gap-2",children:["gemini","openai","claude"].map(D=>u.jsx("div",{className:kt("w-1.5 h-1.5 rounded-full transition-all",h[D]==="saved"?"bg-emerald-500":"bg-gray-700"),title:`${ku[D].name}: ${h[D]==="saved"?"Configured":"Not configured"}`},D))})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"flex items-center gap-6 border-b border-gray-800/60 mb-6 pb-1",children:["gemini","openai","claude"].map(D=>{const $=s===D;return u.jsxs("button",{onClick:()=>o(D),className:kt("relative pb-3 text-sm font-medium transition-all",$?"text-white":"text-gray-500 hover:text-gray-300"),children:[ku[D].name,$&&u.jsx(_t.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#E7FE55]"})]},D)})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("label",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[u.jsx("span",{children:"API Key"}),h[s]==="saved"&&u.jsxs("span",{className:"text-emerald-500 flex items-center gap-1 normal-case tracking-normal bg-emerald-500/10 px-2 py-0.5 rounded text-[10px] font-semibold",children:[u.jsx(wm,{size:10})," Saved"]})]}),u.jsxs("a",{href:ku[s].keyUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[#E7FE55] hover:underline flex items-center gap-1 transition-colors",children:["Get API key ",u.jsx(gd,{size:10})]})]}),u.jsxs("div",{className:"relative group mb-4",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(W4,{size:14,className:"text-gray-600 group-focus-within:text-white transition-colors"})}),u.jsx("input",{type:c[s]?"text":"password",value:a[s],onChange:D=>N(s,D.target.value),placeholder:`Enter ${ku[s].name} key...`,className:"w-full bg-transparent border border-gray-800 rounded-lg py-2.5 pl-10 pr-10 text-sm text-gray-200 focus:outline-none focus:border-[#E7FE55]/50 focus:ring-1 focus:ring-[#E7FE55]/20 font-mono transition-all placeholder:text-gray-700"}),u.jsx("button",{type:"button",onClick:()=>d(D=>({...D,[s]:!D[s]})),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 hover:text-white transition-colors",children:c[s]?u.jsx(CN,{size:14}):u.jsx(M8,{size:14})})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>O(s),disabled:h[s]!=="modified",className:kt("h-9 px-5 rounded-lg text-sm font-medium transition-all",h[s]==="modified"?"bg-white text-black hover:bg-gray-200":"bg-gray-800/50 text-gray-500 cursor-not-allowed border border-gray-800"),children:"Save Changes"}),h[s]!=="empty"&&u.jsx("button",{onClick:()=>j(s),className:"h-9 px-4 rounded-lg text-sm text-gray-500 hover:text-red-400 hover:bg-red-500/10 transition-all ml-auto",children:"Disconnect"})]})]})]})]}),u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:u.jsx(ST,{className:"h-4 w-4 text-white"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Network Settings"}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5 font-light",children:"Configure blockchain connections"})]})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:u.jsx(Ro,{size:14,className:"text-[#9945FF]"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Solana"}),u.jsx("span",{className:"text-xs text-gray-600 block",children:"Blockchain Network"})]})]}),u.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[u.jsx("button",{onClick:()=>b("devnet"),className:kt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",x==="devnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Devnet"}),u.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",u.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:u.jsx(dn,{size:14,className:"text-[#E7FE55]"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Hyperliquid"}),u.jsx("span",{className:"text-xs text-gray-600 block",children:"Trading Engine"})]})]}),u.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[u.jsx("button",{onClick:()=>T("testnet"),className:kt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",w==="testnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Testnet"}),u.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",u.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]})]})]}),u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:u.jsx(ys,{className:"h-4 w-4 text-white"})}),u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Model Assignment"})]}),u.jsx("div",{className:"p-6",children:u.jsx("div",{className:"flex flex-col gap-4",children:["operator","hyperliquidDealer","polymarketDealer"].map(D=>{const $=u4[D],G=g[D],H=wy[G.providerType],U=z(),A=U.includes(G.providerType);return u.jsxs("div",{className:"group p-4 rounded-lg border border-gray-800/60 hover:border-gray-700 transition-all duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"p-1.5 rounded-lg shrink-0",style:{backgroundColor:`${$.color}10`,color:$.color},children:$.icon}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:$.shortName}),u.jsx("span",{className:kt("w-2 h-2 rounded-full",A?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]":"bg-amber-500")})]}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:$.description})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Provider"}),u.jsxs(Wee,{value:G.providerType,onValueChange:I=>_(D,I),children:[u.jsx(zD,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:u.jsx(Yee,{})}),u.jsx(VD,{className:"bg-[#1A1B21] border-[#2E2F36]",children:["gemini","openai","claude"].map(I=>{const L=ku[I],q=U.includes(I);return u.jsx(HD,{value:I,disabled:!q,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:L.name}),!q&&u.jsx("span",{className:"opacity-50 text-[10px] ml-auto",children:"(no key)"})]})},I)})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Model"}),u.jsxs(Wee,{value:G.modelId,onValueChange:I=>F(D,I),children:[u.jsx(zD,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:u.jsx(Yee,{})}),u.jsx(VD,{className:"bg-[#1A1B21] border-[#2E2F36]",children:H.map(I=>u.jsx(HD,{value:I.id,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:I.name},I.id))})]})]})]})]},D)})})})]})]})})})},K0t=(t,e,n)=>t*n.inputPricePerMillion/1e6+e*n.outputPricePerMillion/1e6,W0t=({addNotification:t})=>{const[e,n]=S.useState(null),[r,i]=S.useState([]),[s,o]=S.useState(!1),[a,l]=S.useState(!1),[c,d]=S.useState(20),[h,m]=S.useState("ALL"),[g,v]=S.useState(Ms.getSnapshot().pricing),[x,b]=S.useState(Ms.getSnapshot().pricing),w=F=>{const z=Ms.getRecords(1e3),D=Ms.getStats();if(!D)return null;const $=new Date,G=new Date($.getFullYear(),$.getMonth(),$.getDate()).getTime(),H=new Date($.getFullYear(),$.getMonth(),1).getTime();let U=0;const A={MANAGER:0,DEALER:0,POLYMARKET_DEALER:0},I={input:0,output:0,cost:0},L={input:0,output:0,cost:0};for(const q of z){const K=K0t(q.inputTokens,q.outputTokens,F);U+=K,A[q.source]+=K,q.timestamp>=G&&(I.input+=q.inputTokens,I.output+=q.outputTokens,I.cost+=K),q.timestamp>=H&&(L.input+=q.inputTokens,L.output+=q.outputTokens,L.cost+=K)}return{...D,totalCost:U,bySource:{MANAGER:{...D.bySource.MANAGER,cost:A.MANAGER},DEALER:{...D.bySource.DEALER,cost:A.DEALER},POLYMARKET_DEALER:{...D.bySource.POLYMARKET_DEALER,cost:A.POLYMARKET_DEALER}},today:I,thisMonth:L}};S.useEffect(()=>{const F=()=>{n(w(x)),i(Ms.getRecords(c,h==="ALL"?void 0:h))};F();const z=Ms.subscribe(F);return()=>{z()}},[c,h]),S.useEffect(()=>{const F=w(x);n(F)},[x]);const T=()=>{Ms.updatePricing(g),b({...g}),t("Pricing updated successfully")},N=()=>{confirm("Are you sure you want to clear all token usage history?")&&(Ms.clearHistory(),t("Token usage history cleared"))},O=F=>F>=1e6?(F/1e6).toFixed(2)+"M":F>=1e3?(F/1e3).toFixed(1)+"K":F.toFixed(0),j=F=>"$"+F.toFixed(4),_=F=>new Date(F).toLocaleString();return e?u.jsxs(_t.div,{className:"h-full flex flex-col space-y-6 overflow-y-auto px-1 pb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Zs,{className:"border-slate-700/50 bg-gradient-to-br from-slate-900/80 to-slate-800/30",children:u.jsxs(Ru,{className:"p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:u.jsx(Ro,{className:"text-indigo-400",size:20})}),u.jsx("span",{className:"text-sm text-slate-400",children:"Total Tokens"})]}),u.jsxs(_r,{variant:"ghost",size:"sm",onClick:N,className:"h-7 px-2 text-xs text-slate-400 hover:text-red-400 hover:bg-red-500/10",children:[u.jsx(Th,{size:14,className:"mr-1"})," Clear"]})]}),u.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.totalInputTokens+e.totalOutputTokens)}),u.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-slate-500",children:[u.jsxs("span",{children:["In: ",O(e.totalInputTokens)]}),u.jsxs("span",{children:["Out: ",O(e.totalOutputTokens)]})]})]})}),u.jsx(Zs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:u.jsxs(Ru,{className:"p-5",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:u.jsx(d2,{className:"text-amber-400",size:20})}),u.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"})]}),u.jsx("div",{className:"text-2xl font-bold text-amber-400",children:j(e.totalCost)}),u.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Estimated based on current pricing"})]})}),u.jsx(Zs,{className:"border-emerald-500/30 bg-gradient-to-br from-slate-900/80 to-emerald-950/20",children:u.jsxs(Ru,{className:"p-5",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/20",children:u.jsx(dn,{className:"text-emerald-400",size:20})}),u.jsx("span",{className:"text-sm text-slate-400",children:"Today"})]}),u.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.today.input+e.today.output)}),u.jsx("div",{className:"text-xs text-emerald-400 mt-2",children:j(e.today.cost)})]})}),u.jsx(Zs,{className:"border-blue-500/30 bg-gradient-to-br from-slate-900/80 to-blue-950/20",children:u.jsxs(Ru,{className:"p-5",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:u.jsx(ld,{className:"text-blue-400",size:20})}),u.jsx("span",{className:"text-sm text-slate-400",children:"This Month"})]}),u.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.thisMonth.input+e.thisMonth.output)}),u.jsx("div",{className:"text-xs text-blue-400 mt-2",children:j(e.thisMonth.cost)})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs(Zs,{className:"border-indigo-500/30 bg-gradient-to-br from-slate-900/80 to-indigo-950/20",children:[u.jsx(nD,{className:"pb-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:u.jsx($g,{className:"text-indigo-400",size:24})}),u.jsxs("div",{children:[u.jsx(rD,{className:"text-base",children:"Vault Operator"}),u.jsx(iD,{children:"User queries and tool calls"})]})]})}),u.jsxs(Ru,{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Total Queries"}),u.jsx("span",{className:"text-white font-medium",children:e.managerMetrics.totalQueries})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Avg Tokens/Query"}),u.jsx("span",{className:"text-white font-medium",children:O(e.managerMetrics.avgTokensPerQuery)})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Interaction"}),u.jsx("span",{className:"text-indigo-400 font-medium",children:e.managerMetrics.totalQueries>0?j(e.bySource.MANAGER.cost/e.managerMetrics.totalQueries):"$0.0000"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),u.jsx("span",{className:"text-indigo-400 font-medium",children:j(e.bySource.MANAGER.cost)})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[u.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[u.jsxs("span",{children:["Input: ",O(e.bySource.MANAGER.input)]}),u.jsxs("span",{children:["Output: ",O(e.bySource.MANAGER.output)]})]}),u.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[u.jsx("div",{className:"bg-indigo-500 h-full",style:{width:`${e.bySource.MANAGER.input/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}}),u.jsx("div",{className:"bg-indigo-300 h-full",style:{width:`${e.bySource.MANAGER.output/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}})]})]})]})]}),u.jsxs(Zs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:[u.jsx(nD,{className:"pb-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:u.jsx(Ro,{className:"text-amber-400",size:24})}),u.jsxs("div",{children:[u.jsx(rD,{className:"text-base",children:"Hyperliquid Dealer"}),u.jsx(iD,{children:"Automated analysis cycles"})]})]})}),u.jsxs(Ru,{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Analysis Cycles"}),u.jsx("span",{className:"text-white font-medium",children:e.bySource.DEALER.count})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Coins Analyzed"}),u.jsx("span",{className:"text-white font-medium",children:e.dealerMetrics.totalCoinsAnalyzed})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Cycle"}),u.jsx("span",{className:"text-amber-400 font-medium",children:e.bySource.DEALER.count>0?j(e.bySource.DEALER.cost/e.bySource.DEALER.count):"$0.0000"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Coin"}),u.jsx("span",{className:"text-amber-400 font-medium",children:e.dealerMetrics.totalCoinsAnalyzed>0?j(e.bySource.DEALER.cost/e.dealerMetrics.totalCoinsAnalyzed):"$0.0000"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),u.jsx("span",{className:"text-amber-400 font-medium",children:j(e.bySource.DEALER.cost)})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[u.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[u.jsxs("span",{children:["Input: ",O(e.bySource.DEALER.input)]}),u.jsxs("span",{children:["Output: ",O(e.bySource.DEALER.output)]})]}),u.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[u.jsx("div",{className:"bg-amber-500 h-full",style:{width:`${e.bySource.DEALER.input/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}}),u.jsx("div",{className:"bg-amber-300 h-full",style:{width:`${e.bySource.DEALER.output/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}})]})]})]})]})]}),u.jsxs(Zs,{children:[u.jsxs("button",{onClick:()=>o(!s),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(p2,{size:20,className:"text-slate-400"}),u.jsx("span",{className:"text-white font-medium",children:"Pricing Configuration"})]}),s?u.jsx(Ah,{size:20,className:"text-slate-400"}):u.jsx(pa,{size:20,className:"text-slate-400"})]}),s&&u.jsxs(Ru,{className:"pt-0 border-t border-slate-700/50",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Input Price (per 1M tokens)"}),u.jsx(Ux,{type:"number",step:"0.01",value:g.inputPricePerMillion,onChange:F=>v(z=>({...z,inputPricePerMillion:parseFloat(F.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Output Price (per 1M tokens)"}),u.jsx(Ux,{type:"number",step:"0.01",value:g.outputPricePerMillion,onChange:F=>v(z=>({...z,outputPricePerMillion:parseFloat(F.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx(_r,{onClick:T,variant:"success",size:"sm",children:"Apply Pricing"})})]})]}),u.jsxs(Zs,{children:[u.jsxs("button",{onClick:()=>l(!a),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ql,{size:20,className:"text-slate-400"}),u.jsx("span",{className:"text-white font-medium",children:"Usage History"}),u.jsxs(Hi,{variant:"secondary",children:[r.length," records"]})]}),a?u.jsx(Ah,{size:20,className:"text-slate-400"}):u.jsx(pa,{size:20,className:"text-slate-400"})]}),a&&u.jsxs(Ru,{className:"pt-0 border-t border-slate-700/50",children:[u.jsxs("div",{className:"flex items-center gap-4 mt-4 mb-4",children:[u.jsx("div",{className:"flex bg-slate-800 rounded-lg p-1",children:["ALL","MANAGER","DEALER"].map(F=>u.jsx(_r,{variant:h===F?"default":"ghost",size:"sm",onClick:()=>m(F),className:"text-xs",children:F},F))}),u.jsxs("select",{value:c,onChange:F=>d(parseInt(F.target.value)),className:"bg-slate-800 border border-slate-700 text-white rounded-lg px-3 py-1.5 text-xs",children:[u.jsx("option",{value:10,children:"10 records"}),u.jsx("option",{value:20,children:"20 records"}),u.jsx("option",{value:50,children:"50 records"})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-slate-400 text-xs uppercase border-b border-slate-700",children:[u.jsx("th",{className:"text-left py-3 px-2",children:"Timestamp"}),u.jsx("th",{className:"text-left py-3 px-2",children:"Source"}),u.jsx("th",{className:"text-left py-3 px-2",children:"Operation"}),u.jsx("th",{className:"text-right py-3 px-2",children:"Input"}),u.jsx("th",{className:"text-right py-3 px-2",children:"Output"}),u.jsx("th",{className:"text-right py-3 px-2",children:"Cost"})]})}),u.jsxs("tbody",{children:[r.map(F=>u.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[u.jsx("td",{className:"py-2 px-2 text-slate-400 text-xs",children:_(F.timestamp)}),u.jsx("td",{className:"py-2 px-2",children:u.jsx(Hi,{variant:F.source==="MANAGER"?"info":"warning",children:F.source})}),u.jsx("td",{className:"py-2 px-2 text-slate-300 text-xs",children:F.operation}),u.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:O(F.inputTokens)}),u.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:O(F.outputTokens)}),u.jsx("td",{className:"py-2 px-2 text-right text-amber-400 font-medium",children:j(F.inputTokens*x.inputPricePerMillion/1e6+F.outputTokens*x.outputPricePerMillion/1e6)})]},F.id)),r.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"py-8 text-center text-slate-500",children:"No usage records yet."})})]})]})})]})]})]}):u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(_t.div,{className:"h-8 w-8 border-b-2 border-indigo-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})},Y0t=t=>{const e=t.match(/Market:\s*(.+?)(?:\s*\||$)/);return e?e[1].slice(0,30):null},J0t=t=>{if(t>=604800&&t%604800===0){const e=t/604800;return`${e} ${e===1?"Week":"Weeks"}`}if(t>=86400&&t%86400===0){const e=t/86400;return`${e} ${e===1?"Day":"Days"}`}if(t>=3600&&t%3600===0){const e=t/3600;return`${e} ${e===1?"Hour":"Hours"}`}if(t>=60&&t%60===0){const e=t/60;return`${e} ${e===1?"Minute":"Minutes"}`}return`${t}s`},X0t=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var $;const[i,s]=S.useState(0),[o,a]=S.useState([]),[l,c]=S.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[d,h]=S.useState(!1),{summary:m,isGenerating:g,cycleCount:v,lastUpdate:x,hasSummary:b}=ome("polymarket"),[w,T]=S.useState(0),N=S.useMemo(()=>t.logs.filter(G=>G.type==="REASONING"||G.type==="SIGNAL").slice(0,20),[t.logs]),O=S.useMemo(()=>{var H,U,A;const G=new Map;for(const I of N){const L=Y0t(I.message)||((A=(U=(H=I.details)==null?void 0:H.context)==null?void 0:U.question)==null?void 0:A.slice(0,30));L&&!G.has(L)&&G.set(L,I)}return Array.from(G.entries()).sort((I,L)=>L[1].timestamp-I[1].timestamp).map(([I,L])=>({market:I,log:L}))},[N]);S.useEffect(()=>{O.length>0&&!t.isAnalyzing&&T(0)},[O.length,t.isAnalyzing]);const j=O[w];S.useEffect(()=>{if(t.operationHistory.length>0){let G=0,H=0,U=0,A=0;const I=[];let L=0;t.operationHistory.slice().reverse().forEach(K=>{const te=K.pnl||0;L+=te,G+=te,A+=K.sizeUSDC,te>0?H++:te<0&&U++,I.push({time:K.timestamp,date:new Date(K.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:L})});const q=H+U;c({totalPnl:G,winRate:q>0?H/q*100:0,totalVolume:A,tradesWithPnl:q}),a(I)}},[t.operationHistory]),S.useEffect(()=>{if(!n)return;const G=async()=>{try{const U=await ds.getBalance();s(U)}catch(U){console.error("Failed to fetch Polymarket balance",U)}};G();const H=setInterval(G,6e4);return()=>clearInterval(H)},[n]);const _=()=>{n&&e(!t.isOn)},F=S.useMemo(()=>t.activePositions.reduce((G,H)=>G+H.unrealizedPnl,0),[t.activePositions]),z=()=>{T(G=>Math.min(O.length-1,G+1))},D=()=>{T(G=>Math.max(0,G-1))};return n?u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[u.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[u.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),u.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),u.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),u.jsx("button",{onClick:_,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:u.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]})}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Profit"}),u.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${l.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[l.totalPnl>=0?"+":"",l.totalPnl.toFixed(2)," USD"]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),u.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${F>=0?"text-[#34d399]":"text-red-400"}`,children:[F>=0?"+":"",F.toFixed(2)," USD"]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),u.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[l.winRate.toFixed(1),"%"]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),u.jsx(xd,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Categories"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.allowedCategories.length})]}),u.jsx(Lw,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:J0t(t.settings.checkIntervalSeconds)})]}),u.jsx(Qr,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Position"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.maxPositionSizeUSDC]})]}),u.jsx(Y1,{className:"h-4 w-4 text-[#747580]"})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(dn,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),u.jsx("div",{className:"flex-1 w-full",children:o.length>0?u.jsx(i1,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:u.jsxs(wfe,{data:o,children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"colorPnlPoly",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),u.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),u.jsx(g1,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),u.jsx(x1,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),u.jsx(v1,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:G=>`$${G}`}),u.jsx(vk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:G=>[`$${G.toFixed(2)}`,"Net PnL"]}),u.jsx(ZC,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnlPoly)"})]})}):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[u.jsx(Bl,{className:"h-8 w-8 mb-2 opacity-40"}),u.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ao,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),u.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[u.jsx("button",{onClick:()=>h(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${d?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),u.jsx("button",{onClick:()=>b&&h(!0),disabled:!b,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${d?"bg-[#E7FE55] text-black":b?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:b?"View AI Summary":`Available after ${2-v} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!d&&u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&O.length>0&&!d&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:z,disabled:w>=O.length-1,className:`p-1 rounded transition-colors ${w>=O.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous market",children:u.jsx(Dw,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[w+1,"/",O.length]}),u.jsx("button",{onClick:D,disabled:w<=0,className:`p-1 rounded transition-colors ${w<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next market",children:u.jsx(rl,{size:16})})]})]}),d?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[v," cycles"]}),g&&u.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),x>0&&u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(x).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:m?u.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m}):u.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusDetail||t.statusMessage,'"']})})]}):j?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider truncate max-w-[150px]",children:j.market}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(j.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',(($=j.log.details)==null?void 0:$.fullReason)||j.log.message,'"']})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusMessage||"Waiting for analysis...",'"']})})]}),u.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),u.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),u.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),u.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(sy,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Active Positions"})]}),u.jsxs("span",{className:"text-[10px] text-[#747580]",children:[t.activePositions.length," / ",t.settings.maxOpenPositions]})]}),t.activePositions.length>0?u.jsx("div",{className:"overflow-auto max-h-[200px] custom-scrollbar",children:u.jsxs("table",{className:"w-full text-xs",children:[u.jsx("thead",{className:"text-[#747580] text-left sticky top-0 bg-[#14151a]",children:u.jsxs("tr",{children:[u.jsx("th",{className:"pb-2 font-medium",children:"Market"}),u.jsx("th",{className:"pb-2 font-medium",children:"Side"}),u.jsx("th",{className:"pb-2 font-medium text-right",children:"Shares"}),u.jsx("th",{className:"pb-2 font-medium text-right",children:"Avg Price"}),u.jsx("th",{className:"pb-2 font-medium text-right",children:"Current"}),u.jsx("th",{className:"pb-2 font-medium text-right",children:"PnL"})]})}),u.jsx("tbody",{className:"text-[#a0a1a8]",children:t.activePositions.map((G,H)=>u.jsxs("tr",{className:"border-t border-[#232328] hover:bg-[#1a1b21]",children:[u.jsxs("td",{className:"py-2 max-w-[200px] truncate",title:G.question,children:[G.question.slice(0,40),"..."]}),u.jsx("td",{className:`py-2 font-medium ${G.outcome==="YES"?"text-[#34d399]":"text-red-400"}`,children:G.outcome}),u.jsx("td",{className:"py-2 text-right font-mono",children:G.shares.toFixed(2)}),u.jsxs("td",{className:"py-2 text-right font-mono",children:[(G.avgPrice*100).toFixed(1),""]}),u.jsxs("td",{className:"py-2 text-right font-mono",children:[(G.currentPrice*100).toFixed(1),""]}),u.jsxs("td",{className:`py-2 text-right font-mono ${G.unrealizedPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[G.unrealizedPnl>=0?"+":"","$",G.unrealizedPnl.toFixed(2)]})]},H))})]})}):u.jsxs("div",{className:"h-24 flex flex-col items-center justify-center text-[#747580] gap-2 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx(kh,{className:"h-6 w-6 opacity-40"}),u.jsx("span",{className:"text-[11px]",children:"No active positions"})]})]})]}):u.jsx("div",{className:"flex flex-col h-full items-center justify-center",children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:u.jsx(kh,{size:32,className:"text-[#E7FE55]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Polymarket Vault Required"}),u.jsxs("p",{className:"text-[#747580] text-sm",children:["To use the Polymarket Dealer, you need to create a ",u.jsx("span",{className:"text-[#E7FE55]",children:"Polymarket Vault"})," first."]}),u.jsx("button",{onClick:()=>r(be.VAULT),className:"mt-4 px-6 py-3 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black font-bold rounded-xl transition-all",children:"Go to Vault Operator"})]})})},Q0t=({settings:t,onUpdateSettings:e,onApplyChanges:n,isOn:r=!1,onToggle:i})=>{const[s,o]=S.useState(t),[a,l]=S.useState(!1);S.useEffect(()=>{o(t)},[t]),S.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(t))},[s,t]);const c=v=>{o(x=>({...x,...v}))},d=()=>{e(s),n()},h=()=>{o(t),l(!1)},m=v=>{if(v==="custom")return;if(s.selectedPreset===v){c({selectedPreset:"custom"});return}const x=uw[v];x&&c({selectedPreset:v,allowedCategories:x.categories})},g=v=>{const x=s.allowedCategories,b=x.includes(v)?x.filter(w=>w!==v):[...x,v];c({allowedCategories:b})};return u.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{className:"glass-panel p-4 rounded",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${r?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:u.jsx(Ro,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),u.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[u.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),u.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:r?"Active & Running":"Stopped"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[i&&u.jsx("button",{onClick:()=>i(!r),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${r?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${r?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),a&&u.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-[#1a1b21] hover:bg-[#232328] text-[#747580] px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all",children:[u.jsx(xx,{className:"h-3 w-3"})," Reset"]}),u.jsxs("button",{onClick:d,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[u.jsx(ql,{className:"h-3 w-3"})," Apply"]})]})]})}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(Bw,{className:"h-3.5 w-3.5"})," Strategy Preset"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(uw).filter(([v])=>v!=="custom").map(([v,x])=>u.jsxs("button",{onClick:()=>m(v),className:`p-3 rounded border text-left transition-all ${s.selectedPreset===v?"border-[#E7FE55] bg-[#E7FE55]/10":"border-[#232328] hover:border-[#747580] bg-[#0f1015]"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-sm",children:x.emoji}),u.jsx("span",{className:"text-[11px] font-semibold text-white",children:x.name})]}),u.jsx("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:x.description})]},v))})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(Y1,{className:"h-3.5 w-3.5"})," Capital & Risk"]}),u.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Type"}),u.jsxs("div",{className:"flex gap-0.5",children:[u.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#60a5fa] text-white":"text-[#747580] hover:text-white"}`,children:"Fix"}),u.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#34d399] text-white":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Amount ($)"}),s.bankrollType==="MANUAL"?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-24",value:s.manualBankroll||0,onChange:v=>c({manualBankroll:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({manualBankroll:(s.manualBankroll||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({manualBankroll:Math.max(0,(s.manualBankroll||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]}):u.jsx("span",{className:"text-sm font-mono text-[#34d399]",children:"Auto"})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Pos ($)"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-24",value:s.maxPositionSizeUSDC||0,onChange:v=>c({maxPositionSizeUSDC:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxPositionSizeUSDC:(s.maxPositionSizeUSDC||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({maxPositionSizeUSDC:Math.max(0,(s.maxPositionSizeUSDC||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Open"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-10",value:s.maxOpenPositions||1,onChange:v=>c({maxOpenPositions:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxOpenPositions:(s.maxOpenPositions||1)+1}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({maxOpenPositions:Math.max(1,(s.maxOpenPositions||1)-1)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(Qr,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Interval"}),u.jsx(ame,{value:s.checkIntervalSeconds||60,onChange:v=>c({checkIntervalSeconds:v})})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Volume"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:"text-[10px] text-[#747580]",children:"$"}),u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-16",value:s.minVolumeThreshold||0,onChange:v=>c({minVolumeThreshold:v})})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minVolumeThreshold:(s.minVolumeThreshold||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({minVolumeThreshold:Math.max(0,(s.minVolumeThreshold||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Liquidity"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:"text-[10px] text-[#747580]",children:"$"}),u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-16",value:s.minLiquidityThreshold||0,onChange:v=>c({minLiquidityThreshold:v})})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minLiquidityThreshold:(s.minLiquidityThreshold||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({minLiquidityThreshold:Math.max(0,(s.minLiquidityThreshold||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[u.jsx(pre,{className:"h-3.5 w-3.5"})," Market Categories"]}),u.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.allowedCategories.length})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:i1e.map(v=>u.jsxs("button",{onClick:()=>g(v.value),className:`px-3 py-1.5 rounded-full text-xs flex items-center gap-1.5 transition-all ${s.allowedCategories.includes(v.value)?"bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/50":"bg-[#0f1015] text-[#747580] border border-[#232328] hover:border-[#747580]"}`,children:[u.jsx("span",{children:v.icon}),v.label]},v.value))})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(dn,{className:"h-3.5 w-3.5"})," Market Filters"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Spread Edge"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-16",value:s.minSpreadThreshold!=null?s.minSpreadThreshold:.02,onChange:v=>c({minSpreadThreshold:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minSpreadThreshold:parseFloat(((s.minSpreadThreshold||.02)+.01).toFixed(2))}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({minSpreadThreshold:Math.max(0,parseFloat(((s.minSpreadThreshold||.02)-.01).toFixed(2)))}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Confidence"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-16",value:s.confidenceThreshold!=null?s.confidenceThreshold:.6,onChange:v=>c({confidenceThreshold:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({confidenceThreshold:Math.min(1,parseFloat(((s.confidenceThreshold||.6)+.05).toFixed(2)))}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:8})}),u.jsx("button",{onClick:()=>c({confidenceThreshold:Math.max(0,parseFloat(((s.confidenceThreshold||.6)-.05).toFixed(2)))}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:8})})]})]})]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-start gap-3",children:[u.jsx(R8,{className:"h-4 w-4 text-[#E7FE55] shrink-0 mt-0.5"}),u.jsx("div",{children:u.jsxs("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:[u.jsx("strong",{className:"text-[#a0a1a8]",children:"Polymarket Data:"})," Market data is fetched via the CLOB API. Categories filter which markets are analyzed. Higher confidence = fewer but more certain trades."]})})]})]})]})})},Z0t=({settings:t,onUpdateSettings:e,onApplyChanges:n})=>{var x,b;const[r,i]=S.useState(t.strategyPrompt),[s,o]=S.useState(!1),[a,l]=S.useState(t.promptMode||"preset"),[c,d]=S.useState(t.selectedPreset||"balanced");S.useEffect(()=>{i(t.strategyPrompt),l(t.promptMode||"preset"),d(t.selectedPreset||"balanced")},[t.strategyPrompt,t.promptMode,t.selectedPreset]),S.useEffect(()=>{o(r!==t.strategyPrompt)},[r,t.strategyPrompt]);const h=w=>{if(w==="custom")l("custom"),d("custom"),o(!0);else{if(c===w&&a==="preset"){l("custom"),d("custom"),o(!0);return}const T=r2[w];i(T),l("preset"),d(w),o(T!==t.strategyPrompt)}},m=w=>{i(w);const T=Object.entries(r2).find(([N,O])=>O===w);T?(l("preset"),d(T[0])):(l("custom"),d("custom")),o(w!==t.strategyPrompt)},g=()=>{e({strategyPrompt:r,promptMode:a,selectedPreset:c}),n(),o(!1)},v=w=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${c===w&&a==="preset"||a==="custom"&&w==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return u.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[u.jsx("div",{className:"glass-panel p-4 shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Bw,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),u.jsx("span",{className:"text-[12px] text-[#747580] font-medium leading-tight",children:"Presets are examples only. You are responsible for your strategy prompt."})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${a==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[u.jsx("span",{className:`h-1 w-1 rounded-full ${a==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),a==="preset"?`${(x=uw[c])==null?void 0:x.emoji} ${(b=uw[c])==null?void 0:b.name}`:"Custom"]}),s&&u.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"}),u.jsxs("button",{onClick:g,disabled:!s,className:`
                                flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                                ${s?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                            `,children:[u.jsx(D8,{className:"h-3.5 w-3.5"}),"Save"]})]})]})}),u.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[u.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[u.jsx(bre,{size:12,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(uw).filter(([w])=>w!=="custom").map(([w,T])=>u.jsxs("button",{onClick:()=>h(w),className:v(w),children:[u.jsx("span",{children:T.emoji}),u.jsx("span",{children:T.name})]},w)),u.jsx("div",{className:"h-px bg-[#232328] my-2"}),u.jsxs("button",{onClick:()=>h("custom"),className:v("custom"),children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Custom"})]})]}),u.jsx("div",{className:"mt-auto pt-4 px-1",children:u.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),u.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),u.jsx("textarea",{value:r,onChange:w=>m(w.target.value),className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your prediction market strategy here...
// 
// Example:
// You are a probability analyst focusing on mispriced markets.
// 1. Look for markets with high volume and clear catalysts.
// 2. Prioritize events with upcoming resolution dates.
// 3. Consider news sentiment and expert opinions.`}),u.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),u.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[u.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),u.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})},egt=({logs:t,onClearLogs:e})=>{const[n,r]=S.useState(null),i=t.filter(a=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(a.type))return!0;if(["INFO","WARNING"].includes(a.type)){const l=a.message.toLowerCase();return l.includes("executing")||l.includes("skipping")||l.includes("ignored")||l.includes("position")}return!1}),s=(a,l)=>a==="ERROR"?u.jsx("div",{className:"text-red-400",children:u.jsx(Xr,{size:16})}):a==="TRADE"?u.jsx("div",{className:"text-[#34d399]",children:u.jsx(gd,{size:16})}):l.includes("YES")||l.includes("BULLISH")?u.jsx("div",{className:"text-[#34d399]",children:u.jsx(dn,{size:16})}):l.includes("NO")||l.includes("BEARISH")?u.jsx("div",{className:"text-red-400",children:u.jsx(ld,{size:16})}):u.jsx("div",{className:"text-[#E7FE55]",children:u.jsx(ao,{size:16})}),o=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});return u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[u.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[u.jsx(ao,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),u.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[u.jsx(ao,{size:48,className:"mb-4 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),u.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(a=>{var h,m;const l=n===a.id,c=(h=a.details)==null?void 0:h.context,d=(m=a.details)==null?void 0:m.context;return u.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[u.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),u.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[s(a.type,a.message),u.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${a.type==="ERROR"?"text-red-400":a.type==="TRADE"?"text-[#34d399]":a.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:a.type})]}),u.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[u.jsx(Qr,{size:10}),o(a.timestamp)]})]}),u.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:a.message}),a.details&&a.details.fullReason&&u.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#E7FE55]/30 whitespace-pre-wrap",children:['"',typeof a.details.fullReason=="string"?a.details.fullReason:JSON.stringify(a.details.fullReason),'"']}),c&&u.jsxs("button",{onClick:()=>r(l?null:a.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#E7FE55] hover:text-[#d4eb4d] transition-colors uppercase tracking-wider",children:[l?u.jsx(Ah,{size:12}):u.jsx(pa,{size:12}),l?"Hide":"Show"," Market Context"]}),l&&c&&u.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[d.question&&u.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Market: ",u.jsxs("span",{className:"text-white",children:[d.question.slice(0,100),d.question.length>100?"...":""]})]}),(d.volume24h||d.liquidity)&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[u.jsx(Y1,{size:10}),u.jsx("span",{children:"Market Metrics"})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[d.volume24h&&u.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Volume 24h"}),u.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",d.volume24h.toLocaleString()]})]}),d.liquidity&&u.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Liquidity"}),u.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",d.liquidity.toLocaleString()]})]}),d.spread&&u.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Spread"}),u.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:[(d.spread*100).toFixed(2),"%"]})]})]})]}),(d.yesPrice||d.noPrice)&&u.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Prices:",d.yesPrice&&u.jsxs("span",{className:"text-[#34d399] font-mono ml-2",children:["YES: ",(d.yesPrice*100).toFixed(1),""]}),d.noPrice&&u.jsxs("span",{className:"text-red-400 font-mono ml-2",children:["NO: ",(d.noPrice*100).toFixed(1),""]})]}),u.jsx("pre",{className:"text-[9px] text-[#747580] overflow-x-auto whitespace-pre-wrap custom-scrollbar max-h-[200px]",children:JSON.stringify(d,null,2)})]})]})]},a.id)})})]})},tgt=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=S.useState(!1),s=t.details&&Object.keys(t.details).length>0;return u.jsxs(_t.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[u.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Hi,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),u.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),s&&u.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?u.jsx(pa,{className:"h-4 w-4"}):u.jsx(rl,{className:"h-4 w-4"})})]}),u.jsx(Wi,{children:s&&r&&u.jsx(_t.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},ngt=({status:t,onClearLogs:e})=>{const[n,r]=S.useState("thinking"),i=S.useRef(null);if(!t)return u.jsx("div",{className:"p-4 text-red-500",children:"Error: Status not available"});const s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`polymarket_logs_${new Date().toISOString()}.json`,d=document.createElement("a");d.setAttribute("href",l),d.setAttribute("download",c),d.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";case"REASONING":return"secondary";default:return"secondary"}};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden p-4",children:[u.jsx("div",{className:"glass-panel p-4 shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[u.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(ao,{className:"h-4 w-4"}),"Thinking"]}),u.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(j8,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&u.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),u.jsx(Wi,{children:n==="logs"&&u.jsxs(_t.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[u.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:u.jsx(Th,{className:"h-4 w-4"})}),u.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:u.jsx(Qs,{className:"h-4 w-4"})})]})})]})}),u.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&u.jsx(egt,{logs:t.logs,onClearLogs:e}),n==="logs"&&u.jsx("div",{className:"flex-1 min-h-0 relative",children:u.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?u.jsxs(_t.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[u.jsx(PN,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):u.jsx(Wi,{children:t.logs.map((a,l)=>u.jsx(tgt,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},rgt=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.pmPublicKey,s=n===be.POLYMARKET_DEALER?be.POLYMARKET_DASHBOARD:n,{state:o,toggleDealer:a,updateSettings:l,applyChanges:c,clearLogs:d}=W0e(t,e),h=()=>{switch(s){case be.POLYMARKET_DASHBOARD:return"dashboard";case be.POLYMARKET_THINKING:return"thinking";case be.POLYMARKET_CONFIG:return"config";case be.POLYMARKET_PROMPT:return"prompt";default:return"dashboard"}},m=g=>{switch(g){case"dashboard":r(be.POLYMARKET_DASHBOARD);break;case"thinking":r(be.POLYMARKET_THINKING);break;case"config":r(be.POLYMARKET_CONFIG);break;case"prompt":r(be.POLYMARKET_PROMPT);break}};return i?u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&u.jsx(_t.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:u.jsx(Hi,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),u.jsx(Cme,{value:h(),onValueChange:m,className:"flex-1 flex flex-col min-h-0",children:u.jsxs("div",{className:"flex-1 min-h-0 relative",children:[u.jsx(sd,{value:"dashboard",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:u.jsx(X0t,{status:o,onToggle:a,vaultAddress:t.pmPublicKey,setActiveTab:r})}),u.jsx(sd,{value:"thinking",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:u.jsx(ngt,{status:o,onClearLogs:d})}),u.jsx(sd,{value:"config",forceMount:!0,className:"h-full mt-0 absolute inset-0 overflow-y-auto data-[state=inactive]:hidden",children:u.jsx(Q0t,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c,isOn:o.isOn,onToggle:a})}),u.jsx(sd,{value:"prompt",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:u.jsx(Z0t,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c})})]})})]}):u.jsx(_t.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:u.jsx(kh,{size:32,className:"text-[#E7FE55]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),u.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Polymarket wallet before using Polymarket Dealer. Go to the ",u.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallet."]}),u.jsx(_r,{onClick:()=>r(be.VAULT),variant:"success",size:"lg",className:"mt-4 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black",children:"Go to Vault"})]})})},Jee=({state:t,walletAddress:e})=>{const[n,r]=Ls.useState(!1),[i,s]=Ls.useState(!1),[o,a]=Ls.useState(0),l=async()=>{if(e){r(!0);try{const b=await Mg.getAllPositions(e),w=[...b.meteora.map(T=>{var N,O;return{poolAddress:T.poolAddress,poolName:T.poolAddress.slice(0,8)+"...",protocol:T.protocol,valueUSD:T.valueUSD,unclaimedFeesUSD:T.unclaimedFees.totalUSD,inRange:((N=T.priceRange)==null?void 0:N.inRange)??!0,priceRange:T.priceRange?{min:T.priceRange.min,max:T.priceRange.max}:void 0,currentPrice:(O=T.priceRange)==null?void 0:O.current}}),...b.raydium.map(T=>{var N,O;return{poolAddress:T.poolAddress,poolName:T.poolAddress.slice(0,8)+"...",protocol:T.protocol,valueUSD:T.valueUSD,unclaimedFeesUSD:T.unclaimedFees.totalUSD,inRange:((N=T.priceRange)==null?void 0:N.inRange)??!0,priceRange:T.priceRange?{min:T.priceRange.min,max:T.priceRange.max}:void 0,currentPrice:(O=T.priceRange)==null?void 0:O.current}})];Er.updatePositions(w),Er.addLog("INFO",`Refreshed ${w.length} positions`)}catch(b){Er.addLog("ERROR","Failed to refresh positions",b.message)}r(!1)}},c=t.activePositions.filter(b=>b.inRange).length,d=t.activePositions.filter(b=>!b.inRange).length,h=S.useMemo(()=>t.logs.slice(0,10),[t.logs]),m=h[o],g=()=>{a(b=>Math.min(h.length-1,b+1))},v=()=>{a(b=>Math.max(0,b-1))},x=()=>{const b=!t.settings.policy.enabled;Er.updatePolicy({enabled:b})};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[u.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[u.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.settings.policy.enabled?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[u.jsxs("span",{className:"relative flex h-2 w-2",children:[t.settings.policy.enabled&&u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),u.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.settings.policy.enabled?"bg-[#E7FE55]":"bg-red-500"}`})]}),u.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.settings.policy.enabled?"text-[#E7FE55]":"text-[#747580]"}`,children:t.settings.policy.enabled?"ACTIVE":"OFFLINE"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Policy"}),u.jsx("button",{onClick:x,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.settings.policy.enabled?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:u.jsx("span",{className:`${t.settings.policy.enabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Value"}),u.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:["$",t.totalValueUSD.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unclaimed Fees"}),u.jsxs("div",{className:"text-xl font-semibold text-[#34d399] font-mono tracking-tight",children:["+$",t.totalUnclaimedFeesUSD.toFixed(2)]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Positions"}),u.jsx("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:t.activePositions.length})]})]}),u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"In Range"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:c})]}),u.jsx(O8,{className:"h-4 w-4 text-[#34d399]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Out of Range"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:d})]}),u.jsx(Rm,{className:"h-4 w-4 text-[#ef4444]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Min TVL"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.policy.minTVLRequired.toLocaleString()]})]}),u.jsx(vd,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Range"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.policy.maxRangeWidthPercent,"%"]})]}),u.jsx(f2,{className:"h-4 w-4 text-[#747580]"})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(jw,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Active LP Positions"})]}),u.jsxs("button",{onClick:l,disabled:n||!e,className:"flex items-center gap-1 px-2 py-1 text-[10px] text-[#747580] hover:text-white transition-colors disabled:opacity-50",children:[u.jsx(ql,{size:12,className:n?"animate-spin":""}),"Refresh"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:t.activePositions.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[u.jsx(jw,{className:"h-8 w-8 mb-2 opacity-40"}),u.jsx("span",{className:"text-[11px]",children:"No active LP positions"}),u.jsx("span",{className:"text-[10px] text-[#5a5b63] mt-1",children:e?"Use the Vault Operator to open positions":"Connect wallet to view positions"})]}):u.jsx("div",{className:"space-y-2",children:t.activePositions.map((b,w)=>u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328] flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${b.inRange?"bg-[#10b981]":"bg-[#ef4444]"}`}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-white",children:b.poolName}),u.jsx("div",{className:"text-[10px] text-[#747580] uppercase",children:b.protocol.replace("_"," ")})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-sm font-medium text-white font-mono",children:["$",b.valueUSD.toLocaleString(void 0,{maximumFractionDigits:2})]}),b.unclaimedFeesUSD>0&&u.jsxs("div",{className:"text-[10px] text-[#10b981] font-mono",children:["+$",b.unclaimedFeesUSD.toFixed(2)," fees"]})]})]},w))})})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ao,{className:`h-4 w-4 shrink-0 ${t.logs.length>0?"text-[#E7FE55]":"text-[#E7FE55]/60"}`}),u.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[u.jsx("button",{onClick:()=>s(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${i?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),u.jsx("button",{onClick:()=>s(!0),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${i?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Policy"})]})]}),!i&&h.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:g,disabled:o>=h.length-1,className:`p-1 rounded transition-colors ${o>=h.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous activity",children:u.jsx(Dw,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[o+1,"/",h.length]}),u.jsx("button",{onClick:v,disabled:o<=0,className:`p-1 rounded transition-colors ${o<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next activity",children:u.jsx(rl,{size:16})})]})]}),i?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:"POLICY CONFIG"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("div",{className:"space-y-3 text-[13px]",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-[#747580]",children:"Min TVL Required"}),u.jsxs("span",{className:"text-white font-mono",children:["$",t.settings.policy.minTVLRequired.toLocaleString()]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-[#747580]",children:"Max Range Width"}),u.jsxs("span",{className:"text-white font-mono",children:[t.settings.policy.maxRangeWidthPercent,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-[#747580]",children:"Max Capital/Pool"}),u.jsxs("span",{className:"text-white font-mono",children:[t.settings.policy.maxCapitalPerPoolPercent,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-[#747580]",children:"Confirmation Actions"}),u.jsx("span",{className:"text-white font-mono",children:t.settings.policy.requireConfirmationFor.length})]}),u.jsxs("div",{className:"pt-2 border-t border-[#232328]",children:[u.jsx("span",{className:"text-[#747580] text-[11px] uppercase tracking-wider",children:"Requires Confirmation"}),u.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.settings.policy.requireConfirmationFor.map((b,w)=>u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#232328] text-[#a0a1a8] text-[10px]",children:b},w))})]})]})})]}):m?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold uppercase tracking-wider ${m.type==="ERROR"?"bg-red-500/15 text-red-400":m.type==="WARNING"?"bg-[#f59e0b]/15 text-[#f59e0b]":m.type==="POLICY"?"bg-[#a855f7]/15 text-[#a855f7]":"bg-[#E7FE55]/15 text-[#E7FE55]"}`,children:m.type}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),u.jsxs("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:[u.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m.message}),m.details&&u.jsx("div",{className:"mt-3 pt-3 border-t border-[#232328] text-[11px] text-[#747580] font-mono",children:typeof m.details=="string"?m.details:JSON.stringify(m.details,null,2)})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#1a1b21] text-[#747580] text-[9px] font-semibold uppercase tracking-wider",children:"IDLE"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsx("p",{className:"text-[13px] text-[#747580] italic leading-relaxed",children:"No recent activity. Start interacting with LP positions to see updates here."})})]}),u.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Status"}),u.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.settings.policy.enabled?" Policy Active":" Policy Disabled"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Positions"}),u.jsxs("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:[t.activePositions.length," active (",c," in range)"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Wallet"}),u.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1 font-mono",children:e?`${e.slice(0,8)}...${e.slice(-6)}`:"Not connected"})]})]})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(ys,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Activity Log"}),u.jsxs("span",{className:"text-[10px] text-[#747580] ml-auto",children:[t.logs.length," entries"]})]}),u.jsxs("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:[t.logs.slice(0,10).map((b,w)=>u.jsxs("div",{className:"py-2 border-b border-[#232328]/50 last:border-0 flex items-start gap-3",children:[u.jsx("span",{className:`text-[10px] font-medium uppercase shrink-0 ${b.type==="ERROR"?"text-[#ef4444]":b.type==="WARNING"?"text-[#f59e0b]":b.type==="POLICY"?"text-[#a855f7]":"text-[#747580]"}`,children:b.type}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono shrink-0",children:new Date(b.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),u.jsx("span",{className:"text-[12px] text-[#a0a1a8] flex-1 truncate",children:b.message})]},w)),t.logs.length===0&&u.jsx("div",{className:"py-4 text-center text-[#747580] text-[11px]",children:"No activity recorded yet"})]})]})]})},igt=({policy:t})=>{const[e,n]=S.useState(t),[r,i]=S.useState(""),[s,o]=S.useState(""),[a,l]=S.useState(!1);S.useEffect(()=>{n(t)},[t]);const c=b=>{n(w=>({...w,...b})),l(!0)},d=()=>{Er.updatePolicy(e),l(!1)},h=()=>{n(U7),l(!0)},m=()=>{r&&!e.tokenAllowlist.includes(r.toUpperCase())&&(c({tokenAllowlist:[...e.tokenAllowlist,r.toUpperCase()]}),i(""))},g=()=>{s&&!e.tokenBlocklist.includes(s.toUpperCase())&&(c({tokenBlocklist:[...e.tokenBlocklist,s.toUpperCase()]}),o(""))},v=(b,w)=>{c(b==="allowlist"?{tokenAllowlist:e.tokenAllowlist.filter(T=>T!==w)}:{tokenBlocklist:e.tokenBlocklist.filter(T=>T!==w)})},x=b=>{const w=e.requireConfirmationFor;w.includes(b)?c({requireConfirmationFor:w.filter(T=>T!==b)}):c({requireConfirmationFor:[...w,b]})};return u.jsxs("div",{className:"flex flex-col h-full gap-3",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"glass-panel px-4 py-3 rounded flex flex-col justify-between h-[88px] relative overflow-hidden group",children:[u.jsxs("div",{className:"flex items-center justify-between z-10",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(vd,{size:18,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Policy Engine"})]}),a&&u.jsxs("div",{className:"flex items-center gap-1 text-[#f59e0b] bg-[#f59e0b]/10 px-1.5 py-0.5 rounded text-[10px]",children:[u.jsx(Ci,{size:10}),u.jsx("span",{children:"Unsaved"})]})]}),u.jsxs("div",{className:"flex items-center justify-between gap-2 z-10 mt-2",children:[u.jsx("div",{onClick:()=>c({enabled:!e.enabled}),className:`cursor-pointer w-12 h-6 rounded-full p-1 transition-colors relative ${e.enabled?"bg-[#E7FE55] border border-[#E7FE55]":"bg-[#232328] border border-[#303036]"}`,title:e.enabled?"Click to Disable":"Click to Enable",children:u.jsx("div",{className:`w-3.5 h-3.5 rounded-full shadow-sm transition-all absolute top-1 ${e.enabled?"bg-black left-[calc(100%-1.25rem)]":"bg-[#747580] left-1"}`})}),u.jsx("span",{className:`text-[10px] font-medium uppercase tracking-wider mr-auto ml-2 ${e.enabled?"text-[#E7FE55]":"text-[#747580]"}`,children:e.enabled?"Active":"Stopped"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:h,className:"p-1.5 rounded bg-[#232328] hover:bg-[#2a2b30] text-[#747580] hover:text-white transition-colors border border-transparent hover:border-[#303036]",title:"Reset Changes",children:u.jsx(yre,{size:14})}),u.jsxs("button",{onClick:d,disabled:!a,className:"px-3 py-1.5 bg-[#E7FE55] hover:bg-[#d4eb4c] text-black rounded text-[10px] font-semibold uppercase disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5 shadow-[0_0_10px_rgba(231,254,85,0.2)]",children:[u.jsx(D8,{size:12}),"Save"]})]})]})]}),u.jsxs("div",{className:"glass-panel px-4 py-3 rounded flex flex-col justify-between h-[88px] relative overflow-hidden group",children:[u.jsxs("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-wider z-10 flex items-center gap-2",children:[u.jsx(yd,{size:12}),"Min TVL Required"]}),u.jsxs("div",{className:"flex items-center justify-between z-10 mt-auto",children:[u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:"text-lg font-bold text-[#E7FE55]",children:"$"}),u.jsx(eo,{className:"text-2xl font-bold text-white font-mono bg-transparent outline-none w-32 appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:e.minTVLRequired,onChange:b=>c({minTVLRequired:b})})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minTVLRequired:e.minTVLRequired+1e3}),className:"p-1 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:10})}),u.jsx("button",{onClick:()=>c({minTVLRequired:Math.max(0,e.minTVLRequired-1e3)}),className:"p-1 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:10})})]})]}),u.jsx("div",{className:"w-full h-1 bg-[#232328] rounded-full mt-2 overflow-hidden z-10",children:u.jsx("div",{className:"h-full bg-[#E7FE55]/50 w-1/2 rounded-full"})})]}),u.jsxs("div",{className:"glass-panel px-4 py-3 rounded flex flex-col justify-between h-[88px] relative overflow-hidden group",children:[u.jsxs("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-wider z-10 flex items-center gap-2",children:[u.jsx(d2,{size:12}),"Min 24h Volume"]}),u.jsxs("div",{className:"flex items-center justify-between z-10 mt-auto",children:[u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:"text-lg font-bold text-[#E7FE55]",children:"$"}),u.jsx(eo,{className:"text-2xl font-bold text-white font-mono bg-transparent outline-none w-32 appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:e.minVolumeRequired,onChange:b=>c({minVolumeRequired:b})})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minVolumeRequired:e.minVolumeRequired+100}),className:"p-1 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(sr,{size:10})}),u.jsx("button",{onClick:()=>c({minVolumeRequired:Math.max(0,e.minVolumeRequired-100)}),className:"p-1 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Xr,{size:10})})]})]}),u.jsx("div",{className:"w-full h-1 bg-[#232328] rounded-full mt-2 overflow-hidden z-10",children:u.jsx("div",{className:"h-full bg-[#E7FE55]/50 w-2/3 rounded-full"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 flex-1 min-h-0",children:[u.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(f2,{size:14,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Advanced Constraints"})]}),u.jsxs("div",{className:"space-y-4 flex-1",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[10px] mb-2",children:[u.jsx("span",{className:"text-[#747580]",children:"Max Range Width"}),u.jsxs("span",{className:"text-white font-mono bg-[#1a1b21] px-1.5 py-0.5 rounded border border-[#232328]",children:[e.maxRangeWidthPercent,"%"]})]}),u.jsx("input",{type:"range",min:"5",max:"200",value:e.maxRangeWidthPercent,onChange:b=>c({maxRangeWidthPercent:parseInt(b.target.value)}),className:"w-full h-2 bg-[#232328] rounded-lg appearance-none cursor-pointer accent-[#E7FE55] hover:accent-[#d4eb4c]"}),u.jsxs("div",{className:"flex justify-between text-[8px] text-[#5a5b63] mt-1 font-medium tracking-wide",children:[u.jsx("span",{children:"TIGHT"}),u.jsx("span",{children:"WIDE"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[10px] mb-2",children:[u.jsx("span",{className:"text-[#747580]",children:"Min Range Width"}),u.jsxs("span",{className:"text-white font-mono bg-[#1a1b21] px-1.5 py-0.5 rounded border border-[#232328]",children:[e.minRangeWidthPercent,"%"]})]}),u.jsx("input",{type:"range",min:"1",max:"50",value:e.minRangeWidthPercent,onChange:b=>c({minRangeWidthPercent:parseInt(b.target.value)}),className:"w-full h-2 bg-[#232328] rounded-lg appearance-none cursor-pointer accent-[#E7FE55] hover:accent-[#d4eb4c]"}),u.jsxs("div",{className:"flex justify-between text-[8px] text-[#5a5b63] mt-1 font-medium tracking-wide",children:[u.jsx("span",{children:"CONCENTRATED"}),u.jsx("span",{children:"LOOSE"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[10px] mb-2",children:[u.jsx("span",{className:"text-[#747580]",children:"Max Capital / Pool"}),u.jsxs("span",{className:"text-white font-mono bg-[#1a1b21] px-1.5 py-0.5 rounded border border-[#232328]",children:[e.maxCapitalPerPoolPercent,"%"]})]}),u.jsx("input",{type:"range",min:"5",max:"100",value:e.maxCapitalPerPoolPercent,onChange:b=>c({maxCapitalPerPoolPercent:parseInt(b.target.value)}),className:"w-full h-2 bg-[#232328] rounded-lg appearance-none cursor-pointer accent-[#E7FE55] hover:accent-[#d4eb4c]"}),u.jsx("p",{className:"text-[9px] text-[#5a5b63] mt-1",children:"Max % of wallet capital to allocate to a single pool."})]})]})]}),u.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(d2,{size:14,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Token Filtering"})]}),u.jsxs("div",{className:"space-y-3 flex-1",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-[9px] text-[#747580] uppercase",children:["Allowlist ",u.jsx("span",{className:"normal-case text-[#5a5b63]",children:"(empty=all)"})]}),u.jsxs("div",{className:"flex gap-1 mt-1",children:[u.jsx("input",{type:"text",value:r,onChange:b=>i(b.target.value.toUpperCase()),onKeyPress:b=>b.key==="Enter"&&m(),className:"flex-1 px-2 py-1 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] focus:outline-none focus:border-[#E7FE55]",placeholder:"SOL, USDC..."}),u.jsx("button",{onClick:m,className:"px-2 bg-[#10b981] hover:bg-[#0d9668] text-white rounded",children:u.jsx(sr,{size:12})})]}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-2 min-h-[24px]",children:e.tokenAllowlist.length===0?u.jsx("span",{className:"text-[9px] text-[#5a5b63] italic",children:"All allowed"}):e.tokenAllowlist.map(b=>u.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-[#10b981]/15 text-[#10b981] rounded text-[9px] border border-[#10b981]/30",children:[b,u.jsx("button",{onClick:()=>v("allowlist",b),children:u.jsx(xx,{size:10})})]},b))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-[#747580] uppercase",children:"Blocklist"}),u.jsxs("div",{className:"flex gap-1 mt-1",children:[u.jsx("input",{type:"text",value:s,onChange:b=>o(b.target.value.toUpperCase()),onKeyPress:b=>b.key==="Enter"&&g(),className:"flex-1 px-2 py-1 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] focus:outline-none focus:border-[#E7FE55]",placeholder:"Block tokens..."}),u.jsx("button",{onClick:g,className:"px-2 bg-[#ef4444] hover:bg-[#dc2626] text-white rounded",children:u.jsx(sr,{size:12})})]}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-2 min-h-[24px]",children:e.tokenBlocklist.length===0?u.jsx("span",{className:"text-[9px] text-[#5a5b63] italic",children:"None blocked"}):e.tokenBlocklist.map(b=>u.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-[#ef4444]/15 text-[#ef4444] rounded text-[9px] border border-[#ef4444]/30",children:[b,u.jsx("button",{onClick:()=>v("blocklist",b),children:u.jsx(xx,{size:10})})]},b))})]})]})]}),u.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(yd,{size:14,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Confirmations"})]}),u.jsx("div",{className:"space-y-1.5 flex-1 overflow-y-auto custom-scrollbar",children:Object.keys(ky).map(b=>{const w=ky[b],T=e.requireConfirmationFor.includes(b);return u.jsxs("button",{onClick:()=>x(b),className:`w-full flex items-center justify-between px-2.5 py-2 rounded transition-colors ${T?"bg-[#E7FE55]/10 border border-[#E7FE55]/30":"bg-[#0f1015] hover:bg-[#1a1b21] border border-[#232328]"}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center text-[10px] ${T?"bg-[#E7FE55] text-black":"bg-[#232328] text-[#747580]"}`,children:T&&u.jsx(wm,{size:10})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"text-[11px] text-white",children:w.label})})]}),u.jsx("span",{className:`text-[8px] uppercase font-semibold px-1.5 py-0.5 rounded ${w.riskLevel==="high"?"bg-[#ef4444]/15 text-[#ef4444]":w.riskLevel==="medium"?"bg-[#f59e0b]/15 text-[#f59e0b]":"bg-[#10b981]/15 text-[#10b981]"}`,children:w.riskLevel})]},b)})})]})]})]})},sgt=({auditLog:t})=>{const[e,n]=S.useState("all"),[r,i]=S.useState("all"),[s,o]=S.useState(null),[a,l]=S.useState(""),c=S.useMemo(()=>t.filter(v=>{var x;return!(e!=="all"&&v.scope!==e||r!=="all"&&v.status!==r||a&&!v.action.toLowerCase().includes(a.toLowerCase())&&!((x=v.poolName)!=null&&x.toLowerCase().includes(a.toLowerCase())))}),[t,e,r,a]),d=S.useMemo(()=>{const v=t.filter(w=>w.status==="executed").length,x=t.filter(w=>w.status==="failed"||w.status==="rejected").length,b=t.filter(w=>w.status==="pending"||w.status==="confirmed").length;return{executed:v,failed:x,pending:b,total:t.length}},[t]),h=()=>{const v=JSON.stringify(t,null,2),x="data:application/json;charset=utf-8,"+encodeURIComponent(v),b=`solana_audit_log_${new Date().toISOString()}.json`,w=document.createElement("a");w.setAttribute("href",x),w.setAttribute("download",b),w.click()},m=v=>{switch(v){case"executed":return u.jsx(O8,{size:14,className:"text-[#10b981]"});case"failed":case"rejected":return u.jsx(Rm,{size:14,className:"text-[#ef4444]"});case"pending":case"confirmed":return u.jsx(Qr,{size:14,className:"text-[#f59e0b]"});default:return null}},g=v=>{switch(v){case"executed":return"text-[#10b981] bg-[#10b981]/15 border-[#10b981]/30";case"failed":return"text-[#ef4444] bg-[#ef4444]/15 border-[#ef4444]/30";case"rejected":return"text-[#ef4444] bg-[#ef4444]/15 border-[#ef4444]/30";case"pending":return"text-[#f59e0b] bg-[#f59e0b]/15 border-[#f59e0b]/30";case"confirmed":return"text-[#3b82f6] bg-[#3b82f6]/15 border-[#3b82f6]/30";default:return"text-[#747580] bg-[#747580]/15 border-[#747580]/30"}};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[u.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-[#E7FE55]/10",children:u.jsx(IV,{size:20,className:"text-[#E7FE55]"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-sm font-semibold text-white",children:"Audit Log"}),u.jsxs("p",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:[d.total," total entries"]})]})]}),u.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 px-3 py-1.5 bg-[#1a1b21] hover:bg-[#232328] rounded text-[10px] text-[#a0a1a8] hover:text-white transition-colors border border-[#232328]",children:[u.jsx(Qs,{size:12}),"Export"]})]}),u.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Total"}),u.jsx("div",{className:"text-lg font-semibold text-white font-mono",children:d.total})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Executed"}),u.jsx("div",{className:"text-lg font-semibold text-[#10b981] font-mono",children:d.executed})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Failed"}),u.jsx("div",{className:"text-lg font-semibold text-[#ef4444] font-mono",children:d.failed})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Pending"}),u.jsx("div",{className:"text-lg font-semibold text-[#f59e0b] font-mono",children:d.pending})]})]})]}),u.jsx("div",{className:"glass-panel p-4 rounded shrink-0",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[u.jsx(B8,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#747580]"}),u.jsx("input",{type:"text",value:a,onChange:v=>l(v.target.value),placeholder:"Search actions or pools...",className:"w-full pl-9 pr-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(pre,{size:14,className:"text-[#747580]"}),u.jsxs("select",{value:e,onChange:v=>n(v.target.value),className:"px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]",children:[u.jsx("option",{value:"all",children:"All Scopes"}),Object.keys(ky).map(v=>u.jsx("option",{value:v,children:ky[v].label},v))]})]}),u.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:"px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]",children:[u.jsx("option",{value:"all",children:"All Status"}),u.jsx("option",{value:"executed",children:"Executed"}),u.jsx("option",{value:"pending",children:"Pending"}),u.jsx("option",{value:"confirmed",children:"Confirmed"}),u.jsx("option",{value:"rejected",children:"Rejected"}),u.jsx("option",{value:"failed",children:"Failed"})]}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[c.length," / ",t.length]})]})}),u.jsx("div",{className:"glass-panel rounded flex-1 min-h-0 overflow-hidden",children:c.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[u.jsx(IV,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No audit entries found"}),u.jsx("p",{className:"text-[11px] text-[#5a5b63]",children:"LP operations will be logged here"})]}):u.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar divide-y divide-[#232328]",children:c.map(v=>{var x,b;return u.jsxs("div",{className:"hover:bg-[#1a1b21]/50 transition-colors",children:[u.jsxs("button",{onClick:()=>o(s===v.id?null:v.id),className:"w-full px-5 py-4 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[m(v.status),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm text-white font-medium",children:v.action}),u.jsxs("div",{className:"text-[10px] text-[#747580] flex items-center gap-2",children:[u.jsx("span",{className:"px-1.5 py-0.5 rounded bg-[#232328] text-[9px] uppercase",children:(x=ky[v.scope])==null?void 0:x.label}),u.jsx("span",{children:""}),u.jsx("span",{children:v.poolName||((b=v.poolAddress)==null?void 0:b.slice(0,8))||"N/A"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase border ${g(v.status)}`,children:v.status}),u.jsx("div",{className:"text-[10px] text-[#747580] mt-1 font-mono",children:new Date(v.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s===v.id?u.jsx(Ah,{size:16,className:"text-[#747580]"}):u.jsx(pa,{size:16,className:"text-[#747580]"})]})]}),s===v.id&&u.jsxs("div",{className:"px-5 pb-4 pt-0 space-y-4",children:[v.rationale&&u.jsxs("div",{className:"bg-[#0f1015] rounded p-4 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] uppercase tracking-wider text-[#E7FE55] mb-2 font-semibold",children:"Rationale"}),u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',v.rationale,'"']})]}),v.policyViolations&&v.policyViolations.length>0&&u.jsxs("div",{className:"bg-[#ef4444]/5 border border-[#ef4444]/30 rounded p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(Ci,{size:14,className:"text-[#ef4444]"}),u.jsx("span",{className:"text-[10px] font-semibold text-[#ef4444] uppercase tracking-wider",children:"Policy Violations"})]}),u.jsx("ul",{className:"text-[12px] text-[#ef4444]/80 space-y-1",children:v.policyViolations.map((w,T)=>u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-[#ef4444]",children:""}),w]},T))})]}),Object.keys(v.params).length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] uppercase tracking-wider text-[#747580] mb-2 font-semibold",children:"Parameters"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(v.params).map(([w,T])=>u.jsxs("div",{className:"bg-[#0f1015] rounded px-3 py-2 border border-[#232328]",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase",children:w}),u.jsx("div",{className:"text-[12px] text-white font-mono truncate",children:typeof T=="object"?JSON.stringify(T):String(T)})]},w))})]}),v.txSignature&&u.jsxs("div",{className:"flex items-center gap-3 pt-2 border-t border-[#232328]",children:[u.jsx("span",{className:"text-[9px] uppercase tracking-wider text-[#747580]",children:"Transaction"}),u.jsxs("a",{href:`https://explorer.solana.com/tx/${v.txSignature}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-[#3b82f6] hover:text-[#60a5fa] transition-colors font-mono",children:[v.txSignature.slice(0,16),"...",v.txSignature.slice(-8),u.jsx(gd,{size:10})]})]})]})]},v.id)})})})]})},ogt=({log:t,index:e})=>{const[n,r]=S.useState(!1),i=t.details&&(typeof t.details=="object"?Object.keys(t.details).length>0:!0),s=a=>{switch(a){case"ERROR":return u.jsx(Rm,{size:14,className:"text-[#ef4444]"});case"WARNING":return u.jsx(Ci,{size:14,className:"text-[#f59e0b]"});case"OPERATION":return u.jsx(Ro,{size:14,className:"text-[#3b82f6]"});case"POLICY":return u.jsx(vd,{size:14,className:"text-[#a855f7]"});default:return u.jsx(J1,{size:14,className:"text-[#747580]"})}},o=a=>{switch(a){case"ERROR":return"bg-[#ef4444]/15 text-[#ef4444] border-[#ef4444]/30";case"WARNING":return"bg-[#f59e0b]/15 text-[#f59e0b] border-[#f59e0b]/30";case"OPERATION":return"bg-[#3b82f6]/15 text-[#3b82f6] border-[#3b82f6]/30";case"POLICY":return"bg-[#a855f7]/15 text-[#a855f7] border-[#a855f7]/30";default:return"bg-[#747580]/15 text-[#747580] border-[#747580]/30"}};return u.jsxs("div",{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",children:[u.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[s(t.type),u.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] uppercase tracking-wider font-medium border ${o(t.type)}`,children:t.type}),u.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),i&&u.jsx("button",{onClick:()=>r(!n),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:n?"Collapse details":"Expand details",children:n?u.jsx(pa,{className:"h-4 w-4"}):u.jsx(rl,{className:"h-4 w-4"})})]}),i&&n&&u.jsx("pre",{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",children:typeof t.details=="string"?t.details:JSON.stringify(t.details,null,2)})]})]})},agt=({logs:t})=>{const e=t.filter(n=>n.type==="POLICY"||n.type==="OPERATION"||n.message.toLowerCase().includes("analyzing"));return e.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[u.jsx(ao,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No reasoning activity yet"}),u.jsx("p",{className:"text-xs text-[#5a5b63]",children:"AI analysis will appear here during operations"})]}):u.jsx("div",{className:"p-4 space-y-4",children:e.slice(0,20).map((n,r)=>u.jsxs("div",{className:`p-4 rounded-lg border-l-2 ${n.type==="POLICY"?"bg-[#a855f7]/5 border-[#a855f7]":n.type==="OPERATION"?"bg-[#3b82f6]/5 border-[#3b82f6]":"bg-[#E7FE55]/5 border-[#E7FE55]"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[n.type==="POLICY"?u.jsx(vd,{size:14,className:"text-[#a855f7]"}):n.type==="OPERATION"?u.jsx(Ro,{size:14,className:"text-[#3b82f6]"}):u.jsx(ao,{size:14,className:"text-[#E7FE55]"}),u.jsx("span",{className:`text-[10px] font-medium uppercase ${n.type==="POLICY"?"text-[#a855f7]":n.type==="OPERATION"?"text-[#3b82f6]":"text-[#E7FE55]"}`,children:n.type})]}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(n.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed",children:n.message}),n.details&&u.jsx("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:u.jsx("pre",{className:"text-[10px] text-[#747580] font-mono overflow-x-auto",children:typeof n.details=="string"?n.details:JSON.stringify(n.details,null,2)})})]},n.id))})},lgt=({logs:t})=>{const[e,n]=S.useState("thinking"),r=S.useRef(null),i=()=>{Er.clearLogs()},s=()=>{const o=JSON.stringify(t,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(o),l=`solana_dealer_logs_${new Date().toISOString()}.json`,c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",l),c.click()};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[u.jsx("div",{className:"glass-panel p-4 rounded shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[u.jsxs("button",{onClick:()=>n("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${e==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(ao,{className:"h-4 w-4"}),"Thinking"]}),u.jsxs("button",{onClick:()=>n("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${e==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(j8,{className:"h-4 w-4"}),"Activity Log",t.length>0&&u.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.length})]})]}),e==="logs"&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:i,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:u.jsx(Th,{className:"h-4 w-4"})}),u.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:u.jsx(Qs,{className:"h-4 w-4"})})]})]})}),u.jsxs("div",{className:"glass-panel rounded flex-1 min-h-0 overflow-hidden flex flex-col",children:[e==="thinking"&&u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:u.jsx(agt,{logs:t})}),e==="logs"&&u.jsx("div",{ref:r,className:"flex-1 overflow-y-auto custom-scrollbar",children:t.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[u.jsx(PN,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):u.jsx("div",{className:"p-2",children:t.map((o,a)=>u.jsx(ogt,{log:o,index:a},o.id))})})]})]})},cgt=({activeTab:t,walletAddress:e})=>{const n=Hmt(),r=()=>{switch(t){case be.SOLANA_DEALER:case be.SOLANA_DEALER_DASHBOARD:return u.jsx(Jee,{state:n,walletAddress:e});case be.SOLANA_DEALER_THINKING:return u.jsx(lgt,{logs:n.logs});case be.SOLANA_DEALER_POLICY:return u.jsx(igt,{policy:n.settings.policy});case be.SOLANA_DEALER_LOG:return u.jsx(sgt,{auditLog:n.auditLog});default:return u.jsx(Jee,{state:n,walletAddress:e})}};return u.jsx("div",{className:"h-full flex flex-col",children:r()})},Rge=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return u.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:u.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[u.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Privacy Policy"}),u.jsx("p",{className:"text-slate-400",children:"Last Updated: December 23, 2025"})]}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:u.jsx(u2,{size:24})})]}),u.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6 mb-8",children:u.jsx("p",{className:"text-blue-200 text-sm",children:"This Privacy Policy explains how AutonomousVault handles your data. In short: We don't want your data, and we can't see your keys."})}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(NN,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Data Collection & Storage"})]}),u.jsxs("p",{className:"leading-relaxed text-slate-300",children:["AutonomousVault operates on a ",u.jsx("strong",{children:'"Local-First"'})," architecture."]}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Private Keys:"})," Generated locally and stored ONLY in your browser's encrypted storage (IndexedDB). They never leave your device unencrypted."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Chat History:"})," Stored locally on your device."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Usage Data:"})," We do not collect analytics or tracking data."]})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(CN,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Third-Party Services"})]}),u.jsx("p",{className:"leading-relaxed text-slate-300",children:"While the app runs locally, it interacts with the following services to function:"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[u.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[u.jsx("h3",{className:"text-white font-medium mb-1",children:"Google Gemini (AI)"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Processes user prompts to generate responses. Your keys are NOT sent to the AI."})]}),u.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[u.jsx("h3",{className:"text-white font-medium mb-1",children:"Supabase (Auth & Database)"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Handles authentication (Email/Google), user settings, and encrypted conversation history (if 24/7 mode is enabled). We only see your User ID and Email."})]}),u.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[u.jsx("h3",{className:"text-white font-medium mb-1",children:"RPC Nodes"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Public nodes (Solana, Hyperliquid, Polygon) receive your signed transactions to execute them on-chain."})]})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(yd,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Your Rights (GDPR/LGPD)"})]}),u.jsx("p",{className:"leading-relaxed text-slate-300",children:"You have complete control over your data:"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Access:"})," All your data is visible within the application."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Deletion:"}),' You can use the "Delete Account" button in Settings to wipe all local data and delete your Supabase authentication record.']}),u.jsxs("li",{children:[u.jsx("strong",{children:"Portability:"})," You can export your private keys at any time via the Backup feature."]})]})]}),u.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[u.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),u.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[u.jsx(u2,{size:14})," Return to App"]})]})]})})},Oge=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return u.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:u.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[u.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Terms of Use"}),u.jsx("p",{className:"text-slate-400",children:"Effective Date: December 23, 2025"})]}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:u.jsx(u2,{size:24})})]}),u.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[u.jsx(Ci,{size:24}),u.jsx("h2",{className:"text-xl font-semibold",children:"Critical Disclaimer"})]}),u.jsx("p",{className:"text-sm leading-relaxed text-red-100/80",children:'AutonomousVault is experimental, open-source software. It is provided "AS IS", without warranty of any kind. You use this software entirely at your own risk. The developers constitute a non-custodial entity and accept no liability for lost funds, private key mismanagement, or protocol failures.'})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(W4,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Self-Custody Model"})]}),u.jsx("p",{className:"leading-relaxed text-slate-300",children:"By using AutonomousVault, you acknowledge that:"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsx("li",{children:"You are the sole custodian of your cryptographic private keys."}),u.jsx("li",{children:"Private keys are encrypted and stored solely within your device's browser (IndexedDB)."}),u.jsx("li",{children:"We (the developers) never have access to your private keys or funds."}),u.jsx("li",{children:"If you lose your password or clear your browser data without a backup, your funds are permanently lost."})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(vd,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Universal Data Liability"})]}),u.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ci,{className:"text-red-400 shrink-0 mt-1",size:20}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-red-200 font-medium",children:"Full User Responsibility"}),u.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The user assumes ",u.jsx("strong",{children:"FULL RESPONSIBILITY"})," for data security, custody, and management in ",u.jsx("strong",{children:"ALL MODES OF OPERATION"}),' (including "Local-Only" and "24/7 Server Mode").']}),u.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The application always operates on the user's own infrastructure (local machine or personal Supabase database). The developers of AutonomousVault accept ",u.jsx("strong",{children:"NO LIABILITY"})," for data loss, unauthorized access, key compromise, or any other security breaches under any circumstances."]})]})]})})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(PN,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Experimental Protocols & Risks"})]}),u.jsxs("div",{className:"space-y-4 text-slate-300",children:[u.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[u.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-400"}),"Hyperliquid (Testnet)"]}),u.jsxs("p",{className:"text-sm",children:["Trading on Hyperliquid is currently on ",u.jsx("strong",{children:"Testnet"}),". While no real funds are at risk on Testnet, the trading logic is experimental. The AI Agent's performance on Testnet does not guarantee future results on Mainnet."]})]}),u.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[u.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-400"}),"Polymarket (Prediction Markets)"]}),u.jsxs("p",{className:"text-sm",children:["Prediction markets involve high risk. The AI Agent provides analysis based on available data, but ",u.jsx("strong",{children:"outcome predictions are never guaranteed"}),"."]}),u.jsxs("p",{className:"text-sm mt-2 text-slate-400 italic",children:[u.jsx("strong",{children:"Regular compliance:"})," You are solely responsible for ensuring that using prediction markets complies with the laws of your jurisdiction."]})]})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(W4,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"4. AI Agent Autonomy"})]}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsx("li",{children:"The AI Agent executes instructions based on your prompts."}),u.jsx("li",{children:"It may generate code, execute transactions (Solana), trade perps (Hyperliquid), or interact with prediction markets (Polymarket)."}),u.jsxs("li",{children:[u.jsx("strong",{children:"You are the final approver."})," While the agent can be autonomous, you are responsible for monitoring its actions."]}),u.jsx("li",{children:"The developers are not liable for losses caused by AI hallucination, error, or unintended execution."})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(vd,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"5. Prohibited Activities"})]}),u.jsx("p",{className:"leading-relaxed text-slate-300",children:"You agree not to use AutonomousVault for:"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsx("li",{children:"Money laundering or financing terrorism."}),u.jsx("li",{children:"Interacting with sanctioned addresses or entities."}),u.jsx("li",{children:"Any illegal activity defined by the laws of your jurisdiction."})]})]}),u.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[u.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),u.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[u.jsx(u2,{size:14})," Return to App"]})]})]})})},ugt=({userId:t})=>{const[e,n]=S.useState(!0),[r,i]=S.useState(!0),s=t?`legal_consent_v1_${t}`:null;S.useEffect(()=>{(async()=>{if(!s){i(!1);return}const l=await Ae.getItem(s);n(l==="true"),i(!1)})()},[s]);const o=async()=>{s&&await Ae.setItem(s,"true"),n(!0)};return r||e?null:u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-[#0f172a] border border-slate-700 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"p-8 pb-4 text-center",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#E7FE55]/10 mb-4",children:u.jsx(xd,{size:32,className:"text-[#E7FE55]"})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Welcome to AutonomousVault"}),u.jsx("p",{className:"text-slate-400 text-sm",children:"Use AI to manage your DeFi portfolio autonomously."})]}),u.jsxs("div",{className:"px-8 py-4 space-y-4",children:[u.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 text-sm text-slate-300 border border-slate-700",children:[u.jsx("p",{className:"mb-2 font-semibold text-white",children:"Before you continue:"}),u.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-slate-400",children:[u.jsxs("li",{children:["This software is ",u.jsx("strong",{children:"experimental"}),"."]}),u.jsxs("li",{children:["You maintain ",u.jsx("strong",{children:"sole custody"})," of your keys."]}),u.jsxs("li",{children:["The developers are ",u.jsx("strong",{children:"not liable"})," for any funds lost."]})]})]}),u.jsxs("p",{className:"text-sm text-center text-slate-400 mt-4 leading-relaxed",children:['By clicking "I Agree", you acknowledge that you have read and agree to our',u.jsx("br",{}),u.jsx("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline font-medium",children:"Terms of Use"})," and ",u.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline font-medium",children:"Privacy Policy"}),"."]})]}),u.jsx("div",{className:"p-8 pt-4",children:u.jsxs("button",{onClick:o,className:"w-full bg-[#E7FE55] hover:bg-[#d9f044] text-black font-bold py-3.5 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-[#E7FE55]/20",children:["I Agree & Continue ",u.jsx(kN,{size:18})]})})]})})},dgt=({onNavigate:t})=>u.jsx("footer",{className:"w-full py-4 text-center mt-auto border-t border-[#232328]/50",children:u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("p",{className:"text-[10px] text-slate-600 font-medium tracking-wide",children:" 2025 AutonomousVault. All rights reserved."}),t&&u.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-slate-500",children:[u.jsx("button",{onClick:()=>t(be.TERMS),className:"hover:text-[#E7FE55] transition-colors",children:"Terms of Use"}),u.jsx("span",{children:""}),u.jsx("button",{onClick:()=>t(be.PRIVACY),className:"hover:text-[#E7FE55] transition-colors",children:"Privacy Policy"})]})]})});function fgt(){var jo,Bo,ga,Uo,vr,su,ou,mo;const[t,e]=S.useState(be.AGENT),[n,r]=S.useState([]),[i,s]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(!1),[d,h]=S.useState("providers"),[m,g]=S.useState("main"),{user:v,logout:x}=H1(),b=S.useRef(null);S.useEffect(()=>{b.current&&(b.current.scrollTop=0)},[t]);const w=Zn=>{const ws=Date.now();r(Ks=>[...Ks,{id:ws,message:Zn}]),setTimeout(()=>{r(Ks=>Ks.filter(Qd=>Qd.id!==ws))},5e3)},{vault:T,password:N,setPassword:O,withdrawAmount:j,setWithdrawAmount:_,withdrawNetwork:F,setWithdrawNetwork:z,showBackupModal:D,setShowBackupModal:$,backupKey:G,setBackupKey:H,showHLBackupModal:U,setShowHLBackupModal:A,hlBackupKey:I,setHLBackupKey:L,isImporting:q,setIsImporting:K,importKey:te,setImportKey:Y,refreshBalance:V,connectOwnerWallet:M,disconnectOwnerWallet:P,createVault:W,unlockVault:X,requestAirdrop:se,handleWithdraw:ae,handleWithdrawHL:Te,handleWithdrawPM:oe,importVault:ve,resolveTokenMint:ke,connectHLOwnerWallet:pe,disconnectHLOwnerWallet:ze,refreshHLBalance:Me,isImportingSolana:he,setIsImportingSolana:_e,isImportingHyperliquid:We,setIsImportingHyperliquid:Ke,isImportingPolymarket:it,setIsImportingPolymarket:st,solanaPassword:ut,setSolanaPassword:Je,hyperliquidPassword:Le,setHyperliquidPassword:et,polymarketPassword:Ut,setPolymarketPassword:Ie,solanaImportKey:qe,setSolanaImportKey:yt,hlImportKey:ht,setHLImportKey:ie,pmImportKey:J,setPMImportKey:Z,createSolanaVault:ue,createHyperliquidVault:Se,createPolymarketVault:de,importSolanaVault:ge,importHyperliquidVault:Qe,importPolymarketVault:tt,connectPMOwnerWallet:lt,disconnectPMOwnerWallet:Vt,showPMBackupModal:wt,setShowPMBackupModal:Ot,pmBackupKey:fn,setPMBackupKey:tn}=Nmt(w,(v==null?void 0:v.uid)||null),rn=!!(T.publicKey||T.hlPublicKey);S.useEffect(()=>{const Zn=[be.VAULT,be.PRIVACY,be.TERMS];rn&&!T.isUnlocked&&!Zn.includes(t)&&e(be.VAULT)},[t,T.isUnlocked,rn]),S.useEffect(()=>{T.isUnlocked&&e(be.DASHBOARD)},[T.isUnlocked]);const{portfolioHistoryDaily:Oi,portfolioHistoryLongTerm:Vn,assetPrices:le,assetAllocationData:Q}=Cmt(T),{activityFeed:ee,activityDisplayCount:fe,addActivityLog:Pe}=Pmt(T),{scheduledTasks:Oe,setScheduledTasks:He}=_mt(T,N,w,V,Pe),{messages:Qt,inputMessage:qt,setInputMessage:ct,isAiProcessing:gn,aiStatus:At,scrollRef:bn,handleSendMessage:dl,activeConversationId:ar,loadConversation:Tr,startNewConversation:Kh}=Kmt(T,N,He,w,V,Pe,ke);W0e(T,N);const iu=async Zn=>{try{const ws=await ra.loadConversation(Zn,N);ws?Tr(ws):w("Failed to load conversation.")}catch(ws){console.error(ws),w("Error loading conversation. Check password.")}},Do=()=>{Kh(),e(be.AGENT)},fl=async()=>{w("Refreshing data...");try{const Zn=[];T.publicKey&&Zn.push(V(T.publicKey)),T.hlPublicKey&&Zn.push(Me(T.hlPublicKey)),await Promise.all(Zn),w("Data refreshed successfully")}catch(Zn){console.error("Refresh failed",Zn),w("Failed to refresh data")}};return u.jsxs("div",{className:"flex h-screen bg-[#0f1015] text-[#e4e5e9] font-sans selection:bg-[#E7FE55]/30 overflow-hidden",children:[u.jsx(COe,{activeTab:t,setActiveTab:e,isVaultUnlocked:T.isUnlocked,onSelectConversation:iu,onNewChat:Do,currentConversationId:ar,password:N,isOpen:i,onClose:()=>s(!1)}),u.jsxs("main",{ref:b,className:`flex-1 ml-0 xl:ml-[264px] h-full flex flex-col relative transition-all duration-300 ${[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT,be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT,be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)?"overflow-hidden":"overflow-y-auto"}`,children:[t===be.AGENT&&T.isUnlocked&&u.jsxs("header",{className:"flex justify-between items-center mb-0 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 px-4 md:px-8 lg:px-12 xl:px-16 transition-all shrink-0 relative",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:u.jsx(OV,{size:24})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Vault Operator"}),u.jsx("p",{className:"text-[#747580] text-sm hidden sm:block",children:"Interact with Vault Operator using natural language."})]})]}),u.jsxs("div",{className:"hidden sm:flex items-center gap-2 absolute left-1/2 transform -translate-x-1/2",children:[u.jsxs("button",{onClick:Do,className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#E7FE55] hover:bg-[#f0ff7a] text-black text-sm font-medium transition-colors",title:"New Chat",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-black/20 flex items-center justify-center",children:u.jsx(sr,{size:12,strokeWidth:2.5})}),u.jsx("span",{className:"hidden md:inline",children:"New"})]}),u.jsx("div",{className:"h-6 w-px bg-[#232328]"}),u.jsxs("button",{onClick:()=>e(be.HISTORY),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Chat History",children:[u.jsx(Qr,{size:14}),u.jsx("span",{className:"hidden md:inline",children:"History"})]}),u.jsxs("button",{onClick:()=>e(be.SCHEDULER),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Automations",children:[u.jsx(I8,{size:14}),u.jsx("span",{className:"hidden md:inline",children:"Automations"})]}),u.jsx("div",{className:"h-6 w-px bg-[#232328]"}),u.jsxs("button",{onClick:()=>e(be.SOLANA_DEALER_POLICY),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Solana Dealer Policy",children:[u.jsx(vd,{size:14}),u.jsx("span",{className:"hidden md:inline",children:"Solana Policy"})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:()=>c(!0),className:"p-2 rounded-lg hover:bg-[#1a1b21] transition-colors text-[#747580] hover:text-white",title:"Send Feedback",children:u.jsx(h2,{size:18})}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(v==null?void 0:v.email)||"User",children:v!=null&&v.photoURL?u.jsx("img",{src:v.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((Bo=(jo=v==null?void 0:v.email)==null?void 0:jo[0])==null?void 0:Bo.toUpperCase())||"U"})}),o&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),u.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:u.jsxs("div",{className:"flex items-center gap-3",children:[v!=null&&v.photoURL?u.jsx("img",{src:v.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((Uo=(ga=v==null?void 0:v.email)==null?void 0:ga[0])==null?void 0:Uo.toUpperCase())||"U"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-white text-sm font-medium truncate",children:(v==null?void 0:v.displayName)||"User"}),u.jsx("p",{className:"text-[#747580] text-xs truncate",children:v==null?void 0:v.email})]})]})}),u.jsxs("div",{className:"p-2 space-y-1",children:[u.jsxs("button",{onClick:()=>{a(!1),fl()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(ql,{size:16}),"Refresh Data"]}),u.jsxs("button",{onClick:()=>{a(!1),e(be.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(p2,{size:16}),"Configuration"]}),u.jsx("div",{className:"border-t border-[#232328] my-2"}),u.jsxs("button",{onClick:async()=>{a(!1),await x()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(RV,{size:16}),"Sign Out"]})]})]})]})]})]})]}),u.jsxs("div",{className:`flex-1 pb-8 max-w-[1920px] mx-auto w-full ${t===be.AGENT?"px-6 md:px-24 lg:px-40 xl:px-64":"px-4 md:px-8 lg:px-12 xl:px-16"} ${[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT,be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t)?"flex flex-col h-full":""}`,children:[t!==be.AGENT&&T.isUnlocked&&u.jsxs("header",{className:"flex justify-between items-center mb-6 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 -mx-4 px-4 md:px-0 md:-mx-0 transition-all shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:u.jsx(OV,{size:24})}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"text-xl font-semibold text-white tracking-tight",children:[t===be.DASHBOARD&&"Dashboard",t===be.VAULT&&"Vault",t===be.SCHEDULER&&"Automations",[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t)&&"Hyperliquid Dealer",[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)&&"Solana Dealer",t===be.CONFIGURATION&&"Configuration",t===be.HYPERLIQUID&&"Hyperliquid Trading",t===be.HISTORY&&"History",t===be.TOKEN_COSTS&&"Token Costs",[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD].includes(t)&&"Polymarket Dealer",t===be.POLYMARKET_CONFIG&&"Polymarket Config",t===be.POLYMARKET_PROMPT&&"Polymarket Strategy"]}),u.jsxs("p",{className:"text-[#747580] text-sm hidden sm:block",children:[t===be.DASHBOARD&&"Overview of your autonomous DeFi agent.",t===be.VAULT&&"Manage your secure local vault and assets.",t===be.SCHEDULER&&"Automate swaps, transfers and trading strategies.",[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t)&&"Autonomous trading engine (BETA).",[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)&&"Solana LP operations with Policy Engine.",t===be.CONFIGURATION&&"Configure trading parameters and risk management.",t===be.HYPERLIQUID&&"Trade on Hyperliquid Testnet.",t===be.HISTORY&&"Review past conversations.",t===be.TOKEN_COSTS&&"Monitor AI token consumption and costs.",[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD].includes(t)&&"Autonomous prediction market trading (BETA).",t===be.POLYMARKET_CONFIG&&"Configure Polymarket trading parameters.",t===be.POLYMARKET_PROMPT&&"Customize your Polymarket strategy."]})]})})]}),[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t)&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>e(be.DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[be.VAULT_DEALER,be.DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),u.jsx("button",{onClick:()=>e(be.DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),u.jsx("button",{onClick:()=>e(be.DEALER_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.DEALER_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),u.jsx("button",{onClick:()=>e(be.DEALER_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.DEALER_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t)&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>e(be.POLYMARKET_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),u.jsx("button",{onClick:()=>e(be.POLYMARKET_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.POLYMARKET_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),u.jsx("button",{onClick:()=>e(be.POLYMARKET_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.POLYMARKET_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),u.jsx("button",{onClick:()=>e(be.POLYMARKET_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.POLYMARKET_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>e(be.SOLANA_DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),u.jsx("button",{onClick:()=>e(be.SOLANA_DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.SOLANA_DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),u.jsx("button",{onClick:()=>e(be.SOLANA_DEALER_POLICY),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.SOLANA_DEALER_POLICY?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Policy"}),u.jsx("button",{onClick:()=>e(be.SOLANA_DEALER_LOG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.SOLANA_DEALER_LOG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Audit Log"})]}),t===be.CONFIGURATION&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>h("providers"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${d==="providers"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"AI Providers"}),u.jsx("button",{onClick:()=>h("user"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${d==="user"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"User Settings"})]}),t===be.VAULT&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>g("main"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${m==="main"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Overview"}),u.jsx("button",{onClick:()=>g("solana"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${m==="solana"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Solana"}),u.jsx("button",{onClick:()=>g("hyperliquid"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${m==="hyperliquid"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Hyperliquid"}),u.jsx("button",{onClick:()=>g("polymarket"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${m==="polymarket"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Polymarket"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:()=>c(!0),className:"p-2 rounded-lg hover:bg-[#1a1b21] transition-colors text-[#747580] hover:text-white",title:"Send Feedback",children:u.jsx(h2,{size:18})}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(v==null?void 0:v.email)||"User",children:v!=null&&v.photoURL?u.jsx("img",{src:v.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((su=(vr=v==null?void 0:v.email)==null?void 0:vr[0])==null?void 0:su.toUpperCase())||"U"})}),o&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),u.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:u.jsxs("div",{className:"flex items-center gap-3",children:[v!=null&&v.photoURL?u.jsx("img",{src:v.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((mo=(ou=v==null?void 0:v.email)==null?void 0:ou[0])==null?void 0:mo.toUpperCase())||"U"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-white text-sm font-medium truncate",children:(v==null?void 0:v.displayName)||"User"}),u.jsx("p",{className:"text-[#747580] text-xs truncate",children:v==null?void 0:v.email})]})]})}),u.jsxs("div",{className:"p-2 space-y-1",children:[u.jsxs("button",{onClick:()=>{a(!1),fl()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(ql,{size:16}),"Refresh Data"]}),u.jsxs("button",{onClick:()=>{a(!1),e(be.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(p2,{size:16}),"Configuration"]}),u.jsx("div",{className:"border-t border-[#232328] my-2"}),u.jsxs("button",{onClick:async()=>{a(!1),await x()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(RV,{size:16}),"Sign Out"]})]})]})]})]})]})]}),(()=>{const Zn=[be.VAULT,be.PRIVACY,be.TERMS];return!rn||T.isUnlocked||Zn.includes(t)?u.jsxs("div",{className:`animate-fade-in ${[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT,be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t)?"flex-1 min-h-0":""}`,children:[t===be.DASHBOARD&&u.jsx(WKe,{vault:T,connectOwnerWallet:M,disconnectOwnerWallet:P,connectHLOwnerWallet:pe,disconnectHLOwnerWallet:ze,connectPMOwnerWallet:lt,disconnectPMOwnerWallet:Vt,assetPrices:le,portfolioHistoryDaily:Oi,portfolioHistoryLongTerm:Vn,scheduledTasks:Oe,assetAllocationData:Q,activityFeed:ee,activityDisplayCount:fe,setActiveTab:e,refreshData:fl,onNewChat:Do,setActivityDisplayCount:function(Ks){throw new Error("Function not implemented.")}}),t===be.VAULT&&u.jsx(YKe,{vault:T,password:N,setPassword:O,withdrawAmount:j,setWithdrawAmount:_,withdrawNetwork:F,setWithdrawNetwork:z,isImporting:q,setIsImporting:K,importKey:te,setImportKey:Y,createVault:W,unlockVault:X,requestAirdrop:se,handleWithdraw:ae,handleWithdrawHL:Te,handleWithdrawPM:oe,importVault:ve,addNotification:w,isImportingSolana:he,setIsImportingSolana:_e,isImportingHyperliquid:We,setIsImportingHyperliquid:Ke,isImportingPolymarket:it,setIsImportingPolymarket:st,solanaPassword:ut,setSolanaPassword:Je,hyperliquidPassword:Le,setHyperliquidPassword:et,polymarketPassword:Ut,setPolymarketPassword:Ie,solanaImportKey:qe,setSolanaImportKey:yt,hlImportKey:ht,setHLImportKey:ie,pmImportKey:J,setPMImportKey:Z,createSolanaVault:ue,createHyperliquidVault:Se,createPolymarketVault:de,importSolanaVault:ge,importHyperliquidVault:Qe,importPolymarketVault:tt,setActiveTab:e,activeVaultTab:m,setActiveVaultTab:g}),t===be.AGENT&&u.jsx(ant,{messages:Qt,inputMessage:qt,setInputMessage:ct,handleSendMessage:dl,isAiProcessing:gn,aiStatus:At,scrollRef:bn,isVaultUnlocked:T.isUnlocked,password:N,setPassword:O,unlockVault:X,hasVault:!!(T.publicKey||T.hlPublicKey),onNavigate:e,conversationId:ar}),t===be.HISTORY&&u.jsx(n0t,{onSelectConversation:async Ks=>{await iu(Ks),e(be.AGENT)}}),t===be.SCHEDULER&&u.jsx(cnt,{scheduledTasks:Oe,setScheduledTasks:He,addNotification:w}),[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t)&&u.jsx(Yut,{vault:T,password:N,activeTab:t,setActiveTab:e}),t===be.CONFIGURATION&&u.jsx(G0t,{vault:T,password:N,addNotification:w,activeTab:d,setActiveTab:h}),t===be.HYPERLIQUID&&u.jsx(Jut,{vault:T,connectHLOwnerWallet:pe,refreshHLBalance:Me,activityLog:ee}),t===be.TOKEN_COSTS&&u.jsx(W0t,{addNotification:w}),[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t)&&u.jsx(rgt,{vault:T,password:N,activeTab:t,setActiveTab:e}),[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)&&u.jsx(cgt,{activeTab:t,walletAddress:T.publicKey||void 0}),t===be.PRIVACY&&u.jsx(Rge,{onBack:()=>e(be.DASHBOARD)}),t===be.TERMS&&u.jsx(Oge,{onBack:()=>e(be.DASHBOARD)})]}):null})()]}),t!==be.AGENT&&u.jsx(dgt,{onNavigate:e})]}),u.jsx("div",{className:"fixed bottom-6 right-6 z-[60] space-y-2 pointer-events-none",children:n.map(Zn=>u.jsxs("div",{className:"bg-[#14151a] border border-[#232328] text-white px-4 py-3 rounded shadow-xl flex items-center gap-3 animate-slide-up pointer-events-auto max-w-sm",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full"}),u.jsx("span",{className:"text-sm font-medium",children:Zn.message}),u.jsx("button",{onClick:()=>r(ws=>ws.filter(Ks=>Ks.id!==Zn.id)),className:"text-[#747580] hover:text-white ml-2",children:u.jsx(xx,{size:14})})]},Zn.id))}),D&&u.jsx(Xut,{backupKey:G,setBackupKey:H,setShowBackupModal:$,addNotification:w,onClose:()=>{A(!0)}}),U&&u.jsx(Qut,{backupKey:I,setBackupKey:L,setShowBackupModal:A,addNotification:w}),wt&&u.jsx(Zut,{backupKey:fn,setBackupKey:tn,setShowBackupModal:Ot,addNotification:w}),u.jsx(ugt,{userId:(v==null?void 0:v.uid)||null}),u.jsx(t0t,{isOpen:l,onClose:()=>c(!1)})]})}function hgt(){const{signInWithGoogle:t,signInWithGitHub:e,signInWithDiscord:n,signInWithEthereum:r,signInWithSolana:i,signInWithEmail:s,signUp:o}=H1(),[a,l]=S.useState(""),[c,d]=S.useState(""),[h,m]=S.useState(!1),[g,v]=S.useState(!1),[x,b]=S.useState(null),[w,T]=S.useState(!1),[N,O]=S.useState(null),j=async z=>{b(null),O(z);try{z==="google"?await t():z==="github"?await e():z==="discord"&&await n()}catch(D){b(D.message||`Failed to sign in with ${z}`)}finally{O(null)}},_=async z=>{b(null),O(z);try{z==="ethereum"?await r():await i()}catch(D){b(D.message||`Failed to sign in with ${z}`)}finally{O(null)}},F=async z=>{z.preventDefault(),b(null),T(!0);try{h?await o(a,c):await s(a,c)}catch(D){const $=D.code||"";$.includes("user-not-found")?b("No account found with this email"):$.includes("wrong-password")?b("Incorrect password"):$.includes("email-already-in-use")?b("An account already exists with this email"):$.includes("weak-password")?b("Password should be at least 6 characters"):$.includes("invalid-email")?b("Invalid email address"):b(D.message||"Authentication failed")}finally{T(!1)}};return u.jsx("div",{className:"min-h-screen bg-[#0f1015] flex items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-[#E7FE55] to-[#c8e044] rounded-2xl mb-4 shadow-lg shadow-[#E7FE55]/20",children:u.jsxs("svg",{className:"w-8 h-8 text-black",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),u.jsx("path",{d:"M12 8v4"}),u.jsx("path",{d:"M12 16h.01"})]})}),u.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"AutonomousVault"}),u.jsx("p",{className:"text-[#747580] text-sm",children:"Multi-Chain DeFi Agent"})]}),u.jsxs("div",{className:"bg-[#14151a] border border-[#232328] rounded-xl p-6 shadow-xl",children:[u.jsx("h2",{className:"text-lg font-semibold text-white mb-6 text-center",children:h?"Create Account":"Welcome Back"}),x&&u.jsxs("div",{className:"flex items-center gap-2 bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-4",children:[u.jsx(R8,{size:16}),u.jsx("span",{className:"text-sm",children:x})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[u.jsxs("button",{onClick:()=>j("google"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-white hover:bg-gray-100 text-gray-800 font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),N==="google"?"...":"Google"]}),u.jsxs("button",{onClick:()=>j("github"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-[#24292e] hover:bg-[#2d3339] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0112 6.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})}),N==="github"?"...":"GitHub"]}),u.jsxs("button",{onClick:()=>j("discord"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-[#5865F2] hover:bg-[#4752c4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),N==="discord"?"...":"Discord"]}),u.jsxs("button",{onClick:()=>_("ethereum"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-[#627EEA] hover:bg-[#5470d4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Ethereum wallet (MetaMask, etc.)",children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[u.jsx("path",{d:"M12 1.5l-9 15.5L12 22l9-5-9-15.5zM12 22v-5l9-5-9 10z",opacity:"0.6"}),u.jsx("path",{d:"M12 1.5v8l9 5.5-9-13.5zM12 1.5L3 17l9-7.5V1.5z"})]}),N==="ethereum"?"...":"ETH"]}),u.jsxs("button",{onClick:()=>_("solana"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-[#9945FF] to-[#14F195] hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Solana wallet (Phantom, etc.)",children:[u.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M4.5 17.88l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28l-2.12 2.12a.75.75 0 01-.53.22H4.5a.75.75 0 01-.53-1.28h.03zM4.5 5.88A.75.75 0 015.03 4.6l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28L17.91 5.66a.75.75 0 01-.53.22H4.5zM19.5 11.88l-2.12-2.12a.75.75 0 00-.53-.22H4.5a.75.75 0 00-.53 1.28l2.12 2.12a.75.75 0 00.53.22H19.5a.75.75 0 00.53-1.28z"})}),N==="solana"?"...":"SOL"]})]}),u.jsxs("div",{className:"flex items-center gap-4 my-6",children:[u.jsx("div",{className:"flex-1 h-px bg-[#232328]"}),u.jsx("span",{className:"text-[#5a5b63] text-xs uppercase tracking-wider",children:"or continue with email"}),u.jsx("div",{className:"flex-1 h-px bg-[#232328]"})]}),u.jsxs("form",{onSubmit:F,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Email"}),u.jsxs("div",{className:"relative",children:[u.jsx(W2e,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),u.jsx("input",{type:"email",value:a,onChange:z=>l(z.target.value),placeholder:"you@example.com",required:!0,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-4 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(yd,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),u.jsx("input",{type:g?"text":"password",value:c,onChange:z=>d(z.target.value),placeholder:"",required:!0,minLength:6,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-12 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"}),u.jsx("button",{type:"button",onClick:()=>v(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#5a5b63] hover:text-[#a0a1a8] transition-colors",children:g?u.jsx(CN,{size:16}):u.jsx(M8,{size:16})})]})]}),u.jsx("button",{type:"submit",disabled:w,className:"w-full bg-[#E7FE55] hover:bg-[#f0ff7a] text-black font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Loading...":h?"Create Account":"Sign In"})]}),u.jsxs("p",{className:"text-center text-[#747580] text-sm mt-6",children:[h?"Already have an account?":"Don't have an account?"," ",u.jsx("button",{onClick:()=>{m(!h),b(null)},className:"text-[#E7FE55] hover:underline font-medium",children:h?"Sign In":"Sign Up"})]})]}),u.jsxs("p",{className:"text-center text-[#5a5b63] text-xs mt-6",children:["By continuing, you agree to our"," ",u.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Terms of Use"})," ","and"," ",u.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Privacy Policy"})]})]})})}function pgt({children:t}){const{user:e,loading:n}=H1();return n?u.jsx("div",{className:"h-screen w-screen bg-[#0f1015] flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsxs("div",{className:"relative w-12 h-12",children:[u.jsx("div",{className:"absolute inset-0 border-2 border-[#232328] rounded-full"}),u.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-[#E7FE55] rounded-full animate-spin"})]}),u.jsx("p",{className:"text-[#747580] text-sm",children:"Loading..."})]})}):e?u.jsx(u.Fragment,{children:t}):u.jsx(hgt,{})}Ty.initializeProductionSecurity();const Mge=document.getElementById("root");if(!Mge)throw new Error("Failed to find the root element");const d4=fve.createRoot(Mge),Xee=window.location.pathname;Xee==="/terms"?d4.render(u.jsx(Ls.StrictMode,{children:u.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:u.jsx(Oge,{onBack:()=>window.location.href="/"})})})):Xee==="/privacy"?d4.render(u.jsx(Ls.StrictMode,{children:u.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:u.jsx(Rge,{onBack:()=>window.location.href="/"})})})):d4.render(u.jsx(Ls.StrictMode,{children:u.jsx(a1e,{children:u.jsx(pgt,{children:u.jsx(fgt,{})})})}));export{Ol as $,kee as A,an as B,ymt as C,kre as D,bd as E,Ur as F,oy as G,Ike as H,x2 as I,xM as J,ha as K,we as L,Bt as M,wM as N,Bse as O,gt as P,j_e as Q,Xe as R,Ae as S,$i as T,VCe as U,TIe as V,_c as W,Ed as X,Os as Y,fIe as Z,Qn as _,bee as a,Fke as a$,t0 as a0,ms as a1,Gw as a2,tj as a3,dy as a4,rv as a5,SIe as a6,Hse as a7,Mr as a8,Ct as a9,yh as aA,nIe as aB,v2 as aC,Lm as aD,Nc as aE,HN as aF,Jw as aG,gw as aH,IH as aI,BR as aJ,nE as aK,C_e as aL,DCe as aM,Cx as aN,q_e as aO,zN as aP,xs as aQ,vx as aR,lo as aS,Dc as aT,Am as aU,P_e as aV,Pse as aW,Ww as aX,zs as aY,Om as aZ,Rse as a_,en as aa,dj as ab,AIe as ac,xr as ad,PIe as ae,IIe as af,jm as ag,N2 as ah,I_e as ai,nd as aj,L_e as ak,M_e as al,aj as am,Ose as an,qN as ao,k2 as ap,__e as aq,No as ar,Cgt as as,kc as at,oj as au,Cre as av,Du as aw,MH as ax,UH as ay,Gke as az,Emt as b,CM as b0,xh as b1,_Ie as b2,Fw as b3,rH as b4,Ere as b5,Sre as b6,Dh as b7,Kie as b8,Egt as b9,Wie as bA,mse as bB,Sd as bC,Igt as bD,Vie as bE,_N as bF,F8 as bG,JH as bH,WH as bI,Ogt as bJ,Fp as bK,gM as bL,wgt as bM,Zke as bN,DN as bO,Gi as bP,xgt as bQ,wd as bR,Q1 as bS,Rke as bT,vgt as bU,eNe as bV,Rgt as bW,Mgt as bX,Lgt as bY,wre as bZ,tE as ba,Kw as bb,yr as bc,Lke as bd,Dke as be,Z1 as bf,XH as bg,QIe as bh,XIe as bi,qR as bj,o_e as bk,Nre as bl,jke as bm,Lc as bn,toe as bo,eoe as bp,s_e as bq,bgt as br,Bre as bs,g2 as bt,Dgt as bu,gs as bv,_gt as bw,Pgt as bx,jgt as by,IN as bz,qx as c,nee as d,Xdt as e,uyt as f,bs as g,Qa as h,T0e as i,Qx as j,Kn as k,jh as l,Zx as m,tv as n,il as o,Lee as p,Y8 as q,cd as r,ev as s,xe as t,U0e as u,at as v,On as w,bt as x,vi as y,xn as z};
