var cxe=Object.defineProperty;var f$=t=>{throw TypeError(t)};var uxe=(t,e,n)=>e in t?cxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ce=(t,e,n)=>uxe(t,typeof e!="symbol"?e+"":e,n),bI=(t,e,n)=>e.has(t)||f$("Cannot "+n);var ie=(t,e,n)=>(bI(t,e,"read from private field"),n?n.call(t):e.get(t)),Ue=(t,e,n)=>e.has(t)?f$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,r)=>(bI(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ze=(t,e,n)=>(bI(t,e,"access private method"),n);var db=(t,e,n,r)=>({set _(i){me(t,e,i,n)},get _(){return ie(t,e,r)}});function dxe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var CD={},rC={};rC.byteLength=pxe;rC.toByteArray=gxe;rC.fromByteArray=vxe;var Ec=[],La=[],fxe=typeof Uint8Array<"u"?Uint8Array:Array,wI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var B0=0,hxe=wI.length;B0<hxe;++B0)Ec[B0]=wI[B0],La[wI.charCodeAt(B0)]=B0;La[45]=62;La[95]=63;function Nee(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function pxe(t){var e=Nee(t),n=e[0],r=e[1];return(n+r)*3/4-r}function mxe(t,e,n){return(e+n)*3/4-n}function gxe(t){var e,n=Nee(t),r=n[0],i=n[1],s=new fxe(mxe(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=La[t.charCodeAt(l)]<<18|La[t.charCodeAt(l+1)]<<12|La[t.charCodeAt(l+2)]<<6|La[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=La[t.charCodeAt(l)]<<2|La[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=La[t.charCodeAt(l)]<<10|La[t.charCodeAt(l+1)]<<4|La[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function yxe(t){return Ec[t>>18&63]+Ec[t>>12&63]+Ec[t>>6&63]+Ec[t&63]}function xxe(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(yxe(r));return i.join("")}function vxe(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(xxe(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Ec[e>>2]+Ec[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Ec[e>>10]+Ec[e>>4&63]+Ec[e<<2&63]+"=")),i.join("")}var ND={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ND.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,m=n?-1:1,g=t[e+h];for(h+=m,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+h],h+=m,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)};ND.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,h=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,x=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=x,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=x,o/=256,c-=8);t[n+g-x]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=rC,n=ND,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=B,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const oe=new s(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,s.prototype),Object.setPrototypeOf(oe,J),oe.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(oe){if(oe>i)throw new RangeError('The value "'+oe+'" is invalid for option "size"');const J=new s(oe);return Object.setPrototypeOf(J,u.prototype),J}function u(oe,J,Z){if(typeof oe=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(oe)}return h(oe,J,Z)}u.poolSize=8192;function h(oe,J,Z){if(typeof oe=="string")return v(oe,J);if(o.isView(oe))return w(oe);if(oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe);if(ln(oe,o)||oe&&ln(oe.buffer,o)||typeof a<"u"&&(ln(oe,a)||oe&&ln(oe.buffer,a)))return k(oe,J,Z);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const de=oe.valueOf&&oe.valueOf();if(de!=null&&de!==oe)return u.from(de,J,Z);const Ae=C(oe);if(Ae)return Ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return u.from(oe[Symbol.toPrimitive]("string"),J,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe)}u.from=function(oe,J,Z){return h(oe,J,Z)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function m(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function g(oe,J,Z){return m(oe),oe<=0?c(oe):J!==void 0?typeof Z=="string"?c(oe).fill(J,Z):c(oe).fill(J):c(oe)}u.alloc=function(oe,J,Z){return g(oe,J,Z)};function x(oe){return m(oe),c(oe<0?0:R(oe)|0)}u.allocUnsafe=function(oe){return x(oe)},u.allocUnsafeSlow=function(oe){return x(oe)};function v(oe,J){if((typeof J!="string"||J==="")&&(J="utf8"),!u.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const Z=O(oe,J)|0;let de=c(Z);const Ae=de.write(oe,J);return Ae!==Z&&(de=de.slice(0,Ae)),de}function b(oe){const J=oe.length<0?0:R(oe.length)|0,Z=c(J);for(let de=0;de<J;de+=1)Z[de]=oe[de]&255;return Z}function w(oe){if(ln(oe,s)){const J=new s(oe);return k(J.buffer,J.byteOffset,J.byteLength)}return b(oe)}function k(oe,J,Z){if(J<0||oe.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<J+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let de;return J===void 0&&Z===void 0?de=new s(oe):Z===void 0?de=new s(oe,J):de=new s(oe,J,Z),Object.setPrototypeOf(de,u.prototype),de}function C(oe){if(u.isBuffer(oe)){const J=R(oe.length)|0,Z=c(J);return Z.length===0||oe.copy(Z,0,0,J),Z}if(oe.length!==void 0)return typeof oe.length!="number"||Ie(oe.length)?c(0):b(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return b(oe.data)}function R(oe){if(oe>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return oe|0}function B(oe){return+oe!=oe&&(oe=0),u.alloc(+oe)}u.isBuffer=function(J){return J!=null&&J._isBuffer===!0&&J!==u.prototype},u.compare=function(J,Z){if(ln(J,s)&&(J=u.from(J,J.offset,J.byteLength)),ln(Z,s)&&(Z=u.from(Z,Z.offset,Z.byteLength)),!u.isBuffer(J)||!u.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===Z)return 0;let de=J.length,Ae=Z.length;for(let fe=0,ge=Math.min(de,Ae);fe<ge;++fe)if(J[fe]!==Z[fe]){de=J[fe],Ae=Z[fe];break}return de<Ae?-1:Ae<de?1:0},u.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(J,Z){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return u.alloc(0);let de;if(Z===void 0)for(Z=0,de=0;de<J.length;++de)Z+=J[de].length;const Ae=u.allocUnsafe(Z);let fe=0;for(de=0;de<J.length;++de){let ge=J[de];if(ln(ge,s))fe+ge.length>Ae.length?(u.isBuffer(ge)||(ge=u.from(ge)),ge.copy(Ae,fe)):s.prototype.set.call(Ae,ge,fe);else if(u.isBuffer(ge))ge.copy(Ae,fe);else throw new TypeError('"list" argument must be an Array of Buffers');fe+=ge.length}return Ae};function O(oe,J){if(u.isBuffer(oe))return oe.length;if(o.isView(oe)||ln(oe,o))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof oe);const Z=oe.length,de=arguments.length>2&&arguments[2]===!0;if(!de&&Z===0)return 0;let Ae=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return mt(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return qe(oe).length;default:if(Ae)return de?-1:mt(oe).length;J=(""+J).toLowerCase(),Ae=!0}}u.byteLength=O;function F(oe,J,Z){let de=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,J>>>=0,Z<=J))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return M(this,J,Z);case"utf8":case"utf-8":return z(this,J,Z);case"ascii":return K(this,J,Z);case"latin1":case"binary":return q(this,J,Z);case"base64":return L(this,J,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,J,Z);default:if(de)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),de=!0}}u.prototype._isBuffer=!0;function H(oe,J,Z){const de=oe[J];oe[J]=oe[Z],oe[Z]=de}u.prototype.swap16=function(){const J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<J;Z+=2)H(this,Z,Z+1);return this},u.prototype.swap32=function(){const J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<J;Z+=4)H(this,Z,Z+3),H(this,Z+1,Z+2);return this},u.prototype.swap64=function(){const J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<J;Z+=8)H(this,Z,Z+7),H(this,Z+1,Z+6),H(this,Z+2,Z+5),H(this,Z+3,Z+4);return this},u.prototype.toString=function(){const J=this.length;return J===0?"":arguments.length===0?z(this,0,J):F.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(J){if(!u.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J?!0:u.compare(this,J)===0},u.prototype.inspect=function(){let J="";const Z=t.INSPECT_MAX_BYTES;return J=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(J+=" ... "),"<Buffer "+J+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(J,Z,de,Ae,fe){if(ln(J,s)&&(J=u.from(J,J.offset,J.byteLength)),!u.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(Z===void 0&&(Z=0),de===void 0&&(de=J?J.length:0),Ae===void 0&&(Ae=0),fe===void 0&&(fe=this.length),Z<0||de>J.length||Ae<0||fe>this.length)throw new RangeError("out of range index");if(Ae>=fe&&Z>=de)return 0;if(Ae>=fe)return-1;if(Z>=de)return 1;if(Z>>>=0,de>>>=0,Ae>>>=0,fe>>>=0,this===J)return 0;let ge=fe-Ae,Ye=de-Z;const Je=Math.min(ge,Ye),ot=this.slice(Ae,fe),Ft=J.slice(Z,de);for(let Et=0;Et<Je;++Et)if(ot[Et]!==Ft[Et]){ge=ot[Et],Ye=Ft[Et];break}return ge<Ye?-1:Ye<ge?1:0};function j(oe,J,Z,de,Ae){if(oe.length===0)return-1;if(typeof Z=="string"?(de=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Ie(Z)&&(Z=Ae?0:oe.length-1),Z<0&&(Z=oe.length+Z),Z>=oe.length){if(Ae)return-1;Z=oe.length-1}else if(Z<0)if(Ae)Z=0;else return-1;if(typeof J=="string"&&(J=u.from(J,de)),u.isBuffer(J))return J.length===0?-1:$(oe,J,Z,de,Ae);if(typeof J=="number")return J=J&255,typeof s.prototype.indexOf=="function"?Ae?s.prototype.indexOf.call(oe,J,Z):s.prototype.lastIndexOf.call(oe,J,Z):$(oe,[J],Z,de,Ae);throw new TypeError("val must be string, number or Buffer")}function $(oe,J,Z,de,Ae){let fe=1,ge=oe.length,Ye=J.length;if(de!==void 0&&(de=String(de).toLowerCase(),de==="ucs2"||de==="ucs-2"||de==="utf16le"||de==="utf-16le")){if(oe.length<2||J.length<2)return-1;fe=2,ge/=2,Ye/=2,Z/=2}function Je(Ft,Et){return fe===1?Ft[Et]:Ft.readUInt16BE(Et*fe)}let ot;if(Ae){let Ft=-1;for(ot=Z;ot<ge;ot++)if(Je(oe,ot)===Je(J,Ft===-1?0:ot-Ft)){if(Ft===-1&&(Ft=ot),ot-Ft+1===Ye)return Ft*fe}else Ft!==-1&&(ot-=ot-Ft),Ft=-1}else for(Z+Ye>ge&&(Z=ge-Ye),ot=Z;ot>=0;ot--){let Ft=!0;for(let Et=0;Et<Ye;Et++)if(Je(oe,ot+Et)!==Je(J,Et)){Ft=!1;break}if(Ft)return ot}return-1}u.prototype.includes=function(J,Z,de){return this.indexOf(J,Z,de)!==-1},u.prototype.indexOf=function(J,Z,de){return j(this,J,Z,de,!0)},u.prototype.lastIndexOf=function(J,Z,de){return j(this,J,Z,de,!1)};function W(oe,J,Z,de){Z=Number(Z)||0;const Ae=oe.length-Z;de?(de=Number(de),de>Ae&&(de=Ae)):de=Ae;const fe=J.length;de>fe/2&&(de=fe/2);let ge;for(ge=0;ge<de;++ge){const Ye=parseInt(J.substr(ge*2,2),16);if(Ie(Ye))return ge;oe[Z+ge]=Ye}return ge}function V(oe,J,Z,de){return Tt(mt(J,oe.length-Z),oe,Z,de)}function U(oe,J,Z,de){return Tt(dt(J),oe,Z,de)}function T(oe,J,Z,de){return Tt(qe(J),oe,Z,de)}function _(oe,J,Z,de){return Tt(Wt(J,oe.length-Z),oe,Z,de)}u.prototype.write=function(J,Z,de,Ae){if(Z===void 0)Ae="utf8",de=this.length,Z=0;else if(de===void 0&&typeof Z=="string")Ae=Z,de=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(de)?(de=de>>>0,Ae===void 0&&(Ae="utf8")):(Ae=de,de=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const fe=this.length-Z;if((de===void 0||de>fe)&&(de=fe),J.length>0&&(de<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");let ge=!1;for(;;)switch(Ae){case"hex":return W(this,J,Z,de);case"utf8":case"utf-8":return V(this,J,Z,de);case"ascii":case"latin1":case"binary":return U(this,J,Z,de);case"base64":return T(this,J,Z,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,J,Z,de);default:if(ge)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),ge=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(oe,J,Z){return J===0&&Z===oe.length?e.fromByteArray(oe):e.fromByteArray(oe.slice(J,Z))}function z(oe,J,Z){Z=Math.min(oe.length,Z);const de=[];let Ae=J;for(;Ae<Z;){const fe=oe[Ae];let ge=null,Ye=fe>239?4:fe>223?3:fe>191?2:1;if(Ae+Ye<=Z){let Je,ot,Ft,Et;switch(Ye){case 1:fe<128&&(ge=fe);break;case 2:Je=oe[Ae+1],(Je&192)===128&&(Et=(fe&31)<<6|Je&63,Et>127&&(ge=Et));break;case 3:Je=oe[Ae+1],ot=oe[Ae+2],(Je&192)===128&&(ot&192)===128&&(Et=(fe&15)<<12|(Je&63)<<6|ot&63,Et>2047&&(Et<55296||Et>57343)&&(ge=Et));break;case 4:Je=oe[Ae+1],ot=oe[Ae+2],Ft=oe[Ae+3],(Je&192)===128&&(ot&192)===128&&(Ft&192)===128&&(Et=(fe&15)<<18|(Je&63)<<12|(ot&63)<<6|Ft&63,Et>65535&&Et<1114112&&(ge=Et))}}ge===null?(ge=65533,Ye=1):ge>65535&&(ge-=65536,de.push(ge>>>10&1023|55296),ge=56320|ge&1023),de.push(ge),Ae+=Ye}return te(de)}const G=4096;function te(oe){const J=oe.length;if(J<=G)return String.fromCharCode.apply(String,oe);let Z="",de=0;for(;de<J;)Z+=String.fromCharCode.apply(String,oe.slice(de,de+=G));return Z}function K(oe,J,Z){let de="";Z=Math.min(oe.length,Z);for(let Ae=J;Ae<Z;++Ae)de+=String.fromCharCode(oe[Ae]&127);return de}function q(oe,J,Z){let de="";Z=Math.min(oe.length,Z);for(let Ae=J;Ae<Z;++Ae)de+=String.fromCharCode(oe[Ae]);return de}function M(oe,J,Z){const de=oe.length;(!J||J<0)&&(J=0),(!Z||Z<0||Z>de)&&(Z=de);let Ae="";for(let fe=J;fe<Z;++fe)Ae+=Ve[oe[fe]];return Ae}function P(oe,J,Z){const de=oe.slice(J,Z);let Ae="";for(let fe=0;fe<de.length-1;fe+=2)Ae+=String.fromCharCode(de[fe]+de[fe+1]*256);return Ae}u.prototype.slice=function(J,Z){const de=this.length;J=~~J,Z=Z===void 0?de:~~Z,J<0?(J+=de,J<0&&(J=0)):J>de&&(J=de),Z<0?(Z+=de,Z<0&&(Z=0)):Z>de&&(Z=de),Z<J&&(Z=J);const Ae=this.subarray(J,Z);return Object.setPrototypeOf(Ae,u.prototype),Ae};function Y(oe,J,Z){if(oe%1!==0||oe<0)throw new RangeError("offset is not uint");if(oe+J>Z)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(J,Z,de){J=J>>>0,Z=Z>>>0,de||Y(J,Z,this.length);let Ae=this[J],fe=1,ge=0;for(;++ge<Z&&(fe*=256);)Ae+=this[J+ge]*fe;return Ae},u.prototype.readUintBE=u.prototype.readUIntBE=function(J,Z,de){J=J>>>0,Z=Z>>>0,de||Y(J,Z,this.length);let Ae=this[J+--Z],fe=1;for(;Z>0&&(fe*=256);)Ae+=this[J+--Z]*fe;return Ae},u.prototype.readUint8=u.prototype.readUInt8=function(J,Z){return J=J>>>0,Z||Y(J,1,this.length),this[J]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(J,Z){return J=J>>>0,Z||Y(J,2,this.length),this[J]|this[J+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(J,Z){return J=J>>>0,Z||Y(J,2,this.length),this[J]<<8|this[J+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])},u.prototype.readBigUInt64LE=gt(function(J){J=J>>>0,Qe(J,"offset");const Z=this[J],de=this[J+7];(Z===void 0||de===void 0)&&it(J,this.length-8);const Ae=Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24,fe=this[++J]+this[++J]*2**8+this[++J]*2**16+de*2**24;return BigInt(Ae)+(BigInt(fe)<<BigInt(32))}),u.prototype.readBigUInt64BE=gt(function(J){J=J>>>0,Qe(J,"offset");const Z=this[J],de=this[J+7];(Z===void 0||de===void 0)&&it(J,this.length-8);const Ae=Z*2**24+this[++J]*2**16+this[++J]*2**8+this[++J],fe=this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+de;return(BigInt(Ae)<<BigInt(32))+BigInt(fe)}),u.prototype.readIntLE=function(J,Z,de){J=J>>>0,Z=Z>>>0,de||Y(J,Z,this.length);let Ae=this[J],fe=1,ge=0;for(;++ge<Z&&(fe*=256);)Ae+=this[J+ge]*fe;return fe*=128,Ae>=fe&&(Ae-=Math.pow(2,8*Z)),Ae},u.prototype.readIntBE=function(J,Z,de){J=J>>>0,Z=Z>>>0,de||Y(J,Z,this.length);let Ae=Z,fe=1,ge=this[J+--Ae];for(;Ae>0&&(fe*=256);)ge+=this[J+--Ae]*fe;return fe*=128,ge>=fe&&(ge-=Math.pow(2,8*Z)),ge},u.prototype.readInt8=function(J,Z){return J=J>>>0,Z||Y(J,1,this.length),this[J]&128?(255-this[J]+1)*-1:this[J]},u.prototype.readInt16LE=function(J,Z){J=J>>>0,Z||Y(J,2,this.length);const de=this[J]|this[J+1]<<8;return de&32768?de|4294901760:de},u.prototype.readInt16BE=function(J,Z){J=J>>>0,Z||Y(J,2,this.length);const de=this[J+1]|this[J]<<8;return de&32768?de|4294901760:de},u.prototype.readInt32LE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},u.prototype.readInt32BE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},u.prototype.readBigInt64LE=gt(function(J){J=J>>>0,Qe(J,"offset");const Z=this[J],de=this[J+7];(Z===void 0||de===void 0)&&it(J,this.length-8);const Ae=this[J+4]+this[J+5]*2**8+this[J+6]*2**16+(de<<24);return(BigInt(Ae)<<BigInt(32))+BigInt(Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24)}),u.prototype.readBigInt64BE=gt(function(J){J=J>>>0,Qe(J,"offset");const Z=this[J],de=this[J+7];(Z===void 0||de===void 0)&&it(J,this.length-8);const Ae=(Z<<24)+this[++J]*2**16+this[++J]*2**8+this[++J];return(BigInt(Ae)<<BigInt(32))+BigInt(this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+de)}),u.prototype.readFloatLE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),n.read(this,J,!0,23,4)},u.prototype.readFloatBE=function(J,Z){return J=J>>>0,Z||Y(J,4,this.length),n.read(this,J,!1,23,4)},u.prototype.readDoubleLE=function(J,Z){return J=J>>>0,Z||Y(J,8,this.length),n.read(this,J,!0,52,8)},u.prototype.readDoubleBE=function(J,Z){return J=J>>>0,Z||Y(J,8,this.length),n.read(this,J,!1,52,8)};function X(oe,J,Z,de,Ae,fe){if(!u.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>Ae||J<fe)throw new RangeError('"value" argument is out of bounds');if(Z+de>oe.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(J,Z,de,Ae){if(J=+J,Z=Z>>>0,de=de>>>0,!Ae){const Ye=Math.pow(2,8*de)-1;X(this,J,Z,de,Ye,0)}let fe=1,ge=0;for(this[Z]=J&255;++ge<de&&(fe*=256);)this[Z+ge]=J/fe&255;return Z+de},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(J,Z,de,Ae){if(J=+J,Z=Z>>>0,de=de>>>0,!Ae){const Ye=Math.pow(2,8*de)-1;X(this,J,Z,de,Ye,0)}let fe=de-1,ge=1;for(this[Z+fe]=J&255;--fe>=0&&(ge*=256);)this[Z+fe]=J/ge&255;return Z+de},u.prototype.writeUint8=u.prototype.writeUInt8=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,1,255,0),this[Z]=J&255,Z+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,2,65535,0),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,2,65535,0),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,4,4294967295,0),this[Z+3]=J>>>24,this[Z+2]=J>>>16,this[Z+1]=J>>>8,this[Z]=J&255,Z+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,4,4294967295,0),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4};function re(oe,J,Z,de,Ae){De(J,de,Ae,oe,Z,7);let fe=Number(J&BigInt(4294967295));oe[Z++]=fe,fe=fe>>8,oe[Z++]=fe,fe=fe>>8,oe[Z++]=fe,fe=fe>>8,oe[Z++]=fe;let ge=Number(J>>BigInt(32)&BigInt(4294967295));return oe[Z++]=ge,ge=ge>>8,oe[Z++]=ge,ge=ge>>8,oe[Z++]=ge,ge=ge>>8,oe[Z++]=ge,Z}function ae(oe,J,Z,de,Ae){De(J,de,Ae,oe,Z,7);let fe=Number(J&BigInt(4294967295));oe[Z+7]=fe,fe=fe>>8,oe[Z+6]=fe,fe=fe>>8,oe[Z+5]=fe,fe=fe>>8,oe[Z+4]=fe;let ge=Number(J>>BigInt(32)&BigInt(4294967295));return oe[Z+3]=ge,ge=ge>>8,oe[Z+2]=ge,ge=ge>>8,oe[Z+1]=ge,ge=ge>>8,oe[Z]=ge,Z+8}u.prototype.writeBigUInt64LE=gt(function(J,Z=0){return re(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=gt(function(J,Z=0){return ae(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(J,Z,de,Ae){if(J=+J,Z=Z>>>0,!Ae){const Je=Math.pow(2,8*de-1);X(this,J,Z,de,Je-1,-Je)}let fe=0,ge=1,Ye=0;for(this[Z]=J&255;++fe<de&&(ge*=256);)J<0&&Ye===0&&this[Z+fe-1]!==0&&(Ye=1),this[Z+fe]=(J/ge>>0)-Ye&255;return Z+de},u.prototype.writeIntBE=function(J,Z,de,Ae){if(J=+J,Z=Z>>>0,!Ae){const Je=Math.pow(2,8*de-1);X(this,J,Z,de,Je-1,-Je)}let fe=de-1,ge=1,Ye=0;for(this[Z+fe]=J&255;--fe>=0&&(ge*=256);)J<0&&Ye===0&&this[Z+fe+1]!==0&&(Ye=1),this[Z+fe]=(J/ge>>0)-Ye&255;return Z+de},u.prototype.writeInt8=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,1,127,-128),J<0&&(J=255+J+1),this[Z]=J&255,Z+1},u.prototype.writeInt16LE=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,2,32767,-32768),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},u.prototype.writeInt16BE=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,2,32767,-32768),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},u.prototype.writeInt32LE=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,4,2147483647,-2147483648),this[Z]=J&255,this[Z+1]=J>>>8,this[Z+2]=J>>>16,this[Z+3]=J>>>24,Z+4},u.prototype.writeInt32BE=function(J,Z,de){return J=+J,Z=Z>>>0,de||X(this,J,Z,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4},u.prototype.writeBigInt64LE=gt(function(J,Z=0){return re(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=gt(function(J,Z=0){return ae(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Te(oe,J,Z,de,Ae,fe){if(Z+de>oe.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function ue(oe,J,Z,de,Ae){return J=+J,Z=Z>>>0,Ae||Te(oe,J,Z,4),n.write(oe,J,Z,de,23,4),Z+4}u.prototype.writeFloatLE=function(J,Z,de){return ue(this,J,Z,!0,de)},u.prototype.writeFloatBE=function(J,Z,de){return ue(this,J,Z,!1,de)};function pe(oe,J,Z,de,Ae){return J=+J,Z=Z>>>0,Ae||Te(oe,J,Z,8),n.write(oe,J,Z,de,52,8),Z+8}u.prototype.writeDoubleLE=function(J,Z,de){return pe(this,J,Z,!0,de)},u.prototype.writeDoubleBE=function(J,Z,de){return pe(this,J,Z,!1,de)},u.prototype.copy=function(J,Z,de,Ae){if(!u.isBuffer(J))throw new TypeError("argument should be a Buffer");if(de||(de=0),!Ae&&Ae!==0&&(Ae=this.length),Z>=J.length&&(Z=J.length),Z||(Z=0),Ae>0&&Ae<de&&(Ae=de),Ae===de||J.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),J.length-Z<Ae-de&&(Ae=J.length-Z+de);const fe=Ae-de;return this===J&&typeof s.prototype.copyWithin=="function"?this.copyWithin(Z,de,Ae):s.prototype.set.call(J,this.subarray(de,Ae),Z),fe},u.prototype.fill=function(J,Z,de,Ae){if(typeof J=="string"){if(typeof Z=="string"?(Ae=Z,Z=0,de=this.length):typeof de=="string"&&(Ae=de,de=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!u.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(J.length===1){const ge=J.charCodeAt(0);(Ae==="utf8"&&ge<128||Ae==="latin1")&&(J=ge)}}else typeof J=="number"?J=J&255:typeof J=="boolean"&&(J=Number(J));if(Z<0||this.length<Z||this.length<de)throw new RangeError("Out of range index");if(de<=Z)return this;Z=Z>>>0,de=de===void 0?this.length:de>>>0,J||(J=0);let fe;if(typeof J=="number")for(fe=Z;fe<de;++fe)this[fe]=J;else{const ge=u.isBuffer(J)?J:u.from(J,Ae),Ye=ge.length;if(Ye===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(fe=0;fe<de-Z;++fe)this[fe+Z]=ge[fe%Ye]}return this};const be={};function se(oe,J,Z){be[oe]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${oe}]`,this.stack,delete this.name}get code(){return oe}set code(Ae){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ae,writable:!0})}toString(){return`${this.name} [${oe}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(oe){return oe?`${oe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(oe,J){return`The "${oe}" argument must be of type number. Received type ${typeof J}`},TypeError),se("ERR_OUT_OF_RANGE",function(oe,J,Z){let de=`The value of "${oe}" is out of range.`,Ae=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?Ae=ve(String(Z)):typeof Z=="bigint"&&(Ae=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(Ae=ve(Ae)),Ae+="n"),de+=` It must be ${J}. Received ${Ae}`,de},RangeError);function ve(oe){let J="",Z=oe.length;const de=oe[0]==="-"?1:0;for(;Z>=de+4;Z-=3)J=`_${oe.slice(Z-3,Z)}${J}`;return`${oe.slice(0,Z)}${J}`}function Re(oe,J,Z){Qe(J,"offset"),(oe[J]===void 0||oe[J+Z]===void 0)&&it(J,oe.length-(Z+1))}function De(oe,J,Z,de,Ae,fe){if(oe>Z||oe<J){const ge=typeof J=="bigint"?"n":"";let Ye;throw J===0||J===BigInt(0)?Ye=`>= 0${ge} and < 2${ge} ** ${(fe+1)*8}${ge}`:Ye=`>= -(2${ge} ** ${(fe+1)*8-1}${ge}) and < 2 ** ${(fe+1)*8-1}${ge}`,new be.ERR_OUT_OF_RANGE("value",Ye,oe)}Re(de,Ae,fe)}function Qe(oe,J){if(typeof oe!="number")throw new be.ERR_INVALID_ARG_TYPE(J,"number",oe)}function it(oe,J,Z){throw Math.floor(oe)!==oe?(Qe(oe,Z),new be.ERR_OUT_OF_RANGE("offset","an integer",oe)):J<0?new be.ERR_BUFFER_OUT_OF_BOUNDS:new be.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${J}`,oe)}const et=/[^+/0-9A-Za-z-_]/g;function tt(oe){if(oe=oe.split("=")[0],oe=oe.trim().replace(et,""),oe.length<2)return"";for(;oe.length%4!==0;)oe=oe+"=";return oe}function mt(oe,J){J=J||1/0;let Z;const de=oe.length;let Ae=null;const fe=[];for(let ge=0;ge<de;++ge){if(Z=oe.charCodeAt(ge),Z>55295&&Z<57344){if(!Ae){if(Z>56319){(J-=3)>-1&&fe.push(239,191,189);continue}else if(ge+1===de){(J-=3)>-1&&fe.push(239,191,189);continue}Ae=Z;continue}if(Z<56320){(J-=3)>-1&&fe.push(239,191,189),Ae=Z;continue}Z=(Ae-55296<<10|Z-56320)+65536}else Ae&&(J-=3)>-1&&fe.push(239,191,189);if(Ae=null,Z<128){if((J-=1)<0)break;fe.push(Z)}else if(Z<2048){if((J-=2)<0)break;fe.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((J-=3)<0)break;fe.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((J-=4)<0)break;fe.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return fe}function dt(oe){const J=[];for(let Z=0;Z<oe.length;++Z)J.push(oe.charCodeAt(Z)&255);return J}function Wt(oe,J){let Z,de,Ae;const fe=[];for(let ge=0;ge<oe.length&&!((J-=2)<0);++ge)Z=oe.charCodeAt(ge),de=Z>>8,Ae=Z%256,fe.push(Ae),fe.push(de);return fe}function qe(oe){return e.toByteArray(tt(oe))}function Tt(oe,J,Z,de){let Ae;for(Ae=0;Ae<de&&!(Ae+Z>=J.length||Ae>=oe.length);++Ae)J[Ae+Z]=oe[Ae];return Ae}function ln(oe,J){return oe instanceof J||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===J.name}function Ie(oe){return oe!==oe}const Ve=(function(){const oe="0123456789abcdef",J=new Array(256);for(let Z=0;Z<16;++Z){const de=Z*16;for(let Ae=0;Ae<16;++Ae)J[de+Ae]=oe[Z]+oe[Ae]}return J})();function gt(oe){return typeof BigInt>"u"?ut:oe}function ut(){throw new Error("BigInt not supported")}})(CD);const on=CD.Buffer,an=CD.Buffer;window.Buffer=an;function hs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Pee(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var EI={exports:{}},fb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$;function bxe(){if(h$)return fb;h$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return fb.Fragment=e,fb.jsx=n,fb.jsxs=n,fb}var p$;function wxe(){return p$||(p$=1,EI.exports=bxe()),EI.exports}var d=wxe();function Exe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _ee={exports:{}},si=_ee.exports={},cc,uc;function J4(){throw new Error("setTimeout has not been defined")}function X4(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cc=setTimeout:cc=J4}catch{cc=J4}try{typeof clearTimeout=="function"?uc=clearTimeout:uc=X4}catch{uc=X4}})();function Iee(t){if(cc===setTimeout)return setTimeout(t,0);if((cc===J4||!cc)&&setTimeout)return cc=setTimeout,setTimeout(t,0);try{return cc(t,0)}catch{try{return cc.call(null,t,0)}catch{return cc.call(this,t,0)}}}function Sxe(t){if(uc===clearTimeout)return clearTimeout(t);if((uc===X4||!uc)&&clearTimeout)return uc=clearTimeout,clearTimeout(t);try{return uc(t)}catch{try{return uc.call(null,t)}catch{return uc.call(this,t)}}}var Wu=[],Gg=!1,bp,oT=-1;function Axe(){!Gg||!bp||(Gg=!1,bp.length?Wu=bp.concat(Wu):oT=-1,Wu.length&&Ree())}function Ree(){if(!Gg){var t=Iee(Axe);Gg=!0;for(var e=Wu.length;e;){for(bp=Wu,Wu=[];++oT<e;)bp&&bp[oT].run();oT=-1,e=Wu.length}bp=null,Gg=!1,Sxe(t)}}si.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Wu.push(new Oee(t,e)),Wu.length===1&&!Gg&&Iee(Ree)};function Oee(t,e){this.fun=t,this.array=e}Oee.prototype.run=function(){this.fun.apply(null,this.array)};si.title="browser";si.browser=!0;si.env={};si.argv=[];si.version="";si.versions={};function Td(){}si.on=Td;si.addListener=Td;si.once=Td;si.off=Td;si.removeListener=Td;si.removeAllListeners=Td;si.emit=Td;si.prependListener=Td;si.prependOnceListener=Td;si.listeners=function(t){return[]};si.binding=function(t){throw new Error("process.binding is not supported")};si.cwd=function(){return"/"};si.chdir=function(t){throw new Error("process.chdir is not supported")};si.umask=function(){return 0};var Txe=_ee.exports;const Ml=Exe(Txe);window.global=window;window.process=Ml;window.Buffer=an;console.log("Polyfills loaded");var SI={exports:{}},nn={},m$;function kxe(){if(m$)return nn;m$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),m=Symbol.iterator;function g(q){return q===null||typeof q!="object"?null:(q=m&&q[m]||q["@@iterator"],typeof q=="function"?q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(q,M,P){this.props=q,this.context=M,this.refs=b,this.updater=P||x}w.prototype.isReactComponent={},w.prototype.setState=function(q,M){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,M,"setState")},w.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function k(){}k.prototype=w.prototype;function C(q,M,P){this.props=q,this.context=M,this.refs=b,this.updater=P||x}var R=C.prototype=new k;R.constructor=C,v(R,w.prototype),R.isPureReactComponent=!0;var B=Array.isArray;function O(){}var F={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function j(q,M,P){var Y=P.ref;return{$$typeof:t,type:q,key:M,ref:Y!==void 0?Y:null,props:P}}function $(q,M){return j(q.type,M,q.props)}function W(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function V(q){var M={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(P){return M[P]})}var U=/\/+/g;function T(q,M){return typeof q=="object"&&q!==null&&q.key!=null?V(""+q.key):M.toString(36)}function _(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(O,O):(q.status="pending",q.then(function(M){q.status==="pending"&&(q.status="fulfilled",q.value=M)},function(M){q.status==="pending"&&(q.status="rejected",q.reason=M)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function L(q,M,P,Y,X){var re=typeof q;(re==="undefined"||re==="boolean")&&(q=null);var ae=!1;if(q===null)ae=!0;else switch(re){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(q.$$typeof){case t:case e:ae=!0;break;case u:return ae=q._init,L(ae(q._payload),M,P,Y,X)}}if(ae)return X=X(q),ae=Y===""?"."+T(q,0):Y,B(X)?(P="",ae!=null&&(P=ae.replace(U,"$&/")+"/"),L(X,M,P,"",function(pe){return pe})):X!=null&&(W(X)&&(X=$(X,P+(X.key==null||q&&q.key===X.key?"":(""+X.key).replace(U,"$&/")+"/")+ae)),M.push(X)),1;ae=0;var Te=Y===""?".":Y+":";if(B(q))for(var ue=0;ue<q.length;ue++)Y=q[ue],re=Te+T(Y,ue),ae+=L(Y,M,P,re,X);else if(ue=g(q),typeof ue=="function")for(q=ue.call(q),ue=0;!(Y=q.next()).done;)Y=Y.value,re=Te+T(Y,ue++),ae+=L(Y,M,P,re,X);else if(re==="object"){if(typeof q.then=="function")return L(_(q),M,P,Y,X);throw M=String(q),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return ae}function z(q,M,P){if(q==null)return q;var Y=[],X=0;return L(q,Y,"","",function(re){return M.call(P,re,X++)}),Y}function G(q){if(q._status===-1){var M=q._result;M=M(),M.then(function(P){(q._status===0||q._status===-1)&&(q._status=1,q._result=P)},function(P){(q._status===0||q._status===-1)&&(q._status=2,q._result=P)}),q._status===-1&&(q._status=0,q._result=M)}if(q._status===1)return q._result.default;throw q._result}var te=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(M))return}else if(typeof Ml=="object"&&typeof Ml.emit=="function"){Ml.emit("uncaughtException",q);return}console.error(q)},K={map:z,forEach:function(q,M,P){z(q,function(){M.apply(this,arguments)},P)},count:function(q){var M=0;return z(q,function(){M++}),M},toArray:function(q){return z(q,function(M){return M})||[]},only:function(q){if(!W(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return nn.Activity=h,nn.Children=K,nn.Component=w,nn.Fragment=n,nn.Profiler=i,nn.PureComponent=C,nn.StrictMode=r,nn.Suspense=l,nn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,nn.__COMPILER_RUNTIME={__proto__:null,c:function(q){return F.H.useMemoCache(q)}},nn.cache=function(q){return function(){return q.apply(null,arguments)}},nn.cacheSignal=function(){return null},nn.cloneElement=function(q,M,P){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Y=v({},q.props),X=q.key;if(M!=null)for(re in M.key!==void 0&&(X=""+M.key),M)!H.call(M,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&M.ref===void 0||(Y[re]=M[re]);var re=arguments.length-2;if(re===1)Y.children=P;else if(1<re){for(var ae=Array(re),Te=0;Te<re;Te++)ae[Te]=arguments[Te+2];Y.children=ae}return j(q.type,X,Y)},nn.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},nn.createElement=function(q,M,P){var Y,X={},re=null;if(M!=null)for(Y in M.key!==void 0&&(re=""+M.key),M)H.call(M,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(X[Y]=M[Y]);var ae=arguments.length-2;if(ae===1)X.children=P;else if(1<ae){for(var Te=Array(ae),ue=0;ue<ae;ue++)Te[ue]=arguments[ue+2];X.children=Te}if(q&&q.defaultProps)for(Y in ae=q.defaultProps,ae)X[Y]===void 0&&(X[Y]=ae[Y]);return j(q,re,X)},nn.createRef=function(){return{current:null}},nn.forwardRef=function(q){return{$$typeof:a,render:q}},nn.isValidElement=W,nn.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:G}},nn.memo=function(q,M){return{$$typeof:c,type:q,compare:M===void 0?null:M}},nn.startTransition=function(q){var M=F.T,P={};F.T=P;try{var Y=q(),X=F.S;X!==null&&X(P,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(O,te)}catch(re){te(re)}finally{M!==null&&P.types!==null&&(M.types=P.types),F.T=M}},nn.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},nn.use=function(q){return F.H.use(q)},nn.useActionState=function(q,M,P){return F.H.useActionState(q,M,P)},nn.useCallback=function(q,M){return F.H.useCallback(q,M)},nn.useContext=function(q){return F.H.useContext(q)},nn.useDebugValue=function(){},nn.useDeferredValue=function(q,M){return F.H.useDeferredValue(q,M)},nn.useEffect=function(q,M){return F.H.useEffect(q,M)},nn.useEffectEvent=function(q){return F.H.useEffectEvent(q)},nn.useId=function(){return F.H.useId()},nn.useImperativeHandle=function(q,M,P){return F.H.useImperativeHandle(q,M,P)},nn.useInsertionEffect=function(q,M){return F.H.useInsertionEffect(q,M)},nn.useLayoutEffect=function(q,M){return F.H.useLayoutEffect(q,M)},nn.useMemo=function(q,M){return F.H.useMemo(q,M)},nn.useOptimistic=function(q,M){return F.H.useOptimistic(q,M)},nn.useReducer=function(q,M,P){return F.H.useReducer(q,M,P)},nn.useRef=function(q){return F.H.useRef(q)},nn.useState=function(q){return F.H.useState(q)},nn.useSyncExternalStore=function(q,M,P){return F.H.useSyncExternalStore(q,M,P)},nn.useTransition=function(){return F.H.useTransition()},nn.version="19.2.3",nn}var g$;function jx(){return g$||(g$=1,SI.exports=kxe()),SI.exports}var A=jx();const Ns=hs(A),iC=dxe({__proto__:null,default:Ns},[A]);var AI={exports:{}},hb={},TI={exports:{}},kI={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y$;function Cxe(){return y$||(y$=1,(function(t){function e(L,z){var G=L.length;L.push(z);e:for(;0<G;){var te=G-1>>>1,K=L[te];if(0<i(K,z))L[te]=z,L[G]=K,G=te;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var z=L[0],G=L.pop();if(G!==z){L[0]=G;e:for(var te=0,K=L.length,q=K>>>1;te<q;){var M=2*(te+1)-1,P=L[M],Y=M+1,X=L[Y];if(0>i(P,G))Y<K&&0>i(X,P)?(L[te]=X,L[Y]=G,te=Y):(L[te]=P,L[M]=G,te=M);else if(Y<K&&0>i(X,G))L[te]=X,L[Y]=G,te=Y;else break e}}return z}function i(L,z){var G=L.sortIndex-z.sortIndex;return G!==0?G:L.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,m=3,g=!1,x=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function R(L){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=L)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function B(L){if(v=!1,R(L),!x)if(n(l)!==null)x=!0,O||(O=!0,V());else{var z=n(c);z!==null&&_(B,z.startTime-L)}}var O=!1,F=-1,H=5,j=-1;function $(){return b?!0:!(t.unstable_now()-j<H)}function W(){if(b=!1,O){var L=t.unstable_now();j=L;var z=!0;try{e:{x=!1,v&&(v=!1,k(F),F=-1),g=!0;var G=m;try{t:{for(R(L),h=n(l);h!==null&&!(h.expirationTime>L&&$());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var K=te(h.expirationTime<=L);if(L=t.unstable_now(),typeof K=="function"){h.callback=K,R(L),z=!0;break t}h===n(l)&&r(l),R(L)}else r(l);h=n(l)}if(h!==null)z=!0;else{var q=n(c);q!==null&&_(B,q.startTime-L),z=!1}}break e}finally{h=null,m=G,g=!1}z=void 0}}finally{z?V():O=!1}}}var V;if(typeof C=="function")V=function(){C(W)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,T=U.port2;U.port1.onmessage=W,V=function(){T.postMessage(null)}}else V=function(){w(W,0)};function _(L,z){F=w(function(){L(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(L){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var G=m;m=z;try{return L()}finally{m=G}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=m;m=L;try{return z()}finally{m=G}},t.unstable_scheduleCallback=function(L,z,G){var te=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?te+G:te):G=te,L){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=G+K,L={id:u++,callback:z,priorityLevel:L,startTime:G,expirationTime:K,sortIndex:-1},G>te?(L.sortIndex=G,e(c,L),n(l)===null&&L===n(c)&&(v?(k(F),F=-1):v=!0,_(B,G-te))):(L.sortIndex=K,e(l,L),x||g||(x=!0,O||(O=!0,V()))),L},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(L){var z=m;return function(){var G=m;m=z;try{return L.apply(this,arguments)}finally{m=G}}}})(kI)),kI}var x$;function Nxe(){return x$||(x$=1,TI.exports=Cxe()),TI.exports}var CI={exports:{}},ms={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v$;function Pxe(){if(v$)return ms;v$=1;var t=jx();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:l,containerInfo:c,implementation:u}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ms.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ms.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},ms.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},ms.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},ms.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ms.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,h=a(u,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):u==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ms.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},ms.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,h=a(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ms.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},ms.requestFormReset=function(l){r.d.r(l)},ms.unstable_batchedUpdates=function(l,c){return l(c)},ms.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},ms.useFormStatus=function(){return o.H.useHostTransitionStatus()},ms.version="19.2.3",ms}var b$;function Mee(){if(b$)return CI.exports;b$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),CI.exports=Pxe(),CI.exports}var w$;function _xe(){if(w$)return hb;w$=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=Nxe(),e=jx(),n=Mee();function r(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var p=f,y=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(y=p.return),f=p.return;while(f)}return p.tag===3?y:null}function o(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function a(f){if(f.tag===31){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function l(f){if(s(f)!==f)throw Error(r(188))}function c(f){var p=f.alternate;if(!p){if(p=s(f),p===null)throw Error(r(188));return p!==f?null:f}for(var y=f,E=p;;){var I=y.return;if(I===null)break;var D=I.alternate;if(D===null){if(E=I.return,E!==null){y=E;continue}break}if(I.child===D.child){for(D=I.child;D;){if(D===y)return l(I),f;if(D===E)return l(I),p;D=D.sibling}throw Error(r(188))}if(y.return!==E.return)y=I,E=D;else{for(var ne=!1,ce=I.child;ce;){if(ce===y){ne=!0,y=I,E=D;break}if(ce===E){ne=!0,E=I,y=D;break}ce=ce.sibling}if(!ne){for(ce=D.child;ce;){if(ce===y){ne=!0,y=D,E=I;break}if(ce===E){ne=!0,E=D,y=I;break}ce=ce.sibling}if(!ne)throw Error(r(189))}}if(y.alternate!==E)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?f:p}function u(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=u(f),p!==null)return p;f=f.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),C=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function V(f){return f===null||typeof f!="object"?null:(f=W&&f[W]||f["@@iterator"],typeof f=="function"?f:null)}var U=Symbol.for("react.client.reference");function T(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===U?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case v:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case B:return"Suspense";case O:return"SuspenseList";case j:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case x:return"Portal";case C:return f.displayName||"Context";case k:return(f._context.displayName||"Context")+".Consumer";case R:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case F:return p=f.displayName||null,p!==null?p:T(f.type)||"Memo";case H:p=f._payload,f=f._init;try{return T(f(p))}catch{}}return null}var _=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},te=[],K=-1;function q(f){return{current:f}}function M(f){0>K||(f.current=te[K],te[K]=null,K--)}function P(f,p){K++,te[K]=f.current,f.current=p}var Y=q(null),X=q(null),re=q(null),ae=q(null);function Te(f,p){switch(P(re,p),P(X,f),P(Y,null),p.nodeType){case 9:case 11:f=(f=p.documentElement)&&(f=f.namespaceURI)?L9(f):0;break;default:if(f=p.tagName,p=p.namespaceURI)p=L9(p),f=D9(p,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}M(Y),P(Y,f)}function ue(){M(Y),M(X),M(re)}function pe(f){f.memoizedState!==null&&P(ae,f);var p=Y.current,y=D9(p,f.type);p!==y&&(P(X,f),P(Y,y))}function be(f){X.current===f&&(M(Y),M(X)),ae.current===f&&(M(ae),ab._currentValue=G)}var se,ve;function Re(f){if(se===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);se=p&&p[1]||"",ve=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+se+f+ve}var De=!1;function Qe(f,p){if(!f||De)return"";De=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(He){var Fe=He}Reflect.construct(f,[],Xe)}else{try{Xe.call()}catch(He){Fe=He}f.call(Xe.prototype)}}else{try{throw Error()}catch(He){Fe=He}(Xe=f())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(He){if(He&&Fe&&typeof He.stack=="string")return[He.stack,Fe.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=E.DetermineComponentFrameRoot(),ne=D[0],ce=D[1];if(ne&&ce){var Se=ne.split(`
`),Be=ce.split(`
`);for(I=E=0;E<Se.length&&!Se[E].includes("DetermineComponentFrameRoot");)E++;for(;I<Be.length&&!Be[I].includes("DetermineComponentFrameRoot");)I++;if(E===Se.length||I===Be.length)for(E=Se.length-1,I=Be.length-1;1<=E&&0<=I&&Se[E]!==Be[I];)I--;for(;1<=E&&0<=I;E--,I--)if(Se[E]!==Be[I]){if(E!==1||I!==1)do if(E--,I--,0>I||Se[E]!==Be[I]){var Ge=`
`+Se[E].replace(" at new "," at ");return f.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",f.displayName)),Ge}while(1<=E&&0<=I);break}}}finally{De=!1,Error.prepareStackTrace=y}return(y=f?f.displayName||f.name:"")?Re(y):""}function it(f,p){switch(f.tag){case 26:case 27:case 5:return Re(f.type);case 16:return Re("Lazy");case 13:return f.child!==p&&p!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return Qe(f.type,!1);case 11:return Qe(f.type.render,!1);case 1:return Qe(f.type,!0);case 31:return Re("Activity");default:return""}}function et(f){try{var p="",y=null;do p+=it(f,y),y=f,f=f.return;while(f);return p}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var tt=Object.prototype.hasOwnProperty,mt=t.unstable_scheduleCallback,dt=t.unstable_cancelCallback,Wt=t.unstable_shouldYield,qe=t.unstable_requestPaint,Tt=t.unstable_now,ln=t.unstable_getCurrentPriorityLevel,Ie=t.unstable_ImmediatePriority,Ve=t.unstable_UserBlockingPriority,gt=t.unstable_NormalPriority,ut=t.unstable_LowPriority,oe=t.unstable_IdlePriority,J=t.log,Z=t.unstable_setDisableYieldValue,de=null,Ae=null;function fe(f){if(typeof J=="function"&&Z(f),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(de,f)}catch{}}var ge=Math.clz32?Math.clz32:ot,Ye=Math.log,Je=Math.LN2;function ot(f){return f>>>=0,f===0?32:31-(Ye(f)/Je|0)|0}var Ft=256,Et=262144,Mt=4194304;function cn(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function en(f,p,y){var E=f.pendingLanes;if(E===0)return 0;var I=0,D=f.suspendedLanes,ne=f.pingedLanes;f=f.warmLanes;var ce=E&134217727;return ce!==0?(E=ce&~D,E!==0?I=cn(E):(ne&=ce,ne!==0?I=cn(ne):y||(y=ce&~f,y!==0&&(I=cn(y))))):(ce=E&~D,ce!==0?I=cn(ce):ne!==0?I=cn(ne):y||(y=E&~f,y!==0&&(I=cn(y)))),I===0?0:p!==0&&p!==I&&(p&D)===0&&(D=I&-I,y=p&-p,D>=y||D===32&&(y&4194048)!==0)?p:I}function rn(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function Ni(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var f=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),f}function le(f){for(var p=[],y=0;31>y;y++)p.push(f);return p}function Q(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function ee(f,p,y,E,I,D){var ne=f.pendingLanes;f.pendingLanes=y,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=y,f.entangledLanes&=y,f.errorRecoveryDisabledLanes&=y,f.shellSuspendCounter=0;var ce=f.entanglements,Se=f.expirationTimes,Be=f.hiddenUpdates;for(y=ne&~y;0<y;){var Ge=31-ge(y),Xe=1<<Ge;ce[Ge]=0,Se[Ge]=-1;var Fe=Be[Ge];if(Fe!==null)for(Be[Ge]=null,Ge=0;Ge<Fe.length;Ge++){var He=Fe[Ge];He!==null&&(He.lane&=-536870913)}y&=~Xe}E!==0&&he(f,E,0),D!==0&&I===0&&f.tag!==0&&(f.suspendedLanes|=D&~(ne&~p))}function he(f,p,y){f.pendingLanes|=p,f.suspendedLanes&=~p;var E=31-ge(p);f.entangledLanes|=p,f.entanglements[E]=f.entanglements[E]|1073741824|y&261930}function Pe(f,p){var y=f.entangledLanes|=p;for(f=f.entanglements;y;){var E=31-ge(y),I=1<<E;I&p|f[E]&p&&(f[E]|=p),y&=~I}}function Oe(f,p){var y=p&-p;return y=(y&42)!==0?1:ze(y),(y&(f.suspendedLanes|p))!==0?0:y}function ze(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function Xt(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function $t(){var f=z.p;return f!==0?f:(f=window.event,f===void 0?32:s$(f.type))}function st(f,p){var y=z.p;try{return z.p=f,p()}finally{z.p=y}}var mn=Math.random().toString(36).slice(2),bt="__reactFiber$"+mn,vn="__reactProps$"+mn,sl="__reactContainer$"+mn,ur="__reactEvents$"+mn,yr="__reactListeners$"+mn,Qc="__reactHandles$"+mn,Xl="__reactResources$"+mn,ca="__reactMarker$"+mn;function Ql(f){delete f[bt],delete f[vn],delete f[ur],delete f[yr],delete f[Qc]}function Po(f){var p=f[bt];if(p)return p;for(var y=f.parentNode;y;){if(p=y[sl]||y[bt]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(f=H9(f);f!==null;){if(y=f[bt])return y;f=H9(f)}return p}f=y,y=f.parentNode}return null}function _o(f){if(f=f[bt]||f[sl]){var p=f.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return f}return null}function ua(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f.stateNode;throw Error(r(33))}function Io(f){var p=f[Xl];return p||(p=f[Xl]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function xr(f){f[ca]=!0}var Zc=new Set,vr={};function Yr(f,p){ps(f,p),ps(f+"Capture",p)}function ps(f,p){for(vr[f]=p,f=0;f<p.length;f++)Zc.add(p[f])}var Ih=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),r0={},i0={};function Sv(f){return tt.call(i0,f)?!0:tt.call(r0,f)?!1:Ih.test(f)?i0[f]=!0:(r0[f]=!0,!1)}function Bd(f,p,y){if(Sv(p))if(y===null)f.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":f.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){f.removeAttribute(p);return}}f.setAttribute(p,""+y)}}function Ud(f,p,y){if(y===null)f.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(p);return}f.setAttribute(p,""+y)}}function eu(f,p,y,E){if(E===null)f.removeAttribute(y);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(y);return}f.setAttributeNS(p,y,""+E)}}function da(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function C7(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function nge(f,p,y){var E=Object.getOwnPropertyDescriptor(f.constructor.prototype,p);if(!f.hasOwnProperty(p)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var I=E.get,D=E.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return I.call(this)},set:function(ne){y=""+ne,D.call(this,ne)}}),Object.defineProperty(f,p,{enumerable:E.enumerable}),{getValue:function(){return y},setValue:function(ne){y=""+ne},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function hP(f){if(!f._valueTracker){var p=C7(f)?"checked":"value";f._valueTracker=nge(f,p,""+f[p])}}function N7(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var y=p.getValue(),E="";return f&&(E=C7(f)?f.checked?"true":"false":f.value),f=E,f!==y?(p.setValue(f),!0):!1}function RE(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var rge=/[\n"\\]/g;function fa(f){return f.replace(rge,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function pP(f,p,y,E,I,D,ne,ce){f.name="",ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?f.type=ne:f.removeAttribute("type"),p!=null?ne==="number"?(p===0&&f.value===""||f.value!=p)&&(f.value=""+da(p)):f.value!==""+da(p)&&(f.value=""+da(p)):ne!=="submit"&&ne!=="reset"||f.removeAttribute("value"),p!=null?mP(f,ne,da(p)):y!=null?mP(f,ne,da(y)):E!=null&&f.removeAttribute("value"),I==null&&D!=null&&(f.defaultChecked=!!D),I!=null&&(f.checked=I&&typeof I!="function"&&typeof I!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?f.name=""+da(ce):f.removeAttribute("name")}function P7(f,p,y,E,I,D,ne,ce){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(f.type=D),p!=null||y!=null){if(!(D!=="submit"&&D!=="reset"||p!=null)){hP(f);return}y=y!=null?""+da(y):"",p=p!=null?""+da(p):y,ce||p===f.value||(f.value=p),f.defaultValue=p}E=E??I,E=typeof E!="function"&&typeof E!="symbol"&&!!E,f.checked=ce?f.checked:!!E,f.defaultChecked=!!E,ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(f.name=ne),hP(f)}function mP(f,p,y){p==="number"&&RE(f.ownerDocument)===f||f.defaultValue===""+y||(f.defaultValue=""+y)}function s0(f,p,y,E){if(f=f.options,p){p={};for(var I=0;I<y.length;I++)p["$"+y[I]]=!0;for(y=0;y<f.length;y++)I=p.hasOwnProperty("$"+f[y].value),f[y].selected!==I&&(f[y].selected=I),I&&E&&(f[y].defaultSelected=!0)}else{for(y=""+da(y),p=null,I=0;I<f.length;I++){if(f[I].value===y){f[I].selected=!0,E&&(f[I].defaultSelected=!0);return}p!==null||f[I].disabled||(p=f[I])}p!==null&&(p.selected=!0)}}function _7(f,p,y){if(p!=null&&(p=""+da(p),p!==f.value&&(f.value=p),y==null)){f.defaultValue!==p&&(f.defaultValue=p);return}f.defaultValue=y!=null?""+da(y):""}function I7(f,p,y,E){if(p==null){if(E!=null){if(y!=null)throw Error(r(92));if(_(E)){if(1<E.length)throw Error(r(93));E=E[0]}y=E}y==null&&(y=""),p=y}y=da(p),f.defaultValue=y,E=f.textContent,E===y&&E!==""&&E!==null&&(f.value=E),hP(f)}function o0(f,p){if(p){var y=f.firstChild;if(y&&y===f.lastChild&&y.nodeType===3){y.nodeValue=p;return}}f.textContent=p}var ige=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function R7(f,p,y){var E=p.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?E?f.setProperty(p,""):p==="float"?f.cssFloat="":f[p]="":E?f.setProperty(p,y):typeof y!="number"||y===0||ige.has(p)?p==="float"?f.cssFloat=y:f[p]=(""+y).trim():f[p]=y+"px"}function O7(f,p,y){if(p!=null&&typeof p!="object")throw Error(r(62));if(f=f.style,y!=null){for(var E in y)!y.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?f.setProperty(E,""):E==="float"?f.cssFloat="":f[E]="");for(var I in p)E=p[I],p.hasOwnProperty(I)&&y[I]!==E&&R7(f,I,E)}else for(var D in p)p.hasOwnProperty(D)&&R7(f,D,p[D])}function gP(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sge=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oge=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function OE(f){return oge.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}function tu(){}var yP=null;function xP(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var a0=null,l0=null;function M7(f){var p=_o(f);if(p&&(f=p.stateNode)){var y=f[vn]||null;e:switch(f=p.stateNode,p.type){case"input":if(pP(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),p=y.name,y.type==="radio"&&p!=null){for(y=f;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+fa(""+p)+'"][type="radio"]'),p=0;p<y.length;p++){var E=y[p];if(E!==f&&E.form===f.form){var I=E[vn]||null;if(!I)throw Error(r(90));pP(E,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(p=0;p<y.length;p++)E=y[p],E.form===f.form&&N7(E)}break e;case"textarea":_7(f,y.value,y.defaultValue);break e;case"select":p=y.value,p!=null&&s0(f,!!y.multiple,p,!1)}}}var vP=!1;function L7(f,p,y){if(vP)return f(p,y);vP=!0;try{var E=f(p);return E}finally{if(vP=!1,(a0!==null||l0!==null)&&(bS(),a0&&(p=a0,f=l0,l0=a0=null,M7(p),f)))for(p=0;p<f.length;p++)M7(f[p])}}function Av(f,p){var y=f.stateNode;if(y===null)return null;var E=y[vn]||null;if(E===null)return null;y=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(y&&typeof y!="function")throw Error(r(231,p,typeof y));return y}var nu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bP=!1;if(nu)try{var Tv={};Object.defineProperty(Tv,"passive",{get:function(){bP=!0}}),window.addEventListener("test",Tv,Tv),window.removeEventListener("test",Tv,Tv)}catch{bP=!1}var Fd=null,wP=null,ME=null;function D7(){if(ME)return ME;var f,p=wP,y=p.length,E,I="value"in Fd?Fd.value:Fd.textContent,D=I.length;for(f=0;f<y&&p[f]===I[f];f++);var ne=y-f;for(E=1;E<=ne&&p[y-E]===I[D-E];E++);return ME=I.slice(f,1<E?1-E:void 0)}function LE(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function DE(){return!0}function j7(){return!1}function lo(f){function p(y,E,I,D,ne){this._reactName=y,this._targetInst=I,this.type=E,this.nativeEvent=D,this.target=ne,this.currentTarget=null;for(var ce in f)f.hasOwnProperty(ce)&&(y=f[ce],this[ce]=y?y(D):D[ce]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?DE:j7,this.isPropagationStopped=j7,this}return h(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=DE)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=DE)},persist:function(){},isPersistent:DE}),p}var Rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jE=lo(Rh),kv=h({},Rh,{view:0,detail:0}),age=lo(kv),EP,SP,Cv,BE=h({},kv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:TP,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Cv&&(Cv&&f.type==="mousemove"?(EP=f.screenX-Cv.screenX,SP=f.screenY-Cv.screenY):SP=EP=0,Cv=f),EP)},movementY:function(f){return"movementY"in f?f.movementY:SP}}),B7=lo(BE),lge=h({},BE,{dataTransfer:0}),cge=lo(lge),uge=h({},kv,{relatedTarget:0}),AP=lo(uge),dge=h({},Rh,{animationName:0,elapsedTime:0,pseudoElement:0}),fge=lo(dge),hge=h({},Rh,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),pge=lo(hge),mge=h({},Rh,{data:0}),U7=lo(mge),gge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vge(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=xge[f])?!!p[f]:!1}function TP(){return vge}var bge=h({},kv,{key:function(f){if(f.key){var p=gge[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=LE(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?yge[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:TP,charCode:function(f){return f.type==="keypress"?LE(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?LE(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),wge=lo(bge),Ege=h({},BE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F7=lo(Ege),Sge=h({},kv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:TP}),Age=lo(Sge),Tge=h({},Rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),kge=lo(Tge),Cge=h({},BE,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Nge=lo(Cge),Pge=h({},Rh,{newState:0,oldState:0}),_ge=lo(Pge),Ige=[9,13,27,32],kP=nu&&"CompositionEvent"in window,Nv=null;nu&&"documentMode"in document&&(Nv=document.documentMode);var Rge=nu&&"TextEvent"in window&&!Nv,$7=nu&&(!kP||Nv&&8<Nv&&11>=Nv),z7=" ",H7=!1;function V7(f,p){switch(f){case"keyup":return Ige.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q7(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var c0=!1;function Oge(f,p){switch(f){case"compositionend":return q7(p);case"keypress":return p.which!==32?null:(H7=!0,z7);case"textInput":return f=p.data,f===z7&&H7?null:f;default:return null}}function Mge(f,p){if(c0)return f==="compositionend"||!kP&&V7(f,p)?(f=D7(),ME=wP=Fd=null,c0=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return $7&&p.locale!=="ko"?null:p.data;default:return null}}var Lge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G7(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!Lge[f.type]:p==="textarea"}function K7(f,p,y,E){a0?l0?l0.push(E):l0=[E]:a0=E,p=CS(p,"onChange"),0<p.length&&(y=new jE("onChange","change",null,y,E),f.push({event:y,listeners:p}))}var Pv=null,_v=null;function Dge(f){P9(f,0)}function UE(f){var p=ua(f);if(N7(p))return f}function W7(f,p){if(f==="change")return p}var Y7=!1;if(nu){var CP;if(nu){var NP="oninput"in document;if(!NP){var J7=document.createElement("div");J7.setAttribute("oninput","return;"),NP=typeof J7.oninput=="function"}CP=NP}else CP=!1;Y7=CP&&(!document.documentMode||9<document.documentMode)}function X7(){Pv&&(Pv.detachEvent("onpropertychange",Q7),_v=Pv=null)}function Q7(f){if(f.propertyName==="value"&&UE(_v)){var p=[];K7(p,_v,f,xP(f)),L7(Dge,p)}}function jge(f,p,y){f==="focusin"?(X7(),Pv=p,_v=y,Pv.attachEvent("onpropertychange",Q7)):f==="focusout"&&X7()}function Bge(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return UE(_v)}function Uge(f,p){if(f==="click")return UE(p)}function Fge(f,p){if(f==="input"||f==="change")return UE(p)}function $ge(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Ro=typeof Object.is=="function"?Object.is:$ge;function Iv(f,p){if(Ro(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var y=Object.keys(f),E=Object.keys(p);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var I=y[E];if(!tt.call(p,I)||!Ro(f[I],p[I]))return!1}return!0}function Z7(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function eU(f,p){var y=Z7(f);f=0;for(var E;y;){if(y.nodeType===3){if(E=f+y.textContent.length,f<=p&&E>=p)return{node:y,offset:p-f};f=E}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Z7(y)}}function tU(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?tU(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function nU(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var p=RE(f.document);p instanceof f.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)f=p.contentWindow;else break;p=RE(f.document)}return p}function PP(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}var zge=nu&&"documentMode"in document&&11>=document.documentMode,u0=null,_P=null,Rv=null,IP=!1;function rU(f,p,y){var E=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;IP||u0==null||u0!==RE(E)||(E=u0,"selectionStart"in E&&PP(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Rv&&Iv(Rv,E)||(Rv=E,E=CS(_P,"onSelect"),0<E.length&&(p=new jE("onSelect","select",null,p,y),f.push({event:p,listeners:E}),p.target=u0)))}function Oh(f,p){var y={};return y[f.toLowerCase()]=p.toLowerCase(),y["Webkit"+f]="webkit"+p,y["Moz"+f]="moz"+p,y}var d0={animationend:Oh("Animation","AnimationEnd"),animationiteration:Oh("Animation","AnimationIteration"),animationstart:Oh("Animation","AnimationStart"),transitionrun:Oh("Transition","TransitionRun"),transitionstart:Oh("Transition","TransitionStart"),transitioncancel:Oh("Transition","TransitionCancel"),transitionend:Oh("Transition","TransitionEnd")},RP={},iU={};nu&&(iU=document.createElement("div").style,"AnimationEvent"in window||(delete d0.animationend.animation,delete d0.animationiteration.animation,delete d0.animationstart.animation),"TransitionEvent"in window||delete d0.transitionend.transition);function Mh(f){if(RP[f])return RP[f];if(!d0[f])return f;var p=d0[f],y;for(y in p)if(p.hasOwnProperty(y)&&y in iU)return RP[f]=p[y];return f}var sU=Mh("animationend"),oU=Mh("animationiteration"),aU=Mh("animationstart"),Hge=Mh("transitionrun"),Vge=Mh("transitionstart"),qge=Mh("transitioncancel"),lU=Mh("transitionend"),cU=new Map,OP="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");OP.push("scrollEnd");function ol(f,p){cU.set(f,p),Yr(p,[f])}var FE=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof Ml=="object"&&typeof Ml.emit=="function"){Ml.emit("uncaughtException",f);return}console.error(f)},ha=[],f0=0,MP=0;function $E(){for(var f=f0,p=MP=f0=0;p<f;){var y=ha[p];ha[p++]=null;var E=ha[p];ha[p++]=null;var I=ha[p];ha[p++]=null;var D=ha[p];if(ha[p++]=null,E!==null&&I!==null){var ne=E.pending;ne===null?I.next=I:(I.next=ne.next,ne.next=I),E.pending=I}D!==0&&uU(y,I,D)}}function zE(f,p,y,E){ha[f0++]=f,ha[f0++]=p,ha[f0++]=y,ha[f0++]=E,MP|=E,f.lanes|=E,f=f.alternate,f!==null&&(f.lanes|=E)}function LP(f,p,y,E){return zE(f,p,y,E),HE(f)}function Lh(f,p){return zE(f,null,null,p),HE(f)}function uU(f,p,y){f.lanes|=y;var E=f.alternate;E!==null&&(E.lanes|=y);for(var I=!1,D=f.return;D!==null;)D.childLanes|=y,E=D.alternate,E!==null&&(E.childLanes|=y),D.tag===22&&(f=D.stateNode,f===null||f._visibility&1||(I=!0)),f=D,D=D.return;return f.tag===3?(D=f.stateNode,I&&p!==null&&(I=31-ge(y),f=D.hiddenUpdates,E=f[I],E===null?f[I]=[p]:E.push(p),p.lane=y|536870912),D):null}function HE(f){if(50<eb)throw eb=0,V_=null,Error(r(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}var h0={};function Gge(f,p,y,E){this.tag=f,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oo(f,p,y,E){return new Gge(f,p,y,E)}function DP(f){return f=f.prototype,!(!f||!f.isReactComponent)}function ru(f,p){var y=f.alternate;return y===null?(y=Oo(f.tag,p,f.key,f.mode),y.elementType=f.elementType,y.type=f.type,y.stateNode=f.stateNode,y.alternate=f,f.alternate=y):(y.pendingProps=p,y.type=f.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=f.flags&65011712,y.childLanes=f.childLanes,y.lanes=f.lanes,y.child=f.child,y.memoizedProps=f.memoizedProps,y.memoizedState=f.memoizedState,y.updateQueue=f.updateQueue,p=f.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=f.sibling,y.index=f.index,y.ref=f.ref,y.refCleanup=f.refCleanup,y}function dU(f,p){f.flags&=65011714;var y=f.alternate;return y===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,p=y.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function VE(f,p,y,E,I,D){var ne=0;if(E=f,typeof f=="function")DP(f)&&(ne=1);else if(typeof f=="string")ne=Xye(f,y,Y.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case j:return f=Oo(31,y,p,I),f.elementType=j,f.lanes=D,f;case v:return Dh(y.children,I,D,p);case b:ne=8,I|=24;break;case w:return f=Oo(12,y,p,I|2),f.elementType=w,f.lanes=D,f;case B:return f=Oo(13,y,p,I),f.elementType=B,f.lanes=D,f;case O:return f=Oo(19,y,p,I),f.elementType=O,f.lanes=D,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case C:ne=10;break e;case k:ne=9;break e;case R:ne=11;break e;case F:ne=14;break e;case H:ne=16,E=null;break e}ne=29,y=Error(r(130,f===null?"null":typeof f,"")),E=null}return p=Oo(ne,y,p,I),p.elementType=f,p.type=E,p.lanes=D,p}function Dh(f,p,y,E){return f=Oo(7,f,E,p),f.lanes=y,f}function jP(f,p,y){return f=Oo(6,f,null,p),f.lanes=y,f}function fU(f){var p=Oo(18,null,null,0);return p.stateNode=f,p}function BP(f,p,y){return p=Oo(4,f.children!==null?f.children:[],f.key,p),p.lanes=y,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}var hU=new WeakMap;function pa(f,p){if(typeof f=="object"&&f!==null){var y=hU.get(f);return y!==void 0?y:(p={value:f,source:p,stack:et(p)},hU.set(f,p),p)}return{value:f,source:p,stack:et(p)}}var p0=[],m0=0,qE=null,Ov=0,ma=[],ga=0,$d=null,Zl=1,ec="";function iu(f,p){p0[m0++]=Ov,p0[m0++]=qE,qE=f,Ov=p}function pU(f,p,y){ma[ga++]=Zl,ma[ga++]=ec,ma[ga++]=$d,$d=f;var E=Zl;f=ec;var I=32-ge(E)-1;E&=~(1<<I),y+=1;var D=32-ge(p)+I;if(30<D){var ne=I-I%5;D=(E&(1<<ne)-1).toString(32),E>>=ne,I-=ne,Zl=1<<32-ge(p)+I|y<<I|E,ec=D+f}else Zl=1<<D|y<<I|E,ec=f}function UP(f){f.return!==null&&(iu(f,1),pU(f,1,0))}function FP(f){for(;f===qE;)qE=p0[--m0],p0[m0]=null,Ov=p0[--m0],p0[m0]=null;for(;f===$d;)$d=ma[--ga],ma[ga]=null,ec=ma[--ga],ma[ga]=null,Zl=ma[--ga],ma[ga]=null}function mU(f,p){ma[ga++]=Zl,ma[ga++]=ec,ma[ga++]=$d,Zl=p.id,ec=p.overflow,$d=f}var Gi=null,br=null,Cn=!1,zd=null,ya=!1,$P=Error(r(519));function Hd(f){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mv(pa(p,f)),$P}function gU(f){var p=f.stateNode,y=f.type,E=f.memoizedProps;switch(p[bt]=f,p[vn]=E,y){case"dialog":wn("cancel",p),wn("close",p);break;case"iframe":case"object":case"embed":wn("load",p);break;case"video":case"audio":for(y=0;y<nb.length;y++)wn(nb[y],p);break;case"source":wn("error",p);break;case"img":case"image":case"link":wn("error",p),wn("load",p);break;case"details":wn("toggle",p);break;case"input":wn("invalid",p),P7(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":wn("invalid",p);break;case"textarea":wn("invalid",p),I7(p,E.value,E.defaultValue,E.children)}y=E.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||p.textContent===""+y||E.suppressHydrationWarning===!0||O9(p.textContent,y)?(E.popover!=null&&(wn("beforetoggle",p),wn("toggle",p)),E.onScroll!=null&&wn("scroll",p),E.onScrollEnd!=null&&wn("scrollend",p),E.onClick!=null&&(p.onclick=tu),p=!0):p=!1,p||Hd(f,!0)}function yU(f){for(Gi=f.return;Gi;)switch(Gi.tag){case 5:case 31:case 13:ya=!1;return;case 27:case 3:ya=!0;return;default:Gi=Gi.return}}function g0(f){if(f!==Gi)return!1;if(!Cn)return yU(f),Cn=!0,!1;var p=f.tag,y;if((y=p!==3&&p!==27)&&((y=p===5)&&(y=f.type,y=!(y!=="form"&&y!=="button")||sI(f.type,f.memoizedProps)),y=!y),y&&br&&Hd(f),yU(f),p===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));br=z9(f)}else if(p===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));br=z9(f)}else p===27?(p=br,rf(f.type)?(f=uI,uI=null,br=f):br=p):br=Gi?va(f.stateNode.nextSibling):null;return!0}function jh(){br=Gi=null,Cn=!1}function zP(){var f=zd;return f!==null&&(ho===null?ho=f:ho.push.apply(ho,f),zd=null),f}function Mv(f){zd===null?zd=[f]:zd.push(f)}var HP=q(null),Bh=null,su=null;function Vd(f,p,y){P(HP,p._currentValue),p._currentValue=y}function ou(f){f._currentValue=HP.current,M(HP)}function VP(f,p,y){for(;f!==null;){var E=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),f===y)break;f=f.return}}function qP(f,p,y,E){var I=f.child;for(I!==null&&(I.return=f);I!==null;){var D=I.dependencies;if(D!==null){var ne=I.child;D=D.firstContext;e:for(;D!==null;){var ce=D;D=I;for(var Se=0;Se<p.length;Se++)if(ce.context===p[Se]){D.lanes|=y,ce=D.alternate,ce!==null&&(ce.lanes|=y),VP(D.return,y,f),E||(ne=null);break e}D=ce.next}}else if(I.tag===18){if(ne=I.return,ne===null)throw Error(r(341));ne.lanes|=y,D=ne.alternate,D!==null&&(D.lanes|=y),VP(ne,y,f),ne=null}else ne=I.child;if(ne!==null)ne.return=I;else for(ne=I;ne!==null;){if(ne===f){ne=null;break}if(I=ne.sibling,I!==null){I.return=ne.return,ne=I;break}ne=ne.return}I=ne}}function y0(f,p,y,E){f=null;for(var I=p,D=!1;I!==null;){if(!D){if((I.flags&524288)!==0)D=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var ne=I.alternate;if(ne===null)throw Error(r(387));if(ne=ne.memoizedProps,ne!==null){var ce=I.type;Ro(I.pendingProps.value,ne.value)||(f!==null?f.push(ce):f=[ce])}}else if(I===ae.current){if(ne=I.alternate,ne===null)throw Error(r(387));ne.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(f!==null?f.push(ab):f=[ab])}I=I.return}f!==null&&qP(p,f,y,E),p.flags|=262144}function GE(f){for(f=f.firstContext;f!==null;){if(!Ro(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function Uh(f){Bh=f,su=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Ki(f){return xU(Bh,f)}function KE(f,p){return Bh===null&&Uh(f),xU(f,p)}function xU(f,p){var y=p._currentValue;if(p={context:p,memoizedValue:y,next:null},su===null){if(f===null)throw Error(r(308));su=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else su=su.next=p;return y}var Kge=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(y,E){f.push(E)}};this.abort=function(){p.aborted=!0,f.forEach(function(y){return y()})}},Wge=t.unstable_scheduleCallback,Yge=t.unstable_NormalPriority,oi={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function GP(){return{controller:new Kge,data:new Map,refCount:0}}function Lv(f){f.refCount--,f.refCount===0&&Wge(Yge,function(){f.controller.abort()})}var Dv=null,KP=0,x0=0,v0=null;function Jge(f,p){if(Dv===null){var y=Dv=[];KP=0,x0=J_(),v0={status:"pending",value:void 0,then:function(E){y.push(E)}}}return KP++,p.then(vU,vU),p}function vU(){if(--KP===0&&Dv!==null){v0!==null&&(v0.status="fulfilled");var f=Dv;Dv=null,x0=0,v0=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function Xge(f,p){var y=[],E={status:"pending",value:null,reason:null,then:function(I){y.push(I)}};return f.then(function(){E.status="fulfilled",E.value=p;for(var I=0;I<y.length;I++)(0,y[I])(p)},function(I){for(E.status="rejected",E.reason=I,I=0;I<y.length;I++)(0,y[I])(void 0)}),E}var bU=L.S;L.S=function(f,p){r9=Tt(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&Jge(f,p),bU!==null&&bU(f,p)};var Fh=q(null);function WP(){var f=Fh.current;return f!==null?f:sr.pooledCache}function WE(f,p){p===null?P(Fh,Fh.current):P(Fh,p.pool)}function wU(){var f=WP();return f===null?null:{parent:oi._currentValue,pool:f}}var b0=Error(r(460)),YP=Error(r(474)),YE=Error(r(542)),JE={then:function(){}};function EU(f){return f=f.status,f==="fulfilled"||f==="rejected"}function SU(f,p,y){switch(y=f[y],y===void 0?f.push(p):y!==p&&(p.then(tu,tu),p=y),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,TU(f),f;default:if(typeof p.status=="string")p.then(tu,tu);else{if(f=sr,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=p,f.status="pending",f.then(function(E){if(p.status==="pending"){var I=p;I.status="fulfilled",I.value=E}},function(E){if(p.status==="pending"){var I=p;I.status="rejected",I.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,TU(f),f}throw zh=p,b0}}function $h(f){try{var p=f._init;return p(f._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(zh=y,b0):y}}var zh=null;function AU(){if(zh===null)throw Error(r(459));var f=zh;return zh=null,f}function TU(f){if(f===b0||f===YE)throw Error(r(483))}var w0=null,jv=0;function XE(f){var p=jv;return jv+=1,w0===null&&(w0=[]),SU(w0,f,p)}function Bv(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function QE(f,p){throw p.$$typeof===m?Error(r(525)):(f=Object.prototype.toString.call(p),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function kU(f){function p(_e,Ne){if(f){var je=_e.deletions;je===null?(_e.deletions=[Ne],_e.flags|=16):je.push(Ne)}}function y(_e,Ne){if(!f)return null;for(;Ne!==null;)p(_e,Ne),Ne=Ne.sibling;return null}function E(_e){for(var Ne=new Map;_e!==null;)_e.key!==null?Ne.set(_e.key,_e):Ne.set(_e.index,_e),_e=_e.sibling;return Ne}function I(_e,Ne){return _e=ru(_e,Ne),_e.index=0,_e.sibling=null,_e}function D(_e,Ne,je){return _e.index=je,f?(je=_e.alternate,je!==null?(je=je.index,je<Ne?(_e.flags|=67108866,Ne):je):(_e.flags|=67108866,Ne)):(_e.flags|=1048576,Ne)}function ne(_e){return f&&_e.alternate===null&&(_e.flags|=67108866),_e}function ce(_e,Ne,je,We){return Ne===null||Ne.tag!==6?(Ne=jP(je,_e.mode,We),Ne.return=_e,Ne):(Ne=I(Ne,je),Ne.return=_e,Ne)}function Se(_e,Ne,je,We){var Ut=je.type;return Ut===v?Ge(_e,Ne,je.props.children,We,je.key):Ne!==null&&(Ne.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===H&&$h(Ut)===Ne.type)?(Ne=I(Ne,je.props),Bv(Ne,je),Ne.return=_e,Ne):(Ne=VE(je.type,je.key,je.props,null,_e.mode,We),Bv(Ne,je),Ne.return=_e,Ne)}function Be(_e,Ne,je,We){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==je.containerInfo||Ne.stateNode.implementation!==je.implementation?(Ne=BP(je,_e.mode,We),Ne.return=_e,Ne):(Ne=I(Ne,je.children||[]),Ne.return=_e,Ne)}function Ge(_e,Ne,je,We,Ut){return Ne===null||Ne.tag!==7?(Ne=Dh(je,_e.mode,We,Ut),Ne.return=_e,Ne):(Ne=I(Ne,je),Ne.return=_e,Ne)}function Xe(_e,Ne,je){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ne=jP(""+Ne,_e.mode,je),Ne.return=_e,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case g:return je=VE(Ne.type,Ne.key,Ne.props,null,_e.mode,je),Bv(je,Ne),je.return=_e,je;case x:return Ne=BP(Ne,_e.mode,je),Ne.return=_e,Ne;case H:return Ne=$h(Ne),Xe(_e,Ne,je)}if(_(Ne)||V(Ne))return Ne=Dh(Ne,_e.mode,je,null),Ne.return=_e,Ne;if(typeof Ne.then=="function")return Xe(_e,XE(Ne),je);if(Ne.$$typeof===C)return Xe(_e,KE(_e,Ne),je);QE(_e,Ne)}return null}function Fe(_e,Ne,je,We){var Ut=Ne!==null?Ne.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return Ut!==null?null:ce(_e,Ne,""+je,We);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case g:return je.key===Ut?Se(_e,Ne,je,We):null;case x:return je.key===Ut?Be(_e,Ne,je,We):null;case H:return je=$h(je),Fe(_e,Ne,je,We)}if(_(je)||V(je))return Ut!==null?null:Ge(_e,Ne,je,We,null);if(typeof je.then=="function")return Fe(_e,Ne,XE(je),We);if(je.$$typeof===C)return Fe(_e,Ne,KE(_e,je),We);QE(_e,je)}return null}function He(_e,Ne,je,We,Ut){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return _e=_e.get(je)||null,ce(Ne,_e,""+We,Ut);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case g:return _e=_e.get(We.key===null?je:We.key)||null,Se(Ne,_e,We,Ut);case x:return _e=_e.get(We.key===null?je:We.key)||null,Be(Ne,_e,We,Ut);case H:return We=$h(We),He(_e,Ne,je,We,Ut)}if(_(We)||V(We))return _e=_e.get(je)||null,Ge(Ne,_e,We,Ut,null);if(typeof We.then=="function")return He(_e,Ne,je,XE(We),Ut);if(We.$$typeof===C)return He(_e,Ne,je,KE(Ne,We),Ut);QE(Ne,We)}return null}function Pt(_e,Ne,je,We){for(var Ut=null,Ln=null,Ot=Ne,un=Ne=0,kn=null;Ot!==null&&un<je.length;un++){Ot.index>un?(kn=Ot,Ot=null):kn=Ot.sibling;var Dn=Fe(_e,Ot,je[un],We);if(Dn===null){Ot===null&&(Ot=kn);break}f&&Ot&&Dn.alternate===null&&p(_e,Ot),Ne=D(Dn,Ne,un),Ln===null?Ut=Dn:Ln.sibling=Dn,Ln=Dn,Ot=kn}if(un===je.length)return y(_e,Ot),Cn&&iu(_e,un),Ut;if(Ot===null){for(;un<je.length;un++)Ot=Xe(_e,je[un],We),Ot!==null&&(Ne=D(Ot,Ne,un),Ln===null?Ut=Ot:Ln.sibling=Ot,Ln=Ot);return Cn&&iu(_e,un),Ut}for(Ot=E(Ot);un<je.length;un++)kn=He(Ot,_e,un,je[un],We),kn!==null&&(f&&kn.alternate!==null&&Ot.delete(kn.key===null?un:kn.key),Ne=D(kn,Ne,un),Ln===null?Ut=kn:Ln.sibling=kn,Ln=kn);return f&&Ot.forEach(function(cf){return p(_e,cf)}),Cn&&iu(_e,un),Ut}function Kt(_e,Ne,je,We){if(je==null)throw Error(r(151));for(var Ut=null,Ln=null,Ot=Ne,un=Ne=0,kn=null,Dn=je.next();Ot!==null&&!Dn.done;un++,Dn=je.next()){Ot.index>un?(kn=Ot,Ot=null):kn=Ot.sibling;var cf=Fe(_e,Ot,Dn.value,We);if(cf===null){Ot===null&&(Ot=kn);break}f&&Ot&&cf.alternate===null&&p(_e,Ot),Ne=D(cf,Ne,un),Ln===null?Ut=cf:Ln.sibling=cf,Ln=cf,Ot=kn}if(Dn.done)return y(_e,Ot),Cn&&iu(_e,un),Ut;if(Ot===null){for(;!Dn.done;un++,Dn=je.next())Dn=Xe(_e,Dn.value,We),Dn!==null&&(Ne=D(Dn,Ne,un),Ln===null?Ut=Dn:Ln.sibling=Dn,Ln=Dn);return Cn&&iu(_e,un),Ut}for(Ot=E(Ot);!Dn.done;un++,Dn=je.next())Dn=He(Ot,_e,un,Dn.value,We),Dn!==null&&(f&&Dn.alternate!==null&&Ot.delete(Dn.key===null?un:Dn.key),Ne=D(Dn,Ne,un),Ln===null?Ut=Dn:Ln.sibling=Dn,Ln=Dn);return f&&Ot.forEach(function(lxe){return p(_e,lxe)}),Cn&&iu(_e,un),Ut}function tr(_e,Ne,je,We){if(typeof je=="object"&&je!==null&&je.type===v&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case g:e:{for(var Ut=je.key;Ne!==null;){if(Ne.key===Ut){if(Ut=je.type,Ut===v){if(Ne.tag===7){y(_e,Ne.sibling),We=I(Ne,je.props.children),We.return=_e,_e=We;break e}}else if(Ne.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===H&&$h(Ut)===Ne.type){y(_e,Ne.sibling),We=I(Ne,je.props),Bv(We,je),We.return=_e,_e=We;break e}y(_e,Ne);break}else p(_e,Ne);Ne=Ne.sibling}je.type===v?(We=Dh(je.props.children,_e.mode,We,je.key),We.return=_e,_e=We):(We=VE(je.type,je.key,je.props,null,_e.mode,We),Bv(We,je),We.return=_e,_e=We)}return ne(_e);case x:e:{for(Ut=je.key;Ne!==null;){if(Ne.key===Ut)if(Ne.tag===4&&Ne.stateNode.containerInfo===je.containerInfo&&Ne.stateNode.implementation===je.implementation){y(_e,Ne.sibling),We=I(Ne,je.children||[]),We.return=_e,_e=We;break e}else{y(_e,Ne);break}else p(_e,Ne);Ne=Ne.sibling}We=BP(je,_e.mode,We),We.return=_e,_e=We}return ne(_e);case H:return je=$h(je),tr(_e,Ne,je,We)}if(_(je))return Pt(_e,Ne,je,We);if(V(je)){if(Ut=V(je),typeof Ut!="function")throw Error(r(150));return je=Ut.call(je),Kt(_e,Ne,je,We)}if(typeof je.then=="function")return tr(_e,Ne,XE(je),We);if(je.$$typeof===C)return tr(_e,Ne,KE(_e,je),We);QE(_e,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,Ne!==null&&Ne.tag===6?(y(_e,Ne.sibling),We=I(Ne,je),We.return=_e,_e=We):(y(_e,Ne),We=jP(je,_e.mode,We),We.return=_e,_e=We),ne(_e)):y(_e,Ne)}return function(_e,Ne,je,We){try{jv=0;var Ut=tr(_e,Ne,je,We);return w0=null,Ut}catch(Ot){if(Ot===b0||Ot===YE)throw Ot;var Ln=Oo(29,Ot,null,_e.mode);return Ln.lanes=We,Ln.return=_e,Ln}finally{}}}var Hh=kU(!0),CU=kU(!1),qd=!1;function JP(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function XP(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function Gd(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Kd(f,p,y){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(Hn&2)!==0){var I=E.pending;return I===null?p.next=p:(p.next=I.next,I.next=p),E.pending=p,p=HE(f),uU(f,null,y),p}return zE(f,E,p,y),HE(f)}function Uv(f,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194048)!==0)){var E=p.lanes;E&=f.pendingLanes,y|=E,p.lanes=y,Pe(f,y)}}function QP(f,p){var y=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,y===E)){var I=null,D=null;if(y=y.firstBaseUpdate,y!==null){do{var ne={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};D===null?I=D=ne:D=D.next=ne,y=y.next}while(y!==null);D===null?I=D=p:D=D.next=p}else I=D=p;y={baseState:E.baseState,firstBaseUpdate:I,lastBaseUpdate:D,shared:E.shared,callbacks:E.callbacks},f.updateQueue=y;return}f=y.lastBaseUpdate,f===null?y.firstBaseUpdate=p:f.next=p,y.lastBaseUpdate=p}var ZP=!1;function Fv(){if(ZP){var f=v0;if(f!==null)throw f}}function $v(f,p,y,E){ZP=!1;var I=f.updateQueue;qd=!1;var D=I.firstBaseUpdate,ne=I.lastBaseUpdate,ce=I.shared.pending;if(ce!==null){I.shared.pending=null;var Se=ce,Be=Se.next;Se.next=null,ne===null?D=Be:ne.next=Be,ne=Se;var Ge=f.alternate;Ge!==null&&(Ge=Ge.updateQueue,ce=Ge.lastBaseUpdate,ce!==ne&&(ce===null?Ge.firstBaseUpdate=Be:ce.next=Be,Ge.lastBaseUpdate=Se))}if(D!==null){var Xe=I.baseState;ne=0,Ge=Be=Se=null,ce=D;do{var Fe=ce.lane&-536870913,He=Fe!==ce.lane;if(He?(Tn&Fe)===Fe:(E&Fe)===Fe){Fe!==0&&Fe===x0&&(ZP=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var Pt=f,Kt=ce;Fe=p;var tr=y;switch(Kt.tag){case 1:if(Pt=Kt.payload,typeof Pt=="function"){Xe=Pt.call(tr,Xe,Fe);break e}Xe=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=Kt.payload,Fe=typeof Pt=="function"?Pt.call(tr,Xe,Fe):Pt,Fe==null)break e;Xe=h({},Xe,Fe);break e;case 2:qd=!0}}Fe=ce.callback,Fe!==null&&(f.flags|=64,He&&(f.flags|=8192),He=I.callbacks,He===null?I.callbacks=[Fe]:He.push(Fe))}else He={lane:Fe,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ge===null?(Be=Ge=He,Se=Xe):Ge=Ge.next=He,ne|=Fe;if(ce=ce.next,ce===null){if(ce=I.shared.pending,ce===null)break;He=ce,ce=He.next,He.next=null,I.lastBaseUpdate=He,I.shared.pending=null}}while(!0);Ge===null&&(Se=Xe),I.baseState=Se,I.firstBaseUpdate=Be,I.lastBaseUpdate=Ge,D===null&&(I.shared.lanes=0),Qd|=ne,f.lanes=ne,f.memoizedState=Xe}}function NU(f,p){if(typeof f!="function")throw Error(r(191,f));f.call(p)}function PU(f,p){var y=f.callbacks;if(y!==null)for(f.callbacks=null,f=0;f<y.length;f++)NU(y[f],p)}var E0=q(null),ZE=q(0);function _U(f,p){f=mu,P(ZE,f),P(E0,p),mu=f|p.baseLanes}function e_(){P(ZE,mu),P(E0,E0.current)}function t_(){mu=ZE.current,M(E0),M(ZE)}var Mo=q(null),xa=null;function Wd(f){var p=f.alternate;P(Jr,Jr.current&1),P(Mo,f),xa===null&&(p===null||E0.current!==null||p.memoizedState!==null)&&(xa=f)}function n_(f){P(Jr,Jr.current),P(Mo,f),xa===null&&(xa=f)}function IU(f){f.tag===22?(P(Jr,Jr.current),P(Mo,f),xa===null&&(xa=f)):Yd()}function Yd(){P(Jr,Jr.current),P(Mo,Mo.current)}function Lo(f){M(Mo),xa===f&&(xa=null),M(Jr)}var Jr=q(0);function eS(f){for(var p=f;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||lI(y)||cI(y)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var au=0,sn=null,Zn=null,ai=null,tS=!1,S0=!1,Vh=!1,nS=0,zv=0,A0=null,Qge=0;function Ur(){throw Error(r(321))}function r_(f,p){if(p===null)return!1;for(var y=0;y<p.length&&y<f.length;y++)if(!Ro(f[y],p[y]))return!1;return!0}function i_(f,p,y,E,I,D){return au=D,sn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,L.H=f===null||f.memoizedState===null?pF:v_,Vh=!1,D=y(E,I),Vh=!1,S0&&(D=OU(p,y,E,I)),RU(f),D}function RU(f){L.H=qv;var p=Zn!==null&&Zn.next!==null;if(au=0,ai=Zn=sn=null,tS=!1,zv=0,A0=null,p)throw Error(r(300));f===null||li||(f=f.dependencies,f!==null&&GE(f)&&(li=!0))}function OU(f,p,y,E){sn=f;var I=0;do{if(S0&&(A0=null),zv=0,S0=!1,25<=I)throw Error(r(301));if(I+=1,ai=Zn=null,f.updateQueue!=null){var D=f.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}L.H=mF,D=p(y,E)}while(S0);return D}function Zge(){var f=L.H,p=f.useState()[0];return p=typeof p.then=="function"?Hv(p):p,f=f.useState()[0],(Zn!==null?Zn.memoizedState:null)!==f&&(sn.flags|=1024),p}function s_(){var f=nS!==0;return nS=0,f}function o_(f,p,y){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~y}function a_(f){if(tS){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}tS=!1}au=0,ai=Zn=sn=null,S0=!1,zv=nS=0,A0=null}function Fs(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?sn.memoizedState=ai=f:ai=ai.next=f,ai}function Xr(){if(Zn===null){var f=sn.alternate;f=f!==null?f.memoizedState:null}else f=Zn.next;var p=ai===null?sn.memoizedState:ai.next;if(p!==null)ai=p,Zn=f;else{if(f===null)throw sn.alternate===null?Error(r(467)):Error(r(310));Zn=f,f={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},ai===null?sn.memoizedState=ai=f:ai=ai.next=f}return ai}function rS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hv(f){var p=zv;return zv+=1,A0===null&&(A0=[]),f=SU(A0,f,p),p=sn,(ai===null?p.memoizedState:ai.next)===null&&(p=p.alternate,L.H=p===null||p.memoizedState===null?pF:v_),f}function iS(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return Hv(f);if(f.$$typeof===C)return Ki(f)}throw Error(r(438,String(f)))}function l_(f){var p=null,y=sn.updateQueue;if(y!==null&&(p=y.memoCache),p==null){var E=sn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(I){return I.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),y===null&&(y=rS(),sn.updateQueue=y),y.memoCache=p,y=p.data[p.index],y===void 0)for(y=p.data[p.index]=Array(f),E=0;E<f;E++)y[E]=$;return p.index++,y}function lu(f,p){return typeof p=="function"?p(f):p}function sS(f){var p=Xr();return c_(p,Zn,f)}function c_(f,p,y){var E=f.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=y;var I=f.baseQueue,D=E.pending;if(D!==null){if(I!==null){var ne=I.next;I.next=D.next,D.next=ne}p.baseQueue=I=D,E.pending=null}if(D=f.baseState,I===null)f.memoizedState=D;else{p=I.next;var ce=ne=null,Se=null,Be=p,Ge=!1;do{var Xe=Be.lane&-536870913;if(Xe!==Be.lane?(Tn&Xe)===Xe:(au&Xe)===Xe){var Fe=Be.revertLane;if(Fe===0)Se!==null&&(Se=Se.next={lane:0,revertLane:0,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),Xe===x0&&(Ge=!0);else if((au&Fe)===Fe){Be=Be.next,Fe===x0&&(Ge=!0);continue}else Xe={lane:0,revertLane:Be.revertLane,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Se===null?(ce=Se=Xe,ne=D):Se=Se.next=Xe,sn.lanes|=Fe,Qd|=Fe;Xe=Be.action,Vh&&y(D,Xe),D=Be.hasEagerState?Be.eagerState:y(D,Xe)}else Fe={lane:Xe,revertLane:Be.revertLane,gesture:Be.gesture,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Se===null?(ce=Se=Fe,ne=D):Se=Se.next=Fe,sn.lanes|=Xe,Qd|=Xe;Be=Be.next}while(Be!==null&&Be!==p);if(Se===null?ne=D:Se.next=ce,!Ro(D,f.memoizedState)&&(li=!0,Ge&&(y=v0,y!==null)))throw y;f.memoizedState=D,f.baseState=ne,f.baseQueue=Se,E.lastRenderedState=D}return I===null&&(E.lanes=0),[f.memoizedState,E.dispatch]}function u_(f){var p=Xr(),y=p.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=f;var E=y.dispatch,I=y.pending,D=p.memoizedState;if(I!==null){y.pending=null;var ne=I=I.next;do D=f(D,ne.action),ne=ne.next;while(ne!==I);Ro(D,p.memoizedState)||(li=!0),p.memoizedState=D,p.baseQueue===null&&(p.baseState=D),y.lastRenderedState=D}return[D,E]}function MU(f,p,y){var E=sn,I=Xr(),D=Cn;if(D){if(y===void 0)throw Error(r(407));y=y()}else y=p();var ne=!Ro((Zn||I).memoizedState,y);if(ne&&(I.memoizedState=y,li=!0),I=I.queue,h_(jU.bind(null,E,I,f),[f]),I.getSnapshot!==p||ne||ai!==null&&ai.memoizedState.tag&1){if(E.flags|=2048,T0(9,{destroy:void 0},DU.bind(null,E,I,y,p),null),sr===null)throw Error(r(349));D||(au&127)!==0||LU(E,p,y)}return y}function LU(f,p,y){f.flags|=16384,f={getSnapshot:p,value:y},p=sn.updateQueue,p===null?(p=rS(),sn.updateQueue=p,p.stores=[f]):(y=p.stores,y===null?p.stores=[f]:y.push(f))}function DU(f,p,y,E){p.value=y,p.getSnapshot=E,BU(p)&&UU(f)}function jU(f,p,y){return y(function(){BU(p)&&UU(f)})}function BU(f){var p=f.getSnapshot;f=f.value;try{var y=p();return!Ro(f,y)}catch{return!0}}function UU(f){var p=Lh(f,2);p!==null&&po(p,f,2)}function d_(f){var p=Fs();if(typeof f=="function"){var y=f;if(f=y(),Vh){fe(!0);try{y()}finally{fe(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:f},p}function FU(f,p,y,E){return f.baseState=y,c_(f,Zn,typeof E=="function"?E:lu)}function eye(f,p,y,E,I){if(lS(f))throw Error(r(485));if(f=p.action,f!==null){var D={payload:I,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){D.listeners.push(ne)}};L.T!==null?y(!0):D.isTransition=!1,E(D),y=p.pending,y===null?(D.next=p.pending=D,$U(p,D)):(D.next=y.next,p.pending=y.next=D)}}function $U(f,p){var y=p.action,E=p.payload,I=f.state;if(p.isTransition){var D=L.T,ne={};L.T=ne;try{var ce=y(I,E),Se=L.S;Se!==null&&Se(ne,ce),zU(f,p,ce)}catch(Be){f_(f,p,Be)}finally{D!==null&&ne.types!==null&&(D.types=ne.types),L.T=D}}else try{D=y(I,E),zU(f,p,D)}catch(Be){f_(f,p,Be)}}function zU(f,p,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(E){HU(f,p,E)},function(E){return f_(f,p,E)}):HU(f,p,y)}function HU(f,p,y){p.status="fulfilled",p.value=y,VU(p),f.state=y,p=f.pending,p!==null&&(y=p.next,y===p?f.pending=null:(y=y.next,p.next=y,$U(f,y)))}function f_(f,p,y){var E=f.pending;if(f.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=y,VU(p),p=p.next;while(p!==E)}f.action=null}function VU(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function qU(f,p){return p}function GU(f,p){if(Cn){var y=sr.formState;if(y!==null){e:{var E=sn;if(Cn){if(br){t:{for(var I=br,D=ya;I.nodeType!==8;){if(!D){I=null;break t}if(I=va(I.nextSibling),I===null){I=null;break t}}D=I.data,I=D==="F!"||D==="F"?I:null}if(I){br=va(I.nextSibling),E=I.data==="F!";break e}}Hd(E)}E=!1}E&&(p=y[0])}}return y=Fs(),y.memoizedState=y.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qU,lastRenderedState:p},y.queue=E,y=dF.bind(null,sn,E),E.dispatch=y,E=d_(!1),D=x_.bind(null,sn,!1,E.queue),E=Fs(),I={state:p,dispatch:null,action:f,pending:null},E.queue=I,y=eye.bind(null,sn,I,D,y),I.dispatch=y,E.memoizedState=f,[p,y,!1]}function KU(f){var p=Xr();return WU(p,Zn,f)}function WU(f,p,y){if(p=c_(f,p,qU)[0],f=sS(lu)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=Hv(p)}catch(ne){throw ne===b0?YE:ne}else E=p;p=Xr();var I=p.queue,D=I.dispatch;return y!==p.memoizedState&&(sn.flags|=2048,T0(9,{destroy:void 0},tye.bind(null,I,y),null)),[E,D,f]}function tye(f,p){f.action=p}function YU(f){var p=Xr(),y=Zn;if(y!==null)return WU(p,y,f);Xr(),p=p.memoizedState,y=Xr();var E=y.queue.dispatch;return y.memoizedState=f,[p,E,!1]}function T0(f,p,y,E){return f={tag:f,create:y,deps:E,inst:p,next:null},p=sn.updateQueue,p===null&&(p=rS(),sn.updateQueue=p),y=p.lastEffect,y===null?p.lastEffect=f.next=f:(E=y.next,y.next=f,f.next=E,p.lastEffect=f),f}function JU(){return Xr().memoizedState}function oS(f,p,y,E){var I=Fs();sn.flags|=f,I.memoizedState=T0(1|p,{destroy:void 0},y,E===void 0?null:E)}function aS(f,p,y,E){var I=Xr();E=E===void 0?null:E;var D=I.memoizedState.inst;Zn!==null&&E!==null&&r_(E,Zn.memoizedState.deps)?I.memoizedState=T0(p,D,y,E):(sn.flags|=f,I.memoizedState=T0(1|p,D,y,E))}function XU(f,p){oS(8390656,8,f,p)}function h_(f,p){aS(2048,8,f,p)}function nye(f){sn.flags|=4;var p=sn.updateQueue;if(p===null)p=rS(),sn.updateQueue=p,p.events=[f];else{var y=p.events;y===null?p.events=[f]:y.push(f)}}function QU(f){var p=Xr().memoizedState;return nye({ref:p,nextImpl:f}),function(){if((Hn&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function ZU(f,p){return aS(4,2,f,p)}function eF(f,p){return aS(4,4,f,p)}function tF(f,p){if(typeof p=="function"){f=f();var y=p(f);return function(){typeof y=="function"?y():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function nF(f,p,y){y=y!=null?y.concat([f]):null,aS(4,4,tF.bind(null,p,f),y)}function p_(){}function rF(f,p){var y=Xr();p=p===void 0?null:p;var E=y.memoizedState;return p!==null&&r_(p,E[1])?E[0]:(y.memoizedState=[f,p],f)}function iF(f,p){var y=Xr();p=p===void 0?null:p;var E=y.memoizedState;if(p!==null&&r_(p,E[1]))return E[0];if(E=f(),Vh){fe(!0);try{f()}finally{fe(!1)}}return y.memoizedState=[E,p],E}function m_(f,p,y){return y===void 0||(au&1073741824)!==0&&(Tn&261930)===0?f.memoizedState=p:(f.memoizedState=y,f=s9(),sn.lanes|=f,Qd|=f,y)}function sF(f,p,y,E){return Ro(y,p)?y:E0.current!==null?(f=m_(f,y,E),Ro(f,p)||(li=!0),f):(au&42)===0||(au&1073741824)!==0&&(Tn&261930)===0?(li=!0,f.memoizedState=y):(f=s9(),sn.lanes|=f,Qd|=f,p)}function oF(f,p,y,E,I){var D=z.p;z.p=D!==0&&8>D?D:8;var ne=L.T,ce={};L.T=ce,x_(f,!1,p,y);try{var Se=I(),Be=L.S;if(Be!==null&&Be(ce,Se),Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var Ge=Xge(Se,E);Vv(f,p,Ge,Bo(f))}else Vv(f,p,E,Bo(f))}catch(Xe){Vv(f,p,{then:function(){},status:"rejected",reason:Xe},Bo())}finally{z.p=D,ne!==null&&ce.types!==null&&(ne.types=ce.types),L.T=ne}}function rye(){}function g_(f,p,y,E){if(f.tag!==5)throw Error(r(476));var I=aF(f).queue;oF(f,I,p,G,y===null?rye:function(){return lF(f),y(E)})}function aF(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:G},next:null};var y={};return p.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:y},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function lF(f){var p=aF(f);p.next===null&&(p=f.alternate.memoizedState),Vv(f,p.next.queue,{},Bo())}function y_(){return Ki(ab)}function cF(){return Xr().memoizedState}function uF(){return Xr().memoizedState}function iye(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var y=Bo();f=Gd(y);var E=Kd(p,f,y);E!==null&&(po(E,p,y),Uv(E,p,y)),p={cache:GP()},f.payload=p;return}p=p.return}}function sye(f,p,y){var E=Bo();y={lane:E,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},lS(f)?fF(p,y):(y=LP(f,p,y,E),y!==null&&(po(y,f,E),hF(y,p,E)))}function dF(f,p,y){var E=Bo();Vv(f,p,y,E)}function Vv(f,p,y,E){var I={lane:E,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(lS(f))fF(p,I);else{var D=f.alternate;if(f.lanes===0&&(D===null||D.lanes===0)&&(D=p.lastRenderedReducer,D!==null))try{var ne=p.lastRenderedState,ce=D(ne,y);if(I.hasEagerState=!0,I.eagerState=ce,Ro(ce,ne))return zE(f,p,I,0),sr===null&&$E(),!1}catch{}finally{}if(y=LP(f,p,I,E),y!==null)return po(y,f,E),hF(y,p,E),!0}return!1}function x_(f,p,y,E){if(E={lane:2,revertLane:J_(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},lS(f)){if(p)throw Error(r(479))}else p=LP(f,y,E,2),p!==null&&po(p,f,2)}function lS(f){var p=f.alternate;return f===sn||p!==null&&p===sn}function fF(f,p){S0=tS=!0;var y=f.pending;y===null?p.next=p:(p.next=y.next,y.next=p),f.pending=p}function hF(f,p,y){if((y&4194048)!==0){var E=p.lanes;E&=f.pendingLanes,y|=E,p.lanes=y,Pe(f,y)}}var qv={readContext:Ki,use:iS,useCallback:Ur,useContext:Ur,useEffect:Ur,useImperativeHandle:Ur,useLayoutEffect:Ur,useInsertionEffect:Ur,useMemo:Ur,useReducer:Ur,useRef:Ur,useState:Ur,useDebugValue:Ur,useDeferredValue:Ur,useTransition:Ur,useSyncExternalStore:Ur,useId:Ur,useHostTransitionStatus:Ur,useFormState:Ur,useActionState:Ur,useOptimistic:Ur,useMemoCache:Ur,useCacheRefresh:Ur};qv.useEffectEvent=Ur;var pF={readContext:Ki,use:iS,useCallback:function(f,p){return Fs().memoizedState=[f,p===void 0?null:p],f},useContext:Ki,useEffect:XU,useImperativeHandle:function(f,p,y){y=y!=null?y.concat([f]):null,oS(4194308,4,tF.bind(null,p,f),y)},useLayoutEffect:function(f,p){return oS(4194308,4,f,p)},useInsertionEffect:function(f,p){oS(4,2,f,p)},useMemo:function(f,p){var y=Fs();p=p===void 0?null:p;var E=f();if(Vh){fe(!0);try{f()}finally{fe(!1)}}return y.memoizedState=[E,p],E},useReducer:function(f,p,y){var E=Fs();if(y!==void 0){var I=y(p);if(Vh){fe(!0);try{y(p)}finally{fe(!1)}}}else I=p;return E.memoizedState=E.baseState=I,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:I},E.queue=f,f=f.dispatch=sye.bind(null,sn,f),[E.memoizedState,f]},useRef:function(f){var p=Fs();return f={current:f},p.memoizedState=f},useState:function(f){f=d_(f);var p=f.queue,y=dF.bind(null,sn,p);return p.dispatch=y,[f.memoizedState,y]},useDebugValue:p_,useDeferredValue:function(f,p){var y=Fs();return m_(y,f,p)},useTransition:function(){var f=d_(!1);return f=oF.bind(null,sn,f.queue,!0,!1),Fs().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,y){var E=sn,I=Fs();if(Cn){if(y===void 0)throw Error(r(407));y=y()}else{if(y=p(),sr===null)throw Error(r(349));(Tn&127)!==0||LU(E,p,y)}I.memoizedState=y;var D={value:y,getSnapshot:p};return I.queue=D,XU(jU.bind(null,E,D,f),[f]),E.flags|=2048,T0(9,{destroy:void 0},DU.bind(null,E,D,y,p),null),y},useId:function(){var f=Fs(),p=sr.identifierPrefix;if(Cn){var y=ec,E=Zl;y=(E&~(1<<32-ge(E)-1)).toString(32)+y,p="_"+p+"R_"+y,y=nS++,0<y&&(p+="H"+y.toString(32)),p+="_"}else y=Qge++,p="_"+p+"r_"+y.toString(32)+"_";return f.memoizedState=p},useHostTransitionStatus:y_,useFormState:GU,useActionState:GU,useOptimistic:function(f){var p=Fs();p.memoizedState=p.baseState=f;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=y,p=x_.bind(null,sn,!0,y),y.dispatch=p,[f,p]},useMemoCache:l_,useCacheRefresh:function(){return Fs().memoizedState=iye.bind(null,sn)},useEffectEvent:function(f){var p=Fs(),y={impl:f};return p.memoizedState=y,function(){if((Hn&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},v_={readContext:Ki,use:iS,useCallback:rF,useContext:Ki,useEffect:h_,useImperativeHandle:nF,useInsertionEffect:ZU,useLayoutEffect:eF,useMemo:iF,useReducer:sS,useRef:JU,useState:function(){return sS(lu)},useDebugValue:p_,useDeferredValue:function(f,p){var y=Xr();return sF(y,Zn.memoizedState,f,p)},useTransition:function(){var f=sS(lu)[0],p=Xr().memoizedState;return[typeof f=="boolean"?f:Hv(f),p]},useSyncExternalStore:MU,useId:cF,useHostTransitionStatus:y_,useFormState:KU,useActionState:KU,useOptimistic:function(f,p){var y=Xr();return FU(y,Zn,f,p)},useMemoCache:l_,useCacheRefresh:uF};v_.useEffectEvent=QU;var mF={readContext:Ki,use:iS,useCallback:rF,useContext:Ki,useEffect:h_,useImperativeHandle:nF,useInsertionEffect:ZU,useLayoutEffect:eF,useMemo:iF,useReducer:u_,useRef:JU,useState:function(){return u_(lu)},useDebugValue:p_,useDeferredValue:function(f,p){var y=Xr();return Zn===null?m_(y,f,p):sF(y,Zn.memoizedState,f,p)},useTransition:function(){var f=u_(lu)[0],p=Xr().memoizedState;return[typeof f=="boolean"?f:Hv(f),p]},useSyncExternalStore:MU,useId:cF,useHostTransitionStatus:y_,useFormState:YU,useActionState:YU,useOptimistic:function(f,p){var y=Xr();return Zn!==null?FU(y,Zn,f,p):(y.baseState=f,[f,y.queue.dispatch])},useMemoCache:l_,useCacheRefresh:uF};mF.useEffectEvent=QU;function b_(f,p,y,E){p=f.memoizedState,y=y(E,p),y=y==null?p:h({},p,y),f.memoizedState=y,f.lanes===0&&(f.updateQueue.baseState=y)}var w_={enqueueSetState:function(f,p,y){f=f._reactInternals;var E=Bo(),I=Gd(E);I.payload=p,y!=null&&(I.callback=y),p=Kd(f,I,E),p!==null&&(po(p,f,E),Uv(p,f,E))},enqueueReplaceState:function(f,p,y){f=f._reactInternals;var E=Bo(),I=Gd(E);I.tag=1,I.payload=p,y!=null&&(I.callback=y),p=Kd(f,I,E),p!==null&&(po(p,f,E),Uv(p,f,E))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var y=Bo(),E=Gd(y);E.tag=2,p!=null&&(E.callback=p),p=Kd(f,E,y),p!==null&&(po(p,f,y),Uv(p,f,y))}};function gF(f,p,y,E,I,D,ne){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,D,ne):p.prototype&&p.prototype.isPureReactComponent?!Iv(y,E)||!Iv(I,D):!0}function yF(f,p,y,E){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,E),p.state!==f&&w_.enqueueReplaceState(p,p.state,null)}function qh(f,p){var y=p;if("ref"in p){y={};for(var E in p)E!=="ref"&&(y[E]=p[E])}if(f=f.defaultProps){y===p&&(y=h({},y));for(var I in f)y[I]===void 0&&(y[I]=f[I])}return y}function xF(f){FE(f)}function vF(f){console.error(f)}function bF(f){FE(f)}function cS(f,p){try{var y=f.onUncaughtError;y(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function wF(f,p,y){try{var E=f.onCaughtError;E(y.value,{componentStack:y.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function E_(f,p,y){return y=Gd(y),y.tag=3,y.payload={element:null},y.callback=function(){cS(f,p)},y}function EF(f){return f=Gd(f),f.tag=3,f}function SF(f,p,y,E){var I=y.type.getDerivedStateFromError;if(typeof I=="function"){var D=E.value;f.payload=function(){return I(D)},f.callback=function(){wF(p,y,E)}}var ne=y.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(f.callback=function(){wF(p,y,E),typeof I!="function"&&(Zd===null?Zd=new Set([this]):Zd.add(this));var ce=E.stack;this.componentDidCatch(E.value,{componentStack:ce!==null?ce:""})})}function oye(f,p,y,E,I){if(y.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=y.alternate,p!==null&&y0(p,y,I,!0),y=Mo.current,y!==null){switch(y.tag){case 31:case 13:return xa===null?wS():y.alternate===null&&Fr===0&&(Fr=3),y.flags&=-257,y.flags|=65536,y.lanes=I,E===JE?y.flags|=16384:(p=y.updateQueue,p===null?y.updateQueue=new Set([E]):p.add(E),K_(f,E,I)),!1;case 22:return y.flags|=65536,E===JE?y.flags|=16384:(p=y.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},y.updateQueue=p):(y=p.retryQueue,y===null?p.retryQueue=new Set([E]):y.add(E)),K_(f,E,I)),!1}throw Error(r(435,y.tag))}return K_(f,E,I),wS(),!1}if(Cn)return p=Mo.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=I,E!==$P&&(f=Error(r(422),{cause:E}),Mv(pa(f,y)))):(E!==$P&&(p=Error(r(423),{cause:E}),Mv(pa(p,y))),f=f.current.alternate,f.flags|=65536,I&=-I,f.lanes|=I,E=pa(E,y),I=E_(f.stateNode,E,I),QP(f,I),Fr!==4&&(Fr=2)),!1;var D=Error(r(520),{cause:E});if(D=pa(D,y),Zv===null?Zv=[D]:Zv.push(D),Fr!==4&&(Fr=2),p===null)return!0;E=pa(E,y),y=p;do{switch(y.tag){case 3:return y.flags|=65536,f=I&-I,y.lanes|=f,f=E_(y.stateNode,E,f),QP(y,f),!1;case 1:if(p=y.type,D=y.stateNode,(y.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Zd===null||!Zd.has(D))))return y.flags|=65536,I&=-I,y.lanes|=I,I=EF(I),SF(I,f,y,E),QP(y,I),!1}y=y.return}while(y!==null);return!1}var S_=Error(r(461)),li=!1;function Wi(f,p,y,E){p.child=f===null?CU(p,null,y,E):Hh(p,f.child,y,E)}function AF(f,p,y,E,I){y=y.render;var D=p.ref;if("ref"in E){var ne={};for(var ce in E)ce!=="ref"&&(ne[ce]=E[ce])}else ne=E;return Uh(p),E=i_(f,p,y,ne,D,I),ce=s_(),f!==null&&!li?(o_(f,p,I),cu(f,p,I)):(Cn&&ce&&UP(p),p.flags|=1,Wi(f,p,E,I),p.child)}function TF(f,p,y,E,I){if(f===null){var D=y.type;return typeof D=="function"&&!DP(D)&&D.defaultProps===void 0&&y.compare===null?(p.tag=15,p.type=D,kF(f,p,D,E,I)):(f=VE(y.type,null,E,p,p.mode,I),f.ref=p.ref,f.return=p,p.child=f)}if(D=f.child,!I_(f,I)){var ne=D.memoizedProps;if(y=y.compare,y=y!==null?y:Iv,y(ne,E)&&f.ref===p.ref)return cu(f,p,I)}return p.flags|=1,f=ru(D,E),f.ref=p.ref,f.return=p,p.child=f}function kF(f,p,y,E,I){if(f!==null){var D=f.memoizedProps;if(Iv(D,E)&&f.ref===p.ref)if(li=!1,p.pendingProps=E=D,I_(f,I))(f.flags&131072)!==0&&(li=!0);else return p.lanes=f.lanes,cu(f,p,I)}return A_(f,p,y,E,I)}function CF(f,p,y,E){var I=E.children,D=f!==null?f.memoizedState:null;if(f===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((p.flags&128)!==0){if(D=D!==null?D.baseLanes|y:y,f!==null){for(E=p.child=f.child,I=0;E!==null;)I=I|E.lanes|E.childLanes,E=E.sibling;E=I&~D}else E=0,p.child=null;return NF(f,p,D,y,E)}if((y&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&WE(p,D!==null?D.cachePool:null),D!==null?_U(p,D):e_(),IU(p);else return E=p.lanes=536870912,NF(f,p,D!==null?D.baseLanes|y:y,y,E)}else D!==null?(WE(p,D.cachePool),_U(p,D),Yd(),p.memoizedState=null):(f!==null&&WE(p,null),e_(),Yd());return Wi(f,p,I,y),p.child}function Gv(f,p){return f!==null&&f.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function NF(f,p,y,E,I){var D=WP();return D=D===null?null:{parent:oi._currentValue,pool:D},p.memoizedState={baseLanes:y,cachePool:D},f!==null&&WE(p,null),e_(),IU(p),f!==null&&y0(f,p,E,!0),p.childLanes=I,null}function uS(f,p){return p=fS({mode:p.mode,children:p.children},f.mode),p.ref=f.ref,f.child=p,p.return=f,p}function PF(f,p,y){return Hh(p,f.child,null,y),f=uS(p,p.pendingProps),f.flags|=2,Lo(p),p.memoizedState=null,f}function aye(f,p,y){var E=p.pendingProps,I=(p.flags&128)!==0;if(p.flags&=-129,f===null){if(Cn){if(E.mode==="hidden")return f=uS(p,E),p.lanes=536870912,Gv(null,f);if(n_(p),(f=br)?(f=$9(f,ya),f=f!==null&&f.data==="&"?f:null,f!==null&&(p.memoizedState={dehydrated:f,treeContext:$d!==null?{id:Zl,overflow:ec}:null,retryLane:536870912,hydrationErrors:null},y=fU(f),y.return=p,p.child=y,Gi=p,br=null)):f=null,f===null)throw Hd(p);return p.lanes=536870912,null}return uS(p,E)}var D=f.memoizedState;if(D!==null){var ne=D.dehydrated;if(n_(p),I)if(p.flags&256)p.flags&=-257,p=PF(f,p,y);else if(p.memoizedState!==null)p.child=f.child,p.flags|=128,p=null;else throw Error(r(558));else if(li||y0(f,p,y,!1),I=(y&f.childLanes)!==0,li||I){if(E=sr,E!==null&&(ne=Oe(E,y),ne!==0&&ne!==D.retryLane))throw D.retryLane=ne,Lh(f,ne),po(E,f,ne),S_;wS(),p=PF(f,p,y)}else f=D.treeContext,br=va(ne.nextSibling),Gi=p,Cn=!0,zd=null,ya=!1,f!==null&&mU(p,f),p=uS(p,E),p.flags|=4096;return p}return f=ru(f.child,{mode:E.mode,children:E.children}),f.ref=p.ref,p.child=f,f.return=p,f}function dS(f,p){var y=p.ref;if(y===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(f===null||f.ref!==y)&&(p.flags|=4194816)}}function A_(f,p,y,E,I){return Uh(p),y=i_(f,p,y,E,void 0,I),E=s_(),f!==null&&!li?(o_(f,p,I),cu(f,p,I)):(Cn&&E&&UP(p),p.flags|=1,Wi(f,p,y,I),p.child)}function _F(f,p,y,E,I,D){return Uh(p),p.updateQueue=null,y=OU(p,E,y,I),RU(f),E=s_(),f!==null&&!li?(o_(f,p,D),cu(f,p,D)):(Cn&&E&&UP(p),p.flags|=1,Wi(f,p,y,D),p.child)}function IF(f,p,y,E,I){if(Uh(p),p.stateNode===null){var D=h0,ne=y.contextType;typeof ne=="object"&&ne!==null&&(D=Ki(ne)),D=new y(E,D),p.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=w_,p.stateNode=D,D._reactInternals=p,D=p.stateNode,D.props=E,D.state=p.memoizedState,D.refs={},JP(p),ne=y.contextType,D.context=typeof ne=="object"&&ne!==null?Ki(ne):h0,D.state=p.memoizedState,ne=y.getDerivedStateFromProps,typeof ne=="function"&&(b_(p,y,ne,E),D.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(ne=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),ne!==D.state&&w_.enqueueReplaceState(D,D.state,null),$v(p,E,D,I),Fv(),D.state=p.memoizedState),typeof D.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(f===null){D=p.stateNode;var ce=p.memoizedProps,Se=qh(y,ce);D.props=Se;var Be=D.context,Ge=y.contextType;ne=h0,typeof Ge=="object"&&Ge!==null&&(ne=Ki(Ge));var Xe=y.getDerivedStateFromProps;Ge=typeof Xe=="function"||typeof D.getSnapshotBeforeUpdate=="function",ce=p.pendingProps!==ce,Ge||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ce||Be!==ne)&&yF(p,D,E,ne),qd=!1;var Fe=p.memoizedState;D.state=Fe,$v(p,E,D,I),Fv(),Be=p.memoizedState,ce||Fe!==Be||qd?(typeof Xe=="function"&&(b_(p,y,Xe,E),Be=p.memoizedState),(Se=qd||gF(p,y,Se,E,Fe,Be,ne))?(Ge||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(p.flags|=4194308)):(typeof D.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Be),D.props=E,D.state=Be,D.context=ne,E=Se):(typeof D.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{D=p.stateNode,XP(f,p),ne=p.memoizedProps,Ge=qh(y,ne),D.props=Ge,Xe=p.pendingProps,Fe=D.context,Be=y.contextType,Se=h0,typeof Be=="object"&&Be!==null&&(Se=Ki(Be)),ce=y.getDerivedStateFromProps,(Be=typeof ce=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ne!==Xe||Fe!==Se)&&yF(p,D,E,Se),qd=!1,Fe=p.memoizedState,D.state=Fe,$v(p,E,D,I),Fv();var He=p.memoizedState;ne!==Xe||Fe!==He||qd||f!==null&&f.dependencies!==null&&GE(f.dependencies)?(typeof ce=="function"&&(b_(p,y,ce,E),He=p.memoizedState),(Ge=qd||gF(p,y,Ge,E,Fe,He,Se)||f!==null&&f.dependencies!==null&&GE(f.dependencies))?(Be||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(E,He,Se),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(E,He,Se)),typeof D.componentDidUpdate=="function"&&(p.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof D.componentDidUpdate!="function"||ne===f.memoizedProps&&Fe===f.memoizedState||(p.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&Fe===f.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=He),D.props=E,D.state=He,D.context=Se,E=Ge):(typeof D.componentDidUpdate!="function"||ne===f.memoizedProps&&Fe===f.memoizedState||(p.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&Fe===f.memoizedState||(p.flags|=1024),E=!1)}return D=E,dS(f,p),E=(p.flags&128)!==0,D||E?(D=p.stateNode,y=E&&typeof y.getDerivedStateFromError!="function"?null:D.render(),p.flags|=1,f!==null&&E?(p.child=Hh(p,f.child,null,I),p.child=Hh(p,null,y,I)):Wi(f,p,y,I),p.memoizedState=D.state,f=p.child):f=cu(f,p,I),f}function RF(f,p,y,E){return jh(),p.flags|=256,Wi(f,p,y,E),p.child}var T_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function k_(f){return{baseLanes:f,cachePool:wU()}}function C_(f,p,y){return f=f!==null?f.childLanes&~y:0,p&&(f|=jo),f}function OF(f,p,y){var E=p.pendingProps,I=!1,D=(p.flags&128)!==0,ne;if((ne=D)||(ne=f!==null&&f.memoizedState===null?!1:(Jr.current&2)!==0),ne&&(I=!0,p.flags&=-129),ne=(p.flags&32)!==0,p.flags&=-33,f===null){if(Cn){if(I?Wd(p):Yd(),(f=br)?(f=$9(f,ya),f=f!==null&&f.data!=="&"?f:null,f!==null&&(p.memoizedState={dehydrated:f,treeContext:$d!==null?{id:Zl,overflow:ec}:null,retryLane:536870912,hydrationErrors:null},y=fU(f),y.return=p,p.child=y,Gi=p,br=null)):f=null,f===null)throw Hd(p);return cI(f)?p.lanes=32:p.lanes=536870912,null}var ce=E.children;return E=E.fallback,I?(Yd(),I=p.mode,ce=fS({mode:"hidden",children:ce},I),E=Dh(E,I,y,null),ce.return=p,E.return=p,ce.sibling=E,p.child=ce,E=p.child,E.memoizedState=k_(y),E.childLanes=C_(f,ne,y),p.memoizedState=T_,Gv(null,E)):(Wd(p),N_(p,ce))}var Se=f.memoizedState;if(Se!==null&&(ce=Se.dehydrated,ce!==null)){if(D)p.flags&256?(Wd(p),p.flags&=-257,p=P_(f,p,y)):p.memoizedState!==null?(Yd(),p.child=f.child,p.flags|=128,p=null):(Yd(),ce=E.fallback,I=p.mode,E=fS({mode:"visible",children:E.children},I),ce=Dh(ce,I,y,null),ce.flags|=2,E.return=p,ce.return=p,E.sibling=ce,p.child=E,Hh(p,f.child,null,y),E=p.child,E.memoizedState=k_(y),E.childLanes=C_(f,ne,y),p.memoizedState=T_,p=Gv(null,E));else if(Wd(p),cI(ce)){if(ne=ce.nextSibling&&ce.nextSibling.dataset,ne)var Be=ne.dgst;ne=Be,E=Error(r(419)),E.stack="",E.digest=ne,Mv({value:E,source:null,stack:null}),p=P_(f,p,y)}else if(li||y0(f,p,y,!1),ne=(y&f.childLanes)!==0,li||ne){if(ne=sr,ne!==null&&(E=Oe(ne,y),E!==0&&E!==Se.retryLane))throw Se.retryLane=E,Lh(f,E),po(ne,f,E),S_;lI(ce)||wS(),p=P_(f,p,y)}else lI(ce)?(p.flags|=192,p.child=f.child,p=null):(f=Se.treeContext,br=va(ce.nextSibling),Gi=p,Cn=!0,zd=null,ya=!1,f!==null&&mU(p,f),p=N_(p,E.children),p.flags|=4096);return p}return I?(Yd(),ce=E.fallback,I=p.mode,Se=f.child,Be=Se.sibling,E=ru(Se,{mode:"hidden",children:E.children}),E.subtreeFlags=Se.subtreeFlags&65011712,Be!==null?ce=ru(Be,ce):(ce=Dh(ce,I,y,null),ce.flags|=2),ce.return=p,E.return=p,E.sibling=ce,p.child=E,Gv(null,E),E=p.child,ce=f.child.memoizedState,ce===null?ce=k_(y):(I=ce.cachePool,I!==null?(Se=oi._currentValue,I=I.parent!==Se?{parent:Se,pool:Se}:I):I=wU(),ce={baseLanes:ce.baseLanes|y,cachePool:I}),E.memoizedState=ce,E.childLanes=C_(f,ne,y),p.memoizedState=T_,Gv(f.child,E)):(Wd(p),y=f.child,f=y.sibling,y=ru(y,{mode:"visible",children:E.children}),y.return=p,y.sibling=null,f!==null&&(ne=p.deletions,ne===null?(p.deletions=[f],p.flags|=16):ne.push(f)),p.child=y,p.memoizedState=null,y)}function N_(f,p){return p=fS({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function fS(f,p){return f=Oo(22,f,null,p),f.lanes=0,f}function P_(f,p,y){return Hh(p,f.child,null,y),f=N_(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function MF(f,p,y){f.lanes|=p;var E=f.alternate;E!==null&&(E.lanes|=p),VP(f.return,p,y)}function __(f,p,y,E,I,D){var ne=f.memoizedState;ne===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:I,treeForkCount:D}:(ne.isBackwards=p,ne.rendering=null,ne.renderingStartTime=0,ne.last=E,ne.tail=y,ne.tailMode=I,ne.treeForkCount=D)}function LF(f,p,y){var E=p.pendingProps,I=E.revealOrder,D=E.tail;E=E.children;var ne=Jr.current,ce=(ne&2)!==0;if(ce?(ne=ne&1|2,p.flags|=128):ne&=1,P(Jr,ne),Wi(f,p,E,y),E=Cn?Ov:0,!ce&&f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&MF(f,y,p);else if(f.tag===19)MF(f,y,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(I){case"forwards":for(y=p.child,I=null;y!==null;)f=y.alternate,f!==null&&eS(f)===null&&(I=y),y=y.sibling;y=I,y===null?(I=p.child,p.child=null):(I=y.sibling,y.sibling=null),__(p,!1,I,y,D,E);break;case"backwards":case"unstable_legacy-backwards":for(y=null,I=p.child,p.child=null;I!==null;){if(f=I.alternate,f!==null&&eS(f)===null){p.child=I;break}f=I.sibling,I.sibling=y,y=I,I=f}__(p,!0,y,null,D,E);break;case"together":__(p,!1,null,null,void 0,E);break;default:p.memoizedState=null}return p.child}function cu(f,p,y){if(f!==null&&(p.dependencies=f.dependencies),Qd|=p.lanes,(y&p.childLanes)===0)if(f!==null){if(y0(f,p,y,!1),(y&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(r(153));if(p.child!==null){for(f=p.child,y=ru(f,f.pendingProps),p.child=y,y.return=p;f.sibling!==null;)f=f.sibling,y=y.sibling=ru(f,f.pendingProps),y.return=p;y.sibling=null}return p.child}function I_(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&GE(f)))}function lye(f,p,y){switch(p.tag){case 3:Te(p,p.stateNode.containerInfo),Vd(p,oi,f.memoizedState.cache),jh();break;case 27:case 5:pe(p);break;case 4:Te(p,p.stateNode.containerInfo);break;case 10:Vd(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,n_(p),null;break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(Wd(p),p.flags|=128,null):(y&p.child.childLanes)!==0?OF(f,p,y):(Wd(p),f=cu(f,p,y),f!==null?f.sibling:null);Wd(p);break;case 19:var I=(f.flags&128)!==0;if(E=(y&p.childLanes)!==0,E||(y0(f,p,y,!1),E=(y&p.childLanes)!==0),I){if(E)return LF(f,p,y);p.flags|=128}if(I=p.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),P(Jr,Jr.current),E)break;return null;case 22:return p.lanes=0,CF(f,p,y,p.pendingProps);case 24:Vd(p,oi,f.memoizedState.cache)}return cu(f,p,y)}function DF(f,p,y){if(f!==null)if(f.memoizedProps!==p.pendingProps)li=!0;else{if(!I_(f,y)&&(p.flags&128)===0)return li=!1,lye(f,p,y);li=(f.flags&131072)!==0}else li=!1,Cn&&(p.flags&1048576)!==0&&pU(p,Ov,p.index);switch(p.lanes=0,p.tag){case 16:e:{var E=p.pendingProps;if(f=$h(p.elementType),p.type=f,typeof f=="function")DP(f)?(E=qh(f,E),p.tag=1,p=IF(null,p,f,E,y)):(p.tag=0,p=A_(null,p,f,E,y));else{if(f!=null){var I=f.$$typeof;if(I===R){p.tag=11,p=AF(null,p,f,E,y);break e}else if(I===F){p.tag=14,p=TF(null,p,f,E,y);break e}}throw p=T(f)||f,Error(r(306,p,""))}}return p;case 0:return A_(f,p,p.type,p.pendingProps,y);case 1:return E=p.type,I=qh(E,p.pendingProps),IF(f,p,E,I,y);case 3:e:{if(Te(p,p.stateNode.containerInfo),f===null)throw Error(r(387));E=p.pendingProps;var D=p.memoizedState;I=D.element,XP(f,p),$v(p,E,null,y);var ne=p.memoizedState;if(E=ne.cache,Vd(p,oi,E),E!==D.cache&&qP(p,[oi],y,!0),Fv(),E=ne.element,D.isDehydrated)if(D={element:E,isDehydrated:!1,cache:ne.cache},p.updateQueue.baseState=D,p.memoizedState=D,p.flags&256){p=RF(f,p,E,y);break e}else if(E!==I){I=pa(Error(r(424)),p),Mv(I),p=RF(f,p,E,y);break e}else{switch(f=p.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(br=va(f.firstChild),Gi=p,Cn=!0,zd=null,ya=!0,y=CU(p,null,E,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(jh(),E===I){p=cu(f,p,y);break e}Wi(f,p,E,y)}p=p.child}return p;case 26:return dS(f,p),f===null?(y=K9(p.type,null,p.pendingProps,null))?p.memoizedState=y:Cn||(y=p.type,f=p.pendingProps,E=NS(re.current).createElement(y),E[bt]=p,E[vn]=f,Yi(E,y,f),xr(E),p.stateNode=E):p.memoizedState=K9(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:return pe(p),f===null&&Cn&&(E=p.stateNode=V9(p.type,p.pendingProps,re.current),Gi=p,ya=!0,I=br,rf(p.type)?(uI=I,br=va(E.firstChild)):br=I),Wi(f,p,p.pendingProps.children,y),dS(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&Cn&&((I=E=br)&&(E=Bye(E,p.type,p.pendingProps,ya),E!==null?(p.stateNode=E,Gi=p,br=va(E.firstChild),ya=!1,I=!0):I=!1),I||Hd(p)),pe(p),I=p.type,D=p.pendingProps,ne=f!==null?f.memoizedProps:null,E=D.children,sI(I,D)?E=null:ne!==null&&sI(I,ne)&&(p.flags|=32),p.memoizedState!==null&&(I=i_(f,p,Zge,null,null,y),ab._currentValue=I),dS(f,p),Wi(f,p,E,y),p.child;case 6:return f===null&&Cn&&((f=y=br)&&(y=Uye(y,p.pendingProps,ya),y!==null?(p.stateNode=y,Gi=p,br=null,f=!0):f=!1),f||Hd(p)),null;case 13:return OF(f,p,y);case 4:return Te(p,p.stateNode.containerInfo),E=p.pendingProps,f===null?p.child=Hh(p,null,E,y):Wi(f,p,E,y),p.child;case 11:return AF(f,p,p.type,p.pendingProps,y);case 7:return Wi(f,p,p.pendingProps,y),p.child;case 8:return Wi(f,p,p.pendingProps.children,y),p.child;case 12:return Wi(f,p,p.pendingProps.children,y),p.child;case 10:return E=p.pendingProps,Vd(p,p.type,E.value),Wi(f,p,E.children,y),p.child;case 9:return I=p.type._context,E=p.pendingProps.children,Uh(p),I=Ki(I),E=E(I),p.flags|=1,Wi(f,p,E,y),p.child;case 14:return TF(f,p,p.type,p.pendingProps,y);case 15:return kF(f,p,p.type,p.pendingProps,y);case 19:return LF(f,p,y);case 31:return aye(f,p,y);case 22:return CF(f,p,y,p.pendingProps);case 24:return Uh(p),E=Ki(oi),f===null?(I=WP(),I===null&&(I=sr,D=GP(),I.pooledCache=D,D.refCount++,D!==null&&(I.pooledCacheLanes|=y),I=D),p.memoizedState={parent:E,cache:I},JP(p),Vd(p,oi,I)):((f.lanes&y)!==0&&(XP(f,p),$v(p,null,null,y),Fv()),I=f.memoizedState,D=p.memoizedState,I.parent!==E?(I={parent:E,cache:E},p.memoizedState=I,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=I),Vd(p,oi,E)):(E=D.cache,Vd(p,oi,E),E!==I.cache&&qP(p,[oi],y,!0))),Wi(f,p,p.pendingProps.children,y),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function uu(f){f.flags|=4}function R_(f,p,y,E,I){if((p=(f.mode&32)!==0)&&(p=!1),p){if(f.flags|=16777216,(I&335544128)===I)if(f.stateNode.complete)f.flags|=8192;else if(c9())f.flags|=8192;else throw zh=JE,YP}else f.flags&=-16777217}function jF(f,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!Q9(p))if(c9())f.flags|=8192;else throw zh=JE,YP}function hS(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?zn():536870912,f.lanes|=p,P0|=p)}function Kv(f,p){if(!Cn)switch(f.tailMode){case"hidden":p=f.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?f.tail=null:y.sibling=null;break;case"collapsed":y=f.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function wr(f){var p=f.alternate!==null&&f.alternate.child===f.child,y=0,E=0;if(p)for(var I=f.child;I!==null;)y|=I.lanes|I.childLanes,E|=I.subtreeFlags&65011712,E|=I.flags&65011712,I.return=f,I=I.sibling;else for(I=f.child;I!==null;)y|=I.lanes|I.childLanes,E|=I.subtreeFlags,E|=I.flags,I.return=f,I=I.sibling;return f.subtreeFlags|=E,f.childLanes=y,p}function cye(f,p,y){var E=p.pendingProps;switch(FP(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(p),null;case 1:return wr(p),null;case 3:return y=p.stateNode,E=null,f!==null&&(E=f.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),ou(oi),ue(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(f===null||f.child===null)&&(g0(p)?uu(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,zP())),wr(p),null;case 26:var I=p.type,D=p.memoizedState;return f===null?(uu(p),D!==null?(wr(p),jF(p,D)):(wr(p),R_(p,I,null,E,y))):D?D!==f.memoizedState?(uu(p),wr(p),jF(p,D)):(wr(p),p.flags&=-16777217):(f=f.memoizedProps,f!==E&&uu(p),wr(p),R_(p,I,f,E,y)),null;case 27:if(be(p),y=re.current,I=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==E&&uu(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return wr(p),null}f=Y.current,g0(p)?gU(p):(f=V9(I,E,y),p.stateNode=f,uu(p))}return wr(p),null;case 5:if(be(p),I=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==E&&uu(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return wr(p),null}if(D=Y.current,g0(p))gU(p);else{var ne=NS(re.current);switch(D){case 1:D=ne.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:D=ne.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":D=ne.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":D=ne.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":D=ne.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof E.is=="string"?ne.createElement("select",{is:E.is}):ne.createElement("select"),E.multiple?D.multiple=!0:E.size&&(D.size=E.size);break;default:D=typeof E.is=="string"?ne.createElement(I,{is:E.is}):ne.createElement(I)}}D[bt]=p,D[vn]=E;e:for(ne=p.child;ne!==null;){if(ne.tag===5||ne.tag===6)D.appendChild(ne.stateNode);else if(ne.tag!==4&&ne.tag!==27&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===p)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===p)break e;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}p.stateNode=D;e:switch(Yi(D,I,E),I){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&uu(p)}}return wr(p),R_(p,p.type,f===null?null:f.memoizedProps,p.pendingProps,y),null;case 6:if(f&&p.stateNode!=null)f.memoizedProps!==E&&uu(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(r(166));if(f=re.current,g0(p)){if(f=p.stateNode,y=p.memoizedProps,E=null,I=Gi,I!==null)switch(I.tag){case 27:case 5:E=I.memoizedProps}f[bt]=p,f=!!(f.nodeValue===y||E!==null&&E.suppressHydrationWarning===!0||O9(f.nodeValue,y)),f||Hd(p,!0)}else f=NS(f).createTextNode(E),f[bt]=p,p.stateNode=f}return wr(p),null;case 31:if(y=p.memoizedState,f===null||f.memoizedState!==null){if(E=g0(p),y!==null){if(f===null){if(!E)throw Error(r(318));if(f=p.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(557));f[bt]=p}else jh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;wr(p),f=!1}else y=zP(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=y),f=!0;if(!f)return p.flags&256?(Lo(p),p):(Lo(p),null);if((p.flags&128)!==0)throw Error(r(558))}return wr(p),null;case 13:if(E=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(I=g0(p),E!==null&&E.dehydrated!==null){if(f===null){if(!I)throw Error(r(318));if(I=p.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));I[bt]=p}else jh(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;wr(p),I=!1}else I=zP(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=I),I=!0;if(!I)return p.flags&256?(Lo(p),p):(Lo(p),null)}return Lo(p),(p.flags&128)!==0?(p.lanes=y,p):(y=E!==null,f=f!==null&&f.memoizedState!==null,y&&(E=p.child,I=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(I=E.alternate.memoizedState.cachePool.pool),D=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(D=E.memoizedState.cachePool.pool),D!==I&&(E.flags|=2048)),y!==f&&y&&(p.child.flags|=8192),hS(p,p.updateQueue),wr(p),null);case 4:return ue(),f===null&&eI(p.stateNode.containerInfo),wr(p),null;case 10:return ou(p.type),wr(p),null;case 19:if(M(Jr),E=p.memoizedState,E===null)return wr(p),null;if(I=(p.flags&128)!==0,D=E.rendering,D===null)if(I)Kv(E,!1);else{if(Fr!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(D=eS(f),D!==null){for(p.flags|=128,Kv(E,!1),f=D.updateQueue,p.updateQueue=f,hS(p,f),p.subtreeFlags=0,f=y,y=p.child;y!==null;)dU(y,f),y=y.sibling;return P(Jr,Jr.current&1|2),Cn&&iu(p,E.treeForkCount),p.child}f=f.sibling}E.tail!==null&&Tt()>xS&&(p.flags|=128,I=!0,Kv(E,!1),p.lanes=4194304)}else{if(!I)if(f=eS(D),f!==null){if(p.flags|=128,I=!0,f=f.updateQueue,p.updateQueue=f,hS(p,f),Kv(E,!0),E.tail===null&&E.tailMode==="hidden"&&!D.alternate&&!Cn)return wr(p),null}else 2*Tt()-E.renderingStartTime>xS&&y!==536870912&&(p.flags|=128,I=!0,Kv(E,!1),p.lanes=4194304);E.isBackwards?(D.sibling=p.child,p.child=D):(f=E.last,f!==null?f.sibling=D:p.child=D,E.last=D)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=Tt(),f.sibling=null,y=Jr.current,P(Jr,I?y&1|2:y&1),Cn&&iu(p,E.treeForkCount),f):(wr(p),null);case 22:case 23:return Lo(p),t_(),E=p.memoizedState!==null,f!==null?f.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(y&536870912)!==0&&(p.flags&128)===0&&(wr(p),p.subtreeFlags&6&&(p.flags|=8192)):wr(p),y=p.updateQueue,y!==null&&hS(p,y.retryQueue),y=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==y&&(p.flags|=2048),f!==null&&M(Fh),null;case 24:return y=null,f!==null&&(y=f.memoizedState.cache),p.memoizedState.cache!==y&&(p.flags|=2048),ou(oi),wr(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function uye(f,p){switch(FP(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return ou(oi),ue(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return be(p),null;case 31:if(p.memoizedState!==null){if(Lo(p),p.alternate===null)throw Error(r(340));jh()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 13:if(Lo(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(r(340));jh()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return M(Jr),null;case 4:return ue(),null;case 10:return ou(p.type),null;case 22:case 23:return Lo(p),t_(),f!==null&&M(Fh),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return ou(oi),null;case 25:return null;default:return null}}function BF(f,p){switch(FP(p),p.tag){case 3:ou(oi),ue();break;case 26:case 27:case 5:be(p);break;case 4:ue();break;case 31:p.memoizedState!==null&&Lo(p);break;case 13:Lo(p);break;case 19:M(Jr);break;case 10:ou(p.type);break;case 22:case 23:Lo(p),t_(),f!==null&&M(Fh);break;case 24:ou(oi)}}function Wv(f,p){try{var y=p.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var I=E.next;y=I;do{if((y.tag&f)===f){E=void 0;var D=y.create,ne=y.inst;E=D(),ne.destroy=E}y=y.next}while(y!==I)}}catch(ce){Jn(p,p.return,ce)}}function Jd(f,p,y){try{var E=p.updateQueue,I=E!==null?E.lastEffect:null;if(I!==null){var D=I.next;E=D;do{if((E.tag&f)===f){var ne=E.inst,ce=ne.destroy;if(ce!==void 0){ne.destroy=void 0,I=p;var Se=y,Be=ce;try{Be()}catch(Ge){Jn(I,Se,Ge)}}}E=E.next}while(E!==D)}}catch(Ge){Jn(p,p.return,Ge)}}function UF(f){var p=f.updateQueue;if(p!==null){var y=f.stateNode;try{PU(p,y)}catch(E){Jn(f,f.return,E)}}}function FF(f,p,y){y.props=qh(f.type,f.memoizedProps),y.state=f.memoizedState;try{y.componentWillUnmount()}catch(E){Jn(f,p,E)}}function Yv(f,p){try{var y=f.ref;if(y!==null){switch(f.tag){case 26:case 27:case 5:var E=f.stateNode;break;case 30:E=f.stateNode;break;default:E=f.stateNode}typeof y=="function"?f.refCleanup=y(E):y.current=E}}catch(I){Jn(f,p,I)}}function tc(f,p){var y=f.ref,E=f.refCleanup;if(y!==null)if(typeof E=="function")try{E()}catch(I){Jn(f,p,I)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(I){Jn(f,p,I)}else y.current=null}function $F(f){var p=f.type,y=f.memoizedProps,E=f.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":y.autoFocus&&E.focus();break e;case"img":y.src?E.src=y.src:y.srcSet&&(E.srcset=y.srcSet)}}catch(I){Jn(f,f.return,I)}}function O_(f,p,y){try{var E=f.stateNode;Rye(E,f.type,y,p),E[vn]=p}catch(I){Jn(f,f.return,I)}}function zF(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&rf(f.type)||f.tag===4}function M_(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||zF(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&rf(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function L_(f,p,y){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(f,p):(p=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,p.appendChild(f),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=tu));else if(E!==4&&(E===27&&rf(f.type)&&(y=f.stateNode,p=null),f=f.child,f!==null))for(L_(f,p,y),f=f.sibling;f!==null;)L_(f,p,y),f=f.sibling}function pS(f,p,y){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?y.insertBefore(f,p):y.appendChild(f);else if(E!==4&&(E===27&&rf(f.type)&&(y=f.stateNode),f=f.child,f!==null))for(pS(f,p,y),f=f.sibling;f!==null;)pS(f,p,y),f=f.sibling}function HF(f){var p=f.stateNode,y=f.memoizedProps;try{for(var E=f.type,I=p.attributes;I.length;)p.removeAttributeNode(I[0]);Yi(p,E,y),p[bt]=f,p[vn]=y}catch(D){Jn(f,f.return,D)}}var du=!1,ci=!1,D_=!1,VF=typeof WeakSet=="function"?WeakSet:Set,Pi=null;function dye(f,p){if(f=f.containerInfo,rI=LS,f=nU(f),PP(f)){if("selectionStart"in f)var y={start:f.selectionStart,end:f.selectionEnd};else e:{y=(y=f.ownerDocument)&&y.defaultView||window;var E=y.getSelection&&y.getSelection();if(E&&E.rangeCount!==0){y=E.anchorNode;var I=E.anchorOffset,D=E.focusNode;E=E.focusOffset;try{y.nodeType,D.nodeType}catch{y=null;break e}var ne=0,ce=-1,Se=-1,Be=0,Ge=0,Xe=f,Fe=null;t:for(;;){for(var He;Xe!==y||I!==0&&Xe.nodeType!==3||(ce=ne+I),Xe!==D||E!==0&&Xe.nodeType!==3||(Se=ne+E),Xe.nodeType===3&&(ne+=Xe.nodeValue.length),(He=Xe.firstChild)!==null;)Fe=Xe,Xe=He;for(;;){if(Xe===f)break t;if(Fe===y&&++Be===I&&(ce=ne),Fe===D&&++Ge===E&&(Se=ne),(He=Xe.nextSibling)!==null)break;Xe=Fe,Fe=Xe.parentNode}Xe=He}y=ce===-1||Se===-1?null:{start:ce,end:Se}}else y=null}y=y||{start:0,end:0}}else y=null;for(iI={focusedElem:f,selectionRange:y},LS=!1,Pi=p;Pi!==null;)if(p=Pi,f=p.child,(p.subtreeFlags&1028)!==0&&f!==null)f.return=p,Pi=f;else for(;Pi!==null;){switch(p=Pi,D=p.alternate,f=p.flags,p.tag){case 0:if((f&4)!==0&&(f=p.updateQueue,f=f!==null?f.events:null,f!==null))for(y=0;y<f.length;y++)I=f[y],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((f&1024)!==0&&D!==null){f=void 0,y=p,I=D.memoizedProps,D=D.memoizedState,E=y.stateNode;try{var Pt=qh(y.type,I);f=E.getSnapshotBeforeUpdate(Pt,D),E.__reactInternalSnapshotBeforeUpdate=f}catch(Kt){Jn(y,y.return,Kt)}}break;case 3:if((f&1024)!==0){if(f=p.stateNode.containerInfo,y=f.nodeType,y===9)aI(f);else if(y===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":aI(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=p.sibling,f!==null){f.return=p.return,Pi=f;break}Pi=p.return}}function qF(f,p,y){var E=y.flags;switch(y.tag){case 0:case 11:case 15:hu(f,y),E&4&&Wv(5,y);break;case 1:if(hu(f,y),E&4)if(f=y.stateNode,p===null)try{f.componentDidMount()}catch(ne){Jn(y,y.return,ne)}else{var I=qh(y.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(I,p,f.__reactInternalSnapshotBeforeUpdate)}catch(ne){Jn(y,y.return,ne)}}E&64&&UF(y),E&512&&Yv(y,y.return);break;case 3:if(hu(f,y),E&64&&(f=y.updateQueue,f!==null)){if(p=null,y.child!==null)switch(y.child.tag){case 27:case 5:p=y.child.stateNode;break;case 1:p=y.child.stateNode}try{PU(f,p)}catch(ne){Jn(y,y.return,ne)}}break;case 27:p===null&&E&4&&HF(y);case 26:case 5:hu(f,y),p===null&&E&4&&$F(y),E&512&&Yv(y,y.return);break;case 12:hu(f,y);break;case 31:hu(f,y),E&4&&WF(f,y);break;case 13:hu(f,y),E&4&&YF(f,y),E&64&&(f=y.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(y=bye.bind(null,y),Fye(f,y))));break;case 22:if(E=y.memoizedState!==null||du,!E){p=p!==null&&p.memoizedState!==null||ci,I=du;var D=ci;du=E,(ci=p)&&!D?pu(f,y,(y.subtreeFlags&8772)!==0):hu(f,y),du=I,ci=D}break;case 30:break;default:hu(f,y)}}function GF(f){var p=f.alternate;p!==null&&(f.alternate=null,GF(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&Ql(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Ar=null,co=!1;function fu(f,p,y){for(y=y.child;y!==null;)KF(f,p,y),y=y.sibling}function KF(f,p,y){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(de,y)}catch{}switch(y.tag){case 26:ci||tc(y,p),fu(f,p,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:ci||tc(y,p);var E=Ar,I=co;rf(y.type)&&(Ar=y.stateNode,co=!1),fu(f,p,y),ib(y.stateNode),Ar=E,co=I;break;case 5:ci||tc(y,p);case 6:if(E=Ar,I=co,Ar=null,fu(f,p,y),Ar=E,co=I,Ar!==null)if(co)try{(Ar.nodeType===9?Ar.body:Ar.nodeName==="HTML"?Ar.ownerDocument.body:Ar).removeChild(y.stateNode)}catch(D){Jn(y,p,D)}else try{Ar.removeChild(y.stateNode)}catch(D){Jn(y,p,D)}break;case 18:Ar!==null&&(co?(f=Ar,U9(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,y.stateNode),j0(f)):U9(Ar,y.stateNode));break;case 4:E=Ar,I=co,Ar=y.stateNode.containerInfo,co=!0,fu(f,p,y),Ar=E,co=I;break;case 0:case 11:case 14:case 15:Jd(2,y,p),ci||Jd(4,y,p),fu(f,p,y);break;case 1:ci||(tc(y,p),E=y.stateNode,typeof E.componentWillUnmount=="function"&&FF(y,p,E)),fu(f,p,y);break;case 21:fu(f,p,y);break;case 22:ci=(E=ci)||y.memoizedState!==null,fu(f,p,y),ci=E;break;default:fu(f,p,y)}}function WF(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{j0(f)}catch(y){Jn(p,p.return,y)}}}function YF(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{j0(f)}catch(y){Jn(p,p.return,y)}}function fye(f){switch(f.tag){case 31:case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new VF),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new VF),p;default:throw Error(r(435,f.tag))}}function mS(f,p){var y=fye(f);p.forEach(function(E){if(!y.has(E)){y.add(E);var I=wye.bind(null,f,E);E.then(I,I)}})}function uo(f,p){var y=p.deletions;if(y!==null)for(var E=0;E<y.length;E++){var I=y[E],D=f,ne=p,ce=ne;e:for(;ce!==null;){switch(ce.tag){case 27:if(rf(ce.type)){Ar=ce.stateNode,co=!1;break e}break;case 5:Ar=ce.stateNode,co=!1;break e;case 3:case 4:Ar=ce.stateNode.containerInfo,co=!0;break e}ce=ce.return}if(Ar===null)throw Error(r(160));KF(D,ne,I),Ar=null,co=!1,D=I.alternate,D!==null&&(D.return=null),I.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)JF(p,f),p=p.sibling}var al=null;function JF(f,p){var y=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:uo(p,f),fo(f),E&4&&(Jd(3,f,f.return),Wv(3,f),Jd(5,f,f.return));break;case 1:uo(p,f),fo(f),E&512&&(ci||y===null||tc(y,y.return)),E&64&&du&&(f=f.updateQueue,f!==null&&(E=f.callbacks,E!==null&&(y=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=y===null?E:y.concat(E))));break;case 26:var I=al;if(uo(p,f),fo(f),E&512&&(ci||y===null||tc(y,y.return)),E&4){var D=y!==null?y.memoizedState:null;if(E=f.memoizedState,y===null)if(E===null)if(f.stateNode===null){e:{E=f.type,y=f.memoizedProps,I=I.ownerDocument||I;t:switch(E){case"title":D=I.getElementsByTagName("title")[0],(!D||D[ca]||D[bt]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=I.createElement(E),I.head.insertBefore(D,I.querySelector("head > title"))),Yi(D,E,y),D[bt]=f,xr(D),E=D;break e;case"link":var ne=J9("link","href",I).get(E+(y.href||""));if(ne){for(var ce=0;ce<ne.length;ce++)if(D=ne[ce],D.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&D.getAttribute("rel")===(y.rel==null?null:y.rel)&&D.getAttribute("title")===(y.title==null?null:y.title)&&D.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){ne.splice(ce,1);break t}}D=I.createElement(E),Yi(D,E,y),I.head.appendChild(D);break;case"meta":if(ne=J9("meta","content",I).get(E+(y.content||""))){for(ce=0;ce<ne.length;ce++)if(D=ne[ce],D.getAttribute("content")===(y.content==null?null:""+y.content)&&D.getAttribute("name")===(y.name==null?null:y.name)&&D.getAttribute("property")===(y.property==null?null:y.property)&&D.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&D.getAttribute("charset")===(y.charSet==null?null:y.charSet)){ne.splice(ce,1);break t}}D=I.createElement(E),Yi(D,E,y),I.head.appendChild(D);break;default:throw Error(r(468,E))}D[bt]=f,xr(D),E=D}f.stateNode=E}else X9(I,f.type,f.stateNode);else f.stateNode=Y9(I,E,f.memoizedProps);else D!==E?(D===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):D.count--,E===null?X9(I,f.type,f.stateNode):Y9(I,E,f.memoizedProps)):E===null&&f.stateNode!==null&&O_(f,f.memoizedProps,y.memoizedProps)}break;case 27:uo(p,f),fo(f),E&512&&(ci||y===null||tc(y,y.return)),y!==null&&E&4&&O_(f,f.memoizedProps,y.memoizedProps);break;case 5:if(uo(p,f),fo(f),E&512&&(ci||y===null||tc(y,y.return)),f.flags&32){I=f.stateNode;try{o0(I,"")}catch(Pt){Jn(f,f.return,Pt)}}E&4&&f.stateNode!=null&&(I=f.memoizedProps,O_(f,I,y!==null?y.memoizedProps:I)),E&1024&&(D_=!0);break;case 6:if(uo(p,f),fo(f),E&4){if(f.stateNode===null)throw Error(r(162));E=f.memoizedProps,y=f.stateNode;try{y.nodeValue=E}catch(Pt){Jn(f,f.return,Pt)}}break;case 3:if(IS=null,I=al,al=PS(p.containerInfo),uo(p,f),al=I,fo(f),E&4&&y!==null&&y.memoizedState.isDehydrated)try{j0(p.containerInfo)}catch(Pt){Jn(f,f.return,Pt)}D_&&(D_=!1,XF(f));break;case 4:E=al,al=PS(f.stateNode.containerInfo),uo(p,f),fo(f),al=E;break;case 12:uo(p,f),fo(f);break;case 31:uo(p,f),fo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,mS(f,E)));break;case 13:uo(p,f),fo(f),f.child.flags&8192&&f.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(yS=Tt()),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,mS(f,E)));break;case 22:I=f.memoizedState!==null;var Se=y!==null&&y.memoizedState!==null,Be=du,Ge=ci;if(du=Be||I,ci=Ge||Se,uo(p,f),ci=Ge,du=Be,fo(f),E&8192)e:for(p=f.stateNode,p._visibility=I?p._visibility&-2:p._visibility|1,I&&(y===null||Se||du||ci||Gh(f)),y=null,p=f;;){if(p.tag===5||p.tag===26){if(y===null){Se=y=p;try{if(D=Se.stateNode,I)ne=D.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none";else{ce=Se.stateNode;var Xe=Se.memoizedProps.style,Fe=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;ce.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(Pt){Jn(Se,Se.return,Pt)}}}else if(p.tag===6){if(y===null){Se=p;try{Se.stateNode.nodeValue=I?"":Se.memoizedProps}catch(Pt){Jn(Se,Se.return,Pt)}}}else if(p.tag===18){if(y===null){Se=p;try{var He=Se.stateNode;I?F9(He,!0):F9(Se.stateNode,!1)}catch(Pt){Jn(Se,Se.return,Pt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;y===p&&(y=null),p=p.return}y===p&&(y=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=f.updateQueue,E!==null&&(y=E.retryQueue,y!==null&&(E.retryQueue=null,mS(f,y))));break;case 19:uo(p,f),fo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,mS(f,E)));break;case 30:break;case 21:break;default:uo(p,f),fo(f)}}function fo(f){var p=f.flags;if(p&2){try{for(var y,E=f.return;E!==null;){if(zF(E)){y=E;break}E=E.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var I=y.stateNode,D=M_(f);pS(f,D,I);break;case 5:var ne=y.stateNode;y.flags&32&&(o0(ne,""),y.flags&=-33);var ce=M_(f);pS(f,ce,ne);break;case 3:case 4:var Se=y.stateNode.containerInfo,Be=M_(f);L_(f,Be,Se);break;default:throw Error(r(161))}}catch(Ge){Jn(f,f.return,Ge)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function XF(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;XF(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),f=f.sibling}}function hu(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)qF(f,p.alternate,p),p=p.sibling}function Gh(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:Jd(4,p,p.return),Gh(p);break;case 1:tc(p,p.return);var y=p.stateNode;typeof y.componentWillUnmount=="function"&&FF(p,p.return,y),Gh(p);break;case 27:ib(p.stateNode);case 26:case 5:tc(p,p.return),Gh(p);break;case 22:p.memoizedState===null&&Gh(p);break;case 30:Gh(p);break;default:Gh(p)}f=f.sibling}}function pu(f,p,y){for(y=y&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,I=f,D=p,ne=D.flags;switch(D.tag){case 0:case 11:case 15:pu(I,D,y),Wv(4,D);break;case 1:if(pu(I,D,y),E=D,I=E.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(Be){Jn(E,E.return,Be)}if(E=D,I=E.updateQueue,I!==null){var ce=E.stateNode;try{var Se=I.shared.hiddenCallbacks;if(Se!==null)for(I.shared.hiddenCallbacks=null,I=0;I<Se.length;I++)NU(Se[I],ce)}catch(Be){Jn(E,E.return,Be)}}y&&ne&64&&UF(D),Yv(D,D.return);break;case 27:HF(D);case 26:case 5:pu(I,D,y),y&&E===null&&ne&4&&$F(D),Yv(D,D.return);break;case 12:pu(I,D,y);break;case 31:pu(I,D,y),y&&ne&4&&WF(I,D);break;case 13:pu(I,D,y),y&&ne&4&&YF(I,D);break;case 22:D.memoizedState===null&&pu(I,D,y),Yv(D,D.return);break;case 30:break;default:pu(I,D,y)}p=p.sibling}}function j_(f,p){var y=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==y&&(f!=null&&f.refCount++,y!=null&&Lv(y))}function B_(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&Lv(f))}function ll(f,p,y,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)QF(f,p,y,E),p=p.sibling}function QF(f,p,y,E){var I=p.flags;switch(p.tag){case 0:case 11:case 15:ll(f,p,y,E),I&2048&&Wv(9,p);break;case 1:ll(f,p,y,E);break;case 3:ll(f,p,y,E),I&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&Lv(f)));break;case 12:if(I&2048){ll(f,p,y,E),f=p.stateNode;try{var D=p.memoizedProps,ne=D.id,ce=D.onPostCommit;typeof ce=="function"&&ce(ne,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Se){Jn(p,p.return,Se)}}else ll(f,p,y,E);break;case 31:ll(f,p,y,E);break;case 13:ll(f,p,y,E);break;case 23:break;case 22:D=p.stateNode,ne=p.alternate,p.memoizedState!==null?D._visibility&2?ll(f,p,y,E):Jv(f,p):D._visibility&2?ll(f,p,y,E):(D._visibility|=2,k0(f,p,y,E,(p.subtreeFlags&10256)!==0||!1)),I&2048&&j_(ne,p);break;case 24:ll(f,p,y,E),I&2048&&B_(p.alternate,p);break;default:ll(f,p,y,E)}}function k0(f,p,y,E,I){for(I=I&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var D=f,ne=p,ce=y,Se=E,Be=ne.flags;switch(ne.tag){case 0:case 11:case 15:k0(D,ne,ce,Se,I),Wv(8,ne);break;case 23:break;case 22:var Ge=ne.stateNode;ne.memoizedState!==null?Ge._visibility&2?k0(D,ne,ce,Se,I):Jv(D,ne):(Ge._visibility|=2,k0(D,ne,ce,Se,I)),I&&Be&2048&&j_(ne.alternate,ne);break;case 24:k0(D,ne,ce,Se,I),I&&Be&2048&&B_(ne.alternate,ne);break;default:k0(D,ne,ce,Se,I)}p=p.sibling}}function Jv(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var y=f,E=p,I=E.flags;switch(E.tag){case 22:Jv(y,E),I&2048&&j_(E.alternate,E);break;case 24:Jv(y,E),I&2048&&B_(E.alternate,E);break;default:Jv(y,E)}p=p.sibling}}var Xv=8192;function C0(f,p,y){if(f.subtreeFlags&Xv)for(f=f.child;f!==null;)ZF(f,p,y),f=f.sibling}function ZF(f,p,y){switch(f.tag){case 26:C0(f,p,y),f.flags&Xv&&f.memoizedState!==null&&Qye(y,al,f.memoizedState,f.memoizedProps);break;case 5:C0(f,p,y);break;case 3:case 4:var E=al;al=PS(f.stateNode.containerInfo),C0(f,p,y),al=E;break;case 22:f.memoizedState===null&&(E=f.alternate,E!==null&&E.memoizedState!==null?(E=Xv,Xv=16777216,C0(f,p,y),Xv=E):C0(f,p,y));break;default:C0(f,p,y)}}function e9(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function Qv(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];Pi=E,n9(E,f)}e9(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)t9(f),f=f.sibling}function t9(f){switch(f.tag){case 0:case 11:case 15:Qv(f),f.flags&2048&&Jd(9,f,f.return);break;case 3:Qv(f);break;case 12:Qv(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,gS(f)):Qv(f);break;default:Qv(f)}}function gS(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];Pi=E,n9(E,f)}e9(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:Jd(8,p,p.return),gS(p);break;case 22:y=p.stateNode,y._visibility&2&&(y._visibility&=-3,gS(p));break;default:gS(p)}f=f.sibling}}function n9(f,p){for(;Pi!==null;){var y=Pi;switch(y.tag){case 0:case 11:case 15:Jd(8,y,p);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var E=y.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Lv(y.memoizedState.cache)}if(E=y.child,E!==null)E.return=y,Pi=E;else e:for(y=f;Pi!==null;){E=Pi;var I=E.sibling,D=E.return;if(GF(E),E===y){Pi=null;break e}if(I!==null){I.return=D,Pi=I;break e}Pi=D}}}var hye={getCacheForType:function(f){var p=Ki(oi),y=p.data.get(f);return y===void 0&&(y=f(),p.data.set(f,y)),y},cacheSignal:function(){return Ki(oi).controller.signal}},pye=typeof WeakMap=="function"?WeakMap:Map,Hn=0,sr=null,bn=null,Tn=0,Yn=0,Do=null,Xd=!1,N0=!1,U_=!1,mu=0,Fr=0,Qd=0,Kh=0,F_=0,jo=0,P0=0,Zv=null,ho=null,$_=!1,yS=0,r9=0,xS=1/0,vS=null,Zd=null,vi=0,ef=null,_0=null,gu=0,z_=0,H_=null,i9=null,eb=0,V_=null;function Bo(){return(Hn&2)!==0&&Tn!==0?Tn&-Tn:L.T!==null?J_():$t()}function s9(){if(jo===0)if((Tn&536870912)===0||Cn){var f=Et;Et<<=1,(Et&3932160)===0&&(Et=262144),jo=f}else jo=536870912;return f=Mo.current,f!==null&&(f.flags|=32),jo}function po(f,p,y){(f===sr&&(Yn===2||Yn===9)||f.cancelPendingCommit!==null)&&(I0(f,0),tf(f,Tn,jo,!1)),Q(f,y),((Hn&2)===0||f!==sr)&&(f===sr&&((Hn&2)===0&&(Kh|=y),Fr===4&&tf(f,Tn,jo,!1)),nc(f))}function o9(f,p,y){if((Hn&6)!==0)throw Error(r(327));var E=!y&&(p&127)===0&&(p&f.expiredLanes)===0||rn(f,p),I=E?yye(f,p):G_(f,p,!0),D=E;do{if(I===0){N0&&!E&&tf(f,p,0,!1);break}else{if(y=f.current.alternate,D&&!mye(y)){I=G_(f,p,!1),D=!1;continue}if(I===2){if(D=p,f.errorRecoveryDisabledLanes&D)var ne=0;else ne=f.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){p=ne;e:{var ce=f;I=Zv;var Se=ce.current.memoizedState.isDehydrated;if(Se&&(I0(ce,ne).flags|=256),ne=G_(ce,ne,!1),ne!==2){if(U_&&!Se){ce.errorRecoveryDisabledLanes|=D,Kh|=D,I=4;break e}D=ho,ho=I,D!==null&&(ho===null?ho=D:ho.push.apply(ho,D))}I=ne}if(D=!1,I!==2)continue}}if(I===1){I0(f,0),tf(f,p,0,!0);break}e:{switch(E=f,D=I,D){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:tf(E,p,jo,!Xd);break e;case 2:ho=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(I=yS+300-Tt(),10<I)){if(tf(E,p,jo,!Xd),en(E,0,!0)!==0)break e;gu=p,E.timeoutHandle=j9(a9.bind(null,E,y,ho,vS,$_,p,jo,Kh,P0,Xd,D,"Throttled",-0,0),I);break e}a9(E,y,ho,vS,$_,p,jo,Kh,P0,Xd,D,null,-0,0)}}break}while(!0);nc(f)}function a9(f,p,y,E,I,D,ne,ce,Se,Be,Ge,Xe,Fe,He){if(f.timeoutHandle=-1,Xe=p.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tu},ZF(p,D,Xe);var Pt=(D&62914560)===D?yS-Tt():(D&4194048)===D?r9-Tt():0;if(Pt=Zye(Xe,Pt),Pt!==null){gu=D,f.cancelPendingCommit=Pt(m9.bind(null,f,p,D,y,E,I,ne,ce,Se,Ge,Xe,null,Fe,He)),tf(f,D,ne,!Be);return}}m9(f,p,D,y,E,I,ne,ce,Se)}function mye(f){for(var p=f;;){var y=p.tag;if((y===0||y===11||y===15)&&p.flags&16384&&(y=p.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var E=0;E<y.length;E++){var I=y[E],D=I.getSnapshot;I=I.value;try{if(!Ro(D(),I))return!1}catch{return!1}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function tf(f,p,y,E){p&=~F_,p&=~Kh,f.suspendedLanes|=p,f.pingedLanes&=~p,E&&(f.warmLanes|=p),E=f.expirationTimes;for(var I=p;0<I;){var D=31-ge(I),ne=1<<D;E[D]=-1,I&=~ne}y!==0&&he(f,y,p)}function bS(){return(Hn&6)===0?(tb(0),!1):!0}function q_(){if(bn!==null){if(Yn===0)var f=bn.return;else f=bn,su=Bh=null,a_(f),w0=null,jv=0,f=bn;for(;f!==null;)BF(f.alternate,f),f=f.return;bn=null}}function I0(f,p){var y=f.timeoutHandle;y!==-1&&(f.timeoutHandle=-1,Lye(y)),y=f.cancelPendingCommit,y!==null&&(f.cancelPendingCommit=null,y()),gu=0,q_(),sr=f,bn=y=ru(f.current,null),Tn=p,Yn=0,Do=null,Xd=!1,N0=rn(f,p),U_=!1,P0=jo=F_=Kh=Qd=Fr=0,ho=Zv=null,$_=!1,(p&8)!==0&&(p|=p&32);var E=f.entangledLanes;if(E!==0)for(f=f.entanglements,E&=p;0<E;){var I=31-ge(E),D=1<<I;p|=f[I],E&=~D}return mu=p,$E(),y}function l9(f,p){sn=null,L.H=qv,p===b0||p===YE?(p=AU(),Yn=3):p===YP?(p=AU(),Yn=4):Yn=p===S_?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Do=p,bn===null&&(Fr=1,cS(f,pa(p,f.current)))}function c9(){var f=Mo.current;return f===null?!0:(Tn&4194048)===Tn?xa===null:(Tn&62914560)===Tn||(Tn&536870912)!==0?f===xa:!1}function u9(){var f=L.H;return L.H=qv,f===null?qv:f}function d9(){var f=L.A;return L.A=hye,f}function wS(){Fr=4,Xd||(Tn&4194048)!==Tn&&Mo.current!==null||(N0=!0),(Qd&134217727)===0&&(Kh&134217727)===0||sr===null||tf(sr,Tn,jo,!1)}function G_(f,p,y){var E=Hn;Hn|=2;var I=u9(),D=d9();(sr!==f||Tn!==p)&&(vS=null,I0(f,p)),p=!1;var ne=Fr;e:do try{if(Yn!==0&&bn!==null){var ce=bn,Se=Do;switch(Yn){case 8:q_(),ne=6;break e;case 3:case 2:case 9:case 6:Mo.current===null&&(p=!0);var Be=Yn;if(Yn=0,Do=null,R0(f,ce,Se,Be),y&&N0){ne=0;break e}break;default:Be=Yn,Yn=0,Do=null,R0(f,ce,Se,Be)}}gye(),ne=Fr;break}catch(Ge){l9(f,Ge)}while(!0);return p&&f.shellSuspendCounter++,su=Bh=null,Hn=E,L.H=I,L.A=D,bn===null&&(sr=null,Tn=0,$E()),ne}function gye(){for(;bn!==null;)f9(bn)}function yye(f,p){var y=Hn;Hn|=2;var E=u9(),I=d9();sr!==f||Tn!==p?(vS=null,xS=Tt()+500,I0(f,p)):N0=rn(f,p);e:do try{if(Yn!==0&&bn!==null){p=bn;var D=Do;t:switch(Yn){case 1:Yn=0,Do=null,R0(f,p,D,1);break;case 2:case 9:if(EU(D)){Yn=0,Do=null,h9(p);break}p=function(){Yn!==2&&Yn!==9||sr!==f||(Yn=7),nc(f)},D.then(p,p);break e;case 3:Yn=7;break e;case 4:Yn=5;break e;case 7:EU(D)?(Yn=0,Do=null,h9(p)):(Yn=0,Do=null,R0(f,p,D,7));break;case 5:var ne=null;switch(bn.tag){case 26:ne=bn.memoizedState;case 5:case 27:var ce=bn;if(ne?Q9(ne):ce.stateNode.complete){Yn=0,Do=null;var Se=ce.sibling;if(Se!==null)bn=Se;else{var Be=ce.return;Be!==null?(bn=Be,ES(Be)):bn=null}break t}}Yn=0,Do=null,R0(f,p,D,5);break;case 6:Yn=0,Do=null,R0(f,p,D,6);break;case 8:q_(),Fr=6;break e;default:throw Error(r(462))}}xye();break}catch(Ge){l9(f,Ge)}while(!0);return su=Bh=null,L.H=E,L.A=I,Hn=y,bn!==null?0:(sr=null,Tn=0,$E(),Fr)}function xye(){for(;bn!==null&&!Wt();)f9(bn)}function f9(f){var p=DF(f.alternate,f,mu);f.memoizedProps=f.pendingProps,p===null?ES(f):bn=p}function h9(f){var p=f,y=p.alternate;switch(p.tag){case 15:case 0:p=_F(y,p,p.pendingProps,p.type,void 0,Tn);break;case 11:p=_F(y,p,p.pendingProps,p.type.render,p.ref,Tn);break;case 5:a_(p);default:BF(y,p),p=bn=dU(p,mu),p=DF(y,p,mu)}f.memoizedProps=f.pendingProps,p===null?ES(f):bn=p}function R0(f,p,y,E){su=Bh=null,a_(p),w0=null,jv=0;var I=p.return;try{if(oye(f,I,p,y,Tn)){Fr=1,cS(f,pa(y,f.current)),bn=null;return}}catch(D){if(I!==null)throw bn=I,D;Fr=1,cS(f,pa(y,f.current)),bn=null;return}p.flags&32768?(Cn||E===1?f=!0:N0||(Tn&536870912)!==0?f=!1:(Xd=f=!0,(E===2||E===9||E===3||E===6)&&(E=Mo.current,E!==null&&E.tag===13&&(E.flags|=16384))),p9(p,f)):ES(p)}function ES(f){var p=f;do{if((p.flags&32768)!==0){p9(p,Xd);return}f=p.return;var y=cye(p.alternate,p,mu);if(y!==null){bn=y;return}if(p=p.sibling,p!==null){bn=p;return}bn=p=f}while(p!==null);Fr===0&&(Fr=5)}function p9(f,p){do{var y=uye(f.alternate,f);if(y!==null){y.flags&=32767,bn=y;return}if(y=f.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!p&&(f=f.sibling,f!==null)){bn=f;return}bn=f=y}while(f!==null);Fr=6,bn=null}function m9(f,p,y,E,I,D,ne,ce,Se){f.cancelPendingCommit=null;do SS();while(vi!==0);if((Hn&6)!==0)throw Error(r(327));if(p!==null){if(p===f.current)throw Error(r(177));if(D=p.lanes|p.childLanes,D|=MP,ee(f,y,D,ne,ce,Se),f===sr&&(bn=sr=null,Tn=0),_0=p,ef=f,gu=y,z_=D,H_=I,i9=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,Eye(gt,function(){return b9(),null})):(f.callbackNode=null,f.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=L.T,L.T=null,I=z.p,z.p=2,ne=Hn,Hn|=4;try{dye(f,p,y)}finally{Hn=ne,z.p=I,L.T=E}}vi=1,g9(),y9(),x9()}}function g9(){if(vi===1){vi=0;var f=ef,p=_0,y=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||y){y=L.T,L.T=null;var E=z.p;z.p=2;var I=Hn;Hn|=4;try{JF(p,f);var D=iI,ne=nU(f.containerInfo),ce=D.focusedElem,Se=D.selectionRange;if(ne!==ce&&ce&&ce.ownerDocument&&tU(ce.ownerDocument.documentElement,ce)){if(Se!==null&&PP(ce)){var Be=Se.start,Ge=Se.end;if(Ge===void 0&&(Ge=Be),"selectionStart"in ce)ce.selectionStart=Be,ce.selectionEnd=Math.min(Ge,ce.value.length);else{var Xe=ce.ownerDocument||document,Fe=Xe&&Xe.defaultView||window;if(Fe.getSelection){var He=Fe.getSelection(),Pt=ce.textContent.length,Kt=Math.min(Se.start,Pt),tr=Se.end===void 0?Kt:Math.min(Se.end,Pt);!He.extend&&Kt>tr&&(ne=tr,tr=Kt,Kt=ne);var _e=eU(ce,Kt),Ne=eU(ce,tr);if(_e&&Ne&&(He.rangeCount!==1||He.anchorNode!==_e.node||He.anchorOffset!==_e.offset||He.focusNode!==Ne.node||He.focusOffset!==Ne.offset)){var je=Xe.createRange();je.setStart(_e.node,_e.offset),He.removeAllRanges(),Kt>tr?(He.addRange(je),He.extend(Ne.node,Ne.offset)):(je.setEnd(Ne.node,Ne.offset),He.addRange(je))}}}}for(Xe=[],He=ce;He=He.parentNode;)He.nodeType===1&&Xe.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<Xe.length;ce++){var We=Xe[ce];We.element.scrollLeft=We.left,We.element.scrollTop=We.top}}LS=!!rI,iI=rI=null}finally{Hn=I,z.p=E,L.T=y}}f.current=p,vi=2}}function y9(){if(vi===2){vi=0;var f=ef,p=_0,y=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||y){y=L.T,L.T=null;var E=z.p;z.p=2;var I=Hn;Hn|=4;try{qF(f,p.alternate,p)}finally{Hn=I,z.p=E,L.T=y}}vi=3}}function x9(){if(vi===4||vi===3){vi=0,qe();var f=ef,p=_0,y=gu,E=i9;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?vi=5:(vi=0,_0=ef=null,v9(f,f.pendingLanes));var I=f.pendingLanes;if(I===0&&(Zd=null),Xt(y),p=p.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(de,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=L.T,I=z.p,z.p=2,L.T=null;try{for(var D=f.onRecoverableError,ne=0;ne<E.length;ne++){var ce=E[ne];D(ce.value,{componentStack:ce.stack})}}finally{L.T=p,z.p=I}}(gu&3)!==0&&SS(),nc(f),I=f.pendingLanes,(y&261930)!==0&&(I&42)!==0?f===V_?eb++:(eb=0,V_=f):eb=0,tb(0)}}function v9(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,Lv(p)))}function SS(){return g9(),y9(),x9(),b9()}function b9(){if(vi!==5)return!1;var f=ef,p=z_;z_=0;var y=Xt(gu),E=L.T,I=z.p;try{z.p=32>y?32:y,L.T=null,y=H_,H_=null;var D=ef,ne=gu;if(vi=0,_0=ef=null,gu=0,(Hn&6)!==0)throw Error(r(331));var ce=Hn;if(Hn|=4,t9(D.current),QF(D,D.current,ne,y),Hn=ce,tb(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(de,D)}catch{}return!0}finally{z.p=I,L.T=E,v9(f,p)}}function w9(f,p,y){p=pa(y,p),p=E_(f.stateNode,p,2),f=Kd(f,p,2),f!==null&&(Q(f,2),nc(f))}function Jn(f,p,y){if(f.tag===3)w9(f,f,y);else for(;p!==null;){if(p.tag===3){w9(p,f,y);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Zd===null||!Zd.has(E))){f=pa(y,f),y=EF(2),E=Kd(p,y,2),E!==null&&(SF(y,E,p,f),Q(E,2),nc(E));break}}p=p.return}}function K_(f,p,y){var E=f.pingCache;if(E===null){E=f.pingCache=new pye;var I=new Set;E.set(p,I)}else I=E.get(p),I===void 0&&(I=new Set,E.set(p,I));I.has(y)||(U_=!0,I.add(y),f=vye.bind(null,f,p,y),p.then(f,f))}function vye(f,p,y){var E=f.pingCache;E!==null&&E.delete(p),f.pingedLanes|=f.suspendedLanes&y,f.warmLanes&=~y,sr===f&&(Tn&y)===y&&(Fr===4||Fr===3&&(Tn&62914560)===Tn&&300>Tt()-yS?(Hn&2)===0&&I0(f,0):F_|=y,P0===Tn&&(P0=0)),nc(f)}function E9(f,p){p===0&&(p=zn()),f=Lh(f,p),f!==null&&(Q(f,p),nc(f))}function bye(f){var p=f.memoizedState,y=0;p!==null&&(y=p.retryLane),E9(f,y)}function wye(f,p){var y=0;switch(f.tag){case 31:case 13:var E=f.stateNode,I=f.memoizedState;I!==null&&(y=I.retryLane);break;case 19:E=f.stateNode;break;case 22:E=f.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(p),E9(f,y)}function Eye(f,p){return mt(f,p)}var AS=null,O0=null,W_=!1,TS=!1,Y_=!1,nf=0;function nc(f){f!==O0&&f.next===null&&(O0===null?AS=O0=f:O0=O0.next=f),TS=!0,W_||(W_=!0,Aye())}function tb(f,p){if(!Y_&&TS){Y_=!0;do for(var y=!1,E=AS;E!==null;){if(f!==0){var I=E.pendingLanes;if(I===0)var D=0;else{var ne=E.suspendedLanes,ce=E.pingedLanes;D=(1<<31-ge(42|f)+1)-1,D&=I&~(ne&~ce),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(y=!0,k9(E,D))}else D=Tn,D=en(E,E===sr?D:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(D&3)===0||rn(E,D)||(y=!0,k9(E,D));E=E.next}while(y);Y_=!1}}function Sye(){S9()}function S9(){TS=W_=!1;var f=0;nf!==0&&Mye()&&(f=nf);for(var p=Tt(),y=null,E=AS;E!==null;){var I=E.next,D=A9(E,p);D===0?(E.next=null,y===null?AS=I:y.next=I,I===null&&(O0=y)):(y=E,(f!==0||(D&3)!==0)&&(TS=!0)),E=I}vi!==0&&vi!==5||tb(f),nf!==0&&(nf=0)}function A9(f,p){for(var y=f.suspendedLanes,E=f.pingedLanes,I=f.expirationTimes,D=f.pendingLanes&-62914561;0<D;){var ne=31-ge(D),ce=1<<ne,Se=I[ne];Se===-1?((ce&y)===0||(ce&E)!==0)&&(I[ne]=Ni(ce,p)):Se<=p&&(f.expiredLanes|=ce),D&=~ce}if(p=sr,y=Tn,y=en(f,f===p?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E=f.callbackNode,y===0||f===p&&(Yn===2||Yn===9)||f.cancelPendingCommit!==null)return E!==null&&E!==null&&dt(E),f.callbackNode=null,f.callbackPriority=0;if((y&3)===0||rn(f,y)){if(p=y&-y,p===f.callbackPriority)return p;switch(E!==null&&dt(E),Xt(y)){case 2:case 8:y=Ve;break;case 32:y=gt;break;case 268435456:y=oe;break;default:y=gt}return E=T9.bind(null,f),y=mt(y,E),f.callbackPriority=p,f.callbackNode=y,p}return E!==null&&E!==null&&dt(E),f.callbackPriority=2,f.callbackNode=null,2}function T9(f,p){if(vi!==0&&vi!==5)return f.callbackNode=null,f.callbackPriority=0,null;var y=f.callbackNode;if(SS()&&f.callbackNode!==y)return null;var E=Tn;return E=en(f,f===sr?E:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E===0?null:(o9(f,E,p),A9(f,Tt()),f.callbackNode!=null&&f.callbackNode===y?T9.bind(null,f):null)}function k9(f,p){if(SS())return null;o9(f,p,!0)}function Aye(){Dye(function(){(Hn&6)!==0?mt(Ie,Sye):S9()})}function J_(){if(nf===0){var f=x0;f===0&&(f=Ft,Ft<<=1,(Ft&261888)===0&&(Ft=256)),nf=f}return nf}function C9(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:OE(""+f)}function N9(f,p){var y=p.ownerDocument.createElement("input");return y.name=p.name,y.value=p.value,f.id&&y.setAttribute("form",f.id),p.parentNode.insertBefore(y,p),f=new FormData(f),y.parentNode.removeChild(y),f}function Tye(f,p,y,E,I){if(p==="submit"&&y&&y.stateNode===I){var D=C9((I[vn]||null).action),ne=E.submitter;ne&&(p=(p=ne[vn]||null)?C9(p.formAction):ne.getAttribute("formAction"),p!==null&&(D=p,ne=null));var ce=new jE("action","action",null,E,I);f.push({event:ce,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(nf!==0){var Se=ne?N9(I,ne):new FormData(I);g_(y,{pending:!0,data:Se,method:I.method,action:D},null,Se)}}else typeof D=="function"&&(ce.preventDefault(),Se=ne?N9(I,ne):new FormData(I),g_(y,{pending:!0,data:Se,method:I.method,action:D},D,Se))},currentTarget:I}]})}}for(var X_=0;X_<OP.length;X_++){var Q_=OP[X_],kye=Q_.toLowerCase(),Cye=Q_[0].toUpperCase()+Q_.slice(1);ol(kye,"on"+Cye)}ol(sU,"onAnimationEnd"),ol(oU,"onAnimationIteration"),ol(aU,"onAnimationStart"),ol("dblclick","onDoubleClick"),ol("focusin","onFocus"),ol("focusout","onBlur"),ol(Hge,"onTransitionRun"),ol(Vge,"onTransitionStart"),ol(qge,"onTransitionCancel"),ol(lU,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nye=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nb));function P9(f,p){p=(p&4)!==0;for(var y=0;y<f.length;y++){var E=f[y],I=E.event;E=E.listeners;e:{var D=void 0;if(p)for(var ne=E.length-1;0<=ne;ne--){var ce=E[ne],Se=ce.instance,Be=ce.currentTarget;if(ce=ce.listener,Se!==D&&I.isPropagationStopped())break e;D=ce,I.currentTarget=Be;try{D(I)}catch(Ge){FE(Ge)}I.currentTarget=null,D=Se}else for(ne=0;ne<E.length;ne++){if(ce=E[ne],Se=ce.instance,Be=ce.currentTarget,ce=ce.listener,Se!==D&&I.isPropagationStopped())break e;D=ce,I.currentTarget=Be;try{D(I)}catch(Ge){FE(Ge)}I.currentTarget=null,D=Se}}}}function wn(f,p){var y=p[ur];y===void 0&&(y=p[ur]=new Set);var E=f+"__bubble";y.has(E)||(_9(p,f,2,!1),y.add(E))}function Z_(f,p,y){var E=0;p&&(E|=4),_9(y,f,E,p)}var kS="_reactListening"+Math.random().toString(36).slice(2);function eI(f){if(!f[kS]){f[kS]=!0,Zc.forEach(function(y){y!=="selectionchange"&&(Nye.has(y)||Z_(y,!1,f),Z_(y,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[kS]||(p[kS]=!0,Z_("selectionchange",!1,p))}}function _9(f,p,y,E){switch(s$(p)){case 2:var I=nxe;break;case 8:I=rxe;break;default:I=mI}y=I.bind(null,p,y,f),I=void 0,!bP||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(I=!0),E?I!==void 0?f.addEventListener(p,y,{capture:!0,passive:I}):f.addEventListener(p,y,!0):I!==void 0?f.addEventListener(p,y,{passive:I}):f.addEventListener(p,y,!1)}function tI(f,p,y,E,I){var D=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var ne=E.tag;if(ne===3||ne===4){var ce=E.stateNode.containerInfo;if(ce===I)break;if(ne===4)for(ne=E.return;ne!==null;){var Se=ne.tag;if((Se===3||Se===4)&&ne.stateNode.containerInfo===I)return;ne=ne.return}for(;ce!==null;){if(ne=Po(ce),ne===null)return;if(Se=ne.tag,Se===5||Se===6||Se===26||Se===27){E=D=ne;continue e}ce=ce.parentNode}}E=E.return}L7(function(){var Be=D,Ge=xP(y),Xe=[];e:{var Fe=cU.get(f);if(Fe!==void 0){var He=jE,Pt=f;switch(f){case"keypress":if(LE(y)===0)break e;case"keydown":case"keyup":He=wge;break;case"focusin":Pt="focus",He=AP;break;case"focusout":Pt="blur",He=AP;break;case"beforeblur":case"afterblur":He=AP;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=B7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=cge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=Age;break;case sU:case oU:case aU:He=fge;break;case lU:He=kge;break;case"scroll":case"scrollend":He=age;break;case"wheel":He=Nge;break;case"copy":case"cut":case"paste":He=pge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=F7;break;case"toggle":case"beforetoggle":He=_ge}var Kt=(p&4)!==0,tr=!Kt&&(f==="scroll"||f==="scrollend"),_e=Kt?Fe!==null?Fe+"Capture":null:Fe;Kt=[];for(var Ne=Be,je;Ne!==null;){var We=Ne;if(je=We.stateNode,We=We.tag,We!==5&&We!==26&&We!==27||je===null||_e===null||(We=Av(Ne,_e),We!=null&&Kt.push(rb(Ne,We,je))),tr)break;Ne=Ne.return}0<Kt.length&&(Fe=new He(Fe,Pt,null,y,Ge),Xe.push({event:Fe,listeners:Kt}))}}if((p&7)===0){e:{if(Fe=f==="mouseover"||f==="pointerover",He=f==="mouseout"||f==="pointerout",Fe&&y!==yP&&(Pt=y.relatedTarget||y.fromElement)&&(Po(Pt)||Pt[sl]))break e;if((He||Fe)&&(Fe=Ge.window===Ge?Ge:(Fe=Ge.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,He?(Pt=y.relatedTarget||y.toElement,He=Be,Pt=Pt?Po(Pt):null,Pt!==null&&(tr=s(Pt),Kt=Pt.tag,Pt!==tr||Kt!==5&&Kt!==27&&Kt!==6)&&(Pt=null)):(He=null,Pt=Be),He!==Pt)){if(Kt=B7,We="onMouseLeave",_e="onMouseEnter",Ne="mouse",(f==="pointerout"||f==="pointerover")&&(Kt=F7,We="onPointerLeave",_e="onPointerEnter",Ne="pointer"),tr=He==null?Fe:ua(He),je=Pt==null?Fe:ua(Pt),Fe=new Kt(We,Ne+"leave",He,y,Ge),Fe.target=tr,Fe.relatedTarget=je,We=null,Po(Ge)===Be&&(Kt=new Kt(_e,Ne+"enter",Pt,y,Ge),Kt.target=je,Kt.relatedTarget=tr,We=Kt),tr=We,He&&Pt)t:{for(Kt=Pye,_e=He,Ne=Pt,je=0,We=_e;We;We=Kt(We))je++;We=0;for(var Ut=Ne;Ut;Ut=Kt(Ut))We++;for(;0<je-We;)_e=Kt(_e),je--;for(;0<We-je;)Ne=Kt(Ne),We--;for(;je--;){if(_e===Ne||Ne!==null&&_e===Ne.alternate){Kt=_e;break t}_e=Kt(_e),Ne=Kt(Ne)}Kt=null}else Kt=null;He!==null&&I9(Xe,Fe,He,Kt,!1),Pt!==null&&tr!==null&&I9(Xe,tr,Pt,Kt,!0)}}e:{if(Fe=Be?ua(Be):window,He=Fe.nodeName&&Fe.nodeName.toLowerCase(),He==="select"||He==="input"&&Fe.type==="file")var Ln=W7;else if(G7(Fe))if(Y7)Ln=Fge;else{Ln=Bge;var Ot=jge}else He=Fe.nodeName,!He||He.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?Be&&gP(Be.elementType)&&(Ln=W7):Ln=Uge;if(Ln&&(Ln=Ln(f,Be))){K7(Xe,Ln,y,Ge);break e}Ot&&Ot(f,Fe,Be),f==="focusout"&&Be&&Fe.type==="number"&&Be.memoizedProps.value!=null&&mP(Fe,"number",Fe.value)}switch(Ot=Be?ua(Be):window,f){case"focusin":(G7(Ot)||Ot.contentEditable==="true")&&(u0=Ot,_P=Be,Rv=null);break;case"focusout":Rv=_P=u0=null;break;case"mousedown":IP=!0;break;case"contextmenu":case"mouseup":case"dragend":IP=!1,rU(Xe,y,Ge);break;case"selectionchange":if(zge)break;case"keydown":case"keyup":rU(Xe,y,Ge)}var un;if(kP)e:{switch(f){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else c0?V7(f,y)&&(kn="onCompositionEnd"):f==="keydown"&&y.keyCode===229&&(kn="onCompositionStart");kn&&($7&&y.locale!=="ko"&&(c0||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&c0&&(un=D7()):(Fd=Ge,wP="value"in Fd?Fd.value:Fd.textContent,c0=!0)),Ot=CS(Be,kn),0<Ot.length&&(kn=new U7(kn,f,null,y,Ge),Xe.push({event:kn,listeners:Ot}),un?kn.data=un:(un=q7(y),un!==null&&(kn.data=un)))),(un=Rge?Oge(f,y):Mge(f,y))&&(kn=CS(Be,"onBeforeInput"),0<kn.length&&(Ot=new U7("onBeforeInput","beforeinput",null,y,Ge),Xe.push({event:Ot,listeners:kn}),Ot.data=un)),Tye(Xe,f,Be,y,Ge)}P9(Xe,p)})}function rb(f,p,y){return{instance:f,listener:p,currentTarget:y}}function CS(f,p){for(var y=p+"Capture",E=[];f!==null;){var I=f,D=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||D===null||(I=Av(f,y),I!=null&&E.unshift(rb(f,I,D)),I=Av(f,p),I!=null&&E.push(rb(f,I,D))),f.tag===3)return E;f=f.return}return[]}function Pye(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function I9(f,p,y,E,I){for(var D=p._reactName,ne=[];y!==null&&y!==E;){var ce=y,Se=ce.alternate,Be=ce.stateNode;if(ce=ce.tag,Se!==null&&Se===E)break;ce!==5&&ce!==26&&ce!==27||Be===null||(Se=Be,I?(Be=Av(y,D),Be!=null&&ne.unshift(rb(y,Be,Se))):I||(Be=Av(y,D),Be!=null&&ne.push(rb(y,Be,Se)))),y=y.return}ne.length!==0&&f.push({event:p,listeners:ne})}var _ye=/\r\n?/g,Iye=/\u0000|\uFFFD/g;function R9(f){return(typeof f=="string"?f:""+f).replace(_ye,`
`).replace(Iye,"")}function O9(f,p){return p=R9(p),R9(f)===p}function er(f,p,y,E,I,D){switch(y){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||o0(f,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&o0(f,""+E);break;case"className":Ud(f,"class",E);break;case"tabIndex":Ud(f,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":Ud(f,y,E);break;case"style":O7(f,E,D);break;case"data":if(p!=="object"){Ud(f,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||y!=="href")){f.removeAttribute(y);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(y);break}E=OE(""+E),f.setAttribute(y,E);break;case"action":case"formAction":if(typeof E=="function"){f.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(y==="formAction"?(p!=="input"&&er(f,p,"name",I.name,I,null),er(f,p,"formEncType",I.formEncType,I,null),er(f,p,"formMethod",I.formMethod,I,null),er(f,p,"formTarget",I.formTarget,I,null)):(er(f,p,"encType",I.encType,I,null),er(f,p,"method",I.method,I,null),er(f,p,"target",I.target,I,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(y);break}E=OE(""+E),f.setAttribute(y,E);break;case"onClick":E!=null&&(f.onclick=tu);break;case"onScroll":E!=null&&wn("scroll",f);break;case"onScrollEnd":E!=null&&wn("scrollend",f);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(y=E.__html,y!=null){if(I.children!=null)throw Error(r(60));f.innerHTML=y}}break;case"multiple":f.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":f.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){f.removeAttribute("xlink:href");break}y=OE(""+E),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(y,""+E):f.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(y,""):f.removeAttribute(y);break;case"capture":case"download":E===!0?f.setAttribute(y,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(y,E):f.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?f.setAttribute(y,E):f.removeAttribute(y);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?f.removeAttribute(y):f.setAttribute(y,E);break;case"popover":wn("beforetoggle",f),wn("toggle",f),Bd(f,"popover",E);break;case"xlinkActuate":eu(f,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":eu(f,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":eu(f,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":eu(f,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":eu(f,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":eu(f,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":eu(f,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":eu(f,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":eu(f,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":Bd(f,"is",E);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=sge.get(y)||y,Bd(f,y,E))}}function nI(f,p,y,E,I,D){switch(y){case"style":O7(f,E,D);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(y=E.__html,y!=null){if(I.children!=null)throw Error(r(60));f.innerHTML=y}}break;case"children":typeof E=="string"?o0(f,E):(typeof E=="number"||typeof E=="bigint")&&o0(f,""+E);break;case"onScroll":E!=null&&wn("scroll",f);break;case"onScrollEnd":E!=null&&wn("scrollend",f);break;case"onClick":E!=null&&(f.onclick=tu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vr.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(I=y.endsWith("Capture"),p=y.slice(2,I?y.length-7:void 0),D=f[vn]||null,D=D!=null?D[y]:null,typeof D=="function"&&f.removeEventListener(p,D,I),typeof E=="function")){typeof D!="function"&&D!==null&&(y in f?f[y]=null:f.hasAttribute(y)&&f.removeAttribute(y)),f.addEventListener(p,E,I);break e}y in f?f[y]=E:E===!0?f.setAttribute(y,""):Bd(f,y,E)}}}function Yi(f,p,y){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",f),wn("load",f);var E=!1,I=!1,D;for(D in y)if(y.hasOwnProperty(D)){var ne=y[D];if(ne!=null)switch(D){case"src":E=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:er(f,p,D,ne,y,null)}}I&&er(f,p,"srcSet",y.srcSet,y,null),E&&er(f,p,"src",y.src,y,null);return;case"input":wn("invalid",f);var ce=D=ne=I=null,Se=null,Be=null;for(E in y)if(y.hasOwnProperty(E)){var Ge=y[E];if(Ge!=null)switch(E){case"name":I=Ge;break;case"type":ne=Ge;break;case"checked":Se=Ge;break;case"defaultChecked":Be=Ge;break;case"value":D=Ge;break;case"defaultValue":ce=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(137,p));break;default:er(f,p,E,Ge,y,null)}}P7(f,D,ce,Se,Be,ne,I,!1);return;case"select":wn("invalid",f),E=ne=D=null;for(I in y)if(y.hasOwnProperty(I)&&(ce=y[I],ce!=null))switch(I){case"value":D=ce;break;case"defaultValue":ne=ce;break;case"multiple":E=ce;default:er(f,p,I,ce,y,null)}p=D,y=ne,f.multiple=!!E,p!=null?s0(f,!!E,p,!1):y!=null&&s0(f,!!E,y,!0);return;case"textarea":wn("invalid",f),D=I=E=null;for(ne in y)if(y.hasOwnProperty(ne)&&(ce=y[ne],ce!=null))switch(ne){case"value":E=ce;break;case"defaultValue":I=ce;break;case"children":D=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(91));break;default:er(f,p,ne,ce,y,null)}I7(f,E,I,D);return;case"option":for(Se in y)if(y.hasOwnProperty(Se)&&(E=y[Se],E!=null))switch(Se){case"selected":f.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:er(f,p,Se,E,y,null)}return;case"dialog":wn("beforetoggle",f),wn("toggle",f),wn("cancel",f),wn("close",f);break;case"iframe":case"object":wn("load",f);break;case"video":case"audio":for(E=0;E<nb.length;E++)wn(nb[E],f);break;case"image":wn("error",f),wn("load",f);break;case"details":wn("toggle",f);break;case"embed":case"source":case"link":wn("error",f),wn("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Be in y)if(y.hasOwnProperty(Be)&&(E=y[Be],E!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:er(f,p,Be,E,y,null)}return;default:if(gP(p)){for(Ge in y)y.hasOwnProperty(Ge)&&(E=y[Ge],E!==void 0&&nI(f,p,Ge,E,y,void 0));return}}for(ce in y)y.hasOwnProperty(ce)&&(E=y[ce],E!=null&&er(f,p,ce,E,y,null))}function Rye(f,p,y,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,D=null,ne=null,ce=null,Se=null,Be=null,Ge=null;for(He in y){var Xe=y[He];if(y.hasOwnProperty(He)&&Xe!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":Se=Xe;default:E.hasOwnProperty(He)||er(f,p,He,null,E,Xe)}}for(var Fe in E){var He=E[Fe];if(Xe=y[Fe],E.hasOwnProperty(Fe)&&(He!=null||Xe!=null))switch(Fe){case"type":D=He;break;case"name":I=He;break;case"checked":Be=He;break;case"defaultChecked":Ge=He;break;case"value":ne=He;break;case"defaultValue":ce=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,p));break;default:He!==Xe&&er(f,p,Fe,He,E,Xe)}}pP(f,ne,ce,Se,Be,Ge,D,I);return;case"select":He=ne=ce=Fe=null;for(D in y)if(Se=y[D],y.hasOwnProperty(D)&&Se!=null)switch(D){case"value":break;case"multiple":He=Se;default:E.hasOwnProperty(D)||er(f,p,D,null,E,Se)}for(I in E)if(D=E[I],Se=y[I],E.hasOwnProperty(I)&&(D!=null||Se!=null))switch(I){case"value":Fe=D;break;case"defaultValue":ce=D;break;case"multiple":ne=D;default:D!==Se&&er(f,p,I,D,E,Se)}p=ce,y=ne,E=He,Fe!=null?s0(f,!!y,Fe,!1):!!E!=!!y&&(p!=null?s0(f,!!y,p,!0):s0(f,!!y,y?[]:"",!1));return;case"textarea":He=Fe=null;for(ce in y)if(I=y[ce],y.hasOwnProperty(ce)&&I!=null&&!E.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:er(f,p,ce,null,E,I)}for(ne in E)if(I=E[ne],D=y[ne],E.hasOwnProperty(ne)&&(I!=null||D!=null))switch(ne){case"value":Fe=I;break;case"defaultValue":He=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:I!==D&&er(f,p,ne,I,E,D)}_7(f,Fe,He);return;case"option":for(var Pt in y)if(Fe=y[Pt],y.hasOwnProperty(Pt)&&Fe!=null&&!E.hasOwnProperty(Pt))switch(Pt){case"selected":f.selected=!1;break;default:er(f,p,Pt,null,E,Fe)}for(Se in E)if(Fe=E[Se],He=y[Se],E.hasOwnProperty(Se)&&Fe!==He&&(Fe!=null||He!=null))switch(Se){case"selected":f.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:er(f,p,Se,Fe,E,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in y)Fe=y[Kt],y.hasOwnProperty(Kt)&&Fe!=null&&!E.hasOwnProperty(Kt)&&er(f,p,Kt,null,E,Fe);for(Be in E)if(Fe=E[Be],He=y[Be],E.hasOwnProperty(Be)&&Fe!==He&&(Fe!=null||He!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(r(137,p));break;default:er(f,p,Be,Fe,E,He)}return;default:if(gP(p)){for(var tr in y)Fe=y[tr],y.hasOwnProperty(tr)&&Fe!==void 0&&!E.hasOwnProperty(tr)&&nI(f,p,tr,void 0,E,Fe);for(Ge in E)Fe=E[Ge],He=y[Ge],!E.hasOwnProperty(Ge)||Fe===He||Fe===void 0&&He===void 0||nI(f,p,Ge,Fe,E,He);return}}for(var _e in y)Fe=y[_e],y.hasOwnProperty(_e)&&Fe!=null&&!E.hasOwnProperty(_e)&&er(f,p,_e,null,E,Fe);for(Xe in E)Fe=E[Xe],He=y[Xe],!E.hasOwnProperty(Xe)||Fe===He||Fe==null&&He==null||er(f,p,Xe,Fe,E,He)}function M9(f){switch(f){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Oye(){if(typeof performance.getEntriesByType=="function"){for(var f=0,p=0,y=performance.getEntriesByType("resource"),E=0;E<y.length;E++){var I=y[E],D=I.transferSize,ne=I.initiatorType,ce=I.duration;if(D&&ce&&M9(ne)){for(ne=0,ce=I.responseEnd,E+=1;E<y.length;E++){var Se=y[E],Be=Se.startTime;if(Be>ce)break;var Ge=Se.transferSize,Xe=Se.initiatorType;Ge&&M9(Xe)&&(Se=Se.responseEnd,ne+=Ge*(Se<ce?1:(ce-Be)/(Se-Be)))}if(--E,p+=8*(D+ne)/(I.duration/1e3),f++,10<f)break}}if(0<f)return p/f/1e6}return navigator.connection&&(f=navigator.connection.downlink,typeof f=="number")?f:5}var rI=null,iI=null;function NS(f){return f.nodeType===9?f:f.ownerDocument}function L9(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D9(f,p){if(f===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&p==="foreignObject"?0:f}function sI(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var oI=null;function Mye(){var f=window.event;return f&&f.type==="popstate"?f===oI?!1:(oI=f,!0):(oI=null,!1)}var j9=typeof setTimeout=="function"?setTimeout:void 0,Lye=typeof clearTimeout=="function"?clearTimeout:void 0,B9=typeof Promise=="function"?Promise:void 0,Dye=typeof queueMicrotask=="function"?queueMicrotask:typeof B9<"u"?function(f){return B9.resolve(null).then(f).catch(jye)}:j9;function jye(f){setTimeout(function(){throw f})}function rf(f){return f==="head"}function U9(f,p){var y=p,E=0;do{var I=y.nextSibling;if(f.removeChild(y),I&&I.nodeType===8)if(y=I.data,y==="/$"||y==="/&"){if(E===0){f.removeChild(I),j0(p);return}E--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")E++;else if(y==="html")ib(f.ownerDocument.documentElement);else if(y==="head"){y=f.ownerDocument.head,ib(y);for(var D=y.firstChild;D;){var ne=D.nextSibling,ce=D.nodeName;D[ca]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&D.rel.toLowerCase()==="stylesheet"||y.removeChild(D),D=ne}}else y==="body"&&ib(f.ownerDocument.body);y=I}while(y);j0(p)}function F9(f,p){var y=f;f=0;do{var E=y.nextSibling;if(y.nodeType===1?p?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(p?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),E&&E.nodeType===8)if(y=E.data,y==="/$"){if(f===0)break;f--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||f++;y=E}while(y)}function aI(f){var p=f.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var y=p;switch(p=p.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":aI(y),Ql(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}f.removeChild(y)}}function Bye(f,p,y,E){for(;f.nodeType===1;){var I=y;if(f.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(E){if(!f[ca])switch(p){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(D=f.getAttribute("rel"),D==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(D!==I.rel||f.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||f.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||f.getAttribute("title")!==(I.title==null?null:I.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(D=f.getAttribute("src"),(D!==(I.src==null?null:I.src)||f.getAttribute("type")!==(I.type==null?null:I.type)||f.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&D&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(p==="input"&&f.type==="hidden"){var D=I.name==null?null:""+I.name;if(I.type==="hidden"&&f.getAttribute("name")===D)return f}else return f;if(f=va(f.nextSibling),f===null)break}return null}function Uye(f,p,y){if(p==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!y||(f=va(f.nextSibling),f===null))return null;return f}function $9(f,p){for(;f.nodeType!==8;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!p||(f=va(f.nextSibling),f===null))return null;return f}function lI(f){return f.data==="$?"||f.data==="$~"}function cI(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState!=="loading"}function Fye(f,p){var y=f.ownerDocument;if(f.data==="$~")f._reactRetry=p;else if(f.data!=="$?"||y.readyState!=="loading")p();else{var E=function(){p(),y.removeEventListener("DOMContentLoaded",E)};y.addEventListener("DOMContentLoaded",E),f._reactRetry=E}}function va(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return f}var uI=null;function z9(f){f=f.nextSibling;for(var p=0;f;){if(f.nodeType===8){var y=f.data;if(y==="/$"||y==="/&"){if(p===0)return va(f.nextSibling);p--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||p++}f=f.nextSibling}return null}function H9(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var y=f.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(p===0)return f;p--}else y!=="/$"&&y!=="/&"||p++}f=f.previousSibling}return null}function V9(f,p,y){switch(p=NS(y),f){case"html":if(f=p.documentElement,!f)throw Error(r(452));return f;case"head":if(f=p.head,!f)throw Error(r(453));return f;case"body":if(f=p.body,!f)throw Error(r(454));return f;default:throw Error(r(451))}}function ib(f){for(var p=f.attributes;p.length;)f.removeAttributeNode(p[0]);Ql(f)}var ba=new Map,q9=new Set;function PS(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var yu=z.d;z.d={f:$ye,r:zye,D:Hye,C:Vye,L:qye,m:Gye,X:Wye,S:Kye,M:Yye};function $ye(){var f=yu.f(),p=bS();return f||p}function zye(f){var p=_o(f);p!==null&&p.tag===5&&p.type==="form"?lF(p):yu.r(f)}var M0=typeof document>"u"?null:document;function G9(f,p,y){var E=M0;if(E&&typeof p=="string"&&p){var I=fa(p);I='link[rel="'+f+'"][href="'+I+'"]',typeof y=="string"&&(I+='[crossorigin="'+y+'"]'),q9.has(I)||(q9.add(I),f={rel:f,crossOrigin:y,href:p},E.querySelector(I)===null&&(p=E.createElement("link"),Yi(p,"link",f),xr(p),E.head.appendChild(p)))}}function Hye(f){yu.D(f),G9("dns-prefetch",f,null)}function Vye(f,p){yu.C(f,p),G9("preconnect",f,p)}function qye(f,p,y){yu.L(f,p,y);var E=M0;if(E&&f&&p){var I='link[rel="preload"][as="'+fa(p)+'"]';p==="image"&&y&&y.imageSrcSet?(I+='[imagesrcset="'+fa(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(I+='[imagesizes="'+fa(y.imageSizes)+'"]')):I+='[href="'+fa(f)+'"]';var D=I;switch(p){case"style":D=L0(f);break;case"script":D=D0(f)}ba.has(D)||(f=h({rel:"preload",href:p==="image"&&y&&y.imageSrcSet?void 0:f,as:p},y),ba.set(D,f),E.querySelector(I)!==null||p==="style"&&E.querySelector(sb(D))||p==="script"&&E.querySelector(ob(D))||(p=E.createElement("link"),Yi(p,"link",f),xr(p),E.head.appendChild(p)))}}function Gye(f,p){yu.m(f,p);var y=M0;if(y&&f){var E=p&&typeof p.as=="string"?p.as:"script",I='link[rel="modulepreload"][as="'+fa(E)+'"][href="'+fa(f)+'"]',D=I;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=D0(f)}if(!ba.has(D)&&(f=h({rel:"modulepreload",href:f},p),ba.set(D,f),y.querySelector(I)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(ob(D)))return}E=y.createElement("link"),Yi(E,"link",f),xr(E),y.head.appendChild(E)}}}function Kye(f,p,y){yu.S(f,p,y);var E=M0;if(E&&f){var I=Io(E).hoistableStyles,D=L0(f);p=p||"default";var ne=I.get(D);if(!ne){var ce={loading:0,preload:null};if(ne=E.querySelector(sb(D)))ce.loading=5;else{f=h({rel:"stylesheet",href:f,"data-precedence":p},y),(y=ba.get(D))&&dI(f,y);var Se=ne=E.createElement("link");xr(Se),Yi(Se,"link",f),Se._p=new Promise(function(Be,Ge){Se.onload=Be,Se.onerror=Ge}),Se.addEventListener("load",function(){ce.loading|=1}),Se.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,_S(ne,p,E)}ne={type:"stylesheet",instance:ne,count:1,state:ce},I.set(D,ne)}}}function Wye(f,p){yu.X(f,p);var y=M0;if(y&&f){var E=Io(y).hoistableScripts,I=D0(f),D=E.get(I);D||(D=y.querySelector(ob(I)),D||(f=h({src:f,async:!0},p),(p=ba.get(I))&&fI(f,p),D=y.createElement("script"),xr(D),Yi(D,"link",f),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},E.set(I,D))}}function Yye(f,p){yu.M(f,p);var y=M0;if(y&&f){var E=Io(y).hoistableScripts,I=D0(f),D=E.get(I);D||(D=y.querySelector(ob(I)),D||(f=h({src:f,async:!0,type:"module"},p),(p=ba.get(I))&&fI(f,p),D=y.createElement("script"),xr(D),Yi(D,"link",f),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},E.set(I,D))}}function K9(f,p,y,E){var I=(I=re.current)?PS(I):null;if(!I)throw Error(r(446));switch(f){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(p=L0(y.href),y=Io(I).hoistableStyles,E=y.get(p),E||(E={type:"style",instance:null,count:0,state:null},y.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){f=L0(y.href);var D=Io(I).hoistableStyles,ne=D.get(f);if(ne||(I=I.ownerDocument||I,ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(f,ne),(D=I.querySelector(sb(f)))&&!D._p&&(ne.instance=D,ne.state.loading=5),ba.has(f)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},ba.set(f,y),D||Jye(I,f,y,ne.state))),p&&E===null)throw Error(r(528,""));return ne}if(p&&E!==null)throw Error(r(529,""));return null;case"script":return p=y.async,y=y.src,typeof y=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=D0(y),y=Io(I).hoistableScripts,E=y.get(p),E||(E={type:"script",instance:null,count:0,state:null},y.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,f))}}function L0(f){return'href="'+fa(f)+'"'}function sb(f){return'link[rel="stylesheet"]['+f+"]"}function W9(f){return h({},f,{"data-precedence":f.precedence,precedence:null})}function Jye(f,p,y,E){f.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=f.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),Yi(p,"link",y),xr(p),f.head.appendChild(p))}function D0(f){return'[src="'+fa(f)+'"]'}function ob(f){return"script[async]"+f}function Y9(f,p,y){if(p.count++,p.instance===null)switch(p.type){case"style":var E=f.querySelector('style[data-href~="'+fa(y.href)+'"]');if(E)return p.instance=E,xr(E),E;var I=h({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return E=(f.ownerDocument||f).createElement("style"),xr(E),Yi(E,"style",I),_S(E,y.precedence,f),p.instance=E;case"stylesheet":I=L0(y.href);var D=f.querySelector(sb(I));if(D)return p.state.loading|=4,p.instance=D,xr(D),D;E=W9(y),(I=ba.get(I))&&dI(E,I),D=(f.ownerDocument||f).createElement("link"),xr(D);var ne=D;return ne._p=new Promise(function(ce,Se){ne.onload=ce,ne.onerror=Se}),Yi(D,"link",E),p.state.loading|=4,_S(D,y.precedence,f),p.instance=D;case"script":return D=D0(y.src),(I=f.querySelector(ob(D)))?(p.instance=I,xr(I),I):(E=y,(I=ba.get(D))&&(E=h({},y),fI(E,I)),f=f.ownerDocument||f,I=f.createElement("script"),xr(I),Yi(I,"link",E),f.head.appendChild(I),p.instance=I);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,_S(E,y.precedence,f));return p.instance}function _S(f,p,y){for(var E=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=E.length?E[E.length-1]:null,D=I,ne=0;ne<E.length;ne++){var ce=E[ne];if(ce.dataset.precedence===p)D=ce;else if(D!==I)break}D?D.parentNode.insertBefore(f,D.nextSibling):(p=y.nodeType===9?y.head:y,p.insertBefore(f,p.firstChild))}function dI(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.title==null&&(f.title=p.title)}function fI(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.integrity==null&&(f.integrity=p.integrity)}var IS=null;function J9(f,p,y){if(IS===null){var E=new Map,I=IS=new Map;I.set(y,E)}else I=IS,E=I.get(y),E||(E=new Map,I.set(y,E));if(E.has(f))return E;for(E.set(f,null),y=y.getElementsByTagName(f),I=0;I<y.length;I++){var D=y[I];if(!(D[ca]||D[bt]||f==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var ne=D.getAttribute(p)||"";ne=f+ne;var ce=E.get(ne);ce?ce.push(D):E.set(ne,[D])}}return E}function X9(f,p,y){f=f.ownerDocument||f,f.head.insertBefore(y,p==="title"?f.querySelector("head > title"):null)}function Xye(f,p,y){if(y===1||p.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return f=p.disabled,typeof p.precedence=="string"&&f==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function Q9(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}function Qye(f,p,y,E){if(y.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var I=L0(E.href),D=p.querySelector(sb(I));if(D){p=D._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(f.count++,f=RS.bind(f),p.then(f,f)),y.state.loading|=4,y.instance=D,xr(D);return}D=p.ownerDocument||p,E=W9(E),(I=ba.get(I))&&dI(E,I),D=D.createElement("link"),xr(D);var ne=D;ne._p=new Promise(function(ce,Se){ne.onload=ce,ne.onerror=Se}),Yi(D,"link",E),y.instance=D}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(y,p),(p=y.state.preload)&&(y.state.loading&3)===0&&(f.count++,y=RS.bind(f),p.addEventListener("load",y),p.addEventListener("error",y))}}var hI=0;function Zye(f,p){return f.stylesheets&&f.count===0&&MS(f,f.stylesheets),0<f.count||0<f.imgCount?function(y){var E=setTimeout(function(){if(f.stylesheets&&MS(f,f.stylesheets),f.unsuspend){var D=f.unsuspend;f.unsuspend=null,D()}},6e4+p);0<f.imgBytes&&hI===0&&(hI=62500*Oye());var I=setTimeout(function(){if(f.waitingForImages=!1,f.count===0&&(f.stylesheets&&MS(f,f.stylesheets),f.unsuspend)){var D=f.unsuspend;f.unsuspend=null,D()}},(f.imgBytes>hI?50:800)+p);return f.unsuspend=y,function(){f.unsuspend=null,clearTimeout(E),clearTimeout(I)}}:null}function RS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)MS(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var OS=null;function MS(f,p){f.stylesheets=null,f.unsuspend!==null&&(f.count++,OS=new Map,p.forEach(exe,f),OS=null,RS.call(f))}function exe(f,p){if(!(p.state.loading&4)){var y=OS.get(f);if(y)var E=y.get(null);else{y=new Map,OS.set(f,y);for(var I=f.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<I.length;D++){var ne=I[D];(ne.nodeName==="LINK"||ne.getAttribute("media")!=="not all")&&(y.set(ne.dataset.precedence,ne),E=ne)}E&&y.set(null,E)}I=p.instance,ne=I.getAttribute("data-precedence"),D=y.get(ne)||E,D===E&&y.set(null,I),y.set(ne,I),this.count++,E=RS.bind(this),I.addEventListener("load",E),I.addEventListener("error",E),D?D.parentNode.insertBefore(I,D.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(I,f.firstChild)),p.state.loading|=4}}var ab={$$typeof:C,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function txe(f,p,y,E,I,D,ne,ce,Se){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.hiddenUpdates=le(null),this.identifierPrefix=E,this.onUncaughtError=I,this.onCaughtError=D,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function Z9(f,p,y,E,I,D,ne,ce,Se,Be,Ge,Xe){return f=new txe(f,p,y,ne,Se,Be,Ge,Xe,ce),p=1,D===!0&&(p|=24),D=Oo(3,null,null,p),f.current=D,D.stateNode=f,p=GP(),p.refCount++,f.pooledCache=p,p.refCount++,D.memoizedState={element:E,isDehydrated:y,cache:p},JP(D),f}function e$(f){return f?(f=h0,f):h0}function t$(f,p,y,E,I,D){I=e$(I),E.context===null?E.context=I:E.pendingContext=I,E=Gd(p),E.payload={element:y},D=D===void 0?null:D,D!==null&&(E.callback=D),y=Kd(f,E,p),y!==null&&(po(y,f,p),Uv(y,f,p))}function n$(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var y=f.retryLane;f.retryLane=y!==0&&y<p?y:p}}function pI(f,p){n$(f,p),(f=f.alternate)&&n$(f,p)}function r$(f){if(f.tag===13||f.tag===31){var p=Lh(f,67108864);p!==null&&po(p,f,67108864),pI(f,67108864)}}function i$(f){if(f.tag===13||f.tag===31){var p=Bo();p=ze(p);var y=Lh(f,p);y!==null&&po(y,f,p),pI(f,p)}}var LS=!0;function nxe(f,p,y,E){var I=L.T;L.T=null;var D=z.p;try{z.p=2,mI(f,p,y,E)}finally{z.p=D,L.T=I}}function rxe(f,p,y,E){var I=L.T;L.T=null;var D=z.p;try{z.p=8,mI(f,p,y,E)}finally{z.p=D,L.T=I}}function mI(f,p,y,E){if(LS){var I=gI(E);if(I===null)tI(f,p,E,DS,y),o$(f,E);else if(sxe(I,f,p,y,E))E.stopPropagation();else if(o$(f,E),p&4&&-1<ixe.indexOf(f)){for(;I!==null;){var D=_o(I);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var ne=cn(D.pendingLanes);if(ne!==0){var ce=D;for(ce.pendingLanes|=2,ce.entangledLanes|=2;ne;){var Se=1<<31-ge(ne);ce.entanglements[1]|=Se,ne&=~Se}nc(D),(Hn&6)===0&&(xS=Tt()+500,tb(0))}}break;case 31:case 13:ce=Lh(D,2),ce!==null&&po(ce,D,2),bS(),pI(D,2)}if(D=gI(E),D===null&&tI(f,p,E,DS,y),D===I)break;I=D}I!==null&&E.stopPropagation()}else tI(f,p,E,null,y)}}function gI(f){return f=xP(f),yI(f)}var DS=null;function yI(f){if(DS=null,f=Po(f),f!==null){var p=s(f);if(p===null)f=null;else{var y=p.tag;if(y===13){if(f=o(p),f!==null)return f;f=null}else if(y===31){if(f=a(p),f!==null)return f;f=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null)}}return DS=f,null}function s$(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ln()){case Ie:return 2;case Ve:return 8;case gt:case ut:return 32;case oe:return 268435456;default:return 32}default:return 32}}var xI=!1,sf=null,of=null,af=null,lb=new Map,cb=new Map,lf=[],ixe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o$(f,p){switch(f){case"focusin":case"focusout":sf=null;break;case"dragenter":case"dragleave":of=null;break;case"mouseover":case"mouseout":af=null;break;case"pointerover":case"pointerout":lb.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":cb.delete(p.pointerId)}}function ub(f,p,y,E,I,D){return f===null||f.nativeEvent!==D?(f={blockedOn:p,domEventName:y,eventSystemFlags:E,nativeEvent:D,targetContainers:[I]},p!==null&&(p=_o(p),p!==null&&r$(p)),f):(f.eventSystemFlags|=E,p=f.targetContainers,I!==null&&p.indexOf(I)===-1&&p.push(I),f)}function sxe(f,p,y,E,I){switch(p){case"focusin":return sf=ub(sf,f,p,y,E,I),!0;case"dragenter":return of=ub(of,f,p,y,E,I),!0;case"mouseover":return af=ub(af,f,p,y,E,I),!0;case"pointerover":var D=I.pointerId;return lb.set(D,ub(lb.get(D)||null,f,p,y,E,I)),!0;case"gotpointercapture":return D=I.pointerId,cb.set(D,ub(cb.get(D)||null,f,p,y,E,I)),!0}return!1}function a$(f){var p=Po(f.target);if(p!==null){var y=s(p);if(y!==null){if(p=y.tag,p===13){if(p=o(y),p!==null){f.blockedOn=p,st(f.priority,function(){i$(y)});return}}else if(p===31){if(p=a(y),p!==null){f.blockedOn=p,st(f.priority,function(){i$(y)});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){f.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}f.blockedOn=null}function jS(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var y=gI(f.nativeEvent);if(y===null){y=f.nativeEvent;var E=new y.constructor(y.type,y);yP=E,y.target.dispatchEvent(E),yP=null}else return p=_o(y),p!==null&&r$(p),f.blockedOn=y,!1;p.shift()}return!0}function l$(f,p,y){jS(f)&&y.delete(p)}function oxe(){xI=!1,sf!==null&&jS(sf)&&(sf=null),of!==null&&jS(of)&&(of=null),af!==null&&jS(af)&&(af=null),lb.forEach(l$),cb.forEach(l$)}function BS(f,p){f.blockedOn===p&&(f.blockedOn=null,xI||(xI=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oxe)))}var US=null;function c$(f){US!==f&&(US=f,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){US===f&&(US=null);for(var p=0;p<f.length;p+=3){var y=f[p],E=f[p+1],I=f[p+2];if(typeof E!="function"){if(yI(E||y)===null)continue;break}var D=_o(y);D!==null&&(f.splice(p,3),p-=3,g_(D,{pending:!0,data:I,method:y.method,action:E},E,I))}}))}function j0(f){function p(Se){return BS(Se,f)}sf!==null&&BS(sf,f),of!==null&&BS(of,f),af!==null&&BS(af,f),lb.forEach(p),cb.forEach(p);for(var y=0;y<lf.length;y++){var E=lf[y];E.blockedOn===f&&(E.blockedOn=null)}for(;0<lf.length&&(y=lf[0],y.blockedOn===null);)a$(y),y.blockedOn===null&&lf.shift();if(y=(f.ownerDocument||f).$$reactFormReplay,y!=null)for(E=0;E<y.length;E+=3){var I=y[E],D=y[E+1],ne=I[vn]||null;if(typeof D=="function")ne||c$(y);else if(ne){var ce=null;if(D&&D.hasAttribute("formAction")){if(I=D,ne=D[vn]||null)ce=ne.formAction;else if(yI(I)!==null)continue}else ce=ne.action;typeof ce=="function"?y[E+1]=ce:(y.splice(E,3),E-=3),c$(y)}}}function u$(){function f(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(ne){return I=ne})},focusReset:"manual",scroll:"manual"})}function p(){I!==null&&(I(),I=null),E||setTimeout(y,20)}function y(){if(!E&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,I=null;return navigation.addEventListener("navigate",f),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(y,100),function(){E=!0,navigation.removeEventListener("navigate",f),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),I!==null&&(I(),I=null)}}}function vI(f){this._internalRoot=f}FS.prototype.render=vI.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(r(409));var y=p.current,E=Bo();t$(y,E,f,p,null,null)},FS.prototype.unmount=vI.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;t$(f.current,2,null,f,null,null),bS(),p[sl]=null}};function FS(f){this._internalRoot=f}FS.prototype.unstable_scheduleHydration=function(f){if(f){var p=$t();f={blockedOn:null,target:f,priority:p};for(var y=0;y<lf.length&&p!==0&&p<lf[y].priority;y++);lf.splice(y,0,f),y===0&&a$(f)}};var d$=e.version;if(d$!=="19.2.3")throw Error(r(527,d$,"19.2.3"));z.findDOMNode=function(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=c(p),f=f!==null?u(f):null,f=f===null?null:f.stateNode,f};var axe={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$S.isDisabled&&$S.supportsFiber)try{de=$S.inject(axe),Ae=$S}catch{}}return hb.createRoot=function(f,p){if(!i(f))throw Error(r(299));var y=!1,E="",I=xF,D=vF,ne=bF;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(I=p.onUncaughtError),p.onCaughtError!==void 0&&(D=p.onCaughtError),p.onRecoverableError!==void 0&&(ne=p.onRecoverableError)),p=Z9(f,1,!1,null,null,y,E,null,I,D,ne,u$),f[sl]=p.current,eI(f),new vI(p)},hb.hydrateRoot=function(f,p,y){if(!i(f))throw Error(r(299));var E=!1,I="",D=xF,ne=vF,ce=bF,Se=null;return y!=null&&(y.unstable_strictMode===!0&&(E=!0),y.identifierPrefix!==void 0&&(I=y.identifierPrefix),y.onUncaughtError!==void 0&&(D=y.onUncaughtError),y.onCaughtError!==void 0&&(ne=y.onCaughtError),y.onRecoverableError!==void 0&&(ce=y.onRecoverableError),y.formState!==void 0&&(Se=y.formState)),p=Z9(f,1,!0,p,y??null,E,I,Se,D,ne,ce,u$),p.context=e$(null),y=p.current,E=Bo(),E=ze(E),I=Gd(E),I.callback=null,Kd(y,I,E),y=E,p.current.lanes=y,Q(p,y),nc(p),f[sl]=p.current,eI(f),new FS(p)},hb.version="19.2.3",hb}var E$;function Ixe(){if(E$)return AI.exports;E$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),AI.exports=_xe(),AI.exports}var Rxe=Ixe();const Oxe=hs(Rxe),Mxe="modulepreload",Lxe=function(t){return"/"+t},S$={},Tl=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(n.map(c=>{if(c=Lxe(c),c in S$)return;S$[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Mxe,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((g,x)=>{m.addEventListener("load",g),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var Sc=function(){return Sc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sc.apply(this,arguments)};function Bx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Dxe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function jxe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}const Bxe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class PD extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Uxe extends PD{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class A$ extends PD{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class T$ extends PD{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Q4;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Q4||(Q4={}));class Fxe{constructor(e,{headers:n={},customFetch:r,region:i=Q4.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Bxe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Dxe(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:u,timeout:h}=r;let m={},{region:g}=r;g||(g=this.region);const x=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,x.searchParams.set("forceFunctionRegion",g));let v;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(m["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(m["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let b=u;h&&(o=new AbortController,s=setTimeout(()=>o.abort(),h),u?(b=o.signal,u.addEventListener("abort",()=>o.abort())):b=o.signal);const w=yield this.fetch(x.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:v,signal:b}).catch(B=>{throw new Uxe(B)}),k=w.headers.get("x-relay-error");if(k&&k==="true")throw new A$(w);if(!w.ok)throw new T$(w);let C=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),R;return C==="application/json"?R=yield w.json():C==="application/octet-stream"||C==="application/pdf"?R=yield w.blob():C==="text/event-stream"?R=w:C==="multipart/form-data"?R=yield w.formData():R=yield w.text(),{data:R,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof T$||a instanceof A$?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var $xe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},zxe=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,c=s.status,u=s.statusText;if(s.ok){var h,m;if(n.method!=="HEAD"){var g;const w=await s.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?a=w:a=JSON.parse(w))}const v=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(m=s.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");v&&b&&b.length>1&&(l=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var x;const v=await s.text();try{o=JSON.parse(v),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,u="OK")}catch{s.status===404&&v===""?(c=204,u="No Content"):o={message:v}}if(o&&n.isMaybeSingle&&(!(o==null||(x=o.details)===null||x===void 0)&&x.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new $xe(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="";const l=s==null?void 0:s.cause;if(l){var c,u,h,m;const x=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",v=(u=l==null?void 0:l.code)!==null&&u!==void 0?u:"";a=`${(h=s==null?void 0:s.name)!==null&&h!==void 0?h:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(m=l==null?void 0:l.name)!==null&&m!==void 0?m:"Error"}: ${x}`,v&&(a+=` (${v})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var g;a=(g=s==null?void 0:s.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},Hxe=class extends zxe{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const k$=new RegExp("[,()]");var mg=class extends Hxe{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&k$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&k$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Vxe=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new mg({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(s.length>0){const o=[...new Set(s)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new mg({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new mg({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new mg({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new mg({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},qxe=class Lee{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Vxe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Lee(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{l.searchParams.append(h,m)})):(a="POST",c=n);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new mg({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Gxe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof Ml<"u"){const n=Ml.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Kxe="2.89.0",Wxe=`realtime-js/${Kxe}`,Dee="1.0.0",Yxe="2.0.0",C$=Dee,Z4=1e4,Jxe=1e3,Xxe=100;var Cf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Cf||(Cf={}));var wi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wi||(wi={}));var Al;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Al||(Al={}));var e3;(function(t){t.websocket="websocket"})(e3||(e3={}));var hp;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(hp||(hp={}));class Qxe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let x=new DataView(g),v=0;x.setUint8(v++,this.KINDS.userBroadcastPush),x.setUint8(v++,l.length),x.setUint8(v++,a.length),x.setUint8(v++,o.length),x.setUint8(v++,c.length),x.setUint8(v++,h.length),x.setUint8(v++,n),Array.from(l,w=>x.setUint8(v++,w.charCodeAt(0))),Array.from(a,w=>x.setUint8(v++,w.charCodeAt(0))),Array.from(o,w=>x.setUint8(v++,w.charCodeAt(0))),Array.from(c,w=>x.setUint8(v++,w.charCodeAt(0))),Array.from(h,w=>x.setUint8(v++,w.charCodeAt(0)));var b=new Uint8Array(g.byteLength+r.byteLength);return b.set(new Uint8Array(g),0),b.set(new Uint8Array(r),g.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const u=r.decode(e.slice(l,l+s));l=l+s;const h=r.decode(e.slice(l,l+o));l=l+o;const m=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,x={type:this.BROADCAST_EVENT,event:u,payload:g};return o>0&&(x.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class jee{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var fr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(fr||(fr={}));const N$=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=Zxe(o,t,e,i),s),{}):{}},Zxe=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?Bee(s,o):t3(o)},Bee=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return rve(e,n)}switch(t){case fr.bool:return eve(e);case fr.float4:case fr.float8:case fr.int2:case fr.int4:case fr.int8:case fr.numeric:case fr.oid:return tve(e);case fr.json:case fr.jsonb:return nve(e);case fr.timestamp:return ive(e);case fr.abstime:case fr.date:case fr.daterange:case fr.int4range:case fr.int8range:case fr.money:case fr.reltime:case fr.text:case fr.time:case fr.timestamptz:case fr.timetz:case fr.tsrange:case fr.tstzrange:return t3(e);default:return t3(e)}},t3=t=>t,eve=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},tve=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},nve=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},rve=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Bee(e,a))}return t},ive=t=>typeof t=="string"?t.replace(" ","T"):t,Uee=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class NI{constructor(e,n,r={},i=Z4){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var P$;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(P$||(P$={}));class tw{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tw.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=tw.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=tw.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const m=u.map(b=>b.presence_ref),g=h.map(b=>b.presence_ref),x=u.filter(b=>g.indexOf(b.presence_ref)<0),v=h.filter(b=>m.indexOf(b.presence_ref)<0);x.length>0&&(a[c]=x),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(g=>g.presence_ref),m=u.filter(g=>h.indexOf(g.presence_ref)<0);e[a].unshift(...m)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _$;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(_$||(_$={}));var nw;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(nw||(nw={}));var ku;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ku||(ku={}));class kg{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=wi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new NI(this,Al.join,this.params,this.timeout),this.rejoinTimer=new jee(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wi.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=wi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=wi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Al.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new tw(this),this.broadcastEndpointURL=Uee(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==wi.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[nw.PRESENCE]&&this.bindings[nw.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(ku.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(ku.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(ku.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(x=v==null?void 0:v.length)!==null&&x!==void 0?x:0,w=[];for(let k=0;k<b;k++){const C=v[k],{filter:{event:R,schema:B,table:O,filter:F}}=C,H=g&&g[k];if(H&&H.event===R&&kg.isFilterValueEqual(H.schema,B)&&kg.isFilterValueEqual(H.table,O)&&kg.isFilterValueEqual(H.filter,F))w.push(Object.assign(Object.assign({},C),{id:H.id}));else{this.unsubscribe(),this.state=wi.errored,e==null||e(ku.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(ku.SUBSCRIBED);return}}).receive("error",g=>{this.state=wi.errored,e==null||e(ku.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ku.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===wi.joined&&e===nw.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Al.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new NI(this,Al.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wi.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new NI(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Xxe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Al;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var x,v,b;return((x=g.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(v=g.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var x,v,b,w,k,C;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const R=g.id,B=(x=g.filter)===null||x===void 0?void 0:x.event;return R&&((v=n.ids)===null||v===void 0?void 0:v.includes(R))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const R=(k=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return R==="*"||R===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:v,table:b,commit_timestamp:w,type:k,errors:C}=x;m=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:w,eventType:k,new:{},old:{},errors:C}),this._getPayloadRecords(x))}g.callback(m,r)})}_isClosed(){return this.state===wi.closed}_isJoined(){return this.state===wi.joined}_isJoining(){return this.state===wi.joining}_isLeaving(){return this.state===wi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&kg.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Al.close,{},e)}_onError(e){this._on(Al.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=N$(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=N$(e.columns,e.old_record)),n}}const PI=()=>{},zS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sve=[1e3,2e3,5e3,1e4],ove=1e4,ave=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lve{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Z4,this.transport=null,this.heartbeatIntervalMs=zS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=PI,this.ref=0,this.reconnectTimer=null,this.vsn=C$,this.logger=PI,this.conn=null,this.sendBuffer=[],this.serializer=new Qxe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${e3.websocket}`,this.httpEndpoint=Uee(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gxe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Cf.connecting:return hp.Connecting;case Cf.open:return hp.Open;case Cf.closing:return hp.Closing;default:return hp.Closed}}isConnected(){return this.connectionState()===hp.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new kg(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Jxe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},zS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Cf.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Cf.open||this.conn.readyState===Cf.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Al.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([ave],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:Wxe};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Al.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new jee(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,u,h,m,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Z4,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:zS.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:PI,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:C$,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(x=>sve[x-1]||ove),this.vsn){case Dee:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:((x,v)=>v(JSON.stringify(x))),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:((x,v)=>v(JSON.parse(x)));break;case Yxe:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var gw=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function cve(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function uve(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function dve(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=cve(t.baseUrl,r,i),l=await uve(t.auth),c=await e(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),u=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),m=h&&u?JSON.parse(u):u;if(!c.ok){const g=h?m:void 0,x=g==null?void 0:g.error;throw new gw((x==null?void 0:x.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:g})}return{status:c.status,headers:c.headers,data:m}}}}function HS(t){return t.join("")}var fve=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:HS(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${HS(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${HS(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${HS(t.namespace)}`}),!0}catch(e){if(e instanceof gw&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof gw&&n.status===409)return;throw n}}};function U0(t){return t.join("")}var hve=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${U0(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${U0(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${U0(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${U0(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${U0(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${U0(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof gw&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof gw&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},pve=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=dve({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new fve(this.client,e),this.tableOps=new hve(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},sC=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Rr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var mve=class extends sC{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},n3=class extends sC{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const _D=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gve=()=>Response,r3=t=>{if(Array.isArray(t))return t.map(n=>r3(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=r3(r)}),e},yve=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},xve=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function yw(t){"@babel/helpers - typeof";return yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yw(t)}function vve(t,e){if(yw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bve(t){var e=vve(t,"string");return yw(e)=="symbol"?e:e+""}function wve(t,e,n){return(e=bve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I$(Object(n),!0).forEach(function(r){wve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const _I=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Eve=async(t,e,n)=>{t instanceof await gve()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new mve(_I(r),i,s))}).catch(r=>{e(new n3(_I(r),r))}):e(new n3(_I(t),t))},Sve=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(yve(r)?(i.headers=Jt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Jt(Jt({},i),n))};async function O1(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,Sve(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Eve(l,a,r))})}async function xw(t,e,n,r){return O1(t,"GET",e,n,r)}async function gl(t,e,n,r,i){return O1(t,"POST",e,r,i,n)}async function i3(t,e,n,r,i){return O1(t,"PUT",e,r,i,n)}async function Ave(t,e,n,r){return O1(t,"HEAD",e,Jt(Jt({},n),{},{noResolveJson:!0}),r)}async function ID(t,e,n,r,i){return O1(t,"DELETE",e,r,i,n)}var Tve=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Rr(e))return{data:null,error:e};throw e}}};let Fee;Fee=Symbol.toStringTag;var kve=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Fee]="BlobDownloadBuilder",this.promise=null}asStream(){return new Tve(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Rr(e))return{data:null,error:e};throw e}}};const Cve={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},R$={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Nve=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=_D(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const o=Jt(Jt({},R$),r);let a=Jt(Jt({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=Jt(Jt({},a),r.headers));const c=i._removeEmptyFolders(e),u=i._getFinalPath(c),h=await(t=="PUT"?i3:gl)(i.fetch,`${i.url}/object/${u}`,s,Jt({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Rr(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Jt({upsert:R$.upsert},r),u=Jt(Jt({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:s,fullPath:(await i3(i.fetch,a.toString(),l,{headers:u})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Rr(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=Jt({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await gl(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new sC("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await gl(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await gl(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await gl(r.fetch,`${r.url}/object/sign/${i}`,Jt({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await gl(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Jt(Jt({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),o=()=>xw(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new kve(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:r3(await xw(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Ave(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Rr(r)&&r instanceof n3){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await ID(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=Jt(Jt(Jt({},Cve),e),{},{prefix:t||""});return{data:await gl(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Rr(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=Jt({},t);return{data:await gl(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof on<"u"?on.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const $ee="2.89.0",zee={"X-Client-Info":`storage-js/${$ee}`};var Pve=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Jt(Jt({},zee),e),this.fetch=_D(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await xw(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await xw(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await gl(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await i3(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Rr(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await gl(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ID(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},_ve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Jt(Jt({},zee),e),this.fetch=_D(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await gl(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await xw(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ID(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Rr(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!xve(t))throw new sC("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new pve({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const RD={"X-Client-Info":`storage-js/${$ee}`,"Content-Type":"application/json"};var Hee=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Zo(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var II=class extends Hee{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ive=class extends Hee{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const OD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Rve=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},O$=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ove=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new II(O$(s),r,o))}).catch(()=>{const s=r+"";e(new II(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new II(i.statusText||`HTTP ${r} error`,r,s))}}else e(new Ive(O$(t),t))},Mve=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(Rve(r)?(i.headers=Jt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Jt(Jt({},i),n)):i};async function Lve(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,Mve(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Ove(l,a,r))})}async function ea(t,e,n,r,i){return Lve(t,"POST",e,r,i,n)}var Dve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Jt(Jt({},RD),e),this.fetch=OD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await ea(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zo(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await ea(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Zo(r))return{data:null,error:r};throw r}}},jve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Jt(Jt({},RD),e),this.fetch=OD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ea(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await ea(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ea(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}},Bve=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Jt(Jt({},RD),e),this.fetch=OD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await ea(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await ea(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Zo(n))return{data:null,error:n};throw n}}},Uve=class extends Bve{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Fve(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},Fve=class extends Dve{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Jt(Jt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Jt(Jt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new $ve(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},$ve=class extends jve{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Jt(Jt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Jt(Jt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Jt(Jt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Jt(Jt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Jt(Jt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},zve=class extends Pve{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new Nve(this.url,this.headers,t,this.fetch)}get vectors(){return new Uve(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new _ve(this.url+"/iceberg",this.headers,this.fetch)}};const Vee="2.89.0",gg=30*1e3,s3=3,RI=s3*gg,Hve="http://localhost:9999",Vve="supabase.auth.token",qve={"X-Client-Info":`gotrue-js/${Vee}`},o3="X-Supabase-Api-Version",qee={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gve=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kve=600*1e3;class vw extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function jt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Wve extends vw{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Yve(t){return jt(t)&&t.name==="AuthApiError"}class pp extends vw{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class kd extends vw{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Uo extends kd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jve(t){return jt(t)&&t.name==="AuthSessionMissingError"}class F0 extends kd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class VS extends kd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qS extends kd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Xve(t){return jt(t)&&t.name==="AuthImplicitGrantRedirectError"}class M$ extends kd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qve extends kd{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class a3 extends kd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function OI(t){return jt(t)&&t.name==="AuthRetryableFetchError"}class L$ extends kd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class l3 extends kd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),D$=` 	
\r=`.split(""),Zve=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<D$.length;e+=1)t[D$[e].charCodeAt(0)]=-2;for(let e=0;e<$T.length;e+=1)t[$T[e].charCodeAt(0)]=e;return t})();function j$(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n($T[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n($T[r]),e.queuedBits-=6}}function Gee(t,e,n){const r=Zve[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function B$(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{nbe(o,r,n)};for(let o=0;o<t.length;o+=1)Gee(t.charCodeAt(o),i,s);return e.join("")}function ebe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function tbe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}ebe(r,e)}}function nbe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Kg(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Gee(t.charCodeAt(i),n,r);return new Uint8Array(e)}function rbe(t){const e=[];return tbe(t,n=>e.push(n)),new Uint8Array(e)}function wp(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>j$(i,n,r)),j$(null,n,r),e.join("")}function ibe(t){return Math.round(Date.now()/1e3)+t}function sbe(){return Symbol("auth-callback")}const Zi=()=>typeof window<"u"&&typeof document<"u",Wh={tested:!1,writable:!1},Kee=()=>{if(!Zi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wh.tested)return Wh.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wh.tested=!0,Wh.writable=!0}catch{Wh.tested=!0,Wh.writable=!1}return Wh.writable};function obe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Wee=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),abe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",yg=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Yh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ji=async(t,e)=>{await t.removeItem(e)};class oC{constructor(){this.promise=new oC.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}oC.promiseConstructor=Promise;function MI(t){const e=t.split(".");if(e.length!==3)throw new l3("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Gve.test(e[r]))throw new l3("JWT not in base64url format");return{header:JSON.parse(B$(e[0])),payload:JSON.parse(B$(e[1])),signature:Kg(e[2]),raw:{header:e[0],payload:e[1]}}}async function lbe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function cbe(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function ube(t){return("0"+t.toString(16)).substr(-2)}function dbe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,ube).join("")}async function fbe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function hbe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await fbe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $0(t,e,n=!1){const r=dbe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await yg(t,`${e}-code-verifier`,i);const s=await hbe(r);return[s,r===s?"plain":"s256"]}const pbe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mbe(t){const e=t.headers.get(o3);if(!e||!e.match(pbe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gbe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ybe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xbe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function z0(t){if(!xbe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function LI(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vbe(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function U$(t){return JSON.parse(JSON.stringify(t))}const ip=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bbe=[502,503,504];async function F$(t){var e;if(!abe(t))throw new a3(ip(t),0);if(bbe.includes(t.status))throw new a3(ip(t),t.status);let n;try{n=await t.json()}catch(s){throw new pp(ip(s),s)}let r;const i=mbe(t);if(i&&i.getTime()>=qee["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new L$(ip(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Uo}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new L$(ip(n),t.status,n.weak_password.reasons);throw new Wve(ip(n),t.status||500,r)}const wbe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Yt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[o3]||(s[o3]=qee["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Ebe(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Ebe(t,e,n,r,i,s){const o=wbe(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new a3(ip(l),0)}if(a.ok||await F$(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await F$(l)}}function ul(t){var e;let n=null;Tbe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=ibe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function $$(t){const e=ul(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rf(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Sbe(t){return{data:t,error:null}}function Abe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=Bx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function z$(t){return t}function Tbe(t){return t.access_token&&t.refresh_token&&t.expires_in}const DI=["global","local","others"];class kbe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Wee(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=DI[0]){if(DI.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${DI.join(", ")}`);try{return await Yt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rf})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Bx(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Abe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(jt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Yt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rf})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:z$});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(jt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){z0(e);try{return await Yt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rf})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){z0(e);try{return await Yt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Rf})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){z0(e);try{return await Yt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rf})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){z0(e.userId);try{const{data:n,error:r}=await Yt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(jt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){z0(e.userId),z0(e.id);try{return{data:await Yt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(jt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Yt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:z$});if(u.error)throw u.error;const h=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(jt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Yt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(jt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Yt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(jt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Yt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Yt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(jt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Yt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(jt(n))return{data:null,error:n};throw n}}}function H$(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const H0={debug:!!(globalThis&&Kee()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yee extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Cbe extends Yee{}async function Nbe(t,e,n){H0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),H0.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){H0.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{H0.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw H0.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Cbe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(H0.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Pbe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Jee(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function _be(t){return parseInt(t,16)}function Ibe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Rbe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=Jee(t.address),x=u?`${u}://${r}`:r,v=t.statement?`${t.statement}
`:"",b=`${x} wants you to sign in with your Ethereum account:
${g}

${v}`;let w=`URI: ${h}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let k=`
Resources:`;for(const C of c){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);k+=`
- ${C}`}w+=k}return`${b}
${w}`}class di extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class zT extends di{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Obe({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new di({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new di({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new di({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new di({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new di({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new di({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new di({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new di({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Xee(o)){if(s.rp.id!==o)return new di({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new di({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new di({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new di({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new di({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Mbe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new di({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new di({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Xee(r)){if(n.rpId!==r)return new di({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new di({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new di({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new di({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Lbe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Dbe=new Lbe;function jbe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Bx(t,["challenge","user","excludeCredentials"]),s=Kg(e).buffer,o=Object.assign(Object.assign({},n),{id:Kg(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Kg(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Bbe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Bx(t,["challenge","allowCredentials"]),i=Kg(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Kg(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function Ube(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:wp(new Uint8Array(t.response.attestationObject)),clientDataJSON:wp(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Fbe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:wp(new Uint8Array(i.authenticatorData)),clientDataJSON:wp(new Uint8Array(i.clientDataJSON)),signature:wp(new Uint8Array(i.signature)),userHandle:i.userHandle?wp(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Xee(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function V$(){var t,e;return!!(Zi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function $be(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new zT("Browser returned unexpected credential type",e)}:{data:null,error:new zT("Empty credential response",e)}}catch(e){return{data:null,error:Obe({error:e,options:t})}}}async function zbe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new zT("Browser returned unexpected credential type",e)}:{data:null,error:new zT("Empty credential response",e)}}catch(e){return{data:null,error:Mbe({error:e,options:t})}}}const Hbe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Vbe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function HT(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=HT(a,o):r[s]=HT(o)}else r[s]=o}return r}function qbe(t,e){return HT(Hbe,t,e||{})}function Gbe(t,e){return HT(Vbe,t,e||{})}class Kbe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??Dbe.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=qbe(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:h}=await $be({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=Gbe(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:h}=await zbe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return jt(o)?{data:null,error:o}:{data:null,error:new pp("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new vw("rpId is required for WebAuthn authentication")};try{if(!V$())return{data:null,error:new pp("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return jt(o)?{data:null,error:o}:{data:null,error:new pp("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new vw("rpId is required for WebAuthn registration")};try{if(!V$())return{data:null,error:new pp("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return jt(o)?{data:null,error:o}:{data:null,error:new pp("Unexpected error in register",o)}}}}Pbe();const Wbe={url:Hve,storageKey:Vve,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qve,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function q$(t,e,n){return await n()}const V0={};class bw{get jwks(){var e,n;return(n=(e=V0[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){V0[this.storageKey]=Object.assign(Object.assign({},V0[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=V0[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){V0[this.storageKey]=Object.assign(Object.assign({},V0[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Wbe),e);if(this.storageKey=s.storageKey,this.instanceID=(n=bw.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,bw.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Zi()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new kbe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Wee(s.fetch),this.lock=s.lock||q$,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&Zi()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Nbe:this.lock=q$,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Kbe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Kee()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=H$(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=H$(this.memoryStorage)),Zi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Vee}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Zi()&&(n=obe(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Zi()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Xve(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return jt(n)?this._returnResult({error:n}):this._returnResult({error:new pp("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ul}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(jt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:h,options:m}=e;let g=null,x=null;this.flowType==="pkce"&&([g,x]=await $0(this.storage,this.storageKey)),s=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:x},xform:ul})}else if("phone"in e){const{phone:u,password:h,options:m}=e;s=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ul})}else throw new VS("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await Ji(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await Ji(this.storage,`${this.storageKey}-code-verifier`),jt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$$})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:$$})}else throw new VS("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new F0;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,u,h,m;let g,x;if("message"in e)g=e.message,x=e.signature;else{const{chain:v,wallet:b,statement:w,options:k}=e;let C;if(Zi())if(typeof b=="object")C=b;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")C=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=b}const R=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href),B=await C.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!B||B.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=Jee(B[0]);let F=(r=k==null?void 0:k.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!F){const j=await C.request({method:"eth_chainId"});F=_be(j)}const H={domain:R.host,address:O,statement:w,uri:R.href,version:"1",chainId:F,nonce:(i=k==null?void 0:k.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=k==null?void 0:k.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=k==null?void 0:k.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=k==null?void 0:k.signInWithEthereum)===null||u===void 0?void 0:u.resources};g=Rbe(H),x=await C.request({method:"personal_sign",params:[Ibe(g),O]})}try{const{data:v,error:b}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:x},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ul});if(b)throw b;if(!v||!v.session||!v.user){const w=new F0;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(jt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,u,h,m,g;let x,v;if("message"in e)x=e.message,v=e.signature;else{const{chain:b,wallet:w,statement:k,options:C}=e;let R;if(Zi())if(typeof w=="object")R=w;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))R=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=w}const B=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in R&&R.signIn){const O=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),k?{statement:k}:null));let F;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")F=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)F=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)x=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),v=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${B.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(i=(r=C==null?void 0:C.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=C==null?void 0:C.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((o=C==null?void 0:C.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((h=(u=C==null?void 0:C.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...C.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const O=await R.signMessage(new TextEncoder().encode(x),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=O}}try{const{data:b,error:w}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:wp(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:ul});if(w)throw w;if(!b||!b.session||!b.user){const k=new F0;return this._returnResult({data:{user:null,session:null},error:k})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if(jt(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await Yh(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Qve;const{data:s,error:o}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ul});if(await Ji(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new F0;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Ji(this.storage,`${this.storageKey}-code-verifier`),jt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ul}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new F0;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await $0(this.storage,this.storageKey));const{error:h}=await Yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new VS("You must provide either an email or phone number.")}catch(a){if(await Ji(this.storage,`${this.storageKey}-code-verifier`),jt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ul});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await $0(this.storage,this.storageKey));const c=await Yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Sbe});return!((s=c.data)===null||s===void 0)&&s.url&&Zi()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await Ji(this.storage,`${this.storageKey}-code-verifier`),jt(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Uo;const{error:i}=await Yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(jt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Yt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Yt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new VS("You must provide either an email or phone number and a type")}catch(n){if(jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Yh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<RI:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Yh(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=LI()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=vbe(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rf}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Uo}:await Yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Rf})})}catch(n){if(jt(n))return Jve(n)&&(await this._removeSession(),await Ji(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Uo;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await $0(this.storage,this.storageKey));const{data:c,error:u}=await Yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Rf});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Ji(this.storage,`${this.storageKey}-code-verifier`),jt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Uo;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=MI(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(jt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Uo;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(jt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Zi())throw new qS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new M$("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qS("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new M$("No code detected.");const{data:k,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new qS("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let m=u+h;l&&(m=parseInt(l));const g=m-u;g*1e3<=gg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const x=m-h;u-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,u):u-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,u);const{data:v,error:b}=await this._getUser(s);if(b)throw b;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:m,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(r){if(jt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Yh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Yve(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Ji(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=sbe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await $0(this.storage,this.storageKey,!0));try{return await Yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Ji(this.storage,`${this.storageKey}-code-verifier`),jt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:h,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Yt(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Zi()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(jt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,h=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ul}),{data:m,error:g}=h;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new F0}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(await Ji(this.storage,`${this.storageKey}-code-verifier`),jt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Yt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await cbe(async i=>(i>0&&await lbe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ul})),(i,s)=>{const o=200*Math.pow(2,i);return s&&OI(s)&&Date.now()+o-r<gg})}catch(r){if(this._debug(n,"error",r),jt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Zi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Yh(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Yh(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await yg(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:LI()}else if(i&&!i.user&&!i.user){const o=await Yh(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Ji(this.storage,this.storageKey+"-user"),await yg(this.storage,this.storageKey,i)):i.user=LI()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<RI;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${RI}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),OI(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Uo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new oC;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Uo;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),jt(s)){const o={data:null,error:s};return OI(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ji(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await yg(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=U$(i);await yg(this.storage,this.storageKey,s)}else{const i=U$(n);await yg(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ji(this.storage,this.storageKey),await Ji(this.storage,this.storageKey+"-code-verifier"),await Ji(this.storage,this.storageKey+"-user"),this.userStorage&&await Ji(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Zi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/gg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${gg}ms, refresh threshold is ${s3} ticks`),i<=s3&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Yee)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Zi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await $0(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await Yt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Yt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Ube(e.webauthn.credential_response):Fbe(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await Yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:jbe(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Bbe(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=MI(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Yt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Uo})})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Uo});const o=await Yt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Zi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Uo});const o=await Yt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Zi()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Yt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Uo})})}catch(e){if(jt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Yt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Uo})})}catch(n){if(jt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Kve>i)return r;const{data:s,error:o}=await Yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:x}=await this.getSession();if(x||!g.session)return this._returnResult({data:null,error:x});r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=MI(r);n!=null&&n.allowExpired||gbe(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const u=ybe(i.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,rbe(`${a}.${l}`)))throw new l3("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(jt(r))return this._returnResult({data:null,error:r});throw r}}}bw.nextInstanceID={};const Ybe=bw,Jbe="2.89.0";let Ub="";typeof Deno<"u"?Ub="deno":typeof document<"u"?Ub="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ub="react-native":Ub="node";const Xbe={"X-Client-Info":`supabase-js-${Ub}/${Jbe}`},Qbe={headers:Xbe},Zbe={schema:"public"},ewe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},twe={};function ww(t){"@babel/helpers - typeof";return ww=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ww(t)}function nwe(t,e){if(ww(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ww(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rwe(t){var e=nwe(t,"string");return ww(e)=="symbol"?e:e+""}function iwe(t,e,n){return(e=rwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(n),!0).forEach(function(r){iwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const swe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),owe=()=>Headers,awe=(t,e,n)=>{const r=swe(n),i=owe();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,zr(zr({},o),{},{headers:c}))}};function lwe(t){return t.endsWith("/")?t:t+"/"}function cwe(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,m={db:zr(zr({},l),i),auth:zr(zr({},c),s),realtime:zr(zr({},u),o),storage:{},global:zr(zr(zr({},h),a),{},{headers:zr(zr({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function uwe(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(lwe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var dwe=class extends Ybe{constructor(t){super(t)}},fwe=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=uwe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:Zbe,realtime:twe,auth:zr(zr({},ewe),{},{storageKey:o}),global:Qbe},l=cwe(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=awe(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(zr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new qxe(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new zve(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Fxe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:c},u,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dwe({url:this.authUrl.href,headers:zr(zr({},m),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new lve(this.realtimeUrl.href,zr(zr({},t),{},{params:zr(zr({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Qee=(t,e,n)=>new fwe(t,e,n);function hwe(){if(typeof window<"u"||typeof Ml>"u")return!1;const t=Ml.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}hwe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function Zee(){return{url:"https://rhkkqojnaiyrxmiiykay.supabase.co",anonKey:"sb_publishable_Kd3ZVGh8x-DOQs8gEuVxYQ_tX2sBfpA"}}let VT=null;async function pwe(){if(VT)return!0;const t=Zee();if(!t.url||!t.anonKey)return console.error("[Supabase] Cannot initialize: missing configuration"),!1;try{return VT=Qee(t.url,t.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),!0}catch(e){return console.error("[Supabase] Initialization failed:",e),!1}}function Ko(){return VT||console.warn("[Supabase] Client not initialized. Call initializeSupabase() first."),VT}function mwe(){const t=Zee();return!!(t.url&&t.anonKey)}function q0(t){var e,n,r;return t?{id:t.id,email:t.email||null,displayName:((e=t.user_metadata)==null?void 0:e.full_name)||((n=t.email)==null?void 0:n.split("@")[0])||null,photoURL:((r=t.user_metadata)==null?void 0:r.avatar_url)||null,emailVerified:t.email_confirmed_at!==null,createdAt:t.created_at}:null}class gwe{constructor(){this.currentUser=null,this.listeners=[]}getUser(){return this.currentUser}onAuthStateChange(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}async signInWithGoogle(){return this.signInWithProvider("google",{queryParams:{access_type:"offline",prompt:"consent"}})}async signInWithGitHub(){return this.signInWithProvider("github",{scopes:"read:user user:email"})}async signInWithDiscord(){return this.signInWithProvider("discord",{scopes:"identify email"})}async signInWithProvider(e,n){const r=Ko();if(!r)throw console.error("[Auth] Supabase client not initialized"),new Error("Supabase not initialized");console.log(`[Auth] Starting sign in with ${e}...`,n);try{const{data:i,error:s}=await r.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin,scopes:n==null?void 0:n.scopes,queryParams:n==null?void 0:n.queryParams,skipBrowserRedirect:!1}});if(s)throw console.error(`[Auth] Error signing in with ${e}:`,s),s;return console.log(`[Auth] params for ${e} sign in initiated`,i),this.currentUser}catch(i){throw console.error(`[Auth] Unexpected error during ${e} sign in:`,i),i}}async signInWithEthereum(){const e=Ko();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.ethereum)throw new Error("No Ethereum wallet detected. Please install MetaMask or another Web3 wallet.");const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"ethereum",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=q0(n.user),this.notifyListeners(),this.currentUser}async signInWithSolana(){const e=Ko();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.solana)throw new Error("No Solana wallet detected. Please install Phantom or another Solana wallet.");try{await window.solana.connect()}catch{throw new Error("Failed to connect to Solana wallet")}const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"solana",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=q0(n.user),this.notifyListeners(),this.currentUser}async signInWithEmail(e,n){const r=Ko();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signInWithPassword({email:e,password:n});if(s)throw s;return this.currentUser=q0(i.user),this.notifyListeners(),this.currentUser}async signUp(e,n){const r=Ko();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signUp({email:e,password:n});if(s)throw s;return this.currentUser=q0(i.user),this.notifyListeners(),this.currentUser}async logout(){const e=Ko();if(!e)throw new Error("Supabase not initialized");const{error:n}=await e.auth.signOut();if(n)throw n;this.currentUser=null,this.notifyListeners()}async deleteAccount(){var r;const e=Ko();if(!e)throw new Error("Supabase not initialized");const{data:{user:n}}=await e.auth.getUser();if(!n)throw new Error("Not authenticated");try{const{StorageService:i}=await Tl(async()=>{const{StorageService:s}=await Promise.resolve().then(()=>bwe);return{StorageService:s}},void 0);await i.clearUserData(n.id),console.log("[Auth] Local storage cleared")}catch(i){console.warn("[Auth] Failed to clear local storage:",i)}try{const{error:i}=await e.rpc("delete_user");if(i)throw console.warn("[Auth] RPC delete_user not available, signing out only:",i.message),await this.logout(),new Error("Account deletion requires admin action. Please contact support or delete via Supabase dashboard.")}catch(i){throw(r=i.message)!=null&&r.includes("contact support")?i:(await this.logout(),new Error("Account deletion failed. You have been signed out. Please contact support to complete account deletion."))}this.currentUser=null,this.notifyListeners(),console.log("[Auth] Account deleted successfully")}async initialize(){const e=Ko();if(!e){console.warn("[SupabaseAuth] Cannot initialize: client not available");return}e.auth.onAuthStateChange((r,i)=>{this.currentUser=i?q0(i.user):null,this.notifyListeners()});const{data:{session:n}}=await e.auth.getSession();this.currentUser=n?q0(n.user):null,this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>{try{e(this.currentUser)}catch(n){console.error("[SupabaseAuth] Listener error:",n)}})}getUserId(){var e;return((e=this.currentUser)==null?void 0:e.id)||null}isAuthenticated(){return this.currentUser!==null}async getAccessToken(){const e=Ko();if(!e)return null;const{data:{session:n}}=await e.auth.getSession();return(n==null?void 0:n.access_token)||null}}const wa=new gwe;function Bm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function ywe(t,e){let n;const r=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=Bm(i),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let jI;function M1(){return jI||(jI=ywe("keyval-store","keyval")),jI}function BI(t,e=M1()){return e("readonly",n=>Bm(n.get(t)))}function UI(t,e,n=M1()){return n("readwrite",r=>(r.put(e,t),Bm(r.transaction)))}function FI(t,e=M1()){return e("readwrite",n=>(n.delete(t),Bm(n.transaction)))}function xwe(t=M1()){return t("readwrite",e=>(e.clear(),Bm(e.transaction)))}function vwe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Bm(t.transaction)}function K$(t=M1()){return t("readonly",e=>{if(e.getAllKeys)return Bm(e.getAllKeys());const n=[];return vwe(e,r=>n.push(r.key)).then(()=>n)})}const b7=class b7{static setUserId(e){console.log(`[StorageService] User context set to: ${e?e.substring(0,8)+"...":"null"}`),this.currentUserId=e}static getUserId(){return this.currentUserId}static getUserKey(e){return this.currentUserId?`${e}_${this.currentUserId}`:(console.warn(`[StorageService] No user context set! Using global key for: ${e}`),e)}static async getItem(e){try{return await BI(e)}catch(n){return console.error(`[StorageService] Failed to get item ${e}:`,n),null}}static async setItem(e,n){try{await UI(e,n)}catch(r){console.error(`[StorageService] Failed to set item ${e}:`,r)}}static async removeItem(e){try{await FI(e)}catch(n){console.error(`[StorageService] Failed to remove item ${e}:`,n)}}static async clear(){try{await xwe()}catch(e){console.error("[StorageService] Failed to clear storage:",e)}}static async clearUserData(e){try{const n=await K$(),r=`_${e}`,i=n.filter(s=>typeof s=="string"&&s.endsWith(r));console.log(`[StorageService] Clearing ${i.length} keys for user ${e.substring(0,8)}...`);for(const s of i)await FI(s);console.log("[StorageService] User data cleared.")}catch(n){console.error("[StorageService] Failed to clear user data:",n)}}static async migrateFromLocalStorage(){console.log("[StorageService] Checking for legacy localStorage data...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","agent_chat_history","agent_chat_sessions","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_dealer_settings"];let n=0;for(const r of e){const i=localStorage.getItem(r);if(i)try{await UI(r,i),console.log(`[StorageService] Migrated key: ${r}`),n++}catch(s){console.error(`[StorageService] Failed to migrate key ${r}:`,s)}}if(n>0){console.log(`[StorageService] Migration complete. Moved ${n} items.`);for(const r of e)localStorage.removeItem(r);console.log("[StorageService] Legacy localStorage keys cleared.")}else console.log("[StorageService] No legacy data found to migrate.")}static async migrateToUserScoped(){if(!this.currentUserId){console.warn("[StorageService] Cannot migrate to user-scoped: no userId set");return}console.log("[StorageService] Checking for unscoped IndexedDB data to migrate...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_conversations_metadata","vault_dealer_storage","vault_polymarket_storage","ai_config_store","vault_balance_history","token_usage_store"],r=(await K$()).filter(o=>typeof o=="string"&&o.startsWith("agent_conversation_")&&!o.includes("_"+this.currentUserId)),i=[...e,...r];let s=0;for(const o of i)try{const a=await BI(o);if(a){const l=`${o}_${this.currentUserId}`;await BI(l)||(await UI(l,a),console.log(`[StorageService] Migrated to user-scoped: ${o} -> ${l}`),s++),await FI(o)}}catch(a){console.error(`[StorageService] Failed to migrate key ${o}:`,a)}s>0?console.log(`[StorageService] User-scoped migration complete. Moved ${s} items.`):console.log("[StorageService] No unscoped data found to migrate.")}};b7.currentUserId=null;let ke=b7;const bwe=Object.freeze(Object.defineProperty({__proto__:null,StorageService:ke},Symbol.toStringTag,{value:"Module"})),wwe={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},ete={gemini:{providerType:"gemini",apiKey:"",isConfigured:!1},openai:{providerType:"openai",apiKey:"",isConfigured:!1},claude:{providerType:"claude",apiKey:"",isConfigured:!1}},tte={operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}},$I={credentials:ete,componentConfigs:tte},W$="ai_config_store";class Ewe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=$I,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){if(!this.isInitialized){if(!ke.getUserId()){console.log("[AIConfigStore] No user context yet, skipping initial load"),this.isInitialized=!0;return}await this.loadFromStorage(),this.isInitialized=!0,this.notifyListeners()}}async reload(){console.log("[AIConfigStore] Reloading from storage..."),await this.loadFromStorage(),this.notifyListeners()}reset(){console.log("[AIConfigStore] Resetting to initial state..."),this.state={...$I},this.notifyListeners()}async loadFromStorage(){try{const e=await ke.getItem(ke.getUserKey(W$));if(e){const n=JSON.parse(e);this.state={...$I,...n,credentials:{...ete,...n.credentials},componentConfigs:{...tte,...n.componentConfigs}},console.log("[AIConfigStore] Loaded credentials from storage")}}catch(e){console.error("Failed to load AI config state:",e)}}async waitForInit(){this.initPromise&&await this.initPromise}async saveState(){try{await ke.setItem(ke.getUserKey(W$),JSON.stringify(this.state))}catch(e){console.error("Failed to save AI config state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}setApiKey(e,n){this.state={...this.state,credentials:{...this.state.credentials,[e]:{providerType:e,apiKey:n,isConfigured:n.trim().length>0}}},this.notify()}getApiKey(e){return this.state.credentials[e].apiKey}clearApiKey(e){this.setApiKey(e,"")}isProviderConfigured(e){return this.state.credentials[e].isConfigured}getConfiguredProviders(){return Object.entries(this.state.credentials).filter(([e,n])=>n.isConfigured).map(([e,n])=>e)}setComponentConfig(e,n){return this.state.credentials[n.providerType].isConfigured?wwe[n.providerType].find(i=>i.id===n.modelId)?(this.state={...this.state,componentConfigs:{...this.state.componentConfigs,[e]:n}},this.notify(),!0):(console.warn(`Invalid model ${n.modelId} for provider ${n.providerType}`),!1):(console.warn(`Cannot set ${e} to use ${n.providerType}: API key not configured`),!1)}getComponentConfig(e){return this.state.componentConfigs[e]}getComponentProvider(e){return this.state.componentConfigs[e].providerType}getComponentModel(e){return this.state.componentConfigs[e].modelId}getComponentApiKey(e){const n=this.getComponentProvider(e);return this.getApiKey(n)}isComponentConfigValid(e){const n=this.state.componentConfigs[e];return this.state.credentials[n.providerType].isConfigured}getInvalidComponents(){return Object.keys(this.state.componentConfigs).filter(e=>!this.isComponentConfigValid(e))}}const Un=new Ewe,aC={trend:{name:"Trend / Structure",color:"purple",icon:"TrendingUp",maxIndicators:2,indicators:["ema","sma","adx","ichimoku"],description:"Market direction and trend strength"},momentum:{name:"Momentum",color:"blue",icon:"Activity",maxIndicators:2,indicators:["rsi","macd","stoch"],description:"Entry/exit timing and divergences"},volume:{name:"Volume",color:"green",icon:"BarChart2",maxIndicators:1,indicators:["obv","vwap"],description:"Move confirmation with participation"},volatility:{name:"Volatility / Risk",color:"orange",icon:"Zap",maxIndicators:1,indicators:["atr","bollinger"],description:"Risk context and market regime"}},nte=5,ed={balanced:{name:"Balanced",description:"Trend + Momentum + Timing + Risk",emoji:"",indicators:["ema","rsi","macd","atr"],marketCondition:"uncertain or mixed signals"},scalp:{name:"Scalp Momentum",description:"Fast entries, frequent trades (5m-15m)",emoji:"",indicators:["ema","rsi","stoch","vwap"],marketCondition:"high volatility with quick reversals"},trendFollowing:{name:"Trend Following",description:"Sustained movements (15m-1h)",emoji:"",indicators:["ema","sma","adx","macd"],marketCondition:"strong directional trend"},meanReversion:{name:"Mean Reversion",description:"Range / Lateral markets",emoji:"",indicators:["bollinger","rsi","stoch","vwap"],marketCondition:"ranging or sideways market"},volumeConfirm:{name:"Volume Confirmation",description:"Avoid fake breakouts",emoji:"",indicators:["ema","rsi","obv","vwap"],marketCondition:"breakout scenarios or unusual volume"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",indicators:[],marketCondition:"user-defined"}},c3={balanced:`You are Hyperliquid Dealer, an autonomous trading engine.
Your goal is to identify balanced trading opportunities using a combination of indicators.

RULES:
1. Use EMA for trend confirmation, RSI for timing, MACD for momentum, and ATR for risk management.
2. Enter LONG when: EMA points UP + RSI < 40 + MACD histogram positive.
3. Enter SHORT when: EMA points DOWN + RSI > 60 + MACD histogram negative.
4. Stop Loss: Position at 1.5x ATR from entry price.
5. Take Profit: Target 2x risk (1:2 ratio).
6. HOLD if indicators give conflicting signals.`,scalp:`You are Hyperliquid Dealer, a high-frequency scalping engine.
Your goal is to capture quick price movements (5m-15m) in volatile markets.

RULES:
1. Use EMA(9) for immediate direction, RSI for entry, Stoch for confirmation, VWAP as support/resistance.
2. LONG: Price above VWAP + RSI < 35 + Stoch crossing up.
3. SHORT: Price below VWAP + RSI > 65 + Stoch crossing down.
4. Quick trades: Target 0.3-0.5% profit per trade.
5. Tight stop: 0.5% maximum.
6. AVOID trades during low volatility.`,trendFollowing:`You are Hyperliquid Dealer, specialized in following strong trends.
Your goal is to ride sustained directional movements (15m-1h).

RULES:
1. Use EMA/SMA to confirm trend, ADX for strength, MACD for timing.
2. ONLY enter when ADX > 25 (strong trend).
3. LONG: EMA(20) > SMA(50) + ADX > 25 + MACD positive.
4. SHORT: EMA(20) < SMA(50) + ADX > 25 + MACD negative.
5. Let profits run: Trailing stop at 2x ATR.
6. HOLD in sideways markets (ADX < 20).`,meanReversion:`You are Hyperliquid Dealer, specialized in mean reversion.
Your goal is to trade ranging/sideways markets, buying dips and selling tops.

RULES:
1. Use Bollinger Bands for extremes, RSI for oversold/overbought, Stoch for confirmation, VWAP as anchor.
2. LONG: Price touches lower Bollinger + RSI < 30 + Stoch < 20.
3. SHORT: Price touches upper Bollinger + RSI > 70 + Stoch > 80.
4. Target: Return to mean (Bollinger middle or VWAP).
5. Stop: Outside the opposite band.
6. AVOID trading when Bollinger expands (breakout).`,volumeConfirm:`You are Hyperliquid Dealer with focus on volume confirmation.
Your goal is to avoid false breakouts by only trading with volume confirmation.

RULES:
1. Use EMA for trend, RSI for timing, OBV for volume flow, VWAP for institutional levels.
2. LONG: EMA up + RSI < 45 + OBV making higher highs + price above VWAP.
3. SHORT: EMA down + RSI > 55 + OBV making lower lows + price below VWAP.
4. Volume is KING: No OBV confirmation = no trade.
5. Breakouts: Only enter if volume > 1.5x average.
6. HOLD if OBV diverges from price (possible reversal signal).`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a conservative trader focused on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`},Wg={rsi:{enabled:!0,params:{period:14},weight:1},macd:{enabled:!0,params:{fast:12,slow:26,signal:9},weight:1},bollinger:{enabled:!1,params:{period:20,stdDev:2},weight:1},atr:{enabled:!0,params:{period:14},weight:1},adx:{enabled:!1,params:{period:14},weight:1},obv:{enabled:!1,params:{},weight:1},vwap:{enabled:!1,params:{},weight:1},ichimoku:{enabled:!1,params:{conversion:9,base:26,spanB:52,displacement:26},weight:1},ema:{enabled:!0,params:{period:20},weight:1},sma:{enabled:!1,params:{period:20},weight:1},stoch:{enabled:!1,params:{period:14,signalPeriod:3},weight:1}},Swe=c3.balanced,rte={strategyPrompt:Swe,aggressiveMode:!1,maxLeverage:5,maxPositionSizeUSDC:50,maxOpenPositions:3,bankrollType:"MANUAL",manualBankroll:100,tradingPairs:["BTC","ETH","SOL"],checkIntervalSeconds:300,analysisTimeframe:"60",historyCandles:30,macroTimeframeEnabled:!1,macroTimeframe:"240",macroEnabledIndicators:["rsi","macd","ema"],indicatorSettings:Wg,autonomousIndicators:!1,selectedPreset:"balanced",promptMode:"preset",stopLossEnabled:!1,stopLossPercent:null,takeProfitEnabled:!1,takeProfitPercent:null},zI={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",executionMode:"local",currentTask:null,currentSignal:null,trendAssessment:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:rte,logs:[],operationHistory:[]};class Awe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=zI,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[DealerStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[DealerStore] Resetting to initial state..."),this.state={...zI},this.notifyListeners()}async loadState(){var e,n;try{const r=await ke.getItem(ke.getUserKey("vault_dealer_storage"));if(r){const i=JSON.parse(r);let s=((e=i.settings)==null?void 0:e.indicatorSettings)||Wg;const o={};for(const a of Object.keys(Wg)){const l=s[a],c=Wg[a];o[a]={enabled:(l==null?void 0:l.enabled)??c.enabled,params:(l==null?void 0:l.params)??c.params,weight:(l==null?void 0:l.weight)??1}}this.state={...zI,...i,settings:{...rte,...i.settings||{},indicatorSettings:o,selectedPreset:((n=i.settings)==null?void 0:n.selectedPreset)||"balanced"},isAnalyzing:!1,pendingExecution:!1,logs:i.logs||[]}}}catch(r){console.error("Failed to load dealer state:",r)}}async saveState(){try{await ke.setItem(ke.getUserKey("vault_dealer_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save dealer state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Dealer Activated":"Dealer Stopped"},this.addLog("INFO",`Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,trendAssessment:r!==void 0?r:this.state.trendAssessment,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,trendAssessment:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","System reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.cloid===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e,n=10,r=!0){let i=this.state.operationHistory;e&&(i=i.filter(a=>a.coin.toUpperCase()===e.toUpperCase()));const s=r?this.state.logs.filter(a=>a.type==="REASONING"||a.type==="TRADE"||a.type==="SIGNAL"):[];return{operations:i.slice(0,n).map(a=>{var c,u;const l=s.find(h=>h.message.includes(a.coin)&&Math.abs(h.timestamp-a.timestamp)<6e4);return{...a,fullReasoning:((c=l==null?void 0:l.details)==null?void 0:c.fullReason)||a.reasoning,analysisContext:(u=l==null?void 0:l.details)==null?void 0:u.context}}),totalOperations:i.length,recentLogs:s.slice(0,5)}}}const pt=new Awe,Twe=[{value:"politics",label:"Politics",icon:""},{value:"crypto",label:"Crypto",icon:""},{value:"sports",label:"Sports",icon:""},{value:"pop-culture",label:"Pop Culture",icon:""},{value:"science",label:"Science",icon:""},{value:"business",label:"Business",icon:""},{value:"other",label:"Other",icon:""}],rw={balanced:{name:"Balanced",description:"Trade across all categories with balanced risk",emoji:"",categories:["politics","crypto","business","science"],marketCondition:"diverse markets with good liquidity"},highVolume:{name:"High Volume",description:"Focus on most liquid markets",emoji:"",categories:["politics","crypto","sports"],marketCondition:"high volume markets with tight spreads"},crypto:{name:"Crypto Focus",description:"Only cryptocurrency-related markets",emoji:"",categories:["crypto"],marketCondition:"crypto market events and predictions"},conservative:{name:"Conservative",description:"Low risk, high confidence trades only",emoji:"",categories:["politics","business"],marketCondition:"stable markets with clear probable outcomes"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",categories:[],marketCondition:"user-defined"}},qT={balanced:`You are Polymarket Dealer, an autonomous prediction market trading engine.
Your goal is to identify high-probability trading opportunities across diverse markets.

RULES:
1. Analyze market question, current probability, volume, and time to resolution.
2. BUY YES when probability is undervalued (market < 40% but your analysis suggests > 60%).
3. BUY NO when probability is overvalued (market > 60% but your analysis suggests < 40%).
4. SELL positions when probability has moved 15%+ in your favor OR if new information changes thesis.
5. AVOID markets with < $10k liquidity or < 7 days to resolution (unless very high confidence).
6. Max position: 5% of bankroll per market.
7. HOLD if confidence < 65%.`,highVolume:`You are Polymarket Dealer, focused on liquid markets with high volume.
Your goal is to trade actively in markets with the best liquidity and tightest spreads.

RULES:
1. Only trade markets with > $50k volume in 24h.
2. Target spreads < 5% for entries and exits.
3. Look for momentum: price moving in a direction with increasing volume.
4. Use smaller positions (2% max) but trade more frequently.
5. Take profits quickly: exit at 10%+ gain.
6. Cut losses at 8%.
7. AVOID low-liquidity markets even if edge seems large.`,crypto:`You are Polymarket Dealer, specialized in cryptocurrency prediction markets.
Your goal is to leverage crypto market knowledge for prediction market alpha.

RULES:
1. Trade only crypto-related markets (price predictions, ETF approvals, protocol events).
2. Use your understanding of crypto market dynamics and sentiment.
3. BUY YES on bullish crypto catalysts you believe are underpriced.
4. BUY NO when crypto hype seems overextended.
5. Watch for correlation with actual crypto prices.
6. Higher conviction trades allowed (up to 8% of bankroll).
7. AVOID markets about specific coins you lack knowledge of.`,conservative:`You are Polymarket Dealer, taking a conservative low-risk approach.
Your goal is to identify very high probability trades with minimal downside.

RULES:
1. Only trade when confidence > 80%.
2. Focus on markets where outcome seems nearly certain (price > 85% or < 15%).
3. Look for arbitrage opportunities and mispriced markets.
4. Small position sizes (max 3% of bankroll).
5. AVOID volatile markets or those with incoming news catalysts.
6. Prefer longer time horizons (> 30 days to resolution).
7. HOLD cash if no clear opportunities.`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a specialized Polymarket trader.
// 1. Focus on political markets only.
// 2. Trade based on polling data and historical patterns.
// 3. Never risk more than 2% per trade.`},kwe=qT.balanced,ite={strategyPrompt:kwe,marketSelectionMode:"AI_DISCOVERY",selectedMarkets:[],allowedCategories:["politics","crypto","business","science"],maxPositionSizeUSDC:50,maxOpenPositions:5,minLiquidity:1e4,minVolume24h:5e3,minVolumeThreshold:5e3,minLiquidityThreshold:1e4,minSpreadThreshold:.02,confidenceThreshold:.6,bankrollType:"MANUAL",manualBankroll:100,checkIntervalSeconds:300,promptMode:"preset",selectedPreset:"balanced"},HI={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",currentTask:null,currentSignal:null,analysisNote:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:ite,logs:[],operationHistory:[]};class Cwe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=HI,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[PolymarketStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[PolymarketStore] Resetting to initial state..."),this.state={...HI},this.notifyListeners()}async loadState(){try{const e=ke.getUserKey("vault_polymarket_storage");console.log("[PolymarketStore] Loading from key:",e);const n=await ke.getItem(e);if(n){const r=JSON.parse(n);console.log("[PolymarketStore] Loaded settings:",r.settings),this.state={...HI,...r,settings:{...ite,...r.settings||{}},isAnalyzing:!1,pendingExecution:!1,logs:r.logs||[]}}else console.log("[PolymarketStore] No saved data found")}catch(e){console.error("Failed to load Polymarket state:",e)}}async saveState(){try{await ke.setItem(ke.getUserKey("vault_polymarket_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save Polymarket state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Polymarket Dealer Activated":"Polymarket Dealer Stopped"},this.addLog("INFO",`Polymarket Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Polymarket settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}setCurrentTask(e){this.state={...this.state,currentTask:e},this.notify()}setStatusMessage(e){this.state={...this.state,statusMessage:e},this.notify()}setStatusDetail(e){this.state={...this.state,statusDetail:e},this.notify()}setAnalysisNote(e){this.state={...this.state,analysisNote:e},this.notify()}setCurrentSignal(e){this.state={...this.state,currentSignal:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,analysisNote:r!==void 0?r:this.state.analysisNote,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,analysisNote:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","Polymarket system reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.id===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e=10,n=!0){let r=this.state.operationHistory;const i=n?this.state.logs.filter(o=>o.type==="REASONING"||o.type==="TRADE"||o.type==="SIGNAL"):[];return{operations:r.slice(0,e).map(o=>{var l,c;const a=i.find(u=>u.message.includes(o.question.slice(0,30))&&Math.abs(u.timestamp-o.timestamp)<6e4);return{...o,fullReasoning:((l=a==null?void 0:a.details)==null?void 0:l.fullReason)||o.reasoning,analysisContext:(c=a==null?void 0:a.details)==null?void 0:c.context}}),totalOperations:r.length,recentLogs:i.slice(0,5)}}}const lt=new Cwe,ste=A.createContext(void 0);function L1(){const t=A.useContext(ste);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Y$(t){return t?{uid:t.id,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified}:null}function Nwe({children:t}){const[e,n]=A.useState(null),[r,i]=A.useState(!0);A.useEffect(()=>{(async()=>{if(!mwe()){console.warn("[AuthContext] Supabase not configured. Auth will not work until configured."),i(!1);return}await pwe(),await wa.initialize();const w=Y$(wa.getUser());n(w),ke.setUserId((w==null?void 0:w.uid)||null),w!=null&&w.uid&&(await ke.migrateToUserScoped(),await Un.reload(),await pt.reloadFromStorage(),await lt.reloadFromStorage()),i(!1)})();const b=wa.onAuthStateChange(async w=>{const k=Y$(w);n(k),ke.setUserId((k==null?void 0:k.uid)||null),k!=null&&k.uid?(await ke.migrateToUserScoped(),await Un.reload(),await pt.reloadFromStorage(),await lt.reloadFromStorage()):(pt.reset(),lt.reset())});return()=>b()},[]);const x={user:e,loading:r,signInWithGoogle:async()=>{try{await wa.signInWithGoogle()}catch(v){throw console.error("Google sign-in error:",v),v}},signInWithGitHub:async()=>{try{await wa.signInWithGitHub()}catch(v){throw console.error("GitHub sign-in error:",v),v}},signInWithDiscord:async()=>{try{await wa.signInWithDiscord()}catch(v){throw console.error("Discord sign-in error:",v),v}},signInWithEthereum:async()=>{try{await wa.signInWithEthereum()}catch(v){throw console.error("Ethereum sign-in error:",v),v}},signInWithSolana:async()=>{try{await wa.signInWithSolana()}catch(v){throw console.error("Solana sign-in error:",v),v}},signInWithEmail:async(v,b)=>{try{await wa.signInWithEmail(v,b)}catch(w){throw console.error("Email sign-in error:",w),w}},signUp:async(v,b)=>{try{await wa.signUp(v,b)}catch(w){throw console.error("Sign-up error:",w),w}},logout:async()=>{try{await wa.logout()}catch(v){throw console.error("Logout error:",v),v}},deleteAccount:async()=>{try{await wa.deleteAccount()}catch(v){throw console.error("Delete account error:",v),v}}};return d.jsx(ste.Provider,{value:x,children:t})}var we=(t=>(t.DASHBOARD="dashboard",t.VAULT="vault",t.AGENT="agent",t.SCHEDULER="scheduler",t.HYPERLIQUID="hyperliquid",t.VAULT_DEALER="vault_dealer",t.DEALER_DASHBOARD="dealer_dashboard",t.DEALER_THINKING="dealer_thinking",t.DEALER_CONFIG="dealer_config",t.DEALER_PROMPT="dealer_prompt",t.CONFIGURATION="configuration",t.SETTINGS="settings",t.HISTORY="history",t.TOKEN_COSTS="token_costs",t.POLYMARKET_DEALER="polymarket_dealer",t.POLYMARKET_DASHBOARD="polymarket_dashboard",t.POLYMARKET_THINKING="polymarket_thinking",t.POLYMARKET_CONFIG="polymarket_config",t.POLYMARKET_PROMPT="polymarket_prompt",t.SOLANA_DEALER="solana_dealer",t.SOLANA_DEALER_DASHBOARD="solana_dealer_dashboard",t.SOLANA_DEALER_THINKING="solana_dealer_thinking",t.SOLANA_DEALER_POLICY="solana_dealer_policy",t.SOLANA_DEALER_LOG="solana_dealer_log",t.PRIVACY="privacy",t.TERMS="terms",t))(we||{});const MD=A.createContext({});function LD(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const DD=typeof window<"u",ote=DD?A.useLayoutEffect:A.useEffect,lC=A.createContext(null);function jD(t,e){t.indexOf(e)===-1&&t.push(e)}function BD(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const od=(t,e,n)=>n>e?e:n<t?t:n;let UD=()=>{};const ad={},ate=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function lte(t){return typeof t=="object"&&t!==null}const cte=t=>/^0[^.\s]+$/u.test(t);function FD(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ya=t=>t,Pwe=(t,e)=>n=>e(t(n)),D1=(...t)=>t.reduce(Pwe),Ew=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class $D{constructor(){this.subscriptions=[]}add(e){return jD(this.subscriptions,e),()=>BD(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ic=t=>t*1e3,Ka=t=>t/1e3;function ute(t,e){return e?t*(1e3/e):0}const dte=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,_we=1e-7,Iwe=12;function Rwe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=dte(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>_we&&++a<Iwe);return o}function j1(t,e,n,r){if(t===e&&n===r)return Ya;const i=s=>Rwe(s,0,1,t,n);return s=>s===0||s===1?s:dte(i(s),e,r)}const fte=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hte=t=>e=>1-t(1-e),pte=j1(.33,1.53,.69,.99),zD=hte(pte),mte=fte(zD),gte=t=>(t*=2)<1?.5*zD(t):.5*(2-Math.pow(2,-10*(t-1))),HD=t=>1-Math.sin(Math.acos(t)),yte=hte(HD),xte=fte(HD),Owe=j1(.42,0,1,1),Mwe=j1(0,0,.58,1),vte=j1(.42,0,.58,1),Lwe=t=>Array.isArray(t)&&typeof t[0]!="number",bte=t=>Array.isArray(t)&&typeof t[0]=="number",Dwe={linear:Ya,easeIn:Owe,easeInOut:vte,easeOut:Mwe,circIn:HD,circInOut:xte,circOut:yte,backIn:zD,backInOut:mte,backOut:pte,anticipate:gte},jwe=t=>typeof t=="string",J$=t=>{if(bte(t)){UD(t.length===4);const[e,n,r,i]=t;return j1(e,n,r,i)}else if(jwe(t))return Dwe[t];return t},GS=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Bwe(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,h=!1,m=!1)=>{const x=m&&i?n:r;return h&&o.add(u),x.has(u)||x.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(a=u,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(u))}};return c}const Uwe=40;function wte(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=GS.reduce((C,R)=>(C[R]=Bwe(s),C),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:m,render:g,postRender:x}=o,v=()=>{const C=ad.useManualTiming?i.timestamp:performance.now();n=!1,ad.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(C-i.timestamp,Uwe),1)),i.timestamp=C,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),m.process(i),g.process(i),x.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(v))},b=()=>{n=!0,r=!0,i.isProcessing||t(v)};return{schedule:GS.reduce((C,R)=>{const B=o[R];return C[R]=(O,F=!1,H=!1)=>(n||b(),B.schedule(O,F,H)),C},{}),cancel:C=>{for(let R=0;R<GS.length;R++)o[GS[R]].cancel(C)},state:i,steps:o}}const{schedule:kr,cancel:oh,state:ns,steps:VI}=wte(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ya,!0);let aT;function Fwe(){aT=void 0}const wo={now:()=>(aT===void 0&&wo.set(ns.isProcessing||ad.useManualTiming?ns.timestamp:performance.now()),aT),set:t=>{aT=t,queueMicrotask(Fwe)}},Ete=t=>e=>typeof e=="string"&&e.startsWith(t),Ste=Ete("--"),$we=Ete("var(--"),VD=t=>$we(t)?zwe.test(t.split("/*")[0].trim()):!1,zwe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ux={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Sw={...Ux,transform:t=>od(0,1,t)},KS={...Ux,default:1},iw=t=>Math.round(t*1e5)/1e5,qD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Hwe(t){return t==null}const Vwe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,GD=(t,e)=>n=>!!(typeof n=="string"&&Vwe.test(n)&&n.startsWith(t)||e&&!Hwe(n)&&Object.prototype.hasOwnProperty.call(n,e)),Ate=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(qD);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},qwe=t=>od(0,255,t),qI={...Ux,transform:t=>Math.round(qwe(t))},Ep={test:GD("rgb","red"),parse:Ate("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+qI.transform(t)+", "+qI.transform(e)+", "+qI.transform(n)+", "+iw(Sw.transform(r))+")"};function Gwe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const u3={test:GD("#"),parse:Gwe,transform:Ep.transform},B1=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Sf=B1("deg"),Rc=B1("%"),Qt=B1("px"),Kwe=B1("vh"),Wwe=B1("vw"),X$={...Rc,parse:t=>Rc.parse(t)/100,transform:t=>Rc.transform(t*100)},Cg={test:GD("hsl","hue"),parse:Ate("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Rc.transform(iw(e))+", "+Rc.transform(iw(n))+", "+iw(Sw.transform(r))+")"},fi={test:t=>Ep.test(t)||u3.test(t)||Cg.test(t),parse:t=>Ep.test(t)?Ep.parse(t):Cg.test(t)?Cg.parse(t):u3.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ep.transform(t):Cg.transform(t),getAnimatableNone:t=>{const e=fi.parse(t);return e.alpha=0,fi.transform(e)}},Ywe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Jwe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(qD))==null?void 0:e.length)||0)+(((n=t.match(Ywe))==null?void 0:n.length)||0)>0}const Tte="number",kte="color",Xwe="var",Qwe="var(",Q$="${}",Zwe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Aw(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Zwe,l=>(fi.test(l)?(r.color.push(s),i.push(kte),n.push(fi.parse(l))):l.startsWith(Qwe)?(r.var.push(s),i.push(Xwe),n.push(l)):(r.number.push(s),i.push(Tte),n.push(parseFloat(l))),++s,Q$)).split(Q$);return{values:n,split:a,indexes:r,types:i}}function Cte(t){return Aw(t).values}function Nte(t){const{split:e,types:n}=Aw(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Tte?s+=iw(i[o]):a===kte?s+=fi.transform(i[o]):s+=i[o]}return s}}const e1e=t=>typeof t=="number"?0:fi.test(t)?fi.getAnimatableNone(t):t;function t1e(t){const e=Cte(t);return Nte(t)(e.map(e1e))}const ah={test:Jwe,parse:Cte,createTransformer:Nte,getAnimatableNone:t1e};function GI(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function n1e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=GI(l,a,t+1/3),s=GI(l,a,t),o=GI(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function GT(t,e){return n=>n>0?e:t}const Lr=(t,e,n)=>t+(e-t)*n,KI=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},r1e=[u3,Ep,Cg],i1e=t=>r1e.find(e=>e.test(t));function Z$(t){const e=i1e(t);if(!e)return!1;let n=e.parse(t);return e===Cg&&(n=n1e(n)),n}const ez=(t,e)=>{const n=Z$(t),r=Z$(e);if(!n||!r)return GT(t,e);const i={...n};return s=>(i.red=KI(n.red,r.red,s),i.green=KI(n.green,r.green,s),i.blue=KI(n.blue,r.blue,s),i.alpha=Lr(n.alpha,r.alpha,s),Ep.transform(i))},d3=new Set(["none","hidden"]);function s1e(t,e){return d3.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function o1e(t,e){return n=>Lr(t,e,n)}function KD(t){return typeof t=="number"?o1e:typeof t=="string"?VD(t)?GT:fi.test(t)?ez:c1e:Array.isArray(t)?Pte:typeof t=="object"?fi.test(t)?ez:a1e:GT}function Pte(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>KD(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function a1e(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=KD(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function l1e(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const c1e=(t,e)=>{const n=ah.createTransformer(e),r=Aw(t),i=Aw(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?d3.has(t)&&!i.values.length||d3.has(e)&&!r.values.length?s1e(t,e):D1(Pte(l1e(r,i),i.values),n):GT(t,e)};function _te(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Lr(t,e,n):KD(t)(t,e)}const u1e=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>kr.update(e,n),stop:()=>oh(e),now:()=>ns.isProcessing?ns.timestamp:wo.now()}},Ite=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},KT=2e4;function WD(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<KT;)e+=n,r=t.next(e);return e>=KT?1/0:e}function d1e(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(WD(r),KT);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Ka(i)}}const f1e=5;function Rte(t,e,n){const r=Math.max(e-f1e,0);return ute(n-t(r),e-r)}const Hr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},WI=.001;function h1e({duration:t=Hr.duration,bounce:e=Hr.bounce,velocity:n=Hr.velocity,mass:r=Hr.mass}){let i,s,o=1-e;o=od(Hr.minDamping,Hr.maxDamping,o),t=od(Hr.minDuration,Hr.maxDuration,Ka(t)),o<1?(i=c=>{const u=c*o,h=u*t,m=u-n,g=f3(c,o),x=Math.exp(-h);return WI-m/g*x},s=c=>{const h=c*o*t,m=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,x=Math.exp(-h),v=f3(Math.pow(c,2),o);return(-i(c)+WI>0?-1:1)*((m-g)*x)/v}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-WI+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=m1e(i,s,a);if(t=Ic(t),isNaN(l))return{stiffness:Hr.stiffness,damping:Hr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const p1e=12;function m1e(t,e,n){let r=n;for(let i=1;i<p1e;i++)r=r-t(r)/e(r);return r}function f3(t,e){return t*Math.sqrt(1-e*e)}const g1e=["duration","bounce"],y1e=["stiffness","damping","mass"];function tz(t,e){return e.some(n=>t[n]!==void 0)}function x1e(t){let e={velocity:Hr.velocity,stiffness:Hr.stiffness,damping:Hr.damping,mass:Hr.mass,isResolvedFromDuration:!1,...t};if(!tz(t,y1e)&&tz(t,g1e))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*od(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Hr.mass,stiffness:i,damping:s}}else{const n=h1e(t);e={...e,...n,mass:Hr.mass},e.isResolvedFromDuration=!0}return e}function WT(t=Hr.visualDuration,e=Hr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:m,isResolvedFromDuration:g}=x1e({...n,velocity:-Ka(n.velocity||0)}),x=m||0,v=c/(2*Math.sqrt(l*u)),b=o-s,w=Ka(Math.sqrt(l/u)),k=Math.abs(b)<5;r||(r=k?Hr.restSpeed.granular:Hr.restSpeed.default),i||(i=k?Hr.restDelta.granular:Hr.restDelta.default);let C;if(v<1){const B=f3(w,v);C=O=>{const F=Math.exp(-v*w*O);return o-F*((x+v*w*b)/B*Math.sin(B*O)+b*Math.cos(B*O))}}else if(v===1)C=B=>o-Math.exp(-w*B)*(b+(x+w*b)*B);else{const B=w*Math.sqrt(v*v-1);C=O=>{const F=Math.exp(-v*w*O),H=Math.min(B*O,300);return o-F*((x+v*w*b)*Math.sinh(H)+B*b*Math.cosh(H))/B}}const R={calculatedDuration:g&&h||null,next:B=>{const O=C(B);if(g)a.done=B>=h;else{let F=B===0?x:0;v<1&&(F=B===0?Ic(x):Rte(C,B,O));const H=Math.abs(F)<=r,j=Math.abs(o-O)<=i;a.done=H&&j}return a.value=a.done?o:O,a},toString:()=>{const B=Math.min(WD(R),KT),O=Ite(F=>R.next(B*F).value,B,30);return B+"ms "+O},toTransition:()=>{}};return R}WT.applyToOptions=t=>{const e=d1e(t,100,WT);return t.ease=e.ease,t.duration=Ic(e.duration),t.type="keyframes",t};function h3({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},g=H=>a!==void 0&&H<a||l!==void 0&&H>l,x=H=>a===void 0?l:l===void 0||Math.abs(a-H)<Math.abs(l-H)?a:l;let v=n*e;const b=h+v,w=o===void 0?b:o(b);w!==b&&(v=w-h);const k=H=>-v*Math.exp(-H/r),C=H=>w+k(H),R=H=>{const j=k(H),$=C(H);m.done=Math.abs(j)<=c,m.value=m.done?w:$};let B,O;const F=H=>{g(m.value)&&(B=H,O=WT({keyframes:[m.value,x(m.value)],velocity:Rte(C,H,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return F(0),{calculatedDuration:null,next:H=>{let j=!1;return!O&&B===void 0&&(j=!0,R(H),F(H)),B!==void 0&&H>=B?O.next(H-B):(!j&&R(H),m)}}}function v1e(t,e,n){const r=[],i=n||ad.mix||_te,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ya:e;a=D1(l,a)}r.push(a)}return r}function b1e(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(UD(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=v1e(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const m=Ew(t[h],t[h+1],u);return a[h](m)};return n?u=>c(od(t[0],t[s-1],u)):c}function w1e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ew(0,e,r);t.push(Lr(n,1,i))}}function E1e(t){const e=[0];return w1e(e,t.length-1),e}function S1e(t,e){return t.map(n=>n*e)}function A1e(t,e){return t.map(()=>e||vte).splice(0,t.length-1)}function sw({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Lwe(r)?r.map(J$):J$(r),s={done:!1,value:e[0]},o=S1e(n&&n.length===e.length?n:E1e(e),t),a=b1e(o,e,{ease:Array.isArray(i)?i:A1e(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const T1e=t=>t!==null;function YD(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(T1e),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const k1e={decay:h3,inertia:h3,tween:sw,keyframes:sw,spring:WT};function Ote(t){typeof t.type=="string"&&(t.type=k1e[t.type])}class JD{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const C1e=t=>t/100;class XD extends JD{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==wo.now()&&this.tick(wo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Ote(e);const{type:n=sw,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||sw;l!==sw&&typeof a[0]!="number"&&(this.mixKeyframes=D1(C1e,_te(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=WD(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:g,type:x,onUpdate:v,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let C=this.currentTime,R=r;if(h){const H=Math.min(this.currentTime,i)/a;let j=Math.floor(H),$=H%1;!$&&H>=1&&($=1),$===1&&j--,j=Math.min(j,h+1),!!(j%2)&&(m==="reverse"?($=1-$,g&&($-=g/a)):m==="mirror"&&(R=o)),C=od(0,1,$)*a}const B=k?{done:!1,value:u[0]}:R.next(C);s&&(B.value=s(B.value));let{done:O}=B;!k&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return F&&x!==h3&&(B.value=YD(u,this.options,b,this.speed)),v&&v(B.value),F&&this.finish(),B}then(e,n){return this.finished.then(e,n)}get duration(){return Ka(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ka(e)}get time(){return Ka(this.currentTime)}set time(e){var n;e=Ic(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(wo.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ka(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=u1e,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(wo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function N1e(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Sp=t=>t*180/Math.PI,p3=t=>{const e=Sp(Math.atan2(t[1],t[0]));return m3(e)},P1e={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:p3,rotateZ:p3,skewX:t=>Sp(Math.atan(t[1])),skewY:t=>Sp(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},m3=t=>(t=t%360,t<0&&(t+=360),t),nz=p3,rz=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),iz=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),_1e={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:rz,scaleY:iz,scale:t=>(rz(t)+iz(t))/2,rotateX:t=>m3(Sp(Math.atan2(t[6],t[5]))),rotateY:t=>m3(Sp(Math.atan2(-t[2],t[0]))),rotateZ:nz,rotate:nz,skewX:t=>Sp(Math.atan(t[4])),skewY:t=>Sp(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function g3(t){return t.includes("scale")?1:0}function y3(t,e){if(!t||t==="none")return g3(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=_1e,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=P1e,i=a}if(!i)return g3(e);const s=r[e],o=i[1].split(",").map(R1e);return typeof s=="function"?s(o):o[s]}const I1e=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return y3(n,e)};function R1e(t){return parseFloat(t.trim())}const Fx=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$x=new Set(Fx),sz=t=>t===Ux||t===Qt,O1e=new Set(["x","y","z"]),M1e=Fx.filter(t=>!O1e.has(t));function L1e(t){const e=[];return M1e.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const rm={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>y3(e,"x"),y:(t,{transform:e})=>y3(e,"y")};rm.translateX=rm.x;rm.translateY=rm.y;const im=new Set;let x3=!1,v3=!1,b3=!1;function Mte(){if(v3){const t=Array.from(im).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=L1e(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}v3=!1,x3=!1,im.forEach(t=>t.complete(b3)),im.clear()}function Lte(){im.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(v3=!0)})}function D1e(){b3=!0,Lte(),Mte(),b3=!1}class QD{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(im.add(this),x3||(x3=!0,kr.read(Lte),kr.resolveKeyframes(Mte))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}N1e(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),im.delete(this)}cancel(){this.state==="scheduled"&&(im.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const j1e=t=>t.startsWith("--");function B1e(t,e,n){j1e(e)?t.style.setProperty(e,n):t.style[e]=n}const U1e=FD(()=>window.ScrollTimeline!==void 0),F1e={};function $1e(t,e){const n=FD(t);return()=>F1e[e]??n()}const Dte=$1e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Fb=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,oz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fb([0,.65,.55,1]),circOut:Fb([.55,0,1,.45]),backIn:Fb([.31,.01,.66,-.59]),backOut:Fb([.33,1.53,.69,.99])};function jte(t,e){if(t)return typeof t=="function"?Dte()?Ite(t,e):"ease-out":bte(t)?Fb(t):Array.isArray(t)?t.map(n=>jte(n,e)||oz.easeOut):oz[t]}function z1e(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const h=jte(a,i);Array.isArray(h)&&(u.easing=h);const m={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(u,m)}function Bte(t){return typeof t=="function"&&"applyToOptions"in t}function H1e({type:t,...e}){return Bte(t)&&Dte()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class V1e extends JD{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,UD(typeof e.type!="string");const c=H1e(e);this.animation=z1e(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=YD(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):B1e(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ka(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ka(e)}get time(){return Ka(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ic(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&U1e()?(this.animation.timeline=e,Ya):n(this)}}const Ute={anticipate:gte,backInOut:mte,circInOut:xte};function q1e(t){return t in Ute}function G1e(t){typeof t.ease=="string"&&q1e(t.ease)&&(t.ease=Ute[t.ease])}const az=10;class K1e extends V1e{constructor(e){G1e(e),Ote(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new XD({...o,autoplay:!1}),l=Ic(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-az).value,a.sample(l).value,az),a.stop()}}const lz=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ah.test(t)||t==="0")&&!t.startsWith("url("));function W1e(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Y1e(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=lz(i,e),a=lz(s,e);return!o||!a?!1:W1e(t)||(n==="spring"||Bte(n))&&r}function w3(t){t.duration=0,t.type="keyframes"}const J1e=new Set(["opacity","clipPath","filter","transform"]),X1e=FD(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Q1e(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return X1e()&&n&&J1e.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const Z1e=40;class eEe extends JD{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...h}){var x;super(),this.stop=()=>{var v,b;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=wo.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...h},g=(u==null?void 0:u.KeyframeResolver)||QD;this.keyframeResolver=new g(a,(v,b,w)=>this.onKeyframesResolved(v,b,m,!w),l,c,u),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=wo.now(),Y1e(e,s,o,a)||((ad.instantAnimations||!l)&&(u==null||u(YD(e,r,n))),e[0]=e[e.length-1],w3(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Z1e?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&Q1e(m)?new K1e({...m,element:m.motionValue.owner.current}):new XD(m);g.finished.then(()=>this.notifyFinished()).catch(Ya),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),D1e()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const tEe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function nEe(t){const e=tEe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Fte(t,e,n=1){const[r,i]=nEe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return ate(o)?parseFloat(o):o}return VD(i)?Fte(i,e,n+1):i}function ZD(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const $te=new Set(["width","height","top","left","right","bottom",...Fx]),rEe={test:t=>t==="auto",parse:t=>t},zte=t=>e=>e.test(t),Hte=[Ux,Qt,Rc,Sf,Wwe,Kwe,rEe],cz=t=>Hte.find(zte(t));function iEe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||cte(t):!0}const sEe=new Set(["brightness","contrast","saturate","opacity"]);function oEe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(qD)||[];if(!r)return t;const i=n.replace(r,"");let s=sEe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const aEe=/\b([a-z-]*)\(.*?\)/gu,E3={...ah,getAnimatableNone:t=>{const e=t.match(aEe);return e?e.map(oEe).join(" "):t}},uz={...Ux,transform:Math.round},lEe={rotate:Sf,rotateX:Sf,rotateY:Sf,rotateZ:Sf,scale:KS,scaleX:KS,scaleY:KS,scaleZ:KS,skew:Sf,skewX:Sf,skewY:Sf,distance:Qt,translateX:Qt,translateY:Qt,translateZ:Qt,x:Qt,y:Qt,z:Qt,perspective:Qt,transformPerspective:Qt,opacity:Sw,originX:X$,originY:X$,originZ:Qt},e8={borderWidth:Qt,borderTopWidth:Qt,borderRightWidth:Qt,borderBottomWidth:Qt,borderLeftWidth:Qt,borderRadius:Qt,radius:Qt,borderTopLeftRadius:Qt,borderTopRightRadius:Qt,borderBottomRightRadius:Qt,borderBottomLeftRadius:Qt,width:Qt,maxWidth:Qt,height:Qt,maxHeight:Qt,top:Qt,right:Qt,bottom:Qt,left:Qt,padding:Qt,paddingTop:Qt,paddingRight:Qt,paddingBottom:Qt,paddingLeft:Qt,margin:Qt,marginTop:Qt,marginRight:Qt,marginBottom:Qt,marginLeft:Qt,backgroundPositionX:Qt,backgroundPositionY:Qt,...lEe,zIndex:uz,fillOpacity:Sw,strokeOpacity:Sw,numOctaves:uz},cEe={...e8,color:fi,backgroundColor:fi,outlineColor:fi,fill:fi,stroke:fi,borderColor:fi,borderTopColor:fi,borderRightColor:fi,borderBottomColor:fi,borderLeftColor:fi,filter:E3,WebkitFilter:E3},Vte=t=>cEe[t];function qte(t,e){let n=Vte(t);return n!==E3&&(n=ah),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const uEe=new Set(["auto","none","0"]);function dEe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!uEe.has(s)&&Aw(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=qte(n,i)}class fEe extends QD{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),VD(c))){const u=Fte(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!$te.has(r)||e.length!==2)return;const[i,s]=e,o=cz(i),a=cz(s);if(o!==a)if(sz(o)&&sz(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else rm[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||iEe(e[i]))&&r.push(i);r.length&&dEe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rm[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=rm[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function hEe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Gte=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Kte(t){return lte(t)&&"offsetHeight"in t}const dz=30,pEe=t=>!isNaN(parseFloat(t));class mEe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=wo.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=wo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=pEe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new $D);const r=this.events[e].add(n);return e==="change"?()=>{r(),kr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=wo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dz)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dz);return ute(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ax(t,e){return new mEe(t,e)}const{schedule:t8}=wte(queueMicrotask,!1),dl={x:!1,y:!1};function Wte(){return dl.x||dl.y}function gEe(t){return t==="x"||t==="y"?dl[t]?null:(dl[t]=!0,()=>{dl[t]=!1}):dl.x||dl.y?null:(dl.x=dl.y=!0,()=>{dl.x=dl.y=!1})}function Yte(t,e){const n=hEe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function fz(t){return!(t.pointerType==="touch"||Wte())}function yEe(t,e,n={}){const[r,i,s]=Yte(t,n),o=a=>{if(!fz(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=h=>{fz(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const Jte=(t,e)=>e?t===e?!0:Jte(t,e.parentElement):!1,n8=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,xEe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vEe(t){return xEe.has(t.tagName)||t.tabIndex!==-1}const lT=new WeakSet;function hz(t){return e=>{e.key==="Enter"&&t(e)}}function YI(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const bEe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=hz(()=>{if(lT.has(n))return;YI(n,"down");const i=hz(()=>{YI(n,"up")}),s=()=>YI(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function pz(t){return n8(t)&&!Wte()}function wEe(t,e,n={}){const[r,i,s]=Yte(t,n),o=a=>{const l=a.currentTarget;if(!pz(a))return;lT.add(l);const c=e(l,a),u=(g,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),lT.has(l)&&lT.delete(l),pz(g)&&typeof c=="function"&&c(g,{success:x})},h=g=>{u(g,l===window||l===document||n.useGlobalTarget||Jte(l,g.target))},m=g=>{u(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),Kte(a)&&(a.addEventListener("focus",c=>bEe(c,i)),!vEe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function Xte(t){return lte(t)&&"ownerSVGElement"in t}function EEe(t){return Xte(t)&&t.tagName==="svg"}const Rs=t=>!!(t&&t.getVelocity),SEe=[...Hte,fi,ah],AEe=t=>SEe.find(zte(t)),r8=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function mz(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function TEe(...t){return e=>{let n=!1;const r=t.map(i=>{const s=mz(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():mz(t[i],null)}}}}function kEe(...t){return A.useCallback(TEe(...t),t)}class CEe extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Kte(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function NEe({children:t,isPresent:e,anchorX:n,root:r}){const i=A.useId(),s=A.useRef(null),o=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=A.useContext(r8),l=kEe(s,t==null?void 0:t.ref);return A.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:m,right:g}=o.current;if(e||!s.current||!c||!u)return;const x=n==="left"?`left: ${m}`:`right: ${g}`;s.current.dataset.motionPopId=i;const v=document.createElement("style");a&&(v.nonce=a);const b=r??document.head;return b.appendChild(v),v.sheet&&v.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(v)&&b.removeChild(v)}},[e]),d.jsx(CEe,{isPresent:e,childRef:s,sizeRef:o,children:A.cloneElement(t,{ref:l})})}const PEe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=LD(_Ee),u=A.useId();let h=!0,m=A.useMemo(()=>(h=!1,{id:u,initial:e,isPresent:n,custom:i,onExitComplete:g=>{c.set(g,!0);for(const x of c.values())if(!x)return;r&&r()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[n,c,r]);return s&&h&&(m={...m}),A.useMemo(()=>{c.forEach((g,x)=>c.set(x,!1))},[n]),A.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(NEe,{isPresent:n,anchorX:a,root:l,children:t})),d.jsx(lC.Provider,{value:m,children:t})};function _Ee(){return new Map}function Qte(t=!0){const e=A.useContext(lC);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=A.useId();A.useEffect(()=>{if(t)return i(s)},[t]);const o=A.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const WS=t=>t.key||"";function gz(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const Zs=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=Qte(o),h=A.useMemo(()=>gz(t),[t]),m=o&&!c?[]:h.map(WS),g=A.useRef(!0),x=A.useRef(h),v=LD(()=>new Map),[b,w]=A.useState(h),[k,C]=A.useState(h);ote(()=>{g.current=!1,x.current=h;for(let O=0;O<k.length;O++){const F=WS(k[O]);m.includes(F)?v.delete(F):v.get(F)!==!0&&v.set(F,!1)}},[k,m.length,m.join("-")]);const R=[];if(h!==b){let O=[...h];for(let F=0;F<k.length;F++){const H=k[F],j=WS(H);m.includes(j)||(O.splice(F,0,H),R.push(H))}return s==="wait"&&R.length&&(O=R),C(gz(O)),w(h),null}const{forceRender:B}=A.useContext(MD);return d.jsx(d.Fragment,{children:k.map(O=>{const F=WS(O),H=o&&!c?!1:h===k||m.includes(F),j=()=>{if(v.has(F))v.set(F,!0);else return;let $=!0;v.forEach(W=>{W||($=!1)}),$&&(B==null||B(),C(x.current),o&&(u==null||u()),r&&r())};return d.jsx(PEe,{isPresent:H,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:H?void 0:j,anchorX:a,children:O},F)})})},Zte=A.createContext({strict:!1}),yz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},lx={};for(const t in yz)lx[t]={isEnabled:e=>yz[t].some(n=>!!e[n])};function IEe(t){for(const e in t)lx[e]={...lx[e],...t[e]}}const REe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function YT(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||REe.has(t)}let ene=t=>!YT(t);function OEe(t){typeof t=="function"&&(ene=e=>e.startsWith("on")?!YT(e):t(e))}try{OEe(require("@emotion/is-prop-valid").default)}catch{}function MEe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(ene(i)||n===!0&&YT(i)||!e&&!YT(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const cC=A.createContext({});function uC(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Tw(t){return typeof t=="string"||Array.isArray(t)}const i8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],s8=["initial",...i8];function dC(t){return uC(t.animate)||s8.some(e=>Tw(t[e]))}function tne(t){return!!(dC(t)||t.variants)}function LEe(t,e){if(dC(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Tw(n)?n:void 0,animate:Tw(r)?r:void 0}}return t.inherit!==!1?e:{}}function DEe(t){const{initial:e,animate:n}=LEe(t,A.useContext(cC));return A.useMemo(()=>({initial:e,animate:n}),[xz(e),xz(n)])}function xz(t){return Array.isArray(t)?t.join(" "):t}function vz(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const pb={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Qt.test(t))t=parseFloat(t);else return t;const n=vz(t,e.target.x),r=vz(t,e.target.y);return`${n}% ${r}%`}},jEe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ah.parse(t);if(i.length>5)return r;const s=ah.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Lr(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},S3={borderRadius:{...pb,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pb,borderTopRightRadius:pb,borderBottomLeftRadius:pb,borderBottomRightRadius:pb,boxShadow:jEe};function nne(t,{layout:e,layoutId:n}){return $x.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!S3[t]||t==="opacity")}const BEe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},UEe=Fx.length;function FEe(t,e,n){let r="",i=!0;for(let s=0;s<UEe;s++){const o=Fx[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Gte(a,e8[o]);if(!l){i=!1;const u=BEe[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function o8(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if($x.has(l)){o=!0;continue}else if(Ste(l)){i[l]=c;continue}else{const u=Gte(c,e8[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=FEe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const a8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rne(t,e,n){for(const r in e)!Rs(e[r])&&!nne(r,n)&&(t[r]=e[r])}function $Ee({transformTemplate:t},e){return A.useMemo(()=>{const n=a8();return o8(n,e,t),Object.assign({},n.vars,n.style)},[e])}function zEe(t,e){const n=t.style||{},r={};return rne(r,n,t),Object.assign(r,$Ee(t,e)),r}function HEe(t,e){const n={},r=zEe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const VEe={offset:"stroke-dashoffset",array:"stroke-dasharray"},qEe={offset:"strokeDashoffset",array:"strokeDasharray"};function GEe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?VEe:qEe;t[s.offset]=Qt.transform(-r);const o=Qt.transform(e),a=Qt.transform(n);t[s.array]=`${o} ${a}`}function ine(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(o8(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&GEe(h,i,s,o,!1)}const sne=()=>({...a8(),attrs:{}}),one=t=>typeof t=="string"&&t.toLowerCase()==="svg";function KEe(t,e,n,r){const i=A.useMemo(()=>{const s=sne();return ine(s,e,one(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};rne(s,t.style,t),i.style={...s,...i.style}}return i}const WEe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function l8(t){return typeof t!="string"||t.includes("-")?!1:!!(WEe.indexOf(t)>-1||/[A-Z]/u.test(t))}function YEe(t,e,n,{latestValues:r},i,s=!1){const a=(l8(t)?KEe:HEe)(e,r,i,t),l=MEe(e,typeof t=="string",s),c=t!==A.Fragment?{...l,...a,ref:n}:{},{children:u}=e,h=A.useMemo(()=>Rs(u)?u.get():u,[u]);return A.createElement(t,{...c,children:h})}function bz(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function c8(t,e,n,r){if(typeof e=="function"){const[i,s]=bz(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=bz(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function cT(t){return Rs(t)?t.get():t}function JEe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:XEe(n,r,i,t),renderState:e()}}function XEe(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=cT(s[m]);let{initial:o,animate:a}=t;const l=dC(t),c=tne(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!uC(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const x=c8(t,m[g]);if(x){const{transitionEnd:v,transition:b,...w}=x;for(const k in w){let C=w[k];if(Array.isArray(C)){const R=u?C.length-1:0;C=C[R]}C!==null&&(i[k]=C)}for(const k in v)i[k]=v[k]}}}return i}const ane=t=>(e,n)=>{const r=A.useContext(cC),i=A.useContext(lC),s=()=>JEe(t,e,r,i);return n?s():LD(s)};function u8(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Rs(r[o])||e.style&&Rs(e.style[o])||nne(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const QEe=ane({scrapeMotionValuesFromProps:u8,createRenderState:a8});function lne(t,e,n){const r=u8(t,e,n);for(const i in t)if(Rs(t[i])||Rs(e[i])){const s=Fx.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const ZEe=ane({scrapeMotionValuesFromProps:lne,createRenderState:sne}),eSe=Symbol.for("motionComponentSymbol");function Ng(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function tSe(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ng(n)&&(n.current=r))},[e])}const d8=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nSe="framerAppearId",cne="data-"+d8(nSe),une=A.createContext({});function rSe(t,e,n,r,i){var v,b;const{visualElement:s}=A.useContext(cC),o=A.useContext(Zte),a=A.useContext(lC),l=A.useContext(r8).reducedMotion,c=A.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=A.useContext(une);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&iSe(c.current,n,i,h);const m=A.useRef(!1);A.useInsertionEffect(()=>{u&&m.current&&u.update(n,a)});const g=n[cne],x=A.useRef(!!g&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return ote(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),x.current&&u.animationState&&u.animationState.animateChanges())}),A.useEffect(()=>{u&&(!x.current&&u.animationState&&u.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),x.current=!1),u.enteringChildren=void 0)}),u}function iSe(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:dne(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ng(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function dne(t){if(t)return t.options.allowProjection!==!1?t.projection:dne(t.parent)}function JI(t,{forwardMotionProps:e=!1}={},n,r){n&&IEe(n);const i=l8(t)?ZEe:QEe;function s(a,l){let c;const u={...A.useContext(r8),...a,layoutId:sSe(a)},{isStatic:h}=u,m=DEe(a),g=i(a,h);if(!h&&DD){oSe();const x=aSe(u);c=x.MeasureLayout,m.visualElement=rSe(t,g,u,r,x.ProjectionNode)}return d.jsxs(cC.Provider,{value:m,children:[c&&m.visualElement?d.jsx(c,{visualElement:m.visualElement,...u}):null,YEe(t,a,tSe(g,m.visualElement,l),g,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=A.forwardRef(s);return o[eSe]=t,o}function sSe({layoutId:t}){const e=A.useContext(MD).id;return e&&t!==void 0?e+"-"+t:t}function oSe(t,e){A.useContext(Zte).strict}function aSe(t){const{drag:e,layout:n}=lx;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function lSe(t,e){if(typeof Proxy>"u")return JI;const n=new Map,r=(s,o)=>JI(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,JI(o,void 0,t,e)),n.get(o))})}function fne({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function cSe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uSe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function XI(t){return t===void 0||t===1}function A3({scale:t,scaleX:e,scaleY:n}){return!XI(t)||!XI(e)||!XI(n)}function sp(t){return A3(t)||hne(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function hne(t){return wz(t.x)||wz(t.y)}function wz(t){return t&&t!=="0%"}function JT(t,e,n){const r=t-n,i=e*r;return n+i}function Ez(t,e,n,r,i){return i!==void 0&&(t=JT(t,i,r)),JT(t,n,r)+e}function T3(t,e=0,n=1,r,i){t.min=Ez(t.min,e,n,r,i),t.max=Ez(t.max,e,n,r,i)}function pne(t,{x:e,y:n}){T3(t.x,e.translate,e.scale,e.originPoint),T3(t.y,n.translate,n.scale,n.originPoint)}const Sz=.999999999999,Az=1.0000000000001;function dSe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&_g(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,pne(t,o)),r&&sp(s.latestValues)&&_g(t,s.latestValues))}e.x<Az&&e.x>Sz&&(e.x=1),e.y<Az&&e.y>Sz&&(e.y=1)}function Pg(t,e){t.min=t.min+e,t.max=t.max+e}function Tz(t,e,n,r,i=.5){const s=Lr(t.min,t.max,i);T3(t,e,n,s,r)}function _g(t,e){Tz(t.x,e.x,e.scaleX,e.scale,e.originX),Tz(t.y,e.y,e.scaleY,e.scale,e.originY)}function mne(t,e){return fne(uSe(t.getBoundingClientRect(),e))}function fSe(t,e,n){const r=mne(t,n),{scroll:i}=e;return i&&(Pg(r.x,i.offset.x),Pg(r.y,i.offset.y)),r}const kz=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ig=()=>({x:kz(),y:kz()}),Cz=()=>({min:0,max:0}),Ei=()=>({x:Cz(),y:Cz()}),k3={current:null},gne={current:!1};function hSe(){if(gne.current=!0,!!DD)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>k3.current=t.matches;t.addEventListener("change",e),e()}else k3.current=!1}const pSe=new WeakMap;function mSe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Rs(i))t.addValue(r,i);else if(Rs(s))t.addValue(r,ax(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,ax(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Nz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class gSe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=QD,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=wo.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,kr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=dC(n),this.isVariantNode=tne(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&Rs(g)&&g.set(l[m])}}mount(e){var n;this.current=e,pSe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),gne.current||hSe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:k3.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),oh(this.notifyUpdate),oh(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=$x.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&kr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in lx){const n=lx[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ei()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Nz.length;r++){const i=Nz[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=mSe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ax(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ate(r)||cte(r))?r=parseFloat(r):!AEe(r)&&ah.test(n)&&(r=qte(e,n)),this.setBaseTarget(e,Rs(r)?r.get():r)),Rs(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=c8(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Rs(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new $D),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){t8.render(this.render)}}class yne extends gSe{constructor(){super(...arguments),this.KeyframeResolver=fEe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rs(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function xne(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function ySe(t){return window.getComputedStyle(t)}class xSe extends yne{constructor(){super(...arguments),this.type="html",this.renderInstance=xne}readValueFromInstance(e,n){var r;if($x.has(n))return(r=this.projection)!=null&&r.isProjecting?g3(n):I1e(e,n);{const i=ySe(e),s=(Ste(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return mne(e,n)}build(e,n,r){o8(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return u8(e,n,r)}}const vne=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vSe(t,e,n,r){xne(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(vne.has(i)?i:d8(i),e.attrs[i])}class bSe extends yne{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ei}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if($x.has(n)){const r=Vte(n);return r&&r.default||0}return n=vne.has(n)?n:d8(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return lne(e,n,r)}build(e,n,r){ine(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){vSe(e,n,r,i)}mount(e){this.isSVGTag=one(e.tagName),super.mount(e)}}const wSe=(t,e)=>l8(t)?new bSe(e):new xSe(e,{allowProjection:t!==A.Fragment});function Yg(t,e,n){const r=t.getProps();return c8(r,e,n!==void 0?n:r.custom,t)}const C3=t=>Array.isArray(t);function ESe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ax(n))}function SSe(t){return C3(t)?t[t.length-1]||0:t}function ASe(t,e){const n=Yg(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=SSe(s[o]);ESe(t,o,a)}}function TSe(t){return!!(Rs(t)&&t.add)}function N3(t,e){const n=t.getValue("willChange");if(TSe(n))return n.add(e);if(!n&&ad.WillChange){const r=new ad.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function bne(t){return t.props[cne]}const kSe=t=>t!==null;function CSe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(kSe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const NSe={type:"spring",stiffness:500,damping:25,restSpeed:10},PSe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_Se={type:"keyframes",duration:.8},ISe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},RSe=(t,{keyframes:e})=>e.length>2?_Se:$x.has(t)?t.startsWith("scale")?PSe(e[1]):NSe:ISe;function OSe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const f8=(t,e,n,r={},i,s)=>o=>{const a=ZD(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Ic(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};OSe(a)||Object.assign(u,RSe(t,u)),u.duration&&(u.duration=Ic(u.duration)),u.repeatDelay&&(u.repeatDelay=Ic(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(w3(u),u.delay===0&&(h=!0)),(ad.instantAnimations||ad.skipAnimations)&&(h=!0,w3(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const m=CSe(u.keyframes,a);if(m!==void 0){kr.update(()=>{u.onUpdate(m),u.onComplete()});return}}return a.isSync?new XD(u):new eEe(u)};function MSe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function wne(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in a){const h=t.getValue(u,t.latestValues[u]??null),m=a[u];if(m===void 0||c&&MSe(c,u))continue;const g={delay:n,...ZD(s||{},u)},x=h.get();if(x!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===x&&!g.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const w=bne(t);if(w){const k=window.MotionHandoffAnimation(w,u,kr);k!==null&&(g.startTime=k,v=!0)}}N3(t,u),h.start(f8(u,h,m,t.shouldReduceMotion&&$te.has(u)?{type:!1}:g,t,v));const b=h.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{kr.update(()=>{o&&ASe(t,o)})}),l}function Ene(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function P3(t,e,n={}){var l;const r=Yg(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(wne(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=i;return LSe(t,e,c,u,h,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function LSe(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(P3(l,e,{...o,delay:n+(typeof r=="function"?0:r)+Ene(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function DSe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>P3(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=P3(t,e,n);else{const i=typeof e=="function"?Yg(t,e,n.custom):e;r=Promise.all(wne(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Sne(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const jSe=s8.length;function Ane(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Ane(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<jSe;n++){const r=s8[n],i=t.props[r];(Tw(i)||i===!1)&&(e[r]=i)}return e}const BSe=[...i8].reverse(),USe=i8.length;function FSe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>DSe(t,n,r)))}function $Se(t){let e=FSe(t),n=Pz(),r=!0;const i=l=>(c,u)=>{var m;const h=Yg(t,u,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:g,transitionEnd:x,...v}=h;c={...c,...v,...x}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=Ane(t.parent)||{},h=[],m=new Set;let g={},x=1/0;for(let b=0;b<USe;b++){const w=BSe[b],k=n[w],C=c[w]!==void 0?c[w]:u[w],R=Tw(C),B=w===l?k.isActive:null;B===!1&&(x=b);let O=C===u[w]&&C!==c[w]&&R;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),k.protectedKeys={...g},!k.isActive&&B===null||!C&&!k.prevProp||uC(C)||typeof C=="boolean")continue;const F=zSe(k.prevProp,C);let H=F||w===l&&k.isActive&&!O&&R||b>x&&R,j=!1;const $=Array.isArray(C)?C:[C];let W=$.reduce(i(w),{});B===!1&&(W={});const{prevResolvedValues:V={}}=k,U={...V,...W},T=z=>{H=!0,m.has(z)&&(j=!0,m.delete(z)),k.needsAnimating[z]=!0;const G=t.getValue(z);G&&(G.liveStyle=!1)};for(const z in U){const G=W[z],te=V[z];if(g.hasOwnProperty(z))continue;let K=!1;C3(G)&&C3(te)?K=!Sne(G,te):K=G!==te,K?G!=null?T(z):m.add(z):G!==void 0&&m.has(z)?T(z):k.protectedKeys[z]=!0}k.prevProp=C,k.prevResolvedValues=W,k.isActive&&(g={...g,...W}),r&&t.blockInitialAnimation&&(H=!1);const _=O&&F;H&&(!_||j)&&h.push(...$.map(z=>{const G={type:w};if(typeof z=="string"&&r&&!_&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,K=Yg(te,z);if(te.enteringChildren&&K){const{delayChildren:q}=K.transition||{};G.delay=Ene(te.enteringChildren,t,q)}}return{animation:z,options:G}}))}if(m.size){const b={};if(typeof c.initial!="boolean"){const w=Yg(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(b.transition=w.transition)}m.forEach(w=>{const k=t.getBaseTarget(w),C=t.getValue(w);C&&(C.liveStyle=!0),b[w]=k??null}),h.push({animation:b})}let v=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(h):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const m in n)n[m].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Pz()}}}function zSe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Sne(e,t):!1}function Jh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Pz(){return{animate:Jh(!0),whileInView:Jh(),whileHover:Jh(),whileTap:Jh(),whileDrag:Jh(),whileFocus:Jh(),exit:Jh()}}class vh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class HSe extends vh{constructor(e){super(e),e.animationState||(e.animationState=$Se(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();uC(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let VSe=0;class qSe extends vh{constructor(){super(...arguments),this.id=VSe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const GSe={animation:{Feature:HSe},exit:{Feature:qSe}};function kw(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function U1(t){return{point:{x:t.pageX,y:t.pageY}}}const KSe=t=>e=>n8(e)&&t(e,U1(e));function ow(t,e,n,r){return kw(t,e,KSe(n),r)}const Tne=1e-4,WSe=1-Tne,YSe=1+Tne,kne=.01,JSe=0-kne,XSe=0+kne;function Ys(t){return t.max-t.min}function QSe(t,e,n){return Math.abs(t-e)<=n}function _z(t,e,n,r=.5){t.origin=r,t.originPoint=Lr(e.min,e.max,t.origin),t.scale=Ys(n)/Ys(e),t.translate=Lr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=WSe&&t.scale<=YSe||isNaN(t.scale))&&(t.scale=1),(t.translate>=JSe&&t.translate<=XSe||isNaN(t.translate))&&(t.translate=0)}function aw(t,e,n,r){_z(t.x,e.x,n.x,r?r.originX:void 0),_z(t.y,e.y,n.y,r?r.originY:void 0)}function Iz(t,e,n){t.min=n.min+e.min,t.max=t.min+Ys(e)}function ZSe(t,e,n){Iz(t.x,e.x,n.x),Iz(t.y,e.y,n.y)}function Rz(t,e,n){t.min=e.min-n.min,t.max=t.min+Ys(e)}function XT(t,e,n){Rz(t.x,e.x,n.x),Rz(t.y,e.y,n.y)}function Ia(t){return[t("x"),t("y")]}const Cne=({current:t})=>t?t.ownerDocument.defaultView:null,Oz=(t,e)=>Math.abs(t-e);function eAe(t,e){const n=Oz(t.x,e.x),r=Oz(t.y,e.y);return Math.sqrt(n**2+r**2)}class Nne{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=ZI(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=eAe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:v}=m,{timestamp:b}=ns;this.history.push({...v,timestamp:b});const{onStart:w,onMove:k}=this.handlers;g||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=QI(g,this.transformPagePoint),kr.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:x,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=ZI(m.type==="pointercancel"?this.lastMoveEventInfo:QI(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,w),v&&v(m,w)},!n8(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=U1(e),l=QI(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=ns;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,ZI(l,this.history)),this.removeListeners=D1(ow(this.contextWindow,"pointermove",this.handlePointerMove),ow(this.contextWindow,"pointerup",this.handlePointerUp),ow(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),oh(this.updatePoint)}}function QI(t,e){return e?{point:e(t.point)}:t}function Mz(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ZI({point:t},e){return{point:t,delta:Mz(t,Pne(e)),offset:Mz(t,tAe(e)),velocity:nAe(e,.1)}}function tAe(t){return t[0]}function Pne(t){return t[t.length-1]}function nAe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Pne(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ic(e)));)n--;if(!r)return{x:0,y:0};const s=Ka(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function rAe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Lr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Lr(n,t,r.max):Math.min(t,n)),t}function Lz(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function iAe(t,{top:e,left:n,bottom:r,right:i}){return{x:Lz(t.x,n,i),y:Lz(t.y,e,r)}}function Dz(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function sAe(t,e){return{x:Dz(t.x,e.x),y:Dz(t.y,e.y)}}function oAe(t,e){let n=.5;const r=Ys(t),i=Ys(e);return i>r?n=Ew(e.min,e.max-r,t.min):r>i&&(n=Ew(t.min,t.max-i,e.min)),od(0,1,n)}function aAe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const _3=.35;function lAe(t=_3){return t===!1?t=0:t===!0&&(t=_3),{x:jz(t,"left","right"),y:jz(t,"top","bottom")}}function jz(t,e,n){return{min:Bz(t,e),max:Bz(t,n)}}function Bz(t,e){return typeof t=="number"?t:t[e]||0}const cAe=new WeakMap;class uAe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ei(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(U1(h).point)},o=(h,m)=>{const{drag:g,dragPropagation:x,onDragStart:v}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=gEe(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ia(w=>{let k=this.getAxisMotionValue(w).get()||0;if(Rc.test(k)){const{projection:C}=this.visualElement;if(C&&C.layout){const R=C.layout.layoutBox[w];R&&(k=Ys(R)*(parseFloat(k)/100))}}this.originPoint[w]=k}),v&&kr.postRender(()=>v(h,m)),N3(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:v,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=m;if(x&&this.currentDirection===null){this.currentDirection=dAe(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),b&&b(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Ia(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Nne(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:Cne(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&kr.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!YS(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=rAe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Ng(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=iAe(r.layoutBox,e):this.constraints=!1,this.elastic=lAe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ia(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=aAe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ng(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=fSe(r,i.root,this.visualElement.getTransformPagePoint());let o=sAe(i.layout.layoutBox,s);if(n){const a=n(cSe(o));this.hasMutatedConstraints=!!a,a&&(o=fne(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ia(u=>{if(!YS(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,x={type:"inertia",velocity:r?e[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return N3(this.visualElement,e),r.start(f8(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ia(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ia(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ia(n=>{const{drag:r}=this.getProps();if(!YS(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Lr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ng(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ia(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=oAe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ia(o=>{if(!YS(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Lr(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;cAe.set(this.visualElement,this);const e=this.visualElement.current,n=ow(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ng(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),kr.read(r);const o=kw(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ia(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=_3,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function YS(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function dAe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class fAe extends vh{constructor(e){super(e),this.removeGroupControls=Ya,this.removeListeners=Ya,this.controls=new uAe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ya}unmount(){this.removeGroupControls(),this.removeListeners()}}const Uz=t=>(e,n)=>{t&&kr.postRender(()=>t(e,n))};class hAe extends vh{constructor(){super(...arguments),this.removePointerDownListener=Ya}onPointerDown(e){this.session=new Nne(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Cne(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Uz(e),onStart:Uz(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&kr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ow(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const uT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let eR=!1;class pAe extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),eR&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),uT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,eR=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||kr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),t8.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;eR=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _ne(t){const[e,n]=Qte(),r=A.useContext(MD);return d.jsx(pAe,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(une),isPresent:e,safeToRemove:n})}function mAe(t,e,n){const r=Rs(t)?t:ax(t);return r.start(f8("",r,e,n)),r.animation}const gAe=(t,e)=>t.depth-e.depth;class yAe{constructor(){this.children=[],this.isDirty=!1}add(e){jD(this.children,e),this.isDirty=!0}remove(e){BD(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gAe),this.isDirty=!1,this.children.forEach(e)}}function xAe(t,e){const n=wo.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(oh(r),t(s-e))};return kr.setup(r,!0),()=>oh(r)}const Ine=["TopLeft","TopRight","BottomLeft","BottomRight"],vAe=Ine.length,Fz=t=>typeof t=="string"?parseFloat(t):t,$z=t=>typeof t=="number"||Qt.test(t);function bAe(t,e,n,r,i,s){i?(t.opacity=Lr(0,n.opacity??1,wAe(r)),t.opacityExit=Lr(e.opacity??1,0,EAe(r))):s&&(t.opacity=Lr(e.opacity??1,n.opacity??1,r));for(let o=0;o<vAe;o++){const a=`border${Ine[o]}Radius`;let l=zz(e,a),c=zz(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||$z(l)===$z(c)?(t[a]=Math.max(Lr(Fz(l),Fz(c),r),0),(Rc.test(c)||Rc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Lr(e.rotate||0,n.rotate||0,r))}function zz(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const wAe=Rne(0,.5,yte),EAe=Rne(.5,.95,Ya);function Rne(t,e,n){return r=>r<t?0:r>e?1:n(Ew(t,e,r))}function Hz(t,e){t.min=e.min,t.max=e.max}function cl(t,e){Hz(t.x,e.x),Hz(t.y,e.y)}function Vz(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function qz(t,e,n,r,i){return t-=e,t=JT(t,1/n,r),i!==void 0&&(t=JT(t,1/i,r)),t}function SAe(t,e=0,n=1,r=.5,i,s=t,o=t){if(Rc.test(e)&&(e=parseFloat(e),e=Lr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Lr(s.min,s.max,r);t===s&&(a-=e),t.min=qz(t.min,e,n,a,i),t.max=qz(t.max,e,n,a,i)}function Gz(t,e,[n,r,i],s,o){SAe(t,e[n],e[r],e[i],e.scale,s,o)}const AAe=["x","scaleX","originX"],TAe=["y","scaleY","originY"];function Kz(t,e,n,r){Gz(t.x,e,AAe,n?n.x:void 0,r?r.x:void 0),Gz(t.y,e,TAe,n?n.y:void 0,r?r.y:void 0)}function Wz(t){return t.translate===0&&t.scale===1}function One(t){return Wz(t.x)&&Wz(t.y)}function Yz(t,e){return t.min===e.min&&t.max===e.max}function kAe(t,e){return Yz(t.x,e.x)&&Yz(t.y,e.y)}function Jz(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Mne(t,e){return Jz(t.x,e.x)&&Jz(t.y,e.y)}function Xz(t){return Ys(t.x)/Ys(t.y)}function Qz(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class CAe{constructor(){this.members=[]}add(e){jD(this.members,e),e.scheduleRender()}remove(e){if(BD(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function NAe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:m,skewX:g,skewY:x}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),x&&(r+=`skewY(${x}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const tR=["","X","Y","Z"],PAe=1e3;let _Ae=0;function nR(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Lne(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=bne(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",kr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Lne(r)}function Dne({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=_Ae++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(OAe),this.nodes.forEach(jAe),this.nodes.forEach(BAe),this.nodes.forEach(MAe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new yAe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $D),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Xte(o)&&!EEe(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,h=0;const m=()=>this.root.updateBlockedByResize=!1;kr.read(()=>{h=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,u&&u(),u=xAe(m,250),uT.hasAnimatedSinceResize&&(uT.hasAnimatedSinceResize=!1,this.nodes.forEach(tH)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||c.getDefaultTransition()||HAe,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=c.getProps(),w=!this.targetLayout||!Mne(this.targetLayout,g),k=!h&&m;if(this.options.layoutRoot||this.resumeFrom||k||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...ZD(x,"layout"),onPlay:v,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(u,k)}else h||tH(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),oh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UAe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Lne(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Zz);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(eH);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(DAe),this.nodes.forEach(IAe),this.nodes.forEach(RAe)):this.nodes.forEach(eH),this.clearAllSnapshots();const a=wo.now();ns.delta=od(0,1e3/60,a-ns.timestamp),ns.timestamp=a,ns.isProcessing=!0,VI.update.process(ns),VI.preRender.process(ns),VI.render.process(ns),ns.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,t8.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(LAe),this.sharedNodes.forEach(FAe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ys(this.snapshot.measuredBox.x)&&!Ys(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ei(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!One(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||sp(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),VAe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Ei();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(qAe))){const{scroll:u}=this.root;u&&(Pg(a.x,u.offset.x),Pg(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=Ei();if(cl(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&cl(a,o),Pg(a.x,h.offset.x),Pg(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Ei();cl(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&_g(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),sp(u.latestValues)&&_g(l,u.latestValues)}return sp(this.latestValues)&&_g(l,this.latestValues),l}removeTransform(o){const a=Ei();cl(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!sp(c.latestValues))continue;A3(c.latestValues)&&c.updateSnapshot();const u=Ei(),h=c.measurePageBox();cl(u,h),Kz(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return sp(this.latestValues)&&Kz(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ns.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!this.layout||!(u||h))return;this.resolvedRelativeTargetAt=ns.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ei(),this.targetWithTransforms=Ei()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZSe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cl(this.target,this.layout.layoutBox),pne(this.target,this.targetDelta)):cl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||A3(this.parent.latestValues)||hne(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ei(),this.relativeTargetOrigin=Ei(),XT(this.relativeTargetOrigin,a,l),cl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var x;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ns.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;cl(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;dSe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ei());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Vz(this.prevProjectionDelta.x,this.projectionDelta.x),Vz(this.prevProjectionDelta.y,this.projectionDelta.y)),aw(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!Qz(this.projectionDelta.x,this.prevProjectionDelta.x)||!Qz(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ig(),this.projectionDelta=Ig(),this.projectionDeltaWithTransform=Ig()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Ig();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Ei(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,v=g!==x,b=this.getStack(),w=!b||b.members.length<=1,k=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(zAe));this.animationProgress=0;let C;this.mixTargetDelta=R=>{const B=R/1e3;nH(h.x,o.x,B),nH(h.y,o.y,B),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(XT(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$Ae(this.relativeTarget,this.relativeTargetOrigin,m,B),C&&kAe(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Ei()),cl(C,this.relativeTarget)),v&&(this.animationValues=u,bAe(u,c,this.latestValues,B,k,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(oh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kr.update(()=>{uT.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ax(0)),this.currentAnimation=mAe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PAe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&jne(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ei();const h=Ys(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Ys(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}cl(a,l),_g(a,u),aw(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new CAe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&nR("z",o,c,this.animationValues);for(let u=0;u<tR.length;u++)nR(`rotate${tR[u]}`,o,c,this.animationValues),nR(`skew${tR[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=cT(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=cT(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!sp(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=NAe(this.projectionDeltaWithTransform,this.treeScale,u);l&&(h=l(u,h)),o.transform=h;const{x:m,y:g}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const x in S3){if(u[x]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:w}=S3[x],k=h==="none"?u[x]:v(u[x],c);if(b){const C=b.length;for(let R=0;R<C;R++)o[b[R]]=k}else w?this.options.visualElement.renderState.vars[x]=k:o[x]=k}this.options.layoutId&&(o.pointerEvents=c===this?cT(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Zz),this.root.sharedNodes.clear()}}}function IAe(t){t.updateLayout()}function RAe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Ia(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],g=Ys(m);m.min=r[h].min,m.max=m.min+g}):jne(s,e.layoutBox,r)&&Ia(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],g=Ys(r[h]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=Ig();aw(a,r,e.layoutBox);const l=Ig();o?aw(l,t.applyTransform(i,!0),e.measuredBox):aw(l,r,e.layoutBox);const c=!One(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const x=Ei();XT(x,e.layoutBox,m.layoutBox);const v=Ei();XT(v,r,g.layoutBox),Mne(x,v)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function OAe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function MAe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function LAe(t){t.clearSnapshot()}function Zz(t){t.clearMeasurements()}function eH(t){t.isLayoutDirty=!1}function DAe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tH(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function jAe(t){t.resolveTargetDelta()}function BAe(t){t.calcProjection()}function UAe(t){t.resetSkewAndRotation()}function FAe(t){t.removeLeadSnapshot()}function nH(t,e,n){t.translate=Lr(e.translate,0,n),t.scale=Lr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function rH(t,e,n,r){t.min=Lr(e.min,n.min,r),t.max=Lr(e.max,n.max,r)}function $Ae(t,e,n,r){rH(t.x,e.x,n.x,r),rH(t.y,e.y,n.y,r)}function zAe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const HAe={duration:.45,ease:[.4,0,.1,1]},iH=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),sH=iH("applewebkit/")&&!iH("chrome/")?Math.round:Ya;function oH(t){t.min=sH(t.min),t.max=sH(t.max)}function VAe(t){oH(t.x),oH(t.y)}function jne(t,e,n){return t==="position"||t==="preserve-aspect"&&!QSe(Xz(e),Xz(n),.2)}function qAe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const GAe=Dne({attachResizeListener:(t,e)=>kw(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rR={current:void 0},Bne=Dne({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rR.current){const t=new GAe({});t.mount(window),t.setOptions({layoutScroll:!0}),rR.current=t}return rR.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),KAe={pan:{Feature:hAe},drag:{Feature:fAe,ProjectionNode:Bne,MeasureLayout:_ne}};function aH(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&kr.postRender(()=>s(e,U1(e)))}class WAe extends vh{mount(){const{current:e}=this.node;e&&(this.unmount=yEe(e,(n,r)=>(aH(this.node,r,"Start"),i=>aH(this.node,i,"End"))))}unmount(){}}class YAe extends vh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=D1(kw(this.node.current,"focus",()=>this.onFocus()),kw(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lH(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&kr.postRender(()=>s(e,U1(e)))}class JAe extends vh{mount(){const{current:e}=this.node;e&&(this.unmount=wEe(e,(n,r)=>(lH(this.node,r,"Start"),(i,{success:s})=>lH(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const I3=new WeakMap,iR=new WeakMap,XAe=t=>{const e=I3.get(t.target);e&&e(t)},QAe=t=>{t.forEach(XAe)};function ZAe({root:t,...e}){const n=t||document;iR.has(n)||iR.set(n,{});const r=iR.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(QAe,{root:t,...e})),r[i]}function eTe(t,e,n){const r=ZAe(e);return I3.set(t,n),r.observe(t),()=>{I3.delete(t),r.unobserve(t)}}const tTe={some:0,all:1};class nTe extends vh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:tTe[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=c?u:h;m&&m(l)};return eTe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(rTe(e,n))&&this.startObserver()}unmount(){}}function rTe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const iTe={inView:{Feature:nTe},tap:{Feature:JAe},focus:{Feature:YAe},hover:{Feature:WAe}},sTe={layout:{ProjectionNode:Bne,MeasureLayout:_ne}},oTe={...GSe,...iTe,...KAe,...sTe},Bt=lSe(oTe,wSe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aTe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lTe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),cH=t=>{const e=lTe(t);return e.charAt(0).toUpperCase()+e.slice(1)},Une=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),cTe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uTe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dTe=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>A.createElement("svg",{ref:l,...uTe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Une("lucide",i),...!s&&!cTe(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>A.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(t,e)=>{const n=A.forwardRef(({className:r,...i},s)=>A.createElement(dTe,{ref:s,iconNode:e,className:Une(`lucide-${aTe(cH(t))}`,`lucide-${t}`,r),...i}));return n.displayName=cH(t),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fTe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],eo=St("activity",fTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hTe=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],pTe=St("arrow-down-left",hTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mTe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],QT=St("arrow-left",mTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gTe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fne=St("arrow-right",gTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yTe=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],$ne=St("arrow-up-right",yTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xTe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Rg=St("bot",xTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vTe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ao=St("brain",vTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bTe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],wTe=St("briefcase",bTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ETe=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],h8=St("calendar-clock",ETe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const STe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],ATe=St("chart-bar",STe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TTe=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Rl=St("chart-no-axes-column",TTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kTe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Cw=St("chart-pie",kTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CTe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sm=St("check",CTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NTe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],aa=St("chevron-down",NTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PTe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Nw=St("chevron-left",PTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Te=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ul=St("chevron-right",_Te);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ITe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],lh=St("chevron-up",ITe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],p8=St("circle-alert",RTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OTe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],R3=St("circle-check-big",OTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],m8=St("circle-check",MTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Pw=St("circle-x",LTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DTe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fs=St("clock",DTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jTe=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],g8=St("coins",jTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BTe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],om=St("copy",BTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UTe=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],zne=St("cpu",UTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FTe=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],fC=St("database",FTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Te=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],F1=St("dollar-sign",$Te);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zTe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Vs=St("download",zTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HTe=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],O3=St("droplets",HTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VTe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],mm=St("external-link",VTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qTe=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],hC=St("eye-off",qTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GTe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],y8=St("eye",GTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KTe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],uH=St("file-text",KTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WTe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Hne=St("funnel",WTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],dT=St("globe",YTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Vne=St("info",JTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XTe=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],M3=St("key",XTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QTe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ZT=St("layers",QTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZTe=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],x8=St("loader-circle",ZTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eke=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],tke=St("lock-keyhole",eke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nke=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],qne=St("lock-open",nke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rke=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ch=St("lock",rke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ike=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],dH=St("log-out",ike);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ske=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],oke=St("mail",ske);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ake=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],fH=St("menu",ake);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lke=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],cke=St("message-square",lke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uke=[["path",{d:"M5 12h14",key:"1ays0h"}]],L3=St("minus",uke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dke=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kl=St("plus",dke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fke=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Fl=St("refresh-cw",fke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hke=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Gne=St("rotate-ccw",hke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pke=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],v8=St("save",pke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mke=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],b8=St("scroll-text",mke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gke=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],w8=St("search",gke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yke=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],xke=St("send",yke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vke=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ek=St("settings",vke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],wke=St("shield-alert",bke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ld=St("shield-check",Eke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ske=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],uh=St("shield",Ske);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ake=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],_w=St("sparkles",Ake);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Jg=St("target",Tke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kke=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],pC=St("terminal",kke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cke=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gm=St("trash-2",Cke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nke=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],mC=St("trending-down",Nke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pke=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],_n=St("trending-up",Pke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ke=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],to=St("triangle-alert",_ke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ike=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],tk=St("upload",Ike);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rke=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Oke=St("user",Rke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mke=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],cx=St("wallet",Mke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lke=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Kne=St("wand-sparkles",Lke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dke=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ux=St("x",Dke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jke=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],To=St("zap",jke),Wne="6.16.0";function Bke(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function ks(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function Lt(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&Bke(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function Og(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Og(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Og(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Og(r,e)}: ${Og(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ls(t,e){return t&&t.code===e}function E8(t){return ls(t,"CALL_EXCEPTION")}function Ir(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Og(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+Og(a))}}s.push(`code=${e}`),s.push(`version=${Wne}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return Lt(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&Lt(i,{shortMessage:r}),i}function Ke(t,e,n,r){if(!t)throw Ir(e,n,r)}function ye(t,e,n,r){Ke(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Yne(t,e,n){n==null&&(n=""),n&&(n=": "+n),Ke(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),Ke(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const Uke=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Jne(t){Ke(Uke.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function bh(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),Ke(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function Xne(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}ye(!1,"invalid BytesLike value",e||"value",t)}function yt(t,e){return Xne(t,e,!1)}function cs(t,e){return Xne(t,e,!0)}function gr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function gC(t){return gr(t,!0)||t instanceof Uint8Array}const hH="0123456789abcdef";function rt(t){const e=yt(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=hH[(i&240)>>4]+hH[i&15]}return n}function On(t){return"0x"+t.map(e=>rt(e).substring(2)).join("")}function Xg(t){return gr(t,!0)?(t.length-2)/2:yt(t).length}function mr(t,e,n){const r=yt(t);return n!=null&&n>r.length&&Ke(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),rt(r.slice(e??0,n??r.length))}function r0t(t){let e=rt(t).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function Qne(t,e,n){const r=yt(t);Ke(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),rt(i)}function cd(t,e){return Qne(t,e,!0)}function Fke(t,e){return Qne(t,e,!1)}const $1=BigInt(0),Nl=BigInt(1),Mg=9007199254740991;function nk(t,e){const n=yC(t,"value"),r=BigInt(Zt(e,"width"));if(Ke(n>>r===$1,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Nl){const i=(Nl<<r)-Nl;return-((~n&i)+Nl)}return n}function Zne(t,e){let n=kt(t,"value");const r=BigInt(Zt(e,"width")),i=Nl<<r-Nl;if(n<$1){n=-n,Ke(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(Nl<<r)-Nl;return(~n&s)+Nl}else Ke(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Ap(t,e){const n=yC(t,"value"),r=BigInt(Zt(e,"bits"));return n&(Nl<<r)-Nl}function kt(t,e){switch(typeof t){case"bigint":return t;case"number":return ye(Number.isInteger(t),"underflow",e||"value",t),ye(t>=-Mg&&t<=Mg,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){ye(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}ye(!1,"invalid BigNumberish value",e||"value",t)}function yC(t,e){const n=kt(t,e);return Ke(n>=$1,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const pH="0123456789abcdef";function z1(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=pH[n>>4],e+=pH[n&15];return BigInt(e)}return kt(t)}function Zt(t,e){switch(typeof t){case"bigint":return ye(t>=-Mg&&t<=Mg,"overflow",e||"value",t),Number(t);case"number":return ye(Number.isInteger(t),"underflow",e||"value",t),ye(t>=-Mg&&t<=Mg,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Zt(BigInt(t),e)}catch(n){ye(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}ye(!1,"invalid numeric value",e||"value",t)}function $ke(t){return Zt(z1(t))}function ud(t,e){const n=yC(t,"value");let r=n.toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=Zt(e,"width");if(i===0&&n===$1)return"0x";for(Ke(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function Dr(t,e){const n=yC(t,"value");if(n===$1){const s=e!=null?Zt(e,"width"):0;return new Uint8Array(s)}let r=n.toString(16);if(r.length%2&&(r="0"+r),e!=null){const s=Zt(e,"width");for(;r.length<s*2;)r="00"+r;Ke(s*2===r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:t})}const i=new Uint8Array(r.length/2);for(let s=0;s<i.length;s++){const o=s*2;i[s]=parseInt(r.substring(o,o+2),16)}return i}function Cl(t){let e=rt(gC(t)?t:Dr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const rk="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let JS=null;function zke(t){if(JS==null){JS={};for(let n=0;n<rk.length;n++)JS[rk[n]]=BigInt(n)}const e=JS[t];return ye(e!=null,"invalid base58 value","letter",t),e}const Hke=BigInt(0),D3=BigInt(58);function ere(t){const e=yt(t);let n=z1(e),r="";for(;n;)r=rk[Number(n%D3)]+r,n/=D3;for(let i=0;i<e.length&&!e[i];i++)r=rk[0]+r;return r}function Vke(t){let e=Hke;for(let n=0;n<t.length;n++)e*=D3,e+=zke(t[n]);return e}function qke(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return yt(e)}function Gke(t){const e=yt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var xy;class tre{constructor(e,n,r){Ce(this,"filter");Ce(this,"emitter");Ue(this,xy);me(this,xy,n),Lt(this,{emitter:e,filter:r})}async removeListener(){ie(this,xy)!=null&&await this.emitter.off(this.filter,ie(this,xy))}}xy=new WeakMap;function Kke(t,e,n,r,i){ye(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function nre(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function Wke(t,e,n,r,i){return t==="OVERLONG"?(ye(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),nre(t,e,n))}const Yke=Object.freeze({error:Kke,ignore:nre,replace:Wke});function rre(t,e){e==null&&(e=Yke.error);const n=yt(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(s>>7===0){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let u=n[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|u&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=e("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function mi(t,e){ye(typeof t=="string","invalid string value","str",t),e!=null&&(Jne(e),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);ye(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function Jke(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ik(t,e){return Jke(rre(t,e))}function i0t(t,e){return rre(mi(t,e))}function ire(t){async function e(n,r){Ke(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();Ke(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),Ke(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=Ir("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=Ir("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let c;try{c=await fetch(n.url,l)}catch(g){throw clearTimeout(a),s||g}clearTimeout(a);const u={};c.headers.forEach((g,x)=>{u[x.toLowerCase()]=g});const h=await c.arrayBuffer(),m=h==null?null:new Uint8Array(h);return{statusCode:c.status,statusMessage:c.statusText,headers:u,body:m}}return e}const Xke=12,Qke=250;let mH=ire();const Zke=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),e2e=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let sR=!1;async function sre(t,e){try{const n=t.match(Zke);if(!n)throw new Error("invalid data");return new eh(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?qke(n[3]):n2e(n[3]))}catch{return new eh(599,"BAD REQUEST (invalid data: URI)",{},null,new dd(t))}}function ore(t){async function e(n,r){try{const i=n.match(e2e);if(!i)throw new Error("invalid link");return new dd(`${t}${i[2]}`)}catch{return new eh(599,"BAD REQUEST (invalid IPFS URI)",{},null,new dd(n))}}return e}const XS={data:sre,ipfs:ore("https://gateway.ipfs.io/ipfs/")},are=new WeakMap;var Lp,Mf;class t2e{constructor(e){Ue(this,Lp);Ue(this,Mf);me(this,Lp,[]),me(this,Mf,!1),are.set(e,()=>{if(!ie(this,Mf)){me(this,Mf,!0);for(const n of ie(this,Lp))setTimeout(()=>{n()},0);me(this,Lp,[])}})}addListener(e){Ke(!ie(this,Mf),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),ie(this,Lp).push(e)}get cancelled(){return ie(this,Mf)}checkSignal(){Ke(!this.cancelled,"cancelled","CANCELLED",{})}}Lp=new WeakMap,Mf=new WeakMap;function QS(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var vy,by,xl,Ru,wy,Ey,Ri,Ho,Ou,Dp,jp,Bp,fc,vl,Lf,Up,$b;const J2=class J2{constructor(e){Ue(this,Up);Ue(this,vy);Ue(this,by);Ue(this,xl);Ue(this,Ru);Ue(this,wy);Ue(this,Ey);Ue(this,Ri);Ue(this,Ho);Ue(this,Ou);Ue(this,Dp);Ue(this,jp);Ue(this,Bp);Ue(this,fc);Ue(this,vl);Ue(this,Lf);me(this,Ey,String(e)),me(this,vy,!1),me(this,by,!0),me(this,xl,{}),me(this,Ru,""),me(this,wy,3e5),me(this,vl,{slotInterval:Qke,maxAttempts:Xke}),me(this,Lf,null)}get url(){return ie(this,Ey)}set url(e){me(this,Ey,String(e))}get body(){return ie(this,Ri)==null?null:new Uint8Array(ie(this,Ri))}set body(e){if(e==null)me(this,Ri,void 0),me(this,Ho,void 0);else if(typeof e=="string")me(this,Ri,mi(e)),me(this,Ho,"text/plain");else if(e instanceof Uint8Array)me(this,Ri,e),me(this,Ho,"application/octet-stream");else if(typeof e=="object")me(this,Ri,mi(JSON.stringify(e))),me(this,Ho,"application/json");else throw new Error("invalid body")}hasBody(){return ie(this,Ri)!=null}get method(){return ie(this,Ru)?ie(this,Ru):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),me(this,Ru,String(e).toUpperCase())}get headers(){const e=Object.assign({},ie(this,xl));return ie(this,Ou)&&(e.authorization=`Basic ${Gke(mi(ie(this,Ou)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&ie(this,Ho)&&(e["content-type"]=ie(this,Ho)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){ie(this,xl)[String(e).toLowerCase()]=String(n)}clearHeaders(){me(this,xl,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return ie(this,Ou)||null}setCredentials(e,n){ye(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),me(this,Ou,`${e}:${n}`)}get allowGzip(){return ie(this,by)}set allowGzip(e){me(this,by,!!e)}get allowInsecureAuthentication(){return!!ie(this,vy)}set allowInsecureAuthentication(e){me(this,vy,!!e)}get timeout(){return ie(this,wy)}set timeout(e){ye(e>=0,"timeout must be non-zero","timeout",e),me(this,wy,e)}get preflightFunc(){return ie(this,Dp)||null}set preflightFunc(e){me(this,Dp,e)}get processFunc(){return ie(this,jp)||null}set processFunc(e){me(this,jp,e)}get retryFunc(){return ie(this,Bp)||null}set retryFunc(e){me(this,Bp,e)}get getUrlFunc(){return ie(this,Lf)||mH}set getUrlFunc(e){me(this,Lf,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${ie(this,Ri)?rt(ie(this,Ri)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(ie(this,vl).slotInterval=e.slotInterval),e.maxAttempts!=null&&(ie(this,vl).maxAttempts=e.maxAttempts)}send(){return Ke(ie(this,fc)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),me(this,fc,new t2e(this)),Ze(this,Up,$b).call(this,0,gH()+this.timeout,0,this,new eh(0,"",{},null,this))}cancel(){Ke(ie(this,fc)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=are.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();Ke(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new J2(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,me(i,xl,Object.assign({},ie(this,xl))),ie(this,Ri)&&me(i,Ri,new Uint8Array(ie(this,Ri))),me(i,Ho,ie(this,Ho)),i}clone(){const e=new J2(this.url);return me(e,Ru,ie(this,Ru)),ie(this,Ri)&&me(e,Ri,ie(this,Ri)),me(e,Ho,ie(this,Ho)),me(e,xl,Object.assign({},ie(this,xl))),me(e,Ou,ie(this,Ou)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),me(e,Dp,ie(this,Dp)),me(e,jp,ie(this,jp)),me(e,Bp,ie(this,Bp)),me(e,vl,Object.assign({},ie(this,vl))),me(e,Lf,ie(this,Lf)),e}static lockConfig(){sR=!0}static getGateway(e){return XS[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(sR)throw new Error("gateways locked");XS[e]=n}static registerGetUrl(e){if(sR)throw new Error("gateways locked");mH=e}static createGetUrlFunc(e){return ire(e)}static createDataGateway(){return sre}static createIpfsGatewayFunc(e){return ore(e)}};vy=new WeakMap,by=new WeakMap,xl=new WeakMap,Ru=new WeakMap,wy=new WeakMap,Ey=new WeakMap,Ri=new WeakMap,Ho=new WeakMap,Ou=new WeakMap,Dp=new WeakMap,jp=new WeakMap,Bp=new WeakMap,fc=new WeakMap,vl=new WeakMap,Lf=new WeakMap,Up=new WeakSet,$b=async function(e,n,r,i,s){var u,h,m;if(e>=ie(this,vl).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Ke(gH()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await r2e(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in XS){const g=await XS[a](o.url,QS(ie(i,fc)));if(g instanceof eh){let x=g;if(this.processFunc){QS(ie(i,fc));try{x=await this.processFunc(o,x)}catch(v){(v.throttle==null||typeof v.stall!="number")&&x.makeServerError("error in post-processing function",v).assertOk()}}return x}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,QS(ie(i,fc)));let c=new eh(l.statusCode,l.statusMessage,l.headers,l.body,i);if(c.statusCode===301||c.statusCode===302){try{const g=c.headers.location||"";return Ze(u=o.redirect(g),Up,$b).call(u,e+1,n,0,i,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const g=c.headers["retry-after"];let x=ie(this,vl).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(x=parseInt(g)),Ze(h=o.clone(),Up,$b).call(h,e+1,n,x,i,c)}if(this.processFunc){QS(ie(i,fc));try{c=await this.processFunc(o,c)}catch(g){(g.throttle==null||typeof g.stall!="number")&&c.makeServerError("error in post-processing function",g).assertOk();let x=ie(this,vl).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return g.stall>=0&&(x=g.stall),Ze(m=o.clone(),Up,$b).call(m,e+1,n,x,i,c)}}return c};let dd=J2;var y1,x1,v1,Vo,Sy,Fp;const w7=class w7{constructor(e,n,r,i,s){Ue(this,y1);Ue(this,x1);Ue(this,v1);Ue(this,Vo);Ue(this,Sy);Ue(this,Fp);me(this,y1,e),me(this,x1,n),me(this,v1,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),me(this,Vo,i==null?null:new Uint8Array(i)),me(this,Sy,s||null),me(this,Fp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${ie(this,Vo)?rt(ie(this,Vo)):"null"}>`}get statusCode(){return ie(this,y1)}get statusMessage(){return ie(this,x1)}get headers(){return Object.assign({},ie(this,v1))}get body(){return ie(this,Vo)==null?null:new Uint8Array(ie(this,Vo))}get bodyText(){try{return ie(this,Vo)==null?"":ik(ie(this,Vo))}catch{Ke(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{Ke(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new w7(599,r,this.headers,this.body,ie(this,Sy)||void 0);return me(i,Fp,{message:e,error:n}),i}throwThrottleError(e,n){n==null?n=-1:ye(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Lt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return ie(this,Vo)!=null}get request(){return ie(this,Sy)}ok(){return ie(this,Fp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=ie(this,Fp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{ie(this,Vo)&&(i=ik(ie(this,Vo)))}catch{}Ke(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};y1=new WeakMap,x1=new WeakMap,v1=new WeakMap,Vo=new WeakMap,Sy=new WeakMap,Fp=new WeakMap;let eh=w7;function gH(){return new Date().getTime()}function n2e(t){return mi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function r2e(t){return new Promise(e=>setTimeout(e,t))}const i2e=BigInt(-1),fl=BigInt(0),Lg=BigInt(1),s2e=BigInt(5),G0={};let Qg="0000";for(;Qg.length<80;)Qg+=Qg;function Xh(t){let e=Qg;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function mb(t,e,n){const r=BigInt(e.width);if(e.signed){const i=Lg<<r-Lg;Ke(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>fl?t=nk(Ap(t,r),r):t=-nk(Ap(-t,r),r)}else{const i=Lg<<r;Ke(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Lg}return t}function oR(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ye(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,l,c)=>s[a]==null?c:(ye(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}ye(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),ye(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function o2e(t,e){let n="";t<fl&&(n="-",t*=i2e);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Qg+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var bl,rr,$s,Gn,op,Su,j3,B3,U3,F3;const _f=class _f{constructor(e,n,r){Ue(this,Gn);Ce(this,"format");Ue(this,bl);Ue(this,rr);Ue(this,$s);Ce(this,"_value");bh(e,G0,"FixedNumber"),me(this,rr,n),me(this,bl,r);const i=o2e(n,r.decimals);Lt(this,{format:r.name,_value:i}),me(this,$s,Xh(r.decimals))}get signed(){return ie(this,bl).signed}get width(){return ie(this,bl).width}get decimals(){return ie(this,bl).decimals}get value(){return ie(this,rr)}addUnsafe(e){return Ze(this,Gn,j3).call(this,e)}add(e){return Ze(this,Gn,j3).call(this,e,"add")}subUnsafe(e){return Ze(this,Gn,B3).call(this,e)}sub(e){return Ze(this,Gn,B3).call(this,e,"sub")}mulUnsafe(e){return Ze(this,Gn,U3).call(this,e)}mul(e){return Ze(this,Gn,U3).call(this,e,"mul")}mulSignal(e){Ze(this,Gn,op).call(this,e);const n=ie(this,rr)*ie(e,rr);return Ke(n%ie(this,$s)===fl,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),Ze(this,Gn,Su).call(this,n/ie(this,$s),"mulSignal")}divUnsafe(e){return Ze(this,Gn,F3).call(this,e)}div(e){return Ze(this,Gn,F3).call(this,e,"div")}divSignal(e){Ke(ie(e,rr)!==fl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ze(this,Gn,op).call(this,e);const n=ie(this,rr)*ie(this,$s);return Ke(n%ie(e,rr)===fl,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),Ze(this,Gn,Su).call(this,n/ie(e,rr),"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=Xh(i):i<0&&(n*=Xh(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=ie(this,rr);return ie(this,rr)<fl&&(e-=ie(this,$s)-Lg),e=ie(this,rr)/ie(this,$s)*ie(this,$s),Ze(this,Gn,Su).call(this,e,"floor")}ceiling(){let e=ie(this,rr);return ie(this,rr)>fl&&(e+=ie(this,$s)-Lg),e=ie(this,rr)/ie(this,$s)*ie(this,$s),Ze(this,Gn,Su).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=s2e*Xh(n-1);let i=this.value+r;const s=Xh(n);return i=i/s*s,mb(i,ie(this,bl),"round"),new _f(G0,i,ie(this,bl))}isZero(){return ie(this,rr)===fl}isNegative(){return ie(this,rr)<fl}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return _f.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:Zt(n),s=oR(r);let o=kt(e,"value");const a=i-s.decimals;if(a>0){const l=Xh(a);Ke(o%l===fl,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=Xh(-a));return mb(o,s,"fromValue"),new _f(G0,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);ye(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=oR(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=Qg;Ke(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return mb(a,i,"fromString"),new _f(G0,a,i)}static fromBytes(e,n){let r=z1(yt(e,"value"));const i=oR(n);return i.signed&&(r=nk(r,i.width)),mb(r,i,"fromBytes"),new _f(G0,r,i)}};bl=new WeakMap,rr=new WeakMap,$s=new WeakMap,Gn=new WeakSet,op=function(e){ye(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Su=function(e,n){return e=mb(e,ie(this,bl),n),new _f(G0,e,ie(this,bl))},j3=function(e,n){return Ze(this,Gn,op).call(this,e),Ze(this,Gn,Su).call(this,ie(this,rr)+ie(e,rr),n)},B3=function(e,n){return Ze(this,Gn,op).call(this,e),Ze(this,Gn,Su).call(this,ie(this,rr)-ie(e,rr),n)},U3=function(e,n){return Ze(this,Gn,op).call(this,e),Ze(this,Gn,Su).call(this,ie(this,rr)*ie(e,rr)/ie(this,$s),n)},F3=function(e,n){return Ke(ie(e,rr)!==fl,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ze(this,Gn,op).call(this,e),Ze(this,Gn,Su).call(this,ie(this,rr)*ie(this,$s)/ie(e,rr),n)};let sk=_f;function a2e(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function yH(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function xH(t,e,n,r){const i=[];for(;n<e+1+r;){const s=lre(t,n);i.push(s.result),n+=s.consumed,Ke(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function lre(t,e){Ke(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{Ke(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=yH(t,e+1,r);return n(e+1+r+i),xH(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),xH(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=yH(t,e+1,r);n(e+1+r+i);const s=rt(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=rt(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:a2e(t[e])}}function H1(t){const e=yt(t,"data"),n=lre(e,0);return ye(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function vH(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function cre(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(cre(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=vH(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(yt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=vH(e.length);return n.unshift(183+n.length),n.concat(e)}const bH="0123456789abcdef";function Oc(t){let e="0x";for(const n of cre(t))e+=bH[n>>4],e+=bH[n&15];return e}const ure=["wei","kwei","mwei","gwei","szabo","finney","ether"];function dre(t,e){let n=18;if(typeof e=="string"){const r=ure.indexOf(e);ye(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Zt(e,"unit"));return sk.fromValue(t,n,{decimals:n,width:512}).toString()}function l2e(t,e){ye(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=ure.indexOf(e);ye(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=Zt(e,"unit"));return sk.fromString(t,{decimals:n,width:512}).value}function s0t(t){return dre(t,18)}function o0t(t){return l2e(t,18)}function c2e(t){const e=yt(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=rt(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const Js=32,$3=new Uint8Array(Js),u2e=["then"],ZS={},fre=new WeakMap;function mp(t){return fre.get(t)}function wH(t,e){fre.set(t,e)}function gb(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function z3(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof dx?z3(mp(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof dx&&(o=z3(mp(o),o,n)),r[i]=o),r},{})}var Ay;const Hg=class Hg extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==ZS&&(i=n,s=[],o=!1);super(i.length);Ue(this,Ay);i.forEach((c,u)=>{this[u]=c});const a=s.reduce((c,u)=>(typeof u=="string"&&c.set(u,(c.get(u)||0)+1),c),new Map);if(wH(this,Object.freeze(i.map((c,u)=>{const h=s[u];return h!=null&&a.get(h)===1?h:null}))),me(this,Ay,[]),ie(this,Ay)==null&&ie(this,Ay),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(c,u,h)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const g=Zt(u,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const x=c[g];return x instanceof Error&&gb(`index ${g}`,x),x}if(u2e.indexOf(u)>=0)return Reflect.get(c,u,h);const m=c[u];if(m instanceof Function)return function(...g){return m.apply(this===h?c:this,g)};if(!(u in c))return c.getValue.apply(this===h?c:this,[u])}return Reflect.get(c,u,h)}});return wH(l,mp(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&gb(`index ${s}`,i),n&&i instanceof Hg&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=mp(this);return r.reduce((i,s,o)=>(Ke(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),z3(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=mp(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new Hg(ZS,s,o)}filter(n,r){const i=mp(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&gb(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new Hg(ZS,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&gb(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=mp(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&gb(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new Hg(ZS,n,r)}};Ay=new WeakMap;let dx=Hg;function a0t(t){const e=[],n=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{n(o,i[s])}catch(a){e.push({path:o,error:a})}}};return n([],t),e}function EH(t){let e=Dr(t);return Ke(e.length<=Js,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Js,offset:e.length}),e.length!==Js&&(e=cs(On([$3.slice(e.length%Js),e]))),e}class Cd{constructor(e,n,r,i){Ce(this,"name");Ce(this,"type");Ce(this,"localName");Ce(this,"dynamic");Lt(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){ye(!1,e,this.localName,n)}}var Mu,$p,Ty,fT;class H3{constructor(){Ue(this,Ty);Ue(this,Mu);Ue(this,$p);me(this,Mu,[]),me(this,$p,0)}get data(){return On(ie(this,Mu))}get length(){return ie(this,$p)}appendWriter(e){return Ze(this,Ty,fT).call(this,cs(e.data))}writeBytes(e){let n=cs(e);const r=n.length%Js;return r&&(n=cs(On([n,$3.slice(r)]))),Ze(this,Ty,fT).call(this,n)}writeValue(e){return Ze(this,Ty,fT).call(this,EH(e))}writeUpdatableValue(){const e=ie(this,Mu).length;return ie(this,Mu).push($3),me(this,$p,ie(this,$p)+Js),n=>{ie(this,Mu)[e]=EH(n)}}}Mu=new WeakMap,$p=new WeakMap,Ty=new WeakSet,fT=function(e){return ie(this,Mu).push(e),me(this,$p,ie(this,$p)+e.length),e.length};var go,qo,zp,Hp,Df,jm,q3,hre;const E7=class E7{constructor(e,n,r){Ue(this,jm);Ce(this,"allowLoose");Ue(this,go);Ue(this,qo);Ue(this,zp);Ue(this,Hp);Ue(this,Df);Lt(this,{allowLoose:!!n}),me(this,go,cs(e)),me(this,zp,0),me(this,Hp,null),me(this,Df,r??1024),me(this,qo,0)}get data(){return rt(ie(this,go))}get dataLength(){return ie(this,go).length}get consumed(){return ie(this,qo)}get bytes(){return new Uint8Array(ie(this,go))}subReader(e){const n=new E7(ie(this,go).slice(ie(this,qo)+e),this.allowLoose,ie(this,Df));return me(n,Hp,this),n}readBytes(e,n){let r=Ze(this,jm,hre).call(this,0,e,!!n);return Ze(this,jm,q3).call(this,e),me(this,qo,ie(this,qo)+r.length),r.slice(0,e)}readValue(){return z1(this.readBytes(Js))}readIndex(){return $ke(this.readBytes(Js))}};go=new WeakMap,qo=new WeakMap,zp=new WeakMap,Hp=new WeakMap,Df=new WeakMap,jm=new WeakSet,q3=function(e){var n;if(ie(this,Hp))return Ze(n=ie(this,Hp),jm,q3).call(n,e);me(this,zp,ie(this,zp)+e),Ke(ie(this,Df)<1||ie(this,zp)<=ie(this,Df)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${ie(this,Df)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:cs(ie(this,go)),offset:ie(this,qo),length:e,info:{bytesRead:ie(this,zp),dataLength:this.dataLength}})},hre=function(e,n,r){let i=Math.ceil(n/Js)*Js;return ie(this,qo)+i>ie(this,go).length&&(this.allowLoose&&r&&ie(this,qo)+n<=ie(this,go).length?i=n:Ke(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:cs(ie(this,go)),length:ie(this,go).length,offset:ie(this,qo)+i})),ie(this,go).slice(ie(this,qo),ie(this,qo)+i)};let V3=E7;function Xo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function S8(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function pre(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Xo(t.outputLen),Xo(t.blockLen)}function fx(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mre(t,e){S8(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const aR=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gre=t=>t instanceof Uint8Array,hT=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),pT=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),rc=(t,e)=>t<<32-e|t>>>e,d2e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!d2e)throw new Error("Non little-endian hardware is not supported");const f2e=async()=>{};async function SH(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);const s=Date.now()-r;s>=0&&s<e||(await f2e(),r+=s)}}function h2e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function hx(t){if(typeof t=="string"&&(t=h2e(t)),!gre(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function p2e(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!gre(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let A8=class{clone(){return this._cloneInto()}};const m2e={}.toString;function yre(t,e){if(e!==void 0&&m2e.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function xC(t){const e=r=>t().update(hx(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function g2e(t=32){if(aR&&typeof aR.getRandomValues=="function")return aR.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}let xre=class extends A8{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,pre(e);const r=hx(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return fx(this),this.iHash.update(e),this}digestInto(e){fx(this),S8(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const vC=(t,e,n)=>new xre(t,e).update(n).digest();vC.create=(t,e)=>new xre(t,e);function y2e(t,e,n,r){pre(t);const i=yre({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(Xo(s),Xo(o),Xo(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=hx(e),c=hx(n),u=new Uint8Array(o),h=vC.create(t,l),m=h._cloneInto().update(c);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:h,PRFSalt:m}}function x2e(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}function T8(t,e,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=y2e(t,e,n,r);let c;const u=new Uint8Array(4),h=pT(u),m=new Uint8Array(a.outputLen);for(let g=1,x=0;x<s;g++,x+=a.outputLen){const v=o.subarray(x,x+a.outputLen);h.setInt32(0,g,!1),(c=l._cloneInto(c)).update(u).digestInto(m),v.set(m.subarray(0,v.length));for(let b=1;b<i;b++){a._cloneInto(c).update(m).digestInto(m);for(let w=0;w<v.length;w++)v[w]^=m[w]}}return x2e(a,l,o,c,m)}function v2e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}class k8 extends A8{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pT(this.buffer)}update(e){fx(this);const{view:n,buffer:r,blockLen:i}=this;e=hx(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=pT(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){fx(this),mre(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;v2e(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=pT(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const b2e=(t,e,n)=>t&e^~t&n,w2e=(t,e,n)=>t&e^t&n^e&n,E2e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),uf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),df=new Uint32Array(64);let S2e=class extends k8{constructor(){super(64,32,8,!1),this.A=uf[0]|0,this.B=uf[1]|0,this.C=uf[2]|0,this.D=uf[3]|0,this.E=uf[4]|0,this.F=uf[5]|0,this.G=uf[6]|0,this.H=uf[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)df[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=df[h-15],g=df[h-2],x=rc(m,7)^rc(m,18)^m>>>3,v=rc(g,17)^rc(g,19)^g>>>10;df[h]=v+df[h-7]+x+df[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let h=0;h<64;h++){const m=rc(a,6)^rc(a,11)^rc(a,25),g=u+m+b2e(a,l,c)+E2e[h]+df[h]|0,v=(rc(r,2)^rc(r,13)^rc(r,22))+w2e(r,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){df.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const zx=xC(()=>new S2e),eA=BigInt(2**32-1),G3=BigInt(32);function vre(t,e=!1){return e?{h:Number(t&eA),l:Number(t>>G3&eA)}:{h:Number(t>>G3&eA)|0,l:Number(t&eA)|0}}function bre(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=vre(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const A2e=(t,e)=>BigInt(t>>>0)<<G3|BigInt(e>>>0),T2e=(t,e,n)=>t>>>n,k2e=(t,e,n)=>t<<32-n|e>>>n,C2e=(t,e,n)=>t>>>n|e<<32-n,N2e=(t,e,n)=>t<<32-n|e>>>n,P2e=(t,e,n)=>t<<64-n|e>>>n-32,_2e=(t,e,n)=>t>>>n-32|e<<64-n,I2e=(t,e)=>e,R2e=(t,e)=>t,wre=(t,e,n)=>t<<n|e>>>32-n,Ere=(t,e,n)=>e<<n|t>>>32-n,Sre=(t,e,n)=>e<<n-32|t>>>64-n,Are=(t,e,n)=>t<<n-32|e>>>64-n;function O2e(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const M2e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),L2e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,D2e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),j2e=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,B2e=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),U2e=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,fn={fromBig:vre,split:bre,toBig:A2e,shrSH:T2e,shrSL:k2e,rotrSH:C2e,rotrSL:N2e,rotrBH:P2e,rotrBL:_2e,rotr32H:I2e,rotr32L:R2e,rotlSH:wre,rotlSL:Ere,rotlBH:Sre,rotlBL:Are,add:O2e,add3L:M2e,add3H:L2e,add4L:D2e,add4H:j2e,add5H:U2e,add5L:B2e},[F2e,$2e]=fn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ff=new Uint32Array(80),hf=new Uint32Array(80);let z2e=class extends k8{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:h,Fl:m,Gh:g,Gl:x,Hh:v,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,u,h,m,g,x,v,b]}set(e,n,r,i,s,o,a,l,c,u,h,m,g,x,v,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=h|0,this.Fl=m|0,this.Gh=g|0,this.Gl=x|0,this.Hh=v|0,this.Hl=b|0}process(e,n){for(let C=0;C<16;C++,n+=4)ff[C]=e.getUint32(n),hf[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const R=ff[C-15]|0,B=hf[C-15]|0,O=fn.rotrSH(R,B,1)^fn.rotrSH(R,B,8)^fn.shrSH(R,B,7),F=fn.rotrSL(R,B,1)^fn.rotrSL(R,B,8)^fn.shrSL(R,B,7),H=ff[C-2]|0,j=hf[C-2]|0,$=fn.rotrSH(H,j,19)^fn.rotrBH(H,j,61)^fn.shrSH(H,j,6),W=fn.rotrSL(H,j,19)^fn.rotrBL(H,j,61)^fn.shrSL(H,j,6),V=fn.add4L(F,W,hf[C-7],hf[C-16]),U=fn.add4H(V,O,$,ff[C-7],ff[C-16]);ff[C]=U|0,hf[C]=V|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:h,El:m,Fh:g,Fl:x,Gh:v,Gl:b,Hh:w,Hl:k}=this;for(let C=0;C<80;C++){const R=fn.rotrSH(h,m,14)^fn.rotrSH(h,m,18)^fn.rotrBH(h,m,41),B=fn.rotrSL(h,m,14)^fn.rotrSL(h,m,18)^fn.rotrBL(h,m,41),O=h&g^~h&v,F=m&x^~m&b,H=fn.add5L(k,B,F,$2e[C],hf[C]),j=fn.add5H(H,w,R,O,F2e[C],ff[C]),$=H|0,W=fn.rotrSH(r,i,28)^fn.rotrBH(r,i,34)^fn.rotrBH(r,i,39),V=fn.rotrSL(r,i,28)^fn.rotrBL(r,i,34)^fn.rotrBL(r,i,39),U=r&s^r&a^s&a,T=i&o^i&l^o&l;w=v|0,k=b|0,v=g|0,b=x|0,g=h|0,x=m|0,{h,l:m}=fn.add(c|0,u|0,j|0,$|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const _=fn.add3L($,V,T);r=fn.add3H(_,j,W,U),i=_|0}({h:r,l:i}=fn.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=fn.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=fn.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=fn.add(this.Dh|0,this.Dl|0,c|0,u|0),{h,l:m}=fn.add(this.Eh|0,this.El|0,h|0,m|0),{h:g,l:x}=fn.add(this.Fh|0,this.Fl|0,g|0,x|0),{h:v,l:b}=fn.add(this.Gh|0,this.Gl|0,v|0,b|0),{h:w,l:k}=fn.add(this.Hh|0,this.Hl|0,w|0,k|0),this.set(r,i,s,o,a,l,c,u,h,m,g,x,v,b,w,k)}roundClean(){ff.fill(0),hf.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const C8=xC(()=>new z2e);function H2e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const AH=H2e(),TH=AH.crypto||AH.msCrypto;function Tre(t){switch(t){case"sha256":return zx.create();case"sha512":return C8.create()}ye(!1,"invalid hashing algorithm name","algorithm",t)}function V2e(t,e){const n={sha256:zx,sha512:C8}[t];return ye(n!=null,"invalid hmac algorithm","algorithm",t),vC.create(n,e)}function q2e(t,e,n,r,i){const s={sha256:zx,sha512:C8}[i];return ye(s!=null,"invalid pbkdf2 algorithm","algorithm",i),T8(s,t,e,{c:n,dkLen:r})}function G2e(t){Ke(TH!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),ye(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return TH.getRandomValues(e),e}let kre=!1;const Cre=function(t,e,n){return V2e(t,e).update(n).digest()};let Nre=Cre;function Hx(t,e,n){const r=yt(e,"key"),i=yt(n,"data");return rt(Nre(t,r,i))}Hx._=Cre;Hx.lock=function(){kre=!0};Hx.register=function(t){if(kre)throw new Error("computeHmac is locked");Nre=t};Object.freeze(Hx);const[Pre,_re,Ire]=[[],[],[]],K2e=BigInt(0),yb=BigInt(1),W2e=BigInt(2),Y2e=BigInt(7),J2e=BigInt(256),X2e=BigInt(113);for(let t=0,e=yb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Pre.push(2*(5*r+n)),_re.push((t+1)*(t+2)/2%64);let i=K2e;for(let s=0;s<7;s++)e=(e<<yb^(e>>Y2e)*X2e)%J2e,e&W2e&&(i^=yb<<(yb<<BigInt(s))-yb);Ire.push(i)}const[Q2e,Z2e]=bre(Ire,!0),kH=(t,e,n)=>n>32?Sre(t,e,n):wre(t,e,n),CH=(t,e,n)=>n>32?Are(t,e,n):Ere(t,e,n);function eCe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],h=kH(c,u,1)^n[a],m=CH(c,u,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=m}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=_re[o],l=kH(i,s,a),c=CH(i,s,a),u=Pre[o];i=t[u],s=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Q2e[r],t[1]^=Z2e[r]}n.fill(0)}class N8 extends A8{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Xo(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=hT(this.state)}keccak(){eCe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){fx(this);const{blockLen:n,state:r}=this;e=hx(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){fx(this,!1),S8(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Xo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(mre(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new N8(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const tCe=(t,e,n)=>xC(()=>new N8(e,t,n)),nCe=tCe(1,136,256/8);let Rre=!1;const Ore=function(t){return nCe(t)};let Mre=Ore;function Kn(t){const e=yt(t,"data");return rt(Mre(e))}Kn._=Ore;Kn.lock=function(){Rre=!0};Kn.register=function(t){if(Rre)throw new TypeError("keccak256 is locked");Mre=t};Object.freeze(Kn);const rCe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Lre=Uint8Array.from({length:16},(t,e)=>e),iCe=Lre.map(t=>(9*t+5)%16);let P8=[Lre],_8=[iCe];for(let t=0;t<4;t++)for(let e of[P8,_8])e.push(e[t].map(n=>rCe[n]));const Dre=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),sCe=P8.map((t,e)=>t.map(n=>Dre[e][n])),oCe=_8.map((t,e)=>t.map(n=>Dre[e][n])),aCe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),lCe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),tA=(t,e)=>t<<e|t>>>32-e;function NH(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const nA=new Uint32Array(16);class cCe extends k8{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:i,h4:s}=this;return[e,n,r,i,s]}set(e,n,r,i,s){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,n){for(let g=0;g<16;g++,n+=4)nA[g]=e.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,l=a,c=this.h3|0,u=c,h=this.h4|0,m=h;for(let g=0;g<5;g++){const x=4-g,v=aCe[g],b=lCe[g],w=P8[g],k=_8[g],C=sCe[g],R=oCe[g];for(let B=0;B<16;B++){const O=tA(r+NH(g,s,a,c)+nA[w[B]]+v,C[B])+h|0;r=h,h=c,c=tA(a,10)|0,a=s,s=O}for(let B=0;B<16;B++){const O=tA(i+NH(x,o,l,u)+nA[k[B]]+b,R[B])+m|0;i=m,m=u,u=tA(l,10)|0,l=o,o=O}}this.set(this.h1+a+u|0,this.h2+c+m|0,this.h3+h+i|0,this.h4+r+o|0,this.h0+s+l|0)}roundClean(){nA.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const uCe=xC(()=>new cCe);let jre=!1;const Bre=function(t){return uCe(t)};let Ure=Bre;function Vx(t){const e=yt(t,"data");return rt(Ure(e))}Vx._=Bre;Vx.lock=function(){jre=!0};Vx.register=function(t){if(jre)throw new TypeError("ripemd160 is locked");Ure=t};Object.freeze(Vx);let Fre=!1;const $re=function(t,e,n,r,i){return q2e(t,e,n,r,i)};let zre=$re;function wh(t,e,n,r,i){const s=yt(t,"password"),o=yt(e,"salt");return rt(zre(s,o,n,r,i))}wh._=$re;wh.lock=function(){Fre=!0};wh.register=function(t){if(Fre)throw new Error("pbkdf2 is locked");zre=t};Object.freeze(wh);let Hre=!1;const Vre=function(t){return new Uint8Array(G2e(t))};let qre=Vre;function td(t){return qre(t)}td._=Vre;td.lock=function(){Hre=!0};td.register=function(t){if(Hre)throw new Error("randomBytes is locked");qre=t};Object.freeze(td);const jn=(t,e)=>t<<e|t>>>32-e;function PH(t,e,n,r,i,s){let o=t[e++]^n[r++],a=t[e++]^n[r++],l=t[e++]^n[r++],c=t[e++]^n[r++],u=t[e++]^n[r++],h=t[e++]^n[r++],m=t[e++]^n[r++],g=t[e++]^n[r++],x=t[e++]^n[r++],v=t[e++]^n[r++],b=t[e++]^n[r++],w=t[e++]^n[r++],k=t[e++]^n[r++],C=t[e++]^n[r++],R=t[e++]^n[r++],B=t[e++]^n[r++],O=o,F=a,H=l,j=c,$=u,W=h,V=m,U=g,T=x,_=v,L=b,z=w,G=k,te=C,K=R,q=B;for(let M=0;M<8;M+=2)$^=jn(O+G|0,7),T^=jn($+O|0,9),G^=jn(T+$|0,13),O^=jn(G+T|0,18),_^=jn(W+F|0,7),te^=jn(_+W|0,9),F^=jn(te+_|0,13),W^=jn(F+te|0,18),K^=jn(L+V|0,7),H^=jn(K+L|0,9),V^=jn(H+K|0,13),L^=jn(V+H|0,18),j^=jn(q+z|0,7),U^=jn(j+q|0,9),z^=jn(U+j|0,13),q^=jn(z+U|0,18),F^=jn(O+j|0,7),H^=jn(F+O|0,9),j^=jn(H+F|0,13),O^=jn(j+H|0,18),V^=jn(W+$|0,7),U^=jn(V+W|0,9),$^=jn(U+V|0,13),W^=jn($+U|0,18),z^=jn(L+_|0,7),T^=jn(z+L|0,9),_^=jn(T+z|0,13),L^=jn(_+T|0,18),G^=jn(q+K|0,7),te^=jn(G+q|0,9),K^=jn(te+G|0,13),q^=jn(K+te|0,18);i[s++]=o+O|0,i[s++]=a+F|0,i[s++]=l+H|0,i[s++]=c+j|0,i[s++]=u+$|0,i[s++]=h+W|0,i[s++]=m+V|0,i[s++]=g+U|0,i[s++]=x+T|0,i[s++]=v+_|0,i[s++]=b+L|0,i[s++]=w+z|0,i[s++]=k+G|0,i[s++]=C+te|0,i[s++]=R+K|0,i[s++]=B+q|0}function Zg(t,e,n,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)n[o+a]=t[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)PH(n,o,t,e,n,s),a>0&&(o+=16),PH(n,s,t,e+=16,n,o)}function Gre(t,e,n){const r=yre({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:i,r:s,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=r;if(Xo(i),Xo(s),Xo(o),Xo(a),Xo(l),Xo(c),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const h=128*s,m=h/4;if(i<=1||(i&i-1)!==0||i>=2**(h/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/h)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=h*(i+o);if(g>c)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${c} (maxmem)`);const x=T8(zx,t,e,{c:1,dkLen:h*o}),v=hT(x),b=hT(new Uint8Array(h*i)),w=hT(new Uint8Array(h));let k=()=>{};if(u){const C=2*i*o,R=Math.max(Math.floor(C/1e4),1);let B=0;k=()=>{B++,u&&(!(B%R)||B===C)&&u(B/C)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:m,V:b,B32:v,B:x,tmp:w,blockMixCb:k,asyncTick:l}}function Kre(t,e,n,r,i){const s=T8(zx,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),i.fill(0),s}function dCe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:h,blockMixCb:m}=Gre(t,e,n);for(let g=0;g<s;g++){const x=a*g;for(let v=0;v<a;v++)l[v]=c[x+v];for(let v=0,b=0;v<r-1;v++)Zg(l,b,l,b+=a,i),m();Zg(l,(r-1)*a,c,x,i),m();for(let v=0;v<r;v++){const b=c[x+a-16]%r;for(let w=0;w<a;w++)h[w]=c[x+w]^l[b*a+w];Zg(h,0,c,x,i),m()}}return Kre(t,o,u,l,h)}async function fCe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:h,blockMixCb:m,asyncTick:g}=Gre(t,e,n);for(let x=0;x<s;x++){const v=a*x;for(let w=0;w<a;w++)l[w]=c[v+w];let b=0;await SH(r-1,g,()=>{Zg(l,b,l,b+=a,i),m()}),Zg(l,(r-1)*a,c,v,i),m(),await SH(r,g,()=>{const w=c[v+a-16]%r;for(let k=0;k<a;k++)h[k]=c[v+k]^l[w*a+k];Zg(h,0,c,v,i),m()})}return Kre(t,o,u,l,h)}let Wre=!1,Yre=!1;const Jre=async function(t,e,n,r,i,s,o){return await fCe(t,e,{N:n,r,p:i,dkLen:s,onProgress:o})},Xre=function(t,e,n,r,i,s){return dCe(t,e,{N:n,r,p:i,dkLen:s})};let Qre=Jre,Zre=Xre;async function qx(t,e,n,r,i,s,o){const a=yt(t,"passwd"),l=yt(e,"salt");return rt(await Qre(a,l,n,r,i,s,o))}qx._=Jre;qx.lock=function(){Yre=!0};qx.register=function(t){if(Yre)throw new Error("scrypt is locked");Qre=t};Object.freeze(qx);function Gx(t,e,n,r,i,s){const o=yt(t,"passwd"),a=yt(e,"salt");return rt(Zre(o,a,n,r,i,s))}Gx._=Xre;Gx.lock=function(){Wre=!0};Gx.register=function(t){if(Wre)throw new Error("scryptSync is locked");Zre=t};Object.freeze(Gx);const eie=function(t){return Tre("sha256").update(t).digest()},tie=function(t){return Tre("sha512").update(t).digest()};let nie=eie,rie=tie,iie=!1,sie=!1;function Xa(t){const e=yt(t,"data");return rt(nie(e))}Xa._=eie;Xa.lock=function(){iie=!0};Xa.register=function(t){if(iie)throw new Error("sha256 is locked");nie=t};Object.freeze(Xa);function I8(t){const e=yt(t,"data");return rt(rie(e))}I8._=tie;I8.lock=function(){sie=!0};I8.register=function(t){if(sie)throw new Error("sha512 is locked");rie=t};Object.freeze(Xa);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oie=BigInt(0),bC=BigInt(1),hCe=BigInt(2),wC=t=>t instanceof Uint8Array,pCe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function px(t){if(!wC(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=pCe[t[n]];return e}function aie(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function R8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function mx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function am(t){return R8(px(t))}function O8(t){if(!wC(t))throw new Error("Uint8Array expected");return R8(px(Uint8Array.from(t).reverse()))}function gx(t,e){return mx(t.toString(16).padStart(e*2,"0"))}function M8(t,e){return gx(t,e).reverse()}function mCe(t){return mx(aie(t))}function yl(t,e,n){let r;if(typeof e=="string")try{r=mx(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(wC(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function Iw(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!wC(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function gCe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function yCe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function xCe(t){let e;for(e=0;t>oie;t>>=bC,e+=1);return e}function vCe(t,e){return t>>BigInt(e)&bC}const bCe=(t,e,n)=>t|(n?bC:oie)<<BigInt(e),L8=t=>(hCe<<BigInt(t-1))-bC,lR=t=>new Uint8Array(t),_H=t=>Uint8Array.from(t);function lie(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=lR(t),i=lR(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),l=(h=lR())=>{i=a(_H([0]),h),r=a(),h.length!==0&&(i=a(_H([1]),h),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const m=[];for(;h<e;){r=a();const g=r.slice();m.push(g),h+=r.length}return Iw(...m)};return(h,m)=>{o(),l(h);let g;for(;!(g=m(c()));)l();return o(),g}}const wCe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function V1(t,e,n={}){const r=(i,s,o)=>{const a=wCe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const ECe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:vCe,bitLen:xCe,bitMask:L8,bitSet:bCe,bytesToHex:px,bytesToNumberBE:am,bytesToNumberLE:O8,concatBytes:Iw,createHmacDrbg:lie,ensureBytes:yl,equalBytes:gCe,hexToBytes:mx,hexToNumber:R8,numberToBytesBE:gx,numberToBytesLE:M8,numberToHexUnpadded:aie,numberToVarBytesBE:mCe,utf8ToBytes:yCe,validateObject:V1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ui=BigInt(0),ri=BigInt(1),gp=BigInt(2),SCe=BigInt(3),K3=BigInt(4),IH=BigInt(5),RH=BigInt(8);BigInt(9);BigInt(16);function xo(t,e){const n=t%e;return n>=Ui?n:e+n}function ACe(t,e,n){if(n<=Ui||e<Ui)throw new Error("Expected power/modulo > 0");if(n===ri)return Ui;let r=ri;for(;e>Ui;)e&ri&&(r=r*t%n),t=t*t%n,e>>=ri;return r}function Ea(t,e,n){let r=t;for(;e-- >Ui;)r*=r,r%=n;return r}function W3(t,e){if(t===Ui||e<=Ui)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=xo(t,e),r=e,i=Ui,s=ri;for(;n!==Ui;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==ri)throw new Error("invert: does not exist");return xo(i,e)}function TCe(t){const e=(t-ri)/gp;let n,r,i;for(n=t-ri,r=0;n%gp===Ui;n/=gp,r++);for(i=gp;i<t&&ACe(i,e,t)!==t-ri;i++);if(r===1){const o=(t+ri)/K3;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const s=(n+ri)/gp;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,u=a.pow(a.mul(a.ONE,i),n),h=a.pow(l,s),m=a.pow(l,n);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let g=1;for(let v=a.sqr(m);g<c&&!a.eql(v,a.ONE);g++)v=a.sqr(v);const x=a.pow(u,ri<<BigInt(c-g-1));u=a.sqr(x),h=a.mul(h,x),m=a.mul(m,u),c=g}return h}}function kCe(t){if(t%K3===SCe){const e=(t+ri)/K3;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%RH===IH){const e=(t-IH)/RH;return function(r,i){const s=r.mul(i,gp),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,gp),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return TCe(t)}const CCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function NCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=CCe.reduce((r,i)=>(r[i]="function",r),e);return V1(t,n)}function PCe(t,e,n){if(n<Ui)throw new Error("Expected power > 0");if(n===Ui)return t.ONE;if(n===ri)return e;let r=t.ONE,i=e;for(;n>Ui;)n&ri&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ri;return r}function _Ce(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function cie(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ICe(t,e,n=!1,r={}){if(t<=Ui)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=cie(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=kCe(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:L8(i),ZERO:Ui,ONE:ri,create:l=>xo(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Ui<=l&&l<t},is0:l=>l===Ui,isOdd:l=>(l&ri)===ri,neg:l=>xo(-l,t),eql:(l,c)=>l===c,sqr:l=>xo(l*l,t),add:(l,c)=>xo(l+c,t),sub:(l,c)=>xo(l-c,t),mul:(l,c)=>xo(l*c,t),pow:(l,c)=>PCe(a,l,c),div:(l,c)=>xo(l*W3(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>W3(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>_Ce(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?M8(l,s):gx(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?O8(l):am(l)}});return Object.freeze(a)}function uie(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function die(t){const e=uie(t);return e+Math.ceil(e/2)}function RCe(t,e,n=!1){const r=t.length,i=uie(e),s=die(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?am(t):O8(t),a=xo(o,e-ri)+ri;return n?M8(a,i):gx(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const OCe=BigInt(0),cR=BigInt(1);function MCe(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>OCe;)s&cR&&(o=o.add(a)),a=a.double(),s>>=cR;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,u=c;for(let h=0;h<o;h++){u=c,l.push(u);for(let m=1;m<a;m++)u=u.add(c),l.push(u);c=u.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=t.ZERO,u=t.BASE;const h=BigInt(2**i-1),m=2**i,g=BigInt(i);for(let x=0;x<a;x++){const v=x*l;let b=Number(o&h);o>>=g,b>l&&(b-=m,o+=cR);const w=v,k=v+Math.abs(b)-1,C=x%2!==0,R=b<0;b===0?u=u.add(n(C,s[w])):c=c.add(n(R,s[k]))}return{p:c,f:u}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function fie(t){return NCe(t.Fp),V1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...cie(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function LCe(t){const e=fie(t);V1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:DCe,hexToBytes:jCe}=ECe,Tp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Tp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:DCe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Tp,n=typeof t=="string"?jCe(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Tp._parseInt(n.subarray(2)),{d:o,l:a}=Tp._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const u=c.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},Hu=BigInt(0),Fa=BigInt(1);BigInt(2);const OH=BigInt(3);BigInt(4);function BCe(t){const e=LCe(t),{Fp:n}=e,r=e.toBytes||((x,v,b)=>{const w=v.toAffine();return Iw(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(x=>{const v=x.subarray(1),b=n.fromBytes(v.subarray(0,n.BYTES)),w=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:b,y:w}});function s(x){const{a:v,b}=e,w=n.sqr(x),k=n.mul(w,x);return n.add(n.add(k,n.mul(x,v)),b)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(x){return typeof x=="bigint"&&Hu<x&&x<e.n}function a(x){if(!o(x))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(x){const{allowedPrivateKeyLengths:v,nByteLength:b,wrapPrivateKey:w,n:k}=e;if(v&&typeof x!="bigint"){if(x instanceof Uint8Array&&(x=px(x)),typeof x!="string"||!v.includes(x.length))throw new Error("Invalid key");x=x.padStart(b*2,"0")}let C;try{C=typeof x=="bigint"?x:am(yl("private key",x,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof x}`)}return w&&(C=xo(C,k)),a(C),C}const c=new Map;function u(x){if(!(x instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(v,b,w){if(this.px=v,this.py=b,this.pz=w,v==null||!n.isValid(v))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(v){const{x:b,y:w}=v||{};if(!v||!n.isValid(b)||!n.isValid(w))throw new Error("invalid affine point");if(v instanceof h)throw new Error("projective point not allowed");const k=C=>n.eql(C,n.ZERO);return k(b)&&k(w)?h.ZERO:new h(b,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const b=n.invertBatch(v.map(w=>w.pz));return v.map((w,k)=>w.toAffine(b[k])).map(h.fromAffine)}static fromHex(v){const b=h.fromAffine(i(yl("pointHex",v)));return b.assertValidity(),b}static fromPrivateKey(v){return h.BASE.multiply(l(v))}_setWindowSize(v){this._WINDOW_SIZE=v,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:b}=this.toAffine();if(!n.isValid(v)||!n.isValid(b))throw new Error("bad point: x or y not FE");const w=n.sqr(b),k=s(v);if(!n.eql(w,k))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(n.isOdd)return!n.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){u(v);const{px:b,py:w,pz:k}=this,{px:C,py:R,pz:B}=v,O=n.eql(n.mul(b,B),n.mul(C,k)),F=n.eql(n.mul(w,B),n.mul(R,k));return O&&F}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:v,b}=e,w=n.mul(b,OH),{px:k,py:C,pz:R}=this;let B=n.ZERO,O=n.ZERO,F=n.ZERO,H=n.mul(k,k),j=n.mul(C,C),$=n.mul(R,R),W=n.mul(k,C);return W=n.add(W,W),F=n.mul(k,R),F=n.add(F,F),B=n.mul(v,F),O=n.mul(w,$),O=n.add(B,O),B=n.sub(j,O),O=n.add(j,O),O=n.mul(B,O),B=n.mul(W,B),F=n.mul(w,F),$=n.mul(v,$),W=n.sub(H,$),W=n.mul(v,W),W=n.add(W,F),F=n.add(H,H),H=n.add(F,H),H=n.add(H,$),H=n.mul(H,W),O=n.add(O,H),$=n.mul(C,R),$=n.add($,$),H=n.mul($,W),B=n.sub(B,H),F=n.mul($,j),F=n.add(F,F),F=n.add(F,F),new h(B,O,F)}add(v){u(v);const{px:b,py:w,pz:k}=this,{px:C,py:R,pz:B}=v;let O=n.ZERO,F=n.ZERO,H=n.ZERO;const j=e.a,$=n.mul(e.b,OH);let W=n.mul(b,C),V=n.mul(w,R),U=n.mul(k,B),T=n.add(b,w),_=n.add(C,R);T=n.mul(T,_),_=n.add(W,V),T=n.sub(T,_),_=n.add(b,k);let L=n.add(C,B);return _=n.mul(_,L),L=n.add(W,U),_=n.sub(_,L),L=n.add(w,k),O=n.add(R,B),L=n.mul(L,O),O=n.add(V,U),L=n.sub(L,O),H=n.mul(j,_),O=n.mul($,U),H=n.add(O,H),O=n.sub(V,H),H=n.add(V,H),F=n.mul(O,H),V=n.add(W,W),V=n.add(V,W),U=n.mul(j,U),_=n.mul($,_),V=n.add(V,U),U=n.sub(W,U),U=n.mul(j,U),_=n.add(_,U),W=n.mul(V,_),F=n.add(F,W),W=n.mul(L,_),O=n.mul(T,O),O=n.sub(O,W),W=n.mul(T,V),H=n.mul(L,H),H=n.add(H,W),new h(O,F,H)}subtract(v){return this.add(v.negate())}is0(){return this.equals(h.ZERO)}wNAF(v){return g.wNAFCached(this,c,v,b=>{const w=n.invertBatch(b.map(k=>k.pz));return b.map((k,C)=>k.toAffine(w[C])).map(h.fromAffine)})}multiplyUnsafe(v){const b=h.ZERO;if(v===Hu)return b;if(a(v),v===Fa)return this;const{endo:w}=e;if(!w)return g.unsafeLadder(this,v);let{k1neg:k,k1:C,k2neg:R,k2:B}=w.splitScalar(v),O=b,F=b,H=this;for(;C>Hu||B>Hu;)C&Fa&&(O=O.add(H)),B&Fa&&(F=F.add(H)),H=H.double(),C>>=Fa,B>>=Fa;return k&&(O=O.negate()),R&&(F=F.negate()),F=new h(n.mul(F.px,w.beta),F.py,F.pz),O.add(F)}multiply(v){a(v);let b=v,w,k;const{endo:C}=e;if(C){const{k1neg:R,k1:B,k2neg:O,k2:F}=C.splitScalar(b);let{p:H,f:j}=this.wNAF(B),{p:$,f:W}=this.wNAF(F);H=g.constTimeNegate(R,H),$=g.constTimeNegate(O,$),$=new h(n.mul($.px,C.beta),$.py,$.pz),w=H.add($),k=j.add(W)}else{const{p:R,f:B}=this.wNAF(b);w=R,k=B}return h.normalizeZ([w,k])[0]}multiplyAndAddUnsafe(v,b,w){const k=h.BASE,C=(B,O)=>O===Hu||O===Fa||!B.equals(k)?B.multiplyUnsafe(O):B.multiply(O),R=C(this,b).add(C(v,w));return R.is0()?void 0:R}toAffine(v){const{px:b,py:w,pz:k}=this,C=this.is0();v==null&&(v=C?n.ONE:n.inv(k));const R=n.mul(b,v),B=n.mul(w,v),O=n.mul(k,v);if(C)return{x:n.ZERO,y:n.ZERO};if(!n.eql(O,n.ONE))throw new Error("invZ was invalid");return{x:R,y:B}}isTorsionFree(){const{h:v,isTorsionFree:b}=e;if(v===Fa)return!0;if(b)return b(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:b}=e;return v===Fa?this:b?b(h,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),r(h,this,v)}toHex(v=!0){return px(this.toRawBytes(v))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const m=e.nBitLength,g=MCe(h,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function UCe(t){const e=fie(t);return V1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function FCe(t){const e=UCe(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(_){return Hu<_&&_<n.ORDER}function a(_){return xo(_,r)}function l(_){return W3(_,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:m}=BCe({...e,toBytes(_,L,z){const G=L.toAffine(),te=n.toBytes(G.x),K=Iw;return z?K(Uint8Array.from([L.hasEvenY()?2:3]),te):K(Uint8Array.from([4]),te,n.toBytes(G.y))},fromBytes(_){const L=_.length,z=_[0],G=_.subarray(1);if(L===i&&(z===2||z===3)){const te=am(G);if(!o(te))throw new Error("Point is not on curve");const K=h(te);let q=n.sqrt(K);const M=(q&Fa)===Fa;return(z&1)===1!==M&&(q=n.neg(q)),{x:te,y:q}}else if(L===s&&z===4){const te=n.fromBytes(G.subarray(0,n.BYTES)),K=n.fromBytes(G.subarray(n.BYTES,2*n.BYTES));return{x:te,y:K}}else throw new Error(`Point of length ${L} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=_=>px(gx(_,e.nByteLength));function x(_){const L=r>>Fa;return _>L}function v(_){return x(_)?a(-_):_}const b=(_,L,z)=>am(_.slice(L,z));class w{constructor(L,z,G){this.r=L,this.s=z,this.recovery=G,this.assertValidity()}static fromCompact(L){const z=e.nByteLength;return L=yl("compactSignature",L,z*2),new w(b(L,0,z),b(L,z,2*z))}static fromDER(L){const{r:z,s:G}=Tp.toSig(yl("DER",L));return new w(z,G)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(L){return new w(this.r,this.s,L)}recoverPublicKey(L){const{r:z,s:G,recovery:te}=this,K=F(yl("msgHash",L));if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");const q=te===2||te===3?z+e.n:z;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=(te&1)===0?"02":"03",P=c.fromHex(M+g(q)),Y=l(q),X=a(-K*Y),re=a(G*Y),ae=c.BASE.multiplyAndAddUnsafe(P,X,re);if(!ae)throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return x(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return mx(this.toDERHex())}toDERHex(){return Tp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return mx(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const k={isValidPrivateKey(_){try{return u(_),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const _=die(e.n);return RCe(e.randomBytes(_),e.n)},precompute(_=8,L=c.BASE){return L._setWindowSize(_),L.multiply(BigInt(3)),L}};function C(_,L=!0){return c.fromPrivateKey(_).toRawBytes(L)}function R(_){const L=_ instanceof Uint8Array,z=typeof _=="string",G=(L||z)&&_.length;return L?G===i||G===s:z?G===2*i||G===2*s:_ instanceof c}function B(_,L,z=!0){if(R(_))throw new Error("first arg must be private key");if(!R(L))throw new Error("second arg must be public key");return c.fromHex(L).multiply(u(_)).toRawBytes(z)}const O=e.bits2int||function(_){const L=am(_),z=_.length*8-e.nBitLength;return z>0?L>>BigInt(z):L},F=e.bits2int_modN||function(_){return a(O(_))},H=L8(e.nBitLength);function j(_){if(typeof _!="bigint")throw new Error("bigint expected");if(!(Hu<=_&&_<H))throw new Error(`bigint expected < 2^${e.nBitLength}`);return gx(_,e.nByteLength)}function $(_,L,z=W){if(["recovered","canonical"].some(ue=>ue in z))throw new Error("sign() legacy options not supported");const{hash:G,randomBytes:te}=e;let{lowS:K,prehash:q,extraEntropy:M}=z;K==null&&(K=!0),_=yl("msgHash",_),q&&(_=yl("prehashed msgHash",G(_)));const P=F(_),Y=u(L),X=[j(Y),j(P)];if(M!=null){const ue=M===!0?te(n.BYTES):M;X.push(yl("extraEntropy",ue))}const re=Iw(...X),ae=P;function Te(ue){const pe=O(ue);if(!m(pe))return;const be=l(pe),se=c.BASE.multiply(pe).toAffine(),ve=a(se.x);if(ve===Hu)return;const Re=a(be*a(ae+ve*Y));if(Re===Hu)return;let De=(se.x===ve?0:2)|Number(se.y&Fa),Qe=Re;return K&&x(Re)&&(Qe=v(Re),De^=1),new w(ve,Qe,De)}return{seed:re,k2sig:Te}}const W={lowS:e.lowS,prehash:!1},V={lowS:e.lowS,prehash:!1};function U(_,L,z=W){const{seed:G,k2sig:te}=$(_,L,z),K=e;return lie(K.hash.outputLen,K.nByteLength,K.hmac)(G,te)}c.BASE._setWindowSize(8);function T(_,L,z,G=V){var se;const te=_;if(L=yl("msgHash",L),z=yl("publicKey",z),"strict"in G)throw new Error("options.strict was renamed to lowS");const{lowS:K,prehash:q}=G;let M,P;try{if(typeof te=="string"||te instanceof Uint8Array)try{M=w.fromDER(te)}catch(ve){if(!(ve instanceof Tp.Err))throw ve;M=w.fromCompact(te)}else if(typeof te=="object"&&typeof te.r=="bigint"&&typeof te.s=="bigint"){const{r:ve,s:Re}=te;M=new w(ve,Re)}else throw new Error("PARSE");P=c.fromHex(z)}catch(ve){if(ve.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(K&&M.hasHighS())return!1;q&&(L=e.hash(L));const{r:Y,s:X}=M,re=F(L),ae=l(X),Te=a(re*ae),ue=a(Y*ae),pe=(se=c.BASE.multiplyAndAddUnsafe(P,Te,ue))==null?void 0:se.toAffine();return pe?a(pe.x)===Y:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:B,sign:U,verify:T,ProjectivePoint:c,Signature:w,utils:k}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $Ce(t){return{hash:t,hmac:(e,...n)=>vC(t,e,p2e(...n)),randomBytes:g2e}}function zCe(t,e){const n=r=>FCe({...t,...$Ce(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hie=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),MH=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),HCe=BigInt(1),Y3=BigInt(2),LH=(t,e)=>(t+e/Y3)/e;function VCe(t){const e=hie,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,h=Ea(u,n,e)*u%e,m=Ea(h,n,e)*u%e,g=Ea(m,Y3,e)*c%e,x=Ea(g,i,e)*g%e,v=Ea(x,s,e)*x%e,b=Ea(v,a,e)*v%e,w=Ea(b,l,e)*b%e,k=Ea(w,a,e)*v%e,C=Ea(k,n,e)*u%e,R=Ea(C,o,e)*x%e,B=Ea(R,r,e)*c%e,O=Ea(B,Y3,e);if(!J3.eql(J3.sqr(O),t))throw new Error("Cannot find square root");return O}const J3=ICe(hie,void 0,void 0,{sqrt:VCe}),Af=zCe({a:BigInt(0),b:BigInt(7),Fp:J3,n:MH,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=MH,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-HCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=LH(s*t,e),l=LH(-r*t,e);let c=xo(t-a*n-l*i,e),u=xo(-a*r-l*s,e);const h=c>o,m=u>o;if(h&&(c=e-c),m&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:u}}}},zx);BigInt(0);Af.ProjectivePoint;const Rw="0x0000000000000000000000000000000000000000",DH="0x0000000000000000000000000000000000000000000000000000000000000000",h0t="",qCe=`Ethereum Signed Message:
`,jH=BigInt(0),BH=BigInt(1),X3=BigInt(2),UH=BigInt(27),FH=BigInt(28),rA=BigInt(35),pie=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),GCe=pie/X3,KCe=Symbol.for("nodejs.util.inspect.custom"),Qh={};function uR(t){return cd(Dr(t),32)}var ky,hc,Cy,jf;const Ra=class Ra{constructor(e,n,r,i){Ue(this,ky);Ue(this,hc);Ue(this,Cy);Ue(this,jf);bh(e,Qh,"Signature"),me(this,ky,n),me(this,hc,r),me(this,Cy,i),me(this,jf,null)}get r(){return ie(this,ky)}set r(e){ye(Xg(e)===32,"invalid r","value",e),me(this,ky,rt(e))}get s(){return ye(parseInt(ie(this,hc).substring(0,3))<8,"non-canonical s; use ._s","s",ie(this,hc)),ie(this,hc)}set s(e){ye(Xg(e)===32,"invalid s","value",e),me(this,hc,rt(e))}get _s(){return ie(this,hc)}isValid(){return BigInt(ie(this,hc))<=GCe}get v(){return ie(this,Cy)}set v(e){const n=Zt(e,"value");ye(n===27||n===28,"invalid v","v",e),me(this,Cy,n)}get networkV(){return ie(this,jf)}get legacyChainId(){const e=this.networkV;return e==null?null:Ra.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=yt(this.s);return this.yParity&&(e[0]|=128),rt(e)}get compactSerialized(){return On([this.r,this.yParityAndS])}get serialized(){return On([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=pie-BigInt(this._s),n=55-this.v,r=new Ra(Qh,this.r,uR(e),n);return this.networkV&&me(r,jf,this.networkV),r}clone(){const e=new Ra(Qh,this.r,this._s,this.v);return this.networkV&&me(e,jf,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[KCe](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=kt(e,"v");return n==UH||n==FH?jH:(ye(n>=rA,"invalid EIP-155 v","v",e),(n-rA)/X3)}static getChainIdV(e,n){return kt(e)*X3+BigInt(35+n-27)}static getNormalizedV(e){const n=kt(e);return n===jH||n===UH?27:n===BH||n===FH?28:(ye(n>=rA,"invalid v","v",e),n&BH?27:28)}static from(e){function n(c,u){ye(c,u,"signature",e)}if(e==null)return new Ra(Qh,DH,DH,27);if(typeof e=="string"){const c=yt(e,"signature");if(c.length===64){const u=rt(c.slice(0,32)),h=c.slice(32,64),m=h[0]&128?28:27;return h[0]&=127,new Ra(Qh,u,rt(h),m)}if(c.length===65){const u=rt(c.slice(0,32)),h=rt(c.slice(32,64)),m=Ra.getNormalizedV(c[64]);return new Ra(Qh,u,h,m)}n(!1,"invalid raw signature length")}if(e instanceof Ra)return e.clone();const r=e.r;n(r!=null,"missing r");const i=uR(r),s=(function(c,u){if(c!=null)return uR(c);if(u!=null){n(gr(u,32),"invalid yParityAndS");const h=yt(u);return h[0]&=127,rt(h)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,u,h){if(c!=null){const m=kt(c);return{networkV:m>=rA?m:void 0,v:Ra.getNormalizedV(m)}}if(u!=null)return n(gr(u,32),"invalid yParityAndS"),{v:yt(u)[0]&128?28:27};if(h!=null){switch(Zt(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new Ra(Qh,i,s,a);return o&&me(l,jf,o),n(e.yParity==null||Zt(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};ky=new WeakMap,hc=new WeakMap,Cy=new WeakMap,jf=new WeakMap;let no=Ra;var Lu;const yp=class yp{constructor(e){Ue(this,Lu);ye(Xg(e)===32,"invalid private key","privateKey","[REDACTED]"),me(this,Lu,rt(e))}get privateKey(){return ie(this,Lu)}get publicKey(){return yp.computePublicKey(ie(this,Lu))}get compressedPublicKey(){return yp.computePublicKey(ie(this,Lu),!0)}sign(e){ye(Xg(e)===32,"invalid digest length","digest",e);const n=Af.sign(cs(e),cs(ie(this,Lu)),{lowS:!0});return no.from({r:ud(n.r,32),s:ud(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=yp.computePublicKey(e);return rt(Af.getSharedSecret(cs(ie(this,Lu)),yt(n),!1))}static computePublicKey(e,n){let r=yt(e,"key");if(r.length===32){const s=Af.getPublicKey(r,!!n);return rt(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=Af.ProjectivePoint.fromHex(r);return rt(i.toRawBytes(n))}static recoverPublicKey(e,n){ye(Xg(e)===32,"invalid digest length","digest",e);const r=no.from(n);let i=Af.Signature.fromCompact(cs(On([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(cs(e));return ye(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=Af.ProjectivePoint.fromHex(yp.computePublicKey(e).substring(2)),s=Af.ProjectivePoint.fromHex(yp.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};Lu=new WeakMap;let Mc=yp;const WCe=BigInt(0),YCe=BigInt(36);function $H(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=yt(Kn(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const D8={};for(let t=0;t<10;t++)D8[String(t)]=String(t);for(let t=0;t<26;t++)D8[String.fromCharCode(65+t)]=String(10+t);const zH=15;function mie(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>D8[r]).join("");for(;e.length>=zH;){let r=e.substring(0,zH);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const JCe=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function XCe(t){t=t.toLowerCase();let e=WCe;for(let n=0;n<t.length;n++)e=e*YCe+JCe[t[n]];return e}function yn(t){if(ye(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=$H(t);return ye(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ye(t.substring(2,4)===mie(t),"bad icap checksum","address",t);let e=XCe(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return $H("0x"+e)}ye(!1,"invalid address","address",t)}function p0t(t){let e=BigInt(yn(t)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+mie("XE00"+e)+e}function QCe(t){const e=yn(t.from);let r=kt(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,yn(mr(Kn(Oc([e,r])),12))}function m0t(t,e,n){const r=yn(t),i=yt(e,"salt"),s=yt(n,"initCodeHash");return ye(i.length===32,"salt must be 32 bytes","salt",e),ye(s.length===32,"initCodeHash must be 32 bytes","initCodeHash",n),yn(mr(Kn(On(["0xff",r,i,s])),12))}function gie(t){return t&&typeof t.getAddress=="function"}function g0t(t){try{return yn(t),!0}catch{}return!1}async function dR(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(Ke(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),ye(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),yn(n)}function Fi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?yn(t):(Ke(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),dR(t,e.resolveName(t)));if(gie(t))return dR(t,t.getAddress());if(t&&typeof t.then=="function")return dR(t,t);ye(!1,"unsupported addressable value","target",t)}const Cu={};function Ct(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Ls(Cu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Bn(t,e){return new Ls(Cu,`bytes${e||""}`,t,{size:e})}const HH=Symbol.for("_ethers_typed");var Vp;const Nu=class Nu{constructor(e,n,r,i){Ce(this,"type");Ce(this,"value");Ue(this,Vp);Ce(this,"_typedSymbol");i==null&&(i=null),bh(Cu,e,"Typed"),Lt(this,{_typedSymbol:HH,type:n,value:r}),me(this,Vp,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return ie(this,Vp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return ie(this,Vp)===!0?-1:ie(this,Vp)===!1?this.value.length:null}static from(e,n){return new Nu(Cu,e,n)}static uint8(e){return Ct(e,8)}static uint16(e){return Ct(e,16)}static uint24(e){return Ct(e,24)}static uint32(e){return Ct(e,32)}static uint40(e){return Ct(e,40)}static uint48(e){return Ct(e,48)}static uint56(e){return Ct(e,56)}static uint64(e){return Ct(e,64)}static uint72(e){return Ct(e,72)}static uint80(e){return Ct(e,80)}static uint88(e){return Ct(e,88)}static uint96(e){return Ct(e,96)}static uint104(e){return Ct(e,104)}static uint112(e){return Ct(e,112)}static uint120(e){return Ct(e,120)}static uint128(e){return Ct(e,128)}static uint136(e){return Ct(e,136)}static uint144(e){return Ct(e,144)}static uint152(e){return Ct(e,152)}static uint160(e){return Ct(e,160)}static uint168(e){return Ct(e,168)}static uint176(e){return Ct(e,176)}static uint184(e){return Ct(e,184)}static uint192(e){return Ct(e,192)}static uint200(e){return Ct(e,200)}static uint208(e){return Ct(e,208)}static uint216(e){return Ct(e,216)}static uint224(e){return Ct(e,224)}static uint232(e){return Ct(e,232)}static uint240(e){return Ct(e,240)}static uint248(e){return Ct(e,248)}static uint256(e){return Ct(e,256)}static uint(e){return Ct(e,256)}static int8(e){return Ct(e,-8)}static int16(e){return Ct(e,-16)}static int24(e){return Ct(e,-24)}static int32(e){return Ct(e,-32)}static int40(e){return Ct(e,-40)}static int48(e){return Ct(e,-48)}static int56(e){return Ct(e,-56)}static int64(e){return Ct(e,-64)}static int72(e){return Ct(e,-72)}static int80(e){return Ct(e,-80)}static int88(e){return Ct(e,-88)}static int96(e){return Ct(e,-96)}static int104(e){return Ct(e,-104)}static int112(e){return Ct(e,-112)}static int120(e){return Ct(e,-120)}static int128(e){return Ct(e,-128)}static int136(e){return Ct(e,-136)}static int144(e){return Ct(e,-144)}static int152(e){return Ct(e,-152)}static int160(e){return Ct(e,-160)}static int168(e){return Ct(e,-168)}static int176(e){return Ct(e,-176)}static int184(e){return Ct(e,-184)}static int192(e){return Ct(e,-192)}static int200(e){return Ct(e,-200)}static int208(e){return Ct(e,-208)}static int216(e){return Ct(e,-216)}static int224(e){return Ct(e,-224)}static int232(e){return Ct(e,-232)}static int240(e){return Ct(e,-240)}static int248(e){return Ct(e,-248)}static int256(e){return Ct(e,-256)}static int(e){return Ct(e,-256)}static bytes1(e){return Bn(e,1)}static bytes2(e){return Bn(e,2)}static bytes3(e){return Bn(e,3)}static bytes4(e){return Bn(e,4)}static bytes5(e){return Bn(e,5)}static bytes6(e){return Bn(e,6)}static bytes7(e){return Bn(e,7)}static bytes8(e){return Bn(e,8)}static bytes9(e){return Bn(e,9)}static bytes10(e){return Bn(e,10)}static bytes11(e){return Bn(e,11)}static bytes12(e){return Bn(e,12)}static bytes13(e){return Bn(e,13)}static bytes14(e){return Bn(e,14)}static bytes15(e){return Bn(e,15)}static bytes16(e){return Bn(e,16)}static bytes17(e){return Bn(e,17)}static bytes18(e){return Bn(e,18)}static bytes19(e){return Bn(e,19)}static bytes20(e){return Bn(e,20)}static bytes21(e){return Bn(e,21)}static bytes22(e){return Bn(e,22)}static bytes23(e){return Bn(e,23)}static bytes24(e){return Bn(e,24)}static bytes25(e){return Bn(e,25)}static bytes26(e){return Bn(e,26)}static bytes27(e){return Bn(e,27)}static bytes28(e){return Bn(e,28)}static bytes29(e){return Bn(e,29)}static bytes30(e){return Bn(e,30)}static bytes31(e){return Bn(e,31)}static bytes32(e){return Bn(e,32)}static address(e){return new Nu(Cu,"address",e)}static bool(e){return new Nu(Cu,"bool",!!e)}static bytes(e){return new Nu(Cu,"bytes",e)}static string(e){return new Nu(Cu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Nu(Cu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===HH}static dereference(e,n){if(Nu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Vp=new WeakMap;let Ls=Nu;class ZCe extends Cd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Ls.dereference(n,"string");try{r=yn(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return yn(ud(e.readValue(),20))}}class eNe extends Cd{constructor(n){super(n.name,n.type,"_",n.dynamic);Ce(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function yie(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=e.map(c=>{const u=c.localName;return Ke(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),Ke(!l[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),l[u]=!0,n[u]})}else ye(!1,"invalid tuple value","tuple",n);ye(e.length===r.length,"types/value length mismatch","tuple",n);let i=new H3,s=new H3,o=[];e.forEach((l,c)=>{let u=r[c];if(l.dynamic){let h=s.length;l.encode(s,u);let m=i.writeUpdatableValue();o.push(g=>{m(g+h)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function xie(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(c){if(ls(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(ls(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),dx.fromItems(n,r)}class tNe extends Cd{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);Ce(this,"coder");Ce(this,"length");Lt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=Ls.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),Yne(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return yie(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),Ke(r*Js<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Js,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new eNe(this.coder));return xie(n,i)}}class nNe extends Cd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Ls.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class vie extends Cd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=cs(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class rNe extends vie{constructor(e){super("bytes",e)}decode(e){return rt(super.decode(e))}}class iNe extends Cd{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);Ce(this,"size");Lt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=cs(Ls.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return rt(n.readBytes(this.size))}}const sNe=new Uint8Array([]);class oNe extends Cd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(sNe)}decode(e){return e.readBytes(0),null}}const aNe=BigInt(0),lNe=BigInt(1),cNe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class uNe extends Cd{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);Ce(this,"size");Ce(this,"signed");Lt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=kt(Ls.dereference(r,this.type)),s=Ap(cNe,Js*8);if(this.signed){let o=Ap(s,this.size*8-1);(i>o||i<-(o+lNe))&&this._throwError("value out-of-bounds",r),i=Zne(i,8*Js)}else(i<aNe||i>Ap(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=Ap(n.readValue(),this.size*8);return this.signed&&(r=nk(r,this.size*8)),r}}class dNe extends vie{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,mi(Ls.dereference(n,"string")))}decode(e){return ik(super.decode(e))}}class iA extends Cd{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);Ce(this,"coders");Lt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=Ls.dereference(r,"tuple");return yie(n,this.coders,i)}decode(n){return xie(n,this.coders)}}function fR(t,e){return{address:yn(t),storageKeys:e.map((n,r)=>(ye(gr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Um(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(ye(n.length===2,"invalid slot set",`value[${r}]`,n),fR(n[0],n[1])):(ye(n!=null&&typeof n=="object","invalid address-slot set","value",t),fR(n.address,n.storageKeys)));ye(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return fR(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function bie(t){return{address:yn(t.address),nonce:kt(t.nonce!=null?t.nonce:0),chainId:kt(t.chainId!=null?t.chainId:0),signature:no.from(t.signature)}}function q1(t){let e;return typeof t=="string"?e=Mc.computePublicKey(t,!1):e=t.publicKey,yn(Kn("0x"+e.substring(4)).substring(26))}function EC(t,e){return q1(Mc.recoverPublicKey(t,e))}const Bi=BigInt(0),fNe=BigInt(2),hNe=BigInt(27),pNe=BigInt(28),mNe=BigInt(35),gNe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),yNe=Symbol.for("nodejs.util.inspect.custom"),hR=4096*32,mT=128;function xNe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return yt(t.blobToKzgCommitment(rt(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return yt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return yt(t.blobToKZGCommitment(rt(r)));ye(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return yt(t.computeBlobProof(rt(r),rt(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return yt(t.computeBlobKZGProof(rt(r),rt(i)));ye(!1,"unsupported KZG library","kzg",t)}}}function VH(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Xa(e).substring(4),"0x"+n}function Kx(t){return t==="0x"?null:yn(t)}function SC(t,e){try{return Um(t)}catch(n){ye(!1,n.message,e,t)}}function vNe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Kx(i[1]),nonce:ir(i[2],"nonce"),chainId:ir(i[0],"chainId"),signature:no.from({yParity:Fm(i[3],"yParity"),r:cd(i[4],32),s:cd(i[5],32)})})}return n}catch(n){ye(!1,n.message,e,t)}}function Fm(t,e){return t==="0x"?0:Zt(t,e)}function ir(t,e){if(t==="0x")return Bi;const n=kt(t,e);return ye(n<=gNe,"value exceeds uint size",e,n),n}function Pn(t,e){const n=kt(t,"value"),r=Dr(n);return ye(r.length<=32,"value too large",`tx.${e}`,n),r}function AC(t){return Um(t).map(e=>[e.address,e.storageKeys])}function bNe(t){return t.map(e=>[Pn(e.chainId,"chainId"),e.address,Pn(e.nonce,"nonce"),Pn(e.signature.yParity,"yParity"),Dr(e.signature.r),Dr(e.signature._s)])}function wNe(t,e){ye(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)ye(gr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function ENe(t){const e=H1(t);ye(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Fm(e[0],"nonce"),gasPrice:ir(e[1],"gasPrice"),gasLimit:ir(e[2],"gasLimit"),to:Kx(e[3]),value:ir(e[4],"value"),data:rt(e[5]),chainId:Bi};if(e.length===6)return n;const r=ir(e[6],"v"),i=ir(e[7],"r"),s=ir(e[8],"s");if(i===Bi&&s===Bi)n.chainId=r;else{let o=(r-mNe)/fNe;o<Bi&&(o=Bi),n.chainId=o,ye(o!==Bi||r===hNe||r===pNe,"non-canonical legacy v","v",e[6]),n.signature=no.from({r:cd(e[7],32),s:cd(e[8],32),v:r})}return n}function SNe(t,e){const n=[Pn(t.nonce,"nonce"),Pn(t.gasPrice||0,"gasPrice"),Pn(t.gasLimit,"gasLimit"),t.to||"0x",Pn(t.value,"value"),t.data];let r=Bi;if(t.chainId!=Bi)r=kt(t.chainId,"tx.chainId"),ye(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==Bi&&(n.push(Dr(r)),n.push("0x"),n.push("0x")),Oc(n);let i=BigInt(27+e.yParity);return r!==Bi?i=no.getChainIdV(r,e.v):BigInt(e.v)!==i&&ye(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Dr(i)),n.push(Dr(e.r)),n.push(Dr(e._s)),Oc(n)}function TC(t,e){let n;try{if(n=Fm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{ye(!1,"invalid yParity","yParity",e[0])}const r=cd(e[1],32),i=cd(e[2],32),s=no.from({r,s:i,yParity:n});t.signature=s}function ANe(t){const e=H1(yt(t).slice(1));ye(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",rt(t));const n={type:2,chainId:ir(e[0],"chainId"),nonce:Fm(e[1],"nonce"),maxPriorityFeePerGas:ir(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ir(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ir(e[4],"gasLimit"),to:Kx(e[5]),value:ir(e[6],"value"),data:rt(e[7]),accessList:SC(e[8],"accessList")};return e.length===9||TC(n,e.slice(9)),n}function TNe(t,e){const n=[Pn(t.chainId,"chainId"),Pn(t.nonce,"nonce"),Pn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pn(t.maxFeePerGas||0,"maxFeePerGas"),Pn(t.gasLimit,"gasLimit"),t.to||"0x",Pn(t.value,"value"),t.data,AC(t.accessList||[])];return e&&(n.push(Pn(e.yParity,"yParity")),n.push(Dr(e.r)),n.push(Dr(e.s))),On(["0x02",Oc(n)])}function kNe(t){const e=H1(yt(t).slice(1));ye(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",rt(t));const n={type:1,chainId:ir(e[0],"chainId"),nonce:Fm(e[1],"nonce"),gasPrice:ir(e[2],"gasPrice"),gasLimit:ir(e[3],"gasLimit"),to:Kx(e[4]),value:ir(e[5],"value"),data:rt(e[6]),accessList:SC(e[7],"accessList")};return e.length===8||TC(n,e.slice(8)),n}function CNe(t,e){const n=[Pn(t.chainId,"chainId"),Pn(t.nonce,"nonce"),Pn(t.gasPrice||0,"gasPrice"),Pn(t.gasLimit,"gasLimit"),t.to||"0x",Pn(t.value,"value"),t.data,AC(t.accessList||[])];return e&&(n.push(Pn(e.yParity,"recoveryParam")),n.push(Dr(e.r)),n.push(Dr(e.s))),On(["0x01",Oc(n)])}function NNe(t){let e=H1(yt(t).slice(1)),n="3",r=null,i=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];ye(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),ye(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),ye(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),ye(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ye(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<e[1].length;c++)i.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",r=Zt(e[1]);const o=e[2],a=e[3],l=e[4];ye(r===1,`unsupported EIP-7594 network format version: ${r}`,"fields[1]",r),ye(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),ye(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),ye(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),ye(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ye(o.length*mT===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<o.length;c++){const u=[];for(let h=0;h<mT;h++)u.push(l[c*mT+h]);i.push({data:o[c],commitment:a[c],proof:On(u)})}e=e[0]}ye(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",rt(t));const s={type:3,chainId:ir(e[0],"chainId"),nonce:Fm(e[1],"nonce"),maxPriorityFeePerGas:ir(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ir(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ir(e[4],"gasLimit"),to:Kx(e[5]),value:ir(e[6],"value"),data:rt(e[7]),accessList:SC(e[8],"accessList"),maxFeePerBlobGas:ir(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:r};i&&(s.blobs=i),ye(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),ye(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<s.blobVersionedHashes.length;o++)ye(gr(s.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||TC(s,e.slice(11)),s}function PNe(t,e,n){const r=[Pn(t.chainId,"chainId"),Pn(t.nonce,"nonce"),Pn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pn(t.maxFeePerGas||0,"maxFeePerGas"),Pn(t.gasLimit,"gasLimit"),t.to||Rw,Pn(t.value,"value"),t.data,AC(t.accessList||[]),Pn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),wNe(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(r.push(Pn(e.yParity,"yParity")),r.push(Dr(e.r)),r.push(Dr(e.s)),n)){if(t.blobWrapperVersion!=null){const i=Dr(t.blobWrapperVersion),s=[];for(const{proof:o}of n){const a=yt(o),l=a.length/mT;for(let c=0;c<a.length;c+=l)s.push(a.subarray(c,c+l))}return On(["0x03",Oc([r,i,n.map(o=>o.data),n.map(o=>o.commitment),s])])}return On(["0x03",Oc([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])])}return On(["0x03",Oc(r)])}function _Ne(t){const e=H1(yt(t).slice(1));ye(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",rt(t));const n={type:4,chainId:ir(e[0],"chainId"),nonce:Fm(e[1],"nonce"),maxPriorityFeePerGas:ir(e[2],"maxPriorityFeePerGas"),maxFeePerGas:ir(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:ir(e[4],"gasLimit"),to:Kx(e[5]),value:ir(e[6],"value"),data:rt(e[7]),accessList:SC(e[8],"accessList"),authorizationList:vNe(e[9],"authorizationList")};return e.length===10||TC(n,e.slice(10)),n}function INe(t,e){const n=[Pn(t.chainId,"chainId"),Pn(t.nonce,"nonce"),Pn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pn(t.maxFeePerGas||0,"maxFeePerGas"),Pn(t.gasLimit,"gasLimit"),t.to||"0x",Pn(t.value,"value"),t.data,AC(t.accessList||[]),bNe(t.authorizationList||[])];return e&&(n.push(Pn(e.yParity,"yParity")),n.push(Dr(e.r)),n.push(Dr(e.s))),On(["0x04",Oc(n)])}var wl,Ny,Py,_y,Iy,Ry,Oy,My,Ly,Dy,jy,By,qp,Bf,pc,Uf,Uy,Fy,$y,gT,Wo;let j8=(Wo=class{constructor(){Ue(this,$y);Ue(this,wl);Ue(this,Ny);Ue(this,Py);Ue(this,_y);Ue(this,Iy);Ue(this,Ry);Ue(this,Oy);Ue(this,My);Ue(this,Ly);Ue(this,Dy);Ue(this,jy);Ue(this,By);Ue(this,qp);Ue(this,Bf);Ue(this,pc);Ue(this,Uf);Ue(this,Uy);Ue(this,Fy);me(this,wl,null),me(this,Ny,null),me(this,_y,0),me(this,Iy,Bi),me(this,Ry,null),me(this,Oy,null),me(this,My,null),me(this,Py,"0x"),me(this,Ly,Bi),me(this,Dy,Bi),me(this,jy,null),me(this,By,null),me(this,qp,null),me(this,Bf,null),me(this,pc,null),me(this,Uf,null),me(this,Uy,null),me(this,Fy,null)}get type(){return ie(this,wl)}set type(e){switch(e){case null:me(this,wl,null);break;case 0:case"legacy":me(this,wl,0);break;case 1:case"berlin":case"eip-2930":me(this,wl,1);break;case 2:case"london":case"eip-1559":me(this,wl,2);break;case 3:case"cancun":case"eip-4844":me(this,wl,3);break;case 4:case"pectra":case"eip-7702":me(this,wl,4);break;default:ye(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=ie(this,Ny);return e==null&&this.type===3?Rw:e}set to(e){me(this,Ny,e==null?null:yn(e))}get nonce(){return ie(this,_y)}set nonce(e){me(this,_y,Zt(e,"value"))}get gasLimit(){return ie(this,Iy)}set gasLimit(e){me(this,Iy,kt(e))}get gasPrice(){const e=ie(this,Ry);return e==null&&(this.type===0||this.type===1)?Bi:e}set gasPrice(e){me(this,Ry,e==null?null:kt(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=ie(this,Oy);return e??(this.type===2||this.type===3?Bi:null)}set maxPriorityFeePerGas(e){me(this,Oy,e==null?null:kt(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=ie(this,My);return e??(this.type===2||this.type===3?Bi:null)}set maxFeePerGas(e){me(this,My,e==null?null:kt(e,"maxFeePerGas"))}get data(){return ie(this,Py)}set data(e){me(this,Py,rt(e))}get value(){return ie(this,Ly)}set value(e){me(this,Ly,kt(e,"value"))}get chainId(){return ie(this,Dy)}set chainId(e){me(this,Dy,kt(e))}get signature(){return ie(this,jy)||null}set signature(e){me(this,jy,e==null?null:no.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const r of n)if(!r.signature.isValid())return!1}return!0}get accessList(){const e=ie(this,By)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){me(this,By,e==null?null:Um(e))}get authorizationList(){const e=ie(this,Uy)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){me(this,Uy,e==null?null:e.map(n=>bie(n)))}get maxFeePerBlobGas(){const e=ie(this,qp);return e==null&&this.type===3?Bi:e}set maxFeePerBlobGas(e){me(this,qp,e==null?null:kt(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=ie(this,Bf);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ye(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)ye(gr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}me(this,Bf,e)}get blobs(){return ie(this,Uf)==null?null:ie(this,Uf).map(e=>Object.assign({},e))}set blobs(e){if(e==null){me(this,Uf,null);return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(gC(s)){Ke(ie(this,pc),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=yt(s);if(ye(o.length<=hR,"blob is too large",`blobs[${i}]`,s),o.length!==hR){const c=new Uint8Array(hR);c.set(o),o=c}const a=ie(this,pc).blobToKzgCommitment(o),l=rt(ie(this,pc).computeBlobKzgProof(o,a));n.push({data:rt(o),commitment:rt(a),proof:l}),r.push(VH(1,a))}else{const o=rt(s.data),a=rt(s.commitment),l=rt(s.proof);n.push({data:o,commitment:a,proof:l}),r.push(VH(1,a))}}me(this,Uf,n),me(this,Bf,r)}get kzg(){return ie(this,pc)}set kzg(e){e==null?me(this,pc,null):me(this,pc,xNe(e))}get blobWrapperVersion(){return ie(this,Fy)}set blobWrapperVersion(e){me(this,Fy,e)}get hash(){return this.signature==null?null:Kn(Ze(this,$y,gT).call(this,!0,!1))}get unsignedHash(){return Kn(this.unsignedSerialized)}get from(){return this.signature==null?null:EC(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Mc.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return Ze(this,$y,gT).call(this,!0,!0)}get unsignedSerialized(){return Ze(this,$y,gT).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=ie(this,qp)!=null||ie(this,Bf);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&Ke(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Ke(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Ke(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Wo.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[yNe](){return this.toString()}toString(){const e=[],n=i=>{let s=this[i];typeof s=="string"&&(s=JSON.stringify(s)),e.push(`${i}: ${s}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const r=this.authorizationList;if(r){const i=[];for(const s of r){const o=[];o.push(`address: ${JSON.stringify(s.address)}`),s.nonce!=null&&o.push(`nonce: ${s.nonce}`),s.chainId!=null&&o.push(`chainId: ${s.chainId}`),s.signature&&o.push(`signature: ${s.signature.toString()}`),i.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${i.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new Wo;if(typeof e=="string"){const r=yt(e);if(r[0]>=127)return Wo.from(ENe(r));switch(r[0]){case 1:return Wo.from(kNe(r));case 2:return Wo.from(ANe(r));case 3:return Wo.from(NNe(r));case 4:return Wo.from(_Ne(r))}Ke(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Wo;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=no.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(ye(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ye(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ye(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ye(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}},wl=new WeakMap,Ny=new WeakMap,Py=new WeakMap,_y=new WeakMap,Iy=new WeakMap,Ry=new WeakMap,Oy=new WeakMap,My=new WeakMap,Ly=new WeakMap,Dy=new WeakMap,jy=new WeakMap,By=new WeakMap,qp=new WeakMap,Bf=new WeakMap,pc=new WeakMap,Uf=new WeakMap,Uy=new WeakMap,Fy=new WeakMap,$y=new WeakSet,gT=function(e,n){Ke(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return SNe(this,r);case 1:return CNe(this,r);case 2:return TNe(this,r);case 3:return PNe(this,r,n?this.blobs:null);case 4:return INe(this,r)}Ke(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},Wo);function wie(t){return ye(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),Kn(On(["0x05",Oc([t.chainId!=null?Dr(t.chainId):"0x",yn(t.address),t.nonce!=null?Dr(t.nonce):"0x"])]))}function y0t(t,e){return EC(wie(t),e)}function fd(t){return Kn(mi(t))}var RNe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const qH=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),GH=4;function ONe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let B=1;B<r;B++)s.push(i+=n());let o=n(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const h=31,m=2**h,g=m>>>1,x=g>>1,v=m-1;let b=0;for(let B=0;B<h;B++)b=b<<1|u();let w=[],k=0,C=m;for(;;){let B=Math.floor(((b-k+1)*i-1)/C),O=0,F=r;for(;F-O>1;){let $=O+F>>>1;B<s[$]?F=$:O=$}if(O==0)break;w.push(O);let H=k+Math.floor(C*s[O]/i),j=k+Math.floor(C*s[O+1]/i)-1;for(;((H^j)&g)==0;)b=b<<1&v|u(),H=H<<1&v,j=j<<1&v|1;for(;H&~j&x;)b=b&g|b<<1&v>>>1|u(),H=H<<1^g,j=(j^g)<<1|g|1;k=H,C=1+j-H}let R=r-4;return w.map(B=>{switch(B-R){case 3:return R+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return R+256+(t[a++]<<8|t[a++]);case 1:return R+t[a++];default:return B-1}})}function MNe(t){let e=0;return()=>t[e++]}function Eie(t){return MNe(ONe(LNe(t)))}function LNe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function DNe(t){return t&1?~t>>1:t>>1}function jNe(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=DNe(e());return n}function Ow(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function Sie(t){return Mw(()=>{let e=Ow(t);if(e.length)return e})}function Aie(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(BNe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(UNe(n,t))}return e.flat()}function Mw(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Tie(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)jNe(t,n).forEach((s,o)=>r[o].push(s));return r}function BNe(t,e){let n=1+e(),r=e(),i=Mw(e);return Tie(i.length,1+t,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((u,h)=>{let m=h*r;return[l+h*n,c.map(g=>g+m)]})})}function UNe(t,e){let n=1+e();return Tie(n,1+t,e).map(i=>[i[0],i.slice(1)])}function FNe(t){let e=[],n=Ow(t);return i(r([]),[]),e;function r(s){let o=t(),a=Mw(()=>{let l=Ow(t).map(c=>n[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let u of c.Q)i(c,[...a,u],l)}}}function $Ne(t){return t.toString(16).toUpperCase().padStart(2,"0")}function kie(t){return`{${$Ne(t)}}`}function zNe(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function yx(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function HNe(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var VNe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Lw=44032,ok=4352,ak=4449,lk=4519,Cie=19,Nie=21,xx=28,ck=Nie*xx,qNe=Cie*ck,GNe=Lw+qNe,KNe=ok+Cie,WNe=ak+Nie,YNe=lk+xx;function zb(t){return t>>24&255}function Pie(t){return t&16777215}let Q3,KH,Z3,yT;function JNe(){let t=Eie(VNe);Q3=new Map(Sie(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),KH=new Set(Ow(t)),Z3=new Map,yT=new Map;for(let[e,n]of Aie(t)){if(!KH.has(e)&&n.length==2){let[r,i]=n,s=yT.get(r);s||(s=new Map,yT.set(r,s)),s.set(i,e)}Z3.set(e,n.reverse())}}function _ie(t){return t>=Lw&&t<GNe}function XNe(t,e){if(t>=ok&&t<KNe&&e>=ak&&e<WNe)return Lw+(t-ok)*ck+(e-ak)*xx;if(_ie(t)&&e>lk&&e<YNe&&(t-Lw)%xx==0)return t+(e-lk);{let n=yT.get(t);return n&&(n=n.get(e),n)?n:-1}}function Iie(t){Q3||JNe();let e=[],n=[],r=!1;function i(s){let o=Q3.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(_ie(s)){let o=s-Lw,a=o/ck|0,l=o%ck/xx|0,c=o%xx;i(ok+a),i(ak+l),c>0&&i(lk+c)}else{let o=Z3.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=zb(e[0]);for(let o=1;o<e.length;o++){let a=zb(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=zb(e[--l]),s<=a))break}s=zb(e[o])}}return e}function QNe(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=zb(s),a=Pie(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=XNe(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function Rie(t){return Iie(t).map(Pie)}function ZNe(t){return QNe(Iie(t))}const WH=45,Oie=".",Mie=65039,Lie=1,uk=t=>Array.from(t);function Dw(t,e){return t.P.has(e)||t.Q.has(e)}class ePe extends Array{get is_emoji(){return!0}}let eM,Die,kp,tM,jie,ey,pR,xg,ap,YH,nM;function B8(){if(eM)return;let t=Eie(RNe);const e=()=>Ow(t),n=()=>new Set(e()),r=(u,h)=>h.forEach(m=>u.add(m));eM=new Map(Aie(t)),Die=n(),kp=e(),tM=new Set(e().map(u=>kp[u])),kp=new Set(kp),jie=n(),n();let i=Sie(t),s=t();const o=()=>{let u=new Set;return e().forEach(h=>r(u,i[h])),r(u,e()),u};ey=Mw(u=>{let h=Mw(t).map(m=>m+96);if(h.length){let m=u>=s;h[0]-=32,h=yx(h),m&&(h=`Restricted[${h}]`);let g=o(),x=o(),v=!t();return{N:h,P:g,Q:x,M:v,R:m}}}),pR=n(),xg=new Map;let a=e().concat(uk(pR)).sort((u,h)=>u-h);a.forEach((u,h)=>{let m=t(),g=a[h]=m?a[h-m]:{V:[],M:new Map};g.V.push(u),pR.has(u)||xg.set(u,g)});for(let{V:u,M:h}of new Set(xg.values())){let m=[];for(let x of u){let v=ey.filter(w=>Dw(w,x)),b=m.find(({G:w})=>v.some(k=>w.has(k)));b||(b={G:new Set,V:[]},m.push(b)),b.V.push(x),r(b.G,v)}let g=m.flatMap(x=>uk(x.G));for(let{G:x,V:v}of m){let b=new Set(g.filter(w=>!x.has(w)));for(let w of v)h.set(w,b)}}ap=new Set;let l=new Set;const c=u=>ap.has(u)?l.add(u):ap.add(u);for(let u of ey){for(let h of u.P)c(h);for(let h of u.Q)c(h)}for(let u of ap)!xg.has(u)&&!l.has(u)&&xg.set(u,Lie);r(ap,Rie(ap)),YH=FNe(t).map(u=>ePe.from(u)).sort(HNe),nM=new Map;for(let u of YH){let h=[nM];for(let m of u){let g=h.map(x=>{let v=x.get(m);return v||(v=new Map,x.set(m,v)),v});m===Mie?h.push(...g):h=g}for(let m of h)m.V=u}}function U8(t){return(Bie(t)?"":`${F8(kC([t]))} `)+kie(t)}function F8(t){return`"${t}"`}function tPe(t){if(t.length>=4&&t[2]==WH&&t[3]==WH)throw new Error(`invalid label extension: "${yx(t.slice(0,4))}"`)}function nPe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function rPe(t){let e=t[0],n=qH.get(e);if(n)throw lw(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=qH.get(e);if(o){if(i==s)throw lw(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw lw(`trailing ${n}`)}function kC(t,e=1/0,n=kie){let r=[];iPe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];Bie(a)&&(r.push(yx(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(yx(t.slice(i,s))),r.join("")}function iPe(t){return B8(),kp.has(t)}function Bie(t){return B8(),jie.has(t)}function sPe(t){return cPe(oPe(t,ZNe,fPe))}function oPe(t,e,n){if(!t)return[];B8();let r=0;return t.split(Oie).map(i=>{let s=zNe(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=dPe(s,e,n),l=a.length,c;if(!l)throw new Error("empty label");let u=o.output=a.flat();if(nPe(u),!(o.emoji=l>1||a[0].is_emoji)&&u.every(m=>m<128))tPe(u),c="ASCII";else{let m=a.flatMap(g=>g.is_emoji?[]:g);if(!m.length)c="Emoji";else{if(kp.has(u[0]))throw lw("leading combining mark");for(let v=1;v<l;v++){let b=a[v];if(!b.is_emoji&&kp.has(b[0]))throw lw(`emoji + combining mark: "${yx(a[v-1])} + ${kC([b[0]])}"`)}rPe(u);let g=uk(new Set(m)),[x]=lPe(g);uPe(x,m),aPe(x,g),c=x.N}}o.type=c}catch(a){o.error=a}return o})}function aPe(t,e){let n,r=[];for(let i of e){let s=xg.get(i);if(s===Lie)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):uk(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>Dw(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function lPe(t){let e=ey;for(let n of t){let r=e.filter(i=>Dw(i,n));if(!r.length)throw ey.some(i=>Dw(i,n))?Fie(e[0],n):Uie(n);if(e=r,r.length==1)break}return e}function cPe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${F8(kC(e,63))}: ${i}`)}return yx(r)}).join(Oie)}function Uie(t){return new Error(`disallowed character: ${U8(t)}`)}function Fie(t,e){let n=U8(e),r=ey.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function lw(t){return new Error(`illegal placement: ${t}`)}function uPe(t,e){for(let n of e)if(!Dw(t,n))throw Fie(t,n);if(t.M){let n=Rie(e);for(let r=1,i=n.length;r<i;r++)if(tM.has(n[r])){let s=r+1;for(let o;s<i&&tM.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${U8(o)}`);if(s-r>GH)throw new Error(`excessive non-spacing marks: ${F8(kC(n.slice(r-1,s)))} (${s-r}/${GH})`);r=s}}}function dPe(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=hPe(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(ap.has(o))i.push(o);else{let a=eM.get(o);if(a)i.push(...a);else if(!Die.has(o))throw Uie(o)}}}return i.length&&r.push(e(i)),r}function fPe(t){return t.filter(e=>e!=Mie)}function hPe(t,e){let n=nM,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const $ie=new Uint8Array(32);$ie.fill(0);function JH(t){return ye(t.length!==0,"invalid ENS name; empty component","comp",t),t}function $8(t){const e=mi(pPe(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(JH(e.slice(r,i))),r=i+1);return ye(r<e.length,"invalid ENS name; empty component","name",t),n.push(JH(e.slice(r))),n}function pPe(t){try{if(t.length===0)throw new Error("empty label");return sPe(t)}catch(e){ye(!1,`invalid ENS name (${e.message})`,"name",t)}}function x0t(t){try{return $8(t).length!==0}catch{}return!1}function rM(t){ye(typeof t=="string","invalid ENS name; not a string","name",t),ye(t.length,"invalid ENS name (empty label)","name",t);let e=$ie;const n=$8(t);for(;n.length;)e=Kn(On([e,Kn(n.pop())]));return rt(e)}function mPe(t,e){const n=e??63;return ye(n<=255,"DNS encoded label cannot exceed 255","length",n),rt(On($8(t).map(r=>{ye(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function zie(t){return typeof t=="string"&&(t=mi(t)),Kn(On([mi(qCe),mi(String(t.length)),t]))}function v0t(t,e){const n=zie(t);return EC(n,e)}const Hie=new Uint8Array(32);Hie.fill(0);const gPe=BigInt(-1),Vie=BigInt(0),qie=BigInt(1),yPe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function xPe(t){const e=yt(t),n=e.length%32;return n?On([e,Hie.slice(n)]):rt(e)}const vPe=ud(qie,32),bPe=ud(Vie,32),XH={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},mR=["name","version","chainId","verifyingContract","salt"];function QH(t){return function(e){return ye(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const wPe={name:QH("name"),version:QH("version"),chainId:function(t){const e=kt(t,"domain.chainId");return ye(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Cl(e)},verifyingContract:function(t){try{return yn(t).toLowerCase()}catch{}ye(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=yt(t,"domain.salt");return ye(e.length===32,'invalid domain value "salt"',"domain.salt",t),rt(e)}};function gR(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);ye(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=Ap(yPe,n?r-1:r),s=n?(i+qie)*gPe:Vie;return function(o){const a=kt(o,"value");return ye(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),ud(n?Zne(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return ye(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=yt(r);return ye(i.length===n,`invalid length for ${t}`,"value",r),xPe(r)}}}switch(t){case"address":return function(e){return cd(yn(e),32)};case"bool":return function(e){return e?vPe:bPe};case"bytes":return function(e){return Kn(e)};case"string":return function(e){return fd(e)}}return null}function ZH(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function sA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var b1,Du,zy,X2,Gie;const Oa=class Oa{constructor(e){Ue(this,X2);Ce(this,"primaryType");Ue(this,b1);Ue(this,Du);Ue(this,zy);me(this,Du,new Map),me(this,zy,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:u})=>{let{base:h,index:m}=sA(u);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:c,type:h+(m||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),me(this,b1,JSON.stringify(s));for(const l in s){const c=new Set;for(const u of s[l]){ye(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(l)}`,"types",e),c.add(u.name);const h=sA(u.type).base;ye(h!==l,`circular type reference to ${JSON.stringify(h)}`,"types",e),!gR(h)&&(ye(r.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),r.get(h).push(l),n.get(l).add(h))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);ye(o.length!==0,"missing primary type","types",e),ye(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Lt(this,{primaryType:o[0]});function a(l,c){ye(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const u of n.get(l))if(r.has(u)){a(u,c);for(const h of c)i.get(h).add(u)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const u=Array.from(c);u.sort(),ie(this,Du).set(l,ZH(l,s[l])+u.map(h=>ZH(h,s[h])).join(""))}}get types(){return JSON.parse(ie(this,b1))}getEncoder(e){let n=ie(this,zy).get(e);return n||(n=Ze(this,X2,Gie).call(this,e),ie(this,zy).set(e,n)),n}encodeType(e){const n=ie(this,Du).get(e);return ye(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Kn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(gR(e))return r(e,n);const i=sA(e).array;if(i)return ye(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});ye(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Oa(e)}static getPrimaryType(e){return Oa.from(e).primaryType}static hashStruct(e,n,r){return Oa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=XH[r];ye(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>mR.indexOf(r.name)-mR.indexOf(i.name)),Oa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return On(["0x1901",Oa.hashDomain(e),Oa.from(n).hash(r)])}static hash(e,n,r){return Kn(Oa.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!gr(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Oa.from(n);o.visit(r,(a,l)=>(a==="address"&&!gr(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,n,r){Oa.hashDomain(e);const i={},s=[];mR.forEach(l=>{const c=e[l];c!=null&&(i[l]=wPe[l](c),s.push({name:l,type:XH[l]}))});const o=Oa.from(n);n=o.types;const a=Object.assign({},n);return ye(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return rt(yt(c));if(l.match(/^u?int/))return kt(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return ye(typeof c=="string","invalid string","value",c),c}ye(!1,"unsupported type","type",l)})}}};b1=new WeakMap,Du=new WeakMap,zy=new WeakMap,X2=new WeakSet,Gie=function(e){{const i=gR(e);if(i)return i}const n=sA(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{ye(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return ie(this,Du).has(i)&&(a=a.map(Kn)),Kn(On(a))}}const r=this.types[e];if(r){const i=fd(ie(this,Du).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return ie(this,Du).has(l)?Kn(c):c});return o.unshift(i),On(o)}}ye(!1,`unknown type: ${e}`,"type",e)};let ym=Oa;function b0t(t,e,n,r){return EC(ym.hash(t,e,n),r)}function Xs(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const EPe="external public payable override",SPe=Xs(EPe.split(" ")),Kie="constant external internal payable private public pure view override",APe=Xs(Kie.split(" ")),Wie="constructor error event fallback function receive struct",Yie=Xs(Wie.split(" ")),Jie="calldata memory storage payable indexed",TPe=Xs(Jie.split(" ")),kPe="tuple returns",CPe=[Wie,Jie,kPe,Kie].join(" "),NPe=Xs(CPe.split(" ")),PPe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},_Pe=new RegExp("^(\\s*)"),IPe=new RegExp("^([0-9]+)"),RPe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Xie=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Qie=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var es,El,w1,iM;const Q2=class Q2{constructor(e){Ue(this,w1);Ue(this,es);Ue(this,El);me(this,es,0),me(this,El,e.slice())}get offset(){return ie(this,es)}get length(){return ie(this,El).length-ie(this,es)}clone(){return new Q2(ie(this,El))}reset(){me(this,es,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=Ze(this,w1,iM).call(this,ie(this,es)+1,e.match+1);return me(this,es,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;ie(this,es)<e.match-1;){const r=this.peek().linkNext;n.push(Ze(this,w1,iM).call(this,ie(this,es)+1,r)),me(this,es,r)}return me(this,es,e.match+1),n}peek(){if(ie(this,es)>=ie(this,El).length)throw new Error("out-of-bounds");return ie(this,El)[ie(this,es)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return db(this,es)._++,e}toString(){const e=[];for(let n=ie(this,es);n<ie(this,El).length;n++){const r=ie(this,El)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};es=new WeakMap,El=new WeakMap,w1=new WeakSet,iM=function(e=0,n=0){return new Q2(ie(this,El).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let $l=Q2;function Eh(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(_Pe);a&&(s+=a[1].length,o=t.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let c=PPe[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,c==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(c=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const h=e.pop().text;u=h+u,e[e.length-1].value=Zt(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(RPe),a){if(l.text=a[1],s+=l.text.length,NPe.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(Qie)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(IPe),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new $l(e.map(o=>Object.freeze(o)))}function eV(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function CC(t,e){if(e.peekKeyword(Yie)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function hd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Zie(t){let e=hd(t,APe);return eV(e,Xs("constant payable nonpayable".split(" "))),eV(e,Xs("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function nd(t,e){return t.popParams().map(n=>us.from(n,e))}function ese(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return kt(t.pop().text);throw new Error("invalid gas")}return null}function xm(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const OPe=new RegExp(/^(.*)\[([0-9]*)\]$/);function tV(t){const e=t.match(Qie);if(ye(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);ye(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);ye(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Mr={},ko=Symbol.for("_ethers_internal"),nV="_ParamTypeInternal",rV="_ErrorInternal",iV="_EventInternal",sV="_ConstructorInternal",oV="_FallbackInternal",aV="_FunctionInternal",lV="_StructInternal";var Hy,xT;const Ma=class Ma{constructor(e,n,r,i,s,o,a,l){Ue(this,Hy);Ce(this,"name");Ce(this,"type");Ce(this,"baseType");Ce(this,"indexed");Ce(this,"components");Ce(this,"arrayLength");Ce(this,"arrayChildren");if(bh(e,Mr,"ParamType"),Object.defineProperty(this,ko,{value:nV}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Lt(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],i=[e];return Ze(this,Hy,xT).call(this,r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if(Ma.isParamType(e))return e;if(typeof e=="string")try{return Ma.from(Eh(e),n)}catch{ye(!1,"invalid param type","obj",e)}else if(e instanceof $l){let a="",l="",c=null;hd(e,Xs(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(v=>Ma.from(v)),a=`tuple(${c.map(v=>v.format()).join(",")})`):(a=tV(e.popType("TYPE")),l=a);let u=null,h=null;for(;e.length&&e.peekType("BRACKET");){const v=e.pop();u=new Ma(Mr,"",a,l,null,c,h,u),h=v.value,a+=v.text,l="array",c=null}let m=null;if(hd(e,TPe).has("indexed")){if(!n)throw new Error("");m=!0}const x=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ma(Mr,x,a,l,m,c,h,u)}const r=e.name;ye(!r||typeof r=="string"&&r.match(Xie),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(ye(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(OPe);if(o){const a=parseInt(o[2]||"-1"),l=Ma.from({type:o[1],components:e.components});return new Ma(Mr,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(c=>Ma.from(c)):null;return new Ma(Mr,r||"",s,"tuple",i,a,null,null)}return s=tV(e.type),new Ma(Mr,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[ko]===nV}};Hy=new WeakSet,xT=function(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,c)=>{var u;Ze(u=o,Hy,xT).call(u,e,l,r,h=>{a[c]=h})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{var u;Ze(u=o[c],Hy,xT).call(u,e,l,r,h=>{a[c]=h})}),i(a);return}const s=r(this.type,n);s.then?e.push((async function(){i(await s)})()):i(s)};let us=Ma;class vm{constructor(e,n,r){Ce(this,"type");Ce(this,"inputs");bh(e,Mr,"Fragment"),r=Object.freeze(r.slice()),Lt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{vm.from(JSON.parse(e))}catch{}return vm.from(Eh(e))}if(e instanceof $l)switch(e.peekKeyword(Yie)){case"constructor":return Yu.from(e);case"error":return vo.from(e);case"event":return Ac.from(e);case"fallback":case"receive":return Pu.from(e);case"function":return Tc.from(e);case"struct":return lm.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Yu.from(e);case"error":return vo.from(e);case"event":return Ac.from(e);case"fallback":case"receive":return Pu.from(e);case"function":return Tc.from(e);case"struct":return lm.from(e)}Ke(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ye(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Yu.isFragment(e)}static isError(e){return vo.isFragment(e)}static isEvent(e){return Ac.isFragment(e)}static isFunction(e){return Tc.isFragment(e)}static isStruct(e){return lm.isFragment(e)}}class NC extends vm{constructor(n,r,i,s){super(n,r,s);Ce(this,"name");ye(typeof i=="string"&&i.match(Xie),"invalid identifier","name",i),s=Object.freeze(s.slice()),Lt(this,{name:i})}}function jw(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class vo extends NC{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,ko,{value:rV})}get selector(){return fd(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+jw(e,this.inputs)),n.join(" ")}static from(e){if(vo.isFragment(e))return e;if(typeof e=="string")return vo.from(Eh(e));if(e instanceof $l){const n=CC("error",e),r=nd(e);return xm(e),new vo(Mr,n,r)}return new vo(Mr,e.name,e.inputs?e.inputs.map(us.from):[])}static isFragment(e){return e&&e[ko]===rV}}class Ac extends NC{constructor(n,r,i,s){super(n,"event",r,i);Ce(this,"anonymous");Object.defineProperty(this,ko,{value:iV}),Lt(this,{anonymous:s})}get topicHash(){return fd(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+jw(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>us.from(s)),new Ac(Mr,n,r,!1).topicHash}static from(n){if(Ac.isFragment(n))return n;if(typeof n=="string")try{return Ac.from(Eh(n))}catch{ye(!1,"invalid event fragment","obj",n)}else if(n instanceof $l){const r=CC("event",n),i=nd(n,!0),s=!!hd(n,Xs(["anonymous"])).has("anonymous");return xm(n),new Ac(Mr,r,i,s)}return new Ac(Mr,n.name,n.inputs?n.inputs.map(r=>us.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[ko]===iV}}class Yu extends vm{constructor(n,r,i,s,o){super(n,r,i);Ce(this,"payable");Ce(this,"gas");Object.defineProperty(this,ko,{value:sV}),Lt(this,{payable:s,gas:o})}format(n){if(Ke(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${jw(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Yu.isFragment(n))return n;if(typeof n=="string")try{return Yu.from(Eh(n))}catch{ye(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof $l){hd(n,Xs(["constructor"]));const r=nd(n),i=!!hd(n,SPe).has("payable"),s=ese(n);return xm(n),new Yu(Mr,"constructor",r,i,s)}return new Yu(Mr,"constructor",n.inputs?n.inputs.map(us.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[ko]===sV}}class Pu extends vm{constructor(n,r,i){super(n,"fallback",r);Ce(this,"payable");Object.defineProperty(this,ko,{value:oV}),Lt(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Pu.isFragment(n))return n;if(typeof n=="string")try{return Pu.from(Eh(n))}catch{ye(!1,"invalid fallback fragment","obj",n)}else if(n instanceof $l){const r=n.toString(),i=n.peekKeyword(Xs(["fallback","receive"]));if(ye(i,"type must be fallback or receive","obj",r),n.popKeyword(Xs(["fallback","receive"]))==="receive"){const l=nd(n);return ye(l.length===0,"receive cannot have arguments","obj.inputs",l),hd(n,Xs(["payable"])),xm(n),new Pu(Mr,[],!0)}let o=nd(n);o.length?ye(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[us.from("bytes")];const a=Zie(n);if(ye(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),hd(n,Xs(["returns"])).has("returns")){const l=nd(n);ye(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return xm(n),new Pu(Mr,o,a==="payable")}if(n.type==="receive")return new Pu(Mr,[],!0);if(n.type==="fallback"){const r=[us.from("bytes")],i=n.stateMutability==="payable";return new Pu(Mr,r,i)}ye(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[ko]===oV}}class Tc extends NC{constructor(n,r,i,s,o,a){super(n,"function",r,s);Ce(this,"constant");Ce(this,"outputs");Ce(this,"stateMutability");Ce(this,"payable");Ce(this,"gas");Object.defineProperty(this,ko,{value:aV}),o=Object.freeze(o.slice()),Lt(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return fd(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+jw(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(jw(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>us.from(s)),new Tc(Mr,n,"view",r,[],null).selector}static from(n){if(Tc.isFragment(n))return n;if(typeof n=="string")try{return Tc.from(Eh(n))}catch{ye(!1,"invalid function fragment","obj",n)}else if(n instanceof $l){const i=CC("function",n),s=nd(n),o=Zie(n);let a=[];hd(n,Xs(["returns"])).has("returns")&&(a=nd(n));const l=ese(n);return xm(n),new Tc(Mr,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Tc(Mr,n.name,r,n.inputs?n.inputs.map(us.from):[],n.outputs?n.outputs.map(us.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[ko]===aV}}class lm extends NC{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,ko,{value:lV})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return lm.from(Eh(e))}catch{ye(!1,"invalid struct fragment","obj",e)}else if(e instanceof $l){const n=CC("struct",e),r=nd(e);return xm(e),new lm(Mr,n,r)}return new lm(Mr,e.name,e.inputs?e.inputs.map(us.from):[])}static isFragment(e){return e&&e[ko]===lV}}const Kl=new Map;Kl.set(0,"GENERIC_PANIC");Kl.set(1,"ASSERT_FALSE");Kl.set(17,"OVERFLOW");Kl.set(18,"DIVIDE_BY_ZERO");Kl.set(33,"ENUM_RANGE_ERROR");Kl.set(34,"BAD_STORAGE_DATA");Kl.set(49,"STACK_UNDERFLOW");Kl.set(50,"ARRAY_RANGE_ERROR");Kl.set(65,"OUT_OF_MEMORY");Kl.set(81,"UNINITIALIZED_FUNCTION_CALL");const MPe=new RegExp(/^bytes([0-9]*)$/),LPe=new RegExp(/^(u?int)([0-9]*)$/);let yR=null,cV=1024;function DPe(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const c=yt(n);if(n=rt(n),c.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(c.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(rt(c.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(rt(c.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${Kl.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?yn(e.to):null,data:e.data||"0x"};return e.from&&(l.from=yn(e.from)),Ir(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:l,invocation:o,revert:a})}var Ff,vg;const Z2=class Z2{constructor(){Ue(this,Ff)}getDefaultValue(e){const n=e.map(i=>Ze(this,Ff,vg).call(this,us.from(i)));return new iA(n,"_").defaultValue()}encode(e,n){Yne(n.length,e.length,"types/values length mismatch");const r=e.map(o=>Ze(this,Ff,vg).call(this,us.from(o))),i=new iA(r,"_"),s=new H3;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>Ze(this,Ff,vg).call(this,us.from(o)));return new iA(i,"_").decode(new V3(n,r,cV))}static _setDefaultMaxInflation(e){ye(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),cV=e}static defaultAbiCoder(){return yR==null&&(yR=new Z2),yR}static getBuiltinCallException(e,n,r){return DPe(e,n,r,Z2.defaultAbiCoder())}};Ff=new WeakSet,vg=function(e){if(e.isArray())return new tNe(Ze(this,Ff,vg).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new iA(e.components.map(r=>Ze(this,Ff,vg).call(this,r)),e.name);switch(e.baseType){case"address":return new ZCe(e.name);case"bool":return new nNe(e.name);case"string":return new dNe(e.name);case"bytes":return new rNe(e.name);case"":return new oNe(e.name)}let n=e.type.match(LPe);if(n){let r=parseInt(n[2]||"256");return ye(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new uNe(r/8,n[1]==="int",e.name)}if(n=e.type.match(MPe),n){let r=parseInt(n[1]);return ye(r!==0&&r<=32,"invalid bytes length","param",e),new iNe(r,e.name)}ye(!1,"invalid type","type",e.type)};let Bw=Z2;class jPe{constructor(e,n,r){Ce(this,"fragment");Ce(this,"name");Ce(this,"signature");Ce(this,"topic");Ce(this,"args");const i=e.name,s=e.format();Lt(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class BPe{constructor(e,n,r,i){Ce(this,"fragment");Ce(this,"name");Ce(this,"args");Ce(this,"signature");Ce(this,"selector");Ce(this,"value");const s=e.name,o=e.format();Lt(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class UPe{constructor(e,n,r){Ce(this,"fragment");Ce(this,"name");Ce(this,"args");Ce(this,"signature");Ce(this,"selector");const i=e.name,s=e.format();Lt(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class uV{constructor(e){Ce(this,"hash");Ce(this,"_isIndexed");Lt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const dV={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},fV={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&dV[t.toString()]&&(e=dV[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var mc,gc,yc,ws,Bc,vT,bT;const xp=class xp{constructor(e){Ue(this,Bc);Ce(this,"fragments");Ce(this,"deploy");Ce(this,"fallback");Ce(this,"receive");Ue(this,mc);Ue(this,gc);Ue(this,yc);Ue(this,ws);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,me(this,yc,new Map),me(this,mc,new Map),me(this,gc,new Map);const r=[];for(const o of n)try{r.push(vm.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Lt(this,{fragments:Object.freeze(r)});let i=null,s=!1;me(this,ws,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Lt(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(ye(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=ie(this,yc);break;case"event":l=ie(this,gc);break;case"error":l=ie(this,mc);break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||Lt(this,{deploy:Yu.from("constructor()")}),Lt(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return Bw.defaultAbiCoder()}getFunctionName(e){const n=Ze(this,Bc,vT).call(this,e,null,!1);return ye(n,"no matching function","key",e),n.name}hasFunction(e){return!!Ze(this,Bc,vT).call(this,e,null,!1)}getFunction(e,n){return Ze(this,Bc,vT).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(ie(this,yc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(ie(this,yc).get(i),r)}}getEventName(e){const n=Ze(this,Bc,bT).call(this,e,null,!1);return ye(n,"no matching event","key",e),n.name}hasEvent(e){return!!Ze(this,Bc,bT).call(this,e,null,!1)}getEvent(e,n){return Ze(this,Bc,bT).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(ie(this,gc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(ie(this,gc).get(i),r)}}getError(e,n){if(gr(e)){const i=e.toLowerCase();if(fV[i])return vo.from(fV[i].signature);for(const s of ie(this,mc).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of ie(this,mc))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?vo.from("error Error(string)"):e==="Panic"?vo.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");ye(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=vo.from(e).format(),e==="Error(string)")return vo.from("error Error(string)");if(e==="Panic(uint256)")return vo.from("error Panic(uint256)");const r=ie(this,mc).get(e);return r||null}forEachError(e){const n=Array.from(ie(this,mc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(ie(this,mc).get(i),r)}}_decodeParams(e,n){return ie(this,ws).decode(e,n)}_encodeParams(e,n){return ie(this,ws).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ye(r,"unknown error","fragment",e),e=r}return ye(mr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,mr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ye(r,"unknown error","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ye(r,"unknown function","fragment",e),e=r}return ye(mr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,mr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ye(r,"unknown function","fragment",e),e=r}return On([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);ye(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=cs(n);if(i.length%32===0)try{return ie(this,ws).decode(e.outputs,i)}catch{r="could not decode result data"}Ke(!1,r,"BAD_DATA",{value:rt(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=yt(e,"data"),i=Bw.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=rt(r.slice(0,4)),l=this.getError(a);if(l)try{const c=ie(this,ws).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:c},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);ye(r,"unknown function","fragment",e),e=r}return rt(ie(this,ws).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);ye(s,"unknown event","eventFragment",e),e=s}Ke(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?fd(o):s.type==="bytes"?Kn(rt(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=ud(o):s.type.match(/^bytes/)?o=Fke(o,32):s.type==="address"&&ie(this,ws).encode(["address"],[o]),cd(rt(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){ye(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?ye(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);ye(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),ye(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(fd(l));else if(o.type==="bytes")r.push(Kn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(ie(this,ws).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:ie(this,ws).encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const g=this.getEvent(e);ye(g,"unknown event","eventFragment",e),e=g}if(r!=null&&!e.anonymous){const g=e.topicHash;ye(gr(r[0],32)&&r[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((g,x)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(us.from({type:"bytes32",name:g.name})),o.push(!0)):(i.push(g),o.push(!1)):(s.push(g),o.push(!1))});const a=r!=null?ie(this,ws).decode(i,On(r)):null,l=ie(this,ws).decode(s,n,!0),c=[],u=[];let h=0,m=0;return e.inputs.forEach((g,x)=>{let v=null;if(g.indexed)if(a==null)v=new uV(null);else if(o[x])v=new uV(a[m++]);else try{v=a[m++]}catch(b){v=b}else try{v=l[h++]}catch(b){v=b}c.push(v),u.push(g.name||null)}),dx.fromItems(c,u)}parseTransaction(e){const n=yt(e.data,"tx.data"),r=kt(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(rt(n.slice(0,4)));if(!i)return null;const s=ie(this,ws).decode(i.inputs,n.slice(4));return new BPe(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new jPe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=rt(e),r=this.getError(mr(n,0,4));if(!r)return null;const i=ie(this,ws).decode(r.inputs,mr(n,4));return new UPe(r,r.selector,i)}static from(e){return e instanceof xp?e:typeof e=="string"?new xp(JSON.parse(e)):typeof e.formatJson=="function"?new xp(e.formatJson()):typeof e.format=="function"?new xp(e.format("json")):new xp(e)}};mc=new WeakMap,gc=new WeakMap,yc=new WeakMap,ws=new WeakMap,Bc=new WeakSet,vT=function(e,n,r){if(gr(e)){const s=e.toLowerCase();for(const o of ie(this,yc).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of ie(this,yc))o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;Ls.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=s.length-1;c>=0;c--){const u=s[c].inputs.length;u!==a&&(!l||u!==a-1)&&s.splice(c,1)}for(let c=s.length-1;c>=0;c--){const u=s[c].inputs;for(let h=0;h<n.length;h++)if(Ls.isTyped(n[h])){if(h>=u.length){if(n[h].type==="overrides")continue;s.splice(c,1);break}if(n[h].type!==u[h].baseType){s.splice(c,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ye(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=ie(this,yc).get(Tc.from(e).format());return i||null},bT=function(e,n,r){if(gr(e)){const s=e.toLowerCase();for(const o of ie(this,gc).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of ie(this,gc))o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if(Ls.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ye(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=ie(this,gc).get(Ac.from(e).format());return i||null};let sM=xp;const tse=BigInt(0);function ty(t){return t??null}function ni(t){return t==null?null:t.toString()}class hV{constructor(e,n,r){Ce(this,"gasPrice");Ce(this,"maxFeePerGas");Ce(this,"maxPriorityFeePerGas");Lt(this,{gasPrice:ty(e),maxFeePerGas:ty(n),maxPriorityFeePerGas:ty(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:ni(e),maxFeePerGas:ni(n),maxPriorityFeePerGas:ni(r)}}}function Uw(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=rt(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=kt(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=Zt(t[i],`request.${i}`));return t.accessList&&(e.accessList=Um(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>gC(i)?rt(i):Object.assign({},i))),e}var ju;class FPe{constructor(e,n){Ce(this,"provider");Ce(this,"number");Ce(this,"hash");Ce(this,"timestamp");Ce(this,"parentHash");Ce(this,"parentBeaconBlockRoot");Ce(this,"nonce");Ce(this,"difficulty");Ce(this,"gasLimit");Ce(this,"gasUsed");Ce(this,"stateRoot");Ce(this,"receiptsRoot");Ce(this,"blobGasUsed");Ce(this,"excessBlobGas");Ce(this,"miner");Ce(this,"prevRandao");Ce(this,"extraData");Ce(this,"baseFeePerGas");Ue(this,ju);me(this,ju,e.transactions.map(r=>typeof r!="string"?new Fw(r,n):r)),Lt(this,{provider:n,hash:ty(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:ty(e.prevRandao),extraData:e.extraData,baseFeePerGas:ty(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return ie(this,ju).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=ie(this,ju).slice();return e.length===0?[]:(Ke(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:h,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:x,timestamp:v,transactions:b}=this;return{_type:"Block",baseFeePerGas:ni(e),difficulty:ni(n),extraData:r,gasLimit:ni(i),gasUsed:ni(s),blobGasUsed:ni(this.blobGasUsed),excessBlobGas:ni(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:u,parentHash:h,timestamp:v,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:x,transactions:b}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return ie(this,ju).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=ie(this,ju)[e];else{const r=e.toLowerCase();for(const i of ie(this,ju))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;ye(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return $Pe(this)}}ju=new WeakMap;class G1{constructor(e,n){Ce(this,"provider");Ce(this,"transactionHash");Ce(this,"blockHash");Ce(this,"blockNumber");Ce(this,"removed");Ce(this,"address");Ce(this,"data");Ce(this,"topics");Ce(this,"index");Ce(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Lt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Ke(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Ke(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Ke(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return zPe(this)}}var E1;class nse{constructor(e,n){Ce(this,"provider");Ce(this,"to");Ce(this,"from");Ce(this,"contractAddress");Ce(this,"hash");Ce(this,"index");Ce(this,"blockHash");Ce(this,"blockNumber");Ce(this,"logsBloom");Ce(this,"gasUsed");Ce(this,"blobGasUsed");Ce(this,"cumulativeGasUsed");Ce(this,"gasPrice");Ce(this,"blobGasPrice");Ce(this,"type");Ce(this,"status");Ce(this,"root");Ue(this,E1);me(this,E1,Object.freeze(e.logs.map(i=>new G1(i,n))));let r=tse;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Lt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return ie(this,E1)}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:u,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:ni(this.cumulativeGasUsed),from:n,gasPrice:ni(this.gasPrice),blobGasUsed:ni(this.blobGasUsed),blobGasPrice:ni(this.blobGasPrice),gasUsed:ni(this.gasUsed),hash:i,index:s,logs:c,logsBloom:l,root:h,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return ise(this)}reorderedEvent(e){return Ke(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),rse(this,e)}}E1=new WeakMap;var $f;const S7=class S7{constructor(e,n){Ce(this,"provider");Ce(this,"blockNumber");Ce(this,"blockHash");Ce(this,"index");Ce(this,"hash");Ce(this,"type");Ce(this,"to");Ce(this,"from");Ce(this,"nonce");Ce(this,"gasLimit");Ce(this,"gasPrice");Ce(this,"maxPriorityFeePerGas");Ce(this,"maxFeePerGas");Ce(this,"maxFeePerBlobGas");Ce(this,"data");Ce(this,"value");Ce(this,"chainId");Ce(this,"signature");Ce(this,"accessList");Ce(this,"blobVersionedHashes");Ce(this,"authorizationList");Ue(this,$f);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,me(this,$f,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:c,signature:u,accessList:h,blobVersionedHashes:m}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:n,blobVersionedHashes:m,chainId:ni(this.chainId),data:c,from:a,gasLimit:ni(this.gasLimit),gasPrice:ni(this.gasPrice),hash:i,maxFeePerGas:ni(this.maxFeePerGas),maxPriorityFeePerGas:ni(this.maxPriorityFeePerGas),maxFeePerBlobGas:ni(this.maxFeePerBlobGas),nonce:l,signature:u,to:o,index:r,type:s,value:ni(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await ks({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=ie(this,$f),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:m,nonce:g}=await ks({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){s=m;return}if(a)return null;const x=await this.getTransaction();if(!(x&&x.blockNumber!=null))for(o===-1&&(o=s-3,o<ie(this,$f)&&(o=ie(this,$f)));o<=m;){if(a)return null;const v=await this.provider.getBlock(o,!0);if(v==null)return;for(const b of v)if(b===this.hash)return;for(let b=0;b<v.length;b++){const w=await v.getTransaction(b);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const k=await this.provider.getTransactionReceipt(w.hash);if(k==null||m-k.blockNumber+1<r)return;let C="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?C="repriced":w.data==="0x"&&w.from===w.to&&w.value===tse&&(C="cancelled"),Ke(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:w.replaceableTransaction(s),hash:w.hash,receipt:k})}}o++}},c=m=>{if(m==null||m.status!==0)return m;Ke(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:m.to,from:m.from,data:""},receipt:m})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return c(u);if(u){if(r===1||await u.confirmations()>=r)return c(u)}else if(await l(),r===0)return null;return await new Promise((m,g)=>{const x=[],v=()=>{x.forEach(w=>w())};if(x.push(()=>{a=!0}),i>0){const w=setTimeout(()=>{v(),g(Ir("wait for transaction timeout","TIMEOUT"))},i);x.push(()=>{clearTimeout(w)})}const b=async w=>{if(await w.confirmations()>=r){v();try{m(c(w))}catch(k){g(k)}}};if(x.push(()=>{this.provider.off(this.hash,b)}),this.provider.on(this.hash,b),s>=0){const w=async()=>{try{await l()}catch(k){if(ls(k,"TRANSACTION_REPLACED")){v(),g(k);return}}a||this.provider.once("block",w)};x.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return Ke(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ise(this)}reorderedEvent(e){return Ke(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Ke(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),rse(this,e)}replaceableTransaction(e){ye(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new S7(this,this.provider);return me(n,$f,e),n}};$f=new WeakMap;let Fw=S7;function $Pe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function rse(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function ise(t){return{orphan:"drop-transaction",tx:t}}function zPe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class z8 extends G1{constructor(n,r,i){super(n,n.provider);Ce(this,"interface");Ce(this,"fragment");Ce(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);Lt(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class sse extends G1{constructor(n,r){super(n,n.provider);Ce(this,"error");Lt(this,{error:r})}}var Vy;class HPe extends nse{constructor(n,r,i){super(i,r);Ue(this,Vy);me(this,Vy,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?ie(this,Vy).getEvent(n.topics[0]):null;if(r)try{return new z8(n,ie(this,Vy),r)}catch(i){return new sse(n,i)}return n})}}Vy=new WeakMap;var S1;class H8 extends Fw{constructor(n,r,i){super(i,r);Ue(this,S1);me(this,S1,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new HPe(ie(this,S1),this.provider,i)}}S1=new WeakMap;class ose extends tre{constructor(n,r,i,s){super(n,r,i);Ce(this,"log");Lt(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class VPe extends ose{constructor(e,n,r,i,s){super(e,n,r,new z8(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Lt(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const pV=BigInt(0);function ase(t){return t&&typeof t.call=="function"}function lse(t){return t&&typeof t.estimateGas=="function"}function PC(t){return t&&typeof t.resolveName=="function"}function cse(t){return t&&typeof t.sendTransaction=="function"}function use(t){if(t!=null){if(PC(t))return t;if(t.provider)return t.provider}}var A1;class qPe{constructor(e,n,r){Ue(this,A1);Ce(this,"fragment");if(Lt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=bm(e.runner,"resolveName"),s=PC(i)?i:null;me(this,A1,(async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(u,h)=>u==="address"?Array.isArray(h)?Promise.all(h.map(m=>Fi(m,s))):Fi(h,s):h)));return e.interface.encodeFilterTopics(n,o)})())}getTopicFilter(){return ie(this,A1)}}A1=new WeakMap;function bm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Cp(t){return t==null?null:t.provider||null}async function dse(t,e){const n=Ls.dereference(t,"overrides");ye(typeof n=="object","invalid overrides parameter","overrides",t);const r=Uw(n);return ye(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ye(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function GPe(t,e,n){const r=bm(t,"resolveName"),i=PC(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=Ls.dereference(l,a),a==="address"?Fi(l,i):l))))}function KPe(t){const e=async function(o){const a=await dse(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Fi(a.from,use(t.runner)));const l=t.interface,c=kt(a.value||pV,"overrides.value")===pV,u=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!u&&!c&&ye(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),ye(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const h=l.receive||l.fallback&&l.fallback.payable;return ye(h||c,"cannot send value to non-payable fallback","overrides.value",a.value),ye(l.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=bm(t.runner,"call");Ke(ase(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw E8(c)&&c.data?t.interface.makeError(c.data,l):c}},r=async function(o){const a=t.runner;Ke(cse(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=Cp(t.runner);return new H8(t.interface,c,l)},i=async function(o){const a=bm(t.runner,"estimateGas");return Ke(lse(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return Lt(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function WPe(t,e){const n=function(...c){const u=t.interface.getFunction(e,c);return Ke(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),u},r=async function(...c){const u=n(...c);let h={};if(u.inputs.length+1===c.length&&(h=await dse(c.pop()),h.from&&(h.from=await Fi(h.from,use(t.runner)))),u.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const m=await GPe(t.runner,u.inputs,c);return Object.assign({},h,await ks({to:t.getAddress(),data:t.interface.encodeFunctionData(u,m)}))},i=async function(...c){const u=await a(...c);return u.length===1?u[0]:u},s=async function(...c){const u=t.runner;Ke(cse(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await u.sendTransaction(await r(...c)),m=Cp(t.runner);return new H8(t.interface,m,h)},o=async function(...c){const u=bm(t.runner,"estimateGas");return Ke(lse(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...c))},a=async function(...c){const u=bm(t.runner,"call");Ke(ase(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await r(...c);let m="0x";try{m=await u.call(h)}catch(x){throw E8(x)&&x.data?t.interface.makeError(x.data,h):x}const g=n(...c);return t.interface.decodeFunctionResult(g,m)},l=async(...c)=>n(...c).constant?await i(...c):await s(...c);return Lt(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=t.interface.getFunction(e);return Ke(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function YPe(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return Ke(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new qPe(t,n(...i),i)};return Lt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return Ke(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const dk=Symbol.for("_ethersInternal_contract"),fse=new WeakMap;function JPe(t,e){fse.set(t[dk],e)}function zo(t){return fse.get(t[dk])}function XPe(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function V8(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(gr(o,32))return o;const a=t.interface.getEvent(o);return ye(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?gr(e,32)?n=[e]:(r=t.interface.getEvent(e),ye(r,"unknown fragment","event",e),n=[r.topicHash]):XPe(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):ye(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function Hb(t,e){const{subs:n}=zo(t);return n.get((await V8(t,e)).tag)||null}async function mV(t,e,n){const r=Cp(t.runner);Ke(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await V8(t,n),{addr:a,subs:l}=zo(t);let c=l.get(s);if(!c){const h={address:a||t,topics:o},m=b=>{let w=i;if(w==null)try{w=t.interface.getEvent(b.topics[0])}catch{}if(w){const k=w,C=i?t.interface.decodeEventLog(i,b.data,b.topics):[];aM(t,n,C,R=>new VPe(t,R,n,k,b))}else aM(t,n,[],k=>new ose(t,k,n,b))};let g=[];c={tag:s,listeners:[],start:()=>{g.length||g.push(r.on(h,m))},stop:async()=>{if(g.length==0)return;let b=g;g=[],await Promise.all(b),r.off(h,m)}},l.set(s,c)}return c}let oM=Promise.resolve();async function QPe(t,e,n,r){await oM;const i=await Hb(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(t,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),zo(t).subs.delete(i.tag)),s>0}async function aM(t,e,n,r){try{await oM}catch{}const i=QPe(t,e,n,r);return oM=i,await i}const oA=["then"];var Cee;Cee=dk;const mw=class mw{constructor(e,n,r,i){Ce(this,"target");Ce(this,"interface");Ce(this,"runner");Ce(this,"filters");Ce(this,Cee);Ce(this,"fallback");ye(typeof e=="string"||gie(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=sM.from(n);Lt(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,dk,{value:{}});let o,a=null,l=null;if(i){const h=Cp(r);l=new H8(this.interface,h,i)}let c=new Map;if(typeof e=="string")if(gr(e))a=e,o=Promise.resolve(e);else{const h=bm(r,"resolveName");if(!PC(h))throw Ir("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(e).then(m=>{if(m==null)throw Ir("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return zo(this).addr=m,m})}else o=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return zo(this).addr=h,h});JPe(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const u=new Proxy({},{get:(h,m,g)=>{if(typeof m=="symbol"||oA.indexOf(m)>=0)return Reflect.get(h,m,g);try{return this.getEvent(m)}catch(x){if(!ls(x,"INVALID_ARGUMENT")||x.argument!=="key")throw x}},has:(h,m)=>oA.indexOf(m)>=0?Reflect.has(h,m):Reflect.has(h,m)||this.interface.hasEvent(String(m))});return Lt(this,{filters:u}),Lt(this,{fallback:s.receive||s.fallback?KPe(this):null}),new Proxy(this,{get:(h,m,g)=>{if(typeof m=="symbol"||m in h||oA.indexOf(m)>=0)return Reflect.get(h,m,g);try{return h.getFunction(m)}catch(x){if(!ls(x,"INVALID_ARGUMENT")||x.argument!=="key")throw x}},has:(h,m)=>typeof m=="symbol"||m in h||oA.indexOf(m)>=0?Reflect.has(h,m):h.interface.hasFunction(m)})}connect(e){return new mw(this.target,this.interface,e)}attach(e){return new mw(e,this.interface,this.runner)}async getAddress(){return await zo(this).addrPromise}async getDeployedCode(){const e=Cp(this.runner);Ke(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Cp(this.runner);return Ke(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return zo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),WPe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),YPe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=zo(this),o=i||await s,{fragment:a,topics:l}=await V8(this,e),c={address:o,topics:l,fromBlock:n,toBlock:r},u=Cp(this.runner);return Ke(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(c)).map(h=>{let m=a;if(m==null)try{m=this.interface.getEvent(h.topics[0])}catch{}if(m)try{return new z8(h,this.interface,m)}catch(g){return new sse(h,g)}return new G1(h,u)})}async on(e,n){const r=await mV(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await mV(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await aM(this,e,n,null)}async listenerCount(e){if(e){const i=await Hb(this,e);return i?i.listeners.length:0}const{subs:n}=zo(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await Hb(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=zo(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await Hb(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),zo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Hb(this,e);if(!n)return this;n.stop(),zo(this).subs.delete(n.tag)}else{const{subs:n}=zo(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends mw{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let lM=mw;function ZPe(){return lM}class ny extends ZPe(){}function xR(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):ye(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class e_e{constructor(e){Ce(this,"name");Lt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const hse=new RegExp("^(ipfs)://(.*)$","i"),gV=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),hse,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var zf,Gp,Hf,bg,eC,pse;const Vg=class Vg{constructor(e,n,r){Ue(this,Hf);Ce(this,"provider");Ce(this,"address");Ce(this,"name");Ue(this,zf);Ue(this,Gp);Lt(this,{provider:e,address:n,name:r}),me(this,zf,null),me(this,Gp,new ny(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return ie(this,zf)==null&&me(this,zf,(async()=>{try{return await ie(this,Gp).supportsInterface("0x9061b923")}catch(e){if(ls(e,"CALL_EXCEPTION"))return!1;throw me(this,zf,null),e}})()),await ie(this,zf)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await Ze(this,Hf,bg).call(this,"addr(bytes32)");return s==null||s===Rw?null:s}catch(s){if(ls(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await Ze(this,Hf,bg).call(this,"addr(bytes32,uint)",[s]);if(gr(o,20))return yn(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof e_e&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await Ze(this,Hf,bg).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;Ke(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await Ze(this,Hf,bg).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await Ze(this,Hf,bg).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${ere("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;Ke(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<gV.length;r++){const i=n.match(gV[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=xR(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],u=new ny(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const v=await u.ownerOf(c);if(a!==v)return e.push({type:"!owner",value:v}),{url:null,linkage:e};e.push({type:"owner",value:v})}else if(s==="erc1155"){const v=await u.balanceOf(a,c);if(!v)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:v.toString()})}let h=await u[o](c);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),s==="erc1155"&&(h=h.replace("{id}",ud(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=xR(h)),e.push({type:"metadata-url",value:h});let m={};const g=await new dd(h).send();g.assertOk();try{m=g.bodyJson}catch{try{e.push({type:"!metadata",value:g.bodyText})}catch{const w=g.body;return w&&e.push({type:"!metadata",value:rt(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!m)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(m)});let x=m.image;if(typeof x!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!x.match(/^(https:\/\/|data:)/i)){if(x.match(hse)==null)return e.push({type:"!imageUrl-ipfs",value:x}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:x}),x=xR(x)}return e.push({type:"url",value:x}),{linkage:e,url:x}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return Ke(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await Ze(i=Vg,eC,pse).call(i,e,r);if(s!=null){const o=new Vg(e,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};zf=new WeakMap,Gp=new WeakMap,Hf=new WeakSet,bg=async function(e,n){n=(n||[]).slice();const r=ie(this,Gp).interface;n.unshift(rM(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),Ke(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[mPe(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await ie(this,Gp)[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!ls(s,"CALL_EXCEPTION"))throw s}return null},eC=new WeakSet,pse=async function(e,n){const r=await Vg.getEnsAddress(e);try{const s=await new ny(r,["function resolver(bytes32) view returns (address)"],e).resolver(rM(n),{enableCcipRead:!0});return s===Rw?null:s}catch(i){throw i}return null},Ue(Vg,eC);let fk=Vg;const yV=BigInt(0);function Nn(t,e){return(function(n){return n==null?e:t(n)})}function $w(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function K1(t,e){return(n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";Ke(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function t_e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}ye(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function vx(t){return ye(gr(t,!0),"invalid data","value",t),t}function os(t){return ye(gr(t,32),"invalid hash","value",t),t}const n_e=K1({address:yn,blockHash:os,blockNumber:Zt,data:vx,index:Zt,removed:Nn(t_e,!1),topics:$w(os),transactionHash:os,transactionIndex:Zt},{index:["logIndex"]});function r_e(t){return n_e(t)}const i_e=K1({hash:Nn(os),parentHash:os,parentBeaconBlockRoot:Nn(os,null),number:Zt,timestamp:Zt,nonce:Nn(vx),difficulty:kt,gasLimit:kt,gasUsed:kt,stateRoot:Nn(os,null),receiptsRoot:Nn(os,null),blobGasUsed:Nn(kt,null),excessBlobGas:Nn(kt,null),miner:Nn(yn),prevRandao:Nn(os,null),extraData:vx,baseFeePerGas:Nn(kt)},{prevRandao:["mixHash"]});function s_e(t){const e=i_e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:mse(n)),e}const o_e=K1({transactionIndex:Zt,blockNumber:Zt,transactionHash:os,address:yn,topics:$w(os),data:vx,index:Zt,blockHash:os},{index:["logIndex"]});function a_e(t){return o_e(t)}const l_e=K1({to:Nn(yn,null),from:Nn(yn,null),contractAddress:Nn(yn,null),index:Zt,root:Nn(rt),gasUsed:kt,blobGasUsed:Nn(kt,null),logsBloom:Nn(vx),blockHash:os,hash:os,logs:$w(a_e),blockNumber:Zt,cumulativeGasUsed:kt,effectiveGasPrice:Nn(kt),blobGasPrice:Nn(kt,null),status:Nn(Zt),type:Nn(Zt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function c_e(t){return l_e(t)}function mse(t){t.to&&kt(t.to)===yV&&(t.to="0x0000000000000000000000000000000000000000");const e=K1({hash:os,index:Nn(Zt,void 0),type:n=>n==="0x"||n==null?0:Zt(n),accessList:Nn(Um,null),blobVersionedHashes:Nn($w(os,!0),null),authorizationList:Nn($w(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:yn(n.address),chainId:kt(n.chainId),nonce:kt(n.nonce),signature:no.from(r)}},!1),null),blockHash:Nn(os,null),blockNumber:Nn(Zt,null),transactionIndex:Nn(Zt,null),from:yn,gasPrice:Nn(kt),maxPriorityFeePerGas:Nn(kt),maxFeePerGas:Nn(kt),maxFeePerBlobGas:Nn(kt,null),gasLimit:kt,to:Nn(yn,null),value:kt,nonce:Zt,data:vx,creates:Nn(yn,null),chainId:Nn(kt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=QCe(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=no.from(t.signature):e.signature=no.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&kt(e.blockHash)===yV&&(e.blockHash=null),e}const u_e="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Wx{constructor(e){Ce(this,"name");Lt(this,{name:e})}clone(){return new Wx(this.name)}}class _C extends Wx{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);Ce(this,"effectiveBlock");Ce(this,"txBase");Ce(this,"txCreate");Ce(this,"txDataZero");Ce(this,"txDataNonzero");Ce(this,"txAccessListStorageKey");Ce(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),ye(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),Lt(this,i)}clone(){return new _C(this.effectiveBlock,this)}}class IC extends Wx{constructor(n,r){super("org.ethers.plugins.network.Ens");Ce(this,"address");Ce(this,"targetNetwork");Lt(this,{address:n||u_e,targetNetwork:r??1})}clone(){return new IC(this.address,this.targetNetwork)}}var Kp;const A7=class A7 extends Wx{constructor(n){super("org.ethers.plugins.network.FeeData");Ue(this,Kp);me(this,Kp,n)}get feeDataFunc(){return ie(this,Kp)}async getFeeData(n){return await ie(this,Kp).call(this,n)}clone(){return new A7(ie(this,Kp))}};Kp=new WeakMap;let xV=A7;var T1,k1;class d_e extends Wx{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Ue(this,T1);Ue(this,k1);me(this,T1,n),me(this,k1,r)}get url(){return ie(this,T1)}get processFunc(){return ie(this,k1)}clone(){return this}}T1=new WeakMap,k1=new WeakMap;const vR=new Map;var qy,Gy,Vf;const qg=class qg{constructor(e,n){Ue(this,qy);Ue(this,Gy);Ue(this,Vf);me(this,qy,e),me(this,Gy,kt(n)),me(this,Vf,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return ie(this,qy)}set name(e){me(this,qy,e)}get chainId(){return ie(this,Gy)}set chainId(e){me(this,Gy,kt(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===kt(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===kt(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===kt(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(ie(this,Vf).values())}attachPlugin(e){if(ie(this,Vf).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return ie(this,Vf).set(e.name,e.clone()),this}getPlugin(e){return ie(this,Vf).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new qg(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new _C;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=Um(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(f_e(),e==null)return qg.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=vR.get(e);if(n)return n();if(typeof e=="bigint")return new qg("unknown",e);ye(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){ye(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new qg(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new IC(e.ensAddress,e.ensNetwork)),n}ye(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=vR.get(e);r&&ye(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),vR.set(e,n)}};qy=new WeakMap,Gy=new WeakMap,Vf=new WeakMap;let Nc=qg;function vV(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function bV(t){return new d_e(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:vV(a.maxFee,9),maxPriorityFeePerGas:vV(a.maxPriorityFee,9)}}catch(s){Ke(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let wV=!1;function f_e(){if(wV)return;wV=!0;function t(e,n,r){const i=function(){const s=new Nc(e,n);return r.ensNetwork!=null&&s.attachPlugin(new IC(null,r.ensNetwork)),s.attachPlugin(new _C),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Nc.register(e,i),Nc.register(n,i),r.altNames&&r.altNames.forEach(s=>{Nc.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("filecoin",314,{}),t("filecoin-calibration",314159,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[bV("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[bV("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function cM(t){return JSON.parse(JSON.stringify(t))}var Bu,Da,qf,xc,Ky,wT;class h_e{constructor(e){Ue(this,Ky);Ue(this,Bu);Ue(this,Da);Ue(this,qf);Ue(this,xc);me(this,Bu,e),me(this,Da,null),me(this,qf,4e3),me(this,xc,-2)}get pollingInterval(){return ie(this,qf)}set pollingInterval(e){me(this,qf,e)}start(){ie(this,Da)||(me(this,Da,ie(this,Bu)._setTimeout(Ze(this,Ky,wT).bind(this),ie(this,qf))),Ze(this,Ky,wT).call(this))}stop(){ie(this,Da)&&(ie(this,Bu)._clearTimeout(ie(this,Da)),me(this,Da,null))}pause(e){this.stop(),e&&me(this,xc,-2)}resume(){this.start()}}Bu=new WeakMap,Da=new WeakMap,qf=new WeakMap,xc=new WeakMap,Ky=new WeakSet,wT=async function(){try{const e=await ie(this,Bu).getBlockNumber();if(ie(this,xc)===-2){me(this,xc,e);return}if(e!==ie(this,xc)){for(let n=ie(this,xc)+1;n<=e;n++){if(ie(this,Da)==null)return;await ie(this,Bu).emit("block",n)}me(this,xc,e)}}catch{}ie(this,Da)!=null&&me(this,Da,ie(this,Bu)._setTimeout(Ze(this,Ky,wT).bind(this),ie(this,qf)))};var Wp,Yp,Gf;class q8{constructor(e){Ue(this,Wp);Ue(this,Yp);Ue(this,Gf);me(this,Wp,e),me(this,Gf,!1),me(this,Yp,n=>{this._poll(n,ie(this,Wp))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){ie(this,Gf)||(me(this,Gf,!0),ie(this,Yp).call(this,-2),ie(this,Wp).on("block",ie(this,Yp)))}stop(){ie(this,Gf)&&(me(this,Gf,!1),ie(this,Wp).off("block",ie(this,Yp)))}pause(e){this.stop()}resume(){this.start()}}Wp=new WeakMap,Yp=new WeakMap,Gf=new WeakMap;var Wy,Uu;class p_e extends q8{constructor(n,r){super(n);Ue(this,Wy);Ue(this,Uu);me(this,Wy,r),me(this,Uu,-2)}pause(n){n&&me(this,Uu,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(ie(this,Wy));i!=null&&(ie(this,Uu)===-2?me(this,Uu,i.number):i.number>ie(this,Uu)&&(r.emit(ie(this,Wy),i.number),me(this,Uu,i.number)))}}Wy=new WeakMap,Uu=new WeakMap;var tC;class m_e extends q8{constructor(n,r){super(n);Ue(this,tC);me(this,tC,cM(r))}async _poll(n,r){throw new Error("@TODO")}}tC=new WeakMap;var Yy;class g_e extends q8{constructor(n,r){super(n);Ue(this,Yy);me(this,Yy,r)}async _poll(n,r){const i=await r.getTransactionReceipt(ie(this,Yy));i&&r.emit(ie(this,Yy),i)}}Yy=new WeakMap;var Fu,Jy,Xy,Kf,ja,nC,gse;class G8{constructor(e,n){Ue(this,nC);Ue(this,Fu);Ue(this,Jy);Ue(this,Xy);Ue(this,Kf);Ue(this,ja);me(this,Fu,e),me(this,Jy,cM(n)),me(this,Xy,Ze(this,nC,gse).bind(this)),me(this,Kf,!1),me(this,ja,-2)}start(){ie(this,Kf)||(me(this,Kf,!0),ie(this,ja)===-2&&ie(this,Fu).getBlockNumber().then(e=>{me(this,ja,e)}),ie(this,Fu).on("block",ie(this,Xy)))}stop(){ie(this,Kf)&&(me(this,Kf,!1),ie(this,Fu).off("block",ie(this,Xy)))}pause(e){this.stop(),e&&me(this,ja,-2)}resume(){this.start()}}Fu=new WeakMap,Jy=new WeakMap,Xy=new WeakMap,Kf=new WeakMap,ja=new WeakMap,nC=new WeakSet,gse=async function(e){if(ie(this,ja)===-2)return;const n=cM(ie(this,Jy));n.fromBlock=ie(this,ja)+1,n.toBlock=e;const r=await ie(this,Fu).getLogs(n);if(r.length===0){ie(this,ja)<e-60&&me(this,ja,e-60);return}for(const i of r)ie(this,Fu).emit(ie(this,Jy),i),me(this,ja,i.blockNumber)};const y_e=BigInt(2),x_e=10;function aA(t){return t&&typeof t.then=="function"}function ET(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class yse{constructor(e){Ce(this,"name");Lt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function v_e(t){return JSON.parse(JSON.stringify(t))}function uM(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function bR(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(gr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:ET("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:ET("orphan",n),filter:v_e(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?uM(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{gr(a)?i.push(a):s.push((async()=>{i.push(await Fi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=uM(i.map(a=>a.toLowerCase()))}return{filter:r,tag:ET("event",r),type:"event"}}ye(!1,"unknown ProviderEvent","event",t)}function wR(){return new Date().getTime()}const b_e={cacheTimeout:250,pollingInterval:4e3};var Es,Wf,Ss,Qy,Go,Jp,Yf,$u,C1,Ba,Zy,ex,xn,Fo,dM,fM,Vb,hM,qb,ST;class w_e{constructor(e,n){Ue(this,xn);Ue(this,Es);Ue(this,Wf);Ue(this,Ss);Ue(this,Qy);Ue(this,Go);Ue(this,Jp);Ue(this,Yf);Ue(this,$u);Ue(this,C1);Ue(this,Ba);Ue(this,Zy);Ue(this,ex);if(me(this,ex,Object.assign({},b_e,n||{})),e==="any")me(this,Jp,!0),me(this,Go,null);else if(e){const r=Nc.from(e);me(this,Jp,!1),me(this,Go,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else me(this,Jp,!1),me(this,Go,null);me(this,$u,-1),me(this,Yf,new Map),me(this,Es,new Map),me(this,Wf,new Map),me(this,Ss,null),me(this,Qy,!1),me(this,C1,1),me(this,Ba,new Map),me(this,Zy,!1)}get pollingInterval(){return ie(this,ex).pollingInterval}get provider(){return this}get plugins(){return Array.from(ie(this,Wf).values())}attachPlugin(e){if(ie(this,Wf).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return ie(this,Wf).set(e.name,e.connect(this)),this}getPlugin(e){return ie(this,Wf).get(e)||null}get disableCcipRead(){return ie(this,Zy)}set disableCcipRead(e){me(this,Zy,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),u=new dd(c);l.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let h="unknown error",m;try{m=await u.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:g}});continue}try{const g=m.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:g}),g.data;g.message&&(h=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:g})}catch{}Ke(m.statusCode<400||m.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:h}}),o.push(h)}Ke(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new FPe(s_e(e),this)}_wrapLog(e,n){return new G1(r_e(e),this)}_wrapTransactionReceipt(e,n){return new nse(c_e(e),this)}_wrapTransactionResponse(e,n){return new Fw(mse(e),this)}_detectNetwork(){Ke(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Ke(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Zt(await Ze(this,xn,Fo).call(this,{method:"getBlockNumber"}),"%response");return ie(this,$u)>=0&&me(this,$u,e),e}_getAddress(e){return Fi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(gr(e))return gr(e,32)?e:Cl(e);if(typeof e=="bigint"&&(e=Zt(e,"blockTag")),typeof e=="number")return e>=0?Cl(e):ie(this,$u)>=0?Cl(ie(this,$u)+e):this.getBlockNumber().then(n=>Cl(n+e));ye(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?uM(l.map(c=>c.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(l,c,u)=>{let h;switch(l.length){case 0:break;case 1:h=l[0];break;default:l.sort(),h=l}if(r&&(c!=null||u!=null))throw new Error("invalid filter");const m={};return h&&(m.address=h),n.length&&(m.topics=n),c&&(m.fromBlock=c),u&&(m.toBlock=u),r&&(m.blockHash=r),m};let s=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)s.push(this._getAddress(l));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(e){const n=Uw(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=Fi(n[i],this);aA(s)?r.push((async function(){n[i]=await s})()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);aA(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(ie(this,Go)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw ie(this,Go)===i&&me(this,Go,null),s}})();return me(this,Go,i),(await i).clone()}const e=ie(this,Go),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(ie(this,Jp)?(this.emit("network",r,n),ie(this,Go)===e&&me(this,Go,Promise.resolve(r))):Ke(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await ks({_block:Ze(this,xn,hM).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await Ze(this,xn,Fo).call(this,{method:"getGasPrice"});return kt(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await Ze(this,xn,Fo).call(this,{method:"getPriorityFee"});return kt(u,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(i,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*y_e+l),new hV(s,a,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new dd(r.url),s=await r.processFunc(n,this,i);return new hV(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return aA(n)&&(n=await n),kt(await Ze(this,xn,Fo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await ks({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Ze(this,xn,fM).call(this,Ze(this,xn,dM).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return kt(await Ze(this,xn,Vb).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Zt(await Ze(this,xn,Vb).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return rt(await Ze(this,xn,Vb).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const i=kt(n,"position");return rt(await Ze(this,xn,Vb).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await ks({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=j8.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:i}=await ks({network:this.getNetwork(),params:Ze(this,xn,hM).call(this,e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await ks({network:this.getNetwork(),params:Ze(this,xn,Fo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await ks({network:this.getNetwork(),params:Ze(this,xn,Fo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await Ze(this,xn,Fo).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await ks({network:this.getNetwork(),result:Ze(this,xn,Fo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:rt(n)}async getLogs(e){let n=this._getFilter(e);aA(n)&&(n=await n);const{network:r,params:i}=await ks({network:this.getNetwork(),params:Ze(this,xn,Fo).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){Ke(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await fk.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=yn(e);const n=rM(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await fk.getEnsAddress(this),s=await new ny(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===Rw)return null;const a=await new ny(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(ls(r,"BAD_DATA")&&r.value==="0x"||ls(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const l=(async c=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&c-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",l)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(Ir("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){Ke(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=ie(this,Ba).get(e);n&&(n.timer&&clearTimeout(n.timer),ie(this,Ba).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=db(this,C1)._++,i=()=>{ie(this,Ba).delete(r),e()};if(this.paused)ie(this,Ba).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);ie(this,Ba).set(r,{timer:s,func:i,time:wR()})}return r}_forEachSubscriber(e){for(const n of ie(this,Es).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new yse(e.type);case"block":{const n=new h_e(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new p_e(this,e.type);case"event":return new G8(this,e.filter);case"transaction":return new g_e(this,e.hash);case"orphan":return new m_e(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of ie(this,Es).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),ie(this,Ss)!=null&&n.pause(ie(this,Ss));break}}async on(e,n){const r=await Ze(this,xn,ST).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,ie(this,Ss)!=null&&r.subscriber.pause(ie(this,Ss))),this}async once(e,n){const r=await Ze(this,xn,ST).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,ie(this,Ss)!=null&&r.subscriber.pause(ie(this,Ss))),this}async emit(e,...n){const r=await Ze(this,xn,qb).call(this,e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new tre(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),ie(this,Es).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await Ze(this,xn,qb).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of ie(this,Es).values())n+=r.length;return n}async listeners(e){if(e){const r=await Ze(this,xn,qb).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of ie(this,Es).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await Ze(this,xn,qb).call(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),ie(this,Es).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await Ze(this,xn,ST).call(this,e);r&&i.stop(),ie(this,Es).delete(n)}else for(const[n,{started:r,subscriber:i}]of ie(this,Es))r&&i.stop(),ie(this,Es).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return ie(this,Qy)}destroy(){this.removeAllListeners();for(const e of ie(this,Ba).keys())this._clearTimeout(e);me(this,Qy,!0)}get paused(){return ie(this,Ss)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(me(this,$u,-1),ie(this,Ss)!=null){if(ie(this,Ss)==!!e)return;Ke(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),me(this,Ss,!!e);for(const n of ie(this,Ba).values())n.timer&&clearTimeout(n.timer),n.time=wR()-n.time}resume(){if(ie(this,Ss)!=null){this._forEachSubscriber(e=>e.resume()),me(this,Ss,null);for(const e of ie(this,Ba).values()){let n=e.time;n<0&&(n=0),e.time=wR(),setTimeout(e.func,n)}}}}Es=new WeakMap,Wf=new WeakMap,Ss=new WeakMap,Qy=new WeakMap,Go=new WeakMap,Jp=new WeakMap,Yf=new WeakMap,$u=new WeakMap,C1=new WeakMap,Ba=new WeakMap,Zy=new WeakMap,ex=new WeakMap,xn=new WeakSet,Fo=async function(e){const n=ie(this,ex).cacheTimeout;if(n<0)return await this._perform(e);const r=ET(e.method,e);let i=ie(this,Yf).get(r);return i||(i=this._perform(e),ie(this,Yf).set(r,i),setTimeout(()=>{ie(this,Yf).get(r)===i&&ie(this,Yf).delete(r)},n)),await i},dM=async function(e,n,r){Ke(r<x_e,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=Uw(e);try{return rt(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&E8(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&mr(s.data,0,4)==="0x556f1830"){const o=s.data,a=await Fi(i.to,this);let l;try{l=k_e(mr(s.data,4))}catch(h){Ke(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}Ke(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(i,l.calldata,l.urls);Ke(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const u={to:a,data:On([l.selector,T_e([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const h=await Ze(this,xn,dM).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:h}),h}}throw s}},fM=async function(e){const{value:n}=await ks({network:this.getNetwork(),value:e});return n},Vb=async function(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await Ze(this,xn,fM).call(this,Ze(this,xn,Fo).call(this,Object.assign(e,{address:i,blockTag:s})))},hM=async function(e,n){if(gr(e,32))return await Ze(this,xn,Fo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await Ze(this,xn,Fo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},qb=async function(e,n){let r=await bR(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await bR({orphan:"drop-log",log:n[0]},this)),ie(this,Es).get(r.tag)||null},ST=async function(e){const n=await bR(e,this),r=n.tag;let i=ie(this,Es).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},ie(this,Es).set(r,i)),i};function E_e(t,e){try{const n=pM(t,e);if(n)return ik(n)}catch{}return null}function pM(t,e){if(t==="0x")return null;try{const n=Zt(mr(t,e,e+32)),r=Zt(mr(t,n,n+32));return mr(t,n+32,n+32+r)}catch{}return null}function EV(t){const e=Dr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function S_e(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const A_e=new Uint8Array([]);function T_e(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(A_e),n+=32;for(let r=0;r<t.length;r++){const i=yt(t[r]);e[r]=EV(n),e.push(EV(i.length)),e.push(S_e(i)),n+=32+Math.ceil(i.length/32)*32}return On(e)}const SV="0x0000000000000000000000000000000000000000000000000000000000000000";function k_e(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Ke(Xg(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=mr(t,0,32);Ke(mr(n,0,12)===mr(SV,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=mr(n,12);try{const r=[],i=Zt(mr(t,32,64)),s=Zt(mr(t,i,i+32)),o=mr(t,i+32);for(let a=0;a<s;a++){const l=E_e(o,a*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{Ke(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=pM(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{Ke(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Ke(mr(t,100,128)===mr(SV,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=mr(t,96,100);try{const r=pM(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{Ke(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Zh(t,e){if(t.provider)return t.provider;Ke(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function AV(t,e){let n=Uw(e);if(n.to!=null&&(n.to=Fi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Fi(r,t)]).then(([i,s])=>(ye(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await ks(n)}class K8{constructor(e){Ce(this,"provider");Lt(this,{provider:e||null})}async getNonce(e){return Zh(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await AV(this,e)}async populateTransaction(e){const n=Zh(this,"populateTransaction"),r=await AV(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=kt(r.chainId);ye(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?ye(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&ye(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();Ke(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(Ke(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):Ke(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ks(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Zh(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Zh(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Zh(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Zh(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Zh(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=j8.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){Ke(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var tx,AT;const T7=class T7 extends K8{constructor(n,r){super(r);Ue(this,tx);Ce(this,"address");Lt(this,{address:n})}async getAddress(){return this.address}connect(n){return new T7(this.address,n)}async signTransaction(n){Ze(this,tx,AT).call(this,"transactions","signTransaction")}async signMessage(n){Ze(this,tx,AT).call(this,"messages","signMessage")}async signTypedData(n,r,i){Ze(this,tx,AT).call(this,"typed-data","signTypedData")}};tx=new WeakSet,AT=function(n,r){Ke(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:r})};let mM=T7;function C_e(t){return JSON.parse(JSON.stringify(t))}var zs,vc,Xp,Jf,Qp,nx,xh,gM,yM;class xse{constructor(e){Ue(this,xh);Ue(this,zs);Ue(this,vc);Ue(this,Xp);Ue(this,Jf);Ue(this,Qp);Ue(this,nx);me(this,zs,e),me(this,vc,null),me(this,Xp,Ze(this,xh,gM).bind(this)),me(this,Jf,!1),me(this,Qp,null),me(this,nx,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){ie(this,Jf)||(me(this,Jf,!0),Ze(this,xh,gM).call(this,-2))}stop(){ie(this,Jf)&&(me(this,Jf,!1),me(this,nx,!0),Ze(this,xh,yM).call(this),ie(this,zs).off("block",ie(this,Xp)))}pause(e){e&&Ze(this,xh,yM).call(this),ie(this,zs).off("block",ie(this,Xp))}resume(){this.start()}}zs=new WeakMap,vc=new WeakMap,Xp=new WeakMap,Jf=new WeakMap,Qp=new WeakMap,nx=new WeakMap,xh=new WeakSet,gM=async function(e){try{ie(this,vc)==null&&me(this,vc,this._subscribe(ie(this,zs)));let n=null;try{n=await ie(this,vc)}catch(s){if(!ls(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){me(this,vc,null),ie(this,zs)._recoverSubscriber(this,this._recover(ie(this,zs)));return}const r=await ie(this,zs).getNetwork();if(ie(this,Qp)||me(this,Qp,r),ie(this,Qp).chainId!==r.chainId)throw new Error("chaid changed");if(ie(this,nx))return;const i=await ie(this,zs).send("eth_getFilterChanges",[n]);await this._emitResults(ie(this,zs),i)}catch(n){console.log("@TODO",n)}ie(this,zs).once("block",ie(this,Xp))},yM=function(){const e=ie(this,vc);e&&(me(this,vc,null),e.then(n=>{ie(this,zs).destroyed||ie(this,zs).send("eth_uninstallFilter",[n])}))};var Zp;class N_e extends xse{constructor(n,r){super(n);Ue(this,Zp);me(this,Zp,C_e(r))}_recover(n){return new G8(n,ie(this,Zp))}async _subscribe(n){return await n.send("eth_newFilter",[ie(this,Zp)])}async _emitResults(n,r){for(const i of r)n.emit(ie(this,Zp),n._wrapLog(i,n._network))}}Zp=new WeakMap;class P_e extends xse{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const __e="bigint,boolean,function,number,string,symbol".split(/,/g);function TT(t){if(t==null||__e.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(TT);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function I_e(t){return new Promise(e=>{setTimeout(e,t)})}function K0(t){return t&&t.toLowerCase()}function TV(t){return t&&typeof t.pollingInterval=="number"}const vse={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class ER extends K8{constructor(n,r){super(n);Ce(this,"address");r=yn(r),Lt(this,{address:r})}connect(n){Ke(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=TT(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await Fi(o,this.provider);ye(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await Fi(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const c=async()=>{try{const u=await this.provider.getTransaction(i);if(u!=null){s(u.replaceableTransaction(r));return}}catch(u){if(ls(u,"CANCELLED")||ls(u,"BAD_DATA")||ls(u,"NETWORK_ERROR")||ls(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=i,o(u);return}if(ls(u,"INVALID_ARGUMENT")&&(l++,u.info==null&&(u.info={}),u.info.sendTransactionHash=i,l>10)){o(u);return}this.provider.emit("error",Ir("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(n){const r=TT(n);if(r.from){const s=await Fi(r.from,this.provider);ye(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?mi(n):n;return await this.provider.send("personal_sign",[rt(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=TT(i),o=await ym.resolveNames(n,r,s,async a=>{const l=await Fi(a);return ye(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ym.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?mi(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),rt(r)])}}var em,rx,zu,bc,Sl,Ua,yo,N1,xM;class R_e extends w_e{constructor(n,r){super(n,r);Ue(this,N1);Ue(this,em);Ue(this,rx);Ue(this,zu);Ue(this,bc);Ue(this,Sl);Ue(this,Ua);Ue(this,yo);me(this,rx,1),me(this,em,Object.assign({},vse,r||{})),me(this,zu,[]),me(this,bc,null),me(this,Ua,null),me(this,yo,null);{let s=null;const o=new Promise(a=>{s=a});me(this,Sl,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(ye(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&me(this,Ua,Nc.from(n))):i&&(ye(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),me(this,Ua,i))}_getOption(n){return ie(this,em)[n]}get _network(){return Ke(ie(this,Ua),"network is not available yet","NETWORK_ERROR"),ie(this,Ua)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&kt(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(ie(this,Ua))return ie(this,Ua)}else return n;return ie(this,yo)?await ie(this,yo):this.ready?(me(this,yo,(async()=>{try{const r=Nc.from(kt(await this.send("eth_chainId",[])));return me(this,yo,null),r}catch(r){throw me(this,yo,null),r}})()),await ie(this,yo)):(me(this,yo,(async()=>{const r={id:db(this,rx)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],me(this,yo,null)}catch(s){throw me(this,yo,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Nc.from(kt(i.result));throw this.getRpcError(r,i)})()),await ie(this,yo))}_start(){ie(this,Sl)==null||ie(this,Sl).resolve==null||(ie(this,Sl).resolve(),me(this,Sl,null),(async()=>{for(;ie(this,Ua)==null&&!this.destroyed;)try{me(this,Ua,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Ir("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await I_e(1e3)}Ze(this,N1,xM).call(this)})())}async _waitUntilReady(){if(ie(this,Sl)!=null)return await ie(this,Sl).promise}_getSubscriber(n){return n.type==="pending"?new P_e(this):n.type==="event"?this._getOption("polling")?new G8(this,n.filter):new N_e(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new yse("orphan"):super._getSubscriber(n)}get ready(){return ie(this,Sl)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Cl(kt(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=rt(n[i]))}),n.accessList&&(r.accessList=Um(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(i=>{const s=bie(i);return{address:s.address,nonce:Cl(s.nonce),chainId:Cl(s.chainId),yParity:Cl(s.signature.yParity),r:Cl(s.signature.r),s:Cl(s.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[K0(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[K0(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[K0(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[K0(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(K0):n.filter.address=K0(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return Ir("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}});if(l.match(/nonce/i)&&l.match(/too low/i))return Ir("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=vM(s),c=Bw.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return c.info={error:s,payload:n},c}const o=JSON.stringify(L_e(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Ir("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return Ir("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return Ir("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return Ir("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return Ir("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?Ir("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):Ir("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(Ir("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=db(this,rx)._++,s=new Promise((o,a)=>{ie(this,zu).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return Ze(this,N1,xM).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new ER(this,s[n])}const{accounts:i}=await ks({network:this.getNetwork(),accounts:r});n=yn(n);for(const s of i)if(yn(s)===n)return new ER(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new ER(this,r))}destroy(){ie(this,bc)&&(clearTimeout(ie(this,bc)),me(this,bc,null));for(const{payload:n,reject:r}of ie(this,zu))r(Ir("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));me(this,zu,[]),super.destroy()}}em=new WeakMap,rx=new WeakMap,zu=new WeakMap,bc=new WeakMap,Sl=new WeakMap,Ua=new WeakMap,yo=new WeakMap,N1=new WeakSet,xM=function(){if(ie(this,bc))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");me(this,bc,setTimeout(()=>{me(this,bc,null);const r=ie(this,zu);for(me(this,zu,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==ie(this,em).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>ie(this,em).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:c}of i){if(this.destroyed){l(Ir("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const u=o.filter(h=>h.id===c.id)[0];if(u==null){const h=Ir("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",h),l(h);continue}if("error"in u){l(this.getRpcError(c,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var Xf;class O_e extends R_e{constructor(n,r){super(n,r);Ue(this,Xf);let i=this._getOption("pollingInterval");i==null&&(i=vse.pollingInterval),me(this,Xf,i)}_getSubscriber(n){const r=super._getSubscriber(n);return TV(r)&&(r.pollingInterval=ie(this,Xf)),r}get pollingInterval(){return ie(this,Xf)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");me(this,Xf,n),this._forEachSubscriber(r=>{TV(r)&&(r.pollingInterval=ie(this,Xf))})}}Xf=new WeakMap;var ix;class M_e extends O_e{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);Ue(this,ix);typeof n=="string"?me(this,ix,new dd(n)):me(this,ix,n.clone())}_getConnection(){return ie(this,ix).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}ix=new WeakMap;function vM(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&gr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=vM(t[e]);if(n)return n}return null}if(typeof t=="string")try{return vM(JSON.parse(t))}catch{}return null}function bM(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)bM(t[n],e);if(typeof t=="string")try{return bM(JSON.parse(t),e)}catch{}}}function L_e(t){const e=[];return bM(t,e),e}var sx;const k7=class k7 extends K8{constructor(n,r){super(r);Ce(this,"address");Ue(this,sx);ye(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),me(this,sx,n);const i=q1(this.signingKey.publicKey);Lt(this,{address:i})}get signingKey(){return ie(this,sx)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new k7(ie(this,sx),n)}async signTransaction(n){n=Uw(n);const{to:r,from:i}=await ks({to:n.to?Fi(n.to,this):void 0,from:n.from?Fi(n.from,this):void 0});r!=null&&(n.to=r),i!=null&&(n.from=i),n.from!=null&&(ye(yn(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const s=j8.from(n);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(zie(n)).serialized}authorizeSync(n){ye(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const r=this.signingKey.sign(wie(n));return Object.assign({},{address:yn(n.address),nonce:kt(n.nonce||0),chainId:kt(n.chainId||0)},{signature:r})}async authorize(n){return n=Object.assign({},n,{address:await Fi(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,r,i){const s=await ym.resolveNames(n,r,i,async o=>{Ke(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return Ke(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(ym.hash(s.domain,r,s.value)).serialized}};sx=new WeakMap;let hk=k7;const pk=" !#$%&'()*+,-./<=>?@[]^_`{|}~",D_e=/^[a-z]*$/i;function kV(t,e){let n=97;return t.reduce((r,i)=>(i===e?n++:i.match(D_e)?r.push(String.fromCharCode(n)+i):(n=97,r.push(i)),r),[])}function j_e(t,e){for(let i=pk.length-1;i>=0;i--)t=t.split(pk[i]).join(e.substring(2*i,2*i+2));const n=[],r=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(s.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return kV(kV(n,";"),":")}function B_e(t){return ye(t[0]==="0","unsupported auwl data","data",t),j_e(t.substring(1+2*pk.length),t.substring(1,1+2*pk.length))}class U_e{constructor(e){Ce(this,"locale");Lt(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var ox,P1,tm,_1,wM;class F_e extends U_e{constructor(n,r,i){super(n);Ue(this,_1);Ue(this,ox);Ue(this,P1);Ue(this,tm);me(this,ox,r),me(this,P1,i),me(this,tm,null)}get _data(){return ie(this,ox)}_decodeWords(){return B_e(ie(this,ox))}getWord(n){const r=Ze(this,_1,wM).call(this);return ye(n>=0&&n<r.length,`invalid word index: ${n}`,"index",n),r[n]}getWordIndex(n){return Ze(this,_1,wM).call(this).indexOf(n)}}ox=new WeakMap,P1=new WeakMap,tm=new WeakMap,_1=new WeakSet,wM=function(){if(ie(this,tm)==null){const n=this._decodeWords();if(fd(n.join(`
`)+`
`)!==ie(this,P1))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);me(this,tm,n)}return ie(this,tm)};const $_e="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",z_e="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let SR=null;class wm extends F_e{constructor(){super("en",$_e,z_e)}static wordlist(){return SR==null&&(SR=new wm),SR}}function bse(t){return(1<<t)-1<<8-t&255}function H_e(t){return(1<<t)-1&255}function AR(t,e){Jne("NFKD"),e==null&&(e=wm.wordlist());const n=e.split(t);ye(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*n.length/8));let i=0;for(let c=0;c<n.length;c++){let u=e.getWordIndex(n[c].normalize("NFKD"));ye(u>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let h=0;h<11;h++)u&1<<10-h&&(r[i>>3]|=1<<7-i%8),i++}const s=32*n.length/3,o=n.length/3,a=bse(o),l=yt(Xa(r.slice(0,s/8)))[0]&a;return ye(l===(r[r.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),rt(r.slice(0,s/8))}function TR(t,e){ye(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=wm.wordlist());const n=[0];let r=11;for(let o=0;o<t.length;o++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[o]>>8-r,n.push(t[o]&H_e(8-r)),r+=3);const i=t.length/4,s=parseInt(Xa(t).substring(2,4),16)&bse(i);return n[n.length-1]<<=i,n[n.length-1]|=s>>8-i,e.join(n.map(o=>e.getWord(o)))}const kR={};class bx{constructor(e,n,r,i,s){Ce(this,"phrase");Ce(this,"password");Ce(this,"wordlist");Ce(this,"entropy");i==null&&(i=""),s==null&&(s=wm.wordlist()),bh(e,kR,"Mnemonic"),Lt(this,{phrase:r,password:i,wordlist:s,entropy:n})}computeSeed(){const e=mi("mnemonic"+this.password,"NFKD");return wh(mi(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,r){const i=AR(e,r);return e=TR(yt(i),r),new bx(kR,i,e,n,r)}static fromEntropy(e,n,r){const i=yt(e,"entropy"),s=TR(i,r);return new bx(kR,rt(i),s,n,r)}static entropyToPhrase(e,n){const r=yt(e,"entropy");return TR(r,n)}static phraseToEntropy(e,n){return AR(e,n)}static isValidMnemonic(e,n){try{return AR(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Xi=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},CR=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},kT,Na,ac;const V_e={16:10,24:12,32:14},q_e=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Sa=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],lA=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],G_e=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],K_e=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],W_e=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Y_e=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],J_e=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],X_e=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Q_e=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Z_e=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],eIe=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],tIe=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],nIe=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],rIe=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function NR(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class W8{get key(){return Xi(this,kT,"f").slice()}constructor(e){if(kT.set(this,void 0),Na.set(this,void 0),ac.set(this,void 0),!(this instanceof W8))throw Error("AES must be instanitated with `new`");CR(this,kT,new Uint8Array(e),"f");const n=V_e[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");CR(this,ac,[],"f"),CR(this,Na,[],"f");for(let u=0;u<=n;u++)Xi(this,ac,"f").push([0,0,0,0]),Xi(this,Na,"f").push([0,0,0,0]);const r=(n+1)*4,i=this.key.length/4,s=NR(this.key);let o;for(let u=0;u<i;u++)o=u>>2,Xi(this,ac,"f")[o][u%4]=s[u],Xi(this,Na,"f")[n-o][u%4]=s[u];let a=0,l=i,c;for(;l<r;){if(c=s[i-1],s[0]^=Sa[c>>16&255]<<24^Sa[c>>8&255]<<16^Sa[c&255]<<8^Sa[c>>24&255]^q_e[a]<<24,a+=1,i!=8)for(let g=1;g<i;g++)s[g]^=s[g-1];else{for(let g=1;g<i/2;g++)s[g]^=s[g-1];c=s[i/2-1],s[i/2]^=Sa[c&255]^Sa[c>>8&255]<<8^Sa[c>>16&255]<<16^Sa[c>>24&255]<<24;for(let g=i/2+1;g<i;g++)s[g]^=s[g-1]}let u=0,h,m;for(;u<i&&l<r;)h=l>>2,m=l%4,Xi(this,ac,"f")[h][m]=s[u],Xi(this,Na,"f")[n-h][m]=s[u++],l++}for(let u=1;u<n;u++)for(let h=0;h<4;h++)c=Xi(this,Na,"f")[u][h],Xi(this,Na,"f")[u][h]=eIe[c>>24&255]^tIe[c>>16&255]^nIe[c>>8&255]^rIe[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=Xi(this,ac,"f").length-1,r=[0,0,0,0];let i=NR(e);for(let a=0;a<4;a++)i[a]^=Xi(this,ac,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=G_e[i[l]>>24&255]^K_e[i[(l+1)%4]>>16&255]^W_e[i[(l+2)%4]>>8&255]^Y_e[i[(l+3)%4]&255]^Xi(this,ac,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Xi(this,ac,"f")[n][a],s[4*a]=(Sa[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(Sa[i[(a+1)%4]>>16&255]^o>>16)&255,s[4*a+2]=(Sa[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(Sa[i[(a+3)%4]&255]^o)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=Xi(this,Na,"f").length-1,r=[0,0,0,0];let i=NR(e);for(let a=0;a<4;a++)i[a]^=Xi(this,Na,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=J_e[i[l]>>24&255]^X_e[i[(l+3)%4]>>16&255]^Q_e[i[(l+2)%4]>>8&255]^Z_e[i[(l+1)%4]&255]^Xi(this,Na,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=Xi(this,Na,"f")[n][a],s[4*a]=(lA[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(lA[i[(a+3)%4]>>16&255]^o>>16)&255,s[4*a+2]=(lA[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(lA[i[(a+1)%4]&255]^o)&255;return s}}kT=new WeakMap,Na=new WeakMap,ac=new WeakMap;class wse{constructor(e,n,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new W8(n)},name:{enumerable:!0,value:e}})}}var cA=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},W0=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Gb,Au;class Y8 extends wse{constructor(e,n){if(super("ECC",e,Y8),Gb.set(this,void 0),Au.set(this,void 0),n){if(n.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");cA(this,Gb,new Uint8Array(n),"f")}else cA(this,Gb,new Uint8Array(16),"f");cA(this,Au,this.iv,"f")}get iv(){return new Uint8Array(W0(this,Gb,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let i=0;i<16;i++)W0(this,Au,"f")[i]^=e[r+i];cA(this,Au,this.aes.encrypt(W0(this,Au,"f")),"f"),n.set(W0(this,Au,"f"),r)}return n}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const i=this.aes.decrypt(e.subarray(r,r+16));for(let s=0;s<16;s++)n[r+s]=i[s]^W0(this,Au,"f")[s],W0(this,Au,"f")[s]=e[r+s]}return n}}Gb=new WeakMap,Au=new WeakMap;var Y0=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Aa=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Kb,lp,Pa;class wx extends wse{constructor(e,n){super("CTR",e,wx),Kb.set(this,void 0),lp.set(this,void 0),Pa.set(this,void 0),Y0(this,Pa,new Uint8Array(16),"f"),Aa(this,Pa,"f").fill(0),Y0(this,Kb,Aa(this,Pa,"f"),"f"),Y0(this,lp,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(Aa(this,Pa,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)Aa(this,Pa,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Aa(this,Pa,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Aa(this,Pa,"f")[e]===255)Aa(this,Pa,"f")[e]=0;else{Aa(this,Pa,"f")[e]++;break}}encrypt(e){var n,r;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)Aa(this,lp,"f")===16&&(Y0(this,Kb,this.aes.encrypt(Aa(this,Pa,"f")),"f"),Y0(this,lp,0,"f"),this.increment()),i[s]^=Aa(this,Kb,"f")[Y0(this,lp,(r=Aa(this,lp,"f"),n=r++,r),"f"),n];return i}decrypt(e){return this.encrypt(e)}}Kb=new WeakMap,lp=new WeakMap,Pa=new WeakMap;function iIe(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const n=t.length-e;for(let r=0;r<e;r++)if(t[n+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,n))}function Ese(t){return typeof t=="string"&&!t.startsWith("0x")&&(t="0x"+t),cs(t)}function xb(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function W1(t){return typeof t=="string"?mi(t,"NFKC"):cs(t)}function ei(t,e){const n=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);ye(n!=null,"invalid path","path",e);const r=n[1],i=n[3],s=n[4]==="!";let o=t;for(const a of r.toLowerCase().split(".")){if(Array.isArray(o)){if(!a.match(/^[0-9]+$/))break;o=o[parseInt(a)]}else if(typeof o=="object"){let l=null;for(const c in o)if(c.toLowerCase()===a){l=o[c];break}o=l}else o=null;if(o==null)break}if(ye(!s||o!=null,"missing required value","path",r),i&&o!=null){if(i==="int"){if(typeof o=="string"&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if(i==="number"&&typeof o=="string"&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if(i==="data"&&typeof o=="string")return Ese(o);if(i==="array"&&Array.isArray(o)||i===typeof o)return o;ye(!1,`wrong type found for ${i} `,"path",r)}return o}const Sse="m/44'/60'/0'/0/0";function CV(t){try{const e=JSON.parse(t);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function sIe(t,e,n){if(ei(t,"crypto.cipher:string")==="aes-128-ctr"){const i=ei(t,"crypto.cipherparams.iv:data!"),s=new wx(e,i);return rt(s.decrypt(n))}Ke(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function mk(t,e){const n=yt(e),r=ei(t,"crypto.ciphertext:data!"),i=rt(Kn(On([n.slice(16,32),r]))).substring(2);ye(i===ei(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=sIe(t,n.slice(0,16),r),o=q1(s);if(t.address){let c=t.address.toLowerCase();c.startsWith("0x")||(c="0x"+c),ye(yn(c)===o,"keystore address/privateKey mismatch","address",t.address)}const a={address:o,privateKey:s};if(ei(t,"x-ethers.version:string")==="0.1"){const c=n.slice(32,64),u=ei(t,"x-ethers.mnemonicCiphertext:data!"),h=ei(t,"x-ethers.mnemonicCounter:data!"),m=new wx(c,h);a.mnemonic={path:ei(t,"x-ethers.path:string")||Sse,locale:ei(t,"x-ethers.locale:string")||"en",entropy:rt(yt(m.decrypt(u)))}}return a}function Ase(t){const e=ei(t,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const n=ei(t,"crypto.kdfparams.salt:data!"),r=ei(t,"crypto.kdfparams.n:int!"),i=ei(t,"crypto.kdfparams.r:int!"),s=ei(t,"crypto.kdfparams.p:int!");ye(r>0&&(r&r-1)===0,"invalid kdf.N","kdf.N",r),ye(i>0&&s>0,"invalid kdf","kdf",e);const o=ei(t,"crypto.kdfparams.dklen:int!");return ye(o===32,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:n,N:r,r:i,p:s,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const n=ei(t,"crypto.kdfparams.salt:data!"),r=ei(t,"crypto.kdfparams.prf:string!"),i=r.split("-").pop();ye(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",r);const s=ei(t,"crypto.kdfparams.c:int!"),o=ei(t,"crypto.kdfparams.dklen:int!");return ye(o===32,"invalid kdf.dklen","kdf.dklen",o),{name:"pbkdf2",salt:n,count:s,dkLen:o,algorithm:i}}}ye(!1,"unsupported key-derivation function","kdf",e)}function oIe(t,e){const n=JSON.parse(t),r=W1(e),i=Ase(n);if(i.name==="pbkdf2"){const{salt:h,count:m,dkLen:g,algorithm:x}=i,v=wh(r,h,m,g,x);return mk(n,v)}Ke(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:o,r:a,p:l,dkLen:c}=i,u=Gx(r,s,o,a,l,c);return mk(n,u)}function NV(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}async function aIe(t,e,n){const r=JSON.parse(t),i=W1(e),s=Ase(r);if(s.name==="pbkdf2"){n&&(n(0),await NV(0));const{salt:m,count:g,dkLen:x,algorithm:v}=s,b=wh(i,m,g,x,v);return n&&(n(1),await NV(0)),mk(r,b)}Ke(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:o,N:a,r:l,p:c,dkLen:u}=s,h=await qx(i,o,a,l,c,u,n);return mk(r,h)}function Tse(t){const e=t.salt!=null?yt(t.salt,"options.salt"):td(32);let n=1<<17,r=8,i=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(r=t.scrypt.r),t.scrypt.p&&(i=t.scrypt.p)),ye(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),ye(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),ye(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:n,r,p:i}}function kse(t,e,n,r){const i=yt(n.privateKey,"privateKey"),s=r.iv!=null?yt(r.iv,"options.iv"):td(16);ye(s.length===16,"invalid options.iv length","options.iv",r.iv);const o=r.uuid!=null?yt(r.uuid,"options.uuid"):td(16);ye(o.length===16,"invalid options.uuid length","options.uuid",r.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new wx(a,s),u=yt(c.encrypt(i)),h=Kn(On([l,u])),m={address:n.address.substring(2).toLowerCase(),id:c2e(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:rt(s).substring(2)},ciphertext:rt(u).substring(2),kdf:"scrypt",kdfparams:{salt:rt(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:h.substring(2)}};if(n.mnemonic){const g=r.client!=null?r.client:`ethers/${Wne}`,x=n.mnemonic.path||Sse,v=n.mnemonic.locale||"en",b=t.slice(32,64),w=yt(n.mnemonic.entropy,"account.mnemonic.entropy"),k=td(16),C=new wx(b,k),R=yt(C.encrypt(w)),B=new Date,F="UTC--"+(B.getUTCFullYear()+"-"+xb(B.getUTCMonth()+1,2)+"-"+xb(B.getUTCDate(),2)+"T"+xb(B.getUTCHours(),2)+"-"+xb(B.getUTCMinutes(),2)+"-"+xb(B.getUTCSeconds(),2)+".0Z")+"--"+m.address;m["x-ethers"]={client:g,gethFilename:F,path:x,locale:v,mnemonicCounter:rt(k).substring(2),mnemonicCiphertext:rt(R).substring(2),version:"0.1"}}return JSON.stringify(m)}function Cse(t,e,n){n==null&&(n={});const r=W1(e),i=Tse(n),s=Gx(r,i.salt,i.N,i.r,i.p,64);return kse(yt(s),i,t,n)}async function Nse(t,e,n){n==null&&(n={});const r=W1(e),i=Tse(n),s=await qx(r,i.salt,i.N,i.r,i.p,64,n.progressCallback);return kse(yt(s),i,t,n)}const PR="m/44'/60'/0'/0/0",lIe=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Lc=2147483648,cIe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),uIe="0123456789abcdef";function gk(t,e){let n="";for(;t;)n=uIe[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function EM(t){const e=yt(t),n=mr(Xa(Xa(e)),0,4),r=On([e,n]);return ere(r)}const dc={};function Pse(t,e,n,r){const i=new Uint8Array(37);t&Lc?(Ke(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(yt(r),1)):i.set(yt(n));for(let o=24;o>=0;o-=8)i[33+(o>>3)]=t>>24-o&255;const s=yt(Hx("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function _se(t,e){const n=e.split("/");ye(n.length>0,"invalid path","path",e),n[0]==="m"&&(ye(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let r=t;for(let i=0;i<n.length;i++){const s=n[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));ye(o<Lc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(Lc+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);ye(o<Lc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(o)}else ye(!1,"invalid path component",`path[${i}]`,s)}return r}var I1,SM,nm,Wb;const ml=class ml extends hk{constructor(n,r,i,s,o,a,l,c,u){super(r,u);Ue(this,I1);Ce(this,"publicKey");Ce(this,"fingerprint");Ce(this,"parentFingerprint");Ce(this,"mnemonic");Ce(this,"chainCode");Ce(this,"path");Ce(this,"index");Ce(this,"depth");bh(n,dc,"HDNodeWallet"),Lt(this,{publicKey:r.compressedPublicKey});const h=mr(Vx(Xa(this.publicKey)),0,4);Lt(this,{parentFingerprint:i,fingerprint:h,chainCode:s,path:o,index:a,depth:l}),Lt(this,{mnemonic:c})}connect(n){return new ml(dc,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,r){return await Nse(Ze(this,I1,SM).call(this),n,{progressCallback:r})}encryptSync(n){return Cse(Ze(this,I1,SM).call(this),n)}get extendedKey(){return Ke(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),EM(On(["0x0488ADE4",gk(this.depth,1),this.parentFingerprint,gk(this.index,4),this.chainCode,On(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new zw(dc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const r=Zt(n,"index");ye(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~Lc),r&Lc&&(i+="'"));const{IR:s,IL:o}=Pse(r,this.chainCode,this.publicKey,this.privateKey),a=new Mc(ud((z1(o)+BigInt(this.privateKey))%cIe,32));return new ml(dc,a,this.fingerprint,rt(s),i,r,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return _se(this,n)}static fromExtendedKey(n){const r=Dr(Vke(n));ye(r.length===82||EM(r.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const i=r[4],s=rt(r.slice(5,9)),o=parseInt(rt(r.slice(9,13)).substring(2),16),a=rt(r.slice(13,45)),l=r.slice(45,78);switch(rt(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=rt(l);return new zw(dc,q1(c),c,s,a,null,o,i,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new ml(dc,new Mc(l.slice(1)),s,a,null,o,i,null,null)}ye(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,r,i){var o;n==null&&(n=""),r==null&&(r=PR),i==null&&(i=wm.wordlist());const s=bx.fromEntropy(td(16),n,i);return Ze(o=ml,nm,Wb).call(o,s.computeSeed(),s).derivePath(r)}static fromMnemonic(n,r){var i;return r||(r=PR),Ze(i=ml,nm,Wb).call(i,n.computeSeed(),n).derivePath(r)}static fromPhrase(n,r,i,s){var a;r==null&&(r=""),i==null&&(i=PR),s==null&&(s=wm.wordlist());const o=bx.fromPhrase(n,r,s);return Ze(a=ml,nm,Wb).call(a,o.computeSeed(),o).derivePath(i)}static fromSeed(n){var r;return Ze(r=ml,nm,Wb).call(r,n,null)}};I1=new WeakSet,SM=function(){const n={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),n},nm=new WeakSet,Wb=function(n,r){ye(gC(n),"invalid seed","seed","[REDACTED]");const i=yt(n,"seed");ye(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=yt(Hx("sha512",lIe,i)),o=new Mc(rt(s.slice(0,32)));return new ml(dc,o,"0x00000000",rt(s.slice(32)),"m",0,0,r,null)},Ue(ml,nm);let cw=ml;class zw extends mM{constructor(n,r,i,s,o,a,l,c,u){super(r,u);Ce(this,"publicKey");Ce(this,"fingerprint");Ce(this,"parentFingerprint");Ce(this,"chainCode");Ce(this,"path");Ce(this,"index");Ce(this,"depth");bh(n,dc,"HDNodeVoidWallet"),Lt(this,{publicKey:i});const h=mr(Vx(Xa(i)),0,4);Lt(this,{publicKey:i,fingerprint:h,parentFingerprint:s,chainCode:o,path:a,index:l,depth:c})}connect(n){return new zw(dc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return Ke(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),EM(On(["0x0488B21E",gk(this.depth,1),this.parentFingerprint,gk(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const r=Zt(n,"index");ye(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~Lc),r&Lc&&(i+="'"));const{IR:s,IL:o}=Pse(r,this.chainCode,this.publicKey,null),a=Mc.addPoints(o,this.publicKey,!0),l=q1(a);return new zw(dc,l,a,this.fingerprint,rt(s),i,r,this.depth+1,this.provider)}derivePath(n){return _se(this,n)}}function w0t(t){const e=Zt(t,"index");return ye(e>=0&&e<Lc,"invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function E0t(t){const e=Zt(t,"index");return ye(e>=0&&e<Lc,"invalid account index","index",e),`m/44'/60'/0'/0/${e}`}function PV(t){try{if(JSON.parse(t).encseed)return!0}catch{}return!1}function _V(t,e){const n=JSON.parse(t),r=W1(e),i=yn(ei(n,"ethaddr:string!")),s=Ese(ei(n,"encseed:string!"));ye(s&&s.length%16===0,"invalid encseed","json",t);const o=yt(wh(r,r,2e3,32,"sha256")).slice(0,16),a=s.slice(0,16),l=s.slice(16),c=new Y8(o,a),u=iIe(yt(c.decrypt(l)));let h="";for(let m=0;m<u.length;m++)h+=String.fromCharCode(u[m]);return{address:i,privateKey:fd(h)}}function IV(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}var R1,AM;const vp=class vp extends hk{constructor(e,n){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let r=typeof e=="string"?new Mc(e):e;super(r,n)}connect(e){return new vp(this.signingKey,e)}async encrypt(e,n){const r={address:this.address,privateKey:this.privateKey};return await Nse(r,e,{progressCallback:n})}encryptSync(e){const n={address:this.address,privateKey:this.privateKey};return Cse(n,e)}static async fromEncryptedJson(e,n,r){var s;let i=null;return CV(e)?i=await aIe(e,n,r):PV(e)&&(r&&(r(0),await IV(0)),i=_V(e,n),r&&(r(1),await IV(0))),Ze(s=vp,R1,AM).call(s,i)}static fromEncryptedJsonSync(e,n){var i;let r=null;return CV(e)?r=oIe(e,n):PV(e)?r=_V(e,n):ye(!1,"invalid JSON wallet","json","[ REDACTED ]"),Ze(i=vp,R1,AM).call(i,r)}static createRandom(e){const n=cw.createRandom();return e?n.connect(e):n}static fromPhrase(e,n){const r=cw.fromPhrase(e);return n?r.connect(n):r}};R1=new WeakSet,AM=function(e){if(ye(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const r=bx.fromEntropy(e.mnemonic.entropy),i=cw.fromMnemonic(r,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const n=new vp(e.privateKey);return ye(n.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),n},Ue(vp,R1);let th=vp;var pf={},_R={},IR={},RR={},OR={},MR={},vb,RV;function dIe(){if(RV)return vb;RV=1,vb=t(typeof on<"u"&&on)||t(vb.Buffer)||t(typeof window<"u"&&window.Buffer)||vb.Buffer;function t(e){return e&&e.isBuffer&&e}return vb}var LR,OV;function J8(){if(OV)return LR;OV=1;var t={}.toString;return LR=Array.isArray||function(e){return t.call(e)=="[object Array]"},LR}var DR={exports:{}},MV;function fIe(){if(MV)return DR.exports;MV=1;var t=rl(),e=DR.exports=n(0);e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Array(i)}function r(i){if(!t.isBuffer(i)&&t.isView(i))i=t.Uint8Array.from(i);else if(t.isArrayBuffer(i))i=new Uint8Array(i);else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(i)}return DR.exports}var jR={exports:{}},LV;function hIe(){if(LV)return jR.exports;LV=1;var t=rl(),e=t.global,n=jR.exports=t.hasBuffer?r(0):[];n.alloc=t.hasBuffer&&e.alloc||r,n.concat=t.concat,n.from=i;function r(s){return new e(s)}function i(s){if(!t.isBuffer(s)&&t.isView(s))s=t.Uint8Array.from(s);else if(t.isArrayBuffer(s))s=new Uint8Array(s);else{if(typeof s=="string")return t.from.call(n,s);if(typeof s=="number")throw new TypeError('"value" argument must not be a number')}return e.from&&e.from.length!==1?e.from(s):new e(s)}return jR.exports}var BR={exports:{}},DV;function pIe(){if(DV)return BR.exports;DV=1;var t=rl(),e=BR.exports=t.hasArrayBuffer?n(0):[];e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Uint8Array(i)}function r(i){if(t.isView(i)){var s=i.byteOffset,o=i.byteLength;i=i.buffer,i.byteLength!==o&&(i.slice?i=i.slice(s,s+o):(i=new Uint8Array(i),i.byteLength!==o&&(i=Array.prototype.slice.call(i,s,s+o))))}else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(i)}return BR.exports}var J0={},bb={},jV;function mIe(){if(jV)return bb;jV=1,bb.copy=n,bb.toString=e,bb.write=t;function t(r,i){for(var s=this,o=i||(i|=0),a=r.length,l=0,c=0;c<a;)l=r.charCodeAt(c++),l<128?s[o++]=l:l<2048?(s[o++]=192|l>>>6,s[o++]=128|l&63):l<55296||l>57343?(s[o++]=224|l>>>12,s[o++]=128|l>>>6&63,s[o++]=128|l&63):(l=(l-55296<<10|r.charCodeAt(c++)-56320)+65536,s[o++]=240|l>>>18,s[o++]=128|l>>>12&63,s[o++]=128|l>>>6&63,s[o++]=128|l&63);return o-i}function e(r,i,s){var o=this,a=i|0;s||(s=o.length);for(var l="",c=0;a<s;){if(c=o[a++],c<128){l+=String.fromCharCode(c);continue}(c&224)===192?c=(c&31)<<6|o[a++]&63:(c&240)===224?c=(c&15)<<12|(o[a++]&63)<<6|o[a++]&63:(c&248)===240&&(c=(c&7)<<18|(o[a++]&63)<<12|(o[a++]&63)<<6|o[a++]&63),c>=65536?(c-=65536,l+=String.fromCharCode((c>>>10)+55296,(c&1023)+56320)):l+=String.fromCharCode(c)}return l}function n(r,i,s,o){var a;s||(s=0),!o&&o!==0&&(o=this.length),i||(i=0);var l=o-s;if(r===this&&s<i&&i<o)for(a=l-1;a>=0;a--)r[a+i]=this[a+s];else for(a=0;a<l;a++)r[a+i]=this[a+s];return l}return bb}var BV;function X8(){if(BV)return J0;BV=1;var t=mIe();J0.copy=s,J0.slice=o,J0.toString=a,J0.write=l("write");var e=rl(),n=e.global,r=e.hasBuffer&&"TYPED_ARRAY_SUPPORT"in n,i=r&&!n.TYPED_ARRAY_SUPPORT;function s(c,u,h,m){var g=e.isBuffer(this),x=e.isBuffer(c);if(g&&x)return this.copy(c,u,h,m);if(!i&&!g&&!x&&e.isView(this)&&e.isView(c)){var v=h||m!=null?o.call(this,h,m):this;return c.set(v,u),v.length}else return t.copy.call(this,c,u,h,m)}function o(c,u){var h=this.slice||!i&&this.subarray;if(h)return h.call(this,c,u);var m=e.alloc.call(this,u-c);return s.call(this,m,0,c,u),m}function a(c,u,h){var m=!r&&e.isBuffer(this)?this.toString:t.toString;return m.apply(this,arguments)}function l(c){return u;function u(){var h=this[c]||t[c];return h.apply(this,arguments)}}return J0}var UV;function rl(){return UV||(UV=1,(function(t){var e=t.global=dIe(),n=t.hasBuffer=e&&!!e.isBuffer,r=t.hasArrayBuffer=typeof ArrayBuffer<"u",i=t.isArray=J8();t.isArrayBuffer=r?v:k;var s=t.isBuffer=n?e.isBuffer:k,o=t.isView=r?ArrayBuffer.isView||C("ArrayBuffer","buffer"):k;t.alloc=m,t.concat=g,t.from=h;var a=t.Array=fIe(),l=t.Buffer=hIe(),c=t.Uint8Array=pIe(),u=t.prototype=X8();function h(R){return typeof R=="string"?b.call(this,R):w(this).from(R)}function m(R){return w(this).alloc(R)}function g(R,B){B||(B=0,Array.prototype.forEach.call(R,j));var O=this!==t&&this||R[0],F=m.call(O,B),H=0;return Array.prototype.forEach.call(R,$),F;function j(W){B+=W.length}function $(W){H+=u.copy.call(W,F,H)}}var x=C("ArrayBuffer");function v(R){return R instanceof ArrayBuffer||x(R)}function b(R){var B=R.length*3,O=m.call(this,B),F=u.write.call(O,R);return B!==F&&(O=u.slice.call(O,0,F)),O}function w(R){return s(R)?l:o(R)?c:i(R)?a:n?l:r?c:a}function k(){return!1}function C(R,B){return R="[object "+R+"]",function(O){return O!=null&&{}.toString.call(B?O[B]:O)===R}}})(MR)),MR}var FV;function Q8(){if(FV)return OR;FV=1,OR.ExtBuffer=e;var t=rl();function e(n,r){if(!(this instanceof e))return new e(n,r);this.buffer=t.from(n),this.type=r}return OR}var UR={},$V;function gIe(){if($V)return UR;$V=1,UR.setExtPackers=s;var t=rl(),e=t.global,n=t.Uint8Array.from,r,i={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function s(u){u.addExtPacker(14,Error,[c,o]),u.addExtPacker(1,EvalError,[c,o]),u.addExtPacker(2,RangeError,[c,o]),u.addExtPacker(3,ReferenceError,[c,o]),u.addExtPacker(4,SyntaxError,[c,o]),u.addExtPacker(5,TypeError,[c,o]),u.addExtPacker(6,URIError,[c,o]),u.addExtPacker(10,RegExp,[l,o]),u.addExtPacker(11,Boolean,[a,o]),u.addExtPacker(12,String,[a,o]),u.addExtPacker(13,Date,[Number,o]),u.addExtPacker(15,Number,[a,o]),typeof Uint8Array<"u"&&(u.addExtPacker(17,Int8Array,n),u.addExtPacker(18,Uint8Array,n),u.addExtPacker(19,Int16Array,n),u.addExtPacker(20,Uint16Array,n),u.addExtPacker(21,Int32Array,n),u.addExtPacker(22,Uint32Array,n),u.addExtPacker(23,Float32Array,n),typeof Float64Array<"u"&&u.addExtPacker(24,Float64Array,n),typeof Uint8ClampedArray<"u"&&u.addExtPacker(25,Uint8ClampedArray,n),u.addExtPacker(26,ArrayBuffer,n),u.addExtPacker(29,DataView,n)),t.hasBuffer&&u.addExtPacker(27,e,t.from)}function o(u){return r||(r=Lse().encode),r(u)}function a(u){return u.valueOf()}function l(u){u=RegExp.prototype.toString.call(u).split("/"),u.shift();var h=[u.pop()];return h.unshift(u.join("/")),h}function c(u){var h={};for(var m in i)h[m]=u[m];return h}return UR}var FR={},uA={},zV;function Z8(){return zV||(zV=1,(function(t){(function(e){var n="undefined",r=n!==typeof on&&on,i=n!==typeof Uint8Array&&Uint8Array,s=n!==typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],a=Array.isArray||O,l=4294967296,c=16777216,u;h("Uint64BE",!0,!0),h("Int64BE",!0,!1),h("Uint64LE",!1,!0),h("Int64LE",!1,!1);function h(F,H,j){var $=H?0:4,W=H?4:0,V=H?0:3,U=H?1:2,T=H?2:1,_=H?3:0,L=H?k:R,z=H?C:B,G=q.prototype,te="is"+F,K="_"+te;return G.buffer=void 0,G.offset=0,G[K]=!0,G.toNumber=X,G.toString=re,G.toJSON=X,G.toArray=m,r&&(G.toBuffer=g),i&&(G.toArrayBuffer=x),q[te]=M,e[F]=q,q;function q(ue,pe,be,se){return this instanceof q?P(this,ue,pe,be,se):new q(ue,pe,be,se)}function M(ue){return!!(ue&&ue[K])}function P(ue,pe,be,se,ve){if(i&&s&&(pe instanceof s&&(pe=new i(pe)),se instanceof s&&(se=new i(se))),!pe&&!be&&!se&&!u){ue.buffer=w(o,0);return}if(!v(pe,be)){var Re=u||Array;ve=be,se=pe,be=0,pe=new Re(8)}ue.buffer=pe,ue.offset=be|=0,n!==typeof se&&(typeof se=="string"?Y(pe,be,se,ve||10):v(se,ve)?b(pe,be,se,ve):typeof ve=="number"?(ae(pe,be+$,se),ae(pe,be+W,ve)):se>0?L(pe,be,se):se<0?z(pe,be,se):b(pe,be,o,0))}function Y(ue,pe,be,se){var ve=0,Re=be.length,De=0,Qe=0;be[0]==="-"&&ve++;for(var it=ve;ve<Re;){var et=parseInt(be[ve++],se);if(!(et>=0))break;Qe=Qe*se+et,De=De*se+Math.floor(Qe/l),Qe%=l}it&&(De=~De,Qe?Qe=l-Qe:De++),ae(ue,pe+$,De),ae(ue,pe+W,Qe)}function X(){var ue=this.buffer,pe=this.offset,be=Te(ue,pe+$),se=Te(ue,pe+W);return j||(be|=0),be?be*l+se:se}function re(ue){var pe=this.buffer,be=this.offset,se=Te(pe,be+$),ve=Te(pe,be+W),Re="",De=!j&&se&2147483648;for(De&&(se=~se,ve=l-ve),ue=ue||10;;){var Qe=se%ue*l+ve;if(se=Math.floor(se/ue),ve=Math.floor(Qe/ue),Re=(Qe%ue).toString(ue)+Re,!se&&!ve)break}return De&&(Re="-"+Re),Re}function ae(ue,pe,be){ue[pe+_]=be&255,be=be>>8,ue[pe+T]=be&255,be=be>>8,ue[pe+U]=be&255,be=be>>8,ue[pe+V]=be&255}function Te(ue,pe){return ue[pe+V]*c+(ue[pe+U]<<16)+(ue[pe+T]<<8)+ue[pe+_]}}function m(F){var H=this.buffer,j=this.offset;return u=null,F!==!1&&j===0&&H.length===8&&a(H)?H:w(H,j)}function g(F){var H=this.buffer,j=this.offset;if(u=r,F!==!1&&j===0&&H.length===8&&on.isBuffer(H))return H;var $=new r(8);return b($,0,H,j),$}function x(F){var H=this.buffer,j=this.offset,$=H.buffer;if(u=i,F!==!1&&j===0&&$ instanceof s&&$.byteLength===8)return $;var W=new i(8);return b(W,0,H,j),W.buffer}function v(F,H){var j=F&&F.length;return H|=0,j&&H+8<=j&&typeof F[H]!="string"}function b(F,H,j,$){H|=0,$|=0;for(var W=0;W<8;W++)F[H++]=j[$++]&255}function w(F,H){return Array.prototype.slice.call(F,H,H+8)}function k(F,H,j){for(var $=H+8;$>H;)F[--$]=j&255,j/=256}function C(F,H,j){var $=H+8;for(j++;$>H;)F[--$]=-j&255^255,j/=256}function R(F,H,j){for(var $=H+8;H<$;)F[H++]=j&255,j/=256}function B(F,H,j){var $=H+8;for(j++;H<$;)F[H++]=-j&255^255,j/=256}function O(F){return!!F&&Object.prototype.toString.call(F)=="[object Array]"}})(typeof t.nodeName!="string"?t:uA||{})})(uA)),uA}var $R={},dA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var HV;function Ise(){return HV||(HV=1,dA.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,m=n?-1:1,g=t[e+h];for(h+=m,s=g&(1<<-u)-1,g>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+h],h+=m,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)},dA.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,h=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,x=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=x,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=x,o/=256,c-=8);t[n+g-x]|=v*128}),dA}var zR={},VV;function Rse(){if(VV)return zR;VV=1;for(var t=zR.uint8=new Array(256),e=0;e<=255;e++)t[e]=n(e);function n(r){return function(i){var s=i.reserve(1);i.buffer[s]=r}}return zR}var qV;function yIe(){if(qV)return $R;qV=1;var t=Ise(),e=Z8(),n=e.Uint64BE,r=e.Int64BE,i=Rse().uint8,s=rl(),o=s.global,a=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,l=a&&!o.TYPED_ARRAY_SUPPORT,c=s.hasBuffer&&o.prototype||{};$R.getWriteToken=u;function u(O){return O&&O.uint8array?h():l||s.hasBuffer&&O&&O.safe?g():m()}function h(){var O=m();return O[202]=w(202,4,R),O[203]=w(203,8,B),O}function m(){var O=i.slice();return O[196]=x(196),O[197]=v(197),O[198]=b(198),O[199]=x(199),O[200]=v(200),O[201]=b(201),O[202]=w(202,4,c.writeFloatBE||R,!0),O[203]=w(203,8,c.writeDoubleBE||B,!0),O[204]=x(204),O[205]=v(205),O[206]=b(206),O[207]=w(207,8,k),O[208]=x(208),O[209]=v(209),O[210]=b(210),O[211]=w(211,8,C),O[217]=x(217),O[218]=v(218),O[219]=b(219),O[220]=v(220),O[221]=b(221),O[222]=v(222),O[223]=b(223),O}function g(){var O=i.slice();return O[196]=w(196,1,o.prototype.writeUInt8),O[197]=w(197,2,o.prototype.writeUInt16BE),O[198]=w(198,4,o.prototype.writeUInt32BE),O[199]=w(199,1,o.prototype.writeUInt8),O[200]=w(200,2,o.prototype.writeUInt16BE),O[201]=w(201,4,o.prototype.writeUInt32BE),O[202]=w(202,4,o.prototype.writeFloatBE),O[203]=w(203,8,o.prototype.writeDoubleBE),O[204]=w(204,1,o.prototype.writeUInt8),O[205]=w(205,2,o.prototype.writeUInt16BE),O[206]=w(206,4,o.prototype.writeUInt32BE),O[207]=w(207,8,k),O[208]=w(208,1,o.prototype.writeInt8),O[209]=w(209,2,o.prototype.writeInt16BE),O[210]=w(210,4,o.prototype.writeInt32BE),O[211]=w(211,8,C),O[217]=w(217,1,o.prototype.writeUInt8),O[218]=w(218,2,o.prototype.writeUInt16BE),O[219]=w(219,4,o.prototype.writeUInt32BE),O[220]=w(220,2,o.prototype.writeUInt16BE),O[221]=w(221,4,o.prototype.writeUInt32BE),O[222]=w(222,2,o.prototype.writeUInt16BE),O[223]=w(223,4,o.prototype.writeUInt32BE),O}function x(O){return function(F,H){var j=F.reserve(2),$=F.buffer;$[j++]=O,$[j]=H}}function v(O){return function(F,H){var j=F.reserve(3),$=F.buffer;$[j++]=O,$[j++]=H>>>8,$[j]=H}}function b(O){return function(F,H){var j=F.reserve(5),$=F.buffer;$[j++]=O,$[j++]=H>>>24,$[j++]=H>>>16,$[j++]=H>>>8,$[j]=H}}function w(O,F,H,j){return function($,W){var V=$.reserve(F+1);$.buffer[V++]=O,H.call($.buffer,W,V,j)}}function k(O,F){new n(this,F,O)}function C(O,F){new r(this,F,O)}function R(O,F){t.write(this,O,F,!1,23,4)}function B(O,F){t.write(this,O,F,!1,52,8)}return $R}var GV;function xIe(){if(GV)return FR;GV=1;var t=J8(),e=Z8(),n=e.Uint64BE,r=e.Int64BE,i=rl(),s=X8(),o=yIe(),a=Rse().uint8,l=Q8().ExtBuffer,c=typeof Uint8Array<"u",u=typeof Map<"u",h=[];h[1]=212,h[2]=213,h[4]=214,h[8]=215,h[16]=216,FR.getWriteType=m;function m(g){var x=o.getWriteToken(g),v=g&&g.useraw,b=c&&g&&g.binarraybuffer,w=b?i.isArrayBuffer:i.isBuffer,k=b?G:z,C=u&&g&&g.usemap,R=C?q:K,B={boolean:O,function:_,number:F,object:v?T:U,string:V(v?W:$),symbol:_,undefined:_};return B;function O(P,Y){var X=Y?195:194;x[X](P,Y)}function F(P,Y){var X=Y|0,re;if(Y!==X){re=203,x[re](P,Y);return}else-32<=X&&X<=127?re=X&255:0<=X?re=X<=255?204:X<=65535?205:206:re=-128<=X?208:-32768<=X?209:210;x[re](P,X)}function H(P,Y){var X=207;x[X](P,Y.toArray())}function j(P,Y){var X=211;x[X](P,Y.toArray())}function $(P){return P<32?1:P<=255?2:P<=65535?3:5}function W(P){return P<32?1:P<=65535?3:5}function V(P){return Y;function Y(X,re){var ae=re.length,Te=5+ae*3;X.offset=X.reserve(Te);var ue=X.buffer,pe=P(ae),be=X.offset+pe;ae=s.write.call(ue,re,be);var se=P(ae);if(pe!==se){var ve=be+se-pe,Re=be+ae;s.copy.call(ue,ue,ve,be,Re)}var De=se===1?160+ae:se<=3?215+se:219;x[De](X,ae),X.offset+=ae}}function U(P,Y){if(Y===null)return _(P,Y);if(w(Y))return k(P,Y);if(t(Y))return L(P,Y);if(n.isUint64BE(Y))return H(P,Y);if(r.isInt64BE(Y))return j(P,Y);var X=P.codec.getExtPacker(Y);if(X&&(Y=X(Y)),Y instanceof l)return te(P,Y);R(P,Y)}function T(P,Y){if(w(Y))return M(P,Y);U(P,Y)}function _(P,Y){var X=192;x[X](P,Y)}function L(P,Y){var X=Y.length,re=X<16?144+X:X<=65535?220:221;x[re](P,X);for(var ae=P.codec.encode,Te=0;Te<X;Te++)ae(P,Y[Te])}function z(P,Y){var X=Y.length,re=X<255?196:X<=65535?197:198;x[re](P,X),P.send(Y)}function G(P,Y){z(P,new Uint8Array(Y))}function te(P,Y){var X=Y.buffer,re=X.length,ae=h[re]||(re<255?199:re<=65535?200:201);x[ae](P,re),a[Y.type](P),P.send(X)}function K(P,Y){var X=Object.keys(Y),re=X.length,ae=re<16?128+re:re<=65535?222:223;x[ae](P,re);var Te=P.codec.encode;X.forEach(function(ue){Te(P,ue),Te(P,Y[ue])})}function q(P,Y){if(!(Y instanceof Map))return K(P,Y);var X=Y.size,re=X<16?128+X:X<=65535?222:223;x[re](P,X);var ae=P.codec.encode;Y.forEach(function(Te,ue,pe){ae(P,ue),ae(P,Te)})}function M(P,Y){var X=Y.length,re=X<32?160+X:X<=65535?218:219;x[re](P,X),P.send(Y)}}return FR}var X0={},KV;function RC(){if(KV)return X0;KV=1;var t=J8();X0.createCodec=a,X0.install=r,X0.filter=o;var e=rl();function n(l){if(!(this instanceof n))return new n(l);this.options=l,this.init()}n.prototype.init=function(){var l=this.options;return l&&l.uint8array&&(this.bufferish=e.Uint8Array),this};function r(l){for(var c in l)n.prototype[c]=i(n.prototype[c],l[c])}function i(l,c){return l&&c?u:l||c;function u(){return l.apply(this,arguments),c.apply(this,arguments)}}function s(l){return l=l.slice(),function(u){return l.reduce(c,u)};function c(u,h){return h(u)}}function o(l){return t(l)?s(l):l}function a(l){return new n(l)}return X0.preset=a({preset:!0}),X0}var WV;function ej(){if(WV)return RR;WV=1;var t=Q8().ExtBuffer,e=gIe(),n=xIe(),r=RC();r.install({addExtPacker:o,getExtPacker:a,init:s}),RR.preset=s.call(r.preset);function i(l){var c=n.getWriteType(l);return u;function u(h,m){var g=c[typeof m];if(!g)throw new Error('Unsupported type "'+typeof m+'": '+m);g(h,m)}}function s(){var l=this.options;return this.encode=i(l),l&&l.preset&&e.setExtPackers(this),this}function o(l,c,u){u=r.filter(u);var h=c.name;if(h&&h!=="Object"){var m=this.extPackers||(this.extPackers={});m[h]=x}else{var g=this.extEncoderList||(this.extEncoderList=[]);g.unshift([c,x])}function x(v){return u&&(v=u(v)),new t(v,l)}}function a(l){var c=this.extPackers||(this.extPackers={}),u=l.constructor,h=u&&u.name&&c[u.name];if(h)return h;for(var m=this.extEncoderList||(this.extEncoderList=[]),g=m.length,x=0;x<g;x++){var v=m[x];if(u===v[0])return v[1]}}return RR}var fA={},YV;function Ose(){if(YV)return fA;YV=1,fA.FlexDecoder=i,fA.FlexEncoder=s;var t=rl(),e=2048,n=65536,r="BUFFER_SHORTAGE";function i(){if(!(this instanceof i))return new i}function s(){if(!(this instanceof s))return new s}i.mixin=g(o()),i.mixin(i.prototype),s.mixin=g(a()),s.mixin(s.prototype);function o(){return{bufferish:t,write:x,fetch:c,flush:v,push:h,pull:m,read:u,reserve:b,offset:0};function x(w){var k=this.offset?t.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=k?w?this.bufferish.concat([k,w]):k:w,this.offset=0}function v(){for(;this.offset<this.buffer.length;){var w=this.offset,k;try{k=this.fetch()}catch(C){if(C&&C.message!=r)throw C;this.offset=w;break}this.push(k)}}function b(w){var k=this.offset,C=k+w;if(C>this.buffer.length)throw new Error(r);return this.offset=C,k}}function a(){return{bufferish:t,write:l,fetch:x,flush:v,push:h,pull:b,read:u,reserve:w,send:k,maxBufferSize:n,minBufferSize:e,offset:0,start:0};function x(){var C=this.start;if(C<this.offset){var R=this.start=this.offset;return t.prototype.slice.call(this.buffer,C,R)}}function v(){for(;this.start<this.offset;){var C=this.fetch();C&&this.push(C)}}function b(){var C=this.buffers||(this.buffers=[]),R=C.length>1?this.bufferish.concat(C):C[0];return C.length=0,R}function w(C){var R=C|0;if(this.buffer){var B=this.buffer.length,O=this.offset|0,F=O+R;if(F<B)return this.offset=F,O;this.flush(),C=Math.max(C,Math.min(B*2,this.maxBufferSize))}return C=Math.max(C,this.minBufferSize),this.buffer=this.bufferish.alloc(C),this.start=0,this.offset=R,0}function k(C){var R=C.length;if(R>this.minBufferSize)this.flush(),this.push(C);else{var B=this.reserve(R);t.prototype.copy.call(C,this.buffer,B)}}}function l(){throw new Error("method not implemented: write()")}function c(){throw new Error("method not implemented: fetch()")}function u(){var x=this.buffers&&this.buffers.length;return x?(this.flush(),this.pull()):this.fetch()}function h(x){var v=this.buffers||(this.buffers=[]);v.push(x)}function m(){var x=this.buffers||(this.buffers=[]);return x.shift()}function g(x){return v;function v(b){for(var w in x)b[w]=x[w];return b}}return fA}var JV;function Mse(){if(JV)return IR;JV=1,IR.EncodeBuffer=n;var t=ej().preset,e=Ose().FlexEncoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.write=function(r){this.codec.encode(this,r)},IR}var XV;function Lse(){if(XV)return _R;XV=1,_R.encode=e;var t=Mse().EncodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return _R}var HR={},VR={},qR={},GR={},QV;function vIe(){if(QV)return GR;QV=1,GR.setExtUnpackers=i;var t=rl(),e=t.global,n,r={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function i(u){u.addExtUnpacker(14,[s,a(Error)]),u.addExtUnpacker(1,[s,a(EvalError)]),u.addExtUnpacker(2,[s,a(RangeError)]),u.addExtUnpacker(3,[s,a(ReferenceError)]),u.addExtUnpacker(4,[s,a(SyntaxError)]),u.addExtUnpacker(5,[s,a(TypeError)]),u.addExtUnpacker(6,[s,a(URIError)]),u.addExtUnpacker(10,[s,o]),u.addExtUnpacker(11,[s,l(Boolean)]),u.addExtUnpacker(12,[s,l(String)]),u.addExtUnpacker(13,[s,l(Date)]),u.addExtUnpacker(15,[s,l(Number)]),typeof Uint8Array<"u"&&(u.addExtUnpacker(17,l(Int8Array)),u.addExtUnpacker(18,l(Uint8Array)),u.addExtUnpacker(19,[c,l(Int16Array)]),u.addExtUnpacker(20,[c,l(Uint16Array)]),u.addExtUnpacker(21,[c,l(Int32Array)]),u.addExtUnpacker(22,[c,l(Uint32Array)]),u.addExtUnpacker(23,[c,l(Float32Array)]),typeof Float64Array<"u"&&u.addExtUnpacker(24,[c,l(Float64Array)]),typeof Uint8ClampedArray<"u"&&u.addExtUnpacker(25,l(Uint8ClampedArray)),u.addExtUnpacker(26,c),u.addExtUnpacker(29,[c,l(DataView)])),t.hasBuffer&&u.addExtUnpacker(27,l(e))}function s(u){return n||(n=Bse().decode),n(u)}function o(u){return RegExp.apply(null,u)}function a(u){return function(h){var m=new u;for(var g in r)m[g]=h[g];return m}}function l(u){return function(h){return new u(h)}}function c(u){return new Uint8Array(u).buffer}return GR}var hA={},ZV;function Dse(){if(ZV)return hA;ZV=1;var t=Ise(),e=Z8(),n=e.Uint64BE,r=e.Int64BE;hA.getReadFormat=l,hA.readUint8=b;var i=rl(),s=X8(),o=typeof Map<"u",a=!0;function l(U){var T=i.hasArrayBuffer&&U&&U.binarraybuffer,_=U&&U.int64,L=o&&U&&U.usemap,z={map:L?u:c,array:h,str:m,bin:T?x:g,ext:v,uint8:b,uint16:k,uint32:R,uint64:O(8,_?j:F),int8:w,int16:C,int32:B,int64:O(8,_?$:H),float32:O(4,W),float64:O(8,V)};return z}function c(U,T){var _={},L,z=new Array(T),G=new Array(T),te=U.codec.decode;for(L=0;L<T;L++)z[L]=te(U),G[L]=te(U);for(L=0;L<T;L++)_[z[L]]=G[L];return _}function u(U,T){var _=new Map,L,z=new Array(T),G=new Array(T),te=U.codec.decode;for(L=0;L<T;L++)z[L]=te(U),G[L]=te(U);for(L=0;L<T;L++)_.set(z[L],G[L]);return _}function h(U,T){for(var _=new Array(T),L=U.codec.decode,z=0;z<T;z++)_[z]=L(U);return _}function m(U,T){var _=U.reserve(T),L=_+T;return s.toString.call(U.buffer,"utf-8",_,L)}function g(U,T){var _=U.reserve(T),L=_+T,z=s.slice.call(U.buffer,_,L);return i.from(z)}function x(U,T){var _=U.reserve(T),L=_+T,z=s.slice.call(U.buffer,_,L);return i.Uint8Array.from(z).buffer}function v(U,T){var _=U.reserve(T+1),L=U.buffer[_++],z=_+T,G=U.codec.getExtUnpacker(L);if(!G)throw new Error("Invalid ext type: "+(L&&"0x"+L.toString(16)));var te=s.slice.call(U.buffer,_,z);return G(te)}function b(U){var T=U.reserve(1);return U.buffer[T]}function w(U){var T=U.reserve(1),_=U.buffer[T];return _&128?_-256:_}function k(U){var T=U.reserve(2),_=U.buffer;return _[T++]<<8|_[T]}function C(U){var T=U.reserve(2),_=U.buffer,L=_[T++]<<8|_[T];return L&32768?L-65536:L}function R(U){var T=U.reserve(4),_=U.buffer;return _[T++]*16777216+(_[T++]<<16)+(_[T++]<<8)+_[T]}function B(U){var T=U.reserve(4),_=U.buffer;return _[T++]<<24|_[T++]<<16|_[T++]<<8|_[T]}function O(U,T){return function(_){var L=_.reserve(U);return T.call(_.buffer,L,a)}}function F(U){return new n(this,U).toNumber()}function H(U){return new r(this,U).toNumber()}function j(U){return new n(this,U)}function $(U){return new r(this,U)}function W(U){return t.read(this,U,!1,23,4)}function V(U){return t.read(this,U,!1,52,8)}return hA}var KR={},eq;function bIe(){if(eq)return KR;eq=1;var t=Dse();KR.getReadToken=e;function e(a){var l=t.getReadFormat(a);return a&&a.useraw?r(l):n(l)}function n(a){var l,c=new Array(256);for(l=0;l<=127;l++)c[l]=i(l);for(l=128;l<=143;l++)c[l]=o(l-128,a.map);for(l=144;l<=159;l++)c[l]=o(l-144,a.array);for(l=160;l<=191;l++)c[l]=o(l-160,a.str);for(c[192]=i(null),c[193]=null,c[194]=i(!1),c[195]=i(!0),c[196]=s(a.uint8,a.bin),c[197]=s(a.uint16,a.bin),c[198]=s(a.uint32,a.bin),c[199]=s(a.uint8,a.ext),c[200]=s(a.uint16,a.ext),c[201]=s(a.uint32,a.ext),c[202]=a.float32,c[203]=a.float64,c[204]=a.uint8,c[205]=a.uint16,c[206]=a.uint32,c[207]=a.uint64,c[208]=a.int8,c[209]=a.int16,c[210]=a.int32,c[211]=a.int64,c[212]=o(1,a.ext),c[213]=o(2,a.ext),c[214]=o(4,a.ext),c[215]=o(8,a.ext),c[216]=o(16,a.ext),c[217]=s(a.uint8,a.str),c[218]=s(a.uint16,a.str),c[219]=s(a.uint32,a.str),c[220]=s(a.uint16,a.array),c[221]=s(a.uint32,a.array),c[222]=s(a.uint16,a.map),c[223]=s(a.uint32,a.map),l=224;l<=255;l++)c[l]=i(l-256);return c}function r(a){var l,c=n(a).slice();for(c[217]=c[196],c[218]=c[197],c[219]=c[198],l=160;l<=191;l++)c[l]=o(l-160,a.bin);return c}function i(a){return function(){return a}}function s(a,l){return function(c){var u=a(c);return l(c,u)}}function o(a,l){return function(c){return l(c,a)}}return KR}var tq;function tj(){if(tq)return qR;tq=1;var t=Q8().ExtBuffer,e=vIe(),n=Dse().readUint8,r=bIe(),i=RC();i.install({addExtUnpacker:a,getExtUnpacker:l,init:o}),qR.preset=o.call(i.preset);function s(c){var u=r.getReadToken(c);return h;function h(m){var g=n(m),x=u[g];if(!x)throw new Error("Invalid type: "+(g&&"0x"+g.toString(16)));return x(m)}}function o(){var c=this.options;return this.decode=s(c),c&&c.preset&&e.setExtUnpackers(this),this}function a(c,u){var h=this.extUnpackers||(this.extUnpackers=[]);h[c]=i.filter(u)}function l(c){var u=this.extUnpackers||(this.extUnpackers=[]);return u[c]||h;function h(m){return new t(m,c)}}return qR}var nq;function jse(){if(nq)return VR;nq=1,VR.DecodeBuffer=n;var t=tj().preset,e=Ose().FlexDecoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.fetch=function(){return this.codec.decode(this)},VR}var rq;function Bse(){if(rq)return HR;rq=1,HR.decode=e;var t=jse().DecodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return HR}var WR={},YR={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */var iq;function Use(){return iq||(iq=1,(function(t){function e(){if(!(this instanceof e))return new e}(function(n){t.exports=n;var r="listeners",i={on:o,once:a,off:l,emit:c};s(n.prototype),n.mixin=s;function s(h){for(var m in i)h[m]=i[m];return h}function o(h,m){return u(this,h).push(m),this}function a(h,m){var g=this;return x.originalListener=m,u(g,h).push(x),g;function x(){l.call(g,h,x),m.apply(this,arguments)}}function l(h,m){var g=this,x;if(!arguments.length)delete g[r];else if(m){if(x=u(g,h,!0),x){if(x=x.filter(v),!x.length)return l.call(g,h);g[r][h]=x}}else if(x=g[r],x&&(delete x[h],!Object.keys(x).length))return l.call(g);return g;function v(b){return b!==m&&b.originalListener!==m}}function c(h,m){var g=this,x=u(g,h,!0);if(!x)return!1;var v=arguments.length;if(v===1)x.forEach(w);else if(v===2)x.forEach(k);else{var b=Array.prototype.slice.call(arguments,1);x.forEach(C)}return!!x.length;function w(R){R.call(g)}function k(R){R.call(g,m)}function C(R){R.apply(g,b)}}function u(h,m,g){if(!(g&&!h[r])){var x=h[r]||(h[r]={});return x[m]||(x[m]=[])}}})(e)})(YR)),YR.exports}var sq;function wIe(){if(sq)return WR;sq=1,WR.Encoder=n;var t=Use(),e=Mse().EncodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.encode=function(r){this.write(r),this.emit("data",this.read())},n.prototype.end=function(r){arguments.length&&this.encode(r),this.flush(),this.emit("end")},WR}var JR={},oq;function EIe(){if(oq)return JR;oq=1,JR.Decoder=n;var t=Use(),e=jse().DecodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.decode=function(r){arguments.length&&this.write(r),this.flush()},n.prototype.push=function(r){this.emit("data",r)},n.prototype.end=function(r){this.decode(r),this.emit("end")},JR}var XR={},aq;function SIe(){return aq||(aq=1,tj(),ej(),XR.createCodec=RC().createCodec),XR}var QR={},lq;function AIe(){return lq||(lq=1,tj(),ej(),QR.codec={preset:RC().preset}),QR}var cq;function TIe(){return cq||(cq=1,pf.encode=Lse().encode,pf.decode=Bse().decode,pf.Encoder=wIe().Encoder,pf.Decoder=EIe().Decoder,pf.createCodec=SIe().createCodec,pf.codec=AIe().codec),pf}var kIe=TIe();const CIe=hs(kIe),Fse="https://api.hyperliquid-testnet.xyz",NIe=`${Fse}/exchange`,ic=`${Fse}/info`,PIe=!1,uq=1200,ZR=60*1e3,dq=100,e5=3,fq=2e3,hq={l2Book:2,allMids:2,clearinghouseState:2,orderStatus:2,spotClearinghouseState:2,exchangeStatus:2,meta:20,metaAndAssetCtxs:20,candleSnapshot:20,userFills:20,openOrders:20,userRole:60,default:20};class _Ie{constructor(){this.weightHistory=[],this.requestQueue=Promise.resolve(),this.lastRequestTime=0,this.cache=new Map,this.CACHE_TTL_MS=5e3,this.PRICE_CACHE_TTL_MS=2e3,this.CANDLE_CACHE_TTL_MS=1e4,this.ASSET_CONTEXT_CACHE_TTL_MS=3e4,this.dealerLockActive=!1,this.dealerLockResolver=null,this.waitingForDealerUnlock=Promise.resolve(),this.sharedDataCache=new Map,this.SHARED_CACHE_TTL_MS=15e3,this.universeCache=[],this.lastCacheUpdate=0}acquireDealerLock(){this.dealerLockActive||(this.dealerLockActive=!0,this.waitingForDealerUnlock=new Promise(e=>{this.dealerLockResolver=e}),console.log("[Hyperliquid]  Dealer lock ACQUIRED - other requests will be skipped"))}releaseDealerLock(){this.dealerLockActive&&(this.dealerLockActive=!1,this.dealerLockResolver&&(this.dealerLockResolver(),this.dealerLockResolver=null),this.waitingForDealerUnlock=Promise.resolve(),console.log("[Hyperliquid]  Dealer lock RELEASED - other requests can proceed"))}isDealerActive(){return this.dealerLockActive}getCurrentWeight(){const n=Date.now()-ZR;return this.weightHistory=this.weightHistory.filter(r=>r.timestamp>n),this.weightHistory.reduce((r,i)=>r+i.weight,0)}recordWeight(e){this.weightHistory.push({timestamp:Date.now(),weight:e})}calculateWeight(e,n){const r=hq[e]||hq.default;return e==="candleSnapshot"&&n?r+Math.ceil(n/60):r}async waitForBudget(e){const n=this.getCurrentWeight(),r=uq-n;if(e<=r)return;const i=Date.now(),s=i-ZR,o=[...this.weightHistory].sort((u,h)=>u.timestamp-h.timestamp);let a=e-r,l=i;for(const u of o)if(!(u.timestamp<=s)&&(a-=u.weight,l=u.timestamp+ZR,a<=0))break;const c=Math.max(0,l-i);c>0&&(console.log(`[Hyperliquid] Rate budget: ${n}/${uq} used, waiting ${(c/1e3).toFixed(1)}s for budget...`),await new Promise(u=>setTimeout(u,c+100)))}async throttledFetch(e,n,r,i,s="default",o){if(r){const c=this.cache.get(r);if(c&&Date.now()-c.timestamp<(i||this.CACHE_TTL_MS))return new Response(JSON.stringify(c.data),{status:200,headers:{"Content-Type":"application/json"}})}const a=this.calculateWeight(s,o);this.requestQueue=this.requestQueue.then(async()=>{await this.waitForBudget(a);const u=Date.now()-this.lastRequestTime;u<dq&&await new Promise(h=>setTimeout(h,dq-u)),this.lastRequestTime=Date.now()}),await this.requestQueue,this.recordWeight(a);let l=null;for(let c=0;c<e5;c++)try{const u=await fetch(e,n);if(u.status===429){const h=parseInt(u.headers.get("Retry-After")||"2",10),m=Math.max(h*1e3,fq*Math.pow(2,c));console.warn(`[Hyperliquid] Rate limited (429), waiting ${m}ms before retry ${c+1}/${e5}`),await new Promise(g=>setTimeout(g,m));continue}if(u.ok&&r){const h=u.clone();try{const m=await h.json();this.cache.set(r,{data:m,timestamp:Date.now()})}catch{}}return u}catch(u){if(l=u,c<e5-1){const h=fq*Math.pow(2,c);await new Promise(m=>setTimeout(m,h))}}throw l||new Error("Request failed after retries")}async checkHealth(){try{return await this.getMetadata(),!0}catch(e){return console.error("Hyperliquid Health Check Failed:",e),!1}}createVaultWallet(){const e=th.createRandom();return new th(e.privateKey)}getWalletFromPrivateKey(e){return new th(e)}async getMarketData(e){try{const n=await this.throttledFetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"l2Book",coin:e})},`marketData:${e}`,this.PRICE_CACHE_TTL_MS,"l2Book");if(!n.ok)throw new Error(`Failed to fetch market data: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Market Data Error:",n),n}}async getOrderBookMetrics(e){var n,r,i,s,o,a,l,c;try{const u=await this.getMarketData(e),h=((n=u.levels)==null?void 0:n[0])||[],m=((r=u.levels)==null?void 0:r[1])||[];if(h.length===0||m.length===0)throw new Error(`No order book data for ${e}`);const g=parseFloat(((i=h[0])==null?void 0:i.px)||"0"),x=parseFloat(((s=m[0])==null?void 0:s.px)||"0"),v=(g+x)/2,b=x-g,w=v>0?b/v*100:0,k=5;let C=0,R=0,B=0,O=0;const F=[],H=[];for(let _=0;_<h.length;_++){const L=parseFloat(((o=h[_])==null?void 0:o.px)||"0"),z=parseFloat(((a=h[_])==null?void 0:a.sz)||"0"),G=L*z;_<k&&(C+=G),B+=G,F.push({price:L,volume:G})}for(let _=0;_<m.length;_++){const L=parseFloat(((l=m[_])==null?void 0:l.px)||"0"),z=parseFloat(((c=m[_])==null?void 0:c.sz)||"0"),G=L*z;_<k&&(R+=G),O+=G,H.push({price:L,volume:G})}const j=O>0?B/O:1,$=.2,W=.2;let V,U;for(const{price:_,volume:L}of F)if(B>0&&L/B>$){V=_;break}for(const{price:_,volume:L}of H)if(O>0&&L/O>W){U=_;break}const T={bidAskSpread:parseFloat(w.toFixed(4)),bidAskSpreadUSDC:parseFloat(b.toFixed(4)),imbalanceRatio:parseFloat(j.toFixed(3)),nearBidDepth:parseFloat(C.toFixed(2)),nearAskDepth:parseFloat(R.toFixed(2)),totalBidDepth:parseFloat(B.toFixed(2)),totalAskDepth:parseFloat(O.toFixed(2)),bidWallPrice:V,askWallPrice:U,midPrice:parseFloat(v.toFixed(6)),bestBid:parseFloat(g.toFixed(6)),bestAsk:parseFloat(x.toFixed(6))};return console.log(`[Hyperliquid] OrderBook ${e}: Spread=${T.bidAskSpread}%, Imbalance=${T.imbalanceRatio}, NearDepth(B/A)=${T.nearBidDepth}/${T.nearAskDepth}`),T}catch(u){return console.error(`Hyperliquid OrderBook Metrics Error for ${e}:`,u),{bidAskSpread:0,bidAskSpreadUSDC:0,imbalanceRatio:1,nearBidDepth:0,nearAskDepth:0,totalBidDepth:0,totalAskDepth:0,midPrice:0,bestBid:0,bestAsk:0}}}async getUserState(e){try{const n=await this.throttledFetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"clearinghouseState",user:e})},`userState:${e}`,this.CACHE_TTL_MS,"clearinghouseState");if(!n.ok)throw new Error(`Failed to fetch user state: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid User State Error:",n),n}}async getOpenOrders(e){try{const n=await this.throttledFetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"openOrders",user:e})},`openOrders:${e}`,this.CACHE_TTL_MS,"openOrders");if(!n.ok)throw new Error(`Failed to fetch open orders: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Open Orders Error:",n),n}}async getUserFills(e,n=20){try{const r=await this.throttledFetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFills",user:e})},`userFills:${e}`,this.CACHE_TTL_MS,"userFills");if(!r.ok)throw new Error(`Failed to fetch user fills: ${r.statusText}`);const i=await r.json();return Array.isArray(i)?i.slice(0,n):[]}catch(r){return console.error("Hyperliquid User Fills Error:",r),[]}}async getCandles(e,n="1h",r=100){try{const i=Date.now(),s=this.intervalToMs(n),o=i-s*r,a=await this.throttledFetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"candleSnapshot",req:{coin:e,interval:n,startTime:o}})},`candles:${e}:${n}:${r}`,this.CANDLE_CACHE_TTL_MS,"candleSnapshot",r);if(!a.ok)throw new Error(`Failed to fetch candles: ${a.statusText}`);const l=await a.json();return Array.isArray(l)?l.map(c=>({time:c.t||c.time,open:parseFloat(c.o||c.open),high:parseFloat(c.h||c.high),low:parseFloat(c.l||c.low),close:parseFloat(c.c||c.close),volume:parseFloat(c.v||c.volume||"0")})):l.t&&Array.isArray(l.t)?l.t.map((c,u)=>{var h;return{time:c,open:parseFloat(l.o[u]),high:parseFloat(l.h[u]),low:parseFloat(l.l[u]),close:parseFloat(l.c[u]),volume:parseFloat(((h=l.v)==null?void 0:h[u])||"0")}}):[]}catch(i){return console.error("Hyperliquid Candles Error:",i),[]}}async getCurrentPrice(e){var n,r;try{const i=await this.getMarketData(e),s=parseFloat(((n=i.levels[0][0])==null?void 0:n.px)||"0"),o=parseFloat(((r=i.levels[1][0])==null?void 0:r.px)||"0");return(s+o)/2}catch(i){throw console.error(`Hyperliquid Price Error for ${e}:`,i),i}}intervalToMs(e){return{"1m":6e4,"5m":3e5,"15m":9e5,"1h":36e5,"4h":144e5,"1d":864e5,"1D":864e5}[e]||3600*1e3}async getMetadata(){try{const e=await this.throttledFetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"metadata",6e4,"meta");if(!e.ok)throw new Error(`Failed to fetch metadata: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Hyperliquid Metadata Error:",e),e}}async getAllAvailableAssets(){try{return(await this.getMetadata()).universe.filter(n=>!n.isDelisted).map(n=>n.name)}catch(e){throw console.error("Hyperliquid Get Available Assets Error:",e),e}}async isValidAsset(e){try{return(await this.getAllAvailableAssets()).some(r=>r.toLowerCase()===e.toLowerCase())}catch(n){return console.error("Hyperliquid Asset Validation Error:",n),!0}}async signL1Action(e,n,r,i,s){const o=this.actionHash(n,r,i,s),a=this.constructPhantomAgent(o,PIe),l={name:"Exchange",version:"1",chainId:1337,verifyingContract:"0x0000000000000000000000000000000000000000"},c={Agent:[{name:"source",type:"string"},{name:"connectionId",type:"bytes32"}]},u=await e.signTypedData(l,c,a),h=no.from(u);return console.log("[Hyperliquid]  Signing Action:"),console.log("  - Domain:",JSON.stringify(l)),console.log("  - Types:",JSON.stringify(c)),console.log("  - Phantom Agent:",JSON.stringify(a)),console.log("  - Signature:",u),{r:h.r,s:h.s,v:h.v}}actionHash(e,n,r,i){let s=CIe.encode(e);const o=on.alloc(8);if(o.writeBigUInt64BE(BigInt(r),0),s=on.concat([s,o]),n===null)s=on.concat([s,on.from([0])]);else{s=on.concat([s,on.from([1])]);const a=on.from(n.replace("0x",""),"hex");s=on.concat([s,a])}if(i!==void 0){s=on.concat([s,on.from([0])]);const a=on.alloc(8);a.writeBigUInt64BE(BigInt(i),0),s=on.concat([s,a])}return Kn(s)}constructPhantomAgent(e,n){return{source:n?"a":"b",connectionId:e}}floatToWire(e){return e===0?"0":e.toFixed(8).replace(/\.?0+$/,"")}async postAction(e,n,r){var l,c;const i=await this.signL1Action(n,e,null,r),s={action:e,nonce:r,signature:i,vaultAddress:null};console.log("[Hyperliquid]  Sending action:",JSON.stringify({action:e,nonce:r},null,2)),console.log("[Hyperliquid]  Payload:",JSON.stringify(s,null,2));const o=await fetch(NIe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok){let u=`HTTP ${o.status}: ${o.statusText}`;try{const h=await o.text();console.error("[Hyperliquid] Error response:",h);try{const m=JSON.parse(h);u=`Exchange API Error (${o.status}): ${JSON.stringify(m)}`}catch{u=`Exchange API Error (${o.status}): ${h}`}}catch(h){console.error("[Hyperliquid] Failed to read error response:",h)}throw new Error(u)}const a=await o.json();if(console.log("[Hyperliquid]  Raw Response:",JSON.stringify(a,null,2)),a.status!=="ok")throw new Error(`Exchange API Error: ${JSON.stringify(a.response||a)}`);if((c=(l=a.response)==null?void 0:l.data)!=null&&c.statuses){const h=a.response.data.statuses.find(m=>m.error);if(h)throw new Error(`Order Failed: ${h.error}`)}return a}async placeOrder(e,n,r,i,s,o){const a=Date.now(),l=await this.getAssetIndex(n),c=(o==null?void 0:o.orderType)||"limit",u=(o==null?void 0:o.reduceOnly)||!1;let h;c==="market"?h={market:{}}:h={limit:{tif:(o==null?void 0:o.tif)||(c==="ioc"?"Ioc":c==="alo"?"Alo":"Gtc")}};let m="0";if(s){const b=await this.getAssetDecimals(n),w=Math.max(0,6-b);let k=parseFloat(s.toFixed(w));k=parseFloat(k.toPrecision(5)),k=parseFloat(k.toFixed(w)),m=this.floatToWire(k),console.log(`[Hyperliquid] Price rounding: ${s} -> ${m} (maxDecimals=${w}, szDecimals=${b})`)}const g={a:l,b:r,p:m,s:this.floatToWire(i),r:u,t:h};o!=null&&o.cloid&&(g.c=o.cloid);const x={type:"order",orders:[g],grouping:"na"},v=await this.postAction(x,e,a);return(o!=null&&o.stopLoss||o!=null&&o.takeProfit)&&await this.placeTpSlOrders(e,n,r,i,o.stopLoss,o.takeProfit,o.cloid),v}async placeTpSlOrders(e,n,r,i,s,o,a){const l=await this.getAssetIndex(n),u=6-await this.getAssetDecimals(n),h=x=>{let v=parseFloat(x.toFixed(u));return v=parseFloat(v.toPrecision(5)),v=parseFloat(v.toFixed(u)),this.floatToWire(v)},m=()=>{const x=new Uint8Array(16);return crypto.getRandomValues(x),"0x"+Array.from(x,v=>v.toString(16).padStart(2,"0")).join("")},g=[];if(s){const x=h(s),v=m();console.log(`[HL TP/SL] SL Price: ${s} -> Rounded: ${x}, cloid: ${v}`),g.push({a:l,b:!r,p:x,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:x,tpsl:"sl"}},c:v})}if(o){const x=h(o),v=m();console.log(`[HL TP/SL] TP Price: ${o} -> Rounded: ${x}, cloid: ${v}`),g.push({a:l,b:!r,p:x,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:x,tpsl:"tp"}},c:v})}if(g.length>0){const x=Date.now(),v={type:"order",orders:g,grouping:"positionTpsl"};await this.postAction(v,e,x)}}async cancelOrder(e,n,r){const i=Date.now(),s={type:"cancel",cancels:[{a:await this.getAssetIndex(n),o:r}]};return await this.postAction(s,e,i)}async updateLeverage(e,n,r,i){const s=Date.now(),o={type:"updateLeverage",asset:await this.getAssetIndex(n),isCross:i,leverage:r};return await this.postAction(o,e,s)}async updateIsolatedMargin(e,n,r,i){const s=Date.now(),o=Math.floor(i*1e6),a={type:"updateIsolatedMargin",asset:await this.getAssetIndex(n),isBuy:r,ntli:o};return console.log(`[Hyperliquid] Updating Isolated Margin: ${i} USDC -> ntli: ${o} for ${n} (isBuy: ${r})`),await this.postAction(a,e,s)}async closePosition(e,n,r,i="market",s){const a=(await this.getUserState(e.address)).assetPositions.find(g=>g.position.coin===n);if(!a||parseFloat(a.position.szi)===0)throw new Error(`No open position for ${n}`);const l=parseFloat(a.position.szi),c=l<0,u=r||Math.abs(l);let h=i,m=s;if(i==="market"){const g=await this.getMarketData(n),x=parseFloat(g.levels[0][0].px),v=parseFloat(g.levels[1][0].px),b=c?v:x,w=.01;let k=c?b*(1+w):b*(1-w);const R=6-await this.getAssetDecimals(n);let B=parseFloat(k.toFixed(R));B=parseFloat(B.toPrecision(5)),m=parseFloat(B.toFixed(R)),h="ioc",console.log(`[HL Close] Market Close -> Base: ${b}, Price: ${m} `)}return await this.placeOrder(e,n,c,u,m,{orderType:h==="market"?"ioc":h,reduceOnly:!0})}async withdrawUSDC(e,n,r){if(r<=1)throw new Error("Withdrawal amount must be greater than $1 to cover the withdrawal fee");const i=Date.now(),s={type:"usdSend",hyperliquidChain:"Testnet",signatureChainId:"0xa4b1",destination:n,amount:this.floatToWire(r),time:i};return await this.postAction(s,e,i)}async getAssetIndex(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return this.universeCache.indexOf(n)}async getAssetDecimals(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return n.szDecimals}async updateUniverseCache(){const e=Date.now();if(this.universeCache.length>0&&e-this.lastCacheUpdate<300*1e3)return;const r=await(await this.throttledFetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"universeCache",300*1e3)).json();this.universeCache=r.universe,this.lastCacheUpdate=e}async getAssetContexts(){try{const e=await this.throttledFetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"metaAndAssetCtxs"})},"assetContexts",this.ASSET_CONTEXT_CACHE_TTL_MS,"metaAndAssetCtxs");if(!e.ok)throw new Error(`Failed to fetch asset contexts: ${e.statusText}`);const n=await e.json();return Array.isArray(n)&&n.length>1?n[1]:[]}catch(e){return console.error("Hyperliquid Asset Contexts Error:",e),[]}}async getFundingRate(e){try{const n=await this.getAssetContexts();await this.updateUniverseCache();const r=this.universeCache.findIndex(s=>s.name===e);if(r===-1)return null;const i=n[r];return i?{funding:parseFloat(i.funding||"0"),premium:parseFloat(i.premium||"0"),nextFunding:parseFloat(i.funding||"0")}:null}catch(n){return console.error(`Hyperliquid Funding Rate Error for ${e}:`,n),null}}async getUserFees(e){try{const n=await fetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFees",user:e})});if(!n.ok)throw new Error(`Failed to fetch user fees: ${n.statusText}`);const r=await n.json();return{makerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userAddRate)||"0.0002"),takerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userRemoveRate)||"0.0005"),dailyVolume:parseFloat((r==null?void 0:r.dailyUserVlm)||"0"),feeSchedule:(r==null?void 0:r.feeSchedule)||null}}catch(n){return console.error("Hyperliquid User Fees Error:",n),{makerFee:2e-4,takerFee:5e-4,dailyVolume:0,feeSchedule:null}}}async getUserFundingHistory(e,n,r){try{const i=Date.now(),s={type:"userFunding",user:e,startTime:n||i-1440*60*1e3};r&&(s.endTime=r);const o=await fetch(ic,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Failed to fetch funding history: ${o.statusText}`);return await o.json()}catch(i){return console.error("Hyperliquid Funding History Error:",i),[]}}calculateBreakevenPrice(e,n,r,i=2e-4,s=5e-4,o=0,a=8){const l=s,c=s,u=a/8,h=Math.abs(o)*u,m=l+c+h,g=e*m,x=r?e+g:e-g,v=.01,b=r?x*(1+v):x*(1-v);return{breakevenPrice:x,minProfitPrice:b,totalCostPercent:m,costBreakdown:{entryFeePercent:l,exitFeePercent:c,fundingCostPercent:h}}}async getUserStateShared(e){const n=`shared:userState:${e}`,r=this.sharedDataCache.get(n);if(r&&Date.now()-r.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userState"),r.data;const i=await this.getUserState(e);return this.sharedDataCache.set(n,{data:i,timestamp:Date.now()}),i}async getUserFillsShared(e,n=20){const r=`shared:userFills:${e}`,i=this.sharedDataCache.get(r);if(i&&Date.now()-i.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userFills"),i.data;const s=await this.getUserFills(e,n);return this.sharedDataCache.set(r,{data:s,timestamp:Date.now()}),s}clearSharedCache(){this.sharedDataCache.clear(),console.log("[Hyperliquid]  Shared cache cleared")}}const zt=new _Ie;function pn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function pq(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Yx(...t){return e=>{let n=!1;const r=t.map(i=>{const s=pq(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():pq(t[i],null)}}}}function Nr(...t){return A.useCallback(Yx(...t),t)}function IIe(t,e){const n=A.createContext(e),r=s=>{const{children:o,...a}=s,l=A.useMemo(()=>a,Object.values(a));return d.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=A.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function $m(t,e=[]){let n=[];function r(s,o){const a=A.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:m,children:g,...x}=h,v=((w=m==null?void 0:m[t])==null?void 0:w[l])||a,b=A.useMemo(()=>x,Object.values(x));return d.jsx(v.Provider,{value:b,children:g})};c.displayName=s+"Provider";function u(h,m){var v;const g=((v=m==null?void 0:m[t])==null?void 0:v[l])||a,x=A.useContext(g);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>A.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return A.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,RIe(i,...e)]}function RIe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var zm=Mee();const OIe=hs(zm);function MIe(t){const e=LIe(t),n=A.forwardRef((r,i)=>{const{children:s,...o}=r,a=A.Children.toArray(s),l=a.find(jIe);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function LIe(t){const e=A.forwardRef((n,r)=>{const{children:i,...s}=n;if(A.isValidElement(i)){const o=UIe(i),a=BIe(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Yx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var DIe=Symbol("radix.slottable");function jIe(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===DIe}function BIe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function UIe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var FIe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mn=FIe.reduce((t,e)=>{const n=MIe(`Primitive.${e}`),r=A.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function $Ie(t,e){t&&zm.flushSync(()=>t.dispatchEvent(e))}function dh(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t}),A.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function zIe(t,e=globalThis==null?void 0:globalThis.document){const n=dh(t);A.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var HIe="DismissableLayer",TM="dismissableLayer.update",VIe="dismissableLayer.pointerDownOutside",qIe="dismissableLayer.focusOutside",mq,$se=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),OC=A.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=A.useContext($se),[u,h]=A.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=A.useState({}),x=Nr(e,F=>h(F)),v=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(b),k=u?v.indexOf(u):-1,C=c.layersWithOutsidePointerEventsDisabled.size>0,R=k>=w,B=WIe(F=>{const H=F.target,j=[...c.branches].some($=>$.contains(H));!R||j||(i==null||i(F),o==null||o(F),F.defaultPrevented||a==null||a())},m),O=YIe(F=>{const H=F.target;[...c.branches].some($=>$.contains(H))||(s==null||s(F),o==null||o(F),F.defaultPrevented||a==null||a())},m);return zIe(F=>{k===c.layers.size-1&&(r==null||r(F),!F.defaultPrevented&&a&&(F.preventDefault(),a()))},m),A.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(mq=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),gq(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=mq)}},[u,m,n,c]),A.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),gq())},[u,c]),A.useEffect(()=>{const F=()=>g({});return document.addEventListener(TM,F),()=>document.removeEventListener(TM,F)},[]),d.jsx(Mn.div,{...l,ref:x,style:{pointerEvents:C?R?"auto":"none":void 0,...t.style},onFocusCapture:pn(t.onFocusCapture,O.onFocusCapture),onBlurCapture:pn(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:pn(t.onPointerDownCapture,B.onPointerDownCapture)})});OC.displayName=HIe;var GIe="DismissableLayerBranch",KIe=A.forwardRef((t,e)=>{const n=A.useContext($se),r=A.useRef(null),i=Nr(e,r);return A.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),d.jsx(Mn.div,{...t,ref:i})});KIe.displayName=GIe;function WIe(t,e=globalThis==null?void 0:globalThis.document){const n=dh(t),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){zse(VIe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function YIe(t,e=globalThis==null?void 0:globalThis.document){const n=dh(t),r=A.useRef(!1);return A.useEffect(()=>{const i=s=>{s.target&&!r.current&&zse(qIe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function gq(){const t=new CustomEvent(TM);document.dispatchEvent(t)}function zse(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?$Ie(i,s):i.dispatchEvent(s)}var js=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},JIe=iC[" useId ".trim().toString()]||(()=>{}),XIe=0;function nh(t){const[e,n]=A.useState(JIe());return js(()=>{n(r=>r??String(XIe++))},[t]),e?`radix-${e}`:""}const QIe=["top","right","bottom","left"],fh=Math.min,Qo=Math.max,yk=Math.round,pA=Math.floor,Dc=t=>({x:t,y:t}),ZIe={left:"right",right:"left",bottom:"top",top:"bottom"},eRe={start:"end",end:"start"};function kM(t,e,n){return Qo(t,fh(e,n))}function pd(t,e){return typeof t=="function"?t(e):t}function md(t){return t.split("-")[0]}function Jx(t){return t.split("-")[1]}function nj(t){return t==="x"?"y":"x"}function rj(t){return t==="y"?"height":"width"}const tRe=new Set(["top","bottom"]);function Pc(t){return tRe.has(md(t))?"y":"x"}function ij(t){return nj(Pc(t))}function nRe(t,e,n){n===void 0&&(n=!1);const r=Jx(t),i=ij(t),s=rj(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=xk(o)),[o,xk(o)]}function rRe(t){const e=xk(t);return[CM(t),e,CM(e)]}function CM(t){return t.replace(/start|end/g,e=>eRe[e])}const yq=["left","right"],xq=["right","left"],iRe=["top","bottom"],sRe=["bottom","top"];function oRe(t,e,n){switch(t){case"top":case"bottom":return n?e?xq:yq:e?yq:xq;case"left":case"right":return e?iRe:sRe;default:return[]}}function aRe(t,e,n,r){const i=Jx(t);let s=oRe(md(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(CM)))),s}function xk(t){return t.replace(/left|right|bottom|top/g,e=>ZIe[e])}function lRe(t){return{top:0,right:0,bottom:0,left:0,...t}}function Hse(t){return typeof t!="number"?lRe(t):{top:t,right:t,bottom:t,left:t}}function vk(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function vq(t,e,n){let{reference:r,floating:i}=t;const s=Pc(e),o=ij(e),a=rj(o),l=md(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:u,y:r.y-i.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-i.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Jx(e)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const cRe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=vq(c,r,l),m=r,g={},x=0;for(let v=0;v<a.length;v++){const{name:b,fn:w}=a[v],{x:k,y:C,data:R,reset:B}=await w({x:u,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});u=k??u,h=C??h,g={...g,[b]:{...g[b],...R}},B&&x<=50&&(x++,typeof B=="object"&&(B.placement&&(m=B.placement),B.rects&&(c=B.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):B.rects),{x:u,y:h}=vq(c,m,l)),v=-1)}return{x:u,y:h,placement:m,strategy:i,middlewareData:g}};async function Hw(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=pd(e,t),x=Hse(g),b=a[m?h==="floating"?"reference":"floating":h],w=vk(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),k=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),R=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},B=vk(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:k,offsetParent:C,strategy:l}):k);return{top:(w.top-B.top+x.top)/R.y,bottom:(B.bottom-w.bottom+x.bottom)/R.y,left:(w.left-B.left+x.left)/R.x,right:(B.right-w.right+x.right)/R.x}}const uRe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=pd(t,e)||{};if(c==null)return{};const h=Hse(u),m={x:n,y:r},g=ij(i),x=rj(g),v=await o.getDimensions(c),b=g==="y",w=b?"top":"left",k=b?"bottom":"right",C=b?"clientHeight":"clientWidth",R=s.reference[x]+s.reference[g]-m[g]-s.floating[x],B=m[g]-s.reference[g],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let F=O?O[C]:0;(!F||!await(o.isElement==null?void 0:o.isElement(O)))&&(F=a.floating[C]||s.floating[x]);const H=R/2-B/2,j=F/2-v[x]/2-1,$=fh(h[w],j),W=fh(h[k],j),V=$,U=F-v[x]-W,T=F/2-v[x]/2+H,_=kM(V,T,U),L=!l.arrow&&Jx(i)!=null&&T!==_&&s.reference[x]/2-(T<V?$:W)-v[x]/2<0,z=L?T<V?T-V:T-U:0;return{[g]:m[g]+z,data:{[g]:_,centerOffset:T-_-z,...L&&{alignmentOffset:z}},reset:L}}}),dRe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...b}=pd(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const w=md(i),k=Pc(a),C=md(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),B=m||(C||!v?[xk(a)]:rRe(a)),O=x!=="none";!m&&O&&B.push(...aRe(a,v,x,R));const F=[a,...B],H=await Hw(e,b),j=[];let $=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&j.push(H[w]),h){const T=nRe(i,o,R);j.push(H[T[0]],H[T[1]])}if($=[...$,{placement:i,overflows:j}],!j.every(T=>T<=0)){var W,V;const T=(((W=s.flip)==null?void 0:W.index)||0)+1,_=F[T];if(_&&(!(h==="alignment"?k!==Pc(_):!1)||$.every(G=>Pc(G.placement)===k?G.overflows[0]>0:!0)))return{data:{index:T,overflows:$},reset:{placement:_}};let L=(V=$.filter(z=>z.overflows[0]<=0).sort((z,G)=>z.overflows[1]-G.overflows[1])[0])==null?void 0:V.placement;if(!L)switch(g){case"bestFit":{var U;const z=(U=$.filter(G=>{if(O){const te=Pc(G.placement);return te===k||te==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(te=>te>0).reduce((te,K)=>te+K,0)]).sort((G,te)=>G[1]-te[1])[0])==null?void 0:U[0];z&&(L=z);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function bq(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function wq(t){return QIe.some(e=>t[e]>=0)}const fRe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=pd(t,e);switch(r){case"referenceHidden":{const s=await Hw(e,{...i,elementContext:"reference"}),o=bq(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:wq(o)}}}case"escaped":{const s=await Hw(e,{...i,altBoundary:!0}),o=bq(s,n.floating);return{data:{escapedOffsets:o,escaped:wq(o)}}}default:return{}}}}},Vse=new Set(["left","top"]);async function hRe(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=md(n),a=Jx(n),l=Pc(n)==="y",c=Vse.has(o)?-1:1,u=s&&l?-1:1,h=pd(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof x=="number"&&(g=a==="end"?x*-1:x),l?{x:g*u,y:m*c}:{x:m*c,y:g*u}}const pRe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await hRe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},mRe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:w,y:k}=b;return{x:w,y:k}}},...l}=pd(t,e),c={x:n,y:r},u=await Hw(e,l),h=Pc(md(i)),m=nj(h);let g=c[m],x=c[h];if(s){const b=m==="y"?"top":"left",w=m==="y"?"bottom":"right",k=g+u[b],C=g-u[w];g=kM(k,g,C)}if(o){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",k=x+u[b],C=x-u[w];x=kM(k,x,C)}const v=a.fn({...e,[m]:g,[h]:x});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:s,[h]:o}}}}}},gRe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=pd(t,e),u={x:n,y:r},h=Pc(i),m=nj(h);let g=u[m],x=u[h];const v=pd(a,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const C=m==="y"?"height":"width",R=s.reference[m]-s.floating[C]+b.mainAxis,B=s.reference[m]+s.reference[C]-b.mainAxis;g<R?g=R:g>B&&(g=B)}if(c){var w,k;const C=m==="y"?"width":"height",R=Vse.has(md(i)),B=s.reference[h]-s.floating[C]+(R&&((w=o.offset)==null?void 0:w[h])||0)+(R?0:b.crossAxis),O=s.reference[h]+s.reference[C]+(R?0:((k=o.offset)==null?void 0:k[h])||0)-(R?b.crossAxis:0);x<B?x=B:x>O&&(x=O)}return{[m]:g,[h]:x}}}},yRe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=pd(t,e),u=await Hw(e,c),h=md(i),m=Jx(i),g=Pc(i)==="y",{width:x,height:v}=s.floating;let b,w;h==="top"||h==="bottom"?(b=h,w=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,b=m==="end"?"top":"bottom");const k=v-u.top-u.bottom,C=x-u.left-u.right,R=fh(v-u[b],k),B=fh(x-u[w],C),O=!e.middlewareData.shift;let F=R,H=B;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(H=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(F=k),O&&!m){const $=Qo(u.left,0),W=Qo(u.right,0),V=Qo(u.top,0),U=Qo(u.bottom,0);g?H=x-2*($!==0||W!==0?$+W:Qo(u.left,u.right)):F=v-2*(V!==0||U!==0?V+U:Qo(u.top,u.bottom))}await l({...e,availableWidth:H,availableHeight:F});const j=await o.getDimensions(a.floating);return x!==j.width||v!==j.height?{reset:{rects:!0}}:{}}}};function MC(){return typeof window<"u"}function Xx(t){return qse(t)?(t.nodeName||"").toLowerCase():"#document"}function ra(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Gc(t){var e;return(e=(qse(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function qse(t){return MC()?t instanceof Node||t instanceof ra(t).Node:!1}function zl(t){return MC()?t instanceof Element||t instanceof ra(t).Element:!1}function Uc(t){return MC()?t instanceof HTMLElement||t instanceof ra(t).HTMLElement:!1}function Eq(t){return!MC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ra(t).ShadowRoot}const xRe=new Set(["inline","contents"]);function Y1(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Hl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!xRe.has(i)}const vRe=new Set(["table","td","th"]);function bRe(t){return vRe.has(Xx(t))}const wRe=[":popover-open",":modal"];function LC(t){return wRe.some(e=>{try{return t.matches(e)}catch{return!1}})}const ERe=["transform","translate","scale","rotate","perspective"],SRe=["transform","translate","scale","rotate","perspective","filter"],ARe=["paint","layout","strict","content"];function sj(t){const e=oj(),n=zl(t)?Hl(t):t;return ERe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||SRe.some(r=>(n.willChange||"").includes(r))||ARe.some(r=>(n.contain||"").includes(r))}function TRe(t){let e=hh(t);for(;Uc(e)&&!Ex(e);){if(sj(e))return e;if(LC(e))return null;e=hh(e)}return null}function oj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const kRe=new Set(["html","body","#document"]);function Ex(t){return kRe.has(Xx(t))}function Hl(t){return ra(t).getComputedStyle(t)}function DC(t){return zl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function hh(t){if(Xx(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Eq(t)&&t.host||Gc(t);return Eq(e)?e.host:e}function Gse(t){const e=hh(t);return Ex(e)?t.ownerDocument?t.ownerDocument.body:t.body:Uc(e)&&Y1(e)?e:Gse(e)}function Vw(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Gse(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ra(i);if(s){const a=NM(o);return e.concat(o,o.visualViewport||[],Y1(i)?i:[],a&&n?Vw(a):[])}return e.concat(i,Vw(i,[],n))}function NM(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Kse(t){const e=Hl(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Uc(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=yk(n)!==s||yk(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function aj(t){return zl(t)?t:t.contextElement}function ry(t){const e=aj(t);if(!Uc(e))return Dc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=Kse(e);let o=(s?yk(n.width):n.width)/r,a=(s?yk(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const CRe=Dc(0);function Wse(t){const e=ra(t);return!oj()||!e.visualViewport?CRe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function NRe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ra(t)?!1:e}function Em(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=aj(t);let o=Dc(1);e&&(r?zl(r)&&(o=ry(r)):o=ry(t));const a=NRe(s,n,r)?Wse(s):Dc(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const m=ra(s),g=r&&zl(r)?ra(r):r;let x=m,v=NM(x);for(;v&&r&&g!==x;){const b=ry(v),w=v.getBoundingClientRect(),k=Hl(v),C=w.left+(v.clientLeft+parseFloat(k.paddingLeft))*b.x,R=w.top+(v.clientTop+parseFloat(k.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,h*=b.y,l+=C,c+=R,x=ra(v),v=NM(x)}}return vk({width:u,height:h,x:l,y:c})}function jC(t,e){const n=DC(t).scrollLeft;return e?e.left+n:Em(Gc(t)).left+n}function Yse(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-jC(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function PRe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Gc(r),a=e?LC(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Dc(1);const u=Dc(0),h=Uc(r);if((h||!h&&!s)&&((Xx(r)!=="body"||Y1(o))&&(l=DC(r)),Uc(r))){const g=Em(r);c=ry(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const m=o&&!h&&!s?Yse(o,l):Dc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:n.y*c.y-l.scrollTop*c.y+u.y+m.y}}function _Re(t){return Array.from(t.getClientRects())}function IRe(t){const e=Gc(t),n=DC(t),r=t.ownerDocument.body,i=Qo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Qo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+jC(t);const a=-n.scrollTop;return Hl(r).direction==="rtl"&&(o+=Qo(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const Sq=25;function RRe(t,e){const n=ra(t),r=Gc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=oj();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=jC(r);if(c<=0){const u=r.ownerDocument,h=u.body,m=getComputedStyle(h),g=u.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,x=Math.abs(r.clientWidth-h.clientWidth-g);x<=Sq&&(s-=x)}else c<=Sq&&(s+=c);return{width:s,height:o,x:a,y:l}}const ORe=new Set(["absolute","fixed"]);function MRe(t,e){const n=Em(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Uc(t)?ry(t):Dc(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Aq(t,e,n){let r;if(e==="viewport")r=RRe(t,n);else if(e==="document")r=IRe(Gc(t));else if(zl(e))r=MRe(e,n);else{const i=Wse(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return vk(r)}function Jse(t,e){const n=hh(t);return n===e||!zl(n)||Ex(n)?!1:Hl(n).position==="fixed"||Jse(n,e)}function LRe(t,e){const n=e.get(t);if(n)return n;let r=Vw(t,[],!1).filter(a=>zl(a)&&Xx(a)!=="body"),i=null;const s=Hl(t).position==="fixed";let o=s?hh(t):t;for(;zl(o)&&!Ex(o);){const a=Hl(o),l=sj(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&ORe.has(i.position)||Y1(o)&&!l&&Jse(t,o))?r=r.filter(u=>u!==o):i=a,o=hh(o)}return e.set(t,r),r}function DRe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?LC(e)?[]:LRe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=Aq(e,u,i);return c.top=Qo(h.top,c.top),c.right=fh(h.right,c.right),c.bottom=fh(h.bottom,c.bottom),c.left=Qo(h.left,c.left),c},Aq(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function jRe(t){const{width:e,height:n}=Kse(t);return{width:e,height:n}}function BRe(t,e,n){const r=Uc(e),i=Gc(e),s=n==="fixed",o=Em(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Dc(0);function c(){l.x=jC(i)}if(r||!r&&!s)if((Xx(e)!=="body"||Y1(i))&&(a=DC(e)),r){const g=Em(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?Yse(i,a):Dc(0),h=o.left+a.scrollLeft-l.x-u.x,m=o.top+a.scrollTop-l.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function t5(t){return Hl(t).position==="static"}function Tq(t,e){if(!Uc(t)||Hl(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Gc(t)===n&&(n=n.ownerDocument.body),n}function Xse(t,e){const n=ra(t);if(LC(t))return n;if(!Uc(t)){let i=hh(t);for(;i&&!Ex(i);){if(zl(i)&&!t5(i))return i;i=hh(i)}return n}let r=Tq(t,e);for(;r&&bRe(r)&&t5(r);)r=Tq(r,e);return r&&Ex(r)&&t5(r)&&!sj(r)?n:r||TRe(t)||n}const URe=async function(t){const e=this.getOffsetParent||Xse,n=this.getDimensions,r=await n(t.floating);return{reference:BRe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function FRe(t){return Hl(t).direction==="rtl"}const $Re={convertOffsetParentRelativeRectToViewportRelativeRect:PRe,getDocumentElement:Gc,getClippingRect:DRe,getOffsetParent:Xse,getElementRects:URe,getClientRects:_Re,getDimensions:jRe,getScale:ry,isElement:zl,isRTL:FRe};function Qse(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function zRe(t,e){let n=null,r;const i=Gc(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:h,width:m,height:g}=c;if(a||e(),!m||!g)return;const x=pA(h),v=pA(i.clientWidth-(u+m)),b=pA(i.clientHeight-(h+g)),w=pA(u),C={rootMargin:-x+"px "+-v+"px "+-b+"px "+-w+"px",threshold:Qo(0,fh(1,l))||1};let R=!0;function B(O){const F=O[0].intersectionRatio;if(F!==l){if(!R)return o();F?o(!1,F):r=setTimeout(()=>{o(!1,1e-7)},1e3)}F===1&&!Qse(c,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(B,{...C,root:i.ownerDocument})}catch{n=new IntersectionObserver(B,C)}n.observe(t)}return o(!0),s}function HRe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=aj(t),u=i||s?[...c?Vw(c):[],...Vw(e)]:[];u.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const h=c&&a?zRe(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(w=>{let[k]=w;k&&k.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var C;(C=g)==null||C.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let x,v=l?Em(t):null;l&&b();function b(){const w=Em(t);v&&!Qse(v,w)&&n(),v=w,x=requestAnimationFrame(b)}return n(),()=>{var w;u.forEach(k=>{i&&k.removeEventListener("scroll",n),s&&k.removeEventListener("resize",n)}),h==null||h(),(w=g)==null||w.disconnect(),g=null,l&&cancelAnimationFrame(x)}}const VRe=pRe,qRe=mRe,GRe=dRe,KRe=yRe,WRe=fRe,kq=uRe,YRe=gRe,JRe=(t,e,n)=>{const r=new Map,i={platform:$Re,...n},s={...i.platform,_c:r};return cRe(t,e,{...i,platform:s})};var XRe=typeof document<"u",QRe=function(){},CT=XRe?A.useLayoutEffect:QRe;function bk(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!bk(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!bk(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Zse(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Cq(t,e){const n=Zse(t);return Math.round(e*n)/n}function n5(t){const e=A.useRef(t);return CT(()=>{e.current=t}),e}function ZRe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=A.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=A.useState(r);bk(m,r)||g(r);const[x,v]=A.useState(null),[b,w]=A.useState(null),k=A.useCallback(G=>{G!==O.current&&(O.current=G,v(G))},[]),C=A.useCallback(G=>{G!==F.current&&(F.current=G,w(G))},[]),R=s||x,B=o||b,O=A.useRef(null),F=A.useRef(null),H=A.useRef(u),j=l!=null,$=n5(l),W=n5(i),V=n5(c),U=A.useCallback(()=>{if(!O.current||!F.current)return;const G={placement:e,strategy:n,middleware:m};W.current&&(G.platform=W.current),JRe(O.current,F.current,G).then(te=>{const K={...te,isPositioned:V.current!==!1};T.current&&!bk(H.current,K)&&(H.current=K,zm.flushSync(()=>{h(K)}))})},[m,e,n,W,V]);CT(()=>{c===!1&&H.current.isPositioned&&(H.current.isPositioned=!1,h(G=>({...G,isPositioned:!1})))},[c]);const T=A.useRef(!1);CT(()=>(T.current=!0,()=>{T.current=!1}),[]),CT(()=>{if(R&&(O.current=R),B&&(F.current=B),R&&B){if($.current)return $.current(R,B,U);U()}},[R,B,U,$,j]);const _=A.useMemo(()=>({reference:O,floating:F,setReference:k,setFloating:C}),[k,C]),L=A.useMemo(()=>({reference:R,floating:B}),[R,B]),z=A.useMemo(()=>{const G={position:n,left:0,top:0};if(!L.floating)return G;const te=Cq(L.floating,u.x),K=Cq(L.floating,u.y);return a?{...G,transform:"translate("+te+"px, "+K+"px)",...Zse(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:K}},[n,a,L.floating,u.x,u.y]);return A.useMemo(()=>({...u,update:U,refs:_,elements:L,floatingStyles:z}),[u,U,_,L,z])}const e5e=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?kq({element:r.current,padding:i}).fn(n):{}:r?kq({element:r,padding:i}).fn(n):{}}}},t5e=(t,e)=>({...VRe(t),options:[t,e]}),n5e=(t,e)=>({...qRe(t),options:[t,e]}),r5e=(t,e)=>({...YRe(t),options:[t,e]}),i5e=(t,e)=>({...GRe(t),options:[t,e]}),s5e=(t,e)=>({...KRe(t),options:[t,e]}),o5e=(t,e)=>({...WRe(t),options:[t,e]}),a5e=(t,e)=>({...e5e(t),options:[t,e]});var l5e="Arrow",eoe=A.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return d.jsx(Mn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});eoe.displayName=l5e;var c5e=eoe;function u5e(t){const[e,n]=A.useState(void 0);return js(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var lj="Popper",[toe,BC]=$m(lj),[d5e,noe]=toe(lj),roe=t=>{const{__scopePopper:e,children:n}=t,[r,i]=A.useState(null);return d.jsx(d5e,{scope:e,anchor:r,onAnchorChange:i,children:n})};roe.displayName=lj;var ioe="PopperAnchor",soe=A.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=noe(ioe,n),o=A.useRef(null),a=Nr(e,o),l=A.useRef(null);return A.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&s.onAnchorChange(l.current)}),r?null:d.jsx(Mn.div,{...i,ref:a})});soe.displayName=ioe;var cj="PopperContent",[f5e,h5e]=toe(cj),ooe=A.forwardRef((t,e)=>{var ae,Te,ue,pe,be,se;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:x,...v}=t,b=noe(cj,n),[w,k]=A.useState(null),C=Nr(e,ve=>k(ve)),[R,B]=A.useState(null),O=u5e(R),F=(O==null?void 0:O.width)??0,H=(O==null?void 0:O.height)??0,j=r+(s!=="center"?"-"+s:""),$=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},W=Array.isArray(c)?c:[c],V=W.length>0,U={padding:$,boundary:W.filter(m5e),altBoundary:V},{refs:T,floatingStyles:_,placement:L,isPositioned:z,middlewareData:G}=ZRe({strategy:"fixed",placement:j,whileElementsMounted:(...ve)=>HRe(...ve,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[t5e({mainAxis:i+H,alignmentAxis:o}),l&&n5e({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?r5e():void 0,...U}),l&&i5e({...U}),s5e({...U,apply:({elements:ve,rects:Re,availableWidth:De,availableHeight:Qe})=>{const{width:it,height:et}=Re.reference,tt=ve.floating.style;tt.setProperty("--radix-popper-available-width",`${De}px`),tt.setProperty("--radix-popper-available-height",`${Qe}px`),tt.setProperty("--radix-popper-anchor-width",`${it}px`),tt.setProperty("--radix-popper-anchor-height",`${et}px`)}}),R&&a5e({element:R,padding:a}),g5e({arrowWidth:F,arrowHeight:H}),m&&o5e({strategy:"referenceHidden",...U})]}),[te,K]=coe(L),q=dh(x);js(()=>{z&&(q==null||q())},[z,q]);const M=(ae=G.arrow)==null?void 0:ae.x,P=(Te=G.arrow)==null?void 0:Te.y,Y=((ue=G.arrow)==null?void 0:ue.centerOffset)!==0,[X,re]=A.useState();return js(()=>{w&&re(window.getComputedStyle(w).zIndex)},[w]),d.jsx("div",{ref:T.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:z?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(pe=G.transformOrigin)==null?void 0:pe.x,(be=G.transformOrigin)==null?void 0:be.y].join(" "),...((se=G.hide)==null?void 0:se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(f5e,{scope:n,placedSide:te,onArrowChange:B,arrowX:M,arrowY:P,shouldHideArrow:Y,children:d.jsx(Mn.div,{"data-side":te,"data-align":K,...v,ref:C,style:{...v.style,animation:z?void 0:"none"}})})})});ooe.displayName=cj;var aoe="PopperArrow",p5e={top:"bottom",right:"left",bottom:"top",left:"right"},loe=A.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=h5e(aoe,r),o=p5e[s.placedSide];return d.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:d.jsx(c5e,{...i,ref:n,style:{...i.style,display:"block"}})})});loe.displayName=aoe;function m5e(t){return t!==null}var g5e=t=>({name:"transformOrigin",options:t,fn(e){var b,w,k;const{placement:n,rects:r,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=coe(n),h={start:"0%",center:"50%",end:"100%"}[u],m=(((w=i.arrow)==null?void 0:w.x)??0)+a/2,g=(((k=i.arrow)==null?void 0:k.y)??0)+l/2;let x="",v="";return c==="bottom"?(x=o?h:`${m}px`,v=`${-l}px`):c==="top"?(x=o?h:`${m}px`,v=`${r.floating.height+l}px`):c==="right"?(x=`${-l}px`,v=o?h:`${g}px`):c==="left"&&(x=`${r.floating.width+l}px`,v=o?h:`${g}px`),{data:{x,y:v}}}});function coe(t){const[e,n="center"]=t.split("-");return[e,n]}var y5e=roe,uoe=soe,doe=ooe,foe=loe,x5e="Portal",UC=A.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=A.useState(!1);js(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?OIe.createPortal(d.jsx(Mn.div,{...r,ref:e}),o):null});UC.displayName=x5e;function v5e(t,e){return A.useReducer((n,r)=>e[n][r]??n,t)}var Hm=t=>{const{present:e,children:n}=t,r=b5e(e),i=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),s=Nr(r.ref,w5e(i));return typeof n=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};Hm.displayName="Presence";function b5e(t){const[e,n]=A.useState(),r=A.useRef(null),i=A.useRef(t),s=A.useRef("none"),o=t?"mounted":"unmounted",[a,l]=v5e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const c=mA(r.current);s.current=a==="mounted"?c:"none"},[a]),js(()=>{const c=r.current,u=i.current;if(u!==t){const m=s.current,g=mA(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),js(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=g=>{const v=mA(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&v&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(s.current=mA(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function mA(t){return(t==null?void 0:t.animationName)||"none"}function w5e(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var E5e=Symbol("radix.slottable");function S5e(t){const e=({children:n})=>d.jsx(d.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=E5e,e}var A5e=iC[" useInsertionEffect ".trim().toString()]||js;function qw({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=T5e({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const u=A.useRef(t!==void 0);A.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=A.useCallback(u=>{var h;if(a){const m=k5e(u)?u(t):u;m!==t&&((h=o.current)==null||h.call(o,m))}else s(u)},[a,t,s,o]);return[l,c]}function T5e({defaultProp:t,onChange:e}){const[n,r]=A.useState(t),i=A.useRef(n),s=A.useRef(e);return A5e(()=>{s.current=e},[e]),A.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function k5e(t){return typeof t=="function"}var hoe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),C5e="VisuallyHidden",poe=A.forwardRef((t,e)=>d.jsx(Mn.span,{...t,ref:e,style:{...hoe,...t.style}}));poe.displayName=C5e;var N5e=poe,[FC]=$m("Tooltip",[BC]),uj=BC(),moe="TooltipProvider",P5e=700,Nq="tooltip.open",[_5e,goe]=FC(moe),yoe=t=>{const{__scopeTooltip:e,delayDuration:n=P5e,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=A.useRef(!0),a=A.useRef(!1),l=A.useRef(0);return A.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),d.jsx(_5e,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:A.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:A.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:A.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};yoe.displayName=moe;var xoe="Tooltip",[S0t,J1]=FC(xoe),PM="TooltipTrigger",I5e=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=J1(PM,n),s=goe(PM,n),o=uj(n),a=A.useRef(null),l=Nr(e,a,i.onTriggerChange),c=A.useRef(!1),u=A.useRef(!1),h=A.useCallback(()=>c.current=!1,[]);return A.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),d.jsx(uoe,{asChild:!0,...o,children:d.jsx(Mn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:pn(t.onPointerMove,m=>{m.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:pn(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:pn(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:pn(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:pn(t.onBlur,i.onClose),onClick:pn(t.onClick,i.onClose)})})});I5e.displayName=PM;var dj="TooltipPortal",[R5e,O5e]=FC(dj,{forceMount:void 0}),voe=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=J1(dj,e);return d.jsx(R5e,{scope:e,forceMount:n,children:d.jsx(Hm,{present:n||s.open,children:d.jsx(UC,{asChild:!0,container:i,children:r})})})};voe.displayName=dj;var Sx="TooltipContent",boe=A.forwardRef((t,e)=>{const n=O5e(Sx,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=J1(Sx,t.__scopeTooltip);return d.jsx(Hm,{present:r||o.open,children:o.disableHoverableContent?d.jsx(woe,{side:i,...s,ref:e}):d.jsx(M5e,{side:i,...s,ref:e})})}),M5e=A.forwardRef((t,e)=>{const n=J1(Sx,t.__scopeTooltip),r=goe(Sx,t.__scopeTooltip),i=A.useRef(null),s=Nr(e,i),[o,a]=A.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:h}=r,m=A.useCallback(()=>{a(null),h(!1)},[h]),g=A.useCallback((x,v)=>{const b=x.currentTarget,w={x:x.clientX,y:x.clientY},k=U5e(w,b.getBoundingClientRect()),C=F5e(w,k),R=$5e(v.getBoundingClientRect()),B=H5e([...C,...R]);a(B),h(!0)},[h]);return A.useEffect(()=>()=>m(),[m]),A.useEffect(()=>{if(l&&u){const x=b=>g(b,u),v=b=>g(b,l);return l.addEventListener("pointerleave",x),u.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",v)}}},[l,u,g,m]),A.useEffect(()=>{if(o){const x=v=>{const b=v.target,w={x:v.clientX,y:v.clientY},k=(l==null?void 0:l.contains(b))||(u==null?void 0:u.contains(b)),C=!z5e(w,o);k?m():C&&(m(),c())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,u,o,c,m]),d.jsx(woe,{...t,ref:s})}),[L5e,D5e]=FC(xoe,{isInside:!1}),j5e=S5e("TooltipContent"),woe=A.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=J1(Sx,n),c=uj(n),{onClose:u}=l;return A.useEffect(()=>(document.addEventListener(Nq,u),()=>document.removeEventListener(Nq,u)),[u]),A.useEffect(()=>{if(l.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),d.jsx(OC,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:d.jsxs(doe,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[d.jsx(j5e,{children:r}),d.jsx(L5e,{scope:n,isInside:!0,children:d.jsx(N5e,{id:l.contentId,role:"tooltip",children:i||r})})]})})});boe.displayName=Sx;var Eoe="TooltipArrow",B5e=A.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=uj(n);return D5e(Eoe,n).isInside?null:d.jsx(foe,{...i,...r,ref:e})});B5e.displayName=Eoe;function U5e(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function F5e(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function $5e(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function z5e(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,h=l.x,m=l.y;u>r!=m>r&&n<(h-c)*(r-u)/(m-u)+c&&(i=!i)}return i}function H5e(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),V5e(e)}function V5e(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var q5e=yoe,G5e=voe,Soe=boe;function Aoe(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Aoe(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Rn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Aoe(t))&&(r&&(r+=" "),r+=e);return r}const K5e=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},W5e=(t,e)=>({classGroupId:t,validator:e}),Toe=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),wk="-",Pq=[],Y5e="arbitrary..",J5e=t=>{const e=Q5e(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return X5e(o);const a=o.split(wk),l=a[0]===""&&a.length>1?1:0;return koe(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],c=n[o];return l?c?K5e(c,l):l:c||Pq}return n[o]||Pq}}},koe=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const c=koe(t,e+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=e===0?t.join(wk):t.slice(e).join(wk),l=o.length;for(let c=0;c<l;c++){const u=o[c];if(u.validator(a))return u.classGroupId}},X5e=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?Y5e+r:void 0})(),Q5e=t=>{const{theme:e,classGroups:n}=t;return Z5e(n,e)},Z5e=(t,e)=>{const n=Toe();for(const r in t){const i=t[r];fj(i,n,r,e)}return n},fj=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const o=t[s];eOe(o,e,n,r)}},eOe=(t,e,n,r)=>{if(typeof t=="string"){tOe(t,e,n);return}if(typeof t=="function"){nOe(t,e,n,r);return}rOe(t,e,n,r)},tOe=(t,e,n)=>{const r=t===""?e:Coe(e,t);r.classGroupId=n},nOe=(t,e,n,r)=>{if(iOe(t)){fj(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(W5e(n,t))},rOe=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];fj(l,Coe(e,a),n,r)}},Coe=(t,e)=>{let n=t;const r=e.split(wk),i=r.length;for(let s=0;s<i;s++){const o=r[s];let a=n.nextPart.get(o);a||(a=Toe(),n.nextPart.set(o,a)),n=a}return n},iOe=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,sOe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,o)=>{n[s]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=r[s])!==void 0)return i(s,o),o},set(s,o){s in n?n[s]=o:i(s,o)}}},_M="!",_q=":",oOe=[],Iq=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),aOe=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;const u=i.length;for(let v=0;v<u;v++){const b=i[v];if(o===0&&a===0){if(b===_q){s.push(i.slice(l,v)),l=v+1;continue}if(b==="/"){c=v;continue}}b==="["?o++:b==="]"?o--:b==="("?a++:b===")"&&a--}const h=s.length===0?i:i.slice(l);let m=h,g=!1;h.endsWith(_M)?(m=h.slice(0,-1),g=!0):h.startsWith(_M)&&(m=h.slice(1),g=!0);const x=c&&c>l?c-l:void 0;return Iq(s,g,m,x)};if(e){const i=e+_q,s=r;r=o=>o.startsWith(i)?s(o.slice(i.length)):Iq(oOe,!1,o,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},lOe=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=e.has(o);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},cOe=t=>({cache:sOe(t.cacheSize),parseClassName:aOe(t),sortModifiers:lOe(t),...J5e(t)}),uOe=/\s+/,dOe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(uOe);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:v}=n(u);if(h){l=u+(l.length>0?" "+l:l);continue}let b=!!v,w=r(b?x.substring(0,v):x);if(!w){if(!b){l=u+(l.length>0?" "+l:l);continue}if(w=r(x),!w){l=u+(l.length>0?" "+l:l);continue}b=!1}const k=m.length===0?"":m.length===1?m[0]:s(m).join(":"),C=g?k+_M:k,R=C+w;if(o.indexOf(R)>-1)continue;o.push(R);const B=i(w,b);for(let O=0;O<B.length;++O){const F=B[O];o.push(C+F)}l=u+(l.length>0?" "+l:l)}return l},fOe=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=Noe(n))&&(i&&(i+=" "),i+=r);return i},Noe=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Noe(t[r]))&&(n&&(n+=" "),n+=e);return n},hOe=(t,...e)=>{let n,r,i,s;const o=l=>{const c=e.reduce((u,h)=>h(u),t());return n=cOe(c),r=n.cache.get,i=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const u=dOe(l,n);return i(l,u),u};return s=o,(...l)=>s(fOe(...l))},pOe=[],bi=t=>{const e=n=>n[t]||pOe;return e.isThemeGetter=!0,e},Poe=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,_oe=/^\((?:(\w[\w-]*):)?(.+)\)$/i,mOe=/^\d+\/\d+$/,gOe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yOe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xOe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,vOe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bOe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Q0=t=>mOe.test(t),gn=t=>!!t&&!Number.isNaN(Number(t)),mf=t=>!!t&&Number.isInteger(Number(t)),r5=t=>t.endsWith("%")&&gn(t.slice(0,-1)),xu=t=>gOe.test(t),wOe=()=>!0,EOe=t=>yOe.test(t)&&!xOe.test(t),Ioe=()=>!1,SOe=t=>vOe.test(t),AOe=t=>bOe.test(t),TOe=t=>!_t(t)&&!It(t),kOe=t=>Qx(t,Moe,Ioe),_t=t=>Poe.test(t),ep=t=>Qx(t,Loe,EOe),i5=t=>Qx(t,IOe,gn),Rq=t=>Qx(t,Roe,Ioe),COe=t=>Qx(t,Ooe,AOe),gA=t=>Qx(t,Doe,SOe),It=t=>_oe.test(t),wb=t=>Zx(t,Loe),NOe=t=>Zx(t,ROe),Oq=t=>Zx(t,Roe),POe=t=>Zx(t,Moe),_Oe=t=>Zx(t,Ooe),yA=t=>Zx(t,Doe,!0),Qx=(t,e,n)=>{const r=Poe.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Zx=(t,e,n=!1)=>{const r=_oe.exec(t);return r?r[1]?e(r[1]):n:!1},Roe=t=>t==="position"||t==="percentage",Ooe=t=>t==="image"||t==="url",Moe=t=>t==="length"||t==="size"||t==="bg-size",Loe=t=>t==="length",IOe=t=>t==="number",ROe=t=>t==="family-name",Doe=t=>t==="shadow",OOe=()=>{const t=bi("color"),e=bi("font"),n=bi("text"),r=bi("font-weight"),i=bi("tracking"),s=bi("leading"),o=bi("breakpoint"),a=bi("container"),l=bi("spacing"),c=bi("radius"),u=bi("shadow"),h=bi("inset-shadow"),m=bi("text-shadow"),g=bi("drop-shadow"),x=bi("blur"),v=bi("perspective"),b=bi("aspect"),w=bi("ease"),k=bi("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],B=()=>[...R(),It,_t],O=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],H=()=>[It,_t,l],j=()=>[Q0,"full","auto",...H()],$=()=>[mf,"none","subgrid",It,_t],W=()=>["auto",{span:["full",mf,It,_t]},mf,It,_t],V=()=>[mf,"auto",It,_t],U=()=>["auto","min","max","fr",It,_t],T=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...H()],z=()=>[Q0,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],G=()=>[t,It,_t],te=()=>[...R(),Oq,Rq,{position:[It,_t]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",POe,kOe,{size:[It,_t]}],M=()=>[r5,wb,ep],P=()=>["","none","full",c,It,_t],Y=()=>["",gn,wb,ep],X=()=>["solid","dashed","dotted","double"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ae=()=>[gn,r5,Oq,Rq],Te=()=>["","none",x,It,_t],ue=()=>["none",gn,It,_t],pe=()=>["none",gn,It,_t],be=()=>[gn,It,_t],se=()=>[Q0,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xu],breakpoint:[xu],color:[wOe],container:[xu],"drop-shadow":[xu],ease:["in","out","in-out"],font:[TOe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xu],shadow:[xu],spacing:["px",gn],text:[xu],"text-shadow":[xu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Q0,_t,It,b]}],container:["container"],columns:[{columns:[gn,_t,It,a]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:B()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[mf,"auto",It,_t]}],basis:[{basis:[Q0,"full","auto",a,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gn,Q0,"auto","initial","none",_t]}],grow:[{grow:["",gn,It,_t]}],shrink:[{shrink:["",gn,It,_t]}],order:[{order:[mf,"first","last","none",It,_t]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:W()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:W()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":U()}],"auto-rows":[{"auto-rows":U()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...T(),"normal"]}],"justify-items":[{"justify-items":[..._(),"normal"]}],"justify-self":[{"justify-self":["auto",..._()]}],"align-content":[{content:["normal",...T()]}],"align-items":[{items:[..._(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._(),{baseline:["","last"]}]}],"place-content":[{"place-content":T()}],"place-items":[{"place-items":[..._(),"baseline"]}],"place-self":[{"place-self":["auto",..._()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[a,"screen",...z()]}],"min-w":[{"min-w":[a,"screen","none",...z()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",n,wb,ep]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,It,i5]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",r5,_t]}],"font-family":[{font:[NOe,_t,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,It,_t]}],"line-clamp":[{"line-clamp":[gn,"none",It,i5]}],leading:[{leading:[s,...H()]}],"list-image":[{"list-image":["none",It,_t]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",It,_t]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[gn,"from-font","auto",It,ep]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[gn,"auto",It,_t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",It,_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",It,_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},mf,It,_t],radial:["",It,_t],conic:[mf,It,_t]},_Oe,COe]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gn,It,_t]}],"outline-w":[{outline:["",gn,wb,ep]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",u,yA,gA]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",h,yA,gA]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[gn,ep]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",m,yA,gA]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[gn,It,_t]}],"mix-blend":[{"mix-blend":[...re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gn]}],"mask-image-linear-from-pos":[{"mask-linear-from":ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":ae()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":ae()}],"mask-image-t-to-pos":[{"mask-t-to":ae()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":ae()}],"mask-image-r-to-pos":[{"mask-r-to":ae()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":ae()}],"mask-image-b-to-pos":[{"mask-b-to":ae()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":ae()}],"mask-image-l-to-pos":[{"mask-l-to":ae()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":ae()}],"mask-image-x-to-pos":[{"mask-x-to":ae()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":ae()}],"mask-image-y-to-pos":[{"mask-y-to":ae()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[It,_t]}],"mask-image-radial-from-pos":[{"mask-radial-from":ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":ae()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[gn]}],"mask-image-conic-from-pos":[{"mask-conic-from":ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":ae()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",It,_t]}],filter:[{filter:["","none",It,_t]}],blur:[{blur:Te()}],brightness:[{brightness:[gn,It,_t]}],contrast:[{contrast:[gn,It,_t]}],"drop-shadow":[{"drop-shadow":["","none",g,yA,gA]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",gn,It,_t]}],"hue-rotate":[{"hue-rotate":[gn,It,_t]}],invert:[{invert:["",gn,It,_t]}],saturate:[{saturate:[gn,It,_t]}],sepia:[{sepia:["",gn,It,_t]}],"backdrop-filter":[{"backdrop-filter":["","none",It,_t]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[gn,It,_t]}],"backdrop-contrast":[{"backdrop-contrast":[gn,It,_t]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gn,It,_t]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gn,It,_t]}],"backdrop-invert":[{"backdrop-invert":["",gn,It,_t]}],"backdrop-opacity":[{"backdrop-opacity":[gn,It,_t]}],"backdrop-saturate":[{"backdrop-saturate":[gn,It,_t]}],"backdrop-sepia":[{"backdrop-sepia":["",gn,It,_t]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",It,_t]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gn,"initial",It,_t]}],ease:[{ease:["linear","initial",w,It,_t]}],delay:[{delay:[gn,It,_t]}],animate:[{animate:["none",k,It,_t]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,It,_t]}],"perspective-origin":[{"perspective-origin":B()}],rotate:[{rotate:ue()}],"rotate-x":[{"rotate-x":ue()}],"rotate-y":[{"rotate-y":ue()}],"rotate-z":[{"rotate-z":ue()}],scale:[{scale:pe()}],"scale-x":[{"scale-x":pe()}],"scale-y":[{"scale-y":pe()}],"scale-z":[{"scale-z":pe()}],"scale-3d":["scale-3d"],skew:[{skew:be()}],"skew-x":[{"skew-x":be()}],"skew-y":[{"skew-y":be()}],transform:[{transform:[It,_t,"","none","gpu","cpu"]}],"transform-origin":[{origin:B()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",It,_t]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",It,_t]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[gn,wb,ep,i5]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},MOe=hOe(OOe);function qt(...t){return MOe(Rn(t))}const LOe=q5e,DOe=A.forwardRef(({className:t,sideOffset:e=4,...n},r)=>d.jsx(G5e,{children:d.jsx(Soe,{ref:r,sideOffset:e,className:qt("z-50 overflow-hidden rounded-md bg-slate-800 border border-slate-700 px-3 py-1.5 text-xs text-slate-200 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));DOe.displayName=Soe.displayName;const tp=({icon:t,label:e,isActive:n,onClick:r,isSubItem:i=!1})=>d.jsxs("button",{onClick:r,className:qt("w-full flex items-center gap-3 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",i?"px-3 py-2 pl-6":"px-3 py-2.5",n?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:e,children:[n&&d.jsx("div",{className:qt("absolute top-1/2 -translate-y-1/2 w-1 rounded-full bg-[#E7FE55]",i?"left-0 h-4":"left-0 h-6")}),d.jsx("span",{className:qt("flex items-center justify-center transition-colors",!i&&"ml-1",n&&"text-[#E7FE55]"),children:t}),d.jsx("span",{className:"tracking-wide",children:e})]}),jOe=({icon:t,label:e,isExpanded:n,onToggle:r,hasActiveChild:i,children:s})=>d.jsxs("div",{className:"space-y-0.5",children:[d.jsxs("button",{onClick:r,className:qt("w-full flex items-center justify-between px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",i?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40"),title:e,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[i&&d.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-[#E7FE55] rounded-full"}),d.jsx("span",{className:qt("flex items-center justify-center transition-colors ml-1",i&&"text-[#E7FE55]"),children:t}),d.jsx("span",{className:"tracking-wide",children:e})]}),d.jsx(Bt.span,{initial:!1,animate:{rotate:n?180:0},transition:{duration:.2},className:"text-[#5a5b63]",children:d.jsx(aa,{size:14})})]}),d.jsx(Zs,{initial:!1,children:n&&d.jsx(Bt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:d.jsx("div",{className:"relative ml-1 pl-2 border-l border-[#2a2b30]",children:s})})})]}),Mq=({status:t,label:e,latency:n,network:r})=>{const i=t==="Down",s=t==="Checking",o=i?"#ef4444":s?"#747580":"#E7FE55";return d.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[d.jsx("span",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:e}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("span",{className:"text-[9px] font-mono text-[#5a5b63]",children:i?"DOWN":s?"...":n}),d.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:o}})]})]})},BOe=({activeTab:t,setActiveTab:e,isVaultUnlocked:n,onSelectConversation:r,onNewChat:i,currentConversationId:s,password:o,isOpen:a=!1,onClose:l})=>{const[c,u]=A.useState("Checking"),h=[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t),m=[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t),g=[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t),x=h||m||g,[v,b]=A.useState(x),w=t===we.AGENT;A.useEffect(()=>{x&&b(!0)},[x]),A.useEffect(()=>{const C=async()=>{const B=await zt.checkHealth();u(B?"Online":"Down")};C();const R=setInterval(C,3e4);return()=>clearInterval(R)},[]);const k=C=>{e(C),l&&l()};return d.jsxs(LOe,{delayDuration:300,children:[d.jsx(Zs,{children:a&&d.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-40 xl:hidden",onClick:l})}),d.jsxs("aside",{className:qt("m-3 p-5 flex flex-col fixed h-[calc(100%-24px)] bg-[#0f1015]/95 backdrop-blur-xl z-50 w-60 transform transition-transform duration-300 ease-in-out","rounded-2xl border border-[#232328]/60 shadow-2xl shadow-black/20",a?"translate-x-0":"-translate-x-full","xl:translate-x-0"),children:[d.jsxs("div",{className:"mb-8 flex items-center gap-3 px-2",children:[d.jsx("div",{className:"w-8 h-8 flex-shrink-0 bg-[#E7FE55] rounded flex items-center justify-center",children:d.jsx(ld,{className:"text-black w-5 h-5"})}),d.jsx("h1",{className:"text-[15px] font-semibold text-white tracking-tight hidden xl:block",children:"AutonomousVault"})]}),d.jsxs("nav",{className:"space-y-1 flex-1",children:[d.jsx(tp,{icon:d.jsx(eo,{size:18}),label:"Dashboard",isActive:t===we.DASHBOARD,onClick:()=>k(we.DASHBOARD)}),d.jsx(tp,{icon:d.jsx(Rg,{size:18}),label:"Vault Operator",isActive:w,onClick:()=>k(we.AGENT)}),d.jsxs(jOe,{icon:d.jsx(wTe,{size:18}),label:"Vault Dealer",isExpanded:v,onToggle:()=>b(!v),hasActiveChild:x,children:[d.jsx(tp,{icon:d.jsx(To,{size:16}),label:"Hyperliquid",isActive:h,onClick:()=>k(we.VAULT_DEALER),isSubItem:!0}),d.jsx(tp,{icon:d.jsx(O3,{size:16}),label:"Solana",isActive:g,onClick:()=>k(we.SOLANA_DEALER),isSubItem:!0}),d.jsx(tp,{icon:d.jsx(_n,{size:16}),label:"Polymarket",isActive:m,onClick:()=>k(we.POLYMARKET_DEALER),isSubItem:!0})]}),d.jsx(tp,{icon:d.jsx(tke,{size:18}),label:"Vault",isActive:t===we.VAULT,onClick:()=>k(we.VAULT)}),d.jsx(tp,{icon:d.jsx(g8,{size:18}),label:"Token Costs",isActive:t===we.TOKEN_COSTS,onClick:()=>k(we.TOKEN_COSTS)})]}),d.jsxs("div",{className:"pt-6 border-t border-[#232328]",children:[d.jsx("div",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-3 px-2",children:"Network Status"}),d.jsxs("div",{className:"space-y-2 px-2",children:[d.jsx(Mq,{status:"Online",label:"Solana Devnet",latency:"18m",network:"solana"}),d.jsx(Mq,{status:c,label:"Hyperliquid Testnet",latency:"450ms",network:"hyperliquid"})]})]})]})]})};var UOe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function hj(t){if(typeof t!="string")return!1;var e=UOe;return e.includes(t)}var FOe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$Oe=new Set(FOe);function joe(t){return typeof t!="string"?!1:$Oe.has(t)}function Boe(t){return typeof t=="string"&&t.startsWith("data-")}function ro(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(joe(n)||Boe(n))&&(e[n]=t[n]);return e}function Sm(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return ro(e)}return typeof t=="object"&&!Array.isArray(t)?ro(t):null}function Bs(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(joe(n)||Boe(n)||hj(n))&&(e[n]=t[n]);return e}function zOe(t){return t==null?null:A.isValidElement(t)?Bs(t.props):typeof t=="object"&&!Array.isArray(t)?Bs(t):null}var HOe=["children","width","height","viewBox","className","style","title","desc"];function IM(){return IM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IM.apply(null,arguments)}function VOe(t,e){if(t==null)return{};var n,r,i=qOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Uoe=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:a,title:l,desc:c}=t,u=VOe(t,HOe),h=s||{width:r,height:i,x:0,y:0},m=Rn("recharts-surface",o);return A.createElement("svg",IM({},Bs(u),{className:m,width:r,height:i,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,l),A.createElement("desc",null,c),n)}),GOe=["children","className"];function RM(){return RM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RM.apply(null,arguments)}function KOe(t,e){if(t==null)return{};var n,r,i=WOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function WOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Wr=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=KOe(t,GOe),s=Rn("recharts-layer",r);return A.createElement("g",RM({className:s},Bs(i),{ref:e}),n)}),YOe=A.createContext(null);function pr(t){return function(){return t}}const Foe=Math.cos,Ek=Math.sin,Wl=Math.sqrt,Sk=Math.PI,$C=2*Sk,OM=Math.PI,MM=2*OM,cp=1e-6,JOe=MM-cp;function $oe(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function XOe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return $oe;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class QOe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?$oe:XOe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,u=o-e,h=a-n,m=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>cp)if(!(Math.abs(h*l-c*u)>cp)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,x=i-a,v=l*l+c*c,b=g*g+x*x,w=Math.sqrt(v),k=Math.sqrt(m),C=s*Math.tan((OM-Math.acos((v+m-b)/(2*w*k)))/2),R=C/k,B=C/w;Math.abs(R-1)>cp&&this._append`L${e+R*u},${n+R*h}`,this._append`A${s},${s},0,0,${+(h*g>u*x)},${this._x1=e+B*l},${this._y1=n+B*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,h=1^o,m=o?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>cp||Math.abs(this._y1-u)>cp)&&this._append`L${c},${u}`,r&&(m<0&&(m=m%MM+MM),m>JOe?this._append`A${r},${r},0,1,${h},${e-a},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:m>cp&&this._append`A${r},${r},0,${+(m>=OM)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function pj(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new QOe(e)}function mj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zoe(t){this._context=t}zoe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function zC(t){return new zoe(t)}function Hoe(t){return t[0]}function Voe(t){return t[1]}function qoe(t,e){var n=pr(!0),r=null,i=zC,s=null,o=pj(a);t=typeof t=="function"?t:t===void 0?Hoe:pr(t),e=typeof e=="function"?e:e===void 0?Voe:pr(e);function a(l){var c,u=(l=mj(l)).length,h,m=!1,g;for(r==null&&(s=i(g=o())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(h,c,l),+e(h,c,l));if(g)return s=null,g+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:pr(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:pr(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:pr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function xA(t,e,n){var r=null,i=pr(!0),s=null,o=zC,a=null,l=pj(c);t=typeof t=="function"?t:t===void 0?Hoe:pr(+t),e=typeof e=="function"?e:pr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Voe:pr(+n);function c(h){var m,g,x,v=(h=mj(h)).length,b,w=!1,k,C=new Array(v),R=new Array(v);for(s==null&&(a=o(k=l())),m=0;m<=v;++m){if(!(m<v&&i(b=h[m],m,h))===w)if(w=!w)g=m,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),x=m-1;x>=g;--x)a.point(C[x],R[x]);a.lineEnd(),a.areaEnd()}w&&(C[m]=+t(b,m,h),R[m]=+e(b,m,h),a.point(r?+r(b,m,h):C[m],n?+n(b,m,h):R[m]))}if(k)return a=null,k+""||null}function u(){return qoe().defined(i).curve(o).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:pr(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:pr(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:pr(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:pr(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:pr(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:pr(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:pr(!!h),c):i},c.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),c):o},c.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),c):s},c}class Goe{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function ZOe(t){return new Goe(t,!0)}function e4e(t){return new Goe(t,!1)}const gj={draw(t,e){const n=Wl(e/Sk);t.moveTo(n,0),t.arc(0,0,n,0,$C)}},t4e={draw(t,e){const n=Wl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Koe=Wl(1/3),n4e=Koe*2,r4e={draw(t,e){const n=Wl(e/n4e),r=n*Koe;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},i4e={draw(t,e){const n=Wl(e),r=-n/2;t.rect(r,r,n,n)}},s4e=.8908130915292852,Woe=Ek(Sk/10)/Ek(7*Sk/10),o4e=Ek($C/10)*Woe,a4e=-Foe($C/10)*Woe,l4e={draw(t,e){const n=Wl(e*s4e),r=o4e*n,i=a4e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=$C*s/5,a=Foe(o),l=Ek(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},s5=Wl(3),c4e={draw(t,e){const n=-Wl(e/(s5*3));t.moveTo(0,n*2),t.lineTo(-s5*n,-n),t.lineTo(s5*n,-n),t.closePath()}},Ta=-.5,ka=Wl(3)/2,LM=1/Wl(12),u4e=(LM/2+1)*3,d4e={draw(t,e){const n=Wl(e/u4e),r=n/2,i=n*LM,s=r,o=n*LM+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Ta*r-ka*i,ka*r+Ta*i),t.lineTo(Ta*s-ka*o,ka*s+Ta*o),t.lineTo(Ta*a-ka*l,ka*a+Ta*l),t.lineTo(Ta*r+ka*i,Ta*i-ka*r),t.lineTo(Ta*s+ka*o,Ta*o-ka*s),t.lineTo(Ta*a+ka*l,Ta*l-ka*a),t.closePath()}};function f4e(t,e){let n=null,r=pj(i);t=typeof t=="function"?t:pr(t||gj),e=typeof e=="function"?e:pr(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:pr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:pr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Ak(){}function Tk(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Yoe(t){this._context=t}Yoe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tk(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function h4e(t){return new Yoe(t)}function Joe(t){this._context=t}Joe.prototype={areaStart:Ak,areaEnd:Ak,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Tk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function p4e(t){return new Joe(t)}function Xoe(t){this._context=t}Xoe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Tk(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function m4e(t){return new Xoe(t)}function Qoe(t){this._context=t}Qoe.prototype={areaStart:Ak,areaEnd:Ak,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function g4e(t){return new Qoe(t)}function Lq(t){return t<0?-1:1}function Dq(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Lq(s)+Lq(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function jq(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function o5(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function kk(t){this._context=t}kk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o5(this,this._t0,jq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,o5(this,jq(this,n=Dq(this,t,e)),n);break;default:o5(this,this._t0,n=Dq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Zoe(t){this._context=new eae(t)}(Zoe.prototype=Object.create(kk.prototype)).point=function(t,e){kk.prototype.point.call(this,e,t)};function eae(t){this._context=t}eae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function y4e(t){return new kk(t)}function x4e(t){return new Zoe(t)}function tae(t){this._context=t}tae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Bq(t),i=Bq(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Bq(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function v4e(t){return new tae(t)}function HC(t,e){this._context=t,this._t=e}HC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function b4e(t){return new HC(t,.5)}function w4e(t){return new HC(t,0)}function E4e(t){return new HC(t,1)}function Am(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function DM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function S4e(t,e){return t[e]}function A4e(t){const e=[];return e.key=t,e}function T4e(){var t=pr([]),e=DM,n=Am,r=S4e;function i(s){var o=Array.from(t.apply(this,arguments),A4e),a,l=o.length,c=-1,u;for(const h of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(h,o[a].key,c,s)]).data=h;for(a=0,u=mj(e(o));a<l;++a)o[u[a]].index=a;return n(o,u),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:pr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:pr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?DM:typeof s=="function"?s:pr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Am,i):n},i}function k4e(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Am(t,e)}}function C4e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Am(t,e)}}function N4e(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],h=u[r][1]||0,m=u[r-1][1]||0,g=(h-m)/2,x=0;x<a;++x){var v=t[e[x]],b=v[r][1]||0,w=v[r-1][1]||0;g+=b-w}l+=h,c+=g*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Am(t,e)}}var a5={},l5={},Uq;function P4e(){return Uq||(Uq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(l5)),l5}var c5={},Fq;function nae(){return Fq||(Fq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(c5)),c5}var u5={},$q;function yj(){return $q||($q=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(u5)),u5}var d5={},f5={},zq;function _4e(){return zq||(zq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(f5)),f5}var Hq;function xj(){return Hq||(Hq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_4e(),n=yj();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let a=0,l="",c="",u=!1;for(i.charCodeAt(0)===46&&(s.push(""),a++);a<o;){const h=i[a];c?h==="\\"&&a+1<o?(a++,l+=i[a]):h===c?c="":l+=h:u?h==='"'||h==="'"?c=h:h==="]"?(u=!1,s.push(l),l=""):l+=h:h==="["?(u=!0,l&&(s.push(l),l="")):h==="."?l&&(s.push(l),l=""):l+=h,a++}return l&&s.push(l),s}t.toPath=r})(d5)),d5}var Vq;function vj(){return Vq||(Vq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=P4e(),n=nae(),r=yj(),i=xj();function s(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?n.isDeepKey(l)?s(a,i.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=a[l];return u===void 0?c:u}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=a[l];return u===void 0?c:u}}}function o(a,l,c){if(l.length===0)return c;let u=a;for(let h=0;h<l.length;h++){if(u==null||e.isUnsafeProperty(l[h]))return c;u=u[l[h]]}return u===void 0?c:u}t.get=s})(a5)),a5}var h5,qq;function I4e(){return qq||(qq=1,h5=vj().get),h5}var R4e=I4e();const Tm=hs(R4e);var O4e=4;function Qf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O4e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Vr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,s,o)=>{var a=n[o-1];return typeof a=="string"?i+a+s:a!==void 0?i+Qf(a)+s:i+s},"")}var $i=t=>t===0?0:t>0?1:-1,Qa=t=>typeof t=="number"&&t!=+t,gd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,At=t=>(typeof t=="number"||t instanceof Number)&&!Qa(t),Fc=t=>At(t)||typeof t=="string",M4e=0,Gw=t=>{var e=++M4e;return"".concat(t||"").concat(e)},Ds=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!At(e)&&typeof e!="string")return r;var s;if(gd(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return Qa(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},rae=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function qn(t,e,n){return At(t)&&At(e)?Qf(t+n*(e-t)):e}function iae(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Tm(r,e))===n)}var Sr=t=>t===null||typeof t>"u",X1=t=>Sr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function L4e(t){return t!=null}function Q1(){}var D4e=["type","size","sizeType"];function jM(){return jM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jM.apply(null,arguments)}function Gq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gq(Object(n),!0).forEach(function(r){j4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j4e(t,e,n){return(e=B4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B4e(t){var e=U4e(t,"string");return typeof e=="symbol"?e:e+""}function U4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F4e(t,e){if(t==null)return{};var n,r,i=$4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sae={symbolCircle:gj,symbolCross:t4e,symbolDiamond:r4e,symbolSquare:i4e,symbolStar:l4e,symbolTriangle:c4e,symbolWye:d4e},z4e=Math.PI/180,H4e=t=>{var e="symbol".concat(X1(t));return sae[e]||gj},V4e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*z4e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},q4e=(t,e)=>{sae["symbol".concat(X1(t))]=e},oae=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=F4e(t,D4e),s=Kq(Kq({},i),{},{type:e,size:n,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var a=()=>{var m=H4e(o),g=f4e().type(m).size(V4e(n,r,o)),x=g();if(x!==null)return x},{className:l,cx:c,cy:u}=s,h=Bs(s);return At(c)&&At(u)&&At(n)?A.createElement("path",jM({},h,{className:Rn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:a()})):null};oae.registerSymbol=q4e;var aae=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,bj=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{hj(i)&&(r[i]=(s=>n[i](n,s)))}),r},G4e=(t,e,n)=>r=>(t(e,n,r),null),VC=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];hj(i)&&typeof s=="function"&&(r||(r={}),r[i]=G4e(s,e,n))}),r};function Wq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K4e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wq(Object(n),!0).forEach(function(r){W4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W4e(t,e,n){return(e=Y4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y4e(t){var e=J4e(t,"string");return typeof e=="symbol"?e:e+""}function J4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xi(t,e){var n=K4e({},t),r=e,i=Object.keys(e),s=i.reduce((o,a)=>(o[a]===void 0&&r[a]!==void 0&&(o[a]=r[a]),o),n);return s}var p5={},m5={},Yq;function X4e(){return Yq||(Yq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],a=r(o);i.has(a)||i.set(a,o)}return Array.from(i.values())}t.uniqBy=e})(m5)),m5}var g5={},Jq;function lae(){return Jq||(Jq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(g5)),g5}var y5={},x5={},v5={},Xq;function Q4e(){return Xq||(Xq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(v5)),v5}var Qq;function wj(){return Qq||(Qq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q4e();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(x5)),x5}var b5={},Zq;function Z4e(){return Zq||(Zq=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(b5)),b5}var eG;function e3e(){return eG||(eG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wj(),n=Z4e();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(y5)),y5}var w5={},E5={},tG;function t3e(){return tG||(tG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vj();function n(r){return function(i){return e.get(i,r)}}t.property=n})(E5)),E5}var S5={},A5={},T5={},k5={},nG;function cae(){return nG||(nG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(k5)),k5}var C5={},rG;function uae(){return rG||(rG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(C5)),C5}var N5={},iG;function dae(){return iG||(iG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(N5)),N5}var sG;function n3e(){return sG||(sG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cae(),n=uae(),r=dae();function i(u,h,m){return typeof m!="function"?i(u,h,()=>{}):s(u,h,function g(x,v,b,w,k,C){const R=m(x,v,b,w,k,C);return R!==void 0?!!R:s(x,v,g,C)},new Map)}function s(u,h,m,g){if(h===u)return!0;switch(typeof h){case"object":return o(u,h,m,g);case"function":return Object.keys(h).length>0?s(u,{...h},m,g):r.eq(u,h);default:return e.isObject(u)?typeof h=="string"?h==="":!0:r.eq(u,h)}}function o(u,h,m,g){if(h==null)return!0;if(Array.isArray(h))return l(u,h,m,g);if(h instanceof Map)return a(u,h,m,g);if(h instanceof Set)return c(u,h,m,g);const x=Object.keys(h);if(u==null||n.isPrimitive(u))return x.length===0;if(x.length===0)return!0;if(g!=null&&g.has(h))return g.get(h)===u;g==null||g.set(h,u);try{for(let v=0;v<x.length;v++){const b=x[v];if(!n.isPrimitive(u)&&!(b in u)||h[b]===void 0&&u[b]!==void 0||h[b]===null&&u[b]!==null||!m(u[b],h[b],b,u,h,g))return!1}return!0}finally{g==null||g.delete(h)}}function a(u,h,m,g){if(h.size===0)return!0;if(!(u instanceof Map))return!1;for(const[x,v]of h.entries()){const b=u.get(x);if(m(b,v,x,u,h,g)===!1)return!1}return!0}function l(u,h,m,g){if(h.length===0)return!0;if(!Array.isArray(u))return!1;const x=new Set;for(let v=0;v<h.length;v++){const b=h[v];let w=!1;for(let k=0;k<u.length;k++){if(x.has(k))continue;const C=u[k];let R=!1;if(m(C,b,v,u,h,g)&&(R=!0),R){x.add(k),w=!0;break}}if(!w)return!1}return!0}function c(u,h,m,g){return h.size===0?!0:u instanceof Set?l([...u],[...h],m,g):!1}t.isMatchWith=i,t.isSetMatch=c})(T5)),T5}var oG;function fae(){return oG||(oG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=n3e();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(A5)),A5}var P5={},_5={},I5={},aG;function r3e(){return aG||(aG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(I5)),I5}var R5={},lG;function hae(){return lG||(lG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(R5)),R5}var O5={},cG;function pae(){return cG||(cG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",h="[object Function]",m="[object ArrayBuffer]",g="[object Object]",x="[object Error]",v="[object DataView]",b="[object Uint8Array]",w="[object Uint8ClampedArray]",k="[object Uint16Array]",C="[object Uint32Array]",R="[object BigUint64Array]",B="[object Int8Array]",O="[object Int16Array]",F="[object Int32Array]",H="[object BigInt64Array]",j="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=m,t.arrayTag=u,t.bigInt64ArrayTag=H,t.bigUint64ArrayTag=R,t.booleanTag=i,t.dataViewTag=v,t.dateTag=a,t.errorTag=x,t.float32ArrayTag=j,t.float64ArrayTag=$,t.functionTag=h,t.int16ArrayTag=O,t.int32ArrayTag=F,t.int8ArrayTag=B,t.mapTag=l,t.numberTag=r,t.objectTag=g,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=k,t.uint32ArrayTag=C,t.uint8ArrayTag=b,t.uint8ClampedArrayTag=w})(O5)),O5}var M5={},uG;function i3e(){return uG||(uG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(M5)),M5}var dG;function mae(){return dG||(dG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r3e(),n=hae(),r=pae(),i=uae(),s=i3e();function o(u,h){return a(u,void 0,u,new Map,h)}function a(u,h,m,g=new Map,x=void 0){const v=x==null?void 0:x(u,h,m,g);if(v!==void 0)return v;if(i.isPrimitive(u))return u;if(g.has(u))return g.get(u);if(Array.isArray(u)){const b=new Array(u.length);g.set(u,b);for(let w=0;w<u.length;w++)b[w]=a(u[w],w,m,g,x);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;g.set(u,b);for(const[w,k]of u)b.set(w,a(k,w,m,g,x));return b}if(u instanceof Set){const b=new Set;g.set(u,b);for(const w of u)b.add(a(w,void 0,m,g,x));return b}if(typeof on<"u"&&on.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);g.set(u,b);for(let w=0;w<u.length;w++)b[w]=a(u[w],w,m,g,x);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return g.set(u,b),l(b,u,m,g,x),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return g.set(u,b),l(b,u,m,g,x),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return g.set(u,b),l(b,u,m,g,x),b}if(u instanceof Error){const b=new u.constructor;return g.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,l(b,u,m,g,x),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return g.set(u,b),l(b,u,m,g,x),b}if(u instanceof Number){const b=new Number(u.valueOf());return g.set(u,b),l(b,u,m,g,x),b}if(u instanceof String){const b=new String(u.valueOf());return g.set(u,b),l(b,u,m,g,x),b}if(typeof u=="object"&&c(u)){const b=Object.create(Object.getPrototypeOf(u));return g.set(u,b),l(b,u,m,g,x),b}return u}function l(u,h,m=u,g,x){const v=[...Object.keys(h),...e.getSymbols(h)];for(let b=0;b<v.length;b++){const w=v[b],k=Object.getOwnPropertyDescriptor(u,w);(k==null||k.writable)&&(u[w]=a(h[w],w,m,g,x))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=a,t.copyProperties=l})(_5)),_5}var fG;function s3e(){return fG||(fG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mae();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(P5)),P5}var hG;function o3e(){return hG||(hG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fae(),n=s3e();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(S5)),S5}var L5={},D5={},j5={},pG;function a3e(){return pG||(pG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mae(),n=pae();function r(i,s){return e.cloneDeepWith(i,(o,a,l,c)=>{const u=s==null?void 0:s(o,a,l,c);if(u!==void 0)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(j5)),j5}var mG;function l3e(){return mG||(mG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=a3e();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(D5)),D5}var B5={},U5={},gG;function gae(){return gG||(gG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(U5)),U5}var F5={},yG;function c3e(){return yG||(yG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hae();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(F5)),F5}var xG;function u3e(){return xG||(xG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nae(),n=gae(),r=c3e(),i=xj();function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&e.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=i.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let u=0;u<l.length;u++){const h=l[u];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}t.has=s})(B5)),B5}var vG;function d3e(){return vG||(vG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fae(),n=yj(),r=l3e(),i=vj(),s=u3e();function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return l=r.cloneDeep(l),function(c){const u=i.get(c,a);return u===void 0?s.has(c,a):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=o})(L5)),L5}var bG;function f3e(){return bG||(bG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lae(),n=t3e(),r=o3e(),i=d3e();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(w5)),w5}var wG;function h3e(){return wG||(wG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X4e(),n=lae(),r=e3e(),i=f3e();function s(o,a=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(a)):[]}t.uniqBy=s})(p5)),p5}var $5,EG;function p3e(){return EG||(EG=1,$5=h3e().uniqBy),$5}var m3e=p3e();const SG=hs(m3e);function g3e(t,e,n){return e===!0?SG(t,n):typeof e=="function"?SG(t,e):t}var z5={exports:{}},H5={},V5={exports:{}},q5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AG;function y3e(){if(AG)return q5;AG=1;var t=jx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,m){var g=m(),x=r({inst:{value:g,getSnapshot:m}}),v=x[0].inst,b=x[1];return s(function(){v.value=g,v.getSnapshot=m,l(v)&&b({inst:v})},[h,g,m]),i(function(){return l(v)&&b({inst:v}),h(function(){l(v)&&b({inst:v})})},[h]),o(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!n(h,g)}catch{return!0}}function c(h,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return q5.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,q5}var TG;function x3e(){return TG||(TG=1,V5.exports=y3e()),V5.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kG;function v3e(){if(kG)return H5;kG=1;var t=jx(),e=x3e();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return H5.useSyncExternalStoreWithSelector=function(c,u,h,m,g){var x=s(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=a(function(){function w(O){if(!k){if(k=!0,C=O,O=m(O),g!==void 0&&v.hasValue){var F=v.value;if(g(F,O))return R=F}return R=O}if(F=R,r(C,O))return F;var H=m(O);return g!==void 0&&g(F,H)?(C=O,F):(C=O,R=H)}var k=!1,C,R,B=h===void 0?null:h;return[function(){return w(u())},B===null?void 0:function(){return w(B())}]},[u,h,m,g]);var b=i(c,x[0],x[1]);return o(function(){v.hasValue=!0,v.value=b},[b]),l(b),b},H5}var CG;function b3e(){return CG||(CG=1,z5.exports=v3e()),z5.exports}var w3e=b3e(),Ej=A.createContext(null),E3e=t=>t,Pr=()=>{var t=A.useContext(Ej);return t?t.store.dispatch:E3e},NT=()=>{},S3e=()=>NT,A3e=(t,e)=>t===e;function Rt(t){var e=A.useContext(Ej);return w3e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:S3e,e?e.store.getState:NT,e?e.store.getState:NT,e?t:NT,A3e)}function T3e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function k3e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function C3e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var NG=t=>Array.isArray(t)?t:[t];function N3e(t){const e=Array.isArray(t[0])?t[0]:t;return C3e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function P3e(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var _3e=class{constructor(t){this.value=t}deref(){return this.value}},I3e=typeof WeakRef<"u"?WeakRef:_3e,R3e=0,PG=1;function vA(){return{s:R3e,v:void 0,o:null,p:null}}function yae(t,e={}){let n=vA();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var h;let a=n;const{length:l}=arguments;for(let m=0,g=l;m<g;m++){const x=arguments[m];if(typeof x=="function"||typeof x=="object"&&x!==null){let v=a.o;v===null&&(a.o=v=new WeakMap);const b=v.get(x);b===void 0?(a=vA(),v.set(x,a)):a=b}else{let v=a.p;v===null&&(a.p=v=new Map);const b=v.get(x);b===void 0?(a=vA(),v.set(x,a)):a=b}}const c=a;let u;if(a.s===PG)u=a.v;else if(u=t.apply(null,arguments),s++,r){const m=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;m!=null&&r(m,u)&&(u=m,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new I3e(u):u}return c.s=PG,c.v=u,u}return o.clearCache=()=>{n=vA(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function O3e(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),T3e(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:h,memoizeOptions:m=[],argsMemoize:g=yae,argsMemoizeOptions:x=[]}=u,v=NG(m),b=NG(x),w=N3e(i),k=h(function(){return s++,c.apply(null,arguments)},...v),C=g(function(){o++;const B=P3e(w,arguments);return a=k.apply(null,B),a},...b);return Object.assign(C,{resultFunc:c,memoizedResultFunc:k,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var Le=O3e(yae),M3e=Object.assign((t,e=Le)=>{k3e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>M3e}),G5={},K5={},W5={},_G;function L3e(){return _G||(_G=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),a=e(i);if(o===a&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};t.compareValues=n})(W5)),W5}var Y5={},J5={},IG;function xae(){return IG||(IG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(J5)),J5}var RG;function D3e(){return RG||(RG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xae(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(Y5)),Y5}var OG;function j3e(){return OG||(OG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=L3e(),n=D3e(),r=xj();function i(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(g=>String(g));const c=(g,x)=>{let v=g;for(let b=0;b<x.length&&v!=null;++b)v=v[x[b]];return v},u=(g,x)=>x==null||g==null?x:typeof g=="object"&&"key"in g?Object.hasOwn(x,g.key)?x[g.key]:c(x,g.path):typeof g=="function"?g(x):Array.isArray(g)?c(x,g):typeof x=="object"?x[g]:x,h=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return s.map(g=>({original:g,criteria:h.map(x=>u(x,g))})).slice().sort((g,x)=>{for(let v=0;v<h.length;v++){const b=e.compareValues(g.criteria[v],x.criteria[v],a[v]);if(b!==0)return b}return 0}).map(g=>g.original)}t.orderBy=i})(K5)),K5}var X5={},MG;function B3e(){return MG||(MG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(a,l)=>{for(let c=0;c<a.length;c++){const u=a[c];Array.isArray(u)&&l<s?o(u,l+1):i.push(u)}};return o(n,0),i}t.flatten=e})(X5)),X5}var Q5={},LG;function vae(){return LG||(LG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gae(),n=wj(),r=cae(),i=dae();function s(o,a,l){return r.isObject(l)&&(typeof a=="number"&&n.isArrayLike(l)&&e.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?i.eq(l[a],o):!1}t.isIterateeCall=s})(Q5)),Q5}var DG;function U3e(){return DG||(DG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=j3e(),n=B3e(),r=vae();function i(s,...o){const a=o.length;return a>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(G5)),G5}var Z5,jG;function F3e(){return jG||(jG=1,Z5=U3e().sortBy),Z5}var $3e=F3e();const qC=hs($3e);var bae=t=>t.legend.settings,z3e=t=>t.legend.size,H3e=t=>t.legend.payload;Le([H3e,bae],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?qC(r,n):r});var bA=1;function V3e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>bA||Math.abs(o.left-e.left)>bA||Math.abs(o.top-e.top)>bA||Math.abs(o.width-e.width)>bA)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ts(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var q3e=typeof Symbol=="function"&&Symbol.observable||"@@observable",BG=q3e,eO=()=>Math.random().toString(36).substring(7).split("").join("."),G3e={INIT:`@@redux/INIT${eO()}`,REPLACE:`@@redux/REPLACE${eO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${eO()}`},Ck=G3e;function Sj(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function wae(t,e,n){if(typeof t!="function")throw new Error(ts(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ts(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ts(1));return n(wae)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((b,w)=>{o.set(w,b)}))}function u(){if(l)throw new Error(ts(3));return i}function h(b){if(typeof b!="function")throw new Error(ts(4));if(l)throw new Error(ts(5));let w=!0;c();const k=a++;return o.set(k,b),function(){if(w){if(l)throw new Error(ts(6));w=!1,c(),o.delete(k),s=null}}}function m(b){if(!Sj(b))throw new Error(ts(7));if(typeof b.type>"u")throw new Error(ts(8));if(typeof b.type!="string")throw new Error(ts(17));if(l)throw new Error(ts(9));try{l=!0,i=r(i,b)}finally{l=!1}return(s=o).forEach(k=>{k()}),b}function g(b){if(typeof b!="function")throw new Error(ts(10));r=b,m({type:Ck.REPLACE})}function x(){const b=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(ts(11));function k(){const R=w;R.next&&R.next(u())}return k(),{unsubscribe:b(k)}},[BG](){return this}}}return m({type:Ck.INIT}),{dispatch:m,subscribe:h,getState:u,replaceReducer:g,[BG]:x}}function K3e(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Ck.INIT})>"u")throw new Error(ts(12));if(typeof n(void 0,{type:Ck.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ts(13))})}function Eae(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{K3e(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const h=r[u],m=n[h],g=o[h],x=m(g,a);if(typeof x>"u")throw a&&a.type,new Error(ts(14));c[h]=x,l=l||x!==g}return l=l||r.length!==Object.keys(o).length,l?c:o}}function Nk(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function W3e(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(ts(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=Nk(...a)(i.dispatch),{...i,dispatch:s}}}function Sae(t){return Sj(t)&&"type"in t&&typeof t.type=="string"}var Aae=Symbol.for("immer-nothing"),UG=Symbol.for("immer-draftable"),io=Symbol.for("immer-state");function Pl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var na=Object,Ax=na.getPrototypeOf,Pk="constructor",GC="prototype",BM="configurable",_k="enumerable",PT="writable",Kw="value",yd=t=>!!t&&!!t[io];function Vl(t){var e;return t?Tae(t)||KC(t)||!!t[UG]||!!((e=t[Pk])!=null&&e[UG])||WC(t)||YC(t):!1}var Y3e=na[GC][Pk].toString(),FG=new WeakMap;function Tae(t){if(!t||!Aj(t))return!1;const e=Ax(t);if(e===null||e===na[GC])return!0;const n=na.hasOwnProperty.call(e,Pk)&&e[Pk];if(n===Object)return!0;if(!wg(n))return!1;let r=FG.get(n);return r===void 0&&(r=Function.toString.call(n),FG.set(n,r)),r===Y3e}function Z1(t,e,n=!0){eE(t)===0?(n?Reflect.ownKeys(t):na.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function eE(t){const e=t[io];return e?e.type_:KC(t)?1:WC(t)?2:YC(t)?3:0}var $G=(t,e,n=eE(t))=>n===2?t.has(e):na[GC].hasOwnProperty.call(t,e),UM=(t,e,n=eE(t))=>n===2?t.get(e):t[e],Ik=(t,e,n,r=eE(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function J3e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var KC=Array.isArray,WC=t=>t instanceof Map,YC=t=>t instanceof Set,Aj=t=>typeof t=="object",wg=t=>typeof t=="function",tO=t=>typeof t=="boolean";function X3e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var _u=t=>t.copy_||t.base_,Tj=t=>t.modified_?t.copy_:t.base_;function FM(t,e){if(WC(t))return new Map(t);if(YC(t))return new Set(t);if(KC(t))return Array[GC].slice.call(t);const n=Tae(t);if(e===!0||e==="class_only"&&!n){const r=na.getOwnPropertyDescriptors(t);delete r[io];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a[PT]===!1&&(a[PT]=!0,a[BM]=!0),(a.get||a.set)&&(r[o]={[BM]:!0,[PT]:!0,[_k]:a[_k],[Kw]:t[o]})}return na.create(Ax(t),r)}else{const r=Ax(t);if(r!==null&&n)return{...t};const i=na.create(r);return na.assign(i,t)}}function kj(t,e=!1){return JC(t)||yd(t)||!Vl(t)||(eE(t)>1&&na.defineProperties(t,{set:wA,add:wA,clear:wA,delete:wA}),na.freeze(t),e&&Z1(t,(n,r)=>{kj(r,!0)},!1)),t}function Q3e(){Pl(2)}var wA={[Kw]:Q3e};function JC(t){return t===null||!Aj(t)?!0:na.isFrozen(t)}var Rk="MapSet",$M="Patches",zG="ArrayMethods",kae={};function km(t){const e=kae[t];return e||Pl(0,t),e}var HG=t=>!!kae[t],Ww,Cae=()=>Ww,Z3e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:HG(Rk)?km(Rk):void 0,arrayMethodsPlugin_:HG(zG)?km(zG):void 0});function VG(t,e){e&&(t.patchPlugin_=km($M),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function zM(t){HM(t),t.drafts_.forEach(eMe),t.drafts_=null}function HM(t){t===Ww&&(Ww=t.parent_)}var qG=t=>Ww=Z3e(Ww,t);function eMe(t){const e=t[io];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function GG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[io].modified_&&(zM(e),Pl(4)),Vl(t)&&(t=KG(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[io].base_,t,e)}else t=KG(e,n);return tMe(e,t,!0),zM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Aae?t:void 0}function KG(t,e){if(JC(e))return e;const n=e[io];if(!n)return Cj(e,t.handledSet_,t);if(!XC(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);_ae(n,t)}return n.copy_}function tMe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&kj(e,n)}function Nae(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var XC=(t,e)=>t.scope_===e,nMe=[];function Pae(t,e,n,r){const i=_u(t),s=t.type_;if(r!==void 0&&UM(i,r,s)===e){Ik(i,r,n,s);return}if(!t.draftLocations_){const a=t.draftLocations_=new Map;Z1(i,(l,c)=>{if(yd(c)){const u=a.get(c)||[];u.push(l),a.set(c,u)}})}const o=t.draftLocations_.get(e)??nMe;for(const a of o)Ik(i,a,n,s)}function rMe(t,e,n){t.callbacks_.push(function(i){var a;const s=e;if(!s||!XC(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const o=Tj(s);Pae(t,s.draft_??s,o,n),_ae(s,i)})}function _ae(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}Nae(t)}}function iMe(t,e,n){const{scope_:r}=t;if(yd(n)){const i=n[io];XC(i,r)&&i.callbacks_.push(function(){_T(t);const o=Tj(i);Pae(t,n,o,e)})}else Vl(n)&&t.callbacks_.push(function(){const s=_u(t);UM(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Cj(UM(t.copy_,e,t.type_),r.handledSet_,r)})}function Cj(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||yd(t)||e.has(t)||!Vl(t)||JC(t)||(e.add(t),Z1(t,(r,i)=>{if(yd(i)){const s=i[io];if(XC(s,n)){const o=Tj(s);Ik(t,r,o,t.type_),Nae(s)}}else Vl(i)&&Cj(i,e,n)})),t}function sMe(t,e){const n=KC(t),r={type_:n?1:0,scope_:e?e.scope_:Cae(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=Nj;n&&(i=[r],s=Yw);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,[a,r]}var Nj={get(t,e){if(e===io)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=_u(t);if(!$G(i,e,t.type_))return oMe(t,i,e);const s=i[e];if(t.finalized_||!Vl(s)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&X3e(e))return s;if(s===nO(t.base_,e)){_T(t);const o=t.type_===1?+e:e,a=qM(t.scope_,s,t,o);return t.copy_[o]=a}return s},has(t,e){return e in _u(t)},ownKeys(t){return Reflect.ownKeys(_u(t))},set(t,e,n){const r=Iae(_u(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=nO(_u(t),e),s=i==null?void 0:i[io];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(J3e(n,i)&&(n!==void 0||$G(t.base_,e,t.type_)))return!0;_T(t),VM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),iMe(t,e,n)),!0},deleteProperty(t,e){return _T(t),nO(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),VM(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=_u(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[PT]:!0,[BM]:t.type_!==1||e!=="length",[_k]:r[_k],[Kw]:n[e]}},defineProperty(){Pl(11)},getPrototypeOf(t){return Ax(t.base_)},setPrototypeOf(){Pl(12)}},Yw={};Z1(Nj,(t,e)=>{Yw[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});Yw.deleteProperty=function(t,e){return Yw.set.call(this,t,e,void 0)};Yw.set=function(t,e,n){return Nj.set.call(this,t[0],e,n,t[0])};function nO(t,e){const n=t[io];return(n?_u(n):t)[e]}function oMe(t,e,n){var i;const r=Iae(e,n);return r?Kw in r?r[Kw]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Iae(t,e){if(!(e in t))return;let n=Ax(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ax(n)}}function VM(t){t.modified_||(t.modified_=!0,t.parent_&&VM(t.parent_))}function _T(t){t.copy_||(t.assigned_=new Map,t.copy_=FM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var aMe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(wg(n)&&!wg(r)){const o=r;r=n;const a=this;return function(c=o,...u){return a.produce(c,h=>r.call(this,h,...u))}}wg(r)||Pl(6),i!==void 0&&!wg(i)&&Pl(7);let s;if(Vl(n)){const o=qG(this),a=qM(o,n,void 0);let l=!0;try{s=r(a),l=!1}finally{l?zM(o):HM(o)}return VG(o,i),GG(s,o)}else if(!n||!Aj(n)){if(s=r(n),s===void 0&&(s=n),s===Aae&&(s=void 0),this.autoFreeze_&&kj(s,!0),i){const o=[],a=[];km($M).generateReplacementPatches_(n,s,{patches_:o,inversePatches_:a}),i(o,a)}return s}else Pl(1,n)},this.produceWithPatches=(n,r)=>{if(wg(n))return(a,...l)=>this.produceWithPatches(a,c=>n(c,...l));let i,s;return[this.produce(n,r,(a,l)=>{i=a,s=l}),i,s]},tO(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),tO(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),tO(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Vl(e)||Pl(8),yd(e)&&(e=Ll(e));const n=qG(this),r=qM(n,e,void 0);return r[io].isManual_=!0,HM(n),r}finishDraft(e,n){const r=e&&e[io];(!r||!r.isManual_)&&Pl(9);const{scope_:i}=r;return VG(i,n),GG(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=km($M).applyPatches_;return yd(e)?i(e,n):this.produce(e,s=>i(s,n))}};function qM(t,e,n,r){const[i,s]=WC(e)?km(Rk).proxyMap_(e,n):YC(e)?km(Rk).proxySet_(e,n):sMe(e,n);return((n==null?void 0:n.scope_)??Cae()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?rMe(n,s,r):s.callbacks_.push(function(l){var u;(u=l.mapSetPlugin_)==null||u.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function Ll(t){return yd(t)||Pl(10,t),Rae(t)}function Rae(t){if(!Vl(t)||JC(t))return t;const e=t[io];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=FM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=FM(t,!0);return Z1(n,(i,s)=>{Ik(n,i,Rae(s))},r),e&&(e.finalized_=!1),n}var lMe=new aMe,Oae=lMe.produce;function Mae(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var cMe=Mae(),uMe=Mae,dMe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Nk:Nk.apply(null,arguments)};function Za(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ia(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>Sae(r)&&r.type===t,n}var Lae=class Yb extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Yb.prototype)}static get[Symbol.species](){return Yb}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Yb(...e[0].concat(this)):new Yb(...e.concat(this))}};function WG(t){return Vl(t)?Oae(t,()=>{}):t}function EA(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function fMe(t){return typeof t=="boolean"}var hMe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new Lae;return n&&(fMe(n)?o.push(cMe):o.push(uMe(n.extraArgument))),o},Dae="RTK_autoBatch",Tr=()=>t=>({payload:t,meta:{[Dae]:!0}}),YG=t=>e=>{setTimeout(e,t)},jae=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:YG(10):t.type==="callback"?t.queueNotification:YG(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const h=()=>i&&u(),m=r.subscribe(h);return a.add(u),()=>{m(),a.delete(u)}},dispatch(u){var h;try{return i=!((h=u==null?void 0:u.meta)!=null&&h[Dae]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},pMe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new Lae(t);return r&&i.push(jae(typeof r=="object"?r:void 0)),i};function mMe(t){const e=hMe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(Sj(n))a=Eae(n);else throw new Error(ia(1));let l;typeof r=="function"?l=r(e):l=e();let c=Nk;i&&(c=dMe({trace:!1,...typeof i=="object"&&i}));const u=W3e(...l),h=pMe(u);let m=typeof o=="function"?o(h):h();const g=c(...m);return wae(a,s,g)}function Bae(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(ia(28));if(a in e)throw new Error(ia(29));return e[a]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function gMe(t){return typeof t=="function"}function yMe(t,e){let[n,r,i]=Bae(e),s;if(gMe(t))s=()=>WG(t());else{const a=WG(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,h)=>{if(h)if(yd(u)){const g=h(u,l);return g===void 0?u:g}else{if(Vl(u))return Oae(u,m=>h(m,l));{const m=h(u,l);if(m===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return u},a)}return o.getInitialState=s,o}var xMe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vMe=(t=21)=>{let e="",n=t;for(;n--;)e+=xMe[Math.random()*64|0];return e},bMe=Symbol.for("rtk-slice-createasyncthunk");function wMe(t,e){return`${t}/${e}`}function EMe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[bMe];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(ia(11));const a=(typeof i.reducers=="function"?i.reducers(AMe()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(R,B){const O=typeof R=="string"?R:R.type;if(!O)throw new Error(ia(12));if(O in c.sliceCaseReducersByType)throw new Error(ia(13));return c.sliceCaseReducersByType[O]=B,u},addMatcher(R,B){return c.sliceMatchers.push({matcher:R,reducer:B}),u},exposeAction(R,B){return c.actionCreators[R]=B,u},exposeCaseReducer(R,B){return c.sliceCaseReducersByName[R]=B,u}};l.forEach(R=>{const B=a[R],O={reducerName:R,type:wMe(s,R),createNotation:typeof i.reducers=="function"};kMe(B)?NMe(O,B,u,e):TMe(O,B,u)});function h(){const[R={},B=[],O=void 0]=typeof i.extraReducers=="function"?Bae(i.extraReducers):[i.extraReducers],F={...R,...c.sliceCaseReducersByType};return yMe(i.initialState,H=>{for(let j in F)H.addCase(j,F[j]);for(let j of c.sliceMatchers)H.addMatcher(j.matcher,j.reducer);for(let j of B)H.addMatcher(j.matcher,j.reducer);O&&H.addDefaultCase(O)})}const m=R=>R,g=new Map,x=new WeakMap;let v;function b(R,B){return v||(v=h()),v(R,B)}function w(){return v||(v=h()),v.getInitialState()}function k(R,B=!1){function O(H){let j=H[R];return typeof j>"u"&&B&&(j=EA(x,O,w)),j}function F(H=m){const j=EA(g,B,()=>new WeakMap);return EA(j,H,()=>{const $={};for(const[W,V]of Object.entries(i.selectors??{}))$[W]=SMe(V,H,()=>EA(x,H,w),B);return $})}return{reducerPath:R,getSelectors:F,get selectors(){return F(O)},selectSlice:O}}const C={name:s,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...k(o),injectInto(R,{reducerPath:B,...O}={}){const F=B??o;return R.inject({reducerPath:F,reducer:b},O),{...C,...k(F,!0)}}};return C}}function SMe(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var Co=EMe();function AMe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function TMe({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!CMe(r))throw new Error(ia(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Za(t,o):Za(t))}function kMe(t){return t._reducerDefinitionType==="asyncThunk"}function CMe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function NMe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ia(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=n,h=i(t,s,u);r.exposeAction(e,h),o&&r.addCase(h.fulfilled,o),a&&r.addCase(h.pending,a),l&&r.addCase(h.rejected,l),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(e,{fulfilled:o||SA,pending:a||SA,rejected:l||SA,settled:c||SA})}function SA(){}var PMe="task",Uae="listener",Fae="completed",Pj="cancelled",_Me=`task-${Pj}`,IMe=`task-${Fae}`,GM=`${Uae}-${Pj}`,RMe=`${Uae}-${Fae}`,QC=class{constructor(t){Ce(this,"name","TaskAbortError");Ce(this,"message");this.code=t,this.message=`${PMe} ${Pj} (reason: ${t})`}},_j=(t,e)=>{if(typeof t!="function")throw new TypeError(ia(32))},Ok=()=>{},$ae=(t,e=Ok)=>(t.catch(e),t),zae=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),cm=t=>{if(t.aborted)throw new QC(t.reason)};function Hae(t,e){let n=Ok;return new Promise((r,i)=>{const s=()=>i(new QC(t.reason));if(t.aborted){s();return}n=zae(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Ok})}var OMe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof QC?"cancelled":"rejected",error:n}}finally{e==null||e()}},Mk=t=>e=>$ae(Hae(t,e).then(n=>(cm(t),n))),Vae=t=>{const e=Mk(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:iy}=Object,JG={},ZC="listenerMiddleware",MMe=(t,e)=>{const n=r=>zae(t,()=>r.abort(t.reason));return(r,i)=>{_j(r);const s=new AbortController;n(s);const o=OMe(async()=>{cm(t),cm(s.signal);const a=await r({pause:Mk(s.signal),delay:Vae(s.signal),signal:s.signal});return cm(s.signal),a},()=>s.abort(IMe));return i!=null&&i.autoJoin&&e.push(o.catch(Ok)),{result:Mk(t)(o),cancel(){s.abort(_Me)}}}},LMe=(t,e)=>{const n=async(r,i)=>{cm(e);let s=()=>{};const a=[new Promise((l,c)=>{let u=t({predicate:r,effect:(h,m)=>{m.unsubscribe(),l([h,m.getState(),m.getOriginalState()])}});s=()=>{u(),c()}})];i!=null&&a.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await Hae(e,Promise.race(a));return cm(e),l}finally{s()}};return(r,i)=>$ae(n(r,i))},qae=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Za(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ia(21));return _j(s),{predicate:i,type:e,effect:s}},Gae=iy(t=>{const{type:e,predicate:n,effect:r}=qae(t);return{id:vMe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ia(22))}}},{withTypes:()=>Gae}),XG=(t,e)=>{const{type:n,effect:r,predicate:i}=qae(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},KM=t=>{t.pending.forEach(e=>{e.abort(GM)})},DMe=(t,e)=>()=>{for(const n of e.keys())KM(n);t.clear()},QG=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},Kae=iy(Za(`${ZC}/add`),{withTypes:()=>Kae}),jMe=Za(`${ZC}/removeAll`),Wae=iy(Za(`${ZC}/remove`),{withTypes:()=>Wae}),BMe=(...t)=>{console.error(`${ZC}/error`,...t)},tE=(t={})=>{const e=new Map,n=new Map,r=g=>{const x=n.get(g)??0;n.set(g,x+1)},i=g=>{const x=n.get(g)??1;x===1?n.delete(g):n.set(g,x-1)},{extra:s,onError:o=BMe}=t;_j(o);const a=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),x=>{g.unsubscribe(),x!=null&&x.cancelActive&&KM(g)}),l=g=>{const x=XG(e,g)??Gae(g);return a(x)};iy(l,{withTypes:()=>l});const c=g=>{const x=XG(e,g);return x&&(x.unsubscribe(),g.cancelActive&&KM(x)),!!x};iy(c,{withTypes:()=>c});const u=async(g,x,v,b)=>{const w=new AbortController,k=LMe(l,w.signal),C=[];try{g.pending.add(w),r(g),await Promise.resolve(g.effect(x,iy({},v,{getOriginalState:b,condition:(R,B)=>k(R,B).then(Boolean),take:k,delay:Vae(w.signal),pause:Mk(w.signal),extra:s,signal:w.signal,fork:MMe(w.signal,C),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((R,B,O)=>{R!==w&&(R.abort(GM),O.delete(R))})},cancel:()=>{w.abort(GM),g.pending.delete(w)},throwIfCancelled:()=>{cm(w.signal)}})))}catch(R){R instanceof QC||QG(o,R,{raisedBy:"effect"})}finally{await Promise.all(C),w.abort(RMe),i(g),g.pending.delete(w)}},h=DMe(e,n);return{middleware:g=>x=>v=>{if(!Sae(v))return x(v);if(Kae.match(v))return l(v.payload);if(jMe.match(v)){h();return}if(Wae.match(v))return c(v.payload);let b=g.getState();const w=()=>{if(b===JG)throw new Error(ia(23));return b};let k;try{if(k=x(v),e.size>0){const C=g.getState(),R=Array.from(e.values());for(const B of R){let O=!1;try{O=B.predicate(v,C,b)}catch(F){O=!1,QG(o,F,{raisedBy:"predicate"})}O&&u(B,v,g,w)}}}finally{b=JG}return k},startListening:l,stopListening:c,clearListeners:h}};function ia(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var UMe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Yae=Co({name:"chartLayout",initialState:UMe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:FMe,setLayout:$Me,setChartSize:zMe,setScale:HMe}=Yae.actions,VMe=Yae.reducer;function Jae(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function cr(t){return Number.isFinite(t)}function $c(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function ZG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZG(Object(n),!0).forEach(function(r){qMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qMe(t,e,n){return(e=GMe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GMe(t){var e=KMe(t,"string");return typeof e=="symbol"?e:e+""}function KMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wn(t,e,n){return Sr(t)||Sr(e)?n:Fc(e)?Tm(t,e,n):typeof e=="function"?e(t):n}var WMe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:a}=e;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&At(t[s]))return Dg(Dg({},t),{},{[s]:t[s]+(r||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&At(t[o]))return Dg(Dg({},t),{},{[o]:t[o]+(i||0)})}return t},Kc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Xae=(t,e,n,r)=>{if(r)return t.map(a=>a.coordinate);var i,s,o=t.map(a=>(a.coordinate===e&&(i=!0),a.coordinate===n&&(s=!0),a.coordinate));return i||o.push(e),s||o.push(n),o},Qae=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:h,niceTicks:m,axisType:g}=t;if(!o)return null;var x=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,v=i==="category"&&o.bandwidth?o.bandwidth()/x:0;if(v=g==="angleAxis"&&s&&s.length>=2?$i(s[0]-s[1])*2*v:v,h||m){var b=(h||m||[]).map((w,k)=>{var C=r?r.indexOf(w):w;return{coordinate:o(C)+v,value:w,offset:v,index:k}});return b.filter(w=>!Qa(w.coordinate))}return l&&c?c.map((w,k)=>({coordinate:o(w)+v,value:w,index:k,offset:v})):o.ticks&&u!=null?o.ticks(u).map((w,k)=>({coordinate:o(w)+v,value:w,offset:v,index:k})):o.domain().map((w,k)=>({coordinate:o(w)+v,value:r?r[w]:w,index:k,offset:v}))},eK=1e-4,YMe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-eK,s=Math.max(r[0],r[1])+eK,o=t(e[0]),a=t(e[n-1]);(o<i||o>s||a<i||a>s)&&t.domain([e[0],e[n-1]])}},JMe=(t,e)=>{if(!e||e.length!==2||!At(e[0])||!At(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!At(t[0])||t[0]<n)&&(i[0]=n),(!At(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},XMe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0,a=0;a<n;++a){var l=t[a],c=l==null?void 0:l[i];if(c!=null){var u=c[1],h=c[0],m=Qa(u)?h:u;m>=0?(c[0]=s,c[1]=s+m,s=u):(c[0]=o,c[1]=o+m,o=u)}}}},QMe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0;o<n;++o){var a=t[o],l=a==null?void 0:a[i];if(l!=null){var c=Qa(l[1])?l[0]:l[1];c>=0?(l[0]=s,l[1]=s+c,s=l[1]):(l[0]=0,l[1]=0)}}}},ZMe={sign:XMe,expand:k4e,none:Am,silhouette:C4e,wiggle:N4e,positive:QMe},eLe=(t,e,n)=>{var r,i=(r=ZMe[n])!==null&&r!==void 0?r:Am,s=T4e().keys(e).value((a,l)=>Number(Wn(a,l,0))).order(DM).offset(i),o=s(t);return o.forEach((a,l)=>{a.forEach((c,u)=>{var h=Wn(t[u],e[l],0);Array.isArray(h)&&h.length===2&&At(h[0])&&At(h[1])&&(c[0]=h[0],c[1]=h[1])})}),o};function Zae(t){return t==null?void 0:String(t)}function Lk(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Sr(i[e.dataKey])){var a=iae(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Wn(i,Sr(o)?e.dataKey:o);return Sr(l)?null:e.scale(l)}var tK=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var a=Wn(s,e.dataKey,e.scale.domain()[o]);return Sr(a)?null:e.scale(a)-i/2+r},tLe=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},nLe=t=>{var e=t.flat(2).filter(At);return[Math.min(...e),Math.max(...e)]},rLe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],iLe=(t,e,n)=>{if(t!=null)return rLe(Object.keys(t).reduce((r,i)=>{var s=t[i];if(!s)return r;var{stackedData:o}=s,a=o.reduce((l,c)=>{var u=Jae(c,e,n),h=nLe(u);return!cr(h[0])||!cr(h[1])?l:[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},nK=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rK=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ph=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=qC(e,u=>u.coordinate),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],c=i[o-1];s=Math.min(((l==null?void 0:l.coordinate)||0)-((c==null?void 0:c.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function iK(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return Dg(Dg({},e),{},{dataKey:n,payload:r,value:i,name:s})}function Sh(t,e){if(t)return String(t);if(typeof e=="string")return e}var sLe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},oLe=(t,e)=>e==="centric"?t.angle:t.radius,Nd=t=>t.layout.width,Pd=t=>t.layout.height,aLe=t=>t.layout.scale,ele=t=>t.layout.margin,eN=Le(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),tN=Le(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),tle="data-recharts-item-index",nle="data-recharts-item-id",nE=60;function sK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sK(Object(n),!0).forEach(function(r){lLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lLe(t,e,n){return(e=cLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cLe(t){var e=uLe(t,"string");return typeof e=="symbol"?e:e+""}function uLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dLe=t=>t.brush.height;function fLe(t){var e=tN(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:nE;return n+i}return n},0)}function hLe(t){var e=tN(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:nE;return n+i}return n},0)}function pLe(t){var e=eN(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function mLe(t){var e=eN(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ai=Le([Nd,Pd,ele,dLe,fLe,hLe,pLe,mLe,bae,z3e],(t,e,n,r,i,s,o,a,l,c)=>{var u={left:(n.left||0)+i,right:(n.right||0)+s},h={top:(n.top||0)+o,bottom:(n.bottom||0)+a},m=AA(AA({},h),u),g=m.bottom;m.bottom+=r,m=WMe(m,l,c);var x=t-m.left-m.right,v=e-m.top-m.bottom;return AA(AA({brushBottom:g},m),{},{width:Math.max(x,0),height:Math.max(v,0)})}),gLe=Le(Ai,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),Ij=Le(Nd,Pd,(t,e)=>({x:0,y:0,width:t,height:e})),yLe=A.createContext(null),Hi=()=>A.useContext(yLe)!=null,nN=t=>t.brush,rN=Le([nN,Ai,ele],(t,e,n)=>({height:t.height,x:At(t.x)?t.x:e.left,y:At(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:At(t.width)?t.width:e.width})),rO={},iO={},sO={},oK;function xLe(){return oK||(oK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{a!==null&&(n.apply(o,a),o=void 0,a=null)},h=()=>{c&&u(),v()};let m=null;const g=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,h()},r)},x=()=>{m!==null&&(clearTimeout(m),m=null)},v=()=>{x(),o=void 0,a=null},b=()=>{u()},w=function(...k){if(i!=null&&i.aborted)return;o=this,a=k;const C=m==null;g(),l&&C&&u()};return w.schedule=g,w.cancel=v,w.flush=b,i==null||i.addEventListener("abort",v,{once:!0}),w}t.debounce=e})(sO)),sO}var aK;function vLe(){return aK||(aK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xLe();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let u,h=null;const m=e.debounce(function(...v){u=r.apply(this,v),h=null},i,{edges:c}),g=function(...v){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(u=r.apply(this,v),h=Date.now(),m.cancel(),m.schedule(),u):(m.apply(this,v),u)},x=()=>(m.flush(),u);return g.cancel=m.cancel,g.flush=x,g}t.debounce=n})(iO)),iO}var lK;function bLe(){return lK||(lK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vLe();function n(r,i=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:a})}t.throttle=n})(rO)),rO}var oO,cK;function wLe(){return cK||(cK=1,oO=bLe().throttle),oO}var ELe=wLe();const SLe=hs(ELe);var Dk=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},rle=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:o}=n,a=gd(r)?t:Number(r),l=gd(i)?e:Number(i);return s&&s>0&&(a?l=a/s:l&&(a=l*s),o&&l!=null&&l>o&&(l=o)),{calculatedWidth:a,calculatedHeight:l}},ALe={width:0,height:0,overflow:"visible"},TLe={width:0,overflowX:"visible"},kLe={height:0,overflowY:"visible"},CLe={},NLe=t=>{var{width:e,height:n}=t,r=gd(e),i=gd(n);return r&&i?ALe:r?TLe:i?kLe:CLe};function PLe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function WM(){return WM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WM.apply(null,arguments)}function uK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uK(Object(n),!0).forEach(function(r){_Le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Le(t,e,n){return(e=ILe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ILe(t){var e=RLe(t,"string");return typeof e=="symbol"?e:e+""}function RLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ile=A.createContext({width:-1,height:-1});function OLe(t){return $c(t.width)&&$c(t.height)}function sle(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return OLe(i)?A.createElement(ile.Provider,{value:i},e):null}var Rj=()=>A.useContext(ile),MLe=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:u=0,id:h,className:m,onResize:g,style:x={}}=t,v=A.useRef(null),b=A.useRef();b.current=g,A.useImperativeHandle(e,()=>v.current);var[w,k]=A.useState({containerWidth:r.width,containerHeight:r.height}),C=A.useCallback((H,j)=>{k($=>{var W=Math.round(H),V=Math.round(j);return $.containerWidth===W&&$.containerHeight===V?$:{containerWidth:W,containerHeight:V}})},[]);A.useEffect(()=>{if(v.current==null||typeof ResizeObserver>"u")return Q1;var H=V=>{var U,{width:T,height:_}=V[0].contentRect;C(T,_),(U=b.current)===null||U===void 0||U.call(b,T,_)};u>0&&(H=SLe(H,u,{trailing:!0,leading:!1}));var j=new ResizeObserver(H),{width:$,height:W}=v.current.getBoundingClientRect();return C($,W),j.observe(v.current),()=>{j.disconnect()}},[C,u]);var{containerWidth:R,containerHeight:B}=w;Dk(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:O,calculatedHeight:F}=rle(R,B,{width:i,height:s,aspect:n,maxHeight:l});return Dk(O!=null&&O>0||F!=null&&F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,F,i,s,o,a,n),A.createElement("div",{id:h?"".concat(h):void 0,className:Rn("recharts-responsive-container",m),style:dK(dK({},x),{},{width:i,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:v},A.createElement("div",{style:NLe({width:i,height:s})},A.createElement(sle,{width:O,height:F},c)))}),Jw=A.forwardRef((t,e)=>{var n=Rj();if($c(n.width)&&$c(n.height))return t.children;var{width:r,height:i}=PLe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=rle(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return At(s)&&At(o)?A.createElement(sle,{width:s,height:o},t.children):A.createElement(MLe,WM({},t,{width:r,height:i,ref:e}))});function ole(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var iN=()=>{var t,e=Hi(),n=Rt(gLe),r=Rt(rN),i=(t=Rt(nN))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},LLe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},ale=()=>{var t;return(t=Rt(Ai))!==null&&t!==void 0?t:LLe},lle=()=>Rt(Nd),cle=()=>Rt(Pd),An=t=>t.layout.layoutType,Ah=()=>Rt(An),DLe=()=>{var t=Ah();if(t==="horizontal"||t==="vertical")return t},jLe=()=>{var t=Ah();return t!==void 0},sN=t=>{var e=Pr(),n=Hi(),{width:r,height:i}=t,s=Rj(),o=r,a=i;return s&&(o=s.width>0?s.width:r,a=s.height>0?s.height:i),A.useEffect(()=>{!n&&$c(o)&&$c(a)&&e(zMe({width:o,height:a}))},[e,n,o,a]),null},ule=Symbol.for("immer-nothing"),fK=Symbol.for("immer-draftable"),la=Symbol.for("immer-state");function _l(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Xw=Object.getPrototypeOf;function Tx(t){return!!t&&!!t[la]}function Cm(t){var e;return t?dle(t)||Array.isArray(t)||!!t[fK]||!!((e=t.constructor)!=null&&e[fK])||rE(t)||aN(t):!1}var BLe=Object.prototype.constructor.toString(),hK=new WeakMap;function dle(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=hK.get(n);return r===void 0&&(r=Function.toString.call(n),hK.set(n,r)),r===BLe}function jk(t,e,n=!0){oN(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function oN(t){const e=t[la];return e?e.type_:Array.isArray(t)?1:rE(t)?2:aN(t)?3:0}function YM(t,e){return oN(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function fle(t,e,n){const r=oN(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function ULe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function rE(t){return t instanceof Map}function aN(t){return t instanceof Set}function up(t){return t.copy_||t.base_}function JM(t,e){if(rE(t))return new Map(t);if(aN(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=dle(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[la];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Xw(t),r)}else{const r=Xw(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function Oj(t,e=!1){return lN(t)||Tx(t)||!Cm(t)||(oN(t)>1&&Object.defineProperties(t,{set:TA,add:TA,clear:TA,delete:TA}),Object.freeze(t),e&&Object.values(t).forEach(n=>Oj(n,!0))),t}function FLe(){_l(2)}var TA={value:FLe};function lN(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var $Le={};function Nm(t){const e=$Le[t];return e||_l(0,t),e}var Qw;function hle(){return Qw}function zLe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pK(t,e){e&&(Nm("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function XM(t){QM(t),t.drafts_.forEach(HLe),t.drafts_=null}function QM(t){t===Qw&&(Qw=t.parent_)}function mK(t){return Qw=zLe(Qw,t)}function HLe(t){const e=t[la];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function gK(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[la].modified_&&(XM(e),_l(4)),Cm(t)&&(t=Bk(e,t),e.parent_||Uk(e,t)),e.patches_&&Nm("Patches").generateReplacementPatches_(n[la].base_,t,e.patches_,e.inversePatches_)):t=Bk(e,n,[]),XM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==ule?t:void 0}function Bk(t,e,n){if(lN(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[la];if(!i)return jk(e,(s,o)=>yK(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Uk(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),jk(o,(l,c)=>yK(t,i,s,l,c,n,a),r),Uk(t,s,!1),n&&t.patches_&&Nm("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function yK(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=lN(i);if(!(a&&!o)){if(Tx(i)){const l=s&&e&&e.type_!==3&&!YM(e.assigned_,r)?s.concat(r):void 0,c=Bk(t,i,l);if(fle(n,r,c),Tx(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Cm(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;Bk(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(rE(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Uk(t,i)}}}function Uk(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Oj(e,n)}function VLe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:hle(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Mj;n&&(i=[r],s=Zw);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var Mj={get(t,e){if(e===la)return t;const n=up(t);if(!YM(n,e))return qLe(t,n,e);const r=n[e];return t.finalized_||!Cm(r)?r:r===aO(t.base_,e)?(lO(t),t.copy_[e]=eL(r,t)):r},has(t,e){return e in up(t)},ownKeys(t){return Reflect.ownKeys(up(t))},set(t,e,n){const r=ple(up(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=aO(up(t),e),s=i==null?void 0:i[la];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(ULe(n,i)&&(n!==void 0||YM(t.base_,e)))return!0;lO(t),ZM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return aO(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,lO(t),ZM(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=up(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){_l(11)},getPrototypeOf(t){return Xw(t.base_)},setPrototypeOf(){_l(12)}},Zw={};jk(Mj,(t,e)=>{Zw[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Zw.deleteProperty=function(t,e){return Zw.set.call(this,t,e,void 0)};Zw.set=function(t,e,n){return Mj.set.call(this,t[0],e,n,t[0])};function aO(t,e){const n=t[la];return(n?up(n):t)[e]}function qLe(t,e,n){var i;const r=ple(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function ple(t,e){if(!(e in t))return;let n=Xw(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Xw(n)}}function ZM(t){t.modified_||(t.modified_=!0,t.parent_&&ZM(t.parent_))}function lO(t){t.copy_||(t.copy_=JM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var GLe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&_l(6),r!==void 0&&typeof r!="function"&&_l(7);let i;if(Cm(e)){const s=mK(this),o=eL(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?XM(s):QM(s)}return pK(s,r),gK(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===ule&&(i=void 0),this.autoFreeze_&&Oj(i,!0),r){const s=[],o=[];Nm("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else _l(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Cm(t)||_l(8),Tx(t)&&(t=KLe(t));const e=mK(this),n=eL(t,void 0);return n[la].isManual_=!0,QM(e),n}finishDraft(t,e){const n=t&&t[la];(!n||!n.isManual_)&&_l(9);const{scope_:r}=n;return pK(r,e),gK(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Nm("Patches").applyPatches_;return Tx(t)?r(t,e):this.produce(t,i=>r(i,e))}};function eL(t,e){const n=rE(t)?Nm("MapSet").proxyMap_(t,e):aN(t)?Nm("MapSet").proxySet_(t,e):VLe(t,e);return(e?e.scope_:hle()).drafts_.push(n),n}function KLe(t){return Tx(t)||_l(10,t),mle(t)}function mle(t){if(!Cm(t)||lN(t))return t;const e=t[la];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=JM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=JM(t,!0);return jk(n,(i,s)=>{fle(n,i,mle(s))},r),e&&(e.finalized_=!1),n}var WLe=new GLe;WLe.produce;var YLe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},gle=Co({name:"legend",initialState:YLe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Tr()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ll(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Tr()},removeLegendPayload:{reducer(t,e){var n=Ll(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Tr()}}}),{setLegendSize:T0t,setLegendSettings:k0t,addLegendPayload:yle,replaceLegendPayload:xle,removeLegendPayload:vle}=gle.actions,JLe=gle.reducer;function tL(){return tL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tL.apply(null,arguments)}function xK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xK(Object(n),!0).forEach(function(r){XLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XLe(t,e,n){return(e=QLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QLe(t){var e=ZLe(t,"string");return typeof e=="symbol"?e:e+""}function ZLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eDe(t){return Array.isArray(t)&&Fc(t[0])&&Fc(t[1])?t.join(" ~ "):t}var tDe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:h,accessibilityLayer:m=!1}=t,g=()=>{if(s&&s.length){var B={padding:0,margin:0},O=(a?qC(s,a):s).map((F,H)=>{if(F.type==="none")return null;var j=F.formatter||o||eDe,{value:$,name:W}=F,V=$,U=W;if(j){var T=j($,W,F,H,s);if(Array.isArray(T))[V,U]=T;else if(T!=null)V=T;else return null}var _=cO({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:_},Fc(U)?A.createElement("span",{className:"recharts-tooltip-item-name"},U):null,Fc(U)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},V),A.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:B},O)}return null},x=cO({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),v=cO({margin:0},i),b=!Sr(u),w=b?u:"",k=Rn("recharts-default-tooltip",l),C=Rn("recharts-tooltip-label",c);b&&h&&s!==void 0&&s!==null&&(w=h(u,s));var R=m?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",tL({className:k,style:x},R),A.createElement("p",{className:C,style:v},A.isValidElement(w)?w:"".concat(w)),g())},Eb="recharts-tooltip-wrapper",nDe={visibility:"hidden"};function rDe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Rn(Eb,{["".concat(Eb,"-right")]:At(n)&&e&&At(e.x)&&n>=e.x,["".concat(Eb,"-left")]:At(n)&&e&&At(e.x)&&n<e.x,["".concat(Eb,"-bottom")]:At(r)&&e&&At(e.y)&&r>=e.y,["".concat(Eb,"-top")]:At(r)&&e&&At(e.y)&&r<e.y})}function vK(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=t;if(s&&At(s[r]))return s[r];var u=n[r]-a-(i>0?i:0),h=n[r]+i;if(e[r])return o[r]?u:h;var m=l[r];if(m==null)return 0;if(o[r]){var g=u,x=m;return g<x?Math.max(h,m):Math.max(u,m)}if(c==null)return 0;var v=h+a,b=m+c;return v>b?Math.max(u,m):Math.max(h,m)}function iDe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function sDe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:o,useTranslate3d:a,viewBox:l}=t,c,u,h;return o.height>0&&o.width>0&&n?(u=vK({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),h=vK({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=iDe({translateX:u,translateY:h,useTranslate3d:a})):c=nDe,{cssProperties:c,cssClasses:rDe({translateX:u,translateY:h,coordinate:n})}}function bK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bK(Object(n),!0).forEach(function(r){nL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nL(t,e,n){return(e=oDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oDe(t){var e=aDe(t,"string");return typeof e=="symbol"?e:e+""}function aDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class lDe extends A.PureComponent{constructor(){super(...arguments),nL(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),nL(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:u,reverseDirection:h,useTranslate3d:m,viewBox:g,wrapperStyle:x,lastBoundingBox:v,innerRef:b,hasPortalFromProps:w}=this.props,{cssClasses:k,cssProperties:C}=sDe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:h,tooltipBox:{height:v.height,width:v.width},useTranslate3d:m,viewBox:g}),R=w?{}:kA(kA({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),B=kA(kA({},R),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},x);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:B,ref:b},s)}}var ble=()=>{var t;return(t=Rt(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function rL(){return rL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rL.apply(null,arguments)}function wK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wK(Object(n),!0).forEach(function(r){cDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cDe(t,e,n){return(e=uDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uDe(t){var e=dDe(t,"string");return typeof e=="symbol"?e:e+""}function dDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SK={curveBasisClosed:p4e,curveBasisOpen:m4e,curveBasis:h4e,curveBumpX:ZOe,curveBumpY:e4e,curveLinearClosed:g4e,curveLinear:zC,curveMonotoneX:y4e,curveMonotoneY:x4e,curveNatural:v4e,curveStep:b4e,curveStepAfter:E4e,curveStepBefore:w4e},Fk=t=>cr(t.x)&&cr(t.y),AK=t=>t.base!=null&&Fk(t.base)&&Fk(t),Sb=t=>t.x,Ab=t=>t.y,fDe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(X1(t));return(n==="curveMonotone"||n==="curveBump")&&e?SK["".concat(n).concat(e==="vertical"?"Y":"X")]:SK[n]||zC},hDe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,o=fDe(e,i),a=s?n.filter(Fk):n,l;if(Array.isArray(r)){var c=n.map((g,x)=>EK(EK({},g),{},{base:r[x]}));i==="vertical"?l=xA().y(Ab).x1(Sb).x0(g=>g.base.x):l=xA().x(Sb).y1(Ab).y0(g=>g.base.y);var u=l.defined(AK).curve(o),h=s?c.filter(AK):c;return u(h)}i==="vertical"&&At(r)?l=xA().y(Ab).x1(Sb).x0(r):At(r)?l=xA().x(Sb).y1(Ab).y0(r):l=qoe().x(Sb).y(Ab);var m=l.defined(Fk).curve(o);return m(a)},sy=t=>{var{className:e,points:n,path:r,pathRef:i}=t,s=Ah();if((!n||!n.length)&&!r)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},a=n&&n.length?hDe(o):r;return A.createElement("path",rL({},ro(t),bj(t),{className:Rn("recharts-curve",e),d:a===null?void 0:a,ref:i}))},pDe=["x","y","top","left","width","height","className"];function iL(){return iL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iL.apply(null,arguments)}function TK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TK(Object(n),!0).forEach(function(r){gDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gDe(t,e,n){return(e=yDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yDe(t){var e=xDe(t,"string");return typeof e=="symbol"?e:e+""}function xDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vDe(t,e){if(t==null)return{};var n,r,i=bDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wDe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),EDe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:a}=t,l=vDe(t,pDe),c=mDe({x:e,y:n,top:r,left:i,width:s,height:o},l);return!At(e)||!At(n)||!At(s)||!At(o)||!At(r)||!At(i)?null:A.createElement("path",iL({},Bs(c),{className:Rn("recharts-cross",a),d:wDe(e,n,s,o,r,i)}))};function SDe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function kK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kK(Object(n),!0).forEach(function(r){ADe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ADe(t,e,n){return(e=TDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TDe(t){var e=kDe(t,"string");return typeof e=="symbol"?e:e+""}function kDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CDe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),wle=(t,e,n)=>t.map(r=>"".concat(CDe(r)," ").concat(e,"ms ").concat(n)).join(","),NDe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),e1=(t,e)=>Object.keys(e).reduce((n,r)=>CK(CK({},n),{},{[r]:t(r,e[r])}),{});function NK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NK(Object(n),!0).forEach(function(r){PDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PDe(t,e,n){return(e=_De(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _De(t){var e=IDe(t,"string");return typeof e=="symbol"?e:e+""}function IDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $k=(t,e,n)=>t+(e-t)*n,sL=t=>{var{from:e,to:n}=t;return e!==n},Ele=(t,e,n)=>{var r=e1((i,s)=>{if(sL(s)){var[o,a]=t(s.from,s.to,s.velocity);return Si(Si({},s),{},{from:o,velocity:a})}return s},e);return n<1?e1((i,s)=>sL(s)&&r[i]!=null?Si(Si({},s),{},{velocity:$k(s.velocity,r[i].velocity,n),from:$k(s.from,r[i].from,n)}):s,e):Ele(t,r,n-1)};function RDe(t,e,n,r,i,s){var o,a=r.reduce((m,g)=>Si(Si({},m),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),l=()=>e1((m,g)=>g.from,a),c=()=>!Object.values(a).filter(sL).length,u=null,h=m=>{o||(o=m);var g=m-o,x=g/n.dt;a=Ele(n,a,x),i(Si(Si(Si({},t),e),l())),o=m,c()||(u=s.setTimeout(h))};return()=>(u=s.setTimeout(h),()=>{var m;(m=u)===null||m===void 0||m()})}function ODe(t,e,n,r,i,s,o){var a=null,l=i.reduce((h,m)=>{var g=t[m],x=e[m];return g==null||x==null?h:Si(Si({},h),{},{[m]:[g,x]})},{}),c,u=h=>{c||(c=h);var m=(h-c)/r,g=e1((v,b)=>$k(...b,n(m)),l);if(s(Si(Si(Si({},t),e),g)),m<1)a=o.setTimeout(u);else{var x=e1((v,b)=>$k(...b,n(1)),l);s(Si(Si(Si({},t),e),x))}};return()=>(a=o.setTimeout(u),()=>{var h;(h=a)===null||h===void 0||h()})}const MDe=(t,e,n,r,i,s)=>{var o=NDe(t,e);return n==null?()=>(i(Si(Si({},t),e)),()=>{}):n.isStepper===!0?RDe(t,e,n,o,i,s):ODe(t,e,n,r,o,i,s)};var zk=1e-4,Sle=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Ale=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),PK=(t,e)=>n=>{var r=Sle(t,e);return Ale(r,n)},LDe=(t,e)=>n=>{var r=Sle(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return Ale(i,n)},DDe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},jDe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=DDe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},BDe=(t,e,n,r)=>{var i=PK(t,n),s=PK(e,r),o=LDe(t,n),a=c=>c>1?1:c<0?0:c,l=c=>{for(var u=c>1?1:c,h=u,m=0;m<8;++m){var g=i(h)-u,x=o(h);if(Math.abs(g-u)<zk||x<zk)return s(h);h=a(h-g/x)}return s(h)};return l.isStepper=!1,l},_K=function(){return BDe(...jDe(...arguments))},UDe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,a,l)=>{var c=-(o-a)*n,u=l*r,h=l+(c-u)*i/1e3,m=l*i/1e3+o;return Math.abs(m-a)<zk&&Math.abs(h)<zk?[a,0]:[m,h]};return s.isStepper=!0,s.dt=i,s},FDe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _K(t);case"spring":return UDe();default:if(t.split("(")[0]==="cubic-bezier")return _K(t)}return typeof t=="function"?t:null};function $De(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class zDe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function HDe(){return $De(new zDe)}var VDe=A.createContext(HDe);function qDe(t,e){var n=A.useContext(VDe);return A.useMemo(()=>e??n(t),[t,e,n])}var GDe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),iE={isSsr:GDe()},KDe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},IK={t:0},uO={t:1};function ev(t){var e=xi(t,KDe),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=e,u=n==="auto"?!iE.isSsr:n,h=qDe(e.animationId,e.animationManager),[m,g]=A.useState(u?IK:uO),x=A.useRef(null);return A.useEffect(()=>{u||g(uO)},[u]),A.useEffect(()=>{if(!u||!r)return Q1;var v=MDe(IK,uO,FDe(s),i,g,h.getTimeoutController()),b=()=>{x.current=v()};return h.start([l,o,b,i,a]),()=>{h.stop(),x.current&&x.current(),a()}},[u,r,i,s,o,l,a,h]),c(m.t)}function tv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(Gw(e)),r=A.useRef(t);return r.current!==t&&(n.current=Gw(e),r.current=t),n.current}var WDe=["radius"],YDe=["radius"],RK,OK,MK,LK,DK,jK,BK,UK,FK,$K;function zK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zK(Object(n),!0).forEach(function(r){JDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JDe(t,e,n){return(e=XDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XDe(t){var e=QDe(t,"string");return typeof e=="symbol"?e:e+""}function QDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hk(){return Hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hk.apply(null,arguments)}function VK(t,e){if(t==null)return{};var n,r,i=ZDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ZDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function sc(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var qK=(t,e,n,r,i)=>{var s=Qf(n),o=Qf(r),a=Math.min(Math.abs(s)/2,Math.abs(o)/2),l=o>=0?1:-1,c=s>=0?1:-1,u=o>=0&&s>=0||o<0&&s<0?1:0,h;if(a>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,x=4;g<x;g++)m[g]=i[g]>a?a:i[g];h=Vr(RK||(RK=sc(["M",",",""])),t,e+l*m[0]),m[0]>0&&(h+=Vr(OK||(OK=sc(["A ",",",",0,0,",",",",",""])),m[0],m[0],u,t+c*m[0],e)),h+=Vr(MK||(MK=sc(["L ",",",""])),t+n-c*m[1],e),m[1]>0&&(h+=Vr(LK||(LK=sc(["A ",",",",0,0,",`,
        `,",",""])),m[1],m[1],u,t+n,e+l*m[1])),h+=Vr(DK||(DK=sc(["L ",",",""])),t+n,e+r-l*m[2]),m[2]>0&&(h+=Vr(jK||(jK=sc(["A ",",",",0,0,",`,
        `,",",""])),m[2],m[2],u,t+n-c*m[2],e+r)),h+=Vr(BK||(BK=sc(["L ",",",""])),t+c*m[3],e+r),m[3]>0&&(h+=Vr(UK||(UK=sc(["A ",",",",0,0,",`,
        `,",",""])),m[3],m[3],u,t,e+r-l*m[3])),h+="Z"}else if(a>0&&i===+i&&i>0){var v=Math.min(a,i);h=Vr(FK||(FK=sc(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*v,v,v,u,t+c*v,e,t+n-c*v,e,v,v,u,t+n,e+l*v,t+n,e+r-l*v,v,v,u,t+n-c*v,e+r,t+c*v,e+r,v,v,u,t,e+r-l*v)}else h=Vr($K||($K=sc(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},GK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Tle=t=>{var e=xi(t,GK),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var z=n.current.getTotalLength();z&&i(z)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:c,className:u}=e,{animationEasing:h,animationDuration:m,animationBegin:g,isAnimationActive:x,isUpdateAnimationActive:v}=e,b=A.useRef(a),w=A.useRef(l),k=A.useRef(s),C=A.useRef(o),R=A.useMemo(()=>({x:s,y:o,width:a,height:l,radius:c}),[s,o,a,l,c]),B=tv(R,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var O=Rn("recharts-rectangle",u);if(!v){var F=Bs(e),{radius:H}=F,j=VK(F,WDe);return A.createElement("path",Hk({},j,{x:Qf(s),y:Qf(o),width:Qf(a),height:Qf(l),radius:typeof c=="number"?c:void 0,className:O,d:qK(s,o,a,l,c)}))}var $=b.current,W=w.current,V=k.current,U=C.current,T="0px ".concat(r===-1?1:r,"px"),_="".concat(r,"px 0px"),L=wle(["strokeDasharray"],m,typeof h=="string"?h:GK.animationEasing);return A.createElement(ev,{animationId:B,key:B,canBegin:r>0,duration:m,easing:h,isActive:v,begin:g},z=>{var G=qn($,a,z),te=qn(W,l,z),K=qn(V,s,z),q=qn(U,o,z);n.current&&(b.current=G,w.current=te,k.current=K,C.current=q);var M;x?z>0?M={transition:L,strokeDasharray:_}:M={strokeDasharray:T}:M={strokeDasharray:_};var P=Bs(e),{radius:Y}=P,X=VK(P,YDe);return A.createElement("path",Hk({},X,{radius:typeof c=="number"?c:void 0,className:O,d:qK(K,q,G,te,c),ref:n,style:HK(HK({},M),e.style)}))})};function KK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KK(Object(n),!0).forEach(function(r){e8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e8e(t,e,n){return(e=t8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t8e(t){var e=n8e(t,"string");return typeof e=="symbol"?e:e+""}function n8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vk=Math.PI/180,r8e=t=>t*180/Math.PI,gi=(t,e,n,r)=>({x:t+Math.cos(-Vk*r)*n,y:e+Math.sin(-Vk*r)*n}),kle=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},i8e=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},s8e=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=i8e({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var a=(n-i)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:r8e(l),angleInRadian:l}},o8e=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},a8e=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},l8e=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=s8e({x:n,y:r},e),{innerRadius:o,outerRadius:a}=e;if(i<o||i>a||i===0)return null;var{startAngle:l,endAngle:c}=o8e(e),u=s,h;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;h=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=l}return h?WK(WK({},e),{},{radius:i,angle:a8e(u,e)}):null};function Cle(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=gi(e,n,r,i),a=gi(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}var YK,JK,XK,QK,ZK,eW,tW;function oL(){return oL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oL.apply(null,arguments)}function Np(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var c8e=(t,e)=>{var n=$i(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},CA=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=t,c=a*(o?1:-1)+r,u=Math.asin(a/c)/Vk,h=l?i:i+s*u,m=gi(e,n,c,h),g=gi(e,n,r,h),x=l?i-s*u:i,v=gi(e,n,c*Math.cos(u*Vk),x);return{center:m,circleTangency:g,lineTangency:v,theta:u}},Nle=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,a=c8e(s,o),l=s+a,c=gi(e,n,i,s),u=gi(e,n,i,l),h=Vr(YK||(YK=Np(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,i,i,+(Math.abs(a)>180),+(s>l),u.x,u.y);if(r>0){var m=gi(e,n,r,s),g=gi(e,n,r,l);h+=Vr(JK||(JK=Np(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),g.x,g.y,r,r,+(Math.abs(a)>180),+(s<=l),m.x,m.y)}else h+=Vr(XK||(XK=Np(["L ",","," Z"])),e,n);return h},u8e=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=t,u=$i(c-l),{circleTangency:h,lineTangency:m,theta:g}=CA({cx:e,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:a}),{circleTangency:x,lineTangency:v,theta:b}=CA({cx:e,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:a}),w=a?Math.abs(l-c):Math.abs(l-c)-g-b;if(w<0)return o?Vr(QK||(QK=Np(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),m.x,m.y,s,s,s*2,s,s,-s*2):Nle({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var k=Vr(ZK||(ZK=Np(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),m.x,m.y,s,s,+(u<0),h.x,h.y,i,i,+(w>180),+(u<0),x.x,x.y,s,s,+(u<0),v.x,v.y);if(r>0){var{circleTangency:C,lineTangency:R,theta:B}=CA({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:O,lineTangency:F,theta:H}=CA({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),j=a?Math.abs(l-c):Math.abs(l-c)-B-H;if(j<0&&s===0)return"".concat(k,"L").concat(e,",").concat(n,"Z");k+=Vr(eW||(eW=Np(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),F.x,F.y,s,s,+(u<0),O.x,O.y,r,r,+(j>180),+(u>0),C.x,C.y,s,s,+(u<0),R.x,R.y)}else k+=Vr(tW||(tW=Np(["L",",","Z"])),e,n);return k},d8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ple=t=>{var e=xi(t,d8e),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u,className:h}=e;if(s<i||c===u)return null;var m=Rn("recharts-sector",h),g=s-i,x=Ds(o,g,0,!0),v;return x>0&&Math.abs(c-u)<360?v=u8e({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(x,g/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:u}):v=Nle({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),A.createElement("path",oL({},Bs(e),{className:m,d:v}))};function f8e(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(aae(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:o,angle:a}=e,l=gi(r,i,s,a),c=gi(r,i,o,a);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return Cle(e)}}var dO={},fO={},hO={},nW;function h8e(){return nW||(nW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xae();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(hO)),hO}var rW;function p8e(){return rW||(rW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h8e();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(fO)),fO}var iW;function m8e(){return iW||(iW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vae(),n=p8e();function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const a=Math.max(Math.ceil((s-i)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=i,i+=o;return l}t.range=r})(dO)),dO}var pO,sW;function g8e(){return sW||(sW=1,pO=m8e().range),pO}var y8e=g8e();const _le=hs(y8e);function rh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x8e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lj(t){let e,n,r;t.length!==2?(e=rh,n=(a,l)=>rh(t(a),l),r=(a,l)=>t(a)-l):(e=t===rh||t===x8e?t:v8e,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=i(a,l,c,u-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:o,right:s}}function v8e(){return 0}function Ile(t){return t===null?NaN:+t}function*b8e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const w8e=Lj(rh),sE=w8e.right;Lj(Ile).center;class oW extends Map{constructor(e,n=A8e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(aW(this,e))}has(e){return super.has(aW(this,e))}set(e,n){return super.set(E8e(this,e),n)}delete(e){return super.delete(S8e(this,e))}}function aW({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function E8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function S8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function A8e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function T8e(t=rh){if(t===rh)return Rle;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Rle(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const k8e=Math.sqrt(50),C8e=Math.sqrt(10),N8e=Math.sqrt(2);function qk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=k8e?10:s>=C8e?5:s>=N8e?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?qk(t,e,n*2):[a,l,c]}function aL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?qk(e,t,n):qk(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function lL(t,e,n){return e=+e,t=+t,n=+n,qk(t,e,n)[2]}function cL(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?lL(e,t,n):lL(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function lW(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function cW(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Ole(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Rle:T8e(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+m)),x=Math.min(r,Math.floor(e+(l-c)*h/l+m));Ole(t,e,g,x,i)}const s=t[e];let o=n,a=r;for(Tb(t,n,e),i(t[r],s)>0&&Tb(t,n,r);o<a;){for(Tb(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?Tb(t,n,a):(++a,Tb(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Tb(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function P8e(t,e,n){if(t=Float64Array.from(b8e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return cW(t);if(e>=1)return lW(t);var r,i=(r-1)*e,s=Math.floor(i),o=lW(Ole(t,s).subarray(0,s+1)),a=cW(t.subarray(s+1));return o+(a-o)*(i-s)}}function _8e(t,e,n=Ile){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function I8e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function il(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _d(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const uL=Symbol("implicit");function Dj(){var t=new oW,e=[],n=[],r=uL;function i(s){let o=t.get(s);if(o===void 0){if(r!==uL)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new oW;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Dj(e,n).unknown(r)},il.apply(i,arguments),i}function jj(){var t=Dj().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var m=e().length,g=i<r,x=g?i:r,v=g?r:i;s=(v-x)/Math.max(1,m-l+c*2),a&&(s=Math.floor(s)),x+=(v-x-s*(m-l))*u,o=s*(1-l),a&&(x=Math.round(x),o=Math.round(o));var b=I8e(m).map(function(w){return x+s*w});return n(g?b.reverse():b)}return t.domain=function(m){return arguments.length?(e(m),h()):e()},t.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(m){return arguments.length?(a=!!m,h()):a},t.padding=function(m){return arguments.length?(l=Math.min(1,c=+m),h()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),h()):l},t.paddingOuter=function(m){return arguments.length?(c=+m,h()):c},t.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),h()):u},t.copy=function(){return jj(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},il.apply(h(),arguments)}function Mle(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Mle(e())},t}function R8e(){return Mle(jj.apply(null,arguments).paddingInner(1))}function Bj(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Lle(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function oE(){}var t1=.7,Gk=1/t1,oy="\\s*([+-]?\\d+)\\s*",n1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O8e=/^#([0-9a-f]{3,8})$/,M8e=new RegExp(`^rgb\\(${oy},${oy},${oy}\\)$`),L8e=new RegExp(`^rgb\\(${jc},${jc},${jc}\\)$`),D8e=new RegExp(`^rgba\\(${oy},${oy},${oy},${n1}\\)$`),j8e=new RegExp(`^rgba\\(${jc},${jc},${jc},${n1}\\)$`),B8e=new RegExp(`^hsl\\(${n1},${jc},${jc}\\)$`),U8e=new RegExp(`^hsla\\(${n1},${jc},${jc},${n1}\\)$`),uW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bj(oE,r1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:dW,formatHex:dW,formatHex8:F8e,formatHsl:$8e,formatRgb:fW,toString:fW});function dW(){return this.rgb().formatHex()}function F8e(){return this.rgb().formatHex8()}function $8e(){return Dle(this).formatHsl()}function fW(){return this.rgb().formatRgb()}function r1(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=O8e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?hW(e):n===3?new Eo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?NA(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?NA(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=M8e.exec(t))?new Eo(e[1],e[2],e[3],1):(e=L8e.exec(t))?new Eo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=D8e.exec(t))?NA(e[1],e[2],e[3],e[4]):(e=j8e.exec(t))?NA(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=B8e.exec(t))?gW(e[1],e[2]/100,e[3]/100,1):(e=U8e.exec(t))?gW(e[1],e[2]/100,e[3]/100,e[4]):uW.hasOwnProperty(t)?hW(uW[t]):t==="transparent"?new Eo(NaN,NaN,NaN,0):null}function hW(t){return new Eo(t>>16&255,t>>8&255,t&255,1)}function NA(t,e,n,r){return r<=0&&(t=e=n=NaN),new Eo(t,e,n,r)}function z8e(t){return t instanceof oE||(t=r1(t)),t?(t=t.rgb(),new Eo(t.r,t.g,t.b,t.opacity)):new Eo}function dL(t,e,n,r){return arguments.length===1?z8e(t):new Eo(t,e,n,r??1)}function Eo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Bj(Eo,dL,Lle(oE,{brighter(t){return t=t==null?Gk:Math.pow(Gk,t),new Eo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?t1:Math.pow(t1,t),new Eo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Eo(um(this.r),um(this.g),um(this.b),Kk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pW,formatHex:pW,formatHex8:H8e,formatRgb:mW,toString:mW}));function pW(){return`#${Pp(this.r)}${Pp(this.g)}${Pp(this.b)}`}function H8e(){return`#${Pp(this.r)}${Pp(this.g)}${Pp(this.b)}${Pp((isNaN(this.opacity)?1:this.opacity)*255)}`}function mW(){const t=Kk(this.opacity);return`${t===1?"rgb(":"rgba("}${um(this.r)}, ${um(this.g)}, ${um(this.b)}${t===1?")":`, ${t})`}`}function Kk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function um(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pp(t){return t=um(t),(t<16?"0":"")+t.toString(16)}function gW(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Il(t,e,n,r)}function Dle(t){if(t instanceof Il)return new Il(t.h,t.s,t.l,t.opacity);if(t instanceof oE||(t=r1(t)),!t)return new Il;if(t instanceof Il)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Il(o,a,l,t.opacity)}function V8e(t,e,n,r){return arguments.length===1?Dle(t):new Il(t,e,n,r??1)}function Il(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Bj(Il,V8e,Lle(oE,{brighter(t){return t=t==null?Gk:Math.pow(Gk,t),new Il(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?t1:Math.pow(t1,t),new Il(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Eo(mO(t>=240?t-240:t+120,i,r),mO(t,i,r),mO(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Il(yW(this.h),PA(this.s),PA(this.l),Kk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Kk(this.opacity);return`${t===1?"hsl(":"hsla("}${yW(this.h)}, ${PA(this.s)*100}%, ${PA(this.l)*100}%${t===1?")":`, ${t})`}`}}));function yW(t){return t=(t||0)%360,t<0?t+360:t}function PA(t){return Math.max(0,Math.min(1,t||0))}function mO(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Uj=t=>()=>t;function q8e(t,e){return function(n){return t+n*e}}function G8e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function K8e(t){return(t=+t)==1?jle:function(e,n){return n-e?G8e(e,n,t):Uj(isNaN(e)?n:e)}}function jle(t,e){var n=e-t;return n?q8e(t,n):Uj(isNaN(t)?e:t)}const xW=(function t(e){var n=K8e(e);function r(i,s){var o=n((i=dL(i)).r,(s=dL(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=jle(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function W8e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Y8e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function J8e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=nv(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function X8e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Wk(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Q8e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=nv(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var fL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gO=new RegExp(fL.source,"g");function Z8e(t){return function(){return t}}function eje(t){return function(e){return t(e)+""}}function tje(t,e){var n=fL.lastIndex=gO.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=fL.exec(t))&&(i=gO.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Wk(r,i)})),n=gO.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?eje(l[0].x):Z8e(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}function nv(t,e){var n=typeof e,r;return e==null||n==="boolean"?Uj(e):(n==="number"?Wk:n==="string"?(r=r1(e))?(e=r,xW):tje:e instanceof r1?xW:e instanceof Date?X8e:Y8e(e)?W8e:Array.isArray(e)?J8e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Q8e:Wk)(t,e)}function Fj(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function nje(t,e){e===void 0&&(e=t,t=nv);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function rje(t){return function(){return t}}function Yk(t){return+t}var vW=[0,1];function Qs(t){return t}function hL(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:rje(isNaN(e)?NaN:.5)}function ije(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function sje(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=hL(i,r),s=n(o,s)):(r=hL(r,i),s=n(s,o)),function(a){return s(r(a))}}function oje(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=hL(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=sE(t,a,1,r)-1;return s[l](i[l](a))}}function aE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cN(){var t=vW,e=vW,n=nv,r,i,s,o=Qs,a,l,c;function u(){var m=Math.min(t.length,e.length);return o!==Qs&&(o=ije(t[0],t[m-1])),a=m>2?oje:sje,l=c=null,h}function h(m){return m==null||isNaN(m=+m)?s:(l||(l=a(t.map(r),e,n)))(r(o(m)))}return h.invert=function(m){return o(i((c||(c=a(e,t.map(r),Wk)))(m)))},h.domain=function(m){return arguments.length?(t=Array.from(m,Yk),u()):t.slice()},h.range=function(m){return arguments.length?(e=Array.from(m),u()):e.slice()},h.rangeRound=function(m){return e=Array.from(m),n=Fj,u()},h.clamp=function(m){return arguments.length?(o=m?!0:Qs,u()):o!==Qs},h.interpolate=function(m){return arguments.length?(n=m,u()):n},h.unknown=function(m){return arguments.length?(s=m,h):s},function(m,g){return r=m,i=g,u()}}function $j(){return cN()(Qs,Qs)}function aje(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Jk(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function kx(t){return t=Jk(Math.abs(t)),t?t[1]:NaN}function lje(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function cje(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var uje=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i1(t){if(!(e=uje.exec(t)))throw new Error("invalid format: "+t);var e;return new zj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}i1.prototype=zj.prototype;function zj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}zj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dje(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Ble;function fje(t,e){var n=Jk(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Ble=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Jk(t,Math.max(0,e+s-1))[0]}function bW(t,e){var n=Jk(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const wW={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:aje,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>bW(t*100,e),r:bW,s:fje,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function EW(t){return t}var SW=Array.prototype.map,AW=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hje(t){var e=t.grouping===void 0||t.thousands===void 0?EW:lje(SW.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?EW:cje(SW.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=i1(h);var m=h.fill,g=h.align,x=h.sign,v=h.symbol,b=h.zero,w=h.width,k=h.comma,C=h.precision,R=h.trim,B=h.type;B==="n"?(k=!0,B="g"):wW[B]||(C===void 0&&(C=12),R=!0,B="g"),(b||m==="0"&&g==="=")&&(b=!0,m="0",g="=");var O=v==="$"?n:v==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",F=v==="$"?r:/[%p]/.test(B)?o:"",H=wW[B],j=/[defgprs%]/.test(B);C=C===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function $(W){var V=O,U=F,T,_,L;if(B==="c")U=H(W)+U,W="";else{W=+W;var z=W<0||1/W<0;if(W=isNaN(W)?l:H(Math.abs(W),C),R&&(W=dje(W)),z&&+W==0&&x!=="+"&&(z=!1),V=(z?x==="("?x:a:x==="-"||x==="("?"":x)+V,U=(B==="s"?AW[8+Ble/3]:"")+U+(z&&x==="("?")":""),j){for(T=-1,_=W.length;++T<_;)if(L=W.charCodeAt(T),48>L||L>57){U=(L===46?i+W.slice(T+1):W.slice(T))+U,W=W.slice(0,T);break}}}k&&!b&&(W=e(W,1/0));var G=V.length+W.length+U.length,te=G<w?new Array(w-G+1).join(m):"";switch(k&&b&&(W=e(te+W,te.length?w-U.length:1/0),te=""),g){case"<":W=V+W+U+te;break;case"=":W=V+te+W+U;break;case"^":W=te.slice(0,G=te.length>>1)+V+W+U+te.slice(G);break;default:W=te+V+W+U;break}return s(W)}return $.toString=function(){return h+""},$}function u(h,m){var g=c((h=i1(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(kx(m)/3)))*3,v=Math.pow(10,-x),b=AW[8+x/3];return function(w){return g(v*w)+b}}return{format:c,formatPrefix:u}}var _A,Hj,Ule;pje({thousands:",",grouping:[3],currency:["$",""]});function pje(t){return _A=hje(t),Hj=_A.format,Ule=_A.formatPrefix,_A}function mje(t){return Math.max(0,-kx(Math.abs(t)))}function gje(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kx(e)/3)))*3-kx(Math.abs(t)))}function yje(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,kx(e)-kx(t))+1}function Fle(t,e,n,r){var i=cL(t,e,n),s;switch(r=i1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=gje(i,o))&&(r.precision=s),Ule(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=yje(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=mje(i))&&(r.precision=s-(r.type==="%")*2);break}}return Hj(r)}function Th(t){var e=t.domain;return t.ticks=function(n){var r=e();return aL(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Fle(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=lL(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function $le(){var t=$j();return t.copy=function(){return aE(t,$le())},il.apply(t,arguments),Th(t)}function zle(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Yk),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return zle(t).unknown(e)},t=arguments.length?Array.from(t,Yk):[0,1],Th(n)}function Hle(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function TW(t){return Math.log(t)}function kW(t){return Math.exp(t)}function xje(t){return-Math.log(-t)}function vje(t){return-Math.exp(-t)}function bje(t){return isFinite(t)?+("1e"+t):t<0?0:t}function wje(t){return t===10?bje:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Eje(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function CW(t){return(e,n)=>-t(-e,n)}function Vj(t){const e=t(TW,kW),n=e.domain;let r=10,i,s;function o(){return i=Eje(r),s=wje(r),n()[0]<0?(i=CW(i),s=CW(s),t(xje,vje)):t(TW,kW),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let m=i(c),g=i(u),x,v;const b=a==null?10:+a;let w=[];if(!(r%1)&&g-m<b){if(m=Math.floor(m),g=Math.ceil(g),c>0){for(;m<=g;++m)for(x=1;x<r;++x)if(v=m<0?x/s(-m):x*s(m),!(v<c)){if(v>u)break;w.push(v)}}else for(;m<=g;++m)for(x=r-1;x>=1;--x)if(v=m>0?x/s(-m):x*s(m),!(v<c)){if(v>u)break;w.push(v)}w.length*2<b&&(w=aL(c,u,b))}else w=aL(m,g,Math.min(g-m,b)).map(s);return h?w.reverse():w},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=i1(l)).precision==null&&(l.trim=!0),l=Hj(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let h=u/s(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=c?l(u):""}},e.nice=()=>n(Hle(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function Vle(){const t=Vj(cN()).domain([1,10]);return t.copy=()=>aE(t,Vle()).base(t.base()),il.apply(t,arguments),t}function NW(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function PW(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function qj(t){var e=1,n=t(NW(e),PW(e));return n.constant=function(r){return arguments.length?t(NW(e=+r),PW(e)):e},Th(n)}function qle(){var t=qj(cN());return t.copy=function(){return aE(t,qle()).constant(t.constant())},il.apply(t,arguments)}function _W(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Sje(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Aje(t){return t<0?-t*t:t*t}function Gj(t){var e=t(Qs,Qs),n=1;function r(){return n===1?t(Qs,Qs):n===.5?t(Sje,Aje):t(_W(n),_W(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Th(e)}function Kj(){var t=Gj(cN());return t.copy=function(){return aE(t,Kj()).exponent(t.exponent())},il.apply(t,arguments),t}function Tje(){return Kj.apply(null,arguments).exponent(.5)}function IW(t){return Math.sign(t)*t*t}function kje(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Gle(){var t=$j(),e=[0,1],n=!1,r;function i(s){var o=kje(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(IW(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Yk)).map(IW)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Gle(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},il.apply(i,arguments),Th(i)}function Kle(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=_8e(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[sE(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(rh),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Kle().domain(t).range(e).unknown(r)},il.apply(s,arguments)}function Wle(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[sE(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Wle().domain([t,e]).range(i).unknown(s)},il.apply(Th(o),arguments)}function Yle(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[sE(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Yle().domain(t).range(e).unknown(n)},il.apply(i,arguments)}const yO=new Date,xO=new Date;function Ti(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=s=>Ti(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(yO.setTime(+s),xO.setTime(+o),t(yO),t(xO),Math.floor(n(yO,xO))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Xk=Ti(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Xk.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ti(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Xk);Xk.range;const Ju=1e3,Wa=Ju*60,Xu=Wa*60,xd=Xu*24,Wj=xd*7,RW=xd*30,vO=xd*365,_p=Ti(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ju)},(t,e)=>(e-t)/Ju,t=>t.getUTCSeconds());_p.range;const Yj=Ti(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ju)},(t,e)=>{t.setTime(+t+e*Wa)},(t,e)=>(e-t)/Wa,t=>t.getMinutes());Yj.range;const Jj=Ti(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Wa)},(t,e)=>(e-t)/Wa,t=>t.getUTCMinutes());Jj.range;const Xj=Ti(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ju-t.getMinutes()*Wa)},(t,e)=>{t.setTime(+t+e*Xu)},(t,e)=>(e-t)/Xu,t=>t.getHours());Xj.range;const Qj=Ti(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Xu)},(t,e)=>(e-t)/Xu,t=>t.getUTCHours());Qj.range;const lE=Ti(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Wa)/xd,t=>t.getDate()-1);lE.range;const uN=Ti(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xd,t=>t.getUTCDate()-1);uN.range;const Jle=Ti(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xd,t=>Math.floor(t/xd));Jle.range;function Vm(t){return Ti(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Wa)/Wj)}const dN=Vm(0),Qk=Vm(1),Cje=Vm(2),Nje=Vm(3),Cx=Vm(4),Pje=Vm(5),_je=Vm(6);dN.range;Qk.range;Cje.range;Nje.range;Cx.range;Pje.range;_je.range;function qm(t){return Ti(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Wj)}const fN=qm(0),Zk=qm(1),Ije=qm(2),Rje=qm(3),Nx=qm(4),Oje=qm(5),Mje=qm(6);fN.range;Zk.range;Ije.range;Rje.range;Nx.range;Oje.range;Mje.range;const Zj=Ti(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Zj.range;const e6=Ti(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());e6.range;const vd=Ti(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());vd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ti(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});vd.range;const bd=Ti(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());bd.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ti(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});bd.range;function Xle(t,e,n,r,i,s){const o=[[_p,1,Ju],[_p,5,5*Ju],[_p,15,15*Ju],[_p,30,30*Ju],[s,1,Wa],[s,5,5*Wa],[s,15,15*Wa],[s,30,30*Wa],[i,1,Xu],[i,3,3*Xu],[i,6,6*Xu],[i,12,12*Xu],[r,1,xd],[r,2,2*xd],[n,1,Wj],[e,1,RW],[e,3,3*RW],[t,1,vO]];function a(c,u,h){const m=u<c;m&&([c,u]=[u,c]);const g=h&&typeof h.range=="function"?h:l(c,u,h),x=g?g.range(c,+u+1):[];return m?x.reverse():x}function l(c,u,h){const m=Math.abs(u-c)/h,g=Lj(([,,b])=>b).right(o,m);if(g===o.length)return t.every(cL(c/vO,u/vO,h));if(g===0)return Xk.every(Math.max(cL(c,u,h),1));const[x,v]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return x.every(v)}return[a,l]}const[Lje,Dje]=Xle(bd,e6,fN,Jle,Qj,Jj),[jje,Bje]=Xle(vd,Zj,dN,lE,Xj,Yj);function bO(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function wO(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Uje(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=Cb(i),u=Nb(i),h=Cb(s),m=Nb(s),g=Cb(o),x=Nb(o),v=Cb(a),b=Nb(a),w=Cb(l),k=Nb(l),C={a:z,A:G,b:te,B:K,c:null,d:BW,e:BW,f:l6e,g:x6e,G:b6e,H:s6e,I:o6e,j:a6e,L:Qle,m:c6e,M:u6e,p:q,q:M,Q:$W,s:zW,S:d6e,u:f6e,U:h6e,V:p6e,w:m6e,W:g6e,x:null,X:null,y:y6e,Y:v6e,Z:w6e,"%":FW},R={a:P,A:Y,b:X,B:re,c:null,d:UW,e:UW,f:T6e,g:L6e,G:j6e,H:E6e,I:S6e,j:A6e,L:ece,m:k6e,M:C6e,p:ae,q:Te,Q:$W,s:zW,S:N6e,u:P6e,U:_6e,V:I6e,w:R6e,W:O6e,x:null,X:null,y:M6e,Y:D6e,Z:B6e,"%":FW},B={a:$,A:W,b:V,B:U,c:T,d:DW,e:DW,f:t6e,g:LW,G:MW,H:jW,I:jW,j:Xje,L:e6e,m:Jje,M:Qje,p:j,q:Yje,Q:r6e,s:i6e,S:Zje,u:Vje,U:qje,V:Gje,w:Hje,W:Kje,x:_,X:L,y:LW,Y:MW,Z:Wje,"%":n6e};C.x=O(n,C),C.X=O(r,C),C.c=O(e,C),R.x=O(n,R),R.X=O(r,R),R.c=O(e,R);function O(ue,pe){return function(be){var se=[],ve=-1,Re=0,De=ue.length,Qe,it,et;for(be instanceof Date||(be=new Date(+be));++ve<De;)ue.charCodeAt(ve)===37&&(se.push(ue.slice(Re,ve)),(it=OW[Qe=ue.charAt(++ve)])!=null?Qe=ue.charAt(++ve):it=Qe==="e"?" ":"0",(et=pe[Qe])&&(Qe=et(be,it)),se.push(Qe),Re=ve+1);return se.push(ue.slice(Re,ve)),se.join("")}}function F(ue,pe){return function(be){var se=kb(1900,void 0,1),ve=H(se,ue,be+="",0),Re,De;if(ve!=be.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(pe&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Re=wO(kb(se.y,0,1)),De=Re.getUTCDay(),Re=De>4||De===0?Zk.ceil(Re):Zk(Re),Re=uN.offset(Re,(se.V-1)*7),se.y=Re.getUTCFullYear(),se.m=Re.getUTCMonth(),se.d=Re.getUTCDate()+(se.w+6)%7):(Re=bO(kb(se.y,0,1)),De=Re.getDay(),Re=De>4||De===0?Qk.ceil(Re):Qk(Re),Re=lE.offset(Re,(se.V-1)*7),se.y=Re.getFullYear(),se.m=Re.getMonth(),se.d=Re.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),De="Z"in se?wO(kb(se.y,0,1)).getUTCDay():bO(kb(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(De+5)%7:se.w+se.U*7-(De+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,wO(se)):bO(se)}}function H(ue,pe,be,se){for(var ve=0,Re=pe.length,De=be.length,Qe,it;ve<Re;){if(se>=De)return-1;if(Qe=pe.charCodeAt(ve++),Qe===37){if(Qe=pe.charAt(ve++),it=B[Qe in OW?pe.charAt(ve++):Qe],!it||(se=it(ue,be,se))<0)return-1}else if(Qe!=be.charCodeAt(se++))return-1}return se}function j(ue,pe,be){var se=c.exec(pe.slice(be));return se?(ue.p=u.get(se[0].toLowerCase()),be+se[0].length):-1}function $(ue,pe,be){var se=g.exec(pe.slice(be));return se?(ue.w=x.get(se[0].toLowerCase()),be+se[0].length):-1}function W(ue,pe,be){var se=h.exec(pe.slice(be));return se?(ue.w=m.get(se[0].toLowerCase()),be+se[0].length):-1}function V(ue,pe,be){var se=w.exec(pe.slice(be));return se?(ue.m=k.get(se[0].toLowerCase()),be+se[0].length):-1}function U(ue,pe,be){var se=v.exec(pe.slice(be));return se?(ue.m=b.get(se[0].toLowerCase()),be+se[0].length):-1}function T(ue,pe,be){return H(ue,e,pe,be)}function _(ue,pe,be){return H(ue,n,pe,be)}function L(ue,pe,be){return H(ue,r,pe,be)}function z(ue){return o[ue.getDay()]}function G(ue){return s[ue.getDay()]}function te(ue){return l[ue.getMonth()]}function K(ue){return a[ue.getMonth()]}function q(ue){return i[+(ue.getHours()>=12)]}function M(ue){return 1+~~(ue.getMonth()/3)}function P(ue){return o[ue.getUTCDay()]}function Y(ue){return s[ue.getUTCDay()]}function X(ue){return l[ue.getUTCMonth()]}function re(ue){return a[ue.getUTCMonth()]}function ae(ue){return i[+(ue.getUTCHours()>=12)]}function Te(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var pe=O(ue+="",C);return pe.toString=function(){return ue},pe},parse:function(ue){var pe=F(ue+="",!1);return pe.toString=function(){return ue},pe},utcFormat:function(ue){var pe=O(ue+="",R);return pe.toString=function(){return ue},pe},utcParse:function(ue){var pe=F(ue+="",!0);return pe.toString=function(){return ue},pe}}}var OW={"-":"",_:" ",0:"0"},Vi=/^\s*\d+/,Fje=/^%/,$je=/[\\^$*+?|[\]().{}]/g;function Fn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function zje(t){return t.replace($je,"\\$&")}function Cb(t){return new RegExp("^(?:"+t.map(zje).join("|")+")","i")}function Nb(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Hje(t,e,n){var r=Vi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Vje(t,e,n){var r=Vi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function qje(t,e,n){var r=Vi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Gje(t,e,n){var r=Vi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Kje(t,e,n){var r=Vi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function MW(t,e,n){var r=Vi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function LW(t,e,n){var r=Vi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Wje(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Yje(t,e,n){var r=Vi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Jje(t,e,n){var r=Vi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function DW(t,e,n){var r=Vi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Xje(t,e,n){var r=Vi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function jW(t,e,n){var r=Vi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Qje(t,e,n){var r=Vi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Zje(t,e,n){var r=Vi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function e6e(t,e,n){var r=Vi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function t6e(t,e,n){var r=Vi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function n6e(t,e,n){var r=Fje.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function r6e(t,e,n){var r=Vi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function i6e(t,e,n){var r=Vi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function BW(t,e){return Fn(t.getDate(),e,2)}function s6e(t,e){return Fn(t.getHours(),e,2)}function o6e(t,e){return Fn(t.getHours()%12||12,e,2)}function a6e(t,e){return Fn(1+lE.count(vd(t),t),e,3)}function Qle(t,e){return Fn(t.getMilliseconds(),e,3)}function l6e(t,e){return Qle(t,e)+"000"}function c6e(t,e){return Fn(t.getMonth()+1,e,2)}function u6e(t,e){return Fn(t.getMinutes(),e,2)}function d6e(t,e){return Fn(t.getSeconds(),e,2)}function f6e(t){var e=t.getDay();return e===0?7:e}function h6e(t,e){return Fn(dN.count(vd(t)-1,t),e,2)}function Zle(t){var e=t.getDay();return e>=4||e===0?Cx(t):Cx.ceil(t)}function p6e(t,e){return t=Zle(t),Fn(Cx.count(vd(t),t)+(vd(t).getDay()===4),e,2)}function m6e(t){return t.getDay()}function g6e(t,e){return Fn(Qk.count(vd(t)-1,t),e,2)}function y6e(t,e){return Fn(t.getFullYear()%100,e,2)}function x6e(t,e){return t=Zle(t),Fn(t.getFullYear()%100,e,2)}function v6e(t,e){return Fn(t.getFullYear()%1e4,e,4)}function b6e(t,e){var n=t.getDay();return t=n>=4||n===0?Cx(t):Cx.ceil(t),Fn(t.getFullYear()%1e4,e,4)}function w6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fn(e/60|0,"0",2)+Fn(e%60,"0",2)}function UW(t,e){return Fn(t.getUTCDate(),e,2)}function E6e(t,e){return Fn(t.getUTCHours(),e,2)}function S6e(t,e){return Fn(t.getUTCHours()%12||12,e,2)}function A6e(t,e){return Fn(1+uN.count(bd(t),t),e,3)}function ece(t,e){return Fn(t.getUTCMilliseconds(),e,3)}function T6e(t,e){return ece(t,e)+"000"}function k6e(t,e){return Fn(t.getUTCMonth()+1,e,2)}function C6e(t,e){return Fn(t.getUTCMinutes(),e,2)}function N6e(t,e){return Fn(t.getUTCSeconds(),e,2)}function P6e(t){var e=t.getUTCDay();return e===0?7:e}function _6e(t,e){return Fn(fN.count(bd(t)-1,t),e,2)}function tce(t){var e=t.getUTCDay();return e>=4||e===0?Nx(t):Nx.ceil(t)}function I6e(t,e){return t=tce(t),Fn(Nx.count(bd(t),t)+(bd(t).getUTCDay()===4),e,2)}function R6e(t){return t.getUTCDay()}function O6e(t,e){return Fn(Zk.count(bd(t)-1,t),e,2)}function M6e(t,e){return Fn(t.getUTCFullYear()%100,e,2)}function L6e(t,e){return t=tce(t),Fn(t.getUTCFullYear()%100,e,2)}function D6e(t,e){return Fn(t.getUTCFullYear()%1e4,e,4)}function j6e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Nx(t):Nx.ceil(t),Fn(t.getUTCFullYear()%1e4,e,4)}function B6e(){return"+0000"}function FW(){return"%"}function $W(t){return+t}function zW(t){return Math.floor(+t/1e3)}var Z0,nce,rce;U6e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function U6e(t){return Z0=Uje(t),nce=Z0.format,Z0.parse,rce=Z0.utcFormat,Z0.utcParse,Z0}function F6e(t){return new Date(t)}function $6e(t){return t instanceof Date?+t:+new Date(+t)}function t6(t,e,n,r,i,s,o,a,l,c){var u=$j(),h=u.invert,m=u.domain,g=c(".%L"),x=c(":%S"),v=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),k=c("%b %d"),C=c("%B"),R=c("%Y");function B(O){return(l(O)<O?g:a(O)<O?x:o(O)<O?v:s(O)<O?b:r(O)<O?i(O)<O?w:k:n(O)<O?C:R)(O)}return u.invert=function(O){return new Date(h(O))},u.domain=function(O){return arguments.length?m(Array.from(O,$6e)):m().map(F6e)},u.ticks=function(O){var F=m();return t(F[0],F[F.length-1],O??10)},u.tickFormat=function(O,F){return F==null?B:c(F)},u.nice=function(O){var F=m();return(!O||typeof O.range!="function")&&(O=e(F[0],F[F.length-1],O??10)),O?m(Hle(F,O)):u},u.copy=function(){return aE(u,t6(t,e,n,r,i,s,o,a,l,c))},u}function z6e(){return il.apply(t6(jje,Bje,vd,Zj,dN,lE,Xj,Yj,_p,nce).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function H6e(){return il.apply(t6(Lje,Dje,bd,e6,fN,uN,Qj,Jj,_p,rce).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hN(){var t=0,e=1,n,r,i,s,o=Qs,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:o(i===0?.5:(h=(s(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(o=h,c):o};function u(h){return function(m){var g,x;return arguments.length?([g,x]=m,o=h(g,x),c):[o(0),o(1)]}}return c.range=u(nv),c.rangeRound=u(Fj),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return s=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),c}}function kh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ice(){var t=Th(hN()(Qs));return t.copy=function(){return kh(t,ice())},_d.apply(t,arguments)}function sce(){var t=Vj(hN()).domain([1,10]);return t.copy=function(){return kh(t,sce()).base(t.base())},_d.apply(t,arguments)}function oce(){var t=qj(hN());return t.copy=function(){return kh(t,oce()).constant(t.constant())},_d.apply(t,arguments)}function n6(){var t=Gj(hN());return t.copy=function(){return kh(t,n6()).exponent(t.exponent())},_d.apply(t,arguments)}function V6e(){return n6.apply(null,arguments).exponent(.5)}function ace(){var t=[],e=Qs;function n(r){if(r!=null&&!isNaN(r=+r))return e((sE(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(rh),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>P8e(t,s/r))},n.copy=function(){return ace(e).domain(t)},_d.apply(n,arguments)}function pN(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,c=Qs,u,h=!1,m;function g(v){return isNaN(v=+v)?m:(v=.5+((v=+u(v))-s)*(r*v<r*s?a:l),c(h?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([t,e,n]=v,i=u(t=+t),s=u(e=+e),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(v){return arguments.length?(h=!!v,g):h},g.interpolator=function(v){return arguments.length?(c=v,g):c};function x(v){return function(b){var w,k,C;return arguments.length?([w,k,C]=b,c=nje(v,[w,k,C]),g):[c(0),c(.5),c(1)]}}return g.range=x(nv),g.rangeRound=x(Fj),g.unknown=function(v){return arguments.length?(m=v,g):m},function(v){return u=v,i=v(t),s=v(e),o=v(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g}}function lce(){var t=Th(pN()(Qs));return t.copy=function(){return kh(t,lce())},_d.apply(t,arguments)}function cce(){var t=Vj(pN()).domain([.1,1,10]);return t.copy=function(){return kh(t,cce()).base(t.base())},_d.apply(t,arguments)}function uce(){var t=qj(pN());return t.copy=function(){return kh(t,uce()).constant(t.constant())},_d.apply(t,arguments)}function r6(){var t=Gj(pN());return t.copy=function(){return kh(t,r6()).exponent(t.exponent())},_d.apply(t,arguments)}function q6e(){return r6.apply(null,arguments).exponent(.5)}const Jb=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jj,scaleDiverging:lce,scaleDivergingLog:cce,scaleDivergingPow:r6,scaleDivergingSqrt:q6e,scaleDivergingSymlog:uce,scaleIdentity:zle,scaleImplicit:uL,scaleLinear:$le,scaleLog:Vle,scaleOrdinal:Dj,scalePoint:R8e,scalePow:Kj,scaleQuantile:Kle,scaleQuantize:Wle,scaleRadial:Gle,scaleSequential:ice,scaleSequentialLog:sce,scaleSequentialPow:n6,scaleSequentialQuantile:ace,scaleSequentialSqrt:V6e,scaleSequentialSymlog:oce,scaleSqrt:Tje,scaleSymlog:qle,scaleThreshold:Yle,scaleTime:z6e,scaleUtc:H6e,tickFormat:Fle},Symbol.toStringTag,{value:"Module"}));var Id=t=>t.chartData,mN=Le([Id],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),i6=(t,e,n,r)=>r?mN(t):Id(t),dce=(t,e,n)=>n?mN(t):Id(t);function mh(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(cr(e)&&cr(n))return!0}return!1}function HW(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function fce(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(cr(n))i=n;else if(typeof n=="function")return;if(cr(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(mh(o))return o}}function G6e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(mh(r))return HW(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,a;if(i==="auto")e!=null&&(o=Math.min(...e));else if(At(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&nK.test(i)){var l=nK.exec(i);if(l==null||l[1]==null||e==null)o=void 0;else{var c=+l[1];o=e[0]-c}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(At(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&rK.test(s)){var u=rK.exec(s);if(u==null||u[1]==null||e==null)a=void 0;else{var h=+u[1];a=e[1]+h}}else a=e==null?void 0:e[1];var m=[o,a];if(mh(m))return e==null?m:HW(m,e,n)}}}var rv=1e9,K6e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o6,Cr=!0,el="[DecimalError] ",dm=el+"Invalid argument: ",s6=el+"Exponent out of range: ",iv=Math.floor,dp=Math.pow,W6e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ta,Li=1e7,Er=7,hce=9007199254740991,e2=iv(hce/Er),Nt={};Nt.absoluteValue=Nt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Nt.comparedTo=Nt.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Nt.decimalPlaces=Nt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Er;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Nt.dividedBy=Nt.div=function(t){return rd(this,new this.constructor(t))};Nt.dividedToIntegerBy=Nt.idiv=function(t){var e=this,n=e.constructor;return ar(rd(e,new n(t),0,1),n.precision)};Nt.equals=Nt.eq=function(t){return!this.cmp(t)};Nt.exponent=function(){return yi(this)};Nt.greaterThan=Nt.gt=function(t){return this.cmp(t)>0};Nt.greaterThanOrEqualTo=Nt.gte=function(t){return this.cmp(t)>=0};Nt.isInteger=Nt.isint=function(){return this.e>this.d.length-2};Nt.isNegative=Nt.isneg=function(){return this.s<0};Nt.isPositive=Nt.ispos=function(){return this.s>0};Nt.isZero=function(){return this.s===0};Nt.lessThan=Nt.lt=function(t){return this.cmp(t)<0};Nt.lessThanOrEqualTo=Nt.lte=function(t){return this.cmp(t)<1};Nt.logarithm=Nt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ta))throw Error(el+"NaN");if(n.s<1)throw Error(el+(n.s?"NaN":"-Infinity"));return n.eq(ta)?new r(0):(Cr=!1,e=rd(s1(n,s),s1(t,s),s),Cr=!0,ar(e,i))};Nt.minus=Nt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?gce(e,t):pce(e,(t.s=-t.s,t))};Nt.modulo=Nt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(el+"NaN");return n.s?(Cr=!1,e=rd(n,t,0,1).times(t),Cr=!0,n.minus(e)):ar(new r(n),i)};Nt.naturalExponential=Nt.exp=function(){return mce(this)};Nt.naturalLogarithm=Nt.ln=function(){return s1(this)};Nt.negated=Nt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Nt.plus=Nt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?pce(e,t):gce(e,(t.s=-t.s,t))};Nt.precision=Nt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(dm+t);if(e=yi(i)+1,r=i.d.length-1,n=r*Er+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Nt.squareRoot=Nt.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(el+"NaN")}for(t=yi(a),Cr=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=_c(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=iv((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(rd(a,s,o+2)).times(.5),_c(s.d).slice(0,o)===(e=_c(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(ar(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return Cr=!0,ar(r,n)};Nt.times=Nt.mul=function(t){var e,n,r,i,s,o,a,l,c,u=this,h=u.constructor,m=u.d,g=(t=new h(t)).d;if(!u.s||!t.s)return new h(0);for(t.s*=u.s,n=u.e+t.e,l=m.length,c=g.length,l<c&&(s=m,m=g,g=s,o=l,l=c,c=o),s=[],o=l+c,r=o;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+g[r]*m[i-r-1]+e,s[i--]=a%Li|0,e=a/Li|0;s[i]=(s[i]+e)%Li|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Cr?ar(t,h.precision):t};Nt.toDecimalPlaces=Nt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(zc(t,0,rv),e===void 0?e=r.rounding:zc(e,0,8),ar(n,t+yi(n)+1,e))};Nt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Pm(r,!0):(zc(t,0,rv),e===void 0?e=i.rounding:zc(e,0,8),r=ar(new i(r),t+1,e),n=Pm(r,!0,t+1)),n};Nt.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Pm(i):(zc(t,0,rv),e===void 0?e=s.rounding:zc(e,0,8),r=ar(new s(i),t+yi(i)+1,e),n=Pm(r.abs(),!1,t+yi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Nt.toInteger=Nt.toint=function(){var t=this,e=t.constructor;return ar(new e(t),yi(t)+1,e.rounding)};Nt.toNumber=function(){return+this};Nt.toPower=Nt.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(ta);if(a=new l(a),!a.s){if(t.s<1)throw Error(el+"Infinity");return a}if(a.eq(ta))return a;if(r=l.precision,t.eq(ta))return ar(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=u<0?-u:u)<=hce){for(i=new l(ta),e=Math.ceil(r/Er+4),Cr=!1;n%2&&(i=i.times(a),qW(i.d,e)),n=iv(n/2),n!==0;)a=a.times(a),qW(a.d,e);return Cr=!0,t.s<0?new l(ta).div(i):ar(i,r)}}else if(s<0)throw Error(el+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Cr=!1,i=t.times(s1(a,r+c)),Cr=!0,i=mce(i),i.s=s,i};Nt.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=yi(i),r=Pm(i,n<=s.toExpNeg||n>=s.toExpPos)):(zc(t,1,rv),e===void 0?e=s.rounding:zc(e,0,8),i=ar(new s(i),t,e),n=yi(i),r=Pm(i,t<=n||n<=s.toExpNeg,t)),r};Nt.toSignificantDigits=Nt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(zc(t,1,rv),e===void 0?e=r.rounding:zc(e,0,8)),ar(new r(n),t,e)};Nt.toString=Nt.valueOf=Nt.val=Nt.toJSON=Nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=yi(t),n=t.constructor;return Pm(t,e<=n.toExpNeg||e>=n.toExpPos)};function pce(t,e){var n,r,i,s,o,a,l,c,u=t.constructor,h=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Cr?ar(e,h):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,i=o,a=l.length),o=Math.ceil(h/Er),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/Li|0,l[s]%=Li;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Cr?ar(e,h):e}function zc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(dm+t)}function _c(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=Er-r.length,n&&(s+=Nf(n)),s+=r;o=t[e],r=o+"",n=Er-r.length,n&&(s+=Nf(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var rd=(function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%Li|0,o=s/Li|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*Li+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,c,u,h,m,g,x,v,b,w,k,C,R,B,O,F,H,j=r.constructor,$=r.s==i.s?1:-1,W=r.d,V=i.d;if(!r.s)return new j(r);if(!i.s)throw Error(el+"Division by zero");for(l=r.e-i.e,F=V.length,B=W.length,g=new j($),x=g.d=[],c=0;V[c]==(W[c]||0);)++c;if(V[c]>(W[c]||0)&&--l,s==null?k=s=j.precision:o?k=s+(yi(r)-yi(i))+1:k=s,k<0)return new j(0);if(k=k/Er+2|0,c=0,F==1)for(u=0,V=V[0],k++;(c<B||u)&&k--;c++)C=u*Li+(W[c]||0),x[c]=C/V|0,u=C%V|0;else{for(u=Li/(V[0]+1)|0,u>1&&(V=t(V,u),W=t(W,u),F=V.length,B=W.length),R=F,v=W.slice(0,F),b=v.length;b<F;)v[b++]=0;H=V.slice(),H.unshift(0),O=V[0],V[1]>=Li/2&&++O;do u=0,a=e(V,v,F,b),a<0?(w=v[0],F!=b&&(w=w*Li+(v[1]||0)),u=w/O|0,u>1?(u>=Li&&(u=Li-1),h=t(V,u),m=h.length,b=v.length,a=e(h,v,m,b),a==1&&(u--,n(h,F<m?H:V,m))):(u==0&&(a=u=1),h=V.slice()),m=h.length,m<b&&h.unshift(0),n(v,h,b),a==-1&&(b=v.length,a=e(V,v,F,b),a<1&&(u++,n(v,F<b?H:V,b))),b=v.length):a===0&&(u++,v=[0]),x[c++]=u,a&&v[0]?v[b++]=W[R]||0:(v=[W[R]],b=1);while((R++<B||v[0]!==void 0)&&k--)}return x[0]||x.shift(),g.e=l,ar(g,o?s+yi(g)+1:s)}})();function mce(t,e){var n,r,i,s,o,a,l=0,c=0,u=t.constructor,h=u.precision;if(yi(t)>16)throw Error(s6+yi(t));if(!t.s)return new u(ta);for(Cr=!1,a=h,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(dp(2,c))/Math.LN10*2+5|0,a+=r,n=i=s=new u(ta),u.precision=a;;){if(i=ar(i.times(t),a),n=n.times(++l),o=s.plus(rd(i,n,a)),_c(o.d).slice(0,a)===_c(s.d).slice(0,a)){for(;c--;)s=ar(s.times(s),a);return u.precision=h,e==null?(Cr=!0,ar(s,h)):s}s=o}}function yi(t){for(var e=t.e*Er,n=t.d[0];n>=10;n/=10)e++;return e}function EO(t,e,n){if(e>t.LN10.sd())throw Cr=!0,n&&(t.precision=n),Error(el+"LN10 precision limit exceeded");return ar(new t(t.LN10),e)}function Nf(t){for(var e="";t--;)e+="0";return e}function s1(t,e){var n,r,i,s,o,a,l,c,u,h=1,m=10,g=t,x=g.d,v=g.constructor,b=v.precision;if(g.s<1)throw Error(el+(g.s?"NaN":"-Infinity"));if(g.eq(ta))return new v(0);if(e==null?(Cr=!1,c=b):c=e,g.eq(10))return e==null&&(Cr=!0),EO(v,c);if(c+=m,v.precision=c,n=_c(x),r=n.charAt(0),s=yi(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=_c(g.d),r=n.charAt(0),h++;s=yi(g),r>1?(g=new v("0."+n),s++):g=new v(r+"."+n.slice(1))}else return l=EO(v,c+2,b).times(s+""),g=s1(new v(r+"."+n.slice(1)),c-m).plus(l),v.precision=b,e==null?(Cr=!0,ar(g,b)):g;for(a=o=g=rd(g.minus(ta),g.plus(ta),c),u=ar(g.times(g),c),i=3;;){if(o=ar(o.times(u),c),l=a.plus(rd(o,new v(i),c)),_c(l.d).slice(0,c)===_c(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(EO(v,c+2,b).times(s+""))),a=rd(a,new v(h),c),v.precision=b,e==null?(Cr=!0,ar(a,b)):a;a=l,i+=2}}function VW(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=iv(n/Er),t.d=[],r=(n+1)%Er,n<0&&(r+=Er),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Er;r<i;)t.d.push(+e.slice(r,r+=Er));e=e.slice(r),r=Er-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Cr&&(t.e>e2||t.e<-e2))throw Error(s6+n)}else t.s=0,t.e=0,t.d=[0];return t}function ar(t,e,n){var r,i,s,o,a,l,c,u,h=t.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Er,i=e,c=h[u=0];else{if(u=Math.ceil((r+1)/Er),s=h.length,u>=s)return t;for(c=s=h[u],o=1;s>=10;s/=10)o++;r%=Er,i=r-Er+o}if(n!==void 0&&(s=dp(10,o-i-1),a=c/s%10|0,l=e<0||h[u+1]!==void 0||c%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?c/dp(10,o-i):0:h[u-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(s=yi(t),h.length=1,e=e-s-1,h[0]=dp(10,(Er-e%Er)%Er),t.e=iv(-e/Er)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=u,s=1,u--):(h.length=u+1,s=dp(10,Er-r),h[u]=i>0?(c/dp(10,o-i)%dp(10,i)|0)*s:0),l)for(;;)if(u==0){(h[0]+=s)==Li&&(h[0]=1,++t.e);break}else{if(h[u]+=s,h[u]!=Li)break;h[u--]=0,s=1}for(r=h.length;h[--r]===0;)h.pop();if(Cr&&(t.e>e2||t.e<-e2))throw Error(s6+yi(t));return t}function gce(t,e){var n,r,i,s,o,a,l,c,u,h,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Cr?ar(e,g):e;if(l=t.d,h=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,a=h.length):(n=h,r=c,a=l.length),i=Math.max(Math.ceil(g/Er),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=h.length,u=i<a,u&&(a=i),i=0;i<a;i++)if(l[i]!=h[i]){u=l[i]<h[i];break}o=0}for(u&&(n=l,l=h,h=n,e.s=-e.s),a=l.length,i=h.length-a;i>0;--i)l[a++]=0;for(i=h.length;i>o;){if(l[--i]<h[i]){for(s=i;s&&l[--s]===0;)l[s]=Li-1;--l[s],l[i]+=Li}l[i]-=h[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Cr?ar(e,g):e):new m(0)}function Pm(t,e,n){var r,i=yi(t),s=_c(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Nf(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Nf(-i-1)+s,n&&(r=n-o)>0&&(s+=Nf(r))):i>=o?(s+=Nf(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Nf(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Nf(r))),t.s<0?"-"+s:s}function qW(t,e){if(t.length>e)return t.length=e,!0}function yce(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(dm+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return VW(o,s.toString())}else if(typeof s!="string")throw Error(dm+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,W6e.test(s))VW(o,s);else throw Error(dm+s)}if(i.prototype=Nt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=yce,i.config=i.set=Y6e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Y6e(t){if(!t||typeof t!="object")throw Error(el+"Object expected");var e,n,r,i=["precision",1,rv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(iv(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(dm+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(dm+n+": "+r);return this}var o6=yce(K6e);ta=new o6(1);const Qn=o6;var J6e=t=>t,xce={},vce=t=>t===xce,GW=t=>function e(){return arguments.length===0||arguments.length===1&&vce(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},bce=(t,e)=>t===1?e:GW(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(o=>o!==xce).length;return s>=t?e(...r):bce(t-s,GW(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=r.map(u=>vce(u)?a.shift():u);return e(...c,...a)}))}),X6e=t=>bce(t.length,t),pL=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Q6e=X6e((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),Z6e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return J6e;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce((a,l)=>l(a),s(...arguments))}};function wce(t){var e;return t===0?e=1:e=Math.floor(new Qn(t).abs().log(10).toNumber())+1,e}function Ece(t,e,n){for(var r=new Qn(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Sce=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},Ace=(t,e,n)=>{if(t.lte(0))return new Qn(0);var r=wce(t.toNumber()),i=new Qn(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new Qn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?new Qn(l.toNumber()):new Qn(Math.ceil(l.toNumber()))},eBe=(t,e,n)=>{var r=new Qn(1),i=new Qn(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Qn(10).pow(wce(t)-1),i=new Qn(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Qn(Math.floor(t)))}else t===0?i=new Qn(Math.floor((e-1)/2)):n||(i=new Qn(Math.floor(t)));var o=Math.floor((e-1)/2),a=Z6e(Q6e(l=>i.add(new Qn(l-o).mul(r)).toNumber()),pL);return a(0,e)},Tce=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Qn(0),tickMin:new Qn(0),tickMax:new Qn(0)};var o=Ace(new Qn(n).sub(e).div(r-1),i,s),a;e<=0&&n>=0?a=new Qn(0):(a=new Qn(e).add(n).div(2),a=a.sub(new Qn(a).mod(o)));var l=Math.ceil(a.sub(e).div(o).toNumber()),c=Math.ceil(new Qn(n).sub(a).div(o).toNumber()),u=l+c+1;return u>r?Tce(e,n,r,i,s+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:o,tickMin:a.sub(new Qn(l).mul(o)),tickMax:a.add(new Qn(c).mul(o))})},tBe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[a,l]=Sce([n,r]);if(a===-1/0||l===1/0){var c=l===1/0?[a,...pL(0,i-1).map(()=>1/0)]:[...pL(0,i-1).map(()=>-1/0),l];return n>r?c.reverse():c}if(a===l)return eBe(a,i,s);var{step:u,tickMin:h,tickMax:m}=Tce(a,l,o,s,0),g=Ece(h,m.add(new Qn(.1).mul(u)),u);return n>r?g.reverse():g},nBe=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,a]=Sce([r,i]);if(o===-1/0||a===1/0)return[r,i];if(o===a)return[o];var l=Math.max(n,2),c=Ace(new Qn(a).sub(o).div(l-1),s,0),u=[...Ece(new Qn(o),new Qn(a),c),a];return s===!1&&(u=u.map(h=>Math.round(h))),r>i?u.reverse():u},kce=t=>t.rootProps.maxBarSize,rBe=t=>t.rootProps.barGap,Cce=t=>t.rootProps.barCategoryGap,iBe=t=>t.rootProps.barSize,cE=t=>t.rootProps.stackOffset,Nce=t=>t.rootProps.reverseStackOrder,a6=t=>t.options.chartName,l6=t=>t.rootProps.syncId,Pce=t=>t.rootProps.syncMethod,c6=t=>t.options.eventEmitter,sBe=t=>t.rootProps.baseValue,ii={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Vu={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Yo={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},gN=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},oBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Vu.angleAxisId,includeHidden:!1,name:void 0,reversed:Vu.reversed,scale:Vu.scale,tick:Vu.tick,tickCount:void 0,ticks:void 0,type:Vu.type,unit:void 0},aBe={allowDataOverflow:Yo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yo.scale,tick:Yo.tick,tickCount:Yo.tickCount,ticks:void 0,type:Yo.type,unit:void 0},lBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Vu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vu.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vu.scale,tick:Vu.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},cBe={allowDataOverflow:Yo.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yo.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yo.scale,tick:Yo.tick,tickCount:Yo.tickCount,ticks:void 0,type:"category",unit:void 0},u6=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?lBe:oBe,d6=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?cBe:aBe,yN=t=>t.polarOptions,f6=Le([Nd,Pd,Ai],kle),_ce=Le([yN,f6],(t,e)=>{if(t!=null)return Ds(t.innerRadius,e,0)}),Ice=Le([yN,f6],(t,e)=>{if(t!=null)return Ds(t.outerRadius,e,e*.8)}),uBe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Rce=Le([yN],uBe);Le([u6,Rce],gN);var Oce=Le([f6,_ce,Ice],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Le([d6,Oce],gN);var Mce=Le([An,yN,_ce,Ice,Nd,Pd],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=e;return{cx:Ds(o,i,i/2),cy:Ds(a,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),_r=(t,e)=>e,uE=(t,e,n)=>n;function xN(t){return t==null?void 0:t.id}function Lce(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,o=new Map;return t.forEach(a=>{var l,c=(l=a.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=xN(a);c.forEach((h,m)=>{var g=s==null||i?m:String(Wn(h,s,null)),x=Wn(h,a.dataKey,0),v;o.has(g)?v=o.get(g):v={},Object.assign(v,{[u]:x}),o.set(g,v)})}}),Array.from(o.values())}function vN(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var bN=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function wN(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function dBe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var ki=t=>{var e=An(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},sv=t=>t.tooltip.settings.axisId;function KW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KW(Object(n),!0).forEach(function(r){fBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fBe(t,e,n){return(e=hBe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hBe(t){var e=pBe(t,"string");return typeof e=="symbol"?e:e+""}function pBe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mL=[0,"auto"],_i={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Dce=(t,e)=>t.cartesianAxis.xAxis[e],Rd=(t,e)=>{var n=Dce(t,e);return n??_i},Ii={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:mL,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:nE},jce=(t,e)=>t.cartesianAxis.yAxis[e],Od=(t,e)=>{var n=jce(t,e);return n??Ii},mBe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},h6=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??mBe},Br=(t,e,n)=>{switch(e){case"xAxis":return Rd(t,n);case"yAxis":return Od(t,n);case"zAxis":return h6(t,n);case"angleAxis":return u6(t,n);case"radiusAxis":return d6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},gBe=(t,e,n)=>{switch(e){case"xAxis":return Rd(t,n);case"yAxis":return Od(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},dE=(t,e,n)=>{switch(e){case"xAxis":return Rd(t,n);case"yAxis":return Od(t,n);case"angleAxis":return u6(t,n);case"radiusAxis":return d6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Bce=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function p6(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var fE=t=>t.graphicalItems.cartesianItems,yBe=Le([_r,uE],p6),m6=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),hE=Le([fE,Br,yBe],m6,{memoizeOptions:{resultEqualityCheck:wN}}),Uce=Le([hE],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(vN)),Fce=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),xBe=Le([hE],Fce),g6=t=>t.map(e=>e.data).filter(Boolean).flat(1),vBe=Le([hE],g6,{memoizeOptions:{resultEqualityCheck:wN}}),y6=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},x6=Le([vBe,i6],y6),v6=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Wn(i,r)}))):t.map(r=>({value:r})),EN=Le([x6,Br,hE],v6);function $ce(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function IT(t){if(Fc(t)||t instanceof Date){var e=Number(t);if(cr(e))return e}}function WW(t){if(Array.isArray(t)){var e=[IT(t[0]),IT(t[1])];return mh(e)?e:void 0}var n=IT(t);if(n!=null)return[n,n]}function wd(t){return t.map(IT).filter(L4e)}function bBe(t,e,n){return!n||typeof e!="number"||Qa(e)?[]:n.length?wd(n.flatMap(r=>{var i=Wn(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!cr(s)||!cr(o)))return[e-s,e+o]})):[]}var Ci=t=>{var e=ki(t),n=sv(t);return dE(t,e,n)},pE=Le([Ci],t=>t==null?void 0:t.dataKey),wBe=Le([Uce,i6,Ci],Lce),zce=(t,e,n,r)=>{var i={},s=e.reduce((o,a)=>{if(a.stackId==null)return o;var l=o[a.stackId];return l==null&&(l=[]),l.push(a),o[a.stackId]=l,o},i);return Object.fromEntries(Object.entries(s).map(o=>{var[a,l]=o,c=r?[...l].reverse():l,u=c.map(xN);return[a,{stackedData:eLe(t,u,n),graphicalItems:c}]}))},n2=Le([wBe,Uce,cE,Nce],zce),Hce=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var o=iLe(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},EBe=Le([Br],t=>t.allowDataOverflow),b6=t=>{var e;if(t==null||!("domain"in t))return mL;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=wd(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:mL},w6=Le([Br],b6),E6=Le([w6,EBe],fce),SBe=Le([n2,Id,_r,E6],Hce,{memoizeOptions:{resultEqualityCheck:bN}}),SN=t=>t.errorBars,ABe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>$ce(n,r)),r2=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},S6=(t,e,n,r,i)=>{var s,o;if(n.length>0&&t.forEach(a=>{n.forEach(l=>{var c,u,h=(c=r[l.id])===null||c===void 0?void 0:c.filter(w=>$ce(i,w)),m=Wn(a,(u=e.dataKey)!==null&&u!==void 0?u:l.dataKey),g=bBe(a,m,h);if(g.length>=2){var x=Math.min(...g),v=Math.max(...g);(s==null||x<s)&&(s=x),(o==null||v>o)&&(o=v)}var b=WW(m);b!=null&&(s=s==null?b[0]:Math.min(s,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(a=>{var l=WW(Wn(a,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),o=o==null?l[1]:Math.max(o,l[1]))}),cr(s)&&cr(o))return[s,o]},TBe=Le([x6,Br,xBe,SN,_r],S6,{memoizeOptions:{resultEqualityCheck:bN}});function kBe(t){var{value:e}=t;if(Fc(e)||e instanceof Date)return e}var CBe=(t,e,n)=>{var r=t.map(kBe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&rae(r))?_le(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},Vce=t=>t.referenceElements.dots,ov=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),NBe=Le([Vce,_r,uE],ov),qce=t=>t.referenceElements.areas,PBe=Le([qce,_r,uE],ov),Gce=t=>t.referenceElements.lines,_Be=Le([Gce,_r,uE],ov),Kce=(t,e)=>{if(t!=null){var n=wd(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},IBe=Le(NBe,_r,Kce),Wce=(t,e)=>{if(t!=null){var n=wd(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},RBe=Le([PBe,_r],Wce);function OBe(t){var e;if(t.x!=null)return wd([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:wd(n)}function MBe(t){var e;if(t.y!=null)return wd([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:wd(n)}var Yce=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?OBe(r):MBe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},LBe=Le([_Be,_r],Yce),DBe=Le(IBe,LBe,RBe,(t,e,n)=>r2(t,n,e)),A6=(t,e,n,r,i,s,o,a)=>{if(n!=null)return n;var l=o==="vertical"&&a==="xAxis"||o==="horizontal"&&a==="yAxis",c=l?r2(r,s,i):r2(s,i);return G6e(e,c,t.allowDataOverflow)},jBe=Le([Br,w6,E6,SBe,TBe,DBe,An,_r],A6,{memoizeOptions:{resultEqualityCheck:bN}}),BBe=[0,1],T6=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:a,type:l}=t,c=Kc(e,s);if(c&&a==null){var u;return _le(0,(u=n==null?void 0:n.length)!==null&&u!==void 0?u:0)}return l==="category"?CBe(r,t,c):i==="expand"?BBe:o}},k6=Le([Br,An,x6,EN,cE,_r,jBe],T6),Jce=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(X1(s));return a in Jb?a:"point"}}},av=Le([Br,An,Bce,a6,_r],Jce);function UBe(t){if(t!=null){if(t in Jb)return Jb[t]();var e="scale".concat(X1(t));if(e in Jb)return Jb[e]()}}function C6(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=UBe(e);if(i!=null){var s=i.domain(n).range(r);return YMe(s),s}}}var N6=(t,e,n)=>{var r=b6(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&mh(t))return tBe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&mh(t))return nBe(t,e.tickCount,e.allowDecimals)}},P6=Le([k6,dE,av],N6),_6=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&mh(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],o=e[1],a=n[n.length-1];return[Math.min(i,s),Math.max(o,a)]}return e},FBe=Le([Br,k6,P6,_r],_6),$Be=Le(EN,Br,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(wd(t.map(h=>h.value))).sort((h,m)=>h-m),i=r[0],s=r[r.length-1];if(i==null||s==null)return 1/0;var o=s-i;if(o===0)return 1/0;for(var a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];if(!(l==null||c==null)){var u=c-l;n=Math.min(n,u)}}return n/o}}),Xce=Le($Be,An,Cce,Ai,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!cr(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=Ds(n,t*s),a=t*s/2;return a-o-(a-o)/s*o}return 0}),zBe=(t,e,n)=>{var r=Rd(t,e);return r==null||typeof r.padding!="string"?0:Xce(t,"xAxis",e,n,r.padding)},HBe=(t,e,n)=>{var r=Od(t,e);return r==null||typeof r.padding!="string"?0:Xce(t,"yAxis",e,n,r.padding)},VBe=Le(Rd,zBe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),qBe=Le(Od,HBe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),GBe=Le([Ai,VBe,rN,nN,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),KBe=Le([Ai,An,qBe,rN,nN,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),mE=(t,e,n,r)=>{var i;switch(e){case"xAxis":return GBe(t,n,r);case"yAxis":return KBe(t,n,r);case"zAxis":return(i=h6(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return Rce(t);case"radiusAxis":return Oce(t,n);default:return}},Qce=Le([Br,mE],gN),AN=Le([Br,av,FBe,Qce],C6);Le([hE,SN,_r],ABe);function Zce(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var TN=(t,e)=>e,kN=(t,e,n)=>n,WBe=Le(eN,TN,kN,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Zce)),YBe=Le(tN,TN,kN,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Zce)),eue=(t,e)=>({width:t.width,height:e.height}),JBe=(t,e)=>{var n=typeof e.width=="number"?e.width:nE;return{width:n,height:t.height}},tue=Le(Ai,Rd,eue),XBe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},QBe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},ZBe=Le(Pd,Ai,WBe,TN,kN,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=eue(e,a);o==null&&(o=XBe(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),s}),e7e=Le(Nd,Ai,YBe,TN,kN,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=JBe(e,a);o==null&&(o=QBe(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),s}),t7e=(t,e)=>{var n=Rd(t,e);if(n!=null)return ZBe(t,n.orientation,n.mirror)},n7e=Le([Ai,Rd,t7e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),r7e=(t,e)=>{var n=Od(t,e);if(n!=null)return e7e(t,n.orientation,n.mirror)},i7e=Le([Ai,Od,r7e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),nue=Le(Ai,Od,(t,e)=>{var n=typeof e.width=="number"?e.width:nE;return{width:n,height:t.height}}),YW=(t,e,n)=>{switch(e){case"xAxis":return tue(t,n).width;case"yAxis":return nue(t,n).height;default:return}},rue=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,a=Kc(t,r),l=e.map(c=>c.value);if(o&&a&&s==="category"&&i&&rae(l))return l}},I6=Le([An,EN,Br,_r],rue),iue=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=Kc(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(a=>a.value)}},R6=Le([An,EN,dE,_r],iue),JW=Le([An,gBe,av,AN,I6,R6,mE,P6,_r],(t,e,n,r,i,s,o,a,l)=>{if(e!=null){var c=Kc(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:a,range:o,realScaleType:n,scale:r}}}),s7e=(t,e,n,r,i,s,o,a,l)=>{if(!(e==null||r==null)){var c=Kc(t,l),{type:u,ticks:h,tickCount:m}=e,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,x=u==="category"&&r.bandwidth?r.bandwidth()/g:0;x=l==="angleAxis"&&s!=null&&s.length>=2?$i(s[0]-s[1])*2*x:x;var v=h||i;if(v){var b=v.map((w,k)=>{var C=o?o.indexOf(w):w;return{index:k,coordinate:r(C)+x,value:w,offset:x}});return b.filter(w=>cr(w.coordinate))}return c&&a?a.map((w,k)=>({coordinate:r(w)+x,value:w,index:k,offset:x})).filter(w=>cr(w.coordinate)):r.ticks?r.ticks(m).map(w=>({coordinate:r(w)+x,value:w,offset:x})):r.domain().map((w,k)=>({coordinate:r(w)+x,value:o?o[w]:w,index:k,offset:x}))}},sue=Le([An,dE,av,AN,P6,mE,I6,R6,_r],s7e),o7e=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=Kc(t,o),{tickCount:l}=e,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?$i(r[0]-r[1])*2*c:c,a&&s?s.map((u,h)=>({coordinate:n(u)+c,value:u,index:h,offset:c})):n.ticks?n.ticks(l).map(u=>({coordinate:n(u)+c,value:u,offset:c})):n.domain().map((u,h)=>({coordinate:n(u)+c,value:i?i[u]:u,index:h,offset:c}))}},Hc=Le([An,dE,AN,mE,I6,R6,_r],o7e),Vc=Le(Br,AN,(t,e)=>{if(!(t==null||e==null))return t2(t2({},t),{},{scale:e})}),a7e=Le([Br,av,k6,Qce],C6);Le((t,e,n)=>h6(t,n),a7e,(t,e)=>{if(!(t==null||e==null))return t2(t2({},t),{},{scale:e})});var l7e=Le([An,eN,tN],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),oue=t=>t.options.defaultTooltipEventType,aue=t=>t.options.validateTooltipEventTypes;function lue(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function O6(t,e){var n=oue(t),r=aue(t);return lue(e,n,r)}function c7e(t){return Rt(e=>O6(e,t))}var cue=(t,e)=>{var n,r=Number(e);if(!(Qa(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},u7e=t=>t.tooltip.settings,Of={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},d7e={itemInteraction:{click:Of,hover:Of},axisInteraction:{click:Of,hover:Of},keyboardInteraction:Of,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},uue=Co({name:"tooltip",initialState:d7e,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Tr()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ll(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Tr()},removeTooltipEntrySettings:{reducer(t,e){var n=Ll(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Tr()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:f7e,replaceTooltipEntrySettings:h7e,removeTooltipEntrySettings:p7e,setTooltipSettingsState:m7e,setActiveMouseOverItemIndex:due,mouseLeaveItem:g7e,mouseLeaveChart:fue,setActiveClickItemIndex:y7e,setMouseOverAxisIndex:hue,setMouseClickAxisIndex:x7e,setSyncInteraction:gL,setKeyboardInteraction:yL}=uue.actions,v7e=uue.reducer;function XW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XW(Object(n),!0).forEach(function(r){b7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b7e(t,e,n){return(e=w7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w7e(t){var e=E7e(t,"string");return typeof e=="symbol"?e:e+""}function E7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function S7e(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function A7e(t){return t.index!=null}var pue=(t,e,n,r)=>{if(e==null)return Of;var i=S7e(t,e,n);if(i==null)return Of;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(A7e(i)){if(s)return IA(IA({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return IA(IA({},Of),{},{coordinate:i.coordinate})};function T7e(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function k7e(t,e){var n=T7e(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),o=Math.max(r,i);return n>=s&&n<=o}function C7e(t,e,n){if(n==null||e==null)return!0;var r=Wn(t,e);return r==null||!mh(n)?!0:k7e(r,n)}var M6=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!cr(s))return i;var o=0,a=1/0;e.length>0&&(a=e.length-1);var l=Math.max(o,Math.min(s,a)),c=e[l];return c==null||C7e(c,n,r)?String(l):null},mue=(t,e,n,r,i,s,o,a)=>{if(!(s==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,s);if(c!=null)return c;var u=i==null?void 0:i[Number(s)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},gue=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var a;return((a=o.settings)===null||a===void 0?void 0:a.graphicalItemId)===i})},gE=t=>t.options.tooltipPayloadSearcher,lv=t=>t.tooltip;function QW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QW(Object(n),!0).forEach(function(r){N7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N7e(t,e,n){return(e=P7e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P7e(t){var e=_7e(t,"string");return typeof e=="symbol"?e:e+""}function _7e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I7e(t,e){return t??e}var yue=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,h=[];return t.reduce((m,g)=>{var x,{dataDefinedOnItem:v,settings:b}=g,w=I7e(v,a),k=Array.isArray(w)?Jae(w,c,u):w,C=(x=b==null?void 0:b.dataKey)!==null&&x!==void 0?x:r,R=b==null?void 0:b.nameKey,B;if(r&&Array.isArray(k)&&!Array.isArray(k[0])&&o==="axis"?B=iae(k,r,i):B=s(k,e,l,R),Array.isArray(B))B.forEach(F=>{var H=ZW(ZW({},b),{},{name:F.name,unit:F.unit,color:void 0,fill:void 0});m.push(iK({tooltipEntrySettings:H,dataKey:F.dataKey,payload:F.payload,value:Wn(F.payload,F.dataKey),name:F.name}))});else{var O;m.push(iK({tooltipEntrySettings:b,dataKey:C,payload:B,value:Wn(B,C),name:(O=Wn(B,R))!==null&&O!==void 0?O:b==null?void 0:b.name}))}return m},h)}},L6=Le([Ci,An,Bce,a6,ki],Jce),R7e=Le([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),O7e=Le([ki,sv],p6),cv=Le([R7e,Ci,O7e],m6,{memoizeOptions:{resultEqualityCheck:wN}}),M7e=Le([cv],t=>t.filter(vN)),L7e=Le([cv],g6,{memoizeOptions:{resultEqualityCheck:wN}}),uv=Le([L7e,Id],y6),D7e=Le([M7e,Id,Ci],Lce),D6=Le([uv,Ci,cv],v6),xue=Le([Ci],b6),j7e=Le([Ci],t=>t.allowDataOverflow),vue=Le([xue,j7e],fce),B7e=Le([cv],t=>t.filter(vN)),U7e=Le([D7e,B7e,cE,Nce],zce),F7e=Le([U7e,Id,ki,vue],Hce),$7e=Le([cv],Fce),z7e=Le([uv,Ci,$7e,SN,ki],S6,{memoizeOptions:{resultEqualityCheck:bN}}),H7e=Le([Vce,ki,sv],ov),V7e=Le([H7e,ki],Kce),q7e=Le([qce,ki,sv],ov),G7e=Le([q7e,ki],Wce),K7e=Le([Gce,ki,sv],ov),W7e=Le([K7e,ki],Yce),Y7e=Le([V7e,W7e,G7e],r2),J7e=Le([Ci,xue,vue,F7e,z7e,Y7e,An,ki],A6),yE=Le([Ci,An,uv,D6,cE,ki,J7e],T6),X7e=Le([yE,Ci,L6],N6),Q7e=Le([Ci,yE,X7e,ki],_6),bue=t=>{var e=ki(t),n=sv(t),r=!1;return mE(t,e,n,r)},wue=Le([Ci,bue],gN),Eue=Le([Ci,L6,Q7e,wue],C6),Z7e=Le([An,D6,Ci,ki],rue),eUe=Le([An,D6,Ci,ki],iue),tUe=(t,e,n,r,i,s,o,a)=>{if(e){var{type:l}=e,c=Kc(t,a);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return h=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?$i(i[0]-i[1])*2*h:h,c&&o?o.map((m,g)=>({coordinate:r(m)+h,value:m,index:g,offset:h})):r.domain().map((m,g)=>({coordinate:r(m)+h,value:s?s[m]:m,index:g,offset:h}))}}},Md=Le([An,Ci,L6,Eue,bue,Z7e,eUe,ki],tUe),j6=Le([oue,aue,u7e],(t,e,n)=>lue(n.shared,t,e)),Sue=t=>t.tooltip.settings.trigger,B6=t=>t.tooltip.settings.defaultIndex,xE=Le([lv,j6,Sue,B6],pue),gh=Le([xE,uv,pE,yE],M6),Aue=Le([Md,gh],cue),U6=Le([xE],t=>{if(t)return t.dataKey}),nUe=Le([xE],t=>{if(t)return t.graphicalItemId}),Tue=Le([lv,j6,Sue,B6],gue),rUe=Le([Nd,Pd,An,Ai,Md,B6,Tue,gE],mue),iUe=Le([xE,rUe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),sUe=Le([xE],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),oUe=Le([Tue,gh,Id,pE,Aue,gE,j6],yue),aUe=Le([oUe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function eY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eY(Object(n),!0).forEach(function(r){lUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lUe(t,e,n){return(e=cUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cUe(t){var e=uUe(t,"string");return typeof e=="symbol"?e:e+""}function uUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dUe=()=>Rt(Ci),fUe=()=>{var t=dUe(),e=Rt(Md),n=Rt(Eue);return ph(!t||!n?void 0:tY(tY({},t),{},{scale:n}),e)};function nY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nY(Object(n),!0).forEach(function(r){hUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hUe(t,e,n){return(e=pUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pUe(t){var e=mUe(t,"string");return typeof e=="symbol"?e:e+""}function mUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gUe=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},yUe=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:o}=r;return eg(eg(eg({},r),gi(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,{angle:l}=r;return eg(eg(eg({},r),gi(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function xUe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var kue=(t,e,n,r,i)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var a=0;a<o;a++){var l,c,u,h,m,g=a>0?(l=n[a-1])===null||l===void 0?void 0:l.coordinate:(c=n[o-1])===null||c===void 0?void 0:c.coordinate,x=(u=n[a])===null||u===void 0?void 0:u.coordinate,v=a>=o-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(m=n[a+1])===null||m===void 0?void 0:m.coordinate,b=void 0;if(!(g==null||x==null||v==null))if($i(x-g)!==$i(v-x)){var w=[];if($i(v-x)===$i(i[1]-i[0])){b=v;var k=x+i[1]-i[0];w[0]=Math.min(k,(k+g)/2),w[1]=Math.max(k,(k+g)/2)}else{b=g;var C=v+i[1]-i[0];w[0]=Math.min(x,(C+x)/2),w[1]=Math.max(x,(C+x)/2)}var R=[Math.min(x,(b+x)/2),Math.max(x,(b+x)/2)];if(t>R[0]&&t<=R[1]||t>=w[0]&&t<=w[1]){var B;return(B=n[a])===null||B===void 0?void 0:B.index}}else{var O=Math.min(g,v),F=Math.max(g,v);if(t>(O+x)/2&&t<=(F+x)/2){var H;return(H=n[a])===null||H===void 0?void 0:H.index}}}else if(e)for(var j=0;j<o;j++){var $=e[j];if($!=null){var W=e[j+1],V=e[j-1];if(j===0&&W!=null&&t<=($.coordinate+W.coordinate)/2||j===o-1&&V!=null&&t>($.coordinate+V.coordinate)/2||j>0&&j<o-1&&V!=null&&W!=null&&t>($.coordinate+V.coordinate)/2&&t<=($.coordinate+W.coordinate)/2)return $.index}}return-1},Cue=()=>Rt(a6),F6=(t,e)=>e,Nue=(t,e,n)=>n,$6=(t,e,n,r)=>r,vUe=Le(Md,t=>qC(t,e=>e.coordinate)),z6=Le([lv,F6,Nue,$6],pue),H6=Le([z6,uv,pE,yE],M6),bUe=(t,e,n)=>{if(e!=null){var r=lv(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Pue=Le([lv,F6,Nue,$6],gue),i2=Le([Nd,Pd,An,Ai,Md,$6,Pue,gE],mue),wUe=Le([z6,i2],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),_ue=Le([Md,H6],cue),EUe=Le([Pue,H6,Id,pE,_ue,gE,F6],yue),SUe=Le([z6,H6],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),AUe=(t,e,n,r,i,s,o)=>{if(!(!t||!n||!r||!i)&&xUe(t,o)){var a=sLe(t,e),l=kue(a,s,i,n,r),c=gUe(e,i,l,t);return{activeIndex:String(l),activeCoordinate:c}}},TUe=(t,e,n,r,i,s,o)=>{if(!(!t||!r||!i||!s||!n)){var a=l8e(t,n);if(a){var l=oLe(a,e),c=kue(l,o,s,r,i),u=yUe(e,s,c,a);return{activeIndex:String(c),activeCoordinate:u}}}},kUe=(t,e,n,r,i,s,o,a)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?AUe(t,e,r,i,s,o,a):TUe(t,e,n,r,i,s,o)},CUe=Le(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),NUe=Le(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(ii)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:dBe}});function rY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rY(Object(n),!0).forEach(function(r){PUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PUe(t,e,n){return(e=_Ue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ue(t){var e=IUe(t,"string");return typeof e=="symbol"?e:e+""}function IUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RUe={},OUe={zIndexMap:Object.values(ii).reduce((t,e)=>iY(iY({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),RUe)},MUe=new Set(Object.values(ii));function LUe(t){return MUe.has(t)}var Iue=Co({name:"zIndex",initialState:OUe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Tr()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!LUe(n)&&delete t.zIndexMap[n])},prepare:Tr()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Tr()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Tr()}}}),{registerZIndexPortal:DUe,unregisterZIndexPortal:jUe,registerZIndexPortalElement:BUe,unregisterZIndexPortalElement:UUe}=Iue.actions,FUe=Iue.reducer;function ao(t){var{zIndex:e,children:n}=t,r=jLe(),i=r&&e!==void 0&&e!==0,s=Hi(),o=Pr();A.useLayoutEffect(()=>i?(o(DUe({zIndex:e})),()=>{o(jUe({zIndex:e}))}):Q1,[o,e,i]);var a=Rt(l=>CUe(l,e,s));return i?a?zm.createPortal(n,a):null:n}function xL(){return xL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xL.apply(null,arguments)}function sY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sY(Object(n),!0).forEach(function(r){$Ue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ue(t,e,n){return(e=zUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zUe(t){var e=HUe(t,"string");return typeof e=="symbol"?e:e+""}function HUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VUe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function qUe(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:o,layout:a,cursor:l,tooltipEventType:c,chartName:u}=t,h=n,m=r,g=i;if(!l||!h||u!=="ScatterChart"&&c!=="axis")return null;var x,v,b;if(u==="ScatterChart")x=h,v=EDe,b=ii.cursorLine;else if(u==="BarChart")x=SDe(a,h,s,o),v=Tle,b=ii.cursorRectangle;else if(a==="radial"&&aae(h)){var{cx:w,cy:k,radius:C,startAngle:R,endAngle:B}=Cle(h);x={cx:w,cy:k,startAngle:R,endAngle:B,innerRadius:C,outerRadius:C},v=Ple,b=ii.cursorLine}else x={points:f8e(a,h,s)},v=sy,b=ii.cursorLine;var O=typeof l=="object"&&"className"in l?l.className:void 0,F=RA(RA(RA(RA({stroke:"#ccc",pointerEvents:"none"},s),x),Sm(l)),{},{payload:m,payloadIndex:g,className:Rn("recharts-tooltip-cursor",O)});return A.createElement(ao,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:b},A.createElement(VUe,{cursor:l,cursorComp:v,cursorProps:F}))}function GUe(t){var e=fUe(),n=ale(),r=Ah(),i=Cue();return e==null||n==null||r==null||i==null?null:A.createElement(qUe,xL({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var Rue=A.createContext(null),KUe=()=>A.useContext(Rue),SO={exports:{}},oY;function WUe(){return oY||(oY=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new i(u,h||l,m),x=n?n+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],g]:l._events[x].push(g):(l._events[x]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,x=new Array(g);m<g;m++)x[m]=h[m].fn;return x},a.prototype.listenerCount=function(c){var u=n?n+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,m,g,x){var v=n?n+c:c;if(!this._events[v])return!1;var b=this._events[v],w=arguments.length,k,C;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,m),!0;case 5:return b.fn.call(b.context,u,h,m,g),!0;case 6:return b.fn.call(b.context,u,h,m,g,x),!0}for(C=1,k=new Array(w-1);C<w;C++)k[C-1]=arguments[C];b.fn.apply(b.context,k)}else{var R=b.length,B;for(C=0;C<R;C++)switch(b[C].once&&this.removeListener(c,b[C].fn,void 0,!0),w){case 1:b[C].fn.call(b[C].context);break;case 2:b[C].fn.call(b[C].context,u);break;case 3:b[C].fn.call(b[C].context,u,h);break;case 4:b[C].fn.call(b[C].context,u,h,m);break;default:if(!k)for(B=1,k=new Array(w-1);B<w;B++)k[B-1]=arguments[B];b[C].fn.apply(b[C].context,k)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!u)return o(this,g),this;var x=this._events[g];if(x.fn)x.fn===u&&(!m||x.once)&&(!h||x.context===h)&&o(this,g);else{for(var v=0,b=[],w=x.length;v<w;v++)(x[v].fn!==u||m&&!x[v].once||h&&x[v].context!==h)&&b.push(x[v]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(SO)),SO.exports}var YUe=WUe();const V6=hs(YUe);var o1=new V6,vL="recharts.syncEvent.tooltip",aY="recharts.syncEvent.brush";function CN(t,e){if(e){var n=Number.parseInt(e,10);if(!Qa(n))return t==null?void 0:t[n]}}var JUe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Oue=Co({name:"options",initialState:JUe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),XUe=Oue.reducer,{createEventEmitter:QUe}=Oue.actions;function ZUe(t){return t.tooltip.syncInteraction}var eFe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Mue=Co({name:"chartData",initialState:eFe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:lY,setDataStartEndIndexes:tFe,setComputedData:C0t}=Mue.actions,nFe=Mue.reducer,rFe=["x","y"];function cY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cY(Object(n),!0).forEach(function(r){iFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iFe(t,e,n){return(e=sFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sFe(t){var e=oFe(t,"string");return typeof e=="symbol"?e:e+""}function oFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aFe(t,e){if(t==null)return{};var n,r,i=lFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cFe(){var t=Rt(l6),e=Rt(c6),n=Pr(),r=Rt(Pce),i=Rt(Md),s=Ah(),o=iN(),a=Rt(l=>l.rootProps.className);A.useEffect(()=>{if(t==null)return Q1;var l=(c,u,h)=>{if(e!==h&&t===c){if(r==="index"){var m;if(o&&u!==null&&u!==void 0&&(m=u.payload)!==null&&m!==void 0&&m.coordinate&&u.payload.sourceViewBox){var g=u.payload.coordinate,{x,y:v}=g,b=aFe(g,rFe),{x:w,y:k,width:C,height:R}=u.payload.sourceViewBox,B=tg(tg({},b),{},{x:o.x+(C?(x-w)/C:0)*o.width,y:o.y+(R?(v-k)/R:0)*o.height});n(tg(tg({},u),{},{payload:tg(tg({},u.payload),{},{coordinate:B})}))}else n(u);return}if(i!=null){var O;if(typeof r=="function"){var F={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},H=r(i,F);O=i[H]}else r==="value"&&(O=i.find(L=>String(L.value)===u.payload.label));var{coordinate:j}=u.payload;if(O==null||u.payload.active===!1||j==null||o==null){n(gL({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:W}=j,V=Math.min($,o.x+o.width),U=Math.min(W,o.y+o.height),T={x:s==="horizontal"?O.coordinate:V,y:s==="horizontal"?U:O.coordinate},_=gL({active:u.payload.active,coordinate:T,dataKey:u.payload.dataKey,index:String(O.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(_)}}};return o1.on(vL,l),()=>{o1.off(vL,l)}},[a,n,e,t,r,i,s,o])}function uFe(){var t=Rt(l6),e=Rt(c6),n=Pr();A.useEffect(()=>{if(t==null)return Q1;var r=(i,s,o)=>{e!==o&&t===i&&n(tFe(s))};return o1.on(aY,r),()=>{o1.off(aY,r)}},[n,e,t])}function dFe(){var t=Pr();A.useEffect(()=>{t(QUe())},[t]),cFe(),uFe()}function fFe(t,e,n,r,i,s){var o=Rt(g=>bUe(g,t,e)),a=Rt(c6),l=Rt(l6),c=Rt(Pce),u=Rt(ZUe),h=u==null?void 0:u.active,m=iN();A.useEffect(()=>{if(!h&&l!=null&&a!=null){var g=gL({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:m,graphicalItemId:void 0});o1.emit(vL,l,g,a)}},[h,n,o,i,r,a,l,c,s,m])}function uY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uY(Object(n),!0).forEach(function(r){hFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hFe(t,e,n){return(e=pFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pFe(t){var e=mFe(t,"string");return typeof e=="symbol"?e:e+""}function mFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gFe(t){return t.dataKey}function yFe(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(tDe,e)}var fY=[],xFe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function s2(t){var e,n,r=xi(t,xFe),{active:i,allowEscapeViewBox:s,animationDuration:o,animationEasing:a,content:l,filterNull:c,isAnimationActive:u,offset:h,payloadUniqBy:m,position:g,reverseDirection:x,useTranslate3d:v,wrapperStyle:b,cursor:w,shared:k,trigger:C,defaultIndex:R,portal:B,axisId:O}=r,F=Pr(),H=typeof R=="number"?String(R):R;A.useEffect(()=>{F(m7e({shared:k,trigger:C,axisId:O,active:i,defaultIndex:H}))},[F,k,C,O,i,H]);var j=iN(),$=ble(),W=c7e(k),{activeIndex:V,isActive:U}=(e=Rt(ae=>SUe(ae,W,C,H)))!==null&&e!==void 0?e:{},T=Rt(ae=>EUe(ae,W,C,H)),_=Rt(ae=>_ue(ae,W,C,H)),L=Rt(ae=>wUe(ae,W,C,H)),z=T,G=KUe(),te=(n=i??U)!==null&&n!==void 0?n:!1,[K,q]=V3e([z,te]),M=W==="axis"?_:void 0;fFe(W,C,L,M,V,te);var P=B??G;if(P==null||j==null||W==null)return null;var Y=z??fY;te||(Y=fY),c&&Y.length&&(Y=g3e(Y.filter(ae=>ae.value!=null&&(ae.hide!==!0||r.includeHidden)),m,gFe));var X=Y.length>0,re=A.createElement(lDe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:a,isAnimationActive:u,active:te,coordinate:L,hasPayload:X,offset:h,position:g,reverseDirection:x,useTranslate3d:v,viewBox:j,wrapperStyle:b,lastBoundingBox:K,innerRef:q,hasPortalFromProps:!!B},yFe(l,dY(dY({},r),{},{payload:Y,label:M,active:te,activeIndex:V,coordinate:L,accessibilityLayer:$})));return A.createElement(A.Fragment,null,zm.createPortal(re,P),te&&A.createElement(GUe,{cursor:w,tooltipEventType:W,coordinate:L,payload:Y,index:V}))}var dv=t=>null;dv.displayName="Cell";function vFe(t,e,n){return(e=bFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bFe(t){var e=wFe(t,"string");return typeof e=="symbol"?e:e+""}function wFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class EFe{constructor(e){vFe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function hY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SFe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hY(Object(n),!0).forEach(function(r){AFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AFe(t,e,n){return(e=TFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TFe(t){var e=kFe(t,"string");return typeof e=="symbol"?e:e+""}function kFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CFe={cacheSize:2e3,enableCache:!0},Lue=SFe({},CFe),pY=new EFe(Lue.cacheSize),NFe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},mY="recharts_measurement_span";function PFe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(a)}var gY=(t,e)=>{try{var n=document.getElementById(mY);n||(n=document.createElement("span"),n.setAttribute("id",mY),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,NFe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},uw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||iE.isSsr)return{width:0,height:0};if(!Lue.enableCache)return gY(e,n);var r=PFe(e,n),i=pY.get(r);if(i)return i;var s=gY(e,n);return pY.set(r,s),s},Due;function _Fe(t,e,n){return(e=IFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IFe(t){var e=RFe(t,"string");return typeof e=="symbol"?e:e+""}function RFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,OFe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,MFe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,LFe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},DFe=["cm","mm","pt","pc","in","Q","px"];function jFe(t){return DFe.includes(t)}var jg="NaN";function BFe(t,e){return t*LFe[e]}class rs{static parse(e){var n,[,r,i]=(n=MFe.exec(e))!==null&&n!==void 0?n:[];return r==null?rs.NaN:new rs(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Qa(e)&&(this.unit=""),n!==""&&!OFe.test(n)&&(this.num=NaN,this.unit=""),jFe(n)&&(this.num=BFe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new rs(NaN,""):new rs(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new rs(NaN,""):new rs(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new rs(NaN,""):new rs(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new rs(NaN,""):new rs(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qa(this.num)}}Due=rs;_Fe(rs,"NaN",new Due(NaN,""));function jue(t){if(t==null||t.includes(jg))return jg;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=yY.exec(e))!==null&&n!==void 0?n:[],o=rs.parse(r??""),a=rs.parse(s??""),l=i==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return jg;e=e.replace(yY,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,h,m]=(c=xY.exec(e))!==null&&c!==void 0?c:[],g=rs.parse(u??""),x=rs.parse(m??""),v=h==="+"?g.add(x):g.subtract(x);if(v.isNaN())return jg;e=e.replace(xY,v.toString())}return e}var vY=/\(([^()]*)\)/;function UFe(t){for(var e=t,n;(n=vY.exec(e))!=null;){var[,r]=n;e=e.replace(vY,jue(r))}return e}function FFe(t){var e=t.replace(/\s+/g,"");return e=UFe(e),e=jue(e),e}function $Fe(t){try{return FFe(t)}catch{return jg}}function AO(t){var e=$Fe(t.slice(5,-1));return e===jg?"":e}var zFe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],HFe=["dx","dy","angle","className","breakAll"];function bL(){return bL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bL.apply(null,arguments)}function bY(t,e){if(t==null)return{};var n,r,i=VFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function VFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Bue=/[ \f\n\r\t\v\u2028\u2029]+/,Uue=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Sr(e)||(n?i=e.toString().split(""):i=e.toString().split(Bue));var s=i.map(a=>({word:a,width:uw(a,r).width})),o=n?0:uw("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function qFe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Fue=(t,e,n,r)=>t.reduce((i,s)=>{var{word:o,width:a}=s,l=i[i.length-1];if(l&&a!=null&&(e==null||r||l.width+a+n<Number(e)))l.words.push(o),l.width+=a+n;else{var c={words:[o],width:a};i.push(c)}return i},[]),$ue=t=>t.reduce((e,n)=>e.width>n.width?e:n),GFe="",wY=(t,e,n,r,i,s,o,a)=>{var l=t.slice(0,e),c=Uue({breakAll:n,style:r,children:l+GFe});if(!c)return[!1,[]];var u=Fue(c.wordsWithComputedWidth,s,o,a),h=u.length>i||$ue(u).width>Number(s);return[h,u]},KFe=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:a,breakAll:l}=t,c=At(s),u=String(o),h=Fue(e,r,n,i);if(!c||i)return h;var m=h.length>s||$ue(h).width>Number(r);if(!m)return h;for(var g=0,x=u.length-1,v=0,b;g<=x&&v<=u.length-1;){var w=Math.floor((g+x)/2),k=w-1,[C,R]=wY(u,k,l,a,s,r,n,i),[B]=wY(u,w,l,a,s,r,n,i);if(!C&&!B&&(g=w+1),C&&B&&(x=w-1),!C&&B){b=R;break}v++}return b||h},EY=t=>{var e=Sr(t)?[]:t.toString().split(Bue);return[{words:e,width:void 0}]},WFe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!iE.isSsr){var a,l,c=Uue({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:u,spaceWidth:h}=c;a=u,l=h}else return EY(r);return KFe({breakAll:s,children:r,maxLines:o,style:i},a,l,e,!!n)}return EY(r)},zue="#808080",YFe={angle:0,breakAll:!1,capHeight:"0.71em",fill:zue,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},NN=A.forwardRef((t,e)=>{var n=xi(t,YFe),{x:r,y:i,lineHeight:s,capHeight:o,fill:a,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,h=bY(n,zFe),m=A.useMemo(()=>WFe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:x,angle:v,className:b,breakAll:w}=h,k=bY(h,HFe);if(!Fc(r)||!Fc(i)||m.length===0)return null;var C=Number(r)+(At(g)?g:0),R=Number(i)+(At(x)?x:0);if(!cr(C)||!cr(R))return null;var B;switch(u){case"start":B=AO("calc(".concat(o,")"));break;case"middle":B=AO("calc(".concat((m.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:B=AO("calc(".concat(m.length-1," * -").concat(s,")"));break}var O=[];if(l){var F=m[0].width,{width:H}=h;O.push("scale(".concat(At(H)&&At(F)?H/F:1,")"))}return v&&O.push("rotate(".concat(v,", ").concat(C,", ").concat(R,")")),O.length&&(k.transform=O.join(" ")),A.createElement("text",bL({},Bs(k),{ref:e,x:C,y:R,className:Rn("recharts-text",b),textAnchor:c,fill:a.includes("url")?zue:a}),m.map((j,$)=>{var W=j.words.join(w?"":" ");return A.createElement("tspan",{x:C,dy:$===0?B:s,key:"".concat(W,"-").concat($)},W)}))});NN.displayName="Text";var JFe=["labelRef"],XFe=["content"];function SY(t,e){if(t==null)return{};var n,r,i=QFe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QFe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function AY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AY(Object(n),!0).forEach(function(r){ZFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZFe(t,e,n){return(e=e9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e9e(t){var e=t9e(t,"string");return typeof e=="symbol"?e:e+""}function t9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qu.apply(null,arguments)}var Hue=A.createContext(null),n9e=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o,children:a}=t,l=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o}),[e,n,r,i,s,o]);return A.createElement(Hue.Provider,{value:l},a)},Vue=()=>{var t=A.useContext(Hue),e=iN();return t||ole(e)},r9e=A.createContext(null),i9e=()=>{var t=A.useContext(r9e),e=Rt(Mce);return t||e},s9e=t=>{var{value:e,formatter:n}=t,r=Sr(t.children)?e:t.children;return typeof n=="function"?n(r):r},q6=t=>t!=null&&typeof t=="function",o9e=(t,e)=>{var n=$i(e-t),r=Math.min(Math.abs(e-t),360);return n*r},a9e=(t,e,n,r,i)=>{var{offset:s,className:o}=t,{cx:a,cy:l,innerRadius:c,outerRadius:u,startAngle:h,endAngle:m,clockWise:g}=i,x=(c+u)/2,v=o9e(h,m),b=v>=0?1:-1,w,k;switch(e){case"insideStart":w=h+b*s,k=g;break;case"insideEnd":w=m-b*s,k=!g;break;case"end":w=m+b*s,k=g;break;default:throw new Error("Unsupported position ".concat(e))}k=v<=0?k:!k;var C=gi(a,l,x,w),R=gi(a,l,x,w+(k?1:-1)*359),B="M".concat(C.x,",").concat(C.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(R.x,",").concat(R.y),O=Sr(t.id)?Gw("recharts-radial-line-"):t.id;return A.createElement("text",qu({},r,{dominantBaseline:"central",className:Rn("recharts-radial-bar-label",o)}),A.createElement("defs",null,A.createElement("path",{id:O,d:B})),A.createElement("textPath",{xlinkHref:"#".concat(O)},n))},l9e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=t,c=(a+l)/2;if(n==="outside"){var{x:u,y:h}=gi(r,i,o+e,c);return{x:u,y:h,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+o)/2,{x:g,y:x}=gi(r,i,m,c);return{x:g,y:x,textAnchor:"middle",verticalAnchor:"middle"}},wL=t=>"cx"in t&&At(t.cx),c9e=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!wL(n)&&(s=n);var{x:o,y:a,upperWidth:l,lowerWidth:c,height:u}=e,h=o,m=o+(l-c)/2,g=(h+m)/2,x=(l+c)/2,v=h+l/2,b=u>=0?1:-1,w=b*r,k=b>0?"end":"start",C=b>0?"start":"end",R=l>=0?1:-1,B=R*r,O=R>0?"end":"start",F=R>0?"start":"end";if(i==="top"){var H={x:h+l/2,y:a-w,textAnchor:"middle",verticalAnchor:k};return Qr(Qr({},H),s?{height:Math.max(a-s.y,0),width:l}:{})}if(i==="bottom"){var j={x:m+c/2,y:a+u+w,textAnchor:"middle",verticalAnchor:C};return Qr(Qr({},j),s?{height:Math.max(s.y+s.height-(a+u),0),width:c}:{})}if(i==="left"){var $={x:g-B,y:a+u/2,textAnchor:O,verticalAnchor:"middle"};return Qr(Qr({},$),s?{width:Math.max($.x-s.x,0),height:u}:{})}if(i==="right"){var W={x:g+x+B,y:a+u/2,textAnchor:F,verticalAnchor:"middle"};return Qr(Qr({},W),s?{width:Math.max(s.x+s.width-W.x,0),height:u}:{})}var V=s?{width:x,height:u}:{};return i==="insideLeft"?Qr({x:g+B,y:a+u/2,textAnchor:F,verticalAnchor:"middle"},V):i==="insideRight"?Qr({x:g+x-B,y:a+u/2,textAnchor:O,verticalAnchor:"middle"},V):i==="insideTop"?Qr({x:h+l/2,y:a+w,textAnchor:"middle",verticalAnchor:C},V):i==="insideBottom"?Qr({x:m+c/2,y:a+u-w,textAnchor:"middle",verticalAnchor:k},V):i==="insideTopLeft"?Qr({x:h+B,y:a+w,textAnchor:F,verticalAnchor:C},V):i==="insideTopRight"?Qr({x:h+l-B,y:a+w,textAnchor:O,verticalAnchor:C},V):i==="insideBottomLeft"?Qr({x:m+B,y:a+u-w,textAnchor:F,verticalAnchor:k},V):i==="insideBottomRight"?Qr({x:m+c-B,y:a+u-w,textAnchor:O,verticalAnchor:k},V):i&&typeof i=="object"&&(At(i.x)||gd(i.x))&&(At(i.y)||gd(i.y))?Qr({x:o+Ds(i.x,x),y:a+Ds(i.y,u),textAnchor:"end",verticalAnchor:"end"},V):Qr({x:v,y:a+u/2,textAnchor:"middle",verticalAnchor:"middle"},V)},u9e={angle:0,offset:5,zIndex:ii.label,position:"middle",textBreakAll:!1};function Pf(t){var e=xi(t,u9e),{viewBox:n,position:r,value:i,children:s,content:o,className:a="",textBreakAll:l,labelRef:c}=e,u=i9e(),h=Vue(),m=r==="center"?h:u??h,g,x,v;if(n==null?g=m:wL(n)?g=n:g=ole(n),!g||Sr(i)&&Sr(s)&&!A.isValidElement(o)&&typeof o!="function")return null;var b=Qr(Qr({},e),{},{viewBox:g});if(A.isValidElement(o)){var{labelRef:w}=b,k=SY(b,JFe);return A.cloneElement(o,k)}if(typeof o=="function"){var{content:C}=b,R=SY(b,XFe);if(x=A.createElement(o,R),A.isValidElement(x))return x}else x=s9e(e);var B=Bs(e);if(wL(g)){if(r==="insideStart"||r==="insideEnd"||r==="end")return a9e(e,r,x,B,g);v=l9e(g,e.offset,e.position)}else v=c9e(e,g);return A.createElement(ao,{zIndex:e.zIndex},A.createElement(NN,qu({ref:c,className:Rn("recharts-label",a)},B,v,{textAnchor:qFe(B.textAnchor)?B.textAnchor:v.textAnchor,breakAll:l}),x))}Pf.displayName="Label";var d9e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(Pf,qu({key:"label-implicit"},r)):Fc(t)?A.createElement(Pf,qu({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===Pf?A.cloneElement(t,Qr({key:"label-implicit"},r)):A.createElement(Pf,qu({key:"label-implicit",content:t},r)):q6(t)?A.createElement(Pf,qu({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(Pf,qu({},t,{key:"label-implicit"},r)):null};function f9e(t){var{label:e,labelRef:n}=t,r=Vue();return d9e(e,r,n)||null}var TO={},kO={},TY;function h9e(){return TY||(TY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(kO)),kO}var CO={},kY;function p9e(){return kY||(kY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(CO)),CO}var CY;function m9e(){return CY||(CY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h9e(),n=p9e(),r=wj();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(TO)),TO}var NO,NY;function g9e(){return NY||(NY=1,NO=m9e().last),NO}var y9e=g9e();const x9e=hs(y9e);var v9e=["valueAccessor"],b9e=["dataKey","clockWise","id","textBreakAll","zIndex"];function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o2.apply(null,arguments)}function PY(t,e){if(t==null)return{};var n,r,i=w9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var E9e=t=>Array.isArray(t.value)?x9e(t.value):t.value,que=A.createContext(void 0),G6=que.Provider,Gue=A.createContext(void 0),S9e=Gue.Provider;function A9e(){return A.useContext(que)}function T9e(){return A.useContext(Gue)}function RT(t){var{valueAccessor:e=E9e}=t,n=PY(t,v9e),{dataKey:r,clockWise:i,id:s,textBreakAll:o,zIndex:a}=n,l=PY(n,b9e),c=A9e(),u=T9e(),h=c||u;return!h||!h.length?null:A.createElement(ao,{zIndex:a??ii.label},A.createElement(Wr,{className:"recharts-label-list"},h.map((m,g)=>{var x,v=Sr(r)?e(m,g):Wn(m&&m.payload,r),b=Sr(s)?{}:{id:"".concat(s,"-").concat(g)};return A.createElement(Pf,o2({key:"label-".concat(g)},Bs(m),l,b,{fill:(x=n.fill)!==null&&x!==void 0?x:m.fill,parentViewBox:m.parentViewBox,value:v,textBreakAll:o,viewBox:m.viewBox,index:g,zIndex:0}))})))}RT.displayName="LabelList";function PN(t){var{label:e}=t;return e?e===!0?A.createElement(RT,{key:"labelList-implicit"}):A.isValidElement(e)||q6(e)?A.createElement(RT,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(RT,o2({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function EL(){return EL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EL.apply(null,arguments)}var Kue=t=>{var{cx:e,cy:n,r,className:i}=t,s=Rn("recharts-dot",i);return At(e)&&At(n)&&At(r)?A.createElement("circle",EL({},ro(t),bj(t),{className:s,cx:e,cy:n,r})):null},Wue=t=>t.graphicalItems.polarItems,k9e=Le([_r,uE],p6),_N=Le([Wue,Br,k9e],m6),C9e=Le([_N],g6),IN=Le([C9e,mN],y6),N9e=Le([IN,Br,_N],v6);Le([IN,Br,_N],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var s,o=Wn(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Wn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var _Y=()=>{},P9e=Le([IN,Br,_N,SN,_r],S6),_9e=Le([Br,w6,E6,_Y,P9e,_Y,An,_r],A6),Yue=Le([Br,An,IN,N9e,cE,_r,_9e],T6),I9e=Le([Yue,Br,av],N6);Le([Br,Yue,I9e,_r],_6);var R9e={radiusAxis:{},angleAxis:{}},Jue=Co({name:"polarAxis",initialState:R9e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:N0t,removeRadiusAxis:P0t,addAngleAxis:_0t,removeAngleAxis:I0t}=Jue.actions,O9e=Jue.reducer;function IY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IY(Object(n),!0).forEach(function(r){M9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M9e(t,e,n){return(e=L9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L9e(t){var e=D9e(t,"string");return typeof e=="symbol"?e:e+""}function D9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j9e=(t,e)=>e,K6=Le([Wue,j9e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),B9e=[],W6=(t,e,n)=>(n==null?void 0:n.length)===0?B9e:n,Xue=Le([mN,K6,W6],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>RY(RY({},e.presentationProps),s.props))),i!=null)return i}}),U9e=Le([Xue,K6,W6],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var s,o=Wn(r,e.nameKey,e.name),a;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?a=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?a=r.fill:a=e.fill,{value:Sh(o,e.dataKey),color:a,payload:r,type:e.legendType}})}),F9e=Le([Xue,K6,W6,Ai],(t,e,n,r)=>{if(!(e==null||t==null))return z$e({offset:r,pieSettings:e,displayedData:t,cells:n})}),PO={exports:{}},nr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OY;function $9e(){if(OY)return nr;OY=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function x(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case t:switch(v=v.type,v){case n:case i:case r:case l:case c:case m:return v;default:switch(v=v&&v.$$typeof,v){case o:case a:case h:case u:return v;case s:return v;default:return b}}case e:return b}}}return nr.ContextConsumer=s,nr.ContextProvider=o,nr.Element=t,nr.ForwardRef=a,nr.Fragment=n,nr.Lazy=h,nr.Memo=u,nr.Portal=e,nr.Profiler=i,nr.StrictMode=r,nr.Suspense=l,nr.SuspenseList=c,nr.isContextConsumer=function(v){return x(v)===s},nr.isContextProvider=function(v){return x(v)===o},nr.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},nr.isForwardRef=function(v){return x(v)===a},nr.isFragment=function(v){return x(v)===n},nr.isLazy=function(v){return x(v)===h},nr.isMemo=function(v){return x(v)===u},nr.isPortal=function(v){return x(v)===e},nr.isProfiler=function(v){return x(v)===i},nr.isStrictMode=function(v){return x(v)===r},nr.isSuspense=function(v){return x(v)===l},nr.isSuspenseList=function(v){return x(v)===c},nr.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===i||v===r||v===l||v===c||typeof v=="object"&&v!==null&&(v.$$typeof===h||v.$$typeof===u||v.$$typeof===o||v.$$typeof===s||v.$$typeof===a||v.$$typeof===g||v.getModuleId!==void 0)},nr.typeOf=x,nr}var MY;function z9e(){return MY||(MY=1,PO.exports=$9e()),PO.exports}var H9e=z9e(),LY=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",DY=null,_O=null,Que=t=>{if(t===DY&&Array.isArray(_O))return _O;var e=[];return A.Children.forEach(t,n=>{Sr(n)||(H9e.isFragment(n)?e=e.concat(Que(n.props.children)):e.push(n))}),_O=e,DY=t,e};function Y6(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>LY(i)):r=[LY(e)],Que(t).forEach(i=>{var s=Tm(i,"type.displayName")||Tm(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var J6=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,IO={},jY;function V9e(){return jY||(jY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(IO)),IO}var RO,BY;function q9e(){return BY||(BY=1,RO=V9e().isPlainObject),RO}var G9e=q9e();const K9e=hs(G9e);var UY,FY,$Y,zY,HY;function VY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VY(Object(n),!0).forEach(function(r){W9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W9e(t,e,n){return(e=Y9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y9e(t){var e=J9e(t,"string");return typeof e=="symbol"?e:e+""}function J9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a2(){return a2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a2.apply(null,arguments)}function Pb(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var GY=(t,e,n,r,i)=>{var s=n-r,o;return o=Vr(UY||(UY=Pb(["M ",",",""])),t,e),o+=Vr(FY||(FY=Pb(["L ",",",""])),t+n,e),o+=Vr($Y||($Y=Pb(["L ",",",""])),t+n-s/2,e+i),o+=Vr(zY||(zY=Pb(["L ",",",""])),t+n-s/2-r,e+i),o+=Vr(HY||(HY=Pb(["L ",","," Z"])),t,e),o},X9e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q9e=t=>{var e=xi(t,X9e),{x:n,y:r,upperWidth:i,lowerWidth:s,height:o,className:a}=e,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:h}=e,m=A.useRef(null),[g,x]=A.useState(-1),v=A.useRef(i),b=A.useRef(s),w=A.useRef(o),k=A.useRef(n),C=A.useRef(r),R=tv(t,"trapezoid-");if(A.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var T=m.current.getTotalLength();T&&x(T)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var B=Rn("recharts-trapezoid",a);if(!h)return A.createElement("g",null,A.createElement("path",a2({},Bs(e),{className:B,d:GY(n,r,i,s,o)})));var O=v.current,F=b.current,H=w.current,j=k.current,$=C.current,W="0px ".concat(g===-1?1:g,"px"),V="".concat(g,"px 0px"),U=wle(["strokeDasharray"],c,l);return A.createElement(ev,{animationId:R,key:R,canBegin:g>0,duration:c,easing:l,isActive:h,begin:u},T=>{var _=qn(O,i,T),L=qn(F,s,T),z=qn(H,o,T),G=qn(j,n,T),te=qn($,r,T);m.current&&(v.current=_,b.current=L,w.current=z,k.current=G,C.current=te);var K=T>0?{transition:U,strokeDasharray:V}:{strokeDasharray:W};return A.createElement("path",a2({},Bs(e),{className:B,d:GY(G,te,_,L,z),ref:m,style:qY(qY({},K),e.style)}))})},Z9e=["option","shapeType","activeClassName"];function e$e(t,e){if(t==null)return{};var n,r,i=t$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function t$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function KY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KY(Object(n),!0).forEach(function(r){n$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n$e(t,e,n){return(e=r$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r$e(t){var e=i$e(t,"string");return typeof e=="symbol"?e:e+""}function i$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s$e(t,e){return l2(l2({},e),t)}function o$e(t,e){return t==="symbols"}function WY(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(Tle,n);case"trapezoid":return A.createElement(Q9e,n);case"sector":return A.createElement(Ple,n);case"symbols":if(o$e(e))return A.createElement(oae,n);break;case"curve":return A.createElement(sy,n);default:return null}}function a$e(t){return A.isValidElement(t)?t.props:t}function X6(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=e$e(t,Z9e),s;if(A.isValidElement(e))s=A.cloneElement(e,l2(l2({},i),a$e(e)));else if(typeof e=="function")s=e(i,i.index);else if(K9e(e)&&typeof e!="boolean"){var o=s$e(e,i);s=A.createElement(WY,{shapeType:n,elementProps:o})}else{var a=i;s=A.createElement(WY,{shapeType:n,elementProps:a})}return i.isActive?A.createElement(Wr,{className:r},s):s}var Q6=(t,e,n)=>{var r=Pr();return(i,s)=>o=>{t==null||t(i,s,o),r(due({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Z6=t=>{var e=Pr();return(n,r)=>i=>{t==null||t(n,r,i),e(g7e())}},eB=(t,e,n)=>{var r=Pr();return(i,s)=>o=>{t==null||t(i,s,o),r(y7e({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function RN(t){var{tooltipEntrySettings:e}=t,n=Pr(),r=Hi(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(f7e(e)):i.current!==e&&n(h7e({prev:i.current,next:e})),i.current=e)},[e,n,r]),A.useLayoutEffect(()=>()=>{i.current&&(n(p7e(i.current)),i.current=null)},[n]),null}function tB(t){var{legendPayload:e}=t,n=Pr(),r=Hi(),i=A.useRef(null);return A.useLayoutEffect(()=>{r||(i.current===null?n(yle(e)):i.current!==e&&n(xle({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(vle(i.current)),i.current=null)},[n]),null}function l$e(t){var{legendPayload:e}=t,n=Pr(),r=Rt(An),i=A.useRef(null);return A.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(yle(e)):i.current!==e&&n(xle({prev:i.current,next:e})),i.current=e)},[n,r,e]),A.useLayoutEffect(()=>()=>{i.current&&(n(vle(i.current)),i.current=null)},[n]),null}var OO,c$e=()=>{var[t]=A.useState(()=>Gw("uid-"));return t},u$e=(OO=iC.useId)!==null&&OO!==void 0?OO:c$e;function d$e(t,e){var n=u$e();return e||(t?"".concat(t,"-").concat(n):n)}var f$e=A.createContext(void 0),ON=t=>{var{id:e,type:n,children:r}=t,i=d$e("recharts-".concat(n),e);return A.createElement(f$e.Provider,{value:i},r(i))},h$e={cartesianItems:[],polarItems:[]},Zue=Co({name:"graphicalItems",initialState:h$e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Tr()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ll(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Tr()},removeCartesianGraphicalItem:{reducer(t,e){var n=Ll(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Tr()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Tr()},removePolarGraphicalItem:{reducer(t,e){var n=Ll(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Tr()}}}),{addCartesianGraphicalItem:p$e,replaceCartesianGraphicalItem:m$e,removeCartesianGraphicalItem:g$e,addPolarGraphicalItem:y$e,removePolarGraphicalItem:x$e}=Zue.actions,v$e=Zue.reducer,b$e=t=>{var e=Pr(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(p$e(t)):n.current!==t&&e(m$e({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(g$e(n.current)),n.current=null)},[e]),null},nB=A.memo(b$e);function w$e(t){var e=Pr();return A.useLayoutEffect(()=>(e(y$e(t)),()=>{e(x$e(t))}),[e,t]),null}var E$e=["key"],S$e=["onMouseEnter","onClick","onMouseLeave"],A$e=["id"],T$e=["id"];function YY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YY(Object(n),!0).forEach(function(r){k$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k$e(t,e,n){return(e=C$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C$e(t){var e=N$e(t,"string");return typeof e=="symbol"?e:e+""}function N$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yh.apply(null,arguments)}function MN(t,e){if(t==null)return{};var n,r,i=P$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function P$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _$e(t){var e=A.useMemo(()=>Y6(t.children,dv),[t.children]),n=Rt(r=>U9e(r,t.id,e));return n==null?null:A.createElement(l$e,{legendPayload:n})}var I$e=A.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:o,name:a,hide:l,tooltipType:c,id:u}=t,h={dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:o,dataKey:e,nameKey:n,name:Sh(a,e),hide:l,type:c,color:o,unit:"",graphicalItemId:u}};return A.createElement(RN,{tooltipEntrySettings:h})}),R$e=(t,e)=>t>e?"start":t<e?"end":"middle",O$e=(t,e,n)=>Ds(typeof e=="function"?e(t):e,n,n*.8),M$e=(t,e,n)=>{var{top:r,left:i,width:s,height:o}=e,a=kle(s,o),l=i+Ds(t.cx,s,s/2),c=r+Ds(t.cy,o,o/2),u=Ds(t.innerRadius,a,0),h=O$e(n,t.outerRadius,a),m=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:m}},L$e=(t,e)=>{var n=$i(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function D$e(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var j$e=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Rn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=MN(e,E$e);return A.createElement(sy,yh({},i,{type:"linear",className:n}))},B$e=(t,e,n)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),A.isValidElement(r)))return r;var i=Rn("recharts-pie-label-text",D$e(t));return A.createElement(NN,yh({},e,{alignmentBaseline:"middle",className:i}),r)};function U$e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:s,dataKey:o}=n;if(!r||!i||!e)return null;var a=ro(n),l=Sm(i),c=Sm(s),u=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((m,g)=>{var x=(m.startAngle+m.endAngle)/2,v=gi(m.cx,m.cy,m.outerRadius+u,x),b=Kr(Kr(Kr(Kr({},a),m),{},{stroke:"none"},l),{},{index:g,textAnchor:R$e(v.x,m.cx)},v),w=Kr(Kr(Kr(Kr({},a),m),{},{fill:"none",stroke:m.fill},c),{},{index:g,points:[gi(m.cx,m.cy,m.outerRadius,x),v],key:"line"});return A.createElement(ao,{zIndex:ii.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},A.createElement(Wr,null,s&&j$e(s,w),B$e(i,b,Wn(m,o))))});return A.createElement(Wr,{className:"recharts-pie-labels"},h)}function F$e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?A.createElement(PN,{label:i}):A.createElement(U$e,{sectors:e,props:n,showLabels:r})}function $$e(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:s,id:o}=t,a=Rt(gh),l=Rt(U6),c=Rt(nUe),{onMouseEnter:u,onClick:h,onMouseLeave:m}=i,g=MN(i,S$e),x=Q6(u,i.dataKey,o),v=Z6(m),b=eB(h,i.dataKey,o);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((w,k)=>{if((w==null?void 0:w.startAngle)===0&&(w==null?void 0:w.endAngle)===0&&e.length!==1)return null;var C=c==null||c===o,R=String(k)===a&&(l==null||i.dataKey===l)&&C,B=a?r:null,O=n&&R?n:B,F=Kr(Kr({},w),{},{stroke:w.stroke,tabIndex:-1,[tle]:k,[nle]:o});return A.createElement(Wr,yh({key:"sector-".concat(w==null?void 0:w.startAngle,"-").concat(w==null?void 0:w.endAngle,"-").concat(w.midAngle,"-").concat(k),tabIndex:-1,className:"recharts-pie-sector"},VC(g,w,k),{onMouseEnter:x(w,k),onMouseLeave:v(w,k),onClick:b(w,k)}),A.createElement(X6,yh({option:s??O,index:k,shapeType:"sector",isActive:R},F)))}))}function z$e(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:s}=t,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:u,tooltipType:h}=n,m=Math.abs(n.minAngle),g=L$e(a,l),x=Math.abs(g),v=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,b=r.filter(O=>Wn(O,c,0)!==0).length,w=(x>=360?b:b-1)*v,k=x-b*m-w,C=r.reduce((O,F)=>{var H=Wn(F,c,0);return O+(At(H)?H:0)},0),R;if(C>0){var B;R=r.map((O,F)=>{var H=Wn(O,c,0),j=Wn(O,u,F),$=M$e(n,s,O),W=(At(H)?H:0)/C,V,U=Kr(Kr({},O),i&&i[F]&&i[F].props);F?V=B.endAngle+$i(g)*v*(H!==0?1:0):V=a;var T=V+$i(g)*((H!==0?m:0)+W*k),_=(V+T)/2,L=($.innerRadius+$.outerRadius)/2,z=[{name:j,value:H,payload:U,dataKey:c,type:h,graphicalItemId:n.id}],G=gi($.cx,$.cy,L,_);return B=Kr(Kr(Kr(Kr({},n.presentationProps),{},{percent:W,cornerRadius:typeof o=="string"?parseFloat(o):o,name:j,tooltipPayload:z,midAngle:_,middleRadius:L,tooltipPosition:G},U),$),{},{value:H,dataKey:c,startAngle:V,endAngle:T,payload:U,paddingAngle:$i(g)*v}),B})}return R}function H$e(t){var{showLabels:e,sectors:n,children:r}=t,i=A.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return A.createElement(S9e,{value:e?i:void 0},r)}function V$e(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:h,onAnimationEnd:m}=e,g=tv(e,"recharts-pie-"),x=n.current,[v,b]=A.useState(!1),w=A.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),k=A.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return A.createElement(H$e,{showLabels:!v,sectors:i},A.createElement(ev,{animationId:g,begin:o,duration:a,isActive:s,easing:l,onAnimationStart:k,onAnimationEnd:w,key:g},C=>{var R=[],B=i&&i[0],O=B==null?void 0:B.startAngle;return i==null||i.forEach((F,H)=>{var j=x&&x[H],$=H>0?Tm(F,"paddingAngle",0):0;if(j){var W=qn(j.endAngle-j.startAngle,F.endAngle-F.startAngle,C),V=Kr(Kr({},F),{},{startAngle:O+$,endAngle:O+W+$});R.push(V),O=V.endAngle}else{var{endAngle:U,startAngle:T}=F,_=qn(0,U-T,C),L=Kr(Kr({},F),{},{startAngle:O+$,endAngle:O+_+$});R.push(L),O=L.endAngle}}),n.current=R,A.createElement(Wr,null,A.createElement($$e,{sectors:R,activeShape:c,inactiveShape:u,allOtherPieProps:e,shape:e.shape,id:r}))}),A.createElement(F$e,{showLabels:!v,sectors:i,props:e}),e.children)}var q$e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ii.area};function G$e(t){var{id:e}=t,n=MN(t,A$e),{hide:r,className:i,rootTabIndex:s}=t,o=A.useMemo(()=>Y6(t.children,dv),[t.children]),a=Rt(u=>F9e(u,e,o)),l=A.useRef(null),c=Rn("recharts-pie",i);return r||a==null?(l.current=null,A.createElement(Wr,{tabIndex:s,className:c})):A.createElement(ao,{zIndex:t.zIndex},A.createElement(I$e,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:a,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),A.createElement(Wr,{tabIndex:s,className:c},A.createElement(V$e,{props:Kr(Kr({},n),{},{sectors:a}),previousSectorsRef:l,id:e})))}function rB(t){var e=xi(t,q$e),{id:n}=e,r=MN(e,T$e),i=ro(r);return A.createElement(ON,{id:n,type:"pie"},s=>A.createElement(A.Fragment,null,A.createElement(w$e,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),A.createElement(_$e,yh({},r,{id:s})),A.createElement(G$e,yh({},r,{id:s}))))}rB.displayName="Pie";var K$e=["points"];function JY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JY(Object(n),!0).forEach(function(r){W$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W$e(t,e,n){return(e=Y$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y$e(t){var e=J$e(t,"string");return typeof e=="symbol"?e:e+""}function J$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c2(){return c2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c2.apply(null,arguments)}function X$e(t,e){if(t==null)return{};var n,r,i=Q$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Q$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Z$e(t){var{option:e,dotProps:n,className:r}=t;if(A.isValidElement(e))return A.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Rn(r,typeof e!="boolean"?e.className:""),s=n??{},{points:o}=s,a=X$e(s,K$e);return A.createElement(Kue,c2({},a,{className:i}))}function eze(t,e){return t==null?!1:e?!0:t.length===1}function ede(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:o,needClip:a,clipPathId:l,zIndex:c=ii.scatter}=t;if(!eze(e,n))return null;var u=J6(n),h=zOe(n),m=e.map((x,v)=>{var b,w,k=MO(MO(MO({r:3},o),h),{},{index:v,cx:(b=x.x)!==null&&b!==void 0?b:void 0,cy:(w=x.y)!==null&&w!==void 0?w:void 0,dataKey:s,value:x.value,payload:x.payload,points:e});return A.createElement(Z$e,{key:"dot-".concat(v),option:n,dotProps:k,className:i})}),g={};return a&&l!=null&&(g.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(l,")")),A.createElement(ao,{zIndex:c},A.createElement(Wr,c2({className:r},g),m))}function XY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XY(Object(n),!0).forEach(function(r){tze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tze(t,e,n){return(e=nze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nze(t){var e=rze(t,"string");return typeof e=="symbol"?e:e+""}function rze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tde=0,ize={xAxis:{},yAxis:{},zAxis:{}},nde=Co({name:"cartesianAxis",initialState:ize,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Tr()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Tr()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Tr()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Tr()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Tr()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Tr()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Tr()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Tr()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Tr()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=QY(QY({},t.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:sze,replaceXAxis:oze,removeXAxis:aze,addYAxis:lze,replaceYAxis:cze,removeYAxis:uze,addZAxis:R0t,replaceZAxis:O0t,removeZAxis:M0t,updateYAxisWidth:dze}=nde.actions,fze=nde.reducer,hze=Le([Ai],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),pze=Le([hze,Nd,Pd],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),LN=()=>Rt(pze),mze=()=>Rt(aUe);function ZY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZY(Object(n),!0).forEach(function(r){gze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gze(t,e,n){return(e=yze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yze(t){var e=xze(t,"string");return typeof e=="symbol"?e:e+""}function xze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vze=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:o}=t;if(i===!1||e.x==null||e.y==null)return null;var a={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=LO(LO(LO({},a),Sm(i)),bj(i)),c;return A.isValidElement(i)?c=A.cloneElement(i,l):typeof i=="function"?c=i(l):c=A.createElement(Kue,l),A.createElement(Wr,{className:"recharts-active-dot",clipPath:o},c)};function SL(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:o=ii.activeDot}=t,a=Rt(gh),l=mze();if(e==null||l==null)return null;var c=e.find(u=>l.includes(u.payload));return Sr(c)?null:A.createElement(ao,{zIndex:o},A.createElement(vze,{point:c,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var eJ=(t,e,n)=>{var r=n??t;if(!Sr(r))return Ds(r,e,0)},bze=(t,e,n)=>{var r={},i=t.filter(vN),s=t.filter(c=>c.stackId==null),o=i.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),r),a=Object.entries(o).map(c=>{var[u,h]=c,m=h.map(x=>x.dataKey),g=eJ(e,n,h[0].barSize);return{stackId:u,dataKeys:m,barSize:g}}),l=s.map(c=>{var u=[c.dataKey].filter(m=>m!=null),h=eJ(e,n,c.barSize);return{stackId:void 0,dataKeys:u,barSize:h}});return[...a,...l]};function tJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tJ(Object(n),!0).forEach(function(r){wze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wze(t,e,n){return(e=Eze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eze(t){var e=Sze(t,"string");return typeof e=="symbol"?e:e+""}function Sze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aze(t,e,n,r,i){var s=r.length;if(!(s<1)){var o=Ds(t,n,0,!0),a,l=[];if(cr(r[0].barSize)){var c=!1,u=n/s,h=r.reduce((w,k)=>w+(k.barSize||0),0);h+=(s-1)*o,h>=n&&(h-=(s-1)*o,o=0),h>=n&&u>0&&(c=!0,u*=.9,h=s*u);var m=(n-h)/2>>0,g={offset:m-o,size:0};a=r.reduce((w,k)=>{var C,R={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:g.offset+g.size+o,size:c?u:(C=k.barSize)!==null&&C!==void 0?C:0}},B=[...w,R];return g=B[B.length-1].position,B},l)}else{var x=Ds(e,n,0,!0);n-2*x-(s-1)*o<=0&&(o=0);var v=(n-2*x-(s-1)*o)/s;v>1&&(v>>=0);var b=cr(i)?Math.min(v,i):v;a=r.reduce((w,k,C)=>[...w,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:x+(v+o)*C+(v-b)/2,size:b}}],l)}return a}}var Tze=(t,e,n,r,i,s,o)=>{var a=Sr(o)?e:o,l=Aze(n,r,i!==s?i:s,t,a);return i!==s&&l!=null&&(l=l.map(c=>OA(OA({},c),{},{position:OA(OA({},c.position),{},{offset:c.position.offset-i/2})}))),l},kze=(t,e)=>{var n=xN(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===n)}}}};function Cze(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&cr(t.zIndex)?t.zIndex:e}var rde=t=>{var{chartData:e}=t,n=Pr(),r=Hi();return A.useEffect(()=>r?()=>{}:(n(lY(e)),()=>{n(lY(void 0))}),[e,n,r]),null},nJ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ide=Co({name:"brush",initialState:nJ,reducers:{setBrushSettings(t,e){return e.payload==null?nJ:e.payload}}}),{setBrushSettings:L0t}=ide.actions,Nze=ide.reducer;function Pze(t,e,n){return(e=_ze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ze(t){var e=Ize(t,"string");return typeof e=="symbol"?e:e+""}function Ize(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class iB{static create(e){return new iB(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}Pze(iB,"EPS",1e-4);function Rze(t){return(t%180+180)%180}var Oze=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Rze(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},Mze={dots:[],areas:[],lines:[]},sde=Co({name:"referenceElements",initialState:Mze,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ll(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ll(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ll(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:D0t,removeDot:j0t,addArea:B0t,removeArea:U0t,addLine:F0t,removeLine:$0t}=sde.actions,Lze=sde.reducer,Dze=A.createContext(void 0),jze=t=>{var{children:e}=t,[n]=A.useState("".concat(Gw("recharts"),"-clip")),r=LN();if(r==null)return null;var{x:i,y:s,width:o,height:a}=r;return A.createElement(Dze.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:s,height:a,width:o}))),e)};function ode(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Bze(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Oze(r,n)}function Uze(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:a}=t;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function a1(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function Fze(t,e){return ode(t,e+1)}function $ze(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:a}=e,l=0,c=1,u=o,h=function(){var x=r==null?void 0:r[l];if(x===void 0)return{v:ode(r,c)};var v=l,b,w=()=>(b===void 0&&(b=n(x,v)),b),k=x.coordinate,C=l===0||a1(t,k,w,u,a);C||(l=0,u=o,c+=1),C&&(u=k+t*(w()/2+i),l+=c)},m;c<=s.length;)if(m=h(),m)return m.v;return[]}function zze(t,e,n,r,i){var s=(r||[]).slice(),o=s.length;if(o===0)return[];for(var{start:a,end:l}=e,c=1;c<=o;c++){for(var u=(o-1)%c,h=a,m=!0,g=function(){var k=r[x],C=x,R,B=()=>(R===void 0&&(R=n(k,C)),R),O=k.coordinate,F=x===u||a1(t,O,B,h,l);if(!F)return m=!1,1;F&&(h=O+t*(B()/2+i))},x=u;x<o&&!g();x+=c);if(m){for(var v=[],b=u;b<o;b+=c)v.push(r[b]);return v}}return[]}function rJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rJ(Object(n),!0).forEach(function(r){Hze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hze(t,e,n){return(e=Vze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vze(t){var e=qze(t,"string");return typeof e=="symbol"?e:e+""}function qze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gze(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:a}=e,{end:l}=e,c=function(m){var g=s[m],x,v=()=>(x===void 0&&(x=n(g,m)),x);if(m===o-1){var b=t*(g.coordinate+t*v()/2-l);s[m]=g=Ts(Ts({},g),{},{tickCoord:b>0?g.coordinate-b*t:g.coordinate})}else s[m]=g=Ts(Ts({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var w=a1(t,g.tickCoord,v,a,l);w&&(l=g.tickCoord-t*(v()/2+i),s[m]=Ts(Ts({},g),{},{isShow:!0}))}},u=o-1;u>=0;u--)c(u);return s}function Kze(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,{start:l,end:c}=e;if(s){var u=r[a-1],h=n(u,a-1),m=t*(u.coordinate+t*h/2-c);if(o[a-1]=u=Ts(Ts({},u),{},{tickCoord:m>0?u.coordinate-m*t:u.coordinate}),u.tickCoord!=null){var g=a1(t,u.tickCoord,()=>h,l,c);g&&(c=u.tickCoord-t*(h/2+i),o[a-1]=Ts(Ts({},u),{},{isShow:!0}))}}for(var x=s?a-1:a,v=function(k){var C=o[k],R,B=()=>(R===void 0&&(R=n(C,k)),R);if(k===0){var O=t*(C.coordinate-t*B()/2-l);o[k]=C=Ts(Ts({},C),{},{tickCoord:O<0?C.coordinate-O*t:C.coordinate})}else o[k]=C=Ts(Ts({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var F=a1(t,C.tickCoord,B,l,c);F&&(l=C.tickCoord+t*(B()/2+i),o[k]=Ts(Ts({},C),{},{isShow:!0}))}},b=0;b<x;b++)v(b);return o}function sB(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:u,angle:h}=t;if(!i||!i.length||!r)return[];if(At(l)||iE.isSsr){var m;return(m=Fze(i,At(l)?l:0))!==null&&m!==void 0?m:[]}var g=[],x=a==="top"||a==="bottom"?"width":"height",v=u&&x==="width"?uw(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=(C,R)=>{var B=typeof c=="function"?c(C.value,R):C.value;return x==="width"?Bze(uw(B,{fontSize:e,letterSpacing:n}),v,h):uw(B,{fontSize:e,letterSpacing:n})[x]},w=i.length>=2?$i(i[1].coordinate-i[0].coordinate):1,k=Uze(s,w,x);return l==="equidistantPreserveStart"?$ze(w,k,b,i,o):l==="equidistantPreserveEnd"?zze(w,k,b,i,o):(l==="preserveStart"||l==="preserveStartEnd"?g=Kze(w,k,b,i,o,l==="preserveStartEnd"):g=Gze(w,k,b,i,o),g.filter(C=>C.isShow))}var Wze=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var a=n?n.getBoundingClientRect().width:0,l=i+s,c=o+l+a+(n?r:0);return Math.round(c)}return 0},Yze=["axisLine","width","height","className","hide","ticks","axisType"];function Jze(t,e){if(t==null)return{};var n,r,i=Xze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _m(){return _m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_m.apply(null,arguments)}function iJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iJ(Object(n),!0).forEach(function(r){Qze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qze(t,e,n){return(e=Zze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zze(t){var e=eHe(t,"string");return typeof e=="symbol"?e:e+""}function eHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var id={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ii.axis};function tHe(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:a,otherSvgProps:l}=t;if(!a)return null;var c=hi(hi(hi({},l),ro(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!o||s==="bottom"&&o);c=hi(hi({},c),{},{x1:e,y1:n+u*i,x2:e+r,y2:n+u*i})}else{var h=+(s==="left"&&!o||s==="right"&&o);c=hi(hi({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return A.createElement("line",_m({},c,{className:Rn("recharts-cartesian-axis-line",Tm(a,"className"))}))}function nHe(t,e,n,r,i,s,o,a,l){var c,u,h,m,g,x,v=a?-1:1,b=t.tickSize||o,w=At(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=u=t.coordinate,m=n+ +!a*i,h=m-v*b,x=h-v*l,g=w;break;case"left":h=m=t.coordinate,u=e+ +!a*r,c=u-v*b,g=c-v*l,x=w;break;case"right":h=m=t.coordinate,u=e+ +a*r,c=u+v*b,g=c+v*l,x=w;break;default:c=u=t.coordinate,m=n+ +a*i,h=m+v*b,x=h+v*l,g=w;break}return{line:{x1:c,y1:h,x2:u,y2:m},tick:{x:g,y:x}}}function rHe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function iHe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function sHe(t){var{option:e,tickProps:n,value:r}=t,i,s=Rn(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,hi(hi({},n),{},{className:s}));else if(typeof e=="function")i=e(hi(hi({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Rn(o,e==null?void 0:e.className)),i=A.createElement(NN,_m({},n,{className:o}),r)}return i}var oHe=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:o,unit:a,padding:l,tickTextProps:c,orientation:u,mirror:h,x:m,y:g,width:x,height:v,tickSize:b,tickMargin:w,fontSize:k,letterSpacing:C,getTicksConfig:R,events:B,axisType:O}=t,F=sB(hi(hi({},R),{},{ticks:n}),k,C),H=rHe(u,h),j=iHe(u,h),$=ro(R),W=Sm(r),V={};typeof i=="object"&&(V=i);var U=hi(hi({},$),{},{fill:"none"},V),T=F.map(z=>hi({entry:z},nHe(z,m,g,x,v,u,b,h,w))),_=T.map(z=>{var{entry:G,line:te}=z;return A.createElement(Wr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},i&&A.createElement("line",_m({},U,te,{className:Rn("recharts-cartesian-axis-tick-line",Tm(i,"className"))})))}),L=T.map((z,G)=>{var{entry:te,tick:K}=z,q=hi(hi(hi(hi({textAnchor:H,verticalAnchor:j},$),{},{stroke:"none",fill:s},W),K),{},{index:G,payload:te,visibleTicksCount:F.length,tickFormatter:o,padding:l},c);return A.createElement(Wr,_m({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},VC(B,te,G)),r&&A.createElement(sHe,{option:r,tickProps:q,value:"".concat(typeof o=="function"?o(te.value,G):te.value).concat(a||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(O,"-ticks")},L.length>0&&A.createElement(ao,{zIndex:ii.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(O,"-tick-labels"),ref:e},L)),_.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(O,"-tick-lines")},_))}),aHe=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:o,ticks:a,axisType:l}=t,c=Jze(t,Yze),[u,h]=A.useState(""),[m,g]=A.useState(""),x=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return Wze({ticks:x.current,label:(b=t.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var v=A.useCallback(b=>{if(b){var w=b.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=w;var k=w[0];if(k){var C=window.getComputedStyle(k),R=C.fontSize,B=C.letterSpacing;(R!==u||B!==m)&&(h(R),g(B))}}},[u,m]);return o||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(ao,{zIndex:t.zIndex},A.createElement(Wr,{className:Rn("recharts-cartesian-axis",s)},A.createElement(tHe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:ro(t)}),A.createElement(oHe,{ref:v,axisType:l,events:c,fontSize:u,getTicksConfig:t,height:t.height,letterSpacing:m,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(n9e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(f9e,{label:t.label,labelRef:t.labelRef}),t.children)))}),oB=A.forwardRef((t,e)=>{var n=xi(t,id);return A.createElement(aHe,_m({},n,{ref:e}))});oB.displayName="CartesianAxis";var lHe=["x1","y1","x2","y2","key"],cHe=["offset"],uHe=["xAxisId","yAxisId"],dHe=["xAxisId","yAxisId"];function sJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sJ(Object(n),!0).forEach(function(r){fHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fHe(t,e,n){return(e=hHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hHe(t){var e=pHe(t,"string");return typeof e=="symbol"?e:e+""}function pHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ip(){return Ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ip.apply(null,arguments)}function u2(t,e){if(t==null)return{};var n,r,i=mHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gHe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:o,ry:a}=t;return A.createElement("rect",{x:r,y:i,ry:a,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function ade(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:o,x2:a,y2:l,key:c}=n,u=u2(n,lHe),h=(i=ro(u))!==null&&i!==void 0?i:{},{offset:m}=h,g=u2(h,cHe);r=A.createElement("line",Ip({},g,{x1:s,y1:o,x2:a,y2:l,fill:"none",key:c}))}return r}function yHe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=u2(t,uHe),l=i.map((c,u)=>{var h=_s(_s({},a),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(u),index:u});return A.createElement(ade,{key:"line-".concat(u),option:r,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function xHe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=u2(t,dHe),l=i.map((c,u)=>{var h=_s(_s({},a),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(u),index:u});return A.createElement(ade,{option:r,lineItemProps:h,key:"line-".concat(u)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function vHe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:o,horizontalPoints:a,horizontal:l=!0}=t;if(!l||!e||!e.length||a==null)return null;var c=a.map(h=>Math.round(h+i-i)).sort((h,m)=>h-m);i!==c[0]&&c.unshift(0);var u=c.map((h,m)=>{var g=!c[m+1],x=g?i+o-h:c[m+1]-h;if(x<=0)return null;var v=m%e.length;return A.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:x,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function bHe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:o,height:a,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(h=>Math.round(h+i-i)).sort((h,m)=>h-m);i!==c[0]&&c.unshift(0);var u=c.map((h,m)=>{var g=!c[m+1],x=g?i+o-h:c[m+1]-h;if(x<=0)return null;var v=m%n.length;return A.createElement("rect",{key:"react-".concat(m),x:h,y:s,width:x,height:a,stroke:"none",fill:n[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var wHe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return Xae(sB(_s(_s(_s({},id),n),{},{ticks:Qae(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},EHe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return Xae(sB(_s(_s(_s({},id),n),{},{ticks:Qae(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},SHe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ii.grid};function l1(t){var e=lle(),n=cle(),r=ale(),i=_s(_s({},xi(t,SHe)),{},{x:At(t.x)?t.x:r.left,y:At(t.y)?t.y:r.top,width:At(t.width)?t.width:r.width,height:At(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:o,x:a,y:l,width:c,height:u,syncWithTicks:h,horizontalValues:m,verticalValues:g}=i,x=Hi(),v=Rt(j=>JW(j,"xAxis",s,x)),b=Rt(j=>JW(j,"yAxis",o,x));if(!$c(c)||!$c(u)||!At(a)||!At(l))return null;var w=i.verticalCoordinatesGenerator||wHe,k=i.horizontalCoordinatesGenerator||EHe,{horizontalPoints:C,verticalPoints:R}=i;if((!C||!C.length)&&typeof k=="function"){var B=m&&m.length,O=k({yAxis:b?_s(_s({},b),{},{ticks:B?m:b.ticks}):void 0,width:e??c,height:n??u,offset:r},B?!0:h);Dk(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(C=O)}if((!R||!R.length)&&typeof w=="function"){var F=g&&g.length,H=w({xAxis:v?_s(_s({},v),{},{ticks:F?g:v.ticks}):void 0,width:e??c,height:n??u,offset:r},F?!0:h);Dk(Array.isArray(H),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof H,"]")),Array.isArray(H)&&(R=H)}return A.createElement(ao,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(gHe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(vHe,Ip({},i,{horizontalPoints:C})),A.createElement(bHe,Ip({},i,{verticalPoints:R})),A.createElement(yHe,Ip({},i,{offset:r,horizontalPoints:C,xAxis:v,yAxis:b})),A.createElement(xHe,Ip({},i,{offset:r,verticalPoints:R,xAxis:v,yAxis:b}))))}l1.displayName="CartesianGrid";var AHe={},lde=Co({name:"errorBars",initialState:AHe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:z0t,replaceErrorBar:H0t,removeErrorBar:V0t}=lde.actions,THe=lde.reducer,kHe=["children"];function CHe(t,e){if(t==null)return{};var n,r,i=NHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function NHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var PHe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},_He=A.createContext(PHe);function cde(t){var{children:e}=t,n=CHe(t,kHe);return A.createElement(_He.Provider,{value:n},e)}function DN(t,e){var n,r,i=Rt(c=>Rd(c,t)),s=Rt(c=>Od(c,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:_i.allowDataOverflow,a=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Ii.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function aB(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=LN(),{needClipX:s,needClipY:o,needClip:a}=DN(e,n);if(!a||!i)return null;var{x:l,y:c,width:u,height:h}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:s?l:l-u/2,y:o?c:c-h/2,width:s?u:u*2,height:o?h:h*2}))}var ude=(t,e,n,r)=>Vc(t,"xAxis",e,r),dde=(t,e,n,r)=>Hc(t,"xAxis",e,r),fde=(t,e,n,r)=>Vc(t,"yAxis",n,r),hde=(t,e,n,r)=>Hc(t,"yAxis",n,r),IHe=Le([An,ude,fde,dde,hde],(t,e,n,r,i)=>Kc(t,"xAxis")?ph(e,r,!1):ph(n,i,!1)),RHe=(t,e,n,r,i)=>i;function OHe(t){return t.type==="line"}var MHe=Le([fE,RHe],(t,e)=>t.filter(OHe).find(n=>n.id===e)),LHe=Le([An,ude,fde,dde,hde,MHe,IHe,i6],(t,e,n,r,i,s,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=a;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:h,data:m}=s,g;if(m!=null&&m.length>0?g=m:g=l==null?void 0:l.slice(c,u+1),g!=null)return vVe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:h,bandSize:o,displayedData:g})}});function pde(t){var e=Sm(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,o=Number(i),a=Number(s);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(a)||a<0)&&(a=r),{r:o,strokeWidth:a}}return{r:n,strokeWidth:r}}var DO={exports:{}},jO={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oJ;function DHe(){if(oJ)return jO;oJ=1;var t=jx();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,a=t.useDebugValue;return jO.useSyncExternalStoreWithSelector=function(l,c,u,h,m){var g=i(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=o(function(){function b(B){if(!w){if(w=!0,k=B,B=h(B),m!==void 0&&x.hasValue){var O=x.value;if(m(O,B))return C=O}return C=B}if(O=C,n(k,B))return O;var F=h(B);return m!==void 0&&m(O,F)?(k=B,O):(k=B,C=F)}var w=!1,k,C,R=u===void 0?null:u;return[function(){return b(c())},R===null?void 0:function(){return b(R())}]},[c,u,h,m]);var v=r(l,g[0],g[1]);return s(function(){x.hasValue=!0,x.value=v},[v]),a(v),v},jO}var aJ;function jHe(){return aJ||(aJ=1,DO.exports=DHe()),DO.exports}jHe();function BHe(t){t()}function UHe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){BHe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var lJ={notify(){},get:()=>[]};function FHe(t,e){let n,r=lJ,i=0,s=!1;function o(v){u();const b=r.subscribe(v);let w=!1;return()=>{w||(w=!0,b(),h())}}function a(){r.notify()}function l(){x.onStateChange&&x.onStateChange()}function c(){return s}function u(){i++,n||(n=t.subscribe(l),r=UHe())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=lJ)}function m(){s||(s=!0,u())}function g(){s&&(s=!1,h())}const x={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:m,tryUnsubscribe:g,getListeners:()=>r};return x}var $He=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zHe=$He(),HHe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",VHe=HHe(),qHe=()=>zHe||VHe?A.useLayoutEffect:A.useEffect,GHe=qHe();function cJ(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function KHe(t,e){if(cJ(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!cJ(t[n[i]],e[n[i]]))return!1;return!0}var BO=Symbol.for("react-redux-context"),UO=typeof globalThis<"u"?globalThis:{};function WHe(){if(!A.createContext)return{};const t=UO[BO]??(UO[BO]=new Map);let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var YHe=WHe();function JHe(t){const{children:e,context:n,serverState:r,store:i}=t,s=A.useMemo(()=>{const l=FHe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=A.useMemo(()=>i.getState(),[i]);GHe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||YHe;return A.createElement(a.Provider,{value:s},e)}var XHe=JHe,QHe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function ZHe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function vE(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(QHe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!KHe(t[r],e[r]))return!1}else if(!ZHe(t[r],e[r]))return!1;return!0}var eVe=["id"],tVe=["type","layout","connectNulls","needClip","shape"],nVe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function c1(){return c1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c1.apply(null,arguments)}function uJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uJ(Object(n),!0).forEach(function(r){rVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rVe(t,e,n){return(e=iVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iVe(t){var e=sVe(t,"string");return typeof e=="symbol"?e:e+""}function sVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lB(t,e){if(t==null)return{};var n,r,i=oVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aVe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Sh(n,e),payload:t}]},lVe=A.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:u}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Sh(o,e),hide:a,type:c,color:r,unit:l,graphicalItemId:u}};return A.createElement(RN,{tooltipEntrySettings:h})}),mde=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function cVe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var uVe=(t,e,n)=>{var r=n.reduce((h,m)=>h+m);if(!r)return mde(e,t);for(var i=Math.floor(t/r),s=t%r,o=e-t,a=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>s){a=[...n.slice(0,l),s-c];break}var u=a.length%2===0?[0,o]:[o];return[...cVe(n,i),...a,...u].map(h=>"".concat(h,"px")).join(", ")};function dVe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:o}=r,{id:a}=r,l=lB(r,eVe),c=ro(l);return A.createElement(ede,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:o,clipPathId:e})}function fVe(t){var{showLabels:e,children:n,points:r}=t,i=A.useMemo(()=>r==null?void 0:r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wc(wc({},l),{},{value:s.value,payload:s.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[r]);return A.createElement(G6,{value:e?i:void 0},n)}function dJ(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s}=t,{type:o,layout:a,connectNulls:l,needClip:c,shape:u}=s,h=lB(s,tVe),m=wc(wc({},Bs(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:o,layout:a,connectNulls:l,strokeDasharray:i??s.strokeDasharray});return A.createElement(A.Fragment,null,(r==null?void 0:r.length)>1&&A.createElement(X6,c1({shapeType:"curve",option:u},m,{pathRef:n})),A.createElement(dVe,{points:r,clipPathId:e,props:s}))}function hVe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function pVe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,animateNewValues:m,width:g,height:x,onAnimationEnd:v,onAnimationStart:b}=n,w=i.current,k=tv(o,"recharts-line-"),C=A.useRef(k),[R,B]=A.useState(!1),O=!R,F=A.useCallback(()=>{typeof v=="function"&&v(),B(!1)},[v]),H=A.useCallback(()=>{typeof b=="function"&&b(),B(!0)},[b]),j=hVe(r.current),$=A.useRef(0);C.current!==k&&($.current=s.current,C.current=k);var W=$.current;return A.createElement(fVe,{points:o,showLabels:O},n.children,A.createElement(ev,{animationId:k,begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:F,onAnimationStart:H,key:k},V=>{var U=qn(W,j+W,V),T=Math.min(U,j),_;if(l)if(a){var L="".concat(a).split(/[,\s]+/gim).map(te=>parseFloat(te));_=uVe(T,j,L)}else _=mde(j,T);else _=a==null?void 0:String(a);if(V>0&&j>0&&(i.current=o,s.current=Math.max(s.current,T)),w){var z=w.length/o.length,G=V===1?o:o.map((te,K)=>{var q=Math.floor(K*z);if(w[q]){var M=w[q];return wc(wc({},te),{},{x:qn(M.x,te.x,V),y:qn(M.y,te.y,V)})}return m?wc(wc({},te),{},{x:qn(g*2,te.x,V),y:qn(x/2,te.y,V)}):wc(wc({},te),{},{x:te.x,y:te.y})});return i.current=G,A.createElement(dJ,{props:n,points:G,clipPathId:e,pathRef:r,strokeDasharray:_})}return A.createElement(dJ,{props:n,points:o,clipPathId:e,pathRef:r,strokeDasharray:_})}),A.createElement(PN,{label:n.label}))}function mVe(t){var{clipPathId:e,props:n}=t,r=A.useRef(null),i=A.useRef(0),s=A.useRef(null);return A.createElement(pVe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var gVe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Wn(t.payload,e)}};class yVe extends A.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:s,yAxisId:o,top:a,left:l,width:c,height:u,id:h,needClip:m,zIndex:g}=this.props;if(e)return null;var x=Rn("recharts-line",i),v=h,{r:b,strokeWidth:w}=pde(n),k=J6(n),C=b*2+w,R=m?"url(#clipPath-".concat(k?"":"dots-").concat(v,")"):void 0;return A.createElement(ao,{zIndex:g},A.createElement(Wr,{className:x},m&&A.createElement("defs",null,A.createElement(aB,{clipPathId:v,xAxisId:s,yAxisId:o}),!k&&A.createElement("clipPath",{id:"clipPath-dots-".concat(v)},A.createElement("rect",{x:l-C/2,y:a-C/2,width:c+C,height:u+C}))),A.createElement(cde,{xAxisId:s,yAxisId:o,data:r,dataPointFormatter:gVe,errorBarOffset:0},A.createElement(mVe,{props:this.props,clipPathId:v}))),A.createElement(SL,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:R}))}}var gde={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ii.line,type:"linear"};function xVe(t){var e=xi(t,gde),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:u,label:h,legendType:m,xAxisId:g,yAxisId:x,id:v}=e,b=lB(e,nVe),{needClip:w}=DN(g,x),k=LN(),C=Ah(),R=Hi(),B=Rt($=>LHe($,g,x,R,v));if(C!=="horizontal"&&C!=="vertical"||B==null||k==null)return null;var{height:O,width:F,x:H,y:j}=k;return A.createElement(yVe,c1({},b,{id:v,connectNulls:a,dot:l,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,isAnimationActive:u,hide:c,label:h,legendType:m,xAxisId:g,yAxisId:x,points:B,layout:C,height:O,width:F,left:H,top:j,needClip:w}))}function vVe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:o,bandSize:a,displayedData:l}=t;return l.map((c,u)=>{var h=Wn(c,o);if(e==="horizontal"){var m=Lk({axis:n,ticks:i,bandSize:a,entry:c,index:u}),g=Sr(h)?null:r.scale(h);return{x:m,y:g,value:h,payload:c}}var x=Sr(h)?null:n.scale(h),v=Lk({axis:r,ticks:s,bandSize:a,entry:c,index:u});return x==null||v==null?null:{x,y:v,value:h,payload:c}}).filter(Boolean)}function bVe(t){var e=xi(t,gde),n=Hi();return A.createElement(ON,{id:e.id,type:"line"},r=>A.createElement(A.Fragment,null,A.createElement(tB,{legendPayload:aVe(e)}),A.createElement(lVe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),A.createElement(nB,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),A.createElement(xVe,c1({},e,{id:r}))))}var OT=A.memo(bVe,vE);OT.displayName="Line";function Wc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:tde}function Yc(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:tde}var yde=(t,e,n)=>Vc(t,"xAxis",Wc(t,e),n),xde=(t,e,n)=>Hc(t,"xAxis",Wc(t,e),n),vde=(t,e,n)=>Vc(t,"yAxis",Yc(t,e),n),bde=(t,e,n)=>Hc(t,"yAxis",Yc(t,e),n),wVe=Le([An,yde,vde,xde,bde],(t,e,n,r,i)=>Kc(t,"xAxis")?ph(e,r,!1):ph(n,i,!1)),EVe=(t,e)=>e,wde=Le([fE,EVe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),Ede=t=>{var e=An(t),n=Kc(e,"xAxis");return n?"yAxis":"xAxis"},SVe=(t,e)=>{var n=Ede(t);return n==="yAxis"?Yc(t,e):Wc(t,e)},AVe=(t,e,n)=>n2(t,Ede(t),SVe(t,e),n),TVe=Le([wde,AVe],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=xN(t);if(!(r==null||i==null)){var s=(n=e[r])===null||n===void 0?void 0:n.stackedData,o=s==null?void 0:s.find(a=>a.key===i);if(o!=null)return o.map(a=>[a[0],a[1]])}}}),kVe=Le([An,yde,vde,xde,bde,TVe,dce,wVe,wde,sBe],(t,e,n,r,i,s,o,a,l,c)=>{var{chartData:u,dataStartIndex:h,dataEndIndex:m}=o;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||a==null)){var{data:g}=l,x;if(g&&g.length>0?x=g:x=u==null?void 0:u.slice(h,m+1),x!=null)return qVe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:h,areaSettings:l,stackedData:s,displayedData:x,chartBaseValue:c,bandSize:a})}}),CVe=["id"],NVe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fm.apply(null,arguments)}function Sde(t,e){if(t==null)return{};var n,r,i=PVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function PVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fJ(Object(n),!0).forEach(function(r){_Ve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ve(t,e,n){return(e=IVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IVe(t){var e=RVe(t,"string");return typeof e=="symbol"?e:e+""}function RVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d2(t,e){return t&&t!=="none"?t:e}var OVe=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:s,hide:o}=t;return[{inactive:o,dataKey:e,type:s,color:d2(r,i),value:Sh(n,e),payload:t}]},MVe=A.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:u}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Sh(o,e),hide:a,type:c,color:d2(r,s),unit:l,graphicalItemId:u}};return A.createElement(RN,{tooltipEntrySettings:h})});function LVe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:s,dataKey:o}=r,a=ro(r);return A.createElement(ede,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:a,needClip:i,clipPathId:e})}function DVe(t){var{showLabels:e,children:n,points:r}=t,i=r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Bg(Bg({},l),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return A.createElement(G6,{value:e?i:void 0},n)}function hJ(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:s}=t,{layout:o,type:a,stroke:l,connectNulls:c,isRange:u}=s,{id:h}=s,m=Sde(s,CVe),g=ro(m),x=Bs(m);return A.createElement(A.Fragment,null,(e==null?void 0:e.length)>1&&A.createElement(Wr,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},A.createElement(sy,fm({},x,{id:h,points:e,connectNulls:c,type:a,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),l!=="none"&&A.createElement(sy,fm({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:e})),l!=="none"&&u&&A.createElement(sy,fm({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:n}))),A.createElement(LVe,{points:e,props:m,clipPathId:i}))}function jVe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.y,l=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!cr(a)||!cr(l))return null;var c=r*Math.abs(a-l),u=Math.max(...s.map(h=>h.x||0));return At(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(h=>h.x||0),u)),At(u)?A.createElement("rect",{x:0,y:a<l?a:a-c,width:u+(o?parseInt("".concat(o),10):1),height:Math.floor(c)}):null}function BVe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.x,l=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!cr(a)||!cr(l))return null;var c=r*Math.abs(a-l),u=Math.max(...s.map(h=>h.y||0));return At(i)?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(...i.map(h=>h.y||0),u)),At(u)?A.createElement("rect",{x:a<l?a:a-c,y:0,width:c,height:Math.floor(u+(o?parseInt("".concat(o),10):1))}):null}function UVe(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:s}=t;return n==="vertical"?A.createElement(jVe,{alpha:e,points:r,baseLine:i,strokeWidth:s}):A.createElement(BVe,{alpha:e,points:r,baseLine:i,strokeWidth:s})}function FVe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=t,{points:o,baseLine:a,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:h,onAnimationStart:m,onAnimationEnd:g}=r,x=A.useMemo(()=>({points:o,baseLine:a}),[o,a]),v=tv(x,"recharts-area-"),b=DLe(),[w,k]=A.useState(!1),C=!w,R=A.useCallback(()=>{typeof g=="function"&&g(),k(!1)},[g]),B=A.useCallback(()=>{typeof m=="function"&&m(),k(!0)},[m]);if(b==null)return null;var O=i.current,F=s.current;return A.createElement(DVe,{showLabels:C,points:o},r.children,A.createElement(ev,{animationId:v,begin:c,duration:u,isActive:l,easing:h,onAnimationEnd:R,onAnimationStart:B,key:v},H=>{if(O){var j=O.length/o.length,$=H===1?o:o.map((V,U)=>{var T=Math.floor(U*j);if(O[T]){var _=O[T];return Bg(Bg({},V),{},{x:qn(_.x,V.x,H),y:qn(_.y,V.y,H)})}return V}),W;return At(a)?W=qn(F,a,H):Sr(a)||Qa(a)?W=qn(F,0,H):W=a.map((V,U)=>{var T=Math.floor(U*j);if(Array.isArray(F)&&F[T]){var _=F[T];return Bg(Bg({},V),{},{x:qn(_.x,V.x,H),y:qn(_.y,V.y,H)})}return V}),H>0&&(i.current=$,s.current=W),A.createElement(hJ,{points:$,baseLine:W,needClip:e,clipPathId:n,props:r})}return H>0&&(i.current=o,s.current=a),A.createElement(Wr,null,l&&A.createElement("defs",null,A.createElement("clipPath",{id:"animationClipPath-".concat(n)},A.createElement(UVe,{alpha:H,points:o,baseLine:a,layout:b,strokeWidth:r.strokeWidth}))),A.createElement(Wr,{clipPath:"url(#animationClipPath-".concat(n,")")},A.createElement(hJ,{points:o,baseLine:a,needClip:e,clipPathId:n,props:r})))}),A.createElement(PN,{label:r.label}))}function $Ve(t){var{needClip:e,clipPathId:n,props:r}=t,i=A.useRef(null),s=A.useRef();return A.createElement(FVe,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s})}class zVe extends A.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:s,left:o,needClip:a,xAxisId:l,yAxisId:c,width:u,height:h,id:m,baseLine:g,zIndex:x}=this.props;if(e)return null;var v=Rn("recharts-area",i),b=m,{r:w,strokeWidth:k}=pde(n),C=J6(n),R=w*2+k,B=a?"url(#clipPath-".concat(C?"":"dots-").concat(b,")"):void 0;return A.createElement(ao,{zIndex:x},A.createElement(Wr,{className:v},a&&A.createElement("defs",null,A.createElement(aB,{clipPathId:b,xAxisId:l,yAxisId:c}),!C&&A.createElement("clipPath",{id:"clipPath-dots-".concat(b)},A.createElement("rect",{x:o-R/2,y:s-R/2,width:u+R,height:h+R}))),A.createElement($Ve,{needClip:a,clipPathId:b,props:this.props})),A.createElement(SL,{points:r,mainColor:d2(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:B}),this.props.isRange&&Array.isArray(g)&&A.createElement(SL,{points:g,mainColor:d2(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:B}))}}var Ade={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:ii.area};function HVe(t){var e,n=xi(t,Ade),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,fill:c,fillOpacity:u,hide:h,isAnimationActive:m,legendType:g,stroke:x,xAxisId:v,yAxisId:b}=n,w=Sde(n,NVe),k=Ah(),C=Cue(),{needClip:R}=DN(v,b),B=Hi(),{points:O,isRange:F,baseLine:H}=(e=Rt(T=>kVe(T,t.id,B)))!==null&&e!==void 0?e:{},j=LN();if(k!=="horizontal"&&k!=="vertical"||j==null||C!=="AreaChart"&&C!=="ComposedChart")return null;var{height:$,width:W,x:V,y:U}=j;return!O||!O.length?null:A.createElement(zVe,fm({},w,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,baseLine:H,connectNulls:a,dot:l,fill:c,fillOpacity:u,height:$,hide:h,layout:k,isAnimationActive:m==="auto"?!iE.isSsr:m,isRange:F,legendType:g,needClip:R,points:O,stroke:x,width:W,left:V,top:U,xAxisId:v,yAxisId:b}))}var VVe=(t,e,n,r,i)=>{var s=n??e;if(At(s))return s;var o=t==="horizontal"?i:r,a=o.scale.domain();if(o.type==="number"){var l=Math.max(a[0],a[1]),c=Math.min(a[0],a[1]);return s==="dataMin"?c:s==="dataMax"||l<0?l:Math.max(Math.min(a[0],a[1]),0)}return s==="dataMin"?a[0]:s==="dataMax"?a[1]:a[0]};function qVe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:o,xAxis:a,yAxis:l,displayedData:c,dataStartIndex:u,xAxisTicks:h,yAxisTicks:m,bandSize:g}=t,x=i&&i.length,v=VVe(s,o,n,a,l),b=s==="horizontal",w=!1,k=c.map((R,B)=>{var O,F,H;if(x)H=i[u+B];else{var j=Wn(R,r);Array.isArray(j)?(H=j,w=!0):H=[v,j]}var $=(O=(F=H)===null||F===void 0?void 0:F[1])!==null&&O!==void 0?O:null,W=$==null||x&&!e&&Wn(R,r)==null;return b?{x:Lk({axis:a,ticks:h,bandSize:g,entry:R,index:B}),y:W?null:l.scale($),value:H,payload:R}:{x:W?null:a.scale($),y:Lk({axis:l,ticks:m,bandSize:g,entry:R,index:B}),value:H,payload:R}}),C;return x||w?C=k.map(R=>{var B=Array.isArray(R.value)?R.value[0]:null;return b?{x:R.x,y:B!=null&&R.y!=null?l.scale(B):null,payload:R.payload}:{x:B!=null?a.scale(B):null,y:R.y,payload:R.payload}}):C=b?l.scale(v):a.scale(v),{points:k,baseLine:C,isRange:w}}function GVe(t){var e=xi(t,Ade),n=Hi();return A.createElement(ON,{id:e.id,type:"area"},r=>A.createElement(A.Fragment,null,A.createElement(tB,{legendPayload:OVe(e)}),A.createElement(MVe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),A.createElement(nB,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Zae(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),A.createElement(HVe,fm({},e,{id:r}))))}var jN=A.memo(GVe,vE);jN.displayName="Area";var KVe="Invariant failed";function WVe(t,e){throw new Error(KVe)}function AL(){return AL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AL.apply(null,arguments)}function f2(t){return A.createElement(X6,AL({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var YVe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(At(e))return e;var s=At(r)||Sr(r);return s?e(r,i):(s||WVe(),n)}},JVe=(t,e,n)=>n,XVe=(t,e)=>e,bE=Le([fE,XVe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),QVe=Le([bE],t=>t==null?void 0:t.maxBarSize),ZVe=(t,e,n,r)=>r,eqe=Le([An,fE,Wc,Yc,JVe],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),tqe=(t,e,n)=>{var r=An(t),i=Wc(t,e),s=Yc(t,e);if(!(i==null||s==null))return r==="horizontal"?n2(t,"yAxis",s,n):n2(t,"xAxis",i,n)},nqe=(t,e)=>{var n=An(t),r=Wc(t,e),i=Yc(t,e);if(!(r==null||i==null))return n==="horizontal"?YW(t,"xAxis",r):YW(t,"yAxis",i)},rqe=Le([eqe,iBe,nqe],bze),iqe=(t,e,n)=>{var r,i,s=bE(t,e);if(s!=null){var o=Wc(t,e),a=Yc(t,e);if(!(o==null||a==null)){var l=An(t),c=kce(t),{maxBarSize:u}=s,h=Sr(u)?c:u,m,g;return l==="horizontal"?(m=Vc(t,"xAxis",o,n),g=Hc(t,"xAxis",o,n)):(m=Vc(t,"yAxis",a,n),g=Hc(t,"yAxis",a,n)),(r=(i=ph(m,g,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},Tde=(t,e,n)=>{var r=An(t),i=Wc(t,e),s=Yc(t,e);if(!(i==null||s==null)){var o,a;return r==="horizontal"?(o=Vc(t,"xAxis",i,n),a=Hc(t,"xAxis",i,n)):(o=Vc(t,"yAxis",s,n),a=Hc(t,"yAxis",s,n)),ph(o,a)}},sqe=Le([rqe,kce,rBe,Cce,iqe,Tde,QVe],Tze),oqe=(t,e,n)=>{var r=Wc(t,e);if(r!=null)return Vc(t,"xAxis",r,n)},aqe=(t,e,n)=>{var r=Yc(t,e);if(r!=null)return Vc(t,"yAxis",r,n)},lqe=(t,e,n)=>{var r=Wc(t,e);if(r!=null)return Hc(t,"xAxis",r,n)},cqe=(t,e,n)=>{var r=Yc(t,e);if(r!=null)return Hc(t,"yAxis",r,n)},uqe=Le([sqe,bE],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),dqe=Le([tqe,bE],kze),fqe=Le([Ai,Ij,oqe,aqe,lqe,cqe,uqe,An,dce,Tde,dqe,bE,ZVe],(t,e,n,r,i,s,o,a,l,c,u,h,m)=>{var{chartData:g,dataStartIndex:x,dataEndIndex:v}=l;if(!(h==null||o==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||s==null||c==null)){var{data:b}=h,w;if(b!=null&&b.length>0?w=b:w=g==null?void 0:g.slice(x,v+1),w!=null)return $qe({layout:a,barSettings:h,pos:o,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:u,displayedData:w,offset:t,cells:m,dataStartIndex:x})}}),hqe=["index"];function TL(){return TL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TL.apply(null,arguments)}function pqe(t,e){if(t==null)return{};var n,r,i=mqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kde=A.createContext(void 0),gqe=t=>{var e=A.useContext(kde);if(e!=null)return e.stackId;if(t!=null)return Zae(t)},yqe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),xqe=t=>{var e=A.useContext(kde);if(e!=null){var{stackId:n}=e;return"url(#".concat(yqe(n,t),")")}},vqe=t=>{var{index:e}=t,n=pqe(t,hqe),r=xqe(e);return A.createElement(Wr,TL({className:"recharts-bar-stack-layer",clipPath:r},n))},bqe=["onMouseEnter","onMouseLeave","onClick"],wqe=["value","background","tooltipPosition"],Eqe=["id"],Sqe=["onMouseEnter","onClick","onMouseLeave"];function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(null,arguments)}function pJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pJ(Object(n),!0).forEach(function(r){Aqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aqe(t,e,n){return(e=Tqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tqe(t){var e=kqe(t,"string");return typeof e=="symbol"?e:e+""}function kqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h2(t,e){if(t==null)return{};var n,r,i=Cqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Nqe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Sh(n,e),payload:t}]},Pqe=A.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:o,unit:a,tooltipType:l,id:c}=t,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Sh(s,e),hide:o,type:l,color:i,unit:a,graphicalItemId:c}};return A.createElement(RN,{tooltipEntrySettings:u})});function _qe(t){var e=Rt(gh),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:a,onClick:l}=s,c=h2(s,bqe),u=Q6(o,r,s.id),h=Z6(a),m=eB(l,r,s.id);if(!i||n==null)return null;var g=Sm(i);return A.createElement(ao,{zIndex:Cze(i,ii.barBackground)},n.map((x,v)=>{var{value:b,background:w,tooltipPosition:k}=x,C=h2(x,wqe);if(!w)return null;var R=u(x,v),B=h(x,v),O=m(x,v),F=Gs(Gs(Gs(Gs(Gs({option:i,isActive:String(v)===e},C),{},{fill:"#eee"},w),g),VC(c,x,v)),{},{onMouseEnter:R,onMouseLeave:B,onClick:O,dataKey:r,index:v,className:"recharts-bar-background-rectangle"});return A.createElement(f2,Ed({key:"background-bar-".concat(v)},F))}))}function Iqe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Gs(Gs({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return A.createElement(G6,{value:e?i:void 0},n)}function Rqe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:o}=t,a=Rt(gh),l=Rt(U6),c=n&&String(s)===a&&(l==null||o===l),u=c?n:e;return c?A.createElement(ao,{zIndex:ii.activeBar},A.createElement(f2,Ed({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:o}))):A.createElement(f2,Ed({},r,{name:String(r.name)},i,{isActive:c,option:u,index:s,dataKey:o}))}function Oqe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return A.createElement(f2,Ed({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function Mqe(t){var e,{data:n,props:r}=t,i=(e=ro(r))!==null&&e!==void 0?e:{},{id:s}=i,o=h2(i,Eqe),{shape:a,dataKey:l,activeBar:c}=r,{onMouseEnter:u,onClick:h,onMouseLeave:m}=r,g=h2(r,Sqe),x=Q6(u,l,s),v=Z6(m),b=eB(h,l,s);return n?A.createElement(A.Fragment,null,n.map((w,k)=>A.createElement(vqe,Ed({index:k,key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(k),className:"recharts-bar-rectangle"},VC(g,w,k),{onMouseEnter:x(w,k),onMouseLeave:v(w,k),onClick:b(w,k)}),c?A.createElement(Rqe,{shape:a,activeBar:c,baseProps:o,entry:w,index:k,dataKey:l}):A.createElement(Oqe,{shape:a,baseProps:o,entry:w,index:k,dataKey:l})))):null}function Lqe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=e,h=n.current,m=tv(e,"recharts-bar-"),[g,x]=A.useState(!1),v=!g,b=A.useCallback(()=>{typeof c=="function"&&c(),x(!1)},[c]),w=A.useCallback(()=>{typeof u=="function"&&u(),x(!0)},[u]);return A.createElement(Iqe,{showLabels:v,rects:r},A.createElement(ev,{animationId:m,begin:o,duration:a,isActive:s,easing:l,onAnimationEnd:b,onAnimationStart:w,key:m},k=>{var C=k===1?r:r==null?void 0:r.map((R,B)=>{var O=h&&h[B];if(O)return Gs(Gs({},R),{},{x:qn(O.x,R.x,k),y:qn(O.y,R.y,k),width:qn(O.width,R.width,k),height:qn(O.height,R.height,k)});if(i==="horizontal"){var F=qn(0,R.height,k),H=qn(R.stackedBarStart,R.y,k);return Gs(Gs({},R),{},{y:H,height:F})}var j=qn(0,R.width,k),$=qn(R.stackedBarStart,R.x,k);return Gs(Gs({},R),{},{width:j,x:$})});return k>0&&(n.current=C??null),C==null?null:A.createElement(Wr,null,A.createElement(Mqe,{props:e,data:C}))}),A.createElement(PN,{label:e.label}),e.children)}function Dqe(t){var e=A.useRef(null);return A.createElement(Lqe,{previousRectanglesRef:e,props:t})}var Cde=0,jqe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Wn(t,e)}};class Bqe extends A.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:o,needClip:a,background:l,id:c}=this.props;if(e||n==null)return null;var u=Rn("recharts-bar",i),h=c;return A.createElement(Wr,{className:u,id:c},a&&A.createElement("defs",null,A.createElement(aB,{clipPathId:h,xAxisId:s,yAxisId:o})),A.createElement(Wr,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(h,")"):void 0},A.createElement(_qe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),A.createElement(Dqe,this.props)))}}var Uqe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Cde,xAxisId:0,yAxisId:0,zIndex:ii.bar};function Fqe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u}=t,{needClip:h}=DN(e,n),m=Ah(),g=Hi(),x=Y6(t.children,dv),v=Rt(k=>fqe(k,t.id,g,x));if(m!=="vertical"&&m!=="horizontal")return null;var b,w=v==null?void 0:v[0];return w==null||w.height==null||w.width==null?b=0:b=m==="vertical"?w.height/2:w.width/2,A.createElement(cde,{xAxisId:e,yAxisId:n,data:v,dataPointFormatter:jqe,errorBarOffset:b},A.createElement(Bqe,Ed({},t,{layout:m,needClip:h,data:v,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function $qe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:o,yAxis:a,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:h,offset:m,cells:g,parentViewBox:x,dataStartIndex:v}=t,b=e==="horizontal"?a:o,w=u?b.scale.domain():null,k=tLe({numericAxis:b}),C=b.scale(k);return h.map((R,B)=>{var O,F,H,j,$,W;if(u){var V=u[B+v];if(V==null)return null;O=JMe(V,w)}else O=Wn(R,n),Array.isArray(O)||(O=[k,O]);var U=YVe(r,Cde)(O[1],B);if(e==="horizontal"){var T,[_,L]=[a.scale(O[0]),a.scale(O[1])];F=tK({axis:o,ticks:l,bandSize:s,offset:i.offset,entry:R,index:B}),H=(T=L??_)!==null&&T!==void 0?T:void 0,j=i.size;var z=_-L;if($=Qa(z)?0:z,W={x:F,y:m.top,width:j,height:m.height},Math.abs(U)>0&&Math.abs($)<Math.abs(U)){var G=$i($||U)*(Math.abs(U)-Math.abs($));H-=G,$+=G}}else{var[te,K]=[o.scale(O[0]),o.scale(O[1])];if(F=te,H=tK({axis:a,ticks:c,bandSize:s,offset:i.offset,entry:R,index:B}),j=K-te,$=i.size,W={x:m.left,y:H,width:m.width,height:$},Math.abs(U)>0&&Math.abs(j)<Math.abs(U)){var q=$i(j||U)*(Math.abs(U)-Math.abs(j));j+=q}}if(F==null||H==null||j==null||$==null)return null;var M=Gs(Gs({},R),{},{stackedBarStart:C,x:F,y:H,width:j,height:$,value:u?O:O[1],payload:R,background:W,tooltipPosition:{x:F+j/2,y:H+$/2},parentViewBox:x},g&&g[B]&&g[B].props);return M}).filter(Boolean)}function zqe(t){var e=xi(t,Uqe),n=gqe(e.stackId),r=Hi();return A.createElement(ON,{id:e.id,type:"bar"},i=>A.createElement(A.Fragment,null,A.createElement(tB,{legendPayload:Nqe(e)}),A.createElement(Pqe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),A.createElement(nB,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(ao,{zIndex:e.zIndex},A.createElement(Fqe,Ed({},e,{id:i})))))}var Nde=A.memo(zqe,vE);Nde.displayName="Bar";var Hqe=["domain","range"],Vqe=["domain","range"];function mJ(t,e){if(t==null)return{};var n,r,i=qqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function gJ(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Pde(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=mJ(t,Hqe),{domain:s,range:o}=e,a=mJ(e,Vqe);return!gJ(n,s)||!gJ(r,o)?!1:vE(i,a)}var Gqe=["dangerouslySetInnerHTML","ticks","scale"],Kqe=["id","scale"];function kL(){return kL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kL.apply(null,arguments)}function yJ(t,e){if(t==null)return{};var n,r,i=Wqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Yqe(t){var e=Pr(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(sze(t)):n.current!==t&&e(oze({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(aze(n.current)),n.current=null)},[e]),null}var Jqe=t=>{var{xAxisId:e,className:n}=t,r=Rt(Ij),i=Hi(),s="xAxis",o=Rt(w=>sue(w,s,e,i)),a=Rt(w=>tue(w,e)),l=Rt(w=>n7e(w,e)),c=Rt(w=>Dce(w,e));if(a==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:h,scale:m}=t,g=yJ(t,Gqe),{id:x,scale:v}=c,b=yJ(c,Kqe);return A.createElement(oB,kL({},g,b,{x:l.x,y:l.y,width:a.width,height:a.height,className:Rn("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},Xqe={allowDataOverflow:_i.allowDataOverflow,allowDecimals:_i.allowDecimals,allowDuplicatedCategory:_i.allowDuplicatedCategory,angle:_i.angle,axisLine:id.axisLine,height:_i.height,hide:!1,includeHidden:_i.includeHidden,interval:_i.interval,minTickGap:_i.minTickGap,mirror:_i.mirror,orientation:_i.orientation,padding:_i.padding,reversed:_i.reversed,scale:_i.scale,tick:_i.tick,tickCount:_i.tickCount,tickLine:id.tickLine,tickSize:id.tickSize,type:_i.type,xAxisId:0},Qqe=t=>{var e=xi(t,Xqe);return A.createElement(A.Fragment,null,A.createElement(Yqe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(Jqe,e))},u1=A.memo(Qqe,Pde);u1.displayName="XAxis";var Zqe=["dangerouslySetInnerHTML","ticks","scale"],eGe=["id","scale"];function CL(){return CL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CL.apply(null,arguments)}function xJ(t,e){if(t==null)return{};var n,r,i=tGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function nGe(t){var e=Pr(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(lze(t)):n.current!==t&&e(cze({prev:n.current,next:t})),n.current=t},[t,e]),A.useLayoutEffect(()=>()=>{n.current&&(e(uze(n.current)),n.current=null)},[e]),null}var rGe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=A.useRef(null),o=A.useRef(null),a=Rt(Ij),l=Hi(),c=Pr(),u="yAxis",h=Rt(O=>nue(O,e)),m=Rt(O=>i7e(O,e)),g=Rt(O=>sue(O,u,e,l)),x=Rt(O=>jce(O,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!h||q6(i)||A.isValidElement(i)||x==null)){var O=s.current;if(O){var F=O.getCalculatedWidth();Math.round(h.width)!==Math.round(F)&&c(dze({id:e,width:F}))}}},[g,h,c,i,e,r,x]),h==null||m==null||x==null)return null;var{dangerouslySetInnerHTML:v,ticks:b,scale:w}=t,k=xJ(t,Zqe),{id:C,scale:R}=x,B=xJ(x,eGe);return A.createElement(oB,CL({},k,B,{ref:s,labelRef:o,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Rn("recharts-".concat(u," ").concat(u),n),viewBox:a,ticks:g,axisType:u}))},iGe={allowDataOverflow:Ii.allowDataOverflow,allowDecimals:Ii.allowDecimals,allowDuplicatedCategory:Ii.allowDuplicatedCategory,angle:Ii.angle,axisLine:id.axisLine,hide:!1,includeHidden:Ii.includeHidden,interval:Ii.interval,minTickGap:Ii.minTickGap,mirror:Ii.mirror,orientation:Ii.orientation,padding:Ii.padding,reversed:Ii.reversed,scale:Ii.scale,tick:Ii.tick,tickCount:Ii.tickCount,tickLine:id.tickLine,tickSize:id.tickSize,type:Ii.type,width:Ii.width,yAxisId:0},sGe=t=>{var e=xi(t,iGe);return A.createElement(A.Fragment,null,A.createElement(nGe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(rGe,e))},d1=A.memo(sGe,Pde);d1.displayName="YAxis";var oGe=(t,e)=>e,cB=Le([oGe,An,Mce,ki,wue,Md,vUe,Ai],kUe),uB=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},_de=Za("mouseClick"),Ide=tE();Ide.startListening({actionCreator:_de,effect:(t,e)=>{var n=t.payload,r=cB(e.getState(),uB(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(x7e({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var NL=Za("mouseMove"),Rde=tE(),MA=null;Rde.startListening({actionCreator:NL,effect:(t,e)=>{var n=t.payload;MA!==null&&cancelAnimationFrame(MA);var r=uB(n);MA=requestAnimationFrame(()=>{var i=e.getState(),s=O6(i,i.tooltip.settings.shared);if(s==="axis"){var o=cB(i,r);(o==null?void 0:o.activeIndex)!=null?e.dispatch(hue({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(fue())}MA=null})}});function aGe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var vJ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Ode=Co({name:"rootProps",initialState:vJ,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:vJ.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),lGe=Ode.reducer,{updateOptions:cGe}=Ode.actions,Mde=Co({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:uGe}=Mde.actions,dGe=Mde.reducer,Lde=Za("keyDown"),Dde=Za("focus"),dB=tE();dB.startListening({actionCreator:Lde,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=M6(i,uv(n),pE(n),yE(n)),a=o==null?-1:Number(o);if(!(!Number.isFinite(a)||a<0)){var l=Md(n);if(s==="Enter"){var c=i2(n,"axis","hover",String(i.index));e.dispatch(yL({active:!i.active,activeIndex:i.index,activeCoordinate:c}));return}var u=l7e(n),h=u==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=a+m*h;if(!(l==null||g>=l.length||g<0)){var x=i2(n,"axis","hover",String(g));e.dispatch(yL({active:!0,activeIndex:g.toString(),activeCoordinate:x}))}}}}}});dB.startListening({actionCreator:Dde,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=i2(n,"axis","hover",String(s));e.dispatch(yL({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var _a=Za("externalEvent"),jde=tE(),FO=new Map;jde.startListening({actionCreator:_a,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=FO.get(i);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var a=e.getState(),l={activeCoordinate:iUe(a),activeDataKey:U6(a),activeIndex:gh(a),activeLabel:Aue(a),activeTooltipIndex:gh(a),isTooltipActive:sUe(a)};n(l,r)}finally{FO.delete(i)}});FO.set(i,o)}}});var fGe=Le([lv],t=>t.tooltipItemPayloads),hGe=Le([fGe,gE,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.graphicalItemId===r);if(i!=null){var{positions:s}=i;if(s!=null){var o=e(s,n);return o}}}),Bde=Za("touchMove"),Ude=tE();Ude.startListening({actionCreator:Bde,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=O6(r,r.tooltip.settings.shared);if(i==="axis"){var s=n.touches[0];if(s==null)return;var o=cB(r,uB({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(hue({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var a,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(tle),h=(a=c.getAttribute(nle))!==null&&a!==void 0?a:void 0,m=cv(r).find(v=>v.id===h);if(u==null||m==null||h==null)return;var{dataKey:g}=m,x=hGe(r,u,h);e.dispatch(due({activeDataKey:g,activeIndex:u,activeCoordinate:x,activeGraphicalItemId:h}))}}}});var pGe=Eae({brush:Nze,cartesianAxis:fze,chartData:nFe,errorBars:THe,graphicalItems:v$e,layout:VMe,legend:JLe,options:XUe,polarAxis:O9e,polarOptions:dGe,referenceElements:Lze,rootProps:lGe,tooltip:v7e,zIndex:FUe}),mGe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return mMe({reducer:pGe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([Ide.middleware,Rde.middleware,dB.middleware,jde.middleware,Ude.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(jae({type:"raf"}))},devTools:{serialize:{replacer:aGe},name:"recharts-".concat(n)}})};function Fde(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Hi(),s=A.useRef(null);if(i)return n;s.current==null&&(s.current=mGe(e,r));var o=Ej;return A.createElement(XHe,{context:o,store:s.current},n)}function gGe(t){var{layout:e,margin:n}=t,r=Pr(),i=Hi();return A.useEffect(()=>{i||(r($Me(e)),r(FMe(n)))},[r,i,e,n]),null}var $de=A.memo(gGe,vE);function zde(t){var e=Pr();return A.useEffect(()=>{e(cGe(t))},[e,t]),null}function bJ(t){var{zIndex:e,isPanorama:n}=t,r=A.useRef(null),i=Pr();return A.useLayoutEffect(()=>(r.current&&i(BUe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(UUe({zIndex:e,isPanorama:n}))}),[i,e,n]),A.createElement("g",{tabIndex:-1,ref:r})}function wJ(t){var{children:e,isPanorama:n}=t,r=Rt(NUe);if(!r||r.length===0)return e;var i=r.filter(o=>o<0),s=r.filter(o=>o>0);return A.createElement(A.Fragment,null,i.map(o=>A.createElement(bJ,{key:o,zIndex:o,isPanorama:n})),e,s.map(o=>A.createElement(bJ,{key:o,zIndex:o,isPanorama:n})))}var yGe=["children"];function xGe(t,e){if(t==null)return{};var n,r,i=vGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function p2(){return p2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p2.apply(null,arguments)}var bGe={width:"100%",height:"100%",display:"block"},wGe=A.forwardRef((t,e)=>{var n=lle(),r=cle(),i=ble();if(!$c(n)||!$c(r))return null;var{children:s,otherAttributes:o,title:a,desc:l}=t,c,u;return o!=null&&(typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?u=o.role:u=i?"application":void 0),A.createElement(Uoe,p2({},o,{title:a,desc:l,role:u,tabIndex:c,width:n,height:r,style:bGe,ref:e}),s)}),EGe=t=>{var{children:e}=t,n=Rt(rN);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return A.createElement(Uoe,{width:r,height:i,x:o,y:s},e)},EJ=A.forwardRef((t,e)=>{var{children:n}=t,r=xGe(t,yGe),i=Hi();return i?A.createElement(EGe,null,A.createElement(wJ,{isPanorama:!0},n)):A.createElement(wGe,p2({ref:e},r),A.createElement(wJ,{isPanorama:!1},n))});function SGe(){var t=Pr(),[e,n]=A.useState(null),r=Rt(aLe);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;cr(s)&&s!==r&&t(HMe(s))}},[e,t,r]),n}function SJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AGe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SJ(Object(n),!0).forEach(function(r){TGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TGe(t,e,n){return(e=kGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kGe(t){var e=CGe(t,"string");return typeof e=="symbol"?e:e+""}function CGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Im.apply(null,arguments)}var NGe=()=>(dFe(),null);function m2(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var PGe=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[s,o]=A.useState({containerWidth:m2((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:m2((r=t.style)===null||r===void 0?void 0:r.height)}),a=A.useCallback((c,u)=>{o(h=>{var m=Math.round(c),g=Math.round(u);return h.containerWidth===m&&h.containerHeight===g?h:{containerWidth:m,containerHeight:g}})},[]),l=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:u,height:h}=c.getBoundingClientRect();a(u,h);var m=x=>{var{width:v,height:b}=x[0].contentRect;a(v,b)},g=new ResizeObserver(m);g.observe(c),i.current=g}},[e,a]);return A.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[a]),A.createElement(A.Fragment,null,A.createElement(sN,{width:s.containerWidth,height:s.containerHeight}),A.createElement("div",Im({ref:l},t)))}),_Ge=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=A.useState({containerWidth:m2(n),containerHeight:m2(r)}),o=A.useCallback((l,c)=>{s(u=>{var h=Math.round(l),m=Math.round(c);return u.containerWidth===h&&u.containerHeight===m?u:{containerWidth:h,containerHeight:m}})},[]),a=A.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();o(c,u)}},[e,o]);return A.createElement(A.Fragment,null,A.createElement(sN,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",Im({ref:a},t)))}),IGe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(sN,{width:n,height:r}),A.createElement("div",Im({ref:e},t)))}),RGe=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return gd(n)||gd(r)?A.createElement(_Ge,Im({},t,{ref:e})):A.createElement(IGe,Im({},t,{ref:e}))});function OGe(t){return t===!0?PGe:RGe}var MGe=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:h,onMouseUp:m,onTouchEnd:g,onTouchMove:x,onTouchStart:v,style:b,width:w,responsive:k,dispatchTouchEvents:C=!0}=t,R=A.useRef(null),B=Pr(),[O,F]=A.useState(null),[H,j]=A.useState(null),$=SGe(),W=Rj(),V=(W==null?void 0:W.width)>0?W.width:w,U=(W==null?void 0:W.height)>0?W.height:i,T=A.useCallback(ue=>{$(ue),typeof e=="function"&&e(ue),F(ue),j(ue),ue!=null&&(R.current=ue)},[$,e,F,j]),_=A.useCallback(ue=>{B(_de(ue)),B(_a({handler:s,reactEvent:ue}))},[B,s]),L=A.useCallback(ue=>{B(NL(ue)),B(_a({handler:c,reactEvent:ue}))},[B,c]),z=A.useCallback(ue=>{B(fue()),B(_a({handler:u,reactEvent:ue}))},[B,u]),G=A.useCallback(ue=>{B(NL(ue)),B(_a({handler:h,reactEvent:ue}))},[B,h]),te=A.useCallback(()=>{B(Dde())},[B]),K=A.useCallback(ue=>{B(Lde(ue.key))},[B]),q=A.useCallback(ue=>{B(_a({handler:o,reactEvent:ue}))},[B,o]),M=A.useCallback(ue=>{B(_a({handler:a,reactEvent:ue}))},[B,a]),P=A.useCallback(ue=>{B(_a({handler:l,reactEvent:ue}))},[B,l]),Y=A.useCallback(ue=>{B(_a({handler:m,reactEvent:ue}))},[B,m]),X=A.useCallback(ue=>{B(_a({handler:v,reactEvent:ue}))},[B,v]),re=A.useCallback(ue=>{C&&B(Bde(ue)),B(_a({handler:x,reactEvent:ue}))},[B,C,x]),ae=A.useCallback(ue=>{B(_a({handler:g,reactEvent:ue}))},[B,g]),Te=OGe(k);return A.createElement(Rue.Provider,{value:O},A.createElement(YOe.Provider,{value:H},A.createElement(Te,{width:V??(b==null?void 0:b.width),height:U??(b==null?void 0:b.height),className:Rn("recharts-wrapper",r),style:AGe({position:"relative",cursor:"default",width:V,height:U},b),onClick:_,onContextMenu:q,onDoubleClick:M,onFocus:te,onKeyDown:K,onMouseDown:P,onMouseEnter:L,onMouseLeave:z,onMouseMove:G,onMouseUp:Y,onTouchEnd:ae,onTouchMove:re,onTouchStart:X,ref:T},A.createElement(NGe,null),n)))}),LGe=["width","height","responsive","children","className","style","compact","title","desc"];function DGe(t,e){if(t==null)return{};var n,r,i=jGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Hde=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:o,style:a,compact:l,title:c,desc:u}=t,h=DGe(t,LGe),m=ro(h);return l?A.createElement(A.Fragment,null,A.createElement(sN,{width:n,height:r}),A.createElement(EJ,{otherAttributes:m,title:c,desc:u},s)):A.createElement(MGe,{className:o,style:a,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(EJ,{otherAttributes:m,title:c,desc:u,ref:e},A.createElement(jze,null,s)))});function PL(){return PL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PL.apply(null,arguments)}var BGe={top:5,right:5,bottom:5,left:5},UGe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:BGe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},fB=A.forwardRef(function(e,n){var r,i=xi(e.categoricalChartProps,UGe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,eventEmitter:void 0};return A.createElement(Fde,{preloadedState:{options:u},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},A.createElement(rde,{chartData:c.data}),A.createElement($de,{layout:i.layout,margin:i.margin}),A.createElement(zde,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(Hde,PL({},i,{ref:n})))}),FGe=["axis","item"],$Ge=A.forwardRef((t,e)=>A.createElement(fB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:FGe,tooltipPayloadSearcher:CN,categoricalChartProps:t,ref:e}));function zGe(t){var e=Pr();return A.useEffect(()=>{e(uGe(t))},[e,t]),null}var HGe=["layout"];function _L(){return _L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_L.apply(null,arguments)}function VGe(t,e){if(t==null)return{};var n,r,i=qGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var GGe={top:5,right:5,bottom:5,left:5},Vde={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:GGe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},KGe=A.forwardRef(function(e,n){var r,i=xi(e.categoricalChartProps,Vde),{layout:s}=i,o=VGe(i,HGe),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=e,h={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return A.createElement(Fde,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:a},A.createElement(rde,{chartData:i.data}),A.createElement($de,{layout:s,margin:i.margin}),A.createElement(zde,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),A.createElement(zGe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),A.createElement(Hde,_L({},o,{ref:n})))});function AJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AJ(Object(n),!0).forEach(function(r){WGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WGe(t,e,n){return(e=YGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YGe(t){var e=JGe(t,"string");return typeof e=="symbol"?e:e+""}function JGe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XGe=["item"],QGe=TJ(TJ({},Vde),{},{layout:"centric",startAngle:0,endAngle:360}),qde=A.forwardRef((t,e)=>{var n=xi(t,QGe);return A.createElement(KGe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:XGe,tooltipPayloadSearcher:CN,categoricalChartProps:n,ref:e})}),ZGe=["axis"],Gde=A.forwardRef((t,e)=>A.createElement(fB,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ZGe,tooltipPayloadSearcher:CN,categoricalChartProps:t,ref:e})),eKe=["axis"],tKe=A.forwardRef((t,e)=>A.createElement(fB,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:eKe,tooltipPayloadSearcher:CN,categoricalChartProps:t,ref:e}));const hB="https://api.devnet.solana.com",nKe="HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8",ih=[{symbol:"SOL",name:"Solana",mint:"So11111111111111111111111111111111111111112",decimals:9,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"},{symbol:"USDC",name:"USD Coin (Devnet)",mint:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png"}],kc={SOL:145.5,USDC:1,RAY:1.85},rKe="https://dlmm-api.meteora.ag",kJ=({network:t})=>{const e={solana:"bg-[#9b87f5]/15 text-[#9b87f5] border-[#9b87f5]/30",hyperliquid:"bg-[#34d399]/15 text-[#34d399] border-[#34d399]/30",polymarket:"bg-[#60a5fa]/15 text-[#60a5fa] border-[#60a5fa]/30"},n={solana:"SOL",hyperliquid:"HL",polymarket:"PM"};return d.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-semibold rounded uppercase tracking-[0.05em] border ${e[t]}`,children:n[t]})},iKe=({vault:t,connectOwnerWallet:e,disconnectOwnerWallet:n,connectHLOwnerWallet:r,disconnectHLOwnerWallet:i,connectPMOwnerWallet:s,disconnectPMOwnerWallet:o,assetPrices:a,portfolioHistoryDaily:l,portfolioHistoryLongTerm:c,scheduledTasks:u,assetAllocationData:h,activityFeed:m,activityDisplayCount:g,setActivityDisplayCount:x,setActiveTab:v,refreshData:b,onNewChat:w})=>{const[k,C]=A.useState("all"),[R,B]=A.useState(0),O=2,[F,H]=A.useState("1D"),j=c.length,$=A.useMemo(()=>({"1D":l.length>0||j>=1,"1W":j>=7,"1M":j>=30,"1Y":j>=365}),[j,l.length]),W=A.useMemo(()=>{if(F==="1D")return l;if(c.length===0)return[];const re={"1D":1,"1W":7,"1M":30,"1Y":365}[F]||30;return c.slice(-re)},[l,c,F]),[V,U]=A.useState(0),T=2,[_,L]=A.useState(null),[z,G]=A.useState("pie"),[te,K]=A.useState(null),[q,M]=A.useState(void 0),P=async X=>{try{await navigator.clipboard.writeText(X),L(X),setTimeout(()=>L(null),2e3)}catch(re){console.error("Failed to copy:",re)}},Y=X=>X.network==="solana"&&X.signature?`https://solscan.io/tx/${X.signature}?cluster=devnet`:X.network==="hyperliquid"&&X.signature?`https://app.hyperliquid-testnet.xyz/explorer/tx/${X.signature.replace("hl-","")}`:null;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[d.jsxs("div",{className:"flex flex-col gap-4 lg:gap-6",children:[d.jsxs("div",{className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center group",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:d.jsx(cx,{size:48,className:"text-white"})}),d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-2",children:"Total Net Worth"}),d.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight",children:["$",h.totalValue.toFixed(2)]}),d.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"Cross-Chain Unified Portfolio"})]}),d.jsxs("button",{onClick:w,className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center items-start text-left hover:bg-[#1a1b21] transition-colors group border border-dashed border-[#232328] hover:border-[#E7FE55]/50",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity text-[#E7FE55]",children:d.jsx(kl,{size:48})}),d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("div",{className:"p-1.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] group-hover:bg-[#E7FE55] group-hover:text-black transition-colors",children:d.jsx(kl,{size:16})}),d.jsx("h3",{className:"text-[#E7FE55] font-medium text-sm",children:"New Conversation"})]}),d.jsx("div",{className:"text-[11px] text-[#747580]",children:"Start a new task or query"})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(eo,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center gap-2 mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Solana Vault"})}),d.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[t.solBalance.toFixed(4)," SOL"]}),d.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.solBalance*(a.SOL||kc.SOL)).toFixed(2)]}),d.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),t.publicKey&&d.jsxs("a",{href:`https://solscan.io/address/${t.publicKey}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"View on Solscan Explorer",children:[d.jsx(dT,{size:10})," Solscan"]})]}),t.publicKey?d.jsxs("div",{onClick:()=>P(t.publicKey),className:"flex items-center gap-2 cursor-pointer group",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.publicKey.slice(0,4),"...",t.publicKey.slice(-4)]}),_===t.publicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),d.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Solana Owner"})}),t.ownerPublicKey?d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{onClick:()=>P(t.ownerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.ownerPublicKey.slice(0,4),"...",t.ownerPublicKey.slice(-4)]}),_===t.ownerPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),d.jsx("button",{onClick:n,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),d.jsx("button",{onClick:e,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(_n,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center gap-2 mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Hyperliquid Vault"})}),d.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.hlBalance||0).toFixed(2)," USDC"]}),d.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:t.hlPositions&&t.hlPositions.length>0?`${t.hlPositions.length} open position${t.hlPositions.length>1?"s":""}`:"No open positions"}),d.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),d.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[d.jsx(_n,{size:10})," Hyperliquid"]})]}),t.hlPublicKey?d.jsxs("div",{onClick:()=>P(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),_===t.hlPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),d.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Hyperliquid Owner"})}),t.hlOwnerPublicKey?d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{onClick:()=>P(t.hlOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlOwnerPublicKey.slice(0,4),"...",t.hlOwnerPublicKey.slice(-4)]}),_===t.hlOwnerPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),d.jsx("button",{onClick:i,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),d.jsx("button",{onClick:r,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(dT,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center gap-2 mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Polymarket Vault"})}),d.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.pmBalance||0).toFixed(2)," USDC"]}),d.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.pmBalance||0).toFixed(2)]}),d.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),d.jsxs("a",{href:"https://polymarket.com",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Polymarket Platform",children:[d.jsx(dT,{size:10})," Polymarket"]})]}),t.pmPublicKey?d.jsxs("div",{onClick:()=>P(t.pmPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmPublicKey.slice(0,6),"...",t.pmPublicKey.slice(-4)]}),_===t.pmPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),d.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Polymarket Owner"})}),t.pmOwnerPublicKey?d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{onClick:()=>P(t.pmOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmOwnerPublicKey.slice(0,4),"...",t.pmOwnerPublicKey.slice(-4)]}),_===t.pmOwnerPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),d.jsx("button",{onClick:o,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),d.jsx("button",{onClick:s,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"2xl:col-span-2 space-y-6",children:[d.jsxs("div",{className:"glass-panel p-6 rounded",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(eo,{className:"text-[#E7FE55]",size:18}),"Portfolio Evolution"]}),d.jsx("div",{className:"flex gap-2",children:["1D","1W","1M","1Y"].map(X=>{const re=$[X],ae=X===F;return d.jsx("button",{disabled:!re,onClick:()=>re&&H(X),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${re?ae?"bg-[#E7FE55]/15 text-[#E7FE55] border border-[#E7FE55]/30":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]":"text-[#3a3a40] cursor-not-allowed"}`,children:X},X)})})]}),d.jsx("div",{className:"h-[250px] lg:h-[300px] w-full",children:d.jsx(Jw,{width:"100%",height:"100%",children:d.jsxs(tKe,{data:W.length>0?W:[],children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.25}),d.jsx("stop",{offset:"50%",stopColor:"#E7FE55",stopOpacity:.08}),d.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),d.jsx(l1,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),d.jsx(u1,{dataKey:"date",stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),d.jsx(d1,{stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1,tickFormatter:X=>`$${X}`,width:50}),d.jsx(s2,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#e4e5e9"},labelStyle:{color:"#747580"},itemSorter:X=>({value:0,solValue:1,hlValue:2,pmValue:3})[X.dataKey]??10,formatter:(X,re)=>[`$${X.toFixed(2)}`,re==="value"?"Total Value":re==="solValue"?"SOL Value":re==="hlValue"?"HL Value":re==="pmValue"?"PM Value":re]}),d.jsx(jN,{type:"monotone",dataKey:"value",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorValue)"}),d.jsx(OT,{type:"monotone",dataKey:"solValue",stroke:"#9b87f5",strokeWidth:1.5,dot:!1}),d.jsx(OT,{type:"monotone",dataKey:"hlValue",stroke:"#34d399",strokeWidth:1.5,dot:!1}),d.jsx(OT,{type:"monotone",dataKey:"pmValue",stroke:"#60a5fa",strokeWidth:1.5,dot:!1})]})})}),d.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-[11px] text-[#747580]",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#E7FE55]"}),d.jsx("span",{children:"Total Value"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),d.jsx("span",{children:"SOL Value"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34d399]"}),d.jsx("span",{children:"HL Value"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-[#60a5fa]"}),d.jsx("span",{children:"PM Value"})]})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(_n,{className:"text-[#E7FE55]",size:18}),"Open Trading"]}),d.jsxs("button",{onClick:()=>v(we.HYPERLIQUID),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[d.jsx(_n,{size:12}),"Details"]})]}),!t.hlPositions||t.hlPositions.length===0?d.jsx("div",{className:"text-center py-8 text-[#747580] text-sm bg-[#14151a] rounded border border-[#232328]",children:"No open positions. Start trading to see your portfolio grow!"}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),d.jsx("th",{className:"py-3 font-medium",children:"Size"}),d.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Mark Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),d.jsx("th",{className:"py-3 pr-4 font-medium text-right",children:"Unrealized PnL"})]})}),d.jsx("tbody",{className:"text-sm",children:t.hlPositions.map((X,re)=>{const ae=parseFloat(X.position.szi),Te=parseFloat(X.position.entryPx),ue=a[X.position.coin]||Te,pe=parseFloat(X.position.unrealizedPnl),be=X.position.leverage.value,se=ae>0,ve=se?Te*(1-.9/be):Te*(1+.9/be);return d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[d.jsx("td",{className:"py-3 pl-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-1 h-6 rounded-full ${se?"bg-[#34d399]":"bg-red-500"}`}),d.jsx("span",{className:"font-semibold text-white",children:X.position.coin}),d.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded uppercase tracking-wider ${se?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:se?"LONG":"SHORT"})]})}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:Math.abs(ae).toFixed(4)}),d.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",Te.toFixed(4)]}),d.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",ue.toFixed(4)]}),d.jsxs("td",{className:"py-3 text-orange-400/80",children:["$",ve.toFixed(4)]}),d.jsxs("td",{className:"py-3 text-[#747580]",children:[be,"x"]}),d.jsxs("td",{className:`py-3 pr-4 text-right font-medium ${pe>=0?"text-[#34d399]":"text-red-400"}`,children:[pe>=0?"+":"",pe.toFixed(2)," USDC"]})]},re)})})]})})]}),d.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(fs,{className:"text-[#E7FE55]",size:18}),"Open Tasks"]}),d.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[u.filter(X=>X.status==="active").length," Active"]}),d.jsxs("button",{onClick:()=>v(we.SCHEDULER),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[d.jsx(fs,{size:12}),"Details"]})]}),d.jsx("div",{className:"flex-1 flex flex-col",children:u.filter(X=>X.status==="active").length===0?d.jsx("div",{className:"text-center py-8 text-[#747580] text-sm my-auto bg-[#14151a] rounded border border-[#232328]",children:"No active tasks scheduled. Ask the AI to schedule a swap or transfer."}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-3",children:u.filter(X=>X.status==="active").slice(V*T,(V+1)*T).map(X=>d.jsxs("div",{className:"bg-[#14151a] p-4 rounded border border-[#232328] flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-sm font-medium text-white flex items-center gap-2",children:[X.type,X.type==="HL_ORDER"&&d.jsx(kJ,{network:"hyperliquid"}),X.condition&&d.jsx("span",{className:"text-[10px] text-yellow-500",children:"(Condition)"})]}),d.jsx("div",{className:"text-[11px] text-[#747580]",children:X.condition?`${X.condition.indicator.toUpperCase()} ${X.condition.operator} ${X.condition.value} (${X.condition.symbol})`:`Executes in ${Math.max(0,Math.round(((X.executeAt||0)-Date.now())/6e4))} mins`})]})]}),d.jsxs("div",{className:"text-[10px] font-mono text-[#747580]",children:["ID: ",X.id.slice(-4)]})]},X.id))}),d.jsx("div",{className:"mt-auto",children:u.filter(X=>X.status==="active").length>T&&d.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[d.jsx("button",{onClick:()=>U(Math.max(0,V-1)),disabled:V===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${V===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:d.jsx(Nw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",V+1," of ",Math.ceil(u.filter(X=>X.status==="active").length/T)]}),d.jsx("button",{onClick:()=>U(Math.min(Math.ceil(u.filter(X=>X.status==="active").length/T)-1,V+1)),disabled:V>=Math.ceil(u.filter(X=>X.status==="active").length/T)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${V>=Math.ceil(u.filter(X=>X.status==="active").length/T)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:d.jsx(Ul,{size:16})})]})})]})})]})]}),d.jsxs("div",{className:"space-y-6 flex flex-col",children:[d.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-white",children:"Asset Allocation"}),d.jsxs("div",{className:"flex gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[d.jsx("button",{onClick:()=>G("bar"),className:`p-1.5 rounded transition-colors ${z==="bar"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Bar View",children:d.jsx(ATe,{size:14})}),d.jsx("button",{onClick:()=>G("pie"),className:`p-1.5 rounded transition-colors ${z==="pie"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Pie View",children:d.jsx(Cw,{size:14})})]})]}),d.jsx("div",{className:"h-[180px] w-full relative flex-shrink-0",children:d.jsx(Jw,{width:"100%",height:"100%",children:z==="pie"?d.jsxs(qde,{children:[d.jsx(rB,{data:h.data,cx:"50%",cy:"50%",innerRadius:45,outerRadius:q!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:(X,re)=>M(re),onMouseLeave:()=>M(void 0),animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:h.data.map((X,re)=>d.jsx(dv,{fill:X.color,stroke:q===re?X.color:"transparent",strokeWidth:q===re?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:q===re?`brightness(1.2) drop-shadow(0 0 8px ${X.color})`:"brightness(1)",transform:q===re?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${re}`))}),q!==void 0&&h.data[q]&&d.jsxs("g",{children:[d.jsx("text",{x:"50%",y:"42%",textAnchor:"middle",fill:"#fff",fontSize:12,fontWeight:"bold",children:h.data[q].symbol}),d.jsxs("text",{x:"50%",y:"54%",textAnchor:"middle",fill:h.data[q].color,fontSize:15,fontWeight:"bold",fontFamily:"monospace",children:["$",h.data[q].value.toFixed(2)]}),d.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[(h.data[q].value/(h.totalValue||1)*100).toFixed(1),"%"]})]}),q===void 0&&d.jsxs("g",{children:[d.jsx("text",{x:"50%",y:"46%",textAnchor:"middle",fill:"#747580",fontSize:10,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"Total"}),d.jsxs("text",{x:"50%",y:"58%",textAnchor:"middle",fill:"#fff",fontSize:18,fontWeight:"600",children:["$",h.totalValue.toFixed(0)]})]})]}):d.jsxs($Ge,{data:[h.data.reduce((X,re)=>({...X,[re.symbol]:re.value}),{name:"Total"})],layout:"vertical",margin:{top:20,right:30,left:20,bottom:5},children:[d.jsx(l1,{strokeDasharray:"3 3",horizontal:!0,vertical:!0,stroke:"#232328"}),d.jsx(u1,{type:"number",tickFormatter:X=>`$${X}`,tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),d.jsx(d1,{type:"category",dataKey:"name",hide:!0}),d.jsx(s2,{cursor:{fill:"transparent"},content:({active:X,payload:re})=>{if(!X||!re||!re.length||!te)return null;const ae=re.find(Te=>Te.dataKey===te);return ae?d.jsxs("div",{className:"bg-[#14151a] border border-[#232328] p-2 rounded shadow-lg",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:ae.color}}),d.jsx("span",{className:"text-[#a0a1a8] font-semibold text-[11px]",children:ae.name})]}),d.jsxs("p",{className:"text-white font-mono text-sm",children:["$",Number(ae.value).toFixed(2)]})]}):null}}),h.data.map((X,re)=>d.jsx(Nde,{dataKey:X.symbol,stackId:"a",fill:X.color,onMouseEnter:()=>K(X.symbol),onMouseLeave:()=>K(null),radius:re===0&&h.data.length===1?[4,4,4,4]:re===0?[4,0,0,4]:re===h.data.length-1?[0,4,4,0]:[0,0,0,0],barSize:40},X.symbol))]})})}),d.jsx("div",{className:"mt-4 space-y-1 flex-1 overflow-y-auto pr-2 custom-scrollbar",children:h.data.map((X,re)=>d.jsxs("div",{className:`flex items-center justify-between text-sm p-2 rounded-lg transition-all cursor-pointer ${q===re?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>M(re),onMouseLeave:()=>M(void 0),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 transition-transform",style:{backgroundColor:X.color,transform:q===re?"scale(1.3)":"scale(1)",boxShadow:q===re?`0 0 8px ${X.color}`:"none"}}),d.jsx("span",{className:`truncate max-w-[80px] sm:max-w-[100px] text-xs transition-colors ${q===re?"text-white":"text-[#a0a1a8]"}`,children:X.symbol}),X.network&&d.jsx("span",{className:`text-[9px] px-1 rounded uppercase tracking-wider ${X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":X.network==="hyperliquid"?"bg-[#34d399]/15 text-[#34d399]":"bg-[#60a5fa]/15 text-[#60a5fa]"}`,children:X.network==="solana"?"SOL":X.network==="hyperliquid"?"HL":"PM"})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("span",{className:`text-xs font-mono transition-colors ${q===re?"text-white":"text-[#747580]"}`,children:["$",X.value.toFixed(2)]}),d.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:X.color},children:[(X.value/(h.totalValue||1)*100).toFixed(1),"%"]})]})]},re))})]}),d.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-white",children:"Recent Activity"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{C(k==="solana"?"all":"solana"),B(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${k==="solana"?"bg-[#9b87f5] text-white":"bg-[#9b87f5]/15 text-[#9b87f5] hover:bg-[#9b87f5]/25"}`,children:"SOL"}),d.jsx("button",{onClick:()=>{C(k==="hyperliquid"?"all":"hyperliquid"),B(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${k==="hyperliquid"?"bg-[#34d399] text-[#0f1015]":"bg-[#34d399]/15 text-[#34d399] hover:bg-[#34d399]/25"}`,children:"HL"})]})]}),d.jsx("div",{className:"flex-1 flex flex-col",children:m.filter(X=>k==="all"||X.network===k).length===0?d.jsx("div",{className:"text-center text-[#747580] text-sm py-4 my-auto bg-[#14151a] rounded border border-[#232328]",children:"No recent activity"}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"space-y-3",children:m.filter(X=>k==="all"||X.network===k).slice(R*O,(R+1)*O).map((X,re)=>d.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328] last:border-0",children:[d.jsx("div",{className:`mt-1 p-1.5 rounded-full ${X.status==="failed"?"bg-red-500/15 text-red-400":X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":"bg-[#34d399]/15 text-[#34d399]"}`,children:X.status==="failed"?d.jsx(pTe,{size:14}):d.jsx($ne,{size:14})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex justify-between items-start gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`text-sm font-medium ${X.status==="failed"?"text-red-400":X.network==="solana"?"text-[#9b87f5]":"text-[#34d399]"}`,children:X.type}),d.jsx(kJ,{network:X.network})]}),d.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:X.time})]}),d.jsx("div",{className:"text-[11px] text-[#747580] truncate mt-0.5",children:X.desc}),X.signature&&Y(X)&&d.jsxs("a",{href:Y(X),target:"_blank",rel:"noopener noreferrer",className:`text-[10px] ${X.network==="solana"?"text-[#9b87f5] hover:text-[#a78bfa]":"text-[#34d399] hover:text-[#4ade80]"} flex items-center gap-1 mt-1`,children:[X.network==="solana"?"View on Solscan Explorer":"View on HL Explorer"," ",d.jsx(mm,{size:10})]})]})]},re))}),d.jsx("div",{className:"mt-auto",children:m.filter(X=>k==="all"||X.network===k).length>O&&d.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[d.jsx("button",{onClick:()=>B(Math.max(0,R-1)),disabled:R===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${R===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:d.jsx(Nw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",R+1," of ",Math.ceil(m.filter(X=>k==="all"||X.network===k).length/O)]}),d.jsx("button",{onClick:()=>B(Math.min(Math.ceil(m.filter(X=>k==="all"||X.network===k).length/O)-1,R+1)),disabled:R>=Math.ceil(m.filter(X=>k==="all"||X.network===k).length/O)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${R>=Math.ceil(m.filter(X=>k==="all"||X.network===k).length/O)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:d.jsx(Ul,{size:16})})]})})]})})]})]})]})]})},sKe=({vault:t,password:e,setPassword:n,withdrawAmount:r,setWithdrawAmount:i,withdrawNetwork:s,setWithdrawNetwork:o,isImporting:a,setIsImporting:l,importKey:c,setImportKey:u,createVault:h,unlockVault:m,requestAirdrop:g,handleWithdraw:x,handleWithdrawHL:v,handleWithdrawPM:b,importVault:w,addNotification:k,isImportingSolana:C,setIsImportingSolana:R,isImportingHyperliquid:B,setIsImportingHyperliquid:O,isImportingPolymarket:F,setIsImportingPolymarket:H,solanaPassword:j,setSolanaPassword:$,hyperliquidPassword:W,setHyperliquidPassword:V,polymarketPassword:U,setPolymarketPassword:T,solanaImportKey:_,setSolanaImportKey:L,hlImportKey:z,setHLImportKey:G,pmImportKey:te,setPMImportKey:K,createSolanaVault:q,createHyperliquidVault:M,createPolymarketVault:P,importSolanaVault:Y,importHyperliquidVault:X,importPolymarketVault:re,setActiveTab:ae,activeVaultTab:Te,setActiveVaultTab:ue})=>{var tt,mt,dt,Wt;const pe=A.useMemo(()=>{const qe=(t.solBalance||0)*kc.SOL,Tt=t.hlBalance||0,ln=t.pmBalance||0;return qe+Tt+ln},[t.solBalance,t.hlBalance,t.pmBalance]),be=A.useMemo(()=>{const qe=(t.solBalance||0)*kc.SOL,Tt=t.hlBalance||0,ln=t.pmBalance||0,Ie=qe+Tt+ln;return{solana:{value:qe,percent:Ie>0?qe/Ie*100:0},hyperliquid:{value:Tt,percent:Ie>0?Tt/Ie*100:0},polymarket:{value:ln,percent:Ie>0?ln/Ie*100:0},total:Ie}},[t.solBalance,t.hlBalance,t.pmBalance]);!t.publicKey&&!t.hlPublicKey||t.isUnlocked;const se={solana:"#E7FE55",hyperliquid:"#E7FE55",polymarket:"#60a5fa"},ve=()=>{const{solana:qe,hyperliquid:Tt,polymarket:ln,total:Ie}=be,[Ve,gt]=A.useState(void 0),ut=A.useMemo(()=>Ie===0?[]:[{name:"Solana",value:qe.value,percent:qe.percent,color:se.solana},{name:"Hyperliquid",value:Tt.value,percent:Tt.percent,color:se.hyperliquid},{name:"Polymarket",value:ln.value,percent:ln.percent,color:se.polymarket}].filter(Z=>Z.value>0),[qe,Tt,ln,Ie]);if(Ie===0)return d.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[d.jsx("div",{className:"w-32 h-32 rounded-full bg-[#1a1b21] border-2 border-dashed border-[#232328] flex items-center justify-center",children:d.jsx(Cw,{size:32,className:"text-[#747580]"})}),d.jsx("p",{className:"text-[#747580] text-xs mt-4",children:"No assets"})]});const oe=(Z,de)=>{gt(de)},J=()=>{gt(void 0)};return d.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full gap-4",children:[d.jsx("div",{className:"w-full h-[180px] relative",children:d.jsx(Jw,{width:"100%",height:"100%",children:d.jsxs(qde,{children:[d.jsxs("defs",{children:[d.jsxs("linearGradient",{id:"solanaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#E7FE55",stopOpacity:.8}),d.jsx("stop",{offset:"100%",stopColor:"#E7FE55",stopOpacity:.4})]}),d.jsxs("linearGradient",{id:"hyperliquidGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#f3ffad"}),d.jsx("stop",{offset:"100%",stopColor:"#E7FE55"})]}),d.jsxs("linearGradient",{id:"polymarketGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#7db4fb"}),d.jsx("stop",{offset:"100%",stopColor:"#60a5fa"})]})]}),d.jsx(rB,{data:ut,cx:"50%",cy:"50%",innerRadius:45,outerRadius:Ve!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:oe,onMouseLeave:J,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:ut.map((Z,de)=>d.jsx(dv,{fill:Z.color,stroke:Ve===de?Z.color:"transparent",strokeWidth:Ve===de?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:Ve===de?`brightness(1.2) drop-shadow(0 0 8px ${Z.color})`:"brightness(1)",transform:Ve===de?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${de}`))}),Ve!==void 0&&ut[Ve]&&d.jsxs("g",{children:[d.jsx("text",{x:"50%",y:"45%",textAnchor:"middle",fill:"#fff",fontSize:13,fontWeight:"bold",children:ut[Ve].name}),d.jsxs("text",{x:"50%",y:"55%",textAnchor:"middle",fill:ut[Ve].color,fontSize:16,fontWeight:"bold",fontFamily:"monospace",children:["$",ut[Ve].value.toFixed(2)]}),d.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[ut[Ve].percent.toFixed(1),"%"]})]})]})})}),d.jsx("div",{className:"flex flex-col gap-2 w-full",children:ut.map((Z,de)=>d.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg transition-all cursor-pointer ${Ve===de?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>gt(de),onMouseLeave:()=>gt(void 0),children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full transition-transform",style:{backgroundColor:Z.color,transform:Ve===de?"scale(1.3)":"scale(1)",boxShadow:Ve===de?`0 0 8px ${Z.color}`:"none"}}),d.jsx("span",{className:`text-xs transition-colors ${Ve===de?"text-white":"text-[#747580]"}`,children:Z.name})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("span",{className:`text-xs font-mono transition-colors ${Ve===de?"text-white":"text-[#747580]"}`,children:["$",Z.value.toFixed(2)]}),d.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:Z.color},children:[Z.percent.toFixed(1),"%"]})]})]},Z.name))})]})},Re=d.jsxs("div",{className:"glass-panel p-4 flex flex-col h-full",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#E7FE55] mb-3",children:[d.jsx(tk,{size:14}),"Fast Withdraw"]}),d.jsxs("div",{className:"flex gap-1 mb-3 bg-[#0f1015] p-1 rounded",children:[d.jsx("button",{onClick:()=>o("SOL"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="SOL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"SOL"}),d.jsx("button",{onClick:()=>o("HYPE"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="HYPE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"HYPE"}),d.jsx("button",{onClick:()=>o("POLY"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="POLY"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"POLY"})]}),d.jsxs("div",{className:"flex-1 flex flex-col justify-end space-y-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"swiss-label block mb-1.5",children:"Amount"}),d.jsxs("div",{className:"flex items-center relative",children:[d.jsx("input",{type:"number",value:r,onChange:qe=>i(qe.target.value),className:"w-full bg-[#0f1015] border border-[#232328] rounded pl-3 pr-12 py-2.5 text-sm text-white focus:ring-1 outline-none transition-all focus:ring-[#E7FE55]",placeholder:"0.00"}),d.jsx("button",{onClick:()=>{i(s==="SOL"?Math.max(0,t.solBalance-.005).toFixed(4):s==="HYPE"?Math.max(0,(t.hlBalance||0)-1).toFixed(2):Math.max(0,t.pmBalance||0).toFixed(2))},className:"absolute right-2 text-[9px] font-semibold px-1.5 py-0.5 rounded bg-[#E7FE55]/20 text-[#E7FE55]",children:"MAX"})]})]}),d.jsxs("button",{onClick:s==="SOL"?x:s==="HYPE"?v:b,disabled:s==="SOL"&&!t.publicKey||s==="HYPE"&&!t.hlPublicKey||s==="POLY"&&!t.pmPublicKey,className:`w-full font-semibold py-2.5 rounded transition-all flex items-center justify-center gap-2 text-xs ${s==="SOL"&&t.publicKey||s==="HYPE"&&t.hlPublicKey||s==="POLY"&&t.pmPublicKey?"bg-[#E7FE55] hover:brightness-110 text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed"}`,children:[d.jsx(tk,{size:14}),s==="SOL"?"Withdraw SOL":"Withdraw USDC"]})]})]}),De=d.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[d.jsxs("div",{className:"glass-panel glass-panel-solana p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5] mb-3",children:[d.jsx("img",{src:ih[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"}),"Solana Vault"]}),t.publicKey?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[d.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.publicKey}),d.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.publicKey),k("Copied!")},className:"text-[#747580] hover:text-white",children:d.jsx(om,{size:12})})]}),d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsxs("div",{children:[d.jsx("div",{className:"swiss-label",children:"Balance"}),d.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[t.solBalance.toFixed(4)," ",d.jsx("span",{className:"text-xs text-[#747580]",children:"SOL"})]})]}),d.jsxs("div",{className:"text-xs text-[#9b87f5] font-mono",children:[" $",(t.solBalance*kc.SOL).toFixed(2)]})]})]}):d.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx("p",{className:"text-xs text-[#747580]",children:"No Solana wallet found."}),d.jsx("input",{type:"password",value:j,onChange:qe=>$(qe.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none",placeholder:"Password..."}),C&&d.jsx("input",{type:"password",value:_,onChange:qe=>L(qe.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none font-mono",placeholder:"Private Key..."}),d.jsx("div",{className:"flex gap-2",children:C?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:Y,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),d.jsx("button",{onClick:()=>R(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:q,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[d.jsx(kl,{size:12})," New"]}),d.jsxs("button",{onClick:()=>R(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[d.jsx(Vs,{size:12})," Import"]})]})})]})]}),t.publicKey&&d.jsxs("div",{className:"glass-panel glass-panel-solana flex flex-col overflow-hidden flex-1",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5]",children:[d.jsx(Fl,{size:12})," Solana Assets"]}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((tt=t.assets)==null?void 0:tt.filter(qe=>!qe.isNft&&qe.symbol!=="SOL").length)||0," Assets"]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:d.jsxs("table",{className:"swiss-table w-full",children:[d.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4",children:"Asset"}),d.jsx("th",{className:"px-4 text-right",children:"Balance"}),d.jsx("th",{className:"px-4 text-right",children:"Value"})]})}),d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"px-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center",children:d.jsx("img",{src:ih[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"})}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:"SOL"}),d.jsx("span",{className:"text-[9px] text-[#747580]",children:"Native"})]})]})}),d.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:t.solBalance.toFixed(4)}),d.jsxs("td",{className:"px-4 text-right font-mono text-xs text-[#9b87f5]",children:["$",(t.solBalance*kc.SOL).toFixed(2)]})]}),t.assets&&t.assets.filter(qe=>!qe.isNft&&qe.symbol!=="SOL").length>0?t.assets.filter(qe=>!qe.isNft&&qe.symbol!=="SOL").map((qe,Tt)=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center text-[10px] font-bold text-[#747580] border border-[#232328]",children:qe.symbol[0]}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:qe.symbol}),d.jsx("span",{className:"text-[9px] text-[#747580] truncate max-w-[60px]",children:qe.name})]})]})}),d.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:(parseFloat(qe.amount)/Math.pow(10,qe.decimals)).toFixed(4)}),d.jsx("td",{className:"px-4 text-right font-mono text-xs text-[#34d399]",children:qe.symbol!=="UNKNOWN"?`$${(parseFloat(qe.amount)/Math.pow(10,qe.decimals)*(kc[qe.symbol]||0)).toFixed(2)}`:"-"})]},Tt)):null]})]})})]})]}),Qe=d.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[d.jsxs("div",{className:"glass-panel glass-panel-hyperliquid p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399] mb-3",children:[d.jsx(_n,{size:14}),"Hyperliquid Vault"]}),t.hlPublicKey?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[d.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.hlPublicKey}),d.jsx("button",{onClick:()=>{t.hlPublicKey&&(navigator.clipboard.writeText(t.hlPublicKey),k("Copied!"))},className:"text-[#747580] hover:text-white",children:d.jsx(om,{size:12})})]}),d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsxs("div",{children:[d.jsx("div",{className:"swiss-label",children:"Balance"}),d.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((mt=t.hlBalance)==null?void 0:mt.toFixed(2))||"0.00"," ",d.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),d.jsx("div",{className:"text-xs text-[#E7FE55] font-mono",children:"Testnet"})]})]}):d.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx("p",{className:"text-xs text-[#747580]",children:"No Hyperliquid wallet found."}),d.jsx("input",{type:"password",value:W,onChange:qe=>V(qe.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none",placeholder:"Password..."}),B&&d.jsx("input",{type:"password",value:z,onChange:qe=>G(qe.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),d.jsx("div",{className:"flex gap-2",children:B?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:X,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded",children:"Confirm"}),d.jsx("button",{onClick:()=>O(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:M,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[d.jsx(kl,{size:12})," New"]}),d.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[d.jsx(Vs,{size:12})," Import"]})]})})]})]}),t.hlPublicKey&&d.jsxs("div",{className:"glass-panel glass-panel-hyperliquid flex flex-col overflow-hidden flex-1",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399]",children:[d.jsx(_n,{size:12})," Active Positions"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((dt=t.hlPositions)==null?void 0:dt.filter(qe=>parseFloat(qe.position.szi)!==0).length)||0," Open"]}),d.jsxs("button",{onClick:()=>ae(we.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/15 hover:bg-[#E7FE55]/25 text-[#E7FE55] border border-[#E7FE55]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[d.jsx(_n,{size:10}),"Details"]})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:d.jsxs("table",{className:"swiss-table w-full",children:[d.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-3",children:"Ticker"}),d.jsx("th",{className:"px-3",children:"Side"}),d.jsx("th",{className:"px-3 text-right",children:"Size"}),d.jsx("th",{className:"px-3 text-right",children:"PnL"})]})}),d.jsx("tbody",{children:t.hlPositions&&t.hlPositions.filter(qe=>parseFloat(qe.position.szi)!==0).length>0?t.hlPositions.filter(qe=>parseFloat(qe.position.szi)!==0).map((qe,Tt)=>{const ln=parseFloat(qe.position.szi),Ie=ln>0,Ve=parseFloat(qe.position.unrealizedPnl||"0");return d.jsxs("tr",{children:[d.jsx("td",{className:"px-3",children:d.jsx("span",{className:"text-xs font-semibold text-white",children:qe.position.coin})}),d.jsx("td",{className:"px-3",children:d.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${Ie?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:Ie?"LONG":"SHORT"})}),d.jsx("td",{className:"px-3 text-right font-mono text-xs text-slate-300",children:Math.abs(ln).toFixed(4)}),d.jsxs("td",{className:`px-3 text-right font-mono text-xs font-semibold ${Ve>=0?"text-[#34d399]":"text-red-400"}`,children:[Ve>=0?"+":"",Ve.toFixed(2)]})]},`hl-${Tt}`)}):d.jsx("tr",{children:d.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-[#747580] text-xs italic",children:"No active positions."})})})]})})]})]}),it=d.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[d.jsxs("div",{className:"glass-panel glass-panel-polymarket p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa] mb-3",children:[d.jsx(Rl,{size:14}),"Polymarket Vault"]}),t.pmPublicKey?d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[d.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.pmPublicKey}),d.jsx("button",{onClick:()=>{t.pmPublicKey&&(navigator.clipboard.writeText(t.pmPublicKey),k("Copied!"))},className:"text-[#747580] hover:text-white",children:d.jsx(om,{size:12})})]}),d.jsxs("div",{className:"flex justify-between items-end",children:[d.jsxs("div",{children:[d.jsx("div",{className:"swiss-label",children:"Balance"}),d.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((Wt=t.pmBalance)==null?void 0:Wt.toFixed(2))||"0.00"," ",d.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),d.jsx("div",{className:"text-xs text-[#60a5fa] font-mono",children:"Polygon"})]})]}):d.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx("p",{className:"text-xs text-[#747580]",children:"No Polymarket wallet found."}),d.jsx("input",{type:"password",value:U,onChange:qe=>T(qe.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none",placeholder:"Password..."}),F&&d.jsx("input",{type:"password",value:te,onChange:qe=>K(qe.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),d.jsx("div",{className:"flex gap-2",children:F?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:re,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),d.jsx("button",{onClick:()=>H(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:P,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[d.jsx(kl,{size:12})," New"]}),d.jsxs("button",{onClick:()=>H(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[d.jsx(Vs,{size:12})," Import"]})]})})]})]}),t.pmPublicKey&&d.jsxs("div",{className:"glass-panel glass-panel-polymarket flex flex-col overflow-hidden flex-1",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa]",children:[d.jsx(Rl,{size:12})," Market Positions"]}),d.jsxs("button",{onClick:()=>ae(we.POLYMARKET_DASHBOARD),className:"text-[10px] bg-[#60a5fa]/15 hover:bg-[#60a5fa]/25 text-[#60a5fa] border border-[#60a5fa]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[d.jsx(Rl,{size:10}),"Details"]})]}),d.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:d.jsx("p",{className:"text-xs text-[#747580] text-center",children:"View your Polymarket positions in the Polymarket Dealer dashboard."})})]})]}),et=d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[d.jsxs("div",{className:"glass-panel p-4 flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2 swiss-label text-white",children:[d.jsx(Cw,{size:14}),"Asset Allocation"]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:"Net Worth"}),d.jsxs("div",{className:"text-lg font-bold font-mono text-white",children:["$",pe.toFixed(2)]})]})]}),d.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[200px]",children:d.jsx(ve,{})})]}),Re]});return d.jsx("div",{className:"h-full flex flex-col gap-6 overflow-y-auto custom-scrollbar p-1",children:!t.publicKey&&!t.hlPublicKey?d.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto relative z-10 flex flex-col items-center justify-center flex-1",children:[d.jsxs(Bt.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"w-20 h-20 glass-panel rounded-full flex items-center justify-center mb-6 border-[#E7FE55]/30 relative group",children:[d.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/5 rounded-full blur-xl group-hover:bg-[#E7FE55]/10 transition-colors"}),d.jsx(ch,{size:32,className:"text-[#E7FE55] relative z-10"})]}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Configure Your Vault"}),d.jsx("p",{className:"text-[#747580] text-center mb-8 text-sm",children:"Securely manage your assets across multiple networks."}),d.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"glass-panel glass-panel-solana p-6 space-y-4 border-[#9b87f5]/20 transition-transform duration-200 hover:-translate-y-1",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-[#9b87f5]/10 rounded-lg flex items-center justify-center border border-[#9b87f5]/20",children:d.jsx("img",{src:ih[0].logoURI,alt:"SOL",className:"w-5 h-5 rounded-full"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold",children:"Solana"}),d.jsx("span",{className:"text-[10px] text-[#9b87f5] uppercase tracking-widest font-bold",children:"Devnet"})]})]}),d.jsx("input",{type:"password",value:j,onChange:qe=>$(qe.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),C&&d.jsx("input",{type:"password",value:_,onChange:qe=>L(qe.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#9b87f5]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (Base58)"}),d.jsx("div",{className:"flex gap-2",children:C?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:Y,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(Vs,{size:14})," Import"]}),d.jsx("button",{onClick:()=>R(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:q,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(kl,{size:14})," Create"]}),d.jsxs("button",{onClick:()=>R(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[d.jsx(Vs,{size:14})," Import"]})]})})]}),d.jsxs("div",{className:"glass-panel p-6 space-y-4 border-[#34d399]/20 transition-transform duration-200 hover:-translate-y-1",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-[#34d399]/10 rounded-lg flex items-center justify-center border border-[#34d399]/20",children:d.jsx(_n,{size:20,className:"text-[#34d399]"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold",children:"Hyperliquid"}),d.jsx("span",{className:"text-[10px] text-[#34d399] uppercase tracking-widest font-bold",children:"Testnet"})]})]}),d.jsx("input",{type:"password",value:W,onChange:qe=>V(qe.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),B&&d.jsx("input",{type:"password",value:z,onChange:qe=>G(qe.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#34d399]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),d.jsx("div",{className:"flex gap-2",children:B?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:X,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(Vs,{size:14})," Import"]}),d.jsx("button",{onClick:()=>O(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:M,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(kl,{size:14})," Create"]}),d.jsxs("button",{onClick:()=>O(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[d.jsx(Vs,{size:14})," Import"]})]})})]}),d.jsxs("div",{className:"glass-panel glass-panel-polymarket p-6 space-y-4 border-[#60a5fa]/20 transition-transform duration-200 hover:-translate-y-1",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-[#60a5fa]/10 rounded-lg flex items-center justify-center border border-[#60a5fa]/20",children:d.jsx(Rl,{size:20,className:"text-[#60a5fa]"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-semibold",children:"Polymarket"}),d.jsx("span",{className:"text-[10px] text-[#60a5fa] uppercase tracking-widest font-bold",children:"Polygon"})]})]}),d.jsx("input",{type:"password",value:U,onChange:qe=>T(qe.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all placeholder:text-[#747580]",placeholder:"Wallet Password"}),F&&d.jsx("input",{type:"password",value:te,onChange:qe=>K(qe.target.value),className:"w-full bg-[#0f1015]/50 border border-[#232328] rounded-md px-3 py-3 text-white text-sm focus:ring-1 focus:ring-[#60a5fa]/50 outline-none transition-all font-mono placeholder:text-[#747580]",placeholder:"Private Key (0x...)"}),d.jsx("div",{className:"flex gap-2",children:F?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:re,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(Vs,{size:14})," Import"]}),d.jsx("button",{onClick:()=>H(!1),className:"px-3 py-3 text-[#747580] hover:text-white text-xs font-semibold",children:"Cancel"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:P,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider",children:[d.jsx(kl,{size:14})," Create"]}),d.jsxs("button",{onClick:()=>H(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-md transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[d.jsx(Vs,{size:14})," Import"]})]})})]})]}),d.jsx("p",{className:"text-xs text-[#747580] mt-8 text-center max-w-sm",children:"Wallets are stored locally and encrypted. Never share your private keys or password."})]}):t.isUnlocked?d.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[Te==="main"&&et,Te==="solana"&&De,Te==="hyperliquid"&&Qe,Te==="polymarket"&&it]}):d.jsxs(Bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"max-w-md mx-auto relative z-10 flex flex-col items-center justify-center flex-1 w-full",children:[d.jsxs(Bt.div,{animate:{rotate:[0,-10,10,-10,10,0]},transition:{delay:.5,duration:.5,ease:"easeInOut"},className:"w-24 h-24 glass-panel rounded-full flex items-center justify-center mb-8 border-[#E7FE55]/30 relative",children:[d.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/10 rounded-full blur-2xl animate-pulse"}),d.jsx(ch,{size:40,className:"text-[#E7FE55] relative z-10"})]}),d.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Vault Locked"}),d.jsx("p",{className:"text-[#747580] text-center mb-10 text-sm",children:"Authentication required to access your assets."}),d.jsxs("div",{className:"w-full glass-panel p-8 space-y-6 border-[#E7FE55]/10 shadow-2xl",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"swiss-label px-1",children:"Security Password"}),d.jsx("input",{type:"password",value:e,onChange:qe=>n(qe.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-md px-4 py-4 text-white focus:ring-1 focus:ring-[#E7FE55]/50 outline-none transition-all placeholder:text-[#333540] text-lg font-mono",placeholder:"",onKeyDown:qe=>qe.key==="Enter"&&m()})]}),d.jsxs("button",{onClick:m,className:"w-full bg-[#E7FE55] hover:brightness-110 active:scale-[0.98] text-black font-bold py-4 rounded-md transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-widest",children:[d.jsx(qne,{size:18})," Unlock Vault"]})]})]})})};function oKe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const aKe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,lKe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cKe={};function CJ(t,e){return(cKe.jsx?lKe:aKe).test(t)}const uKe=/[ \t\n\f\r]/g;function dKe(t){return typeof t=="object"?t.type==="text"?NJ(t.value):!1:NJ(t)}function NJ(t){return t.replace(uKe,"")===""}class wE{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}wE.prototype.normal={};wE.prototype.property={};wE.prototype.space=void 0;function Kde(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new wE(n,r,e)}function IL(t){return t.toLowerCase()}class No{constructor(e,n){this.attribute=n,this.property=e}}No.prototype.attribute="";No.prototype.booleanish=!1;No.prototype.boolean=!1;No.prototype.commaOrSpaceSeparated=!1;No.prototype.commaSeparated=!1;No.prototype.defined=!1;No.prototype.mustUseProperty=!1;No.prototype.number=!1;No.prototype.overloadedBoolean=!1;No.prototype.property="";No.prototype.spaceSeparated=!1;No.prototype.space=void 0;let fKe=0;const dn=Gm(),ui=Gm(),RL=Gm(),at=Gm(),hr=Gm(),ay=Gm(),$o=Gm();function Gm(){return 2**++fKe}const OL=Object.freeze(Object.defineProperty({__proto__:null,boolean:dn,booleanish:ui,commaOrSpaceSeparated:$o,commaSeparated:ay,number:at,overloadedBoolean:RL,spaceSeparated:hr},Symbol.toStringTag,{value:"Module"})),$O=Object.keys(OL);class pB extends No{constructor(e,n,r,i){let s=-1;if(super(e,n),PJ(this,"space",i),typeof r=="number")for(;++s<$O.length;){const o=$O[s];PJ(this,$O[s],(r&OL[o])===OL[o])}}}pB.prototype.defined=!0;function PJ(t,e,n){n&&(t[e]=n)}function fv(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new pB(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[IL(r)]=r,n[IL(s.attribute)]=r}return new wE(e,n,t.space)}const Wde=fv({properties:{ariaActiveDescendant:null,ariaAtomic:ui,ariaAutoComplete:null,ariaBusy:ui,ariaChecked:ui,ariaColCount:at,ariaColIndex:at,ariaColSpan:at,ariaControls:hr,ariaCurrent:null,ariaDescribedBy:hr,ariaDetails:null,ariaDisabled:ui,ariaDropEffect:hr,ariaErrorMessage:null,ariaExpanded:ui,ariaFlowTo:hr,ariaGrabbed:ui,ariaHasPopup:null,ariaHidden:ui,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:hr,ariaLevel:at,ariaLive:null,ariaModal:ui,ariaMultiLine:ui,ariaMultiSelectable:ui,ariaOrientation:null,ariaOwns:hr,ariaPlaceholder:null,ariaPosInSet:at,ariaPressed:ui,ariaReadOnly:ui,ariaRelevant:null,ariaRequired:ui,ariaRoleDescription:hr,ariaRowCount:at,ariaRowIndex:at,ariaRowSpan:at,ariaSelected:ui,ariaSetSize:at,ariaSort:null,ariaValueMax:at,ariaValueMin:at,ariaValueNow:at,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Yde(t,e){return e in t?t[e]:e}function Jde(t,e){return Yde(t,e.toLowerCase())}const hKe=fv({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ay,acceptCharset:hr,accessKey:hr,action:null,allow:null,allowFullScreen:dn,allowPaymentRequest:dn,allowUserMedia:dn,alt:null,as:null,async:dn,autoCapitalize:null,autoComplete:hr,autoFocus:dn,autoPlay:dn,blocking:hr,capture:null,charSet:null,checked:dn,cite:null,className:hr,cols:at,colSpan:null,content:null,contentEditable:ui,controls:dn,controlsList:hr,coords:at|ay,crossOrigin:null,data:null,dateTime:null,decoding:null,default:dn,defer:dn,dir:null,dirName:null,disabled:dn,download:RL,draggable:ui,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:dn,formTarget:null,headers:hr,height:at,hidden:RL,high:at,href:null,hrefLang:null,htmlFor:hr,httpEquiv:hr,id:null,imageSizes:null,imageSrcSet:null,inert:dn,inputMode:null,integrity:null,is:null,isMap:dn,itemId:null,itemProp:hr,itemRef:hr,itemScope:dn,itemType:hr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:dn,low:at,manifest:null,max:null,maxLength:at,media:null,method:null,min:null,minLength:at,multiple:dn,muted:dn,name:null,nonce:null,noModule:dn,noValidate:dn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:dn,optimum:at,pattern:null,ping:hr,placeholder:null,playsInline:dn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:dn,referrerPolicy:null,rel:hr,required:dn,reversed:dn,rows:at,rowSpan:at,sandbox:hr,scope:null,scoped:dn,seamless:dn,selected:dn,shadowRootClonable:dn,shadowRootDelegatesFocus:dn,shadowRootMode:null,shape:null,size:at,sizes:null,slot:null,span:at,spellCheck:ui,src:null,srcDoc:null,srcLang:null,srcSet:null,start:at,step:null,style:null,tabIndex:at,target:null,title:null,translate:null,type:null,typeMustMatch:dn,useMap:null,value:ui,width:at,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:hr,axis:null,background:null,bgColor:null,border:at,borderColor:null,bottomMargin:at,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:dn,declare:dn,event:null,face:null,frame:null,frameBorder:null,hSpace:at,leftMargin:at,link:null,longDesc:null,lowSrc:null,marginHeight:at,marginWidth:at,noResize:dn,noHref:dn,noShade:dn,noWrap:dn,object:null,profile:null,prompt:null,rev:null,rightMargin:at,rules:null,scheme:null,scrolling:ui,standby:null,summary:null,text:null,topMargin:at,valueType:null,version:null,vAlign:null,vLink:null,vSpace:at,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:dn,disableRemotePlayback:dn,prefix:null,property:null,results:at,security:null,unselectable:null},space:"html",transform:Jde}),pKe=fv({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:$o,accentHeight:at,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:at,amplitude:at,arabicForm:null,ascent:at,attributeName:null,attributeType:null,azimuth:at,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:at,by:null,calcMode:null,capHeight:at,className:hr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:at,diffuseConstant:at,direction:null,display:null,dur:null,divisor:at,dominantBaseline:null,download:dn,dx:null,dy:null,edgeMode:null,editable:null,elevation:at,enableBackground:null,end:null,event:null,exponent:at,externalResourcesRequired:null,fill:null,fillOpacity:at,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ay,g2:ay,glyphName:ay,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:at,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:at,horizOriginX:at,horizOriginY:at,id:null,ideographic:at,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:at,k:at,k1:at,k2:at,k3:at,k4:at,kernelMatrix:$o,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:at,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:at,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:at,overlineThickness:at,paintOrder:null,panose1:null,path:null,pathLength:at,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:hr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:at,pointsAtY:at,pointsAtZ:at,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:$o,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:$o,rev:$o,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:$o,requiredFeatures:$o,requiredFonts:$o,requiredFormats:$o,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:at,specularExponent:at,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:at,strikethroughThickness:at,string:null,stroke:null,strokeDashArray:$o,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:at,strokeOpacity:at,strokeWidth:null,style:null,surfaceScale:at,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:$o,tabIndex:at,tableValues:null,target:null,targetX:at,targetY:at,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:$o,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:at,underlineThickness:at,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:at,values:null,vAlphabetic:at,vMathematical:at,vectorEffect:null,vHanging:at,vIdeographic:at,version:null,vertAdvY:at,vertOriginX:at,vertOriginY:at,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:at,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Yde}),Xde=fv({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Qde=fv({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Jde}),Zde=fv({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),mKe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},gKe=/[A-Z]/g,_J=/-[a-z]/g,yKe=/^data[-\w.:]+$/i;function xKe(t,e){const n=IL(e);let r=e,i=No;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&yKe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(_J,bKe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!_J.test(s)){let o=s.replace(gKe,vKe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=pB}return new i(r,e)}function vKe(t){return"-"+t.toLowerCase()}function bKe(t){return t.charAt(1).toUpperCase()}const wKe=Kde([Wde,hKe,Xde,Qde,Zde],"html"),mB=Kde([Wde,pKe,Xde,Qde,Zde],"svg");function EKe(t){return t.join(" ").trim()}var ng={},zO,IJ;function SKe(){if(IJ)return zO;IJ=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",u="*",h="",m="comment",g="declaration";function x(b,w){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];w=w||{};var k=1,C=1;function R(T){var _=T.match(e);_&&(k+=_.length);var L=T.lastIndexOf(l);C=~L?T.length-L:C+T.length}function B(){var T={line:k,column:C};return function(_){return _.position=new O(T),j(),_}}function O(T){this.start=T,this.end={line:k,column:C},this.source=w.source}O.prototype.content=b;function F(T){var _=new Error(w.source+":"+k+":"+C+": "+T);if(_.reason=T,_.filename=w.source,_.line=k,_.column=C,_.source=b,!w.silent)throw _}function H(T){var _=T.exec(b);if(_){var L=_[0];return R(L),b=b.slice(L.length),_}}function j(){H(n)}function $(T){var _;for(T=T||[];_=W();)_!==!1&&T.push(_);return T}function W(){var T=B();if(!(c!=b.charAt(0)||u!=b.charAt(1))){for(var _=2;h!=b.charAt(_)&&(u!=b.charAt(_)||c!=b.charAt(_+1));)++_;if(_+=2,h===b.charAt(_-1))return F("End of comment missing");var L=b.slice(2,_-2);return C+=2,R(L),b=b.slice(_),C+=2,T({type:m,comment:L})}}function V(){var T=B(),_=H(r);if(_){if(W(),!H(i))return F("property missing ':'");var L=H(s),z=T({type:g,property:v(_[0].replace(t,h)),value:L?v(L[0].replace(t,h)):h});return H(o),z}}function U(){var T=[];$(T);for(var _;_=V();)_!==!1&&(T.push(_),$(T));return T}return j(),U()}function v(b){return b?b.replace(a,h):h}return zO=x,zO}var RJ;function AKe(){if(RJ)return ng;RJ=1;var t=ng&&ng.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ng,"__esModule",{value:!0}),ng.default=n;const e=t(SKe());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const o=(0,e.default)(r),a=typeof i=="function";return o.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;a?i(c,u,l):u&&(s=s||{},s[c]=u)}),s}return ng}var _b={},OJ;function TKe(){if(OJ)return _b;OJ=1,Object.defineProperty(_b,"__esModule",{value:!0}),_b.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(c){return!c||n.test(c)||t.test(c)},o=function(c,u){return u.toUpperCase()},a=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),s(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(i,a):c=c.replace(r,a),c.replace(e,o))};return _b.camelCase=l,_b}var Ib,MJ;function kKe(){if(MJ)return Ib;MJ=1;var t=Ib&&Ib.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(AKe()),n=TKe();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,l){a&&l&&(o[(0,n.camelCase)(a,s)]=l)}),o}return r.default=r,Ib=r,Ib}var CKe=kKe();const NKe=hs(CKe),efe=tfe("end"),gB=tfe("start");function tfe(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function PKe(t){const e=gB(t),n=efe(t);if(e&&n)return{start:e,end:n}}function dw(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?LJ(t.position):"start"in t||"end"in t?LJ(t):"line"in t||"column"in t?ML(t):""}function ML(t){return DJ(t&&t.line)+":"+DJ(t&&t.column)}function LJ(t){return ML(t&&t.start)+"-"+ML(t&&t.end)}function DJ(t){return t&&typeof t=="number"?t:1}class Us extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=dw(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Us.prototype.file="";Us.prototype.name="";Us.prototype.reason="";Us.prototype.message="";Us.prototype.stack="";Us.prototype.column=void 0;Us.prototype.line=void 0;Us.prototype.ancestors=void 0;Us.prototype.cause=void 0;Us.prototype.fatal=void 0;Us.prototype.place=void 0;Us.prototype.ruleId=void 0;Us.prototype.source=void 0;const yB={}.hasOwnProperty,_Ke=new Map,IKe=/[A-Z]/g,RKe=new Set(["table","tbody","thead","tfoot","tr"]),OKe=new Set(["td","th"]),nfe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function MKe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=zKe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=$Ke(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?mB:wKe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=rfe(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function rfe(t,e,n){if(e.type==="element")return LKe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return DKe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return BKe(t,e,n);if(e.type==="mdxjsEsm")return jKe(t,e);if(e.type==="root")return UKe(t,e,n);if(e.type==="text")return FKe(t,e)}function LKe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=mB,t.schema=i),t.ancestors.push(e);const s=sfe(t,e.tagName,!1),o=HKe(t,e);let a=vB(t,e);return RKe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!dKe(l):!0})),ife(t,o,s,e),xB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function DKe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}f1(t,e.position)}function jKe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);f1(t,e.position)}function BKe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=mB,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:sfe(t,e.name,!0),o=VKe(t,e),a=vB(t,e);return ife(t,o,s,e),xB(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function UKe(t,e,n){const r={};return xB(r,vB(t,e)),t.create(e,t.Fragment,r,n)}function FKe(t,e){return e.value}function ife(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function xB(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function $Ke(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function zKe(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=gB(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function HKe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&yB.call(e.properties,i)){const s=qKe(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&OKe.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function VKe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else f1(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else f1(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function vB(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:_Ke;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=rfe(t,s,o);a!==void 0&&n.push(a)}return n}function qKe(t,e,n){const r=xKe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?oKe(n):EKe(n)),r.property==="style"){let i=typeof n=="object"?n:GKe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=KKe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?mKe[r.property]||r.property:r.attribute,n]}}function GKe(t,e){try{return NKe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Us("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=nfe+"#cannot-parse-style-attribute",i}}function sfe(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=CJ(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=CJ(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return yB.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);f1(t)}function f1(t,e){const n=new Us("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=nfe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function KKe(t){const e={};let n;for(n in t)yB.call(t,n)&&(e[WKe(n)]=t[n]);return e}function WKe(t){let e=t.replace(IKe,YKe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function YKe(t){return"-"+t.toLowerCase()}const HO={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},JKe={};function bB(t,e){const n=JKe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ofe(t,r,i)}function ofe(t,e,n){if(XKe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return jJ(t.children,e,n)}return Array.isArray(t)?jJ(t,e,n):""}function jJ(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=ofe(t[i],e,n);return r.join("")}function XKe(t){return!!(t&&typeof t=="object")}const BJ=document.createElement("i");function wB(t){const e="&"+t+";";BJ.innerHTML=e;const n=BJ.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function sa(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Va(t,e){return t.length>0?(sa(t,t.length,0,e),t):e}const UJ={}.hasOwnProperty;function afe(t){const e={};let n=-1;for(;++n<t.length;)QKe(e,t[n]);return e}function QKe(t,e){let n;for(n in e){const i=(UJ.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){UJ.call(i,o)||(i[o]=[]);const a=s[o];ZKe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function ZKe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);sa(t,0,0,r)}function lfe(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Dl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ks=Ch(/[A-Za-z]/),Os=Ch(/[\dA-Za-z]/),eWe=Ch(/[#-'*+\--9=?A-Z^-~]/);function g2(t){return t!==null&&(t<32||t===127)}const LL=Ch(/\d/),tWe=Ch(/[\dA-Fa-f]/),nWe=Ch(/[!-/:-@[-`{-~]/);function Gt(t){return t!==null&&t<-2}function lr(t){return t!==null&&(t<0||t===32)}function Sn(t){return t===-2||t===-1||t===32}const BN=Ch(new RegExp("\\p{P}|\\p{S}","u")),Rm=Ch(/\s/);function Ch(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function hv(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Os(t.charCodeAt(n+1))&&Os(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function In(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Sn(l)?(t.enter(n),a(l)):e(l)}function a(l){return Sn(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const rWe={tokenize:iWe};function iWe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),In(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Gt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const sWe={tokenize:oWe},FJ={tokenize:aWe};function oWe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(C){if(r<n.length){const R=n[r];return e.containerState=R[1],t.attempt(R[0].continuation,l,c)(C)}return c(C)}function l(C){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&k();const R=e.events.length;let B=R,O;for(;B--;)if(e.events[B][0]==="exit"&&e.events[B][1].type==="chunkFlow"){O=e.events[B][1].end;break}w(r);let F=R;for(;F<e.events.length;)e.events[F][1].end={...O},F++;return sa(e.events,B+1,0,e.events.slice(R)),e.events.length=F,c(C)}return a(C)}function c(C){if(r===n.length){if(!i)return m(C);if(i.currentConstruct&&i.currentConstruct.concrete)return x(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(FJ,u,h)(C)}function u(C){return i&&k(),w(r),m(C)}function h(C){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,x(C)}function m(C){return e.containerState={},t.attempt(FJ,g,x)(C)}function g(C){return r++,n.push([e.currentConstruct,e.containerState]),m(C)}function x(C){if(C===null){i&&k(),w(0),t.consume(C);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),v(C)}function v(C){if(C===null){b(t.exit("chunkFlow"),!0),w(0),t.consume(C);return}return Gt(C)?(t.consume(C),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(C),v)}function b(C,R){const B=e.sliceStream(C);if(R&&B.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(B),e.parser.lazy[C.start.line]){let O=i.events.length;for(;O--;)if(i.events[O][1].start.offset<o&&(!i.events[O][1].end||i.events[O][1].end.offset>o))return;const F=e.events.length;let H=F,j,$;for(;H--;)if(e.events[H][0]==="exit"&&e.events[H][1].type==="chunkFlow"){if(j){$=e.events[H][1].end;break}j=!0}for(w(r),O=F;O<e.events.length;)e.events[O][1].end={...$},O++;sa(e.events,H+1,0,e.events.slice(F)),e.events.length=O}}function w(C){let R=n.length;for(;R-- >C;){const B=n[R];e.containerState=B[1],B[0].exit.call(e,t)}n.length=C}function k(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function aWe(t,e,n){return In(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Px(t){if(t===null||lr(t)||Rm(t))return 1;if(BN(t))return 2}function UN(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const DL={name:"attention",resolveAll:lWe,tokenize:cWe};function lWe(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},m={...t[n][1].start};$J(h,-l),$J(m,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Va(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Va(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Va(c,UN(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Va(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Va(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,sa(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function cWe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Px(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=Px(l),h=!u||u===2&&i||n.includes(l),m=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!m)),c._close=!!(s===42?m:m&&(u||!h)),e(l)}}function $J(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const uWe={name:"autolink",tokenize:dWe};function dWe(t,e,n){let r=0;return i;function i(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return Ks(g)?(t.consume(g),o):g===64?n(g):c(g)}function o(g){return g===43||g===45||g===46||Os(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(t.consume(g),r=0,l):(g===43||g===45||g===46||Os(g))&&r++<32?(t.consume(g),a):(r=0,c(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||g2(g)?n(g):(t.consume(g),l)}function c(g){return g===64?(t.consume(g),u):eWe(g)?(t.consume(g),c):n(g)}function u(g){return Os(g)?h(g):n(g)}function h(g){return g===46?(t.consume(g),r=0,u):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||Os(g))&&r++<63){const x=g===45?m:h;return t.consume(g),x}return n(g)}}const EE={partial:!0,tokenize:fWe};function fWe(t,e,n){return r;function r(s){return Sn(s)?In(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Gt(s)?e(s):n(s)}}const cfe={continuation:{tokenize:pWe},exit:mWe,name:"blockQuote",tokenize:hWe};function hWe(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Sn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function pWe(t,e,n){const r=this;return i;function i(o){return Sn(o)?In(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(cfe,e,n)(o)}}function mWe(t){t.exit("blockQuote")}const ufe={name:"characterEscape",tokenize:gWe};function gWe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return nWe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const dfe={name:"characterReference",tokenize:yWe};function yWe(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Os,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=tWe,u):(t.enter("characterReferenceValue"),s=7,o=LL,u(h))}function u(h){if(h===59&&i){const m=t.exit("characterReferenceValue");return o===Os&&!wB(r.sliceSerialize(m))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const zJ={partial:!0,tokenize:vWe},HJ={concrete:!0,name:"codeFenced",tokenize:xWe};function xWe(t,e,n){const r=this,i={partial:!0,tokenize:B};let s=0,o=0,a;return l;function l(O){return c(O)}function c(O){const F=r.events[r.events.length-1];return s=F&&F[1].type==="linePrefix"?F[2].sliceSerialize(F[1],!0).length:0,a=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(O)}function u(O){return O===a?(o++,t.consume(O),u):o<3?n(O):(t.exit("codeFencedFenceSequence"),Sn(O)?In(t,h,"whitespace")(O):h(O))}function h(O){return O===null||Gt(O)?(t.exit("codeFencedFence"),r.interrupt?e(O):t.check(zJ,v,R)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(O))}function m(O){return O===null||Gt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(O)):Sn(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),In(t,g,"whitespace")(O)):O===96&&O===a?n(O):(t.consume(O),m)}function g(O){return O===null||Gt(O)?h(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(O))}function x(O){return O===null||Gt(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(O)):O===96&&O===a?n(O):(t.consume(O),x)}function v(O){return t.attempt(i,R,b)(O)}function b(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),w}function w(O){return s>0&&Sn(O)?In(t,k,"linePrefix",s+1)(O):k(O)}function k(O){return O===null||Gt(O)?t.check(zJ,v,R)(O):(t.enter("codeFlowValue"),C(O))}function C(O){return O===null||Gt(O)?(t.exit("codeFlowValue"),k(O)):(t.consume(O),C)}function R(O){return t.exit("codeFenced"),e(O)}function B(O,F,H){let j=0;return $;function $(_){return O.enter("lineEnding"),O.consume(_),O.exit("lineEnding"),W}function W(_){return O.enter("codeFencedFence"),Sn(_)?In(O,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):V(_)}function V(_){return _===a?(O.enter("codeFencedFenceSequence"),U(_)):H(_)}function U(_){return _===a?(j++,O.consume(_),U):j>=o?(O.exit("codeFencedFenceSequence"),Sn(_)?In(O,T,"whitespace")(_):T(_)):H(_)}function T(_){return _===null||Gt(_)?(O.exit("codeFencedFence"),F(_)):H(_)}}}function vWe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const VO={name:"codeIndented",tokenize:wWe},bWe={partial:!0,tokenize:EWe};function wWe(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),In(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Gt(c)?t.attempt(bWe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Gt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function EWe(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Gt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):In(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Gt(o)?i(o):n(o)}}const SWe={name:"codeText",previous:TWe,resolve:AWe,tokenize:kWe};function AWe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function TWe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function kWe(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):Gt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||Gt(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class CWe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Rb(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Rb(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Rb(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Rb(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Rb(this.left,n.reverse())}}}function Rb(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function ffe(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new CWe(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,NWe(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return sa(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function NWe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,h,m=-1,g=n,x=0,v=0;const b=[v];for(;g;){for(;t.get(++i)[1]!==g;);s.push(i),g._tokenizer||(u=r.sliceStream(g),g.next||u.push(null),h&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(v=m+1,b.push(v),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):b.pop(),m=b.length;m--;){const w=a.slice(b[m],b[m+1]),k=s.pop();l.push([k,k+w.length-1]),t.splice(k,2,w)}for(l.reverse(),m=-1;++m<l.length;)c[x+l[m][0]]=x+l[m][1],x+=l[m][1]-l[m][0]-1;return c}const PWe={resolve:IWe,tokenize:RWe},_We={partial:!0,tokenize:OWe};function IWe(t){return ffe(t),t}function RWe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Gt(a)?t.check(_We,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function OWe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),In(t,s,"linePrefix")}function s(o){if(o===null||Gt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function hfe(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(w){return w===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(w),t.exit(s),m):w===null||w===32||w===41||g2(w)?n(w):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),v(w))}function m(w){return w===62?(t.enter(s),t.consume(w),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===62?(t.exit("chunkString"),t.exit(a),m(w)):w===null||w===60||Gt(w)?n(w):(t.consume(w),w===92?x:g)}function x(w){return w===60||w===62||w===92?(t.consume(w),g):g(w)}function v(w){return!u&&(w===null||w===41||lr(w))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(w)):u<c&&w===40?(t.consume(w),u++,v):w===41?(t.consume(w),u--,v):w===null||w===32||w===40||g2(w)?n(w):(t.consume(w),w===92?b:v)}function b(w){return w===40||w===41||w===92?(t.consume(w),v):v(w)}}function pfe(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(g){return t.enter(r),t.enter(i),t.consume(g),t.exit(i),t.enter(s),u}function u(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):Gt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===null||g===91||g===93||Gt(g)||a++>999?(t.exit("chunkString"),u(g)):(t.consume(g),l||(l=!Sn(g)),g===92?m:h)}function m(g){return g===91||g===92||g===93?(t.consume(g),a++,h):h(g)}}function mfe(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,l):n(m)}function l(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),c(m))}function c(m){return m===o?(t.exit(s),l(o)):m===null?n(m):Gt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),In(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===o||m===null||Gt(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?h:u)}function h(m){return m===o||m===92?(t.consume(m),u):u(m)}}function fw(t,e){let n;return r;function r(i){return Gt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Sn(i)?In(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const MWe={name:"definition",tokenize:DWe},LWe={partial:!0,tokenize:jWe};function DWe(t,e,n){const r=this;let i;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return pfe.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=Dl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return lr(g)?fw(t,c)(g):c(g)}function c(g){return hfe(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function u(g){return t.attempt(LWe,h,h)(g)}function h(g){return Sn(g)?In(t,m,"whitespace")(g):m(g)}function m(g){return g===null||Gt(g)?(t.exit("definition"),r.parser.defined.push(i),e(g)):n(g)}}function jWe(t,e,n){return r;function r(a){return lr(a)?fw(t,i)(a):n(a)}function i(a){return mfe(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Sn(a)?In(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Gt(a)?e(a):n(a)}}const BWe={name:"hardBreakEscape",tokenize:UWe};function UWe(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Gt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const FWe={name:"headingAtx",resolve:$We,tokenize:zWe};function $We(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},sa(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function zWe(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||lr(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Gt(u)?(t.exit("atxHeading"),e(u)):Sn(u)?In(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||lr(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const HWe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],VJ=["pre","script","style","textarea"],VWe={concrete:!0,name:"htmlFlow",resolveTo:KWe,tokenize:WWe},qWe={partial:!0,tokenize:JWe},GWe={partial:!0,tokenize:YWe};function KWe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function WWe(t,e,n){const r=this;let i,s,o,a,l;return c;function c(P){return u(P)}function u(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),h}function h(P){return P===33?(t.consume(P),m):P===47?(t.consume(P),s=!0,v):P===63?(t.consume(P),i=3,r.interrupt?e:K):Ks(P)?(t.consume(P),o=String.fromCharCode(P),b):n(P)}function m(P){return P===45?(t.consume(P),i=2,g):P===91?(t.consume(P),i=5,a=0,x):Ks(P)?(t.consume(P),i=4,r.interrupt?e:K):n(P)}function g(P){return P===45?(t.consume(P),r.interrupt?e:K):n(P)}function x(P){const Y="CDATA[";return P===Y.charCodeAt(a++)?(t.consume(P),a===Y.length?r.interrupt?e:V:x):n(P)}function v(P){return Ks(P)?(t.consume(P),o=String.fromCharCode(P),b):n(P)}function b(P){if(P===null||P===47||P===62||lr(P)){const Y=P===47,X=o.toLowerCase();return!Y&&!s&&VJ.includes(X)?(i=1,r.interrupt?e(P):V(P)):HWe.includes(o.toLowerCase())?(i=6,Y?(t.consume(P),w):r.interrupt?e(P):V(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):s?k(P):C(P))}return P===45||Os(P)?(t.consume(P),o+=String.fromCharCode(P),b):n(P)}function w(P){return P===62?(t.consume(P),r.interrupt?e:V):n(P)}function k(P){return Sn(P)?(t.consume(P),k):$(P)}function C(P){return P===47?(t.consume(P),$):P===58||P===95||Ks(P)?(t.consume(P),R):Sn(P)?(t.consume(P),C):$(P)}function R(P){return P===45||P===46||P===58||P===95||Os(P)?(t.consume(P),R):B(P)}function B(P){return P===61?(t.consume(P),O):Sn(P)?(t.consume(P),B):C(P)}function O(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),l=P,F):Sn(P)?(t.consume(P),O):H(P)}function F(P){return P===l?(t.consume(P),l=null,j):P===null||Gt(P)?n(P):(t.consume(P),F)}function H(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||lr(P)?B(P):(t.consume(P),H)}function j(P){return P===47||P===62||Sn(P)?C(P):n(P)}function $(P){return P===62?(t.consume(P),W):n(P)}function W(P){return P===null||Gt(P)?V(P):Sn(P)?(t.consume(P),W):n(P)}function V(P){return P===45&&i===2?(t.consume(P),L):P===60&&i===1?(t.consume(P),z):P===62&&i===4?(t.consume(P),q):P===63&&i===3?(t.consume(P),K):P===93&&i===5?(t.consume(P),te):Gt(P)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(qWe,M,U)(P)):P===null||Gt(P)?(t.exit("htmlFlowData"),U(P)):(t.consume(P),V)}function U(P){return t.check(GWe,T,M)(P)}function T(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),_}function _(P){return P===null||Gt(P)?U(P):(t.enter("htmlFlowData"),V(P))}function L(P){return P===45?(t.consume(P),K):V(P)}function z(P){return P===47?(t.consume(P),o="",G):V(P)}function G(P){if(P===62){const Y=o.toLowerCase();return VJ.includes(Y)?(t.consume(P),q):V(P)}return Ks(P)&&o.length<8?(t.consume(P),o+=String.fromCharCode(P),G):V(P)}function te(P){return P===93?(t.consume(P),K):V(P)}function K(P){return P===62?(t.consume(P),q):P===45&&i===2?(t.consume(P),K):V(P)}function q(P){return P===null||Gt(P)?(t.exit("htmlFlowData"),M(P)):(t.consume(P),q)}function M(P){return t.exit("htmlFlow"),e(P)}}function YWe(t,e,n){const r=this;return i;function i(o){return Gt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function JWe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(EE,e,n)}}const XWe={name:"htmlText",tokenize:QWe};function QWe(t,e,n){const r=this;let i,s,o;return a;function a(K){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(K),l}function l(K){return K===33?(t.consume(K),c):K===47?(t.consume(K),B):K===63?(t.consume(K),C):Ks(K)?(t.consume(K),H):n(K)}function c(K){return K===45?(t.consume(K),u):K===91?(t.consume(K),s=0,x):Ks(K)?(t.consume(K),k):n(K)}function u(K){return K===45?(t.consume(K),g):n(K)}function h(K){return K===null?n(K):K===45?(t.consume(K),m):Gt(K)?(o=h,z(K)):(t.consume(K),h)}function m(K){return K===45?(t.consume(K),g):h(K)}function g(K){return K===62?L(K):K===45?m(K):h(K)}function x(K){const q="CDATA[";return K===q.charCodeAt(s++)?(t.consume(K),s===q.length?v:x):n(K)}function v(K){return K===null?n(K):K===93?(t.consume(K),b):Gt(K)?(o=v,z(K)):(t.consume(K),v)}function b(K){return K===93?(t.consume(K),w):v(K)}function w(K){return K===62?L(K):K===93?(t.consume(K),w):v(K)}function k(K){return K===null||K===62?L(K):Gt(K)?(o=k,z(K)):(t.consume(K),k)}function C(K){return K===null?n(K):K===63?(t.consume(K),R):Gt(K)?(o=C,z(K)):(t.consume(K),C)}function R(K){return K===62?L(K):C(K)}function B(K){return Ks(K)?(t.consume(K),O):n(K)}function O(K){return K===45||Os(K)?(t.consume(K),O):F(K)}function F(K){return Gt(K)?(o=F,z(K)):Sn(K)?(t.consume(K),F):L(K)}function H(K){return K===45||Os(K)?(t.consume(K),H):K===47||K===62||lr(K)?j(K):n(K)}function j(K){return K===47?(t.consume(K),L):K===58||K===95||Ks(K)?(t.consume(K),$):Gt(K)?(o=j,z(K)):Sn(K)?(t.consume(K),j):L(K)}function $(K){return K===45||K===46||K===58||K===95||Os(K)?(t.consume(K),$):W(K)}function W(K){return K===61?(t.consume(K),V):Gt(K)?(o=W,z(K)):Sn(K)?(t.consume(K),W):j(K)}function V(K){return K===null||K===60||K===61||K===62||K===96?n(K):K===34||K===39?(t.consume(K),i=K,U):Gt(K)?(o=V,z(K)):Sn(K)?(t.consume(K),V):(t.consume(K),T)}function U(K){return K===i?(t.consume(K),i=void 0,_):K===null?n(K):Gt(K)?(o=U,z(K)):(t.consume(K),U)}function T(K){return K===null||K===34||K===39||K===60||K===61||K===96?n(K):K===47||K===62||lr(K)?j(K):(t.consume(K),T)}function _(K){return K===47||K===62||lr(K)?j(K):n(K)}function L(K){return K===62?(t.consume(K),t.exit("htmlTextData"),t.exit("htmlText"),e):n(K)}function z(K){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),G}function G(K){return Sn(K)?In(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):te(K)}function te(K){return t.enter("htmlTextData"),o(K)}}const EB={name:"labelEnd",resolveAll:nYe,resolveTo:rYe,tokenize:iYe},ZWe={tokenize:sYe},eYe={tokenize:oYe},tYe={tokenize:aYe};function nYe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&sa(t,0,t.length,n),t}function rYe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Va(a,t.slice(s+1,s+r+3)),a=Va(a,[["enter",u,e]]),a=Va(a,UN(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Va(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Va(a,t.slice(o+1)),a=Va(a,[["exit",l,e]]),sa(t,s,t.length,a),t}function iYe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?h(m):(o=r.parser.defined.includes(Dl(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(ZWe,u,o?u:h)(m):m===91?t.attempt(eYe,u,o?c:h)(m):o?u(m):h(m)}function c(m){return t.attempt(tYe,u,h)(m)}function u(m){return e(m)}function h(m){return s._balanced=!0,n(m)}}function sYe(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return lr(h)?fw(t,s)(h):s(h)}function s(h){return h===41?u(h):hfe(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return lr(h)?fw(t,l)(h):u(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?mfe(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return lr(h)?fw(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function oYe(t,e,n){const r=this;return i;function i(a){return pfe.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Dl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function aYe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const lYe={name:"labelStartImage",resolveAll:EB.resolveAll,tokenize:cYe};function cYe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const uYe={name:"labelStartLink",resolveAll:EB.resolveAll,tokenize:dYe};function dYe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const qO={name:"lineEnding",tokenize:fYe};function fYe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),In(t,e,"linePrefix")}}const MT={name:"thematicBreak",tokenize:hYe};function hYe(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Gt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Sn(c)?In(t,a,"whitespace")(c):a(c))}}const mo={continuation:{tokenize:yYe},exit:vYe,name:"list",tokenize:gYe},pYe={partial:!0,tokenize:bYe},mYe={partial:!0,tokenize:xYe};function gYe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(g){const x=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:LL(g)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(MT,n,c)(g):c(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return LL(g)&&++o<10?(t.consume(g),l):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(EE,r.interrupt?n:u,t.attempt(pYe,m,h))}function u(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function h(g){return Sn(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function yYe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(EE,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,In(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Sn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(mYe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,In(t,t.attempt(mo,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function xYe(t,e,n){const r=this;return In(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function vYe(t){t.exit(this.containerState.type)}function bYe(t,e,n){const r=this;return In(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Sn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const qJ={name:"setextUnderline",resolveTo:wYe,tokenize:EYe};function wYe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function EYe(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Sn(c)?In(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Gt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const SYe={tokenize:AYe};function AYe(t){const e=this,n=t.attempt(EE,r,t.attempt(this.parser.constructs.flowInitial,i,In(t,t.attempt(this.parser.constructs.flow,i,t.attempt(PWe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const TYe={resolveAll:yfe()},kYe=gfe("string"),CYe=gfe("text");function gfe(t){return{resolveAll:yfe(t==="text"?NYe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let m=-1;if(h)for(;++m<h.length;){const g=h[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function yfe(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function NYe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const PYe={42:mo,43:mo,45:mo,48:mo,49:mo,50:mo,51:mo,52:mo,53:mo,54:mo,55:mo,56:mo,57:mo,62:cfe},_Ye={91:MWe},IYe={[-2]:VO,[-1]:VO,32:VO},RYe={35:FWe,42:MT,45:[qJ,MT],60:VWe,61:qJ,95:MT,96:HJ,126:HJ},OYe={38:dfe,92:ufe},MYe={[-5]:qO,[-4]:qO,[-3]:qO,33:lYe,38:dfe,42:DL,60:[uWe,XWe],91:uYe,92:[BWe,ufe],93:EB,95:DL,96:SWe},LYe={null:[DL,TYe]},DYe={null:[42,95]},jYe={null:[]},BYe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:DYe,contentInitial:_Ye,disable:jYe,document:PYe,flow:RYe,flowInitial:IYe,insideSpan:LYe,string:OYe,text:MYe},Symbol.toStringTag,{value:"Module"}));function UYe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:F(B),check:F(O),consume:k,enter:C,exit:R,interrupt:F(O,{interrupt:!0})},c={code:null,containerState:{},defineSkip:v,events:[],now:x,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(W){return o=Va(o,W),b(),o[o.length-1]!==null?[]:(H(e,0),c.events=UN(s,c.events,c),c.events)}function m(W,V){return $Ye(g(W),V)}function g(W){return FYe(o,W)}function x(){const{_bufferIndex:W,_index:V,line:U,column:T,offset:_}=r;return{_bufferIndex:W,_index:V,line:U,column:T,offset:_}}function v(W){i[W.line]=W.column,$()}function b(){let W;for(;r._index<o.length;){const V=o[r._index];if(typeof V=="string")for(W=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===W&&r._bufferIndex<V.length;)w(V.charCodeAt(r._bufferIndex));else w(V)}}function w(W){u=u(W)}function k(W){Gt(W)?(r.line++,r.column=1,r.offset+=W===-3?2:1,$()):W!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=W}function C(W,V){const U=V||{};return U.type=W,U.start=x(),c.events.push(["enter",U,c]),a.push(U),U}function R(W){const V=a.pop();return V.end=x(),c.events.push(["exit",V,c]),V}function B(W,V){H(W,V.from)}function O(W,V){V.restore()}function F(W,V){return U;function U(T,_,L){let z,G,te,K;return Array.isArray(T)?M(T):"tokenize"in T?M([T]):q(T);function q(re){return ae;function ae(Te){const ue=Te!==null&&re[Te],pe=Te!==null&&re.null,be=[...Array.isArray(ue)?ue:ue?[ue]:[],...Array.isArray(pe)?pe:pe?[pe]:[]];return M(be)(Te)}}function M(re){return z=re,G=0,re.length===0?L:P(re[G])}function P(re){return ae;function ae(Te){return K=j(),te=re,re.partial||(c.currentConstruct=re),re.name&&c.parser.constructs.disable.null.includes(re.name)?X():re.tokenize.call(V?Object.assign(Object.create(c),V):c,l,Y,X)(Te)}}function Y(re){return W(te,K),_}function X(re){return K.restore(),++G<z.length?P(z[G]):L}}}function H(W,V){W.resolveAll&&!s.includes(W)&&s.push(W),W.resolve&&sa(c.events,V,c.events.length-V,W.resolve(c.events.slice(V),c)),W.resolveTo&&(c.events=W.resolveTo(c.events,c))}function j(){const W=x(),V=c.previous,U=c.currentConstruct,T=c.events.length,_=Array.from(a);return{from:T,restore:L};function L(){r=W,c.previous=V,c.currentConstruct=U,c.events.length=T,a=_,$()}}function $(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function FYe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function $Ye(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function zYe(t){const r={constructs:afe([BYe,...(t||{}).extensions||[]]),content:i(rWe),defined:[],document:i(sWe),flow:i(SYe),lazy:{},string:i(kYe),text:i(CYe)};return r;function i(s){return o;function o(a){return UYe(r,s,a)}}}function HYe(t){for(;!ffe(t););return t}const GJ=/[\0\t\n\r]/g;function VYe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,h,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(GJ.lastIndex=h,c=GJ.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){e=s.slice(h);break}if(g===10&&h===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<m&&(l.push(s.slice(h,m)),t+=m-h),g){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=m+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const qYe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function GYe(t){return t.replace(qYe,KYe)}function KYe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return lfe(n.slice(s?2:1),s?16:10)}return wB(n)||t}const xfe={}.hasOwnProperty;function WYe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),YYe(n)(HYe(zYe(n).document().write(VYe()(t,e,!0))))}function YYe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(tt),autolinkProtocol:j,autolinkEmail:j,atxHeading:s(De),blockQuote:s(pe),characterEscape:j,characterReference:j,codeFenced:s(be),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(be,o),codeText:s(se,o),codeTextData:j,data:j,codeFlowValue:j,definition:s(ve),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Re),hardBreakEscape:s(Qe),hardBreakTrailing:s(Qe),htmlFlow:s(it,o),htmlFlowData:j,htmlText:s(it,o),htmlTextData:j,image:s(et),label:o,link:s(tt),listItem:s(dt),listItemValue:m,listOrdered:s(mt,h),listUnordered:s(mt),paragraph:s(Wt),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(De),strong:s(qe),thematicBreak:s(ln)},exit:{atxHeading:l(),atxHeadingSequence:B,autolink:l(),autolinkEmail:ue,autolinkProtocol:Te,blockQuote:l(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:re,characterReference:ae,codeFenced:l(b),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:x,codeFlowValue:$,codeIndented:l(w),codeText:l(_),codeTextData:$,data:$,definition:l(),definitionDestinationString:R,definitionLabelString:k,definitionTitleString:C,emphasis:l(),hardBreakEscape:l(V),hardBreakTrailing:l(V),htmlFlow:l(U),htmlFlowData:$,htmlText:l(T),htmlTextData:$,image:l(z),label:te,labelText:G,lineEnding:W,link:l(L),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Y,resourceDestinationString:K,resourceTitleString:q,resource:M,setextHeading:l(H),setextHeadingLineSequence:F,setextHeadingText:O,strong:l(),thematicBreak:l()}};vfe(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Ie){let Ve={type:"root",children:[]};const gt={stack:[Ve],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},ut=[];let oe=-1;for(;++oe<Ie.length;)if(Ie[oe][1].type==="listOrdered"||Ie[oe][1].type==="listUnordered")if(Ie[oe][0]==="enter")ut.push(oe);else{const J=ut.pop();oe=i(Ie,J,oe)}for(oe=-1;++oe<Ie.length;){const J=e[Ie[oe][0]];xfe.call(J,Ie[oe][1].type)&&J[Ie[oe][1].type].call(Object.assign({sliceSerialize:Ie[oe][2].sliceSerialize},gt),Ie[oe][1])}if(gt.tokenStack.length>0){const J=gt.tokenStack[gt.tokenStack.length-1];(J[1]||KJ).call(gt,void 0,J[0])}for(Ve.position={start:gf(Ie.length>0?Ie[0][1].start:{line:1,column:1,offset:0}),end:gf(Ie.length>0?Ie[Ie.length-2][1].end:{line:1,column:1,offset:0})},oe=-1;++oe<e.transforms.length;)Ve=e.transforms[oe](Ve)||Ve;return Ve}function i(Ie,Ve,gt){let ut=Ve-1,oe=-1,J=!1,Z,de,Ae,fe;for(;++ut<=gt;){const ge=Ie[ut];switch(ge[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ge[0]==="enter"?oe++:oe--,fe=void 0;break}case"lineEndingBlank":{ge[0]==="enter"&&(Z&&!fe&&!oe&&!Ae&&(Ae=ut),fe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fe=void 0}if(!oe&&ge[0]==="enter"&&ge[1].type==="listItemPrefix"||oe===-1&&ge[0]==="exit"&&(ge[1].type==="listUnordered"||ge[1].type==="listOrdered")){if(Z){let Ye=ut;for(de=void 0;Ye--;){const Je=Ie[Ye];if(Je[1].type==="lineEnding"||Je[1].type==="lineEndingBlank"){if(Je[0]==="exit")continue;de&&(Ie[de][1].type="lineEndingBlank",J=!0),Je[1].type="lineEnding",de=Ye}else if(!(Je[1].type==="linePrefix"||Je[1].type==="blockQuotePrefix"||Je[1].type==="blockQuotePrefixWhitespace"||Je[1].type==="blockQuoteMarker"||Je[1].type==="listItemIndent"))break}Ae&&(!de||Ae<de)&&(Z._spread=!0),Z.end=Object.assign({},de?Ie[de][1].start:ge[1].end),Ie.splice(de||ut,0,["exit",Z,ge[2]]),ut++,gt++}if(ge[1].type==="listItemPrefix"){const Ye={type:"listItem",_spread:!1,start:Object.assign({},ge[1].start),end:void 0};Z=Ye,Ie.splice(ut,0,["enter",Ye,ge[2]]),ut++,gt++,Ae=void 0,fe=!0}}}return Ie[Ve][1]._spread=J,gt}function s(Ie,Ve){return gt;function gt(ut){a.call(this,Ie(ut),ut),Ve&&Ve.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ie,Ve,gt){this.stack[this.stack.length-1].children.push(Ie),this.stack.push(Ie),this.tokenStack.push([Ve,gt||void 0]),Ie.position={start:gf(Ve.start),end:void 0}}function l(Ie){return Ve;function Ve(gt){Ie&&Ie.call(this,gt),c.call(this,gt)}}function c(Ie,Ve){const gt=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==Ie.type&&(Ve?Ve.call(this,Ie,ut[0]):(ut[1]||KJ).call(this,Ie,ut[0]));else throw new Error("Cannot close `"+Ie.type+"` ("+dw({start:Ie.start,end:Ie.end})+"): its not open");gt.position.end=gf(Ie.end)}function u(){return bB(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(Ie){if(this.data.expectingFirstListItemValue){const Ve=this.stack[this.stack.length-2];Ve.start=Number.parseInt(this.sliceSerialize(Ie),10),this.data.expectingFirstListItemValue=void 0}}function g(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.lang=Ie}function x(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.meta=Ie}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Ie.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Ie.replace(/(\r?\n|\r)$/g,"")}function k(Ie){const Ve=this.resume(),gt=this.stack[this.stack.length-1];gt.label=Ve,gt.identifier=Dl(this.sliceSerialize(Ie)).toLowerCase()}function C(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Ie}function R(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Ie}function B(Ie){const Ve=this.stack[this.stack.length-1];if(!Ve.depth){const gt=this.sliceSerialize(Ie).length;Ve.depth=gt}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function F(Ie){const Ve=this.stack[this.stack.length-1];Ve.depth=this.sliceSerialize(Ie).codePointAt(0)===61?1:2}function H(){this.data.setextHeadingSlurpLineEnding=void 0}function j(Ie){const gt=this.stack[this.stack.length-1].children;let ut=gt[gt.length-1];(!ut||ut.type!=="text")&&(ut=Tt(),ut.position={start:gf(Ie.start),end:void 0},gt.push(ut)),this.stack.push(ut)}function $(Ie){const Ve=this.stack.pop();Ve.value+=this.sliceSerialize(Ie),Ve.position.end=gf(Ie.end)}function W(Ie){const Ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const gt=Ve.children[Ve.children.length-1];gt.position.end=gf(Ie.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ve.type)&&(j.call(this,Ie),$.call(this,Ie))}function V(){this.data.atHardBreak=!0}function U(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Ie}function T(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Ie}function _(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.value=Ie}function L(){const Ie=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Ie.type+="Reference",Ie.referenceType=Ve,delete Ie.url,delete Ie.title}else delete Ie.identifier,delete Ie.label;this.data.referenceType=void 0}function z(){const Ie=this.stack[this.stack.length-1];if(this.data.inReference){const Ve=this.data.referenceType||"shortcut";Ie.type+="Reference",Ie.referenceType=Ve,delete Ie.url,delete Ie.title}else delete Ie.identifier,delete Ie.label;this.data.referenceType=void 0}function G(Ie){const Ve=this.sliceSerialize(Ie),gt=this.stack[this.stack.length-2];gt.label=GYe(Ve),gt.identifier=Dl(Ve).toLowerCase()}function te(){const Ie=this.stack[this.stack.length-1],Ve=this.resume(),gt=this.stack[this.stack.length-1];if(this.data.inReference=!0,gt.type==="link"){const ut=Ie.children;gt.children=ut}else gt.alt=Ve}function K(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.url=Ie}function q(){const Ie=this.resume(),Ve=this.stack[this.stack.length-1];Ve.title=Ie}function M(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function Y(Ie){const Ve=this.resume(),gt=this.stack[this.stack.length-1];gt.label=Ve,gt.identifier=Dl(this.sliceSerialize(Ie)).toLowerCase(),this.data.referenceType="full"}function X(Ie){this.data.characterReferenceType=Ie.type}function re(Ie){const Ve=this.sliceSerialize(Ie),gt=this.data.characterReferenceType;let ut;gt?(ut=lfe(Ve,gt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=wB(Ve);const oe=this.stack[this.stack.length-1];oe.value+=ut}function ae(Ie){const Ve=this.stack.pop();Ve.position.end=gf(Ie.end)}function Te(Ie){$.call(this,Ie);const Ve=this.stack[this.stack.length-1];Ve.url=this.sliceSerialize(Ie)}function ue(Ie){$.call(this,Ie);const Ve=this.stack[this.stack.length-1];Ve.url="mailto:"+this.sliceSerialize(Ie)}function pe(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function se(){return{type:"inlineCode",value:""}}function ve(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function De(){return{type:"heading",depth:0,children:[]}}function Qe(){return{type:"break"}}function it(){return{type:"html",value:""}}function et(){return{type:"image",title:null,url:"",alt:null}}function tt(){return{type:"link",title:null,url:"",children:[]}}function mt(Ie){return{type:"list",ordered:Ie.type==="listOrdered",start:null,spread:Ie._spread,children:[]}}function dt(Ie){return{type:"listItem",spread:Ie._spread,checked:null,children:[]}}function Wt(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function Tt(){return{type:"text",value:""}}function ln(){return{type:"thematicBreak"}}}function gf(t){return{line:t.line,column:t.column,offset:t.offset}}function vfe(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?vfe(t,r):JYe(t,r)}}function JYe(t,e){let n;for(n in e)if(xfe.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function KJ(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+dw({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+dw({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+dw({start:e.start,end:e.end})+") is still open")}function XYe(t){const e=this;e.parser=n;function n(r){return WYe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function QYe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function ZYe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function eJe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function tJe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nJe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function rJe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=hv(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function iJe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function sJe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function bfe(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function oJe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return bfe(t,e);const i={src:hv(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function aJe(t,e){const n={src:hv(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function lJe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function cJe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return bfe(t,e);const i={href:hv(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function uJe(t,e){const n={href:hv(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function dJe(t,e,n){const r=t.all(e),i=n?fJe(n):wfe(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function fJe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=wfe(n[r])}return e}function wfe(t){const e=t.spread;return e??t.children.length>1}function hJe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function pJe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mJe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function gJe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function yJe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=gB(e.children[1]),l=efe(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function xJe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],m={},g=o?o[l]:void 0;g&&(m.align=g);let x={type:"element",tagName:s,properties:m,children:[]};h&&(x.children=t.all(h),t.patch(h,x),x=t.applyData(h,x)),c.push(x)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function vJe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const WJ=9,YJ=32;function bJe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(JJ(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(JJ(e.slice(i),i>0,!1)),s.join("")}function JJ(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===WJ||s===YJ;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===WJ||s===YJ;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function wJe(t,e){const n={type:"text",value:bJe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function EJe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const SJe={blockquote:QYe,break:ZYe,code:eJe,delete:tJe,emphasis:nJe,footnoteReference:rJe,heading:iJe,html:sJe,imageReference:oJe,image:aJe,inlineCode:lJe,linkReference:cJe,link:uJe,listItem:dJe,list:hJe,paragraph:pJe,root:mJe,strong:gJe,table:yJe,tableCell:vJe,tableRow:xJe,text:wJe,thematicBreak:EJe,toml:LA,yaml:LA,definition:LA,footnoteDefinition:LA};function LA(){}const Efe=-1,FN=0,hw=1,y2=2,SB=3,AB=4,TB=5,kB=6,Sfe=7,Afe=8,XJ=typeof self=="object"?self:globalThis,AJe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case FN:case Efe:return n(o,i);case hw:{const a=n([],i);for(const l of o)a.push(r(l));return a}case y2:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case SB:return n(new Date(o),i);case AB:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case TB:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case kB:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case Sfe:{const{name:a,message:l}=o;return n(new XJ[a](l),i)}case Afe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new XJ[s](o),i)};return r},QJ=t=>AJe(new Map,t)(0),rg="",{toString:TJe}={},{keys:kJe}=Object,Ob=t=>{const e=typeof t;if(e!=="object"||!t)return[FN,e];const n=TJe.call(t).slice(8,-1);switch(n){case"Array":return[hw,rg];case"Object":return[y2,rg];case"Date":return[SB,rg];case"RegExp":return[AB,rg];case"Map":return[TB,rg];case"Set":return[kB,rg];case"DataView":return[hw,n]}return n.includes("Array")?[hw,n]:n.includes("Error")?[Sfe,n]:[y2,n]},DA=([t,e])=>t===FN&&(e==="function"||e==="symbol"),CJe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Ob(o);switch(a){case FN:{let u=o;switch(l){case"bigint":a=Afe,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([Efe],o)}return i([a,u],o)}case hw:{if(l){let m=o;return l==="DataView"?m=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(o)),i([l,[...m]],o)}const u=[],h=i([a,u],o);for(const m of o)u.push(s(m));return h}case y2:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],h=i([a,u],o);for(const m of kJe(o))(t||!DA(Ob(o[m])))&&u.push([s(m),s(o[m])]);return h}case SB:return i([a,o.toISOString()],o);case AB:{const{source:u,flags:h}=o;return i([a,{source:u,flags:h}],o)}case TB:{const u=[],h=i([a,u],o);for(const[m,g]of o)(t||!(DA(Ob(m))||DA(Ob(g))))&&u.push([s(m),s(g)]);return h}case kB:{const u=[],h=i([a,u],o);for(const m of o)(t||!DA(Ob(m)))&&u.push(s(m));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},ZJ=(t,{json:e,lossy:n}={})=>{const r=[];return CJe(!(e||n),!!e,new Map,r)(t),r},x2=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?QJ(ZJ(t,e)):structuredClone(t):(t,e)=>QJ(ZJ(t,e));function NJe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function PJe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function _Je(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||NJe,r=t.options.footnoteBackLabel||PJe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),h=String(c.identifier).toUpperCase(),m=hv(h.toLowerCase());let g=0;const x=[],v=t.footnoteCounts.get(h);for(;v!==void 0&&++g<=v;){x.length>0&&x.push({type:"text",value:" "});let k=typeof n=="string"?n:n(l,g);typeof k=="string"&&(k={type:"text",value:k}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const k=b.children[b.children.length-1];k&&k.type==="text"?k.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...x)}else u.push(...x);const w={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(u,!0)};t.patch(c,w),a.push(w)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...x2(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const $N=(function(t){if(t==null)return MJe;if(typeof t=="function")return zN(t);if(typeof t=="object")return Array.isArray(t)?IJe(t):RJe(t);if(typeof t=="string")return OJe(t);throw new Error("Expected function, string, or object as test")});function IJe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=$N(t[n]);return zN(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function RJe(t){const e=t;return zN(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function OJe(t){return zN(e);function e(n){return n&&n.type===t}}function zN(t){return e;function e(n,r,i){return!!(LJe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function MJe(){return!0}function LJe(t){return t!==null&&typeof t=="object"&&"type"in t}const Tfe=[],DJe=!0,jL=!1,jJe="skip";function kfe(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=$N(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const g=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=Tfe,x,v,b;if((!e||s(l,c,u[u.length-1]||void 0))&&(g=BJe(n(l,u)),g[0]===jL))return g;if("children"in l&&l.children){const w=l;if(w.children&&g[0]!==jJe)for(v=(r?w.children.length:-1)+o,b=u.concat(w);v>-1&&v<w.children.length;){const k=w.children[v];if(x=a(k,v,b)(),x[0]===jL)return x;v=typeof x[1]=="number"?x[1]:v+o}}return g}}}function BJe(t){return Array.isArray(t)?t:typeof t=="number"?[DJe,t]:t==null?Tfe:[t]}function CB(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),kfe(t,s,a,i);function a(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}const BL={}.hasOwnProperty,UJe={};function FJe(t,e){const n=e||UJe,r=new Map,i=new Map,s=new Map,o={...SJe,...n.handlers},a={all:c,applyData:zJe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:$Je,wrap:VJe};return CB(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,m=String(u.identifier).toUpperCase();h.has(m)||h.set(m,u)}}),a;function l(u,h){const m=u.type,g=a.handlers[m];if(BL.call(a.handlers,m)&&g)return g(a,u,h);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in u){const{children:v,...b}=u,w=x2(b);return w.children=a.all(u),w}return x2(u)}return(a.options.unknownHandler||HJe)(a,u,h)}function c(u){const h=[];if("children"in u){const m=u.children;let g=-1;for(;++g<m.length;){const x=a.one(m[g],u);if(x){if(g&&m[g-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=eX(x.value)),!Array.isArray(x)&&x.type==="element")){const v=x.children[0];v&&v.type==="text"&&(v.value=eX(v.value))}Array.isArray(x)?h.push(...x):h.push(x)}}}return h}}function $Je(t,e){t.position&&(e.position=PKe(t))}function zJe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,x2(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function HJe(t,e){const n=e.data||{},r="value"in e&&!(BL.call(n,"hProperties")||BL.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function VJe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function eX(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function tX(t,e){const n=FJe(t,e),r=n.one(t,void 0),i=_Je(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function qJe(t,e){return t&&"run"in t?async function(n,r){const i=tX(n,{file:r,...e});await t.run(i,r)}:function(n,r){return tX(n,{file:r,...t||e})}}function nX(t){if(t)throw t}var GO,rX;function GJe(){if(rX)return GO;rX=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},s=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=t.call(c,"constructor"),h=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!h)return!1;var m;for(m in c);return typeof m>"u"||t.call(c,m)},o=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},a=function(c,u){if(u==="__proto__")if(t.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return GO=function l(){var c,u,h,m,g,x,v=arguments[0],b=1,w=arguments.length,k=!1;for(typeof v=="boolean"&&(k=v,v=arguments[1]||{},b=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});b<w;++b)if(c=arguments[b],c!=null)for(u in c)h=a(v,u),m=a(c,u),v!==m&&(k&&m&&(s(m)||(g=i(m)))?(g?(g=!1,x=h&&i(h)?h:[]):x=h&&s(h)?h:{},o(v,{name:u,newValue:l(k,x,m)})):typeof m<"u"&&o(v,{name:u,newValue:m}));return v},GO}var KJe=GJe();const KO=hs(KJe);function UL(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function WJe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?YJe(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function YJe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const lc={basename:JJe,dirname:XJe,extname:QJe,join:ZJe,sep:"/"};function JJe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');SE(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function XJe(t){if(SE(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function QJe(t){SE(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function ZJe(...t){let e=-1,n;for(;++e<t.length;)SE(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":eXe(n)}function eXe(t){SE(t);const e=t.codePointAt(0)===47;let n=tXe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function tXe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function SE(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const nXe={cwd:rXe};function rXe(){return"/"}function FL(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function iXe(t){if(typeof t=="string")t=new URL(t);else if(!FL(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return sXe(t)}function sXe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const WO=["history","path","basename","stem","extname","dirname"];class Cfe{constructor(e){let n;e?FL(e)?n={path:e}:typeof e=="string"||oXe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":nXe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<WO.length;){const s=WO[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)WO.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?lc.basename(this.path):void 0}set basename(e){JO(e,"basename"),YO(e,"basename"),this.path=lc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?lc.dirname(this.path):void 0}set dirname(e){iX(this.basename,"dirname"),this.path=lc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?lc.extname(this.path):void 0}set extname(e){if(YO(e,"extname"),iX(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=lc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){FL(e)&&(e=iXe(e)),JO(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?lc.basename(this.path,this.extname):void 0}set stem(e){JO(e,"stem"),YO(e,"stem"),this.path=lc.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Us(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function YO(t,e){if(t&&t.includes(lc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+lc.sep+"`")}function JO(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function iX(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function oXe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const aXe=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),lXe={}.hasOwnProperty;class NB extends aXe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=WJe()}copy(){const e=new NB;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(KO(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(ZO("data",this.frozen),this.namespace[e]=n,this):lXe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ZO("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=jA(e),r=this.parser||this.Parser;return XO("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),XO("process",this.parser||this.Parser),QO("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=jA(e),l=r.parse(a);r.run(l,a,function(u,h,m){if(u||!h||!m)return c(u);const g=h,x=r.stringify(g,m);dXe(x)?m.value=x:m.result=x,c(u,m)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),XO("processSync",this.parser||this.Parser),QO("processSync",this.compiler||this.Compiler),this.process(e,i),oX("processSync","process",n),r;function i(s,o){n=!0,nX(s),r=o}}run(e,n,r){sX(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=jA(n);i.run(e,l,c);function c(u,h,m){const g=h||e;u?a(u):o?o(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),oX("runSync","run",r),i;function s(o,a){nX(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=jA(n),i=this.compiler||this.Compiler;return QO("stringify",i),sX(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(ZO("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=KO(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===c){m=h;break}if(m===-1)r.push([c,...u]);else if(u.length>0){let[g,...x]=u;const v=r[m][1];UL(v)&&UL(g)&&(g=KO(!0,v,g)),r[m]=[c,g,...x]}}}}const cXe=new NB().freeze();function XO(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function QO(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function ZO(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function sX(t){if(!UL(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function oX(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function jA(t){return uXe(t)?t:new Cfe(t)}function uXe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function dXe(t){return typeof t=="string"||fXe(t)}function fXe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const hXe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",aX=[],lX={allowDangerousHtml:!0},pXe=/^(https?|ircs?|mailto|xmpp)$/i,mXe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function gXe(t){const e=yXe(t),n=xXe(t);return vXe(e.runSync(e.parse(n),n),t)}function yXe(t){const e=t.rehypePlugins||aX,n=t.remarkPlugins||aX,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...lX}:lX;return cXe().use(XYe).use(n).use(qJe,r).use(e)}function xXe(t){const e=t.children||"",n=new Cfe;return typeof e=="string"&&(n.value=e),n}function vXe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||bXe;for(const u of mXe)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+hXe+u.id,void 0);return CB(t,c),MKe(t,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function c(u,h,m){if(u.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let g;for(g in HO)if(Object.hasOwn(HO,g)&&Object.hasOwn(u.properties,g)){const x=u.properties[g],v=HO[g];(v===null||v.includes(u.tagName))&&(u.properties[g]=l(String(x||""),g,u))}}if(u.type==="element"){let g=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!g&&r&&typeof h=="number"&&(g=!r(u,h,m)),g&&m&&typeof h=="number")return a&&u.children?m.children.splice(h,1,...u.children):m.children.splice(h,1),h}}}function bXe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||pXe.test(t.slice(0,e))?t:""}function cX(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function wXe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function EXe(t,e,n){const i=$N((n||{}).ignore||[]),s=SXe(e);let o=-1;for(;++o<s.length;)kfe(t,"text",a);function a(c,u){let h=-1,m;for(;++h<u.length;){const g=u[h],x=m?m.children:void 0;if(i(g,x?x.indexOf(g):void 0,m))return;m=g}if(m)return l(c,u)}function l(c,u){const h=u[u.length-1],m=s[o][0],g=s[o][1];let x=0;const b=h.children.indexOf(c);let w=!1,k=[];m.lastIndex=0;let C=m.exec(c.value);for(;C;){const R=C.index,B={index:C.index,input:C.input,stack:[...u,c]};let O=g(...C,B);if(typeof O=="string"&&(O=O.length>0?{type:"text",value:O}:void 0),O===!1?m.lastIndex=R+1:(x!==R&&k.push({type:"text",value:c.value.slice(x,R)}),Array.isArray(O)?k.push(...O):O&&k.push(O),x=R+C[0].length,w=!0),!m.global)break;C=m.exec(c.value)}return w?(x<c.value.length&&k.push({type:"text",value:c.value.slice(x)}),h.children.splice(b,1,...k)):k=[c],b+k.length}}function SXe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([AXe(i[0]),TXe(i[1])])}return e}function AXe(t){return typeof t=="string"?new RegExp(wXe(t),"g"):t}function TXe(t){return typeof t=="function"?t:function(){return t}}const e4="phrasing",t4=["autolink","link","image","label"];function kXe(){return{transforms:[OXe],enter:{literalAutolink:NXe,literalAutolinkEmail:n4,literalAutolinkHttp:n4,literalAutolinkWww:n4},exit:{literalAutolink:RXe,literalAutolinkEmail:IXe,literalAutolinkHttp:PXe,literalAutolinkWww:_Xe}}}function CXe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:e4,notInConstruct:t4},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:e4,notInConstruct:t4},{character:":",before:"[ps]",after:"\\/",inConstruct:e4,notInConstruct:t4}]}}function NXe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function n4(t){this.config.enter.autolinkProtocol.call(this,t)}function PXe(t){this.config.exit.autolinkProtocol.call(this,t)}function _Xe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function IXe(t){this.config.exit.autolinkEmail.call(this,t)}function RXe(t){this.exit(t)}function OXe(t){EXe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,MXe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),LXe]],{ignore:["link","linkReference"]})}function MXe(t,e,n,r,i){let s="";if(!Nfe(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!DXe(n)))return!1;const o=jXe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function LXe(t,e,n,r){return!Nfe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function DXe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function jXe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=cX(t,"(");let s=cX(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function Nfe(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Rm(n)||BN(n))&&(!e||n!==47)}Pfe.peek=GXe;function BXe(){this.buffer()}function UXe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function FXe(){this.buffer()}function $Xe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function zXe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Dl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function HXe(t){this.exit(t)}function VXe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Dl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function qXe(t){this.exit(t)}function GXe(){return"["}function Pfe(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function KXe(){return{enter:{gfmFootnoteCallString:BXe,gfmFootnoteCall:UXe,gfmFootnoteDefinitionLabelString:FXe,gfmFootnoteDefinition:$Xe},exit:{gfmFootnoteCallString:zXe,gfmFootnoteCall:HXe,gfmFootnoteDefinitionLabelString:VXe,gfmFootnoteDefinition:qXe}}}function WXe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:Pfe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?_fe:YXe))),c(),l}}function YXe(t,e,n){return e===0?t:_fe(t,e,n)}function _fe(t,e,n){return(n?"":"    ")+t}const JXe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Ife.peek=tQe;function XXe(){return{canContainEols:["delete"],enter:{strikethrough:ZXe},exit:{strikethrough:eQe}}}function QXe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:JXe}],handlers:{delete:Ife}}}function ZXe(t){this.enter({type:"delete",children:[]},t)}function eQe(t){this.exit(t)}function Ife(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function tQe(){return"~"}function nQe(t){return t.length}function rQe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||nQe,s=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const v=[],b=[];let w=-1;for(t[u].length>c&&(c=t[u].length);++w<t[u].length;){const k=iQe(t[u][w]);if(n.alignDelimiters!==!1){const C=i(k);b[w]=C,(l[w]===void 0||C>l[w])&&(l[w]=C)}v.push(k)}o[u]=v,a[u]=b}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<c;)s[h]=uX(r[h]);else{const v=uX(r);for(;++h<c;)s[h]=v}h=-1;const m=[],g=[];for(;++h<c;){const v=s[h];let b="",w="";v===99?(b=":",w=":"):v===108?b=":":v===114&&(w=":");let k=n.alignDelimiters===!1?1:Math.max(1,l[h]-b.length-w.length);const C=b+"-".repeat(k)+w;n.alignDelimiters!==!1&&(k=b.length+k+w.length,k>l[h]&&(l[h]=k),g[h]=k),m[h]=C}o.splice(1,0,m),a.splice(1,0,g),u=-1;const x=[];for(;++u<o.length;){const v=o[u],b=a[u];h=-1;const w=[];for(;++h<c;){const k=v[h]||"";let C="",R="";if(n.alignDelimiters!==!1){const B=l[h]-(b[h]||0),O=s[h];O===114?C=" ".repeat(B):O===99?B%2?(C=" ".repeat(B/2+.5),R=" ".repeat(B/2-.5)):(C=" ".repeat(B/2),R=C):R=" ".repeat(B)}n.delimiterStart!==!1&&!h&&w.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||h)&&w.push(" "),n.alignDelimiters!==!1&&w.push(C),w.push(k),n.alignDelimiters!==!1&&w.push(R),n.padding!==!1&&w.push(" "),(n.delimiterEnd!==!1||h!==c-1)&&w.push("|")}x.push(n.delimiterEnd===!1?w.join("").replace(/ +$/,""):w.join(""))}return x.join(`
`)}function iQe(t){return t==null?"":String(t)}function uX(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function sQe(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),oQe);return i(),o}function oQe(t,e,n){return">"+(n?"":" ")+t}function aQe(t,e){return dX(t,e.inConstruct,!0)&&!dX(t,e.notInConstruct,!1)}function dX(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function fX(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&aQe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function lQe(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function cQe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function uQe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function dQe(t,e,n,r){const i=uQe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(cQe(t,n)){const h=n.enter("codeIndented"),m=n.indentLines(s,fQe);return h(),m}const a=n.createTracker(r),l=i.repeat(Math.max(lQe(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),h()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function fQe(t,e,n){return(n?"":"    ")+t}function PB(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function hQe(t,e,n,r){const i=PB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function pQe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function h1(t){return"&#x"+t.toString(16).toUpperCase()+";"}function v2(t,e,n){const r=Px(t),i=Px(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Rfe.peek=mQe;function Rfe(t,e,n,r){const i=pQe(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=v2(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=h1(c)+l.slice(1));const h=l.charCodeAt(l.length-1),m=v2(r.after.charCodeAt(0),h,i);m.inside&&(l=l.slice(0,-1)+h1(h));const g=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function mQe(t,e,n){return n.options.emphasis||"*"}function gQe(t,e){let n=!1;return CB(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,jL}),!!((!t.depth||t.depth<3)&&bB(t)&&(e.options.setext||n))}function yQe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(gQe(t,n)){const u=n.enter("headingSetext"),h=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),u(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=h1(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}Ofe.peek=xQe;function Ofe(t){return t.value||""}function xQe(){return"<"}Mfe.peek=vQe;function Mfe(t,e,n,r){const i=PB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function vQe(){return"!"}Lfe.peek=bQe;function Lfe(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function bQe(){return"!"}Dfe.peek=wQe;function Dfe(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function wQe(){return"`"}function jfe(t,e){const n=bB(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Bfe.peek=EQe;function Bfe(t,e,n,r){const i=PB(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(jfe(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=u,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function EQe(t,e,n){return jfe(t,n)?"<":"["}Ufe.peek=SQe;function Ufe(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function SQe(){return"["}function _B(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function AQe(t){const e=_B(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function TQe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Ffe(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function kQe(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?TQe(n):_B(n);const a=t.ordered?o==="."?")":".":AQe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Ffe(n)===o&&u){let h=-1;for(;++h<t.children.length;){const m=t.children[h];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function CQe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function NQe(t,e,n,r){const i=CQe(n);let s=n.bulletCurrent||_B(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(h,m,g){return m?(g?"":" ".repeat(o))+h:(g?s:s+" ".repeat(o-s.length))+h}}function PQe(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const _Qe=$N(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function IQe(t,e,n,r){return(t.children.some(function(o){return _Qe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function RQe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}$fe.peek=OQe;function $fe(t,e,n,r){const i=RQe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=v2(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=h1(c)+l.slice(1));const h=l.charCodeAt(l.length-1),m=v2(r.after.charCodeAt(0),h,i);m.inside&&(l=l.slice(0,-1)+h1(h));const g=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},a+l+g}function OQe(t,e,n){return n.options.strong||"*"}function MQe(t,e,n,r){return n.safe(t.value,r)}function LQe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function DQe(t,e,n){const r=(Ffe(n)+(n.options.ruleSpaces?" ":"")).repeat(LQe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const zfe={blockquote:sQe,break:fX,code:dQe,definition:hQe,emphasis:Rfe,hardBreak:fX,heading:yQe,html:Ofe,image:Mfe,imageReference:Lfe,inlineCode:Dfe,link:Bfe,linkReference:Ufe,list:kQe,listItem:NQe,paragraph:PQe,root:IQe,strong:$fe,text:MQe,thematicBreak:DQe};function jQe(){return{enter:{table:BQe,tableData:hX,tableHeader:hX,tableRow:FQe},exit:{codeText:$Qe,table:UQe,tableData:r4,tableHeader:r4,tableRow:r4}}}function BQe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function UQe(t){this.exit(t),this.data.inTable=void 0}function FQe(t){this.enter({type:"tableRow",children:[]},t)}function r4(t){this.exit(t)}function hX(t){this.enter({type:"tableCell",children:[]},t)}function $Qe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,zQe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function zQe(t,e){return e==="|"?e:t}function HQe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:l,tableRow:a}};function o(g,x,v,b){return c(u(g,v,b),g.align)}function a(g,x,v,b){const w=h(g,v,b),k=c([w]);return k.slice(0,k.indexOf(`
`))}function l(g,x,v,b){const w=v.enter("tableCell"),k=v.enter("phrasing"),C=v.containerPhrasing(g,{...b,before:s,after:s});return k(),w(),C}function c(g,x){return rQe(g,{align:x,alignDelimiters:r,padding:n,stringLength:i})}function u(g,x,v){const b=g.children;let w=-1;const k=[],C=x.enter("table");for(;++w<b.length;)k[w]=h(b[w],x,v);return C(),k}function h(g,x,v){const b=g.children;let w=-1;const k=[],C=x.enter("tableRow");for(;++w<b.length;)k[w]=l(b[w],g,x,v);return C(),k}function m(g,x,v){let b=zfe.inlineCode(g,x,v);return v.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function VQe(){return{exit:{taskListCheckValueChecked:pX,taskListCheckValueUnchecked:pX,paragraph:GQe}}}function qQe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:KQe}}}function pX(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function GQe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function KQe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=zfe.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function WQe(){return[kXe(),KXe(),XXe(),jQe(),VQe()]}function YQe(t){return{extensions:[CXe(),WXe(t),QXe(),HQe(t),qQe()]}}const JQe={tokenize:nZe,partial:!0},Hfe={tokenize:rZe,partial:!0},Vfe={tokenize:iZe,partial:!0},qfe={tokenize:sZe,partial:!0},XQe={tokenize:oZe,partial:!0},Gfe={name:"wwwAutolink",tokenize:eZe,previous:Wfe},Kfe={name:"protocolAutolink",tokenize:tZe,previous:Yfe},Ld={name:"emailAutolink",tokenize:ZQe,previous:Jfe},Jc={};function QQe(){return{text:Jc}}let np=48;for(;np<123;)Jc[np]=Ld,np++,np===58?np=65:np===91&&(np=97);Jc[43]=Ld;Jc[45]=Ld;Jc[46]=Ld;Jc[95]=Ld;Jc[72]=[Ld,Kfe];Jc[104]=[Ld,Kfe];Jc[87]=[Ld,Gfe];Jc[119]=[Ld,Gfe];function ZQe(t,e,n){const r=this;let i,s;return o;function o(h){return!$L(h)||!Jfe.call(r,r.previous)||IB(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return $L(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(XQe,u,c)(h):h===45||h===95||Os(h)?(s=!0,t.consume(h),l):u(h)}function c(h){return t.consume(h),i=!0,l}function u(h){return s&&i&&Ks(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function eZe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!Wfe.call(r,r.previous)||IB(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(JQe,t.attempt(Hfe,t.attempt(Vfe,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function tZe(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&Yfe.call(r,r.previous)&&!IB(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(Ks(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const m=i.toLowerCase();if(m==="http"||m==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),s?c:(s=!0,l)):n(h)}function c(h){return h===null||g2(h)||lr(h)||Rm(h)||BN(h)?n(h):t.attempt(Hfe,t.attempt(Vfe,u),n)(h)}function u(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function nZe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function rZe(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(qfe,l,a)(c):c===null||lr(c)||Rm(c)||c!==45&&BN(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function iZe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(qfe,e,s)(o):o===null||lr(o)||Rm(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function sZe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||lr(a)||Rm(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||lr(a)||Rm(a)?e(a):r(a)}function s(a){return Ks(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):Ks(a)?(t.consume(a),o):n(a)}}function oZe(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Os(s)?n(s):e(s)}}function Wfe(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||lr(t)}function Yfe(t){return!Ks(t)}function Jfe(t){return!(t===47||$L(t))}function $L(t){return t===43||t===45||t===46||t===95||Os(t)}function IB(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const aZe={tokenize:mZe,partial:!0};function lZe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:fZe,continuation:{tokenize:hZe},exit:pZe}},text:{91:{name:"gfmFootnoteCall",tokenize:dZe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:cZe,resolveTo:uZe}}}}function cZe(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=Dl(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function uZe(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function dZe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||lr(h))return n(h);if(h===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return i.includes(Dl(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return lr(h)||(o=!0),s++,t.consume(h),h===92?u:c}function u(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function fZe(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(x)}function u(x){if(o>999||x===93&&!a||x===null||x===91||lr(x))return n(x);if(x===93){t.exit("chunkString");const v=t.exit("gfmFootnoteDefinitionLabelString");return s=Dl(r.sliceSerialize(v)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return lr(x)||(a=!0),o++,t.consume(x),x===92?h:u}function h(x){return x===91||x===92||x===93?(t.consume(x),o++,u):u(x)}function m(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),i.includes(s)||i.push(s),In(t,g,"gfmFootnoteDefinitionWhitespace")):n(x)}function g(x){return e(x)}}function hZe(t,e,n){return t.check(EE,e,t.attempt(aZe,e,n))}function pZe(t){t.exit("gfmFootnoteDefinition")}function mZe(t,e,n){const r=this;return In(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function gZe(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},m=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],g=a.parser.constructs.insideSpan.null;g&&sa(m,m.length,0,UN(g,o.slice(c+1,l),a)),sa(m,m.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),sa(o,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let h=0;return m;function m(x){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(x):(o.enter("strikethroughSequenceTemporary"),g(x))}function g(x){const v=Px(c);if(x===126)return h>1?l(x):(o.consume(x),h++,g);if(h<2&&!n)return l(x);const b=o.exit("strikethroughSequenceTemporary"),w=Px(x);return b._open=!w||w===2&&!!v,b._close=!v||v===2&&!!w,a(x)}}}class yZe{constructor(){this.map=[]}add(e,n,r){xZe(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function xZe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function vZe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function bZe(){return{flow:{null:{name:"table",tokenize:wZe,resolveAll:EZe}}}}function wZe(t,e,n){const r=this;let i=0,s=0,o;return a;function a($){let W=r.events.length-1;for(;W>-1;){const T=r.events[W][1].type;if(T==="lineEnding"||T==="linePrefix")W--;else break}const V=W>-1?r.events[W][1].type:null,U=V==="tableHead"||V==="tableRow"?O:l;return U===O&&r.parser.lazy[r.now().line]?n($):U($)}function l($){return t.enter("tableHead"),t.enter("tableRow"),c($)}function c($){return $===124||(o=!0,s+=1),u($)}function u($){return $===null?n($):Gt($)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),g):n($):Sn($)?In(t,u,"whitespace")($):(s+=1,o&&(o=!1,i+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),h($)))}function h($){return $===null||$===124||lr($)?(t.exit("data"),u($)):(t.consume($),$===92?m:h)}function m($){return $===92||$===124?(t.consume($),h):h($)}function g($){return r.interrupt=!1,r.parser.lazy[r.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,Sn($)?In(t,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):x($))}function x($){return $===45||$===58?b($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),v):B($)}function v($){return Sn($)?In(t,b,"whitespace")($):b($)}function b($){return $===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),w):$===45?(s+=1,w($)):$===null||Gt($)?R($):B($)}function w($){return $===45?(t.enter("tableDelimiterFiller"),k($)):B($)}function k($){return $===45?(t.consume($),k):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),C):(t.exit("tableDelimiterFiller"),C($))}function C($){return Sn($)?In(t,R,"whitespace")($):R($)}function R($){return $===124?x($):$===null||Gt($)?!o||i!==s?B($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):B($)}function B($){return n($)}function O($){return t.enter("tableRow"),F($)}function F($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),F):$===null||Gt($)?(t.exit("tableRow"),e($)):Sn($)?In(t,F,"whitespace")($):(t.enter("data"),H($))}function H($){return $===null||$===124||lr($)?(t.exit("data"),F($)):(t.consume($),$===92?j:H)}function j($){return $===92||$===124?(t.consume($),H):H($)}}function EZe(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,h;const m=new yZe;for(;++n<t.length;){const g=t[n],x=g[1];g[0]==="enter"?x.type==="tableHead"?(a=!1,l!==0&&(mX(m,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(n,0,[["enter",c,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},m.add(n,0,[["enter",u,e]])),i=x.type==="tableDelimiterRow"?2:u?3:1):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=BA(m,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=BA(m,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):x.type==="tableHead"?(a=!0,l=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],h=BA(m,e,s,i,n,h)):o[1]!==0&&(h=BA(m,e,o,i,n,h)),i=0):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&mX(m,e,l,c,u),m.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=vZe(e.events,n))}return t}function BA(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Eg(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Eg(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=Eg(e.events,n[2]),u=Eg(e.events,n[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const m=e.events[n[2]],g=e.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,v=n[3]-n[2]-1;t.add(x,v,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},Eg(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function mX(t,e,n,r,i){const s=[],o=Eg(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Eg(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const SZe={name:"tasklistCheck",tokenize:TZe};function AZe(){return{text:{91:SZe}}}function TZe(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return lr(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Gt(l)?e(l):Sn(l)?t.check({tokenize:kZe},e,n)(l):n(l)}}function kZe(t,e,n){return In(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function CZe(t){return afe([QQe(),lZe(),gZe(t),bZe(),AZe()])}const NZe={};function PZe(t){const e=this,n=t||NZe,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(CZe(n)),s.push(WQe()),o.push(YQe(n))}const qs=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:qt("rounded border border-[#232328] bg-[#14151a] text-card-foreground shadow-sm",t),...e}));qs.displayName="Card";const zL=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:qt("flex flex-col space-y-1.5 p-6",t),...e}));zL.displayName="CardHeader";const HL=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:qt("font-semibold leading-none tracking-tight text-white",t),...e}));HL.displayName="CardTitle";const VL=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:qt("text-sm text-muted-foreground",t),...e}));VL.displayName="CardDescription";const Tu=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:qt("p-6 pt-0",t),...e}));Tu.displayName="CardContent";const _Ze=A.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:qt("flex items-center p-6 pt-0",t),...e}));_Ze.displayName="CardFooter";const IZe=({messages:t})=>{const e=A.useRef(null),n=A.useMemo(()=>{const r=[];return t.forEach(i=>{i.role==="model"&&i.toolResults&&i.toolResults.length>0&&i.toolResults.forEach(s=>{if(s.type==="error")return;const o=s.title||"",a=s.details||"";if(o.includes("Swap")||o.includes("Order")||o.includes("Transfer")||o.includes("Withdraw")||o.includes("Position")||o.includes("Leverage")){let l="info";o.includes("Swap")?l="swap":o.includes("Order")||o.includes("Position")||o.includes("Leverage")?l="order":(o.includes("Transfer")||o.includes("Withdraw"))&&(l="transfer"),r.push({type:l,title:o,details:a.split(`
`)[0]||a,subDetails:s.tx?"Transaction Executed":void 0,timestamp:i.timestamp,tx:s.tx})}else o.includes("Task")||o.includes("Scheduled")?r.push({type:"info",title:o,details:a,timestamp:i.timestamp}):o.includes("Price")||o.includes("OHLCV")||o.includes("Indicator")||o.includes("TradingView")||o.includes("Summary")||o.includes("Market Data")?r.push({type:"price",title:o,details:a,timestamp:i.timestamp}):o.includes("Balance")?r.push({type:"balance",title:"Balance Checked",details:a.split(`
`)[0],subDetails:"View specific assets in chat",timestamp:i.timestamp}):r.push({type:"info",title:o,details:a.substring(0,100)+(a.length>100?"...":""),timestamp:i.timestamp})})}),r},[t]);return A.useEffect(()=>{e.current&&e.current.scrollTo({top:e.current.scrollHeight,behavior:"smooth"})},[n.length]),n.length===0?null:d.jsxs("div",{ref:e,className:"w-full h-full overflow-y-auto pr-1 custom-scrollbar space-y-3 pb-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 sticky top-0 bg-slate-900/90 backdrop-blur-sm py-2 z-10",children:[d.jsx(eo,{size:12,className:"text-indigo-400"}),d.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500",children:"Activity Feed"})]}),d.jsx(Zs,{children:n.map((r,i)=>{var l;const s=r.tx,o=r.title.includes("Hyperliquid")||r.title.includes("Order"),a=s?o?`https://app.hyperliquid.xyz/explorer/tx/${s}`:`https://solscan.io/tx/${s}`:null;return d.jsx(Bt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.05},children:d.jsxs(qs,{className:"p-3 relative overflow-hidden group hover:border-indigo-500/30 transition-all duration-300",children:[d.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-indigo-500/5 rounded-full blur-xl -z-10 transition-all duration-700 group-hover:bg-indigo-500/10"}),d.jsx("div",{className:"flex items-center justify-between mb-1.5",children:d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("div",{className:qt("w-1 h-1 rounded-full",r.type==="error"?"bg-red-500":"bg-indigo-500")}),d.jsx("span",{className:"text-[9px] text-slate-600 font-mono",children:new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-xs font-bold text-white leading-tight",children:r.title}),d.jsx("div",{className:"py-1",children:r.type==="swap"?d.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:d.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}):r.type==="price"&&r.details.includes(":")&&!r.details.includes(`
`)?d.jsxs("div",{className:"flex flex-col gap-0.5",children:[d.jsx("div",{className:"text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:(l=r.details.split(":")[1])==null?void 0:l.trim()}),d.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:r.details.split(":")[0]})]}):d.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}),d.jsxs("div",{className:"flex items-center justify-between mt-1 pt-1 border-t border-slate-800/50",children:[r.subDetails&&!s&&d.jsx("div",{className:"flex items-center gap-1.5 text-[10px] text-emerald-400 font-medium",children:r.subDetails}),s&&d.jsxs("a",{href:a||"#",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-[10px] text-indigo-400 hover:text-indigo-300 transition-colors group/link ml-auto",children:["View Transaction",d.jsx($ne,{size:10,className:"group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]})]})]})]})},`${r.timestamp}-${i}`)})})]})};var RZe=Symbol.for("react.lazy"),b2=iC[" use ".trim().toString()];function OZe(t){return typeof t=="object"&&t!==null&&"then"in t}function Xfe(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===RZe&&"_payload"in t&&OZe(t._payload)}function MZe(t){const e=DZe(t),n=A.forwardRef((r,i)=>{let{children:s,...o}=r;Xfe(s)&&typeof b2=="function"&&(s=b2(s._payload));const a=A.Children.toArray(s),l=a.find(BZe);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var LZe=MZe("Slot");function DZe(t){const e=A.forwardRef((n,r)=>{let{children:i,...s}=n;if(Xfe(i)&&typeof b2=="function"&&(i=b2(i._payload)),A.isValidElement(i)){const o=FZe(i),a=UZe(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Yx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var jZe=Symbol("radix.slottable");function BZe(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===jZe}function UZe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function FZe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const gX=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,yX=Rn,Qfe=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return yX(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],h=s==null?void 0:s[c];if(u===null)return null;const m=gX(u)||gX(h);return i[c][m]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,m]=u;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:m,...g}=u;return Object.entries(g).every(x=>{let[v,b]=x;return Array.isArray(b)?b.includes({...s,...a}[v]):{...s,...a}[v]===b})?[...c,h,m]:c},[]);return yX(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},$Ze=Qfe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-slate-700 bg-transparent hover:bg-slate-800 hover:text-slate-100",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-slate-800 hover:text-slate-100",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow hover:bg-emerald-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),zi=A.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?LZe:"button";return d.jsx(o,{className:qt($Ze({variant:e,size:n,className:t})),ref:s,...i})});zi.displayName="Button";const _x=A.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:qt("flex h-10 w-full rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-500/50 focus-visible:border-slate-500/50 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",t),ref:r,...n}));_x.displayName="Input";const zZe=({messages:t,inputMessage:e,setInputMessage:n,handleSendMessage:r,isAiProcessing:i,aiStatus:s,scrollRef:o,isVaultUnlocked:a,password:l,setPassword:c,unlockVault:u,hasVault:h,onNavigate:m})=>{const g=A.useRef(null),x=A.useMemo(()=>t.some(v=>v.role==="model"&&v.toolResults&&v.toolResults.length>0&&v.toolResults.some(b=>b.type!=="error")),[t]);return A.useEffect(()=>{!i&&a&&g.current&&g.current.focus()},[i,a]),A.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[t,o]),!a&&h?d.jsx(Bt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx(Bt.div,{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:d.jsx(ch,{size:32,className:"text-[#E7FE55]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Unlock Vault Operator"}),d.jsx("p",{className:"text-[#747580] mt-2 text-sm",children:"Enter your password to start using Vault Operator."})]}),d.jsxs(qs,{className:"p-6 space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em] mb-2",children:"Password"}),d.jsx(_x,{type:"password",value:l,onChange:v=>c(v.target.value),placeholder:"Enter password...",onKeyDown:v=>v.key==="Enter"&&u(),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30",autoFocus:!0})]}),d.jsxs(zi,{onClick:u,className:"w-full",size:"lg",children:[d.jsx(qne,{size:18})," Unlock Vault Operator"]})]}),d.jsx("p",{className:"text-center text-[11px] text-[#747580]",children:"This is the same password used to unlock your Vault."})]})}):h?d.jsxs("div",{className:"flex h-[calc(100vh-9rem)] gap-6",children:[d.jsxs("div",{className:qt("flex-1 flex flex-col bg-transparent rounded overflow-hidden relative min-w-0",x&&"lg:pr-2"),children:[d.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",ref:o,children:[d.jsxs(Zs,{children:[t.length===0&&d.jsxs(Bt.div,{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-60",initial:{opacity:0},animate:{opacity:.6},children:[d.jsx(Rg,{size:48,className:"mb-4 text-[#E7FE55]"}),d.jsx("p",{className:"text-sm font-semibold text-white",children:"Vault Operator Ready"}),d.jsx("p",{className:"text-[11px] text-[#747580]",children:"Ask me to check balances, swap tokens, or schedule automations."})]}),t.map((v,b)=>d.jsx(Bt.div,{className:qt("flex",v.role==="user"?"justify-end":"justify-start"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.05},children:d.jsxs("div",{className:qt("flex gap-4",x?"max-w-[85%]":"max-w-[90%]",v.role==="user"?"flex-row-reverse":"flex-row"),children:[d.jsx("div",{className:qt("w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 border",v.role==="user"?"bg-[#9b87f5]/10 border-[#9b87f5]/20":"bg-[#E7FE55]/10 border-[#E7FE55]/20"),children:v.role==="user"?d.jsx(Oke,{size:18,className:"text-[#9b87f5]"}):d.jsx(Rg,{size:18,className:"text-[#E7FE55]"})}),d.jsxs("div",{className:qt("flex flex-col",v.role==="user"?"items-end":"items-start"),children:[d.jsxs("div",{className:qt("px-4 py-3 rounded-lg bg-[#1a1b21] text-[#e4e5e9] border border-[#232328]",v.role==="user"?"rounded-tr-sm":"rounded-tl-sm"),children:[v.toolResults&&v.toolResults.length>0&&d.jsx("div",{className:"mb-4 space-y-3 w-full",children:v.toolResults.map((w,k)=>d.jsxs("div",{className:qt("text-[11px] p-3 rounded border",w.type==="success"?"bg-[#34d399]/10 border-[#34d399]/30 text-[#34d399]":w.type==="error"?"bg-red-500/10 border-red-500/30 text-red-400":"bg-[#60a5fa]/10 border-[#60a5fa]/30 text-[#60a5fa]"),children:[d.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[w.type==="success"?d.jsx(R3,{size:14}):w.type==="error"?d.jsx(to,{size:14}):d.jsx(Vne,{size:14}),w.title]}),d.jsx("div",{className:"whitespace-pre-wrap font-mono opacity-90",children:w.details}),w.tx&&d.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10 text-[10px] font-mono opacity-70 truncate",children:["TX: ",w.tx]})]},k))}),d.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:d.jsx(gXe,{remarkPlugins:[PZe],components:{a:({href:w,children:k})=>{if(w!=null&&w.startsWith("nav://")){const C=w.replace("nav://",""),B={DEALER_CONFIG:we.DEALER_CONFIG,DEALER_DASHBOARD:we.DEALER_DASHBOARD,DEALER_THINKING:we.DEALER_THINKING,VAULT_DEALER:we.VAULT_DEALER,DASHBOARD:we.DASHBOARD,VAULT:we.VAULT,SCHEDULER:we.SCHEDULER}[C];return B&&m?d.jsxs(zi,{onClick:O=>{O.preventDefault(),O.stopPropagation(),m(B)},className:"mt-3 inline-flex",children:[d.jsx(ek,{size:16}),d.jsx("span",{children:k}),d.jsx(Fne,{size:14})]}):d.jsx("span",{className:"text-indigo-400",children:k})}return d.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 underline",children:k})},pre:({children:w})=>d.jsx("pre",{className:"overflow-x-auto overflow-y-auto max-h-[400px] custom-scrollbar bg-[#0f1015] rounded border border-[#232328] p-4 my-4",children:w}),code:({node:w,inline:k,className:C,children:R,...B})=>k?d.jsx("code",{className:"bg-[#1a1b21] px-1.5 py-0.5 rounded text-sm text-[#E7FE55] font-mono border border-[#232328]",...B,children:R}):d.jsx("code",{className:`${C} text-sm`,...B,children:R})},children:v.content})})]}),d.jsx("span",{className:"text-[10px] text-[#747580] mt-1.5 px-1",children:new Date(v.timestamp).toLocaleTimeString()})]})]})},v.id))]}),d.jsx(Zs,{children:i&&d.jsx(Bt.div,{className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:d.jsxs("div",{className:"flex gap-4 max-w-[80%]",children:[d.jsx(Bt.div,{className:"w-9 h-9 rounded-full bg-[#E7FE55]/10 border border-[#E7FE55]/20 flex items-center justify-center flex-shrink-0",animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:d.jsx(Rg,{size:18,className:"text-[#E7FE55]"})}),d.jsxs("div",{className:"bg-[#1a1b21] px-4 py-3 rounded-lg rounded-tl-sm border border-[#232328] flex items-center gap-3",children:[d.jsxs("div",{className:"flex space-x-1",children:[d.jsx(Bt.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:0}}),d.jsx(Bt.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.15}}),d.jsx(Bt.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.3}})]}),d.jsx("span",{className:"text-[11px] text-[#E7FE55] font-medium",children:s})]})]})})})]}),d.jsxs("div",{className:"p-4 bg-transparent z-10 box-border",children:[d.jsxs("div",{className:"relative",children:[d.jsx(_x,{ref:g,type:"text",value:e,onChange:v=>n(v.target.value),onKeyDown:v=>v.key==="Enter"&&!i&&a&&r(),placeholder:"Ask Vault Operator to swap tokens, check prices, or schedule a task...",className:"pl-5 pr-14 py-5 text-sm bg-[#1a1b21] border-[#232328] focus-visible:ring-1 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30 placeholder:text-[#747580]",disabled:i}),d.jsx(zi,{onClick:r,disabled:!e.trim()||i,size:"icon",className:"absolute right-2 top-2 bottom-2 h-auto bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:i?d.jsx(fs,{size:18,className:"animate-spin"}):d.jsx(xke,{size:18})})]}),d.jsx("p",{className:"text-center mt-3 text-[10px] text-[#747580] tracking-wide",children:"Vault Operator can make mistakes. Always verify transactions."})]})]}),d.jsx(Zs,{children:x&&d.jsx(Bt.div,{className:"hidden lg:block w-64 xl:w-72 h-full flex-shrink-0",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:d.jsx(IZe,{messages:t})})})]}):d.jsx(Bt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:d.jsx(Rg,{size:32,className:"text-[#747580]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),d.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a vault before using Vault Operator. Go to the ",d.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallets."]})]})})},HZe=Qfe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-red-500/20 text-red-400 border-red-500/30",outline:"text-foreground border-slate-600",success:"border-transparent bg-emerald-500/20 text-emerald-400 border-emerald-500/30",warning:"border-transparent bg-yellow-500/20 text-yellow-400 border-yellow-500/30",info:"border-transparent bg-blue-500/20 text-blue-400 border-blue-500/30",purple:"border-transparent bg-purple-500/20 text-purple-400 border-purple-500/30"}},defaultVariants:{variant:"default"}}),tl=A.forwardRef(({className:t,variant:e,...n},r)=>d.jsx("div",{ref:r,className:qt(HZe({variant:e}),t),...n}));tl.displayName="Badge";const VZe=({scheduledTasks:t,setScheduledTasks:e,addNotification:n})=>{const r=t.filter(a=>a.status==="active"||a.status==="executing"),i=t.filter(a=>a.status==="completed"||a.status==="failed").sort((a,l)=>(l.lastExecuted||0)-(a.lastExecuted||0)),s=()=>{window.confirm("Clear all task history?")&&(e(a=>{const l=a.filter(c=>c.status==="active"||c.status==="executing");return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(l)),l}),n("Task history cleared"))},o=a=>{window.confirm("Cancel this task?")&&(e(l=>{const c=l.map(u=>u.id===a?{...u,status:"failed",result:"Cancelled by user"}:u);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(c)),c}),n(`Task #${a.slice(-4)} cancelled`))};return d.jsx(Bt.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[d.jsx(fs,{size:20,className:"text-emerald-400"})," Active Tasks"]}),d.jsx(Zs,{children:r.length===0?d.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},children:d.jsxs(qs,{className:"p-8 text-center border-dashed border-2 border-slate-800",children:[d.jsx(h8,{size:48,className:"mx-auto text-slate-700 mb-4"}),d.jsx("p",{className:"text-slate-500",children:"No active tasks."}),d.jsx("p",{className:"text-xs text-slate-600 mt-2",children:'Ask the AI to "schedule a swap in 10 mins" or "alert me when BTC > 100k"'})]})}):r.map((a,l)=>{const c=JSON.parse(a.params||"{}");let u=0,h=0,m=0;if(a.type==="HL_ORDER"&&c.price&&c.size){const{price:g,size:x,leverage:v=1,side:b,takeProfit:w,stopLoss:k}=c,C=b==="B";w&&(u=(C?w-g:g-w)*x),k&&(h=(C?g-k:k-g)*x);const R=1/v-.005;m=C?g*(1-R):g*(1+R)}return d.jsx(Bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:l*.1},children:d.jsxs(qs,{className:"p-5 border-l-4 border-l-emerald-500 relative overflow-hidden",children:[a.status==="executing"&&d.jsx("div",{className:"absolute top-2 right-2",children:d.jsxs("span",{className:"relative flex h-3 w-3",children:[d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),d.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]})}),d.jsxs("div",{className:"flex justify-between items-start mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(tl,{variant:a.type==="SWAP"||a.type==="TRANSFER"?"info":a.type==="HL_ORDER"?"purple":a.type==="ALERT"?"warning":"secondary",children:a.type}),d.jsxs("span",{className:"text-xs font-mono text-slate-500",children:["#",a.id.slice(-4)]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("span",{className:"text-xs text-slate-400",children:["Created: ",new Date(a.createdAt).toLocaleTimeString()]}),a.status!=="executing"&&d.jsxs(zi,{variant:"ghost",size:"sm",onClick:()=>o(a.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:[d.jsx(gm,{size:12})," Cancel"]})]})]}),d.jsxs("div",{className:"mb-3 space-y-2",children:[a.type==="SWAP"&&d.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800",children:[d.jsx("div",{className:"text-xs text-slate-500 mb-1 font-bold uppercase",children:"Swap Details"}),d.jsxs("div",{className:"text-sm text-white font-medium",children:[c.amount," ",c.inputToken,"  ",c.outputToken]})]}),a.type==="HL_ORDER"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-purple-900/30 space-y-2",children:[d.jsx("div",{className:"text-xs text-slate-500 mb-2 font-bold uppercase",children:"Hyperliquid Order"}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Asset:"}),d.jsx("span",{className:"ml-2 text-white font-bold",children:c.coin})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Direction:"}),d.jsx("span",{className:qt("ml-2 font-bold",c.side==="B"?"text-emerald-400":"text-red-400"),children:c.side==="B"?"LONG":"SHORT"})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Size:"}),d.jsx("span",{className:"ml-2 text-white font-medium",children:c.size})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Type:"}),d.jsx("span",{className:"ml-2 text-white font-medium uppercase",children:c.orderType})]}),c.price&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Price:"}),d.jsxs("span",{className:"ml-2 text-white font-medium",children:["$",c.price.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Leverage:"}),d.jsxs("span",{className:"ml-2 text-yellow-400 font-bold",children:[c.leverage,"x"]})]})]}),(c.stopLoss||c.takeProfit)&&d.jsxs("div",{className:"pt-2 border-t border-slate-800 grid grid-cols-2 gap-2 text-xs",children:[c.stopLoss&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Stop Loss:"}),d.jsxs("span",{className:"ml-2 text-red-400 font-medium",children:["$",c.stopLoss.toLocaleString()]})]}),c.takeProfit&&d.jsxs("div",{children:[d.jsx("span",{className:"text-slate-500",children:"Take Profit:"}),d.jsxs("span",{className:"ml-2 text-emerald-400 font-medium",children:["$",c.takeProfit.toLocaleString()]})]})]})]}),c.price&&d.jsxs("div",{className:"bg-gradient-to-br from-slate-950/80 to-purple-950/20 p-3 rounded-lg border border-purple-900/40 space-y-2",children:[d.jsxs("div",{className:"text-xs text-purple-300 mb-2 font-bold uppercase flex items-center gap-2",children:[d.jsx(_n,{size:12})," Risk Analysis"]}),d.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[c.takeProfit&&d.jsxs("div",{className:"bg-emerald-900/20 p-2 rounded border border-emerald-800/30",children:[d.jsx("div",{className:"text-emerald-500 text-[10px] mb-1",children:"MAX PROFIT"}),d.jsxs("div",{className:"text-emerald-400 font-bold",children:["$",u.toFixed(2)]})]}),c.stopLoss&&d.jsxs("div",{className:"bg-red-900/20 p-2 rounded border border-red-800/30",children:[d.jsx("div",{className:"text-red-500 text-[10px] mb-1",children:"MAX LOSS"}),d.jsxs("div",{className:"text-red-400 font-bold",children:["-$",h.toFixed(2)]})]}),d.jsxs("div",{className:"bg-orange-900/20 p-2 rounded border border-orange-800/30",children:[d.jsx("div",{className:"text-orange-500 text-[10px] mb-1",children:"LIQUIDATION"}),d.jsxs("div",{className:"text-orange-400 font-bold",children:["$",m.toFixed(2)]})]})]})]})]})]}),d.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800 text-xs",children:[d.jsx("div",{className:"flex items-center gap-2 mb-2 text-slate-500 font-bold uppercase tracking-wider",children:"Trigger Condition"}),a.condition?d.jsx("div",{className:"space-y-1",children:d.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-medium",children:[d.jsx(_n,{size:14}),a.condition.indicator.toUpperCase()," (",a.condition.symbol,") ",a.condition.operator," ",a.condition.value]})}):d.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[d.jsx(fs,{size:14}),"Time: ",new Date(a.executeAt).toLocaleString()]})]})]})},a.id)})})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[d.jsx(R3,{size:20,className:"text-slate-400"})," History"]}),d.jsxs(zi,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-500 hover:text-white",children:[d.jsx(gm,{size:14})," Clear History"]})]}),d.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar pr-2",children:i.length===0?d.jsx("div",{className:"text-center py-8 text-slate-600 text-sm",children:"No history available."}):i.map((a,l)=>d.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:l*.05},children:d.jsxs(qs,{className:qt("p-4",a.status==="completed"?"opacity-70 hover:opacity-100 transition-opacity":"border-red-900/30 bg-red-900/10"),children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[a.status==="completed"?d.jsx(R3,{size:16,className:"text-emerald-500"}):d.jsx(to,{size:16,className:"text-red-500"}),d.jsx(tl,{variant:a.status==="completed"?"success":"destructive",children:a.status.toUpperCase()})]}),d.jsx("span",{className:"text-xs text-slate-500",children:a.lastExecuted?new Date(a.lastExecuted).toLocaleString():"Unknown"})]}),d.jsxs("div",{className:"text-xs text-slate-300 mb-2",children:[a.type," - ",a.condition?"Condition":"Time"," Trigger"]}),d.jsx("div",{className:"bg-black/30 p-2 rounded text-[10px] font-mono text-slate-400 break-all",children:a.result})]})},a.id))})]})]})})},qZe=5,GZe="dealer_cycle_summary",Mb={recentCycles:[],aiSummary:null,lastSummaryTime:0,isGenerating:!1};class KZe{constructor(){this.state=new Map,this.listeners=new Map,this.initialized=new Map,this.state.set("hyperliquid",{...Mb}),this.state.set("polymarket",{...Mb}),this.listeners.set("hyperliquid",new Set),this.listeners.set("polymarket",new Set),this.initialized.set("hyperliquid",!1),this.initialized.set("polymarket",!1)}getStorageKey(e){return ke.getUserKey(`${GZe}_${e}`)}async loadState(e){var n;if(!this.initialized.get(e)){try{const r=this.getStorageKey(e),i=await ke.getItem(r);if(i){const s=JSON.parse(i);this.state.set(e,{...Mb,...s,isGenerating:!1}),console.log(`[CycleSummaryStore] Loaded ${e} state: ${((n=s.recentCycles)==null?void 0:n.length)||0} cycles`)}}catch(r){console.warn(`[CycleSummaryStore] Failed to load ${e} state:`,r)}this.initialized.set(e,!0)}}async saveState(e){try{const n=this.getStorageKey(e),r=this.state.get(e);if(r){const{isGenerating:i,...s}=r;await ke.setItem(n,JSON.stringify(s))}}catch(n){console.warn(`[CycleSummaryStore] Failed to save ${e} state:`,n)}}getSnapshot(e){return this.state.get(e)||{...Mb}}subscribe(e,n){const r=this.listeners.get(e);return r&&r.add(n),()=>{r==null||r.delete(n)}}notify(e){const n=this.listeners.get(e);n==null||n.forEach(r=>r())}recordCycle(e,n){const r=this.state.get(e);if(!r)return;const i=r.recentCycles.length+1,o=[{...n,cycleNumber:i},...r.recentCycles].slice(0,qZe);this.state.set(e,{...r,recentCycles:o}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Recorded ${e} cycle #${i}: ${n.decisions.length} decisions`)}setGenerating(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,isGenerating:n}),this.notify(e))}setSummary(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,aiSummary:n,lastSummaryTime:Date.now(),isGenerating:!1}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Updated ${e} AI summary (${n.length} chars)`))}clear(e){this.state.set(e,{...Mb}),this.notify(e),this.saveState(e)}getContextForAI(e){const n=this.state.get(e);return!n||!n.aiSummary?null:n.aiSummary}getCyclesForSummary(e){const n=this.state.get(e);return(n==null?void 0:n.recentCycles)||[]}}const sd=new KZe;let xX=class{constructor(e,n,r){this.next=r,r&&(r.prev=this),this.prev=n,n&&(n.next=this),this.data=e}};class Zfe{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new xX(e,this._tail),this._length===0&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new xX(e,void 0,this._head),this._length===0&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(e!==void 0)return this._next=e.next,this._current=e,e.data}}class ly extends Zfe{constructor(e,n,r,i){if(super(),this.size=e,this.maintainHigh=n,this.maintainLow=r,this.maintainSum=i,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||typeof e!="number")throw"Size required and should be a number.";this._push=this.push,this.push=function(s){this.add(s),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}let WZe={};function YZe(t){return WZe[t]}function JZe(t){let e=YZe("precision");return e?parseFloat(t.toPrecision(e)):t}class Vt{constructor(e){this.format=e.format||JZe}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class ql extends Vt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){var i=new Zfe,s=0,o=1,a=yield,l;for(i.push(0);;)o<r?(o++,i.push(a),s=s+a):(s=s-i.shift()+a,l=s/r,i.push(a)),a=yield l});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!==void 0&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}ql.calculate=XZe;function XZe(t){Vt.reverseInputs(t);var e=new ql(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class Ix extends Vt{constructor(e){super(e);var n=e.period,r=e.values,i=2/(n+1),s;this.result=[],s=new ql({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Ix.calculate=QZe;function QZe(t){Vt.reverseInputs(t);var e=new Ix(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class HN extends Vt{constructor(e){super(e);var n=e.period,r=e.values,i=1/n,s;this.result=[],s=new ql({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l!==void 0&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}HN.calculate=ZZe;function ZZe(t){Vt.reverseInputs(t);var e=new HN(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class w2 extends Vt{constructor(e){super(e);var n=e.SimpleMAOscillator?ql:Ix,r=e.SimpleMASignal?ql:Ix,i=new n({period:e.fastPeriod,values:[],format:l=>l}),s=new n({period:e.slowPeriod,values:[],format:l=>l}),o=new r({period:e.signalPeriod,values:[],format:l=>l}),a=this.format;this.result=[],this.generator=(function*(){for(var l=0,c,u,h,m,g,x;;){if(l<e.slowPeriod){c=yield,g=i.nextValue(c),x=s.nextValue(c),l++;continue}g&&x&&(u=g-x,h=o.nextValue(u)),m=u-h,c=yield{MACD:a(u),signal:h?a(h):void 0,histogram:isNaN(m)?void 0:a(m)},g=i.nextValue(c),x=s.nextValue(c)}})(),this.generator.next(),e.values.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){var n=this.generator.next(e).value;return n}}w2.calculate=eet;function eet(t){Vt.reverseInputs(t);var e=new w2(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class RB extends Vt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,u,h=o;for(o=yield;;)u=o-h,u=u>0?u:0,u>0&&(l=l+u),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+u)/s,h=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}RB.calculate=tet;function tet(t){Vt.reverseInputs(t);var e=new RB(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class OB extends Vt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,u,h=o;for(o=yield;;)u=h-o,u=u>0?u:0,u>0&&(l=l+u),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+u)/s,h=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}OB.calculate=net;function net(t){Vt.reverseInputs(t);var e=new OB(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class E2 extends Vt{constructor(e){super(e);var n=e.period,r=e.values,i=new RB({period:n,values:[]}),s=new OB({period:n,values:[]});this.generator=(function*(o){for(var a=yield,l,c,u,h;;)l=i.nextValue(a),c=s.nextValue(a),l!==void 0&&c!==void 0&&(c===0?h=100:l===0?h=0:(u=l/c,u=isNaN(u)?0:u,h=parseFloat((100-100/(1+u)).toFixed(2)))),a=yield h})(),this.generator.next(),this.result=[],r.forEach(o=>{var a=this.generator.next(o);a.value!==void 0&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}E2.calculate=ret;function ret(t){Vt.reverseInputs(t);var e=new E2(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class MB extends Vt{constructor(e){super(e);var n=e.period,r=e.values,i=new ql({period:n,values:[],format:s=>s});this.result=[],this.generator=(function*(){var s,o,a=new ly(n);s=yield;for(var l;;){if(a.push(s),o=i.nextValue(s),o){let c=0;for(let u of a.iterator())c=c+Math.pow(u-o,2);l=Math.sqrt(c/n)}s=yield l}})(),this.generator.next(),r.forEach(s=>{var o=this.generator.next(s);o.value!=null&&this.result.push(this.format(o.value))})}nextValue(e){var n=this.generator.next(e);if(n.value!=null)return this.format(n.value)}}MB.calculate=iet;function iet(t){Vt.reverseInputs(t);var e=new MB(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class S2 extends Vt{constructor(e){super(e);var n=e.period,r=e.values,i=e.stdDev,s=this.format,o,a;this.result=[],o=new ql({period:n,values:[],format:l=>l}),a=new MB({period:n,values:[],format:l=>l}),this.generator=(function*(){var l,c,u,h;for(c=yield;;){if(u=o.nextValue(c),h=a.nextValue(c),u){let m=s(u),g=s(u+h*i),x=s(u-h*i),v=s((c-x)/(g-x));l={middle:m,upper:g,lower:x,pb:v}}c=yield l}})(),this.generator.next(),r.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}S2.calculate=set;function set(t){Vt.reverseInputs(t);var e=new S2(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class pw extends Vt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){for(var i=0,s=1,o=yield,a=0;;)s<r?(s++,i=i+o,a=void 0):s==r?(s++,i=i+o,a=i):a=a-a/r+o,o=yield a});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!=null&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}pw.calculate=oet;function oet(t){Vt.reverseInputs(t);var e=new pw(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class LB extends Vt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(c>l&&c>0?c:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Vt.reverseInputs(e);var n=new LB(e).result;return e.reversedInput&&n.reverse(),Vt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class DB extends Vt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(l>c&&l>0?l:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Vt.reverseInputs(e);var n=new DB(e).result;return e.reversedInput&&n.reverse(),Vt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class VN extends Vt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var o=yield,a,l;;)a===void 0&&(a=o.close,o=yield l),l=Math.max(o.high-o.low,isNaN(Math.abs(o.high-a))?0:Math.abs(o.high-a),isNaN(Math.abs(o.low-a))?0:Math.abs(o.low-a)),a=o.close,l!=null&&(l=s(l)),o=yield l})(),this.generator.next(),n.forEach((o,a)=>{var l=this.generator.next({high:r[a],low:n[a],close:i[a]});l.value!=null&&this.result.push(l.value)})}nextValue(e){return this.generator.next(e).value}}VN.calculate=aet;function aet(t){Vt.reverseInputs(t);var e=new VN(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class A2 extends Vt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format,a=new DB({high:[],low:[]}),l=new LB({high:[],low:[]}),c=new pw({period:s,values:[],format:x=>x}),u=new pw({period:s,values:[],format:x=>x}),h=new pw({period:s,values:[],format:x=>x}),m=new HN({period:s,values:[],format:x=>x}),g=new VN({low:[],high:[],close:[]});if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){for(var x=yield,v,b,w,k;;){let C=g.nextValue(x),R=a.nextValue(x),B=l.nextValue(x);if(C===void 0){x=yield;continue}let O=h.nextValue(C),F=c.nextValue(R),H=u.nextValue(B);if(O!=null&&F!=null&&H!=null){v=F*100/O,b=H*100/O;let j=Math.abs(v-b),$=v+b;w=j/$*100,k=m.nextValue(w)}x=yield{adx:k,pdi:v,mdi:b}}})(),this.generator.next(),n.forEach((x,v)=>{var b=this.generator.next({high:r[v],low:n[v],close:i[v]});b.value!=null&&b.value.adx!=null&&this.result.push({adx:o(b.value.adx),pdi:o(b.value.pdi),mdi:o(b.value.mdi)})})}nextValue(e){let n=this.generator.next(e).value;if(n!=null&&n.adx!=null)return{adx:this.format(n.adx),pdi:this.format(n.pdi),mdi:this.format(n.mdi)}}}A2.calculate=cet;function cet(t){Vt.reverseInputs(t);var e=new A2(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class T2 extends Vt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";var a=new VN({low:[],high:[],close:[]}),l=new HN({period:s,values:[],format:c=>c});this.result=[],this.generator=(function*(){for(var c=yield,u,h;;)h=a.nextValue({low:c.low,high:c.high,close:c.close}),h===void 0?u=void 0:u=l.nextValue(h),c=yield u})(),this.generator.next(),n.forEach((c,u)=>{var h=this.generator.next({high:r[u],low:n[u],close:i[u]});h.value!==void 0&&this.result.push(o(h.value))})}nextValue(e){return this.generator.next(e).value}}T2.calculate=uet;function uet(t){Vt.reverseInputs(t);var e=new T2(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class k2 extends Vt{constructor(e){super(e);let n=e.low,r=e.high,i=e.close,s=e.period,o=e.signalPeriod,a=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){let l=1,c=new ly(s,!0,!1),u=new ly(s,!1,!0),h=new ql({period:o,values:[],format:v=>v}),m,g;for(var x=yield;;){if(c.push(x.high),u.push(x.low),l<s){l++,x=yield;continue}let v=u.periodLow;m=(x.close-v)/(c.periodHigh-v)*100,m=isNaN(m)?0:m,g=h.nextValue(m),x=yield{k:a(m),d:g!==void 0?a(g):void 0}}})(),this.generator.next(),n.forEach((l,c)=>{var u=this.generator.next({high:r[c],low:n[c],close:i[c]});u.value!==void 0&&this.result.push(u.value)})}nextValue(e){let n=this.generator.next(e);if(n.value!==void 0)return n.value}}k2.calculate=det;function det(t){Vt.reverseInputs(t);var e=new k2(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class C2 extends Vt{constructor(e){super(e);var n=e.close,r=e.volume;this.result=[],this.generator=(function*(){var i=0,s,o;for(s=yield,s.close&&typeof s.close=="number"&&(o=s.close,s=yield);;)o<s.close?i=i+s.volume:s.close<o&&(i=i-s.volume),o=s.close,s=yield i})(),this.generator.next(),n.forEach((i,s)=>{let o={close:n[s],volume:r[s]},a=this.generator.next(o);a.value!=null&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}C2.calculate=fet;function fet(t){Vt.reverseInputs(t);var e=new C2(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class N2 extends Vt{constructor(e){super(e),this.result=[];var n={conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},r=Object.assign({},n,e),i=new ly(r.conversionPeriod*2,!0,!0,!1),s=new ly(r.basePeriod*2,!0,!0,!1),o=new ly(r.spanPeriod*2,!0,!0,!1);this.generator=(function*(){let a,l,c=Math.max(r.conversionPeriod,r.basePeriod,r.spanPeriod,r.displacement),u=1;for(l=yield;;){if(i.push(l.high),i.push(l.low),s.push(l.high),s.push(l.low),o.push(l.high),o.push(l.low),u<c)u++;else{let h=(i.periodHigh+i.periodLow)/2,m=(s.periodHigh+s.periodLow)/2,g=(h+m)/2,x=(o.periodHigh+o.periodLow)/2;a={conversion:h,base:m,spanA:g,spanB:x}}l=yield a}})(),this.generator.next(),e.low.forEach((a,l)=>{var c=this.generator.next({high:e.high[l],low:e.low[l]});c.value&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}N2.calculate=het;function het(t){Vt.reverseInputs(t);var e=new N2(t).result;return t.reversedInput&&e.reverse(),Vt.reverseInputs(t),e}class pet{normalizeInterval(e){const n=e.toLowerCase();return{1:"1m",5:"5m",15:"15m",60:"1h",240:"4h",d:"1d","1d":"1d",w:"1d","1w":"1d","7d":"1d"}[n]||"1h"}async getMarketPrice(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,"");return{price:await zt.getCurrentPrice(n),exchange:"Hyperliquid",lastUpdate:new Date().toISOString()}}catch(n){throw console.error(`Error fetching market price for ${e}:`,n),new Error(`Failed to get market price: ${n.message}`)}}async getOHLCV(e,n="60"){try{const r=e.replace(/USDT$/i,"").replace(/USD$/i,""),i=this.normalizeInterval(n),s=await zt.getCandles(r,i,1);if(!s||s.length===0)throw new Error("No candle data available");const o=s[s.length-1];return{open:o.open,high:o.high,low:o.low,close:o.close,volume:o.volume||0,timestamp:new Date(o.time).toISOString()}}catch(r){throw console.error(`Error fetching OHLCV for ${e}:`,r),new Error(`Failed to get OHLCV data: ${r.message}`)}}async getHistory(e,n="1D",r=100){try{const i=e.replace(/USDT$/i,"").replace(/USD$/i,""),s=this.normalizeInterval(n);return(await zt.getCandles(i,s,r)).map(a=>({time:Math.floor(a.time/1e3),open:a.open,high:a.high,low:a.low,close:a.close,volume:a.volume}))}catch(i){return console.error(`Error fetching history for ${e}:`,i),[]}}async getIndicator(e,n,r="60",i){try{const s=e.replace(/USDT$/i,"").replace(/USD$/i,""),o=this.normalizeInterval(r),a=await zt.getCandles(s,o,200);if(!a||a.length===0)throw new Error("No data available for indicator calculation");const l=a.map(v=>v.close),c=a.map(v=>v.high),u=a.map(v=>v.low),h=a.map(v=>v.volume||0);let m=0,g=[];switch(n.toLowerCase()){case"rsi":const v=(i==null?void 0:i.period)||14,b={values:l,period:v},w=E2.calculate(b);m=w[w.length-1],g=w.slice(-100);break;case"macd":const k={values:l,fastPeriod:(i==null?void 0:i.fast)||12,slowPeriod:(i==null?void 0:i.slow)||26,signalPeriod:(i==null?void 0:i.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1},C=w2.calculate(k),R=C[C.length-1];m={macd:(R==null?void 0:R.MACD)||0,signal:(R==null?void 0:R.signal)||0,histogram:(R==null?void 0:R.histogram)||0},g=C.slice(-100);break;case"ema":const O={period:(i==null?void 0:i.period)||20,values:l},F=Ix.calculate(O);m=F[F.length-1],g=F.slice(-100);break;case"sma":const j={period:(i==null?void 0:i.period)||20,values:l},$=ql.calculate(j);m=$[$.length-1],g=$.slice(-100);break;case"stoch":const W={high:c,low:u,close:l,period:(i==null?void 0:i.period)||14,signalPeriod:(i==null?void 0:i.signalPeriod)||3},V=k2.calculate(W),U=V[V.length-1];m={k:(U==null?void 0:U.k)||0,d:(U==null?void 0:U.d)||0},g=V.slice(-100);break;case"bollinger":const T=(i==null?void 0:i.period)||20,_=(i==null?void 0:i.stdDev)||2,L={period:T,values:l,stdDev:_},z=S2.calculate(L),G=z[z.length-1],te=l[l.length-1],K=G?(te-G.lower)/(G.upper-G.lower):.5;m={upper:(G==null?void 0:G.upper)||0,middle:(G==null?void 0:G.middle)||0,lower:(G==null?void 0:G.lower)||0,pb:K},g=z.slice(-100);break;case"atr":const q=(i==null?void 0:i.period)||14,M={high:c,low:u,close:l,period:q},P=T2.calculate(M);m=P[P.length-1]||0,g=P.slice(-100);break;case"adx":const Y=(i==null?void 0:i.period)||14,X={high:c,low:u,close:l,period:Y},re=A2.calculate(X),ae=re[re.length-1];m={adx:(ae==null?void 0:ae.adx)||0,pdi:(ae==null?void 0:ae.pdi)||0,mdi:(ae==null?void 0:ae.mdi)||0},g=re.slice(-100);break;case"obv":const Te={close:l,volume:h},ue=C2.calculate(Te);m=ue[ue.length-1]||0,g=ue.slice(-100);break;case"vwap":let pe=0,be=0;const se=[];for(let mt=0;mt<a.length;mt++){const dt=(c[mt]+u[mt]+l[mt])/3;pe+=dt*h[mt],be+=h[mt],se.push(be>0?pe/be:dt)}m=se[se.length-1]||l[l.length-1],g=se.slice(-100);break;case"ichimoku":const ve=(i==null?void 0:i.conversion)||9,Re=(i==null?void 0:i.base)||26,De=(i==null?void 0:i.spanB)||52,Qe=(i==null?void 0:i.displacement)||26,it={high:c,low:u,conversionPeriod:ve,basePeriod:Re,spanPeriod:De,displacement:Qe},et=N2.calculate(it),tt=et[et.length-1];m={tenkanSen:(tt==null?void 0:tt.conversion)||0,kijunSen:(tt==null?void 0:tt.base)||0,senkouSpanA:(tt==null?void 0:tt.spanA)||0,senkouSpanB:(tt==null?void 0:tt.spanB)||0,chikouSpan:l[l.length-Qe]||l[l.length-1]},g=et.slice(-100);break;case"price":m=l[l.length-1],g=l.slice(-100);break;default:throw new Error(`Unsupported indicator: ${n}`)}return{symbol:e,indicator:n.toUpperCase(),value:m,history:g,timestamp:Date.now()}}catch(s){throw console.error(`Error calculating indicator ${n} for ${e}:`,s),new Error(`Failed to calculate indicator: ${s.message}`)}}async getTradingViewSummary(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,""),r=await zt.getCandles(n,"1h",12);if(!r||r.length<2)return{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"};let i=0,s=0;for(let l=1;l<r.length;l++)r[l].close>r[l-1].close?i++:s++;const o=Math.max(0,r.length-1-i-s);let a;return i>8?a="STRONG_BUY":i>6?a="BUY":s>8?a="STRONG_SELL":s>6?a="SELL":a="NEUTRAL",{buy:i,sell:s,neutral:o,recommendation:a}}catch(n){return console.error(`Error fetching summary for ${e}:`,n),{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"}}}detectDivergences(e,n,r){const i=[];if(e.length<20||n.length<20)return i;const o=(m,g=5)=>{const x=[],v=[];for(let b=g;b<m.length-g;b++){let w=!0,k=!0;for(let C=b-g;C<=b+g;C++)C!==b&&(m[C]<=m[b]&&(w=!1),m[C]>=m[b]&&(k=!1));w&&x.push(b),k&&v.push(b)}return{minima:x,maxima:v}},a=e.slice(-20),l=n.slice(-20),c=r.slice(-20),u=o(a),h=o(l);if(u.minima.length>=2&&h.minima.length>=2){const m=u.minima[u.minima.length-1],g=u.minima[u.minima.length-2],x=h.minima[h.minima.length-1],v=h.minima[h.minima.length-2],b=a[m]<a[g],w=l[x]>l[v];if(b&&w){const R=l[x]<30?"STRONG":l[x]<40?"MODERATE":"WEAK";i.push({type:"BULLISH",indicator:"RSI",description:`Price made lower low (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made higher low (${l[v].toFixed(1)}  ${l[x].toFixed(1)}). Potential reversal UP.`,strength:R,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[x]}})}const k=a[m]>a[g],C=l[x]<l[v];k&&C&&i.push({type:"HIDDEN_BULLISH",indicator:"RSI",description:"Price made higher low but RSI made lower low. Bullish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[x]}})}if(u.maxima.length>=2&&h.maxima.length>=2){const m=u.maxima[u.maxima.length-1],g=u.maxima[u.maxima.length-2],x=h.maxima[h.maxima.length-1],v=h.maxima[h.maxima.length-2],b=a[m]>a[g],w=l[x]<l[v];if(b&&w){const R=l[x]>70?"STRONG":l[x]>60?"MODERATE":"WEAK";i.push({type:"BEARISH",indicator:"RSI",description:`Price made higher high (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made lower high (${l[v].toFixed(1)}  ${l[x].toFixed(1)}). Potential reversal DOWN.`,strength:R,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[x]}})}const k=a[m]<a[g],C=l[x]>l[v];k&&C&&i.push({type:"HIDDEN_BEARISH",indicator:"RSI",description:"Price made lower high but RSI made higher high. Bearish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[v],end:l[x]}})}if(c.length>=10){const m=c[c.length-1]-c[c.length-5],g=a[a.length-1]-a[a.length-5];m<-.5&&g>0&&i.push({type:"BEARISH",indicator:"MACD",description:"MACD histogram declining while price rising. Momentum weakening.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}}),m>.5&&g<0&&i.push({type:"BULLISH",indicator:"MACD",description:"MACD histogram rising while price falling. Momentum building.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}})}return i}calculateIndicatorFromCandles(e,n,r){if(!e||e.length===0)return{value:0,history:[]};const i=e.map(h=>h.close),s=e.map(h=>h.high),o=e.map(h=>h.low),a=e.map(h=>h.volume||0);let l=0,c=[];switch(n.toLowerCase()){case"rsi":const h=(r==null?void 0:r.period)||14,m=E2.calculate({values:i,period:h});l=m[m.length-1]||0,c=m.slice(-100);break;case"macd":const g=w2.calculate({values:i,fastPeriod:(r==null?void 0:r.fast)||12,slowPeriod:(r==null?void 0:r.slow)||26,signalPeriod:(r==null?void 0:r.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1}),x=g[g.length-1];l={macd:(x==null?void 0:x.MACD)||0,signal:(x==null?void 0:x.signal)||0,histogram:(x==null?void 0:x.histogram)||0},c=g.slice(-100).map(z=>({macd:(z==null?void 0:z.MACD)||0,signal:(z==null?void 0:z.signal)||0,histogram:(z==null?void 0:z.histogram)||0}));break;case"ema":const v=Ix.calculate({period:(r==null?void 0:r.period)||20,values:i});l=v[v.length-1]||0,c=v.slice(-100);break;case"sma":const b=ql.calculate({period:(r==null?void 0:r.period)||20,values:i});l=b[b.length-1]||0,c=b.slice(-100);break;case"stoch":const w=k2.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14,signalPeriod:(r==null?void 0:r.signalPeriod)||3}),k=w[w.length-1];l={k:(k==null?void 0:k.k)||0,d:(k==null?void 0:k.d)||0},c=w.slice(-100);break;case"bollinger":const C=S2.calculate({period:(r==null?void 0:r.period)||20,values:i,stdDev:(r==null?void 0:r.stdDev)||2}),R=C[C.length-1],B=i[i.length-1],O=R?(B-R.lower)/(R.upper-R.lower):.5;l={upper:(R==null?void 0:R.upper)||0,middle:(R==null?void 0:R.middle)||0,lower:(R==null?void 0:R.lower)||0,pb:O},c=C.slice(-100);break;case"atr":const F=T2.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14});l=F[F.length-1]||0,c=F.slice(-100);break;case"adx":const H=A2.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14}),j=H[H.length-1];l={adx:(j==null?void 0:j.adx)||0,pdi:(j==null?void 0:j.pdi)||0,mdi:(j==null?void 0:j.mdi)||0},c=H.slice(-100);break;case"obv":const $=C2.calculate({close:i,volume:a});l=$[$.length-1]||0,c=$.slice(-100);break;case"vwap":let W=0,V=0;const U=[];for(let z=0;z<e.length;z++){const G=(s[z]+o[z]+i[z])/3;W+=G*a[z],V+=a[z],U.push(V>0?W/V:G)}l=U[U.length-1]||i[i.length-1],c=U.slice(-100);break;case"ichimoku":const T=N2.calculate({high:s,low:o,conversionPeriod:(r==null?void 0:r.conversion)||9,basePeriod:(r==null?void 0:r.base)||26,spanPeriod:(r==null?void 0:r.spanB)||52,displacement:(r==null?void 0:r.displacement)||26}),_=T[T.length-1],L=(r==null?void 0:r.displacement)||26;l={tenkanSen:(_==null?void 0:_.conversion)||0,kijunSen:(_==null?void 0:_.base)||0,senkouSpanA:(_==null?void 0:_.spanA)||0,senkouSpanB:(_==null?void 0:_.spanB)||0,chikouSpan:i[i.length-L]||i[i.length-1]},c=T.slice(-100);break;default:console.warn(`[MarketDataMCP] Unknown indicator: ${n}`)}return{value:l,history:c}}}const bo=new pet,Vn={async getMarketData(t){return await zt.getMarketData(t)},async getPositions(t){return(await zt.getUserState(t)).assetPositions},async getOpenOrders(t){return await zt.getOpenOrders(t)},async getUserFills(t){return await zt.getUserFills(t)},async createOrder(t,e,n,r,i,s){return await zt.placeOrder(t,e,n,r,i,s)},async cancelOrder(t,e,n){return await zt.cancelOrder(t,e,n)},async getUserState(t){return await zt.getUserState(t)},async updateLeverage(t,e,n,r){return await zt.updateLeverage(t,e,n,r)},async updateIsolatedMargin(t,e,n,r){return await zt.updateIsolatedMargin(t,e,n,r)},async closePosition(t,e,n,r="market",i){return await zt.closePosition(t,e,n,r,i)},async withdrawUSDC(t,e,n){return await zt.withdrawUSDC(t,e,n)},async getAvailableAssets(){return await zt.getAllAvailableAssets()},async getAssetDecimals(t){return await zt.getAssetDecimals(t)},async validateAsset(t){return await zt.isValidAsset(t)},async getAssetContexts(){return await zt.getAssetContexts()},async getFundingRate(t){return await zt.getFundingRate(t)},async getUserFees(t){return await zt.getUserFees(t)},async getUserFundingHistory(t,e,n){return await zt.getUserFundingHistory(t,e,n)},calculateBreakevenPrice(t,e,n,r,i,s,o){return zt.calculateBreakevenPrice(t,e,n,r,i,s,o)}};function ehe(t){for(const[e,n]of Object.entries(aC))if(n.indicators.includes(t))return e;return null}function the(t,e){return aC[e].indicators.filter(r=>{var i;return(i=t[r])==null?void 0:i.enabled}).length}function nhe(t,e){return the(t,e)>=aC[e].maxIndicators}function rhe(t){return Object.values(t).filter(e=>e.enabled).length}function ihe(t){return rhe(t)>=nte}function vX(t,e){var r;if((r=t[e])!=null&&r.enabled)return!0;if(ihe(t))return!1;const n=ehe(e);return!(n&&nhe(t,n))}function met(t,e){const r={...e||Wg};for(const i of Object.keys(r))r[i]={...r[i],enabled:!1};if(t!=="custom"){const i=ed[t];for(const s of i.indicators)r[s]&&(r[s]={...r[s],enabled:!0})}return r}function get(t){const e=Object.keys(t).filter(n=>t[n].enabled).sort();for(const[n,r]of Object.entries(ed)){if(n==="custom")continue;const i=[...r.indicators].sort();if(JSON.stringify(e)===JSON.stringify(i))return n}return"custom"}class yet{constructor(){this.userFeesCache=null,this.userFeesCacheTime=0,this.FEES_CACHE_TTL=300*1e3}async getUserFeesFromCache(e){const n=Date.now();if(this.userFeesCache&&n-this.userFeesCacheTime<this.FEES_CACHE_TTL)return this.userFeesCache;if(e)try{const r=await Vn.getUserFees(e);return this.userFeesCache={makerFee:r.makerFee,takerFee:r.takerFee},this.userFeesCacheTime=n,this.userFeesCache}catch{console.warn("[DealerMCP] Failed to fetch user fees, using defaults")}return{makerFee:2e-4,takerFee:5e-4}}async getMarketContext(e,n,r="60",i,s=100){var a,l;const o=`${e}USDT`;try{const c=await bo.getMarketPrice(o),h=await bo.getHistory(o,r,200),m=h.slice(-s);console.log(`[DealerMCP] Fetched ${h.length} candles, using last ${m.length} for history (config: ${s})`);const g={},x=[],v=h.map(V=>({open:V.open,high:V.high,low:V.low,close:V.close,volume:V.volume||0})),b=i?Object.entries(i).filter(([V,U])=>U.enabled).map(([V,U])=>({name:V,params:U.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:V,params:U}of b)try{const T=bo.calculateIndicatorFromCandles(v,V,U),_=i==null?void 0:i[V],L=(_==null?void 0:_.weight)??1,z=ehe(V);g[V]={value:T.value,history:T.history,weight:L,category:z},x.push(V)}catch(T){console.warn(`[DealerMCP] Failed to calculate ${V} for ${e}:`,T)}const[w,k,C]=await Promise.all([Vn.getFundingRate(e).catch(()=>null),this.getUserFeesFromCache(n),zt.getOrderBookMetrics(e).catch(()=>null)]),R=(w==null?void 0:w.funding)||0,B=Math.abs(R)*3,O={fundingRate:R,dailyHoldingCost:B},F=((a=g.rsi)==null?void 0:a.history)||[],j=(((l=g.macd)==null?void 0:l.history)||[]).map(V=>(V==null?void 0:V.histogram)||0),$=m.map(V=>V.close),W=bo.detectDivergences($,F,j);return W.length>0&&console.log(`[DealerMCP] Divergences detected for ${e}:`,W.map(V=>`${V.type}(${V.indicator})`).join(", ")),console.log(`[DealerMCP] Context for ${e} (${r}m): Price=${c.price}, Indicators=[${x.join(",")}], Divergences=${W.length}, OrderBook=${C?"OK":"N/A"}`),{symbol:e,currentPrice:c.price,history:m,indicators:g,divergences:W,tradingCosts:O,orderBook:C||void 0,ts:Math.floor(Date.now()/1e3)}}catch(c){return console.error(`[DealerMCP] Failed to gather context for ${e}:`,c),{symbol:e,currentPrice:0,history:[],indicators:{},divergences:[],tradingCosts:{fundingRate:0,dailyHoldingCost:0},error:c.message||"Data unavailable",ts:Math.floor(Date.now()/1e3)}}}calculatePositionBreakevens(e,n,r){return e.map(i=>{var v,b,w,k,C,R,B;const s=((v=i.position)==null?void 0:v.coin)||i.coin,o=parseFloat(((b=i.position)==null?void 0:b.entryPx)||i.entryPx||"0"),a=((k=(w=i.position)==null?void 0:w.leverage)==null?void 0:k.value)||1,c=parseFloat(((C=i.position)==null?void 0:C.szi)||i.szi||"0")>0,u=r.get(s)||0,h=Vn.calculateBreakevenPrice(o,a,c,n.makerFee,n.takerFee,u,8),m=parseFloat(((R=i.position)==null?void 0:R.unrealizedPnl)||"0"),g=parseFloat(((B=i.position)==null?void 0:B.positionValue)||"0"),x=g>0?m/g*100:0;return{coin:s,entryPrice:o,breakevenPrice:h.breakevenPrice,minProfitPrice:h.minProfitPrice,currentPnlPercent:x,isAboveBreakeven:m>0}})}async getMacroSnapshot(e,n,r){const i=`${e}USDT`;try{const o=await bo.getHistory(i,n,50);if(o.length<20)return console.warn(`[DealerMCP] Insufficient candles for macro ${e}@${n}`),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)};const a=o.map(u=>({open:u.open,high:u.high,low:u.low,close:u.close,volume:u.volume||0})),l={},c=r?Object.entries(r).filter(([u,h])=>h.enabled).map(([u,h])=>({name:u,params:h.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:u,params:h}of c)try{const m=bo.calculateIndicatorFromCandles(a,u,h);l[u]={value:m.value}}catch(m){console.warn(`[DealerMCP] Failed to calc macro ${u} for ${e}:`,m)}return console.log(`[DealerMCP] Macro snapshot for ${e}@${n}: ${Object.keys(l).join(",")}`),{timeframe:n,indicators:l,ts:Math.floor(Date.now()/1e3)}}catch(s){return console.error(`[DealerMCP] Macro snapshot failed for ${e}:`,s),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)}}}}const i4=new yet;var xet={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let vet,bet;function wet(){return{geminiUrl:vet,vertexUrl:bet}}function Eet(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=wet();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dd{}function wt(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function N(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const u=l[c];N(u,e.slice(s+1),n[c])}else for(const c of l)N(c,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];N(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function S(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>S(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Aet(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}qL(t,i,s,0,o)}}function qL(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])qL(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,u]of Object.entries(l)){const h=[];for(const m of n.slice(r))m==="*"?h.push(c):h.push(m);N(o,h,u)}for(const c of a)delete o[c]}}else{const o=t;s in o&&qL(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jB(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tet(t){const e={},n=S(t,["operationName"]);n!=null&&N(e,["operationName"],n);const r=S(t,["resourceName"]);return r!=null&&N(e,["_url","resourceName"],r),e}function ket(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response","generateVideoResponse"]);return o!=null&&N(e,["response"],Net(o)),e}function Cet(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],Pet(o)),e}function Net(t){const e={},n=S(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>_et(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function Pet(t){const e={},n=S(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Iet(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function _et(t){const e={},n=S(t,["video"]);return n!=null&&N(e,["video"],jet(n)),e}function Iet(t){const e={},n=S(t,["_self"]);return n!=null&&N(e,["video"],Bet(n)),e}function Ret(t){const e={},n=S(t,["operationName"]);return n!=null&&N(e,["_url","operationName"],n),e}function Oet(t){const e={},n=S(t,["operationName"]);return n!=null&&N(e,["_url","operationName"],n),e}function Met(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],Let(o)),e}function Let(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&N(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&N(e,["documentName"],i),e}function she(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],Det(o)),e}function Det(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&N(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&N(e,["documentName"],i),e}function jet(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["uri"],n);const r=S(t,["encodedVideo"]);r!=null&&N(e,["videoBytes"],jB(r));const i=S(t,["encoding"]);return i!=null&&N(e,["mimeType"],i),e}function Bet(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["uri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&N(e,["videoBytes"],jB(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bX;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(bX||(bX={}));var wX;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(wX||(wX={}));var EX;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(EX||(EX={}));var xe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(xe||(xe={}));var SX;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(SX||(SX={}));var AX;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(AX||(AX={}));var TX;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(TX||(TX={}));var kX;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(kX||(kX={}));var CX;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(CX||(CX={}));var NX;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(NX||(NX={}));var PX;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(PX||(PX={}));var _X;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(_X||(_X={}));var IX;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(IX||(IX={}));var RX;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(RX||(RX={}));var OX;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(OX||(OX={}));var MX;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(MX||(MX={}));var LX;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(LX||(LX={}));var DX;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(DX||(DX={}));var jX;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jX||(jX={}));var P2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(P2||(P2={}));var BX;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(BX||(BX={}));var UX;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(UX||(UX={}));var FX;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(FX||(FX={}));var GL;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(GL||(GL={}));var $X;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})($X||($X={}));var zX;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(zX||(zX={}));var HX;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(HX||(HX={}));var VX;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(VX||(VX={}));var qX;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qX||(qX={}));var GX;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(GX||(GX={}));var KX;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(KX||(KX={}));var WX;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(WX||(WX={}));var YX;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(YX||(YX={}));var JX;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(JX||(JX={}));var XX;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(XX||(XX={}));var QX;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(QX||(QX={}));var ZX;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ZX||(ZX={}));var eQ;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(eQ||(eQ={}));var tQ;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(tQ||(tQ={}));var nQ;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(nQ||(nQ={}));var rQ;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(rQ||(rQ={}));var iQ;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(iQ||(iQ={}));var sQ;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(sQ||(sQ={}));var oQ;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(oQ||(oQ={}));var aQ;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(aQ||(aQ={}));var lQ;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(lQ||(lQ={}));var cQ;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(cQ||(cQ={}));var uQ;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(uQ||(uQ={}));var dQ;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(dQ||(dQ={}));var fQ;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(fQ||(fQ={}));var hQ;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(hQ||(hQ={}));var pQ;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(pQ||(pQ={}));var mQ;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(mQ||(mQ={}));var gQ;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(gQ||(gQ={}));var yQ;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(yQ||(yQ={}));var Ug;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ug||(Ug={}));class KL{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Lb{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",u=!1;const h=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,x]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(x!==null||x!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;u=!0,c+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?c:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const u=[];for(const h of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&u.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(u=>u.functionCall).map(u=>u.functionCall).filter(u=>u!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return(c=u==null?void 0:u[0])===null||c===void 0?void 0:c.output}}class xQ{}class vQ{}class Uet{}class Fet{}class $et{}class zet{}class bQ{}class wQ{}class EQ{}class Het{}class _2{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new _2;let i;const s=e;return n?i=Cet(s):i=ket(s),Object.assign(r,i),r}}class SQ{}class AQ{}class TQ{}class kQ{}class Vet{}class qet{}class Get{}class BB{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new BB,s=Met(e);return Object.assign(r,s),r}}class Ket{}class Wet{}class Yet{}class CQ{}class Jet{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Xet{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class UB{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new UB,s=she(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $n(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ohe(t,e){const n=$n(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ahe(t){return Array.isArray(t)?t.map(e=>I2(e)):[I2(t)]}function I2(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function lhe(t){const e=I2(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function che(t){const e=I2(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function NQ(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function uhe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>NQ(e)):[NQ(t)]}function WL(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function PQ(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function _Q(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ms(t){if(t==null)throw new Error("ContentUnion is required");return WL(t)?t:{role:"user",parts:uhe(t)}}function FB(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ms(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ms(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ms(n)):[Ms(e)]}function Ja(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(PQ(t)||_Q(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ms(t)]}const e=[],n=[],r=WL(t[0]);for(const i of t){const s=WL(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(PQ(i)||_Q(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:uhe(n)}),e}function Qet(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(xe).includes(n[0].toUpperCase())?n[0].toUpperCase():xe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(xe).includes(r.toUpperCase())?r.toUpperCase():xe.TYPE_UNSPECIFIED})}}function cy(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&Qet(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(xe).includes(a.toUpperCase())?a.toUpperCase():xe.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=cy(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(cy(c))}e[o]=l}else if(i.includes(o)){const l={};for(const[c,u]of Object.entries(a))l[c]=cy(u);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function $B(t){return cy(t)}function zB(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function HB(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function pv(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=cy(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=cy(e.response));return t}function mv(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Zet(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function jd(t,e){if(typeof e!="string")throw new Error("name must be a string");return Zet(t,e,"cachedContents")}function dhe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Nh(t){return jB(t)}function ett(t){return t!=null&&typeof t=="object"&&"name"in t}function ttt(t){return t!=null&&typeof t=="object"&&"video"in t}function ntt(t){return t!=null&&typeof t=="object"&&"uri"in t}function fhe(t){var e;let n;if(ett(t)&&(n=t.name),!(ntt(t)&&(n=t.uri,n===void 0))&&!(ttt(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function hhe(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function phe(t){for(const e of["models","tunedModels","publisherModels"])if(rtt(t,e))return t[e];return[]}function rtt(t,e){return t!==null&&typeof t=="object"&&e in t}function itt(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function stt(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=itt(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function mhe(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ott(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ghe(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function gv(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function yhe(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function att(t){const e={},n=S(t,["responsesFile"]);n!=null&&N(e,["fileName"],n);const r=S(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>$tt(o))),N(e,["inlinedResponses"],s)}const i=S(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["inlinedEmbedContentResponses"],s)}return e}function ltt(t){const e={},n=S(t,["predictionsFormat"]);n!=null&&N(e,["format"],n);const r=S(t,["gcsDestination","outputUriPrefix"]);r!=null&&N(e,["gcsUri"],r);const i=S(t,["bigqueryDestination","outputUri"]);return i!=null&&N(e,["bigqueryUri"],i),e}function ctt(t){const e={},n=S(t,["format"]);n!=null&&N(e,["predictionsFormat"],n);const r=S(t,["gcsUri"]);r!=null&&N(e,["gcsDestination","outputUriPrefix"],r);const i=S(t,["bigqueryUri"]);if(i!=null&&N(e,["bigqueryDestination","outputUri"],i),S(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(S(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function LT(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata","displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["metadata","state"]);i!=null&&N(e,["state"],yhe(i));const s=S(t,["metadata","createTime"]);s!=null&&N(e,["createTime"],s);const o=S(t,["metadata","endTime"]);o!=null&&N(e,["endTime"],o);const a=S(t,["metadata","updateTime"]);a!=null&&N(e,["updateTime"],a);const l=S(t,["metadata","model"]);l!=null&&N(e,["model"],l);const c=S(t,["metadata","output"]);return c!=null&&N(e,["dest"],att(ghe(c))),e}function YL(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["state"]);i!=null&&N(e,["state"],yhe(i));const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["createTime"]);o!=null&&N(e,["createTime"],o);const a=S(t,["startTime"]);a!=null&&N(e,["startTime"],a);const l=S(t,["endTime"]);l!=null&&N(e,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&N(e,["updateTime"],c);const u=S(t,["model"]);u!=null&&N(e,["model"],u);const h=S(t,["inputConfig"]);h!=null&&N(e,["src"],utt(h));const m=S(t,["outputConfig"]);m!=null&&N(e,["dest"],ltt(ghe(m)));const g=S(t,["completionStats"]);return g!=null&&N(e,["completionStats"],g),e}function utt(t){const e={},n=S(t,["instancesFormat"]);n!=null&&N(e,["format"],n);const r=S(t,["gcsSource","uris"]);r!=null&&N(e,["gcsUri"],r);const i=S(t,["bigquerySource","inputUri"]);return i!=null&&N(e,["bigqueryUri"],i),e}function dtt(t,e){const n={};if(S(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(S(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=S(e,["fileName"]);r!=null&&N(n,["fileName"],r);const i=S(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Ftt(t,o))),N(n,["requests","requests"],s)}return n}function ftt(t){const e={},n=S(t,["format"]);n!=null&&N(e,["instancesFormat"],n);const r=S(t,["gcsUri"]);r!=null&&N(e,["gcsSource","uris"],r);const i=S(t,["bigqueryUri"]);if(i!=null&&N(e,["bigquerySource","inputUri"],i),S(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(S(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function htt(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function ptt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],gv(t,r)),n}function mtt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],gv(t,r)),n}function gtt(t){const e={},n=S(t,["content"]);n!=null&&N(e,["content"],n);const r=S(t,["citationMetadata"]);r!=null&&N(e,["citationMetadata"],ytt(r));const i=S(t,["tokenCount"]);i!=null&&N(e,["tokenCount"],i);const s=S(t,["finishReason"]);s!=null&&N(e,["finishReason"],s);const o=S(t,["avgLogprobs"]);o!=null&&N(e,["avgLogprobs"],o);const a=S(t,["groundingMetadata"]);a!=null&&N(e,["groundingMetadata"],a);const l=S(t,["index"]);l!=null&&N(e,["index"],l);const c=S(t,["logprobsResult"]);c!=null&&N(e,["logprobsResult"],c);const u=S(t,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),N(e,["safetyRatings"],m)}const h=S(t,["urlContextMetadata"]);return h!=null&&N(e,["urlContextMetadata"],h),e}function ytt(t){const e={},n=S(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),N(e,["citations"],r)}return e}function xhe(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Wtt(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function xtt(t,e){const n={},r=S(t,["displayName"]);if(e!==void 0&&r!=null&&N(e,["batch","displayName"],r),S(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function vtt(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&N(e,["displayName"],r);const i=S(t,["dest"]);return e!==void 0&&i!=null&&N(e,["outputConfig"],ctt(ott(i))),n}function IQ(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["src"]);i!=null&&N(n,["batch","inputConfig"],dtt(t,mhe(t,i)));const s=S(e,["config"]);return s!=null&&xtt(s,n),n}function btt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["model"],$n(t,r));const i=S(e,["src"]);i!=null&&N(n,["inputConfig"],ftt(mhe(t,i)));const s=S(e,["config"]);return s!=null&&vtt(s,n),n}function wtt(t,e){const n={},r=S(t,["displayName"]);return e!==void 0&&r!=null&&N(e,["batch","displayName"],r),n}function Ett(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["src"]);i!=null&&N(n,["batch","inputConfig"],Ptt(t,i));const s=S(e,["config"]);return s!=null&&wtt(s,n),n}function Stt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],gv(t,r)),n}function Att(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],gv(t,r)),n}function Ttt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);return s!=null&&N(e,["error"],s),e}function ktt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);return s!=null&&N(e,["error"],s),e}function Ctt(t,e){const n={},r=S(e,["contents"]);if(r!=null){let s=FB(t,r);Array.isArray(s)&&(s=s.map(o=>o)),N(n,["requests[]","request","content"],s)}const i=S(e,["config"]);return i!=null&&(N(n,["_self"],Ntt(i,n)),Aet(n,{"requests[].*":"requests[].request.*"})),n}function Ntt(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&N(e,["requests[]","taskType"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&N(e,["requests[]","title"],i);const s=S(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&N(e,["requests[]","outputDimensionality"],s),S(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ptt(t,e){const n={},r=S(e,["fileName"]);r!=null&&N(n,["file_name"],r);const i=S(e,["inlinedRequests"]);return i!=null&&N(n,["requests"],Ctt(t,i)),n}function _tt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Itt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Rtt(t){const e={},n=S(t,["mode"]);n!=null&&N(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&N(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ott(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&N(n,["systemInstruction"],xhe(Ms(i)));const s=S(e,["temperature"]);s!=null&&N(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&N(r,["topP"],o);const a=S(e,["topK"]);a!=null&&N(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&N(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&N(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&N(r,["stopSequences"],u);const h=S(e,["responseLogprobs"]);h!=null&&N(r,["responseLogprobs"],h);const m=S(e,["logprobs"]);m!=null&&N(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&N(r,["presencePenalty"],g);const x=S(e,["frequencyPenalty"]);x!=null&&N(r,["frequencyPenalty"],x);const v=S(e,["seed"]);v!=null&&N(r,["seed"],v);const b=S(e,["responseMimeType"]);b!=null&&N(r,["responseMimeType"],b);const w=S(e,["responseSchema"]);w!=null&&N(r,["responseSchema"],$B(w));const k=S(e,["responseJsonSchema"]);if(k!=null&&N(r,["responseJsonSchema"],k),S(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=S(e,["safetySettings"]);if(n!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(T=>Ytt(T))),N(n,["safetySettings"],U)}const R=S(e,["tools"]);if(n!==void 0&&R!=null){let U=mv(R);Array.isArray(U)&&(U=U.map(T=>Xtt(pv(T)))),N(n,["tools"],U)}const B=S(e,["toolConfig"]);if(n!==void 0&&B!=null&&N(n,["toolConfig"],Jtt(B)),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=S(e,["cachedContent"]);n!==void 0&&O!=null&&N(n,["cachedContent"],jd(t,O));const F=S(e,["responseModalities"]);F!=null&&N(r,["responseModalities"],F);const H=S(e,["mediaResolution"]);H!=null&&N(r,["mediaResolution"],H);const j=S(e,["speechConfig"]);if(j!=null&&N(r,["speechConfig"],zB(j)),S(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=S(e,["thinkingConfig"]);$!=null&&N(r,["thinkingConfig"],$);const W=S(e,["imageConfig"]);W!=null&&N(r,["imageConfig"],Utt(W));const V=S(e,["enableEnhancedCivicAnswers"]);return V!=null&&N(r,["enableEnhancedCivicAnswers"],V),r}function Mtt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>gtt(c))),N(e,["candidates"],l)}const i=S(t,["modelVersion"]);i!=null&&N(e,["modelVersion"],i);const s=S(t,["promptFeedback"]);s!=null&&N(e,["promptFeedback"],s);const o=S(t,["responseId"]);o!=null&&N(e,["responseId"],o);const a=S(t,["usageMetadata"]);return a!=null&&N(e,["usageMetadata"],a),e}function Ltt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],gv(t,r)),n}function Dtt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],gv(t,r)),n}function jtt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function Btt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function Utt(t){const e={},n=S(t,["aspectRatio"]);n!=null&&N(e,["aspectRatio"],n);const r=S(t,["imageSize"]);if(r!=null&&N(e,["imageSize"],r),S(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Ftt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["request","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let a=Ja(i);Array.isArray(a)&&(a=a.map(l=>xhe(l))),N(n,["request","contents"],a)}const s=S(e,["metadata"]);s!=null&&N(n,["metadata"],s);const o=S(e,["config"]);return o!=null&&N(n,["request","generationConfig"],Ott(t,o,S(n,["request"],{}))),n}function $tt(t){const e={},n=S(t,["response"]);n!=null&&N(e,["response"],Mtt(n));const r=S(t,["error"]);return r!=null&&N(e,["error"],r),e}function ztt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);if(e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),S(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Htt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);e!==void 0&&i!=null&&N(e,["_query","pageToken"],i);const s=S(t,["filter"]);return e!==void 0&&s!=null&&N(e,["_query","filter"],s),n}function Vtt(t){const e={},n=S(t,["config"]);return n!=null&&ztt(n,e),e}function qtt(t){const e={},n=S(t,["config"]);return n!=null&&Htt(n,e),e}function Gtt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>LT(o))),N(e,["batchJobs"],s)}return e}function Ktt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>YL(o))),N(e,["batchJobs"],s)}return e}function Wtt(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],_tt(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],Itt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],htt(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&N(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function Ytt(t){const e={},n=S(t,["category"]);if(n!=null&&N(e,["category"],n),S(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(t,["threshold"]);return r!=null&&N(e,["threshold"],r),e}function Jtt(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&N(e,["functionCallingConfig"],Rtt(n));const r=S(t,["retrievalConfig"]);return r!=null&&N(e,["retrievalConfig"],r),e}function Xtt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],jtt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],Btt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Sd;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Sd||(Sd={}));class Km{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qtt extends Dd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Km(Sd.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=IQ(this.apiClient,e),r=n._url,i=wt("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const u of l){const h=Object.assign({},u);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=m,h.request=g}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=btt(this.apiClient,e);return a=wt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>YL(u))}else{const c=IQ(this.apiClient,e);return a=wt("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>LT(u))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ett(this.apiClient,e);return s=wt("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>LT(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Dtt(this.apiClient,e);return a=wt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>YL(u))}else{const c=Ltt(this.apiClient,e);return a=wt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>LT(u))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=mtt(this.apiClient,e);o=wt("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=ptt(this.apiClient,e);o=wt("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=qtt(e);return a=wt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Ktt(u),m=new CQ;return Object.assign(m,h),m})}else{const c=Vtt(e);return a=wt("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Gtt(u),m=new CQ;return Object.assign(m,h),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Att(this.apiClient,e);return a=wt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>ktt(u))}else{const c=Stt(this.apiClient,e);return a=wt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>Ttt(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ztt(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function RQ(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Ent(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function ent(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);e!==void 0&&i!=null&&N(e,["expireTime"],i);const s=S(t,["displayName"]);e!==void 0&&s!=null&&N(e,["displayName"],s);const o=S(t,["contents"]);if(e!==void 0&&o!=null){let u=Ja(o);Array.isArray(u)&&(u=u.map(h=>RQ(h))),N(e,["contents"],u)}const a=S(t,["systemInstruction"]);e!==void 0&&a!=null&&N(e,["systemInstruction"],RQ(Ms(a)));const l=S(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(h=>Ant(h))),N(e,["tools"],u)}const c=S(t,["toolConfig"]);if(e!==void 0&&c!=null&&N(e,["toolConfig"],Snt(c)),S(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function tnt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);e!==void 0&&i!=null&&N(e,["expireTime"],i);const s=S(t,["displayName"]);e!==void 0&&s!=null&&N(e,["displayName"],s);const o=S(t,["contents"]);if(e!==void 0&&o!=null){let h=Ja(o);Array.isArray(h)&&(h=h.map(m=>m)),N(e,["contents"],h)}const a=S(t,["systemInstruction"]);e!==void 0&&a!=null&&N(e,["systemInstruction"],Ms(a));const l=S(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>Tnt(m))),N(e,["tools"],h)}const c=S(t,["toolConfig"]);e!==void 0&&c!=null&&N(e,["toolConfig"],c);const u=S(t,["kmsKeyName"]);return e!==void 0&&u!=null&&N(e,["encryption_spec","kmsKeyName"],u),n}function nnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["model"],ohe(t,r));const i=S(e,["config"]);return i!=null&&ent(i,n),n}function rnt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["model"],ohe(t,r));const i=S(e,["config"]);return i!=null&&tnt(i,n),n}function int(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],jd(t,r)),n}function snt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],jd(t,r)),n}function ont(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function ant(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function lnt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function cnt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function unt(t){const e={},n=S(t,["mode"]);n!=null&&N(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&N(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dnt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&N(e,["description"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["parameters"]);i!=null&&N(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&N(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&N(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&N(e,["responseJsonSchema"],a),e}function fnt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],jd(t,r)),n}function hnt(t,e){const n={},r=S(e,["name"]);return r!=null&&N(n,["_url","name"],jd(t,r)),n}function pnt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function mnt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function gnt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function ynt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function xnt(t){const e={},n=S(t,["config"]);return n!=null&&gnt(n,e),e}function vnt(t){const e={},n=S(t,["config"]);return n!=null&&ynt(n,e),e}function bnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["cachedContents"],s)}return e}function wnt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["cachedContents"],s)}return e}function Ent(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],lnt(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],cnt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],Ztt(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&N(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function Snt(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&N(e,["functionCallingConfig"],unt(n));const r=S(t,["retrievalConfig"]);return r!=null&&N(e,["retrievalConfig"],r),e}function Ant(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],pnt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],mnt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}function Tnt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>dnt(m))),N(e,["functionDeclarations"],h)}const r=S(t,["retrieval"]);r!=null&&N(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&N(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&N(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&N(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&N(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&N(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&N(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&N(e,["urlContext"],u),e}function knt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);return e!==void 0&&i!=null&&N(e,["expireTime"],i),n}function Cnt(t,e){const n={},r=S(t,["ttl"]);e!==void 0&&r!=null&&N(e,["ttl"],r);const i=S(t,["expireTime"]);return e!==void 0&&i!=null&&N(e,["expireTime"],i),n}function Nnt(t,e){const n={},r=S(e,["name"]);r!=null&&N(n,["_url","name"],jd(t,r));const i=S(e,["config"]);return i!=null&&knt(i,n),n}function Pnt(t,e){const n={},r=S(e,["name"]);r!=null&&N(n,["_url","name"],jd(t,r));const i=S(e,["config"]);return i!=null&&Cnt(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _nt extends Dd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Km(Sd.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=rnt(this.apiClient,e);return a=wt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=nnt(this.apiClient,e);return a=wt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hnt(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=fnt(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=snt(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=ant(u),m=new TQ;return Object.assign(m,h),m})}else{const c=int(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=ont(u),m=new TQ;return Object.assign(m,h),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Pnt(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}else{const c=Nnt(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=vnt(e);return a=wt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=wnt(u),m=new kQ;return Object.assign(m,h),m})}else{const c=xnt(e);return a=wt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=bnt(u),m=new kQ;return Object.assign(m,h),m})}}}function R2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OQ(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tn(t){return this instanceof tn?(this.v=t,this):new tn(t)}function jl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(x){return Promise.resolve(x).then(g,h)}}function a(g,x){r[g]&&(i[g]=function(v){return new Promise(function(b,w){s.push([g,v,b,w])>1||l(g,v)})},x&&(i[g]=x(i[g])))}function l(g,x){try{c(r[g](x))}catch(v){m(s[0][3],v)}}function c(g){g.value instanceof tn?Promise.resolve(g.value.v).then(u,h):m(s[0][2],g)}function u(g){l("next",g)}function h(g){l("throw",g)}function m(g,x){g(x),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Bl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof OQ=="function"?OQ(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Int(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:vhe(n)}function vhe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Rnt(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function MQ(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!vhe(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class Ont{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Mnt(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Mnt{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),Rnt(s)}async sendMessage(e){var n;await this.sendPromise;const r=Ms(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,c=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,u=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];u!=null&&(m=(a=u.slice(h))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Ms(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?MQ(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return jl(this,arguments,function*(){var i,s,o,a,l,c;const u=[];try{for(var h=!0,m=Bl(e),g;g=yield tn(m.next()),i=g.done,!i;h=!0){a=g.value,h=!1;const x=a;if(Int(x)){const v=(c=(l=x.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;v!==void 0&&u.push(v)}yield yield tn(x)}}catch(x){s={error:x}}finally{try{!h&&!i&&(o=m.return)&&(yield tn(o.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,u)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...MQ(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qN extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,qN.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lnt(t){const e={},n=S(t,["file"]);return n!=null&&N(e,["file"],n),e}function Dnt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function jnt(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","file"],fhe(n)),e}function Bnt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function Unt(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","file"],fhe(n)),e}function Fnt(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function $nt(t){const e={},n=S(t,["config"]);return n!=null&&Fnt(n,e),e}function znt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hnt extends Dd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Km(Sd.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$nt(e);return s=wt("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=znt(l),u=new Ket;return Object.assign(u,c),u})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Lnt(e);return s=wt("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Dnt(l),u=new Wet;return Object.assign(u,c),u})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Unt(e);return s=wt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jnt(e);return s=wt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=Bnt(l),u=new Yet;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DT(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Vnt(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>ort(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function qnt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Gnt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Knt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&N(e,["description"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["parameters"]);i!=null&&N(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&N(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&N(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&N(e,["responseJsonSchema"],a),e}function Wnt(t){const e={},n=S(t,["modelSelectionConfig"]);n!=null&&N(e,["modelConfig"],n);const r=S(t,["responseJsonSchema"]);r!=null&&N(e,["responseJsonSchema"],r);const i=S(t,["audioTimestamp"]);i!=null&&N(e,["audioTimestamp"],i);const s=S(t,["candidateCount"]);s!=null&&N(e,["candidateCount"],s);const o=S(t,["enableAffectiveDialog"]);o!=null&&N(e,["enableAffectiveDialog"],o);const a=S(t,["frequencyPenalty"]);a!=null&&N(e,["frequencyPenalty"],a);const l=S(t,["logprobs"]);l!=null&&N(e,["logprobs"],l);const c=S(t,["maxOutputTokens"]);c!=null&&N(e,["maxOutputTokens"],c);const u=S(t,["mediaResolution"]);u!=null&&N(e,["mediaResolution"],u);const h=S(t,["presencePenalty"]);h!=null&&N(e,["presencePenalty"],h);const m=S(t,["responseLogprobs"]);m!=null&&N(e,["responseLogprobs"],m);const g=S(t,["responseMimeType"]);g!=null&&N(e,["responseMimeType"],g);const x=S(t,["responseModalities"]);x!=null&&N(e,["responseModalities"],x);const v=S(t,["responseSchema"]);v!=null&&N(e,["responseSchema"],v);const b=S(t,["routingConfig"]);b!=null&&N(e,["routingConfig"],b);const w=S(t,["seed"]);w!=null&&N(e,["seed"],w);const k=S(t,["speechConfig"]);k!=null&&N(e,["speechConfig"],k);const C=S(t,["stopSequences"]);C!=null&&N(e,["stopSequences"],C);const R=S(t,["temperature"]);R!=null&&N(e,["temperature"],R);const B=S(t,["thinkingConfig"]);B!=null&&N(e,["thinkingConfig"],B);const O=S(t,["topK"]);O!=null&&N(e,["topK"],O);const F=S(t,["topP"]);if(F!=null&&N(e,["topP"],F),S(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ynt(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function Jnt(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function Xnt(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&N(e,["setup","generationConfig"],r);const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&N(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&N(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&N(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&N(e,["setup","generationConfig","seed"],u);const h=S(t,["speechConfig"]);e!==void 0&&h!=null&&N(e,["setup","generationConfig","speechConfig"],HB(h));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&N(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=S(t,["systemInstruction"]);e!==void 0&&x!=null&&N(e,["setup","systemInstruction"],Vnt(Ms(x)));const v=S(t,["tools"]);if(e!==void 0&&v!=null){let O=mv(v);Array.isArray(O)&&(O=O.map(F=>lrt(pv(F)))),N(e,["setup","tools"],O)}const b=S(t,["sessionResumption"]);e!==void 0&&b!=null&&N(e,["setup","sessionResumption"],art(b));const w=S(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&N(e,["setup","inputAudioTranscription"],w);const k=S(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&N(e,["setup","outputAudioTranscription"],k);const C=S(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&N(e,["setup","realtimeInputConfig"],C);const R=S(t,["contextWindowCompression"]);e!==void 0&&R!=null&&N(e,["setup","contextWindowCompression"],R);const B=S(t,["proactivity"]);if(e!==void 0&&B!=null&&N(e,["setup","proactivity"],B),S(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Qnt(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&N(e,["setup","generationConfig"],Wnt(r));const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&N(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&N(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&N(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&N(e,["setup","generationConfig","seed"],u);const h=S(t,["speechConfig"]);e!==void 0&&h!=null&&N(e,["setup","generationConfig","speechConfig"],HB(h));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&N(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=S(t,["systemInstruction"]);e!==void 0&&x!=null&&N(e,["setup","systemInstruction"],Ms(x));const v=S(t,["tools"]);if(e!==void 0&&v!=null){let F=mv(v);Array.isArray(F)&&(F=F.map(H=>crt(pv(H)))),N(e,["setup","tools"],F)}const b=S(t,["sessionResumption"]);e!==void 0&&b!=null&&N(e,["setup","sessionResumption"],b);const w=S(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&N(e,["setup","inputAudioTranscription"],w);const k=S(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&N(e,["setup","outputAudioTranscription"],k);const C=S(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&N(e,["setup","realtimeInputConfig"],C);const R=S(t,["contextWindowCompression"]);e!==void 0&&R!=null&&N(e,["setup","contextWindowCompression"],R);const B=S(t,["proactivity"]);e!==void 0&&B!=null&&N(e,["setup","proactivity"],B);const O=S(t,["explicitVadSignal"]);return e!==void 0&&O!=null&&N(e,["setup","explicitVadSignal"],O),n}function Znt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["setup","model"],$n(t,r));const i=S(e,["config"]);return i!=null&&N(n,["config"],Xnt(i,n)),n}function ert(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["setup","model"],$n(t,r));const i=S(e,["config"]);return i!=null&&N(n,["config"],Qnt(i,n)),n}function trt(t){const e={},n=S(t,["musicGenerationConfig"]);return n!=null&&N(e,["musicGenerationConfig"],n),e}function nrt(t){const e={},n=S(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),N(e,["weightedPrompts"],r)}return e}function rrt(t){const e={},n=S(t,["media"]);if(n!=null){let c=ahe(n);Array.isArray(c)&&(c=c.map(u=>DT(u))),N(e,["mediaChunks"],c)}const r=S(t,["audio"]);r!=null&&N(e,["audio"],DT(che(r)));const i=S(t,["audioStreamEnd"]);i!=null&&N(e,["audioStreamEnd"],i);const s=S(t,["video"]);s!=null&&N(e,["video"],DT(lhe(s)));const o=S(t,["text"]);o!=null&&N(e,["text"],o);const a=S(t,["activityStart"]);a!=null&&N(e,["activityStart"],a);const l=S(t,["activityEnd"]);return l!=null&&N(e,["activityEnd"],l),e}function irt(t){const e={},n=S(t,["media"]);if(n!=null){let c=ahe(n);Array.isArray(c)&&(c=c.map(u=>u)),N(e,["mediaChunks"],c)}const r=S(t,["audio"]);r!=null&&N(e,["audio"],che(r));const i=S(t,["audioStreamEnd"]);i!=null&&N(e,["audioStreamEnd"],i);const s=S(t,["video"]);s!=null&&N(e,["video"],lhe(s));const o=S(t,["text"]);o!=null&&N(e,["text"],o);const a=S(t,["activityStart"]);a!=null&&N(e,["activityStart"],a);const l=S(t,["activityEnd"]);return l!=null&&N(e,["activityEnd"],l),e}function srt(t){const e={},n=S(t,["setupComplete"]);n!=null&&N(e,["setupComplete"],n);const r=S(t,["serverContent"]);r!=null&&N(e,["serverContent"],r);const i=S(t,["toolCall"]);i!=null&&N(e,["toolCall"],i);const s=S(t,["toolCallCancellation"]);s!=null&&N(e,["toolCallCancellation"],s);const o=S(t,["usageMetadata"]);o!=null&&N(e,["usageMetadata"],urt(o));const a=S(t,["goAway"]);a!=null&&N(e,["goAway"],a);const l=S(t,["sessionResumptionUpdate"]);l!=null&&N(e,["sessionResumptionUpdate"],l);const c=S(t,["voiceActivityDetectionSignal"]);return c!=null&&N(e,["voiceActivityDetectionSignal"],c),e}function ort(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],qnt(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],Gnt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],DT(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&N(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function art(t){const e={},n=S(t,["handle"]);if(n!=null&&N(e,["handle"],n),S(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lrt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],Ynt(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],Jnt(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}function crt(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>Knt(m))),N(e,["functionDeclarations"],h)}const r=S(t,["retrieval"]);r!=null&&N(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&N(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&N(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&N(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&N(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&N(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&N(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&N(e,["urlContext"],u),e}function urt(t){const e={},n=S(t,["promptTokenCount"]);n!=null&&N(e,["promptTokenCount"],n);const r=S(t,["cachedContentTokenCount"]);r!=null&&N(e,["cachedContentTokenCount"],r);const i=S(t,["candidatesTokenCount"]);i!=null&&N(e,["responseTokenCount"],i);const s=S(t,["toolUsePromptTokenCount"]);s!=null&&N(e,["toolUsePromptTokenCount"],s);const o=S(t,["thoughtsTokenCount"]);o!=null&&N(e,["thoughtsTokenCount"],o);const a=S(t,["totalTokenCount"]);a!=null&&N(e,["totalTokenCount"],a);const l=S(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(x=>x)),N(e,["promptTokensDetails"],g)}const c=S(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(x=>x)),N(e,["cacheTokensDetails"],g)}const u=S(t,["candidatesTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(x=>x)),N(e,["responseTokensDetails"],g)}const h=S(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(x=>x)),N(e,["toolUsePromptTokensDetails"],g)}const m=S(t,["trafficType"]);return m!=null&&N(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function drt(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function frt(t){const e={},n=S(t,["content"]);n!=null&&N(e,["content"],n);const r=S(t,["citationMetadata"]);r!=null&&N(e,["citationMetadata"],hrt(r));const i=S(t,["tokenCount"]);i!=null&&N(e,["tokenCount"],i);const s=S(t,["finishReason"]);s!=null&&N(e,["finishReason"],s);const o=S(t,["avgLogprobs"]);o!=null&&N(e,["avgLogprobs"],o);const a=S(t,["groundingMetadata"]);a!=null&&N(e,["groundingMetadata"],a);const l=S(t,["index"]);l!=null&&N(e,["index"],l);const c=S(t,["logprobsResult"]);c!=null&&N(e,["logprobsResult"],c);const u=S(t,["safetyRatings"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>g)),N(e,["safetyRatings"],m)}const h=S(t,["urlContextMetadata"]);return h!=null&&N(e,["urlContextMetadata"],h),e}function hrt(t){const e={},n=S(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),N(e,["citations"],r)}return e}function prt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let s=Ja(i);Array.isArray(s)&&(s=s.map(o=>o)),N(n,["contents"],s)}return n}function mrt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),N(e,["tokensInfo"],i)}return e}function grt(t){const e={},n=S(t,["values"]);n!=null&&N(e,["values"],n);const r=S(t,["statistics"]);return r!=null&&N(e,["statistics"],yrt(r)),e}function yrt(t){const e={},n=S(t,["truncated"]);n!=null&&N(e,["truncated"],n);const r=S(t,["token_count"]);return r!=null&&N(e,["tokenCount"],r),e}function GN(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>kit(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function xrt(t){const e={},n=S(t,["controlType"]);n!=null&&N(e,["controlType"],n);const r=S(t,["enableControlImageComputation"]);return r!=null&&N(e,["computeControl"],r),e}function vrt(t){const e={};if(S(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(S(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(S(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function brt(t,e){const n={},r=S(t,["systemInstruction"]);e!==void 0&&r!=null&&N(e,["systemInstruction"],Ms(r));const i=S(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>She(a))),N(e,["tools"],o)}const s=S(t,["generationConfig"]);return e!==void 0&&s!=null&&N(e,["generationConfig"],dit(s)),n}function wrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=Ja(i);Array.isArray(o)&&(o=o.map(a=>GN(a))),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&vrt(s),n}function Ert(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=Ja(i);Array.isArray(o)&&(o=o.map(a=>a)),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&brt(s,n),n}function Srt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["totalTokens"]);r!=null&&N(e,["totalTokens"],r);const i=S(t,["cachedContentTokenCount"]);return i!=null&&N(e,["cachedContentTokenCount"],i),e}function Art(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["totalTokens"]);return r!=null&&N(e,["totalTokens"],r),e}function Trt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],$n(t,r)),n}function krt(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],$n(t,r)),n}function Crt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function Nrt(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}function Prt(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&N(e,["parameters","storageUri"],r);const i=S(t,["negativePrompt"]);e!==void 0&&i!=null&&N(e,["parameters","negativePrompt"],i);const s=S(t,["numberOfImages"]);e!==void 0&&s!=null&&N(e,["parameters","sampleCount"],s);const o=S(t,["aspectRatio"]);e!==void 0&&o!=null&&N(e,["parameters","aspectRatio"],o);const a=S(t,["guidanceScale"]);e!==void 0&&a!=null&&N(e,["parameters","guidanceScale"],a);const l=S(t,["seed"]);e!==void 0&&l!=null&&N(e,["parameters","seed"],l);const c=S(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&N(e,["parameters","safetySetting"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&N(e,["parameters","personGeneration"],u);const h=S(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&N(e,["parameters","includeSafetyAttributes"],h);const m=S(t,["includeRaiReason"]);e!==void 0&&m!=null&&N(e,["parameters","includeRaiReason"],m);const g=S(t,["language"]);e!==void 0&&g!=null&&N(e,["parameters","language"],g);const x=S(t,["outputMimeType"]);e!==void 0&&x!=null&&N(e,["parameters","outputOptions","mimeType"],x);const v=S(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&N(e,["parameters","outputOptions","compressionQuality"],v);const b=S(t,["addWatermark"]);e!==void 0&&b!=null&&N(e,["parameters","addWatermark"],b);const w=S(t,["labels"]);e!==void 0&&w!=null&&N(e,["labels"],w);const k=S(t,["editMode"]);e!==void 0&&k!=null&&N(e,["parameters","editMode"],k);const C=S(t,["baseSteps"]);return e!==void 0&&C!=null&&N(e,["parameters","editConfig","baseSteps"],C),n}function _rt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Rit(l))),N(n,["instances[0]","referenceImages"],a)}const o=S(e,["config"]);return o!=null&&Prt(o,n),n}function Irt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>KN(s))),N(e,["generatedImages"],i)}return e}function Rrt(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&N(e,["requests[]","taskType"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&N(e,["requests[]","title"],i);const s=S(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&N(e,["requests[]","outputDimensionality"],s),S(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(S(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Ort(t,e){const n={},r=S(t,["taskType"]);e!==void 0&&r!=null&&N(e,["instances[]","task_type"],r);const i=S(t,["title"]);e!==void 0&&i!=null&&N(e,["instances[]","title"],i);const s=S(t,["outputDimensionality"]);e!==void 0&&s!=null&&N(e,["parameters","outputDimensionality"],s);const o=S(t,["mimeType"]);e!==void 0&&o!=null&&N(e,["instances[]","mimeType"],o);const a=S(t,["autoTruncate"]);return e!==void 0&&a!=null&&N(e,["parameters","autoTruncate"],a),n}function Mrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let a=FB(t,i);Array.isArray(a)&&(a=a.map(l=>l)),N(n,["requests[]","content"],a)}const s=S(e,["config"]);s!=null&&Rrt(s,n);const o=S(e,["model"]);return o!==void 0&&N(n,["requests[]","model"],$n(t,o)),n}function Lrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=FB(t,i);Array.isArray(o)&&(o=o.map(a=>a)),N(n,["instances[]","content"],o)}const s=S(e,["config"]);return s!=null&&Ort(s,n),n}function Drt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["embeddings"],s)}const i=S(t,["metadata"]);return i!=null&&N(e,["metadata"],i),e}function jrt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>grt(o))),N(e,["embeddings"],s)}const i=S(t,["metadata"]);return i!=null&&N(e,["metadata"],i),e}function Brt(t){const e={},n=S(t,["endpoint"]);n!=null&&N(e,["name"],n);const r=S(t,["deployedModelId"]);return r!=null&&N(e,["deployedModelId"],r),e}function Urt(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Frt(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $rt(t){const e={},n=S(t,["mode"]);n!=null&&N(e,["mode"],n);const r=S(t,["allowedFunctionNames"]);if(r!=null&&N(e,["allowedFunctionNames"],r),S(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zrt(t){const e={};if(S(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=S(t,["description"]);n!=null&&N(e,["description"],n);const r=S(t,["name"]);r!=null&&N(e,["name"],r);const i=S(t,["parameters"]);i!=null&&N(e,["parameters"],i);const s=S(t,["parametersJsonSchema"]);s!=null&&N(e,["parametersJsonSchema"],s);const o=S(t,["response"]);o!=null&&N(e,["response"],o);const a=S(t,["responseJsonSchema"]);return a!=null&&N(e,["responseJsonSchema"],a),e}function Hrt(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&N(n,["systemInstruction"],GN(Ms(i)));const s=S(e,["temperature"]);s!=null&&N(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&N(r,["topP"],o);const a=S(e,["topK"]);a!=null&&N(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&N(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&N(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&N(r,["stopSequences"],u);const h=S(e,["responseLogprobs"]);h!=null&&N(r,["responseLogprobs"],h);const m=S(e,["logprobs"]);m!=null&&N(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&N(r,["presencePenalty"],g);const x=S(e,["frequencyPenalty"]);x!=null&&N(r,["frequencyPenalty"],x);const v=S(e,["seed"]);v!=null&&N(r,["seed"],v);const b=S(e,["responseMimeType"]);b!=null&&N(r,["responseMimeType"],b);const w=S(e,["responseSchema"]);w!=null&&N(r,["responseSchema"],$B(w));const k=S(e,["responseJsonSchema"]);if(k!=null&&N(r,["responseJsonSchema"],k),S(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(S(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=S(e,["safetySettings"]);if(n!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(T=>Oit(T))),N(n,["safetySettings"],U)}const R=S(e,["tools"]);if(n!==void 0&&R!=null){let U=mv(R);Array.isArray(U)&&(U=U.map(T=>Fit(pv(T)))),N(n,["tools"],U)}const B=S(e,["toolConfig"]);if(n!==void 0&&B!=null&&N(n,["toolConfig"],Uit(B)),S(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=S(e,["cachedContent"]);n!==void 0&&O!=null&&N(n,["cachedContent"],jd(t,O));const F=S(e,["responseModalities"]);F!=null&&N(r,["responseModalities"],F);const H=S(e,["mediaResolution"]);H!=null&&N(r,["mediaResolution"],H);const j=S(e,["speechConfig"]);if(j!=null&&N(r,["speechConfig"],zB(j)),S(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=S(e,["thinkingConfig"]);$!=null&&N(r,["thinkingConfig"],$);const W=S(e,["imageConfig"]);W!=null&&N(r,["imageConfig"],git(W));const V=S(e,["enableEnhancedCivicAnswers"]);return V!=null&&N(r,["enableEnhancedCivicAnswers"],V),r}function Vrt(t,e,n){const r={},i=S(e,["systemInstruction"]);n!==void 0&&i!=null&&N(n,["systemInstruction"],Ms(i));const s=S(e,["temperature"]);s!=null&&N(r,["temperature"],s);const o=S(e,["topP"]);o!=null&&N(r,["topP"],o);const a=S(e,["topK"]);a!=null&&N(r,["topK"],a);const l=S(e,["candidateCount"]);l!=null&&N(r,["candidateCount"],l);const c=S(e,["maxOutputTokens"]);c!=null&&N(r,["maxOutputTokens"],c);const u=S(e,["stopSequences"]);u!=null&&N(r,["stopSequences"],u);const h=S(e,["responseLogprobs"]);h!=null&&N(r,["responseLogprobs"],h);const m=S(e,["logprobs"]);m!=null&&N(r,["logprobs"],m);const g=S(e,["presencePenalty"]);g!=null&&N(r,["presencePenalty"],g);const x=S(e,["frequencyPenalty"]);x!=null&&N(r,["frequencyPenalty"],x);const v=S(e,["seed"]);v!=null&&N(r,["seed"],v);const b=S(e,["responseMimeType"]);b!=null&&N(r,["responseMimeType"],b);const w=S(e,["responseSchema"]);w!=null&&N(r,["responseSchema"],$B(w));const k=S(e,["responseJsonSchema"]);k!=null&&N(r,["responseJsonSchema"],k);const C=S(e,["routingConfig"]);C!=null&&N(r,["routingConfig"],C);const R=S(e,["modelSelectionConfig"]);R!=null&&N(r,["modelConfig"],R);const B=S(e,["safetySettings"]);if(n!==void 0&&B!=null){let L=B;Array.isArray(L)&&(L=L.map(z=>z)),N(n,["safetySettings"],L)}const O=S(e,["tools"]);if(n!==void 0&&O!=null){let L=mv(O);Array.isArray(L)&&(L=L.map(z=>She(pv(z)))),N(n,["tools"],L)}const F=S(e,["toolConfig"]);n!==void 0&&F!=null&&N(n,["toolConfig"],F);const H=S(e,["labels"]);n!==void 0&&H!=null&&N(n,["labels"],H);const j=S(e,["cachedContent"]);n!==void 0&&j!=null&&N(n,["cachedContent"],jd(t,j));const $=S(e,["responseModalities"]);$!=null&&N(r,["responseModalities"],$);const W=S(e,["mediaResolution"]);W!=null&&N(r,["mediaResolution"],W);const V=S(e,["speechConfig"]);V!=null&&N(r,["speechConfig"],zB(V));const U=S(e,["audioTimestamp"]);U!=null&&N(r,["audioTimestamp"],U);const T=S(e,["thinkingConfig"]);T!=null&&N(r,["thinkingConfig"],T);const _=S(e,["imageConfig"]);if(_!=null&&N(r,["imageConfig"],yit(_)),S(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function LQ(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=Ja(i);Array.isArray(o)&&(o=o.map(a=>GN(a))),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&N(n,["generationConfig"],Hrt(t,s,n)),n}function DQ(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["contents"]);if(i!=null){let o=Ja(i);Array.isArray(o)&&(o=o.map(a=>a)),N(n,["contents"],o)}const s=S(e,["config"]);return s!=null&&N(n,["generationConfig"],Vrt(t,s,n)),n}function jQ(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>frt(c))),N(e,["candidates"],l)}const i=S(t,["modelVersion"]);i!=null&&N(e,["modelVersion"],i);const s=S(t,["promptFeedback"]);s!=null&&N(e,["promptFeedback"],s);const o=S(t,["responseId"]);o!=null&&N(e,["responseId"],o);const a=S(t,["usageMetadata"]);return a!=null&&N(e,["usageMetadata"],a),e}function BQ(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>u)),N(e,["candidates"],c)}const i=S(t,["createTime"]);i!=null&&N(e,["createTime"],i);const s=S(t,["modelVersion"]);s!=null&&N(e,["modelVersion"],s);const o=S(t,["promptFeedback"]);o!=null&&N(e,["promptFeedback"],o);const a=S(t,["responseId"]);a!=null&&N(e,["responseId"],a);const l=S(t,["usageMetadata"]);return l!=null&&N(e,["usageMetadata"],l),e}function qrt(t,e){const n={};if(S(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=S(t,["numberOfImages"]);e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r);const i=S(t,["aspectRatio"]);e!==void 0&&i!=null&&N(e,["parameters","aspectRatio"],i);const s=S(t,["guidanceScale"]);if(e!==void 0&&s!=null&&N(e,["parameters","guidanceScale"],s),S(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=S(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&N(e,["parameters","safetySetting"],o);const a=S(t,["personGeneration"]);e!==void 0&&a!=null&&N(e,["parameters","personGeneration"],a);const l=S(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&N(e,["parameters","includeSafetyAttributes"],l);const c=S(t,["includeRaiReason"]);e!==void 0&&c!=null&&N(e,["parameters","includeRaiReason"],c);const u=S(t,["language"]);e!==void 0&&u!=null&&N(e,["parameters","language"],u);const h=S(t,["outputMimeType"]);e!==void 0&&h!=null&&N(e,["parameters","outputOptions","mimeType"],h);const m=S(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&N(e,["parameters","outputOptions","compressionQuality"],m),S(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=S(t,["imageSize"]);if(e!==void 0&&g!=null&&N(e,["parameters","sampleImageSize"],g),S(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Grt(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&N(e,["parameters","storageUri"],r);const i=S(t,["negativePrompt"]);e!==void 0&&i!=null&&N(e,["parameters","negativePrompt"],i);const s=S(t,["numberOfImages"]);e!==void 0&&s!=null&&N(e,["parameters","sampleCount"],s);const o=S(t,["aspectRatio"]);e!==void 0&&o!=null&&N(e,["parameters","aspectRatio"],o);const a=S(t,["guidanceScale"]);e!==void 0&&a!=null&&N(e,["parameters","guidanceScale"],a);const l=S(t,["seed"]);e!==void 0&&l!=null&&N(e,["parameters","seed"],l);const c=S(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&N(e,["parameters","safetySetting"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&N(e,["parameters","personGeneration"],u);const h=S(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&N(e,["parameters","includeSafetyAttributes"],h);const m=S(t,["includeRaiReason"]);e!==void 0&&m!=null&&N(e,["parameters","includeRaiReason"],m);const g=S(t,["language"]);e!==void 0&&g!=null&&N(e,["parameters","language"],g);const x=S(t,["outputMimeType"]);e!==void 0&&x!=null&&N(e,["parameters","outputOptions","mimeType"],x);const v=S(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&N(e,["parameters","outputOptions","compressionQuality"],v);const b=S(t,["addWatermark"]);e!==void 0&&b!=null&&N(e,["parameters","addWatermark"],b);const w=S(t,["labels"]);e!==void 0&&w!=null&&N(e,["labels"],w);const k=S(t,["imageSize"]);e!==void 0&&k!=null&&N(e,["parameters","sampleImageSize"],k);const C=S(t,["enhancePrompt"]);return e!==void 0&&C!=null&&N(e,["parameters","enhancePrompt"],C),n}function Krt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["config"]);return s!=null&&qrt(s,n),n}function Wrt(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["config"]);return s!=null&&Grt(s,n),n}function Yrt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>ait(o))),N(e,["generatedImages"],s)}const i=S(t,["positivePromptSafetyAttributes"]);return i!=null&&N(e,["positivePromptSafetyAttributes"],whe(i)),e}function Jrt(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>KN(o))),N(e,["generatedImages"],s)}const i=S(t,["positivePromptSafetyAttributes"]);return i!=null&&N(e,["positivePromptSafetyAttributes"],Ehe(i)),e}function Xrt(t,e){const n={},r=S(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r),S(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(S(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=S(t,["durationSeconds"]);if(e!==void 0&&i!=null&&N(e,["parameters","durationSeconds"],i),S(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=S(t,["aspectRatio"]);e!==void 0&&s!=null&&N(e,["parameters","aspectRatio"],s);const o=S(t,["resolution"]);e!==void 0&&o!=null&&N(e,["parameters","resolution"],o);const a=S(t,["personGeneration"]);if(e!==void 0&&a!=null&&N(e,["parameters","personGeneration"],a),S(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=S(t,["negativePrompt"]);e!==void 0&&l!=null&&N(e,["parameters","negativePrompt"],l);const c=S(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&N(e,["parameters","enhancePrompt"],c),S(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const u=S(t,["lastFrame"]);e!==void 0&&u!=null&&N(e,["instances[0]","lastFrame"],WN(u));const h=S(t,["referenceImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>Zit(g))),N(e,["instances[0]","referenceImages"],m)}if(S(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(S(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Qrt(t,e){const n={},r=S(t,["numberOfVideos"]);e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r);const i=S(t,["outputGcsUri"]);e!==void 0&&i!=null&&N(e,["parameters","storageUri"],i);const s=S(t,["fps"]);e!==void 0&&s!=null&&N(e,["parameters","fps"],s);const o=S(t,["durationSeconds"]);e!==void 0&&o!=null&&N(e,["parameters","durationSeconds"],o);const a=S(t,["seed"]);e!==void 0&&a!=null&&N(e,["parameters","seed"],a);const l=S(t,["aspectRatio"]);e!==void 0&&l!=null&&N(e,["parameters","aspectRatio"],l);const c=S(t,["resolution"]);e!==void 0&&c!=null&&N(e,["parameters","resolution"],c);const u=S(t,["personGeneration"]);e!==void 0&&u!=null&&N(e,["parameters","personGeneration"],u);const h=S(t,["pubsubTopic"]);e!==void 0&&h!=null&&N(e,["parameters","pubsubTopic"],h);const m=S(t,["negativePrompt"]);e!==void 0&&m!=null&&N(e,["parameters","negativePrompt"],m);const g=S(t,["enhancePrompt"]);e!==void 0&&g!=null&&N(e,["parameters","enhancePrompt"],g);const x=S(t,["generateAudio"]);e!==void 0&&x!=null&&N(e,["parameters","generateAudio"],x);const v=S(t,["lastFrame"]);e!==void 0&&v!=null&&N(e,["instances[0]","lastFrame"],Yl(v));const b=S(t,["referenceImages"]);if(e!==void 0&&b!=null){let C=b;Array.isArray(C)&&(C=C.map(R=>est(R))),N(e,["instances[0]","referenceImages"],C)}const w=S(t,["mask"]);e!==void 0&&w!=null&&N(e,["instances[0]","mask"],Qit(w));const k=S(t,["compressionQuality"]);return e!==void 0&&k!=null&&N(e,["parameters","compressionQuality"],k),n}function Zrt(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response","generateVideoResponse"]);return o!=null&&N(e,["response"],rit(o)),e}function eit(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],iit(o)),e}function tit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["image"]);s!=null&&N(n,["instances[0]","image"],WN(s));const o=S(e,["video"]);o!=null&&N(n,["instances[0]","video"],Ahe(o));const a=S(e,["source"]);a!=null&&sit(a,n);const l=S(e,["config"]);return l!=null&&Xrt(l,n),n}function nit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["prompt"]);i!=null&&N(n,["instances[0]","prompt"],i);const s=S(e,["image"]);s!=null&&N(n,["instances[0]","image"],Yl(s));const o=S(e,["video"]);o!=null&&N(n,["instances[0]","video"],The(o));const a=S(e,["source"]);a!=null&&oit(a,n);const l=S(e,["config"]);return l!=null&&Qrt(l,n),n}function rit(t){const e={},n=S(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>cit(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function iit(t){const e={},n=S(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>uit(o))),N(e,["generatedVideos"],s)}const r=S(t,["raiMediaFilteredCount"]);r!=null&&N(e,["raiMediaFilteredCount"],r);const i=S(t,["raiMediaFilteredReasons"]);return i!=null&&N(e,["raiMediaFilteredReasons"],i),e}function sit(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&N(e,["instances[0]","image"],WN(i));const s=S(t,["video"]);return e!==void 0&&s!=null&&N(e,["instances[0]","video"],Ahe(s)),n}function oit(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&N(e,["instances[0]","image"],Yl(i));const s=S(t,["video"]);return e!==void 0&&s!=null&&N(e,["instances[0]","video"],The(s)),n}function ait(t){const e={},n=S(t,["_self"]);n!=null&&N(e,["image"],xit(n));const r=S(t,["raiFilteredReason"]);r!=null&&N(e,["raiFilteredReason"],r);const i=S(t,["_self"]);return i!=null&&N(e,["safetyAttributes"],whe(i)),e}function KN(t){const e={},n=S(t,["_self"]);n!=null&&N(e,["image"],bhe(n));const r=S(t,["raiFilteredReason"]);r!=null&&N(e,["raiFilteredReason"],r);const i=S(t,["_self"]);i!=null&&N(e,["safetyAttributes"],Ehe(i));const s=S(t,["prompt"]);return s!=null&&N(e,["enhancedPrompt"],s),e}function lit(t){const e={},n=S(t,["_self"]);n!=null&&N(e,["mask"],bhe(n));const r=S(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),N(e,["labels"],i)}return e}function cit(t){const e={},n=S(t,["video"]);return n!=null&&N(e,["video"],Jit(n)),e}function uit(t){const e={},n=S(t,["_self"]);return n!=null&&N(e,["video"],Xit(n)),e}function dit(t){const e={},n=S(t,["modelSelectionConfig"]);n!=null&&N(e,["modelConfig"],n);const r=S(t,["responseJsonSchema"]);r!=null&&N(e,["responseJsonSchema"],r);const i=S(t,["audioTimestamp"]);i!=null&&N(e,["audioTimestamp"],i);const s=S(t,["candidateCount"]);s!=null&&N(e,["candidateCount"],s);const o=S(t,["enableAffectiveDialog"]);o!=null&&N(e,["enableAffectiveDialog"],o);const a=S(t,["frequencyPenalty"]);a!=null&&N(e,["frequencyPenalty"],a);const l=S(t,["logprobs"]);l!=null&&N(e,["logprobs"],l);const c=S(t,["maxOutputTokens"]);c!=null&&N(e,["maxOutputTokens"],c);const u=S(t,["mediaResolution"]);u!=null&&N(e,["mediaResolution"],u);const h=S(t,["presencePenalty"]);h!=null&&N(e,["presencePenalty"],h);const m=S(t,["responseLogprobs"]);m!=null&&N(e,["responseLogprobs"],m);const g=S(t,["responseMimeType"]);g!=null&&N(e,["responseMimeType"],g);const x=S(t,["responseModalities"]);x!=null&&N(e,["responseModalities"],x);const v=S(t,["responseSchema"]);v!=null&&N(e,["responseSchema"],v);const b=S(t,["routingConfig"]);b!=null&&N(e,["routingConfig"],b);const w=S(t,["seed"]);w!=null&&N(e,["seed"],w);const k=S(t,["speechConfig"]);k!=null&&N(e,["speechConfig"],k);const C=S(t,["stopSequences"]);C!=null&&N(e,["stopSequences"],C);const R=S(t,["temperature"]);R!=null&&N(e,["temperature"],R);const B=S(t,["thinkingConfig"]);B!=null&&N(e,["thinkingConfig"],B);const O=S(t,["topK"]);O!=null&&N(e,["topK"],O);const F=S(t,["topP"]);if(F!=null&&N(e,["topP"],F),S(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function fit(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],$n(t,r)),n}function hit(t,e){const n={},r=S(e,["model"]);return r!=null&&N(n,["_url","name"],$n(t,r)),n}function pit(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function mit(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function git(t){const e={},n=S(t,["aspectRatio"]);n!=null&&N(e,["aspectRatio"],n);const r=S(t,["imageSize"]);if(r!=null&&N(e,["imageSize"],r),S(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(S(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yit(t){const e={},n=S(t,["aspectRatio"]);n!=null&&N(e,["aspectRatio"],n);const r=S(t,["imageSize"]);r!=null&&N(e,["imageSize"],r);const i=S(t,["outputMimeType"]);i!=null&&N(e,["imageOutputOptions","mimeType"],i);const s=S(t,["outputCompressionQuality"]);return s!=null&&N(e,["imageOutputOptions","compressionQuality"],s),e}function xit(t){const e={},n=S(t,["bytesBase64Encoded"]);n!=null&&N(e,["imageBytes"],Nh(n));const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function bhe(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["gcsUri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&N(e,["imageBytes"],Nh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}function WN(t){const e={};if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=S(t,["imageBytes"]);n!=null&&N(e,["bytesBase64Encoded"],Nh(n));const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Yl(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["gcsUri"],n);const r=S(t,["imageBytes"]);r!=null&&N(e,["bytesBase64Encoded"],Nh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}function vit(t,e,n){const r={},i=S(e,["pageSize"]);n!==void 0&&i!=null&&N(n,["_query","pageSize"],i);const s=S(e,["pageToken"]);n!==void 0&&s!=null&&N(n,["_query","pageToken"],s);const o=S(e,["filter"]);n!==void 0&&o!=null&&N(n,["_query","filter"],o);const a=S(e,["queryBase"]);return n!==void 0&&a!=null&&N(n,["_url","models_url"],hhe(t,a)),r}function bit(t,e,n){const r={},i=S(e,["pageSize"]);n!==void 0&&i!=null&&N(n,["_query","pageSize"],i);const s=S(e,["pageToken"]);n!==void 0&&s!=null&&N(n,["_query","pageToken"],s);const o=S(e,["filter"]);n!==void 0&&o!=null&&N(n,["_query","filter"],o);const a=S(e,["queryBase"]);return n!==void 0&&a!=null&&N(n,["_url","models_url"],hhe(t,a)),r}function wit(t,e){const n={},r=S(e,["config"]);return r!=null&&vit(t,r,n),n}function Eit(t,e){const n={},r=S(e,["config"]);return r!=null&&bit(t,r,n),n}function Sit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["_self"]);if(i!=null){let s=phe(i);Array.isArray(s)&&(s=s.map(o=>JL(o))),N(e,["models"],s)}return e}function Ait(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["_self"]);if(i!=null){let s=phe(i);Array.isArray(s)&&(s=s.map(o=>XL(o))),N(e,["models"],s)}return e}function Tit(t){const e={},n=S(t,["maskMode"]);n!=null&&N(e,["maskMode"],n);const r=S(t,["segmentationClasses"]);r!=null&&N(e,["maskClasses"],r);const i=S(t,["maskDilation"]);return i!=null&&N(e,["dilation"],i),e}function JL(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);i!=null&&N(e,["description"],i);const s=S(t,["version"]);s!=null&&N(e,["version"],s);const o=S(t,["_self"]);o!=null&&N(e,["tunedModelInfo"],$it(o));const a=S(t,["inputTokenLimit"]);a!=null&&N(e,["inputTokenLimit"],a);const l=S(t,["outputTokenLimit"]);l!=null&&N(e,["outputTokenLimit"],l);const c=S(t,["supportedGenerationMethods"]);c!=null&&N(e,["supportedActions"],c);const u=S(t,["temperature"]);u!=null&&N(e,["temperature"],u);const h=S(t,["maxTemperature"]);h!=null&&N(e,["maxTemperature"],h);const m=S(t,["topP"]);m!=null&&N(e,["topP"],m);const g=S(t,["topK"]);g!=null&&N(e,["topK"],g);const x=S(t,["thinking"]);return x!=null&&N(e,["thinking"],x),e}function XL(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["displayName"]);r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);i!=null&&N(e,["description"],i);const s=S(t,["versionId"]);s!=null&&N(e,["version"],s);const o=S(t,["deployedModels"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>Brt(m))),N(e,["endpoints"],h)}const a=S(t,["labels"]);a!=null&&N(e,["labels"],a);const l=S(t,["_self"]);l!=null&&N(e,["tunedModelInfo"],zit(l));const c=S(t,["defaultCheckpointId"]);c!=null&&N(e,["defaultCheckpointId"],c);const u=S(t,["checkpoints"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>m)),N(e,["checkpoints"],h)}return e}function kit(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],Urt(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],Frt(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],drt(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&N(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function Cit(t){const e={},n=S(t,["productImage"]);return n!=null&&N(e,["image"],Yl(n)),e}function Nit(t,e){const n={},r=S(t,["numberOfImages"]);e!==void 0&&r!=null&&N(e,["parameters","sampleCount"],r);const i=S(t,["baseSteps"]);e!==void 0&&i!=null&&N(e,["parameters","baseSteps"],i);const s=S(t,["outputGcsUri"]);e!==void 0&&s!=null&&N(e,["parameters","storageUri"],s);const o=S(t,["seed"]);e!==void 0&&o!=null&&N(e,["parameters","seed"],o);const a=S(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&N(e,["parameters","safetySetting"],a);const l=S(t,["personGeneration"]);e!==void 0&&l!=null&&N(e,["parameters","personGeneration"],l);const c=S(t,["addWatermark"]);e!==void 0&&c!=null&&N(e,["parameters","addWatermark"],c);const u=S(t,["outputMimeType"]);e!==void 0&&u!=null&&N(e,["parameters","outputOptions","mimeType"],u);const h=S(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&N(e,["parameters","outputOptions","compressionQuality"],h);const m=S(t,["enhancePrompt"]);e!==void 0&&m!=null&&N(e,["parameters","enhancePrompt"],m);const g=S(t,["labels"]);return e!==void 0&&g!=null&&N(e,["labels"],g),n}function Pit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["source"]);i!=null&&Iit(i,n);const s=S(e,["config"]);return s!=null&&Nit(s,n),n}function _it(t){const e={},n=S(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>KN(i))),N(e,["generatedImages"],r)}return e}function Iit(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["personImage"]);e!==void 0&&i!=null&&N(e,["instances[0]","personImage","image"],Yl(i));const s=S(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Cit(a))),N(e,["instances[0]","productImages"],o)}return n}function Rit(t){const e={},n=S(t,["referenceImage"]);n!=null&&N(e,["referenceImage"],Yl(n));const r=S(t,["referenceId"]);r!=null&&N(e,["referenceId"],r);const i=S(t,["referenceType"]);i!=null&&N(e,["referenceType"],i);const s=S(t,["maskImageConfig"]);s!=null&&N(e,["maskImageConfig"],Tit(s));const o=S(t,["controlImageConfig"]);o!=null&&N(e,["controlImageConfig"],xrt(o));const a=S(t,["styleImageConfig"]);a!=null&&N(e,["styleImageConfig"],a);const l=S(t,["subjectImageConfig"]);return l!=null&&N(e,["subjectImageConfig"],l),e}function whe(t){const e={},n=S(t,["safetyAttributes","categories"]);n!=null&&N(e,["categories"],n);const r=S(t,["safetyAttributes","scores"]);r!=null&&N(e,["scores"],r);const i=S(t,["contentType"]);return i!=null&&N(e,["contentType"],i),e}function Ehe(t){const e={},n=S(t,["safetyAttributes","categories"]);n!=null&&N(e,["categories"],n);const r=S(t,["safetyAttributes","scores"]);r!=null&&N(e,["scores"],r);const i=S(t,["contentType"]);return i!=null&&N(e,["contentType"],i),e}function Oit(t){const e={},n=S(t,["category"]);if(n!=null&&N(e,["category"],n),S(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=S(t,["threshold"]);return r!=null&&N(e,["threshold"],r),e}function Mit(t){const e={},n=S(t,["image"]);return n!=null&&N(e,["image"],Yl(n)),e}function Lit(t,e){const n={},r=S(t,["mode"]);e!==void 0&&r!=null&&N(e,["parameters","mode"],r);const i=S(t,["maxPredictions"]);e!==void 0&&i!=null&&N(e,["parameters","maxPredictions"],i);const s=S(t,["confidenceThreshold"]);e!==void 0&&s!=null&&N(e,["parameters","confidenceThreshold"],s);const o=S(t,["maskDilation"]);e!==void 0&&o!=null&&N(e,["parameters","maskDilation"],o);const a=S(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&N(e,["parameters","binaryColorThreshold"],a);const l=S(t,["labels"]);return e!==void 0&&l!=null&&N(e,["labels"],l),n}function Dit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["source"]);i!=null&&Bit(i,n);const s=S(e,["config"]);return s!=null&&Lit(s,n),n}function jit(t){const e={},n=S(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>lit(i))),N(e,["generatedMasks"],r)}return e}function Bit(t,e){const n={},r=S(t,["prompt"]);e!==void 0&&r!=null&&N(e,["instances[0]","prompt"],r);const i=S(t,["image"]);e!==void 0&&i!=null&&N(e,["instances[0]","image"],Yl(i));const s=S(t,["scribbleImage"]);return e!==void 0&&s!=null&&N(e,["instances[0]","scribble"],Mit(s)),n}function Uit(t){const e={},n=S(t,["functionCallingConfig"]);n!=null&&N(e,["functionCallingConfig"],$rt(n));const r=S(t,["retrievalConfig"]);return r!=null&&N(e,["retrievalConfig"],r),e}function Fit(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],pit(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],mit(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}function She(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>zrt(m))),N(e,["functionDeclarations"],h)}const r=S(t,["retrieval"]);r!=null&&N(e,["retrieval"],r);const i=S(t,["googleSearchRetrieval"]);i!=null&&N(e,["googleSearchRetrieval"],i);const s=S(t,["computerUse"]);if(s!=null&&N(e,["computerUse"],s),S(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=S(t,["codeExecution"]);o!=null&&N(e,["codeExecution"],o);const a=S(t,["enterpriseWebSearch"]);a!=null&&N(e,["enterpriseWebSearch"],a);const l=S(t,["googleMaps"]);l!=null&&N(e,["googleMaps"],l);const c=S(t,["googleSearch"]);c!=null&&N(e,["googleSearch"],c);const u=S(t,["urlContext"]);return u!=null&&N(e,["urlContext"],u),e}function $it(t){const e={},n=S(t,["baseModel"]);n!=null&&N(e,["baseModel"],n);const r=S(t,["createTime"]);r!=null&&N(e,["createTime"],r);const i=S(t,["updateTime"]);return i!=null&&N(e,["updateTime"],i),e}function zit(t){const e={},n=S(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&N(e,["baseModel"],n);const r=S(t,["createTime"]);r!=null&&N(e,["createTime"],r);const i=S(t,["updateTime"]);return i!=null&&N(e,["updateTime"],i),e}function Hit(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);e!==void 0&&i!=null&&N(e,["description"],i);const s=S(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&N(e,["defaultCheckpointId"],s),n}function Vit(t,e){const n={},r=S(t,["displayName"]);e!==void 0&&r!=null&&N(e,["displayName"],r);const i=S(t,["description"]);e!==void 0&&i!=null&&N(e,["description"],i);const s=S(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&N(e,["defaultCheckpointId"],s),n}function qit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","name"],$n(t,r));const i=S(e,["config"]);return i!=null&&Hit(i,n),n}function Git(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["config"]);return i!=null&&Vit(i,n),n}function Kit(t,e){const n={},r=S(t,["outputGcsUri"]);e!==void 0&&r!=null&&N(e,["parameters","storageUri"],r);const i=S(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&N(e,["parameters","safetySetting"],i);const s=S(t,["personGeneration"]);e!==void 0&&s!=null&&N(e,["parameters","personGeneration"],s);const o=S(t,["includeRaiReason"]);e!==void 0&&o!=null&&N(e,["parameters","includeRaiReason"],o);const a=S(t,["outputMimeType"]);e!==void 0&&a!=null&&N(e,["parameters","outputOptions","mimeType"],a);const l=S(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&N(e,["parameters","outputOptions","compressionQuality"],l);const c=S(t,["enhanceInputImage"]);e!==void 0&&c!=null&&N(e,["parameters","upscaleConfig","enhanceInputImage"],c);const u=S(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&N(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const h=S(t,["labels"]);e!==void 0&&h!=null&&N(e,["labels"],h);const m=S(t,["numberOfImages"]);e!==void 0&&m!=null&&N(e,["parameters","sampleCount"],m);const g=S(t,["mode"]);return e!==void 0&&g!=null&&N(e,["parameters","mode"],g),n}function Wit(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["_url","model"],$n(t,r));const i=S(e,["image"]);i!=null&&N(n,["instances[0]","image"],Yl(i));const s=S(e,["upscaleFactor"]);s!=null&&N(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=S(e,["config"]);return o!=null&&Kit(o,n),n}function Yit(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>KN(s))),N(e,["generatedImages"],i)}return e}function Jit(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["uri"],n);const r=S(t,["encodedVideo"]);r!=null&&N(e,["videoBytes"],Nh(r));const i=S(t,["encoding"]);return i!=null&&N(e,["mimeType"],i),e}function Xit(t){const e={},n=S(t,["gcsUri"]);n!=null&&N(e,["uri"],n);const r=S(t,["bytesBase64Encoded"]);r!=null&&N(e,["videoBytes"],Nh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}function Qit(t){const e={},n=S(t,["image"]);n!=null&&N(e,["_self"],Yl(n));const r=S(t,["maskMode"]);return r!=null&&N(e,["maskMode"],r),e}function Zit(t){const e={},n=S(t,["image"]);n!=null&&N(e,["image"],WN(n));const r=S(t,["referenceType"]);return r!=null&&N(e,["referenceType"],r),e}function est(t){const e={},n=S(t,["image"]);n!=null&&N(e,["image"],Yl(n));const r=S(t,["referenceType"]);return r!=null&&N(e,["referenceType"],r),e}function Ahe(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["uri"],n);const r=S(t,["videoBytes"]);r!=null&&N(e,["encodedVideo"],Nh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["encoding"],i),e}function The(t){const e={},n=S(t,["uri"]);n!=null&&N(e,["gcsUri"],n);const r=S(t,["videoBytes"]);r!=null&&N(e,["bytesBase64Encoded"],Nh(r));const i=S(t,["mimeType"]);return i!=null&&N(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tst(t,e){const n={},r=S(t,["displayName"]);return e!==void 0&&r!=null&&N(e,["displayName"],r),n}function nst(t){const e={},n=S(t,["config"]);return n!=null&&tst(n,e),e}function rst(t,e){const n={},r=S(t,["force"]);return e!==void 0&&r!=null&&N(e,["_query","force"],r),n}function ist(t){const e={},n=S(t,["name"]);n!=null&&N(e,["_url","name"],n);const r=S(t,["config"]);return r!=null&&rst(r,e),e}function sst(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","name"],n),e}function ost(t,e){const n={},r=S(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["customMetadata"],s)}const i=S(t,["chunkingConfig"]);return e!==void 0&&i!=null&&N(e,["chunkingConfig"],i),n}function ast(t){const e={},n=S(t,["name"]);n!=null&&N(e,["name"],n);const r=S(t,["metadata"]);r!=null&&N(e,["metadata"],r);const i=S(t,["done"]);i!=null&&N(e,["done"],i);const s=S(t,["error"]);s!=null&&N(e,["error"],s);const o=S(t,["response"]);return o!=null&&N(e,["response"],cst(o)),e}function lst(t){const e={},n=S(t,["fileSearchStoreName"]);n!=null&&N(e,["_url","file_search_store_name"],n);const r=S(t,["fileName"]);r!=null&&N(e,["fileName"],r);const i=S(t,["config"]);return i!=null&&ost(i,e),e}function cst(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["parent"]);r!=null&&N(e,["parent"],r);const i=S(t,["documentName"]);return i!=null&&N(e,["documentName"],i),e}function ust(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function dst(t){const e={},n=S(t,["config"]);return n!=null&&ust(n,e),e}function fst(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["fileSearchStores"],s)}return e}function khe(t,e){const n={},r=S(t,["mimeType"]);e!==void 0&&r!=null&&N(e,["mimeType"],r);const i=S(t,["displayName"]);e!==void 0&&i!=null&&N(e,["displayName"],i);const s=S(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),N(e,["customMetadata"],a)}const o=S(t,["chunkingConfig"]);return e!==void 0&&o!=null&&N(e,["chunkingConfig"],o),n}function hst(t){const e={},n=S(t,["fileSearchStoreName"]);n!=null&&N(e,["_url","file_search_store_name"],n);const r=S(t,["config"]);return r!=null&&khe(r,e),e}function pst(t){const e={},n=S(t,["sdkHttpResponse"]);return n!=null&&N(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mst="Content-Type",gst="X-Server-Timeout",yst="User-Agent",QL="x-goog-api-client",xst="1.34.0",vst=`google-genai-sdk/${xst}`,bst="v1beta1",wst="v1beta";class Est{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:bst,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:wst,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&Sst(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await UQ(i),new KL(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await UQ(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return jl(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:u}=yield tn(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=s.decode(u,{stream:!0});try{const x=JSON.parse(h);if("error"in x){const v=JSON.parse(JSON.stringify(x.error)),b=v.status,w=v.code,k=`got status: ${b}. ${JSON.stringify(x)}`;if(w>=400&&w<600)throw new qN({message:k,status:w})}}catch(x){if(x.name==="ApiError")throw x}o+=h;let m=-1,g=0;for(;;){m=-1,g=0;for(const b of l){const w=o.indexOf(b);w!==-1&&(m===-1||w<m)&&(m=w,g=b.length)}if(m===-1)break;const x=o.substring(0,m);o=o.substring(m+g);const v=x.trim();if(v.startsWith(a)){const b=v.substring(a.length).trim();try{const w=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield tn(new KL(w))}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=vst+" "+this.clientOptions.userAgentExtra;return e[yst]=n,e[QL]=n,e[mst]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(gst,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),u=wt("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(u,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(n),h={};r!=null&&khe(r,h);const m=await this.fetchUploadUrl(c,a,l,u,h,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function UQ(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new qN({message:i,status:n}):new Error(i)}}function Sst(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],u=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&u&&typeof u=="object"&&!Array.isArray(u)?a[l]=r(u,c):(u&&c&&typeof u!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof u}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ast="mcp_used/unknown";let Tst=!1;function Che(t){for(const e of t)if(kst(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Tst}function Nhe(t){var e;const n=(e=t[QL])!==null&&e!==void 0?e:"";t[QL]=(n+` ${Ast}`).trimStart()}function kst(t){return t!==null&&typeof t=="object"&&t instanceof VB}function Cst(t){return jl(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield tn(n.listTools({cursor:i}));for(const a of o.tools)yield yield tn(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class VB{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new VB(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const u of this.mcpClients)try{for(var a=!0,l=(n=void 0,Bl(Cst(u))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const h=i;o.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=u}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),stt(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Nst(t,e,n){const r=new Xet;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class Pst{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=Rst(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const u=new Promise(C=>{c=C}),h=e.callbacks,m=function(){c({})},g=this.apiClient,x={onopen:m,onmessage:C=>{Nst(g,h.onmessage,C)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(C){}},v=this.webSocketFactory.create(l,Ist(o),x);v.connect(),await u;const k={setup:{model:$n(this.apiClient,e.model)}};return v.send(JSON.stringify(k)),new _st(v,this.apiClient)}}class _st{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=nrt(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=trt(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ug.PLAY)}pause(){this.sendPlaybackControl(Ug.PAUSE)}stop(){this.sendPlaybackControl(Ug.STOP)}resetContext(){this.sendPlaybackControl(Ug.RESET_CONTEXT)}close(){this.conn.close()}}function Ist(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Rst(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ost="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Mst(t,e,n){const r=new Jet;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=srt(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class Lst{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Pst(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let u;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Che(e.config.tools)&&Nhe(h);const m=Ust(h);if(this.apiClient.isVertexAI())u=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,u);else{const j=this.apiClient.getApiKey();let $="BidiGenerateContent",W="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",W="access_token"),u=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${$}?${W}=${j}`}let g=()=>{};const x=new Promise(j=>{g=j}),v=e.callbacks,b=function(){var j;(j=v==null?void 0:v.onopen)===null||j===void 0||j.call(v),g({})},w=this.apiClient,k={onopen:b,onmessage:j=>{Mst(w,v.onmessage,j)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(j){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(j){}},C=this.webSocketFactory.create(u,Bst(m),k);C.connect(),await x;let R=$n(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const j=this.apiClient.getProject(),$=this.apiClient.getLocation();R=`projects/${j}/locations/${$}/`+R}let B={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[P2.AUDIO]}:e.config.responseModalities=[P2.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],F=[];for(const j of O)if(this.isCallableTool(j)){const $=j;F.push(await $.tool())}else F.push(j);F.length>0&&(e.config.tools=F);const H={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?B=ert(this.apiClient,H):B=Znt(this.apiClient,H),delete B.config,C.send(JSON.stringify(B)),new jst(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Dst={turnComplete:!0};class jst{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ja(n.turns),e.isVertexAI()||(r=r.map(i=>GN(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Ost)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Dst),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:irt(e)}:n={realtimeInput:rrt(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Bst(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Ust(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FQ=10;function $Q(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(uy(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function uy(t){return"callTool"in t&&typeof t.callTool=="function"}function Fst(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>uy(i)))!==null&&r!==void 0?r:!1}function zQ(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(uy(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function HQ(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $st extends Dd{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Fst(n)||$Q(n.config))return await this.generateContentInternal(l);const c=zQ(n);if(c.length>0){const v=c.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let u,h;const m=Ja(l.contents),g=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:FQ;let x=0;for(;x<g&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const v=u.candidates[0].content,b=[];for(const w of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(uy(w)){const C=await w.callTool(u.functionCalls);b.push(...C)}x++,h={role:"user",parts:b},l.contents=Ja(l.contents),l.contents.push(v),l.contents.push(h),HQ(l.config)&&(m.push(v),m.push(h))}return HQ(l.config)&&(u.automaticFunctionCallingHistory=m),u},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),$Q(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const l=zQ(n);if(l.length>0){const h=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,u=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!u)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Km(Sd.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>uy(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&Che(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Nhe(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(uy(o)){const a=o,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:FQ;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,u,h){return jl(this,arguments,function*(){for(var m,g,x,v,b,w;a<s;){o&&(a++,o=!1);const B=yield tn(c.processParamsMaybeAddMcpUsage(h)),O=yield tn(c.generateContentStreamInternal(B)),F=[],H=[];try{for(var k=!0,C=(g=void 0,Bl(O)),R;R=yield tn(C.next()),m=R.done,!m;k=!0){v=R.value,k=!1;const j=v;if(yield yield tn(j),j.candidates&&(!((b=j.candidates[0])===null||b===void 0)&&b.content)){H.push(j.candidates[0].content);for(const $ of(w=j.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(a<s&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(u.has($.functionCall.name)){const W=yield tn(u.get($.functionCall.name).callTool([$.functionCall]));F.push(...W)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${u.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(j){g={error:j}}finally{try{!k&&!m&&(x=C.return)&&(yield tn(x.call(C)))}finally{if(g)throw g.error}}if(F.length>0){o=!0;const j=new Lb;j.candidates=[{content:{role:"user",parts:F}}],yield yield tn(j);const $=[];$.push(...H),$.push({role:"user",parts:F});const W=Ja(h.contents).concat($);h.contents=W}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=DQ(this.apiClient,e);return a=wt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=BQ(u),m=new Lb;return Object.assign(m,h),m})}else{const c=LQ(this.apiClient,e);return a=wt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=jQ(u),m=new Lb;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=DQ(this.apiClient,e);return a=wt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(h){return jl(this,arguments,function*(){var m,g,x,v;try{for(var b=!0,w=Bl(h),k;k=yield tn(w.next()),m=k.done,!m;b=!0){v=k.value,b=!1;const C=v,R=BQ(yield tn(C.json()));R.sdkHttpResponse={headers:C.headers};const B=new Lb;Object.assign(B,R),yield yield tn(B)}}catch(C){g={error:C}}finally{try{!b&&!m&&(x=w.return)&&(yield tn(x.call(w)))}finally{if(g)throw g.error}}})})}else{const c=LQ(this.apiClient,e);return a=wt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(h){return jl(this,arguments,function*(){var m,g,x,v;try{for(var b=!0,w=Bl(h),k;k=yield tn(w.next()),m=k.done,!m;b=!0){v=k.value,b=!1;const C=v,R=jQ(yield tn(C.json()));R.sdkHttpResponse={headers:C.headers};const B=new Lb;Object.assign(B,R),yield yield tn(B)}}catch(C){g={error:C}}finally{try{!b&&!m&&(x=w.return)&&(yield tn(x.call(w)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Lrt(this.apiClient,e);return a=wt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=jrt(u),m=new xQ;return Object.assign(m,h),m})}else{const c=Mrt(this.apiClient,e);return a=wt("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Drt(u),m=new xQ;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Wrt(this.apiClient,e);return a=wt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Jrt(u),m=new vQ;return Object.assign(m,h),m})}else{const c=Krt(this.apiClient,e);return a=wt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Yrt(u),m=new vQ;return Object.assign(m,h),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=_rt(this.apiClient,e);return s=wt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=Irt(l),u=new Uet;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Wit(this.apiClient,e);return s=wt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=Yit(l),u=new Fet;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Pit(this.apiClient,e);return s=wt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=_it(l),u=new $et;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Dit(this.apiClient,e);return s=wt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=jit(l),u=new zet;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hit(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>XL(u))}else{const c=fit(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>JL(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Eit(this.apiClient,e);return a=wt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Ait(u),m=new bQ;return Object.assign(m,h),m})}else{const c=wit(this.apiClient,e);return a=wt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Sit(u),m=new bQ;return Object.assign(m,h),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Git(this.apiClient,e);return a=wt("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>XL(u))}else{const c=qit(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>JL(u))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=krt(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Nrt(u),m=new wQ;return Object.assign(m,h),m})}else{const c=Trt(this.apiClient,e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Crt(u),m=new wQ;return Object.assign(m,h),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Ert(this.apiClient,e);return a=wt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Art(u),m=new EQ;return Object.assign(m,h),m})}else{const c=wrt(this.apiClient,e);return a=wt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Srt(u),m=new EQ;return Object.assign(m,h),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=prt(this.apiClient,e);return s=wt("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>{const c=mrt(l),u=new Het;return Object.assign(u,c),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=nit(this.apiClient,e);return a=wt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>{const h=eit(u),m=new _2;return Object.assign(m,h),m})}else{const c=tit(this.apiClient,e);return a=wt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o.then(u=>{const h=Zrt(u),m=new _2;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zst extends Dd{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Oet(e);return a=wt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o}else{const c=Ret(e);return a=wt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Tet(e);return s=wt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hst(t){const e={},n=S(t,["data"]);if(n!=null&&N(e,["data"],n),S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Vst(t){const e={},n=S(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Zst(s))),N(e,["parts"],i)}const r=S(t,["role"]);return r!=null&&N(e,["role"],r),e}function qst(t,e,n){const r={},i=S(e,["expireTime"]);n!==void 0&&i!=null&&N(n,["expireTime"],i);const s=S(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&N(n,["newSessionExpireTime"],s);const o=S(e,["uses"]);n!==void 0&&o!=null&&N(n,["uses"],o);const a=S(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&N(n,["bidiGenerateContentSetup"],Qst(t,a));const l=S(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&N(n,["fieldMask"],l),r}function Gst(t,e){const n={},r=S(e,["config"]);return r!=null&&N(n,["config"],qst(t,r,n)),n}function Kst(t){const e={};if(S(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=S(t,["fileUri"]);n!=null&&N(e,["fileUri"],n);const r=S(t,["mimeType"]);return r!=null&&N(e,["mimeType"],r),e}function Wst(t){const e={},n=S(t,["id"]);n!=null&&N(e,["id"],n);const r=S(t,["args"]);r!=null&&N(e,["args"],r);const i=S(t,["name"]);if(i!=null&&N(e,["name"],i),S(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(S(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Yst(t){const e={};if(S(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=S(t,["enableWidget"]);return n!=null&&N(e,["enableWidget"],n),e}function Jst(t){const e={};if(S(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(S(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=S(t,["timeRangeFilter"]);return n!=null&&N(e,["timeRangeFilter"],n),e}function Xst(t,e){const n={},r=S(t,["generationConfig"]);e!==void 0&&r!=null&&N(e,["setup","generationConfig"],r);const i=S(t,["responseModalities"]);e!==void 0&&i!=null&&N(e,["setup","generationConfig","responseModalities"],i);const s=S(t,["temperature"]);e!==void 0&&s!=null&&N(e,["setup","generationConfig","temperature"],s);const o=S(t,["topP"]);e!==void 0&&o!=null&&N(e,["setup","generationConfig","topP"],o);const a=S(t,["topK"]);e!==void 0&&a!=null&&N(e,["setup","generationConfig","topK"],a);const l=S(t,["maxOutputTokens"]);e!==void 0&&l!=null&&N(e,["setup","generationConfig","maxOutputTokens"],l);const c=S(t,["mediaResolution"]);e!==void 0&&c!=null&&N(e,["setup","generationConfig","mediaResolution"],c);const u=S(t,["seed"]);e!==void 0&&u!=null&&N(e,["setup","generationConfig","seed"],u);const h=S(t,["speechConfig"]);e!==void 0&&h!=null&&N(e,["setup","generationConfig","speechConfig"],HB(h));const m=S(t,["thinkingConfig"]);e!==void 0&&m!=null&&N(e,["setup","generationConfig","thinkingConfig"],m);const g=S(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&N(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=S(t,["systemInstruction"]);e!==void 0&&x!=null&&N(e,["setup","systemInstruction"],Vst(Ms(x)));const v=S(t,["tools"]);if(e!==void 0&&v!=null){let O=mv(v);Array.isArray(O)&&(O=O.map(F=>tot(pv(F)))),N(e,["setup","tools"],O)}const b=S(t,["sessionResumption"]);e!==void 0&&b!=null&&N(e,["setup","sessionResumption"],eot(b));const w=S(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&N(e,["setup","inputAudioTranscription"],w);const k=S(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&N(e,["setup","outputAudioTranscription"],k);const C=S(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&N(e,["setup","realtimeInputConfig"],C);const R=S(t,["contextWindowCompression"]);e!==void 0&&R!=null&&N(e,["setup","contextWindowCompression"],R);const B=S(t,["proactivity"]);if(e!==void 0&&B!=null&&N(e,["setup","proactivity"],B),S(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Qst(t,e){const n={},r=S(e,["model"]);r!=null&&N(n,["setup","model"],$n(t,r));const i=S(e,["config"]);return i!=null&&N(n,["config"],Xst(i,n)),n}function Zst(t){const e={},n=S(t,["mediaResolution"]);n!=null&&N(e,["mediaResolution"],n);const r=S(t,["codeExecutionResult"]);r!=null&&N(e,["codeExecutionResult"],r);const i=S(t,["executableCode"]);i!=null&&N(e,["executableCode"],i);const s=S(t,["fileData"]);s!=null&&N(e,["fileData"],Kst(s));const o=S(t,["functionCall"]);o!=null&&N(e,["functionCall"],Wst(o));const a=S(t,["functionResponse"]);a!=null&&N(e,["functionResponse"],a);const l=S(t,["inlineData"]);l!=null&&N(e,["inlineData"],Hst(l));const c=S(t,["text"]);c!=null&&N(e,["text"],c);const u=S(t,["thought"]);u!=null&&N(e,["thought"],u);const h=S(t,["thoughtSignature"]);h!=null&&N(e,["thoughtSignature"],h);const m=S(t,["videoMetadata"]);return m!=null&&N(e,["videoMetadata"],m),e}function eot(t){const e={},n=S(t,["handle"]);if(n!=null&&N(e,["handle"],n),S(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tot(t){const e={},n=S(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(h=>h)),N(e,["functionDeclarations"],u)}if(S(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=S(t,["googleSearchRetrieval"]);r!=null&&N(e,["googleSearchRetrieval"],r);const i=S(t,["computerUse"]);i!=null&&N(e,["computerUse"],i);const s=S(t,["fileSearch"]);s!=null&&N(e,["fileSearch"],s);const o=S(t,["codeExecution"]);if(o!=null&&N(e,["codeExecution"],o),S(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=S(t,["googleMaps"]);a!=null&&N(e,["googleMaps"],Yst(a));const l=S(t,["googleSearch"]);l!=null&&N(e,["googleSearch"],Jst(l));const c=S(t,["urlContext"]);return c!=null&&N(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function not(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function rot(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=not(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class iot extends Dd{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Gst(this.apiClient,e);s=wt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=rot(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sot(t,e){const n={},r=S(t,["force"]);return e!==void 0&&r!=null&&N(e,["_query","force"],r),n}function oot(t){const e={},n=S(t,["name"]);n!=null&&N(e,["_url","name"],n);const r=S(t,["config"]);return r!=null&&sot(r,e),e}function aot(t){const e={},n=S(t,["name"]);return n!=null&&N(e,["_url","name"],n),e}function lot(t,e){const n={},r=S(t,["pageSize"]);e!==void 0&&r!=null&&N(e,["_query","pageSize"],r);const i=S(t,["pageToken"]);return e!==void 0&&i!=null&&N(e,["_query","pageToken"],i),n}function cot(t){const e={},n=S(t,["parent"]);n!=null&&N(e,["_url","parent"],n);const r=S(t,["config"]);return r!=null&&lot(r,e),e}function uot(t){const e={},n=S(t,["sdkHttpResponse"]);n!=null&&N(e,["sdkHttpResponse"],n);const r=S(t,["nextPageToken"]);r!=null&&N(e,["nextPageToken"],r);const i=S(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),N(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dot extends Dd{constructor(e){super(),this.apiClient=e,this.list=async n=>new Km(Sd.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aot(e);return s=wt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=oot(e);i=wt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cot(e);return s=wt("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=uot(l),u=new Vet;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fot extends Dd{constructor(e,n=new dot(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Km(Sd.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nst(e);return s=wt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=sst(e);return s=wt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=ist(e);i=wt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dst(e);return s=wt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=fst(l),u=new qet;return Object.assign(u,c),u})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hst(e);return s=wt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=pst(l),u=new Get;return Object.assign(u,c),u})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lst(e);return s=wt("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=ast(l),u=new BB;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Phe=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Phe=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const hot=()=>Phe();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZL(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const eD=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nl extends Error{}class so extends nl{constructor(e,n,r,i){super(`${so.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new YN({message:r,cause:eD(n)});const s=n;return e===400?new Ihe(e,s,r,i):e===401?new Rhe(e,s,r,i):e===403?new Ohe(e,s,r,i):e===404?new Mhe(e,s,r,i):e===409?new Lhe(e,s,r,i):e===422?new Dhe(e,s,r,i):e===429?new jhe(e,s,r,i):e>=500?new Bhe(e,s,r,i):new so(e,s,r,i)}}class tD extends so{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class YN extends so{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class _he extends YN{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ihe extends so{}class Rhe extends so{}class Ohe extends so{}class Mhe extends so{}class Lhe extends so{}class Dhe extends so{}class jhe extends so{}class Bhe extends so{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pot=/^[a-z][a-z0-9+.-]*:/i,mot=t=>pot.test(t);let nD=t=>(nD=Array.isArray,nD(t));const got=nD;let yot=got;const VQ=yot;function xot(t){if(!t)return!0;for(const e in t)return!1;return!0}function vot(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const bot=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new nl(`${t} must be an integer`);if(e<0)throw new nl(`${t} must be a positive integer`);return e},wot=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eot=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sg="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sot(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Aot=()=>{var t,e,n,r,i;const s=Sot();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sg,"X-Stainless-OS":GQ(Deno.build.os),"X-Stainless-Arch":qQ(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sg,"X-Stainless-OS":GQ((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":qQ((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=Tot();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Tot(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const qQ=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",GQ=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let UA;const kot=()=>UA??(UA=Aot());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cot(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Uhe(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Not(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Uhe({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Fhe(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Pot(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _ot=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $he=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function s4(t,e,n){return $he(),new File(t,e??"unknown_file",n)}function Iot(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Rot=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zhe=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Oot=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&zhe(t),Mot=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Lot(t,e,n){if($he(),t=await t,Oot(t))return t instanceof File?t:s4([await t.arrayBuffer()],t.name);if(Mot(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),s4(await rD(i),e,n)}const r=await rD(t);if(e||(e=Iot(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return s4(r,e,n)}async function rD(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(zhe(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(Rot(t))try{for(var a=!0,l=Bl(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const u=i;o.push(...await rD(u))}}catch(u){n={error:u}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const u=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${u?`; constructor: ${u}`:""}${Dot(t)}`)}return o}function Dot(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hhe{constructor(e){this._client=e}}Hhe._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vhe(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const KQ=Object.freeze(Object.create(null)),jot=(t=Vhe)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((u,h,m)=>{var g,x,v;/[?#]/.test(h)&&(i=!0);const b=r[m];let w=(i?encodeURIComponent:t)(""+b);return m!==r.length&&(b==null||typeof b=="object"&&b.toString===((v=Object.getPrototypeOf((x=Object.getPrototypeOf((g=b.hasOwnProperty)!==null&&g!==void 0?g:KQ))!==null&&x!==void 0?x:KQ))===null||v===void 0?void 0:v.toString))&&(w=b+"",s.push({start:u.length+h.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),u+h+(m===r.length?"":w)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((u,h)=>u.start-h.start),s.length>0){let u=0;const h=s.reduce((m,g)=>{const x=" ".repeat(g.start-u),v="^".repeat(g.length);return u=g.start+g.length,m+x+v},"");throw new nl(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${h}`)}return o}),FA=jot(Vhe);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qhe extends Hhe{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=R2(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new nl("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new nl("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(FA`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(FA`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(FA`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=R2(s,["api_version"]);return this._client.get(FA`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}qhe._key=Object.freeze(["interactions"]);class Ghe extends qhe{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bot(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let $A;function qB(t){let e;return($A??(e=new globalThis.TextEncoder,$A=e.encode.bind(e)))(t)}let zA;function WQ(t){let e;return(zA??(e=new globalThis.TextDecoder,zA=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JN{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?qB(e):e;this.buffer=Bot([this.buffer,n]);const r=[];let i;for(;(i=Uot(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(WQ(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=WQ(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}JN.NEWLINE_CHARS=new Set([`
`,"\r"]);JN.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Uot(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Fot(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O2={off:0,error:200,warn:300,info:400,debug:500},YQ=(t,e,n)=>{if(t){if(vot(O2,t))return t;Hs(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(O2))}`)}};function Xb(){}function HA(t,e,n){return!e||O2[t]>O2[n]?Xb:e[t].bind(e)}const $ot={error:Xb,warn:Xb,info:Xb,debug:Xb};let JQ=new WeakMap;function Hs(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return $ot;const i=JQ.get(n);if(i&&i[0]===r)return i[1];const s={error:HA("error",n,r),warn:HA("warn",n,r),info:HA("info",n,r),debug:HA("debug",n,r)};return JQ.set(n,[r,s]),s}const fp=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zot=class Qb{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?Hs(r):console;function o(){return jl(this,arguments,function*(){var l,c,u,h;if(i)throw new nl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,x=Bl(Hot(e,n)),v;v=yield tn(x.next()),l=v.done,!l;g=!0){h=v.value,g=!1;const b=h;if(!m)if(b.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield tn(JSON.parse(b.data))}catch(w){throw s.error("Could not parse message into JSON:",b.data),s.error("From chunk:",b.raw),w}}}catch(b){c={error:b}}finally{try{!g&&!l&&(u=x.return)&&(yield tn(u.call(x)))}finally{if(c)throw c.error}}m=!0}catch(b){if(ZL(b))return yield tn(void 0);throw b}finally{m||n.abort()}})}return new Qb(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return jl(this,arguments,function*(){var l,c,u,h;const m=new JN,g=Fhe(e);try{for(var x=!0,v=Bl(g),b;b=yield tn(v.next()),l=b.done,!l;x=!0){h=b.value,x=!1;const w=h;for(const k of m.decode(w))yield yield tn(k)}}catch(w){c={error:w}}finally{try{!x&&!l&&(u=v.return)&&(yield tn(u.call(v)))}finally{if(c)throw c.error}}for(const w of m.flush())yield yield tn(w)})}function o(){return jl(this,arguments,function*(){var l,c,u,h;if(i)throw new nl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,x=Bl(s()),v;v=yield tn(x.next()),l=v.done,!l;g=!0){h=v.value,g=!1;const b=h;m||b&&(yield yield tn(JSON.parse(b)))}}catch(b){c={error:b}}finally{try{!g&&!l&&(u=x.return)&&(yield tn(u.call(x)))}finally{if(c)throw c.error}}m=!0}catch(b){if(ZL(b))return yield tn(void 0);throw b}finally{m||n.abort()}})}return new Qb(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new Qb(()=>i(e),this.controller,this.client),new Qb(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Uhe({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=qB(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function Hot(t,e){return jl(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new nl("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new nl("Attempted to iterate over a response with no body");const a=new qot,l=new JN,c=Fhe(t.body);try{for(var u=!0,h=Bl(Vot(c)),m;m=yield tn(h.next()),r=m.done,!r;u=!0){o=m.value,u=!1;const g=o;for(const x of l.decode(g)){const v=a.decode(x);v&&(yield yield tn(v))}}}catch(g){i={error:g}}finally{try{!u&&!r&&(s=h.return)&&(yield tn(s.call(h)))}finally{if(i)throw i.error}}for(const g of l.flush()){const x=a.decode(g);x&&(yield yield tn(x))}})}function Vot(t){return jl(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Bl(t),c;c=yield tn(l.next()),n=c.done,!n;a=!0){s=c.value,a=!1;const u=s;if(u==null)continue;const h=u instanceof ArrayBuffer?new Uint8Array(u):typeof u=="string"?qB(u):u;let m=new Uint8Array(o.length+h.length);m.set(o),m.set(h,o.length),o=m;let g;for(;(g=Fot(o))!==-1;)yield yield tn(o.slice(0,g)),o=o.slice(g)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield tn(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield tn(o))})}class qot{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Got(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Got(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Kot(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return Hs(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):zot.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Hs(t).debug(`[${r}] response parsed`,fp({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GB extends Promise{constructor(e,n,r=Kot){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new GB(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Khe=Symbol("brand.privateNullableHeaders");function*Wot(t){if(!t)return;if(Khe in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():VQ(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=VQ(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Db=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Wot(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[Khe]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o4=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=xet)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Whe;class XN{constructor(e){var n,r,i,s,o,a,l,{baseURL:c=o4("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:u=(n=o4("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,m=R2(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:u,apiVersion:h},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:XN.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const x="warn";this.logLevel=x,this.logLevel=(o=(s=YQ(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:YQ(o4("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:x,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:Cot(),this.encoder=_ot,this._options=g,this.apiKey=u,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Db([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Db([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Db([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new nl(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Sg}`}defaultIdempotencyKey(){return`stainless-node-retry-${hot()}`}makeStatusError(e,n,r,i){return so.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=mot(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return xot(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new GB(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:u,timeout:h}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:u,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,x=Date.now();if(Hs(this).debug(`[${m}] sending request`,fp({retryOfRequestLogID:r,method:a.method,url:u,options:a,headers:c.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new tD;const v=new AbortController,b=await this.fetchWithTimeout(u,c,h,v).catch(eD),w=Date.now();if(b instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new tD;const R=ZL(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return Hs(this).info(`[${m}] connection ${R?"timed out":"failed"} - ${C}`),Hs(this).debug(`[${m}] connection ${R?"timed out":"failed"} (${C})`,fp({retryOfRequestLogID:r,url:u,durationMs:w-x,message:b.message})),this.retryRequest(a,n,r??m);throw Hs(this).info(`[${m}] connection ${R?"timed out":"failed"} - error; no more retries left`),Hs(this).debug(`[${m}] connection ${R?"timed out":"failed"} (error; no more retries left)`,fp({retryOfRequestLogID:r,url:u,durationMs:w-x,message:b.message})),R?new _he:new YN({cause:b})}const k=`[${m}${g}] ${c.method} ${u} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${w-x}ms`;if(!b.ok){const C=await this.shouldRetry(b);if(n&&C){const j=`retrying, ${n} attempts remaining`;return await Pot(b.body),Hs(this).info(`${k} - ${j}`),Hs(this).debug(`[${m}] response error (${j})`,fp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-x})),this.retryRequest(a,n,r??m,b.headers)}const R=C?"error; no more retries left":"error; not retryable";Hs(this).info(`${k} - ${R}`);const B=await b.text().catch(j=>eD(j).message),O=wot(B),F=O?void 0:B;throw Hs(this).debug(`[${m}] response error (${R})`,fp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:F,durationMs:Date.now()-x})),this.makeStatusError(b.status,O,F,b.headers)}return Hs(this).info(k),Hs(this).debug(`[${m}] response start`,fp({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-x})),{response:b,options:a,controller:v,requestLogID:m,retryOfRequestLogID:r,startTime:x}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=R2(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),u=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},u?{duplex:"half"}:{}),{method:"GET"}),l);a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await Eot(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:u}=o,h=this.buildURL(l,c,u);"timeout"in o&&bot("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:o}),x=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:x},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Db([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),kot()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Db([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Not(e)}:this.encoder({body:e,headers:r})}}XN.DEFAULT_TIMEOUT=6e4;class qi extends XN{constructor(){super(...arguments),this.interactions=new Ghe(this)}}Whe=qi;qi.GeminiNextGenAPIClient=Whe;qi.GeminiNextGenAPIClientError=nl;qi.APIError=so;qi.APIConnectionError=YN;qi.APIConnectionTimeoutError=_he;qi.APIUserAbortError=tD;qi.NotFoundError=Mhe;qi.ConflictError=Lhe;qi.RateLimitError=jhe;qi.BadRequestError=Ihe;qi.AuthenticationError=Rhe;qi.InternalServerError=Bhe;qi.PermissionDeniedError=Ohe;qi.UnprocessableEntityError=Dhe;qi.toFile=Lot;qi.Interactions=Ghe;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yot(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function Jot(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function Xot(t,e){const n={},r=S(t,["sdkHttpResponse"]);return r!=null&&N(n,["sdkHttpResponse"],r),n}function Qot(t,e){const n={},r=S(t,["sdkHttpResponse"]);return r!=null&&N(n,["sdkHttpResponse"],r),n}function Zot(t,e,n){const r={};if(S(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=S(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&N(e,["displayName"],i),S(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=S(t,["epochCount"]);e!==void 0&&s!=null&&N(e,["tuningTask","hyperparameters","epochCount"],s);const o=S(t,["learningRateMultiplier"]);if(o!=null&&N(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),S(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(S(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(S(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=S(t,["batchSize"]);e!==void 0&&a!=null&&N(e,["tuningTask","hyperparameters","batchSize"],a);const l=S(t,["learningRate"]);if(e!==void 0&&l!=null&&N(e,["tuningTask","hyperparameters","learningRate"],l),S(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(S(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function eat(t,e,n){const r={};let i=S(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=S(t,["validationDataset"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec"],XQ(g))}else if(i==="PREFERENCE_TUNING"){const g=S(t,["validationDataset"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec"],XQ(g))}const s=S(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&N(e,["tunedModelDisplayName"],s);const o=S(t,["description"]);e!==void 0&&o!=null&&N(e,["description"],o);let a=S(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=S(t,["epochCount"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=S(t,["epochCount"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=S(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=S(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=S(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=S(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=S(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=S(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let u=S(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=S(t,["adapterSize"]);e!==void 0&&g!=null&&N(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(u==="PREFERENCE_TUNING"){const g=S(t,["adapterSize"]);e!==void 0&&g!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(S(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(S(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=S(t,["labels"]);e!==void 0&&h!=null&&N(e,["labels"],h);const m=S(t,["beta"]);return e!==void 0&&m!=null&&N(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function tat(t,e){const n={},r=S(t,["baseModel"]);r!=null&&N(n,["baseModel"],r);const i=S(t,["preTunedModel"]);i!=null&&N(n,["preTunedModel"],i);const s=S(t,["trainingDataset"]);s!=null&&fat(s);const o=S(t,["config"]);return o!=null&&Zot(o,n),n}function nat(t,e){const n={},r=S(t,["baseModel"]);r!=null&&N(n,["baseModel"],r);const i=S(t,["preTunedModel"]);i!=null&&N(n,["preTunedModel"],i);const s=S(t,["trainingDataset"]);s!=null&&hat(s,n,e);const o=S(t,["config"]);return o!=null&&eat(o,n,e),n}function rat(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function iat(t,e){const n={},r=S(t,["name"]);return r!=null&&N(n,["_url","name"],r),n}function sat(t,e,n){const r={},i=S(t,["pageSize"]);e!==void 0&&i!=null&&N(e,["_query","pageSize"],i);const s=S(t,["pageToken"]);e!==void 0&&s!=null&&N(e,["_query","pageToken"],s);const o=S(t,["filter"]);return e!==void 0&&o!=null&&N(e,["_query","filter"],o),r}function oat(t,e,n){const r={},i=S(t,["pageSize"]);e!==void 0&&i!=null&&N(e,["_query","pageSize"],i);const s=S(t,["pageToken"]);e!==void 0&&s!=null&&N(e,["_query","pageToken"],s);const o=S(t,["filter"]);return e!==void 0&&o!=null&&N(e,["_query","filter"],o),r}function aat(t,e){const n={},r=S(t,["config"]);return r!=null&&sat(r,n),n}function lat(t,e){const n={},r=S(t,["config"]);return r!=null&&oat(r,n),n}function cat(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["nextPageToken"]);i!=null&&N(n,["nextPageToken"],i);const s=S(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Yhe(a))),N(n,["tuningJobs"],o)}return n}function uat(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["nextPageToken"]);i!=null&&N(n,["nextPageToken"],i);const s=S(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>iD(a))),N(n,["tuningJobs"],o)}return n}function dat(t,e){const n={},r=S(t,["name"]);r!=null&&N(n,["model"],r);const i=S(t,["name"]);return i!=null&&N(n,["endpoint"],i),n}function fat(t,e){const n={};if(S(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(S(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=S(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),N(n,["examples","examples"],i)}return n}function hat(t,e,n){const r={};let i=S(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=S(t,["gcsUri"]);e!==void 0&&o!=null&&N(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=S(t,["gcsUri"]);e!==void 0&&o!=null&&N(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=S(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=S(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&N(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=S(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&N(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(S(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Yhe(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&N(n,["name"],i);const s=S(t,["state"]);s!=null&&N(n,["state"],dhe(s));const o=S(t,["createTime"]);o!=null&&N(n,["createTime"],o);const a=S(t,["tuningTask","startTime"]);a!=null&&N(n,["startTime"],a);const l=S(t,["tuningTask","completeTime"]);l!=null&&N(n,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&N(n,["updateTime"],c);const u=S(t,["description"]);u!=null&&N(n,["description"],u);const h=S(t,["baseModel"]);h!=null&&N(n,["baseModel"],h);const m=S(t,["_self"]);return m!=null&&N(n,["tunedModel"],dat(m)),n}function iD(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&N(n,["name"],i);const s=S(t,["state"]);s!=null&&N(n,["state"],dhe(s));const o=S(t,["createTime"]);o!=null&&N(n,["createTime"],o);const a=S(t,["startTime"]);a!=null&&N(n,["startTime"],a);const l=S(t,["endTime"]);l!=null&&N(n,["endTime"],l);const c=S(t,["updateTime"]);c!=null&&N(n,["updateTime"],c);const u=S(t,["error"]);u!=null&&N(n,["error"],u);const h=S(t,["description"]);h!=null&&N(n,["description"],h);const m=S(t,["baseModel"]);m!=null&&N(n,["baseModel"],m);const g=S(t,["tunedModel"]);g!=null&&N(n,["tunedModel"],g);const x=S(t,["preTunedModel"]);x!=null&&N(n,["preTunedModel"],x);const v=S(t,["supervisedTuningSpec"]);v!=null&&N(n,["supervisedTuningSpec"],v);const b=S(t,["preferenceOptimizationSpec"]);b!=null&&N(n,["preferenceOptimizationSpec"],b);const w=S(t,["tuningDataStats"]);w!=null&&N(n,["tuningDataStats"],w);const k=S(t,["encryptionSpec"]);k!=null&&N(n,["encryptionSpec"],k);const C=S(t,["partnerModelTuningSpec"]);C!=null&&N(n,["partnerModelTuningSpec"],C);const R=S(t,["customBaseModel"]);R!=null&&N(n,["customBaseModel"],R);const B=S(t,["experiment"]);B!=null&&N(n,["experiment"],B);const O=S(t,["labels"]);O!=null&&N(n,["labels"],O);const F=S(t,["outputUri"]);F!=null&&N(n,["outputUri"],F);const H=S(t,["pipelineJob"]);H!=null&&N(n,["pipelineJob"],H);const j=S(t,["serviceAccount"]);j!=null&&N(n,["serviceAccount"],j);const $=S(t,["tunedModelDisplayName"]);$!=null&&N(n,["tunedModelDisplayName"],$);const W=S(t,["veoTuningSpec"]);return W!=null&&N(n,["veoTuningSpec"],W),n}function pat(t,e){const n={},r=S(t,["sdkHttpResponse"]);r!=null&&N(n,["sdkHttpResponse"],r);const i=S(t,["name"]);i!=null&&N(n,["name"],i);const s=S(t,["metadata"]);s!=null&&N(n,["metadata"],s);const o=S(t,["done"]);o!=null&&N(n,["done"],o);const a=S(t,["error"]);return a!=null&&N(n,["error"],a),n}function XQ(t,e){const n={},r=S(t,["gcsUri"]);r!=null&&N(n,["validationDatasetUri"],r);const i=S(t,["vertexDatasetResource"]);return i!=null&&N(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mat extends Dd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Km(Sd.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:GL.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=iat(e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>iD(u))}else{const c=rat(e);return a=wt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>Yhe(u))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=lat(e);return a=wt("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=uat(u),m=new SQ;return Object.assign(m,h),m})}else{const c=aat(e);return a=wt("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=cat(u),m=new SQ;return Object.assign(m,h),m})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Jot(e);return a=wt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Qot(u),m=new AQ;return Object.assign(m,h),m})}else{const c=Yot(e);return a=wt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(u=>u.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:u.headers},m})),o.then(u=>{const h=Xot(u),m=new AQ;return Object.assign(m,h),m})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=nat(e,e);return s=wt("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>iD(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tat(e);return s=wt("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const u=c;return u.sdkHttpResponse={headers:l.headers},u})),i.then(l=>pat(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gat{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const yat=1024*1024*8,xat=3,vat=1e3,bat=2,M2="x-goog-upload-status";async function wat(t,e,n){var r;const i=await Jhe(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[M2])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Eat(t,e,n){var r;const i=await Jhe(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[M2])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=she(s),a=new UB;return Object.assign(a,o),a}async function Jhe(t,e,n){var r,i;let s=0,o=0,a=new KL(new Response),l="upload";for(s=t.size;o<s;){const c=Math.min(yat,s-o),u=t.slice(o,o+c);o+c>=s&&(l+=", finalize");let h=0,m=vat;for(;h<xat&&(a=await n.request({path:"",body:u,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[M2]));)h++,await Aat(m),m=m*bat;if(o+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[M2])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function Sat(t){return{size:t.size,type:t.type}}function Aat(t){return new Promise(e=>setTimeout(e,t))}class Tat{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wat(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Eat(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Sat(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kat{create(e,n,r){return new Cat(e,n,r)}}class Cat{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QQ="x-goog-api-key";class Nat{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(QQ)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(QQ,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pat="gl-node/";class Xhe{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new qi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Eet(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new Nat(this.apiKey);this.apiClient=new Est({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Pat+"web",uploader:new Tat,downloader:new gat}),this.models=new $st(this.apiClient),this.live=new Lst(this.apiClient,i,new kat),this.batches=new Qtt(this.apiClient),this.chats=new Ont(this.models,this.apiClient),this.caches=new _nt(this.apiClient),this.files=new Hnt(this.apiClient),this.operations=new zst(this.apiClient),this.authTokens=new iot(this.apiClient),this.tunings=new mat(this.apiClient),this.fileSearchStores=new fot(this.apiClient)}}const Qhe={inputPricePerMillion:.5,outputPricePerMillion:2.5,customModelPricing:{"gemini-3-flash-preview":{input:.5,output:2.5},"gemini-2.5-pro":{input:1.25,output:10},"gemini-2.5-flash":{input:.15,output:.6},"gemini-2.5-flash-lite":{input:.075,output:.3},"gemini-2.0-flash":{input:.1,output:.4},"gemini-2.0-flash-lite":{input:.075,output:.3}}},ZQ={records:[],pricing:Qhe},eZ="token_usage_store";class _at{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=ZQ,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async loadState(){try{const e=await ke.getItem(ke.getUserKey(eZ));if(e){const n=JSON.parse(e);this.state={...ZQ,...n,pricing:{...Qhe,...n.pricing||{}}}}}catch(e){console.error("[TokenUsageStore] Failed to load state:",e)}}async saveState(){try{await ke.setItem(ke.getUserKey(eZ),JSON.stringify(this.state))}catch(e){console.error("[TokenUsageStore] Failed to save state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}addRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,6),timestamp:Date.now()},...this.state.records].slice(0,1e3);this.state={...this.state,records:r},this.notify(),console.log(`[TokenUsageStore] Recorded: ${e.source} ${e.operation} - In: ${e.inputTokens}, Out: ${e.outputTokens}`)}updatePricing(e){this.state={...this.state,pricing:{...this.state.pricing,...e}},this.notify()}clearHistory(){this.state={...this.state,records:[]},this.notify()}calculateCost(e,n,r){var s;const i=this.state.pricing;if(r&&((s=i.customModelPricing)!=null&&s[r])){const o=i.customModelPricing[r];return e*o.input/1e6+n*o.output/1e6}return e*i.inputPricePerMillion/1e6+n*i.outputPricePerMillion/1e6}getStats(){var l;const e=this.state.records,n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime(),i=new Date(n.getFullYear(),n.getMonth(),1).getTime(),s={totalInputTokens:0,totalOutputTokens:0,totalCost:0,bySource:{MANAGER:{input:0,output:0,cost:0,count:0},DEALER:{input:0,output:0,cost:0,count:0},POLYMARKET_DEALER:{input:0,output:0,cost:0,count:0}},byOperation:{},today:{input:0,output:0,cost:0},thisMonth:{input:0,output:0,cost:0},dealerMetrics:{avgTokensPerCoin:0,avgTokensPerCycle:0,totalCoinsAnalyzed:0},managerMetrics:{avgTokensPerQuery:0,totalQueries:0}};let o=0,a=0;for(const c of e){const u=this.calculateCost(c.inputTokens,c.outputTokens,c.model);s.totalInputTokens+=c.inputTokens,s.totalOutputTokens+=c.outputTokens,s.totalCost+=u,s.bySource[c.source].input+=c.inputTokens,s.bySource[c.source].output+=c.outputTokens,s.bySource[c.source].cost+=u,s.bySource[c.source].count++,s.byOperation[c.operation]||(s.byOperation[c.operation]={input:0,output:0,cost:0,count:0}),s.byOperation[c.operation].input+=c.inputTokens,s.byOperation[c.operation].output+=c.outputTokens,s.byOperation[c.operation].cost+=u,s.byOperation[c.operation].count++,c.timestamp>=r&&(s.today.input+=c.inputTokens,s.today.output+=c.outputTokens,s.today.cost+=u),c.timestamp>=i&&(s.thisMonth.input+=c.inputTokens,s.thisMonth.output+=c.outputTokens,s.thisMonth.cost+=u),c.source==="DEALER"&&(o+=c.inputTokens+c.outputTokens,a++,(l=c.metadata)!=null&&l.coinsAnalyzed&&(s.dealerMetrics.totalCoinsAnalyzed+=c.metadata.coinsAnalyzed)),c.source==="MANAGER"&&s.managerMetrics.totalQueries++}if(s.dealerMetrics.totalCoinsAnalyzed>0&&(s.dealerMetrics.avgTokensPerCoin=o/s.dealerMetrics.totalCoinsAnalyzed),a>0&&(s.dealerMetrics.avgTokensPerCycle=o/a),s.managerMetrics.totalQueries>0){const c=s.bySource.MANAGER.input+s.bySource.MANAGER.output;s.managerMetrics.avgTokensPerQuery=c/s.managerMetrics.totalQueries}return s}getRecords(e=50,n){let r=this.state.records;return n&&(r=r.filter(i=>i.source===n)),r.slice(0,e)}}const Cs=new _at,dy={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash-Lite",description:"Economy",inputPricePerMillion:.075,outputPricePerMillion:.3}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},vu={gemini:{name:"Google Gemini",icon:"",color:"#4285F4",keyUrl:"https://aistudio.google.com/apikey"},openai:{name:"OpenAI",icon:"",color:"#10A37F",keyUrl:"https://platform.openai.com/api-keys"},claude:{name:"Anthropic Claude",icon:"",color:"#D97757",keyUrl:"https://console.anthropic.com/settings/keys"}},Iat={gemini:{minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},openai:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500},claude:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500}},tZ={CRITICAL:100,HIGH:75,NORMAL:50,LOW:25};class Fg{constructor(){this.queue=[],this.isProcessing=!1,this.lastRequestTime=0,this.consecutiveRateLimits=0,this.blockedUntil=0,this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,this.config={minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},this.onRateLimitCallback=null,console.log("[AIRequestQueue]  Initialized global request queue")}static getInstance(){return Fg.instance||(Fg.instance=new Fg),Fg.instance}setConfig(e){const n=Iat[e];n&&(this.config={...n},console.log(`[AIRequestQueue]  Config updated for provider: ${e}`))}setOnRateLimit(e){this.onRateLimitCallback=e}enqueue(e){return new Promise((n,r)=>{const i=this.generateId(),s={id:i,priority:e.priority,source:e.source,execute:e.execute,resolve:n,reject:r,timestamp:Date.now(),retries:0,provider:e.provider||"gemini"};this.insertByPriority(s);const o=this.queue.findIndex(a=>a.id===i)+1;console.log(`[AIRequestQueue]  Queued request #${i.slice(-6)} (position: ${o}, priority: ${e.priority}, source: ${e.source})`),this.isProcessing||this.processQueue()})}insertByPriority(e){const n=tZ[e.priority];let r=this.queue.length;for(let i=0;i<this.queue.length;i++){const s=tZ[this.queue[i].priority];if(n>s){r=i;break}}this.queue.splice(r,0,e)}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0,console.log("[AIRequestQueue]  Starting queue processing");this.queue.length>0;){const e=this.queue.shift();try{await this.waitForSlot();const n=Date.now(),r=await this.executeWithRetry(e),i=Date.now()-e.timestamp;this.successCount++,this.totalWaitTimeMs+=i,this.requestCount++,this.consecutiveRateLimits=0,console.log(`[AIRequestQueue]  Request #${e.id.slice(-6)} completed (wait: ${(i/1e3).toFixed(1)}s)`),e.resolve(r)}catch(n){this.failureCount++,console.error(`[AIRequestQueue]  Request #${e.id.slice(-6)} failed:`,n.message),e.reject(n)}}this.isProcessing=!1,console.log("[AIRequestQueue]  Queue empty, processing stopped")}}async executeWithRetry(e){let n;for(let r=0;r<=this.config.maxRetries;r++)try{return r>0&&console.log(`[AIRequestQueue]  Retry attempt ${r}/${this.config.maxRetries} for #${e.id.slice(-6)}`),await e.execute()}catch(i){if(n=i,this.isRateLimitError(i)){const o=this.parseRetryDelay(i);if(this.handleRateLimit(o),r<this.config.maxRetries){await this.waitForSlot();continue}}if(r===this.config.maxRetries)break;const s=this.calculateBackoff(r);console.log(`[AIRequestQueue]  Waiting ${(s/1e3).toFixed(1)}s before retry...`),await this.sleep(s)}throw n}async waitForSlot(){const e=Date.now();if(this.blockedUntil>e){const l=this.blockedUntil-e;console.log(`[AIRequestQueue]  Rate limited, waiting ${(l/1e3).toFixed(1)}s...`),await this.sleep(l)}const n=Math.pow(2,Math.min(this.consecutiveRateLimits,6)),r=this.config.minIntervalMs*n,i=Math.min(r,this.config.maxBackoffMs),s=Math.random()*this.config.jitterMs,o=i+s,a=e-this.lastRequestTime;if(a<o){const l=o-a;this.consecutiveRateLimits>0&&console.log(`[AIRequestQueue]  Throttling: waiting ${(l/1e3).toFixed(1)}s (backoff level: ${this.consecutiveRateLimits})...`),await this.sleep(l)}this.lastRequestTime=Date.now()}handleRateLimit(e){this.consecutiveRateLimits++;const n=Math.min(this.config.baseBackoffMs+Math.pow(2,this.consecutiveRateLimits)*5e3,this.config.maxBackoffMs);this.blockedUntil=Date.now()+e*1e3+n;const r=e+Math.ceil(n/1e3);if(console.log(`[AIRequestQueue]  Rate limited (hit #${this.consecutiveRateLimits}). Blocked for ${r}s`),this.onRateLimitCallback){const i=this.consecutiveRateLimits>=this.config.maxRetries;this.onRateLimitCallback({consecutiveHits:this.consecutiveRateLimits,blockedForSeconds:r,exhausted:i})}}calculateBackoff(e){const n=this.config.baseBackoffMs*Math.pow(2,e),r=Math.random()*this.config.jitterMs;return Math.min(n+r,this.config.maxBackoffMs)}isRateLimitError(e){const n=typeof e=="string"?e:JSON.stringify(e);return n.includes("429")||n.includes("RESOURCE_EXHAUSTED")||n.includes("Too Many Requests")||n.includes("quota")||n.includes("rate_limit")||n.includes("rate limit")}parseRetryDelay(e){try{const n=typeof e=="string"?e:JSON.stringify(e),r=n.match(/retry in (\d+\.?\d*)s/i);if(r)return Math.ceil(parseFloat(r[1]));const i=n.match(/"retryDelay"\s*:\s*"(\d+)s?"/i);if(i)return parseInt(i[1]);const s=n.match(/retry-after[:\s]+(\d+)/i);if(s)return parseInt(s[1])}catch{}return 30}generateId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}sleep(e){return new Promise(n=>setTimeout(n,e))}getMetrics(){return{queueLength:this.queue.length,avgWaitTimeMs:this.requestCount>0?this.totalWaitTimeMs/this.requestCount:0,successCount:this.successCount,failureCount:this.failureCount,lastRequestTime:this.lastRequestTime,consecutiveRateLimits:this.consecutiveRateLimits,isProcessing:this.isProcessing}}clear(){const e=this.queue.length;this.queue.forEach(n=>{n.reject(new Error("Queue cleared"))}),this.queue=[],console.log(`[AIRequestQueue]  Cleared ${e} pending requests`)}resetMetrics(){this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,console.log("[AIRequestQueue]  Metrics reset")}}const Ws=Fg.getInstance();class Rat{constructor(){this.providerType="gemini",this.client=null,this.modelName="gemini-2.5-flash"}isInitialized(){return this.client!==null}initialize(e){this.client=new Xhe({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance.",parameters:{type:xe.OBJECT,properties:{token:{type:xe.STRING,description:"Optional: Symbol or Mint Address of specific token to check."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet.",parameters:{type:xe.OBJECT,properties:{inputToken:{type:xe.STRING,description:"Symbol or Mint Address of token to sell"},outputToken:{type:xe.STRING,description:"Symbol or Mint Address of token to buy"},amount:{type:xe.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:xe.OBJECT,properties:{amount:{type:xe.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet.",parameters:{type:xe.OBJECT,properties:{tokenMint:{type:xe.STRING,description:"Mint address of the token to transfer"},amount:{type:xe.NUMBER,description:"Amount of tokens to transfer"}},required:["tokenMint","amount"]}},s={name:"getMarketPrice",description:"Get the current market price for a given symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT")'}},required:["symbol"]}},o={name:"getOHLCV",description:"Get OHLCV candlestick data for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:"Trading symbol"},timeframe:{type:xe.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D")'}},required:["symbol"]}},a={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:"Trading symbol"},indicator:{type:xe.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:xe.STRING,description:"Timeframe"}},required:["symbol","indicator"]}},l={name:"getTradingViewSummary",description:"Get TradingView buy/sell/neutral recommendation summary.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:"Trading symbol"}},required:["symbol"]}},c={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault and positions.",parameters:{type:xe.OBJECT,properties:{}}},u={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:xe.OBJECT,properties:{}}},h={name:"getHLMarketData",description:"Get market data for a Hyperliquid asset.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:'Asset symbol (e.g., "BTC", "ETH")'}},required:["coin"]}},m={name:"createHLOrder",description:"Place an order on Hyperliquid Testnet.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},isBuy:{type:xe.BOOLEAN,description:"True for LONG, False for SHORT"},size:{type:xe.NUMBER,description:"Size of the order"},usdcAmount:{type:xe.NUMBER,description:"Amount in USDC to spend"},orderType:{type:xe.STRING,description:'Order type: "limit", "market"'},price:{type:xe.NUMBER,description:"Limit price"},leverage:{type:xe.NUMBER,description:"Leverage multiplier (1-50)"},stopLoss:{type:xe.NUMBER,description:"Stop loss price"},takeProfit:{type:xe.NUMBER,description:"Take profit price"},reduceOnly:{type:xe.BOOLEAN,description:"True to only reduce existing position"}},required:["coin","isBuy","orderType"]}},g={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},orderId:{type:xe.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},x={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},leverage:{type:xe.NUMBER,description:"New leverage (1-50)"},isCross:{type:xe.BOOLEAN,description:"True for cross margin"}},required:["coin","leverage","isCross"]}},v={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},size:{type:xe.NUMBER,description:"Optional: partial close size"},orderType:{type:xe.STRING,description:'Order type: "market" or "limit"'},price:{type:xe.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},b={name:"withdrawFromHL",description:"Execute a USDC withdrawal from Hyperliquid Testnet.",parameters:{type:xe.OBJECT,properties:{amount:{type:xe.NUMBER,description:"Amount of USDC to withdraw"}},required:["amount"]}},w={name:"getDealerTradeHistory",description:"Query the Hyperliquid Dealer's trade history and AI reasoning.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Optional: Filter by coin"},limit:{type:xe.NUMBER,description:"Max records to return (default 10)"},includeReasoning:{type:xe.BOOLEAN,description:"Include full AI reasoning"}}}},k={name:"scheduleTask",description:"Schedule a task to execute at a specific time or when a market condition is met.",parameters:{type:xe.OBJECT,properties:{taskType:{type:xe.STRING,description:"Type: SWAP, TRANSFER, ALERT, or HL_ORDER"},inputToken:{type:xe.STRING,description:"For SWAP/TRANSFER: Input token"},outputToken:{type:xe.STRING,description:"For SWAP: Output token"},amount:{type:xe.NUMBER,description:"Amount to swap or transfer"},coin:{type:xe.STRING,description:"For HL_ORDER: Asset symbol"},isBuy:{type:xe.BOOLEAN,description:"For HL_ORDER: True for LONG"},size:{type:xe.NUMBER,description:"For HL_ORDER: Order size"},orderType:{type:xe.STRING,description:"For HL_ORDER: Order type"},price:{type:xe.NUMBER,description:"For HL_ORDER: Limit price"},leverage:{type:xe.NUMBER,description:"For HL_ORDER: Leverage"},stopLoss:{type:xe.NUMBER,description:"For HL_ORDER: Stop loss"},takeProfit:{type:xe.NUMBER,description:"For HL_ORDER: Take profit"},reduceOnly:{type:xe.BOOLEAN,description:"For HL_ORDER: Reduce only"},delayMinutes:{type:xe.NUMBER,description:"For time-based: Delay in minutes"},conditionIndicator:{type:xe.STRING,description:"For condition-based: Indicator name"},conditionSymbol:{type:xe.STRING,description:"For condition-based: Trading symbol"},conditionOperator:{type:xe.STRING,description:"For condition-based: Comparison operator"},conditionValue:{type:xe.NUMBER,description:"For condition-based: Threshold value"},conditionTimeframe:{type:xe.STRING,description:"For condition-based: Timeframe"}},required:["taskType"]}};return[{functionDeclarations:[e,n,r,i,k,s,o,a,l,c,u,h,m,g,x,v,b,w]}]}async sendMessage(e,n,r,i){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");const s=this.client,o=this.modelName,a=()=>this.getTools();return Ws.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{var m,g,x;const l=e.map(v=>({role:v.role==="model"?"model":"user",parts:[{text:v.content}]})),u=await s.chats.create({model:o,config:{systemInstruction:r,tools:i||a()},history:l}).sendMessage({message:n});let h="";if(u.candidates&&((g=(m=u.candidates[0])==null?void 0:m.content)!=null&&g.parts))for(const v of u.candidates[0].content.parts)v.text&&(h+=v.text);return{text:h,usageMetadata:u.usageMetadata?{promptTokenCount:u.usageMetadata.promptTokenCount||0,candidatesTokenCount:u.usageMetadata.candidatesTokenCount||0}:void 0,functionCalls:((x=u.functionCalls)==null?void 0:x.map(v=>({name:v.name,args:v.args})))||void 0}}})}async sendJsonAnalysis(e,n){if(!this.client)return console.warn("[GeminiProvider] Client not initialized"),null;const r=this.client,i=this.modelName;return Ws.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await r.chats.create({model:i,config:{systemInstruction:n,responseMimeType:"application/json"}}).sendMessage({message:e});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const u of o.candidates[0].content.parts)u.text&&(a+=u.text);return a||null}})}async sendBatchAnalysis(e,n,r){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.client,s=this.modelName,o=this.getBatchDealerSystemInstruction(),a=(u,h,m)=>this.normalizeDecisions(u,h,m),l=e.cycleSummary?`
[RECENT ACTIVITY CONTEXT]
${e.cycleSummary}
`:"",c=`
            [USER STRATEGY]
            ${n}
            ${l}
            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON Array of decisions.
        `;return Ws.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var v,b;if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const h=await i.chats.create({model:s,config:{systemInstruction:o,responseMimeType:"application/json"}}).sendMessage({message:c});if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");let m="";if(h.candidates&&((b=(v=h.candidates[0])==null?void 0:v.content)!=null&&b.parts))for(const w of h.candidates[0].content.parts)w.text&&(m+=w.text);if(!m)return console.warn("[GeminiProvider] Empty response from batch analysis"),{decisions:[]};const g=m.replace(/```json/g,"").replace(/```/g,"").trim();let x;try{x=JSON.parse(g)}catch(w){return console.error("[GeminiProvider] Failed to parse batch response:",w),{decisions:[]}}return a(x,h.usageMetadata,e)}})}normalizeDecisions(e,n,r){let i=[],s;Array.isArray(e)?i=e:typeof e=="object"&&(e.decisions?i=e.decisions:i=[e],e.cycleSummary&&typeof e.cycleSummary=="string"&&(s=e.cycleSummary.slice(0,350)));const a=i.map(u=>u.action==="LONG"?{...u,action:"BUY"}:u.action==="SHORT"?{...u,action:"SELL"}:u.action==="WAIT"?{...u,action:"HOLD"}:u).filter(u=>{const h=typeof u.coin=="string"&&u.coin.length>0,m=["BUY","SELL","HOLD","CLOSE"].includes(u.action);return h&&m}),l=new Map,c={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const u of a){const h=u.coin.toUpperCase(),m=l.get(h);if(!m)l.set(h,u);else{const g=c[m.action]||0,x=c[u.action]||0;(x>g||x===g&&(u.confidence||0)>(m.confidence||0))&&l.set(h,u)}}return{decisions:Array.from(l.values()),cycleSummary:s}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            You will receive:
            1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
            2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
            3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.
            4. [RECENT ACTIVITY CONTEXT]: Summary of your previous analysis cycles (if available).

            You must return valid JSON with this EXACT structure:
            {
                "decisions": [
                    {
                        "coin": "Symbol analyzed",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": number (0.0 to 1.0),
                        "reason": "Format: [ACTION] Position Status + Explanation. Max 600 chars.",
                        "suggestedLeverage": number (1-50, optional),
                        "sizeUSDC": number (optional),
                        "orderType": "limit" | "market",
                        "price": number (for limit orders, optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ],
                "cycleSummary": "Brief 1-2 sentence summary of this analysis cycle for context in the next cycle. Include: key market observations, actions taken, and any notable patterns. Max 300 chars."
            }

            CRITICAL RULES:
            1. ONLY output valid JSON with the structure above.
            2. Must return one decision object per coin provided in the decisions array.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
            5. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            6. CYCLE SUMMARY: ALWAYS include a cycleSummary field with a brief context for the next cycle.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD with no position: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY with no position: "LONG: No position. RSI divergence detected. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE with position: "CLOSE: In LONG at $95000, PnL: +$150. Take profit target reached."
        `}}class Oat{constructor(){this.providerType="openai",this.apiKey="",this.modelName="gpt-4o-mini",this.baseUrl="https://api.openai.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToOpenAI(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({type:"function",function:{name:i.name,description:i.description,parameters:this.convertGeminiParamsToOpenAI(i.parameters)}});return n}convertGeminiParamsToOpenAI(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertGeminiTypeToOpenAI(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertGeminiTypeToOpenAI(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");return Ws.enqueue({priority:"HIGH",source:"operator",provider:"openai",execute:async()=>{var g;const s=[{role:"system",content:r}];for(const x of e)s.push({role:x.role==="model"?"assistant":"user",content:x.content});s.push({role:"user",content:n});const o=this.convertToolsToOpenAI(i),a={model:this.modelName,messages:s};o.length>0&&(a.tools=o,a.tool_choice="auto");const l=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(a)});if(!l.ok){const x=await l.text();throw new Error(`OpenAI API error: ${l.status} ${x}`)}const c=await l.json(),u=(g=c.choices)==null?void 0:g[0],h=u==null?void 0:u.message,m=[];if(h!=null&&h.tool_calls)for(const x of h.tool_calls)x.type==="function"&&m.push({name:x.function.name,args:JSON.parse(x.function.arguments||"{}")});return{text:(h==null?void 0:h.content)||"",usageMetadata:c.usage?{promptTokenCount:c.usage.prompt_tokens||0,candidatesTokenCount:c.usage.completion_tokens||0}:void 0,functionCalls:m.length>0?m:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Ws.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"openai",execute:async()=>{var s,o,a;const r=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:n},{role:"user",content:e}],response_format:{type:"json_object"}})});if(!r.ok){const l=await r.text();throw new Error(`OpenAI API error: ${r.status} ${l}`)}return((a=(o=(s=(await r.json()).choices)==null?void 0:s[0])==null?void 0:o.message)==null?void 0:a.content)||null}}):(console.warn("[OpenAIProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with decisions array and cycleSummary.
        `;return Ws.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"openai",execute:async()=>{var u,h,m,g,x;const o=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:i},{role:"user",content:s}],response_format:{type:"json_object"}}),signal:r});if(!o.ok){const v=await o.text();throw new Error(`OpenAI API error: ${o.status} ${v}`)}const a=await o.json(),l=(m=(h=(u=a.choices)==null?void 0:u[0])==null?void 0:h.message)==null?void 0:m.content;if(!l)throw new Error("Empty response from OpenAI");if(((x=(g=a.choices)==null?void 0:g[0])==null?void 0:x.finish_reason)==="length")throw new Error("Response truncated by length limit");let c;try{c=JSON.parse(l)}catch(v){throw new Error(`Failed to parse JSON response: ${v.message}`)}return this.normalizeDecisions(c)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,u=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&u}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),u=o.get(c);if(!u)o.set(c,l);else{const h=a[u.action]||0,m=a[l.action]||0;(m>h||m===h&&(l.confidence||0)>(u.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            RESPONSE FORMAT:
            You MUST return a JSON object with a "decisions" array:
            {
                "decisions": [
                    {
                        "coin": "BTC",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": 0.0 to 1.0,
                        "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
                        "suggestedLeverage": 1-50,
                        "sizeUSDC": number,
                        "orderType": "limit" | "market",
                        "price": number (optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ]
            }

            CRITICAL RULES:
            1. Return valid JSON with "decisions" array.
            2. One decision per coin provided.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            5. Consider trading costs before recommending trades.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."
        `}}class Mat{constructor(){this.providerType="claude",this.apiKey="",this.modelName="claude-sonnet-4-20250514",this.baseUrl="https://api.anthropic.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToClaudeFormat(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({name:i.name,description:i.description,input_schema:this.convertParamsToJsonSchema(i.parameters)});return n}convertParamsToJsonSchema(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertTypeToJsonSchema(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertTypeToJsonSchema(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");return Ws.enqueue({priority:"HIGH",source:"operator",provider:"claude",execute:async()=>{const s=[];for(const m of e)s.push({role:m.role==="model"?"assistant":"user",content:m.content});s.push({role:"user",content:n});const o=this.convertToolsToClaudeFormat(i),a={model:this.modelName,max_tokens:4096,system:r,messages:s};o.length>0&&(a.tools=o);const l=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify(a)});if(!l.ok){const m=await l.text();throw new Error(`Claude API error: ${l.status} ${m}`)}const c=await l.json();let u="";const h=[];for(const m of c.content||[])m.type==="text"?u+=m.text:m.type==="tool_use"&&h.push({name:m.name,args:m.input||{}});return{text:u,usageMetadata:c.usage?{promptTokenCount:c.usage.input_tokens||0,candidatesTokenCount:c.usage.output_tokens||0}:void 0,functionCalls:h.length>0?h:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Ws.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"claude",execute:async()=>{const r=`${n}

IMPORTANT: You MUST respond with ONLY valid JSON. No explanations, no markdown code blocks, just the raw JSON object.`,i=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:r,messages:[{role:"user",content:e},{role:"assistant",content:"{"}]})});if(!i.ok){const a=await i.text();throw new Error(`Claude API error: ${i.status} ${a}`)}const s=await i.json();let o="";for(const a of s.content||[])a.type==="text"&&(o+=a.text);return"{"+o}}):(console.warn("[ClaudeProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with a "decisions" array.
        `;return Ws.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"claude",execute:async()=>{const o=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:i,messages:[{role:"user",content:s},{role:"assistant",content:'{"decisions":'}]}),signal:r});if(!o.ok){const h=await o.text();throw new Error(`Claude API error: ${o.status} ${h}`)}const a=await o.json();let l="";for(const h of a.content||[])h.type==="text"&&(l+=h.text);if(!l)throw new Error("Empty response from Claude");const c='{"decisions":'+l;let u;try{u=JSON.parse(c)}catch{try{const h=l.replace(/```json/g,"").replace(/```/g,"").trim();u={decisions:JSON.parse("["+h)}}catch(h){throw new Error(`Failed to parse JSON response: ${h.message}`)}}return this.normalizeDecisions(u)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,u=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&u}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),u=o.get(c);if(!u)o.set(c,l);else{const h=a[u.action]||0,m=a[l.action]||0;(m>h||m===h&&(l.confidence||0)>(u.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`You are Hyperliquid Dealer, an autonomous crypto trading engine.
Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

RESPONSE FORMAT:
You MUST respond with ONLY valid JSON. The response will be prefilled with '{"decisions":' so you should continue with the array.

Each decision in the array should have:
{
    "coin": "BTC",
    "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
    "confidence": 0.0 to 1.0,
    "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
    "suggestedLeverage": 1-50,
    "sizeUSDC": number,
    "orderType": "limit" | "market",
    "price": number (optional),
    "stopLoss": number (optional, ONLY for BUY/SELL actions),
    "takeProfit": number (optional, ONLY for BUY/SELL actions)
}

CRITICAL RULES:
1. Continue the JSON array after the prefill.
2. One decision per coin provided.
3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
5. Consider trading costs before recommending trades.

REASONING FORMAT (CRITICAL - MUST FOLLOW):
- Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
- POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
  - Check each coin's 'openPosition.hasPosition' field.
  - If hasPosition === false: MUST say "No position." at the START of your reason.
  - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
- ENTRY/SL/TP VALUES:
  - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
  - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
- CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
- Examples:
  - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
  - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
  - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."`}}class Lat{constructor(){this.providers=new Map,this.providers.set("gemini",new Rat),this.providers.set("openai",new Oat),this.providers.set("claude",new Mat),this.initializeFromConfig(),Un.subscribe(()=>{this.initializeFromConfig()})}initializeFromConfig(){const e=Un.getSnapshot();for(const[n,r]of Object.entries(e.credentials))r.isConfigured&&r.apiKey&&this.initializeProvider(n,r.apiKey);for(const[n,r]of Object.entries(e.componentConfigs)){const i=this.getProvider(r.providerType);i&&"setModel"in i&&i.setModel(r.modelId)}}getProvider(e){return this.providers.get(e)||null}initializeProvider(e,n){const r=this.providers.get(e);r&&(r.initialize(n),console.log(`[ProviderFactory] Initialized ${e} provider`))}getProviderForComponent(e){const r=Un.getSnapshot().componentConfigs[e];if(!r)return console.warn(`[ProviderFactory] No config found for component: ${e}`),null;const i=this.providers.get(r.providerType);if(!i)return console.warn(`[ProviderFactory] Provider ${r.providerType} not found`),null;if(!i.isInitialized()){const s=Un.getApiKey(r.providerType);if(s)i.initialize(s);else return console.warn(`[ProviderFactory] Provider ${r.providerType} not initialized (no API key)`),null}return"setModel"in i&&i.setModel(r.modelId),i}getModelForComponent(e){var r;return((r=Un.getSnapshot().componentConfigs[e])==null?void 0:r.modelId)||""}isComponentReady(e){const n=this.getProviderForComponent(e);return n!==null&&n.isInitialized()}getAvailableProviders(){return Array.from(this.providers.keys())}getModelsForProvider(e){return dy[e]||[]}validateConfiguration(){const e=[],n=["operator","hyperliquidDealer","polymarketDealer"];for(const r of n)this.isComponentReady(r)||e.push(r);return{valid:e.length===0,missing:e}}}const ig=new Lat;function Dat(){const t={name:"searchLiquidityPools",description:`Search and filter liquidity pools on Meteora and Raydium (Solana DEVNET).
        
        Supports filtering by:
        - Token pair (e.g., SOL/USDC)
        - Protocol (meteora, raydium, or both)
        - Minimum TVL
        - Minimum volume (with timeframe)
        - Minimum APY
        - Sorting by tvl, volume, apy, or fee
        
        IMPORTANT: If user doesn't specify protocol, ASK which they prefer.`,parameters:{type:xe.OBJECT,properties:{tokenA:{type:xe.STRING,description:'First token symbol (e.g., "SOL")'},tokenB:{type:xe.STRING,description:'Second token symbol (e.g., "USDC")'},protocol:{type:xe.STRING,description:'Filter by protocol: "meteora", "raydium", or empty for both'},minTVL:{type:xe.NUMBER,description:"Minimum TVL in USD"},minVolume:{type:xe.NUMBER,description:"Minimum volume in USD"},volumeTimeframe:{type:xe.STRING,description:'Timeframe for volume: "5m", "1h", "24h", "7d"'},minAPY:{type:xe.NUMBER,description:"Minimum APY percentage"},sortBy:{type:xe.STRING,description:'Sort by: "tvl", "volume", "apy"'},limit:{type:xe.NUMBER,description:"Maximum results (default 10)"}}}},e={name:"getPoolDetails",description:"Get detailed information about a specific liquidity pool.",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address or ID"}},required:["poolAddress"]}},n={name:"getTopLiquidityPools",description:`Get ranked list of top liquidity pools by volume, APY, or TVL.
        
        Examples:
        - "pools com maior volume em 5 minutos"  criteria: "volume", volumeTimeframe: "5m"
        - "melhor rentabilidade com TVL > $5000"  criteria: "apy", minTVL: 5000`,parameters:{type:xe.OBJECT,properties:{criteria:{type:xe.STRING,description:'Ranking criteria: "volume", "apy", or "tvl"'},volumeTimeframe:{type:xe.STRING,description:'Timeframe for volume criteria: "5m", "1h", "24h", "7d"'},minTVL:{type:xe.NUMBER,description:"Minimum TVL filter in USD"},protocol:{type:xe.STRING,description:'Filter by protocol: "meteora", "raydium", or empty for all'},limit:{type:xe.NUMBER,description:"Number of results (default 10)"}},required:["criteria"]}},r={name:"compareLiquidityPools",description:"Compare multiple pools side by side or compare protocols for a token pair.",parameters:{type:xe.OBJECT,properties:{poolAddresses:{type:xe.ARRAY,items:{type:xe.STRING},description:"Array of pool addresses to compare"},tokenPair:{type:xe.STRING,description:'Token pair to compare across protocols (e.g., "SOL/USDC")'}}}},i={name:"getPoolHistory",description:"Get historical data for a pool (TVL, volume, APY over time).",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},metric:{type:xe.STRING,description:'Metric: "tvl", "volume", or "apy"'},days:{type:xe.NUMBER,description:"Number of days of history (default 7)"}},required:["poolAddress","metric"]}},s={name:"getLPPositions",description:"Get all liquidity positions for the connected wallet across Meteora and Raydium.",parameters:{type:xe.OBJECT,properties:{protocol:{type:xe.STRING,description:'Optional: filter by "meteora" or "raydium"'}}}},o={name:"getLPPositionDetails",description:"Get detailed information about a specific LP position.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address or NFT mint"}},required:["positionAddress"]}},a={name:"getUnclaimedLPRewards",description:"Get unclaimed fees and rewards from LP positions.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Optional: specific position. If empty, shows all."}}}},l={name:"estimateLPPositionPnL",description:"Calculate profit/loss for an LP position including impermanent loss and fees earned.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address"}},required:["positionAddress"]}},c={name:"addLiquidity",description:`Add liquidity to a pool on Meteora or Raydium.
        
        BEFORE EXECUTING:
        1. Confirm pool address and protocol
        2. Confirm token amounts
        3. For concentrated liquidity (DLMM/CLMM), confirm price range
        4. Show simulation result first
        5. Get user confirmation
        
        IMPORTANT: If protocol not specified, ASK the user first.`,parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},amountA:{type:xe.NUMBER,description:"Amount of first token"},amountB:{type:xe.NUMBER,description:"Amount of second token"},priceMin:{type:xe.NUMBER,description:"Minimum price for range (DLMM/CLMM)"},priceMax:{type:xe.NUMBER,description:"Maximum price for range (DLMM/CLMM)"},slippageBps:{type:xe.NUMBER,description:"Slippage tolerance in basis points (default 50)"}},required:["poolAddress","amountA","amountB"]}},u={name:"removeLiquidity",description:`Remove liquidity from an LP position.
        
        BEFORE EXECUTING:
        1. Show current position value
        2. Confirm removal percentage
        3. Get user confirmation`,parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address"},percentage:{type:xe.NUMBER,description:"Percentage to remove (1-100)"},slippageBps:{type:xe.NUMBER,description:"Slippage tolerance in basis points"}},required:["positionAddress","percentage"]}},h={name:"claimLPFees",description:"Claim accumulated trading fees from an LP position.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address"}},required:["positionAddress"]}},m={name:"claimLPRewards",description:"Claim farming/staking rewards from an LP position.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address"}},required:["positionAddress"]}},g={name:"rebalanceLPPosition",description:"Rebalance an LP position to a new price range (closes and reopens with new range).",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Current position address"},newPriceMin:{type:xe.NUMBER,description:"New minimum price"},newPriceMax:{type:xe.NUMBER,description:"New maximum price"}},required:["positionAddress","newPriceMin","newPriceMax"]}},x={name:"simulateAddLiquidity",description:"Simulate adding liquidity without executing. Shows expected outcome, share of pool, and price impact.",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},amountA:{type:xe.NUMBER,description:"Amount of first token"},amountB:{type:xe.NUMBER,description:"Amount of second token"},priceMin:{type:xe.NUMBER,description:"Min price for range (optional)"},priceMax:{type:xe.NUMBER,description:"Max price for range (optional)"}},required:["poolAddress","amountA","amountB"]}},v={name:"estimateImpermanentLoss",description:"Calculate potential impermanent loss for a pool based on price change scenarios.",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},priceChangePercent:{type:xe.NUMBER,description:"Expected price change in percentage (e.g., 10 for +10%, -20 for -20%)"}},required:["poolAddress","priceChangePercent"]}},b={name:"calculateOptimalPriceRange",description:"Suggest an optimal price range for concentrated liquidity based on volatility and risk level.",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},riskLevel:{type:xe.STRING,description:'Risk tolerance: "conservative", "moderate", or "aggressive"'}},required:["poolAddress","riskLevel"]}},w={name:"getLPSwapQuote",description:"Get a swap quote through liquidity pools.",parameters:{type:xe.OBJECT,properties:{inputToken:{type:xe.STRING,description:"Input token symbol or mint"},outputToken:{type:xe.STRING,description:"Output token symbol or mint"},amount:{type:xe.NUMBER,description:"Amount to swap"},slippageBps:{type:xe.NUMBER,description:"Slippage tolerance in basis points"}},required:["inputToken","outputToken","amount"]}},k={name:"createLiquidityPool",description:`Create a new liquidity pool on Meteora or Raydium.
        
        REQUIRES CONFIRMATION:
        1. Protocol (Meteora DLMM or Raydium CLMM/CPMM)
        2. Token pair
        3. Fee tier
        4. Initial price
        5. Initial liquidity amounts`,parameters:{type:xe.OBJECT,properties:{protocol:{type:xe.STRING,description:'Protocol: "meteora_dlmm", "raydium_clmm", or "raydium_cpmm"'},tokenA:{type:xe.STRING,description:"First token mint address"},tokenB:{type:xe.STRING,description:"Second token mint address"},feeBps:{type:xe.NUMBER,description:"Fee in basis points (e.g., 25 = 0.25%)"},initialPrice:{type:xe.NUMBER,description:"Initial price of tokenA in terms of tokenB"},initialLiquidityA:{type:xe.NUMBER,description:"Optional: initial amount of tokenA"},initialLiquidityB:{type:xe.NUMBER,description:"Optional: initial amount of tokenB"}},required:["protocol","tokenA","tokenB","feeBps","initialPrice"]}},C={name:"estimatePoolCreationCost",description:"Estimate the cost (in SOL) to create a new liquidity pool.",parameters:{type:xe.OBJECT,properties:{protocol:{type:xe.STRING,description:'Protocol: "meteora_dlmm", "raydium_clmm", or "raydium_cpmm"'}},required:["protocol"]}};return[t,e,n,r,i,s,o,a,l,c,u,h,m,g,x,v,b,w,k,C]}class jat{constructor(){this.client=null,this.modelName="gemini-2.5-flash",this.initFromConfig()}initFromConfig(){var i,s;const e=Un.getApiKey("gemini"),n=(s=(i=window.process)==null?void 0:i.env)==null?void 0:s.GEMINI_API_KEY,r=e||n;r&&this.initialize(r)}initialize(e){this.client=new Xhe({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}setApiKey(e){Un.setApiKey("gemini",e),this.initialize(e)}getApiKey(){return Un.getApiKey("gemini")}clearApiKey(){Un.clearApiKey("gemini"),this.client=null}isInitialized(){return this.client!==null}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance. If no token is specified, ask the user if they want to see all balances or a specific token.",parameters:{type:xe.OBJECT,properties:{token:{type:xe.STRING,description:"Optional: Symbol (e.g., SOL, USDC) or Mint Address of specific token to check. If not provided, show all balances."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet. If the token symbol is not known (not SOL/USDC/RAY), you MUST ask the user for the Mint Address.",parameters:{type:xe.OBJECT,properties:{inputToken:{type:xe.STRING,description:"Symbol (e.g., SOL) or Mint Address of token to sell"},outputToken:{type:xe.STRING,description:"Symbol (e.g., RAY) or Mint Address of token to buy"},amount:{type:xe.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:xe.OBJECT,properties:{amount:{type:xe.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"scheduleTask",description:`Schedule a task (swap, transfer, alert, or Hyperliquid order) to execute either at a specific time OR when a market condition is met.
      
      CRITICAL: You MUST provide ALL required parameters. If ANY information is missing, ask the user for it instead of calling this tool.
      
      For TIME-BASED tasks: provide 'delayMinutes'
      For CONDITION-BASED tasks: provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'.
      
      IMPORTANT: 'conditionTimeframe' is REQUIRED for condition-based tasks. If the user does not specify it (e.g., "1h", "4h", "1d"), you MUST ASK them for it. DO NOT DEFAULT TO 'D'.

      Examples:
      - Time-based: delayMinutes=5
      - Condition (SWAP): taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"
      - Condition (HL_ORDER): taskType="HL_ORDER", coin="BTC", isBuy=true, size=0.001, orderType="limit", price=90000, leverage=10, stopLoss=88000, takeProfit=99000, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"`,parameters:{type:xe.OBJECT,properties:{taskType:{type:xe.STRING,description:"Type of task: SWAP, TRANSFER, ALERT, or HL_ORDER (Hyperliquid order)"},inputToken:{type:xe.STRING,description:"For SWAP: Input token symbol or mint address. For TRANSFER: Token to transfer. Not used for ALERT or HL_ORDER."},outputToken:{type:xe.STRING,description:"For SWAP: Output token symbol or mint address. Not used for other task types."},amount:{type:xe.NUMBER,description:"Amount to swap or transfer. Not used for ALERT or HL_ORDER."},coin:{type:xe.STRING,description:'For HL_ORDER: Asset symbol (e.g., "BTC", "ETH", "SOL"). Required for HL_ORDER.'},isBuy:{type:xe.BOOLEAN,description:"For HL_ORDER: True for LONG/BUY, False for SHORT/SELL. Required for HL_ORDER."},size:{type:xe.NUMBER,description:"For HL_ORDER: Size of the order. Required for HL_ORDER."},orderType:{type:xe.STRING,description:'For HL_ORDER: Order type ("limit", "market", "ioc", "alo"). Ask user if not specified.'},price:{type:xe.NUMBER,description:"For HL_ORDER: Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:xe.NUMBER,description:"For HL_ORDER: Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:xe.NUMBER,description:"For HL_ORDER: Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:xe.NUMBER,description:"For HL_ORDER: Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:xe.BOOLEAN,description:"For HL_ORDER: True to only reduce existing position. Default false."},delayMinutes:{type:xe.NUMBER,description:"For time-based: Number of minutes to wait before executing. Leave empty for condition-based."},conditionIndicator:{type:xe.STRING,description:"For condition-based: Indicator name (rsi, macd, ema, sma, stoch, price). Required for condition-based tasks."},conditionSymbol:{type:xe.STRING,description:"For condition-based: Trading symbol (e.g., BTCUSDT, SOLUSDT). Required for condition-based tasks."},conditionOperator:{type:xe.STRING,description:"For condition-based: Comparison operator (<, >, <=, >=, ==). Required for condition-based tasks."},conditionValue:{type:xe.NUMBER,description:"For condition-based: Threshold value to compare against. Required for condition-based tasks."},conditionTimeframe:{type:xe.STRING,description:"For condition-based: Timeframe (1, 5, 15, 60, 240, D, W). REQUIRED. If missing, ask user."}},required:["taskType"]}},s={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet. You can ONLY send to the Owner, not to any other address.",parameters:{type:xe.OBJECT,properties:{tokenMint:{type:xe.STRING,description:"Mint address of the token to transfer"},amount:{type:xe.NUMBER,description:"Amount of tokens to transfer (in human-readable units, not raw)"}},required:["tokenMint","amount"]}},o={name:"getMarketPrice",description:"Get the current market price, exchange, and last update time for a given symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},a={name:"getOHLCV",description:"Get OHLCV (Open, High, Low, Close, Volume) candlestick data for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},timeframe:{type:xe.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol"]}},l={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},indicator:{type:xe.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:xe.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol","indicator"]}},c={name:"getTradingViewSummary",description:"Get the TradingView buy/sell/neutral recommendation summary for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},u={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault (USDC) and positions.",parameters:{type:xe.OBJECT,properties:{}}},h={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:xe.OBJECT,properties:{}}},m={name:"getHLMarketData",description:"Get market data (price, orderbook) for a Hyperliquid asset.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL")'}},required:["coin"]}},g={name:"createHLOrder",description:`Place an order on Hyperliquid Testnet. 
      
      **USDC-BASED ORDERS:**
      If user says "comprar X USDC de COIN", provide usdcAmount=X and the system will automatically calculate the size.
      
      CRITICAL: You MUST ask the user for ALL required information before calling this tool:
      1. Coin (asset symbol)
      2. Direction (LONG/BUY or SHORT/SELL)
      3. Size (amount) OR usdcAmount (USDC to spend)
      4. Order Type (LIMIT or MARKET)
      5. Price (required for LIMIT orders)
      6. Leverage (1-50x, default 1x if not specified)
      7. Stop Loss (optional)
      8. Take Profit (optional)
      
      Minimum order value: $10 USD`,parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL", "HYPE")'},isBuy:{type:xe.BOOLEAN,description:"True for LONG/BUY, False for SHORT/SELL"},size:{type:xe.NUMBER,description:"Size of the order in token units. Leave empty if usdcAmount is provided."},usdcAmount:{type:xe.NUMBER,description:"Amount in USDC to spend (for buys) or receive (for sells). If provided, size will be auto-calculated."},orderType:{type:xe.STRING,description:'Order type: "limit", "market", "ioc", "alo". Ask user if not specified.'},price:{type:xe.NUMBER,description:"Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:xe.NUMBER,description:"Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:xe.NUMBER,description:"Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:xe.NUMBER,description:"Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:xe.BOOLEAN,description:"True to only reduce existing position. Default false."}},required:["coin","isBuy","orderType"]}},x={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},orderId:{type:xe.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},v={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},leverage:{type:xe.NUMBER,description:"New leverage (1-50)"},isCross:{type:xe.BOOLEAN,description:"True for cross margin, false for isolated"}},required:["coin","leverage","isCross"]}},b={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},size:{type:xe.NUMBER,description:"Optional: partial close size. If not provided, closes entire position."},orderType:{type:xe.STRING,description:'Order type: "market" (immediate) or "limit"'},price:{type:xe.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},w={name:"withdrawFromHL",description:`Execute a USDC withdrawal from Hyperliquid Testnet Vault to the Owner's wallet.
      
      This tool EXECUTES the withdrawal immediately. Only call this when the user explicitly wants to withdraw/send/transfer USDC from Hyperliquid.
      
      Requirements:
      - Amount must be > $1 (to cover the $1 USDC withdrawal fee)
      - Vault must be unlocked
      - Owner wallet must be connected
      
      Network: Hyperliquid Testnet
      Fee: $1 USDC (deducted from withdrawal amount)
      Processing time: ~5 minutes`,parameters:{type:xe.OBJECT,properties:{amount:{type:xe.NUMBER,description:"Amount of USDC to withdraw (must be > $1 to cover fee)"}},required:["amount"]}},k={name:"getDealerTradeHistory",description:`Query the Hyperliquid Dealer's trade operation history and AI reasoning.
      
      Use this tool when users ask about:
      - Why a specific position was opened/closed
      - The reasoning behind Dealer trades
      - Details about past or current operations
      - What the Dealer did or is doing
      
      Returns:
      - Operation records with coin, action, price, size, PnL
      - Full AI reasoning and confidence for each trade
      - Recent activity logs`,parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:'Optional: Filter by specific coin (e.g., "BTC", "ETH"). If not provided, returns all operations.'},limit:{type:xe.NUMBER,description:"Optional: Maximum number of records to return (default 10, max 50)"},includeReasoning:{type:xe.BOOLEAN,description:"Optional: Whether to include full AI reasoning (default true). Set to false for basic info only."}}}},C=Dat();return[{functionDeclarations:[e,n,r,s,i,o,a,l,c,u,h,m,g,x,v,b,w,k,...C]}]}async sendMessage(e,n,r){if(!this.client)throw new Error("AI Agent not initialized. Please set API Key.");const i=this.client,s=this.modelName,o=()=>this.getTools(),a=l=>{l.usageMetadata&&Cs.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:l.usageMetadata.promptTokenCount||0,outputTokens:l.usageMetadata.candidatesTokenCount||0,model:s})};return Ws.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{const l=e.map(h=>({role:h.role==="model"?"model":"user",parts:[{text:h.content}]})),u=await i.chats.create({model:s,config:{systemInstruction:r,tools:o()},history:l}).sendMessage({message:n});return a(u),u}})}async getDealerAnalysis(e,n){if(!this.client)throw new Error("AI Agent not initialized.");const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze provided market data and output a TRADING DECISION based strictly on the user's Strategy and Portfolio Constraints.

      You will receive:
      1. Market Data (Prices, Indicators, Orderbook)
      2. Portfolio Context (Current Balance, Open Positions, PnL, Risk Limits)
      3. TRADING COSTS (Maker/Taker Fees, Funding Rate, Breakeven Prices)

      You must return valid JSON with this schema:
      {
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Detailed explanation citing technicals, fees, and costs. Include Entry Price, Stop Loss, and Take Profit values if applicable. (Max 600 characters)",
        "coin": "Symbol analyzed",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output the JSON decision. No markdown blocks, no fluff.
      2. If data is insufficient or unclear, action="HOLD".
      3. CHECK PORTFOLIO LIMITS: Do not buy if 'maxPositions' is reached.
      4. CLOSE POSITIONS: If an open position hits target or stop loss criteria in your analysis, output "CLOSE".
      5. BANKROLL: Using 'manualBankroll' or 'availableBalance' from context, suggest a safe 'sizeUSDC' for new trades.
      6. REASONING FORMAT: Start 'reason' with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
      7. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      TRADING COSTS AWARENESS (CRITICAL FOR PROFIT CALCULATION):
      8. FEE CONSIDERATION: Context includes 'tradingCosts.makerFee' and 'tradingCosts.takerFee' (as decimals, e.g., 0.0005 = 0.05%).
         - Total round-trip cost = (takerFee * 2) for market orders or (makerFee * 2) for limit orders.
         - Only enter trades where expected price movement > total round-trip cost.
      9. FUNDING RATE: Context includes 'tradingCosts.fundingRate' (8h rate) and 'estimatedDailyHoldingCost'.
         - Positive funding: Longs pay shorts.
         - Negative funding: Shorts pay longs.
         - Factor funding into holding decisions for swing trades.
      10. BREAKEVEN PRICES: If 'portfolio.positionBreakevens' exists, it contains:
         - breakevenPrice: Price needed to cover entry/exit fees
         - minProfitPrice: Price needed for 1% profit after costs
         - Use these to decide when to CLOSE positions profitably.
      11. PROFIT THRESHOLD: Only suggest trades where expected move > 2x trading costs (to be safe).
    `;return Ws.enqueue({priority:"HIGH",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var u,h;const o=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),a=`
            [USER STRATEGY]
            ${n}

            [MARKET CONTEXT]
            ${JSON.stringify(e)}
        `,l=await o.sendMessage({message:a});let c="";if(l.candidates&&((h=(u=l.candidates[0])==null?void 0:u.content)!=null&&h.parts))for(const m of l.candidates[0].content.parts)m.text&&(c+=m.text);try{const m=c.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(m)}catch{return console.error("Failed to parse Dealer JSON response:",c),{action:"HOLD",reason:"Failed to parse AI response"}}}})}async getBatchDealerAnalysis(e,n){var o,a;if(!this.client){console.warn("[AIService] Client not initialized. Attempting lazy init...");const l=Un.getApiKey("gemini"),c=(a=(o=window.process)==null?void 0:o.env)==null?void 0:a.GEMINI_API_KEY,u=l||c;if(u)this.initialize(u),console.log("[AIService] Lazy init successful.");else throw new Error("AI Agent not initialized and no API Key found. Please configure your API key in Settings.")}const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

      You will receive:
      1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
      2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
      3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.

      DATA STRUCTURE NOTES:
      - 'portfolio.userFees' contains global makerFee and takerFee (applies to all coins).
      - Each coin's 'tradingCosts' contains only fundingRate and dailyHoldingCost (unique per coin).
      - The keys in each coin's 'indicators' object tell you which indicators are active (e.g., {rsi: ..., macd: ...}).
      - 'ts' is a Unix timestamp (seconds since epoch).

      INDICATOR WEIGHTING SYSTEM:
      - Each indicator includes a 'weight' field (0.5 to 2.0, default 1.0).
      - Each indicator includes a 'category' field (trend, momentum, volume, volatility).
      - weight > 1.0: User considers this indicator MORE important (prioritize its signals)
      - weight < 1.0: User considers this indicator LESS important (lower priority)
      - weight = 1.0: Standard importance
      - When indicators conflict, prefer higher-weighted signals.
      - Give each category's signals equal base weight, then apply individual indicator weights.

      INDICATOR CATEGORIES (do NOT stack similar signals from same category):
      - TREND (EMA, SMA, ADX, Ichimoku): Direction of market
      - MOMENTUM (RSI, MACD, Stochastic): Timing of entry/exit
      - VOLUME (OBV, VWAP): Confirmation of moves
      - VOLATILITY (ATR, Bollinger): Risk context

      AUTONOMOUS MODE (when 'autonomousMode' is true in context):
      - The context includes 'availablePresets' with preset configurations.
      - You MUST analyze market conditions first and choose the best preset.
      - Add a 'chosenPreset' field to your JSON response (outside the decisions array) with one of:
        - 'balanced': For uncertain/mixed signals (default fallback)
        - 'scalp': For high volatility with quick reversals
        - 'trendFollowing': For strong directional trends (ADX > 25)
        - 'meanReversion': For ranging/sideways markets
        - 'volumeConfirm': For breakout scenarios or unusual volume
      - Add a 'presetReason' field explaining why you chose that preset.
      - Focus your analysis on the indicators most relevant to your chosen preset.

      RESPONSE FORMAT:
      - For NORMAL mode: Return JSON array of decisions directly.
      - For AUTONOMOUS mode: Return { "chosenPreset": "...", "presetReason": "...", "decisions": [...] }

      You must return valid JSON with this EXACT schema for each decision:
      {
        "coin": "Symbol analyzed",
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Format: [ACTION] Position Status + Explanation. POSITION STATUS RULES: If NO open position, say 'No position.' If HAVE open position, say 'In LONG/SHORT at $X, PnL: $Y'. ENTRY/SL/TP RULES: Only include Entry/SL/TP values for BUY or SELL actions. For HOLD/CLOSE, do NOT include Entry/SL/TP. Examples: HOLD='WAIT: No position. RSI neutral.' BUY='LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800' CLOSE='CLOSE: In LONG at $95000, PnL: +$150. TP reached.'. Max 600 chars.",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output valid JSON.
      2. Must return one decision object per coin provided in the input.
      3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if 'portfolio.maxPositions' is reached.
      4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
      5. PROFITABILITY: Consider 'portfolio.userFees' and coin's 'tradingCosts'. Only trade if potential > costs.
      6. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      7. RISK PROTECTION (CRITICAL - MANDATORY JSON FIELDS):
         - Check 'portfolio.settings.stopLossEnabled' and 'portfolio.settings.takeProfitEnabled'.
         - If 'stopLossEnabled' is true AND 'stopLossPercent' is null: You MUST include the numeric field "stopLoss" in your JSON response (not just in reason text). Example: "stopLoss": 93100.50
         - If 'takeProfitEnabled' is true AND 'takeProfitPercent' is null: You MUST include the numeric field "takeProfit" in your JSON response (not just in reason text). Example: "takeProfit": 98800.00
         - These are SEPARATE JSON FIELDS, not just mentions in the "reason" string.
         - For BUY/LONG: stopLoss should be BELOW entry price, takeProfit should be ABOVE entry price.
         - For SELL/SHORT: stopLoss should be ABOVE entry price, takeProfit should be BELOW entry price.
      
      8. DIVERGENCE SIGNALS (HIGH PRIORITY): Each coin includes a 'divergences' array with pre-calculated signals:
         - BULLISH: Price lower low + RSI/MACD higher low  potential reversal UP
         - BEARISH: Price higher high + RSI/MACD lower high  potential reversal DOWN
         - HIDDEN_BULLISH: Trend continuation signal UP
         - HIDDEN_BEARISH: Trend continuation signal DOWN
         - Strength: WEAK, MODERATE, STRONG (prioritize MODERATE and STRONG signals)
         - Use these divergences with HIGH PRIORITY - they are algorithmically detected and reliable.
       8. REASONING FORMAT (CRITICAL - MUST FOLLOW):
          - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
          - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
            - Check each coin's 'openPosition.hasPosition' field.
            - If hasPosition === false: MUST say "No position." at the START of your reason.
            - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
          - ENTRY/SL/TP VALUES:
            - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
            - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
          - CRITICAL: Use ONLY the openPosition data from each coin's context. NEVER invent or guess PnL values.
          - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
          - MANDATORY: If divergences are present, mention them in your reasoning.
          - RECOMMENDED: Mention indicator weights if they influenced your decision.
         - RECOMMENDED: If 'macro' data is present, mention macro alignment in your reasoning.

      MACRO TIMEFRAME CONFIRMATION (CRITICAL FOR ACCURACY):
      - Each coin MAY include a 'macro' object with indicator values from a HIGHER timeframe.
      - 'macro.timeframe' tells you the macro timeframe (e.g., '240' = 4H, 'D' = Daily, 'W' = Weekly).
      - 'macro.indicators' contains current values only (no history).
      
      MACRO ALIGNMENT RULES:
      - If main timeframe shows OVERBOUGHT but macro shows OVERSOLD: Consider HOLD or reduce confidence by 20-30%.
      - If main timeframe shows OVERSOLD but macro shows OVERBOUGHT: Consider HOLD or reduce confidence by 20-30%.
      - If main and macro ALIGN (both overbought or both oversold): Full confidence trade.
      - If conflicting signals: MENTION THE CONFLICT in your reasoning (e.g., "Main RSI=75 but Macro RSI=30 - conflicting").
      
      EXAMPLES:
      - Main RSI=25 (oversold) + Macro RSI=35 (neutral-oversold) = ALIGNED = Full confidence BUY.
      - Main RSI=75 (overbought) + Macro RSI=30 (oversold) = CONFLICTING = HOLD or reduce size.
      - Use macro as a FILTER to avoid trading against the higher timeframe trend.
    `;return Ws.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var C,R,B;const l=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),c=`
          [USER STRATEGY]
          ${n}

          [BATCH MARKET DATA]
          ${JSON.stringify(e)}

          Analyze all assets in the batch. Return a JSON Array of decisions.
        `,u=await l.sendMessage({message:c});u.usageMetadata&&Cs.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:u.usageMetadata.promptTokenCount||0,outputTokens:u.usageMetadata.candidatesTokenCount||0,model:i,metadata:{coinsAnalyzed:((C=e==null?void 0:e.coins)==null?void 0:C.length)||0}});let h="";if(u.candidates&&((B=(R=u.candidates[0])==null?void 0:R.content)!=null&&B.parts))for(const O of u.candidates[0].content.parts)O.text&&(h+=O.text);if(!h)return console.warn("[AIService] Empty response from Batch Dealer Analysis"),[];const m=h.replace(/```json/g,"").replace(/```/g,"").trim();let g;try{g=JSON.parse(m)}catch(O){return console.warn("[AIService] JSON Parse Error:",O),[]}let x=[];if(Array.isArray(g))x=g;else if(typeof g=="object")x=[g];else return[];const b=x.map(O=>O.action==="LONG"?{...O,action:"BUY"}:O.action==="SHORT"?{...O,action:"SELL"}:O.action==="WAIT"?{...O,action:"HOLD"}:O).filter(O=>{const F=typeof O.coin=="string"&&O.coin.length>0,H=["BUY","SELL","HOLD","CLOSE"].includes(O.action);return!(!F||!H)}),w={CLOSE:3,BUY:2,SELL:2,HOLD:1},k=new Map;for(const O of b){const F=O.coin.toUpperCase(),H=k.get(F);if(!H)k.set(F,O);else{const j=w[H.action]||0,$=w[O.action]||0;if($>j)k.set(F,O);else if($===j){const W=H.confidence||0;(O.confidence||0)>W&&k.set(F,O)}}}return Array.from(k.values())}})}async analyzePolymarket(e){if(!this.client)return console.warn("[AIService] Client not initialized for Polymarket analysis"),null;const n=this.client,r=this.modelName,i=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      You will receive market data including:
      - Market questions and current YES/NO prices
      - Time to resolution
      - Volume and liquidity data
      - Current portfolio positions

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution (avoid markets expiring soon without clear edge)
      3. Factor in liquidity - avoid illiquid markets
      4. Look for mispriced probabilities based on news/fundamentals
      5. Diversify across different categories when possible
    `;return Ws.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await n.chats.create({model:r,config:{systemInstruction:i,responseMimeType:"application/json"}}).sendMessage({message:e});o.usageMetadata&&Cs.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:r});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const u of o.candidates[0].content.parts)u.text&&(a+=u.text);return a||null}})}getProviderFactory(){return ig}getConfigStore(){return Un}getAvailableProviders(){return["gemini","openai","claude"]}getModelsForProvider(e){return dy[e]||[]}async sendOperatorMessage(e,n,r){var s;const i=ig.getProviderForComponent("operator");if(!i)return console.log("[AIService] Falling back to legacy Gemini for operator"),this.sendMessage(e,n,r);try{const o=await i.sendMessage(e,n,r,((s=i.getTools)==null?void 0:s.call(i))||this.getTools());if(o.usageMetadata){const a=Un.getComponentConfig("operator");Cs.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:a.modelId})}return{text:o.text,functionCalls:o.functionCalls,usageMetadata:o.usageMetadata,candidates:[{content:{parts:[{text:o.text}]}}]}}catch(o){return console.error("[AIService] Operator provider error:",o),this.sendMessage(e,n,r)}}async getDealerBatchAnalysis(e,n,r){var s;const i=ig.getProviderForComponent("hyperliquidDealer");if(!i)return console.log("[AIService] Falling back to legacy batch analysis"),{decisions:await this.getBatchDealerAnalysis(e,n)};try{const o=await i.sendBatchAnalysis(e,n,r),a=Un.getComponentConfig("hyperliquidDealer");return Cs.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(o).length/4),model:a.modelId,metadata:{coinsAnalyzed:((s=e==null?void 0:e.coins)==null?void 0:s.length)||0}}),o}catch(o){if((o==null?void 0:o.name)==="AbortError")throw console.log("[AIService] Dealer analysis aborted"),o;return console.error("[AIService] Dealer provider error:",o),{decisions:await this.getBatchDealerAnalysis(e,n)}}}async getDealerAnalysisViaOracle(e,n,r){const i=Un.getComponentConfig("hyperliquidDealer"),s=Un.getComponentApiKey("hyperliquidDealer");if(!s)throw new Error("No AI API key configured for Hyperliquid Dealer");const o={marketContext:e,aiConfig:{provider:i.providerType,apiKey:s,modelId:i.modelId},portfolioContext:n};try{const a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const c=await a.text();throw new Error(`Strategy Oracle error: ${c}`)}const l=await a.json();return Cs.addRecord({source:"DEALER",operation:"ORACLE_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(l).length/4),model:i.modelId,metadata:{via:"strategy-oracle"}}),{decisions:l.decisions||[],timestamp:l.timestamp||new Date().toISOString()}}catch(a){throw console.error("[AIService] Strategy Oracle call failed:",a),a}}async getPolymarketAnalysis(e){const n=ig.getProviderForComponent("polymarketDealer");if(!n)return console.log("[AIService] Falling back to legacy Polymarket analysis"),this.analyzePolymarket(e);const r=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution
      3. Factor in liquidity
      4. Look for mispriced probabilities
      5. Diversify when possible
    `;try{const i=await n.sendJsonAnalysis(e,r);if(i){const s=Un.getComponentConfig("polymarketDealer");Cs.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:Math.round(e.length/4),outputTokens:Math.round(i.length/4),model:s.modelId})}return i}catch(i){return console.error("[AIService] Polymarket provider error:",i),this.analyzePolymarket(e)}}isComponentReady(e){return ig.isComponentReady(e)}getComponentProviderInfo(e){const n=Un.getComponentConfig(e),i=dy[n.providerType].find(s=>s.id===n.modelId);return{provider:n.providerType,model:n.modelId,modelName:(i==null?void 0:i.name)||n.modelId,isReady:ig.isComponentReady(e)}}async generateCycleSummary(e,n){if(!this.client)return console.warn("[AIService] Client not initialized for cycle summary"),"";if(e.length===0)return"";const r=this.client,i=this.modelName,o=`You are a trading analyst summarizing recent trading activity.
Generate a CONCISE contextual summary for an AI trader about to analyze ${n==="hyperliquid"?"crypto perpetual futures trading on Hyperliquid":"prediction market trading on Polymarket"}.

The summary should help the AI understand:
1. Recent market sentiment and patterns observed
2. Actions taken in previous cycles (buys, sells, holds)
3. Key assets/markets being monitored
4. Any notable patterns or trends

CRITICAL RULES:
- Output ONLY plain text, max 300 characters
- Be extremely concise - every word must add value
- Focus on actionable context for the next analysis
- No JSON, no markdown, no formatting`,a=e.map(c=>({time:new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),actions:c.decisions.map(u=>`${u.asset}:${u.action}(${Math.round(u.confidence*100)}%)`).join(", "),assets:c.assetsAnalyzed.length})),l=`Recent ${n} trading cycles (newest first):
${a.map((c,u)=>`Cycle ${e.length-u}: ${c.time} - Analyzed ${c.assets} assets. Actions: ${c.actions||"None"}`).join(`
`)}

Generate a brief contextual summary for the next analysis cycle.`;return Ws.enqueue({priority:"LOW",source:n==="hyperliquid"?"hyperliquidDealer":"polymarketDealer",provider:"gemini",execute:async()=>{var c,u;try{const m=await r.chats.create({model:i,config:{systemInstruction:o}}).sendMessage({message:l});m.usageMetadata&&Cs.addRecord({source:n==="hyperliquid"?"DEALER":"POLYMARKET_DEALER",operation:"CYCLE_SUMMARY",inputTokens:m.usageMetadata.promptTokenCount||0,outputTokens:m.usageMetadata.candidatesTokenCount||0,model:i});let g="";if(m.candidates&&((u=(c=m.candidates[0])==null?void 0:c.content)!=null&&u.parts))for(const x of m.candidates[0].content.parts)x.text&&(g+=x.text);return g.trim().slice(0,350)}catch(h){return console.error("[AIService] Cycle summary generation failed:",h),""}}})}}const hm=new jat;class Bat{constructor(){this.worker=null,this.callbacks=new Map,this.fallbackTimers=new Map,this.isSupported=typeof Worker<"u",this.isSupported?this.initWorker():console.warn("[BackgroundTimer]  Web Workers not supported, falling back to setInterval (will be throttled in background)")}initWorker(){try{const e=`
                const timers = new Map();
                
                self.onmessage = (event) => {
                    const { type, timerId, intervalMs } = event.data;
                    
                    if (type === 'START' && timerId && intervalMs) {
                        // Clear existing timer if any
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        
                        // Start new timer
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        
                        // Log start (visible in browser console under Worker context)
                        console.log('[TimerWorker] Started timer "' + timerId + '" with ' + intervalMs + 'ms interval');
                    }
                    
                    if (type === 'STOP' && timerId) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                            timers.delete(timerId);
                            console.log('[TimerWorker] Stopped timer "' + timerId + '"');
                        }
                    }
                    
                    if (type === 'UPDATE_INTERVAL' && timerId && intervalMs) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        console.log('[TimerWorker] Updated timer "' + timerId + '" to ' + intervalMs + 'ms');
                    }
                };
            `,n=new Blob([e],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(n)),this.worker.onmessage=r=>{const{type:i,timerId:s,timestamp:o}=r.data;if(i==="TICK"&&this.callbacks.has(s))try{this.callbacks.get(s)(o)}catch(a){console.error(`[BackgroundTimer] Error in callback for "${s}":`,a)}},this.worker.onerror=r=>{console.error("[BackgroundTimer] Worker error:",r)},console.log("[BackgroundTimer]  Web Worker initialized - timers will run in background")}catch(e){console.error("[BackgroundTimer] Failed to initialize Worker:",e),this.isSupported=!1}}start(e,n,r){if(this.callbacks.set(e,r),this.worker)this.worker.postMessage({type:"START",timerId:e,intervalMs:n});else{console.warn(`[BackgroundTimer] Using fallback for "${e}" - may be throttled in background`);const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}stop(e){this.callbacks.delete(e),this.worker&&this.worker.postMessage({type:"STOP",timerId:e}),this.fallbackTimers.has(e)&&(clearInterval(this.fallbackTimers.get(e)),this.fallbackTimers.delete(e))}updateInterval(e,n){if(this.worker&&this.callbacks.has(e))this.worker.postMessage({type:"UPDATE_INTERVAL",timerId:e,intervalMs:n});else if(this.fallbackTimers.has(e)){const r=this.callbacks.get(e);if(r){clearInterval(this.fallbackTimers.get(e));const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}}isRunning(e){return this.callbacks.has(e)}getActiveTimers(){return Array.from(this.callbacks.keys())}destroy(){for(const e of this.callbacks.keys())this.stop(e);this.worker&&(this.worker.terminate(),this.worker=null),this.callbacks.clear(),this.fallbackTimers.clear()}}const qa=new Bat;class Uat{constructor(){this.audioContext=null,this.oscillator=null,this.gainNode=null,this.isActive=!1,this.checkInterval=null,this.visibilityHandler=null,this.userInteractionHandler=null}start(){var e;if(this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running")return console.log("[KeepAlive] Already active and running"),!0;try{return this.audioContext&&this.audioContext.state!=="closed"&&this.cleanupAudio(),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.oscillator=this.audioContext.createOscillator(),this.oscillator.type="sine",this.oscillator.frequency.setValueAtTime(1,this.audioContext.currentTime),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.setValueAtTime(.001,this.audioContext.currentTime),this.oscillator.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.oscillator.start(),this.isActive=!0,console.log("[KeepAlive]  Silent audio started - tab will stay active in background"),this.setupMaintenance(),!0}catch(n){return console.error("[KeepAlive]  Failed to start silent audio:",n),!1}}setupMaintenance(){this.cleanupMaintenance(),this.visibilityHandler=()=>{document.visibilityState==="visible"&&this.isActive&&(console.log("[KeepAlive]  Tab became visible, checking audio..."),this.ensureRunning())},document.addEventListener("visibilitychange",this.visibilityHandler),this.userInteractionHandler=()=>{var e;this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="suspended"&&(console.log("[KeepAlive]  User interaction detected, resuming audio..."),this.resume())},["click","keydown","touchstart","mousedown"].forEach(e=>{document.addEventListener(e,this.userInteractionHandler,{passive:!0})}),this.checkInterval=setInterval(()=>{this.isActive&&this.ensureRunning()},5e3)}async ensureRunning(){var n;if(!this.isActive)return;const e=(n=this.audioContext)==null?void 0:n.state;e==="suspended"?(console.log("[KeepAlive]  AudioContext suspended, attempting resume..."),await this.resume()):(e==="closed"||!this.audioContext)&&(console.log("[KeepAlive]  AudioContext closed, restarting..."),this.isActive=!1,this.start())}cleanupMaintenance(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.visibilityHandler&&(document.removeEventListener("visibilitychange",this.visibilityHandler),this.visibilityHandler=null),this.userInteractionHandler&&(["click","keydown","touchstart","mousedown"].forEach(e=>{document.removeEventListener(e,this.userInteractionHandler)}),this.userInteractionHandler=null)}cleanupAudio(){try{this.oscillator&&(this.oscillator.stop(),this.oscillator.disconnect(),this.oscillator=null),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close(),this.audioContext=null}catch{}}stop(){if(this.isActive)try{this.cleanupMaintenance(),this.cleanupAudio(),this.isActive=!1,console.log("[KeepAlive]  Silent audio stopped")}catch(e){console.error("[KeepAlive] Error stopping:",e)}}async resume(){if(!this.audioContext)return this.start();if(this.audioContext.state==="suspended")try{return await this.audioContext.resume(),console.log("[KeepAlive]  AudioContext resumed"),!0}catch(e){return console.error("[KeepAlive] Failed to resume:",e),this.isActive=!1,this.start()}return!0}getIsActive(){var e;return this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running"}getState(){var e;return((e=this.audioContext)==null?void 0:e.state)||"not-initialized"}}const L2=new Uat,a4="user_supabase_config",nZ=["encrypted_keys","execution_sessions"];class Fat{constructor(){this.client=null,this.config=null,this.listeners=new Set,this.loadStoredConfig()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){const e=this.isConnected();this.listeners.forEach(n=>n(e))}isConnected(){return this.client!==null&&this.config!==null}getConfig(){return this.config}getClient(){return this.client}async loadStoredConfig(){try{const e=await ke.getItem(ke.getUserKey(a4));if(!e)return console.log("[UserDataSupabase] No stored configuration found"),!1;const n=JSON.parse(e),r=await this.connect(n.url,n.anonKey);return r.success?(console.log("[UserDataSupabase] Reconnected using stored config"),!0):(console.warn("[UserDataSupabase] Failed to reconnect:",r.error),!1)}catch(e){return console.error("[UserDataSupabase] Failed to load stored config:",e),!1}}validateUrl(e){return e?e.startsWith("https://")?e.includes(".supabase.co")?{valid:!0}:{valid:!1,error:"URL must be a Supabase project URL (*.supabase.co)"}:{valid:!1,error:"URL must start with https://"}:{valid:!1,error:"URL is required"}}validateAnonKey(e){return e?e.length<100?{valid:!1,error:"Anon key appears invalid (too short)"}:e.startsWith("eyJ")?{valid:!0}:{valid:!1,error:"Anon key should be a JWT token"}:{valid:!1,error:"Anon key is required"}}async connect(e,n){var s;const r=this.validateUrl(e);if(!r.valid)return{success:!1,projectId:null,error:r.error};const i=this.validateAnonKey(n);if(!i.valid)return{success:!1,projectId:null,error:i.error};try{const o=Qee(e,n,{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}}),{error:a}=await o.auth.getSession();if(a&&a.message!=="Auth session missing!")return{success:!1,projectId:null,error:`Connection failed: ${a.message}`};const l=((s=e.split("//")[1])==null?void 0:s.split(".")[0])||null;return this.config={url:e,anonKey:n,projectId:l||"",connectedAt:new Date().toISOString()},this.client=o,await this.saveConfig(),console.log("[UserDataSupabase] Connected to project:",l),this.notify(),{success:!0,projectId:l}}catch(o){return{success:!1,projectId:null,error:o instanceof Error?o.message:"Unknown error"}}}async validateSchema(){if(!this.client)return{valid:!1,missingTables:nZ,error:"Not connected"};const e=[];for(const n of nZ)try{const{error:r}=await this.client.from(n).select("id").limit(1);r&&(r.code==="42P01"||r.message.includes("does not exist"))&&e.push(n)}catch{e.push(n)}return{valid:e.length===0,missingTables:e}}async disconnect(){this.client=null,this.config=null,await ke.removeItem(ke.getUserKey(a4)),console.log("[UserDataSupabase] Disconnected and cleared config"),this.notify()}getSetupSQL(){return`-- AutonomousVault Security Tier Schema
-- Run this in your Supabase SQL Editor

-- Table for storing encrypted keys (Tier B & C)
CREATE TABLE IF NOT EXISTS encrypted_keys (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    key_name TEXT NOT NULL,
    encrypted_blob TEXT NOT NULL,
    encryption_salt TEXT NOT NULL,
    encrypted_password TEXT, -- Only for Tier C (persistent)
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    UNIQUE(user_id, key_name)
);

-- Table for execution sessions (Tier B)
CREATE TABLE IF NOT EXISTS execution_sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    encrypted_session_token TEXT NOT NULL,
    expires_at TIMESTAMPTZ NOT NULL,
    revoked BOOLEAN DEFAULT false,
    created_at TIMESTAMPTZ DEFAULT now()
);

-- Row Level Security (RLS) policies
ALTER TABLE encrypted_keys ENABLE ROW LEVEL SECURITY;
ALTER TABLE execution_sessions ENABLE ROW LEVEL SECURITY;

-- Users can only access their own data
CREATE POLICY "Users can manage own keys" ON encrypted_keys
    FOR ALL USING (auth.uid() = user_id);

CREATE POLICY "Users can manage own sessions" ON execution_sessions
    FOR ALL USING (auth.uid() = user_id);

-- Indexes for performance
CREATE INDEX IF NOT EXISTS idx_encrypted_keys_user ON encrypted_keys(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_user ON execution_sessions(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_expires ON execution_sessions(expires_at);
`}async saveConfig(){if(this.config)try{await ke.setItem(ke.getUserKey(a4),JSON.stringify(this.config))}catch(e){console.error("[UserDataSupabase] Failed to save config:",e)}}}const ss=new Fat;class $at{get supabase(){return ss.getClient()}isAvailable(){return this.supabase!==null}async runCycle(e){if(!this.supabase)throw new Error("Supabase not connected");const{data:n,error:r}=await this.supabase.functions.invoke("dealer-cycle",{body:e});return r?(console.error("[SupabaseDealerClient] Cycle error:",r),{success:!1,decisions:[],usage:{cyclesUsed:0,cyclesRemaining:0},timestamp:new Date().toISOString(),error:r.message}):n}async syncPortfolio(){if(!this.supabase)throw new Error("Supabase not connected");const{data:e,error:n}=await this.supabase.functions.invoke("sync-portfolio",{body:{}});return n?(console.error("[SupabaseDealerClient] Sync error:",n),{positions:[],portfolioValue:0,error:n.message}):e}async enableSchedule(e){if(!this.supabase)throw new Error("Supabase not connected");const n=ke.getUserId();if(!n)return{success:!1,error:"Not authenticated"};const{error:r}=await this.supabase.from("cron_schedules").upsert({user_id:n,schedule_name:"default",enabled:e.enabled,interval_seconds:e.intervalSeconds,coins:e.coins,next_run_at:e.enabled?new Date().toISOString():null},{onConflict:"user_id,schedule_name"});return r?(console.error("[SupabaseDealerClient] Schedule error:",r),{success:!1,error:r.message}):{success:!0}}async disableSchedule(){return this.enableSchedule({enabled:!1,intervalSeconds:300,coins:[]})}async getScheduleStatus(){if(!this.supabase)return null;const e=ke.getUserId();if(!e)return null;const{data:n,error:r}=await this.supabase.from("cron_schedules").select("*").eq("user_id",e).eq("schedule_name","default").single();return r||!n?null:{enabled:n.enabled,intervalSeconds:n.interval_seconds,coins:n.coins||[],lastRunAt:n.last_run_at?new Date(n.last_run_at):void 0,nextRunAt:n.next_run_at?new Date(n.next_run_at):void 0,runCount:n.run_count||0,lastError:n.last_error}}async getSessionStatus(){if(!this.supabase)return{hasActiveSession:!1,tier:"local"};const e=ke.getUserId();if(!e)return{hasActiveSession:!1,tier:"local"};const{data:n}=await this.supabase.from("encrypted_keys").select("encrypted_password").eq("user_id",e).eq("key_name","hyperliquid").single();if(n!=null&&n.encrypted_password)return{hasActiveSession:!0,tier:"persistent"};const{data:r}=await this.supabase.from("execution_sessions").select("expires_at").eq("user_id",e).eq("revoked",!1).gt("expires_at",new Date().toISOString()).order("expires_at",{ascending:!1}).limit(1).single();return r?{hasActiveSession:!0,expiresAt:new Date(r.expires_at),tier:"session"}:{hasActiveSession:!1,tier:"local"}}async getUsageStats(){if(!this.supabase)return null;const e=ke.getUserId();if(!e)return null;const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1),{data:i,error:s}=await this.supabase.from("usage_tracking").select("*").eq("user_id",e).eq("period_start",r.toISOString().split("T")[0]).single();if(s&&s.code!=="PGRST116")return console.error("[SupabaseDealerClient] Usage error:",s),null;const{data:o}=await this.supabase.from("user_plans").select("cycles_limit").eq("user_id",e).single(),a=(o==null?void 0:o.cycles_limit)||1e3;return{cyclesExecuted:(i==null?void 0:i.cycles_executed)||0,tradesExecuted:(i==null?void 0:i.trades_executed)||0,cyclesRemaining:Math.max(0,a-((i==null?void 0:i.cycles_executed)||0)),periodStart:r}}}const zat=new $at,sD={local:{tier:"local",label:"Local Keys",description:"Maximum security. Keys never leave your browser. Browser must remain open for execution.",icon:"",securityLevel:3,execution24x7:!1,requiresBrowserOpen:!0},session:{tier:"session",label:"Session Keys",description:"Balanced security. 24-hour execution sessions on your server.Re-authenticate daily.",icon:"",securityLevel:2,execution24x7:!1,requiresBrowserOpen:!1},persistent:{tier:"persistent",label:"Persistent Keys",description:"Full automation. 24/7 execution. Lower security - password stored encrypted on your server.",icon:"",securityLevel:1,execution24x7:!0,requiresBrowserOpen:!1}},rZ="security_tier",iZ=24;class Hat{constructor(){this.state={currentTier:"local",session:null,keysInSupabase:!1,passwordStoredInSupabase:!1},this.listeners=new Set,this.loadState()}async loadState(){try{const e=await ke.getItem(ke.getUserKey(rZ));if(e){const n=JSON.parse(e);this.state={...this.state,currentTier:n.currentTier||"local",session:n.session?{...n.session,createdAt:new Date(n.session.createdAt),expiresAt:new Date(n.session.expiresAt)}:null},this.state.session&&new Date>this.state.session.expiresAt&&(console.log("[SecurityTierService] Session expired, reverting to local"),this.state.session=null,this.state.currentTier==="session"&&(this.state.currentTier="local"))}await this.syncSupabaseState()}catch(e){console.error("[SecurityTierService] Failed to load state:",e)}}async saveState(){try{await ke.setItem(ke.getUserKey(rZ),JSON.stringify({currentTier:this.state.currentTier,session:this.state.session}))}catch(e){console.error("[SecurityTierService] Failed to save state:",e)}}notify(){this.listeners.forEach(e=>e()),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getState(){return this.state}getCurrentTier(){return this.state.currentTier}getTierInfo(e){return sD[e||this.state.currentTier]}getSessionStatus(){if(!this.state.session)return{active:!1};const e=new Date,n=e<this.state.session.expiresAt,r=this.state.session.expiresAt.getTime()-e.getTime(),i=Math.max(0,r/(1e3*60*60));return{active:n,expiresAt:this.state.session.expiresAt,remainingHours:Math.round(i*10)/10}}async migrateToSession(e,n,r,i=iZ){try{const s=ss.getClient();if(!s)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const o=ke.getUserId();if(!o)return{success:!1,error:"Not authenticated"};const{error:a}=await s.from("encrypted_keys").upsert({user_id:o,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:null},{onConflict:"user_id,key_name"});if(a)return{success:!1,error:`Failed to upload key: ${a.message}`};const l=new Date,c=new Date(l.getTime()+i*60*60*1e3),u=crypto.randomUUID(),h=await this.createSessionToken(o,r,c),{error:m}=await s.from("execution_sessions").insert({id:u,user_id:o,encrypted_session_token:h,expires_at:c.toISOString(),revoked:!1});return m?{success:!1,error:`Failed to create session: ${m.message}`}:(this.state={...this.state,currentTier:"session",keysInSupabase:!0,passwordStoredInSupabase:!1,session:{id:u,userId:o,createdAt:l,expiresAt:c,active:!0}},this.notify(),console.log("[SecurityTierService] Migrated to Tier B (Session)"),{success:!0})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async migrateToPersistent(e,n,r){try{const i=ss.getClient();if(!i)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const s=ke.getUserId();if(!s)return{success:!1,error:"Not authenticated"};const o=await this.encryptPasswordForStorage(r),{error:a}=await i.from("encrypted_keys").upsert({user_id:s,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:o},{onConflict:"user_id,key_name"});return a?{success:!1,error:`Failed to upload key: ${a.message}`}:(this.state={...this.state,currentTier:"persistent",keysInSupabase:!0,passwordStoredInSupabase:!0,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier C (Persistent)"),{success:!0})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async migrateToLocal(){try{const e=ss.getClient();if(!e)return this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),{success:!0};const n=ke.getUserId();return n?(await e.from("encrypted_keys").delete().eq("user_id",n).eq("key_name","hyperliquid"),await e.from("execution_sessions").update({revoked:!0}).eq("user_id",n),this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier A (Local)"),{success:!0}):{success:!1,error:"Not authenticated"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async endSession(){if(this.state.session){try{const e=ss.getClient();e&&await e.from("execution_sessions").update({revoked:!0}).eq("id",this.state.session.id)}catch(e){console.error("[SecurityTierService] Failed to revoke session:",e)}this.state={...this.state,session:null},this.notify()}}async refreshSession(e,n=iZ){if(this.state.currentTier!=="session")return{success:!1,error:"Not in session mode"};await this.endSession();const r=ss.getClient();if(!r)return{success:!1,error:"Your Supabase not connected"};const i=ke.getUserId();if(!i)return{success:!1,error:"Not authenticated"};const{data:s}=await r.from("encrypted_keys").select("encrypted_blob, encryption_salt").eq("user_id",i).eq("key_name","hyperliquid").single();return s?this.migrateToSession(s.encrypted_blob,s.encryption_salt,e,n):{success:!1,error:"No key found in Supabase"}}async syncSupabaseState(){var e;try{const n=ss.getClient();if(!n)return;const r=ke.getUserId();if(!r)return;const{data:i}=await n.from("encrypted_keys").select("encrypted_password").eq("user_id",r).eq("key_name","hyperliquid").single();this.state.keysInSupabase=!!i,this.state.passwordStoredInSupabase=!!(i!=null&&i.encrypted_password),this.state.keysInSupabase?this.state.passwordStoredInSupabase?this.state.currentTier="persistent":(e=this.state.session)!=null&&e.active?this.state.currentTier="session":this.state.currentTier="local":this.state.currentTier="local"}catch(n){console.error("[SecurityTierService] Failed to sync Supabase state:",n)}}async createSessionToken(e,n,r){const i=JSON.stringify({userId:e,password:n,expiresAt:r.toISOString()}),o=new TextEncoder().encode(i),a=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]),l=crypto.getRandomValues(new Uint8Array(12)),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:l},a,o),u=await crypto.subtle.exportKey("raw",a),h=new Uint8Array(l.length+c.byteLength+u.byteLength);return h.set(l,0),h.set(new Uint8Array(c),l.length),h.set(new Uint8Array(u),l.length+c.byteLength),btoa(String.fromCharCode(...h))}async encryptPasswordForStorage(e){const n=new TextEncoder,r=n.encode(e),i=n.encode("autonomousvault-persistent-key-v1"),s=await crypto.subtle.importKey("raw",n.encode("server-managed-key-placeholder"),"PBKDF2",!1,["deriveKey"]),o=await crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt"]),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,r),c=new Uint8Array(a.length+l.byteLength);return c.set(a,0),c.set(new Uint8Array(l),a.length),btoa(String.fromCharCode(...c))}}const Tf=new Hat,sZ="hyperliquid-dealer-cycle",l4="hyperliquid-dealer-sync";class Vat{constructor(){this.isLoopRunning=!1,this.currentCycleAbortController=null,this.vaultContext={balance:0,positions:[]},this.lastError=null,this.consecutiveFailures=0,this.executor=null,pt.subscribe(()=>{const e=pt.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()}),Ws.setOnRateLimit(e=>{e.exhausted?(pt.addLog("ERROR"," AI API Quota Exhausted! Credits may be depleted. System paused.",{consecutiveHits:e.consecutiveHits}),pt.updateStatus(" Quota Exhausted",null,"Check your AI API credits or billing",void 0,`Retried ${e.consecutiveHits}x without success`)):(pt.addLog("WARNING",` AI Rate Limited! Waiting ${e.blockedForSeconds}s before retry... (attempt ${e.consecutiveHits})`,{consecutiveHits:e.consecutiveHits}),pt.updateStatus(" Rate Limited",null,"AI credits/quota may be running low",void 0,`Retry in ${e.blockedForSeconds}s (attempt ${e.consecutiveHits})`))})}startLoop(){if(this.isLoopRunning)return;this.isLoopRunning=!0,console.log("[DealerService]  Starting loop with Web Worker timer (background-safe)..."),L2.start();const n=pt.getSnapshot().settings.checkIntervalSeconds*1e3||6e4;qa.start(sZ,n,()=>this.runCycle()),this.startSyncLoop(),this.runCycle()}startSyncLoop(){qa.stop(l4),console.log("[DealerService] Starting sync loop with Web Worker timer..."),qa.start(l4,15e3,()=>this.syncPortfolio()),this.syncPortfolio()}async syncPortfolio(){if(this.vaultContext.walletAddress){if(zt.isDealerActive()){console.log("[DealerService]   Skipping sync - dealer is active");return}try{const e=await zt.getUserStateShared(this.vaultContext.walletAddress);let n=[],r=0;e&&(e.assetPositions&&(n=e.assetPositions.filter(o=>parseFloat(o.position.szi)!==0),this.vaultContext.positions=n),e.marginSummary&&(r=parseFloat(e.marginSummary.accountValue||"0")));let i=0;const s=n.map(o=>{var u;const a=parseFloat(o.position.szi),l=parseFloat(o.position.entryPx),c=Math.abs(a*l);return i+=c,{coin:o.position.coin,size:a,entryPrice:l,unrealizedPnl:parseFloat(o.position.unrealizedPnl||"0"),side:a>0?"LONG":"SHORT",leverage:parseFloat(((u=o.position.leverage)==null?void 0:u.value)||"1"),liquidationPrice:o.position.liquidationPx?parseFloat(o.position.liquidationPx):void 0}});this.vaultContext.balance=r,pt.updatePortfolioState(s,r,i)}catch(e){console.warn("[DealerService] syncPortfolio failed:",e)}}}stopLoop(){this.isLoopRunning&&(console.log("[DealerService]  Stopping loop..."),this.currentCycleAbortController&&(console.log("[DealerService]  Aborting current cycle requests..."),this.currentCycleAbortController.abort(),this.currentCycleAbortController=null),qa.stop(sZ),qa.stop(l4),L2.stop(),this.isLoopRunning=!1,pt.updateStatus(null,null,"System paused",void 0,"Dealer offline"))}setVaultContext(e){this.vaultContext={...this.vaultContext,...e}}async runCycle(){if(!pt.getSnapshot().isOn){this.stopLoop();return}const n=Tf.getCurrentTier();return n==="session"||n==="persistent"?this.runSupabaseCycle():this.runLocalCycle()}async runSupabaseCycle(){var s,o;const e=pt.getSnapshot();pt.setAnalyzing(!0),pt.updateStatus(" Supabase Cycle",null,"Executing via Edge Function...",void 0,`Mode: ${e.executionMode}`);const n=Un.getComponentConfig("hyperliquidDealer"),r=Un.getComponentApiKey("hyperliquidDealer"),i={provider:n.providerType,apiKey:r,modelId:n.modelId,systemPrompt:e.settings.strategyPrompt};try{const a=await zat.runCycle({coins:e.settings.tradingPairs,settings:{intervalMs:e.settings.checkIntervalSeconds*1e3,maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,maxPositionSizeUSDC:e.settings.maxPositionSizeUSDC,analysisTimeframe:e.settings.analysisTimeframe||"60",historyCandles:e.settings.historyCandles||100,macroTimeframeEnabled:e.settings.macroTimeframeEnabled,macroTimeframe:e.settings.macroTimeframe,macroEnabledIndicators:e.settings.macroEnabledIndicators,indicatorSettings:e.settings.indicatorSettings,autonomousIndicators:e.settings.autonomousIndicators,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent,strategyPrompt:e.settings.strategyPrompt},portfolioContext:{balance:((s=this.vaultContext)==null?void 0:s.balance)||0,positions:(((o=this.vaultContext)==null?void 0:o.positions)||[]).map(l=>{var c,u,h,m,g,x,v,b;return{coin:((c=l.position)==null?void 0:c.coin)||l.coin,side:parseFloat(((u=l.position)==null?void 0:u.szi)||l.szi||"0")>0?"LONG":"SHORT",size:Math.abs(parseFloat(((h=l.position)==null?void 0:h.szi)||l.szi||"0")),entryPrice:parseFloat(((m=l.position)==null?void 0:m.entryPx)||l.entryPx||"0"),unrealizedPnl:parseFloat(((g=l.position)==null?void 0:g.unrealizedPnl)||l.unrealizedPnl||"0"),leverage:parseFloat(((v=(x=l.position)==null?void 0:x.leverage)==null?void 0:v.value)||((b=l.leverage)==null?void 0:b.value)||"1")}})},aiConfig:i,executeTradesIfSignal:!0});if(a.success){for(const l of a.decisions){const c=l.action==="BUY"?"":l.action==="SELL"?"":l.action==="CLOSE"?"":"";pt.addLog(l.executed?"TRADE":"SIGNAL",`${c} ${l.coin}: ${l.action} (${(l.confidence*100).toFixed(0)}%)${l.executed?" ":""}`,{fullReason:l.reason,orderId:l.orderId,error:l.error})}pt.updateStatus(" Waiting",null,`Supabase cycle complete. ${a.decisions.length} decisions.`,void 0,`Cycles remaining: ${a.usage.cyclesRemaining}`)}else throw new Error(a.error||"Supabase cycle failed")}catch(a){console.error("[DealerService] Supabase cycle error:",a),pt.addLog("ERROR",`Supabase cycle failed: ${a.message}`),pt.updateStatus(" Error",null,a.message,void 0,"Will retry next interval")}finally{pt.setAnalyzing(!1)}}async runLocalCycle(){var v,b,w,k;const e=pt.getSnapshot();this.currentCycleAbortController=new AbortController;const n=this.currentCycleAbortController.signal;zt.acquireDealerLock();const r=e.settings.indicatorSettings,s=Object.entries(r).filter(([C,R])=>R.enabled).map(([C,R])=>C.toUpperCase()).join(", ")||"Default",o=e.settings.tradingPairs.length,a=e.settings.analysisTimeframe,l=a==="1"?"1m":a==="5"?"5m":a==="15"?"15m":a==="60"?"1h":a==="240"?"4h":a==="D"?"1D":`${a}m`,c=e.settings.macroTimeframe,u=e.settings.macroTimeframeEnabled?`  ${c==="15"?"15m":c==="60"?"1H":c==="240"?"4H":c==="D"?"1D":c==="W"?"1W":c}`:"";pt.setAnalyzing(!0),pt.updateStatus(" Scanning Markets",null,"Initializing market analysis cycle...",void 0,` ${o} pairs  ${l}${u}  ${s}`);const h=Date.now();let m=0,g=0,x=0;try{let C=this.vaultContext.positions||[];this.vaultContext.walletAddress&&(!C||C.length===0)&&(await this.syncPortfolio(),C=this.vaultContext.positions||[]);const R=e.settings.tradingPairs;if(R.length===0){pt.addLog("WARNING","No trading pairs configured.");return}const B=5,O=[];for(let T=0;T<R.length;T+=B)O.push(R.slice(T,T+B));const F=e.settings.maxOpenPositions||3,H=[],j=new Map;for(let T=0;T<O.length;T++){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const _=O[T],L=T+1,z=_.join(", ");pt.updateStatus(" Fetching Data",null,`Collecting market data for ${z}...`,void 0,`Batch ${L}/${O.length}  ${_.length} coins`);const G=Date.now(),te=[];for(const pe of _){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const be=e.settings.autonomousIndicators?void 0:e.settings.indicatorSettings,se=await i4.getMarketContext(pe,this.vaultContext.walletAddress,e.settings.analysisTimeframe||"60",be,e.settings.historyCandles||100);if(e.settings.macroTimeframeEnabled&&e.settings.macroTimeframe&&!se.error){let ve=be;if(ve&&e.settings.macroEnabledIndicators){ve={...ve};const De={},Qe=e.settings.macroEnabledIndicators;for(const[it,et]of Object.entries(ve))De[it]={...et,enabled:et.enabled&&Qe.includes(it)};ve=De}const Re=await i4.getMacroSnapshot(pe,e.settings.macroTimeframe,ve);Object.keys(Re.indicators).length>0&&(se.macro=Re)}se.error||(te.push(se),j.set(pe,se)),await new Promise(ve=>setTimeout(ve,200))}if(m+=Date.now()-G,te.length===0)continue;for(const pe of te){const be=pe.symbol,se=C.find(ve=>{var Re;return((Re=ve.position)==null?void 0:Re.coin)===be||ve.coin===be});if(se&&parseFloat(((v=se.position)==null?void 0:v.szi)||se.szi||"0")!==0){const ve=se.position||se;pe.openPosition={hasPosition:!0,side:parseFloat(ve.szi)>0?"LONG":"SHORT",size:Math.abs(parseFloat(ve.szi)),entryPrice:parseFloat(ve.entryPx||"0"),unrealizedPnl:parseFloat(ve.unrealizedPnl||"0"),leverage:parseFloat(((b=ve.leverage)==null?void 0:b.value)||"1")}}else pe.openPosition={hasPosition:!1}}const K=C.length>0?i4.calculatePositionBreakevens(C,{makerFee:2e-4,takerFee:5e-4},new Map(te.map(pe=>{var be;return[pe.symbol,((be=pe.tradingCosts)==null?void 0:be.fundingRate)||0]}))):[],q={coins:te,portfolio:{balance:this.vaultContext.balance,positions:C,positionBreakevens:K,settings:{maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,bankrollType:e.settings.bankrollType,manualBankroll:e.settings.manualBankroll,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent},userFees:{makerFee:2e-4,takerFee:5e-4},lastExecutionError:this.lastError&&Date.now()-this.lastError.timestamp<6e4?{message:this.lastError.message,timestamp:this.lastError.timestamp}:null},autonomousMode:e.settings.autonomousIndicators,availablePresets:e.settings.autonomousIndicators?ed:void 0,cycleSummary:sd.getContextForAI("hyperliquid")},M=te.map(pe=>pe.symbol).join(", ");pt.updateStatus(" Analyzing",null,`AI processing ${M}...`,void 0,`Using ${s} indicators`);const P=e.settings.strategyPrompt||"Scalp trading. Buy low RSI, Sell high RSI.",Y=q.cycleSummary;Y&&pt.addLog("INFO",` Cycle Summary: Including ${Y.length} char context from previous cycles`);const X=Date.now();if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const re=await hm.getDealerBatchAnalysis(q,P,n);g+=Date.now()-X;let ae=[],Te;const ue=re;ue&&typeof ue=="object"&&!Array.isArray(ue)?(ae=ue.decisions||[],Te=ue.cycleSummary,e.settings.autonomousIndicators&&ue.chosenPreset&&(pt.addLog("INFO",` AI chose preset: ${((w=ed[ue.chosenPreset])==null?void 0:w.emoji)||""} ${ue.chosenPreset}`),ue.presetReason&&pt.addLog("INFO",` Preset reason: ${ue.presetReason}`))):Array.isArray(ue)&&(ae=ue),Te&&(sd.setSummary("hyperliquid",Te),pt.addLog("INFO",` AI Summary: ${Te.slice(0,80)}...`));for(const pe of ae){const be=pe.coin,se=pe.action,ve=pe.reason,Re=pe.confidence||0,De=j.get(be);if(pt.addLog("REASONING",`${be}: ${se} (Conf: ${(Re*100).toFixed(0)}%)`,{fullReason:ve,context:{...pe,currentPrice:De==null?void 0:De.currentPrice,indicators:De==null?void 0:De.indicators,enabledIndicators:De==null?void 0:De.enabledIndicators,tradingCosts:De==null?void 0:De.tradingCosts,orderBook:De==null?void 0:De.orderBook,macro:De==null?void 0:De.macro}}),se==="HOLD")continue;const Qe=e.settings.aggressiveMode?.5:.6;if(Re<Qe){pt.addLog("INFO",`Skipped ${se} on ${be}: Confidence ${(Re*100).toFixed(0)}% < ${(Qe*100).toFixed(0)}%`);continue}H.push({decision:pe,marketContext:j.get(be)})}T<O.length-1&&await new Promise(pe=>setTimeout(pe,500))}const $=H.length;pt.updateStatus(" Prioritizing",null,$>0?`Found ${$} trading signal${$>1?"s":""}`:"No actionable signals found",void 0,$>0?"Ranking by confidence...":"Monitoring for opportunities"),H.sort((T,_)=>{const L=(T.decision.confidence||0)+(T.decision.action==="CLOSE"?.5:0);return(_.decision.confidence||0)+(_.decision.action==="CLOSE"?.5:0)-L}),H.length>F&&pt.addLog("INFO",` Prioritizing top ${F} trades from ${H.length} signals (sorted by confidence)`);let W=0;const V=Date.now();for(const{decision:T,marketContext:_}of H){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const L=T.coin,z=T.action,G=T.reason,te=T.confidence||0;if(W>=F&&z!=="CLOSE"){pt.addLog("INFO",` Skipping ${z} on ${L} (${(te*100).toFixed(0)}%): Cycle limit reached, lower priority`);continue}const K=C.length;if(z==="BUY"&&K>=e.settings.maxOpenPositions&&!C.some(M=>{var P;return M.coin===L||((P=M.position)==null?void 0:P.coin)===L})){pt.addLog("WARNING",`Ignored BUY on ${L}: Max positions reached.`);continue}if(pt.addLog("SIGNAL",` Executing ${z} on ${L} (${(te*100).toFixed(0)}% confidence)`),this.executor){let q=T.sizeUSDC||e.settings.maxPositionSizeUSDC||20;e.settings.maxPositionSizeUSDC&&(q=Math.min(q,e.settings.maxPositionSizeUSDC));const M=T.suggestedLeverage||e.settings.maxLeverage||1,P=Math.min(M,e.settings.maxLeverage||1);M>P&&pt.addLog("INFO",` Leverage capped for ${L}: ${M}x  ${P}x (max: ${e.settings.maxLeverage}x)`);const X=(this.vaultContext.balance||0)*P*.95;if(q>X&&(q=X),q<10&&z!=="CLOSE"){pt.addLog("WARNING",`Trade skipped on ${L}: Size < $10`);continue}try{const re=z==="BUY"?"":z==="SELL"?"":"";pt.updateStatus(`${re} Executing`,null,`${z} ${L} @ $${((k=_==null?void 0:_.currentPrice)==null?void 0:k.toFixed(2))||"market"}`,void 0,`Confidence: ${(te*100).toFixed(0)}%  Size: $${q.toFixed(0)}`),await this.executor({coin:L,action:z,type:T.orderType||"limit",price:T.price||(_==null?void 0:_.currentPrice),sizeUSDC:q,leverage:P,reason:G,cloid:this.generateCloid(),stopLoss:T.stopLoss,takeProfit:T.takeProfit}),W+=z!=="CLOSE"?1:0,await new Promise(ae=>setTimeout(ae,2e3))}catch(re){console.error(`[DealerService] Execution failed for ${L}:`,re),pt.addLog("ERROR",`Execution failed for ${L}: ${re.message}`)}}}x+=Date.now()-V;const U=(Date.now()-h)/1e3;console.log(`[DealerService] Cycle Telemetry: Total=${U.toFixed(1)}s, Fetch=${(m/1e3).toFixed(1)}s, AI=${(g/1e3).toFixed(1)}s, Exec=${(x/1e3).toFixed(1)}s`),sd.recordCycle("hyperliquid",{timestamp:Date.now(),decisions:H.map(T=>({asset:T.decision.coin,action:T.decision.action,confidence:T.decision.confidence||0})),assetsAnalyzed:R}),this.consecutiveFailures=0}catch(C){if((C==null?void 0:C.name)==="AbortError"){console.log("[DealerService]  Cycle aborted by user"),pt.addLog("INFO"," Analysis cycle cancelled");return}console.error("[DealerService] Cycle Error:",C),pt.addLog("ERROR",`Cycle failed: ${C.message}`),this.lastError={message:C.message,timestamp:Date.now()}}finally{zt.releaseDealerLock(),zt.clearSharedCache(),pt.setAnalyzing(!1);const C=e.settings.checkIntervalSeconds,R=Math.floor(C/60),B=R>=1?`${R}min`:`${C}s`;pt.updateStatus(" Waiting",null,"Analysis complete, waiting for next cycle",void 0,`Next scan in ${B}`)}}setExecutor(e){this.executor=e}generateCloid(){const e=new Uint8Array(16);return crypto.getRandomValues(e),"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}}const sg=new Vat;class or{static async encrypt(e,n){const i=new TextEncoder().encode(e),s=crypto.getRandomValues(new Uint8Array(16)),o=await this.deriveKey(n,s),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,i),c=new Uint8Array(s.byteLength+a.byteLength+l.byteLength);return c.set(s,0),c.set(a,s.byteLength),c.set(new Uint8Array(l),s.byteLength+a.byteLength),btoa(String.fromCharCode(...c))}static async decrypt(e,n){try{const r=atob(e),i=new Uint8Array(r.length);for(let h=0;h<r.length;h++)i[h]=r.charCodeAt(h);const s=i.slice(0,16),o=i.slice(16,28),a=i.slice(28),l=await this.deriveKey(n,s),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},l,a);return new TextDecoder().decode(c)}catch{throw new Error("Failed to decrypt. Wrong password or corrupted data.")}}static async deriveKey(e,n){const r=new TextEncoder,i=await crypto.subtle.importKey("raw",r.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}const qat=(t,e)=>{const n=A.useSyncExternalStore(c=>pt.subscribe(c),()=>pt.getSnapshot()),r=A.useRef(!1);return A.useEffect(()=>{var h,m;const u=hm.getApiKey()||void 0||((m=(h=window.process)==null?void 0:h.env)==null?void 0:m.GEMINI_API_KEY);u&&hm.initialize(u)},[]),A.useEffect(()=>{sg.setVaultContext({walletAddress:t.hlPublicKey,balance:t.hlBalance||0})},[t.hlBalance,t.hlPublicKey]),A.useEffect(()=>{sg.setExecutor(async c=>{var u;if(console.log("[useDealer] GENUINE EXECUTION TRIGGERED:",c),!t.isUnlocked||!t.hlPublicKey||!t.hlEncryptedPrivateKey){pt.addLog("ERROR","Cannot execute: Vault locked or HL not initialized");return}try{if(!e)throw new Error("Password required for execution");const h=await or.decrypt(t.hlEncryptedPrivateKey,e),m=zt.getWalletFromPrivateKey(h);pt.addLog("TRADE",` EXECUTING ${c.action} ${c.coin}...`,{reason:c.reason,confidence:c.confidence});let g=c.action==="BUY",x=!1;if(c.action==="CLOSE"){console.log("[useDealer] Seeking position for CLOSE:",c.coin),console.log("[useDealer] Cached Positions (may be stale):",(u=t.hlPositions)==null?void 0:u.map(te=>{var K;return((K=te==null?void 0:te.position)==null?void 0:K.coin)||(te==null?void 0:te.coin)})),pt.addLog("INFO",`Fetching current positions for ${c.coin}...`);let z=[];try{const te=await zt.getUserState(t.hlPublicKey);z=(te==null?void 0:te.assetPositions)||[],console.log("[useDealer] Fresh Positions from API:",z.map(K=>{var q;return((q=K==null?void 0:K.position)==null?void 0:q.coin)||(K==null?void 0:K.coin)}))}catch(te){console.error("[useDealer] Failed to fetch fresh positions:",te),pt.addLog("ERROR",`Failed to fetch positions: ${te.message}`);return}const G=z.find(te=>{var K;return((K=te.position)==null?void 0:K.coin)===c.coin});if(G&&parseFloat(G.position.szi)!==0){const te=G.position.szi,K=parseFloat(te);g=K<0,x=!0,pt.addLog("INFO",`Closing ${K} ${c.coin} (Side: ${g?"BUY":"SELL"}, ReduceOnly: Yes)`)}else{pt.addLog("WARNING",`CLOSE signal ignored: No open position found for ${c.coin}`),console.log("[useDealer] Position not found or size is 0. Available positions:",z.map(te=>{var K,q;return`${(K=te==null?void 0:te.position)==null?void 0:K.coin}: ${(q=te==null?void 0:te.position)==null?void 0:q.szi}`}));return}}const v=c.type==="market";pt.addLog("INFO","Fetching market data...");const b=await Vn.getMarketData(c.coin),w=parseFloat(b.levels[0][0].px),k=parseFloat(b.levels[1][0].px),C=g?k:w,R=await Vn.getAssetDecimals(c.coin),B=c.sizeUSDC||n.settings.maxPositionSizeUSDC||20,O=B/C,F=parseFloat(O.toFixed(R));let H,j=v?"ioc":"limit";const $=Math.max(0,6-R);if(v){let G=g?C*1.05:C*.95,te=parseFloat(G.toFixed($));te=parseFloat(te.toPrecision(5)),H=parseFloat(te.toFixed($))}else{const z=c.price||C;let G=parseFloat(z.toFixed($));G=parseFloat(G.toPrecision(5)),H=parseFloat(G.toFixed($)),console.log(`[useDealer] Limit price rounded: ${z} -> ${H} (maxDecimals=${$})`)}const W=c.leverage||n.settings.maxLeverage||1,V=Math.min(W,n.settings.maxLeverage||1);if(W>V&&pt.addLog("INFO",` Leverage capped for ${c.coin}: ${W}x  ${V}x (max: ${n.settings.maxLeverage}x)`),V>1)try{await Vn.updateLeverage(m,c.coin,V,!1)}catch(z){console.warn(`[useDealer] Leverage update failed, using current: ${z.message}`),pt.addLog("WARNING",`Leverage update failed (using current): ${z.message.slice(0,50)}...`)}console.log("[useDealer SL/TP DEBUG] Settings:",{stopLossEnabled:n.settings.stopLossEnabled,stopLossPercent:n.settings.stopLossPercent,takeProfitEnabled:n.settings.takeProfitEnabled,takeProfitPercent:n.settings.takeProfitPercent}),console.log("[useDealer SL/TP DEBUG] AI Intent:",{stopLoss:c.stopLoss,takeProfit:c.takeProfit});let U;if(n.settings.stopLossEnabled&&!x)if(n.settings.stopLossPercent!==null){const z=n.settings.stopLossPercent/100;U=g?H*(1-z):H*(1+z),pt.addLog("INFO",` Stop Loss: ${n.settings.stopLossPercent}%  $${U.toFixed(2)}`)}else c.stopLoss&&(U=c.stopLoss,pt.addLog("INFO",` Stop Loss (AI): $${U.toFixed(2)}`));let T;if(n.settings.takeProfitEnabled&&!x)if(n.settings.takeProfitPercent!==null){const z=n.settings.takeProfitPercent/100;T=g?H*(1+z):H*(1-z),pt.addLog("INFO",` Take Profit: ${n.settings.takeProfitPercent}%  $${T.toFixed(2)}`)}else c.takeProfit&&(T=c.takeProfit,pt.addLog("INFO",` Take Profit (AI): $${T.toFixed(2)}`));const _=U||T;pt.addLog("INFO",`Placing ${j.toUpperCase()} order: ${F} ${c.coin} @ ${H.toFixed(2)}${_?" (with SL/TP)":""}`);const L=await Vn.createOrder(m,c.coin,g,F,H,{orderType:j,reduceOnly:x,cloid:c.cloid,stopLoss:U,takeProfit:T});pt.addLog("INFO",`Order Placed: ${L.status||"Submitted"}`),pt.addOperationRecord({coin:c.coin,action:c.action,timestamp:Date.now(),entryPrice:H,size:F,sizeUSDC:B,reasoning:c.reason||"AI analysis decision",confidence:c.confidence||.7,status:c.action==="CLOSE"?"CLOSED":"OPEN",cloid:c.cloid})}catch(h){console.error("Execution Error:",h),pt.addLog("ERROR",`Execution Failed: ${h.message}`)}}),r.current=!0},[t.isUnlocked,t.hlPublicKey,e,n.settings.maxPositionSizeUSDC,n.settings.maxLeverage,n.settings.stopLossEnabled,n.settings.stopLossPercent,n.settings.takeProfitEnabled,n.settings.takeProfitPercent]),{...n,toggleDealer:c=>{pt.toggleDealer(c),c?sg.startLoop():sg.stopLoop()},updateSettings:c=>{pt.updateSettings(c)},applyChanges:()=>{pt.reload(),n.isOn&&(sg.stopLoop(),setTimeout(()=>sg.startLoop(),500))},saveStrategy:c=>{pt.setStrategyPrompt(c)},clearLogs:()=>{pt.clearLogs()}}},Gat=({vaultAddress:t,setActiveTab:e})=>{const[n,r]=A.useState([]),[i,s]=A.useState([]),[o,a]=A.useState(!1),[l,c]=A.useState(null),u=A.useSyncExternalStore(m=>pt.subscribe(m),()=>pt.getSnapshot()),h=async()=>{if(t){a(!0);try{const m=await Vn.getUserState(t);if(m&&m.assetPositions){const x=m.assetPositions.filter(v=>parseFloat(v.position.szi)!==0).map(v=>({coin:v.position.coin,szi:v.position.szi,entryPx:v.position.entryPx,positionValue:v.position.positionValue,unrealizedPnl:v.position.unrealizedPnl,returnOnEquity:v.position.returnOnEquity,liquidationPx:v.position.liquidationPx,leverage:v.position.leverage}));r(x)}const g=await Vn.getOpenOrders(t);g&&Array.isArray(g)&&s(g.map(x=>({oid:x.oid,coin:x.coin,side:x.side,limitPx:x.limitPx,sz:x.sz,orderType:x.orderType,timestamp:x.timestamp}))),c(new Date)}catch(m){console.error("[DealerOpenOrders] Failed to fetch data:",m)}finally{a(!1)}}};return A.useEffect(()=>{u.isAnalyzing||h();const m=setInterval(()=>{!u.isAnalyzing&&!u.pendingExecution&&h()},3e4);return()=>clearInterval(m)},[t,u.isAnalyzing,u.pendingExecution]),d.jsxs("div",{className:"flex flex-col min-h-[150px]",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(ZT,{className:"h-4 w-4 text-[#E7FE55]"}),"Open Trading"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:()=>e(we.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/30 px-3 py-1.5 rounded transition-colors flex items-center gap-2 uppercase tracking-wider font-medium",title:"View Trading Page",children:[d.jsx(_n,{size:12})," Details"]}),d.jsx("button",{onClick:h,className:`p-1.5 rounded hover:bg-[#1a1b21] transition-colors ${o?"animate-spin text-[#60a5fa]":"text-[#747580]"}`,title:"Refresh",children:d.jsx(Fl,{className:"h-3.5 w-3.5"})}),d.jsxs("span",{className:"text-[10px] text-[#747580] bg-[#1a1b21] px-2 py-1 rounded uppercase tracking-wider",children:[n.length," Pos  ",i.length," Ord"]})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:n.length===0&&i.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-2 py-8 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx(ZT,{className:"h-8 w-8 opacity-30"}),d.jsx("span",{className:"text-[11px]",children:"No open positions or active orders"})]}):d.jsxs("div",{className:"flex flex-col gap-4",children:[n.length>0&&d.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[d.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[d.jsx(Jg,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),d.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Positions"})]}),d.jsxs("table",{className:"w-full text-left text-[10px]",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Entry"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Liq. Price"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"PnL (ROE%)"})]})}),d.jsx("tbody",{children:n.map(m=>{var k;const g=parseFloat(m.unrealizedPnl),x=(parseFloat(m.returnOnEquity)*100).toFixed(2),v=g>=0,b=parseFloat(m.szi)>0,w=((k=m.leverage)==null?void 0:k.value)||0;return d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[d.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),d.jsx("td",{className:"px-4 py-3",children:d.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${b?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:[b?"LONG":"SHORT"," ",w,"x"]})}),d.jsxs("td",{className:`px-4 py-3 text-right font-mono ${parseFloat(m.szi)>0?"text-[#34d399]":"text-red-400"}`,children:[parseFloat(m.szi)>0?"+":"",m.szi]}),d.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.entryPx).toFixed(4)]}),d.jsx("td",{className:"px-4 py-3 text-right text-[#747580] font-mono",children:m.liquidationPx?`$${parseFloat(m.liquidationPx).toFixed(4)}`:"-"}),d.jsxs("td",{className:`px-4 py-3 text-right font-mono font-semibold ${v?"text-[#34d399]":"text-red-400"}`,children:[v?"+":"",g.toFixed(2)," (",v?"+":"",x,"%)"]})]},m.coin)})})]})]}),i.length>0&&d.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[d.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[d.jsx(p8,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),d.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Orders"})]}),d.jsxs("table",{className:"w-full text-left text-[10px]",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Pair"}),d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Side"}),d.jsx("th",{className:"px-4 py-2 font-medium text-[9px] uppercase tracking-[0.05em]",children:"Type"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Size"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Price"}),d.jsx("th",{className:"px-4 py-2 font-medium text-right text-[9px] uppercase tracking-[0.05em]",children:"Action"})]})}),d.jsx("tbody",{children:i.map(m=>{var g;return d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[d.jsx("td",{className:"px-4 py-3 font-semibold text-white",children:m.coin}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${m.side==="B"?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:m.side==="B"?"BUY":"SELL"})}),d.jsx("td",{className:"px-4 py-3 text-[#a0a1a8] uppercase",children:((g=m.orderType)==null?void 0:g.split(" ")[0])||"Limit"}),d.jsx("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:m.sz}),d.jsxs("td",{className:"px-4 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.limitPx).toFixed(4)]}),d.jsx("td",{className:"px-4 py-3 text-right",children:d.jsx("span",{className:"text-[#747580] text-[9px] italic",children:"Pending"})})]},m.oid)})})]})]})]})}),d.jsx("div",{className:"pt-4 flex justify-end",children:d.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz/trade",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#E7FE55]/80 flex items-center gap-1 transition-colors",title:"Hyperliquid Platform Official Website",children:[d.jsx(_n,{size:10})," Hyperliquid Platform Testnet"]})})]})},Zhe=t=>{const e=A.useSyncExternalStore(n=>sd.subscribe(t,n),()=>sd.getSnapshot(t));return A.useEffect(()=>{sd.loadState(t)},[t]),{summary:e.aiSummary,isGenerating:e.isGenerating,cycleCount:e.recentCycles.length,lastUpdate:e.lastSummaryTime,hasSummary:!!e.aiSummary&&e.aiSummary.length>0}},Kat=t=>{const e=t.match(/(\w+):/);return e?e[1]:null},c4=8,Wat=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var q,M;const[i,s]=A.useState([]),[o,a]=A.useState([]),[l,c]=A.useState(0),[u,h]=A.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[m,g]=A.useState(0),x="hl_dealer_metrics_baseline",[v,b]=A.useState(null),[w,k]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const Y=await ke.getItem(ke.getUserKey(x));Y&&b(parseInt(Y,10))}catch(Y){console.warn("[DealerDashboard] Failed to load baseline:",Y)}k(!0)})()},[]);const C=A.useCallback(async()=>{const P=Date.now();b(P);try{await ke.setItem(ke.getUserKey(x),P.toString()),console.log("[DealerDashboard] Metrics baseline reset to:",new Date(P).toISOString())}catch(Y){console.error("[DealerDashboard] Failed to save baseline:",Y)}},[]),[R,B]=A.useState(!1),{summary:O,isGenerating:F,cycleCount:H,lastUpdate:j,hasSummary:$}=Zhe("hyperliquid"),[W,V]=A.useState(0),U=A.useMemo(()=>t.logs.filter(P=>P.type==="REASONING"||P.type==="SIGNAL").slice(0,20),[t.logs]),T=A.useMemo(()=>{var Y,X;const P=new Map;for(const re of U){const ae=Kat(re.message)||((X=(Y=re.details)==null?void 0:Y.context)==null?void 0:X.coin);ae&&!P.has(ae)&&P.set(ae,re)}return Array.from(P.entries()).sort((re,ae)=>ae[1].timestamp-re[1].timestamp).map(([re,ae])=>({coin:re,log:ae}))},[U]);A.useEffect(()=>{T.length>0&&!t.isAnalyzing&&V(0)},[T.length,t.isAnalyzing]);const _=T[W],L=A.useMemo(()=>[...i].reverse(),[i]);Math.ceil(L.length/c4),A.useMemo(()=>{const P=l*c4;return L.slice(P,P+c4)},[L,l]);const z=A.useCallback((P,Y)=>{const X=Y?P.filter(ve=>ve.time>=Y):P;let re=0,ae=0,Te=0,ue=0,pe=0;const be=X.map(ve=>{const Re=parseFloat(ve.closedPnl||"0"),De=parseFloat(ve.fee||"0"),Qe=Re-De;return Re!==0&&(pe++,Qe>0?ae++:Qe<0&&Te++),re+=Qe,ue+=parseFloat(ve.px)*parseFloat(ve.sz),{time:ve.time,date:new Date(ve.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:re,rawPnl:Re}}),se=ae+Te;h({totalPnl:re,winRate:se>0?ae/se*100:0,totalVolume:ue,tradesWithPnl:pe}),a(be)},[]);A.useEffect(()=>{if(!n)return;const P=async()=>{try{if(zt.isDealerActive()){console.log("[Dashboard]   Skipping fetch - dealer is active");return}const X=await zt.getUserFillsShared(n);if(X&&Array.isArray(X)){const Te=[...X.filter(ue=>ue.cloid||ue.c)].sort((ue,pe)=>ue.time-pe.time);s(Te),z(Te,v)}const re=await zt.getUserStateShared(n);if(re&&re.assetPositions){const ae=re.assetPositions.reduce((Te,ue)=>Te+parseFloat(ue.position.unrealizedPnl||"0"),0);g(ae)}}catch(X){console.error("Failed to load dealer history",X)}};P();const Y=setInterval(P,3e4);return()=>clearInterval(Y)},[n,v,z]),A.useEffect(()=>{i.length>0&&z(i,v)},[v,i,z]);const G=()=>{e(!t.isOn)},te=()=>{V(P=>Math.min(T.length-1,P+1))},K=()=>{V(P=>Math.max(0,P-1))};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[d.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[d.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[d.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),d.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),d.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),d.jsx("button",{onClick:G,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:d.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded relative group",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em]",children:"Total Profit"}),d.jsx("button",{onClick:C,className:"p-1 rounded opacity-0 group-hover:opacity-100 transition-opacity text-[#747580] hover:text-[#E7FE55] hover:bg-[#1a1b21]",title:"Reset metrics from now",children:d.jsx(Gne,{size:12})})]}),d.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${u.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[u.totalPnl>=0?"+":"",u.totalPnl.toFixed(2)," USD"]}),v&&d.jsxs("div",{className:"text-[8px] text-[#3a3b42] mt-1",title:`Measuring since ${new Date(v).toLocaleString()}`,children:["Since ",new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),d.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${m>=0?"text-[#34d399]":"text-red-400"}`,children:[m>=0?"+":"",m.toFixed(2)," USD"]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),d.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[u.winRate.toFixed(1),"%"]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),d.jsx(ld,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Active Pairs"}),d.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.tradingPairs.length})]}),d.jsx(Cw,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.checkIntervalSeconds,"s"]})]}),d.jsx(fs,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Leverage"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.maxLeverage,"x"]})]}),d.jsx(Rl,{className:"h-4 w-4 text-[#747580]"})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(_n,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),d.jsx("div",{className:"flex-1 w-full",children:o.length>0?d.jsx(Jw,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:d.jsxs(Gde,{data:o,children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"colorPnl",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),d.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),d.jsx(l1,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),d.jsx(u1,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),d.jsx(d1,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:P=>`$${P}`}),d.jsx(s2,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:P=>[`$${P.toFixed(2)}`,"Net PnL"]}),d.jsx(jN,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnl)"})]})}):d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[d.jsx(Rl,{className:"h-8 w-8 mb-2 opacity-40"}),d.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ao,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),d.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[d.jsx("button",{onClick:()=>B(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${R?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),d.jsx("button",{onClick:()=>$&&B(!0),disabled:!$,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${R?"bg-[#E7FE55] text-black":$?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:$?"View AI Summary":`Available after ${2-H} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!R&&d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&T.length>0&&!R&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:te,disabled:W>=T.length-1,className:`p-1 rounded transition-colors ${W>=T.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous coin",children:d.jsx(Nw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[W+1,"/",T.length]}),d.jsx("button",{onClick:K,disabled:W<=0,className:`p-1 rounded transition-colors ${W<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next coin",children:d.jsx(Ul,{size:16})})]})]}),R?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[H," cycles"]}),F&&d.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),j>0&&d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(j).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:O?d.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:O}):d.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}):_?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider",children:_.coin}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(_.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),((q=_.log.details)==null?void 0:q.signal)&&d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${_.log.details.signal==="BUY"||_.log.details.signal==="LONG"?"bg-[#34d399]/15 text-[#34d399]":_.log.details.signal==="SELL"||_.log.details.signal==="SHORT"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:_.log.details.signal})]}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',((M=_.log.details)==null?void 0:M.fullReason)||_.log.message,'"']})})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}),d.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),d.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),d.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),d.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),d.jsx("div",{className:"glass-panel p-5 rounded shrink-0",children:d.jsx(Gat,{vaultAddress:n,setActiveTab:r})})]})},Yat=({logs:t,onClearLogs:e})=>{const[n,r]=A.useState(null),i=t.filter(l=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(l.type))return!0;if(["INFO","WARNING"].includes(l.type)){const c=l.message.toLowerCase();return c.includes("executing")||c.includes("skipping")||c.includes("ignored")}return!1}),s=(l,c)=>l==="ERROR"?d.jsx("div",{className:"text-red-400",children:d.jsx(L3,{size:16})}):l==="TRADE"?d.jsx("div",{className:"text-[#34d399]",children:d.jsx(mm,{size:16})}):c.includes("BUY")||c.includes("BULLISH")?d.jsx("div",{className:"text-[#34d399]",children:d.jsx(_n,{size:16})}):c.includes("SELL")||c.includes("BEARISH")||c.includes("SHORT")?d.jsx("div",{className:"text-red-400",children:d.jsx(mC,{size:16})}):c.includes("CLOSE")?d.jsx("div",{className:"text-orange-400",children:d.jsx(L3,{size:16})}):d.jsx("div",{className:"text-[#E7FE55]",children:d.jsx(Ao,{size:16})}),o=l=>new Date(l).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),a=l=>typeof l=="number"?l.toFixed(2):typeof l=="object"&&l!==null?Object.entries(l).map(([c,u])=>`${c}: ${typeof u=="number"?u.toFixed(2):u}`).join(", "):String(l);return d.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[d.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[d.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[d.jsx(Ao,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),d.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[d.jsx(Ao,{size:48,className:"mb-4 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),d.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(l=>{var m,g;const c=n===l.id,u=(m=l.details)==null?void 0:m.context,h=(g=l.details)==null?void 0:g.context;return d.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[d.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),d.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[s(l.type,l.message),d.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${l.type==="ERROR"?"text-red-400":l.type==="TRADE"?"text-[#34d399]":l.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:l.type})]}),d.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[d.jsx(fs,{size:10}),o(l.timestamp)]})]}),d.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:l.message}),l.details&&l.details.fullReason&&d.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#60a5fa]/30",children:['"',l.details.fullReason,'"']}),u&&d.jsxs("button",{onClick:()=>r(c?null:l.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#60a5fa] hover:text-[#93c5fd] transition-colors uppercase tracking-wider",children:[c?d.jsx(lh,{size:12}):d.jsx(aa,{size:12}),c?"Hide":"Show"," Analysis Context"]}),c&&u&&d.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[h.indicators&&Object.keys(h.indicators).length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[d.jsx(eo,{size:10}),d.jsx("span",{children:"Indicators Used"})]}),d.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(h.indicators).map(([x,v])=>d.jsxs("div",{className:"flex justify-between bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:x}),d.jsx("span",{className:"text-[#4ade80] font-mono",children:a((v==null?void 0:v.value)||v)})]},x))})]}),h.macro&&Object.keys(h.macro.indicators||{}).length>0&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-400 mb-2 uppercase tracking-wider font-semibold",children:[d.jsx(_n,{size:10}),d.jsxs("span",{children:["Macro Confirmation (",h.macro.timeframe==="15"?"15m":h.macro.timeframe==="60"?"1H":h.macro.timeframe==="240"?"4H":h.macro.timeframe==="D"?"Daily":h.macro.timeframe==="W"?"Weekly":h.macro.timeframe,")"]})]}),d.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(h.macro.indicators).map(([x,v])=>{var B,O;const b=(O=(B=h.indicators)==null?void 0:B[x])==null?void 0:O.value,w=(v==null?void 0:v.value)||v;let k="";const C=typeof b=="number"?b:typeof b=="object"&&b!==null?Object.values(b)[0]:null,R=typeof w=="number"?w:typeof w=="object"&&w!==null?Object.values(w)[0]:null;if(x==="rsi"&&typeof C=="number"&&typeof R=="number"){const F=C>70,H=C<30,j=R>70,$=R<30;F&&$||H&&j?k=" ":(F&&j||H&&$)&&(k=" ")}return d.jsxs("div",{className:"flex justify-between bg-amber-500/10 border border-amber-500/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-amber-400 uppercase font-medium",children:x}),d.jsxs("span",{className:"text-amber-300 font-mono",children:[k,a(w)]})]},x)})})]}),h.tradingCosts&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#747580] mb-2 uppercase tracking-wider font-semibold",children:[d.jsx(F1,{size:10}),d.jsx("span",{children:"Trading Costs"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[d.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[d.jsx("span",{className:"text-[#747580]",children:"Maker: "}),d.jsxs("span",{className:"text-white font-mono",children:[((h.tradingCosts.makerFee??2e-4)*100).toFixed(3),"%"]})]}),d.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[d.jsx("span",{className:"text-[#747580]",children:"Taker: "}),d.jsxs("span",{className:"text-white font-mono",children:[((h.tradingCosts.takerFee??5e-4)*100).toFixed(3),"%"]})]}),d.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[d.jsx("span",{className:"text-[#747580]",children:"Funding: "}),d.jsxs("span",{className:(h.tradingCosts.fundingRate??0)>0?"text-red-400 font-mono":"text-[#34d399] font-mono",children:[((h.tradingCosts.fundingRate??0)*100).toFixed(4),"%"]})]})]})]}),h.currentPrice&&d.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Price at analysis: ",d.jsxs("span",{className:"text-white font-mono",children:["$",h.currentPrice.toLocaleString()]})]}),h.enabledIndicators&&h.enabledIndicators.length>0&&d.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Enabled: ",d.jsx("span",{className:"font-mono",children:h.enabledIndicators.join(", ").toUpperCase()})]})]})]})]},l.id)})})]})},Jat=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=A.useState(!1),s=t.details&&Object.keys(t.details).length>0;return d.jsxs(Bt.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[d.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(tl,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),d.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm",children:t.message}),s&&d.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?d.jsx(aa,{className:"h-4 w-4"}):d.jsx(Ul,{className:"h-4 w-4"})})]}),d.jsx(Zs,{children:s&&r&&d.jsx(Bt.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},Xat=({status:t,onClearLogs:e})=>{const[n,r]=A.useState("thinking"),i=A.useRef(null),s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`dealer_logs_${new Date().toISOString()}.json`,u=document.createElement("a");u.setAttribute("href",l),u.setAttribute("download",c),u.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";default:return"secondary"}};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[d.jsx("div",{className:"glass-panel p-4 shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[d.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(Ao,{className:"h-4 w-4"}),"Thinking"]}),d.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(b8,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&d.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),d.jsx(Zs,{children:n==="logs"&&d.jsxs(Bt.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[d.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:d.jsx(gm,{className:"h-4 w-4"})}),d.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:d.jsx(Vs,{className:"h-4 w-4"})})]})})]})}),d.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&d.jsx(Yat,{logs:t.logs,onClearLogs:e}),n==="logs"&&d.jsx("div",{className:"flex-1 min-h-0 relative",children:d.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?d.jsxs(Bt.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[d.jsx(pC,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):d.jsx(Zs,{children:t.logs.map((a,l)=>d.jsx(Jat,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},oZ={rsi:{name:"RSI",key:"rsi",description:"Relative Strength Index",icon:d.jsx(eo,{size:14}),params:[{key:"period",label:"Period",default:14}]},macd:{name:"MACD",key:"macd",description:"Moving Average Convergence Divergence",icon:d.jsx(_n,{size:14}),params:[{key:"fast",label:"Fast",default:12},{key:"slow",label:"Slow",default:26},{key:"signal",label:"Signal",default:9}]},bollinger:{name:"Bollinger",key:"bollinger",description:"Bollinger Bands",icon:d.jsx(Rl,{size:14}),params:[{key:"period",label:"Period",default:20},{key:"stdDev",label:"StdDev",default:2}]},atr:{name:"ATR",key:"atr",description:"Average True Range",icon:d.jsx(To,{size:14}),params:[{key:"period",label:"Period",default:14}]},adx:{name:"ADX",key:"adx",description:"Average Directional Index",icon:d.jsx(_n,{size:14}),params:[{key:"period",label:"Period",default:14}]},obv:{name:"OBV",key:"obv",description:"On-Balance Volume",icon:d.jsx(Rl,{size:14}),params:[]},vwap:{name:"VWAP",key:"vwap",description:"Volume Weighted Avg Price",icon:d.jsx(eo,{size:14}),params:[]},ichimoku:{name:"Ichimoku",key:"ichimoku",description:"Ichimoku Cloud",icon:d.jsx(_n,{size:14}),params:[{key:"conversion",label:"Conv",default:9},{key:"base",label:"Base",default:26},{key:"spanB",label:"SpanB",default:52},{key:"displacement",label:"Disp",default:26}]},ema:{name:"EMA",key:"ema",description:"Exponential Moving Average",icon:d.jsx(_n,{size:14}),params:[{key:"period",label:"Period",default:20}]},sma:{name:"SMA",key:"sma",description:"Simple Moving Average",icon:d.jsx(_n,{size:14}),params:[{key:"period",label:"Period",default:20}]},stoch:{name:"Stochastic",key:"stoch",description:"Stochastic Oscillator",icon:d.jsx(eo,{size:14}),params:[{key:"period",label:"Period",default:14},{key:"signalPeriod",label:"Signal",default:3}]}},Qat={trend:{bg:"bg-purple-500/10",text:"text-purple-400",border:"border-purple-500/30"},momentum:{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30"},volume:{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/30"},volatility:{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/30"}},Zat={trend:d.jsx(_n,{size:14}),momentum:d.jsx(eo,{size:14}),volume:d.jsx(Rl,{size:14}),volatility:d.jsx(To,{size:14})},elt=({indicatorSettings:t,autonomousMode:e,selectedPreset:n,onUpdateIndicatorSettings:r,onToggleAutonomousMode:i,onSelectPreset:s})=>{const[o,a]=A.useState("trend"),[l,c]=A.useState(null),[u,h]=A.useState([]),[m,g]=A.useState(!1),[x,v]=A.useState(!1),b=A.useMemo(()=>rhe(t),[t]),w=A.useMemo(()=>get(t),[t]),k=A.useMemo(()=>ihe(t),[t]),C=j=>{const $=t[j];!vX(t,j)&&!$.enabled||(r({[j]:{...$,enabled:!$.enabled}}),w!=="custom"&&s("custom"))},R=(j,$)=>{const W=t[j];r({[j]:{...W,weight:Math.max(.5,Math.min(2,$))}})},B=(j,$,W)=>{const V=t[j];r({[j]:{...V,params:{...V.params,[$]:W}}})},O=j=>{if(j==="custom")return;const $=met(j,t);r($),s(j)},F=()=>{r(Wg),s("balanced")},H=async()=>{g(!0),v(!0);const j=[],$=Object.keys(t).filter(W=>t[W].enabled);for(const W of $){const V=oZ[W];j.push({indicator:V.name,value:null,loading:!0}),h([...j]);try{const U=t[W],T=await bo.getIndicator("BTCUSDT",W,"60",U.params);j[j.length-1]={indicator:V.name,value:T.value,loading:!1}}catch(U){j[j.length-1]={indicator:V.name,value:null,loading:!1,error:U.message}}h([...j])}g(!1)};return e?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[d.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-br from-emerald-500/30 to-cyan-500/30 flex items-center justify-center mb-4 border border-emerald-500/20",children:d.jsx(zne,{className:"h-7 w-7 text-emerald-400"})}),d.jsx("h3",{className:"text-white font-semibold mb-2",children:"Autonomous Mode Active"}),d.jsx("p",{className:"text-xs text-gray-400 max-w-[280px] mb-4",children:"AI will analyze market conditions and choose the optimal preset each cycle:"}),d.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-[320px] text-[10px]",children:Object.entries(ed).filter(([j])=>j!=="custom").map(([j,$])=>d.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/30 rounded-lg p-2 text-left",children:[d.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[d.jsx("span",{children:$.emoji}),d.jsx("span",{className:"text-gray-300 font-medium",children:$.name})]}),d.jsx("div",{className:"text-gray-500",children:$.marketCondition})]},j))})]}):d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider font-semibold",children:"Presets"}),d.jsxs("span",{className:`text-[10px] font-mono ${k?"text-orange-400":"text-gray-400"}`,children:[b," / ",nte," selected"]})]}),d.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Object.entries(ed).filter(([j])=>j!=="custom").map(([j,$])=>d.jsxs("button",{onClick:()=>O(j),className:`px-2 py-1.5 rounded-lg text-[10px] font-medium transition-all border ${w===j?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-gray-800/30 border-gray-700/30 text-gray-400 hover:border-gray-600"}`,title:$.description,children:[d.jsx("span",{className:"mr-1",children:$.emoji}),$.name]},j))}),w==="custom"&&d.jsx("div",{className:"text-[10px] text-gray-500 text-center",children:" Custom configuration"})]}),d.jsx("div",{className:"space-y-2",children:Object.entries(aC).map(([j,$])=>{const W=o===j,V=the(t,j),U=nhe(t,j),T=Qat[j];return d.jsxs("div",{className:`rounded-lg border ${T.border} overflow-hidden`,children:[d.jsxs("button",{onClick:()=>a(W?null:j),className:`w-full px-3 py-2 flex items-center justify-between ${T.bg}`,children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:T.text,children:Zat[j]}),d.jsx("span",{className:`text-xs font-medium ${T.text}`,children:$.name})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-mono ${U?"bg-orange-500/20 text-orange-400":"bg-gray-700/50 text-gray-400"}`,children:[V,"/",$.maxIndicators]}),W?d.jsx(lh,{size:14,className:"text-gray-500"}):d.jsx(aa,{size:14,className:"text-gray-500"})]})]}),W&&d.jsx("div",{className:"p-2 space-y-1.5 bg-gray-900/30",children:$.indicators.map(_=>{const L=t[_],z=oZ[_],G=vX(t,_),te=l===_;return d.jsxs("div",{className:`rounded-lg border transition-all ${L.enabled?`${T.border} ${T.bg}`:"border-gray-700/30 bg-gray-800/20"}`,children:[d.jsxs("div",{className:"px-2.5 py-1.5 flex items-center gap-2",children:[d.jsx("button",{onClick:()=>C(_),disabled:!G&&!L.enabled,className:`shrink-0 w-7 h-3.5 rounded-full relative transition-all ${L.enabled?"bg-purple-500":G?"bg-gray-600":"bg-gray-700 opacity-40 cursor-not-allowed"}`,title:!G&&!L.enabled?"Limit reached":void 0,children:d.jsx("div",{className:"absolute top-0.5 w-2.5 h-2.5 rounded-full bg-white transition-all",style:{left:L.enabled?"14px":"2px"}})}),d.jsxs("button",{onClick:()=>c(te?null:_),className:"flex items-center gap-1.5 flex-1 text-left",children:[d.jsx("span",{className:`text-xs font-medium ${L.enabled?"text-white":"text-gray-400"}`,children:z.name}),d.jsx("span",{className:"text-[9px] text-gray-500 truncate",children:z.description})]}),L.enabled&&d.jsxs("span",{className:`text-[9px] font-mono px-1 py-0.5 rounded ${L.weight>1?"bg-green-500/20 text-green-400":L.weight<1?"bg-yellow-500/20 text-yellow-400":"bg-gray-700/50 text-gray-400"}`,children:[L.weight.toFixed(1),""]}),(z.params.length>0||L.enabled)&&d.jsx("button",{onClick:()=>c(te?null:_),children:te?d.jsx(lh,{size:12,className:"text-gray-500"}):d.jsx(aa,{size:12,className:"text-gray-500"})})]}),te&&d.jsxs("div",{className:"px-2.5 pb-2 pt-1 border-t border-gray-700/30 space-y-2",children:[L.enabled&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-gray-500 w-10",children:"Weight"}),d.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:L.weight,onChange:K=>R(_,parseFloat(K.target.value)),className:"flex-1 h-1 bg-gray-700 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-500"}),d.jsxs("span",{className:`text-[10px] font-mono w-8 text-right ${L.weight>1?"text-green-400":L.weight<1?"text-yellow-400":"text-gray-400"}`,children:[L.weight.toFixed(1),""]})]}),z.params.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1.5",children:z.params.map(K=>d.jsxs("div",{className:"flex items-center gap-1 bg-gray-900/50 px-1.5 py-0.5 rounded",children:[d.jsx("label",{className:"text-[9px] text-gray-400",children:K.label}),d.jsx("input",{type:"number",value:L.params[K.key]||K.default,onChange:q=>B(_,K.key,parseInt(q.target.value)),className:"w-10 bg-transparent border border-gray-700/50 rounded px-1 py-0.5 text-[9px] text-white focus:outline-none focus:border-purple-500"})]},K.key))})]})]},_)})})]},j)})}),d.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 border-t border-gray-700/30",children:[d.jsxs("button",{onClick:H,disabled:m||b===0,className:"flex items-center justify-center gap-1.5 bg-[#E7FE55] hover:bg-[#d4e94d] disabled:bg-gray-700 disabled:text-gray-500 text-black px-3 py-1.5 rounded text-[10px] font-bold uppercase tracking-wide transition-all",children:[m?d.jsx(Fl,{size:10,className:"animate-spin"}):d.jsx(To,{size:10}),"Test (",b,")"]}),d.jsx("button",{onClick:F,className:"px-2 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded text-[10px] transition-all",title:"Reset to Balanced Preset",children:d.jsx(Fl,{size:10})})]}),x&&u.length>0&&d.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700/30 p-2",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:"Results (BTC 1H)"}),d.jsx("button",{onClick:()=>{h([]),v(!1)},className:"text-[9px] text-gray-500 hover:text-gray-300",children:"Clear"})]}),d.jsx("div",{className:"space-y-1",children:u.map((j,$)=>d.jsxs("div",{className:"flex items-center justify-between text-[10px] bg-gray-800/30 px-2 py-1 rounded",children:[d.jsx("span",{className:"text-gray-300",children:j.indicator}),j.loading?d.jsx("span",{className:"text-gray-500",children:"..."}):j.error?d.jsx("span",{className:"text-red-400",title:j.error,children:"ERR"}):d.jsx("span",{className:"text-emerald-400 font-mono",children:typeof j.value=="object"?"":typeof j.value=="number"?j.value.toFixed(2):String(j.value)})]},$))})]})]})},tlt=({status:t,onToggle:e,onUpdateSettings:n,onApplyChanges:r})=>{const i=t.settings,[s,o]=A.useState(i),[a,l]=A.useState(!1);A.useEffect(()=>{o(i)},[JSON.stringify(i)]),A.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(i))},[s,i]);const c=w=>{o(k=>({...k,...w}))},u=()=>{n(s),r()},[h,m]=A.useState([]),[g,x]=A.useState(!1);A.useEffect(()=>{(async()=>{x(!0);try{const k=await zt.getAllAvailableAssets();m(k.sort())}catch(k){console.error("Failed to fetch assets",k)}finally{x(!1)}})()},[]);const v=w=>{s.tradingPairs.includes(w)||c({tradingPairs:[...s.tradingPairs,w]})},b=w=>{c({tradingPairs:s.tradingPairs.filter(k=>k!==w)})};return d.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("div",{className:"glass-panel p-4 rounded",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${t.isOn?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:d.jsx(To,{className:"h-5 w-5"})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),d.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[d.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.isOn?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),d.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:t.isOn?"Active & Running":"Stopped"})]})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>e(!t.isOn),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${t.isOn?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),d.jsxs("button",{onClick:u,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[d.jsx(Fl,{className:"h-3 w-3"})," Apply"]})]})]})}),d.jsxs("div",{className:"glass-panel p-3 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-2",children:[d.jsx(F1,{className:"h-3 w-3"})," Capital & Risk"]}),d.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Type"}),d.jsxs("div",{className:"flex gap-0.5",children:[d.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Fix"}),d.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Amount ($)"}),s.bankrollType==="MANUAL"?d.jsx("div",{className:"flex items-center",children:d.jsx("input",{type:"number",value:s.manualBankroll,onChange:w=>c({manualBankroll:parseFloat(w.target.value)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})}):d.jsx("span",{className:"text-sm font-mono text-[#E7FE55]",children:"Auto"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Leverage"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"number",value:s.maxLeverage,onChange:w=>c({maxLeverage:parseInt(w.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"}),d.jsx("span",{className:"text-[14px] text-[#747580]",children:"x"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Pos/Cycle"}),d.jsx("input",{type:"number",value:s.maxOpenPositions,onChange:w=>c({maxOpenPositions:parseInt(w.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Max Size ($)"}),d.jsx("div",{className:"flex items-center",children:d.jsx("input",{type:"number",value:s.maxPositionSizeUSDC,onChange:w=>c({maxPositionSizeUSDC:parseInt(w.target.value)}),className:"w-full bg-transparent text-sm font-bold font-mono text-white focus:outline-none"})})]})]}),d.jsxs("div",{className:"flex items-center gap-4 pt-2 border-t border-[#232328]",children:[d.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",children:[d.jsx(To,{className:"h-3 w-3 text-red-400"}),d.jsx("span",{className:"text-[10px] text-[#747580] group-hover:text-white",children:"Aggressive"}),d.jsx("button",{onClick:()=>c({aggressiveMode:!s.aggressiveMode}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.aggressiveMode?"bg-red-500":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${s.aggressiveMode?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),d.jsx("div",{className:"w-px h-4 bg-[#232328]"}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(ld,{className:"h-3 w-3 text-red-400"}),d.jsx("span",{className:"text-[10px] text-[#747580]",children:"STOP LOSS"}),s.stopLossEnabled&&d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"number",step:"0.5",value:s.stopLossPercent??"",placeholder:"AI",onChange:w=>c({stopLossPercent:w.target.value?parseFloat(w.target.value):null}),className:"w-10 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono focus:outline-none placeholder:text-[#747580]"}),d.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),d.jsx("button",{onClick:()=>c({stopLossEnabled:!s.stopLossEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.stopLossEnabled?"bg-red-500":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${s.stopLossEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),d.jsx("div",{className:"w-px h-4 bg-[#232328]"}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(Jg,{className:"h-3 w-3 text-[#34d399]"}),d.jsx("span",{className:"text-[10px] text-[#747580]",children:"TAKE PROFIT"}),s.takeProfitEnabled&&d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"number",step:"0.5",value:s.takeProfitPercent??"",placeholder:"AI",onChange:w=>c({takeProfitPercent:w.target.value?parseFloat(w.target.value):null}),className:"w-10 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono focus:outline-none placeholder:text-[#747580]"}),d.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),d.jsx("button",{onClick:()=>c({takeProfitEnabled:!s.takeProfitEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.takeProfitEnabled?"bg-[#34d399]":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${s.takeProfitEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(Rl,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),d.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Timeframe"}),d.jsxs("select",{className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none cursor-pointer [&>option]:bg-[#0f1015]",value:s.analysisTimeframe||"60",onChange:w=>c({analysisTimeframe:w.target.value}),children:[d.jsx("option",{value:"1",children:"1m"}),d.jsx("option",{value:"5",children:"5m"}),d.jsx("option",{value:"15",children:"15m"}),d.jsx("option",{value:"60",children:"1H"}),d.jsx("option",{value:"240",children:"4H"}),d.jsx("option",{value:"D",children:"1D"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Indicators History"}),d.jsx("input",{type:"number",min:10,max:100,value:s.historyCandles||100,onChange:w=>c({historyCandles:Math.min(100,Math.max(10,parseInt(w.target.value)||100))}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none",title:"10-100"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsxs("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:[d.jsx(fs,{className:"inline h-3 w-3 mr-1 opacity-50"}),"Interval"]}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("input",{type:"number",value:s.checkIntervalSeconds,onChange:w=>c({checkIntervalSeconds:Math.max(60,parseInt(w.target.value)||60)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}),d.jsx("span",{className:"text-[10px] text-[#747580]",children:"s"})]})]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(_n,{className:"h-3.5 w-3.5"})," Macro Timeframe"]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("span",{className:"text-[11px] text-[#747580]",children:"Multi-timeframe confirmation"})}),d.jsxs("div",{className:"flex items-center gap-3",children:[s.macroTimeframeEnabled&&d.jsxs("select",{className:"bg-[#0f1015] border border-[#232328] rounded py-1.5 px-2 text-[11px] text-white focus:outline-none focus:border-amber-500 [&>option]:bg-[#0f1015]",value:s.macroTimeframe||"240",onChange:w=>c({macroTimeframe:w.target.value}),children:[d.jsx("option",{value:"15",children:"15m"}),d.jsx("option",{value:"60",children:"1H"}),d.jsx("option",{value:"240",children:"4H"}),d.jsx("option",{value:"D",children:"1D"}),d.jsx("option",{value:"W",children:"1W"})]}),d.jsx("button",{onClick:()=>c({macroTimeframeEnabled:!s.macroTimeframeEnabled}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.macroTimeframeEnabled?"bg-amber-500":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${s.macroTimeframeEnabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),s.macroTimeframeEnabled&&d.jsxs("div",{className:"mt-3",children:[d.jsx("div",{className:"text-[10px] text-[#747580] mb-2 uppercase tracking-wider",children:"Active Indicators:"}),d.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Object.entries(s.indicatorSettings).filter(([w,k])=>k.enabled).map(([w,k])=>{var R;const C=(R=s.macroEnabledIndicators)==null?void 0:R.includes(w);return d.jsx("button",{onClick:()=>{const B=s.macroEnabledIndicators||[],O=B.includes(w)?B.filter(F=>F!==w):[...B,w];c({macroEnabledIndicators:O})},className:`
                                                        px-1.5 py-0.5 rounded text-[10px] font-mono border transition-all truncate
                                                        ${C?"bg-amber-500/20 border-amber-500/50 text-amber-300 hover:bg-amber-500/30":"bg-[#0f1015] border-[#232328] text-[#747580] hover:border-[#747580]"}
                                                    `,title:w.toUpperCase(),children:w.toUpperCase()},w)})}),(!s.macroEnabledIndicators||s.macroEnabledIndicators.length===0)&&d.jsxs("div",{className:"text-[10px] text-red-400 mt-2 flex items-center gap-1",children:[d.jsx(ld,{size:10})," No macro indicators selected"]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[d.jsx(Jg,{className:"h-3.5 w-3.5"})," Trading Pairs"]}),d.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.tradingPairs.length})]}),d.jsxs("select",{disabled:g,onChange:w=>{w.target.value&&v(w.target.value),w.target.value=""},className:"w-full bg-[#0f1015] border border-[#232328] rounded py-2 px-3 text-[11px] text-[#747580] focus:outline-none focus:text-white focus:border-[#E7FE55] transition-colors [&>option]:bg-[#0f1015] cursor-pointer hover:border-[#E7FE55]/30 mb-3",children:[d.jsx("option",{value:"",children:g?"Loading...":"+ Add Pair..."}),!g&&h.filter(w=>!s.tradingPairs.includes(w)).map(w=>d.jsx("option",{value:w,children:w},w))]}),d.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-[120px] overflow-y-auto custom-scrollbar",children:[s.tradingPairs.map(w=>d.jsxs("span",{className:"inline-flex items-center gap-1 bg-[#1a1b21] hover:bg-[#232328] border border-[#232328] hover:border-[#E7FE55]/50 text-[#a0a1a8] hover:text-white px-2 py-1 rounded text-[10px] font-mono transition-all",children:[w,d.jsx("button",{onClick:()=>b(w),className:"text-[#747580] hover:text-red-400 transition-colors",children:d.jsx(ux,{size:10})})]},w)),s.tradingPairs.length===0&&d.jsxs("div",{className:"w-full py-4 flex flex-col items-center justify-center text-[#747580] opacity-60 border border-dashed border-[#232328] rounded",children:[d.jsx(Jg,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"text-[10px]",children:"No pairs"})]})]})]})]}),d.jsxs("div",{className:"glass-panel rounded flex flex-col overflow-hidden",children:[d.jsxs("div",{className:"p-3 border-b border-[#232328] flex items-center justify-between shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[d.jsx(eo,{className:"h-3.5 w-3.5"})," Indicators"]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[10px] text-[#747580]",children:s.autonomousIndicators?"Auto":"Manual"}),d.jsx("button",{onClick:()=>c({autonomousIndicators:!s.autonomousIndicators}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.autonomousIndicators?"bg-[#34d399]":"bg-[#E7FE55]"}`,title:s.autonomousIndicators?"AI selects indicators":"Manual selection",children:d.jsx("span",{className:`${s.autonomousIndicators?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),d.jsx("div",{className:"p-4",children:d.jsx(elt,{indicatorSettings:s.indicatorSettings,autonomousMode:s.autonomousIndicators,selectedPreset:s.selectedPreset||"balanced",onUpdateIndicatorSettings:w=>{c({indicatorSettings:{...s.indicatorSettings,...w}})},onToggleAutonomousMode:w=>{c({autonomousIndicators:w})},onSelectPreset:w=>{c({selectedPreset:w})}})})]})]})})},nlt=({status:t,onSaveStrategy:e,onUpdateSettings:n})=>{var b,w;A.useEffect(()=>{console.log("DealerPromptPage Mounted. Status:",t)},[t]);const r=t==null?void 0:t.settings;if(!r)return d.jsx("div",{className:"p-8 text-red-500",children:"Error: Dealer settings not loaded."});const[i,s]=A.useState(r.strategyPrompt||""),[o,a]=A.useState(r.promptMode||"preset"),[l,c]=A.useState(r.selectedPreset||"balanced"),[u,h]=A.useState(!1);A.useEffect(()=>{s(r.strategyPrompt),a(r.promptMode||"preset"),c(r.selectedPreset||"balanced")},[r.strategyPrompt,r.promptMode,r.selectedPreset]);const m=k=>{if(k==="custom")a("custom"),c("custom"),h(!0);else{const C=c3[k];s(C),a("preset"),c(k),h(C!==r.strategyPrompt)}},g=k=>{const C=k.target.value;s(C);const R=Object.entries(c3).find(([B,O])=>O===C);R?(a("preset"),c(R[0])):(a("custom"),c("custom")),h(C!==r.strategyPrompt)},x=()=>{e(i),n&&n({promptMode:o,selectedPreset:l,strategyPrompt:i}),h(!1)},v=k=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${l===k&&o==="preset"||o==="custom"&&k==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return d.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[d.jsx("div",{className:"glass-panel p-4 shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(_w,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),d.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${o==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[d.jsx("span",{className:`h-1 w-1 rounded-full ${o==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),o==="preset"?`${(b=ed[l])==null?void 0:b.emoji} ${(w=ed[l])==null?void 0:w.name}`:"Custom"]}),u&&d.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"})]}),d.jsxs("button",{onClick:x,disabled:!u,className:`
                            flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                            ${u?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                        `,children:[d.jsx(v8,{className:"h-3.5 w-3.5"}),"Save"]})]})}),d.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[d.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[d.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[d.jsx(Kne,{size:12,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),d.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(ed).filter(([k])=>k!=="custom").map(([k,C])=>d.jsxs("button",{onClick:()=>m(k),className:v(k),children:[d.jsx("span",{children:C.emoji}),d.jsx("span",{children:C.name})]},k)),d.jsx("div",{className:"h-px bg-[#232328] my-2"}),d.jsxs("button",{onClick:()=>m("custom"),className:v("custom"),children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Custom"})]})]}),d.jsx("div",{className:"mt-auto pt-4 px-1",children:d.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),d.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),d.jsx("textarea",{value:i,onChange:g,className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your trading strategy here...
// 
// Example:
// You are a conservative trader focusing on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`}),d.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),d.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[d.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),d.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})};function aZ(t){const e=rlt(t),n=A.forwardRef((r,i)=>{const{children:s,...o}=r,a=A.Children.toArray(s),l=a.find(slt);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function rlt(t){const e=A.forwardRef((n,r)=>{const{children:i,...s}=n;if(A.isValidElement(i)){const o=alt(i),a=olt(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Yx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ilt=Symbol("radix.slottable");function slt(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ilt}function olt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function alt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function epe(t){const e=t+"CollectionProvider",[n,r]=$m(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:w}=v,k=Ns.useRef(null),C=Ns.useRef(new Map).current;return d.jsx(i,{scope:b,itemMap:C,collectionRef:k,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=aZ(a),c=Ns.forwardRef((v,b)=>{const{scope:w,children:k}=v,C=s(a,w),R=Nr(b,C.collectionRef);return d.jsx(l,{ref:R,children:k})});c.displayName=a;const u=t+"CollectionItemSlot",h="data-radix-collection-item",m=aZ(u),g=Ns.forwardRef((v,b)=>{const{scope:w,children:k,...C}=v,R=Ns.useRef(null),B=Nr(b,R),O=s(u,w);return Ns.useEffect(()=>(O.itemMap.set(R,{ref:R,...C}),()=>void O.itemMap.delete(R))),d.jsx(m,{[h]:"",ref:B,children:k})});g.displayName=u;function x(v){const b=s(t+"CollectionConsumer",v);return Ns.useCallback(()=>{const k=b.collectionRef.current;if(!k)return[];const C=Array.from(k.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((O,F)=>C.indexOf(O.ref.current)-C.indexOf(F.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},x,r]}var llt=A.createContext(void 0);function KB(t){const e=A.useContext(llt);return t||e||"ltr"}var u4="rovingFocusGroup.onEntryFocus",clt={bubbles:!1,cancelable:!0},AE="RovingFocusGroup",[oD,tpe,ult]=epe(AE),[dlt,npe]=$m(AE,[ult]),[flt,hlt]=dlt(AE),rpe=A.forwardRef((t,e)=>d.jsx(oD.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(oD.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(plt,{...t,ref:e})})}));rpe.displayName=AE;var plt=A.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,m=A.useRef(null),g=Nr(e,m),x=KB(s),[v,b]=qw({prop:o,defaultProp:a??null,onChange:l,caller:AE}),[w,k]=A.useState(!1),C=dh(c),R=tpe(n),B=A.useRef(!1),[O,F]=A.useState(0);return A.useEffect(()=>{const H=m.current;if(H)return H.addEventListener(u4,C),()=>H.removeEventListener(u4,C)},[C]),d.jsx(flt,{scope:n,orientation:r,dir:x,loop:i,currentTabStopId:v,onItemFocus:A.useCallback(H=>b(H),[b]),onItemShiftTab:A.useCallback(()=>k(!0),[]),onFocusableItemAdd:A.useCallback(()=>F(H=>H+1),[]),onFocusableItemRemove:A.useCallback(()=>F(H=>H-1),[]),children:d.jsx(Mn.div,{tabIndex:w||O===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:pn(t.onMouseDown,()=>{B.current=!0}),onFocus:pn(t.onFocus,H=>{const j=!B.current;if(H.target===H.currentTarget&&j&&!w){const $=new CustomEvent(u4,clt);if(H.currentTarget.dispatchEvent($),!$.defaultPrevented){const W=R().filter(L=>L.focusable),V=W.find(L=>L.active),U=W.find(L=>L.id===v),_=[V,U,...W].filter(Boolean).map(L=>L.ref.current);ope(_,u)}}B.current=!1}),onBlur:pn(t.onBlur,()=>k(!1))})})}),ipe="RovingFocusGroupItem",spe=A.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=nh(),c=s||l,u=hlt(ipe,n),h=u.currentTabStopId===c,m=tpe(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:v}=u;return A.useEffect(()=>{if(r)return g(),()=>x()},[r,g,x]),d.jsx(oD.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:d.jsx(Mn.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:pn(t.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:pn(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:pn(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=ylt(b,u.orientation,u.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let C=m().filter(R=>R.focusable).map(R=>R.ref.current);if(w==="last")C.reverse();else if(w==="prev"||w==="next"){w==="prev"&&C.reverse();const R=C.indexOf(b.currentTarget);C=u.loop?xlt(C,R+1):C.slice(R+1)}setTimeout(()=>ope(C))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});spe.displayName=ipe;var mlt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function glt(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function ylt(t,e,n){const r=glt(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return mlt[r]}function ope(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function xlt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var vlt=rpe,blt=spe,QN="Tabs",[wlt]=$m(QN,[npe]),ape=npe(),[Elt,WB]=wlt(QN),lpe=A.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=KB(a),[h,m]=qw({prop:r,onChange:i,defaultProp:s??"",caller:QN});return d.jsx(Elt,{scope:n,baseId:nh(),value:h,onValueChange:m,orientation:o,dir:u,activationMode:l,children:d.jsx(Mn.div,{dir:u,"data-orientation":o,...c,ref:e})})});lpe.displayName=QN;var cpe="TabsList",upe=A.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=WB(cpe,n),o=ape(n);return d.jsx(vlt,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:d.jsx(Mn.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});upe.displayName=cpe;var dpe="TabsTrigger",fpe=A.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=WB(dpe,n),a=ape(n),l=mpe(o.baseId,r),c=gpe(o.baseId,r),u=r===o.value;return d.jsx(blt,{asChild:!0,...a,focusable:!i,active:u,children:d.jsx(Mn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:pn(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:pn(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:pn(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});fpe.displayName=dpe;var hpe="TabsContent",ppe=A.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=WB(hpe,n),l=mpe(a.baseId,r),c=gpe(a.baseId,r),u=r===a.value,h=A.useRef(u);return A.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),d.jsx(Hm,{present:i||u,children:({present:m})=>d.jsx(Mn.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&s})})});ppe.displayName=hpe;function mpe(t,e){return`${t}-trigger-${e}`}function gpe(t,e){return`${t}-content-${e}`}var Slt=lpe,ype=upe,xpe=fpe,vpe=ppe;const bpe=Slt,Alt=A.forwardRef(({className:t,...e},n)=>d.jsx(ype,{ref:n,className:qt("inline-flex h-9 items-center justify-center rounded bg-[#1a1b21] p-1 text-[#747580] border border-[#232328]",t),...e}));Alt.displayName=ype.displayName;const Tlt=A.forwardRef(({className:t,...e},n)=>d.jsx(xpe,{ref:n,className:qt("inline-flex items-center justify-center whitespace-nowrap rounded px-4 py-1.5 text-[11px] font-medium uppercase tracking-[0.05em] ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[#E7FE55] data-[state=active]:text-black data-[state=active]:shadow-sm hover:text-[#a0a1a8]",t),...e}));Tlt.displayName=xpe.displayName;const Qu=A.forwardRef(({className:t,...e},n)=>d.jsx(vpe,{ref:n,className:qt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Qu.displayName=vpe.displayName;const klt=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.hlPublicKey,s=n===we.VAULT_DEALER?we.DEALER_DASHBOARD:n,{isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:u,currentSignal:h,trendAssessment:m,pendingExecution:g,currentExposure:x,activePositions:v,portfolioValue:b,lastSyncTimestamp:w,settings:k,logs:C,operationHistory:R,toggleDealer:B,updateSettings:O,applyChanges:F,saveStrategy:H,clearLogs:j}=qat(t,e),$={isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:u,currentSignal:h,trendAssessment:m,pendingExecution:g,currentExposure:x,activePositions:v,portfolioValue:b,lastSyncTimestamp:w,settings:k,logs:C,operationHistory:R},W=()=>{switch(s){case we.DEALER_DASHBOARD:return"dashboard";case we.DEALER_THINKING:return"thinking";case we.DEALER_CONFIG:return"config";case we.DEALER_PROMPT:return"prompt";default:return"dashboard"}},V=U=>{switch(U){case"dashboard":r(we.DEALER_DASHBOARD);break;case"thinking":r(we.DEALER_THINKING);break;case"config":r(we.DEALER_CONFIG);break;case"prompt":r(we.DEALER_PROMPT);break}};return i?d.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&d.jsx(Bt.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:d.jsx(tl,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),d.jsx(bpe,{value:W(),onValueChange:V,className:"flex-1 flex flex-col min-h-0",children:d.jsxs("div",{className:"flex-1 min-h-0 relative",children:[d.jsx(Qu,{value:"dashboard",className:"h-full mt-0 absolute inset-0",children:d.jsx(Wat,{status:$,onToggle:B,vaultAddress:t.hlPublicKey,setActiveTab:r})}),d.jsx(Qu,{value:"thinking",className:"h-full mt-0 absolute inset-0",children:d.jsx(Xat,{status:$,onClearLogs:j})}),d.jsx(Qu,{value:"config",className:"h-full mt-0 absolute inset-0 overflow-y-auto",children:d.jsx(tlt,{status:$,onToggle:B,onUpdateSettings:O,onApplyChanges:F,onSaveStrategy:H})}),d.jsx(Qu,{value:"prompt",className:"h-full mt-0 absolute inset-0",children:d.jsx(nlt,{status:$,onSaveStrategy:H,onUpdateSettings:O})})]})})]}):d.jsx(Bt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:d.jsx(_n,{size:32,className:"text-[#34d399]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),d.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Hyperliquid wallet before using Hyperliquid Dealer. Go to the ",d.jsx("span",{className:"text-[#34d399]",children:"Vault"})," page to set up your wallet."]}),d.jsx(zi,{onClick:()=>r(we.VAULT),variant:"success",size:"lg",className:"mt-4",children:"Go to Vault"})]})})},Clt=({vault:t,connectHLOwnerWallet:e,refreshHLBalance:n,activityLog:r=[]})=>{var U;const[i,s]=A.useState([]),[o,a]=A.useState([]),[l,c]=A.useState(new Map),[u,h]=A.useState([]),[m,g]=A.useState(""),[x,v]=A.useState(!1),[b,w]=A.useState(Date.now()),[k,C]=A.useState(!0),[R,B]=A.useState(null),O=async T=>{try{await navigator.clipboard.writeText(T),B(T),setTimeout(()=>B(null),2e3)}catch(_){console.error("Failed to copy:",_)}},F=A.useCallback(async()=>{if(t.hlPublicKey){v(!0);try{await n(t.hlPublicKey);const _=(await Vn.getUserState(t.hlPublicKey)).assetPositions.filter(P=>parseFloat(P.position.szi)!==0);s(_);const L=await Vn.getOpenOrders(t.hlPublicKey);a(L);const z=await Vn.getAvailableAssets();h(z);const G=new Set([..._.map(P=>P.position.coin)]);["BTC","ETH","SOL","BNB","DOGE","AVAX","MATIC","ARB","OP","APT"].forEach(P=>G.add(P));const K=[...G].slice(0,15).map(async P=>{var Y,X,re,ae;try{const Te=await Vn.getMarketData(P),ue=parseFloat(((X=(Y=Te.levels[0])==null?void 0:Y[0])==null?void 0:X.px)||0),pe=parseFloat(((ae=(re=Te.levels[1])==null?void 0:re[0])==null?void 0:ae.px)||0),be=pe-ue,se=ue>0?be/ue*100:0;return{coin:P,bid:ue,ask:pe,spread:be,spreadPercent:se,lastUpdate:Date.now()}}catch(Te){return console.error(`Failed to fetch market data for ${P}`,Te),null}}),q=await Promise.all(K),M=new Map;q.forEach(P=>{P&&M.set(P.coin,P)}),c(M),w(Date.now())}catch(T){console.error("Failed to fetch HL data",T)}finally{v(!1)}}},[t.hlPublicKey,n]);A.useEffect(()=>{t.hlPublicKey&&F()},[t.hlPublicKey]),A.useEffect(()=>{if(!k||!t.hlPublicKey)return;const T=setInterval(()=>{F()},6e4);return()=>clearInterval(T)},[k,t.hlPublicKey,F]);const H=i.reduce((T,_)=>T+parseFloat(_.position.unrealizedPnl||0),0),j=i.reduce((T,_)=>{const L=Math.abs(parseFloat(_.position.szi)),z=parseFloat(_.position.entryPx);return T+L*z},0),$=u.filter(T=>T.toLowerCase().includes(m.toLowerCase())),W=new Set(i.map(T=>T.position.coin)),V=r.filter(T=>T.network==="hyperliquid"||T.type==="HL Order"||T.type.startsWith("HL"));return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center group",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:d.jsx(cx,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Balance"})}),d.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",((U=t.hlBalance)==null?void 0:U.toFixed(2))||"0.00"]}),d.jsx("div",{className:"text-[11px] text-[#747580] mb-3",children:"USDC"}),d.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-[#232328]",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"autoRefresh",checked:k,onChange:T=>C(T.target.checked),className:"w-3.5 h-3.5 rounded border-[#232328] bg-[#1a1b21] key-emerald-600 focus:ring-emerald-500"}),d.jsx("label",{htmlFor:"autoRefresh",className:"text-[10px] text-[#747580] cursor-pointer",children:"Auto-refresh"})]}),d.jsx("button",{onClick:F,disabled:x,className:"p-1.5 hover:bg-[#1a1b21] rounded transition-colors text-[#E7FE55] hover:text-[#f0ff85] disabled:opacity-50",title:"Refresh now",children:d.jsx(Fl,{size:14,className:x?"animate-spin":""})})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(_n,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Position Value"})}),d.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",j.toFixed(2)]}),d.jsxs("div",{className:"flex items-center justify-between mt-1",children:[d.jsxs("div",{className:"text-[11px] text-[#747580]",children:[i.length," open position",i.length!==1?"s":""]}),d.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[d.jsx(_n,{size:10})," Hyperliquid"]})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:H>=0?d.jsx(_n,{size:48,className:"text-white"}):d.jsx(mC,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Unrealized PnL"})}),d.jsxs("div",{className:`text-2xl lg:text-3xl font-semibold tracking-tight mb-1 ${H>=0?"text-[#34d399]":"text-red-400"}`,children:[H>=0?"+":"",H.toFixed(2)]}),d.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"USDC"})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:d.jsx(cx,{size:48,className:"text-white"})}),d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Address"})}),t.hlPublicKey?d.jsxs("div",{onClick:()=>O(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),d.jsxs("span",{className:"text-sm font-mono text-white truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),R===t.hlPublicKey?d.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):d.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):d.jsx("div",{className:"text-sm font-mono text-white mb-1 truncate",children:"Not Available"}),d.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:b&&`Updated ${new Date(b).toLocaleTimeString()}`})]})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(eo,{size:18,className:"text-[#E7FE55]"}),"Open Positions"]}),d.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[i.length," active"]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),d.jsx("th",{className:"py-3 font-medium",children:"Side"}),d.jsx("th",{className:"py-3 font-medium",children:"Size"}),d.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Current Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),d.jsx("th",{className:"py-3 font-medium",children:"Margin Type"}),d.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Unrealized PnL"}),d.jsx("th",{className:"py-3 pr-4 font-medium",children:"ROE"})]})}),d.jsx("tbody",{className:"text-sm",children:i.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:10,className:"p-8 text-center text-slate-500",children:"No open positions"})}):i.map((T,_)=>{var re,ae;const L=parseFloat(T.position.szi)>0,z=Math.abs(parseFloat(T.position.szi)),G=parseFloat(T.position.entryPx),te=parseFloat(T.position.unrealizedPnl),K=parseFloat(T.position.returnOnEquity),q=((re=T.position.leverage)==null?void 0:re.value)||1,M=((ae=T.position.leverage)==null?void 0:ae.type)||"cross",P=T.position.liquidationPx,Y=l.get(T.position.coin),X=L?Y==null?void 0:Y.bid:Y==null?void 0:Y.ask;return d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[d.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:T.position.coin}),d.jsx("td",{className:`py-3 font-semibold ${L?"text-[#34d399]":"text-red-400"}`,children:L?"LONG":"SHORT"}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:z.toFixed(4)}),d.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",G]}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:X?`$${X.toFixed(2)}`:"-"}),d.jsxs("td",{className:"py-3 text-[#E7FE55] font-medium",children:[q,"x"]}),d.jsx("td",{className:"py-3",children:d.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-medium uppercase tracking-wider ${M==="isolated"?"bg-purple-500/15 text-purple-400":"bg-blue-500/15 text-blue-400"}`,children:M})}),d.jsx("td",{className:"py-3 text-red-400/80",children:P?`$${parseFloat(P).toFixed(2)}`:"-"}),d.jsxs("td",{className:`py-3 font-semibold ${te>=0?"text-[#34d399]":"text-red-400"}`,children:[te>=0?"+":"",te.toFixed(2)]}),d.jsxs("td",{className:`py-3 pr-4 font-medium ${K>=0?"text-[#34d399]":"text-red-400"}`,children:[K>=0?"+":"",(K*100).toFixed(2),"%"]})]},_)})})]})})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(to,{size:18,className:"text-yellow-500"}),"Open Orders"]}),d.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[o.length," pending"]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),d.jsx("th",{className:"py-3 font-medium",children:"Side"}),d.jsx("th",{className:"py-3 font-medium",children:"Size"}),d.jsx("th",{className:"py-3 font-medium",children:"Price"}),d.jsx("th",{className:"py-3 font-medium",children:"Type"})]})}),d.jsx("tbody",{className:"text-sm",children:o.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No open orders"})}):o.map((T,_)=>d.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21]",children:[d.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:T.coin}),d.jsx("td",{className:`py-3 font-medium ${T.side==="B"?"text-[#34d399]":"text-red-400"}`,children:T.side==="B"?"BUY":"SELL"}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:T.sz}),d.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",T.limitPx]}),d.jsx("td",{className:"py-3 text-[#a0a1a8]",children:T.orderType})]},_))})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"flex items-center justify-between mb-4 border-b border-[#232328] pb-2",children:d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(eo,{size:18,className:"text-[#E7FE55]"}),"Recent Activity"]})}),d.jsx("div",{className:"flex-1",children:V.length===0?d.jsx("div",{className:"text-center py-8 text-[#747580] text-sm",children:"No recent transactions"}):d.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:V.slice(0,15).map((T,_)=>d.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328]/50 last:border-0 border-dashed",children:[d.jsx("div",{className:"mt-1 p-1.5 rounded-full bg-[#E7FE55]/15 text-[#E7FE55]",children:d.jsx(eo,{size:12})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex justify-between items-start gap-2",children:[d.jsx("span",{className:"text-xs font-medium text-[#E7FE55]",children:T.type}),d.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:new Date(T.timestamp).toLocaleTimeString()})]}),d.jsx("div",{className:"text-[11px] text-[#a0a1a8] truncate mt-0.5",children:T.desc}),T.signature&&T.signature!=="pending"&&d.jsxs("div",{className:"text-[9px] text-[#747580] font-mono mt-1 hover:text-[#E7FE55] cursor-pointer transition-colors",children:[T.signature.slice(0,6),"..."]})]})]},_))})})]}),d.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-[#232328] pb-2",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx(_n,{size:18,className:"text-[#E7FE55]"}),"Market Data"]}),d.jsxs("span",{className:"text-[10px] text-[#747580] mt-1",children:[$.length," assets"]})]}),d.jsxs("div",{className:"relative",children:[d.jsx(w8,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#747580]",size:14}),d.jsx("input",{type:"text",placeholder:"Search assets...",value:m,onChange:T=>g(T.target.value),className:"w-48 pl-9 pr-3 py-1.5 bg-[#14151a] border border-[#232328] text-white rounded text-xs focus:outline-none focus:border-[#E7FE55]"})]})]}),d.jsx("div",{className:"overflow-x-auto max-h-96 custom-scrollbar",children:d.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[d.jsx("thead",{className:"sticky top-0 bg-[#0c0d10] z-10",children:d.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[d.jsx("th",{className:"py-2 pl-2 font-medium",children:"Asset"}),d.jsx("th",{className:"py-2 font-medium",children:"Bid"}),d.jsx("th",{className:"py-2 font-medium",children:"Ask"}),d.jsx("th",{className:"py-2 font-medium",children:"Spread %"})]})}),d.jsx("tbody",{className:"text-sm",children:$.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:4,className:"py-8 text-center text-[#747580]",children:"No assets found"})}):$.slice(0,20).map(T=>{const _=l.get(T),L=W.has(T);return d.jsxs("tr",{className:`border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors ${L?"bg-[#E7FE55]/5":""}`,children:[d.jsxs("td",{className:"py-2 pl-2 font-medium text-white flex items-center gap-2",children:[T,L&&d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]",title:"Open Position"})]}),d.jsx("td",{className:"py-2 text-[#34d399] font-medium",children:_?`$${_.bid.toFixed(2)}`:"-"}),d.jsx("td",{className:"py-2 text-red-400 font-medium",children:_?`$${_.ask.toFixed(2)}`:"-"}),d.jsx("td",{className:"py-2 text-[#a0a1a8]",children:_?`${_.spreadPercent.toFixed(3)}%`:"-"})]},T)})})]})})]})]})]})};var d4="focusScope.autoFocusOnMount",f4="focusScope.autoFocusOnUnmount",lZ={bubbles:!1,cancelable:!0},Nlt="FocusScope",YB=A.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=A.useState(null),c=dh(i),u=dh(s),h=A.useRef(null),m=Nr(e,v=>l(v)),g=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let v=function(C){if(g.paused||!a)return;const R=C.target;a.contains(R)?h.current=R:kf(h.current,{select:!0})},b=function(C){if(g.paused||!a)return;const R=C.relatedTarget;R!==null&&(a.contains(R)||kf(h.current,{select:!0}))},w=function(C){if(document.activeElement===document.body)for(const B of C)B.removedNodes.length>0&&kf(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const k=new MutationObserver(w);return a&&k.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),k.disconnect()}}},[r,a,g.paused]),A.useEffect(()=>{if(a){uZ.add(g);const v=document.activeElement;if(!a.contains(v)){const w=new CustomEvent(d4,lZ);a.addEventListener(d4,c),a.dispatchEvent(w),w.defaultPrevented||(Plt(Mlt(wpe(a)),{select:!0}),document.activeElement===v&&kf(a))}return()=>{a.removeEventListener(d4,c),setTimeout(()=>{const w=new CustomEvent(f4,lZ);a.addEventListener(f4,u),a.dispatchEvent(w),w.defaultPrevented||kf(v??document.body,{select:!0}),a.removeEventListener(f4,u),uZ.remove(g)},0)}}},[a,c,u,g]);const x=A.useCallback(v=>{if(!n&&!r||g.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,w=document.activeElement;if(b&&w){const k=v.currentTarget,[C,R]=_lt(k);C&&R?!v.shiftKey&&w===R?(v.preventDefault(),n&&kf(C,{select:!0})):v.shiftKey&&w===C&&(v.preventDefault(),n&&kf(R,{select:!0})):w===k&&v.preventDefault()}},[n,r,g.paused]);return d.jsx(Mn.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});YB.displayName=Nlt;function Plt(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(kf(r,{select:e}),document.activeElement!==n)return}function _lt(t){const e=wpe(t),n=cZ(e,t),r=cZ(e.reverse(),t);return[n,r]}function wpe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function cZ(t,e){for(const n of t)if(!Ilt(n,{upTo:e}))return n}function Ilt(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Rlt(t){return t instanceof HTMLInputElement&&"select"in t}function kf(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Rlt(t)&&e&&t.select()}}var uZ=Olt();function Olt(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=dZ(t,e),t.unshift(e)},remove(e){var n;t=dZ(t,e),(n=t[0])==null||n.resume()}}}function dZ(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Mlt(t){return t.filter(e=>e.tagName!=="A")}var h4=0;function Epe(){A.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??fZ()),document.body.insertAdjacentElement("beforeend",t[1]??fZ()),h4++,()=>{h4===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),h4--}},[])}function fZ(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var jT="right-scroll-bar-position",BT="width-before-scroll-bar",Llt="with-scroll-bars-hidden",Dlt="--removed-body-scroll-bar-size";function p4(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function jlt(t,e){var n=A.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Blt=typeof window<"u"?A.useLayoutEffect:A.useEffect,hZ=new WeakMap;function Ult(t,e){var n=jlt(null,function(r){return t.forEach(function(i){return p4(i,r)})});return Blt(function(){var r=hZ.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||p4(a,null)}),s.forEach(function(a){i.has(a)||p4(a,o)})}hZ.set(n,t)},[t]),n}function Flt(t){return t}function $lt(t,e){e===void 0&&(e=Flt);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function zlt(t){t===void 0&&(t={});var e=$lt(null);return e.options=Sc({async:!0,ssr:!1},t),e}var Spe=function(t){var e=t.sideCar,n=Bx(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,Sc({},n))};Spe.isSideCarExport=!0;function Hlt(t,e){return t.useMedium(e),Spe}var Ape=zlt(),m4=function(){},ZN=A.forwardRef(function(t,e){var n=A.useRef(null),r=A.useState({onScrollCapture:m4,onWheelCapture:m4,onTouchMoveCapture:m4}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,m=t.sideCar,g=t.noRelative,x=t.noIsolation,v=t.inert,b=t.allowPinchZoom,w=t.as,k=w===void 0?"div":w,C=t.gapMode,R=Bx(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),B=m,O=Ult([n,e]),F=Sc(Sc({},R),i);return A.createElement(A.Fragment,null,u&&A.createElement(B,{sideCar:Ape,removeScrollBar:c,shards:h,noRelative:g,noIsolation:x,inert:v,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:C}),o?A.cloneElement(A.Children.only(a),Sc(Sc({},F),{ref:O})):A.createElement(k,Sc({},F,{className:l,ref:O}),a))});ZN.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ZN.classNames={fullWidth:BT,zeroRight:jT};var Vlt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qlt(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Vlt();return e&&t.setAttribute("nonce",e),t}function Glt(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Klt(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Wlt=function(){var t=0,e=null;return{add:function(n){t==0&&(e=qlt())&&(Glt(e,n),Klt(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Ylt=function(){var t=Wlt();return function(e,n){A.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Tpe=function(){var t=Ylt(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Jlt={left:0,top:0,right:0,gap:0},g4=function(t){return parseInt(t||"",10)||0},Xlt=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[g4(n),g4(r),g4(i)]},Qlt=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Jlt;var e=Xlt(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Zlt=Tpe(),fy="data-scroll-locked",ect=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Llt,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(fy,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(jT,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(BT,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(jT," .").concat(jT,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(BT," .").concat(BT,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(fy,`] {
    `).concat(Dlt,": ").concat(a,`px;
  }
`)},pZ=function(){var t=parseInt(document.body.getAttribute(fy)||"0",10);return isFinite(t)?t:0},tct=function(){A.useEffect(function(){return document.body.setAttribute(fy,(pZ()+1).toString()),function(){var t=pZ()-1;t<=0?document.body.removeAttribute(fy):document.body.setAttribute(fy,t.toString())}},[])},nct=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;tct();var s=A.useMemo(function(){return Qlt(i)},[i]);return A.createElement(Zlt,{styles:ect(s,!e,i,n?"":"!important")})},aD=!1;if(typeof window<"u")try{var VA=Object.defineProperty({},"passive",{get:function(){return aD=!0,!0}});window.addEventListener("test",VA,VA),window.removeEventListener("test",VA,VA)}catch{aD=!1}var og=aD?{passive:!1}:!1,rct=function(t){return t.tagName==="TEXTAREA"},kpe=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!rct(t)&&n[e]==="visible")},ict=function(t){return kpe(t,"overflowY")},sct=function(t){return kpe(t,"overflowX")},mZ=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Cpe(t,r);if(i){var s=Npe(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},oct=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},act=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Cpe=function(t,e){return t==="v"?ict(e):sct(e)},Npe=function(t,e){return t==="v"?oct(e):act(e)},lct=function(t,e){return t==="h"&&e==="rtl"?-1:1},cct=function(t,e,n,r,i){var s=lct(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,m=0;do{if(!a)break;var g=Npe(t,a),x=g[0],v=g[1],b=g[2],w=v-b-s*x;(x||w)&&Cpe(t,a)&&(h+=w,m+=x);var k=a.parentNode;a=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(m)<1)&&(c=!0),c},qA=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},gZ=function(t){return[t.deltaX,t.deltaY]},yZ=function(t){return t&&"current"in t?t.current:t},uct=function(t,e){return t[0]===e[0]&&t[1]===e[1]},dct=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},fct=0,ag=[];function hct(t){var e=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),i=A.useState(fct++)[0],s=A.useState(Tpe)[0],o=A.useRef(t);A.useEffect(function(){o.current=t},[t]),A.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=jxe([t.lockRef.current],(t.shards||[]).map(yZ),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=A.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var w=qA(v),k=n.current,C="deltaX"in v?v.deltaX:k[0]-w[0],R="deltaY"in v?v.deltaY:k[1]-w[1],B,O=v.target,F=Math.abs(C)>Math.abs(R)?"h":"v";if("touches"in v&&F==="h"&&O.type==="range")return!1;var H=window.getSelection(),j=H&&H.anchorNode,$=j?j===O||j.contains(O):!1;if($)return!1;var W=mZ(F,O);if(!W)return!0;if(W?B=F:(B=F==="v"?"h":"v",W=mZ(F,O)),!W)return!1;if(!r.current&&"changedTouches"in v&&(C||R)&&(r.current=B),!B)return!0;var V=r.current||B;return cct(V,b,v,V==="h"?C:R)},[]),l=A.useCallback(function(v){var b=v;if(!(!ag.length||ag[ag.length-1]!==s)){var w="deltaY"in b?gZ(b):qA(b),k=e.current.filter(function(B){return B.name===b.type&&(B.target===b.target||b.target===B.shadowParent)&&uct(B.delta,w)})[0];if(k&&k.should){b.cancelable&&b.preventDefault();return}if(!k){var C=(o.current.shards||[]).map(yZ).filter(Boolean).filter(function(B){return B.contains(b.target)}),R=C.length>0?a(b,C[0]):!o.current.noIsolation;R&&b.cancelable&&b.preventDefault()}}},[]),c=A.useCallback(function(v,b,w,k){var C={name:v,delta:b,target:w,should:k,shadowParent:pct(w)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(R){return R!==C})},1)},[]),u=A.useCallback(function(v){n.current=qA(v),r.current=void 0},[]),h=A.useCallback(function(v){c(v.type,gZ(v),v.target,a(v,t.lockRef.current))},[]),m=A.useCallback(function(v){c(v.type,qA(v),v.target,a(v,t.lockRef.current))},[]);A.useEffect(function(){return ag.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,og),document.addEventListener("touchmove",l,og),document.addEventListener("touchstart",u,og),function(){ag=ag.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,og),document.removeEventListener("touchmove",l,og),document.removeEventListener("touchstart",u,og)}},[]);var g=t.removeScrollBar,x=t.inert;return A.createElement(A.Fragment,null,x?A.createElement(s,{styles:dct(i)}):null,g?A.createElement(nct,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function pct(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const mct=Hlt(Ape,hct);var JB=A.forwardRef(function(t,e){return A.createElement(ZN,Sc({},t,{ref:e,sideCar:mct}))});JB.classNames=ZN.classNames;var gct=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},lg=new WeakMap,GA=new WeakMap,KA={},y4=0,Ppe=function(t){return t&&(t.host||Ppe(t.parentNode))},yct=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Ppe(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},xct=function(t,e,n,r){var i=yct(e,Array.isArray(t)?t:[t]);KA[n]||(KA[n]=new WeakMap);var s=KA[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(a.has(m))u(m);else try{var g=m.getAttribute(r),x=g!==null&&g!=="false",v=(lg.get(m)||0)+1,b=(s.get(m)||0)+1;lg.set(m,v),s.set(m,b),o.push(m),v===1&&x&&GA.set(m,!0),b===1&&m.setAttribute(n,"true"),x||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return u(e),a.clear(),y4++,function(){o.forEach(function(h){var m=lg.get(h)-1,g=s.get(h)-1;lg.set(h,m),s.set(h,g),m||(GA.has(h)||h.removeAttribute(r),GA.delete(h)),g||h.removeAttribute(n)}),y4--,y4||(lg=new WeakMap,lg=new WeakMap,GA=new WeakMap,KA={})}},_pe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=gct(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),xct(r,i,n,"aria-hidden")):function(){return null}};function vct(t){const e=bct(t),n=A.forwardRef((r,i)=>{const{children:s,...o}=r,a=A.Children.toArray(s),l=a.find(Ect);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function bct(t){const e=A.forwardRef((n,r)=>{const{children:i,...s}=n;if(A.isValidElement(i)){const o=Act(i),a=Sct(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Yx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var wct=Symbol("radix.slottable");function Ect(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===wct}function Sct(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Act(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var eP="Dialog",[Ipe]=$m(eP),[Tct,Jl]=Ipe(eP),Rpe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=A.useRef(null),l=A.useRef(null),[c,u]=qw({prop:r,defaultProp:i??!1,onChange:s,caller:eP});return d.jsx(Tct,{scope:e,triggerRef:a,contentRef:l,contentId:nh(),titleId:nh(),descriptionId:nh(),open:c,onOpenChange:u,onOpenToggle:A.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};Rpe.displayName=eP;var Ope="DialogTrigger",kct=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Jl(Ope,n),s=Nr(e,i.triggerRef);return d.jsx(Mn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":ZB(i.open),...r,ref:s,onClick:pn(t.onClick,i.onOpenToggle)})});kct.displayName=Ope;var XB="DialogPortal",[Cct,Mpe]=Ipe(XB,{forceMount:void 0}),Lpe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Jl(XB,e);return d.jsx(Cct,{scope:e,forceMount:n,children:A.Children.map(r,o=>d.jsx(Hm,{present:n||s.open,children:d.jsx(UC,{asChild:!0,container:i,children:o})}))})};Lpe.displayName=XB;var D2="DialogOverlay",Dpe=A.forwardRef((t,e)=>{const n=Mpe(D2,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Jl(D2,t.__scopeDialog);return s.modal?d.jsx(Hm,{present:r||s.open,children:d.jsx(Pct,{...i,ref:e})}):null});Dpe.displayName=D2;var Nct=vct("DialogOverlay.RemoveScroll"),Pct=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Jl(D2,n);return d.jsx(JB,{as:Nct,allowPinchZoom:!0,shards:[i.contentRef],children:d.jsx(Mn.div,{"data-state":ZB(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Om="DialogContent",jpe=A.forwardRef((t,e)=>{const n=Mpe(Om,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Jl(Om,t.__scopeDialog);return d.jsx(Hm,{present:r||s.open,children:s.modal?d.jsx(_ct,{...i,ref:e}):d.jsx(Ict,{...i,ref:e})})});jpe.displayName=Om;var _ct=A.forwardRef((t,e)=>{const n=Jl(Om,t.__scopeDialog),r=A.useRef(null),i=Nr(e,n.contentRef,r);return A.useEffect(()=>{const s=r.current;if(s)return _pe(s)},[]),d.jsx(Bpe,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pn(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pn(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:pn(t.onFocusOutside,s=>s.preventDefault())})}),Ict=A.forwardRef((t,e)=>{const n=Jl(Om,t.__scopeDialog),r=A.useRef(!1),i=A.useRef(!1);return d.jsx(Bpe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Bpe=A.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Jl(Om,n),l=A.useRef(null),c=Nr(e,l);return Epe(),d.jsxs(d.Fragment,{children:[d.jsx(YB,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:d.jsx(OC,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":ZB(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(Rct,{titleId:a.titleId}),d.jsx(Mct,{contentRef:l,descriptionId:a.descriptionId})]})]})}),QB="DialogTitle",Upe=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Jl(QB,n);return d.jsx(Mn.h2,{id:i.titleId,...r,ref:e})});Upe.displayName=QB;var Fpe="DialogDescription",$pe=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Jl(Fpe,n);return d.jsx(Mn.p,{id:i.descriptionId,...r,ref:e})});$pe.displayName=Fpe;var zpe="DialogClose",Hpe=A.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Jl(zpe,n);return d.jsx(Mn.button,{type:"button",...r,ref:e,onClick:pn(t.onClick,()=>i.onOpenChange(!1))})});Hpe.displayName=zpe;function ZB(t){return t?"open":"closed"}var Vpe="DialogTitleWarning",[G0t,qpe]=IIe(Vpe,{contentName:Om,titleName:QB,docsSlug:"dialog"}),Rct=({titleId:t})=>{const e=qpe(Vpe),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Oct="DialogDescriptionWarning",Mct=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qpe(Oct).contentName}}.`;return A.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Lct=Rpe,Dct=Lpe,Gpe=Dpe,Kpe=jpe,Wpe=Upe,Ype=$pe,jct=Hpe;const yv=Lct,Bct=Dct,Jpe=A.forwardRef(({className:t,...e},n)=>d.jsx(Gpe,{ref:n,className:qt("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Jpe.displayName=Gpe.displayName;const Wm=A.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(Bct,{children:[d.jsx(Jpe,{}),d.jsxs(Kpe,{ref:r,className:qt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-700 bg-slate-900 p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl",t),...n,children:[e,d.jsxs(jct,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(ux,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wm.displayName=Kpe.displayName;const Ym=({className:t,...e})=>d.jsx("div",{className:qt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ym.displayName="DialogHeader";const xv=({className:t,...e})=>d.jsx("div",{className:qt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});xv.displayName="DialogFooter";const Jm=A.forwardRef(({className:t,...e},n)=>d.jsx(Wpe,{ref:n,className:qt("text-lg font-semibold leading-none tracking-tight text-white",t),...e}));Jm.displayName=Wpe.displayName;const Xm=A.forwardRef(({className:t,...e},n)=>d.jsx(Ype,{ref:n,className:qt("text-sm text-muted-foreground",t),...e}));Xm.displayName=Ype.displayName;const Uct=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r,onClose:i})=>{const s=async()=>{try{await navigator.clipboard.writeText(t),r("Private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},o=()=>{e(""),n(!1),r("Solana backup confirmed!"),i&&i()};return d.jsx(yv,{open:!0,onOpenChange:()=>{},children:d.jsxs(Wm,{className:"max-w-md",onPointerDownOutside:a=>a.preventDefault(),children:[d.jsxs(Ym,{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:d.jsx(ld,{className:"text-purple-400 w-5 h-5"})}),d.jsx("div",{children:d.jsxs(Jm,{className:"flex items-center gap-2",children:["Backup Your Solana Key",d.jsx(tl,{variant:"purple",children:"CRITICAL"})]})})]}),d.jsx(Xm,{children:"This is your Solana wallet private key. Save it securely - you will NOT see it again."})]}),d.jsxs(Bt.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[d.jsx(to,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),d.jsxs("p",{className:"text-red-400 text-sm",children:[d.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[d.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key"}),d.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),d.jsxs(zi,{onClick:s,variant:"outline",className:"w-full",children:[d.jsx(om,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),d.jsx(xv,{children:d.jsx(zi,{onClick:o,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},Fct=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Hyperliquid private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Hyperliquid backup confirmed!")};return d.jsx(yv,{open:!0,onOpenChange:()=>{},children:d.jsxs(Wm,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[d.jsxs(Ym,{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center",children:d.jsx(ld,{className:"text-emerald-400 w-5 h-5"})}),d.jsx("div",{children:d.jsxs(Jm,{className:"flex items-center gap-2",children:["Backup Your Hyperliquid Key",d.jsx(tl,{variant:"success",children:"CRITICAL"})]})})]}),d.jsx(Xm,{children:"This is your Hyperliquid (EVM) wallet private key. Save it securely - you will NOT see it again."})]}),d.jsxs(Bt.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[d.jsx(to,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),d.jsxs("p",{className:"text-red-400 text-sm",children:[d.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[d.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (EVM)"}),d.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),d.jsxs(zi,{onClick:i,variant:"outline",className:"w-full",children:[d.jsx(om,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),d.jsx(xv,{children:d.jsx(zi,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},$ct=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Polymarket private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Polymarket backup confirmed!")};return d.jsx(yv,{open:!0,onOpenChange:()=>{},children:d.jsxs(Wm,{className:"max-w-md",onPointerDownOutside:o=>o.preventDefault(),children:[d.jsxs(Ym,{children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:d.jsx(ld,{className:"text-purple-400 w-5 h-5"})}),d.jsx("div",{children:d.jsxs(Jm,{className:"flex items-center gap-2",children:["Backup Your Polymarket Key",d.jsx(tl,{variant:"destructive",children:"CRITICAL"})]})})]}),d.jsx(Xm,{children:"This is your Polymarket (Polygon) wallet private key. Save it securely - you will NOT see it again."})]}),d.jsxs(Bt.div,{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[d.jsx(to,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),d.jsxs("p",{className:"text-red-400 text-sm",children:[d.jsx("strong",{children:"Warning:"})," Anyone with this key can access your Polygon funds. Never share it with anyone."]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[d.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold mb-2",children:"Private Key (Polygon EVM)"}),d.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded border border-slate-700/50",children:t})]}),d.jsxs(zi,{onClick:i,variant:"outline",className:"w-full",children:[d.jsx(om,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),d.jsx(xv,{children:d.jsx(zi,{onClick:s,variant:"success",className:"w-full",children:"I've Saved My Key Securely"})})]})})},cg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function TE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lD(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Qm(t,...e){if(!TE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Xpe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");lD(t.outputLen),lD(t.blockLen)}function j2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zct(t,e){Qm(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Rx(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function x4(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function oc(t,e){return t<<32-e|t>>>e}const Qpe=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Hct=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pm(t){if(Qm(t),Qpe)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Hct[t[n]];return e}const bu={_0:48,_9:57,A:65,F:70,a:97,f:102};function xZ(t){if(t>=bu._0&&t<=bu._9)return t-bu._0;if(t>=bu.A&&t<=bu.F)return t-(bu.A-10);if(t>=bu.a&&t<=bu.f)return t-(bu.a-10)}function B2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Qpe)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=xZ(t.charCodeAt(s)),a=xZ(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function Vct(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function e7(t){return typeof t=="string"&&(t=Vct(t)),Qm(t),t}function Cc(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Qm(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class Zpe{}function eme(t){const e=r=>t().update(e7(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function t7(t=32){if(cg&&typeof cg.getRandomValues=="function")return cg.getRandomValues(new Uint8Array(t));if(cg&&typeof cg.randomBytes=="function")return Uint8Array.from(cg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function qct(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}function Gct(t,e,n){return t&e^~t&n}function Kct(t,e,n){return t&e^t&n^e&n}class tme extends Zpe{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=x4(this.buffer)}update(e){j2(this),e=e7(e),Qm(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=x4(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){j2(this),zct(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,Rx(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;qct(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=x4(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const yf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gs=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),WA=BigInt(2**32-1),vZ=BigInt(32);function Wct(t,e=!1){return e?{h:Number(t&WA),l:Number(t>>vZ&WA)}:{h:Number(t>>vZ&WA)|0,l:Number(t&WA)|0}}function Yct(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=Wct(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const bZ=(t,e,n)=>t>>>n,wZ=(t,e,n)=>t<<32-n|e>>>n,ug=(t,e,n)=>t>>>n|e<<32-n,dg=(t,e,n)=>t<<32-n|e>>>n,YA=(t,e,n)=>t<<64-n|e>>>n-32,JA=(t,e,n)=>t>>>n-32|e<<64-n;function wu(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Jct=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Xct=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Qct=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Zct=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,eut=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),tut=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,nut=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xf=new Uint32Array(64);class rut extends tme{constructor(e=32){super(64,e,8,!1),this.A=yf[0]|0,this.B=yf[1]|0,this.C=yf[2]|0,this.D=yf[3]|0,this.E=yf[4]|0,this.F=yf[5]|0,this.G=yf[6]|0,this.H=yf[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)xf[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=xf[h-15],g=xf[h-2],x=oc(m,7)^oc(m,18)^m>>>3,v=oc(g,17)^oc(g,19)^g>>>10;xf[h]=v+xf[h-7]+x+xf[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let h=0;h<64;h++){const m=oc(a,6)^oc(a,11)^oc(a,25),g=u+m+Gct(a,l,c)+nut[h]+xf[h]|0,v=(oc(r,2)^oc(r,13)^oc(r,22))+Kct(r,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,l,c,u)}roundClean(){Rx(xf)}destroy(){this.set(0,0,0,0,0,0,0,0),Rx(this.buffer)}}const nme=Yct(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),iut=nme[0],sut=nme[1],vf=new Uint32Array(80),bf=new Uint32Array(80);class out extends tme{constructor(e=64){super(128,e,16,!1),this.Ah=gs[0]|0,this.Al=gs[1]|0,this.Bh=gs[2]|0,this.Bl=gs[3]|0,this.Ch=gs[4]|0,this.Cl=gs[5]|0,this.Dh=gs[6]|0,this.Dl=gs[7]|0,this.Eh=gs[8]|0,this.El=gs[9]|0,this.Fh=gs[10]|0,this.Fl=gs[11]|0,this.Gh=gs[12]|0,this.Gl=gs[13]|0,this.Hh=gs[14]|0,this.Hl=gs[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:h,Fl:m,Gh:g,Gl:x,Hh:v,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,u,h,m,g,x,v,b]}set(e,n,r,i,s,o,a,l,c,u,h,m,g,x,v,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=h|0,this.Fl=m|0,this.Gh=g|0,this.Gl=x|0,this.Hh=v|0,this.Hl=b|0}process(e,n){for(let C=0;C<16;C++,n+=4)vf[C]=e.getUint32(n),bf[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const R=vf[C-15]|0,B=bf[C-15]|0,O=ug(R,B,1)^ug(R,B,8)^bZ(R,B,7),F=dg(R,B,1)^dg(R,B,8)^wZ(R,B,7),H=vf[C-2]|0,j=bf[C-2]|0,$=ug(H,j,19)^YA(H,j,61)^bZ(H,j,6),W=dg(H,j,19)^JA(H,j,61)^wZ(H,j,6),V=Qct(F,W,bf[C-7],bf[C-16]),U=Zct(V,O,$,vf[C-7],vf[C-16]);vf[C]=U|0,bf[C]=V|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:h,El:m,Fh:g,Fl:x,Gh:v,Gl:b,Hh:w,Hl:k}=this;for(let C=0;C<80;C++){const R=ug(h,m,14)^ug(h,m,18)^YA(h,m,41),B=dg(h,m,14)^dg(h,m,18)^JA(h,m,41),O=h&g^~h&v,F=m&x^~m&b,H=eut(k,B,F,sut[C],bf[C]),j=tut(H,w,R,O,iut[C],vf[C]),$=H|0,W=ug(r,i,28)^YA(r,i,34)^YA(r,i,39),V=dg(r,i,28)^JA(r,i,34)^JA(r,i,39),U=r&s^r&a^s&a,T=i&o^i&l^o&l;w=v|0,k=b|0,v=g|0,b=x|0,g=h|0,x=m|0,{h,l:m}=wu(c|0,u|0,j|0,$|0),c=a|0,u=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const _=Jct($,V,T);r=Xct(_,j,W,U),i=_|0}({h:r,l:i}=wu(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=wu(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=wu(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=wu(this.Dh|0,this.Dl|0,c|0,u|0),{h,l:m}=wu(this.Eh|0,this.El|0,h|0,m|0),{h:g,l:x}=wu(this.Fh|0,this.Fl|0,g|0,x|0),{h:v,l:b}=wu(this.Gh|0,this.Gl|0,v|0,b|0),{h:w,l:k}=wu(this.Hh|0,this.Hl|0,w|0,k|0),this.set(r,i,s,o,a,l,c,u,h,m,g,x,v,b,w,k)}roundClean(){Rx(vf,bf)}destroy(){Rx(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const rme=eme(()=>new rut),aut=eme(()=>new out);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const n7=BigInt(0),cD=BigInt(1);function Mm(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Ol(t,e,n=""){const r=TE(t),i=t==null?void 0:t.length,s=e!==void 0;if(!r||s&&i!==e){const o=n&&`"${n}" `,a=s?` of length ${e}`:"",l=r?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return t}function XA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function ime(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?n7:BigInt("0x"+t)}function tP(t){return ime(pm(t))}function p1(t){return Qm(t),ime(pm(Uint8Array.from(t).reverse()))}function r7(t,e){return B2(t.toString(16).padStart(e*2,"0"))}function sme(t,e){return r7(t,e).reverse()}function qr(t,e,n){let r;if(typeof e=="string")try{r=B2(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(TE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function EZ(t){return Uint8Array.from(t)}const v4=t=>typeof t=="bigint"&&n7<=t;function lut(t,e,n){return v4(t)&&v4(e)&&v4(n)&&e<=t&&t<n}function uD(t,e,n,r){if(!lut(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function ome(t){let e;for(e=0;t>n7;t>>=cD,e+=1);return e}const kE=t=>(cD<<BigInt(t))-cD;function cut(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=r(t),o=r(t),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},c=(...g)=>n(o,s,...g),u=(g=r(0))=>{o=c(i(0),g),s=c(),g.length!==0&&(o=c(i(1),g),s=c())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const x=[];for(;g<e;){s=c();const v=s.slice();x.push(v),g+=s.length}return Cc(...x)};return(g,x)=>{l(),u(g);let v;for(;!(v=x(h()));)u();return l(),v}}function CE(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(i,s,o){const a=t[i];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${l}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function U2(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const So=BigInt(0),ds=BigInt(1),Rp=BigInt(2),ame=BigInt(3),lme=BigInt(4),cme=BigInt(5),uut=BigInt(7),ume=BigInt(8),dut=BigInt(9),dme=BigInt(16);function pi(t,e){const n=t%e;return n>=So?n:e+n}function $r(t,e,n){let r=t;for(;e-- >So;)r*=r,r%=n;return r}function SZ(t,e){if(t===So)throw new Error("invert: expected non-zero number");if(e<=So)throw new Error("invert: expected positive modulus, got "+e);let n=pi(t,e),r=e,i=So,s=ds;for(;n!==So;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==ds)throw new Error("invert: does not exist");return pi(i,e)}function i7(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function fme(t,e){const n=(t.ORDER+ds)/lme,r=t.pow(e,n);return i7(t,r,e),r}function fut(t,e){const n=(t.ORDER-cme)/ume,r=t.mul(e,Rp),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Rp),i),a=t.mul(s,t.sub(o,t.ONE));return i7(t,a,e),a}function hut(t){const e=Zm(t),n=hme(t),r=n(e,e.neg(e.ONE)),i=n(e,r),s=n(e,e.neg(r)),o=(t+uut)/dme;return(a,l)=>{let c=a.pow(l,o),u=a.mul(c,r);const h=a.mul(c,i),m=a.mul(c,s),g=a.eql(a.sqr(u),l),x=a.eql(a.sqr(h),l);c=a.cmov(c,u,g),u=a.cmov(m,h,x);const v=a.eql(a.sqr(u),l),b=a.cmov(c,u,v);return i7(a,b,l),b}}function hme(t){if(t<ame)throw new Error("sqrt is not defined for small field");let e=t-ds,n=0;for(;e%Rp===So;)e/=Rp,n++;let r=Rp;const i=Zm(t);for(;AZ(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return fme;let s=i.pow(r,e);const o=(e+ds)/Rp;return function(l,c){if(l.is0(c))return c;if(AZ(l,c)!==1)throw new Error("Cannot find square root");let u=n,h=l.mul(l.ONE,s),m=l.pow(c,e),g=l.pow(c,o);for(;!l.eql(m,l.ONE);){if(l.is0(m))return l.ZERO;let x=1,v=l.sqr(m);for(;!l.eql(v,l.ONE);)if(x++,v=l.sqr(v),x===u)throw new Error("Cannot find square root");const b=ds<<BigInt(u-x-1),w=l.pow(h,b);u=x,h=l.sqr(w),m=l.mul(m,h),g=l.mul(g,w)}return g}}function put(t){return t%lme===ame?fme:t%ume===cme?fut:t%dme===dut?hut(t):hme(t)}const mut=(t,e)=>(pi(t,e)&ds)===ds,gut=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yut(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=gut.reduce((r,i)=>(r[i]="function",r),e);return CE(t,n),t}function xut(t,e,n){if(n<So)throw new Error("invalid exponent, negatives unsupported");if(n===So)return t.ONE;if(n===ds)return e;let r=t.ONE,i=e;for(;n>So;)n&ds&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ds;return r}function pme(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,l)=>t.is0(a)?o:(r[l]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,l)=>t.is0(a)?o:(r[l]=t.mul(o,r[l]),t.mul(o,a)),s),r}function AZ(t,e){const n=(t.ORDER-ds)/Rp,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function mme(t,e){e!==void 0&&lD(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Zm(t,e,n=!1,r={}){if(t<=So)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const m=e;m.BITS&&(i=m.BITS),m.sqrt&&(s=m.sqrt),typeof m.isLE=="boolean"&&(n=m.isLE),typeof m.modFromBytes=="boolean"&&(o=m.modFromBytes),a=m.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:l,nByteLength:c}=mme(t,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const h=Object.freeze({ORDER:t,isLE:n,BITS:l,BYTES:c,MASK:kE(l),ZERO:So,ONE:ds,allowedLengths:a,create:m=>pi(m,t),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return So<=m&&m<t},is0:m=>m===So,isValidNot0:m=>!h.is0(m)&&h.isValid(m),isOdd:m=>(m&ds)===ds,neg:m=>pi(-m,t),eql:(m,g)=>m===g,sqr:m=>pi(m*m,t),add:(m,g)=>pi(m+g,t),sub:(m,g)=>pi(m-g,t),mul:(m,g)=>pi(m*g,t),pow:(m,g)=>xut(h,m,g),div:(m,g)=>pi(m*SZ(g,t),t),sqrN:m=>m*m,addN:(m,g)=>m+g,subN:(m,g)=>m-g,mulN:(m,g)=>m*g,inv:m=>SZ(m,t),sqrt:s||(m=>(u||(u=put(t)),u(h,m))),toBytes:m=>n?sme(m,c):r7(m,c),fromBytes:(m,g=!0)=>{if(a){if(!a.includes(m.length)||m.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+m.length);const v=new Uint8Array(c);v.set(m,n?0:v.length-m.length),m=v}if(m.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+m.length);let x=n?p1(m):tP(m);if(o&&(x=pi(x,t)),!g&&!h.isValid(x))throw new Error("invalid field element: outside of range 0..ORDER");return x},invertBatch:m=>pme(h,m),cmov:(m,g,x)=>x?g:m});return Object.freeze(h)}function gme(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function yme(t){const e=gme(t);return e+Math.ceil(e/2)}function vut(t,e,n=!1){const r=t.length,i=gme(e),s=yme(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?p1(t):tP(t),a=pi(o,e-ds)+ds;return n?sme(a,i):r7(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ox=BigInt(0),Op=BigInt(1);function F2(t,e){const n=e.negate();return t?n:e}function Mp(t,e){const n=pme(t.Fp,e.map(r=>r.Z));return e.map((r,i)=>t.fromAffine(r.toAffine(n[i])))}function xme(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function b4(t,e){xme(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=kE(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function TZ(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),l=t>>o;a>r&&(a-=s,l+=Op);const c=e*r,u=c+Math.abs(a)-1,h=a===0,m=a<0,g=e%2!==0;return{nextN:l,offset:u,isZero:h,isNeg:m,isNegF:g,offsetF:c}}function but(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function wut(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const w4=new WeakMap,vme=new WeakMap;function E4(t){return vme.get(t)||1}function kZ(t){if(t!==Ox)throw new Error("invalid wNAF")}class bme{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let i=e;for(;n>Ox;)n&Op&&(r=r.add(i)),i=i.double(),n>>=Op;return r}precomputeWindow(e,n){const{windows:r,windowSize:i}=b4(n,this.bits),s=[];let o=e,a=o;for(let l=0;l<r;l++){a=o,s.push(a);for(let c=1;c<i;c++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=b4(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:c,isZero:u,isNeg:h,isNegF:m,offsetF:g}=TZ(r,a,o);r=l,u?s=s.add(F2(m,n[g])):i=i.add(F2(h,n[c]))}return kZ(r),{p:i,f:s}}wNAFUnsafe(e,n,r,i=this.ZERO){const s=b4(e,this.bits);for(let o=0;o<s.windows&&r!==Ox;o++){const{nextN:a,offset:l,isZero:c,isNeg:u}=TZ(r,o,s);if(r=a,!c){const h=n[l];i=i.add(u?h.negate():h)}}return kZ(r),i}getPrecomputes(e,n,r){let i=w4.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(i=r(i)),w4.set(n,i))),i}cached(e,n,r){const i=E4(e);return this.wNAF(i,this.getPrecomputes(i,e,r),n)}unsafe(e,n,r,i){const s=E4(e);return s===1?this._unsafeLadder(e,n,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),n,i)}createCache(e,n){xme(n,this.bits),vme.set(e,n),w4.delete(e)}hasCache(e){return E4(e)!==1}}function Eut(t,e,n,r){let i=e,s=t.ZERO,o=t.ZERO;for(;n>Ox||r>Ox;)n&Op&&(s=s.add(i)),r&Op&&(o=o.add(i)),i=i.double(),n>>=Op,r>>=Op;return{p1:s,p2:o}}function wme(t,e,n,r){but(n,t),wut(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=ome(BigInt(i));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=kE(l),u=new Array(Number(c)+1).fill(o),h=Math.floor((e.BITS-1)/l)*l;let m=o;for(let g=h;g>=0;g-=l){u.fill(o);for(let v=0;v<s;v++){const b=r[v],w=Number(b>>BigInt(g)&c);u[w]=u[w].add(n[v])}let x=o;for(let v=u.length-1,b=o;v>0;v--)b=b.add(u[v]),x=x.add(b);if(m=m.add(x),g!==0)for(let v=0;v<l;v++)m=m.double()}return m}function CZ(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return yut(e),e}else return Zm(t,{isLE:n})}function Eme(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const l of["p","n","h"]){const c=e[l];if(!(typeof c=="bigint"&&c>Ox))throw new Error(`CURVE.${l} must be positive bigint`)}const i=CZ(e.p,n.Fp,r),s=CZ(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const l of a)if(!i.isValid(e[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wf=BigInt(0),Oi=BigInt(1),S4=BigInt(2),Sut=BigInt(8);function Aut(t,e,n,r){const i=t.sqr(n),s=t.sqr(r),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}function Tut(t,e={}){const n=Eme("edwards",t,e,e.FpFnLE),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o}=s;CE(e,{},{uvRatio:"function"});const a=S4<<BigInt(i.BYTES*8)-Oi,l=b=>r.create(b),c=e.uvRatio||((b,w)=>{try{return{isValid:!0,value:r.sqrt(r.div(b,w))}}catch{return{isValid:!1,value:wf}}});if(!Aut(r,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function u(b,w,k=!1){const C=k?Oi:wf;return uD("coordinate "+b,w,C,a),w}function h(b){if(!(b instanceof x))throw new Error("ExtendedPoint expected")}const m=U2((b,w)=>{const{X:k,Y:C,Z:R}=b,B=b.is0();w==null&&(w=B?Sut:r.inv(R));const O=l(k*w),F=l(C*w),H=r.mul(R,w);if(B)return{x:wf,y:Oi};if(H!==Oi)throw new Error("invZ was invalid");return{x:O,y:F}}),g=U2(b=>{const{a:w,d:k}=s;if(b.is0())throw new Error("bad point: ZERO");const{X:C,Y:R,Z:B,T:O}=b,F=l(C*C),H=l(R*R),j=l(B*B),$=l(j*j),W=l(F*w),V=l(j*l(W+H)),U=l($+l(k*l(F*H)));if(V!==U)throw new Error("bad point: equation left != right (1)");const T=l(C*R),_=l(B*O);if(T!==_)throw new Error("bad point: equation left != right (2)");return!0});class x{constructor(w,k,C,R){this.X=u("x",w),this.Y=u("y",k),this.Z=u("z",C,!0),this.T=u("t",R),Object.freeze(this)}static CURVE(){return s}static fromAffine(w){if(w instanceof x)throw new Error("extended point not allowed");const{x:k,y:C}=w||{};return u("x",k),u("y",C),new x(k,C,Oi,l(k*C))}static fromBytes(w,k=!1){const C=r.BYTES,{a:R,d:B}=s;w=EZ(Ol(w,C,"point")),Mm(k,"zip215");const O=EZ(w),F=w[C-1];O[C-1]=F&-129;const H=p1(O),j=k?a:r.ORDER;uD("point.y",H,wf,j);const $=l(H*H),W=l($-Oi),V=l(B*$-R);let{isValid:U,value:T}=c(W,V);if(!U)throw new Error("bad point: invalid y coordinate");const _=(T&Oi)===Oi,L=(F&128)!==0;if(!k&&T===wf&&L)throw new Error("bad point: x=0 and x_0=1");return L!==_&&(T=l(-T)),x.fromAffine({x:T,y:H})}static fromHex(w,k=!1){return x.fromBytes(qr("point",w),k)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(w=8,k=!0){return v.createCache(this,w),k||this.multiply(S4),this}assertValidity(){g(this)}equals(w){h(w);const{X:k,Y:C,Z:R}=this,{X:B,Y:O,Z:F}=w,H=l(k*F),j=l(B*R),$=l(C*F),W=l(O*R);return H===j&&$===W}is0(){return this.equals(x.ZERO)}negate(){return new x(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:w}=s,{X:k,Y:C,Z:R}=this,B=l(k*k),O=l(C*C),F=l(S4*l(R*R)),H=l(w*B),j=k+C,$=l(l(j*j)-B-O),W=H+O,V=W-F,U=H-O,T=l($*V),_=l(W*U),L=l($*U),z=l(V*W);return new x(T,_,z,L)}add(w){h(w);const{a:k,d:C}=s,{X:R,Y:B,Z:O,T:F}=this,{X:H,Y:j,Z:$,T:W}=w,V=l(R*H),U=l(B*j),T=l(F*C*W),_=l(O*$),L=l((R+B)*(H+j)-V-U),z=_-T,G=_+T,te=l(U-k*V),K=l(L*z),q=l(G*te),M=l(L*te),P=l(z*G);return new x(K,q,P,M)}subtract(w){return this.add(w.negate())}multiply(w){if(!i.isValidNot0(w))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:k,f:C}=v.cached(this,w,R=>Mp(x,R));return Mp(x,[k,C])[0]}multiplyUnsafe(w,k=x.ZERO){if(!i.isValid(w))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return w===wf?x.ZERO:this.is0()||w===Oi?this:v.unsafe(this,w,C=>Mp(x,C),k)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.unsafe(this,s.n).is0()}toAffine(w){return m(this,w)}clearCofactor(){return o===Oi?this:this.multiplyUnsafe(o)}toBytes(){const{x:w,y:k}=this.toAffine(),C=r.toBytes(k);return C[C.length-1]|=w&Oi?128:0,C}toHex(){return pm(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(w){return Mp(x,w)}static msm(w,k){return wme(x,i,w,k)}_setWindowSize(w){this.precompute(w)}toRawBytes(){return this.toBytes()}}x.BASE=new x(s.Gx,s.Gy,Oi,l(s.Gx*s.Gy)),x.ZERO=new x(wf,Oi,Oi,wf),x.Fp=r,x.Fn=i;const v=new bme(x,i.BITS);return x.BASE.precompute(8),x}function kut(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');CE(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:s,Fn:o}=t,a=n.randomBytes||t7,l=n.adjustScalarBytes||(j=>j),c=n.domain||((j,$,W)=>{if(Mm(W,"phflag"),$.length||W)throw new Error("Contexts/pre-hash are not supported");return j});function u(j){return o.create(p1(j))}function h(j){const $=C.secretKey;j=qr("private key",j,$);const W=qr("hashed private key",e(j),2*$),V=l(W.slice(0,$)),U=W.slice($,2*$),T=u(V);return{head:V,prefix:U,scalar:T}}function m(j){const{head:$,prefix:W,scalar:V}=h(j),U=i.multiply(V),T=U.toBytes();return{head:$,prefix:W,scalar:V,point:U,pointBytes:T}}function g(j){return m(j).pointBytes}function x(j=Uint8Array.of(),...$){const W=Cc(...$);return u(e(c(W,qr("context",j),!!r)))}function v(j,$,W={}){j=qr("message",j),r&&(j=r(j));const{prefix:V,scalar:U,pointBytes:T}=m($),_=x(W.context,V,j),L=i.multiply(_).toBytes(),z=x(W.context,L,T,j),G=o.create(_+z*U);if(!o.isValid(G))throw new Error("sign failed: invalid s");const te=Cc(L,o.toBytes(G));return Ol(te,C.signature,"result")}const b={zip215:!0};function w(j,$,W,V=b){const{context:U,zip215:T}=V,_=C.signature;j=qr("signature",j,_),$=qr("message",$),W=qr("publicKey",W,C.publicKey),T!==void 0&&Mm(T,"zip215"),r&&($=r($));const L=_/2,z=j.subarray(0,L),G=p1(j.subarray(L,_));let te,K,q;try{te=t.fromBytes(W,T),K=t.fromBytes(z,T),q=i.multiplyUnsafe(G)}catch{return!1}if(!T&&te.isSmallOrder())return!1;const M=x(U,K.toBytes(),te.toBytes(),$);return K.add(te.multiplyUnsafe(M)).subtract(q).clearCofactor().is0()}const k=s.BYTES,C={secretKey:k,publicKey:k,signature:2*k,seed:k};function R(j=a(C.seed)){return Ol(j,C.seed,"seed")}function B(j){const $=H.randomSecretKey(j);return{secretKey:$,publicKey:g($)}}function O(j){return TE(j)&&j.length===o.BYTES}function F(j,$){try{return!!t.fromBytes(j,$)}catch{return!1}}const H={getExtendedPublicKey:m,randomSecretKey:R,isValidSecretKey:O,isValidPublicKey:F,toMontgomery(j){const{y:$}=t.fromBytes(j),W=C.publicKey,V=W===32;if(!V&&W!==57)throw new Error("only defined for 25519 and 448");const U=V?s.div(Oi+$,Oi-$):s.div($-Oi,$+Oi);return s.toBytes(U)},toMontgomerySecret(j){const $=C.secretKey;Ol(j,$);const W=e(j.subarray(0,$));return l(W).subarray(0,$)},randomPrivateKey:R,precompute(j=8,$=t.BASE){return $.precompute(j,!1)}};return Object.freeze({keygen:B,getPublicKey:g,sign:v,verify:w,utils:H,Point:t,lengths:C})}function Cut(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Zm(e.n,t.nBitLength,!0),i={Fp:n,Fn:r,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:s}}function Nut(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function Put(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:i}=Cut(t),s=Tut(e,n),o=kut(s,r,i);return Nut(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _ut=BigInt(1),NZ=BigInt(2);BigInt(3);const Iut=BigInt(5),Rut=BigInt(8),s7=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Sme={p:s7,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Rut,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Out(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=s7,a=t*t%s*t%s,l=$r(a,NZ,s)*a%s,c=$r(l,_ut,s)*t%s,u=$r(c,Iut,s)*c%s,h=$r(u,e,s)*u%s,m=$r(h,n,s)*h%s,g=$r(m,r,s)*m%s,x=$r(g,i,s)*g%s,v=$r(x,i,s)*g%s,b=$r(v,e,s)*u%s;return{pow_p_5_8:$r(b,NZ,s)*t%s,b2:a}}function Mut(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const PZ=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Lut(t,e){const n=s7,r=pi(e*e*e,n),i=pi(r*r*e,n),s=Out(t*i).pow_p_5_8;let o=pi(t*r*s,n);const a=pi(e*o*o,n),l=o,c=pi(o*PZ,n),u=a===t,h=a===pi(-t,n),m=a===pi(-t*PZ,n);return u&&(o=l),(h||m)&&(o=c),mut(o,n)&&(o=pi(-o,n)),{isValid:u||h,value:o}}const Dut=Zm(Sme.p,{isLE:!0}),jut={...Sme,Fp:Dut,hash:aut,adjustScalarBytes:Mut,uvRatio:Lut},vv=Put(jut);var UT={exports:{}},A4={},_Z;function o7(){return _Z||(_Z=1,(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},n={};n.byteLength=u,n.toByteArray=m,n.fromByteArray=v;for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;i[45]=62,i[95]=63;function c(k){var C=k.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=k.indexOf("=");R===-1&&(R=C);var B=R===C?0:4-R%4;return[R,B]}function u(k){var C=c(k),R=C[0],B=C[1];return(R+B)*3/4-B}function h(k,C,R){return(C+R)*3/4-R}function m(k){var C,R=c(k),B=R[0],O=R[1],F=new s(h(k,B,O)),H=0,j=O>0?B-4:B,$;for($=0;$<j;$+=4)C=i[k.charCodeAt($)]<<18|i[k.charCodeAt($+1)]<<12|i[k.charCodeAt($+2)]<<6|i[k.charCodeAt($+3)],F[H++]=C>>16&255,F[H++]=C>>8&255,F[H++]=C&255;return O===2&&(C=i[k.charCodeAt($)]<<2|i[k.charCodeAt($+1)]>>4,F[H++]=C&255),O===1&&(C=i[k.charCodeAt($)]<<10|i[k.charCodeAt($+1)]<<4|i[k.charCodeAt($+2)]>>2,F[H++]=C>>8&255,F[H++]=C&255),F}function g(k){return r[k>>18&63]+r[k>>12&63]+r[k>>6&63]+r[k&63]}function x(k,C,R){for(var B,O=[],F=C;F<R;F+=3)B=(k[F]<<16&16711680)+(k[F+1]<<8&65280)+(k[F+2]&255),O.push(g(B));return O.join("")}function v(k){for(var C,R=k.length,B=R%3,O=[],F=16383,H=0,j=R-B;H<j;H+=F)O.push(x(k,H,H+F>j?j:H+F));return B===1?(C=k[R-1],O.push(r[C>>2]+r[C<<4&63]+"==")):B===2&&(C=(k[R-2]<<8)+k[R-1],O.push(r[C>>10]+r[C>>4&63]+r[C<<2&63]+"=")),O.join("")}var b={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */b.read=function(k,C,R,B,O){var F,H,j=O*8-B-1,$=(1<<j)-1,W=$>>1,V=-7,U=R?O-1:0,T=R?-1:1,_=k[C+U];for(U+=T,F=_&(1<<-V)-1,_>>=-V,V+=j;V>0;F=F*256+k[C+U],U+=T,V-=8);for(H=F&(1<<-V)-1,F>>=-V,V+=B;V>0;H=H*256+k[C+U],U+=T,V-=8);if(F===0)F=1-W;else{if(F===$)return H?NaN:(_?-1:1)*(1/0);H=H+Math.pow(2,B),F=F-W}return(_?-1:1)*H*Math.pow(2,F-B)},b.write=function(k,C,R,B,O,F){var H,j,$,W=F*8-O-1,V=(1<<W)-1,U=V>>1,T=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=B?0:F-1,L=B?1:-1,z=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(j=isNaN(C)?1:0,H=V):(H=Math.floor(Math.log(C)/Math.LN2),C*($=Math.pow(2,-H))<1&&(H--,$*=2),H+U>=1?C+=T/$:C+=T*Math.pow(2,1-U),C*$>=2&&(H++,$/=2),H+U>=V?(j=0,H=V):H+U>=1?(j=(C*$-1)*Math.pow(2,O),H=H+U):(j=C*Math.pow(2,U-1)*Math.pow(2,O),H=0));O>=8;k[R+_]=j&255,_+=L,j/=256,O-=8);for(H=H<<O|j,W+=O;W>0;k[R+_]=H&255,_+=L,H/=256,W-=8);k[R+_-L]|=z*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(k){const C=n,R=b,B=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;k.Buffer=V,k.SlowBuffer=P,k.INSPECT_MAX_BYTES=50;const O=2147483647;k.kMaxLength=O;const{Uint8Array:F,ArrayBuffer:H,SharedArrayBuffer:j}=globalThis;V.TYPED_ARRAY_SUPPORT=$(),!V.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function $(){try{const le=new F(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,F.prototype),Object.setPrototypeOf(le,Q),le.foo()===42}catch{return!1}}Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}}),Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}});function W(le){if(le>O)throw new RangeError('The value "'+le+'" is invalid for option "size"');const Q=new F(le);return Object.setPrototypeOf(Q,V.prototype),Q}function V(le,Q,ee){if(typeof le=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return L(le)}return U(le,Q,ee)}V.poolSize=8192;function U(le,Q,ee){if(typeof le=="string")return z(le,Q);if(H.isView(le))return te(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(cn(le,H)||le&&cn(le.buffer,H)||typeof j<"u"&&(cn(le,j)||le&&cn(le.buffer,j)))return K(le,Q,ee);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=le.valueOf&&le.valueOf();if(he!=null&&he!==le)return V.from(he,Q,ee);const Pe=q(le);if(Pe)return Pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return V.from(le[Symbol.toPrimitive]("string"),Q,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}V.from=function(le,Q,ee){return U(le,Q,ee)},Object.setPrototypeOf(V.prototype,F.prototype),Object.setPrototypeOf(V,F);function T(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function _(le,Q,ee){return T(le),le<=0?W(le):Q!==void 0?typeof ee=="string"?W(le).fill(Q,ee):W(le).fill(Q):W(le)}V.alloc=function(le,Q,ee){return _(le,Q,ee)};function L(le){return T(le),W(le<0?0:M(le)|0)}V.allocUnsafe=function(le){return L(le)},V.allocUnsafeSlow=function(le){return L(le)};function z(le,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!V.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ee=Y(le,Q)|0;let he=W(ee);const Pe=he.write(le,Q);return Pe!==ee&&(he=he.slice(0,Pe)),he}function G(le){const Q=le.length<0?0:M(le.length)|0,ee=W(Q);for(let he=0;he<Q;he+=1)ee[he]=le[he]&255;return ee}function te(le){if(cn(le,F)){const Q=new F(le);return K(Q.buffer,Q.byteOffset,Q.byteLength)}return G(le)}function K(le,Q,ee){if(Q<0||le.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<Q+(ee||0))throw new RangeError('"length" is outside of buffer bounds');let he;return Q===void 0&&ee===void 0?he=new F(le):ee===void 0?he=new F(le,Q):he=new F(le,Q,ee),Object.setPrototypeOf(he,V.prototype),he}function q(le){if(V.isBuffer(le)){const Q=M(le.length)|0,ee=W(Q);return ee.length===0||le.copy(ee,0,0,Q),ee}if(le.length!==void 0)return typeof le.length!="number"||en(le.length)?W(0):G(le);if(le.type==="Buffer"&&Array.isArray(le.data))return G(le.data)}function M(le){if(le>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return le|0}function P(le){return+le!=le&&(le=0),V.alloc(+le)}V.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==V.prototype},V.compare=function(Q,ee){if(cn(Q,F)&&(Q=V.from(Q,Q.offset,Q.byteLength)),cn(ee,F)&&(ee=V.from(ee,ee.offset,ee.byteLength)),!V.isBuffer(Q)||!V.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ee)return 0;let he=Q.length,Pe=ee.length;for(let Oe=0,ze=Math.min(he,Pe);Oe<ze;++Oe)if(Q[Oe]!==ee[Oe]){he=Q[Oe],Pe=ee[Oe];break}return he<Pe?-1:Pe<he?1:0},V.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},V.concat=function(Q,ee){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return V.alloc(0);let he;if(ee===void 0)for(ee=0,he=0;he<Q.length;++he)ee+=Q[he].length;const Pe=V.allocUnsafe(ee);let Oe=0;for(he=0;he<Q.length;++he){let ze=Q[he];if(cn(ze,F))Oe+ze.length>Pe.length?(V.isBuffer(ze)||(ze=V.from(ze)),ze.copy(Pe,Oe)):F.prototype.set.call(Pe,ze,Oe);else if(V.isBuffer(ze))ze.copy(Pe,Oe);else throw new TypeError('"list" argument must be an Array of Buffers');Oe+=ze.length}return Pe};function Y(le,Q){if(V.isBuffer(le))return le.length;if(H.isView(le)||cn(le,H))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const ee=le.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&ee===0)return 0;let Pe=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return Je(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee*2;case"hex":return ee>>>1;case"base64":return Et(le).length;default:if(Pe)return he?-1:Je(le).length;Q=(""+Q).toLowerCase(),Pe=!0}}V.byteLength=Y;function X(le,Q,ee){let he=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0,Q>>>=0,ee<=Q))return"";for(le||(le="utf8");;)switch(le){case"hex":return mt(this,Q,ee);case"utf8":case"utf-8":return De(this,Q,ee);case"ascii":return et(this,Q,ee);case"latin1":case"binary":return tt(this,Q,ee);case"base64":return Re(this,Q,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dt(this,Q,ee);default:if(he)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),he=!0}}V.prototype._isBuffer=!0;function re(le,Q,ee){const he=le[Q];le[Q]=le[ee],le[ee]=he}V.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ee=0;ee<Q;ee+=2)re(this,ee,ee+1);return this},V.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ee=0;ee<Q;ee+=4)re(this,ee,ee+3),re(this,ee+1,ee+2);return this},V.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ee=0;ee<Q;ee+=8)re(this,ee,ee+7),re(this,ee+1,ee+6),re(this,ee+2,ee+5),re(this,ee+3,ee+4);return this},V.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?De(this,0,Q):X.apply(this,arguments)},V.prototype.toLocaleString=V.prototype.toString,V.prototype.equals=function(Q){if(!V.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:V.compare(this,Q)===0},V.prototype.inspect=function(){let Q="";const ee=k.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(Q+=" ... "),"<Buffer "+Q+">"},B&&(V.prototype[B]=V.prototype.inspect),V.prototype.compare=function(Q,ee,he,Pe,Oe){if(cn(Q,F)&&(Q=V.from(Q,Q.offset,Q.byteLength)),!V.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ee===void 0&&(ee=0),he===void 0&&(he=Q?Q.length:0),Pe===void 0&&(Pe=0),Oe===void 0&&(Oe=this.length),ee<0||he>Q.length||Pe<0||Oe>this.length)throw new RangeError("out of range index");if(Pe>=Oe&&ee>=he)return 0;if(Pe>=Oe)return-1;if(ee>=he)return 1;if(ee>>>=0,he>>>=0,Pe>>>=0,Oe>>>=0,this===Q)return 0;let ze=Oe-Pe,Xt=he-ee;const $t=Math.min(ze,Xt),st=this.slice(Pe,Oe),mn=Q.slice(ee,he);for(let bt=0;bt<$t;++bt)if(st[bt]!==mn[bt]){ze=st[bt],Xt=mn[bt];break}return ze<Xt?-1:Xt<ze?1:0};function ae(le,Q,ee,he,Pe){if(le.length===0)return-1;if(typeof ee=="string"?(he=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),ee=+ee,en(ee)&&(ee=Pe?0:le.length-1),ee<0&&(ee=le.length+ee),ee>=le.length){if(Pe)return-1;ee=le.length-1}else if(ee<0)if(Pe)ee=0;else return-1;if(typeof Q=="string"&&(Q=V.from(Q,he)),V.isBuffer(Q))return Q.length===0?-1:Te(le,Q,ee,he,Pe);if(typeof Q=="number")return Q=Q&255,typeof F.prototype.indexOf=="function"?Pe?F.prototype.indexOf.call(le,Q,ee):F.prototype.lastIndexOf.call(le,Q,ee):Te(le,[Q],ee,he,Pe);throw new TypeError("val must be string, number or Buffer")}function Te(le,Q,ee,he,Pe){let Oe=1,ze=le.length,Xt=Q.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(le.length<2||Q.length<2)return-1;Oe=2,ze/=2,Xt/=2,ee/=2}function $t(mn,bt){return Oe===1?mn[bt]:mn.readUInt16BE(bt*Oe)}let st;if(Pe){let mn=-1;for(st=ee;st<ze;st++)if($t(le,st)===$t(Q,mn===-1?0:st-mn)){if(mn===-1&&(mn=st),st-mn+1===Xt)return mn*Oe}else mn!==-1&&(st-=st-mn),mn=-1}else for(ee+Xt>ze&&(ee=ze-Xt),st=ee;st>=0;st--){let mn=!0;for(let bt=0;bt<Xt;bt++)if($t(le,st+bt)!==$t(Q,bt)){mn=!1;break}if(mn)return st}return-1}V.prototype.includes=function(Q,ee,he){return this.indexOf(Q,ee,he)!==-1},V.prototype.indexOf=function(Q,ee,he){return ae(this,Q,ee,he,!0)},V.prototype.lastIndexOf=function(Q,ee,he){return ae(this,Q,ee,he,!1)};function ue(le,Q,ee,he){ee=Number(ee)||0;const Pe=le.length-ee;he?(he=Number(he),he>Pe&&(he=Pe)):he=Pe;const Oe=Q.length;he>Oe/2&&(he=Oe/2);let ze;for(ze=0;ze<he;++ze){const Xt=parseInt(Q.substr(ze*2,2),16);if(en(Xt))return ze;le[ee+ze]=Xt}return ze}function pe(le,Q,ee,he){return Mt(Je(Q,le.length-ee),le,ee,he)}function be(le,Q,ee,he){return Mt(ot(Q),le,ee,he)}function se(le,Q,ee,he){return Mt(Et(Q),le,ee,he)}function ve(le,Q,ee,he){return Mt(Ft(Q,le.length-ee),le,ee,he)}V.prototype.write=function(Q,ee,he,Pe){if(ee===void 0)Pe="utf8",he=this.length,ee=0;else if(he===void 0&&typeof ee=="string")Pe=ee,he=this.length,ee=0;else if(isFinite(ee))ee=ee>>>0,isFinite(he)?(he=he>>>0,Pe===void 0&&(Pe="utf8")):(Pe=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Oe=this.length-ee;if((he===void 0||he>Oe)&&(he=Oe),Q.length>0&&(he<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");Pe||(Pe="utf8");let ze=!1;for(;;)switch(Pe){case"hex":return ue(this,Q,ee,he);case"utf8":case"utf-8":return pe(this,Q,ee,he);case"ascii":case"latin1":case"binary":return be(this,Q,ee,he);case"base64":return se(this,Q,ee,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,Q,ee,he);default:if(ze)throw new TypeError("Unknown encoding: "+Pe);Pe=(""+Pe).toLowerCase(),ze=!0}},V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Re(le,Q,ee){return Q===0&&ee===le.length?C.fromByteArray(le):C.fromByteArray(le.slice(Q,ee))}function De(le,Q,ee){ee=Math.min(le.length,ee);const he=[];let Pe=Q;for(;Pe<ee;){const Oe=le[Pe];let ze=null,Xt=Oe>239?4:Oe>223?3:Oe>191?2:1;if(Pe+Xt<=ee){let $t,st,mn,bt;switch(Xt){case 1:Oe<128&&(ze=Oe);break;case 2:$t=le[Pe+1],($t&192)===128&&(bt=(Oe&31)<<6|$t&63,bt>127&&(ze=bt));break;case 3:$t=le[Pe+1],st=le[Pe+2],($t&192)===128&&(st&192)===128&&(bt=(Oe&15)<<12|($t&63)<<6|st&63,bt>2047&&(bt<55296||bt>57343)&&(ze=bt));break;case 4:$t=le[Pe+1],st=le[Pe+2],mn=le[Pe+3],($t&192)===128&&(st&192)===128&&(mn&192)===128&&(bt=(Oe&15)<<18|($t&63)<<12|(st&63)<<6|mn&63,bt>65535&&bt<1114112&&(ze=bt))}}ze===null?(ze=65533,Xt=1):ze>65535&&(ze-=65536,he.push(ze>>>10&1023|55296),ze=56320|ze&1023),he.push(ze),Pe+=Xt}return it(he)}const Qe=4096;function it(le){const Q=le.length;if(Q<=Qe)return String.fromCharCode.apply(String,le);let ee="",he=0;for(;he<Q;)ee+=String.fromCharCode.apply(String,le.slice(he,he+=Qe));return ee}function et(le,Q,ee){let he="";ee=Math.min(le.length,ee);for(let Pe=Q;Pe<ee;++Pe)he+=String.fromCharCode(le[Pe]&127);return he}function tt(le,Q,ee){let he="";ee=Math.min(le.length,ee);for(let Pe=Q;Pe<ee;++Pe)he+=String.fromCharCode(le[Pe]);return he}function mt(le,Q,ee){const he=le.length;(!Q||Q<0)&&(Q=0),(!ee||ee<0||ee>he)&&(ee=he);let Pe="";for(let Oe=Q;Oe<ee;++Oe)Pe+=rn[le[Oe]];return Pe}function dt(le,Q,ee){const he=le.slice(Q,ee);let Pe="";for(let Oe=0;Oe<he.length-1;Oe+=2)Pe+=String.fromCharCode(he[Oe]+he[Oe+1]*256);return Pe}V.prototype.slice=function(Q,ee){const he=this.length;Q=~~Q,ee=ee===void 0?he:~~ee,Q<0?(Q+=he,Q<0&&(Q=0)):Q>he&&(Q=he),ee<0?(ee+=he,ee<0&&(ee=0)):ee>he&&(ee=he),ee<Q&&(ee=Q);const Pe=this.subarray(Q,ee);return Object.setPrototypeOf(Pe,V.prototype),Pe};function Wt(le,Q,ee){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+Q>ee)throw new RangeError("Trying to access beyond buffer length")}V.prototype.readUintLE=V.prototype.readUIntLE=function(Q,ee,he){Q=Q>>>0,ee=ee>>>0,he||Wt(Q,ee,this.length);let Pe=this[Q],Oe=1,ze=0;for(;++ze<ee&&(Oe*=256);)Pe+=this[Q+ze]*Oe;return Pe},V.prototype.readUintBE=V.prototype.readUIntBE=function(Q,ee,he){Q=Q>>>0,ee=ee>>>0,he||Wt(Q,ee,this.length);let Pe=this[Q+--ee],Oe=1;for(;ee>0&&(Oe*=256);)Pe+=this[Q+--ee]*Oe;return Pe},V.prototype.readUint8=V.prototype.readUInt8=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,1,this.length),this[Q]},V.prototype.readUint16LE=V.prototype.readUInt16LE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,2,this.length),this[Q]|this[Q+1]<<8},V.prototype.readUint16BE=V.prototype.readUInt16BE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,2,this.length),this[Q]<<8|this[Q+1]},V.prototype.readUint32LE=V.prototype.readUInt32LE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},V.prototype.readUint32BE=V.prototype.readUInt32BE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},V.prototype.readBigUInt64LE=Ni(function(Q){Q=Q>>>0,Ae(Q,"offset");const ee=this[Q],he=this[Q+7];(ee===void 0||he===void 0)&&fe(Q,this.length-8);const Pe=ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Oe=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+he*2**24;return BigInt(Pe)+(BigInt(Oe)<<BigInt(32))}),V.prototype.readBigUInt64BE=Ni(function(Q){Q=Q>>>0,Ae(Q,"offset");const ee=this[Q],he=this[Q+7];(ee===void 0||he===void 0)&&fe(Q,this.length-8);const Pe=ee*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Oe=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+he;return(BigInt(Pe)<<BigInt(32))+BigInt(Oe)}),V.prototype.readIntLE=function(Q,ee,he){Q=Q>>>0,ee=ee>>>0,he||Wt(Q,ee,this.length);let Pe=this[Q],Oe=1,ze=0;for(;++ze<ee&&(Oe*=256);)Pe+=this[Q+ze]*Oe;return Oe*=128,Pe>=Oe&&(Pe-=Math.pow(2,8*ee)),Pe},V.prototype.readIntBE=function(Q,ee,he){Q=Q>>>0,ee=ee>>>0,he||Wt(Q,ee,this.length);let Pe=ee,Oe=1,ze=this[Q+--Pe];for(;Pe>0&&(Oe*=256);)ze+=this[Q+--Pe]*Oe;return Oe*=128,ze>=Oe&&(ze-=Math.pow(2,8*ee)),ze},V.prototype.readInt8=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},V.prototype.readInt16LE=function(Q,ee){Q=Q>>>0,ee||Wt(Q,2,this.length);const he=this[Q]|this[Q+1]<<8;return he&32768?he|4294901760:he},V.prototype.readInt16BE=function(Q,ee){Q=Q>>>0,ee||Wt(Q,2,this.length);const he=this[Q+1]|this[Q]<<8;return he&32768?he|4294901760:he},V.prototype.readInt32LE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},V.prototype.readInt32BE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},V.prototype.readBigInt64LE=Ni(function(Q){Q=Q>>>0,Ae(Q,"offset");const ee=this[Q],he=this[Q+7];(ee===void 0||he===void 0)&&fe(Q,this.length-8);const Pe=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(he<<24);return(BigInt(Pe)<<BigInt(32))+BigInt(ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),V.prototype.readBigInt64BE=Ni(function(Q){Q=Q>>>0,Ae(Q,"offset");const ee=this[Q],he=this[Q+7];(ee===void 0||he===void 0)&&fe(Q,this.length-8);const Pe=(ee<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(Pe)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+he)}),V.prototype.readFloatLE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,4,this.length),R.read(this,Q,!0,23,4)},V.prototype.readFloatBE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,4,this.length),R.read(this,Q,!1,23,4)},V.prototype.readDoubleLE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,8,this.length),R.read(this,Q,!0,52,8)},V.prototype.readDoubleBE=function(Q,ee){return Q=Q>>>0,ee||Wt(Q,8,this.length),R.read(this,Q,!1,52,8)};function qe(le,Q,ee,he,Pe,Oe){if(!V.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>Pe||Q<Oe)throw new RangeError('"value" argument is out of bounds');if(ee+he>le.length)throw new RangeError("Index out of range")}V.prototype.writeUintLE=V.prototype.writeUIntLE=function(Q,ee,he,Pe){if(Q=+Q,ee=ee>>>0,he=he>>>0,!Pe){const Xt=Math.pow(2,8*he)-1;qe(this,Q,ee,he,Xt,0)}let Oe=1,ze=0;for(this[ee]=Q&255;++ze<he&&(Oe*=256);)this[ee+ze]=Q/Oe&255;return ee+he},V.prototype.writeUintBE=V.prototype.writeUIntBE=function(Q,ee,he,Pe){if(Q=+Q,ee=ee>>>0,he=he>>>0,!Pe){const Xt=Math.pow(2,8*he)-1;qe(this,Q,ee,he,Xt,0)}let Oe=he-1,ze=1;for(this[ee+Oe]=Q&255;--Oe>=0&&(ze*=256);)this[ee+Oe]=Q/ze&255;return ee+he},V.prototype.writeUint8=V.prototype.writeUInt8=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,1,255,0),this[ee]=Q&255,ee+1},V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,2,65535,0),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,2,65535,0),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,4,4294967295,0),this[ee+3]=Q>>>24,this[ee+2]=Q>>>16,this[ee+1]=Q>>>8,this[ee]=Q&255,ee+4},V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,4,4294967295,0),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4};function Tt(le,Q,ee,he,Pe){de(Q,he,Pe,le,ee,7);let Oe=Number(Q&BigInt(4294967295));le[ee++]=Oe,Oe=Oe>>8,le[ee++]=Oe,Oe=Oe>>8,le[ee++]=Oe,Oe=Oe>>8,le[ee++]=Oe;let ze=Number(Q>>BigInt(32)&BigInt(4294967295));return le[ee++]=ze,ze=ze>>8,le[ee++]=ze,ze=ze>>8,le[ee++]=ze,ze=ze>>8,le[ee++]=ze,ee}function ln(le,Q,ee,he,Pe){de(Q,he,Pe,le,ee,7);let Oe=Number(Q&BigInt(4294967295));le[ee+7]=Oe,Oe=Oe>>8,le[ee+6]=Oe,Oe=Oe>>8,le[ee+5]=Oe,Oe=Oe>>8,le[ee+4]=Oe;let ze=Number(Q>>BigInt(32)&BigInt(4294967295));return le[ee+3]=ze,ze=ze>>8,le[ee+2]=ze,ze=ze>>8,le[ee+1]=ze,ze=ze>>8,le[ee]=ze,ee+8}V.prototype.writeBigUInt64LE=Ni(function(Q,ee=0){return Tt(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),V.prototype.writeBigUInt64BE=Ni(function(Q,ee=0){return ln(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),V.prototype.writeIntLE=function(Q,ee,he,Pe){if(Q=+Q,ee=ee>>>0,!Pe){const $t=Math.pow(2,8*he-1);qe(this,Q,ee,he,$t-1,-$t)}let Oe=0,ze=1,Xt=0;for(this[ee]=Q&255;++Oe<he&&(ze*=256);)Q<0&&Xt===0&&this[ee+Oe-1]!==0&&(Xt=1),this[ee+Oe]=(Q/ze>>0)-Xt&255;return ee+he},V.prototype.writeIntBE=function(Q,ee,he,Pe){if(Q=+Q,ee=ee>>>0,!Pe){const $t=Math.pow(2,8*he-1);qe(this,Q,ee,he,$t-1,-$t)}let Oe=he-1,ze=1,Xt=0;for(this[ee+Oe]=Q&255;--Oe>=0&&(ze*=256);)Q<0&&Xt===0&&this[ee+Oe+1]!==0&&(Xt=1),this[ee+Oe]=(Q/ze>>0)-Xt&255;return ee+he},V.prototype.writeInt8=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,1,127,-128),Q<0&&(Q=255+Q+1),this[ee]=Q&255,ee+1},V.prototype.writeInt16LE=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,2,32767,-32768),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},V.prototype.writeInt16BE=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,2,32767,-32768),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},V.prototype.writeInt32LE=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,4,2147483647,-2147483648),this[ee]=Q&255,this[ee+1]=Q>>>8,this[ee+2]=Q>>>16,this[ee+3]=Q>>>24,ee+4},V.prototype.writeInt32BE=function(Q,ee,he){return Q=+Q,ee=ee>>>0,he||qe(this,Q,ee,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4},V.prototype.writeBigInt64LE=Ni(function(Q,ee=0){return Tt(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),V.prototype.writeBigInt64BE=Ni(function(Q,ee=0){return ln(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(le,Q,ee,he,Pe,Oe){if(ee+he>le.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function Ve(le,Q,ee,he,Pe){return Q=+Q,ee=ee>>>0,Pe||Ie(le,Q,ee,4),R.write(le,Q,ee,he,23,4),ee+4}V.prototype.writeFloatLE=function(Q,ee,he){return Ve(this,Q,ee,!0,he)},V.prototype.writeFloatBE=function(Q,ee,he){return Ve(this,Q,ee,!1,he)};function gt(le,Q,ee,he,Pe){return Q=+Q,ee=ee>>>0,Pe||Ie(le,Q,ee,8),R.write(le,Q,ee,he,52,8),ee+8}V.prototype.writeDoubleLE=function(Q,ee,he){return gt(this,Q,ee,!0,he)},V.prototype.writeDoubleBE=function(Q,ee,he){return gt(this,Q,ee,!1,he)},V.prototype.copy=function(Q,ee,he,Pe){if(!V.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Pe&&Pe!==0&&(Pe=this.length),ee>=Q.length&&(ee=Q.length),ee||(ee=0),Pe>0&&Pe<he&&(Pe=he),Pe===he||Q.length===0||this.length===0)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Pe<0)throw new RangeError("sourceEnd out of bounds");Pe>this.length&&(Pe=this.length),Q.length-ee<Pe-he&&(Pe=Q.length-ee+he);const Oe=Pe-he;return this===Q&&typeof F.prototype.copyWithin=="function"?this.copyWithin(ee,he,Pe):F.prototype.set.call(Q,this.subarray(he,Pe),ee),Oe},V.prototype.fill=function(Q,ee,he,Pe){if(typeof Q=="string"){if(typeof ee=="string"?(Pe=ee,ee=0,he=this.length):typeof he=="string"&&(Pe=he,he=this.length),Pe!==void 0&&typeof Pe!="string")throw new TypeError("encoding must be a string");if(typeof Pe=="string"&&!V.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);if(Q.length===1){const ze=Q.charCodeAt(0);(Pe==="utf8"&&ze<128||Pe==="latin1")&&(Q=ze)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ee<0||this.length<ee||this.length<he)throw new RangeError("Out of range index");if(he<=ee)return this;ee=ee>>>0,he=he===void 0?this.length:he>>>0,Q||(Q=0);let Oe;if(typeof Q=="number")for(Oe=ee;Oe<he;++Oe)this[Oe]=Q;else{const ze=V.isBuffer(Q)?Q:V.from(Q,Pe),Xt=ze.length;if(Xt===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Oe=0;Oe<he-ee;++Oe)this[Oe+ee]=ze[Oe%Xt]}return this};const ut={};function oe(le,Q,ee){ut[le]=class extends ee{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(Pe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Pe,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}oe("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),oe("ERR_INVALID_ARG_TYPE",function(le,Q){return`The "${le}" argument must be of type number. Received type ${typeof Q}`},TypeError),oe("ERR_OUT_OF_RANGE",function(le,Q,ee){let he=`The value of "${le}" is out of range.`,Pe=ee;return Number.isInteger(ee)&&Math.abs(ee)>2**32?Pe=J(String(ee)):typeof ee=="bigint"&&(Pe=String(ee),(ee>BigInt(2)**BigInt(32)||ee<-(BigInt(2)**BigInt(32)))&&(Pe=J(Pe)),Pe+="n"),he+=` It must be ${Q}. Received ${Pe}`,he},RangeError);function J(le){let Q="",ee=le.length;const he=le[0]==="-"?1:0;for(;ee>=he+4;ee-=3)Q=`_${le.slice(ee-3,ee)}${Q}`;return`${le.slice(0,ee)}${Q}`}function Z(le,Q,ee){Ae(Q,"offset"),(le[Q]===void 0||le[Q+ee]===void 0)&&fe(Q,le.length-(ee+1))}function de(le,Q,ee,he,Pe,Oe){if(le>ee||le<Q){const ze=typeof Q=="bigint"?"n":"";let Xt;throw Q===0||Q===BigInt(0)?Xt=`>= 0${ze} and < 2${ze} ** ${(Oe+1)*8}${ze}`:Xt=`>= -(2${ze} ** ${(Oe+1)*8-1}${ze}) and < 2 ** ${(Oe+1)*8-1}${ze}`,new ut.ERR_OUT_OF_RANGE("value",Xt,le)}Z(he,Pe,Oe)}function Ae(le,Q){if(typeof le!="number")throw new ut.ERR_INVALID_ARG_TYPE(Q,"number",le)}function fe(le,Q,ee){throw Math.floor(le)!==le?(Ae(le,ee),new ut.ERR_OUT_OF_RANGE("offset","an integer",le)):Q<0?new ut.ERR_BUFFER_OUT_OF_BOUNDS:new ut.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Q}`,le)}const ge=/[^+/0-9A-Za-z-_]/g;function Ye(le){if(le=le.split("=")[0],le=le.trim().replace(ge,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function Je(le,Q){Q=Q||1/0;let ee;const he=le.length;let Pe=null;const Oe=[];for(let ze=0;ze<he;++ze){if(ee=le.charCodeAt(ze),ee>55295&&ee<57344){if(!Pe){if(ee>56319){(Q-=3)>-1&&Oe.push(239,191,189);continue}else if(ze+1===he){(Q-=3)>-1&&Oe.push(239,191,189);continue}Pe=ee;continue}if(ee<56320){(Q-=3)>-1&&Oe.push(239,191,189),Pe=ee;continue}ee=(Pe-55296<<10|ee-56320)+65536}else Pe&&(Q-=3)>-1&&Oe.push(239,191,189);if(Pe=null,ee<128){if((Q-=1)<0)break;Oe.push(ee)}else if(ee<2048){if((Q-=2)<0)break;Oe.push(ee>>6|192,ee&63|128)}else if(ee<65536){if((Q-=3)<0)break;Oe.push(ee>>12|224,ee>>6&63|128,ee&63|128)}else if(ee<1114112){if((Q-=4)<0)break;Oe.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,ee&63|128)}else throw new Error("Invalid code point")}return Oe}function ot(le){const Q=[];for(let ee=0;ee<le.length;++ee)Q.push(le.charCodeAt(ee)&255);return Q}function Ft(le,Q){let ee,he,Pe;const Oe=[];for(let ze=0;ze<le.length&&!((Q-=2)<0);++ze)ee=le.charCodeAt(ze),he=ee>>8,Pe=ee%256,Oe.push(Pe),Oe.push(he);return Oe}function Et(le){return C.toByteArray(Ye(le))}function Mt(le,Q,ee,he){let Pe;for(Pe=0;Pe<he&&!(Pe+ee>=Q.length||Pe>=le.length);++Pe)Q[Pe+ee]=le[Pe];return Pe}function cn(le,Q){return le instanceof Q||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===Q.name}function en(le){return le!==le}const rn=(function(){const le="0123456789abcdef",Q=new Array(256);for(let ee=0;ee<16;++ee){const he=ee*16;for(let Pe=0;Pe<16;++Pe)Q[he+Pe]=le[ee]+le[Pe]}return Q})();function Ni(le){return typeof BigInt>"u"?zn:le}function zn(){throw new Error("BigInt not supported")}})(e);const w=e.Buffer;t.Blob=e.Blob,t.BlobOptions=e.BlobOptions,t.Buffer=e.Buffer,t.File=e.File,t.FileOptions=e.FileOptions,t.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,t.SlowBuffer=e.SlowBuffer,t.TranscodeEncoding=e.TranscodeEncoding,t.atob=e.atob,t.btoa=e.btoa,t.constants=e.constants,t.default=w,t.isAscii=e.isAscii,t.isUtf8=e.isUtf8,t.kMaxLength=e.kMaxLength,t.kStringMaxLength=e.kStringMaxLength,t.resolveObjectURL=e.resolveObjectURL,t.transcode=e.transcode})(A4)),A4}var But=UT.exports,IZ;function Ame(){return IZ||(IZ=1,(function(t){(function(e,n){function r(U,T){if(!U)throw new Error(T||"Assertion failed")}function i(U,T){U.super_=T;var _=function(){};_.prototype=T.prototype,U.prototype=new _,U.prototype.constructor=U}function s(U,T,_){if(s.isBN(U))return U;this.negative=0,this.words=null,this.length=0,this.red=null,U!==null&&((T==="le"||T==="be")&&(_=T,T=10),this._init(U||0,T||10,_||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=o7().Buffer}catch{}s.isBN=function(T){return T instanceof s?!0:T!==null&&typeof T=="object"&&T.constructor.wordSize===s.wordSize&&Array.isArray(T.words)},s.max=function(T,_){return T.cmp(_)>0?T:_},s.min=function(T,_){return T.cmp(_)<0?T:_},s.prototype._init=function(T,_,L){if(typeof T=="number")return this._initNumber(T,_,L);if(typeof T=="object")return this._initArray(T,_,L);_==="hex"&&(_=16),r(_===(_|0)&&_>=2&&_<=36),T=T.toString().replace(/\s+/g,"");var z=0;T[0]==="-"&&(z++,this.negative=1),z<T.length&&(_===16?this._parseHex(T,z,L):(this._parseBase(T,_,z),L==="le"&&this._initArray(this.toArray(),_,L)))},s.prototype._initNumber=function(T,_,L){T<0&&(this.negative=1,T=-T),T<67108864?(this.words=[T&67108863],this.length=1):T<4503599627370496?(this.words=[T&67108863,T/67108864&67108863],this.length=2):(r(T<9007199254740992),this.words=[T&67108863,T/67108864&67108863,1],this.length=3),L==="le"&&this._initArray(this.toArray(),_,L)},s.prototype._initArray=function(T,_,L){if(r(typeof T.length=="number"),T.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(T.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G,te,K=0;if(L==="be")for(z=T.length-1,G=0;z>=0;z-=3)te=T[z]|T[z-1]<<8|T[z-2]<<16,this.words[G]|=te<<K&67108863,this.words[G+1]=te>>>26-K&67108863,K+=24,K>=26&&(K-=26,G++);else if(L==="le")for(z=0,G=0;z<T.length;z+=3)te=T[z]|T[z+1]<<8|T[z+2]<<16,this.words[G]|=te<<K&67108863,this.words[G+1]=te>>>26-K&67108863,K+=24,K>=26&&(K-=26,G++);return this._strip()};function a(U,T){var _=U.charCodeAt(T);if(_>=48&&_<=57)return _-48;if(_>=65&&_<=70)return _-55;if(_>=97&&_<=102)return _-87;r(!1,"Invalid character in "+U)}function l(U,T,_){var L=a(U,_);return _-1>=T&&(L|=a(U,_-1)<<4),L}s.prototype._parseHex=function(T,_,L){this.length=Math.ceil((T.length-_)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G=0,te=0,K;if(L==="be")for(z=T.length-1;z>=_;z-=2)K=l(T,_,z)<<G,this.words[te]|=K&67108863,G>=18?(G-=18,te+=1,this.words[te]|=K>>>26):G+=8;else{var q=T.length-_;for(z=q%2===0?_+1:_;z<T.length;z+=2)K=l(T,_,z)<<G,this.words[te]|=K&67108863,G>=18?(G-=18,te+=1,this.words[te]|=K>>>26):G+=8}this._strip()};function c(U,T,_,L){for(var z=0,G=0,te=Math.min(U.length,_),K=T;K<te;K++){var q=U.charCodeAt(K)-48;z*=L,q>=49?G=q-49+10:q>=17?G=q-17+10:G=q,r(q>=0&&G<L,"Invalid character"),z+=G}return z}s.prototype._parseBase=function(T,_,L){this.words=[0],this.length=1;for(var z=0,G=1;G<=67108863;G*=_)z++;z--,G=G/_|0;for(var te=T.length-L,K=te%z,q=Math.min(te,te-K)+L,M=0,P=L;P<q;P+=z)M=c(T,P,P+z,_),this.imuln(G),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(K!==0){var Y=1;for(M=c(T,P,T.length,_),P=0;P<K;P++)Y*=_;this.imuln(Y),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this._strip()},s.prototype.copy=function(T){T.words=new Array(this.length);for(var _=0;_<this.length;_++)T.words[_]=this.words[_];T.length=this.length,T.negative=this.negative,T.red=this.red};function u(U,T){U.words=T.words,U.length=T.length,U.negative=T.negative,U.red=T.red}if(s.prototype._move=function(T){u(T,this)},s.prototype.clone=function(){var T=new s(null);return this.copy(T),T},s.prototype._expand=function(T){for(;this.length<T;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(T,_){T=T||10,_=_|0||1;var L;if(T===16||T==="hex"){L="";for(var z=0,G=0,te=0;te<this.length;te++){var K=this.words[te],q=((K<<z|G)&16777215).toString(16);G=K>>>24-z&16777215,z+=2,z>=26&&(z-=26,te--),G!==0||te!==this.length-1?L=m[6-q.length]+q+L:L=q+L}for(G!==0&&(L=G.toString(16)+L);L.length%_!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}if(T===(T|0)&&T>=2&&T<=36){var M=g[T],P=x[T];L="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var X=Y.modrn(P).toString(T);Y=Y.idivn(P),Y.isZero()?L=X+L:L=m[M-X.length]+X+L}for(this.isZero()&&(L="0"+L);L.length%_!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var T=this.words[0];return this.length===2?T+=this.words[1]*67108864:this.length===3&&this.words[2]===1?T+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-T:T},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(T,_){return this.toArrayLike(o,T,_)}),s.prototype.toArray=function(T,_){return this.toArrayLike(Array,T,_)};var v=function(T,_){return T.allocUnsafe?T.allocUnsafe(_):new T(_)};s.prototype.toArrayLike=function(T,_,L){this._strip();var z=this.byteLength(),G=L||Math.max(1,z);r(z<=G,"byte array longer than desired length"),r(G>0,"Requested array length <= 0");var te=v(T,G),K=_==="le"?"LE":"BE";return this["_toArrayLike"+K](te,z),te},s.prototype._toArrayLikeLE=function(T,_){for(var L=0,z=0,G=0,te=0;G<this.length;G++){var K=this.words[G]<<te|z;T[L++]=K&255,L<T.length&&(T[L++]=K>>8&255),L<T.length&&(T[L++]=K>>16&255),te===6?(L<T.length&&(T[L++]=K>>24&255),z=0,te=0):(z=K>>>24,te+=2)}if(L<T.length)for(T[L++]=z;L<T.length;)T[L++]=0},s.prototype._toArrayLikeBE=function(T,_){for(var L=T.length-1,z=0,G=0,te=0;G<this.length;G++){var K=this.words[G]<<te|z;T[L--]=K&255,L>=0&&(T[L--]=K>>8&255),L>=0&&(T[L--]=K>>16&255),te===6?(L>=0&&(T[L--]=K>>24&255),z=0,te=0):(z=K>>>24,te+=2)}if(L>=0)for(T[L--]=z;L>=0;)T[L--]=0},Math.clz32?s.prototype._countBits=function(T){return 32-Math.clz32(T)}:s.prototype._countBits=function(T){var _=T,L=0;return _>=4096&&(L+=13,_>>>=13),_>=64&&(L+=7,_>>>=7),_>=8&&(L+=4,_>>>=4),_>=2&&(L+=2,_>>>=2),L+_},s.prototype._zeroBits=function(T){if(T===0)return 26;var _=T,L=0;return(_&8191)===0&&(L+=13,_>>>=13),(_&127)===0&&(L+=7,_>>>=7),(_&15)===0&&(L+=4,_>>>=4),(_&3)===0&&(L+=2,_>>>=2),(_&1)===0&&L++,L},s.prototype.bitLength=function(){var T=this.words[this.length-1],_=this._countBits(T);return(this.length-1)*26+_};function b(U){for(var T=new Array(U.bitLength()),_=0;_<T.length;_++){var L=_/26|0,z=_%26;T[_]=U.words[L]>>>z&1}return T}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var T=0,_=0;_<this.length;_++){var L=this._zeroBits(this.words[_]);if(T+=L,L!==26)break}return T},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(T){return this.negative!==0?this.abs().inotn(T).iaddn(1):this.clone()},s.prototype.fromTwos=function(T){return this.testn(T-1)?this.notn(T).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(T){for(;this.length<T.length;)this.words[this.length++]=0;for(var _=0;_<T.length;_++)this.words[_]=this.words[_]|T.words[_];return this._strip()},s.prototype.ior=function(T){return r((this.negative|T.negative)===0),this.iuor(T)},s.prototype.or=function(T){return this.length>T.length?this.clone().ior(T):T.clone().ior(this)},s.prototype.uor=function(T){return this.length>T.length?this.clone().iuor(T):T.clone().iuor(this)},s.prototype.iuand=function(T){var _;this.length>T.length?_=T:_=this;for(var L=0;L<_.length;L++)this.words[L]=this.words[L]&T.words[L];return this.length=_.length,this._strip()},s.prototype.iand=function(T){return r((this.negative|T.negative)===0),this.iuand(T)},s.prototype.and=function(T){return this.length>T.length?this.clone().iand(T):T.clone().iand(this)},s.prototype.uand=function(T){return this.length>T.length?this.clone().iuand(T):T.clone().iuand(this)},s.prototype.iuxor=function(T){var _,L;this.length>T.length?(_=this,L=T):(_=T,L=this);for(var z=0;z<L.length;z++)this.words[z]=_.words[z]^L.words[z];if(this!==_)for(;z<_.length;z++)this.words[z]=_.words[z];return this.length=_.length,this._strip()},s.prototype.ixor=function(T){return r((this.negative|T.negative)===0),this.iuxor(T)},s.prototype.xor=function(T){return this.length>T.length?this.clone().ixor(T):T.clone().ixor(this)},s.prototype.uxor=function(T){return this.length>T.length?this.clone().iuxor(T):T.clone().iuxor(this)},s.prototype.inotn=function(T){r(typeof T=="number"&&T>=0);var _=Math.ceil(T/26)|0,L=T%26;this._expand(_),L>0&&_--;for(var z=0;z<_;z++)this.words[z]=~this.words[z]&67108863;return L>0&&(this.words[z]=~this.words[z]&67108863>>26-L),this._strip()},s.prototype.notn=function(T){return this.clone().inotn(T)},s.prototype.setn=function(T,_){r(typeof T=="number"&&T>=0);var L=T/26|0,z=T%26;return this._expand(L+1),_?this.words[L]=this.words[L]|1<<z:this.words[L]=this.words[L]&~(1<<z),this._strip()},s.prototype.iadd=function(T){var _;if(this.negative!==0&&T.negative===0)return this.negative=0,_=this.isub(T),this.negative^=1,this._normSign();if(this.negative===0&&T.negative!==0)return T.negative=0,_=this.isub(T),T.negative=1,_._normSign();var L,z;this.length>T.length?(L=this,z=T):(L=T,z=this);for(var G=0,te=0;te<z.length;te++)_=(L.words[te]|0)+(z.words[te]|0)+G,this.words[te]=_&67108863,G=_>>>26;for(;G!==0&&te<L.length;te++)_=(L.words[te]|0)+G,this.words[te]=_&67108863,G=_>>>26;if(this.length=L.length,G!==0)this.words[this.length]=G,this.length++;else if(L!==this)for(;te<L.length;te++)this.words[te]=L.words[te];return this},s.prototype.add=function(T){var _;return T.negative!==0&&this.negative===0?(T.negative=0,_=this.sub(T),T.negative^=1,_):T.negative===0&&this.negative!==0?(this.negative=0,_=T.sub(this),this.negative=1,_):this.length>T.length?this.clone().iadd(T):T.clone().iadd(this)},s.prototype.isub=function(T){if(T.negative!==0){T.negative=0;var _=this.iadd(T);return T.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(T),this.negative=1,this._normSign();var L=this.cmp(T);if(L===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,G;L>0?(z=this,G=T):(z=T,G=this);for(var te=0,K=0;K<G.length;K++)_=(z.words[K]|0)-(G.words[K]|0)+te,te=_>>26,this.words[K]=_&67108863;for(;te!==0&&K<z.length;K++)_=(z.words[K]|0)+te,te=_>>26,this.words[K]=_&67108863;if(te===0&&K<z.length&&z!==this)for(;K<z.length;K++)this.words[K]=z.words[K];return this.length=Math.max(this.length,K),z!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(T){return this.clone().isub(T)};function w(U,T,_){_.negative=T.negative^U.negative;var L=U.length+T.length|0;_.length=L,L=L-1|0;var z=U.words[0]|0,G=T.words[0]|0,te=z*G,K=te&67108863,q=te/67108864|0;_.words[0]=K;for(var M=1;M<L;M++){for(var P=q>>>26,Y=q&67108863,X=Math.min(M,T.length-1),re=Math.max(0,M-U.length+1);re<=X;re++){var ae=M-re|0;z=U.words[ae]|0,G=T.words[re]|0,te=z*G+Y,P+=te/67108864|0,Y=te&67108863}_.words[M]=Y|0,q=P|0}return q!==0?_.words[M]=q|0:_.length--,_._strip()}var k=function(T,_,L){var z=T.words,G=_.words,te=L.words,K=0,q,M,P,Y=z[0]|0,X=Y&8191,re=Y>>>13,ae=z[1]|0,Te=ae&8191,ue=ae>>>13,pe=z[2]|0,be=pe&8191,se=pe>>>13,ve=z[3]|0,Re=ve&8191,De=ve>>>13,Qe=z[4]|0,it=Qe&8191,et=Qe>>>13,tt=z[5]|0,mt=tt&8191,dt=tt>>>13,Wt=z[6]|0,qe=Wt&8191,Tt=Wt>>>13,ln=z[7]|0,Ie=ln&8191,Ve=ln>>>13,gt=z[8]|0,ut=gt&8191,oe=gt>>>13,J=z[9]|0,Z=J&8191,de=J>>>13,Ae=G[0]|0,fe=Ae&8191,ge=Ae>>>13,Ye=G[1]|0,Je=Ye&8191,ot=Ye>>>13,Ft=G[2]|0,Et=Ft&8191,Mt=Ft>>>13,cn=G[3]|0,en=cn&8191,rn=cn>>>13,Ni=G[4]|0,zn=Ni&8191,le=Ni>>>13,Q=G[5]|0,ee=Q&8191,he=Q>>>13,Pe=G[6]|0,Oe=Pe&8191,ze=Pe>>>13,Xt=G[7]|0,$t=Xt&8191,st=Xt>>>13,mn=G[8]|0,bt=mn&8191,vn=mn>>>13,sl=G[9]|0,ur=sl&8191,yr=sl>>>13;L.negative=T.negative^_.negative,L.length=19,q=Math.imul(X,fe),M=Math.imul(X,ge),M=M+Math.imul(re,fe)|0,P=Math.imul(re,ge);var Qc=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Qc>>>26)|0,Qc&=67108863,q=Math.imul(Te,fe),M=Math.imul(Te,ge),M=M+Math.imul(ue,fe)|0,P=Math.imul(ue,ge),q=q+Math.imul(X,Je)|0,M=M+Math.imul(X,ot)|0,M=M+Math.imul(re,Je)|0,P=P+Math.imul(re,ot)|0;var Xl=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Xl>>>26)|0,Xl&=67108863,q=Math.imul(be,fe),M=Math.imul(be,ge),M=M+Math.imul(se,fe)|0,P=Math.imul(se,ge),q=q+Math.imul(Te,Je)|0,M=M+Math.imul(Te,ot)|0,M=M+Math.imul(ue,Je)|0,P=P+Math.imul(ue,ot)|0,q=q+Math.imul(X,Et)|0,M=M+Math.imul(X,Mt)|0,M=M+Math.imul(re,Et)|0,P=P+Math.imul(re,Mt)|0;var ca=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(ca>>>26)|0,ca&=67108863,q=Math.imul(Re,fe),M=Math.imul(Re,ge),M=M+Math.imul(De,fe)|0,P=Math.imul(De,ge),q=q+Math.imul(be,Je)|0,M=M+Math.imul(be,ot)|0,M=M+Math.imul(se,Je)|0,P=P+Math.imul(se,ot)|0,q=q+Math.imul(Te,Et)|0,M=M+Math.imul(Te,Mt)|0,M=M+Math.imul(ue,Et)|0,P=P+Math.imul(ue,Mt)|0,q=q+Math.imul(X,en)|0,M=M+Math.imul(X,rn)|0,M=M+Math.imul(re,en)|0,P=P+Math.imul(re,rn)|0;var Ql=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Ql>>>26)|0,Ql&=67108863,q=Math.imul(it,fe),M=Math.imul(it,ge),M=M+Math.imul(et,fe)|0,P=Math.imul(et,ge),q=q+Math.imul(Re,Je)|0,M=M+Math.imul(Re,ot)|0,M=M+Math.imul(De,Je)|0,P=P+Math.imul(De,ot)|0,q=q+Math.imul(be,Et)|0,M=M+Math.imul(be,Mt)|0,M=M+Math.imul(se,Et)|0,P=P+Math.imul(se,Mt)|0,q=q+Math.imul(Te,en)|0,M=M+Math.imul(Te,rn)|0,M=M+Math.imul(ue,en)|0,P=P+Math.imul(ue,rn)|0,q=q+Math.imul(X,zn)|0,M=M+Math.imul(X,le)|0,M=M+Math.imul(re,zn)|0,P=P+Math.imul(re,le)|0;var Po=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Po>>>26)|0,Po&=67108863,q=Math.imul(mt,fe),M=Math.imul(mt,ge),M=M+Math.imul(dt,fe)|0,P=Math.imul(dt,ge),q=q+Math.imul(it,Je)|0,M=M+Math.imul(it,ot)|0,M=M+Math.imul(et,Je)|0,P=P+Math.imul(et,ot)|0,q=q+Math.imul(Re,Et)|0,M=M+Math.imul(Re,Mt)|0,M=M+Math.imul(De,Et)|0,P=P+Math.imul(De,Mt)|0,q=q+Math.imul(be,en)|0,M=M+Math.imul(be,rn)|0,M=M+Math.imul(se,en)|0,P=P+Math.imul(se,rn)|0,q=q+Math.imul(Te,zn)|0,M=M+Math.imul(Te,le)|0,M=M+Math.imul(ue,zn)|0,P=P+Math.imul(ue,le)|0,q=q+Math.imul(X,ee)|0,M=M+Math.imul(X,he)|0,M=M+Math.imul(re,ee)|0,P=P+Math.imul(re,he)|0;var _o=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(_o>>>26)|0,_o&=67108863,q=Math.imul(qe,fe),M=Math.imul(qe,ge),M=M+Math.imul(Tt,fe)|0,P=Math.imul(Tt,ge),q=q+Math.imul(mt,Je)|0,M=M+Math.imul(mt,ot)|0,M=M+Math.imul(dt,Je)|0,P=P+Math.imul(dt,ot)|0,q=q+Math.imul(it,Et)|0,M=M+Math.imul(it,Mt)|0,M=M+Math.imul(et,Et)|0,P=P+Math.imul(et,Mt)|0,q=q+Math.imul(Re,en)|0,M=M+Math.imul(Re,rn)|0,M=M+Math.imul(De,en)|0,P=P+Math.imul(De,rn)|0,q=q+Math.imul(be,zn)|0,M=M+Math.imul(be,le)|0,M=M+Math.imul(se,zn)|0,P=P+Math.imul(se,le)|0,q=q+Math.imul(Te,ee)|0,M=M+Math.imul(Te,he)|0,M=M+Math.imul(ue,ee)|0,P=P+Math.imul(ue,he)|0,q=q+Math.imul(X,Oe)|0,M=M+Math.imul(X,ze)|0,M=M+Math.imul(re,Oe)|0,P=P+Math.imul(re,ze)|0;var ua=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(ua>>>26)|0,ua&=67108863,q=Math.imul(Ie,fe),M=Math.imul(Ie,ge),M=M+Math.imul(Ve,fe)|0,P=Math.imul(Ve,ge),q=q+Math.imul(qe,Je)|0,M=M+Math.imul(qe,ot)|0,M=M+Math.imul(Tt,Je)|0,P=P+Math.imul(Tt,ot)|0,q=q+Math.imul(mt,Et)|0,M=M+Math.imul(mt,Mt)|0,M=M+Math.imul(dt,Et)|0,P=P+Math.imul(dt,Mt)|0,q=q+Math.imul(it,en)|0,M=M+Math.imul(it,rn)|0,M=M+Math.imul(et,en)|0,P=P+Math.imul(et,rn)|0,q=q+Math.imul(Re,zn)|0,M=M+Math.imul(Re,le)|0,M=M+Math.imul(De,zn)|0,P=P+Math.imul(De,le)|0,q=q+Math.imul(be,ee)|0,M=M+Math.imul(be,he)|0,M=M+Math.imul(se,ee)|0,P=P+Math.imul(se,he)|0,q=q+Math.imul(Te,Oe)|0,M=M+Math.imul(Te,ze)|0,M=M+Math.imul(ue,Oe)|0,P=P+Math.imul(ue,ze)|0,q=q+Math.imul(X,$t)|0,M=M+Math.imul(X,st)|0,M=M+Math.imul(re,$t)|0,P=P+Math.imul(re,st)|0;var Io=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Io>>>26)|0,Io&=67108863,q=Math.imul(ut,fe),M=Math.imul(ut,ge),M=M+Math.imul(oe,fe)|0,P=Math.imul(oe,ge),q=q+Math.imul(Ie,Je)|0,M=M+Math.imul(Ie,ot)|0,M=M+Math.imul(Ve,Je)|0,P=P+Math.imul(Ve,ot)|0,q=q+Math.imul(qe,Et)|0,M=M+Math.imul(qe,Mt)|0,M=M+Math.imul(Tt,Et)|0,P=P+Math.imul(Tt,Mt)|0,q=q+Math.imul(mt,en)|0,M=M+Math.imul(mt,rn)|0,M=M+Math.imul(dt,en)|0,P=P+Math.imul(dt,rn)|0,q=q+Math.imul(it,zn)|0,M=M+Math.imul(it,le)|0,M=M+Math.imul(et,zn)|0,P=P+Math.imul(et,le)|0,q=q+Math.imul(Re,ee)|0,M=M+Math.imul(Re,he)|0,M=M+Math.imul(De,ee)|0,P=P+Math.imul(De,he)|0,q=q+Math.imul(be,Oe)|0,M=M+Math.imul(be,ze)|0,M=M+Math.imul(se,Oe)|0,P=P+Math.imul(se,ze)|0,q=q+Math.imul(Te,$t)|0,M=M+Math.imul(Te,st)|0,M=M+Math.imul(ue,$t)|0,P=P+Math.imul(ue,st)|0,q=q+Math.imul(X,bt)|0,M=M+Math.imul(X,vn)|0,M=M+Math.imul(re,bt)|0,P=P+Math.imul(re,vn)|0;var xr=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(xr>>>26)|0,xr&=67108863,q=Math.imul(Z,fe),M=Math.imul(Z,ge),M=M+Math.imul(de,fe)|0,P=Math.imul(de,ge),q=q+Math.imul(ut,Je)|0,M=M+Math.imul(ut,ot)|0,M=M+Math.imul(oe,Je)|0,P=P+Math.imul(oe,ot)|0,q=q+Math.imul(Ie,Et)|0,M=M+Math.imul(Ie,Mt)|0,M=M+Math.imul(Ve,Et)|0,P=P+Math.imul(Ve,Mt)|0,q=q+Math.imul(qe,en)|0,M=M+Math.imul(qe,rn)|0,M=M+Math.imul(Tt,en)|0,P=P+Math.imul(Tt,rn)|0,q=q+Math.imul(mt,zn)|0,M=M+Math.imul(mt,le)|0,M=M+Math.imul(dt,zn)|0,P=P+Math.imul(dt,le)|0,q=q+Math.imul(it,ee)|0,M=M+Math.imul(it,he)|0,M=M+Math.imul(et,ee)|0,P=P+Math.imul(et,he)|0,q=q+Math.imul(Re,Oe)|0,M=M+Math.imul(Re,ze)|0,M=M+Math.imul(De,Oe)|0,P=P+Math.imul(De,ze)|0,q=q+Math.imul(be,$t)|0,M=M+Math.imul(be,st)|0,M=M+Math.imul(se,$t)|0,P=P+Math.imul(se,st)|0,q=q+Math.imul(Te,bt)|0,M=M+Math.imul(Te,vn)|0,M=M+Math.imul(ue,bt)|0,P=P+Math.imul(ue,vn)|0,q=q+Math.imul(X,ur)|0,M=M+Math.imul(X,yr)|0,M=M+Math.imul(re,ur)|0,P=P+Math.imul(re,yr)|0;var Zc=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Zc>>>26)|0,Zc&=67108863,q=Math.imul(Z,Je),M=Math.imul(Z,ot),M=M+Math.imul(de,Je)|0,P=Math.imul(de,ot),q=q+Math.imul(ut,Et)|0,M=M+Math.imul(ut,Mt)|0,M=M+Math.imul(oe,Et)|0,P=P+Math.imul(oe,Mt)|0,q=q+Math.imul(Ie,en)|0,M=M+Math.imul(Ie,rn)|0,M=M+Math.imul(Ve,en)|0,P=P+Math.imul(Ve,rn)|0,q=q+Math.imul(qe,zn)|0,M=M+Math.imul(qe,le)|0,M=M+Math.imul(Tt,zn)|0,P=P+Math.imul(Tt,le)|0,q=q+Math.imul(mt,ee)|0,M=M+Math.imul(mt,he)|0,M=M+Math.imul(dt,ee)|0,P=P+Math.imul(dt,he)|0,q=q+Math.imul(it,Oe)|0,M=M+Math.imul(it,ze)|0,M=M+Math.imul(et,Oe)|0,P=P+Math.imul(et,ze)|0,q=q+Math.imul(Re,$t)|0,M=M+Math.imul(Re,st)|0,M=M+Math.imul(De,$t)|0,P=P+Math.imul(De,st)|0,q=q+Math.imul(be,bt)|0,M=M+Math.imul(be,vn)|0,M=M+Math.imul(se,bt)|0,P=P+Math.imul(se,vn)|0,q=q+Math.imul(Te,ur)|0,M=M+Math.imul(Te,yr)|0,M=M+Math.imul(ue,ur)|0,P=P+Math.imul(ue,yr)|0;var vr=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(vr>>>26)|0,vr&=67108863,q=Math.imul(Z,Et),M=Math.imul(Z,Mt),M=M+Math.imul(de,Et)|0,P=Math.imul(de,Mt),q=q+Math.imul(ut,en)|0,M=M+Math.imul(ut,rn)|0,M=M+Math.imul(oe,en)|0,P=P+Math.imul(oe,rn)|0,q=q+Math.imul(Ie,zn)|0,M=M+Math.imul(Ie,le)|0,M=M+Math.imul(Ve,zn)|0,P=P+Math.imul(Ve,le)|0,q=q+Math.imul(qe,ee)|0,M=M+Math.imul(qe,he)|0,M=M+Math.imul(Tt,ee)|0,P=P+Math.imul(Tt,he)|0,q=q+Math.imul(mt,Oe)|0,M=M+Math.imul(mt,ze)|0,M=M+Math.imul(dt,Oe)|0,P=P+Math.imul(dt,ze)|0,q=q+Math.imul(it,$t)|0,M=M+Math.imul(it,st)|0,M=M+Math.imul(et,$t)|0,P=P+Math.imul(et,st)|0,q=q+Math.imul(Re,bt)|0,M=M+Math.imul(Re,vn)|0,M=M+Math.imul(De,bt)|0,P=P+Math.imul(De,vn)|0,q=q+Math.imul(be,ur)|0,M=M+Math.imul(be,yr)|0,M=M+Math.imul(se,ur)|0,P=P+Math.imul(se,yr)|0;var Yr=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,q=Math.imul(Z,en),M=Math.imul(Z,rn),M=M+Math.imul(de,en)|0,P=Math.imul(de,rn),q=q+Math.imul(ut,zn)|0,M=M+Math.imul(ut,le)|0,M=M+Math.imul(oe,zn)|0,P=P+Math.imul(oe,le)|0,q=q+Math.imul(Ie,ee)|0,M=M+Math.imul(Ie,he)|0,M=M+Math.imul(Ve,ee)|0,P=P+Math.imul(Ve,he)|0,q=q+Math.imul(qe,Oe)|0,M=M+Math.imul(qe,ze)|0,M=M+Math.imul(Tt,Oe)|0,P=P+Math.imul(Tt,ze)|0,q=q+Math.imul(mt,$t)|0,M=M+Math.imul(mt,st)|0,M=M+Math.imul(dt,$t)|0,P=P+Math.imul(dt,st)|0,q=q+Math.imul(it,bt)|0,M=M+Math.imul(it,vn)|0,M=M+Math.imul(et,bt)|0,P=P+Math.imul(et,vn)|0,q=q+Math.imul(Re,ur)|0,M=M+Math.imul(Re,yr)|0,M=M+Math.imul(De,ur)|0,P=P+Math.imul(De,yr)|0;var ps=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(ps>>>26)|0,ps&=67108863,q=Math.imul(Z,zn),M=Math.imul(Z,le),M=M+Math.imul(de,zn)|0,P=Math.imul(de,le),q=q+Math.imul(ut,ee)|0,M=M+Math.imul(ut,he)|0,M=M+Math.imul(oe,ee)|0,P=P+Math.imul(oe,he)|0,q=q+Math.imul(Ie,Oe)|0,M=M+Math.imul(Ie,ze)|0,M=M+Math.imul(Ve,Oe)|0,P=P+Math.imul(Ve,ze)|0,q=q+Math.imul(qe,$t)|0,M=M+Math.imul(qe,st)|0,M=M+Math.imul(Tt,$t)|0,P=P+Math.imul(Tt,st)|0,q=q+Math.imul(mt,bt)|0,M=M+Math.imul(mt,vn)|0,M=M+Math.imul(dt,bt)|0,P=P+Math.imul(dt,vn)|0,q=q+Math.imul(it,ur)|0,M=M+Math.imul(it,yr)|0,M=M+Math.imul(et,ur)|0,P=P+Math.imul(et,yr)|0;var Ih=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Ih>>>26)|0,Ih&=67108863,q=Math.imul(Z,ee),M=Math.imul(Z,he),M=M+Math.imul(de,ee)|0,P=Math.imul(de,he),q=q+Math.imul(ut,Oe)|0,M=M+Math.imul(ut,ze)|0,M=M+Math.imul(oe,Oe)|0,P=P+Math.imul(oe,ze)|0,q=q+Math.imul(Ie,$t)|0,M=M+Math.imul(Ie,st)|0,M=M+Math.imul(Ve,$t)|0,P=P+Math.imul(Ve,st)|0,q=q+Math.imul(qe,bt)|0,M=M+Math.imul(qe,vn)|0,M=M+Math.imul(Tt,bt)|0,P=P+Math.imul(Tt,vn)|0,q=q+Math.imul(mt,ur)|0,M=M+Math.imul(mt,yr)|0,M=M+Math.imul(dt,ur)|0,P=P+Math.imul(dt,yr)|0;var r0=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(r0>>>26)|0,r0&=67108863,q=Math.imul(Z,Oe),M=Math.imul(Z,ze),M=M+Math.imul(de,Oe)|0,P=Math.imul(de,ze),q=q+Math.imul(ut,$t)|0,M=M+Math.imul(ut,st)|0,M=M+Math.imul(oe,$t)|0,P=P+Math.imul(oe,st)|0,q=q+Math.imul(Ie,bt)|0,M=M+Math.imul(Ie,vn)|0,M=M+Math.imul(Ve,bt)|0,P=P+Math.imul(Ve,vn)|0,q=q+Math.imul(qe,ur)|0,M=M+Math.imul(qe,yr)|0,M=M+Math.imul(Tt,ur)|0,P=P+Math.imul(Tt,yr)|0;var i0=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(i0>>>26)|0,i0&=67108863,q=Math.imul(Z,$t),M=Math.imul(Z,st),M=M+Math.imul(de,$t)|0,P=Math.imul(de,st),q=q+Math.imul(ut,bt)|0,M=M+Math.imul(ut,vn)|0,M=M+Math.imul(oe,bt)|0,P=P+Math.imul(oe,vn)|0,q=q+Math.imul(Ie,ur)|0,M=M+Math.imul(Ie,yr)|0,M=M+Math.imul(Ve,ur)|0,P=P+Math.imul(Ve,yr)|0;var Sv=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Sv>>>26)|0,Sv&=67108863,q=Math.imul(Z,bt),M=Math.imul(Z,vn),M=M+Math.imul(de,bt)|0,P=Math.imul(de,vn),q=q+Math.imul(ut,ur)|0,M=M+Math.imul(ut,yr)|0,M=M+Math.imul(oe,ur)|0,P=P+Math.imul(oe,yr)|0;var Bd=(K+q|0)+((M&8191)<<13)|0;K=(P+(M>>>13)|0)+(Bd>>>26)|0,Bd&=67108863,q=Math.imul(Z,ur),M=Math.imul(Z,yr),M=M+Math.imul(de,ur)|0,P=Math.imul(de,yr);var Ud=(K+q|0)+((M&8191)<<13)|0;return K=(P+(M>>>13)|0)+(Ud>>>26)|0,Ud&=67108863,te[0]=Qc,te[1]=Xl,te[2]=ca,te[3]=Ql,te[4]=Po,te[5]=_o,te[6]=ua,te[7]=Io,te[8]=xr,te[9]=Zc,te[10]=vr,te[11]=Yr,te[12]=ps,te[13]=Ih,te[14]=r0,te[15]=i0,te[16]=Sv,te[17]=Bd,te[18]=Ud,K!==0&&(te[19]=K,L.length++),L};Math.imul||(k=w);function C(U,T,_){_.negative=T.negative^U.negative,_.length=U.length+T.length;for(var L=0,z=0,G=0;G<_.length-1;G++){var te=z;z=0;for(var K=L&67108863,q=Math.min(G,T.length-1),M=Math.max(0,G-U.length+1);M<=q;M++){var P=G-M,Y=U.words[P]|0,X=T.words[M]|0,re=Y*X,ae=re&67108863;te=te+(re/67108864|0)|0,ae=ae+K|0,K=ae&67108863,te=te+(ae>>>26)|0,z+=te>>>26,te&=67108863}_.words[G]=K,L=te,te=z}return L!==0?_.words[G]=L:_.length--,_._strip()}function R(U,T,_){return C(U,T,_)}s.prototype.mulTo=function(T,_){var L,z=this.length+T.length;return this.length===10&&T.length===10?L=k(this,T,_):z<63?L=w(this,T,_):z<1024?L=C(this,T,_):L=R(this,T,_),L},s.prototype.mul=function(T){var _=new s(null);return _.words=new Array(this.length+T.length),this.mulTo(T,_)},s.prototype.mulf=function(T){var _=new s(null);return _.words=new Array(this.length+T.length),R(this,T,_)},s.prototype.imul=function(T){return this.clone().mulTo(T,this)},s.prototype.imuln=function(T){var _=T<0;_&&(T=-T),r(typeof T=="number"),r(T<67108864);for(var L=0,z=0;z<this.length;z++){var G=(this.words[z]|0)*T,te=(G&67108863)+(L&67108863);L>>=26,L+=G/67108864|0,L+=te>>>26,this.words[z]=te&67108863}return L!==0&&(this.words[z]=L,this.length++),this.length=T===0?1:this.length,_?this.ineg():this},s.prototype.muln=function(T){return this.clone().imuln(T)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(T){var _=b(T);if(_.length===0)return new s(1);for(var L=this,z=0;z<_.length&&_[z]===0;z++,L=L.sqr());if(++z<_.length)for(var G=L.sqr();z<_.length;z++,G=G.sqr())_[z]!==0&&(L=L.mul(G));return L},s.prototype.iushln=function(T){r(typeof T=="number"&&T>=0);var _=T%26,L=(T-_)/26,z=67108863>>>26-_<<26-_,G;if(_!==0){var te=0;for(G=0;G<this.length;G++){var K=this.words[G]&z,q=(this.words[G]|0)-K<<_;this.words[G]=q|te,te=K>>>26-_}te&&(this.words[G]=te,this.length++)}if(L!==0){for(G=this.length-1;G>=0;G--)this.words[G+L]=this.words[G];for(G=0;G<L;G++)this.words[G]=0;this.length+=L}return this._strip()},s.prototype.ishln=function(T){return r(this.negative===0),this.iushln(T)},s.prototype.iushrn=function(T,_,L){r(typeof T=="number"&&T>=0);var z;_?z=(_-_%26)/26:z=0;var G=T%26,te=Math.min((T-G)/26,this.length),K=67108863^67108863>>>G<<G,q=L;if(z-=te,z=Math.max(0,z),q){for(var M=0;M<te;M++)q.words[M]=this.words[M];q.length=te}if(te!==0)if(this.length>te)for(this.length-=te,M=0;M<this.length;M++)this.words[M]=this.words[M+te];else this.words[0]=0,this.length=1;var P=0;for(M=this.length-1;M>=0&&(P!==0||M>=z);M--){var Y=this.words[M]|0;this.words[M]=P<<26-G|Y>>>G,P=Y&K}return q&&P!==0&&(q.words[q.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(T,_,L){return r(this.negative===0),this.iushrn(T,_,L)},s.prototype.shln=function(T){return this.clone().ishln(T)},s.prototype.ushln=function(T){return this.clone().iushln(T)},s.prototype.shrn=function(T){return this.clone().ishrn(T)},s.prototype.ushrn=function(T){return this.clone().iushrn(T)},s.prototype.testn=function(T){r(typeof T=="number"&&T>=0);var _=T%26,L=(T-_)/26,z=1<<_;if(this.length<=L)return!1;var G=this.words[L];return!!(G&z)},s.prototype.imaskn=function(T){r(typeof T=="number"&&T>=0);var _=T%26,L=(T-_)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=L)return this;if(_!==0&&L++,this.length=Math.min(L,this.length),_!==0){var z=67108863^67108863>>>_<<_;this.words[this.length-1]&=z}return this._strip()},s.prototype.maskn=function(T){return this.clone().imaskn(T)},s.prototype.iaddn=function(T){return r(typeof T=="number"),r(T<67108864),T<0?this.isubn(-T):this.negative!==0?this.length===1&&(this.words[0]|0)<=T?(this.words[0]=T-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(T),this.negative=1,this):this._iaddn(T)},s.prototype._iaddn=function(T){this.words[0]+=T;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},s.prototype.isubn=function(T){if(r(typeof T=="number"),r(T<67108864),T<0)return this.iaddn(-T);if(this.negative!==0)return this.negative=0,this.iaddn(T),this.negative=1,this;if(this.words[0]-=T,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this._strip()},s.prototype.addn=function(T){return this.clone().iaddn(T)},s.prototype.subn=function(T){return this.clone().isubn(T)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(T,_,L){var z=T.length+L,G;this._expand(z);var te,K=0;for(G=0;G<T.length;G++){te=(this.words[G+L]|0)+K;var q=(T.words[G]|0)*_;te-=q&67108863,K=(te>>26)-(q/67108864|0),this.words[G+L]=te&67108863}for(;G<this.length-L;G++)te=(this.words[G+L]|0)+K,K=te>>26,this.words[G+L]=te&67108863;if(K===0)return this._strip();for(r(K===-1),K=0,G=0;G<this.length;G++)te=-(this.words[G]|0)+K,K=te>>26,this.words[G]=te&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(T,_){var L=this.length-T.length,z=this.clone(),G=T,te=G.words[G.length-1]|0,K=this._countBits(te);L=26-K,L!==0&&(G=G.ushln(L),z.iushln(L),te=G.words[G.length-1]|0);var q=z.length-G.length,M;if(_!=="mod"){M=new s(null),M.length=q+1,M.words=new Array(M.length);for(var P=0;P<M.length;P++)M.words[P]=0}var Y=z.clone()._ishlnsubmul(G,1,q);Y.negative===0&&(z=Y,M&&(M.words[q]=1));for(var X=q-1;X>=0;X--){var re=(z.words[G.length+X]|0)*67108864+(z.words[G.length+X-1]|0);for(re=Math.min(re/te|0,67108863),z._ishlnsubmul(G,re,X);z.negative!==0;)re--,z.negative=0,z._ishlnsubmul(G,1,X),z.isZero()||(z.negative^=1);M&&(M.words[X]=re)}return M&&M._strip(),z._strip(),_!=="div"&&L!==0&&z.iushrn(L),{div:M||null,mod:z}},s.prototype.divmod=function(T,_,L){if(r(!T.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var z,G,te;return this.negative!==0&&T.negative===0?(te=this.neg().divmod(T,_),_!=="mod"&&(z=te.div.neg()),_!=="div"&&(G=te.mod.neg(),L&&G.negative!==0&&G.iadd(T)),{div:z,mod:G}):this.negative===0&&T.negative!==0?(te=this.divmod(T.neg(),_),_!=="mod"&&(z=te.div.neg()),{div:z,mod:te.mod}):(this.negative&T.negative)!==0?(te=this.neg().divmod(T.neg(),_),_!=="div"&&(G=te.mod.neg(),L&&G.negative!==0&&G.isub(T)),{div:te.div,mod:G}):T.length>this.length||this.cmp(T)<0?{div:new s(0),mod:this}:T.length===1?_==="div"?{div:this.divn(T.words[0]),mod:null}:_==="mod"?{div:null,mod:new s(this.modrn(T.words[0]))}:{div:this.divn(T.words[0]),mod:new s(this.modrn(T.words[0]))}:this._wordDiv(T,_)},s.prototype.div=function(T){return this.divmod(T,"div",!1).div},s.prototype.mod=function(T){return this.divmod(T,"mod",!1).mod},s.prototype.umod=function(T){return this.divmod(T,"mod",!0).mod},s.prototype.divRound=function(T){var _=this.divmod(T);if(_.mod.isZero())return _.div;var L=_.div.negative!==0?_.mod.isub(T):_.mod,z=T.ushrn(1),G=T.andln(1),te=L.cmp(z);return te<0||G===1&&te===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},s.prototype.modrn=function(T){var _=T<0;_&&(T=-T),r(T<=67108863);for(var L=(1<<26)%T,z=0,G=this.length-1;G>=0;G--)z=(L*z+(this.words[G]|0))%T;return _?-z:z},s.prototype.modn=function(T){return this.modrn(T)},s.prototype.idivn=function(T){var _=T<0;_&&(T=-T),r(T<=67108863);for(var L=0,z=this.length-1;z>=0;z--){var G=(this.words[z]|0)+L*67108864;this.words[z]=G/T|0,L=G%T}return this._strip(),_?this.ineg():this},s.prototype.divn=function(T){return this.clone().idivn(T)},s.prototype.egcd=function(T){r(T.negative===0),r(!T.isZero());var _=this,L=T.clone();_.negative!==0?_=_.umod(T):_=_.clone();for(var z=new s(1),G=new s(0),te=new s(0),K=new s(1),q=0;_.isEven()&&L.isEven();)_.iushrn(1),L.iushrn(1),++q;for(var M=L.clone(),P=_.clone();!_.isZero();){for(var Y=0,X=1;(_.words[0]&X)===0&&Y<26;++Y,X<<=1);if(Y>0)for(_.iushrn(Y);Y-- >0;)(z.isOdd()||G.isOdd())&&(z.iadd(M),G.isub(P)),z.iushrn(1),G.iushrn(1);for(var re=0,ae=1;(L.words[0]&ae)===0&&re<26;++re,ae<<=1);if(re>0)for(L.iushrn(re);re-- >0;)(te.isOdd()||K.isOdd())&&(te.iadd(M),K.isub(P)),te.iushrn(1),K.iushrn(1);_.cmp(L)>=0?(_.isub(L),z.isub(te),G.isub(K)):(L.isub(_),te.isub(z),K.isub(G))}return{a:te,b:K,gcd:L.iushln(q)}},s.prototype._invmp=function(T){r(T.negative===0),r(!T.isZero());var _=this,L=T.clone();_.negative!==0?_=_.umod(T):_=_.clone();for(var z=new s(1),G=new s(0),te=L.clone();_.cmpn(1)>0&&L.cmpn(1)>0;){for(var K=0,q=1;(_.words[0]&q)===0&&K<26;++K,q<<=1);if(K>0)for(_.iushrn(K);K-- >0;)z.isOdd()&&z.iadd(te),z.iushrn(1);for(var M=0,P=1;(L.words[0]&P)===0&&M<26;++M,P<<=1);if(M>0)for(L.iushrn(M);M-- >0;)G.isOdd()&&G.iadd(te),G.iushrn(1);_.cmp(L)>=0?(_.isub(L),z.isub(G)):(L.isub(_),G.isub(z))}var Y;return _.cmpn(1)===0?Y=z:Y=G,Y.cmpn(0)<0&&Y.iadd(T),Y},s.prototype.gcd=function(T){if(this.isZero())return T.abs();if(T.isZero())return this.abs();var _=this.clone(),L=T.clone();_.negative=0,L.negative=0;for(var z=0;_.isEven()&&L.isEven();z++)_.iushrn(1),L.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;L.isEven();)L.iushrn(1);var G=_.cmp(L);if(G<0){var te=_;_=L,L=te}else if(G===0||L.cmpn(1)===0)break;_.isub(L)}while(!0);return L.iushln(z)},s.prototype.invm=function(T){return this.egcd(T).a.umod(T)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(T){return this.words[0]&T},s.prototype.bincn=function(T){r(typeof T=="number");var _=T%26,L=(T-_)/26,z=1<<_;if(this.length<=L)return this._expand(L+1),this.words[L]|=z,this;for(var G=z,te=L;G!==0&&te<this.length;te++){var K=this.words[te]|0;K+=G,G=K>>>26,K&=67108863,this.words[te]=K}return G!==0&&(this.words[te]=G,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(T){var _=T<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this._strip();var L;if(this.length>1)L=1;else{_&&(T=-T),r(T<=67108863,"Number is too big");var z=this.words[0]|0;L=z===T?0:z<T?-1:1}return this.negative!==0?-L|0:L},s.prototype.cmp=function(T){if(this.negative!==0&&T.negative===0)return-1;if(this.negative===0&&T.negative!==0)return 1;var _=this.ucmp(T);return this.negative!==0?-_|0:_},s.prototype.ucmp=function(T){if(this.length>T.length)return 1;if(this.length<T.length)return-1;for(var _=0,L=this.length-1;L>=0;L--){var z=this.words[L]|0,G=T.words[L]|0;if(z!==G){z<G?_=-1:z>G&&(_=1);break}}return _},s.prototype.gtn=function(T){return this.cmpn(T)===1},s.prototype.gt=function(T){return this.cmp(T)===1},s.prototype.gten=function(T){return this.cmpn(T)>=0},s.prototype.gte=function(T){return this.cmp(T)>=0},s.prototype.ltn=function(T){return this.cmpn(T)===-1},s.prototype.lt=function(T){return this.cmp(T)===-1},s.prototype.lten=function(T){return this.cmpn(T)<=0},s.prototype.lte=function(T){return this.cmp(T)<=0},s.prototype.eqn=function(T){return this.cmpn(T)===0},s.prototype.eq=function(T){return this.cmp(T)===0},s.red=function(T){return new W(T)},s.prototype.toRed=function(T){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),T.convertTo(this)._forceRed(T)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(T){return this.red=T,this},s.prototype.forceRed=function(T){return r(!this.red,"Already a number in reduction context"),this._forceRed(T)},s.prototype.redAdd=function(T){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,T)},s.prototype.redIAdd=function(T){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,T)},s.prototype.redSub=function(T){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,T)},s.prototype.redISub=function(T){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,T)},s.prototype.redShl=function(T){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,T)},s.prototype.redMul=function(T){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.mul(this,T)},s.prototype.redIMul=function(T){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.imul(this,T)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(T){return r(this.red&&!T.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,T)};var B={k256:null,p224:null,p192:null,p25519:null};function O(U,T){this.name=U,this.p=new s(T,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}O.prototype._tmp=function(){var T=new s(null);return T.words=new Array(Math.ceil(this.n/13)),T},O.prototype.ireduce=function(T){var _=T,L;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),L=_.bitLength();while(L>this.n);var z=L<this.n?-1:_.ucmp(this.p);return z===0?(_.words[0]=0,_.length=1):z>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},O.prototype.split=function(T,_){T.iushrn(this.n,0,_)},O.prototype.imulK=function(T){return T.imul(this.k)};function F(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,O),F.prototype.split=function(T,_){for(var L=4194303,z=Math.min(T.length,9),G=0;G<z;G++)_.words[G]=T.words[G];if(_.length=z,T.length<=9){T.words[0]=0,T.length=1;return}var te=T.words[9];for(_.words[_.length++]=te&L,G=10;G<T.length;G++){var K=T.words[G]|0;T.words[G-10]=(K&L)<<4|te>>>22,te=K}te>>>=22,T.words[G-10]=te,te===0&&T.length>10?T.length-=10:T.length-=9},F.prototype.imulK=function(T){T.words[T.length]=0,T.words[T.length+1]=0,T.length+=2;for(var _=0,L=0;L<T.length;L++){var z=T.words[L]|0;_+=z*977,T.words[L]=_&67108863,_=z*64+(_/67108864|0)}return T.words[T.length-1]===0&&(T.length--,T.words[T.length-1]===0&&T.length--),T};function H(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(H,O);function j(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(j,O);function $(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,O),$.prototype.imulK=function(T){for(var _=0,L=0;L<T.length;L++){var z=(T.words[L]|0)*19+_,G=z&67108863;z>>>=26,T.words[L]=G,_=z}return _!==0&&(T.words[T.length++]=_),T},s._prime=function(T){if(B[T])return B[T];var _;if(T==="k256")_=new F;else if(T==="p224")_=new H;else if(T==="p192")_=new j;else if(T==="p25519")_=new $;else throw new Error("Unknown prime "+T);return B[T]=_,_};function W(U){if(typeof U=="string"){var T=s._prime(U);this.m=T.p,this.prime=T}else r(U.gtn(1),"modulus must be greater than 1"),this.m=U,this.prime=null}W.prototype._verify1=function(T){r(T.negative===0,"red works only with positives"),r(T.red,"red works only with red numbers")},W.prototype._verify2=function(T,_){r((T.negative|_.negative)===0,"red works only with positives"),r(T.red&&T.red===_.red,"red works only with red numbers")},W.prototype.imod=function(T){return this.prime?this.prime.ireduce(T)._forceRed(this):(u(T,T.umod(this.m)._forceRed(this)),T)},W.prototype.neg=function(T){return T.isZero()?T.clone():this.m.sub(T)._forceRed(this)},W.prototype.add=function(T,_){this._verify2(T,_);var L=T.add(_);return L.cmp(this.m)>=0&&L.isub(this.m),L._forceRed(this)},W.prototype.iadd=function(T,_){this._verify2(T,_);var L=T.iadd(_);return L.cmp(this.m)>=0&&L.isub(this.m),L},W.prototype.sub=function(T,_){this._verify2(T,_);var L=T.sub(_);return L.cmpn(0)<0&&L.iadd(this.m),L._forceRed(this)},W.prototype.isub=function(T,_){this._verify2(T,_);var L=T.isub(_);return L.cmpn(0)<0&&L.iadd(this.m),L},W.prototype.shl=function(T,_){return this._verify1(T),this.imod(T.ushln(_))},W.prototype.imul=function(T,_){return this._verify2(T,_),this.imod(T.imul(_))},W.prototype.mul=function(T,_){return this._verify2(T,_),this.imod(T.mul(_))},W.prototype.isqr=function(T){return this.imul(T,T.clone())},W.prototype.sqr=function(T){return this.mul(T,T)},W.prototype.sqrt=function(T){if(T.isZero())return T.clone();var _=this.m.andln(3);if(r(_%2===1),_===3){var L=this.m.add(new s(1)).iushrn(2);return this.pow(T,L)}for(var z=this.m.subn(1),G=0;!z.isZero()&&z.andln(1)===0;)G++,z.iushrn(1);r(!z.isZero());var te=new s(1).toRed(this),K=te.redNeg(),q=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new s(2*M*M).toRed(this);this.pow(M,q).cmp(K)!==0;)M.redIAdd(K);for(var P=this.pow(M,z),Y=this.pow(T,z.addn(1).iushrn(1)),X=this.pow(T,z),re=G;X.cmp(te)!==0;){for(var ae=X,Te=0;ae.cmp(te)!==0;Te++)ae=ae.redSqr();r(Te<re);var ue=this.pow(P,new s(1).iushln(re-Te-1));Y=Y.redMul(ue),P=ue.redSqr(),X=X.redMul(P),re=Te}return Y},W.prototype.invm=function(T){var _=T._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},W.prototype.pow=function(T,_){if(_.isZero())return new s(1).toRed(this);if(_.cmpn(1)===0)return T.clone();var L=4,z=new Array(1<<L);z[0]=new s(1).toRed(this),z[1]=T;for(var G=2;G<z.length;G++)z[G]=this.mul(z[G-1],T);var te=z[0],K=0,q=0,M=_.bitLength()%26;for(M===0&&(M=26),G=_.length-1;G>=0;G--){for(var P=_.words[G],Y=M-1;Y>=0;Y--){var X=P>>Y&1;if(te!==z[0]&&(te=this.sqr(te)),X===0&&K===0){q=0;continue}K<<=1,K|=X,q++,!(q!==L&&(G!==0||Y!==0))&&(te=this.mul(te,z[K]),q=0,K=0)}M=26}return te},W.prototype.convertTo=function(T){var _=T.umod(this.m);return _===T?_.clone():_},W.prototype.convertFrom=function(T){var _=T.clone();return _.red=null,_},s.mont=function(T){return new V(T)};function V(U){W.call(this,U),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(V,W),V.prototype.convertTo=function(T){return this.imod(T.ushln(this.shift))},V.prototype.convertFrom=function(T){var _=this.imod(T.mul(this.rinv));return _.red=null,_},V.prototype.imul=function(T,_){if(T.isZero()||_.isZero())return T.words[0]=0,T.length=1,T;var L=T.imul(_),z=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=L.isub(z).iushrn(this.shift),te=G;return G.cmp(this.m)>=0?te=G.isub(this.m):G.cmpn(0)<0&&(te=G.iadd(this.m)),te._forceRed(this)},V.prototype.mul=function(T,_){if(T.isZero()||_.isZero())return new s(0)._forceRed(this);var L=T.mul(_),z=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=L.isub(z).iushrn(this.shift),te=G;return G.cmp(this.m)>=0?te=G.isub(this.m):G.cmpn(0)<0&&(te=G.iadd(this.m)),te._forceRed(this)},V.prototype.invm=function(T){var _=this.imod(T._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(t,But)})(UT)),UT.exports}var Uut=Ame();const RZ=hs(Uut);var QA={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var OZ;function Tme(){return OZ||(OZ=1,(function(t,e){var n=o7(),r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(QA,QA.exports)),QA.exports}var T4,MZ;function Fut(){if(MZ)return T4;MZ=1;var t=Tme().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),u=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function m(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=t.from(v)),!t.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var b=0,w=0,k=0,C=v.length;k!==C&&v[k]===0;)k++,b++;for(var R=(C-k)*h+1>>>0,B=new Uint8Array(R);k!==C;){for(var O=v[k],F=0,H=R-1;(O!==0||F<w)&&H!==-1;H--,F++)O+=256*B[H]>>>0,B[H]=O%l>>>0,O=O/l>>>0;if(O!==0)throw new Error("Non-zero carry");w=F,k++}for(var j=R-w;j!==R&&B[j]===0;)j++;for(var $=c.repeat(b);j<R;++j)$+=n.charAt(B[j]);return $}function g(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return t.alloc(0);for(var b=0,w=0,k=0;v[b]===c;)w++,b++;for(var C=(v.length-b)*u+1>>>0,R=new Uint8Array(C);b<v.length;){var B=v.charCodeAt(b);if(B>255)return;var O=r[B];if(O===255)return;for(var F=0,H=C-1;(O!==0||F<k)&&H!==-1;H--,F++)O+=l*R[H]>>>0,R[H]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");k=F,b++}for(var j=C-k;j!==C&&R[j]===0;)j++;var $=t.allocUnsafe(w+(C-j));$.fill(0,0,w);for(var W=w;j!==C;)$[W++]=R[j++];return $}function x(v){var b=g(v);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:x}}return T4=e,T4}var k4,LZ;function $ut(){if(LZ)return k4;LZ=1;var t=Fut(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return k4=t(e),k4}var zut=$ut();const as=hs(zut),DZ=rme;var Xn={},C4,jZ;function Hut(){if(jZ)return C4;jZ=1;var t=Tme().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),u=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function m(v){if((Array.isArray(v)||v instanceof Uint8Array)&&(v=t.from(v)),!t.isBuffer(v))throw new TypeError("Expected Buffer");if(v.length===0)return"";for(var b=0,w=0,k=0,C=v.length;k!==C&&v[k]===0;)k++,b++;for(var R=(C-k)*h+1>>>0,B=new Uint8Array(R);k!==C;){for(var O=v[k],F=0,H=R-1;(O!==0||F<w)&&H!==-1;H--,F++)O+=256*B[H]>>>0,B[H]=O%l>>>0,O=O/l>>>0;if(O!==0)throw new Error("Non-zero carry");w=F,k++}for(var j=R-w;j!==R&&B[j]===0;)j++;for(var $=c.repeat(b);j<R;++j)$+=n.charAt(B[j]);return $}function g(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return t.alloc(0);for(var b=0,w=0,k=0;v[b]===c;)w++,b++;for(var C=(v.length-b)*u+1>>>0,R=new Uint8Array(C);b<v.length;){var B=v.charCodeAt(b);if(B>255)return;var O=r[B];if(O===255)return;for(var F=0,H=C-1;(O!==0||F<k)&&H!==-1;H--,F++)O+=l*R[H]>>>0,R[H]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");k=F,b++}for(var j=C-k;j!==C&&R[j]===0;)j++;var $=t.allocUnsafe(w+(C-j));$.fill(0,0,w);for(var W=w;j!==C;)$[W++]=R[j++];return $}function x(v){var b=g(v);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:x}}return C4=e,C4}var N4,BZ;function Vut(){if(BZ)return N4;BZ=1;var t=Hut(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return N4=t(e),N4}function Gu(t,e,n){return e<=t&&t<=n}function nP(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function qut(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function Gut(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var $2=-1;function a7(t){this.tokens=[].slice.call(t)}a7.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():$2},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Mx=-1;function P4(t,e){if(t)throw TypeError("Decoder error");return e||65533}var z2="utf-8";function H2(t,e){if(!(this instanceof H2))return new H2(t,e);if(t=t!==void 0?String(t).toLowerCase():z2,t!==z2)throw new Error("Encoding not supported. Only utf-8 is supported");e=nP(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}H2.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=nP(n),this._streaming||(this._decoder=new Kut({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new a7(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Mx);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Mx)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Gut(s)}};function V2(t,e){if(!(this instanceof V2))return new V2(t,e);if(t=t!==void 0?String(t).toLowerCase():z2,t!==z2)throw new Error("Encoding not supported. Only utf-8 is supported");e=nP(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}V2.prototype={encode:function(e,n){e=e?String(e):"",n=nP(n),this._streaming||(this._encoder=new Wut(this._options)),this._streaming=!!n.stream;for(var r=[],i=new a7(qut(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Mx);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Mx;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function Kut(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===$2&&i!==0)return i=0,P4(e);if(l===$2)return Mx;if(i===0){if(Gu(l,0,127))return l;if(Gu(l,194,223))i=1,n=l-192;else if(Gu(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,n=l-224;else if(Gu(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,n=l-240;else return P4(e);return n=n<<6*i,null}if(!Gu(l,s,o))return n=i=r=0,s=128,o=191,a.prepend(l),P4(e);if(s=128,o=191,r+=1,n+=l-128<<6*(i-r),r!==i)return null;var c=n;return n=i=r=0,c}}function Wut(t){t.fatal,this.handler=function(e,n){if(n===$2)return Mx;if(Gu(n,0,127))return n;var r,i;Gu(n,128,2047)?(r=1,i=192):Gu(n,2048,65535)?(r=2,i=224):Gu(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const Yut=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:H2,TextEncoder:V2},Symbol.toStringTag,{value:"Module"})),Jut=Pee(Yut);var UZ;function Xut(){if(UZ)return Xn;UZ=1;var t=Xn&&Xn.__createBinding||(Object.create?(function(j,$,W,V){V===void 0&&(V=W),Object.defineProperty(j,V,{enumerable:!0,get:function(){return $[W]}})}):(function(j,$,W,V){V===void 0&&(V=W),j[V]=$[W]})),e=Xn&&Xn.__setModuleDefault||(Object.create?(function(j,$){Object.defineProperty(j,"default",{enumerable:!0,value:$})}):function(j,$){j.default=$}),n=Xn&&Xn.__decorate||function(j,$,W,V){var U=arguments.length,T=U<3?$:V===null?V=Object.getOwnPropertyDescriptor($,W):V,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(j,$,W,V);else for(var L=j.length-1;L>=0;L--)(_=j[L])&&(T=(U<3?_(T):U>3?_($,W,T):_($,W))||T);return U>3&&T&&Object.defineProperty($,W,T),T},r=Xn&&Xn.__importStar||function(j){if(j&&j.__esModule)return j;var $={};if(j!=null)for(var W in j)W!=="default"&&Object.hasOwnProperty.call(j,W)&&t($,j,W);return e($,j),$},i=Xn&&Xn.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.deserializeUnchecked=Xn.deserialize=Xn.serialize=Xn.BinaryReader=Xn.BinaryWriter=Xn.BorshError=Xn.baseDecode=Xn.baseEncode=void 0;const s=i(Ame()),o=i(Vut()),a=r(Jut),l=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,c=new l("utf-8",{fatal:!0});function u(j){return typeof j=="string"&&(j=on.from(j,"utf8")),o.default.encode(on.from(j))}Xn.baseEncode=u;function h(j){return on.from(o.default.decode(j))}Xn.baseDecode=h;const m=1024;class g extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Xn.BorshError=g;class x{constructor(){this.buf=on.alloc(m),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=on.concat([this.buf,on.alloc(m)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(on.from(new s.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(on.from(new s.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(on.from(new s.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(on.from(new s.default($).toArray("le",64)))}writeBuffer($){this.buf=on.concat([on.from(this.buf.subarray(0,this.length)),$,on.alloc(m)]),this.length+=$.length}writeString($){this.maybeResize();const W=on.from($,"utf8");this.writeU32(W.length),this.writeBuffer(W)}writeFixedArray($){this.writeBuffer(on.from($))}writeArray($,W){this.maybeResize(),this.writeU32($.length);for(const V of $)this.maybeResize(),W(V)}toArray(){return this.buf.subarray(0,this.length)}}Xn.BinaryWriter=x;function v(j,$,W){const V=W.value;W.value=function(...U){try{return V.apply(this,U)}catch(T){if(T instanceof RangeError){const _=T.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(_)>=0)throw new g("Reached the end of buffer when deserializing")}throw T}}}class b{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new s.default($,"le")}readU128(){const $=this.readBuffer(16);return new s.default($,"le")}readU256(){const $=this.readBuffer(32);return new s.default($,"le")}readU512(){const $=this.readBuffer(64);return new s.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new g(`Expected buffer length ${$} isn't within bounds`);const W=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,W}readString(){const $=this.readU32(),W=this.readBuffer($);try{return c.decode(W)}catch(V){throw new g(`Error decoding UTF-8 string: ${V}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const W=this.readU32(),V=Array();for(let U=0;U<W;++U)V.push($());return V}}n([v],b.prototype,"readU8",null),n([v],b.prototype,"readU16",null),n([v],b.prototype,"readU32",null),n([v],b.prototype,"readU64",null),n([v],b.prototype,"readU128",null),n([v],b.prototype,"readU256",null),n([v],b.prototype,"readU512",null),n([v],b.prototype,"readString",null),n([v],b.prototype,"readFixedArray",null),n([v],b.prototype,"readArray",null),Xn.BinaryReader=b;function w(j){return j.charAt(0).toUpperCase()+j.slice(1)}function k(j,$,W,V,U){try{if(typeof V=="string")U[`write${w(V)}`](W);else if(V instanceof Array)if(typeof V[0]=="number"){if(W.length!==V[0])throw new g(`Expecting byte array of length ${V[0]}, but got ${W.length} bytes`);U.writeFixedArray(W)}else if(V.length===2&&typeof V[1]=="number"){if(W.length!==V[1])throw new g(`Expecting byte array of length ${V[1]}, but got ${W.length} bytes`);for(let T=0;T<V[1];T++)k(j,null,W[T],V[0],U)}else U.writeArray(W,T=>{k(j,$,T,V[0],U)});else if(V.kind!==void 0)switch(V.kind){case"option":{W==null?U.writeU8(0):(U.writeU8(1),k(j,$,W,V.type,U));break}case"map":{U.writeU32(W.size),W.forEach((T,_)=>{k(j,$,_,V.key,U),k(j,$,T,V.value,U)});break}default:throw new g(`FieldType ${V} unrecognized`)}else C(j,W,U)}catch(T){throw T instanceof g&&T.addToFieldPath($),T}}function C(j,$,W){if(typeof $.borshSerialize=="function"){$.borshSerialize(W);return}const V=j.get($.constructor);if(!V)throw new g(`Class ${$.constructor.name} is missing in schema`);if(V.kind==="struct")V.fields.map(([U,T])=>{k(j,U,$[U],T,W)});else if(V.kind==="enum"){const U=$[V.field];for(let T=0;T<V.values.length;++T){const[_,L]=V.values[T];if(_===U){W.writeU8(T),k(j,_,$[_],L,W);break}}}else throw new g(`Unexpected schema kind: ${V.kind} for ${$.constructor.name}`)}function R(j,$,W=x){const V=new W;return C(j,$,V),V.toArray()}Xn.serialize=R;function B(j,$,W,V){try{if(typeof W=="string")return V[`read${w(W)}`]();if(W instanceof Array){if(typeof W[0]=="number")return V.readFixedArray(W[0]);if(typeof W[1]=="number"){const U=[];for(let T=0;T<W[1];T++)U.push(B(j,null,W[0],V));return U}else return V.readArray(()=>B(j,$,W[0],V))}if(W.kind==="option")return V.readU8()?B(j,$,W.type,V):void 0;if(W.kind==="map"){let U=new Map;const T=V.readU32();for(let _=0;_<T;_++){const L=B(j,$,W.key,V),z=B(j,$,W.value,V);U.set(L,z)}return U}return O(j,W,V)}catch(U){throw U instanceof g&&U.addToFieldPath($),U}}function O(j,$,W){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(W);const V=j.get($);if(!V)throw new g(`Class ${$.name} is missing in schema`);if(V.kind==="struct"){const U={};for(const[T,_]of j.get($).fields)U[T]=B(j,T,_,W);return new $(U)}if(V.kind==="enum"){const U=W.readU8();if(U>=V.values.length)throw new g(`Enum index: ${U} is out of range`);const[T,_]=V.values[U],L=B(j,T,_,W);return new $({[T]:L})}throw new g(`Unexpected schema kind: ${V.kind} for ${$.constructor.name}`)}function F(j,$,W,V=b){const U=new V(W),T=O(j,$,U);if(U.offset<W.length)throw new g(`Unexpected ${W.length-U.offset} bytes after deserialized data`);return T}Xn.deserialize=F;function H(j,$,W,V=b){const U=new V(W);return O(j,$,U)}return Xn.deserializeUnchecked=H,Xn}var _4=Xut(),$e={},FZ;function Qut(){if(FZ)return $e;FZ=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.s16=$e.s8=$e.nu64be=$e.u48be=$e.u40be=$e.u32be=$e.u24be=$e.u16be=$e.nu64=$e.u48=$e.u40=$e.u32=$e.u24=$e.u16=$e.u8=$e.offset=$e.greedy=$e.Constant=$e.UTF8=$e.CString=$e.Blob=$e.Boolean=$e.BitField=$e.BitStructure=$e.VariantLayout=$e.Union=$e.UnionLayoutDiscriminator=$e.UnionDiscriminator=$e.Structure=$e.Sequence=$e.DoubleBE=$e.Double=$e.FloatBE=$e.Float=$e.NearInt64BE=$e.NearInt64=$e.NearUInt64BE=$e.NearUInt64=$e.IntBE=$e.Int=$e.UIntBE=$e.UInt=$e.OffsetLayout=$e.GreedyCount=$e.ExternalLayout=$e.bindConstructorLayout=$e.nameWithProperty=$e.Layout=$e.uint8ArrayToBuffer=$e.checkUint8Array=void 0,$e.constant=$e.utf8=$e.cstr=$e.blob=$e.unionLayoutDiscriminator=$e.union=$e.seq=$e.bits=$e.struct=$e.f64be=$e.f64=$e.f32be=$e.f32=$e.ns64be=$e.s48be=$e.s40be=$e.s32be=$e.s24be=$e.s16be=$e.ns64=$e.s48=$e.s40=$e.s32=$e.s24=void 0;const t=o7();function e(M){if(!(M instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}$e.checkUint8Array=e;function n(M){return e(M),t.Buffer.from(M.buffer,M.byteOffset,M.length)}$e.uint8ArrayToBuffer=n;let r=class{constructor(P,Y){if(!Number.isInteger(P))throw new TypeError("span must be an integer");this.span=P,this.property=Y}makeDestinationObject(){return{}}getSpan(P,Y){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(P){const Y=Object.create(this.constructor.prototype);return Object.assign(Y,this),Y.property=P,Y}fromArray(P){}};$e.Layout=r;function i(M,P){return P.property?M+"["+P.property+"]":M}$e.nameWithProperty=i;function s(M,P){if(typeof M!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(M,"layout_"))throw new Error("Class is already bound to a layout");if(!(P&&P instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(P,"boundConstructor_"))throw new Error("layout is already bound to a constructor");M.layout_=P,P.boundConstructor_=M,P.makeDestinationObject=(()=>new M),Object.defineProperty(M.prototype,"encode",{value(Y,X){return P.encode(this,Y,X)},writable:!0}),Object.defineProperty(M,"decode",{value(Y,X){return P.decode(Y,X)},writable:!0})}$e.bindConstructorLayout=s;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}$e.ExternalLayout=o;class a extends o{constructor(P=1,Y){if(!Number.isInteger(P)||0>=P)throw new TypeError("elementSpan must be a (positive) integer");super(-1,Y),this.elementSpan=P}isCount(){return!0}decode(P,Y=0){e(P);const X=P.length-Y;return Math.floor(X/this.elementSpan)}encode(P,Y,X){return 0}}$e.GreedyCount=a;class l extends o{constructor(P,Y=0,X){if(!(P instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(Y))throw new TypeError("offset must be integer or undefined");super(P.span,X||P.property),this.layout=P,this.offset=Y}isCount(){return this.layout instanceof c||this.layout instanceof u}decode(P,Y=0){return this.layout.decode(P,Y+this.offset)}encode(P,Y,X=0){return this.layout.encode(P,Y,X+this.offset)}}$e.OffsetLayout=l;class c extends r{constructor(P,Y){if(super(P,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,Y=0){return n(P).readUIntLE(Y,this.span)}encode(P,Y,X=0){return n(Y).writeUIntLE(P,X,this.span),this.span}}$e.UInt=c;class u extends r{constructor(P,Y){if(super(P,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,Y=0){return n(P).readUIntBE(Y,this.span)}encode(P,Y,X=0){return n(Y).writeUIntBE(P,X,this.span),this.span}}$e.UIntBE=u;class h extends r{constructor(P,Y){if(super(P,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,Y=0){return n(P).readIntLE(Y,this.span)}encode(P,Y,X=0){return n(Y).writeIntLE(P,X,this.span),this.span}}$e.Int=h;class m extends r{constructor(P,Y){if(super(P,Y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,Y=0){return n(P).readIntBE(Y,this.span)}encode(P,Y,X=0){return n(Y).writeIntBE(P,X,this.span),this.span}}$e.IntBE=m;const g=Math.pow(2,32);function x(M){const P=Math.floor(M/g),Y=M-P*g;return{hi32:P,lo32:Y}}function v(M,P){return M*g+P}class b extends r{constructor(P){super(8,P)}decode(P,Y=0){const X=n(P),re=X.readUInt32LE(Y),ae=X.readUInt32LE(Y+4);return v(ae,re)}encode(P,Y,X=0){const re=x(P),ae=n(Y);return ae.writeUInt32LE(re.lo32,X),ae.writeUInt32LE(re.hi32,X+4),8}}$e.NearUInt64=b;class w extends r{constructor(P){super(8,P)}decode(P,Y=0){const X=n(P),re=X.readUInt32BE(Y),ae=X.readUInt32BE(Y+4);return v(re,ae)}encode(P,Y,X=0){const re=x(P),ae=n(Y);return ae.writeUInt32BE(re.hi32,X),ae.writeUInt32BE(re.lo32,X+4),8}}$e.NearUInt64BE=w;class k extends r{constructor(P){super(8,P)}decode(P,Y=0){const X=n(P),re=X.readUInt32LE(Y),ae=X.readInt32LE(Y+4);return v(ae,re)}encode(P,Y,X=0){const re=x(P),ae=n(Y);return ae.writeUInt32LE(re.lo32,X),ae.writeInt32LE(re.hi32,X+4),8}}$e.NearInt64=k;class C extends r{constructor(P){super(8,P)}decode(P,Y=0){const X=n(P),re=X.readInt32BE(Y),ae=X.readUInt32BE(Y+4);return v(re,ae)}encode(P,Y,X=0){const re=x(P),ae=n(Y);return ae.writeInt32BE(re.hi32,X),ae.writeUInt32BE(re.lo32,X+4),8}}$e.NearInt64BE=C;class R extends r{constructor(P){super(4,P)}decode(P,Y=0){return n(P).readFloatLE(Y)}encode(P,Y,X=0){return n(Y).writeFloatLE(P,X),4}}$e.Float=R;class B extends r{constructor(P){super(4,P)}decode(P,Y=0){return n(P).readFloatBE(Y)}encode(P,Y,X=0){return n(Y).writeFloatBE(P,X),4}}$e.FloatBE=B;class O extends r{constructor(P){super(8,P)}decode(P,Y=0){return n(P).readDoubleLE(Y)}encode(P,Y,X=0){return n(Y).writeDoubleLE(P,X),8}}$e.Double=O;class F extends r{constructor(P){super(8,P)}decode(P,Y=0){return n(P).readDoubleBE(Y)}encode(P,Y,X=0){return n(Y).writeDoubleBE(P,X),8}}$e.DoubleBE=F;class H extends r{constructor(P,Y,X){if(!(P instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(Y instanceof o&&Y.isCount()||Number.isInteger(Y)&&0<=Y))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let re=-1;!(Y instanceof o)&&0<P.span&&(re=Y*P.span),super(re,X),this.elementLayout=P,this.count=Y}getSpan(P,Y=0){if(0<=this.span)return this.span;let X=0,re=this.count;if(re instanceof o&&(re=re.decode(P,Y)),0<this.elementLayout.span)X=re*this.elementLayout.span;else{let ae=0;for(;ae<re;)X+=this.elementLayout.getSpan(P,Y+X),++ae}return X}decode(P,Y=0){const X=[];let re=0,ae=this.count;for(ae instanceof o&&(ae=ae.decode(P,Y));re<ae;)X.push(this.elementLayout.decode(P,Y)),Y+=this.elementLayout.getSpan(P,Y),re+=1;return X}encode(P,Y,X=0){const re=this.elementLayout,ae=P.reduce((Te,ue)=>Te+re.encode(ue,Y,X+Te),0);return this.count instanceof o&&this.count.encode(P.length,Y,X),ae}}$e.Sequence=H;class j extends r{constructor(P,Y,X){if(!(Array.isArray(P)&&P.reduce((ae,Te)=>ae&&Te instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof Y=="boolean"&&X===void 0&&(X=Y,Y=void 0);for(const ae of P)if(0>ae.span&&ae.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let re=-1;try{re=P.reduce((ae,Te)=>ae+Te.getSpan(),0)}catch{}super(re,Y),this.fields=P,this.decodePrefixes=!!X}getSpan(P,Y=0){if(0<=this.span)return this.span;let X=0;try{X=this.fields.reduce((re,ae)=>{const Te=ae.getSpan(P,Y);return Y+=Te,re+Te},0)}catch{throw new RangeError("indeterminate span")}return X}decode(P,Y=0){e(P);const X=this.makeDestinationObject();for(const re of this.fields)if(re.property!==void 0&&(X[re.property]=re.decode(P,Y)),Y+=re.getSpan(P,Y),this.decodePrefixes&&P.length===Y)break;return X}encode(P,Y,X=0){const re=X;let ae=0,Te=0;for(const ue of this.fields){let pe=ue.span;if(Te=0<pe?pe:0,ue.property!==void 0){const be=P[ue.property];be!==void 0&&(Te=ue.encode(be,Y,X),0>pe&&(pe=ue.getSpan(Y,X)))}ae=X,X+=pe}return ae+Te-re}fromArray(P){const Y=this.makeDestinationObject();for(const X of this.fields)X.property!==void 0&&0<P.length&&(Y[X.property]=P.shift());return Y}layoutFor(P){if(typeof P!="string")throw new TypeError("property must be string");for(const Y of this.fields)if(Y.property===P)return Y}offsetOf(P){if(typeof P!="string")throw new TypeError("property must be string");let Y=0;for(const X of this.fields){if(X.property===P)return Y;0>X.span?Y=-1:0<=Y&&(Y+=X.span)}}}$e.Structure=j;class ${constructor(P){this.property=P}decode(P,Y){throw new Error("UnionDiscriminator is abstract")}encode(P,Y,X){throw new Error("UnionDiscriminator is abstract")}}$e.UnionDiscriminator=$;class W extends ${constructor(P,Y){if(!(P instanceof o&&P.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(Y||P.property||"variant"),this.layout=P}decode(P,Y){return this.layout.decode(P,Y)}encode(P,Y,X){return this.layout.encode(P,Y,X)}}$e.UnionLayoutDiscriminator=W;class V extends r{constructor(P,Y,X){let re;if(P instanceof c||P instanceof u)re=new W(new l(P));else if(P instanceof o&&P.isCount())re=new W(P);else if(P instanceof $)re=P;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(Y===void 0&&(Y=null),!(Y===null||Y instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(Y!==null){if(0>Y.span)throw new Error("defaultLayout must have constant span");Y.property===void 0&&(Y=Y.replicate("content"))}let ae=-1;Y&&(ae=Y.span,0<=ae&&(P instanceof c||P instanceof u)&&(ae+=re.layout.span)),super(ae,X),this.discriminator=re,this.usesPrefixDiscriminator=P instanceof c||P instanceof u,this.defaultLayout=Y,this.registry={};let Te=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ue){return Te(ue)},this.configGetSourceVariant=function(ue){Te=ue.bind(this)}}getSpan(P,Y=0){if(0<=this.span)return this.span;const X=this.getVariant(P,Y);if(!X)throw new Error("unable to determine span for unrecognized variant");return X.getSpan(P,Y)}defaultGetSourceVariant(P){if(Object.prototype.hasOwnProperty.call(P,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(P,this.defaultLayout.property))return;const Y=this.registry[P[this.discriminator.property]];if(Y&&(!Y.layout||Y.property&&Object.prototype.hasOwnProperty.call(P,Y.property)))return Y}else for(const Y in this.registry){const X=this.registry[Y];if(X.property&&Object.prototype.hasOwnProperty.call(P,X.property))return X}throw new Error("unable to infer src variant")}decode(P,Y=0){let X;const re=this.discriminator,ae=re.decode(P,Y),Te=this.registry[ae];if(Te===void 0){const ue=this.defaultLayout;let pe=0;this.usesPrefixDiscriminator&&(pe=re.layout.span),X=this.makeDestinationObject(),X[re.property]=ae,X[ue.property]=ue.decode(P,Y+pe)}else X=Te.decode(P,Y);return X}encode(P,Y,X=0){const re=this.getSourceVariant(P);if(re===void 0){const ae=this.discriminator,Te=this.defaultLayout;let ue=0;return this.usesPrefixDiscriminator&&(ue=ae.layout.span),ae.encode(P[ae.property],Y,X),ue+Te.encode(P[Te.property],Y,X+ue)}return re.encode(P,Y,X)}addVariant(P,Y,X){const re=new U(this,P,Y,X);return this.registry[P]=re,re}getVariant(P,Y=0){let X;return P instanceof Uint8Array?X=this.discriminator.decode(P,Y):X=P,this.registry[X]}}$e.Union=V;class U extends r{constructor(P,Y,X,re){if(!(P instanceof V))throw new TypeError("union must be a Union");if(!Number.isInteger(Y)||0>Y)throw new TypeError("variant must be a (non-negative) integer");if(typeof X=="string"&&re===void 0&&(re=X,X=null),X){if(!(X instanceof r))throw new TypeError("layout must be a Layout");if(P.defaultLayout!==null&&0<=X.span&&X.span>P.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof re!="string")throw new TypeError("variant must have a String property")}let ae=P.span;0>P.span&&(ae=X?X.span:0,0<=ae&&P.usesPrefixDiscriminator&&(ae+=P.discriminator.layout.span)),super(ae,re),this.union=P,this.variant=Y,this.layout=X||null}getSpan(P,Y=0){if(0<=this.span)return this.span;let X=0;this.union.usesPrefixDiscriminator&&(X=this.union.discriminator.layout.span);let re=0;return this.layout&&(re=this.layout.getSpan(P,Y+X)),X+re}decode(P,Y=0){const X=this.makeDestinationObject();if(this!==this.union.getVariant(P,Y))throw new Error("variant mismatch");let re=0;return this.union.usesPrefixDiscriminator&&(re=this.union.discriminator.layout.span),this.layout?X[this.property]=this.layout.decode(P,Y+re):this.property?X[this.property]=!0:this.union.usesPrefixDiscriminator&&(X[this.union.discriminator.property]=this.variant),X}encode(P,Y,X=0){let re=0;if(this.union.usesPrefixDiscriminator&&(re=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(P,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,Y,X);let ae=re;if(this.layout&&(this.layout.encode(P[this.property],Y,X+re),ae+=this.layout.getSpan(Y,X+re),0<=this.union.span&&ae>this.union.span))throw new Error("encoded variant overruns containing union");return ae}fromArray(P){if(this.layout)return this.layout.fromArray(P)}}$e.VariantLayout=U;function T(M){return 0>M&&(M+=4294967296),M}class _ extends r{constructor(P,Y,X){if(!(P instanceof c||P instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof Y=="string"&&X===void 0&&(X=Y,Y=!1),4<P.span)throw new RangeError("word cannot exceed 32 bits");super(P.span,X),this.word=P,this.msb=!!Y,this.fields=[];let re=0;this._packedSetValue=function(ae){return re=T(ae),this},this._packedGetValue=function(){return re}}decode(P,Y=0){const X=this.makeDestinationObject(),re=this.word.decode(P,Y);this._packedSetValue(re);for(const ae of this.fields)ae.property!==void 0&&(X[ae.property]=ae.decode(P));return X}encode(P,Y,X=0){const re=this.word.decode(Y,X);this._packedSetValue(re);for(const ae of this.fields)if(ae.property!==void 0){const Te=P[ae.property];Te!==void 0&&ae.encode(Te)}return this.word.encode(this._packedGetValue(),Y,X)}addField(P,Y){const X=new L(this,P,Y);return this.fields.push(X),X}addBoolean(P){const Y=new z(this,P);return this.fields.push(Y),Y}fieldFor(P){if(typeof P!="string")throw new TypeError("property must be string");for(const Y of this.fields)if(Y.property===P)return Y}}$e.BitStructure=_;class L{constructor(P,Y,X){if(!(P instanceof _))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(Y)||0>=Y)throw new TypeError("bits must be positive integer");const re=8*P.span,ae=P.fields.reduce((Te,ue)=>Te+ue.bits,0);if(Y+ae>re)throw new Error("bits too long for span remainder ("+(re-ae)+" of "+re+" remain)");this.container=P,this.bits=Y,this.valueMask=(1<<Y)-1,Y===32&&(this.valueMask=4294967295),this.start=ae,this.container.msb&&(this.start=re-ae-Y),this.wordMask=T(this.valueMask<<this.start),this.property=X}decode(P,Y){const X=this.container._packedGetValue();return T(X&this.wordMask)>>>this.start}encode(P){if(typeof P!="number"||!Number.isInteger(P)||P!==T(P&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const Y=this.container._packedGetValue(),X=T(P<<this.start);this.container._packedSetValue(T(Y&~this.wordMask)|X)}}$e.BitField=L;class z extends L{constructor(P,Y){super(P,1,Y)}decode(P,Y){return!!super.decode(P,Y)}encode(P){typeof P=="boolean"&&(P=+P),super.encode(P)}}$e.Boolean=z;class G extends r{constructor(P,Y){if(!(P instanceof o&&P.isCount()||Number.isInteger(P)&&0<=P))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let X=-1;P instanceof o||(X=P),super(X,Y),this.length=P}getSpan(P,Y){let X=this.span;return 0>X&&(X=this.length.decode(P,Y)),X}decode(P,Y=0){let X=this.span;return 0>X&&(X=this.length.decode(P,Y)),n(P).slice(Y,Y+X)}encode(P,Y,X){let re=this.length;if(this.length instanceof o&&(re=P.length),!(P instanceof Uint8Array&&re===P.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+re+") Uint8Array as src");if(X+re>Y.length)throw new RangeError("encoding overruns Uint8Array");const ae=n(P);return n(Y).write(ae.toString("hex"),X,re,"hex"),this.length instanceof o&&this.length.encode(re,Y,X),re}}$e.Blob=G;class te extends r{constructor(P){super(-1,P)}getSpan(P,Y=0){e(P);let X=Y;for(;X<P.length&&P[X]!==0;)X+=1;return 1+X-Y}decode(P,Y=0){const X=this.getSpan(P,Y);return n(P).slice(Y,Y+X-1).toString("utf-8")}encode(P,Y,X=0){typeof P!="string"&&(P=String(P));const re=t.Buffer.from(P,"utf8"),ae=re.length;if(X+ae>Y.length)throw new RangeError("encoding overruns Buffer");const Te=n(Y);return re.copy(Te,X),Te[X+ae]=0,ae+1}}$e.CString=te;class K extends r{constructor(P,Y){if(typeof P=="string"&&Y===void 0&&(Y=P,P=void 0),P===void 0)P=-1;else if(!Number.isInteger(P))throw new TypeError("maxSpan must be an integer");super(-1,Y),this.maxSpan=P}getSpan(P,Y=0){return e(P),P.length-Y}decode(P,Y=0){const X=this.getSpan(P,Y);if(0<=this.maxSpan&&this.maxSpan<X)throw new RangeError("text length exceeds maxSpan");return n(P).slice(Y,Y+X).toString("utf-8")}encode(P,Y,X=0){typeof P!="string"&&(P=String(P));const re=t.Buffer.from(P,"utf8"),ae=re.length;if(0<=this.maxSpan&&this.maxSpan<ae)throw new RangeError("text length exceeds maxSpan");if(X+ae>Y.length)throw new RangeError("encoding overruns Buffer");return re.copy(n(Y),X),ae}}$e.UTF8=K;class q extends r{constructor(P,Y){super(0,Y),this.value=P}decode(P,Y){return this.value}encode(P,Y,X){return 0}}return $e.Constant=q,$e.greedy=((M,P)=>new a(M,P)),$e.offset=((M,P,Y)=>new l(M,P,Y)),$e.u8=(M=>new c(1,M)),$e.u16=(M=>new c(2,M)),$e.u24=(M=>new c(3,M)),$e.u32=(M=>new c(4,M)),$e.u40=(M=>new c(5,M)),$e.u48=(M=>new c(6,M)),$e.nu64=(M=>new b(M)),$e.u16be=(M=>new u(2,M)),$e.u24be=(M=>new u(3,M)),$e.u32be=(M=>new u(4,M)),$e.u40be=(M=>new u(5,M)),$e.u48be=(M=>new u(6,M)),$e.nu64be=(M=>new w(M)),$e.s8=(M=>new h(1,M)),$e.s16=(M=>new h(2,M)),$e.s24=(M=>new h(3,M)),$e.s32=(M=>new h(4,M)),$e.s40=(M=>new h(5,M)),$e.s48=(M=>new h(6,M)),$e.ns64=(M=>new k(M)),$e.s16be=(M=>new m(2,M)),$e.s24be=(M=>new m(3,M)),$e.s32be=(M=>new m(4,M)),$e.s40be=(M=>new m(5,M)),$e.s48be=(M=>new m(6,M)),$e.ns64be=(M=>new C(M)),$e.f32=(M=>new R(M)),$e.f32be=(M=>new B(M)),$e.f64=(M=>new O(M)),$e.f64be=(M=>new F(M)),$e.struct=((M,P,Y)=>new j(M,P,Y)),$e.bits=((M,P,Y)=>new _(M,P,Y)),$e.seq=((M,P,Y)=>new H(M,P,Y)),$e.union=((M,P,Y)=>new V(M,P,Y)),$e.unionLayoutDiscriminator=((M,P)=>new W(M,P)),$e.blob=((M,P)=>new G(M,P)),$e.cstr=(M=>new te(M)),$e.utf8=((M,P)=>new K(M,P)),$e.constant=((M,P)=>new q(M,P)),$e}var Ee=Qut(),Zut=8078e3,edt=8078001,tdt=8078004,ndt=8078005,rdt=8078006,idt=8078011;function kme(t){return Array.isArray(t)?"%5B"+t.map(kme).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function sdt([t,e]){return`${t}=${kme(e)}`}function odt(t){const e=Object.entries(t).map(sdt).join("&");return btoa(e)}function adt(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${odt(e)}'`),`${n}\``}}var hy=class extends Error{constructor(...[e,n]){let r,i;if(n){const{cause:o,...a}=n;o&&(i={cause:o}),Object.keys(a).length>0&&(r=a)}const s=adt(e,r);super(s,i);Ce(this,"cause",this.cause);Ce(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function ldt(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function cdt(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(ldt(e,t));return t.write(e,n,0),n}})}function udt(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function fg(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function ddt(t,e){if(fg(t)!==fg(e))throw new hy(tdt);if(fg(t)&&fg(e)&&t.fixedSize!==e.fixedSize)throw new hy(ndt,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!fg(t)&&!fg(e)&&t.maxSize!==e.maxSize)throw new hy(rdt,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function fdt(t,e,n=0){if(e.length-n<=0)throw new hy(Zut,{codecDescription:t})}function hdt(t,e,n,r=0){const i=n.length-r;if(i<e)throw new hy(edt,{bytesLength:i,codecDescription:t,expected:e})}function pdt(t,e,n,r){if(r<e||r>n)throw new hy(idt,{codecDescription:t,max:n,min:e,value:r})}function Cme(t){return(t==null?void 0:t.endian)!==1}function mdt(t){return cdt({fixedSize:t.size,write(e,n,r){t.range&&pdt(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,Cme(t.config)),n.set(new Uint8Array(i),r),r+t.size}})}function gdt(t){return udt({fixedSize:t.size,read(e,n=0){fdt(t.name,e,n),hdt(t.name,t.size,e,n);const r=new DataView(ydt(e,n,t.size));return[t.get(r,Cme(t.config)),n+t.size]}})}function ydt(t,e,n){const r=t.byteOffset+(e??0),i=n??t.byteLength;return t.buffer.slice(r,r+i)}var xdt=(t={})=>mdt({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),vdt=(t={})=>gdt({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),bdt=(t={})=>ddt(xdt(t),vdt(t));class wdt extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function Edt(t){return NE(t)&&typeof t[Symbol.iterator]=="function"}function NE(t){return typeof t=="object"&&t!=null}function q2(t){return NE(t)&&!Array.isArray(t)}function Gl(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Sdt(t){const{done:e,value:n}=t.next();return e?void 0:n}function Adt(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Gl(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*$Z(t,e,n,r){Edt(t)||(t=[t]);for(const i of t){const s=Adt(i,e,n,r);s&&(yield s)}}function*l7(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,u,h]of e.entries(t,a)){const m=l7(u,h,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,u],coerce:s,mask:o,message:n.message});for(const g of m)g[0]?(l=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):s&&(u=g[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):NE(t)&&(u!==void 0||c in t)&&(t[c]=u))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let Xc=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,c)=>{const u=i(l,c);return $Z(u,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const u=s(l,c);return $Z(u,c,this,l)}:this.refiner=()=>[]}assert(e,n){return Tdt(e,this,n)}create(e,n){return ht(e,this,n)}is(e){return Nme(e,this)}mask(e,n){return kdt(e,this,n)}validate(e,n={}){return PE(e,this,n)}};function Tdt(t,e,n){const r=PE(t,e,{message:n});if(r[0])throw r[0]}function ht(t,e,n){const r=PE(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function kdt(t,e,n){const r=PE(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function Nme(t,e){return!PE(t,e)[0]}function PE(t,e,n={}){const r=l7(t,e,n),i=Sdt(r);return i[0]?[new wdt(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function e0(t,e){return new Xc({type:t,schema:null,validator:e})}function Cdt(){return e0("any",()=>!0)}function xt(t){return new Xc({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Gl(e)}`}})}function qc(){return e0("boolean",t=>typeof t=="boolean")}function c7(t){return e0("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Gl(e)}`)}function Or(t){const e=Gl(t),n=typeof t;return new Xc({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Gl(r)}`}})}function Ndt(){return e0("never",()=>!1)}function vt(t){return new Xc({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function Me(){return e0("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Gl(t)}`)}function Ht(t){return new Xc({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function Pme(t,e){return new Xc({type:"record",schema:null,*entries(n){if(NE(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return q2(n)||`Expected an object, but received: ${Gl(n)}`},coercer(n){return q2(n)?{...n}:n}})}function ct(){return e0("string",t=>typeof t=="string"||`Expected a string, but received: ${Gl(t)}`)}function u7(t){const e=Ndt();return new Xc({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Gl(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function nt(t){const e=Object.keys(t);return new Xc({type:"type",schema:t,*entries(n){if(NE(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return q2(n)||`Expected an object, but received: ${Gl(n)}`},coercer(n){return q2(n)?{...n}:n}})}function oo(t){const e=t.map(n=>n.type).join(" | ");return new Xc({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=l7(n,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Gl(n)}`,...i]}})}function bv(){return e0("unknown",()=>!0)}function _E(t,e,n){return new Xc({...t,coercer:(r,i)=>Nme(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var ZA,Pdt=new Uint8Array(16);function _me(){if(!ZA&&(ZA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ZA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ZA(Pdt)}const _dt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function rP(t){return typeof t=="string"&&_dt.test(t)}var Qi=[];for(var I4=0;I4<256;++I4)Qi.push((I4+256).toString(16).substr(1));function iP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Qi[t[e+0]]+Qi[t[e+1]]+Qi[t[e+2]]+Qi[t[e+3]]+"-"+Qi[t[e+4]]+Qi[t[e+5]]+"-"+Qi[t[e+6]]+Qi[t[e+7]]+"-"+Qi[t[e+8]]+Qi[t[e+9]]+"-"+Qi[t[e+10]]+Qi[t[e+11]]+Qi[t[e+12]]+Qi[t[e+13]]+Qi[t[e+14]]+Qi[t[e+15]]).toLowerCase();if(!rP(n))throw TypeError("Stringified UUID is invalid");return n}var zZ,R4,O4=0,M4=0;function Idt(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||zZ,o=t.clockseq!==void 0?t.clockseq:R4;if(s==null||o==null){var a=t.random||(t.rng||_me)();s==null&&(s=zZ=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=R4=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:M4+1,u=l-O4+(c-M4)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||l>O4)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");O4=l,M4=c,R4=o,l+=122192928e5;var h=((l&268435455)*1e4+c)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=h&255;var m=l/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=m&255,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var g=0;g<6;++g)i[r+g]=s[g];return e||iP(i)}function Ime(t){if(!rP(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function Rdt(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var Odt="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Mdt="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Rme(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=Rdt(i)),typeof s=="string"&&(s=Ime(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return iP(l)}try{r.name=t}catch{}return r.DNS=Odt,r.URL=Mdt,r}function Ldt(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return Ddt(jdt(Bdt(t),t.length*8))}function Ddt(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function Ome(t){return(t+64>>>9<<4)+14+1}function jdt(t,e){t[e>>5]|=128<<e%32,t[Ome(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=i,u=s;n=ys(n,r,i,s,t[o],7,-680876936),s=ys(s,n,r,i,t[o+1],12,-389564586),i=ys(i,s,n,r,t[o+2],17,606105819),r=ys(r,i,s,n,t[o+3],22,-1044525330),n=ys(n,r,i,s,t[o+4],7,-176418897),s=ys(s,n,r,i,t[o+5],12,1200080426),i=ys(i,s,n,r,t[o+6],17,-1473231341),r=ys(r,i,s,n,t[o+7],22,-45705983),n=ys(n,r,i,s,t[o+8],7,1770035416),s=ys(s,n,r,i,t[o+9],12,-1958414417),i=ys(i,s,n,r,t[o+10],17,-42063),r=ys(r,i,s,n,t[o+11],22,-1990404162),n=ys(n,r,i,s,t[o+12],7,1804603682),s=ys(s,n,r,i,t[o+13],12,-40341101),i=ys(i,s,n,r,t[o+14],17,-1502002290),r=ys(r,i,s,n,t[o+15],22,1236535329),n=xs(n,r,i,s,t[o+1],5,-165796510),s=xs(s,n,r,i,t[o+6],9,-1069501632),i=xs(i,s,n,r,t[o+11],14,643717713),r=xs(r,i,s,n,t[o],20,-373897302),n=xs(n,r,i,s,t[o+5],5,-701558691),s=xs(s,n,r,i,t[o+10],9,38016083),i=xs(i,s,n,r,t[o+15],14,-660478335),r=xs(r,i,s,n,t[o+4],20,-405537848),n=xs(n,r,i,s,t[o+9],5,568446438),s=xs(s,n,r,i,t[o+14],9,-1019803690),i=xs(i,s,n,r,t[o+3],14,-187363961),r=xs(r,i,s,n,t[o+8],20,1163531501),n=xs(n,r,i,s,t[o+13],5,-1444681467),s=xs(s,n,r,i,t[o+2],9,-51403784),i=xs(i,s,n,r,t[o+7],14,1735328473),r=xs(r,i,s,n,t[o+12],20,-1926607734),n=vs(n,r,i,s,t[o+5],4,-378558),s=vs(s,n,r,i,t[o+8],11,-2022574463),i=vs(i,s,n,r,t[o+11],16,1839030562),r=vs(r,i,s,n,t[o+14],23,-35309556),n=vs(n,r,i,s,t[o+1],4,-1530992060),s=vs(s,n,r,i,t[o+4],11,1272893353),i=vs(i,s,n,r,t[o+7],16,-155497632),r=vs(r,i,s,n,t[o+10],23,-1094730640),n=vs(n,r,i,s,t[o+13],4,681279174),s=vs(s,n,r,i,t[o],11,-358537222),i=vs(i,s,n,r,t[o+3],16,-722521979),r=vs(r,i,s,n,t[o+6],23,76029189),n=vs(n,r,i,s,t[o+9],4,-640364487),s=vs(s,n,r,i,t[o+12],11,-421815835),i=vs(i,s,n,r,t[o+15],16,530742520),r=vs(r,i,s,n,t[o+2],23,-995338651),n=bs(n,r,i,s,t[o],6,-198630844),s=bs(s,n,r,i,t[o+7],10,1126891415),i=bs(i,s,n,r,t[o+14],15,-1416354905),r=bs(r,i,s,n,t[o+5],21,-57434055),n=bs(n,r,i,s,t[o+12],6,1700485571),s=bs(s,n,r,i,t[o+3],10,-1894986606),i=bs(i,s,n,r,t[o+10],15,-1051523),r=bs(r,i,s,n,t[o+1],21,-2054922799),n=bs(n,r,i,s,t[o+8],6,1873313359),s=bs(s,n,r,i,t[o+15],10,-30611744),i=bs(i,s,n,r,t[o+6],15,-1560198380),r=bs(r,i,s,n,t[o+13],21,1309151649),n=bs(n,r,i,s,t[o+4],6,-145523070),s=bs(s,n,r,i,t[o+11],10,-1120210379),i=bs(i,s,n,r,t[o+2],15,718787259),r=bs(r,i,s,n,t[o+9],21,-343485551),n=Zf(n,a),r=Zf(r,l),i=Zf(i,c),s=Zf(s,u)}return[n,r,i,s]}function Bdt(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(Ome(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function Zf(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function Udt(t,e){return t<<e|t>>>32-e}function sP(t,e,n,r,i,s){return Zf(Udt(Zf(Zf(e,t),Zf(r,s)),i),n)}function ys(t,e,n,r,i,s,o){return sP(e&n|~e&r,t,e,i,s,o)}function xs(t,e,n,r,i,s,o){return sP(e&r|n&~r,t,e,i,s,o)}function vs(t,e,n,r,i,s,o){return sP(e^n^r,t,e,i,s,o)}function bs(t,e,n,r,i,s,o){return sP(n^(e|~r),t,e,i,s,o)}var Fdt=Rme("v3",48,Ldt);function $dt(t,e,n){t=t||{};var r=t.random||(t.rng||_me)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return iP(r)}function zdt(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function L4(t,e){return t<<e|t>>>32-e}function Hdt(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=t[l*64+u*4]<<24|t[l*64+u*4+1]<<16|t[l*64+u*4+2]<<8|t[l*64+u*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var m=new Uint32Array(80),g=0;g<16;++g)m[g]=a[h][g];for(var x=16;x<80;++x)m[x]=L4(m[x-3]^m[x-8]^m[x-14]^m[x-16],1);for(var v=n[0],b=n[1],w=n[2],k=n[3],C=n[4],R=0;R<80;++R){var B=Math.floor(R/20),O=L4(v,5)+zdt(B,b,w,k)+C+e[B]+m[R]>>>0;C=k,k=w,w=L4(b,30)>>>0,b=v,v=O}n[0]=n[0]+v>>>0,n[1]=n[1]+b>>>0,n[2]=n[2]+w>>>0,n[3]=n[3]+k>>>0,n[4]=n[4]+C>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var Vdt=Rme("v5",80,Hdt);const qdt="00000000-0000-0000-0000-000000000000";function Gdt(t){if(!rP(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Kdt=Object.freeze(Object.defineProperty({__proto__:null,NIL:qdt,parse:Ime,stringify:iP,v1:Idt,v3:Fdt,v4:$dt,v5:Vdt,validate:rP,version:Gdt},Symbol.toStringTag,{value:"Module"})),Mme=Pee(Kdt);var D4,HZ;function Wdt(){if(HZ)return D4;HZ=1;const t=Mme.v4;return D4=function(n,r,i,s){if(typeof n!="string")throw new TypeError(n+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:n};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof i>"u"){const l=typeof s.generator=="function"?s.generator:function(){return t()};a.id=l(a,s)}else o===2&&i===null?s.notificationIdNull&&(a.id=null):a.id=i;return a},D4}var j4,VZ;function Ydt(){if(VZ)return j4;VZ=1;const t=Mme.v4,e=Wdt(),n=function(r,i){if(!(this instanceof n))return new n(r,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return t()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=r};return j4=n,n.prototype.request=function(r,i,s,o){const a=this;let l=null;const c=Array.isArray(r)&&typeof i=="function";if(this.options.version===1&&c)throw new TypeError("JSON-RPC 1.0 does not support batching");if(c||!c&&r&&typeof r=="object"&&typeof i=="function")o=i,l=r;else{typeof s=="function"&&(o=s,s=void 0);const m=typeof o=="function";try{l=e(r,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(m){o(g);return}throw g}if(!m)return l}let h;try{h=JSON.stringify(l,this.options.replacer)}catch(m){o(m);return}return this.callServer(h,function(m,g){a._parseResponse(m,g,o)}),l},n.prototype._parseResponse=function(r,i,s){if(r){s(r);return}if(!i){s();return}let o;try{o=JSON.parse(i,this.options.reviver)}catch(a){s(a);return}if(s.length===3)if(Array.isArray(o)){const a=function(c){return typeof c.error<"u"},l=function(c){return!a(c)};s(null,o.filter(a),o.filter(l));return}else{s(null,o.error,o.result);return}s(null,o)},j4}var Jdt=Ydt();const Xdt=hs(Jdt);var Qdt=class extends V6{constructor(e,n){super();Ce(this,"socket");this.socket=new window.WebSocket(e,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function Zdt(t,e){return new Qdt(t,e)}var eft=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},tft=class extends V6{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();Ce(this,"address");Ce(this,"rpc_id");Ce(this,"queue");Ce(this,"options");Ce(this,"autoconnect");Ce(this,"ready");Ce(this,"reconnect");Ce(this,"reconnect_timer_id");Ce(this,"reconnect_interval");Ce(this,"max_reconnects");Ce(this,"rest_options");Ce(this,"current_reconnects");Ce(this,"generate_request_id");Ce(this,"socket");Ce(this,"webSocketFactory");Ce(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new eft,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket&&this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=an.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}};class Lme extends Zpe{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Xpe(e);const r=e7(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Rx(s)}update(e){return j2(this),this.iHash.update(e),this}digestInto(e){j2(this),Qm(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Dme=(t,e,n)=>new Lme(t,e).update(n).digest();Dme.create=(t,e)=>new Lme(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qZ=(t,e)=>(t+(t>=0?e:-e)/jme)/e;function nft(t,e,n){const[[r,i],[s,o]]=e,a=qZ(o*t,n),l=qZ(-i*t,n);let c=t-a*r-l*s,u=-a*i-l*o;const h=c<Zu,m=u<Zu;h&&(c=-c),m&&(u=-u);const g=kE(Math.ceil(ome(n)/2))+py;if(c<Zu||c>=g||u<Zu||u>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:u}}function dD(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function B4(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return Mm(n.lowS,"lowS"),Mm(n.prehash,"prehash"),n.format!==void 0&&dD(n.format),n}class rft extends Error{constructor(e=""){super(e)}}const Iu={Err:rft,_tlv:{encode:(t,e)=>{const{Err:n}=Iu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=XA(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?XA(i.length/2|128):"";return XA(t)+s+i+e},decode(t,e){const{Err:n}=Iu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of c)o=o<<8|u;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Iu;if(t<Zu)throw new e("integer: negative integers are not allowed");let n=XA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Iu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return tP(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Iu,i=qr("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:c,l:u}=r.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=Iu,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},Zu=BigInt(0),py=BigInt(1),jme=BigInt(2),eT=BigInt(3),ift=BigInt(4);function $g(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let i=qr("private key",e);try{r=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function sft(t,e={}){const n=Eme("weierstrass",t,e),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o,n:a}=s;CE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!r.is0(s.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=Ume(r,i);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(V,U,T){const{x:_,y:L}=U.toAffine(),z=r.toBytes(_);if(Mm(T,"isCompressed"),T){u();const G=!r.isOdd(L);return Cc(Bme(G),z)}else return Cc(Uint8Array.of(4),z,r.toBytes(L))}function m(V){Ol(V,void 0,"Point");const{publicKey:U,publicKeyUncompressed:T}=c,_=V.length,L=V[0],z=V.subarray(1);if(_===U&&(L===2||L===3)){const G=r.fromBytes(z);if(!r.isValid(G))throw new Error("bad point: is not on curve, wrong x");const te=v(G);let K;try{K=r.sqrt(te)}catch(P){const Y=P instanceof Error?": "+P.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}u();const q=r.isOdd(K);return(L&1)===1!==q&&(K=r.neg(K)),{x:G,y:K}}else if(_===T&&L===4){const G=r.BYTES,te=r.fromBytes(z.subarray(0,G)),K=r.fromBytes(z.subarray(G,G*2));if(!b(te,K))throw new Error("bad point: is not on curve");return{x:te,y:K}}else throw new Error(`bad point: got length ${_}, expected compressed=${U} or uncompressed=${T}`)}const g=e.toBytes||h,x=e.fromBytes||m;function v(V){const U=r.sqr(V),T=r.mul(U,V);return r.add(r.add(T,r.mul(V,s.a)),s.b)}function b(V,U){const T=r.sqr(U),_=v(V);return r.eql(T,_)}if(!b(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const w=r.mul(r.pow(s.a,eT),ift),k=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(w,k)))throw new Error("bad curve params: a or b");function C(V,U,T=!1){if(!r.isValid(U)||T&&r.is0(U))throw new Error(`bad point coordinate ${V}`);return U}function R(V){if(!(V instanceof j))throw new Error("ProjectivePoint expected")}function B(V){if(!l||!l.basises)throw new Error("no endo");return nft(V,l.basises,i.ORDER)}const O=U2((V,U)=>{const{X:T,Y:_,Z:L}=V;if(r.eql(L,r.ONE))return{x:T,y:_};const z=V.is0();U==null&&(U=z?r.ONE:r.inv(L));const G=r.mul(T,U),te=r.mul(_,U),K=r.mul(L,U);if(z)return{x:r.ZERO,y:r.ZERO};if(!r.eql(K,r.ONE))throw new Error("invZ was invalid");return{x:G,y:te}}),F=U2(V=>{if(V.is0()){if(e.allowInfinityPoint&&!r.is0(V.Y))return;throw new Error("bad point: ZERO")}const{x:U,y:T}=V.toAffine();if(!r.isValid(U)||!r.isValid(T))throw new Error("bad point: x or y not field elements");if(!b(U,T))throw new Error("bad point: equation left != right");if(!V.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function H(V,U,T,_,L){return T=new j(r.mul(T.X,V),T.Y,T.Z),U=F2(_,U),T=F2(L,T),U.add(T)}class j{constructor(U,T,_){this.X=C("x",U),this.Y=C("y",T,!0),this.Z=C("z",_),Object.freeze(this)}static CURVE(){return s}static fromAffine(U){const{x:T,y:_}=U||{};if(!U||!r.isValid(T)||!r.isValid(_))throw new Error("invalid affine point");if(U instanceof j)throw new Error("projective point not allowed");return r.is0(T)&&r.is0(_)?j.ZERO:new j(T,_,r.ONE)}static fromBytes(U){const T=j.fromAffine(x(Ol(U,void 0,"point")));return T.assertValidity(),T}static fromHex(U){return j.fromBytes(qr("pointHex",U))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(U=8,T=!0){return W.createCache(this,U),T||this.multiply(eT),this}assertValidity(){F(this)}hasEvenY(){const{y:U}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(U)}equals(U){R(U);const{X:T,Y:_,Z:L}=this,{X:z,Y:G,Z:te}=U,K=r.eql(r.mul(T,te),r.mul(z,L)),q=r.eql(r.mul(_,te),r.mul(G,L));return K&&q}negate(){return new j(this.X,r.neg(this.Y),this.Z)}double(){const{a:U,b:T}=s,_=r.mul(T,eT),{X:L,Y:z,Z:G}=this;let te=r.ZERO,K=r.ZERO,q=r.ZERO,M=r.mul(L,L),P=r.mul(z,z),Y=r.mul(G,G),X=r.mul(L,z);return X=r.add(X,X),q=r.mul(L,G),q=r.add(q,q),te=r.mul(U,q),K=r.mul(_,Y),K=r.add(te,K),te=r.sub(P,K),K=r.add(P,K),K=r.mul(te,K),te=r.mul(X,te),q=r.mul(_,q),Y=r.mul(U,Y),X=r.sub(M,Y),X=r.mul(U,X),X=r.add(X,q),q=r.add(M,M),M=r.add(q,M),M=r.add(M,Y),M=r.mul(M,X),K=r.add(K,M),Y=r.mul(z,G),Y=r.add(Y,Y),M=r.mul(Y,X),te=r.sub(te,M),q=r.mul(Y,P),q=r.add(q,q),q=r.add(q,q),new j(te,K,q)}add(U){R(U);const{X:T,Y:_,Z:L}=this,{X:z,Y:G,Z:te}=U;let K=r.ZERO,q=r.ZERO,M=r.ZERO;const P=s.a,Y=r.mul(s.b,eT);let X=r.mul(T,z),re=r.mul(_,G),ae=r.mul(L,te),Te=r.add(T,_),ue=r.add(z,G);Te=r.mul(Te,ue),ue=r.add(X,re),Te=r.sub(Te,ue),ue=r.add(T,L);let pe=r.add(z,te);return ue=r.mul(ue,pe),pe=r.add(X,ae),ue=r.sub(ue,pe),pe=r.add(_,L),K=r.add(G,te),pe=r.mul(pe,K),K=r.add(re,ae),pe=r.sub(pe,K),M=r.mul(P,ue),K=r.mul(Y,ae),M=r.add(K,M),K=r.sub(re,M),M=r.add(re,M),q=r.mul(K,M),re=r.add(X,X),re=r.add(re,X),ae=r.mul(P,ae),ue=r.mul(Y,ue),re=r.add(re,ae),ae=r.sub(X,ae),ae=r.mul(P,ae),ue=r.add(ue,ae),X=r.mul(re,ue),q=r.add(q,X),X=r.mul(pe,ue),K=r.mul(Te,K),K=r.sub(K,X),X=r.mul(Te,re),M=r.mul(pe,M),M=r.add(M,X),new j(K,q,M)}subtract(U){return this.add(U.negate())}is0(){return this.equals(j.ZERO)}multiply(U){const{endo:T}=e;if(!i.isValidNot0(U))throw new Error("invalid scalar: out of range");let _,L;const z=G=>W.cached(this,G,te=>Mp(j,te));if(T){const{k1neg:G,k1:te,k2neg:K,k2:q}=B(U),{p:M,f:P}=z(te),{p:Y,f:X}=z(q);L=P.add(X),_=H(T.beta,M,Y,G,K)}else{const{p:G,f:te}=z(U);_=G,L=te}return Mp(j,[_,L])[0]}multiplyUnsafe(U){const{endo:T}=e,_=this;if(!i.isValid(U))throw new Error("invalid scalar: out of range");if(U===Zu||_.is0())return j.ZERO;if(U===py)return _;if(W.hasCache(this))return this.multiply(U);if(T){const{k1neg:L,k1:z,k2neg:G,k2:te}=B(U),{p1:K,p2:q}=Eut(j,_,z,te);return H(T.beta,K,q,L,G)}else return W.unsafe(_,U)}multiplyAndAddUnsafe(U,T,_){const L=this.multiplyUnsafe(T).add(U.multiplyUnsafe(_));return L.is0()?void 0:L}toAffine(U){return O(this,U)}isTorsionFree(){const{isTorsionFree:U}=e;return o===py?!0:U?U(j,this):W.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:U}=e;return o===py?this:U?U(j,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(U=!0){return Mm(U,"isCompressed"),this.assertValidity(),g(j,this,U)}toHex(U=!0){return pm(this.toBytes(U))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(U=!0){return this.toBytes(U)}_setWindowSize(U){this.precompute(U)}static normalizeZ(U){return Mp(j,U)}static msm(U,T){return wme(j,i,U,T)}static fromPrivateKey(U){return j.BASE.multiply($g(i,U))}}j.BASE=new j(s.Gx,s.Gy,r.ONE),j.ZERO=new j(r.ZERO,r.ONE,r.ZERO),j.Fp=r,j.Fn=i;const $=i.BITS,W=new bme(j,e.endo?Math.ceil($/2):$);return j.BASE.precompute(8),j}function Bme(t){return Uint8Array.of(t?2:3)}function Ume(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function oft(t,e={}){const{Fn:n}=t,r=e.randomBytes||t7,i=Object.assign(Ume(t.Fp,n),{seed:yme(n.ORDER)});function s(g){try{return!!$g(n,g)}catch{return!1}}function o(g,x){const{publicKey:v,publicKeyUncompressed:b}=i;try{const w=g.length;return x===!0&&w!==v||x===!1&&w!==b?!1:!!t.fromBytes(g)}catch{return!1}}function a(g=r(i.seed)){return vut(Ol(g,i.seed,"seed"),n.ORDER)}function l(g,x=!0){return t.BASE.multiply($g(n,g)).toBytes(x)}function c(g){const x=a(g);return{secretKey:x,publicKey:l(x)}}function u(g){if(typeof g=="bigint")return!1;if(g instanceof t)return!0;const{secretKey:x,publicKey:v,publicKeyUncompressed:b}=i;if(n.allowedLengths||x===v)return;const w=qr("key",g).length;return w===v||w===b}function h(g,x,v=!0){if(u(g)===!0)throw new Error("first arg must be private key");if(u(x)===!1)throw new Error("second arg must be public key");const b=$g(n,g);return t.fromHex(x).multiply(b).toBytes(v)}return Object.freeze({getPublicKey:l,getSharedSecret:h,keygen:c,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:g=>$g(n,g),precompute(g=8,x=t.BASE){return x.precompute(g,!1)}},lengths:i})}function aft(t,e,n={}){Xpe(e),CE(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||t7,i=n.hmac||((T,..._)=>Dme(e,T,Cc(..._))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:l}=o,{keygen:c,getPublicKey:u,getSharedSecret:h,utils:m,lengths:g}=oft(t,n),x={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},v="compact";function b(T){const _=a>>py;return T>_}function w(T,_){if(!o.isValidNot0(_))throw new Error(`invalid signature ${T}: out of range 1..Point.Fn.ORDER`);return _}function k(T,_){dD(_);const L=g.signature,z=_==="compact"?L:_==="recovered"?L+1:void 0;return Ol(T,z,`${_} signature`)}class C{constructor(_,L,z){this.r=w("r",_),this.s=w("s",L),z!=null&&(this.recovery=z),Object.freeze(this)}static fromBytes(_,L=v){k(_,L);let z;if(L==="der"){const{r:q,s:M}=Iu.toSig(Ol(_));return new C(q,M)}L==="recovered"&&(z=_[0],L="compact",_=_.subarray(1));const G=o.BYTES,te=_.subarray(0,G),K=_.subarray(G,G*2);return new C(o.fromBytes(te),o.fromBytes(K),z)}static fromHex(_,L){return this.fromBytes(B2(_),L)}addRecoveryBit(_){return new C(this.r,this.s,_)}recoverPublicKey(_){const L=s.ORDER,{r:z,s:G,recovery:te}=this;if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");if(a*jme<L&&te>1)throw new Error("recovery id is ambiguous for h>1 curve");const q=te===2||te===3?z+a:z;if(!s.isValid(q))throw new Error("recovery id 2 or 3 invalid");const M=s.toBytes(q),P=t.fromBytes(Cc(Bme((te&1)===0),M)),Y=o.inv(q),X=B(qr("msgHash",_)),re=o.create(-X*Y),ae=o.create(G*Y),Te=t.BASE.multiplyUnsafe(re).add(P.multiplyUnsafe(ae));if(Te.is0())throw new Error("point at infinify");return Te.assertValidity(),Te}hasHighS(){return b(this.s)}toBytes(_=v){if(dD(_),_==="der")return B2(Iu.hexFromSig(this));const L=o.toBytes(this.r),z=o.toBytes(this.s);if(_==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Cc(Uint8Array.of(this.recovery),L,z)}return Cc(L,z)}toHex(_){return pm(this.toBytes(_))}assertValidity(){}static fromCompact(_){return C.fromBytes(qr("sig",_),"compact")}static fromDER(_){return C.fromBytes(qr("sig",_),"der")}normalizeS(){return this.hasHighS()?new C(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return pm(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return pm(this.toBytes("compact"))}}const R=n.bits2int||function(_){if(_.length>8192)throw new Error("input is too large");const L=tP(_),z=_.length*8-l;return z>0?L>>BigInt(z):L},B=n.bits2int_modN||function(_){return o.create(R(_))},O=kE(l);function F(T){return uD("num < 2^"+l,T,Zu,O),o.toBytes(T)}function H(T,_){return Ol(T,void 0,"message"),_?Ol(e(T),void 0,"prehashed message"):T}function j(T,_,L){if(["recovered","canonical"].some(re=>re in L))throw new Error("sign() legacy options not supported");const{lowS:z,prehash:G,extraEntropy:te}=B4(L,x);T=H(T,G);const K=B(T),q=$g(o,_),M=[F(q),F(K)];if(te!=null&&te!==!1){const re=te===!0?r(g.secretKey):te;M.push(qr("extraEntropy",re))}const P=Cc(...M),Y=K;function X(re){const ae=R(re);if(!o.isValidNot0(ae))return;const Te=o.inv(ae),ue=t.BASE.multiply(ae).toAffine(),pe=o.create(ue.x);if(pe===Zu)return;const be=o.create(Te*o.create(Y+pe*q));if(be===Zu)return;let se=(ue.x===pe?0:2)|Number(ue.y&py),ve=be;return z&&b(be)&&(ve=o.neg(be),se^=1),new C(pe,ve,se)}return{seed:P,k2sig:X}}function $(T,_,L={}){T=qr("message",T);const{seed:z,k2sig:G}=j(T,_,L);return cut(e.outputLen,o.BYTES,i)(z,G)}function W(T){let _;const L=typeof T=="string"||TE(T),z=!L&&T!==null&&typeof T=="object"&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!L&&!z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(z)_=new C(T.r,T.s);else if(L){try{_=C.fromBytes(qr("sig",T),"der")}catch(G){if(!(G instanceof Iu.Err))throw G}if(!_)try{_=C.fromBytes(qr("sig",T),"compact")}catch{return!1}}return _||!1}function V(T,_,L,z={}){const{lowS:G,prehash:te,format:K}=B4(z,x);if(L=qr("publicKey",L),_=H(qr("message",_),te),"strict"in z)throw new Error("options.strict was renamed to lowS");const q=K===void 0?W(T):C.fromBytes(qr("sig",T),K);if(q===!1)return!1;try{const M=t.fromBytes(L);if(G&&q.hasHighS())return!1;const{r:P,s:Y}=q,X=B(_),re=o.inv(Y),ae=o.create(X*re),Te=o.create(P*re),ue=t.BASE.multiplyUnsafe(ae).add(M.multiplyUnsafe(Te));return ue.is0()?!1:o.create(ue.x)===P}catch{return!1}}function U(T,_,L={}){const{prehash:z}=B4(L,x);return _=H(_,z),C.fromBytes(T,"recovered").recoverPublicKey(_).toBytes()}return Object.freeze({keygen:c,getPublicKey:u,getSharedSecret:h,utils:m,lengths:g,Point:t,sign:$,verify:V,recoverPublicKey:U,Signature:C,hash:e})}function lft(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Zm(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),s={Fp:n,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function cft(t){const{CURVE:e,curveOpts:n}=lft(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function uft(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,mme(n.Fn.ORDER,n.Fn.BITS))})}function dft(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:i}=cft(t),s=sft(e,n),o=aft(s,r,i);return uft(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fft(t,e){const n=r=>dft({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const d7={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},hft={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},GZ=BigInt(2);function pft(t){const e=d7.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,h=$r(u,n,e)*u%e,m=$r(h,n,e)*u%e,g=$r(m,GZ,e)*c%e,x=$r(g,i,e)*g%e,v=$r(x,s,e)*x%e,b=$r(v,a,e)*v%e,w=$r(b,l,e)*b%e,k=$r(w,a,e)*v%e,C=$r(k,n,e)*u%e,R=$r(C,o,e)*x%e,B=$r(R,r,e)*c%e,O=$r(B,GZ,e);if(!fD.eql(fD.sqr(O),t))throw new Error("Cannot find square root");return O}const fD=Zm(d7.p,{sqrt:pft}),mft=fft({...d7,Fp:fD,lowS:!0,endo:hft},rme);vv.utils.randomPrivateKey;const KZ=()=>{const t=vv.utils.randomPrivateKey(),e=hD(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},hD=vv.getPublicKey;function WZ(t){try{return vv.ExtendedPoint.fromHex(t),!0}catch{return!1}}const gft=(t,e)=>vv.sign(t,e.slice(0,32)),yft=vv.verify,Mi=t=>an.isBuffer(t)?t:t instanceof Uint8Array?an.from(t.buffer,t.byteOffset,t.byteLength):an.from(t);class xft{constructor(e){Object.assign(this,e)}encode(){return an.from(_4.serialize(FT,this))}static decode(e){return _4.deserialize(FT,this,e)}static decodeUnchecked(e){return _4.deserializeUnchecked(FT,this,e)}}const FT=new Map;var Fme;const vft=32,sh=32;function bft(t){return t._bn!==void 0}let YZ=1;class ft extends xft{constructor(e){if(super({}),this._bn=void 0,bft(e))this._bn=e._bn;else{if(typeof e=="string"){const n=as.decode(e);if(n.length!=sh)throw new Error("Invalid public key input");this._bn=new RZ(n)}else this._bn=new RZ(e);if(this._bn.byteLength()>sh)throw new Error("Invalid public key input")}}static unique(){const e=new ft(YZ);return YZ+=1,new ft(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return as.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(an);if(e.length===sh)return e;const n=an.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=an.concat([e.toBuffer(),an.from(n),r.toBuffer()]),s=DZ(i);return new ft(s)}static createProgramAddressSync(e,n){let r=an.alloc(0);e.forEach(function(s){if(s.length>vft)throw new TypeError("Max seed length exceeded");r=an.concat([r,Mi(s)])}),r=an.concat([r,n.toBuffer(),an.from("ProgramDerivedAddress")]);const i=DZ(r);if(WZ(i))throw new Error("Invalid seeds, address must fall off the curve");return new ft(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(an.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new ft(e);return WZ(n.toBytes())}}Fme=ft;ft.default=new Fme("11111111111111111111111111111111");FT.set(ft,{kind:"struct",fields:[["_bn","u256"]]});new ft("BPFLoader1111111111111111111111111111111111");const my=1232,$me=127,zme=64;class Hme extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Hme.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Vme extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Vme.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Zb extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Zb.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class G2{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const En=(t="publicKey")=>Ee.blob(32,t),zg=(t="string")=>{const e=Ee.struct([Ee.u32("length"),Ee.u32("lengthPadding"),Ee.blob(Ee.offset(Ee.u32(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:an.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>Ee.u32().span+Ee.u32().span+an.from(s,"utf8").length,i},wft=(t="authorized")=>Ee.struct([En("staker"),En("withdrawer")],t),Eft=(t="lockup")=>Ee.struct([Ee.ns64("unixTimestamp"),Ee.ns64("epoch"),En("custodian")],t),Sft=(t="voteInit")=>Ee.struct([En("nodePubkey"),En("authorizedVoter"),En("authorizedWithdrawer"),Ee.u8("commission")],t),Aft=(t="voteAuthorizeWithSeedArgs")=>Ee.struct([Ee.u32("voteAuthorizationType"),En("currentAuthorityDerivedKeyOwnerPubkey"),zg("currentAuthorityDerivedKeySeed"),En("newAuthorized")],t);function qme(t,e){const n=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*n(i.elementLayout)}else if("fields"in i)return qme({layout:i},e[i.property]);return 0};let r=0;return t.layout.fields.forEach(i=>{r+=n(i)}),r}function $a(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,(r&128)===0)break}return e}function za(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Gr(t,e){if(!t)throw new Error(e||"Assertion failed")}class oP{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new oP(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Gr(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Gr(n.length>0,"Expected at least one writable signer key");const[l]=n[0];Gr(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new ft(l)),...r.map(([l])=>new ft(l)),...i.map(([l])=>new ft(l)),...s.map(([l])=>new ft(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new ft(s),l=e.findIndex(c=>c.equals(a));l>=0&&(Gr(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const Gme="Reached end of buffer unexpectedly";function Ku(t){if(t.length===0)throw new Error(Gme);return t.shift()}function Ha(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(Gme);return t.splice(...e)}class Ad{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new ft(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:as.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new G2(this.staticAccountKeys)}static compile(e){const n=oP.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new G2(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:as.encode(a.data)}));return new Ad({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];za(n,e);const r=this.instructions.map(h=>{const{accounts:m,programIdIndex:g}=h,x=Array.from(as.decode(h.data));let v=[];za(v,m.length);let b=[];return za(b,x.length),{programIdIndex:g,keyIndicesCount:an.from(v),keyIndices:m,dataLength:an.from(b),data:x}});let i=[];za(i,r.length);let s=an.alloc(my);an.from(i).copy(s);let o=i.length;r.forEach(h=>{const g=Ee.struct([Ee.u8("programIdIndex"),Ee.blob(h.keyIndicesCount.length,"keyIndicesCount"),Ee.seq(Ee.u8("keyIndex"),h.keyIndices.length,"keyIndices"),Ee.blob(h.dataLength.length,"dataLength"),Ee.seq(Ee.u8("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=g}),s=s.slice(0,o);const a=Ee.struct([Ee.blob(1,"numRequiredSignatures"),Ee.blob(1,"numReadonlySignedAccounts"),Ee.blob(1,"numReadonlyUnsignedAccounts"),Ee.blob(n.length,"keyCount"),Ee.seq(En("key"),e,"keys"),En("recentBlockhash")]),l={numRequiredSignatures:an.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:an.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:an.from([this.header.numReadonlyUnsignedAccounts]),keyCount:an.from(n),keys:this.accountKeys.map(h=>Mi(h.toBytes())),recentBlockhash:as.decode(this.recentBlockhash)};let c=an.alloc(2048);const u=a.encode(l,c);return s.copy(c,u),c.slice(0,u+s.length)}static from(e){let n=[...e];const r=Ku(n);if(r!==(r&$me))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Ku(n),s=Ku(n),o=$a(n);let a=[];for(let m=0;m<o;m++){const g=Ha(n,0,sh);a.push(new ft(an.from(g)))}const l=Ha(n,0,sh),c=$a(n);let u=[];for(let m=0;m<c;m++){const g=Ku(n),x=$a(n),v=Ha(n,0,x),b=$a(n),w=Ha(n,0,b),k=as.encode(an.from(w));u.push({programIdIndex:g,accounts:v,data:k})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:as.encode(an.from(l)),accountKeys:a,instructions:u};return new Ad(h)}}class m1{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new G2(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=oP.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const h=n.extractTableLookup(u);if(h!==void 0){const[m,{writable:g,readonly:x}]=h;r.push(m),i.writable.push(...g),i.readonly.push(...x)}}const[o,a]=n.getMessageComponents(),c=new G2(a,i).compileInstructions(e.instructions);return new m1({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();za(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();za(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();za(s,this.addressTableLookups.length);const o=Ee.struct([Ee.u8("prefix"),Ee.struct([Ee.u8("numRequiredSignatures"),Ee.u8("numReadonlySignedAccounts"),Ee.u8("numReadonlyUnsignedAccounts")],"header"),Ee.blob(e.length,"staticAccountKeysLength"),Ee.seq(En(),this.staticAccountKeys.length,"staticAccountKeys"),En("recentBlockhash"),Ee.blob(r.length,"instructionsLength"),Ee.blob(n.length,"serializedInstructions"),Ee.blob(s.length,"addressTableLookupsLength"),Ee.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(my),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:as.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(my);for(const r of this.compiledInstructions){const i=Array();za(i,r.accountKeyIndexes.length);const s=Array();za(s,r.data.length);const o=Ee.struct([Ee.u8("programIdIndex"),Ee.blob(i.length,"encodedAccountKeyIndexesLength"),Ee.seq(Ee.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ee.blob(s.length,"encodedDataLength"),Ee.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(my);for(const r of this.addressTableLookups){const i=Array();za(i,r.writableIndexes.length);const s=Array();za(s,r.readonlyIndexes.length);const o=Ee.struct([En("accountKey"),Ee.blob(i.length,"encodedWritableIndexesLength"),Ee.seq(Ee.u8(),r.writableIndexes.length,"writableIndexes"),Ee.blob(s.length,"encodedReadonlyIndexesLength"),Ee.seq(Ee.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=Ku(n),i=r&$me;Gr(r!==i,"Expected versioned message but received legacy message");const s=i;Gr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Ku(n),numReadonlySignedAccounts:Ku(n),numReadonlyUnsignedAccounts:Ku(n)},a=[],l=$a(n);for(let x=0;x<l;x++)a.push(new ft(Ha(n,0,sh)));const c=as.encode(Ha(n,0,sh)),u=$a(n),h=[];for(let x=0;x<u;x++){const v=Ku(n),b=$a(n),w=Ha(n,0,b),k=$a(n),C=new Uint8Array(Ha(n,0,k));h.push({programIdIndex:v,accountKeyIndexes:w,data:C})}const m=$a(n),g=[];for(let x=0;x<m;x++){const v=new ft(Ha(n,0,sh)),b=$a(n),w=Ha(n,0,b),k=$a(n),C=Ha(n,0,k);g.push({accountKey:v,writableIndexes:w,readonlyIndexes:C})}return new m1({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:h,addressTableLookups:g})}}let Ef=(function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t})({});const Tft=an.alloc(zme).fill(0);class Di{constructor(e){this.keys=void 0,this.programId=void 0,this.data=an.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ga{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Di(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let v=0;v<n.length;v++)if(n[v].programId===void 0)throw new Error(`Transaction instruction index ${v} has undefined program id`);const i=[],s=[];n.forEach(v=>{v.keys.forEach(w=>{s.push({...w})});const b=v.programId.toString();i.includes(b)||i.push(b)}),i.forEach(v=>{s.push({pubkey:new ft(v),isSigner:!1,isWritable:!1})});const o=[];s.forEach(v=>{const b=v.pubkey.toString(),w=o.findIndex(k=>k.pubkey.toString()===b);w>-1?(o[w].isWritable=o[w].isWritable||v.isWritable,o[w].isSigner=o[w].isSigner||v.isSigner):o.push(v)}),o.sort(function(v,b){if(v.isSigner!==b.isSigner)return v.isSigner?-1:1;if(v.isWritable!==b.isWritable)return v.isWritable?-1:1;const w={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return v.pubkey.toBase58().localeCompare(b.pubkey.toBase58(),"en",w)});const a=o.findIndex(v=>v.pubkey.equals(r));if(a>-1){const[v]=o.splice(a,1);v.isSigner=!0,v.isWritable=!0,o.unshift(v)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const v of this.signatures){const b=o.findIndex(w=>w.pubkey.equals(v.publicKey));if(b>-1)o[b].isSigner||(o[b].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${v.publicKey.toString()}`)}let l=0,c=0,u=0;const h=[],m=[];o.forEach(({pubkey:v,isSigner:b,isWritable:w})=>{b?(h.push(v.toString()),l+=1,w||(c+=1)):(m.push(v.toString()),w||(u+=1))});const g=h.concat(m),x=n.map(v=>{const{data:b,programId:w}=v;return{programIdIndex:g.indexOf(w.toString()),accounts:v.keys.map(k=>g.indexOf(k.pubkey.toString())),data:as.encode(b)}});return x.forEach(v=>{Gr(v.programIdIndex>=0),v.accounts.forEach(b=>Gr(b>=0))}),new Ad({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:g,recentBlockhash:e,instructions:x})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=gft(r,i.secretKey);this._addSignature(i.publicKey,Mi(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Gr(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=an.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):yft(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];za(r,n.length);const i=r.length+n.length*64+e.length,s=an.alloc(i);return Gr(n.length<256),an.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(Gr(o.length===64,"signature has invalid length"),an.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),Gr(s.length<=my,`Transaction too large: ${s.length} > ${my}`),s}get keys(){return Gr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Gr(this.instructions.length===1),this.instructions[0].programId}get data(){return Gr(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=$a(n);let i=[];for(let s=0;s<r;s++){const o=Ha(n,0,zme);i.push(as.encode(an.from(o)))}return Ga.populate(Ad.from(n),i)}static populate(e,n=[]){const r=new Ga;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==as.encode(Tft)?null:as.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Di({keys:s,programId:e.accountKeys[i.programIdIndex],data:as.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class Kme{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,n){const{header:r,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:l}=r,c=o-a;Gr(c>0,"Message header is invalid");const u=e.staticAccountKeys.length-o-l;Gr(u>=0,"Message header is invalid");const h=e.getAccountKeys(n),m=h.get(0);if(m===void 0)throw new Error("Failed to decompile message because no account keys were found");const g=[];for(const x of i){const v=[];for(const w of x.accountKeyIndexes){const k=h.get(w);if(k===void 0)throw new Error(`Failed to find key for account key index ${w}`);const C=w<o;let R;C?R=w<c:w<h.staticAccountKeys.length?R=w-o<u:R=w-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,v.push({pubkey:k,isSigner:w<r.numRequiredSignatures,isWritable:R})}const b=h.get(x.programIdIndex);if(b===void 0)throw new Error(`Failed to find program id for program id index ${x.programIdIndex}`);g.push(new Di({programId:b,data:Mi(x.data),keys:v}))}return new Kme({payerKey:m,instructions:g,recentBlockhash:s})}compileToLegacyMessage(){return Ad.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return m1.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}const kft=160,Cft=64,Nft=kft/Cft,Pft=1e3/Nft,J0t=new ft("SysvarC1ock11111111111111111111111111111111");new ft("SysvarEpochSchedu1e111111111111111111111111");new ft("Sysvar1nstructions1111111111111111111111111");const U4=new ft("SysvarRecentB1ockHashes11111111111111111111"),JZ=new ft("SysvarRent111111111111111111111111111111111");new ft("SysvarRewards111111111111111111111111111111");new ft("SysvarS1otHashes111111111111111111111111111");new ft("SysvarS1otHistory11111111111111111111111111");new ft("SysvarStakeHistory1111111111111111111111111");class XZ extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class Dt extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Ag(t){return new Promise(e=>setTimeout(e,t))}function As(t,e){const n=t.layout.span>=0?t.layout.span:qme(t,e),r=an.alloc(n),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,r),r}const _ft=Ee.nu64("lamportsPerSignature"),Wme=Ee.struct([Ee.u32("version"),Ee.u32("state"),En("authorizedPubkey"),En("nonce"),Ee.struct([_ft],"feeCalculator")]),QZ=Wme.span;class f7{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=Wme.decode(Mi(e),0);return new f7({authorizedPubkey:new ft(n.authorizedPubkey),nonce:new ft(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function Lx(t){const e=Ee.blob(8,t),n=e.decode.bind(e),r=e.encode.bind(e),i=e,s=bdt();return i.decode=(o,a)=>{const l=n(o,a);return s.decode(l)},i.encode=(o,a,l)=>{const c=s.encode(o);return r(c,a,l)},i}const Ca=Object.freeze({Create:{index:0,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports"),Ee.ns64("space"),En("programId")])},Assign:{index:1,layout:Ee.struct([Ee.u32("instruction"),En("programId")])},Transfer:{index:2,layout:Ee.struct([Ee.u32("instruction"),Lx("lamports")])},CreateWithSeed:{index:3,layout:Ee.struct([Ee.u32("instruction"),En("base"),zg("seed"),Ee.ns64("lamports"),Ee.ns64("space"),En("programId")])},AdvanceNonceAccount:{index:4,layout:Ee.struct([Ee.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:Ee.struct([Ee.u32("instruction"),En("authorized")])},AuthorizeNonceAccount:{index:7,layout:Ee.struct([Ee.u32("instruction"),En("authorized")])},Allocate:{index:8,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("space")])},AllocateWithSeed:{index:9,layout:Ee.struct([Ee.u32("instruction"),En("base"),zg("seed"),Ee.ns64("space"),En("programId")])},AssignWithSeed:{index:10,layout:Ee.struct([Ee.u32("instruction"),En("base"),zg("seed"),En("programId")])},TransferWithSeed:{index:11,layout:Ee.struct([Ee.u32("instruction"),Lx("lamports"),zg("seed"),En("programId")])},UpgradeNonceAccount:{index:12,layout:Ee.struct([Ee.u32("instruction")])}});class Dx{constructor(){}static createAccount(e){const n=Ca.Create,r=As(n,{lamports:e.lamports,space:e.space,programId:Mi(e.programId.toBuffer())});return new Di({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const i=Ca.TransferWithSeed;n=As(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Mi(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Ca.Transfer;n=As(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Di({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const i=Ca.AssignWithSeed;n=As(i,{base:Mi(e.basePubkey.toBuffer()),seed:e.seed,programId:Mi(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ca.Assign;n=As(i,{programId:Mi(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Di({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=Ca.CreateWithSeed,r=As(n,{base:Mi(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Mi(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Di({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const n=new Ga;"basePubkey"in e&&"seed"in e?n.add(Dx.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:QZ,programId:this.programId})):n.add(Dx.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:QZ,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=Ca.InitializeNonceAccount,r=As(n,{authorized:Mi(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:U4,isSigner:!1,isWritable:!1},{pubkey:JZ,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Di(i)}static nonceAdvance(e){const n=Ca.AdvanceNonceAccount,r=As(n),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:U4,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Di(i)}static nonceWithdraw(e){const n=Ca.WithdrawNonceAccount,r=As(n,{lamports:e.lamports});return new Di({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:U4,isSigner:!1,isWritable:!1},{pubkey:JZ,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=Ca.AuthorizeNonceAccount,r=As(n,{authorized:Mi(e.newAuthorizedPubkey.toBuffer())});return new Di({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const i=Ca.AllocateWithSeed;n=As(i,{base:Mi(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Mi(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ca.Allocate;n=As(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Di({keys:r,programId:this.programId,data:n})}}Dx.programId=new ft("11111111111111111111111111111111");new ft("BPFLoader2111111111111111111111111111111111");function Ift(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F4,ZZ;function Rft(){if(ZZ)return F4;ZZ=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,l,c,u,h;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(h=t.call(r),h==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(h==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)c=l[s],u=n(r[c],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return F4=function(r){var i=n(r,!1);if(i!==void 0)return""+i},F4}var Oft=Rft(),eee=Ift(Oft);const jb=32;function $4(t){let e=0;for(;t>1;)t/=2,e++;return e}function Mft(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class Lft{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=$4(Mft(e+jb+1))-$4(jb)-1,r=this.getSlotsInEpoch(n),i=e-(r-jb);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*jb:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+$4(jb)):this.slotsPerEpoch}}var Dft=globalThis.fetch;class jft extends tft{constructor(e,n,r){const i=s=>{const o=Zdt(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function Bft(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const tee=56;class nee{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=Bft(Uft,e),r=e.length-tee;Gr(r>=0,"lookup table is invalid"),Gr(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=Ee.struct([Ee.seq(En(),i,"addresses")]).decode(e.slice(tee));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new ft(n.authority[0]):void 0,addresses:s.map(o=>new ft(o))}}}const Uft={index:1,layout:Ee.struct([Ee.u32("typeIndex"),Lx("deactivationSlot"),Ee.nu64("lastExtendedSlot"),Ee.u8("lastExtendedStartIndex"),Ee.u8(),Ee.seq(En(),Ee.offset(Ee.u8(),-1),"authority")])},Fft=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function $ft(t){const e=t.match(Fft);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const jr=_E(c7(ft),ct(),t=>new ft(t)),Yme=u7([ct(),Or("base64")]),h7=_E(c7(an),Yme,t=>an.from(t[0],"base64")),zft=30*1e3;function Hft(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function dr(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function ree(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Jme(t){return oo([nt({jsonrpc:Or("2.0"),id:ct(),result:t}),nt({jsonrpc:Or("2.0"),id:ct(),error:nt({code:bv(),message:ct(),data:Ht(Cdt())})})])}const Vft=Jme(bv());function hn(t){return _E(Jme(t),Vft,e=>"error"in e?e:{...e,result:ht(e.result,t)})}function ti(t){return hn(nt({context:nt({slot:Me()}),value:t}))}function aP(t){return nt({context:nt({slot:Me()}),value:t})}function z4(t,e){return t===0?new m1({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new ft(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:as.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Ad(e)}const qft=nt({foundation:Me(),foundationTerm:Me(),initial:Me(),taper:Me(),terminal:Me()}),Gft=hn(xt(vt(nt({epoch:Me(),effectiveSlot:Me(),amount:Me(),postBalance:Me(),commission:Ht(vt(Me()))})))),Kft=xt(nt({slot:Me(),prioritizationFee:Me()})),Wft=nt({total:Me(),validator:Me(),foundation:Me(),epoch:Me()}),Yft=nt({epoch:Me(),slotIndex:Me(),slotsInEpoch:Me(),absoluteSlot:Me(),blockHeight:Ht(Me()),transactionCount:Ht(Me())}),Jft=nt({slotsPerEpoch:Me(),leaderScheduleSlotOffset:Me(),warmup:qc(),firstNormalEpoch:Me(),firstNormalSlot:Me()}),Xft=Pme(ct(),xt(Me())),t0=vt(oo([nt({}),ct()])),Qft=nt({err:t0}),Zft=Or("receivedSignature"),eht=nt({"solana-core":ct(),"feature-set":Ht(Me())}),tht=nt({program:ct(),programId:jr,parsed:bv()}),nht=nt({programId:jr,accounts:xt(jr),data:ct()}),iee=ti(nt({err:vt(oo([nt({}),ct()])),logs:vt(xt(ct())),accounts:Ht(vt(xt(vt(nt({executable:qc(),owner:ct(),lamports:Me(),data:xt(ct()),rentEpoch:Ht(Me())}))))),unitsConsumed:Ht(Me()),returnData:Ht(vt(nt({programId:ct(),data:u7([ct(),Or("base64")])}))),innerInstructions:Ht(vt(xt(nt({index:Me(),instructions:xt(oo([tht,nht]))}))))})),rht=ti(nt({byIdentity:Pme(ct(),xt(Me())),range:nt({firstSlot:Me(),lastSlot:Me()})}));function iht(t,e,n,r,i,s){const o=n||Dft;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(u,h)=>{const m=await new Promise((g,x)=>{try{r(u,h,(v,b)=>g([v,b]))}catch(v){x(v)}});return await o(...m)}),new Xdt(async(u,h)=>{const m={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},ipt)};try{let g=5,x,v=500;for(;l?x=await l(t,m):x=await o(t,m),!(x.status!==429||i===!0||(g-=1,g===0));)console.error(`Server responded with ${x.status} ${x.statusText}.  Retrying after ${v}ms delay...`),await Ag(v),v*=2;const b=await x.text();x.ok?h(null,b):h(new Error(`${x.status} ${x.statusText}: ${b}`))}catch(g){g instanceof Error&&h(g)}},{})}function sht(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function oht(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const aht=hn(qft),lht=hn(Wft),cht=hn(Kft),uht=hn(Yft),dht=hn(Jft),fht=hn(Xft),hht=hn(Me()),pht=ti(nt({total:Me(),circulating:Me(),nonCirculating:Me(),nonCirculatingAccounts:xt(jr)})),pD=nt({amount:ct(),uiAmount:vt(Me()),decimals:Me(),uiAmountString:Ht(ct())}),mht=ti(xt(nt({address:jr,amount:ct(),uiAmount:vt(Me()),decimals:Me(),uiAmountString:Ht(ct())}))),ght=ti(xt(nt({pubkey:jr,account:nt({executable:qc(),owner:jr,lamports:Me(),data:h7,rentEpoch:Me()})}))),mD=nt({program:ct(),parsed:bv(),space:Me()}),yht=ti(xt(nt({pubkey:jr,account:nt({executable:qc(),owner:jr,lamports:Me(),data:mD,rentEpoch:Me()})}))),xht=ti(xt(nt({lamports:Me(),address:jr}))),g1=nt({executable:qc(),owner:jr,lamports:Me(),data:h7,rentEpoch:Me()}),vht=nt({pubkey:jr,account:g1}),bht=_E(oo([c7(an),mD]),oo([Yme,mD]),t=>Array.isArray(t)?ht(t,h7):t),gD=nt({executable:qc(),owner:jr,lamports:Me(),data:bht,rentEpoch:Me()}),wht=nt({pubkey:jr,account:gD}),Eht=nt({state:oo([Or("active"),Or("inactive"),Or("activating"),Or("deactivating")]),active:Me(),inactive:Me()}),Sht=hn(xt(nt({signature:ct(),slot:Me(),err:t0,memo:vt(ct()),blockTime:Ht(vt(Me()))}))),Aht=hn(xt(nt({signature:ct(),slot:Me(),err:t0,memo:vt(ct()),blockTime:Ht(vt(Me()))}))),Tht=nt({subscription:Me(),result:aP(g1)}),kht=nt({pubkey:jr,account:g1}),Cht=nt({subscription:Me(),result:aP(kht)}),Nht=nt({parent:Me(),slot:Me(),root:Me()}),Pht=nt({subscription:Me(),result:Nht}),_ht=oo([nt({type:oo([Or("firstShredReceived"),Or("completed"),Or("optimisticConfirmation"),Or("root")]),slot:Me(),timestamp:Me()}),nt({type:Or("createdBank"),parent:Me(),slot:Me(),timestamp:Me()}),nt({type:Or("frozen"),slot:Me(),timestamp:Me(),stats:nt({numTransactionEntries:Me(),numSuccessfulTransactions:Me(),numFailedTransactions:Me(),maxTransactionsPerEntry:Me()})}),nt({type:Or("dead"),slot:Me(),timestamp:Me(),err:ct()})]),Iht=nt({subscription:Me(),result:_ht}),Rht=nt({subscription:Me(),result:aP(oo([Qft,Zft]))}),Oht=nt({subscription:Me(),result:Me()}),Mht=nt({pubkey:ct(),gossip:vt(ct()),tpu:vt(ct()),rpc:vt(ct()),version:vt(ct())}),see=nt({votePubkey:ct(),nodePubkey:ct(),activatedStake:Me(),epochVoteAccount:qc(),epochCredits:xt(u7([Me(),Me(),Me()])),commission:Me(),lastVote:Me(),rootSlot:vt(Me())}),Lht=hn(nt({current:xt(see),delinquent:xt(see)})),Dht=oo([Or("processed"),Or("confirmed"),Or("finalized")]),jht=nt({slot:Me(),confirmations:vt(Me()),err:t0,confirmationStatus:Ht(Dht)}),Bht=ti(xt(vt(jht))),Uht=hn(Me()),Xme=nt({accountKey:jr,writableIndexes:xt(Me()),readonlyIndexes:xt(Me())}),p7=nt({signatures:xt(ct()),message:nt({accountKeys:xt(ct()),header:nt({numRequiredSignatures:Me(),numReadonlySignedAccounts:Me(),numReadonlyUnsignedAccounts:Me()}),instructions:xt(nt({accounts:xt(Me()),data:ct(),programIdIndex:Me()})),recentBlockhash:ct(),addressTableLookups:Ht(xt(Xme))})}),Qme=nt({pubkey:jr,signer:qc(),writable:qc(),source:Ht(oo([Or("transaction"),Or("lookupTable")]))}),Zme=nt({accountKeys:xt(Qme),signatures:xt(ct())}),e0e=nt({parsed:bv(),program:ct(),programId:jr}),t0e=nt({accounts:xt(jr),data:ct(),programId:jr}),Fht=oo([t0e,e0e]),$ht=oo([nt({parsed:bv(),program:ct(),programId:ct()}),nt({accounts:xt(ct()),data:ct(),programId:ct()})]),n0e=_E(Fht,$ht,t=>"accounts"in t?ht(t,t0e):ht(t,e0e)),r0e=nt({signatures:xt(ct()),message:nt({accountKeys:xt(Qme),instructions:xt(n0e),recentBlockhash:ct(),addressTableLookups:Ht(vt(xt(Xme)))})}),K2=nt({accountIndex:Me(),mint:ct(),owner:Ht(ct()),programId:Ht(ct()),uiTokenAmount:pD}),i0e=nt({writable:xt(jr),readonly:xt(jr)}),lP=nt({err:t0,fee:Me(),innerInstructions:Ht(vt(xt(nt({index:Me(),instructions:xt(nt({accounts:xt(Me()),data:ct(),programIdIndex:Me()}))})))),preBalances:xt(Me()),postBalances:xt(Me()),logMessages:Ht(vt(xt(ct()))),preTokenBalances:Ht(vt(xt(K2))),postTokenBalances:Ht(vt(xt(K2))),loadedAddresses:Ht(i0e),computeUnitsConsumed:Ht(Me()),costUnits:Ht(Me())}),m7=nt({err:t0,fee:Me(),innerInstructions:Ht(vt(xt(nt({index:Me(),instructions:xt(n0e)})))),preBalances:xt(Me()),postBalances:xt(Me()),logMessages:Ht(vt(xt(ct()))),preTokenBalances:Ht(vt(xt(K2))),postTokenBalances:Ht(vt(xt(K2))),loadedAddresses:Ht(i0e),computeUnitsConsumed:Ht(Me()),costUnits:Ht(Me())}),wv=oo([Or(0),Or("legacy")]),n0=nt({pubkey:ct(),lamports:Me(),postBalance:vt(Me()),rewardType:vt(ct()),commission:Ht(vt(Me()))}),zht=hn(vt(nt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Me(),transactions:xt(nt({transaction:p7,meta:vt(lP),version:Ht(wv)})),rewards:Ht(xt(n0)),blockTime:vt(Me()),blockHeight:vt(Me())}))),Hht=hn(vt(nt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Me(),rewards:Ht(xt(n0)),blockTime:vt(Me()),blockHeight:vt(Me())}))),Vht=hn(vt(nt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Me(),transactions:xt(nt({transaction:Zme,meta:vt(lP),version:Ht(wv)})),rewards:Ht(xt(n0)),blockTime:vt(Me()),blockHeight:vt(Me())}))),qht=hn(vt(nt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Me(),transactions:xt(nt({transaction:r0e,meta:vt(m7),version:Ht(wv)})),rewards:Ht(xt(n0)),blockTime:vt(Me()),blockHeight:vt(Me())}))),Ght=hn(vt(nt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Me(),transactions:xt(nt({transaction:Zme,meta:vt(m7),version:Ht(wv)})),rewards:Ht(xt(n0)),blockTime:vt(Me()),blockHeight:vt(Me())}))),Kht=hn(vt(nt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Me(),rewards:Ht(xt(n0)),blockTime:vt(Me()),blockHeight:vt(Me())}))),Wht=hn(vt(nt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Me(),transactions:xt(nt({transaction:p7,meta:vt(lP)})),rewards:Ht(xt(n0)),blockTime:vt(Me())}))),oee=hn(vt(nt({blockhash:ct(),previousBlockhash:ct(),parentSlot:Me(),signatures:xt(ct()),blockTime:vt(Me())}))),H4=hn(vt(nt({slot:Me(),meta:vt(lP),blockTime:Ht(vt(Me())),transaction:p7,version:Ht(wv)}))),tT=hn(vt(nt({slot:Me(),transaction:r0e,meta:vt(m7),blockTime:Ht(vt(Me())),version:Ht(wv)}))),Yht=ti(nt({blockhash:ct(),lastValidBlockHeight:Me()})),Jht=ti(qc()),Xht=nt({slot:Me(),numTransactions:Me(),numSlots:Me(),samplePeriodSecs:Me()}),Qht=hn(xt(Xht)),Zht=ti(vt(nt({feeCalculator:nt({lamportsPerSignature:Me()})}))),ept=hn(ct()),tpt=hn(ct()),npt=nt({err:t0,logs:xt(ct()),signature:ct()}),rpt=nt({result:aP(npt),subscription:Me()}),ipt={"solana-client":"js/1.0.0-maintenance"};class g7{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async u=>{const{commitment:h,config:m}=dr(u),g=this._buildArgs([],h,void 0,m),x=eee(g);return c[x]=c[x]??(async()=>{try{const v=await this._rpcRequest("getBlockHeight",g),b=ht(v,hn(Me()));if("error"in b)throw new Dt(b.error,"failed to get block height information");return b.result}finally{delete c[x]}})(),await c[x]}})();let r,i,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=Hft(e),this._rpcWsEndpoint=r||$ft(e),this._rpcClient=iht(e,i,s,o,a,l),this._rpcRequest=sht(this._rpcClient),this._rpcBatchRequest=oht(this._rpcClient),this._rpcWebSocket=new jft(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=ht(o,ti(Me()));if("error"in a)throw new Dt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=ht(n,hn(vt(Me())));if("error"in r)throw new Dt(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=ht(e,hn(Me()));if("error"in n)throw new Dt(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=ht(e,hht);if("error"in n)throw new Dt(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=ht(r,pht);if("error"in i)throw new Dt(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=ht(i,ti(pD));if("error"in s)throw new Dt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=ht(i,ti(pD));if("error"in s)throw new Dt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=dr(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=ht(l,ght);if("error"in c)throw new Dt(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=ht(o,yht);if("error"in a)throw new Dt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=ht(i,xht);if("error"in s)throw new Dt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=ht(i,mht);if("error"in s)throw new Dt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=ht(o,ti(vt(g1)));if("error"in a)throw new Dt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=ht(o,ti(vt(gD)));if("error"in a)throw new Dt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=dr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=ht(a,ti(xt(vt(gD))));if("error"in l)throw new Dt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=dr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=ht(a,ti(xt(vt(g1))));if("error"in l)throw new Dt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=dr(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=ht(a,hn(Eht));if("error"in l)throw new Dt(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=dr(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:ree(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=xt(vht),u=o.withContext===!0?ht(l,ti(c)):ht(l,hn(c));if("error"in u)throw new Dt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=ht(o,hn(xt(wht)));if("error"in a)throw new Dt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=as.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Gr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(h,m)=>{r=void 0;const g={context:m,value:h};l({__type:Ef.PROCESSED,response:g})},e);const u=new Promise(h=>{r==null?h():i=this._onSubscriptionStateChange(r,m=>{m==="subscribed"&&h()})});(async()=>{if(await u,s)return;const h=await this.getSignatureStatus(n);if(s||h==null)return;const{context:m,value:g}=h;if(g!=null)if(g!=null&&g.err)c(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:Ef.PROCESSED,response:{context:m,value:g}})}})()}catch(u){c(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(h=>{const m=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await m();if(!s){for(;g<=r;)if(await Ag(1e3),s||(g=await m(),s))return;h({__type:Ef.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(n);let u;try{const h=await Promise.race([c,l,o]);if(h.__type===Ef.PROCESSED)u=h.response;else throw new Hme(i)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(g=>{let x=s,v=null;const b=async()=>{try{const{context:w,value:k}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return v=w.slot,k==null?void 0:k.nonce}catch{return x}};(async()=>{if(x=await b(),!a)for(;;){if(s!==x){g({__type:Ef.NONCE_INVALID,slotInWhichNonceDidAdvance:v});return}if(await Ag(2e3),a||(x=await b(),a))return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(n);let m;try{const g=await Promise.race([h,u,l]);if(g.__type===Ef.PROCESSED)m=g.response;else{let x;for(;;){const v=await this.getSignatureStatus(o);if(v==null)break;if(v.context.slot<(g.slotInWhichNonceDidAdvance??r)){await Ag(400);continue}x=v;break}if(x!=null&&x.value){const v=e||"finalized",{confirmationStatus:b}=x.value;switch(v){case"processed":case"recent":if(b!=="processed"&&b!=="confirmed"&&b!=="finalized")throw new Zb(o);break;case"confirmed":case"single":case"singleGossip":if(b!=="confirmed"&&b!=="finalized")throw new Zb(o);break;case"finalized":case"max":case"root":if(b!=="finalized")throw new Zb(o);break;default:}m={context:x.context,value:{err:x.value.err}}}else throw new Zb(o)}}finally{a=!0,c()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:Ef.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,i]);if(l.__type===Ef.PROCESSED)a=l.response;else throw new Vme(n,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=ht(e,hn(xt(Mht)));if("error"in n)throw new Dt(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=ht(r,Lht);if("error"in i)throw new Dt(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=ht(s,hn(Me()));if("error"in o)throw new Dt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=ht(s,hn(ct()));if("error"in o)throw new Dt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=ht(i,hn(xt(jr)));if("error"in s)throw new Dt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);Gr(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=ht(i,Bht);if("error"in s)throw new Dt(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=ht(s,hn(Me()));if("error"in o)throw new Dt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=ht(r,aht);if("error"in i)throw new Dt(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=dr(r),o=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=ht(a,Gft);if("error"in l)throw new Dt(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=ht(e,lht);if("error"in n)throw new Dt(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=ht(s,uht);if("error"in o)throw new Dt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=ht(e,dht);if("error"in n)throw new Dt(n.error,"failed to get epoch schedule");const r=n.result;return new Lft(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=ht(e,fht);if("error"in n)throw new Dt(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=ht(i,Uht);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=ht(n,Qht);if("error"in r)throw new Dt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=ht(i,Zht);if("error"in s)throw new Dt(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=Mi(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=ht(s,ti(vt(Me())));if("error"in o)throw new Dt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=ht(i,cht);if("error"in s)throw new Dt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=ht(s,Yht);if("error"in o)throw new Dt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=ht(o,Jht);if("error"in a)throw new Dt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=ht(e,hn(eht));if("error"in n)throw new Dt(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=ht(e,hn(ct()));if("error"in n)throw new Dt(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=ht(o,Vht);if("error"in a)throw a.error;return a.result}case"none":{const a=ht(o,Hht);if("error"in a)throw a.error;return a.result}default:{const a=ht(o,zht);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:u,version:h})=>({meta:u,transaction:{...c,message:z4(h,c.message)},version:h}))}:null}}}catch(a){throw new Dt(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=ht(o,Ght);if("error"in a)throw a.error;return a.result}case"none":{const a=ht(o,Kht);if("error"in a)throw a.error;return a.result}default:{const a=ht(o,qht);if("error"in a)throw a.error;return a.result}}}catch(a){throw new Dt(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=ht(s,rht);if("error"in o)throw new Dt(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=ht(o,H4);if("error"in a)throw new Dt(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:z4(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=dr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=ht(o,tT);if("error"in a)throw new Dt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=dr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=ht(l,tT);if("error"in c)throw new Dt(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:i}=dr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=ht(l,H4);if("error"in c)throw new Dt(c.error,"failed to get transactions");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:z4(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=ht(i,Wht);if("error"in s)throw new Dt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const u=new Ad(l.message);return{meta:c,transaction:{...l,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:Ga.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=ht(s,hn(xt(Me())));if("error"in o)throw new Dt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=ht(i,oee);if("error"in s)throw new Dt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=ht(i,oee);if("error"in s)throw new Dt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=ht(i,H4);if("error"in s)throw new Dt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Ad(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Ga.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=ht(i,tT);if("error"in s)throw new Dt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=ht(o,tT);if("error"in a)throw new Dt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=ht(s,Sht);if("error"in o)throw new Dt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=ht(s,Aht);if("error"in o)throw new Dt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new nee({key:e,state:nee.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=f7.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=ht(r,ept);if("error"in i)throw new Dt(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ag(100);const r=Date.now()-this._blockhashInfo.lastFetch>=zft;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Ag(Pft/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=dr(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=ht(s,ti(Me()));if("error"in o)throw new Dt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const v=e.serialize(),b=an.from(v).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const w=n||{};w.encoding="base64","commitment"in w||(w.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(w.innerInstructions=n.innerInstructions);const k=[b,w],C=await this._rpcRequest("simulateTransaction",k),R=ht(C,iee);if("error"in R)throw new Error("failed to simulate transaction: "+R.error.message);return R.result}let i;if(e instanceof Ga){let x=e;i=new Ga,i.feePayer=x.feePayer,i.instructions=e.instructions,i.nonceInfo=x.nonceInfo,i.signatures=x.signatures}else i=Ga.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let x=this._disableBlockhashCaching;for(;;){const v=await this._blockhashWithExpiryBlockHeight(x);if(i.lastValidBlockHeight=v.lastValidBlockHeight,i.recentBlockhash=v.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const b=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(b)&&!this._blockhashInfo.transactionSignatures.includes(b)){this._blockhashInfo.simulatedSignatures.push(b);break}else x=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(r){const x=(Array.isArray(r)?r:o.nonProgramIds()).map(v=>v.toBase58());u.accounts={encoding:"base64",addresses:x}}s&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const h=[c,u],m=await this._rpcRequest("simulateTransaction",h),g=ht(m,iee);if("error"in g){let x;if("data"in g.error&&(x=g.error.data.logs,x&&Array.isArray(x))){const v=`
    `,b=v+x.join(v);console.error(g.error.message,b)}throw new XZ({action:"simulate",signature:"",transactionMessage:g.error.message,logs:x})}return g.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=Mi(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=ht(a,tpt);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new XZ({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=ht(e,Tht);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=eee([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Gr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=dr(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=ht(e,Cht);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=dr(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:ree(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=ht(e,rpt);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=ht(e,Pht);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=ht(e,Iht);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=ht(e,Rht);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=ht(e,Oht);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class oa{constructor(e){this._keypair=void 0,this._keypair=e??KZ()}static generate(){return new oa(KZ())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const i=e.slice(0,32),s=hD(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new oa({publicKey:r,secretKey:e})}static fromSeed(e){const n=hD(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new oa({publicKey:n,secretKey:r})}get publicKey(){return new ft(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:Ee.struct([Ee.u32("instruction"),Lx("recentSlot"),Ee.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Ee.struct([Ee.u32("instruction")])},ExtendLookupTable:{index:2,layout:Ee.struct([Ee.u32("instruction"),Lx(),Ee.seq(En(),Ee.offset(Ee.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Ee.struct([Ee.u32("instruction")])},CloseLookupTable:{index:4,layout:Ee.struct([Ee.u32("instruction")])}});new ft("AddressLookupTab1e1111111111111111111111111");const nT=Object.freeze({RequestUnits:{index:0,layout:Ee.struct([Ee.u8("instruction"),Ee.u32("units"),Ee.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Ee.struct([Ee.u8("instruction"),Ee.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Ee.struct([Ee.u8("instruction"),Ee.u32("units")])},SetComputeUnitPrice:{index:3,layout:Ee.struct([Ee.u8("instruction"),Lx("microLamports")])}});class spt{constructor(){}static requestUnits(e){const n=nT.RequestUnits,r=As(n,e);return new Di({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=nT.RequestHeapFrame,r=As(n,e);return new Di({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=nT.SetComputeUnitLimit,r=As(n,e);return new Di({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=nT.SetComputeUnitPrice,r=As(n,{microLamports:BigInt(e.microLamports)});return new Di({keys:[],programId:this.programId,data:r})}}spt.programId=new ft("ComputeBudget111111111111111111111111111111");Ee.struct([Ee.u8("numSignatures"),Ee.u8("padding"),Ee.u16("signatureOffset"),Ee.u16("signatureInstructionIndex"),Ee.u16("publicKeyOffset"),Ee.u16("publicKeyInstructionIndex"),Ee.u16("messageDataOffset"),Ee.u16("messageDataSize"),Ee.u16("messageInstructionIndex")]);new ft("Ed25519SigVerify111111111111111111111111111");mft.utils.isValidPrivateKey;Ee.struct([Ee.u8("numSignatures"),Ee.u16("signatureOffset"),Ee.u8("signatureInstructionIndex"),Ee.u16("ethAddressOffset"),Ee.u8("ethAddressInstructionIndex"),Ee.u16("messageDataOffset"),Ee.u16("messageDataSize"),Ee.u8("messageInstructionIndex"),Ee.blob(20,"ethAddress"),Ee.blob(64,"signature"),Ee.u8("recoveryId")]);new ft("KeccakSecp256k11111111111111111111111111111");var s0e;new ft("StakeConfig11111111111111111111111111111111");class o0e{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}s0e=o0e;o0e.default=new s0e(0,0,ft.default);Object.freeze({Initialize:{index:0,layout:Ee.struct([Ee.u32("instruction"),wft(),Eft()])},Authorize:{index:1,layout:Ee.struct([Ee.u32("instruction"),En("newAuthorized"),Ee.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:Ee.struct([Ee.u32("instruction")])},Split:{index:3,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},Withdraw:{index:4,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},Deactivate:{index:5,layout:Ee.struct([Ee.u32("instruction")])},Merge:{index:7,layout:Ee.struct([Ee.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:Ee.struct([Ee.u32("instruction"),En("newAuthorized"),Ee.u32("stakeAuthorizationType"),zg("authoritySeed"),En("authorityOwner")])}});new ft("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Ee.struct([Ee.u32("instruction"),Sft()])},Authorize:{index:1,layout:Ee.struct([Ee.u32("instruction"),En("newAuthorized"),Ee.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:Ee.struct([Ee.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:Ee.struct([Ee.u32("instruction"),Aft()])}});new ft("Vote111111111111111111111111111111111111111");new ft("Va1idator1nfo111111111111111111111111111111");nt({name:ct(),website:Ht(ct()),details:Ht(ct()),iconUrl:Ht(ct()),keybaseUsername:Ht(ct())});new ft("Vote111111111111111111111111111111111111111");Ee.struct([En("nodePubkey"),En("authorizedWithdrawer"),Ee.u8("commission"),Ee.nu64(),Ee.seq(Ee.struct([Ee.nu64("slot"),Ee.u32("confirmationCount")]),Ee.offset(Ee.u32(),-8),"votes"),Ee.u8("rootSlotValid"),Ee.nu64("rootSlot"),Ee.nu64(),Ee.seq(Ee.struct([Ee.nu64("epoch"),En("authorizedVoter")]),Ee.offset(Ee.u32(),-8),"authorizedVoters"),Ee.struct([Ee.seq(Ee.struct([En("authorizedPubkey"),Ee.nu64("epochOfLastAuthorizedSwitch"),Ee.nu64("targetEpoch")]),32,"buf"),Ee.nu64("idx"),Ee.u8("isEmpty")],"priorVoters"),Ee.nu64(),Ee.seq(Ee.struct([Ee.nu64("epoch"),Ee.nu64("credits"),Ee.nu64("prevCredits")]),Ee.offset(Ee.u32(),-8),"epochCredits"),Ee.struct([Ee.nu64("slot"),Ee.nu64("timestamp")],"lastTimestamp")]);const rT=1e9;var V4,aee;function opt(){if(aee)return V4;aee=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var v=0,b=0,w=0,k=x.length;w!==k&&x[w]===0;)w++,v++;for(var C=(k-w)*u+1>>>0,R=new Uint8Array(C);w!==k;){for(var B=x[w],O=0,F=C-1;(B!==0||O<b)&&F!==-1;F--,O++)B+=256*R[F]>>>0,R[F]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");b=O,w++}for(var H=C-b;H!==C&&R[H]===0;)H++;for(var j=l.repeat(v);H<C;++H)j+=e.charAt(R[H]);return j}function m(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var v=0,b=0,w=0;x[v]===l;)b++,v++;for(var k=(x.length-v)*c+1>>>0,C=new Uint8Array(k);x[v];){var R=x.charCodeAt(v);if(R>255)return;var B=n[R];if(B===255)return;for(var O=0,F=k-1;(B!==0||O<w)&&F!==-1;F--,O++)B+=a*C[F]>>>0,C[F]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");w=O,v++}for(var H=k-w;H!==k&&C[H]===0;)H++;for(var j=new Uint8Array(b+(k-H)),$=b;H!==k;)j[$++]=C[H++];return j}function g(x){var v=m(x);if(v)return v;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:m,decode:g}}return V4=t,V4}var q4,lee;function apt(){return lee||(lee=1,q4=opt()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),q4}var iT=apt();const IE=new ft("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new ft("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const cP=new ft("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new ft("So11111111111111111111111111111111111111112");new ft("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const y7=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var rp={},cee;function lpt(){if(cee)return rp;cee=1,Object.defineProperty(rp,"__esModule",{value:!0});function t(i){{const s=on.from(i);s.reverse();const o=s.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}rp.toBigIntLE=t;function e(i){{const s=i.toString("hex");return s.length===0?BigInt(0):BigInt(`0x${s}`)}}rp.toBigIntBE=e;function n(i,s){{const o=i.toString(16),a=on.from(o.padStart(s*2,"0").slice(0,s*2),"hex");return a.reverse(),a}}rp.toBufferLE=n;function r(i,s){{const o=i.toString(16);return on.from(o.padStart(s*2,"0").slice(0,s*2),"hex")}}return rp.toBufferBE=r,rp}var uee=lpt();const cpt=t=>e=>{const n=Ee.blob(t,e),{encode:r,decode:i}=y7(n),s=n;return s.decode=(o,a)=>{const l=i(o,a);return uee.toBigIntLE(on.from(l))},s.encode=(o,a,l)=>{const c=uee.toBufferLE(o,t);return r(c,a,l)},s},a0e=cpt(8),upt=t=>{const e=Ee.u8(t),{encode:n,decode:r}=y7(e),i=e;return i.decode=(s,o)=>!!r(s,o),i.encode=(s,o,a)=>{const l=Number(s);return n(l,o,a)},i},dee=t=>{const e=Ee.blob(32,t),{encode:n,decode:r}=y7(e),i=e;return i.decode=(s,o)=>{const a=r(s,o);return new ft(a)},i.encode=(s,o,a)=>{const l=s.toBuffer();return n(l,o,a)},i};class l0e extends Error{constructor(e){super(e)}}class c0e extends l0e{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var W2;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension"})(W2||(W2={}));function dpt(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof ft?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const u0e=Ee.struct([Ee.u32("mintAuthorityOption"),dee("mintAuthority"),a0e("supply"),Ee.u8("decimals"),upt("isInitialized"),Ee.u32("freezeAuthorityOption"),dee("freezeAuthority")]);u0e.span;async function yD(t,e,n=!1,r=IE,i=cP){if(!n&&!ft.isOnCurve(e.toBuffer()))throw new c0e;const[s]=await ft.findProgramAddress([e.toBuffer(),r.toBuffer(),t.toBuffer()],i);return s}function d0e(t,e,n,r,i=IE,s=cP){return fpt(t,e,n,r,on.alloc(0),i,s)}function fpt(t,e,n,r,i,s=IE,o=cP){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:Dx.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new Di({keys:a,programId:o,data:i})}const xD=Ee.struct([Ee.u8("instruction"),a0e("amount")]);function f0e(t,e,n,r,i=[],s=IE){const o=dpt([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,i),a=on.alloc(xD.span);return xD.encode({instruction:W2.Transfer,amount:BigInt(r)},a),new Di({keys:o,programId:s,data:a})}const fee=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:cP,MintLayout:u0e,TOKEN_PROGRAM_ID:IE,TokenError:l0e,get TokenInstruction(){return W2},TokenOwnerOffCurveError:c0e,createAssociatedTokenAccountInstruction:d0e,createTransferInstruction:f0e,getAssociatedTokenAddress:yD,transferInstructionData:xD},Symbol.toStringTag,{value:"Module"}));class hpt{constructor(){this.connection=new g7(hB,"confirmed")}createVaultKeypair(){return oa.generate()}getKeypairFromSecretKey(e){const n=Uint8Array.from(JSON.parse(e));return oa.fromSecretKey(n)}async getBalance(e){try{return await this.connection.getBalance(new ft(e))/rT}catch(n){return console.error("Error fetching balance:",n),0}}async wait(e){return new Promise(n=>setTimeout(n,e))}async getAccountInfoWithRetry(e,n=5){for(let r=0;r<n;r++)try{return await this.connection.getAccountInfo(e)}catch(i){if(console.warn(`Attempt ${r+1} failed to fetch account info: ${i.message}`),r===n-1)throw i;await this.wait(500*Math.pow(2,r))}return null}async getLatestBlockhashWithRetry(e=5){for(let n=0;n<e;n++)try{return await this.connection.getLatestBlockhash("confirmed")}catch(r){if(console.warn(`Attempt ${n+1} failed to get blockhash: ${r.message}`),n===e-1)throw new Error("Network error: Failed to fetch blockhash. Devnet may be down.");await this.wait(500*Math.pow(2,n))}throw new Error("Failed to get blockhash")}async getTokenBalances(e){const n=await this.getBalance(e);return ih.map(r=>({...r,balance:r.symbol==="SOL"?n:0}))}async airdrop(e){var n,r;try{const i=await this.connection.requestAirdrop(new ft(e),1*rT),s=await this.getLatestBlockhashWithRetry();return await this.connection.confirmTransaction({blockhash:s.blockhash,lastValidBlockHeight:s.lastValidBlockHeight,signature:i}),i}catch(i){throw(n=i.message)!=null&&n.includes("429")?new Error("Devnet Rate Limit Reached. Please try again later."):(r=i.message)!=null&&r.includes("limit reached")?new Error("Daily Airdrop Limit Reached for this IP."):i}}async connectWallet(){try{const{solana:e}=window;if(e&&e.isPhantom)return(await e.connect()).publicKey.toString();throw alert("Solana object not found! Get a Phantom Wallet "),new Error("No wallet found")}catch(e){throw console.error(e),e}}async pollForConfirmation(e,n=15,r=2e3){var i,s,o;for(let a=0;a<n;a++)try{const l=await this.connection.getSignatureStatus(e);if((i=l==null?void 0:l.value)!=null&&i.confirmationStatus){const c=l.value.confirmationStatus;if(c==="confirmed"||c==="finalized")return console.log(`[Solana]  Transaction confirmed (${c}) after ${a+1} attempts`),!0;c==="processed"&&console.log("[Solana]  Transaction processed, waiting for confirmation...")}if((s=l==null?void 0:l.value)!=null&&s.err)throw new Error(`Transaction failed on-chain: ${JSON.stringify(l.value.err)}`);await this.wait(r)}catch(l){if((o=l.message)!=null&&o.includes("failed on-chain"))throw l;console.warn(`[Solana] Poll attempt ${a+1} failed:`,l.message),await this.wait(r)}return!1}async sendTransactionWithRetry(e,n){var i,s;let r="";try{const o=await this.getLatestBlockhashWithRetry();if(e.recentBlockhash=o.blockhash,e.lastValidBlockHeight=o.lastValidBlockHeight,e.sign(...n),r=await this.connection.sendRawTransaction(e.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed"}),console.log(`[Solana]  Transaction sent: ${r.slice(0,16)}...`),!await this.pollForConfirmation(r,15,2e3)){console.warn(`[Solana]  Confirmation polling timed out, but transaction may have succeeded: ${r}`);const l=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw l.signature=r,l.isTimeout=!0,l}return r}catch(o){if(console.warn("Transaction Error:",o.name,o.message),o.name==="TransactionExpiredBlockheightExceededError"||(i=o.message)!=null&&i.includes("block height exceeded")||(s=o.message)!=null&&s.includes("timeout")||o.isTimeout){const a=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw a.signature=r,a.isTimeout=!0,a}throw o}}async transferSol(e,n,r){try{const i=new Ga().add(Dx.transfer({fromPubkey:e.publicKey,toPubkey:new ft(n),lamports:Math.floor(r*rT)}));return i.feePayer=e.publicKey,await this.sendTransactionWithRetry(i,[e])}catch(i){throw console.error("Transfer Error",i),new Error(`Transfer failed: ${i.message}`)}}async findPoolKeys(e,n){const{Liquidity:r,MARKET_STATE_LAYOUT_V3:i,LIQUIDITY_STATE_LAYOUT_V4:s,SPL_MINT_LAYOUT:o}=await Tl(async()=>{const{Liquidity:C,MARKET_STATE_LAYOUT_V3:R,LIQUIDITY_STATE_LAYOUT_V4:B,SPL_MINT_LAYOUT:O}=await import("./index-DWpaDHDn.js");return{Liquidity:C,MARKET_STATE_LAYOUT_V3:R,LIQUIDITY_STATE_LAYOUT_V4:B,SPL_MINT_LAYOUT:O}},[]),a=new ft(e),l=new ft(n),c=new ft(nKe),u=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:a.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:l.toBase58()}}],h=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:l.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:a.toBase58()}}];let m=await this.connection.getProgramAccounts(c,{filters:u});if(m.length===0&&(m=await this.connection.getProgramAccounts(c,{filters:h})),m.length===0)return null;const g=m[0],x=s.decode(g.account.data),v=x.marketId,b=await this.connection.getAccountInfo(v);if(!b)throw new Error("Failed to fetch market info");const w=i.decode(b.data),k=r.getAssociatedAuthority({programId:c}).publicKey;return{id:g.pubkey,baseMint:x.baseMint,quoteMint:x.quoteMint,lpMint:x.lpMint,baseDecimals:x.baseDecimal.toNumber(),quoteDecimals:x.quoteDecimal.toNumber(),lpDecimals:5,version:4,programId:c,authority:k,openOrders:x.openOrders,targetOrders:x.targetOrders,baseVault:x.baseVault,quoteVault:x.quoteVault,withdrawQueue:x.withdrawQueue,lpVault:x.lpVault,marketVersion:3,marketProgramId:x.marketProgramId,marketId:x.marketId,marketAuthority:r.getAssociatedAuthority({programId:x.marketProgramId}).publicKey,marketBaseVault:w.baseVault,marketQuoteVault:w.quoteVault,marketBids:w.bids,marketAsks:w.asks,marketEventQueue:w.eventQueue}}async executeSwap(e,n,r,i,s){const{Liquidity:o,Token:a,TokenAmount:l,Percent:c,TxVersion:u}=await Tl(async()=>{const{Liquidity:h,Token:m,TokenAmount:g,Percent:x,TxVersion:v}=await import("./index-DWpaDHDn.js");return{Liquidity:h,Token:m,TokenAmount:g,Percent:x,TxVersion:v}},[]);try{const h=U=>{console.log(`[Swap Status] ${U}`),s&&s(U)};h("Initializing Swap Protocol...");const m="So11111111111111111111111111111111111111112",g=n.trim()==="SOL"?m:n.trim(),x=r.trim()==="SOL"?m:r.trim();h("Fetching Pool Keys...");const v=await this.findPoolKeys(g,x);if(!v)throw new Error(`No Liquidity Pool found for ${g} <-> ${x} on Devnet.`);h("Calculating Amount Out...");const b=g===v.baseMint.toBase58(),{TOKEN_PROGRAM_ID:w}=await Tl(async()=>{const{TOKEN_PROGRAM_ID:U}=await Promise.resolve().then(()=>fee);return{TOKEN_PROGRAM_ID:U}},void 0),k=new a(w,new ft(g),b?v.baseDecimals:v.quoteDecimals),C=new a(w,new ft(x),b?v.quoteDecimals:v.baseDecimals),R=new l(k,i,!1),B=new c(25,100);h("Fetching Pool Reserves...");const O=await o.fetchInfo({connection:this.connection,poolKeys:v}),{amountOut:F,minAmountOut:H}=o.computeAmountOut({poolKeys:v,poolInfo:O,amountIn:R,currencyOut:C,slippage:B});h(`Calculated Amount Out: ${F.toFixed()} (Min: ${H.toFixed()})`),h("Building Swap Transaction...");const j=await this.getTokenAccountsByOwner(e.publicKey),{innerTransactions:$}=await o.makeSwapInstructionSimple({connection:this.connection,poolKeys:v,userKeys:{tokenAccounts:j,owner:e.publicKey},amountIn:R,amountOut:H,fixedSide:"in",makeTxVersion:u.V0});h("Sending Transaction to Devnet...");const W=await Promise.all($.map(async U=>{const{instructions:T,signers:_}=U,L=new Ga;return L.add(...T),L.feePayer=e.publicKey,L.recentBlockhash=(await this.connection.getLatestBlockhash()).blockhash,L.sign(e,..._),L}));let V="";for(const U of W){const T=await this.connection.sendRawTransaction(U.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed",maxRetries:5});if(console.log(`[Swap]  Transaction sent: ${T.slice(0,16)}...`),!await this.pollForConfirmation(T,15,2e3))throw new Error("Transaction confirmation timed out - please check explorer for status");V=T}return h("Transaction Confirmed!"),V}catch(h){throw console.error("Swap Error:",h),new Error(`Swap failed: ${h.message}`)}}async getWalletAssets(e){const n=new ft(e),r=await this.getBalance(e),s=(await this.getTokenAccountsByOwner(n)).map(o=>{var a,l;return{mint:o.accountInfo.mint.toBase58(),amount:o.accountInfo.amount,decimals:o.accountInfo.decimals,symbol:((a=ih.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:a.symbol)||"UNKNOWN",name:((l=ih.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:l.name)||"Unknown Token",isNft:o.accountInfo.decimals===0&&o.accountInfo.amount==="1"}});return s.unshift({mint:"So11111111111111111111111111111111111111112",amount:(r*rT).toString(),decimals:9,symbol:"SOL",name:"Solana",isNft:!1}),s}async getTokenAccountsByOwner(e){const{TOKEN_PROGRAM_ID:n}=await Tl(async()=>{const{TOKEN_PROGRAM_ID:i}=await Promise.resolve().then(()=>fee);return{TOKEN_PROGRAM_ID:i}},void 0);return(await this.connection.getParsedTokenAccountsByOwner(e,{programId:n})).value.map(i=>({pubkey:i.pubkey,programId:i.account.owner,accountInfo:{mint:new ft(i.account.data.parsed.info.mint),amount:i.account.data.parsed.info.tokenAmount.amount,decimals:i.account.data.parsed.info.tokenAmount.decimals}}))}async transferToken(e,n,r,i,s){if(n==="So11111111111111111111111111111111111111112"||n==="SOL")return this.transferSol(e,r,i);try{const o=new ft(n),a=new ft(r),l=await yD(o,e.publicKey),c=await yD(o,a),u=new Ga;await this.connection.getAccountInfo(c)||u.add(d0e(e.publicKey,c,a,o));let m;if(await this.connection.getAccountInfo(l)){const x=await this.connection.getTokenAccountBalance(l),v=BigInt(x.value.amount),b=BigInt(Math.round(i*Math.pow(10,s))),w=v>b?v-b:b-v,k=v/BigInt(100);w<=k?(m=v,console.log(`[Transfer] Using actual balance: ${v} (requested: ${b})`)):m=b}else m=BigInt(Math.round(i*Math.pow(10,s)));return u.add(f0e(l,c,e.publicKey,m)),u.feePayer=e.publicKey,await this.sendTransactionWithRetry(u,[e])}catch(o){throw console.error("Token Transfer Error",o),new Error(`Token Transfer failed: ${o.message}`)}}async getRecentTransactions(e,n=20){try{const r=new ft(e);return(await this.connection.getSignaturesForAddress(r,{limit:n})).map(s=>({signature:s.signature,slot:s.slot,err:s.err,memo:s.memo,blockTime:s.blockTime,status:s.err?"failed":"success",confirmationStatus:s.confirmationStatus}))}catch(r){return console.error("Error fetching transactions:",r),[]}}}const Ps=new hpt,If=class If{static async setSessionHash(e){try{const n=Date.now(),r=new TextEncoder,i=crypto.getRandomValues(new Uint8Array(16)),s=r.encode(e+n.toString()),o=new Uint8Array(i.length+s.length);o.set(i),o.set(s,i.length);const a=await crypto.subtle.digest("SHA-256",o),l=new Uint8Array(a);this.sessionHash=btoa(String.fromCharCode(...l)),this.sessionTimestamp=n}catch{console.error("[SecurityService] Failed to set session hash")}}static hasValidSession(){return this.sessionHash!==null&&this.sessionTimestamp>0}static getSessionTimestamp(){return this.sessionTimestamp}static clearSession(){this.sessionHash=null,this.sessionTimestamp=0}static initializeDevToolsDetection(){if(this.detectionInterval)return;const e=()=>{const i=window.outerWidth-window.innerWidth>160,s=window.outerHeight-window.innerHeight>160;(i||s)&&!this.devToolsDetected&&this.handleDevToolsDetected()},n=new Image;let r=!1;Object.defineProperty(n,"id",{get:function(){return r=!0,""}}),this.detectionInterval=setInterval(()=>{r=!1,console.log(n),console.clear(),r&&!this.devToolsDetected&&this.handleDevToolsDetected(),e()},2e3),window.addEventListener("resize",e)}static handleDevToolsDetected(){this.devToolsDetected||(this.devToolsDetected=!0,console.clear(),console.warn("%c SECURITY NOTICE ","color: #ff4444; font-size: 28px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);"),console.warn("%cDeveloper tools detected.","color: #ff8800; font-size: 16px;"),console.warn("%cFor your security, sensitive operations may be restricted.","color: #ffaa00; font-size: 14px;"),console.warn("%cIf you are not a developer, please close this panel immediately.","color: #ffffff; font-size: 12px;"),this.securityListeners.forEach(e=>{try{e()}catch{}}))}static isDevToolsDetected(){return this.devToolsDetected}static onSecurityBreach(e){return this.securityListeners.add(e),()=>this.securityListeners.delete(e)}static initializeConsoleSanitization(){const e=[/0x[a-fA-F0-9]{64}/g,/[1-9A-HJ-NP-Za-km-z]{87,88}/g,/0x[a-fA-F0-9]{40,}/g,/[A-Za-z0-9+/]{100,}={0,2}/g],n=r=>r.map(i=>{if(typeof i=="string"){let s=i;for(const o of e)s=s.replace(o,"[REDACTED]");return s}if(typeof i=="object"&&i!==null)try{const s=JSON.stringify(i);let o=!1;for(const a of e)if(a.test(s)){o=!0;break}if(o)return"[Object with sensitive data]"}catch{}return i});console.log=(...r)=>{this.originalConsole.log.apply(console,n(r))},console.warn=(...r)=>{this.originalConsole.warn.apply(console,n(r))},console.info=(...r)=>{this.originalConsole.info.apply(console,n(r))},console.debug=(...r)=>{this.originalConsole.debug.apply(console,n(r))}}static protectGlobalNamespace(){if(typeof window>"u")return;const e=window,n=["__dealerService","__polymarketDealerService","__backgroundTimer"];for(const r of n)try{e[r]&&delete e[r],Object.defineProperty(e,r,{value:void 0,writable:!1,configurable:!1})}catch{}}static initializeProductionSecurity(){console.log("[SecurityService] Initializing production security..."),this.initializeConsoleSanitization(),this.initializeDevToolsDetection(),this.protectGlobalNamespace(),console.log("[SecurityService] Production security initialized")}static cleanup(){this.detectionInterval&&(clearInterval(this.detectionInterval),this.detectionInterval=null),this.securityListeners.clear(),this.devToolsDetected=!1,this.clearSession()}};If.sessionHash=null,If.sessionTimestamp=0,If.devToolsDetected=!1,If.detectionInterval=null,If.securityListeners=new Set,If.originalConsole={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug};let gy=If;const hee="vault_balance_history",pee="vault_intraday_history",mee=90,gee=96;class ppt{constructor(){this.history=[],this.intradayHistory=[],this.listeners=new Set,this.isInitialized=!1,this.initPromise=null,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadFromStorage(),this.isInitialized=!0,this.notify())}async waitForInit(){this.initPromise&&await this.initPromise}async loadFromStorage(){try{const e=await ke.getItem(ke.getUserKey(hee));e&&(this.history=JSON.parse(e));const n=await ke.getItem(ke.getUserKey(pee));if(n){this.intradayHistory=JSON.parse(n);const r=Date.now()-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(i=>i.timestamp>r)}}catch(e){console.error("[BalanceHistory] Failed to load:",e),this.history=[],this.intradayHistory=[]}}async saveToStorage(){try{await ke.setItem(ke.getUserKey(hee),JSON.stringify(this.history)),await ke.setItem(ke.getUserKey(pee),JSON.stringify(this.intradayHistory))}catch(e){console.error("[BalanceHistory] Failed to save:",e)}}notify(){this.listeners.forEach(e=>e())}getTodayDate(){return new Date().toISOString().split("T")[0]}get15MinTimeKey(){const e=new Date,n=Math.floor(e.getMinutes()/15)*15;return`${e.getHours().toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}async reloadFromStorage(){console.log("[BalanceHistory] Reloading from storage..."),await this.loadFromStorage(),this.notify()}reset(){console.log("[BalanceHistory] Resetting history..."),this.history=[],this.intradayHistory=[],this.notify()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.history}recordSnapshot(e,n,r){const i=this.getTodayDate(),s=e+n+r,o=Date.now(),a=this.history.findIndex(g=>g.date===i),l={date:i,timestamp:o,solValue:e,hlValue:n,pmValue:r,totalValue:s};a>=0?this.history[a]=l:this.history.push(l),this.history.sort((g,x)=>g.date.localeCompare(x.date)),this.history.length>mee&&(this.history=this.history.slice(-mee));const c=this.get15MinTimeKey(),u=o-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(g=>g.timestamp>u);const h=this.intradayHistory.findIndex(g=>g.timeKey===c&&o-g.timestamp<900*1e3),m={timestamp:o,timeKey:c,solValue:e,hlValue:n,pmValue:r,totalValue:s};h>=0?this.intradayHistory[h]=m:this.intradayHistory.push(m),this.intradayHistory.length>gee&&(this.intradayHistory=this.intradayHistory.slice(-gee)),this.saveToStorage(),this.notify(),console.log(`[BalanceHistory]  Snapshot saved: SOL=$${e.toFixed(2)}, HL=$${n.toFixed(2)}, PM=$${r.toFixed(2)} [${c}]`)}getHistoryForChart(e=30){return e===1?this.intradayHistory.map(r=>({date:r.timeKey,value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue})):this.history.slice(-e).map(r=>({date:new Date(r.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue}))}hasHistory(){return this.history.length>0||this.intradayHistory.length>0}getHistoryDays(){return this.history.length}hasIntradayHistory(){return this.intradayHistory.length>0}clearHistory(){this.history=[],this.intradayHistory=[],this.saveToStorage(),this.notify()}}const hl=new ppt,mpt=(t,e)=>{const[n,r]=A.useState(!0),[i,s]=A.useState({publicKey:null,encryptedPrivateKey:null,solBalance:0,tokens:ih,assets:[],isUnlocked:!1,ownerPublicKey:null,hlPublicKey:null,hlEncryptedPrivateKey:null,hlBalance:0,hlOwnerPublicKey:null,hlPositions:[],pmPublicKey:null,pmEncryptedPrivateKey:null,pmBalance:0,pmOwnerPublicKey:null}),[o,a]=A.useState(""),[l,c]=A.useState(""),[u,h]=A.useState("SOL"),[m,g]=A.useState(null),[x,v]=A.useState(!1),[b,w]=A.useState(""),[k,C]=A.useState(!1),[R,B]=A.useState(""),[O,F]=A.useState(!1),[H,j]=A.useState(""),[$,W]=A.useState(!1),[V,U]=A.useState(""),[T,_]=A.useState(!1),[L,z]=A.useState(!1),[G,te]=A.useState(!1),[K,q]=A.useState(""),[M,P]=A.useState(""),[Y,X]=A.useState(""),[re,ae]=A.useState(""),[Te,ue]=A.useState(""),[pe,be]=A.useState("");A.useEffect(()=>{const fe=gy.onSecurityBreach(()=>{i.isUnlocked&&(console.warn("[useVault] Security breach detected - locking vault"),s(ge=>({...ge,isUnlocked:!1})),a(""),g(null),gy.clearSession(),t("Security alert: Vault locked for protection"))});return()=>fe()},[i.isUnlocked,t]),A.useEffect(()=>{if(!e){console.log("[useVault] Waiting for userId before loading vault data..."),r(!0),hl.reset(),pt.reset();return}(async()=>{r(!0);try{await hl.reloadFromStorage(),await pt.reloadFromStorage(),await ke.migrateFromLocalStorage(),console.log("[useVault] Loading vault data for user:",e.substring(0,8)+"...");const ge=await ke.getItem(ke.getUserKey("agent_vault_pubkey")),Ye=await ke.getItem(ke.getUserKey("agent_vault_enc")),Je=await ke.getItem(ke.getUserKey("agent_owner_pubkey")),ot=await ke.getItem(ke.getUserKey("agent_hl_vault_pubkey")),Ft=await ke.getItem(ke.getUserKey("agent_hl_vault_enc")),Et=await ke.getItem(ke.getUserKey("agent_hl_owner_pubkey")),Mt=await ke.getItem(ke.getUserKey("agent_pm_vault_pubkey")),cn=await ke.getItem(ke.getUserKey("agent_pm_vault_enc")),en=await ke.getItem(ke.getUserKey("agent_pm_owner_pubkey"));console.log("[useVault] Loaded keys:",{solana:ge?ge.substring(0,8)+"...":null,hyperliquid:ot?ot.substring(0,8)+"...":null,polymarket:Mt?Mt.substring(0,8)+"...":null}),ge&&Ye?(s(rn=>({...rn,publicKey:ge,encryptedPrivateKey:Ye,ownerPublicKey:Je,hlPublicKey:ot,hlEncryptedPrivateKey:Ft,hlOwnerPublicKey:Et,pmPublicKey:Mt,pmEncryptedPrivateKey:cn,pmOwnerPublicKey:en})),Re(ge),ot&&se(ot),Mt&&ve(Mt)):ot&&Ft?(s(rn=>({...rn,hlPublicKey:ot,hlEncryptedPrivateKey:Ft,hlOwnerPublicKey:Et,pmPublicKey:Mt,pmEncryptedPrivateKey:cn,pmOwnerPublicKey:en})),se(ot),Mt&&ve(Mt)):Mt&&cn&&(s(rn=>({...rn,pmPublicKey:Mt,pmEncryptedPrivateKey:cn,pmOwnerPublicKey:en})),ve(Mt))}catch(ge){console.error("[useVault] Failed to load vault from storage",ge)}finally{r(!1)}})()},[e]);const se=async fe=>{try{const ge=await zt.getUserState(fe),Ye=ge.marginSummary,Je=Ye?parseFloat(Ye.accountValue):0,ot=ge.assetPositions||[];s(Ft=>({...Ft,hlBalance:Je,hlPositions:ot}))}catch(ge){console.error("Failed to refresh HL balance",ge)}},ve=async fe=>{try{const{ethers:ge}=await Tl(async()=>{const{ethers:cn}=await import("./index-DuruzwXw.js");return{ethers:cn}},[]),Ye=new ge.JsonRpcProvider("https://polygon-rpc.com"),Je="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",ot=["function balanceOf(address) view returns (uint256)"],Et=await new ge.Contract(Je,ot,Ye).balanceOf(fe),Mt=parseFloat(ge.formatUnits(Et,6));s(cn=>({...cn,pmBalance:Mt}))}catch(ge){console.error("Failed to refresh Polymarket balance",ge)}},Re=async fe=>{try{const ge=await Ps.getBalance(fe),Ye=await Ps.getWalletAssets(fe);s(Je=>({...Je,solBalance:ge,assets:Ye}))}catch(ge){console.error("Failed to refresh balance",ge)}};return{vault:i,setVault:s,password:o,setPassword:a,withdrawAmount:l,setWithdrawAmount:c,withdrawNetwork:u,setWithdrawNetwork:h,showBackupModal:x,setShowBackupModal:v,backupKey:b,setBackupKey:w,showHLBackupModal:k,setShowHLBackupModal:C,hlBackupKey:R,setHLBackupKey:B,isImporting:$,setIsImporting:W,importKey:V,setImportKey:U,refreshBalance:Re,connectOwnerWallet:async()=>{try{const fe=await Ps.connectWallet();s(ge=>({...ge,ownerPublicKey:fe})),await ke.setItem(ke.getUserKey("agent_owner_pubkey"),fe),t("Solana Owner Wallet Connected: "+fe.slice(0,6)+"...")}catch{t("Failed to connect Solana wallet.")}},disconnectOwnerWallet:async()=>{s(fe=>({...fe,ownerPublicKey:null})),await ke.removeItem(ke.getUserKey("agent_owner_pubkey")),t("Solana Owner Wallet Disconnected")},connectHLOwnerWallet:async()=>{try{const{ethereum:fe}=window;if(fe){const Ye=(await fe.request({method:"eth_requestAccounts"}))[0];s(Je=>({...Je,hlOwnerPublicKey:Ye})),await ke.setItem(ke.getUserKey("agent_hl_owner_pubkey"),Ye),t("Hyperliquid Owner Wallet Connected: "+Ye.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectHLOwnerWallet:async()=>{s(fe=>({...fe,hlOwnerPublicKey:null})),await ke.removeItem(ke.getUserKey("agent_hl_owner_pubkey")),t("Hyperliquid Owner Wallet Disconnected")},createVault:async()=>{if(!o){t("Password is required");return}try{const fe=Ps.createVaultKeypair(),ge=Array.from(fe.secretKey),Ye=await or.encrypt(JSON.stringify(ge),o),Je=zt.createVaultWallet(),ot=await or.encrypt(Je.privateKey,o);await ke.setItem(ke.getUserKey("agent_vault_pubkey"),fe.publicKey.toBase58()),await ke.setItem(ke.getUserKey("agent_vault_enc"),Ye),await ke.setItem(ke.getUserKey("agent_hl_vault_pubkey"),Je.address),await ke.setItem(ke.getUserKey("agent_hl_vault_enc"),ot),s(Ft=>({...Ft,isUnlocked:!0,publicKey:fe.publicKey.toBase58(),encryptedPrivateKey:Ye,hlPublicKey:Je.address,hlEncryptedPrivateKey:ot})),B(Je.privateKey),w(iT.encode(fe.secretKey)),v(!0),t("Vaults created successfully")}catch(fe){console.error("Vault creation failed",fe),t("Failed to create vault")}},unlockVault:async()=>{if(!o){t("Password is required");return}try{const fe=await ke.getItem(ke.getUserKey("agent_vault_enc")),ge=await ke.getItem(ke.getUserKey("agent_vault_pubkey")),Ye=await ke.getItem(ke.getUserKey("agent_hl_vault_enc")),Je=await ke.getItem(ke.getUserKey("agent_hl_vault_pubkey"));if((!fe||!ge)&&(!Ye||!Je)){t("No vault found. Please create one.");return}let ot=null,Ft=null,Et=null;if(fe&&ge)try{const Mt=await or.decrypt(fe,o),cn=Uint8Array.from(JSON.parse(Mt));if(ot=oa.fromSecretKey(cn),ot.publicKey.toBase58()!==ge)throw new Error("Keypair mismatch");g(ot)}catch(Mt){throw console.error("Solana unlock failed",Mt),new Error("Incorrect password for Solana Vault")}if(Ye&&Je)try{const Mt=await or.decrypt(Ye,o),{ethers:cn}=await Tl(async()=>{const{ethers:rn}=await import("./index-DuruzwXw.js");return{ethers:rn}},[]),en=new cn.Wallet(Mt);en.address.toLowerCase()!==Je.toLowerCase()?(console.error(`[Vault]  HL Address Mismatch! Stored: ${Je}, Derived: ${en.address}`),Ft=en.address,t("Warning: Stored HL address mismatch. Using derived address.")):Ft=Je,Et=Ye}catch(Mt){throw console.error("Hyperliquid unlock failed",Mt),new Error("Incorrect password for Hyperliquid Vault")}s(Mt=>({...Mt,isUnlocked:!0,publicKey:ot?ot.publicKey.toBase58():null,encryptedPrivateKey:fe||null,hlPublicKey:Ft||null,hlEncryptedPrivateKey:Et||null})),Ft&&se(Ft),ot&&Re(ot.publicKey.toBase58()),await gy.setSessionHash(o),t("Vault unlocked")}catch(fe){console.error("Unlock failed",fe),t(fe.message||"Incorrect password or corrupted vault")}},requestAirdrop:async()=>{if(i.publicKey)try{t("Requesting 1 SOL Airdrop..."),await Ps.airdrop(i.publicKey),t("Airdrop Successful!"),setTimeout(()=>Re(i.publicKey),2e3)}catch(fe){console.error("Airdrop failed",fe),t(`Airdrop Failed: ${fe.message}`),alert(fe.message)}},handleWithdraw:async()=>{if(!i.isUnlocked&&!m){alert("Vault is locked or keypair missing");return}if(!i.isUnlocked||!m){alert("Vault is locked");return}if(!i.ownerPublicKey){alert("Connect Owner Wallet first");return}const fe=parseFloat(l);if(isNaN(fe)||fe<=0){alert("Invalid amount");return}if(fe>i.solBalance){alert("Insufficient balance");return}try{t(`Sending ${fe} SOL to Owner...`);const ge=await Ps.transferSol(m,i.ownerPublicKey,fe);t(`Withdrawal Success! Sig: ${ge.slice(0,8)}...`),c(""),Re(i.publicKey)}catch(ge){console.error(ge),t(`Withdrawal Failed: ${ge.message}`)}},handleWithdrawHL:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.hlOwnerPublicKey){alert("Connect Hyperliquid Owner Wallet first");return}if(!i.hlEncryptedPrivateKey){alert("Hyperliquid vault not found");return}const fe=parseFloat(l);if(isNaN(fe)||fe<=1){alert("Amount must be greater than $1 (withdrawal fee)");return}if(fe>(i.hlBalance||0)){alert("Insufficient USDC balance");return}try{const ge=await or.decrypt(i.hlEncryptedPrivateKey,o),Ye=zt.getWalletFromPrivateKey(ge);t(`Withdrawing ${fe} USDC to Hyperliquid Owner...`);const Je=await zt.withdrawUSDC(Ye,i.hlOwnerPublicKey,fe);t(`Withdrawal Success! Status: ${Je.status}`),c(""),i.hlPublicKey&&setTimeout(()=>se(i.hlPublicKey),2e3)}catch(ge){console.error(ge),t(`Withdrawal Failed: ${ge.message}`)}},handleWithdrawPM:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.pmOwnerPublicKey){alert("Connect Polymarket Owner Wallet first");return}if(!i.pmEncryptedPrivateKey){alert("Polymarket vault not found");return}const fe=parseFloat(l);if(isNaN(fe)||fe<=0){alert("Amount must be greater than 0");return}if(fe>(i.pmBalance||0)){alert("Insufficient USDC balance");return}try{const ge=await or.decrypt(i.pmEncryptedPrivateKey,o),{ethers:Ye}=await Tl(async()=>{const{ethers:rn}=await import("./index-DuruzwXw.js");return{ethers:rn}},[]),Je=new Ye.JsonRpcProvider("https://polygon-rpc.com"),ot=new Ye.Wallet(ge,Je),Ft="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",Et=["function transfer(address to, uint256 amount) returns (bool)","function balanceOf(address) view returns (uint256)"],Mt=new Ye.Contract(Ft,Et,ot),cn=Ye.parseUnits(fe.toString(),6);t(`Withdrawing ${fe} USDC to Polymarket Owner...`);const en=await Mt.transfer(i.pmOwnerPublicKey,cn);await en.wait(),t(`Withdrawal Success! Tx: ${en.hash.slice(0,10)}...`),c(""),i.pmPublicKey&&setTimeout(()=>ve(i.pmPublicKey),2e3)}catch(ge){console.error(ge),t(`Withdrawal Failed: ${ge.message}`)}},importVault:async()=>{if(!o||!V){t("Password and Private Key are required");return}try{const fe=iT.decode(V),ge=oa.fromSecretKey(fe),Ye=Array.from(ge.secretKey),Je=await or.encrypt(JSON.stringify(Ye),o);await ke.setItem(ke.getUserKey("agent_vault_pubkey"),ge.publicKey.toBase58()),await ke.setItem(ke.getUserKey("agent_vault_enc"),Je),s(ot=>({...ot,isUnlocked:!0,publicKey:ge.publicKey.toBase58(),encryptedPrivateKey:Je})),t("Vault imported successfully"),W(!1),U("")}catch(fe){console.error("Vault import failed",fe),t("Invalid Private Key or Import Failed")}},resolveTokenMint:fe=>{const ge=fe.trim(),Ye=ih.find(Je=>Je.symbol.toUpperCase()===ge.toUpperCase());return Ye?Ye.mint:ge},refreshHLBalance:se,isImportingSolana:T,setIsImportingSolana:_,isImportingHyperliquid:L,setIsImportingHyperliquid:z,solanaPassword:K,setSolanaPassword:q,hyperliquidPassword:M,setHyperliquidPassword:P,solanaImportKey:re,setSolanaImportKey:ae,hlImportKey:Te,setHLImportKey:ue,createSolanaVault:async()=>{if(!K){t("Password is required");return}try{const fe=Ps.createVaultKeypair(),ge=Array.from(fe.secretKey),Ye=await or.encrypt(JSON.stringify(ge),K);await ke.setItem(ke.getUserKey("agent_vault_pubkey"),fe.publicKey.toBase58()),await ke.setItem(ke.getUserKey("agent_vault_enc"),Ye),s(Je=>({...Je,isUnlocked:!0,publicKey:fe.publicKey.toBase58(),encryptedPrivateKey:Ye})),g(fe),w(iT.encode(fe.secretKey)),v(!0),t("Solana Vault created successfully"),q("")}catch(fe){console.error("Solana vault creation failed",fe),t("Failed to create Solana vault")}},createHyperliquidVault:async()=>{if(!M){t("Password is required");return}try{const fe=zt.createVaultWallet(),ge=await or.encrypt(fe.privateKey,M);await ke.setItem(ke.getUserKey("agent_hl_vault_pubkey"),fe.address),await ke.setItem(ke.getUserKey("agent_hl_vault_enc"),ge),s(Ye=>({...Ye,hlPublicKey:fe.address,hlEncryptedPrivateKey:ge})),B(fe.privateKey),C(!0),t("Hyperliquid Vault created successfully"),P(""),se(fe.address)}catch(fe){console.error("Hyperliquid vault creation failed",fe),t("Failed to create Hyperliquid vault")}},importSolanaVault:async()=>{if(!K||!re){t("Password and Private Key are required");return}try{const fe=iT.decode(re),ge=oa.fromSecretKey(fe),Ye=Array.from(ge.secretKey),Je=await or.encrypt(JSON.stringify(Ye),K);await ke.setItem(ke.getUserKey("agent_vault_pubkey"),ge.publicKey.toBase58()),await ke.setItem(ke.getUserKey("agent_vault_enc"),Je),s(ot=>({...ot,isUnlocked:!0,publicKey:ge.publicKey.toBase58(),encryptedPrivateKey:Je})),g(ge),t("Solana Vault imported successfully"),_(!1),ae(""),q(""),Re(ge.publicKey.toBase58())}catch(fe){console.error("Solana vault import failed",fe),t("Invalid Private Key or Import Failed")}},importHyperliquidVault:async()=>{if(!M||!Te){t("Password and Private Key are required");return}try{let fe=Te.trim();fe.startsWith("0x")||(fe="0x"+fe);const{ethers:ge}=await Tl(async()=>{const{ethers:ot}=await import("./index-DuruzwXw.js");return{ethers:ot}},[]),Ye=new ge.Wallet(fe),Je=await or.encrypt(fe,M);await ke.setItem(ke.getUserKey("agent_hl_vault_pubkey"),Ye.address),await ke.setItem(ke.getUserKey("agent_hl_vault_enc"),Je),s(ot=>({...ot,hlPublicKey:Ye.address,hlEncryptedPrivateKey:Je})),t("Hyperliquid Vault imported successfully"),z(!1),ue(""),P(""),se(Ye.address)}catch(fe){console.error("Hyperliquid vault import failed",fe),t("Invalid Private Key or Import Failed")}},isImportingPolymarket:G,setIsImportingPolymarket:te,polymarketPassword:Y,setPolymarketPassword:X,pmImportKey:pe,setPMImportKey:be,createPolymarketVault:async()=>{if(!Y){t("Password is required");return}try{const{ethers:fe}=await Tl(async()=>{const{ethers:Je}=await import("./index-DuruzwXw.js");return{ethers:Je}},[]),ge=fe.Wallet.createRandom(),Ye=await or.encrypt(ge.privateKey,Y);await ke.setItem(ke.getUserKey("agent_pm_vault_pubkey"),ge.address),await ke.setItem(ke.getUserKey("agent_pm_vault_enc"),Ye),s(Je=>({...Je,pmPublicKey:ge.address,pmEncryptedPrivateKey:Ye})),j(ge.privateKey),F(!0),t("Polymarket Vault created successfully"),X(""),ve(ge.address)}catch(fe){console.error("Polymarket vault creation failed",fe),t("Failed to create Polymarket vault")}},importPolymarketVault:async()=>{if(!Y||!pe){t("Password and Private Key are required");return}try{let fe=pe.trim();fe.startsWith("0x")||(fe="0x"+fe);const{ethers:ge}=await Tl(async()=>{const{ethers:ot}=await import("./index-DuruzwXw.js");return{ethers:ot}},[]),Ye=new ge.Wallet(fe),Je=await or.encrypt(fe,Y);await ke.setItem(ke.getUserKey("agent_pm_vault_pubkey"),Ye.address),await ke.setItem(ke.getUserKey("agent_pm_vault_enc"),Je),s(ot=>({...ot,pmPublicKey:Ye.address,pmEncryptedPrivateKey:Je})),t("Polymarket Vault imported successfully"),te(!1),be(""),X(""),ve(Ye.address)}catch(fe){console.error("Polymarket vault import failed",fe),t("Invalid Private Key or Import Failed")}},connectPMOwnerWallet:async()=>{try{const{ethereum:fe}=window;if(fe){const Ye=(await fe.request({method:"eth_requestAccounts"}))[0];s(Je=>({...Je,pmOwnerPublicKey:Ye})),await ke.setItem(ke.getUserKey("agent_pm_owner_pubkey"),Ye),t("Polymarket Owner Wallet Connected: "+Ye.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectPMOwnerWallet:async()=>{s(fe=>({...fe,pmOwnerPublicKey:null})),await ke.removeItem(ke.getUserKey("agent_pm_owner_pubkey")),t("Polymarket Owner Wallet Disconnected")},refreshPMBalance:ve,showPMBackupModal:O,setShowPMBackupModal:F,pmBackupKey:H,setPMBackupKey:j,deleteAccount:async()=>{try{await ke.clear(),window.location.reload()}catch(fe){console.error(fe)}}}},Eu=["#E7FE55","#D4EB4C","#C1D843","#AEC53A","#9BB231","#889F28","#758C1F","#627916","#4F660D","#3C5304"];Array.from({length:30},(t,e)=>({date:new Date(Date.now()-(29-e)*24*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:100+Math.random()*50+e*2}));const gpt=t=>{const[e,n]=A.useState([]),[r,i]=A.useState([]),[s,o]=A.useState({}),a=A.useSyncExternalStore(lt.subscribe.bind(lt),lt.getSnapshot.bind(lt));A.useEffect(()=>{const u=async()=>{const h={};try{const m=await bo.getMarketPrice("SOLUSDT");h.SOL=m.price}catch(m){console.error("Failed to fetch SOL price",m)}for(const m of t.assets||[])if(!(!m.symbol||m.symbol==="UNKNOWN"))try{const g=m.symbol.toUpperCase();if(h[g])continue;const x=await bo.getMarketPrice(`${g}USDT`);h[g]=x.price}catch(g){console.warn(`Failed to fetch price for ${m.symbol}`,g)}h.USDC=1,o(m=>({...m,...h}))};if(t.isUnlocked){u();const h=setInterval(u,6e4);return()=>clearInterval(h)}},[t.isUnlocked,t.assets]);const l=A.useSyncExternalStore(hl.subscribe.bind(hl),hl.getSnapshot.bind(hl));A.useEffect(()=>{if(!t.isUnlocked)return;const u=s.SOL||0,h=t.solBalance*u,m=t.hlBalance||0,g=(a.portfolioValue||0)+(a.currentExposure||0);(h>0||m>0||g>0)&&hl.recordSnapshot(h,m,g)},[t.isUnlocked,t.solBalance,s,t.hlBalance,a.portfolioValue,a.currentExposure]),A.useEffect(()=>{if(!t.isUnlocked)return;const u=()=>{const g=s.SOL||0,x=t.solBalance*g,v=t.hlBalance||0,b=(a.portfolioValue||0)+(a.currentExposure||0);(x>0||v>0||b>0)&&(hl.recordSnapshot(x,v,b),console.log("[useMarketData]  Periodic 15-min snapshot recorded"))};u();const h=900*1e3,m=setInterval(u,h);return()=>clearInterval(m)},[t.isUnlocked]),A.useEffect(()=>{if(hl.hasHistory()){const u=hl.getHistoryForChart(1);n(u);const h=hl.getHistoryForChart(365);i(h)}},[l]);const c=A.useMemo(()=>{const u=[];let h=0,m=0;const g=s.SOL||0,x=t.solBalance*g;t.solBalance>0&&(u.push({name:"Solana",symbol:"SOL",value:x,amount:t.solBalance,price:g,color:Eu[0],hasPrice:g>0,network:"solana"}),g>0?h+=x:m++);const v=t.hlBalance||0;v>0&&(u.push({name:"USDC (Hyperliquid)",symbol:"USDC",value:v,amount:v,price:1,color:Eu[1],hasPrice:!0,network:"hyperliquid"}),h+=v),t.hlPositions&&t.hlPositions.length>0&&t.hlPositions.forEach((w,k)=>{const C=w.position,R=parseFloat(C.szi),B=parseFloat(C.entryPx),O=parseFloat(C.unrealizedPnl),F=Math.abs(R*B)+O;F>0&&(u.push({name:`${C.coin} ${R>=0?"Long":"Short"}`,symbol:C.coin,value:F,amount:Math.abs(R),price:B,color:Eu[(k+2)%Eu.length],hasPrice:!0,network:"hyperliquid",pnl:O}),h+=F)});const b=a.portfolioValue||0;return b>0&&(u.push({name:"USDC (Polymarket)",symbol:"USDC",value:b,amount:b,price:1,color:Eu[2],hasPrice:!0,network:"polymarket"}),h+=b),a.activePositions&&a.activePositions.length>0&&a.activePositions.forEach((w,k)=>{w.currentValue>0&&(u.push({name:`${w.question}`,symbol:w.outcome,value:w.currentValue,amount:w.shares,price:w.currentPrice,color:Eu[(k+4)%Eu.length],hasPrice:!0,network:"polymarket",pnl:w.unrealizedPnl}),h+=w.currentValue)}),(t.assets||[]).forEach((w,k)=>{var R;if(w.isNft||((R=w.symbol)==null?void 0:R.toUpperCase())==="SOL")return;const C=parseFloat(w.amount)/Math.pow(10,w.decimals);if(C>0){const B=s[w.symbol]||0,O=C*B;u.push({name:w.name||w.symbol,symbol:w.symbol,value:O,amount:C,price:B,color:Eu[(k+3)%Eu.length],hasPrice:B>0,network:"solana"}),B>0?h+=O:m++}}),m>0&&u.forEach(w=>{w.hasPrice||(w.value=w.amount*1,w.price=1,h+=w.value)}),{data:u.sort((w,k)=>k.value-w.value),totalValue:h}},[t.solBalance,t.hlBalance,t.hlPositions,t.assets,s,a.portfolioValue,a.currentExposure,a.activePositions]);return{portfolioHistoryDaily:e,portfolioHistoryLongTerm:r,assetPrices:s,assetAllocationData:c}},ypt=t=>{const[e,n]=A.useState([]),[r,i]=A.useState([]),[s,o]=A.useState(4);A.useEffect(()=>{(async()=>{const c=ke.getUserKey("agent_activity_log"),u=await ke.getItem(c);u&&i(JSON.parse(u))})()},[]);const a=(l,c,u)=>{const h={type:l,desc:c,signature:u,timestamp:Date.now(),status:"pending"};i(m=>{const g=[h,...m].slice(0,50);return ke.setItem(ke.getUserKey("agent_activity_log"),JSON.stringify(g)),g})};return A.useEffect(()=>{if(!t.isUnlocked)return;const l=async()=>{try{if(zt.isDealerActive()){console.log("[ActivityFeed]   Skipping fetch - dealer is active");return}const u=[];if(t.publicKey){const m=(await Ps.getRecentTransactions(t.publicKey)).map(g=>({type:g.err?"Failed":"Transaction",desc:`Signature: ${g.signature.slice(0,8)}...`,time:g.blockTime?new Date(g.blockTime*1e3).toLocaleTimeString():"Unknown",status:g.err?"failed":"success",signature:g.signature,network:"solana",timestamp:g.blockTime?g.blockTime*1e3:0}));u.push(...m)}if(t.hlPublicKey){const m=(await zt.getUserFillsShared(t.hlPublicKey,20)).map(g=>{const x=g.side==="B"?"Buy":"Sell",v=g.dir||x,b=parseFloat(g.closedPnl||"0"),w=b!==0?` (PnL: ${b>=0?"+":""}$${b.toFixed(2)})`:"";return{type:v,desc:`${g.coin} ${parseFloat(g.sz).toFixed(4)} @ $${parseFloat(g.px).toFixed(2)}${w}`,time:new Date(g.time).toLocaleTimeString(),status:"success",signature:`hl-${g.tid}`,network:"hyperliquid",timestamp:g.time}});u.push(...m)}u.sort((h,m)=>m.timestamp-h.timestamp),n(u)}catch(u){console.error("Failed to fetch history",u)}};l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[t.isUnlocked,t.publicKey,t.hlPublicKey]),{activityFeed:e,localActivityLog:r,activityDisplayCount:s,setActivityDisplayCount:o,addActivityLog:a}},G4="vault-scheduler",xpt=(t,e,n,r,i)=>{const[s,o]=A.useState([]),[a,l]=A.useState(!1);A.useEffect(()=>{(async()=>{const h=ke.getUserKey("agent_scheduled_tasks"),m=await ke.getItem(h);m&&o(JSON.parse(m)),l(!0)})()},[]);const c=A.useRef(null);return A.useEffect(()=>{if(!t.isUnlocked){qa.stop(G4);return}console.log("[Scheduler]  Starting scheduler loop with Web Worker timer (background-safe, checks every 10s)");const u=async()=>{var g,x,v,b,w,k,C,R,B,O,F,H;const h=Date.now(),m=s.filter(j=>j.status==="active");if(m.length===0){console.log("[Scheduler]   No active tasks to check");return}console.log(`[Scheduler]  Checking ${m.length} active task(s)...`);for(const j of m){let $=!1;if(j.executeAt&&j.executeAt<=h)console.log(`[Scheduler]  Time-based task ${String(j.id).slice(0,6)} triggered`),$=!0;else if(j.condition)try{const{symbol:W,indicator:V,operator:U,value:T,timeframe:_}=j.condition;console.log(`[Scheduler]  Checking ${V.toUpperCase()} for ${W} (${_}): target ${U} ${T}`);const L=await bo.getIndicator(W,V,_);let z=0;if(typeof L.value=="number")z=L.value;else if(typeof L.value=="object"&&L.value!==null){const G=V.toLowerCase();G==="macd"?z=L.value.macd||0:G==="stoch"||G==="stochastic"?z=L.value.k||0:"value"in L.value?z=L.value.value:"rsi"in L.value?z=L.value.rsi:console.warn(`[Scheduler] Unknown indicator object structure for ${V}:`,L.value)}console.log(`[Scheduler]  Current ${V.toUpperCase()}: ${z.toFixed(2)} | Condition: ${U} ${T}`),U===">"&&z>T&&($=!0),U==="<"&&z<T&&($=!0),U===">="&&z>=T&&($=!0),U==="<="&&z<=T&&($=!0),U==="=="&&z==T&&($=!0),console.log($?`[Scheduler]  Condition MET! ${z.toFixed(2)} ${U} ${T}`:`[Scheduler]  Condition NOT met: ${z.toFixed(2)} ${U} ${T}`)}catch(W){console.error(`[Scheduler]   Error checking condition for task ${j.id}:`,W)}if($){if(((g=s.find(U=>U.id===j.id))==null?void 0:g.status)==="executing"){console.log(`[Scheduler]   Task ${String(j.id).slice(0,6)} is already executing, skipping...`);continue}const V=(x=s.find(U=>U.id===j.id))==null?void 0:x.lastExecuted;if(V&&Date.now()-V<3e5){console.log(`[Scheduler]  Task ${String(j.id).slice(0,6)} was recently completed (${Math.round((Date.now()-V)/1e3)}s ago), skipping...`);continue}console.log(`[Scheduler]  Executing task ${String(j.id).slice(0,6)} (${j.type})...`),o(U=>U.map(T=>T.id===j.id?{...T,status:"executing"}:T));try{const U=JSON.parse(j.params||"{}");let T="";if(!t.encryptedPrivateKey)throw new Error("Vault encrypted key not available");const _=await or.decrypt(t.encryptedPrivateKey,e),L=Uint8Array.from(JSON.parse(_)),z=oa.fromSecretKey(L);if(j.type==="SWAP"){console.log(`[Scheduler]  Swapping ${U.amount} ${U.inputToken} -> ${U.outputToken}`);try{T=await Ps.executeSwap(z,U.inputToken,U.outputToken,U.amount,G=>console.log(`[Scheduler] ${G}`)),i("Swap",`Scheduled: Swapped ${U.amount} ${U.inputToken} -> ${U.outputToken}`,T)}catch(G){if((v=G.message)!=null&&v.includes("timeout")||G.isTimeout){console.warn("[Scheduler]   Swap confirmation timeout. Verifying transaction status...");const te=G.signature;if(te)try{const K=await Ps.connection.getSignatureStatus(te),q=K==null?void 0:K.value;if((q==null?void 0:q.confirmationStatus)==="finalized"||(q==null?void 0:q.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),T=te,i("Swap",`Scheduled: Swapped ${U.amount} ${U.inputToken} -> ${U.outputToken}`,te),o(M=>{const P=M.map(Y=>Y.id===j.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:Y);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(j.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(q!=null&&q.err)throw console.error("[Scheduler]  Transaction failed on-chain:",q.err),new Error(`Transaction failed: ${JSON.stringify(q.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const P=M.map(Y=>Y.id===j.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:Y);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(j.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(K){console.error("[Scheduler]   Failed to verify transaction:",K)}}throw G}}else if(j.type==="TRANSFER"){if(console.log(`[Scheduler]  Transferring ${U.amount} tokens to Owner`),!t.ownerPublicKey)throw new Error("Owner wallet not connected");try{U.tokenMint==="So11111111111111111111111111111111111111112"?T=await Ps.transferSol(z,t.ownerPublicKey,U.amount):T=await Ps.transferToken(z,U.tokenMint,t.ownerPublicKey,U.amount,U.decimals||9),i("Transfer",`Scheduled: Sent ${U.amount} to Owner`,T)}catch(G){if((b=G.message)!=null&&b.includes("timeout")||G.isTimeout){console.warn("[Scheduler]   Transfer confirmation timeout. Verifying transaction status...");const te=G.signature;if(te)try{const K=await Ps.connection.getSignatureStatus(te),q=K==null?void 0:K.value;if((q==null?void 0:q.confirmationStatus)==="finalized"||(q==null?void 0:q.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),T=te,i("Transfer",`Scheduled: Sent ${U.amount} to Owner`,te),o(M=>{const P=M.map(Y=>Y.id===j.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:Y);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(j.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(q!=null&&q.err)throw console.error("[Scheduler]  Transaction failed on-chain:",q.err),new Error(`Transaction failed: ${JSON.stringify(q.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const P=M.map(Y=>Y.id===j.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:Y);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(j.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(K){console.error("[Scheduler]   Failed to verify transaction:",K)}}throw G}}else if(j.type==="ALERT")console.log(`[Scheduler]  Alert triggered for task ${String(j.id).slice(0,6)}`),T="ALERT_TRIGGERED",n(` ALERT: ${(w=j.condition)==null?void 0:w.indicator.toUpperCase()} ${(k=j.condition)==null?void 0:k.operator} ${(C=j.condition)==null?void 0:C.value}`);else if(j.type==="HL_ORDER"){if(console.log(`[Scheduler]  Executing Hyperliquid Order: ${U.side} ${U.size} ${U.coin}`),!t.hlEncryptedPrivateKey)throw new Error("Hyperliquid Vault not available");const G=await or.decrypt(t.hlEncryptedPrivateKey,e),te=zt.getWalletFromPrivateKey(G);U.leverage&&U.leverage!==1&&await Vn.updateLeverage(te,U.coin,U.leverage,!1);const K=U.isBuy!==void 0?U.isBuy:U.side==="B";let q=U.size;if(q==null&&U.usdcAmount){console.log(`[Scheduler]  Calculating size for ${U.usdcAmount} USDC of ${U.coin}...`);try{let ae=U.price;if(!ae){const be=await zt.getMarketData(U.coin),se=parseFloat(be.levels[1][0].px),ve=parseFloat(be.levels[0][0].px);ae=K?se:ve,console.log(`[Scheduler]   Current Price for ${U.coin}: ${ae}`)}if(!ae||ae===0)throw new Error("Could not determine price for size calculation");const Te=await zt.getAssetDecimals(U.coin),ue=U.usdcAmount/ae,pe=Math.pow(10,Te);q=Math.floor(ue*pe)/pe,console.log(`[Scheduler]  Calculated Size: ${q} ${U.coin} (Decimals: ${Te})`)}catch(ae){throw console.error("[Scheduler]  Error calculating size:",ae),new Error(`Failed to calculate order size: ${ae.message}`)}}if(!q||q<=0)throw new Error(`Invalid order size: ${q}`);let M=U.orderType||"limit",P=U.price;const Y=await zt.getAssetDecimals(U.coin),X=Math.max(0,6-Y);if(M==="market"){console.log("[Scheduler]  Converting Market Order to Limit IOC with slippage...");const ae=await zt.getMarketData(U.coin),Te=parseFloat(ae.levels[0][0].px),ue=parseFloat(ae.levels[1][0].px),pe=K?ue:Te,be=.05;let se=K?pe*(1+be):pe*(1-be),ve=parseFloat(se.toFixed(X));ve=parseFloat(ve.toPrecision(5)),P=parseFloat(ve.toFixed(X)),M="ioc",console.log(`[Scheduler]   Market -> IOC: Base ${pe} -> Slippage ${P}`)}else if(P){let ae=parseFloat(P.toFixed(X));ae=parseFloat(ae.toPrecision(5)),P=parseFloat(ae.toFixed(X)),console.log(`[Scheduler]   Limit price rounded: ${U.price} -> ${P} (maxDecimals=${X})`)}const re=await Vn.createOrder(te,U.coin,K,q,P,{orderType:M,reduceOnly:U.reduceOnly||!1,stopLoss:U.stopLoss,takeProfit:U.takeProfit});if(re.status==="ok"){const ae=(O=(B=(R=re.response)==null?void 0:R.data)==null?void 0:B.statuses)==null?void 0:O[0];if(ae!=null&&ae.error)throw new Error(`HL Order Error: ${ae.error}`);T=`HL_ORDER:${((F=ae==null?void 0:ae.filled)==null?void 0:F.oid)||((H=ae==null?void 0:ae.resting)==null?void 0:H.oid)||"placed"}`,i("HL Order",`Placed ${U.side} ${U.size} ${U.coin} @ ${U.price}`,T)}else throw new Error(`HL Order Failed: ${JSON.stringify(re)}`)}o(G=>{const te=G.map(K=>K.id===j.id?{...K,status:"completed",lastExecuted:Date.now(),result:`Success: ${T}`}:K);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(te)),te}),console.log(`[Scheduler]  Task ${String(j.id).slice(0,6)} completed! TX: ${T.slice(0,12)}...`),n(`Task ${String(j.id).slice(0,4)} executed: ${T.slice(0,8)}...`),r(t.publicKey)}catch(U){console.error(`[Scheduler]  Task ${j.id} failed:`,U),o(T=>{const _=T.map(L=>L.id===j.id?{...L,status:"failed",lastExecuted:Date.now(),result:U.message}:L);return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(_)),_}),n(`Task ${String(j.id).slice(0,4)} failed: ${U.message}`)}}}};return c.current=u,qa.start(G4,1e4,()=>{c.current&&c.current()}),u(),()=>{console.log("[Scheduler]  Stopping scheduler loop"),qa.stop(G4)}},[t.isUnlocked,s]),{scheduledTasks:s,setScheduledTasks:o}};var vpt={};const bpt="agent_conversation_",wpt="agent_conversations_metadata";class Jo{static getConversationKey(e){return ke.getUserKey(`${bpt}${e}`)}static getMetadataKey(){return ke.getUserKey(wpt)}static async saveConversation(e,n){if(!vpt.TEST&&!n)throw new Error("Password required for encryption");try{const r=await or.encrypt(JSON.stringify(e),n);await ke.setItem(this.getConversationKey(e.id),r);const i={id:e.id,title:e.title,lastMessage:e.lastMessage,timestamp:e.timestamp};await this.updateMetadata(i)}catch(r){throw console.error("Failed to save conversation:",r),r}}static async updateMetadata(e){const n=await ke.getItem(this.getMetadataKey());let r=n?JSON.parse(n):[];if(r=r.filter(i=>i.id!==e.id),r.unshift(e),r.length>50){const i=r.pop();i&&await ke.removeItem(this.getConversationKey(i.id))}await ke.setItem(this.getMetadataKey(),JSON.stringify(r))}static async getHistory(){const e=this.getMetadataKey();console.log("[ConversationService] Loading history from key:",e);const n=await ke.getItem(e);if(console.log("[ConversationService] Raw data:",n?`${n.length} characters`:"null"),!n)return[];try{const r=JSON.parse(n);return console.log("[ConversationService] Parsed conversations:",Array.isArray(r)?r.length:"not array"),Array.isArray(r)?r:[]}catch(r){return console.error("Failed to parse conversation history:",r),[]}}static async loadConversation(e,n){const r=await ke.getItem(this.getConversationKey(e));if(!r)return null;try{const i=await or.decrypt(r,n);return JSON.parse(i)}catch(i){throw console.error(`Failed to load conversation ${e}:`,i),new Error("Failed to decrypt conversation. Wrong password?")}}static async deleteConversation(e){await ke.removeItem(this.getConversationKey(e));const n=await ke.getItem(this.getMetadataKey());if(n){let r=JSON.parse(n);r=r.filter(i=>i.id!==e),await ke.setItem(this.getMetadataKey(),JSON.stringify(r))}}static generateTitle(e){return e?e.length>30?e.substring(0,30)+"...":e:"New Conversation"}}class Ept{constructor(){this.connection=new g7(hB,"confirmed"),this.apiBaseUrl=rKe}async getAllPools(e=100){try{const n=await fetch(`${this.apiBaseUrl}/pair/all_by_groups`);if(!n.ok)throw new Error(`Meteora API error: ${n.status}`);const r=await n.json();let i=[];return r.groups&&Array.isArray(r.groups)?r.groups.forEach(s=>{s.pairs&&Array.isArray(s.pairs)&&i.push(...s.pairs)}):Array.isArray(r)?i=r:r.pairs&&(i=r.pairs),i.sort((s,o)=>{const a=parseFloat(s.liquidity)||0;return(parseFloat(o.liquidity)||0)-a}),i.slice(0,e).map(s=>this.mapApiPoolToLiquidityPool(s))}catch(n){throw console.error("[MeteoraService] Error fetching pools:",n),n}}async getPool(e){try{const n=await fetch(`${this.apiBaseUrl}/pair/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return this.mapApiPoolToLiquidityPool(r)}catch(n){return console.error("[MeteoraService] Error fetching pool:",n),null}}async queryPools(e){try{let n=await this.getAllPools(500);if(e.tokenMint){const r=e.tokenMint.toLowerCase();n=n.filter(i=>i.tokenA.mint.toLowerCase()===r||i.tokenB.mint.toLowerCase()===r)}if(e.tokenPair){const{tokenA:r,tokenB:i}=e.tokenPair;n=n.filter(s=>s.tokenA.symbol.toUpperCase()===r.toUpperCase()&&s.tokenB.symbol.toUpperCase()===i.toUpperCase()||s.tokenA.symbol.toUpperCase()===i.toUpperCase()&&s.tokenB.symbol.toUpperCase()===r.toUpperCase())}if(e.minTVL!==void 0&&(n=n.filter(r=>r.tvl>=e.minTVL)),e.maxTVL!==void 0&&(n=n.filter(r=>r.tvl<=e.maxTVL)),e.minVolume!==void 0){const r=e.volumeTimeframe||"24h";n=n.filter(i=>(i.volume[r]||i.volume["24h"]||0)>=e.minVolume)}if(e.minAPY!==void 0&&(n=n.filter(r=>(r.apy||0)>=e.minAPY)),e.sortBy){const r=e.sortOrder==="asc"?1:-1;n.sort((i,s)=>{let o,a;switch(e.sortBy){case"tvl":o=i.tvl,a=s.tvl;break;case"volume":const l=e.volumeTimeframe||"24h";o=i.volume[l]||i.volume["24h"]||0,a=s.volume[l]||s.volume["24h"]||0;break;case"apy":o=i.apy||0,a=s.apy||0;break;case"fee":o=i.feeBps,a=s.feeBps;break;default:o=0,a=0}return(a-o)*r})}return e.limit&&(n=n.slice(0,e.limit)),n}catch(n){return console.error("[MeteoraService] Error querying pools:",n),[]}}async getPoolVolume(e,n){try{const r=this.timeframeToDays(n),i=await fetch(`${this.apiBaseUrl}/pair/${e}/analytic/pair_trade_volume?days=${r}`);if(!i.ok)return 0;const s=await i.json();return Array.isArray(s)&&s.length>0?s.reduce((o,a)=>o+(a.volume||0),0):0}catch(r){return console.error("[MeteoraService] Error fetching pool volume:",r),0}}async getPoolAPY(e){const n=await this.getPool(e);return(n==null?void 0:n.apy)||0}async getPoolTVLHistory(e,n=7){try{const r=await fetch(`${this.apiBaseUrl}/pair/${e}/analytic/pair_tvl?days=${n}`);if(!r.ok)return[];const i=await r.json();return Array.isArray(i)?i.map(s=>({timestamp:new Date(s.date||s.timestamp).getTime(),value:s.tvl||s.value||0})):[]}catch(r){return console.error("[MeteoraService] Error fetching TVL history:",r),[]}}async getPositions(e){try{const n=await fetch(`${this.apiBaseUrl}/wallet/${e}/positions`);if(!n.ok){if(n.status===404)return[];throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return(Array.isArray(r)?r:r.positions||[]).map(s=>this.mapApiPositionToLiquidityPosition(s))}catch(n){return console.error("[MeteoraService] Error fetching positions:",n),[]}}async getPosition(e){try{const n=await fetch(`${this.apiBaseUrl}/position/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return this.mapApiPositionToLiquidityPosition(r)}catch(n){return console.error("[MeteoraService] Error fetching position:",n),null}}async getUnclaimedFees(e){try{const n=await fetch(`${this.apiBaseUrl}/position/${e}/claim_fees`);if(!n.ok)return{tokenA:0,tokenB:0,totalUSD:0};const r=await n.json();return{tokenA:r.feeX||r.tokenA||0,tokenB:r.feeY||r.tokenB||0,totalUSD:r.totalUSD||0}}catch(n){return console.error("[MeteoraService] Error fetching unclaimed fees:",n),{tokenA:0,tokenB:0,totalUSD:0}}}async addLiquidity(e,n){try{console.log("[MeteoraService] Adding liquidity:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await r.create(this.connection,new ft(n.poolAddress)),s=await i.getActiveBin(),o=i.lbPair.binStep;let a,l;n.priceMin&&n.priceMax?(a=i.getBinIdFromPrice(n.priceMin,!0),l=i.getBinIdFromPrice(n.priceMax,!1)):(a=s.binId-5,l=s.binId+5);const c=await i.addLiquidityByStrategy({positionPubKey:e.publicKey,user:e.publicKey,totalXAmount:BigInt(n.amountA*Math.pow(10,9)),totalYAmount:BigInt(n.amountB*Math.pow(10,9)),strategy:{minBinId:a,maxBinId:l,strategyType:"Spot"},slippage:n.slippageBps?n.slippageBps/1e4:.005}),u=await this.connection.sendTransaction(c,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(u,"confirmed"),{success:!0,txSignature:u,positionAddress:e.publicKey.toString(),tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[MeteoraService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async removeLiquidity(e,n){try{console.log("[MeteoraService] Removing liquidity:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n.positionAddress);if(!i)return{success:!1,error:"Position not found"};const s=await r.create(this.connection,new ft(i.poolAddress)),o=Math.floor(n.percentage/100*1e4),a=await s.removeLiquidity({user:e.publicKey,position:new ft(n.positionAddress),binLiquidityRemoval:o,shouldClaimAndClose:n.percentage>=100}),l=await this.connection.sendTransaction(a,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(l,"confirmed"),{success:!0,txSignature:l,tokensReceived:{tokenA:i.tokenAAmount*(n.percentage/100),tokenB:i.tokenBAmount*(n.percentage/100)}}}catch(r){return console.error("[MeteoraService] Error removing liquidity:",r),{success:!1,error:r.message||"Failed to remove liquidity"}}}async claimFees(e,n){try{console.log("[MeteoraService] Claiming fees:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n);if(!i)return{success:!1,error:"Position not found"};const o=await(await r.create(this.connection,new ft(i.poolAddress))).claimSwapFee({owner:e.publicKey,position:new ft(n)}),a=await this.connection.sendTransaction(o,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a,feesClaimed:{tokenA:i.unclaimedFees.tokenA,tokenB:i.unclaimedFees.tokenB,totalUSD:i.unclaimedFees.totalUSD}}}catch(r){return console.error("[MeteoraService] Error claiming fees:",r),{success:!1,error:r.message||"Failed to claim fees"}}}async claimRewards(e,n){try{console.log("[MeteoraService] Claiming rewards:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n);if(!i)return{success:!1,error:"Position not found"};const o=await(await r.create(this.connection,new ft(i.poolAddress))).claimLMReward({owner:e.publicKey,position:new ft(n)}),a=await this.connection.sendTransaction(o,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a}}catch(r){return console.error("[MeteoraService] Error claiming rewards:",r),{success:!1,error:r.message||"Failed to claim rewards"}}}async loadDLMMSDK(){try{const n=await import("@meteora-ag/dlmm");return n.DLMM||n.default}catch{return console.warn("[MeteoraService] DLMM SDK not available - operations will return gracefully"),null}}mapApiPoolToLiquidityPool(e){const n=parseFloat(e.liquidity)||e.tvl||0,r=e.trade_volume_24h||e.volume24h||e.volume||0,i=e.trade_volume_7d||e.volume7d||0;return n>1e4&&console.log("[MeteoraService] Pool with TVL:",e.name,"TVL:",n,"Vol24h:",r),{address:e.address||e.pair_address||e.pubkey,protocol:"meteora_dlmm",name:e.name||`${e.mint_x_symbol||"Token"}-${e.mint_y_symbol||"Token"}`,tokenA:{mint:e.mint_x||e.tokenAMint||"",symbol:e.mint_x_symbol||e.tokenASymbol||"Unknown",decimals:e.mint_x_decimals||e.tokenADecimals||9},tokenB:{mint:e.mint_y||e.tokenBMint||"",symbol:e.mint_y_symbol||e.tokenBSymbol||"Unknown",decimals:e.mint_y_decimals||e.tokenBDecimals||9},tvl:n,feeBps:e.base_fee_bps||e.fee_bps||e.feeBps||0,apy:e.apy||e.apr||0,volume:{"24h":r,"7d":i},binStep:e.bin_step||e.binStep,currentPrice:e.current_price||e.price}}mapApiPositionToLiquidityPosition(e){return{positionAddress:e.address||e.position_address||e.pubkey,poolAddress:e.pair_address||e.pool_address||e.pool,protocol:"meteora_dlmm",tokenAAmount:e.token_x_amount||e.tokenA||0,tokenBAmount:e.token_y_amount||e.tokenB||0,valueUSD:e.value_usd||e.totalValue||0,unclaimedFees:{tokenA:e.unclaimed_fee_x||0,tokenB:e.unclaimed_fee_y||0,totalUSD:e.unclaimed_fee_usd||0},priceRange:e.lower_bin_id&&e.upper_bin_id?{min:e.lower_bin_price||0,max:e.upper_bin_price||0,current:e.current_price||0,inRange:e.in_range??!0}:void 0,binIds:e.bin_ids||[]}}timeframeToDays(e){switch(e){case"5m":return 1;case"15m":return 1;case"1h":return 1;case"4h":return 1;case"24h":return 1;case"7d":return 7;default:return 1}}}const Is=new Ept;class Spt{async getPoolContext(e){const n=await Is.getPool(e);return n?{pool:n,volume24h:n.volume["24h"]||0,volume7d:n.volume["7d"]||0,tvl:n.tvl,apy:n.apy||0,feeBps:n.feeBps,binStep:n.binStep,currentPrice:n.currentPrice,timestamp:Date.now()}:null}async getBatchContext(e,n){const r=await Is.queryPools(n||{limit:50}),i=r.map(c=>({pool:c,volume24h:c.volume["24h"]||0,volume7d:c.volume["7d"]||0,tvl:c.tvl,apy:c.apy||0,feeBps:c.feeBps,binStep:c.binStep,currentPrice:c.currentPrice,timestamp:Date.now()})),s=this.rankPools(r,"volume",10),o=this.rankPools(r,"apy",10);let a=[],l=0;return e&&(a=await Is.getPositions(e),l=a.reduce((c,u)=>c+u.valueUSD,0)),{pools:i,topByVolume:s,topByAPY:o,positions:a,totalValueUSD:l,timestamp:Date.now()}}async getPortfolioContext(e){const n=await Is.getPositions(e),r=n.reduce((s,o)=>s+o.valueUSD,0),i=n.reduce((s,o)=>{var a;return s+(((a=o.unclaimedFees)==null?void 0:a.totalUSD)||0)},0);return{positions:n,totalValueUSD:r,totalUnclaimedFeesUSD:i,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"meteora_dlmm",positionCount:n.length,totalValueUSD:r}]}}async getTopPools(e,n){const r={minTVL:n==null?void 0:n.minTVL,volumeTimeframe:n==null?void 0:n.timeframe,sortBy:e,sortOrder:"desc",limit:(n==null?void 0:n.limit)||10},i=await Is.queryPools(r);return this.rankPools(i,e,(n==null?void 0:n.limit)||10)}async findBestPool(e,n,r="tvl"){const i=await Is.queryPools({tokenPair:{tokenA:e,tokenB:n},sortBy:r,sortOrder:"desc",limit:1});return i.length===0?null:{pool:i[0],rank:1,score:this.getPoolScore(i[0],r),reason:`Best Meteora pool for ${e}/${n} by ${r}`}}buildAnalysisPrompt(e,n){const{pools:r,topByVolume:i,topByAPY:s,positions:o,totalValueUSD:a}=e;let l=`## Meteora DLMM Context

`;return l+=`**User Query:** ${n}

`,o.length>0&&(l+=`### Your Meteora Positions
`,l+=`- Total Positions: ${o.length}
`,l+=`- Total Value: $${a.toLocaleString()}

`,o.slice(0,5).forEach((c,u)=>{l+=`${u+1}. Pool: ${c.poolAddress.slice(0,8)}... | `,l+=`Value: $${c.valueUSD.toLocaleString()} | `,l+=`Unclaimed Fees: $${c.unclaimedFees.totalUSD.toFixed(2)}
`}),l+=`
`),l+=`### Top Pools by Volume (24h)
`,i.slice(0,5).forEach((c,u)=>{l+=`${u+1}. ${c.pool.name} | TVL: $${c.pool.tvl.toLocaleString()} | `,l+=`Vol: $${(c.pool.volume["24h"]||0).toLocaleString()} | `,l+=`APY: ${(c.pool.apy||0).toFixed(2)}%
`}),l+=`
`,l+=`### Top Pools by APY
`,s.slice(0,5).forEach((c,u)=>{l+=`${u+1}. ${c.pool.name} | APY: ${(c.pool.apy||0).toFixed(2)}% | `,l+=`TVL: $${c.pool.tvl.toLocaleString()}
`}),l}rankPools(e,n,r){return[...e].sort((s,o)=>{const a=this.getPoolScore(s,n);return this.getPoolScore(o,n)-a}).slice(0,r).map((s,o)=>({pool:s,rank:o+1,score:this.getPoolScore(s,n),reason:`Ranked #${o+1} by ${n}`}))}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}}const Apt=new Spt;class Tpt{constructor(){this.connection=new g7(hB,"confirmed"),this.apiBaseUrl="https://api-v3.raydium.io"}async getPoolList(e){var n;try{const r=e==="clmm"?"Concentrated":e==="cpmm"?"Standard":"all",i=await fetch(`${this.apiBaseUrl}/pools/info/list?poolType=${r}&poolSortField=default&sortType=desc&pageSize=50&page=1`);if(!i.ok)throw new Error(`Raydium API error: ${i.status}`);const s=await i.json();return(((n=s.data)==null?void 0:n.data)||s.data||[]).map(a=>this.mapApiPoolToLiquidityPool(a,e))}catch(r){return console.error("[RaydiumService] Error fetching pools:",r),[]}}async getPoolById(e){try{const n=await fetch(`${this.apiBaseUrl}/pools/info/ids?ids=${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json(),i=r.data||r||[];return i.length===0?null:this.mapApiPoolToLiquidityPool(i[0])}catch(n){return console.error("[RaydiumService] Error fetching pool:",n),null}}async fetchPoolByMints(e,n){try{const r=await fetch(`${this.apiBaseUrl}/pools/info/mint?mint1=${e}&mint2=${n}`);if(!r.ok)throw new Error(`Raydium API error: ${r.status}`);const i=await r.json();return(i.data||i||[]).map(o=>this.mapApiPoolToLiquidityPool(o))}catch(r){return console.error("[RaydiumService] Error fetching pools by mints:",r),[]}}async queryPools(e){try{let n=await this.getPoolList("all");if(e.protocol&&e.protocol.length>0&&(n=n.filter(r=>e.protocol.includes(r.protocol))),e.tokenMint){const r=e.tokenMint.toLowerCase();n=n.filter(i=>i.tokenA.mint.toLowerCase()===r||i.tokenB.mint.toLowerCase()===r)}if(e.tokenPair){const{tokenA:r,tokenB:i}=e.tokenPair;n=n.filter(s=>s.tokenA.symbol.toUpperCase()===r.toUpperCase()&&s.tokenB.symbol.toUpperCase()===i.toUpperCase()||s.tokenA.symbol.toUpperCase()===i.toUpperCase()&&s.tokenB.symbol.toUpperCase()===r.toUpperCase())}if(e.minTVL!==void 0&&(n=n.filter(r=>r.tvl>=e.minTVL)),e.maxTVL!==void 0&&(n=n.filter(r=>r.tvl<=e.maxTVL)),e.minVolume!==void 0){const r=e.volumeTimeframe||"24h";n=n.filter(i=>(i.volume[r]||i.volume["24h"]||0)>=e.minVolume)}if(e.minAPY!==void 0&&(n=n.filter(r=>(r.apy||0)>=e.minAPY)),e.sortBy){const r=e.sortOrder==="asc"?1:-1;n.sort((i,s)=>{let o,a;switch(e.sortBy){case"tvl":o=i.tvl,a=s.tvl;break;case"volume":const l=e.volumeTimeframe||"24h";o=i.volume[l]||i.volume["24h"]||0,a=s.volume[l]||s.volume["24h"]||0;break;case"apy":o=i.apy||0,a=s.apy||0;break;case"fee":o=i.feeBps,a=s.feeBps;break;default:o=0,a=0}return(a-o)*r})}return e.limit&&(n=n.slice(0,e.limit)),n}catch(n){return console.error("[RaydiumService] Error querying pools:",n),[]}}async getPoolVolume(e,n){const r=await this.getPoolById(e);return r&&(r.volume[n]||r.volume["24h"])||0}async getPoolAPY(e){const n=await this.getPoolById(e);return(n==null?void 0:n.apy)||0}async getPositions(e){try{const n=await fetch(`${this.apiBaseUrl}/clmm/position/byOwner?owner=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json();return(r.data||r||[]).map(s=>this.mapApiPositionToLiquidityPosition(s))}catch(n){return console.error("[RaydiumService] Error fetching positions:",n),[]}}async getPositionByNft(e){try{const n=await fetch(`${this.apiBaseUrl}/clmm/position/byNft?nft=${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json();return this.mapApiPositionToLiquidityPosition(r.data||r)}catch(n){return console.error("[RaydiumService] Error fetching position:",n),null}}async getSwapQuote(e){var n,r,i,s;try{const o=await fetch(`${this.apiBaseUrl}/compute/swap-base-in?inputMint=${e.inputMint}&outputMint=${e.outputMint}&amount=${e.amount}&slippageBps=${e.slippageBps||50}`);if(!o.ok)throw new Error(`Raydium API error: ${o.status}`);const a=await o.json();return{inputMint:e.inputMint,outputMint:e.outputMint,inputAmount:e.amount,outputAmount:((n=a.data)==null?void 0:n.outputAmount)||a.outputAmount||0,priceImpact:((r=a.data)==null?void 0:r.priceImpact)||a.priceImpact||0,fee:((i=a.data)==null?void 0:i.fee)||a.fee||0,route:((s=a.data)==null?void 0:s.routePlan)||a.route||[]}}catch(o){return console.error("[RaydiumService] Error getting swap quote:",o),null}}async swap(e,n){try{console.log("[RaydiumService] Executing swap:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getSwapQuote(n);if(!s)return{success:!1,error:"Could not get swap quote"};const{txId:o}=await i.trade.swap({inputMint:new ft(n.inputMint),outputMint:new ft(n.outputMint),amount:n.amount,slippage:(n.slippageBps||50)/1e4});return await this.connection.confirmTransaction(o,"confirmed"),{success:!0,txSignature:o,details:{inputAmount:n.amount,outputAmount:s.outputAmount,priceImpact:s.priceImpact}}}catch(r){return console.error("[RaydiumService] Error executing swap:",r),{success:!1,error:r.message||"Failed to execute swap"}}}async addLiquidityCLMM(e,n){try{console.log("[RaydiumService] Adding CLMM liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPoolById(n.poolAddress);if(!s)return{success:!1,error:"Pool not found"};let o,a;if(n.priceMin&&n.priceMax)o=this.priceToTick(n.priceMin,s.tokenA.decimals,s.tokenB.decimals),a=this.priceToTick(n.priceMax,s.tokenA.decimals,s.tokenB.decimals);else{const u=this.priceToTick(s.currentPrice||1,s.tokenA.decimals,s.tokenB.decimals);o=u-1e3,a=u+1e3}const{txId:l,nftMint:c}=await i.clmm.openPositionFromBase({poolId:n.poolAddress,ownerInfo:{useSOLBalance:!0},tickLower:o,tickUpper:a,base:"MintA",baseAmount:BigInt(Math.floor(n.amountA*Math.pow(10,s.tokenA.decimals))),otherAmountMax:BigInt(Math.floor(n.amountB*Math.pow(10,s.tokenB.decimals)))});return await this.connection.confirmTransaction(l,"confirmed"),{success:!0,txSignature:l,positionAddress:c==null?void 0:c.toString(),tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[RaydiumService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async addLiquidityCPMM(e,n){try{console.log("[RaydiumService] Adding CPMM liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPoolById(n.poolAddress);if(!s)return{success:!1,error:"Pool not found"};const{txId:o}=await i.cpmm.addLiquidity({poolId:n.poolAddress,inputAmount:BigInt(Math.floor(n.amountA*Math.pow(10,s.tokenA.decimals))),slippage:(n.slippageBps||50)/1e4});return await this.connection.confirmTransaction(o,"confirmed"),{success:!0,txSignature:o,tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[RaydiumService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async removeLiquidity(e,n){try{console.log("[RaydiumService] Removing liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPositionByNft(n.positionAddress);if(!s)return{success:!1,error:"Position not found"};const o=n.percentage>=100,{txId:a}=await i.clmm.decreaseLiquidity({poolId:s.poolAddress,ownerPosition:new ft(n.positionAddress),liquidity:o?"all":`${n.percentage}%`,amountMinA:"0",amountMinB:"0"});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a,tokensReceived:{tokenA:s.tokenAAmount*(n.percentage/100),tokenB:s.tokenBAmount*(n.percentage/100)}}}catch(r){return console.error("[RaydiumService] Error removing liquidity:",r),{success:!1,error:r.message||"Failed to remove liquidity"}}}async loadRaydiumSDK(){try{const n=await import("@raydium-io/raydium-sdk-v2");return n.Raydium||n.default}catch{return console.warn("[RaydiumService] Raydium SDK not available - operations will return gracefully"),null}}priceToTick(e,n,r){const i=e*Math.pow(10,r-n);return Math.floor(Math.log(i)/Math.log(1.0001))}tickToPrice(e,n,r){return Math.pow(1.0001,e)*Math.pow(10,n-r)}mapApiPoolToLiquidityPool(e,n){var a,l,c,u,h,m,g,x,v,b,w;const r=e.type||n,i=r==="Concentrated"||r==="clmm"?"raydium_clmm":"raydium_cpmm",s=((a=e.day)==null?void 0:a.volume)||e.volume24h||0,o=((l=e.week)==null?void 0:l.volume)||e.volume7d||0;return{address:e.id||e.poolId||e.address,protocol:i,name:e.poolName||`${((c=e.mintA)==null?void 0:c.symbol)||"Token"}-${((u=e.mintB)==null?void 0:u.symbol)||"Token"}`,tokenA:{mint:((h=e.mintA)==null?void 0:h.address)||e.baseMint||"",symbol:((m=e.mintA)==null?void 0:m.symbol)||e.baseSymbol||"Unknown",decimals:((g=e.mintA)==null?void 0:g.decimals)||e.baseDecimals||9},tokenB:{mint:((x=e.mintB)==null?void 0:x.address)||e.quoteMint||"",symbol:((v=e.mintB)==null?void 0:v.symbol)||e.quoteSymbol||"Unknown",decimals:((b=e.mintB)==null?void 0:b.decimals)||e.quoteDecimals||9},tvl:e.tvl||e.liquidity||0,feeBps:e.feeRate?e.feeRate*1e4:e.feeBps||0,apy:((w=e.day)==null?void 0:w.apr)||e.apy||0,volume:{"24h":s,"7d":o},tickSpacing:e.tickSpacing,currentPrice:e.price}}mapApiPositionToLiquidityPosition(e){return{positionAddress:e.nftMint||e.positionId||e.address,poolAddress:e.poolId||e.pool,protocol:"raydium_clmm",tokenAAmount:e.amountA||e.tokenA||0,tokenBAmount:e.amountB||e.tokenB||0,valueUSD:e.positionUsd||e.valueUsd||0,unclaimedFees:{tokenA:e.tokenFeeAmountA||0,tokenB:e.tokenFeeAmountB||0,totalUSD:e.unclaimedFeeUsd||0},priceRange:{min:e.priceLower||0,max:e.priceUpper||0,current:e.currentPrice||0,inRange:e.inRange??!0},tickLower:e.tickLower,tickUpper:e.tickUpper,nftMint:e.nftMint}}}const ji=new Tpt;class kpt{async getPoolContext(e){const n=await ji.getPoolById(e);return n?{pool:n,volume24h:n.volume["24h"]||0,volume7d:n.volume["7d"]||0,tvl:n.tvl,apy:n.apy||0,feeBps:n.feeBps,tickSpacing:n.tickSpacing,currentPrice:n.currentPrice,timestamp:Date.now()}:null}async getBatchContext(e,n){const r=await ji.queryPools(n||{limit:50}),i=r.map(c=>({pool:c,volume24h:c.volume["24h"]||0,volume7d:c.volume["7d"]||0,tvl:c.tvl,apy:c.apy||0,feeBps:c.feeBps,tickSpacing:c.tickSpacing,currentPrice:c.currentPrice,timestamp:Date.now()})),s=this.rankPools(r,"volume",10),o=this.rankPools(r,"apy",10);let a=[],l=0;return e&&(a=await ji.getPositions(e),l=a.reduce((c,u)=>c+u.valueUSD,0)),{pools:i,topByVolume:s,topByAPY:o,positions:a,totalValueUSD:l,timestamp:Date.now()}}async getPortfolioContext(e){const n=await ji.getPositions(e),r=n.reduce((a,l)=>a+l.valueUSD,0),i=n.reduce((a,l)=>{var c;return a+(((c=l.unclaimedFees)==null?void 0:c.totalUSD)||0)},0),s=n.filter(a=>a.protocol==="raydium_clmm"),o=n.filter(a=>a.protocol==="raydium_cpmm");return{positions:n,totalValueUSD:r,totalUnclaimedFeesUSD:i,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"raydium_clmm",positionCount:s.length,totalValueUSD:s.reduce((a,l)=>a+l.valueUSD,0)},{protocol:"raydium_cpmm",positionCount:o.length,totalValueUSD:o.reduce((a,l)=>a+l.valueUSD,0)}]}}async getTopPools(e,n){const r={minTVL:n==null?void 0:n.minTVL,volumeTimeframe:n==null?void 0:n.timeframe,sortBy:e,sortOrder:"desc",limit:(n==null?void 0:n.limit)||10};n!=null&&n.poolType&&(r.protocol=[n.poolType==="clmm"?"raydium_clmm":"raydium_cpmm"]);const i=await ji.queryPools(r);return this.rankPools(i,e,(n==null?void 0:n.limit)||10)}async findBestPool(e,n,r="tvl"){const i=await ji.queryPools({tokenPair:{tokenA:e,tokenB:n},sortBy:r,sortOrder:"desc",limit:1});return i.length===0?null:{pool:i[0],rank:1,score:this.getPoolScore(i[0],r),reason:`Best Raydium pool for ${e}/${n} by ${r}`}}async getSwapQuote(e,n,r,i){return ji.getSwapQuote({inputMint:e,outputMint:n,amount:r,slippageBps:i})}priceToTick(e,n,r){return ji.priceToTick(e,n,r)}tickToPrice(e,n,r){return ji.tickToPrice(e,n,r)}calculateOptimalRange(e,n){const i={conservative:.1,moderate:.25,aggressive:.5}[n],s=e*(1-i),o=e*(1+i);return{priceMin:s,priceMax:o,rangeWidth:i*2*100}}buildAnalysisPrompt(e,n){const{pools:r,topByVolume:i,topByAPY:s,positions:o,totalValueUSD:a}=e;let l=`## Raydium Context

`;return l+=`**User Query:** ${n}

`,o.length>0&&(l+=`### Your Raydium Positions
`,l+=`- Total Positions: ${o.length}
`,l+=`- Total Value: $${a.toLocaleString()}

`,o.slice(0,5).forEach((c,u)=>{l+=`${u+1}. Pool: ${c.poolAddress.slice(0,8)}... | `,l+=`Value: $${c.valueUSD.toLocaleString()} | `,l+=`Unclaimed: $${c.unclaimedFees.totalUSD.toFixed(2)}
`}),l+=`
`),l+=`### Top Pools by Volume (24h)
`,i.slice(0,5).forEach((c,u)=>{l+=`${u+1}. ${c.pool.name} | TVL: $${c.pool.tvl.toLocaleString()} | `,l+=`Vol: $${(c.pool.volume["24h"]||0).toLocaleString()} | `,l+=`APY: ${(c.pool.apy||0).toFixed(2)}%
`}),l+=`
`,l+=`### Top Pools by APY
`,s.slice(0,5).forEach((c,u)=>{l+=`${u+1}. ${c.pool.name} | APY: ${(c.pool.apy||0).toFixed(2)}% | `,l+=`TVL: $${c.pool.tvl.toLocaleString()}
`}),l}rankPools(e,n,r){return[...e].sort((s,o)=>{const a=this.getPoolScore(s,n);return this.getPoolScore(o,n)-a}).slice(0,r).map((s,o)=>({pool:s,rank:o+1,score:this.getPoolScore(s,n),reason:`Ranked #${o+1} by ${n}`}))}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}}const h0e=new kpt;class Cpt{async searchPools(e){const n=Ko();if(!n)return console.warn("[PoolService] Supabase client not initialized, skipping search."),[];try{let r=n.from("liquidity_pools").select(`
                    id,
                    address,
                    protocol,
                    name,
                    token_a_mint,
                    token_b_mint,
                    liquidity_pool_snapshots (
                        tvl,
                        volume_24h,
                        apy,
                        price,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});e.protocol&&e.protocol.length>0&&(r=r.in("protocol",e.protocol)),e.tokenPair;const{data:i,error:s}=await r;if(s)throw s;return i?i.map(o=>this.mapRowToPool(o)):[]}catch(r){return console.error("[PoolService] Error searching pools:",r),[]}}async getTopPools(e,n=1440){const r=Ko();if(!r)return[];try{if(e==="volume"&&n<1440){const{data:a,error:l}=await r.rpc("get_top_pools_with_delta",{timeframe_minutes:n,rank_limit:50});if(l)console.warn("[PoolService] RPC failed, falling back to standard",l);else return(a||[]).map(c=>({address:c.pool_address,protocol:c.protocol,name:c.pool_name,tokenA:{mint:"",symbol:c.pool_name.split("-")[0]||"?",decimals:9},tokenB:{mint:"",symbol:c.pool_name.split("-")[1]||"?",decimals:9},tvl:c.current_tvl,volume:{"24h":c.delta_volume},apy:c.current_apy}))}const{data:i,error:s}=await r.from("liquidity_pools").select(`
                    *,
                    liquidity_pool_snapshots (
                        tvl,
                        volume_24h,
                        apy,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});if(s)throw s;let o=(i||[]).map(a=>this.mapRowToPool(a));return o.sort((a,l)=>e==="tvl"?l.tvl-a.tvl:e==="apy"?l.apy-a.apy:(l.volume["24h"]||0)-(a.volume["24h"]||0)),o.slice(0,50)}catch(i){return console.error("[PoolService] Error getting top pools:",i),[]}}mapRowToPool(e){var r;const n=((r=e.liquidity_pool_snapshots)==null?void 0:r[0])||{};return{address:e.address,protocol:e.protocol,name:e.name,tokenA:{mint:e.token_a_mint,symbol:e.name.split("-")[0]||"Unknown",decimals:9},tokenB:{mint:e.token_b_mint,symbol:e.name.split("-")[1]||"Unknown",decimals:9},tvl:n.tvl||0,feeBps:0,apy:n.apy||0,volume:{"24h":n.volume_24h||0,"7d":0},currentPrice:n.current_price||n.price||0}}}const yee=new Cpt;class Npt{async discoverPools(e){return await yee.searchPools(e||{})}async searchPools(e,n,r){const i={tokenPair:{tokenA:e,tokenB:n},sortBy:"tvl",sortOrder:"desc"};if(r==="meteora")return Is.queryPools(i);if(r==="raydium")return ji.queryPools(i);const[s,o]=await Promise.all([Is.queryPools(i),ji.queryPools(i)]);return[...s,...o].sort((a,l)=>l.tvl-a.tvl)}async getAllPositions(e){const[n,r]=await Promise.all([Is.getPositions(e),ji.getPositions(e)]),i=[...n,...r],s=i.reduce((a,l)=>a+l.valueUSD,0),o=i.reduce((a,l)=>{var c;return a+(((c=l.unclaimedFees)==null?void 0:c.totalUSD)||0)},0);return{meteora:n,raydium:r,totalValueUSD:s,totalUnclaimedFeesUSD:o}}async getPortfolioContext(e){const n=await this.getAllPositions(e);return{positions:[...n.meteora,...n.raydium],totalValueUSD:n.totalValueUSD,totalUnclaimedFeesUSD:n.totalUnclaimedFeesUSD,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"meteora_dlmm",positionCount:n.meteora.length,totalValueUSD:n.meteora.reduce((i,s)=>i+s.valueUSD,0)},{protocol:"raydium_clmm",positionCount:n.raydium.length,totalValueUSD:n.raydium.reduce((i,s)=>i+s.valueUSD,0)}]}}async getTopPools(e,n){const r=this.timeframeToMinutes((n==null?void 0:n.timeframe)||"24h"),i=await yee.getTopPools(e,r);let s=i;return n!=null&&n.minTVL&&(s=i.filter(o=>o.tvl>=n.minTVL)),s.slice(0,(n==null?void 0:n.limit)||10).map((o,a)=>({pool:o,rank:a+1,score:this.getPoolScore(o,e),reason:`#${a+1} by ${e} across all protocols`}))}timeframeToMinutes(e){switch(e){case"5m":return 5;case"15m":return 15;case"1h":return 60;case"4h":return 240;case"24h":return 1440;case"7d":return 10080;default:return 1440}}async compareProtocols(e,n){const[r,i]=await Promise.all([Is.queryPools({tokenPair:{tokenA:e,tokenB:n}}),ji.queryPools({tokenPair:{tokenA:e,tokenB:n}})]),s=[...r,...i];let o=null,a=-1;for(const l of s){const c=l.tvl/1e3+(l.volume["24h"]||0)/100+(l.apy||0);c>a&&(a=c,o=l)}return{tokenPair:`${e}/${n}`,meteora:r,raydium:i,recommendation:o?{protocol:o.protocol,poolAddress:o.address,reason:`Best overall score considering TVL ($${o.tvl.toLocaleString()}), volume ($${(o.volume["24h"]||0).toLocaleString()}), and APY (${(o.apy||0).toFixed(2)}%)`}:{protocol:"meteora_dlmm",poolAddress:"",reason:"No pools found for this token pair"}}}async recommendProtocol(e,n,r="tvl"){const i=await this.compareProtocols(e,n),s=[...i.meteora,...i.raydium];return s.length===0?[{protocol:"meteora_dlmm",poolAddress:"",reason:`No pools found for ${e}/${n}`}]:s.sort((a,l)=>{const c=this.getPoolScore(a,r);return this.getPoolScore(l,r)-c}).slice(0,3).map((a,l)=>({protocol:a.protocol,poolAddress:a.address,reason:`#${l+1} by ${r}: ${this.formatScore(a,r)}`}))}async buildUnifiedContext(e,n){const[r,i]=await Promise.all([Apt.getBatchContext(e,n),h0e.getBatchContext(e,n)]),s=[...r.pools.map(l=>l.pool),...i.pools.map(l=>l.pool)],o=s.sort((l,c)=>(c.volume["24h"]||0)-(l.volume["24h"]||0)).slice(0,10).map((l,c)=>({pool:l,rank:c+1,score:l.volume["24h"]||0,reason:"Top volume"})),a=s.sort((l,c)=>(c.apy||0)-(l.apy||0)).slice(0,10).map((l,c)=>({pool:l,rank:c+1,score:l.apy||0,reason:"Top APY"}));return{meteora:{pools:r.pools.map(l=>l.pool),topByVolume:r.topByVolume,topByAPY:r.topByAPY},raydium:{pools:i.pools.map(l=>l.pool),topByVolume:i.topByVolume,topByAPY:i.topByAPY},combined:{topByVolume:o,topByAPY:a},positions:{meteora:r.positions,raydium:i.positions,totalValueUSD:r.totalValueUSD+i.totalValueUSD,totalUnclaimedFeesUSD:r.positions.reduce((l,c)=>{var u;return l+(((u=c.unclaimedFees)==null?void 0:u.totalUSD)||0)},0)+i.positions.reduce((l,c)=>{var u;return l+(((u=c.unclaimedFees)==null?void 0:u.totalUSD)||0)},0)},timestamp:Date.now()}}buildAnalysisPrompt(e,n){let r=`## Solana Liquidity Pool Context

`;r+=`**Query:** ${n}

`;const{positions:i}=e;return(i.meteora.length>0||i.raydium.length>0)&&(r+=`### Your LP Portfolio
`,r+=`- Total Value: $${i.totalValueUSD.toLocaleString()}
`,r+=`- Unclaimed Fees: $${i.totalUnclaimedFeesUSD.toFixed(2)}
`,r+=`- Meteora Positions: ${i.meteora.length}
`,r+=`- Raydium Positions: ${i.raydium.length}

`),r+=`### Top Pools by Volume (All Protocols)
`,e.combined.topByVolume.slice(0,5).forEach((s,o)=>{const a=s.pool.protocol.includes("meteora")?"MET":"RAY";r+=`${o+1}. [${a}] ${s.pool.name} | `,r+=`TVL: $${s.pool.tvl.toLocaleString()} | `,r+=`Vol: $${(s.pool.volume["24h"]||0).toLocaleString()}
`}),r+=`
`,r+=`### Top Pools by APY
`,e.combined.topByAPY.slice(0,5).forEach((s,o)=>{const a=s.pool.protocol.includes("meteora")?"MET":"RAY";r+=`${o+1}. [${a}] ${s.pool.name} | `,r+=`APY: ${(s.pool.apy||0).toFixed(2)}% | `,r+=`TVL: $${s.pool.tvl.toLocaleString()}
`}),r}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}formatScore(e,n){switch(n){case"volume":return`$${(e.volume["24h"]||0).toLocaleString()}`;case"apy":return`${(e.apy||0).toFixed(2)}%`;case"tvl":return`$${e.tvl.toLocaleString()}`;default:return""}}}const Tg=new Npt;class Ppt{async calculateVolatility(e,n=7){var r,i;try{const s=await this.getPriceHistory(e,n);if(s.length<2)return{poolAddress:e,currentPrice:((r=s[0])==null?void 0:r.price)||0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:s.length,confidence:"low",error:"Insufficient data for volatility calculation"};const o=[];for(let R=1;R<s.length;R++){const B=s[R-1].price,O=s[R].price;B>0&&O>0&&o.push(Math.log(O/B))}if(o.length===0)return{poolAddress:e,currentPrice:((i=s[s.length-1])==null?void 0:i.price)||0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:s.length,confidence:"low",error:"Could not calculate returns from price data"};const a=o.reduce((R,B)=>R+B,0)/o.length,c=o.map(R=>Math.pow(R-a,2)).reduce((R,B)=>R+B,0)/o.length,m=Math.sqrt(c)*Math.sqrt(288)*100,g=m*Math.sqrt(365),x=s[s.length-1].price,v=this.findPriceAtTime(s,1440),b=this.findPriceAtTime(s,10080),w=v>0?(x-v)/v*100:0,k=b>0?(x-b)/b*100:0;let C;return s.length>=288*3?C="high":s.length>=288?C="medium":C="low",{poolAddress:e,currentPrice:x,volatilityDaily:Math.round(m*100)/100,volatilityAnnualized:Math.round(g*100)/100,priceChange24h:Math.round(w*100)/100,priceChange7d:Math.round(k*100)/100,dataPoints:s.length,confidence:C}}catch(s){return console.error("[VolatilityService] Error calculating volatility:",s),{poolAddress:e,currentPrice:0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:0,confidence:"low",error:s.message}}}suggestOptimalRanges(e,n){const r=n.volatilityDaily/100;return r===0||e===0?this.getDefaultRanges(e):[{strategy:"conservative",...this.calculateRange(e,r,2,7),sigmaMultiple:2,estimatedTimeInRange:"~95% do tempo",description:"Faixa ampla, menor rendimento, menor risco de sair da faixa"},{strategy:"moderate",...this.calculateRange(e,r,1.5,7),sigmaMultiple:1.5,estimatedTimeInRange:"~87% do tempo",description:"Balano entre rendimento e risco"},{strategy:"aggressive",...this.calculateRange(e,r,1,7),sigmaMultiple:1,estimatedTimeInRange:"~68% do tempo",description:"Faixa estreita, maior rendimento, maior risco de sair da faixa"}]}async getPriceHistory(e,n=7){const r=Ko();if(!r)return console.warn("[VolatilityService] Supabase client not available"),[];try{const{data:i,error:s}=await r.from("liquidity_pools").select("id, name").eq("address",e).single();if(s||!i)return console.warn("[VolatilityService] Pool not found:",e),[];const o=new Date;o.setDate(o.getDate()-n);const{data:a,error:l}=await r.from("liquidity_pool_snapshots").select("timestamp, price").eq("pool_id",i.id).gte("timestamp",o.toISOString()).order("timestamp",{ascending:!0});return l?(console.error("[VolatilityService] Error fetching snapshots:",l),[]):(a||[]).map(c=>({timestamp:new Date(c.timestamp),price:parseFloat(c.price)||0})).filter(c=>c.price>0)}catch(i){return console.error("[VolatilityService] Error in getPriceHistory:",i),[]}}async searchPoolsByTokenPair(e,n,r=20){const i=Ko();if(!i)return console.warn("[VolatilityService] Supabase client not available"),[];try{const{data:s,error:o}=await i.from("liquidity_pools").select(`
                    address,
                    name,
                    protocol,
                    liquidity_pool_snapshots (
                        tvl,
                        timestamp
                    )
                `).or(`name.ilike.%${e}%${n}%,name.ilike.%${n}%${e}%`).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});return o?(console.error("[VolatilityService] Error searching pools:",o),[]):(s||[]).filter(c=>{const u=c.name.toUpperCase(),h=e.toUpperCase(),m=n.toUpperCase(),g=new RegExp(`(^|[^A-Z])${h}([^A-Z]|$)`),x=new RegExp(`(^|[^A-Z])${m}([^A-Z]|$)`);return g.test(u)&&x.test(u)}).map(c=>{var u,h;return{address:c.address,name:c.name,protocol:c.protocol,tvl:((h=(u=c.liquidity_pool_snapshots)==null?void 0:u[0])==null?void 0:h.tvl)||0}}).sort((c,u)=>u.tvl-c.tvl).slice(0,r)}catch(s){return console.error("[VolatilityService] Error in searchPoolsByTokenPair:",s),[]}}calculateRange(e,n,r,i){const s=n*Math.sqrt(i),o=r*s,a=e*(1-o),l=e*(1+o),c=o*2*100;return{priceMin:Math.round(a*1e4)/1e4,priceMax:Math.round(l*1e4)/1e4,widthPercent:Math.round(c*10)/10}}findPriceAtTime(e,n){const r=new Date;r.setMinutes(r.getMinutes()-n);let i=e[0],s=Math.abs(e[0].timestamp.getTime()-r.getTime());for(const o of e){const a=Math.abs(o.timestamp.getTime()-r.getTime());a<s&&(s=a,i=o)}return s<1800*1e3?i.price:0}getDefaultRanges(e){return[{strategy:"conservative",...this.calculateRange(e,.04,2,7),sigmaMultiple:2,estimatedTimeInRange:"~95% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"},{strategy:"moderate",...this.calculateRange(e,.04,1.5,7),sigmaMultiple:1.5,estimatedTimeInRange:"~87% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"},{strategy:"aggressive",...this.calculateRange(e,.04,1,7),sigmaMultiple:1,estimatedTimeInRange:"~68% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"}]}}const hg=new Ppt,yy={EXECUTE_LP_OPS:{label:"Execute LP Operations",description:"General LP management",riskLevel:"medium"},OPEN_POSITION:{label:"Open Position",description:"Create new liquidity position",riskLevel:"high"},CLOSE_POSITION:{label:"Close Position",description:"Remove liquidity from position",riskLevel:"high"},REBALANCE_RANGE:{label:"Rebalance Range",description:"Adjust position price range",riskLevel:"high"},CLAIM_FEES:{label:"Claim Fees",description:"Collect earned trading fees",riskLevel:"low"},CLAIM_REWARDS:{label:"Claim Rewards",description:"Collect farming rewards",riskLevel:"low"}},x7={maxRangeWidthPercent:100,minRangeWidthPercent:1,maxCapitalPerPoolPercent:50,maxTotalLPExposurePercent:100,minTVLRequired:0,minVolumeRequired:0,minAPYRequired:0,tokenAllowlist:[],tokenBlocklist:[],protocolAllowlist:[],requireConfirmationFor:["OPEN_POSITION","CLOSE_POSITION","REBALANCE_RANGE"],enabled:!0};class _pt{validateOperation(e,n,r){const i=[],s=[];if(!r.enabled)return{allowed:!0,violations:[],warnings:[]};if(n.rangeWidthPercent!==void 0&&(n.rangeWidthPercent>r.maxRangeWidthPercent&&i.push(`Range width ${n.rangeWidthPercent.toFixed(1)}% exceeds maximum allowed ${r.maxRangeWidthPercent}%`),n.rangeWidthPercent<r.minRangeWidthPercent&&i.push(`Range width ${n.rangeWidthPercent.toFixed(1)}% is below minimum required ${r.minRangeWidthPercent}%`)),n.capitalPercent!==void 0&&n.capitalPercent>r.maxCapitalPerPoolPercent&&i.push(`Capital allocation ${n.capitalPercent.toFixed(1)}% exceeds maximum ${r.maxCapitalPerPoolPercent}% per pool`),n.tvl!==void 0&&n.tvl<r.minTVLRequired&&i.push(`Pool TVL $${n.tvl.toLocaleString()} is below minimum required $${r.minTVLRequired.toLocaleString()}`),n.volume24h!==void 0&&n.volume24h<r.minVolumeRequired&&i.push(`24h volume $${n.volume24h.toLocaleString()} is below minimum required $${r.minVolumeRequired.toLocaleString()}`),n.apy!==void 0&&n.apy<r.minAPYRequired&&s.push(`Pool APY ${n.apy.toFixed(2)}% is below preferred minimum ${r.minAPYRequired}%`),n.tokens&&r.tokenAllowlist.length>0){const o=n.tokens.filter(a=>!r.tokenAllowlist.some(l=>l.toUpperCase()===a.toUpperCase()));o.length>0&&i.push(`Token(s) not in allowlist: ${o.join(", ")}`)}if(n.tokens&&r.tokenBlocklist.length>0){const o=n.tokens.filter(a=>r.tokenBlocklist.some(l=>l.toUpperCase()===a.toUpperCase()));o.length>0&&i.push(`Blocked token(s) detected: ${o.join(", ")}`)}return n.protocol&&r.protocolAllowlist.length>0&&(r.protocolAllowlist.some(a=>n.protocol.toLowerCase().includes(a.toLowerCase()))||i.push(`Protocol "${n.protocol}" is not in the allowed list`)),{allowed:i.length===0,violations:i,warnings:s}}requiresConfirmation(e,n){return n.enabled?n.requireConfirmationFor.includes(e):!1}getRiskLevel(e){var n;return((n=yy[e])==null?void 0:n.riskLevel)||"medium"}generateRangeRationale(e,n,r){const i=[],s={conservative:"Faixa ampla (2)",moderate:"Faixa moderada (1.5)",aggressive:"Faixa estreita (1)"}[e];if(i.push(`${s} selecionada`),n.volatilityDaily>0&&i.push(`devido  volatilidade diria de ${n.volatilityDaily.toFixed(2)}%`),r!=null&&r.volume24h&&r.volume24h>0){const a=r.volume24h>=1e3?`$${(r.volume24h/1e3).toFixed(1)}K`:`$${r.volume24h.toFixed(0)}`;i.push(`volume 24h de ${a}`)}if(r!=null&&r.tvl&&r.tvl>0){const a=r.tvl>=1e6?`$${(r.tvl/1e6).toFixed(2)}M`:r.tvl>=1e3?`$${(r.tvl/1e3).toFixed(1)}K`:`$${r.tvl.toFixed(0)}`;i.push(`TVL de ${a}`)}if(r!=null&&r.apy&&r.apy>0&&i.push(`APY estimado de ${r.apy.toFixed(2)}%`),n.confidence==="low"?i.push("(dados histricos limitados)"):n.confidence==="high"&&i.push("(alta confiana nos dados)"),i.length<=2)return i.join(" ");const o=i.pop();return i.join(", ")+" e "+o}generateOpenPositionRationale(e,n,r,i,s,o){const a=(i-r)/s.currentPrice*100;let l=`Abertura de posio em ${e} com estratgia ${n}. `;return l+=`Range de $${r.toFixed(4)} a $${i.toFixed(4)} (${a.toFixed(1)}% de largura). `,l+=`Capital: $${o.toLocaleString()}. `,s.volatilityDaily>5?l+=` Alta volatilidade (${s.volatilityDaily.toFixed(2)}%/dia) - maior risco de sair do range. `:s.volatilityDaily<2&&(l+=`Baixa volatilidade (${s.volatilityDaily.toFixed(2)}%/dia) - range deve permanecer ativo. `),s.priceChange24h>10?l+=`Preo subiu ${s.priceChange24h.toFixed(2)}% em 24h - considere range assimtrico para cima.`:s.priceChange24h<-10&&(l+=`Preo caiu ${Math.abs(s.priceChange24h).toFixed(2)}% em 24h - considere range assimtrico para baixo.`),l.trim()}generateClosePositionRationale(e,n,r,i){let s=`Fechamento de posio em ${e}. `;return n||(s+="Posio fora do range - no est gerando fees. "),r>0&&(s+=`Fees no coletados: $${r.toFixed(2)} sero resgatados automaticamente. `),i&&(s+=i),s.trim()}generateRebalanceRationale(e,n,r,i,s){let o=`Rebalanceamento de ${e}. `;if(o+=`Range anterior: $${n.min.toFixed(4)} - $${n.max.toFixed(4)}. `,o+=`Novo range: $${r.min.toFixed(4)} - $${r.max.toFixed(4)}. `,o+=`Preo atual: $${i.toFixed(4)}. `,i<n.min){const a=(n.min-i)/n.min*100;o+=`Preo ${a.toFixed(1)}% abaixo do range anterior. `}else if(i>n.max){const a=(i-n.max)/n.max*100;o+=`Preo ${a.toFixed(1)}% acima do range anterior. `}return o+=`Volatilidade: ${s.volatilityDaily.toFixed(2)}%/dia.`,o.trim()}}const Bb=new _pt,p0e={policy:x7,autoClaimFees:!1,autoRebalance:!1,rebalanceThresholdPercent:10},xee={isOn:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",activePositions:[],totalValueUSD:0,totalUnclaimedFeesUSD:0,settings:p0e,logs:[],auditLog:[],pendingConfirmation:null};class Ipt{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=xee,this.listeners=new Set}async init(){if(!this.isInitialized)return this.initPromise?this.initPromise:(this.initPromise=(async()=>{try{const e=await ke.getItem("solana_dealer_settings");if(e){const n=JSON.parse(e);this.state={...xee,settings:{...p0e,...n.settings}}}this.isInitialized=!0}catch(e){console.error("[SolanaDealerStore] Failed to load settings:",e),this.isInitialized=!0}})(),this.initPromise)}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){this.listeners.forEach(e=>e())}getState(){return this.state}getPolicy(){return this.state.settings.policy}getAuditLog(){return this.state.auditLog}getLogs(){return this.state.logs}setStatus(e,n){this.state={...this.state,statusMessage:e,statusDetail:n||this.state.statusDetail},this.notify()}setOn(e){this.state={...this.state,isOn:e},this.notify(),this.addLog("INFO",e?"Solana Dealer activated":"Solana Dealer deactivated")}updatePolicy(e){this.state={...this.state,settings:{...this.state.settings,policy:{...this.state.settings.policy,...e}}},this.notify(),this.saveSettings(),this.addLog("POLICY","Policy updated",e)}resetPolicy(){this.state={...this.state,settings:{...this.state.settings,policy:x7}},this.notify(),this.saveSettings(),this.addLog("POLICY","Policy reset to defaults")}addAuditEntry(e){const n=`audit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={...e,id:n,timestamp:Date.now()};return this.state={...this.state,auditLog:[r,...this.state.auditLog].slice(0,500)},this.notify(),this.saveAuditLog(),n}updateAuditEntry(e,n){this.state={...this.state,auditLog:this.state.auditLog.map(r=>r.id===e?{...r,...n}:r)},this.notify(),this.saveAuditLog()}addLog(e,n,r){const i={id:`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),type:e,message:n,details:r};this.state={...this.state,logs:[i,...this.state.logs].slice(0,200)},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}updatePositions(e){const n=e.reduce((i,s)=>i+s.valueUSD,0),r=e.reduce((i,s)=>i+s.unclaimedFeesUSD,0);this.state={...this.state,activePositions:e,totalValueUSD:n,totalUnclaimedFeesUSD:r},this.notify()}setPendingConfirmation(e){this.state={...this.state,pendingConfirmation:e},this.notify()}clearPendingConfirmation(){this.state={...this.state,pendingConfirmation:null},this.notify()}async saveSettings(){try{await ke.setItem("solana_dealer_settings",JSON.stringify({settings:this.state.settings}))}catch(e){console.error("[SolanaDealerStore] Failed to save settings:",e)}}async saveAuditLog(){try{await ke.setItem("solana_dealer_audit",JSON.stringify(this.state.auditLog.slice(0,100)))}catch(e){console.error("[SolanaDealerStore] Failed to save audit log:",e)}}async loadAuditLog(){try{const e=await ke.getItem("solana_dealer_audit");if(e){const n=JSON.parse(e);this.state={...this.state,auditLog:n},this.notify()}}catch(e){console.error("[SolanaDealerStore] Failed to load audit log:",e)}}getAuditByScope(e,n=10){return this.state.auditLog.filter(r=>r.scope===e).slice(0,n)}getAuditByPool(e,n=10){return this.state.auditLog.filter(r=>r.poolAddress===e).slice(0,n)}getStats(){const e=this.state.auditLog;return{totalOperations:e.length,successfulOperations:e.filter(n=>n.status==="executed").length,failedOperations:e.filter(n=>n.status==="failed").length,policyViolations:e.filter(n=>n.policyViolations&&n.policyViolations.length>0).length}}}const Zr=new Ipt;function Rpt(){const[t,e]=Ns.useState(Zr.getState());return Ns.useEffect(()=>(Zr.init(),Zr.subscribe(()=>{e(Zr.getState())})),[]),t}async function Opt(t,e,n,r){var s,o,a,l,c,u,h,m,g;const i=r||(()=>{});if(t==="searchLiquidityPools")try{i("Searching liquidity pools...");const x={tokenPair:e.tokenA&&e.tokenB?{tokenA:e.tokenA,tokenB:e.tokenB}:void 0,minTVL:e.minTVL,minVolume:e.minVolume,volumeTimeframe:e.volumeTimeframe,minAPY:e.minAPY,sortBy:e.sortBy||"tvl",sortOrder:"desc",limit:e.limit||10};e.protocol&&(e.protocol==="meteora"?x.protocol=["meteora_dlmm","meteora_damm"]:e.protocol==="raydium"&&(x.protocol=["raydium_clmm","raydium_cpmm"]));const v=await Tg.discoverPools(x);if(v.length===0)return{type:"info",title:"No Pools Found",details:"No pools match your search criteria."};let b=`Found ${v.length} pools:

`;return b+=`| Pool | Protocol | TVL | Volume 24h | APY |
|------|----------|-----|------------|-----|
`,v.forEach(w=>{const k=w.protocol.includes("meteora")?"MET":"RAY";b+=`| ${w.name} | ${k} | $${w.tvl.toLocaleString()} | $${(w.volume["24h"]||0).toLocaleString()} | ${(w.apy||0).toFixed(2)}% |
`}),Zr.addLog("INFO",`Searched pools: ${v.length} results`,{filters:x}),{type:"success",semanticType:"analysis",title:"Liquidity Pools",details:b}}catch(x){return{type:"error",semanticType:"analysis",title:"Search Error",details:x.message}}if(t==="getPoolDetails")try{i("Fetching pool details...");let x=await Is.getPool(e.poolAddress);return x||(x=await ji.getPoolById(e.poolAddress)),x?{type:"success",title:"Pool Details",details:`
**${x.name}**
- Protocol: ${x.protocol}
- Address: ${x.address}
- TVL: $${x.tvl.toLocaleString()}
- Volume 24h: $${(x.volume["24h"]||0).toLocaleString()}
- APY: ${(x.apy||0).toFixed(2)}%
- Fee: ${x.feeBps} bps (${(x.feeBps/100).toFixed(2)}%)
- Token A: ${x.tokenA.symbol} (${x.tokenA.mint.slice(0,8)}...)
- Token B: ${x.tokenB.symbol} (${x.tokenB.mint.slice(0,8)}...)
            `.trim()}:{type:"error",title:"Pool Not Found",details:`No pool found with address: ${e.poolAddress}`}}catch(x){return{type:"error",title:"Pool Details Error",details:x.message}}if(t==="getTopLiquidityPools")try{i(`Getting top pools by ${e.criteria}...`);const x=await Tg.getTopPools(e.criteria,{timeframe:e.volumeTimeframe,minTVL:e.minTVL,limit:e.limit||10});if(x.length===0)return{type:"info",title:"No Pools",details:"No pools found matching criteria."};const v=[...x].sort((w,k)=>k.score-w.score);let b=`Top ${v.length} pools by ${e.criteria}:

`;return v.forEach((w,k)=>{const C=w.pool.protocol.includes("meteora")?"MET":"RAY";let R="";e.criteria==="volume"?R=`Vol: $${(w.pool.volume["24h"]||0).toLocaleString()}`:e.criteria==="apy"?R=`APY: ${(w.pool.apy||0).toFixed(2)}%`:R=`TVL: $${w.pool.tvl.toLocaleString()}`,b+=`${k+1}. [${C}] ${w.pool.name} - ${R}
`}),{type:"success",title:`Top Pools by ${e.criteria.toUpperCase()}`,details:b}}catch(x){return{type:"error",title:"Ranking Error",details:x.message}}if(t==="compareLiquidityPools")try{if(i("Comparing pools..."),e.tokenPair){const[x,v]=e.tokenPair.split("/").map(k=>k.trim()),b=await Tg.compareProtocols(x,v);let w=`**Comparison for ${e.tokenPair}**

`;return w+=`Meteora Pools: ${b.meteora.length}
`,w+=`Raydium Pools: ${b.raydium.length}

`,b.recommendation.poolAddress&&(w+=`**Recommendation:** ${b.recommendation.protocol}
`,w+=`Reason: ${b.recommendation.reason}`),{type:"success",title:"Pool Comparison",details:w}}return{type:"error",title:"Compare Error",details:'Please provide tokenPair (e.g., "SOL/USDC")'}}catch(x){return{type:"error",title:"Compare Error",details:x.message}}if(t==="getPoolHistory")try{i("Fetching pool history...");const x=await Is.getPoolTVLHistory(e.poolAddress,e.days||7);if(x.length===0)return{type:"info",title:"No History",details:"No historical data available."};let v=`${e.metric.toUpperCase()} History (${e.days||7} days):

`;return x.slice(-5).forEach(b=>{const w=new Date(b.timestamp).toLocaleDateString();v+=`${w}: $${b.value.toLocaleString()}
`}),{type:"success",title:"Pool History",details:v}}catch(x){return{type:"error",title:"History Error",details:x.message}}if(t==="getLPPositions")try{if(i("Fetching LP positions..."),!n)return{type:"error",title:"Wallet Required",details:"Please connect a wallet to view positions."};const x=await Tg.getAllPositions(n),v=[...x.meteora,...x.raydium];if(v.length===0)return{type:"info",title:"No Positions",details:"You have no active LP positions."};let b=`**Your LP Portfolio**
`;return b+=`Total Value: $${x.totalValueUSD.toLocaleString()}
`,b+=`Unclaimed Fees: $${x.totalUnclaimedFeesUSD.toFixed(2)}

`,b+=`Meteora: ${x.meteora.length} positions
`,b+=`Raydium: ${x.raydium.length} positions

`,v.slice(0,5).forEach((w,k)=>{const C=w.protocol.includes("meteora")?"MET":"RAY";b+=`${k+1}. [${C}] Pool: ${w.poolAddress.slice(0,8)}...
`,b+=`   Value: $${w.valueUSD.toLocaleString()} | Fees: $${w.unclaimedFees.totalUSD.toFixed(2)}
`}),{type:"success",title:"LP Positions",details:b}}catch(x){return{type:"error",title:"Positions Error",details:x.message}}if(t==="getLPPositionDetails")try{i("Fetching position details...");let x=await Is.getPosition(e.positionAddress);return x||(x=await ji.getPositionByNft(e.positionAddress)),x?{type:"success",title:"Position Details",details:`
**Position Details**
- Address: ${x.positionAddress}
- Pool: ${x.poolAddress}
- Protocol: ${x.protocol}
- Value: $${x.valueUSD.toLocaleString()}
- Token A: ${x.tokenAAmount}
- Token B: ${x.tokenBAmount}
- Unclaimed Fees: $${x.unclaimedFees.totalUSD.toFixed(2)}
${x.priceRange?`- Price Range: ${x.priceRange.min.toFixed(4)} - ${x.priceRange.max.toFixed(4)}
- In Range: ${x.priceRange.inRange?"":""}`:""}
            `.trim()}:{type:"error",title:"Position Not Found",details:`Position not found: ${e.positionAddress}`}}catch(x){return{type:"error",title:"Position Error",details:x.message}}if(t==="getUnclaimedLPRewards")try{if(i("Checking unclaimed rewards..."),e.positionAddress){const v=await Is.getUnclaimedFees(e.positionAddress);return{type:"success",title:"Unclaimed Fees",details:`Position ${e.positionAddress.slice(0,8)}...
Token A: ${v.tokenA}
Token B: ${v.tokenB}
Total USD: $${v.totalUSD.toFixed(2)}`}}return n?{type:"success",title:"Total Unclaimed Rewards",details:`Total unclaimed fees across all positions: $${(await Tg.getAllPositions(n)).totalUnclaimedFeesUSD.toFixed(2)}`}:{type:"error",title:"Wallet Required",details:"Please connect a wallet."}}catch(x){return{type:"error",title:"Rewards Error",details:x.message}}if(t==="estimateLPPositionPnL")try{return i("Calculating PnL..."),{type:"info",title:"PnL Estimation",details:"PnL calculation requires entry data. Please check your position details for current value and unclaimed fees."}}catch(x){return{type:"error",title:"PnL Error",details:x.message}}if(t==="addLiquidity"){const x=Zr.getPolicy(),v=Bb.validateOperation("OPEN_POSITION",{poolAddress:e.poolAddress,rangeWidthPercent:e.priceMin&&e.priceMax&&e.currentPrice?(e.priceMax-e.priceMin)/e.currentPrice*100:void 0},x);if(!v.allowed)return Zr.addAuditEntry({scope:"OPEN_POSITION",action:"Add liquidity blocked by policy",poolAddress:e.poolAddress,rationale:"Policy violation detected",params:{amountA:e.amountA,amountB:e.amountB},status:"rejected",policyViolations:v.violations}),{type:"error",semanticType:"decision",title:"Policy Violation",details:` **Operao bloqueada pela Policy Engine**

${v.violations.map(k=>" "+k).join(`
`)}

Ajuste suas polticas em Solana Dealer > Policy para prosseguir.`};const b=Bb.requiresConfirmation("OPEN_POSITION",x),w=`Adio de liquidez na pool ${((s=e.poolAddress)==null?void 0:s.slice(0,8))||"unknown"}. Valores: ${e.amountA} token A + ${e.amountB} token B.`;return b?(Zr.addAuditEntry({scope:"OPEN_POSITION",action:"Add liquidity - awaiting confirmation",poolAddress:e.poolAddress,rationale:w,params:{amountA:e.amountA,amountB:e.amountB,priceMin:e.priceMin,priceMax:e.priceMax},status:"pending"}),{type:"info",semanticType:"decision",title:"Confirm Add Liquidity",details:`Adicionando liquidez  pool ${((o=e.poolAddress)==null?void 0:o.slice(0,8))||"unknown"}:
- Amount A: ${e.amountA}
- Amount B: ${e.amountB}
${e.priceMin?`- Range: ${e.priceMin} - ${e.priceMax}`:""}`,rationale:w,requiresConfirmation:!0,confirmationData:{scope:"OPEN_POSITION",action:"Add Liquidity",poolAddress:e.poolAddress,params:{amountA:e.amountA,amountB:e.amountB,priceMin:e.priceMin,priceMax:e.priceMax},rationale:w}}):(Zr.addLog("OPERATION",`Add liquidity to ${(a=e.poolAddress)==null?void 0:a.slice(0,8)}`,e),{type:"info",semanticType:"execution",title:"Add Liquidity",details:`To add liquidity to pool ${((l=e.poolAddress)==null?void 0:l.slice(0,8))||"unknown"}...:
- Amount A: ${e.amountA}
- Amount B: ${e.amountB}
${e.priceMin?`- Price Range: ${e.priceMin} - ${e.priceMax}`:""}

 SDK integration required. Please use the protocol's web interface for now.`,rationale:w})}if(t==="removeLiquidity"){const x=Zr.getPolicy(),v=Bb.requiresConfirmation("CLOSE_POSITION",x),b=`Remoo de ${e.percentage}% da posio ${((c=e.positionAddress)==null?void 0:c.slice(0,8))||"unknown"}.`;return Zr.addAuditEntry({scope:"CLOSE_POSITION",action:`Remove ${e.percentage}% liquidity`,poolAddress:e.positionAddress,rationale:b,params:{percentage:e.percentage},status:v?"pending":"executed"}),v?{type:"info",semanticType:"decision",title:"Confirm Remove Liquidity",details:`Removendo ${e.percentage}% da posio ${((u=e.positionAddress)==null?void 0:u.slice(0,8))||"unknown"}`,rationale:b,requiresConfirmation:!0,confirmationData:{scope:"CLOSE_POSITION",action:"Remove Liquidity",poolAddress:e.positionAddress,params:{percentage:e.percentage},rationale:b}}:{type:"info",semanticType:"execution",title:"Remove Liquidity",details:`To remove ${e.percentage}% from position ${((h=e.positionAddress)==null?void 0:h.slice(0,8))||"unknown"}...

 SDK integration required. Please use the protocol's web interface for now.`,rationale:b}}if(t==="claimLPFees"||t==="claimLPRewards"){const x=`Claim de fees/rewards da posio ${((m=e.positionAddress)==null?void 0:m.slice(0,8))||"unknown"}.`;return Zr.addAuditEntry({scope:"CLAIM_FEES",action:"Claim fees/rewards",poolAddress:e.positionAddress,rationale:x,params:{},status:"executed"}),{type:"info",semanticType:"execution",title:"Claim Fees/Rewards",details:`To claim from position ${((g=e.positionAddress)==null?void 0:g.slice(0,8))||"unknown"}...

 SDK integration required. Please use the protocol's web interface for now.`,rationale:x}}if(t==="rebalanceLPPosition"){const x=Zr.getPolicy(),v=Bb.requiresConfirmation("REBALANCE_RANGE",x),b=`Rebalanceamento para novo range: ${e.newPriceMin} - ${e.newPriceMax}.`;return Zr.addAuditEntry({scope:"REBALANCE_RANGE",action:"Rebalance to new range",poolAddress:e.positionAddress,rationale:b,params:{newPriceMin:e.newPriceMin,newPriceMax:e.newPriceMax},status:v?"pending":"executed"}),v?{type:"info",semanticType:"decision",title:"Confirm Rebalance",details:`Rebalanceando posio para range ${e.newPriceMin} - ${e.newPriceMax}`,rationale:b,requiresConfirmation:!0,confirmationData:{scope:"REBALANCE_RANGE",action:"Rebalance Position",poolAddress:e.positionAddress,params:{newPriceMin:e.newPriceMin,newPriceMax:e.newPriceMax},rationale:b}}:{type:"info",semanticType:"execution",title:"Rebalance Position",details:`To rebalance position to range ${e.newPriceMin} - ${e.newPriceMax}:

 SDK integration required. Please use the protocol's web interface for now.`,rationale:b}}if(t==="simulateAddLiquidity")try{i("Simulating liquidity addition...");const x=await Is.getPool(e.poolAddress)||await ji.getPoolById(e.poolAddress);if(!x)return{type:"error",title:"Pool Not Found",details:"Cannot simulate - pool not found."};const v=(e.amountA||0)*100+(e.amountB||0),b=x.tvl>0?v/(x.tvl+v)*100:100;return{type:"success",title:"Liquidity Simulation",details:`**Simulation Results**
- Pool: ${x.name}
- Adding: ${e.amountA} token A + ${e.amountB} token B
- Estimated Value: ~$${v.toLocaleString()}
- Share of Pool: ~${b.toFixed(4)}%
- Current Pool TVL: $${x.tvl.toLocaleString()}
- Pool APY: ${(x.apy||0).toFixed(2)}%`}}catch(x){return{type:"error",title:"Simulation Error",details:x.message}}if(t==="estimateImpermanentLoss")try{const x=e.priceChangePercent/100,v=Math.abs(x),w=(2*Math.sqrt(1+v)/(2+v)-1)*100;return{type:"success",title:"Impermanent Loss Estimate",details:`**Price Change: ${e.priceChangePercent>0?"+":""}${e.priceChangePercent}%**

Estimated Impermanent Loss: ${Math.abs(w).toFixed(2)}%

Note: This is a simplified calculation. Actual IL depends on:
- Price range (for concentrated liquidity)
- Pool type (constant product vs concentrated)
- Fees earned (which offset IL)`}}catch(x){return{type:"error",title:"IL Calculation Error",details:x.message}}if(t==="calculateOptimalPriceRange")try{const x=await Is.getPool(e.poolAddress)||await ji.getPoolById(e.poolAddress);if(!x||!x.currentPrice)return{type:"error",title:"Range Error",details:"Could not get current price for pool."};const v=h0e.calculateOptimalRange(x.currentPrice,e.riskLevel);return{type:"success",title:"Optimal Price Range",details:`**${e.riskLevel.toUpperCase()} Range**
- Current Price: $${x.currentPrice.toFixed(4)}
- Suggested Min: $${v.priceMin.toFixed(4)}
- Suggested Max: $${v.priceMax.toFixed(4)}
- Range Width: ${(v.rangeWidth/2).toFixed(1)}%

Wider ranges = more fees earned, less impermanent loss
Tighter ranges = higher capital efficiency, more active management needed`}}catch(x){return{type:"error",title:"Range Error",details:x.message}}if(t==="getLPSwapQuote")try{i("Getting swap quote...");const x=await ji.getSwapQuote({inputMint:e.inputToken,outputMint:e.outputToken,amount:e.amount,slippageBps:e.slippageBps||50});return x?{type:"success",title:"Swap Quote",details:`**${e.inputToken}  ${e.outputToken}**
- Input: ${e.amount}
- Output: ${x.outputAmount}
- Price Impact: ${(x.priceImpact*100).toFixed(2)}%
- Fee: ${x.fee}`}:{type:"error",title:"Quote Error",details:"Could not get swap quote."}}catch(x){return{type:"error",title:"Quote Error",details:x.message}}if(t==="getPoolVolatility")try{if(i("Calculating pool volatility..."),e.tokenA&&e.tokenB&&!e.poolAddress){i("Finding pools for token pair...");const w=await hg.searchPoolsByTokenPair(e.tokenA,e.tokenB,10);if(w.length===0)return{type:"info",title:"No Pool Found",details:`No pool found in database for ${e.tokenA}/${e.tokenB}.

This could mean:
- No pools exist for this pair
- Pools haven't been synced yet (sync runs every 5 min)

Try searching for available pools with: "liste pools"`};let k=` **Volatility Analysis for ${e.tokenA}/${e.tokenB}**
`;k+=`Found ${w.length} pools

`,k+=`| Pool | Protocol | TVL | Daily Vol | Ann. Vol | Price |
`,k+=`|------|----------|-----|-----------|----------|-------|
`;for(const C of w){const R=await hg.calculateVolatility(C.address,e.days||7),B=C.protocol.includes("meteora")?"MET":"RAY",O=R.error?"N/A":`${R.volatilityDaily.toFixed(2)}%`,F=R.error?"N/A":`${R.volatilityAnnualized.toFixed(1)}%`,H=R.currentPrice>0?`$${R.currentPrice.toFixed(4)}`:"N/A",j=C.tvl>=1e3?`$${(C.tvl/1e3).toFixed(1)}K`:`$${C.tvl.toFixed(0)}`;k+=`| ${C.name.slice(0,15)} | ${B} | ${j} | ${O} | ${F} | ${H} |
`}return k+=`
*Note: Volatility calculated from ${e.days||7} days of historical data.*`,{type:"success",title:`${e.tokenA}/${e.tokenB} Volatility`,details:k}}if(!e.poolAddress)return{type:"error",title:"Missing Parameter",details:'Please provide either poolAddress OR tokenA and tokenB (e.g., tokenA="SOL", tokenB="USDC")'};const x=e.days||7,v=await hg.calculateVolatility(e.poolAddress,x);if(v.error)return{type:"error",title:"Volatility Error",details:v.error};const b={high:"",medium:"",low:""}[v.confidence];return{type:"success",title:"Pool Volatility",details:` **Volatility Analysis**
- Pool: ${e.poolAddress.slice(0,8)}...
- Current Price: $${v.currentPrice.toFixed(4)}

**Volatility:**
- Daily: ${v.volatilityDaily.toFixed(2)}%
- Annualized: ${v.volatilityAnnualized.toFixed(2)}%

**Price Changes:**
- 24h: ${v.priceChange24h>=0?"+":""}${v.priceChange24h.toFixed(2)}%
- 7d: ${v.priceChange7d>=0?"+":""}${v.priceChange7d.toFixed(2)}%

${b} Confidence: ${v.confidence.toUpperCase()} (${v.dataPoints} data points)`}}catch(x){return{type:"error",title:"Volatility Error",details:x.message}}if(t==="suggestOptimalRangeByVolatility")try{i("Calculating optimal ranges...");let x=e.poolAddress,v="";if(!x&&e.tokenA&&e.tokenB){i("Finding best pool for token pair...");const F=await hg.searchPoolsByTokenPair(e.tokenA,e.tokenB,1);if(F.length===0)return{type:"info",title:"No Pool Found",details:`No pool found in database for ${e.tokenA}/${e.tokenB}.

Try: "liste pools" to see available pools.`};x=F[0].address,v=F[0].name}if(!x)return{type:"error",title:"Missing Parameter",details:"Please provide either poolAddress OR tokenA and tokenB"};const b=await hg.calculateVolatility(x,e.days||7);if(!b.currentPrice||b.currentPrice===0)return{type:"error",title:"Range Error",details:"Could not get current price for pool. Make sure the pool has historical data in the database."};const w=hg.suggestOptimalRanges(b.currentPrice,b),k={conservative:"",moderate:"",aggressive:""},C=v||x.slice(0,8)+"...";let R=` **Optimal Range Suggestions for ${C}**
`;R+=`Current Price: $${b.currentPrice.toFixed(4)}
`,R+=`Daily Volatility: ${b.volatilityDaily.toFixed(2)}%

`,w.forEach(F=>{const H=k[F.strategy];R+=`${H} **${F.strategy.toUpperCase()} (${F.sigmaMultiple})**
`,R+=`   Range: $${F.priceMin.toFixed(4)} - $${F.priceMax.toFixed(4)}
`,R+=`   Width: ${F.widthPercent.toFixed(1)}%
`,R+=`   ${F.estimatedTimeInRange}

`}),b.confidence==="low"&&(R+=`
 *Low confidence: ranges based on estimated volatility due to insufficient historical data.*`);const O=w.find(F=>F.strategy==="moderate")?Bb.generateRangeRationale("moderate",b,{tvl:void 0,volume24h:void 0}):"Sugesto de range baseada na volatilidade calculada.";return Zr.addLog("INFO",`Range suggestion for ${C}`,{strategy:"all",volatilityDaily:b.volatilityDaily,currentPrice:b.currentPrice}),{type:"success",semanticType:"decision",title:"Range Suggestions",details:R,rationale:O}}catch(x){return{type:"error",semanticType:"analysis",title:"Range Error",details:x.message}}if(t==="createLiquidityPool")return{type:"info",title:"Create Pool",details:`**Pool Creation Request**
- Protocol: ${e.protocol}
- Tokens: ${e.tokenA} / ${e.tokenB}
- Fee: ${e.feeBps} bps
- Initial Price: ${e.initialPrice}

 Pool creation requires SDK integration. Please use the protocol's web interface:
- Meteora: https://devnet.meteora.ag
- Raydium: https://raydium.io (switch to devnet)`};if(t==="estimatePoolCreationCost"){const x={meteora_dlmm:"~0.5 SOL",raydium_clmm:"~0.3 SOL",raydium_cpmm:"~0.2 SOL"};return{type:"success",title:"Pool Creation Cost",details:`Estimated cost for ${e.protocol}: ${x[e.protocol]||"~0.3-0.5 SOL"}

Includes:
- Account rent
- Transaction fees
- Protocol fees (if any)`}}return null}function Mpt(t){return["searchLiquidityPools","getPoolDetails","getTopLiquidityPools","compareLiquidityPools","getPoolHistory","getLPPositions","getLPPositionDetails","getUnclaimedLPRewards","estimateLPPositionPnL","addLiquidity","removeLiquidity","claimLPFees","claimLPRewards","rebalanceLPPosition","simulateAddLiquidity","estimateImpermanentLoss","calculateOptimalPriceRange","getLPSwapQuote","createLiquidityPool","estimatePoolCreationCost","getPoolVolatility","suggestOptimalRangeByVolatility"].includes(t)}const Lpt=(t,e,n,r,i,s,o)=>{const[a,l]=A.useState([]),[c,u]=A.useState(null),[h,m]=A.useState(""),[g,x]=A.useState(!1),[v,b]=A.useState(""),w=A.useRef(null);A.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[]),A.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[a]);const k=()=>{var O,F;try{const H=hm.getApiKey();return H||((F=(O=window.process)==null?void 0:O.env)==null?void 0:F.GEMINI_API_KEY)}catch{return}};return{messages:a,setMessages:l,activeConversationId:c,loadConversation:O=>{l(O.messages),u(O.id)},startNewConversation:()=>{l([]),u(null),m(""),x(!1),b("")},inputMessage:h,setInputMessage:m,isAiProcessing:g,aiStatus:v,scrollRef:w,handleSendMessage:async()=>{var j,$,W,V,U,T,_,L,z;if(!h.trim())return;const O=k();if(!O){r("System: API Key not found in environment.");return}const F={id:Date.now().toString(),role:"user",content:h,timestamp:Date.now()};let H=c;H||(H=Date.now().toString(),u(H)),l(G=>{const te=[...G,F];if(t.isUnlocked&&e&&H){G.length===0&&Jo.generateTitle(F.content);const K={id:H,title:G.length===0?Jo.generateTitle(F.content):"Conversation",lastMessage:F.content,timestamp:Date.now(),messages:te};Jo.saveConversation(K,e).catch(q=>console.error("Auto-save failed",q))}return te}),m(""),x(!0),b("Thinking...");try{hm.initialize(O);const G=pt.getSnapshot(),te=G.logs.slice(0,5).map(pe=>`[${new Date(pe.timestamp).toLocaleTimeString()}] ${pe.type}: ${pe.message}`).join(`
`);let K="",q="";if(t.hlPublicKey)try{const pe=await Vn.getUserFills(t.hlPublicKey);if(pe&&Array.isArray(pe)&&pe.length>0){let be=0,se=0,ve=0,Re=0,De=0;pe.forEach(tt=>{const mt=parseFloat(tt.closedPnl||"0"),dt=parseFloat(tt.fee||"0");be+=mt-dt,De+=dt,Re+=parseFloat(tt.px)*parseFloat(tt.sz),mt>0?se++:mt<0&&ve++});const Qe=se+ve,it=Qe>0?se/Qe*100:0;K=`
          **[PERFORMANCE METRICS - Trading Results]**
          - Total Profit/Loss: ${be>=0?"+":""}$${be.toFixed(2)} USD
          - Win Rate: ${it.toFixed(1)}% (${se} wins / ${ve} losses)
          - Total Trades: ${pe.length}
          - Total Volume: $${Re.toFixed(2)} USD
          - Total Fees Paid: $${De.toFixed(2)} USD`,q=`
          **[RECENT TRADES - Last 5 Fills]**
${[...pe].sort((tt,mt)=>mt.time-tt.time).slice(0,5).map(tt=>{const mt=parseFloat(tt.closedPnl||"0"),dt=mt!==0?` | PnL: ${mt>=0?"+":""}$${mt.toFixed(2)}`:"";return`          - ${tt.coin} ${tt.side==="B"?"BUY":"SELL"} ${tt.sz} @ $${parseFloat(tt.px).toFixed(2)}${dt} (${new Date(tt.time).toLocaleString()})`}).join(`
`)}`}else K=`
          **[PERFORMANCE METRICS]**
          - No trading history yet. Dealer has not executed any trades.`}catch(pe){console.warn("[Agent] Could not fetch dealer performance:",pe),K=`
          **[PERFORMANCE METRICS]**
          - Unable to fetch trading history at this moment.`}else K=`
          **[PERFORMANCE METRICS]**
          - Hyperliquid wallet not connected. Cannot fetch trading data.`;const M=`
          **HYPERLIQUID DEALER CONTEXT (AUTONOMOUS TRADING ENGINE):**
          You have FULL access to the Hyperliquid Dealer's state, performance, and trading history.
          
          **[STATUS DATA - Current State]**
          - Dealer Status: ${G.isOn?" ACTIVE":" INACTIVE"}
          - Currently Analyzing: ${G.isAnalyzing?"Yes":"No"}
          - Current Task: ${G.currentTask||"Idle"}
          - Current Signal: ${G.currentSignal||"No signal"}
          - Trend Assessment: ${G.trendAssessment}
          - Current Exposure: $${G.currentExposure.toFixed(2)} USDC
          ${K}
          ${q}
          
          **[CONFIGURATION DATA - Only mention when user asks to CHANGE settings]**
          - Max Leverage: ${G.settings.maxLeverage}x
          - Max Position Size: $${G.settings.maxPositionSizeUSDC} USDC
          - Max Open Positions: ${G.settings.maxOpenPositions}
          - Trading Pairs: ${G.settings.tradingPairs.join(", ")}
          - Check Interval: ${G.settings.checkIntervalSeconds}s
          - Bankroll: ${G.settings.bankrollType} (${G.settings.bankrollType==="MANUAL"?"$"+G.settings.manualBankroll:"All Available"})
          
          **[ACTIVITY LOGS - Only show if user asks about activity/history]**
          ${te||"No recent activity"}
          
          **RESPONSE GUIDELINES (CRITICAL):**
          
          1. **STATUS QUESTIONS** (e.g., "What is the dealer doing?", "O que o dealer est fazendo?"):
             - Show: Status (active/inactive), current task, current signal
             - Keep response SHORT and concise (2-3 sentences max)
             - DO NOT list all settings or metrics unless asked
          
          2. **PERFORMANCE/RESULTS QUESTIONS** (e.g., "How much profit?", "Quanto lucrou?", "What's my win rate?"):
             - Use the PERFORMANCE METRICS data above
             - Answer specifically what was asked
             - You CAN mention recent trades if relevant
          
          3. **CONFIGURATION CHANGE REQUESTS** (e.g., "I want to change leverage", "Quero mudar os pares"):
             - Show the relevant current setting
             - Include the configuration navigation button:
             
             [ Go to Dealer Configuration](nav://DEALER_CONFIG)
          
          4. **TRADE REASONING QUESTIONS** (e.g., "Why did you open BTC?", "Por que o Dealer entrou em ETH?", "Explique essa operao"):
             - Use the 'getDealerTradeHistory' tool to fetch detailed reasoning
             - The tool returns the AI's analysis and confidence for each trade
             - Explain the reasoning in a conversational way
             - Include entry price, size, and confidence level
          
          5. **OPEN POSITIONS QUESTIONS** (e.g., "Quais posies esto abertas?", "What positions are open?", "Show my positions"):
             - The Hyperliquid Dealer operates ONLY on Hyperliquid - so if user asks about Dealer positions, use 'getHLBalance'
             - If the conversation context is about Dealer (trading, positions, anlise), assume Hyperliquid - DO NOT ask which network
             - Use the 'getHLBalance' tool to fetch LIVE positions from Hyperliquid
             - This shows CURRENT open positions with entry price, size, and unrealized PnL
             - Only ask "Solana ou Hyperliquid?" if there's no context at all about Dealer
             
             **CRITICAL - DEALER POSITION QUERIES:**
             When user asks ANY of these, IMMEDIATELY call 'getHLBalance':
             - "posies do dealer", "dealer positions"
             - "quais posies", "what positions" (when dealer context exists)
             - "posies abertas", "open positions" (when dealer context exists)
             - "quais?" as follow-up to a position question
             DO NOT respond with just text - CALL THE TOOL!
          
          6. **SPECIFIC QUESTIONS**: Answer ONLY what was asked. Don't dump all data.
          `,P=`
          You are Vault Operator, an autonomous DeFi Agent managing TWO separate vaults: Solana and Hyperliquid.
          Your name is Vault Operator. You also respond to just "Operator". When users ask "who are you" or similar questions, introduce yourself as Vault Operator.
          
          **YOUR IDENTITY:**
          - Solana Vault Address: ${t.publicKey||"UNKNOWN"}
          - Hyperliquid Vault Address: ${t.hlPublicKey||"NOT CREATED"}
          - Your Owner's Wallet: ${t.ownerPublicKey||"NOT CONNECTED"}
          - Current Vault SOL Balance: ${t.solBalance.toFixed(4)} SOL
          
          ${M}
          
          **NETWORK CONTEXT AWARENESS (CRITICAL):**
          You manage TWO separate vaults on different networks:
          1. **Solana Vault** - for SOL and SPL tokens (USDC, RAY, etc.)
          2. **Hyperliquid Vault** - for perpetual trading with USDC on Hyperliquid Testnet
          
          **KEYWORD RECOGNITION:**
          - "hype", "hyperliquid", "hl" = Hyperliquid operations  call 'getHLBalance' for positions/balance
          - "sol", "solana" = Solana operations  call 'getVaultBalance' for balance
          - "dealer", "hyperliquid dealer", "trading bot", "autonomous trading" = Hyperliquid Dealer questions (implies Hyperliquid)
          
          **CRITICAL - NETWORK vs COIN DISAMBIGUATION:**
          "Solana" and "Hyperliquid" are BOTH network names AND coin names!
          
          CONTEXT CLUES FOR NETWORK:
          - "saldo", "balance", "posies", "positions", "carteira", "wallet"  asking about NETWORK
          - "enviar", "transferir", "withdraw", "sacar"  asking about NETWORK
          - Following a question about "which network?"  answering about NETWORK
          
          CONTEXT CLUES FOR COIN/TOKEN:
          - "preo", "price", "comprar", "buy", "vender", "sell"  asking about COIN
          - "anlise", "analyze", "RSI", "indicador"  asking about COIN
          - "abrir posio", "open position", "long", "short"  trading the COIN
          
          EXAMPLES:
          - "Qual meu saldo no Hyperliquid?"  NETWORK (getHLBalance)
          - "Qual o preo do HYPE?"  COIN (getMarketPrice with HYPEUSDT)
          - "Qual meu saldo de SOL?"  COIN balance on Solana network (getVaultBalance)
          - "Check Solana network"  NETWORK (getVaultBalance without token)
          - "Buy SOL on Hyperliquid"  Trading SOL COIN on HL network
          
          **CRITICAL - NETWORK RESPONSE HANDLING:**
          If the previous message was a question about which network and user responds with:
          - "hype", "hyperliquid", "hl"  IMMEDIATELY call 'getHLBalance' tool - DO NOT just acknowledge
          - "sol", "solana"  IMMEDIATELY call 'getVaultBalance' tool - DO NOT just acknowledge
          - The user is answering your question, so EXECUTE the action right away
          
          **TRANSFER DISAMBIGUATION (CRITICAL):**
          When a user requests a transfer (e.g., "send 1 USDC", "transfer USDC to me"):
          1. Check the conversation context:
             - If they just checked Hyperliquid balance  likely Hyperliquid
             - If they just checked Solana balance  likely Solana
          2. If context is unclear, ASK: "Do you want to withdraw from Solana or Hyperliquid?"
          3. NEVER assume the network - ALWAYS verify first
          
          **SOLANA TRANSFERS:**
          - Use 'transferToken' for SPL tokens
          - Use 'withdrawSol' for SOL
          - Destination: Owner's Solana wallet
          - Network: Solana
          
          **HYPERLIQUID WITHDRAWALS:**
          - Use 'withdrawFromHL' for USDC withdrawals
          - Network: Hyperliquid Testnet
          - Fee: $1 USDC (fixed)
          - Time: ~5 minutes
          - Destination: Owner's wallet on Hyperliquid Testnet
          - Minimum: Amount must be > $1 to cover fee
          
          **BEFORE ANY TRANSFER, YOU MUST:**
          1. Verify the correct network (Solana vs Hyperliquid)
          2. Check the balance on that specific network
          3. Confirm the user has sufficient funds (including fees)
          4. Use the correct tool for that network
          
          **YOUR PERMISSIONS (CRITICAL):**
          - You ARE AUTHORIZED to Withdraw SOL. Use 'withdrawSol'.
          - You ARE AUTHORIZED to Transfer Tokens (SPL/NFTs) to the Owner. Use 'transferToken'.
          - You ARE AUTHORIZED to Withdraw USDC from Hyperliquid. Use 'withdrawFromHL'.
          - You ARE AUTHORIZED to Swap tokens. Use 'executeSwap'.
          - You CANNOT transfer to any other address than the Owner's Wallet.
          
          **BALANCE CHECKING:**
          - When a user asks for their balance, ALWAYS ask if they want to see:
            1. All balances (SOL + all tokens)
            2. A specific token balance
            3. Hyperliquid balance
          - Do NOT assume they only want SOL balance.
          - The vault can hold SOL and many different SPL tokens.
          - If they specify a token, use the 'getVaultBalance' tool with the token parameter.
          - If they want all balances, use 'getVaultBalance' without the token parameter.
          - For Hyperliquid, use 'getHLBalance'.
          
          **TRANSFER REQUESTS (CRITICAL):**
          - When a user says "send", "transfer", or "withdraw" followed by an amount/token, they want to EXECUTE A TRANSFER IMMEDIATELY.
          - Examples of TRANSFER requests:
            * "send my all balance of [token] to me"
            * "transfer 10 USDC to me"
            * "withdraw all my SOL"
            * "send 5 [token mint address]"
            * "2 usdc" (after context is established)
          
          **EXECUTION FLOW:**
          1. Verify which network (Solana or Hyperliquid) from context or keywords
          2. If amount > $1 and network is Hyperliquid, IMMEDIATELY call 'withdrawFromHL'
          3. If network is Solana, call 'transferToken' or 'withdrawSol'
          
          **CRITICAL - DO NOT OVER-VERIFY:**
          - Do NOT check balance before executing withdrawal unless user explicitly asks
          - Do NOT ask for confirmation after user has specified amount and network
          - The user saying "2 usdc" after establishing Hyperliquid context means EXECUTE NOW
          - ALWAYS transfer to the Owner's wallet (you cannot send to any other address)
          
          **TOKEN HANDLING:**
          - If the user uses a ticker (like 'JUP', 'WIF', 'BONK') that is NOT in your list (SOL, USDC, RAY), YOU MUST ASK FOR THE MINT ADDRESS.
          - Say: "I don't recognize that ticker. Please provide the Token Mint Address."
          
          **SOL vs SPL TOKENS (CRITICAL):**
          - SOL is the NATIVE token of Solana, NOT an SPL token
          - When transferring SOL, use 'withdrawSol' tool (NOT 'transferToken')
          - SOL mint address: So11111111111111111111111111111111111111112
          - For SPL tokens (USDC, USDT, RAY, etc.), use 'transferToken' with the token's mint address
          - If user says "send SOL" or "transfer SOL", use 'withdrawSol'
          - If user provides a mint address that is NOT So11111111111111111111111111111111111111112, it's an SPL token
          
          **MARKET DATA & INDICATORS:**
          - You have access to real-time market data and technical indicators via TradingView.
          - Available indicators: RSI, MACD, EMA, SMA, Stochastic, Price
          - You can fetch current prices, OHLCV data, and indicator values for any trading symbol.
          - Use 'getMarketPrice' for current price, 'getIndicator' for technical indicators.
          - Use 'getTradingViewSummary' for overall market sentiment.
          
          **ASSET ANALYSIS (CRITICAL - When user asks about an asset):**
          When user asks something like:
          - "O que me diz do BTC?" / "What about BTC?"
          - "Como est o ETH?" / "How's ETH doing?"
          - "Analisa o SOL pra mim" / "Analyze SOL for me"
          - "What's your take on [asset]?"
          
          You MUST provide a COMPREHENSIVE ANALYSIS by:
          1. Call 'getMarketPrice' to get current price
          2. Call 'getIndicator' with indicator='rsi' and timeframe='60' (1h)
          3. Call 'getTradingViewSummary' to get overall sentiment
          
           **CRITICAL - DATA INTEGRITY (NEVER VIOLATE THIS):**
          - You MUST use ONLY the EXACT values returned by the tool calls
          - NEVER invent, estimate, or hallucinate numbers
          - If the tool returns price=89560.56, you say $89,560.56 - NOT any other number
          - If the tool returns RSI=47.67, you say 47.67 - NOT any other number
          - If the tool returns NEUTRAL with (Buy:0 Sell:0 Neutral:1), say EXACTLY that
          - FABRICATING DATA IS A CRITICAL FAILURE - This destroys user trust
          
          **After receiving tool results, format your response like this:**
          
          " **BTC est a $[EXACT PRICE FROM TOOL]** no momento.
          
          O RSI de 1h est em **[EXACT RSI FROM TOOL]** ([interpret based on value]).
          
          O sentimento do TradingView  **[EXACT RECOMMENDATION FROM TOOL]** ([EXACT buy/sell/neutral counts FROM TOOL]).
          
          **Minha leitura:** [Your interpretation based on the REAL data above]"
          
          **Interpretation Guide (use these to interpret the REAL values):**
          - RSI < 30 = Sobrevendido (oversold) - possvel reverso para alta
          - RSI 30-50 = Tendncia de baixa / fraqueza
          - RSI 50-70 = Neutro a levemente bullish
          - RSI > 70 = Sobrecomprado (overbought) - possvel correo
          
          **TradingView Summary meanings:**
          - STRONG_BUY = Sentimento muito bullish
          - BUY = Sentimento positivo
          - NEUTRAL = Mercado indeciso
          - SELL = Sentimento negativo
          - STRONG_SELL = Sentimento muito bearish
          
          **REMEMBER:** Your interpretation ("Minha leitura") should be based on the ACTUAL numbers you received. If RSI is 47.67, that's in the 30-50 range (slight weakness/neutral). If sentiment is NEUTRAL, say it's neutral - don't make up "COMPRA".
          
          **HYPERLIQUID TESTNET TRADING:**
          - You can trade perpetual futures on Hyperliquid Testnet!
          - You have a separate Hyperliquid Vault Wallet with USDC balance.
          
          **IMMEDIATE EXECUTION (CRITICAL):**
          When the user provides all necessary info for an order, EXECUTE IMMEDIATELY:
          - For MARKET orders with USDC amount: Call 'createHLOrder' directly with usdcAmount parameter
          - For MARKET orders with size: Call 'createHLOrder' directly with size parameter
          - DO NOT fetch market data first - the order handler calculates price internally
          - DO NOT ask for confirmation if user already specified the action
          
          **EXAMPLE - IMMEDIATE EXECUTION:**
          User: "short BTC with 5x leverage, 5% profit, 1% stop, using 30 USDC"
           All info provided! Call createHLOrder immediately:
            - coin: "BTC"
            - isBuy: false (SHORT)
            - usdcAmount: 30 (NOT size - let handler calculate)
            - orderType: "market"
            - leverage: 5
            - stopLoss: 1 (percentage - will be converted automatically)
            - takeProfit: 5 (percentage - will be converted automatically)
          
          **ONLY ASK if missing critical info:**
          - Direction not specified (LONG or SHORT?)
          - Amount not specified (how much USDC or size?)
          
          **TP/SL as PERCENTAGES:**
          - If user says "5% profit"  pass takeProfit: 5
          - If user says "1% stop"  pass stopLoss: 1
          - The handler converts percentages to absolute prices automatically
          
          **AVAILABLE HYPERLIQUID TOOLS:**
          - 'getHLBalance' - Check USDC balance and open positions
          - 'getHLMarketData' - Get current price and orderbook (NOT needed for orders)
          - 'createHLOrder' - Place a new order (LONG or SHORT)
          - 'updateHLLeverage' - Change leverage for an asset (automatic with createHLOrder)
          - 'closeHLPosition' - Close an open position
          - 'cancelHLOrder' - Cancel a pending order
          - 'withdrawFromHL' - Withdraw USDC to Owner's wallet on Hyperliquid Testnet

          
          **TASK SCHEDULING (IMPORTANT):**
          You can schedule tasks in TWO ways:
          
          1. **TIME-BASED SCHEDULING:**
             - Provide 'delayMinutes' parameter
             - Examples:
               * User: "swap 0.1 SOL for USDC in 5 minutes"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, delayMinutes=5)
          
          2. **CONDITION-BASED SCHEDULING:**
             - Provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'
             - **CRITICAL**: 'conditionTimeframe' is REQUIRED. If the user does not provide it, you MUST ASK.
             
             - Examples:
               * User: "swap 0.1 SOL to USDC when RSI of BTCUSDT is less than 30"
               * You: "What timeframe should I use for the RSI? (e.g., 15m, 1h, 4h, 1d)"
               * User: "1 hour"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="60")
               
               * User (PT): "se o BTC estiver com o RSI maior ou igual a 50 me transfira 0.1 SOL"
               * You: "Qual o perodo (timeframe) para o RSI? (ex: 1h, 4h, Dirio)"
               * User: "Dirio"
               * You call: scheduleTask(taskType="TRANSFER", amount=0.1, inputToken="SOL", conditionIndicator="rsi", conditionSymbol="BTC", conditionOperator=">=", conditionValue=50, conditionTimeframe="D")
               
               * User (PT): "me avise se o RSI do BTC cair abaixo de 30"
               * You: "Em qual tempo grfico? (15m, 1h, 4h...)"
          
          **HYPERLIQUID ORDER SCHEDULING:**
          You can schedule Hyperliquid orders based on market conditions!
          
          - Examples:
            * User: "Open LONG 0.001 BTC at 90k when RSI daily < 30, stop 88k, profit 99k, leverage 10x"
            * You ask (if timeframe not specified): "What timeframe for RSI?"
            * User: "Daily"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="BTC",
                isBuy=true,
                size=0.001,
                orderType="limit",
                price=90000,
                leverage=10,
                stopLoss=88000,
                takeProfit=99000,
                conditionIndicator="rsi",
                conditionSymbol="BTCUSDT",
                conditionOperator="<",
                conditionValue=30,
                conditionTimeframe="D"
              )
            
            * User (PT): "abrir short de 0.5 ETH quando o MACD cruzar abaixo de 0"
            * You: "Qual o timeframe para o MACD? E qual o preo limite ou prefere ordem a mercado?"
            * User: "4 horas, a mercado"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="ETH",
                isBuy=false,
                size=0.5,
                orderType="market",
                conditionIndicator="macd",
                conditionSymbol="ETHUSDT",
                conditionOperator="<",
                conditionValue=0,
                conditionTimeframe="240"
              )
          
          **CRITICAL - HL_ORDER REQUIREMENTS:**
          You MUST ask for ALL required parameters:
          - Coin (asset symbol)
          - Direction (LONG/SHORT or BUY/SELL)
          - Size (amount)
          - Order Type (LIMIT or MARKET)
          - Price (required for LIMIT orders)
          - Leverage (default 1x if not specified)
          - Stop Loss (optional, ask if user wants)
          - Take Profit (optional, ask if user wants)
          - Condition details (indicator, symbol, operator, value, timeframe)
          
          **SUPPORTED PARAMETERS:**
          - taskType: "SWAP", "TRANSFER", "ALERT", or "HL_ORDER"
          - For SWAP: inputToken, outputToken, amount
          - For TRANSFER: inputToken (e.g. "SOL"), amount
          - For ALERT: No financial parameters needed
          - For HL_ORDER: coin, isBuy, size, orderType, price (for limit), leverage, stopLoss, takeProfit
          - For time-based: delayMinutes
          - For condition-based: conditionIndicator, conditionSymbol, conditionOperator, conditionValue, conditionTimeframe (REQUIRED - ASK IF MISSING)
          
          **INDICATORS:** rsi, macd, ema, sma, stoch, price
          **OPERATORS:** <, >, <=, >=, ==
          **TIMEFRAMES:** 1, 5, 15, 60, 240, D (daily), W (weekly)
          
          **CRITICAL - MISSING INFORMATION:**
          - If the user's request is MISSING required information (ESPECIALLY TIMEFRAME), you MUST ask for it.
          - DO NOT call scheduleTask with incomplete parameters.
          - DO NOT assume a default timeframe like 'D'. ALWAYS ASK.
          - Examples of what to ask:
            * "Para qual smbolo voc quer monitorar o RSI?" (Which symbol?)
            * "Qual o valor limite do RSI?" (What threshold?)
            * "Em qual perodo grfico (1h, 4h, Dirio)?" (Which timeframe?)
            * "Quanto voc quer transferir?" (How much?)
            * "Qual token voc quer transferir?" (Which token?)
          
          **EXECUTION:**
          - When swapping, confirm the action.
          - When scheduling with conditions, confirm the condition that will trigger the task.
          - Always respond in the same language the user is using (English or Portuguese).
          
          **=== LIQUIDITY POOL (LP) OPERATIONS - SOLANA DEVNET ===**
          
          **TERMINOLOGY - DEFINIES:**
          - **LP** = Liquidity Pool (Pool de Liquidez) OU Liquidity Provider (Provedor de Liquidez)
          - **Pool de Liquidez** = Par de tokens em um DEX que permite swaps (ex: SOL/USDC)
          - **Posio de LP** = Tokens depositados em um pool para ganhar taxas de trading
          - **TVL** = Total Value Locked (Valor Total Bloqueado em USD)
          - **APY** = Annual Percentage Yield (Rendimento Anual Percentual)
          - **Impermanent Loss (IL)** = Perda Impermanente vs simplesmente HODL
          - **DLMM** = Dynamic Liquidity Market Maker (Meteora - liquidez concentrada)
          - **CLMM** = Concentrated Liquidity Market Maker (Raydium - liquidez concentrada)
          - **CPMM** = Constant Product Market Maker (Raydium - AMM tradicional)
          
          **PROTOCOLS SUPPORTED:**
          - **Meteora** = DLMM pools com liquidez concentrada
          - **Raydium** = CLMM (concentrado) e CPMM (tradicional) pools
          
          **KEYWORD RECOGNITION - LP (PT/EN):**
          - "pools", "pool de liquidez", "liquidity pool", "LP"  LP operations
          - "liquidez", "liquidity", "fornecer liquidez", "add liquidity"  LP operations
          - "volume", "TVL", "APY", "rendimento", "yield"  Pool analytics
          - "Meteora", "Raydium", "DLMM", "CLMM"  Protocol-specific queries
          - "posies de LP", "LP positions", "minha liquidez", "my liquidity"  getLPPositions
          - "maior volume", "top pools", "melhores pools", "best pools"  getTopLiquidityPools
          - "impermanent loss", "perda impermanente", "IL"  estimateImpermanentLoss
          - "simular", "simulate", "quanto recebo", "how much"  simulateAddLiquidity
          - "comparar", "compare", "qual melhor"  compareLiquidityPools
          - "volatilidade", "volatility", "voltil", "volatile"  getPoolVolatility
          - "faixa ideal", "optimal range", "sugerir faixa", "suggest range", "faixa otimizada"  suggestOptimalRangeByVolatility
          
          **AVAILABLE LP TOOLS - USE THEM!:**
          - 'searchLiquidityPools' - Search pools by token pair, TVL, volume, APY, protocol
          - 'getTopLiquidityPools' - Get ranked pools by 'volume', 'apy', or 'tvl'
          - 'getPoolDetails' - Get details of a specific pool by address
          - 'getLPPositions' - Get user's LP positions across Meteora and Raydium
          - 'getLPPositionDetails' - Get details of a specific LP position
          - 'getUnclaimedLPRewards' - Check unclaimed fees/rewards
          - 'compareLiquidityPools' - Compare Meteora vs Raydium for a token pair
          - 'simulateAddLiquidity' - Simulate adding liquidity before execution
          - 'estimateImpermanentLoss' - Calculate potential IL for price change
          - 'calculateOptimalPriceRange' - Suggest price range for concentrated liquidity
          - 'getLPSwapQuote' - Get swap quote via LP
          - 'getPoolVolatility' - Calculate historical volatility (accepts tokenA/tokenB OR poolAddress)
          - 'suggestOptimalRangeByVolatility' - Suggest price ranges based on volatility (accepts tokenA/tokenB OR poolAddress)
          
          **EXAMPLES - EXEMPLOS (When user says  Call this tool):**
          - "pools com maior volume" / "top pools by volume"  getTopLiquidityPools(criteria='volume')
          - "liste pools" / "list pools"  searchLiquidityPools()
          - "pools SOL/USDC" / "SOL USDC pools"  searchLiquidityPools(tokenA='SOL', tokenB='USDC')
          - "pools no Raydium" / "Raydium pools"  searchLiquidityPools(protocol='raydium')
          - "pools Meteora"  searchLiquidityPools(protocol='meteora')
          - "minhas posies de LP" / "my LP positions"  getLPPositions()
          - "quanto tenho de fees" / "unclaimed fees"  getUnclaimedLPRewards()
          - "compare Meteora e Raydium" / "compare protocols"  compareLiquidityPools(tokenPair='SOL/USDC')
          - "simule impermanent loss" / "estimate IL"  estimateImpermanentLoss(priceChangePercent=20)
          - "pools com APY maior que 50%"  searchLiquidityPools(minAPY=50)
          - "top 10 pools por TVL"  getTopLiquidityPools(criteria='tvl', limit=10)
          - "qual a volatilidade do SOL/USDC?"  getPoolVolatility(tokenA='SOL', tokenB='USDC')
          - "volatilidade do pool X"  getPoolVolatility(poolAddress='X')
          - "sugira faixa para SOL/USDC"  suggestOptimalRangeByVolatility(tokenA='SOL', tokenB='USDC')
          - "sugira faixa para esse pool"  suggestOptimalRangeByVolatility(poolAddress='X')
          
          **LP BEHAVIOR RULES:**
          1. If user mentions "pools", "LP", "liquidez", "liquidity"  USE LP TOOLS, NOT just text!
          2. If protocol not specified  ASK: "Meteora ou Raydium?" OR show both
          3. For write operations (add/remove liquidity)  ALWAYS confirm before executing
          4. Show results in table format when listing multiple pools
          5. ALWAYS mention we are on SOLANA DEVNET (not mainnet)
          6. If user asks about "melhores pools" without criteria  ask "By volume, APY, or TVL?"
          7. When user asks about volatility or optimal range, use the volatility tools!
          
          **CRITICAL - DO NOT SAY "I can't do LP operations"!**
          You HAVE the tools listed above. USE THEM when user asks about pools/LP/liquidity!
        `,Y=await hm.sendOperatorMessage(a,F.content,P),X=Y.functionCalls;let re=[];if(X&&X.length>0)for(const pe of X){const be=pe.name,se=pe.args;if(be==="getVaultBalance"){const ve=se.token;if(ve){const Re=o(ve);if(ve.toUpperCase()==="SOL"||Re==="So11111111111111111111111111111111111111112"){const De=t.solBalance.toFixed(4);re.push({type:"success",title:"Balance Check",details:`SOL Balance: ${De} SOL (~$${(t.solBalance*kc.SOL).toFixed(2)})`})}else{const De=(j=t.assets)==null?void 0:j.find(Qe=>Qe.mint===Re);if(De){const Qe=(parseFloat(De.amount)/Math.pow(10,De.decimals)).toFixed(4),it=De.symbol!=="UNKNOWN"?` (~$${(parseFloat(De.amount)/Math.pow(10,De.decimals)*(kc[De.symbol]||0)).toFixed(2)})`:"";re.push({type:"success",title:"Balance Check",details:`${De.name} (${De.symbol}): ${Qe}${it}`})}else re.push({type:"error",title:"Token Not Found",details:`No balance found for token: ${ve}`})}}else{const Re=t.solBalance.toFixed(4),De=(t.solBalance*kc.SOL).toFixed(2);let Qe=`SOL: ${Re} SOL (~$${De})`;const it=(t.assets||[]).filter(et=>!et.isNft);it.length>0&&(Qe+=`

Tokens:`,it.forEach(et=>{const tt=(parseFloat(et.amount)/Math.pow(10,et.decimals)).toFixed(4),mt=et.symbol!=="UNKNOWN"?` (~$${(parseFloat(et.amount)/Math.pow(10,et.decimals)*(kc[et.symbol]||0)).toFixed(2)})`:"";Qe+=`
 ${et.name} (${et.symbol}): ${tt}${mt}`})),re.push({type:"success",title:"Balance Check",details:Qe})}t.publicKey&&i(t.publicKey)}else if(be==="withdrawSol")if(b("Withdrawing Funds..."),!t.isUnlocked||!t.encryptedPrivateKey)re.push({type:"error",title:"Withdraw Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)re.push({type:"error",title:"Withdraw Failed",details:"No Owner Wallet connected."});else try{const ve=await or.decrypt(t.encryptedPrivateKey,e),Re=Uint8Array.from(JSON.parse(ve)),De=oa.fromSecretKey(Re),Qe=await Ps.transferSol(De,t.ownerPublicKey,se.amount);s("Transfer",`Withdrew ${se.amount} SOL to Owner`,Qe),re.push({type:"success",title:"Withdraw Executed",details:`Sent ${se.amount} SOL to Owner`,tx:Qe}),i(t.publicKey)}catch(ve){re.push({type:"error",title:"Withdraw Error",details:ve.message})}else if(be==="transferToken")if(b("Transferring Token..."),!t.isUnlocked||!t.encryptedPrivateKey)re.push({type:"error",title:"Transfer Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)re.push({type:"error",title:"Transfer Failed",details:"No Owner Wallet connected."});else try{const ve=await or.decrypt(t.encryptedPrivateKey,e),Re=Uint8Array.from(JSON.parse(ve)),De=oa.fromSecretKey(Re),Qe=o(se.tokenMint),it=($=t.assets)==null?void 0:$.find(mt=>mt.mint===Qe),et=it?it.decimals:9,tt=await Ps.transferToken(De,Qe,t.ownerPublicKey,se.amount,et);s("Transfer",`Sent ${se.amount} ${se.tokenMint} to Owner`,tt),re.push({type:"success",title:"Transfer Executed",details:`Sent ${se.amount} of ${se.tokenMint} to Owner`,tx:tt}),i(t.publicKey)}catch(ve){re.push({type:"error",title:"Transfer Error",details:ve.message})}else if(be==="executeSwap")if(!t.isUnlocked||!t.encryptedPrivateKey)re.push({type:"error",title:"Swap Failed",details:"Vault is locked."});else try{const ve=await or.decrypt(t.encryptedPrivateKey,e),Re=Uint8Array.from(JSON.parse(ve)),De=oa.fromSecretKey(Re),Qe=o(se.inputToken),it=o(se.outputToken),et=await Ps.executeSwap(De,Qe,it,se.amount,tt=>b(tt));s("Swap",`Swapped ${se.amount} ${se.inputToken} -> ${se.outputToken}`,et),re.push({type:"success",title:"Swap Executed",details:`Swapped ${se.amount} ${se.inputToken} for ${se.outputToken}`,tx:et}),t.publicKey&&i(t.publicKey)}catch(ve){(W=ve.message)!=null&&W.includes("timeout")||(V=ve.message)!=null&&V.includes("expired")?(console.warn("[Swap]   Swap confirmation timeout, but transaction may have succeeded. Check manually."),re.push({type:"success",title:"Swap Executed (Slow Confirmation)",details:"Transaction sent but confirmation is slow. Please verify on explorer.",tx:"Check Explorer"}),i(t.publicKey)):re.push({type:"error",title:"Swap Failed",details:ve.message})}else if(be==="scheduleTask")try{console.log("[Scheduler]  Received scheduleTask call with args:",JSON.stringify(se,null,2));let ve,Re;if(se.conditionIndicator&&se.conditionSymbol&&se.conditionOperator&&se.conditionValue!==void 0&&se.conditionTimeframe){let et=se.conditionIndicator.toLowerCase(),tt=se.conditionSymbol.toUpperCase(),mt=se.conditionTimeframe,dt=se.conditionOperator,Wt=parseFloat(se.conditionValue);tt==="BTC"?tt="BTCUSDT":tt==="SOL"?tt="SOLUSDT":tt==="ETH"?tt="ETHUSDT":!tt.includes("USDT")&&!tt.includes("USD")&&(tt=`${tt}USDT`),dt==="menor que"||dt==="less than"?dt="<":dt==="maior que"||dt==="greater than"?dt=">":dt==="menor ou igual a"||dt==="less than or equal to"?dt="<=":dt==="maior ou igual a"||dt==="greater than or equal to"?dt=">=":(dt==="igual a"||dt==="equal to"||dt==="equals")&&(dt="=="),Re={symbol:tt,indicator:et,operator:dt,value:Wt,timeframe:mt},console.log("[Scheduler]  Condition-based task created:",Re)}else if(se.delayMinutes)ve=Date.now()+se.delayMinutes*60*1e3,console.log("[Scheduler]  Time-based task created: executes in",se.delayMinutes,"minutes");else{console.error("[Scheduler]  Missing required parameters for scheduling"),re.push({type:"error",title:"Scheduling Failed",details:"Missing required parameters. Please provide either time delay or condition details."});continue}let De={};if(se.taskType==="SWAP")De={inputToken:se.inputToken,outputToken:se.outputToken,amount:se.amount};else if(se.taskType==="TRANSFER"){let et=se.inputToken;et==="SOL"||et==="sol"?et="So11111111111111111111111111111111111111112":et=o(et),De={amount:se.amount,tokenMint:et}}else se.taskType==="ALERT"?De={}:se.taskType==="HL_ORDER"&&(De={coin:se.coin,side:se.isBuy?"B":"A",isBuy:se.isBuy,size:se.size,usdcAmount:se.usdcAmount,price:se.price,orderType:se.orderType||"limit",leverage:se.leverage||1,stopLoss:se.stopLoss,takeProfit:se.takeProfit,reduceOnly:se.reduceOnly||!1});const Qe={id:Date.now().toString(),type:se.taskType,params:JSON.stringify(De),executeAt:ve,condition:Re,status:"active",createdAt:Date.now()};n(et=>{const tt=[...et,Qe];return ke.setItem(ke.getUserKey("agent_scheduled_tasks"),JSON.stringify(tt)),tt});let it="";if(Re)it=`${se.taskType} scheduled to execute when ${Re.indicator.toUpperCase()} of ${Re.symbol} (${Re.timeframe}) ${Re.operator} ${Re.value}`;else if(ve){const et=Math.round((ve-Date.now())/1e3);it=`${se.taskType} scheduled to execute in ${et} seconds`}re.push({type:"info",title:"Task Scheduled",details:it})}catch(ve){console.error("[Scheduler] Error scheduling task:",ve),re.push({type:"error",title:"Scheduling Failed",details:ve.message})}else if(be==="getMarketPrice")try{b("Fetching Market Price...");const ve=await bo.getMarketPrice(se.symbol);re.push({type:"success",title:"Market Price",details:`${se.symbol}: ${ve.price} (${ve.exchange})`})}catch(ve){re.push({type:"error",title:"Market Data Error",details:ve.message})}else if(be==="getOHLCV")try{b("Fetching OHLCV Data...");const ve=await bo.getOHLCV(se.symbol,se.timeframe);re.push({type:"success",title:"OHLCV Data",details:`${se.symbol} [${se.timeframe||"60"}]: O:${ve.open} H:${ve.high} L:${ve.low} C:${ve.close} V:${ve.volume}`})}catch(ve){re.push({type:"error",title:"OHLCV Error",details:ve.message})}else if(be==="getIndicator")try{b(`Calculating ${se.indicator}...`);const ve=await bo.getIndicator(se.symbol,se.indicator,se.timeframe);let Re=ve.value;typeof ve.value=="object"&&ve.value!==null&&(Re=JSON.stringify(ve.value,null,2)),re.push({type:"success",title:"Technical Indicator",details:`${se.symbol} ${ve.indicator.toUpperCase()}: ${Re}`})}catch(ve){re.push({type:"error",title:"Indicator Error",details:ve.message})}else if(be==="getTradingViewSummary")try{b("Fetching TradingView Summary...");const ve=await bo.getTradingViewSummary(se.symbol);re.push({type:"success",title:"TradingView Summary",details:`${se.symbol}: ${ve.recommendation} (Buy:${ve.buy} Sell:${ve.sell} Neutral:${ve.neutral})`})}catch(ve){re.push({type:"error",title:"Summary Error",details:ve.message})}else if(be==="getHLBalance")try{if(!t.hlPublicKey)re.push({type:"error",title:"HL Error",details:"Hyperliquid Vault not created/unlocked."});else{b("Fetching HL Balance...");const ve=await Vn.getUserState(t.hlPublicKey);console.log("[HL Debug] FULL USER STATE:",JSON.stringify(ve,null,2));const Re=parseFloat(ve.marginSummary.accountValue),De=parseFloat(ve.withdrawable).toFixed(2),Qe=Re.toFixed(2),it=ve.assetPositions.filter(tt=>parseFloat(tt.position.szi)!==0);let et=`USDC Account Value: $${Qe}`;et+=`
Withdrawable: $${De}`,it.length>0?(et+=`

Open Positions:`,it.forEach(tt=>{et+=`
 ${tt.position.coin} ${parseFloat(tt.position.szi)>0?"LONG":"SHORT"} ${Math.abs(parseFloat(tt.position.szi))} @ ${tt.position.entryPx}`})):et+=`
No open positions.`,re.push({type:"success",title:"Hyperliquid Balance",details:et})}}catch(ve){re.push({type:"error",title:"HL Balance Error",details:ve.message})}else if(be==="getHLMarketData")try{b("Fetching HL Market Data...");const ve=await Vn.getMarketData(se.coin),Re=ve.levels[0][0].px,De=ve.levels[1][0].px;re.push({type:"success",title:`Hyperliquid ${se.coin}`,details:`Best Bid: ${Re}
Best Ask: ${De}`})}catch(ve){re.push({type:"error",title:"HL Market Data Error",details:ve.message})}else if(be==="createHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Order Failed",details:"Vault is locked."});else try{b("Placing HL Order...");const ve=await or.decrypt(t.hlEncryptedPrivateKey,e),Re=zt.getWalletFromPrivateKey(ve);se.leverage&&await Vn.updateLeverage(Re,se.coin,se.leverage,!1);let De=se.size,Qe=se.price,it=se.orderType||"limit",et;const tt=it==="market";if(se.usdcAmount&&!se.size||tt&&!se.price){console.log(`[HL Order]  Fetching price for ${tt?"Market Order":"USDC Calc"}`),b("Fetching current price...");const oe=await Vn.getMarketData(se.coin),J=parseFloat(oe.levels[0][0].px),Z=parseFloat(oe.levels[1][0].px),de=se.isBuy?Z:J;if(et=de,se.usdcAmount&&!De){console.log(`[HL Order]  Fetching decimals for ${se.coin}`);const Ae=await Vn.getAssetDecimals(se.coin);console.log(`[HL Order]  ${se.coin} decimals: ${Ae}`);const fe=se.usdcAmount/de;De=parseFloat(fe.toFixed(Ae)),console.log(`[HL Order]  USDC: ${se.usdcAmount} / Price: ${de} = Raw Size: ${fe} -> Rounded: ${De}`)}if(tt){let fe=se.isBuy?de*1.05:de*.95;console.log("[HL Order]  Fetching decimals for price rounding");const Ye=6-await Vn.getAssetDecimals(se.coin);let Je=parseFloat(fe.toFixed(Ye));Je=parseFloat(Je.toPrecision(5)),Qe=parseFloat(Je.toFixed(Ye)),it="ioc",console.log(`[HL Order]  Market Order: Base ${de} -> Raw ${fe.toFixed(6)} -> Rounded ${Qe}`)}}if(!De)throw new Error("Either size or usdcAmount must be provided");if(it==="limit"&&Qe){const oe=await Vn.getAssetDecimals(se.coin),J=Math.max(0,6-oe);let Z=parseFloat(Qe.toFixed(J));Z=parseFloat(Z.toPrecision(5)),Qe=parseFloat(Z.toFixed(J)),console.log(`[HL Order]   Limit price rounded: ${se.price} -> ${Qe} (maxDecimals=${J})`)}if(it==="limit"&&!Qe)throw new Error("Price is required for Limit orders");let dt=se.stopLoss,Wt=se.takeProfit;const qe=et||Qe;qe&&(se.stopLoss&&se.stopLoss<100&&(se.isBuy?dt=qe*(1-se.stopLoss/100):dt=qe*(1+se.stopLoss/100),console.log(`[HL Order]  SL %: ${se.stopLoss}% -> Absolute: ${dt==null?void 0:dt.toFixed(2)} (from base ${qe})`)),se.takeProfit&&se.takeProfit<100&&(se.isBuy?Wt=qe*(1+se.takeProfit/100):Wt=qe*(1-se.takeProfit/100),console.log(`[HL Order]  TP %: ${se.takeProfit}% -> Absolute: ${Wt==null?void 0:Wt.toFixed(2)} (from base ${qe})`))),b("Placing HL Order...");const Tt=await Vn.createOrder(Re,se.coin,se.isBuy,De,Qe,{orderType:it,reduceOnly:se.reduceOnly||!1,stopLoss:dt,takeProfit:Wt}),ln=(se.orderType||"limit").toUpperCase(),Ie=se.leverage?` (${se.leverage}x leverage)`:"",Ve=Qe?` @ ${Qe}`:"",gt=se.usdcAmount?` (${se.usdcAmount} USDC)`:"",ut=dt||Wt?` [SL: ${dt?dt.toFixed(2):"none"}, TP: ${Wt?Wt.toFixed(2):"none"}]`:"";re.push({type:"success",title:"Order Placed",details:`Placed ${ln} ${se.isBuy?"LONG":"SHORT"} ${De.toFixed(4)} ${se.coin}${gt}${Ve}${Ie}${ut}`})}catch(ve){re.push({type:"error",title:"Order Failed",details:ve.message})}else if(be==="updateHLLeverage")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Leverage Update Failed",details:"Vault is locked."});else try{b("Updating Leverage...");const ve=await or.decrypt(t.hlEncryptedPrivateKey,e),Re=zt.getWalletFromPrivateKey(ve),De=await Vn.updateLeverage(Re,se.coin,se.leverage,se.isCross);re.push({type:"success",title:"Leverage Updated",details:`Set ${se.coin} leverage to ${se.leverage}x (${se.isCross?"Cross":"Isolated"})`})}catch(ve){re.push({type:"error",title:"Leverage Update Failed",details:ve.message})}else if(be==="closeHLPosition")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Close Failed",details:"Vault is locked."});else try{b("Closing Position...");const ve=await or.decrypt(t.hlEncryptedPrivateKey,e),Re=zt.getWalletFromPrivateKey(ve);try{b("Closing HL Position...");try{const De=await Vn.closePosition(Re,se.coin,se.size,se.orderType||"market",se.price);re.push({type:"success",title:"Position Closed",details:`Closed ${se.size?se.size:"entire"} ${se.coin} position via ${se.orderType||"market"} order`})}catch(De){if(De.message&&De.message.includes("Insufficient margin")){console.log("[HL Close] Insufficient margin detected. Attempting to Add Isolated Margin..."),b("Insufficient Margin. Adding Funds...");const Qe=await Vn.getUserState(Re.address),it=Qe.assetPositions.find(et=>et.position.coin===se.coin);if(it){const tt=parseFloat(it.position.szi)>0,mt=parseFloat(Qe.withdrawable);let dt=20;if(mt<25&&(dt=Math.max(0,mt-2)),dt<1)throw new Error(`Insufficient margin to close and wallet balance is too low ($${mt.toFixed(2)}) to add more margin.`);console.log(`[HL Close] Wallet Balance: ${mt}, Adding Margin: ${dt}`),await Vn.updateIsolatedMargin(Re,se.coin,tt,dt),console.log("[HL Close] Retrying close after adding margin..."),b("Retrying Close Position..."),await Vn.closePosition(Re,se.coin,se.size,se.orderType||"market",se.price),re.push({type:"success",title:"Position Closed (Recovered)",details:`Added ${dt.toFixed(2)} USDC margin to cover loss and closed ${se.coin} position successfully.`})}else throw new Error("Position not found during margin recovery.")}else if(De.message&&De.message.includes("Cross margin is not allowed"))re.push({type:"error",title:"Close Failed",details:"Cross margin not supported and insufficient isolated margin."});else throw De}}catch(De){re.push({type:"error",title:"Close Failed",details:De.message})}}catch(ve){re.push({type:"error",title:"Close Failed",details:ve.message})}else if(be==="cancelHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Cancel Failed",details:"Vault is locked."});else try{b("Cancelling HL Order...");const ve=await or.decrypt(t.hlEncryptedPrivateKey,e),Re=zt.getWalletFromPrivateKey(ve),De=await Vn.cancelOrder(Re,se.coin,se.orderId);re.push({type:"success",title:"Order Cancelled",details:`Cancelled Order ${se.orderId}. Status: ${De.status}`})}catch(ve){re.push({type:"error",title:"Cancel Failed",details:ve.message})}else if(be==="withdrawFromHL")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)re.push({type:"error",title:"Withdrawal Failed",details:"Hyperliquid Vault is locked."});else if(!t.hlOwnerPublicKey)re.push({type:"error",title:"Withdrawal Failed",details:"No Hyperliquid Owner Wallet connected. Please connect your MetaMask wallet first."});else try{b("Withdrawing from Hyperliquid...");const ve=await or.decrypt(t.hlEncryptedPrivateKey,e),Re=zt.getWalletFromPrivateKey(ve),De=await Vn.withdrawUSDC(Re,t.hlOwnerPublicKey,se.amount);s("HL Withdrawal",`Withdrew ${se.amount} USDC from Hyperliquid`,((L=(_=(T=(U=De.response)==null?void 0:U.data)==null?void 0:T.statuses)==null?void 0:_[0])==null?void 0:L.tx)||"pending"),re.push({type:"success",title:"Hyperliquid Withdrawal Initiated",details:`Withdrawing ${se.amount} USDC to ${t.hlOwnerPublicKey.slice(0,6)}...${t.hlOwnerPublicKey.slice(-4)}. Fee: $1 USDC. ETA: ~5 minutes.`})}catch(ve){(z=ve.message)!=null&&z.includes("Must deposit before performing actions")?re.push({type:"error",title:"Deposit Required",details:"Your Hyperliquid account needs an initial deposit before you can perform any actions. Please deposit USDC to your Hyperliquid vault address first."}):re.push({type:"error",title:"Withdrawal Error",details:ve.message})}else if(be==="getDealerTradeHistory")try{b("Querying Dealer history...");const ve=se.coin||void 0,Re=Math.min(se.limit||10,50),De=se.includeReasoning!==!1,Qe=pt.getSnapshot(),it=pt.getTradeHistory(ve,Re,De);if(it.operations.length===0&&it.recentLogs.length===0){let et="";ve?et=`No h histrico de operaes em ${ve}. O Dealer no executou trades nessa moeda.`:Qe.logs.length===0?et="Sem histrico disponvel. O Dealer ainda no executou nenhum trade ou o histrico foi limpo.":et="O Dealer analisou o mercado mas no executou nenhum trade ainda. Os sinais recebidos no atingiram o nvel de confiana necessrio.",re.push({type:"success",title:"Dealer History",details:et})}else{let et="";it.operations.length>0&&(et+=` **TRADE OPERATIONS** (${it.totalOperations} total)

`,it.operations.forEach((tt,mt)=>{var qe,Tt;const dt=tt.pnl!==void 0?` | PnL: ${tt.pnl>=0?"+":""}$${tt.pnl.toFixed(2)}`:"",Wt=tt.status==="OPEN"?"":"";et+=`${Wt} **${tt.action} ${tt.coin}** @ $${((qe=tt.entryPrice)==null?void 0:qe.toFixed(2))||"N/A"}${dt}
`,et+=`   Size: ${tt.size} ($${(Tt=tt.sizeUSDC)==null?void 0:Tt.toFixed(2)}) | Confidence: ${(tt.confidence*100).toFixed(0)}%
`,De&&tt.fullReasoning&&(et+=`   **Reasoning:** ${tt.fullReasoning}
`),et+=`   Time: ${new Date(tt.timestamp).toLocaleString()}

`})),it.operations.length===0&&it.recentLogs.length>0&&(et+=` **RECENT ANALYSIS LOGS**

`,it.recentLogs.forEach(tt=>{var mt;et+=` [${tt.type}] ${tt.message}
`,(mt=tt.details)!=null&&mt.fullReason&&(et+=`  Reasoning: ${tt.details.fullReason}
`)})),re.push({type:"success",title:ve?`Dealer History: ${ve}`:"Dealer Trade History",details:et.trim()})}}catch(ve){re.push({type:"error",title:"Dealer History Error",details:ve.message})}else if(Mpt(be))try{const ve=await Opt(be,se,t.publicKey||void 0,Re=>b(Re));ve&&re.push(ve)}catch(ve){re.push({type:"error",title:"LP Tool Error",details:ve.message})}}let ae="";if(Y.candidates&&Y.candidates[0].content&&Y.candidates[0].content.parts)for(const pe of Y.candidates[0].content.parts)pe.text&&(ae+=pe.text);let Te="I processed your request.";if(re.length>0){const pe=re.some(se=>se.type==="error"),be=re.some(se=>se.type==="success");pe&&!be?Te="I encountered an issue executing that command.":be?Te="Action completed successfully.":pe&&be&&(Te="Some actions completed, but others failed.")}const ue={id:(Date.now()+1).toString(),role:"model",content:ae||Te,timestamp:Date.now(),toolResults:re};l(pe=>{const be=[...pe,ue];if(t.isUnlocked&&e&&c){const se={id:c,title:pe.length>0&&pe[0].role==="user"?Jo.generateTitle(pe[0].content):"Conversation",lastMessage:ue.content.substring(0,50),timestamp:Date.now(),messages:be};Jo.saveConversation(se,e).catch(ve=>console.error("Auto-save after model response failed",ve))}return be})}catch(G){console.error("AI Error:",G);const te={id:Date.now().toString(),role:"model",content:"Sorry, I encountered a system error while processing that request.",toolResults:[{type:"error",title:"System Error",details:G.message}],timestamp:Date.now()};l(K=>{const q=[...K,te];if(t.isUnlocked&&e&&c){const M={id:c,title:K.length>0&&K[0].role==="user"?Jo.generateTitle(K[0].content):"Conversation",lastMessage:te.content.substring(0,50),timestamp:Date.now(),messages:q};Jo.saveConversation(M,e).catch(P=>console.error("Auto-save after error response failed",P))}return q})}finally{x(!1),b("")}}}},pg="/poly-clob",sT="/poly-gamma",Dpt="/poly-data",vee=200,jpt=3;class Bpt{constructor(){this.privateKey=null,this.wallet=null,this.apiCredentials=null,this.lastRequestTime=0,this.isInitialized=!1}createWallet(){return th.createRandom()}getWalletFromPrivateKey(e){return new th(e)}async initialize(e){try{return this.privateKey=e,this.wallet=new th(e),this.apiCredentials=await this.createOrDeriveApiKeys(),this.isInitialized=!0,console.log("[PolymarketService] Initialized with address:",this.wallet.address),!0}catch(n){return console.error("[PolymarketService] Failed to initialize:",n),!1}}getIsInitialized(){return this.isInitialized}getAddress(){var e;return((e=this.wallet)==null?void 0:e.address)||null}async throttledFetch(e,n){const i=Date.now()-this.lastRequestTime;i<vee&&await new Promise(o=>setTimeout(o,vee-i)),this.lastRequestTime=Date.now();let s=null;for(let o=0;o<jpt;o++)try{const a=await fetch(e,n);if(a.status===429){const l=parseInt(a.headers.get("Retry-After")||"1",10);console.warn(`[PolymarketService] Rate limited, waiting ${l}s...`),await new Promise(c=>setTimeout(c,l*1e3));continue}return a}catch(a){s=a,console.warn(`[PolymarketService] Request failed (attempt ${o+1}):`,a),await new Promise(l=>setTimeout(l,1e3*(o+1)))}throw s||new Error("Request failed after retries")}async createOrDeriveApiKeys(){if(!this.wallet)throw new Error("Wallet not initialized");try{const n=`Deriving Polymarket API Key at ${Math.floor(Date.now()/1e3)}`,r=await this.wallet.signMessage(n),i=Kn(mi(r+"apiKey")).slice(0,34),s=Kn(mi(r+"secret")).slice(0,66),o=Kn(mi(r+"passphrase")).slice(0,18);return{apiKey:i,secret:s,passphrase:o}}catch(e){throw console.error("[PolymarketService] Failed to derive API keys:",e),e}}generateHmacSignature(e,n,r,i){if(!this.apiCredentials)throw new Error("API credentials not initialized");const s=r+e+n+(i||"");return Kn(mi(this.apiCredentials.secret+s))}getAuthHeaders(e,n,r){if(!this.apiCredentials||!this.wallet)throw new Error("Service not initialized");const i=Math.floor(Date.now()/1e3).toString(),s=this.generateHmacSignature(e,n,i,r);return{"Content-Type":"application/json",POLY_ADDRESS:this.wallet.address,POLY_API_KEY:this.apiCredentials.apiKey,POLY_PASSPHRASE:this.apiCredentials.passphrase,POLY_SIGNATURE:s,POLY_TIMESTAMP:i}}async getActiveMarkets(e,n=50,r=0){try{let i=`${sT}/events?active=true&closed=false&limit=${n}&offset=${r}`;e&&(i+=`&tag=${e}`);const s=await this.throttledFetch(i);if(!s.ok)throw new Error(`Failed to fetch markets: ${s.status}`);const o=await s.json(),a=[];for(const l of o)if(l.markets&&Array.isArray(l.markets))for(const c of l.markets)a.push(this.transformMarket(c,l));return a}catch(i){return console.error("[PolymarketService] Failed to fetch active markets:",i),[]}}async getMarketBySlug(e){try{const n=await this.throttledFetch(`${sT}/markets/slug/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Failed to fetch market: ${n.status}`)}const r=await n.json();return this.transformMarket(r)}catch(n){return console.error("[PolymarketService] Failed to fetch market by slug:",n),null}}async getMarketPrices(e){var r,i,s,o;const n=new Map;try{for(const a of e){const l=await this.throttledFetch(`${pg}/book?token_id=${a}`);if(l.ok){const c=await l.json(),u=((i=(r=c.bids)==null?void 0:r[0])==null?void 0:i.price)||0,h=((o=(s=c.asks)==null?void 0:s[0])==null?void 0:o.price)||1,m=(parseFloat(u)+parseFloat(h))/2;n.set(a,{yes:m,no:1-m})}}}catch(a){console.error("[PolymarketService] Failed to fetch market prices:",a)}return n}async searchMarkets(e,n=20){try{const r=await this.throttledFetch(`${sT}/search/events?search_string=${encodeURIComponent(e)}&limit=${n}`);if(!r.ok)throw new Error(`Search failed: ${r.status}`);const i=await r.json(),s=[];for(const o of i)if(o.markets&&Array.isArray(o.markets))for(const a of o.markets)s.push(this.transformMarket(a,o));return s}catch(r){return console.error("[PolymarketService] Failed to search markets:",r),[]}}transformMarket(e,n){var r,i,s,o,a,l,c,u;return{id:e.id||e.condition_id,conditionId:e.condition_id||e.conditionId||"",questionId:e.question_id||e.questionId||"",slug:e.slug||"",question:e.question||(n==null?void 0:n.title)||"",description:e.description||(n==null?void 0:n.description)||"",tokenIdYes:((i=(r=e.tokens)==null?void 0:r[0])==null?void 0:i.token_id)||((s=e.clobTokenIds)==null?void 0:s[0])||"",tokenIdNo:((a=(o=e.tokens)==null?void 0:o[1])==null?void 0:a.token_id)||((l=e.clobTokenIds)==null?void 0:l[1])||"",priceYes:parseFloat((c=e.outcomePrices)==null?void 0:c[0])||.5,priceNo:parseFloat((u=e.outcomePrices)==null?void 0:u[1])||.5,volume24h:parseFloat(e.volume24hr)||0,liquidity:parseFloat(e.liquidity)||0,endDate:e.endDate||e.end_date_iso||"",category:this.categorizeMarket((n==null?void 0:n.tags)||[]),active:e.active!==!1,resolved:e.resolved||!1,outcome:e.outcome||null}}categorizeMarket(e){const n=e.join(" ").toLowerCase();return n.includes("crypto")||n.includes("bitcoin")||n.includes("ethereum")?"crypto":n.includes("politic")||n.includes("election")||n.includes("government")?"politics":n.includes("sport")||n.includes("nfl")||n.includes("nba")||n.includes("soccer")?"sports":n.includes("business")||n.includes("economy")||n.includes("stock")?"business":n.includes("science")||n.includes("tech")||n.includes("ai")?"science":n.includes("culture")||n.includes("entertainment")||n.includes("celebrity")?"pop-culture":"other"}async getBalance(){if(!this.wallet)return 0;try{const e="https://polygon-rpc.com",n="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",r=new M_e(e),i=["function balanceOf(address) view returns (uint256)"],o=await new ny(n,i,r).balanceOf(this.wallet.address);return parseFloat(dre(o,6))}catch(e){return console.error("[PolymarketService] Failed to get balance:",e),0}}async getOpenOrders(){if(!this.isInitialized)return[];try{const e="/orders",n=this.getAuthHeaders("GET",e),r=await this.throttledFetch(`${pg}${e}`,{method:"GET",headers:n});if(!r.ok)throw new Error(`Failed to fetch orders: ${r.status}`);return(await r.json()).map(s=>this.transformOrder(s))}catch(e){return console.error("[PolymarketService] Failed to fetch open orders:",e),[]}}async getPositions(){if(!this.wallet)return[];try{const e=this.wallet.address,n=await this.throttledFetch(`${Dpt}/positions?user=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Failed to fetch positions: ${n.status}`)}const r=await n.json();return Array.isArray(r)?r.map(i=>this.transformPosition(i)):[]}catch(e){return console.error("[PolymarketService] Failed to fetch positions:",e),[]}}async getTrades(e=20){if(!this.isInitialized)return[];try{const n=`/trades?limit=${e}`,r=this.getAuthHeaders("GET",n),i=await this.throttledFetch(`${pg}${n}`,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch trades: ${i.status}`);return(await i.json()).map(o=>this.transformTrade(o))}catch(n){return console.error("[PolymarketService] Failed to fetch trades:",n),[]}}async createOrder(e){if(!this.isInitialized)return{success:!1,error:"Service not initialized"};try{const n={tokenID:e.tokenId,price:e.price.toString(),size:e.size.toString(),side:e.side,orderType:"GTC",tickSize:e.tickSize||"0.01",negRisk:e.negRisk||!1},r="/order",i=JSON.stringify(n),s=this.getAuthHeaders("POST",r,i),o=await this.throttledFetch(`${pg}${r}`,{method:"POST",headers:s,body:i});if(!o.ok)return{success:!1,error:(await o.json().catch(()=>({}))).message||`Order failed: ${o.status}`};const a=await o.json();return{success:!0,orderId:a.orderID||a.order_id}}catch(n){return console.error("[PolymarketService] Failed to create order:",n),{success:!1,error:n.message}}}async cancelOrder(e){if(!this.isInitialized)return!1;try{const n=`/order/${e}`,r=this.getAuthHeaders("DELETE",n);return(await this.throttledFetch(`${pg}${n}`,{method:"DELETE",headers:r})).ok}catch(n){return console.error("[PolymarketService] Failed to cancel order:",n),!1}}async cancelAllOrders(){if(!this.isInitialized)return!1;try{const e="/orders",n=this.getAuthHeaders("DELETE",e);return(await this.throttledFetch(`${pg}${e}`,{method:"DELETE",headers:n})).ok}catch(e){return console.error("[PolymarketService] Failed to cancel all orders:",e),!1}}transformOrder(e){var n;return{id:e.id||e.order_id,marketId:e.market||e.marketId||"",tokenId:e.asset_id||e.tokenId||"",side:((n=e.side)==null?void 0:n.toUpperCase())||"BUY",outcome:e.outcome||"YES",price:parseFloat(e.price)||0,size:parseFloat(e.original_size||e.size)||0,filledSize:parseFloat(e.size_matched||e.filledSize)||0,status:this.mapOrderStatus(e.status),createdAt:new Date(e.created_at||e.createdAt).getTime()}}mapOrderStatus(e){return{open:"OPEN",live:"OPEN",matched:"FILLED",filled:"FILLED",cancelled:"CANCELED",canceled:"CANCELED",partial:"PARTIALLY_FILLED"}[e==null?void 0:e.toLowerCase()]||"OPEN"}transformPosition(e){var c;const n=parseFloat(e.size||e.shares)||0,r=parseFloat(e.avgPrice||e.average_price)||0,i=parseFloat(e.currentPrice||e.price)||r,s=n*r,o=n*i,a=o-s,l=s>0?a/s*100:0;return{marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((c=e.outcome)==null?void 0:c.toUpperCase())||"YES",shares:n,avgPrice:r,currentPrice:i,unrealizedPnl:a,unrealizedPnlPercent:l,costBasis:s,currentValue:o}}transformTrade(e){var n,r;return{id:e.id||e.trade_id,marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((n=e.outcome)==null?void 0:n.toUpperCase())||"YES",side:((r=e.side)==null?void 0:r.toUpperCase())||"BUY",price:parseFloat(e.price)||0,size:parseFloat(e.size)||0,fee:parseFloat(e.fee||e.trading_fee)||0,timestamp:new Date(e.created_at||e.timestamp||e.createdAt).getTime(),realizedPnl:e.realized_pnl?parseFloat(e.realized_pnl):void 0}}async checkHealth(){try{return(await this.throttledFetch(`${sT}/health`)).ok}catch{return!1}}}const is=new Bpt;class Upt{async getMarketContext(e){try{const n=new Date(e.endDate),r=new Date,i=Math.max(0,Math.ceil((n.getTime()-r.getTime())/(1e3*60*60*24)));let s="neutral";return e.priceYes>.6?s="bullish":e.priceYes<.4&&(s="bearish"),{market:e,timeToResolution:i,sentiment:s,ts:Date.now()}}catch(n){return console.error("[PolymarketMCP] Failed to get market context:",n),{market:e,timeToResolution:0,ts:Date.now(),error:n.message}}}async getBatchContext(e,n,r,i,s=20){const o=[];try{for(const c of e){const h=(await is.getActiveMarkets(c,Math.ceil(s/e.length))).filter(m=>m.liquidity>=i.minLiquidity&&m.volume24h>=i.minVolume24h&&m.active&&!m.resolved);for(const m of h){const g=await this.getMarketContext(m);o.push(g)}}const a=n.reduce((c,u)=>c+u.currentValue,0),l=n.reduce((c,u)=>c+u.unrealizedPnl,0);return{markets:o.slice(0,s),portfolio:{balance:r,positions:n,totalExposure:a,unrealizedPnl:l},settings:i,ts:Date.now()}}catch(a){return console.error("[PolymarketMCP] Failed to get batch context:",a),{markets:[],portfolio:{balance:r,positions:n,totalExposure:0,unrealizedPnl:0},settings:i,ts:Date.now()}}}calculatePositionsPnL(e){const n=e.reduce((a,l)=>a+l.costBasis,0),r=e.reduce((a,l)=>a+l.currentValue,0),i=r-n,s=n>0?i/n*100:0,o=e.map(a=>({marketId:a.marketId,question:a.question,outcome:a.outcome,pnl:a.unrealizedPnl,pnlPercent:a.unrealizedPnlPercent}));return{totalCostBasis:n,totalValue:r,totalPnl:i,totalPnlPercent:s,byMarket:o}}buildAnalysisPrompt(e,n,r){const{markets:i,portfolio:s,settings:o}=e,a=i.map(u=>{const h=u.market;return`- "${h.question}" [${h.category}]
  ID: ${h.id} | TokenYES: ${h.tokenIdYes} | TokenNO: ${h.tokenIdNo}
  YES: ${(h.priceYes*100).toFixed(1)}% | Volume24h: $${h.volume24h.toLocaleString()} | Liquidity: $${h.liquidity.toLocaleString()}
  Days to Resolution: ${u.timeToResolution} | Sentiment: ${u.sentiment||"neutral"}`}).join(`
`),l=s.positions.length>0?s.positions.map(u=>`- "${u.question.slice(0,50)}..." ${u.outcome}: ${u.shares.toFixed(2)} shares @ ${(u.avgPrice*100).toFixed(1)}% (PnL: $${u.unrealizedPnl.toFixed(2)})`).join(`
`):"No open positions";return`
POLYMARKET DEALER ANALYSIS
${r?`
=== RECENT ACTIVITY CONTEXT ===
${r}
`:""}
=== STRATEGY ===
${n}

=== PORTFOLIO STATUS ===
Balance: $${s.balance.toFixed(2)} USDC
Total Exposure: $${s.totalExposure.toFixed(2)}
Unrealized PnL: $${s.unrealizedPnl.toFixed(2)}
Open Positions: ${s.positions.length} / ${o.maxOpenPositions}

=== CURRENT POSITIONS ===
${l}

=== AVAILABLE MARKETS (${i.length}) ===
${a}

=== CONSTRAINTS ===
- Max Position Size: $${o.maxPositionSizeUSDC}
- Max Open Positions: ${o.maxOpenPositions}
- Min Market Liquidity: $${o.minLiquidity.toLocaleString()}
- Allowed Categories: ${o.allowedCategories.join(", ")}

=== INSTRUCTIONS ===
Analyze each market and provide trading decisions.
For each decision include:
1. Action: BUY_YES, BUY_NO, SELL_YES, SELL_NO, or HOLD
2. Market ID (use the ID provided)
3. Token ID (use TokenYES for BUY_YES/SELL_YES, TokenNO for BUY_NO/SELL_NO)
4. Confidence (0-100)
5. Reasoning
6. Suggested size in USDC (if applicable)
7. Suggested limit price (if applicable)

Respond in JSON format:
{
  "decisions": [
    {
      "action": "BUY_YES",
      "marketId": "...",
      "question": "...",
      "tokenId": "...",
      "confidence": 75,
      "reason": "...",
      "suggestedSize": 25,
      "suggestedPrice": 0.45
    }
  ],
  "marketOverview": "Brief overall market assessment",
  "riskAssessment": "Brief risk commentary",
  "cycleSummary": "Brief 1-2 sentence summary of this analysis for context in next cycle. Include key observations and actions. Max 300 chars."
}
`}parseAIResponse(e){try{const n=e.match(/\{[\s\S]*\}/);if(!n)return console.error("[PolymarketMCP] No JSON found in AI response"),[];const r=JSON.parse(n[0]);return!r.decisions||!Array.isArray(r.decisions)?[]:r.decisions.map(i=>({action:i.action||"HOLD",marketId:i.marketId||"",question:i.question||"",tokenId:i.tokenId||"",confidence:i.confidence||0,reason:i.reason||"",suggestedSize:i.suggestedSize,suggestedPrice:i.suggestedPrice})).filter(i=>i.action!=="HOLD"&&i.confidence>=60)}catch(n){return console.error("[PolymarketMCP] Failed to parse AI response:",n),[]}}}const K4=new Upt,bee="polymarket-dealer-cycle",wee="polymarket-dealer-sync";class Fpt{constructor(){this.isLoopRunning=!1,this.executor=null,lt.subscribe(()=>{const e=lt.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()})}startLoop(){if(this.isLoopRunning)return;const e=lt.getSnapshot();if(!e.isOn)return;console.log("[PolymarketDealerService]  Starting main loop with Web Worker timer (background-safe)..."),this.isLoopRunning=!0,L2.start(),lt.addLog("INFO","Polymarket Dealer loop started"),this.runCycle();const n=e.settings.checkIntervalSeconds*1e3;qa.start(bee,n,()=>this.runCycle()),this.startSyncLoop()}startSyncLoop(){qa.start(wee,3e4,()=>this.syncPortfolio())}async syncPortfolio(){if(is.getIsInitialized())try{const[e,n]=await Promise.all([is.getBalance(),is.getPositions()]),r=n.reduce((i,s)=>i+s.currentValue,0);lt.updatePortfolioState(n,e,r)}catch(e){console.error("[PolymarketDealerService] Sync error:",e)}}stopLoop(){console.log("[PolymarketDealerService]  Stopping loop..."),qa.stop(bee),qa.stop(wee),L2.stop(),this.isLoopRunning=!1,lt.addLog("INFO","Polymarket Dealer loop stopped"),lt.setAnalyzing(!1)}setExecutor(e){this.executor=e}async runCycle(){const e=lt.getSnapshot();if(!e.isOn){this.stopLoop();return}if(!is.getIsInitialized()){lt.addLog("WARNING","Polymarket service not initialized, skipping cycle");return}try{console.log("[PolymarketDealerService] === Starting new cycle ==="),lt.setAnalyzing(!0),lt.setStatusMessage("Starting analysis cycle..."),lt.setCurrentTask("Fetching Markets"),lt.setStatusMessage("Fetching active markets from Polymarket...");const n=e.settings,[r,i]=await Promise.all([is.getBalance(),is.getPositions()]),s=i.reduce((w,k)=>w+k.currentValue,0);lt.updatePortfolioState(i,r,s);const o=i.length<n.maxOpenPositions,a=n.bankrollType==="MANUAL"?Math.min(n.manualBankroll,r):r;a<n.maxPositionSizeUSDC&&lt.addLog("WARNING","Insufficient balance for new positions"),lt.setCurrentTask("Building Context"),lt.setStatusMessage("Building market context for AI analysis...");const l=await K4.getBatchContext(n.allowedCategories.length>0?n.allowedCategories:["politics","crypto","business"],i,a,{maxPositionSizeUSDC:n.maxPositionSizeUSDC,maxOpenPositions:n.maxOpenPositions,minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories},20);if(l.markets.length===0){lt.addLog("REASONING","No actionable markets found",{fullReason:`Scanned available markets but none met the filtering criteria.
                    Filters: Min Liquidity: $${n.minLiquidity.toLocaleString()}, Min Volume: $${n.minVolume24h.toLocaleString()}
                    Allowed categories: ${n.allowedCategories.join(", ")}
                    Waiting for better opportunities in the next cycle.`,context:{minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories,availableBankroll:a,openPositions:i.length}}),lt.setAnalyzing(!1),lt.setCurrentTask(""),lt.setStatusMessage("Waiting for next cycle...");return}lt.setStatusDetail("Found "+l.markets.length+" markets to analyze"),lt.setCurrentTask("AI Analysis"),lt.setStatusMessage("Consulting AI for trading decisions...");const c=n.promptMode==="preset"?qT[n.selectedPreset]:n.strategyPrompt,u=sd.getContextForAI("polymarket");u&&lt.addLog("INFO",` Cycle Summary: Including ${u.length} char context from previous cycles`);const h=K4.buildAnalysisPrompt(l,c,u),m=await hm.getPolymarketAnalysis(h);if(!m){lt.addLog("ERROR","AI analysis failed - no response"),lt.setAnalyzing(!1);return}const g=K4.parseAIResponse(m);let x="",v;try{const w=m.match(/\{[\s\S]*\}/);if(w){const k=JSON.parse(w[0]);k.marketOverview&&(x=k.marketOverview),k.riskAssessment&&x&&(x+=" | Risk: "+k.riskAssessment),k.cycleSummary&&typeof k.cycleSummary=="string"&&(v=k.cycleSummary.slice(0,350))}}catch{x=m.replace(/\{[\s\S]*\}/,"").trim().slice(0,200)||"Analysis complete"}if(v&&(sd.setSummary("polymarket",v),lt.addLog("INFO",` AI Summary: ${v.slice(0,80)}...`)),lt.addLog("REASONING",x||"AI Analysis Complete",{fullReason:m,context:{marketsAnalyzed:l.markets.length,currentBalance:r,currentExposure:s,openPositions:i.length,maxPositions:n.maxOpenPositions,allowedCategories:n.allowedCategories,intentsFound:g.length}}),lt.setAnalysisNote(x||"Analyzed "+l.markets.length+" markets"),g.length===0)lt.addLog("REASONING","No trades recommended - HOLD strategy",{fullReason:"After analyzing the available markets, no opportunities met the confidence threshold or risk parameters. Current market conditions suggest holding existing positions.",context:{marketsAnalyzed:l.markets.length,currentBalance:r,recommendation:"HOLD"}}),lt.setCurrentSignal("NEUTRAL"),lt.setStatusDetail("No trades recommended - holding");else{const w=g.filter(R=>R.action.startsWith("BUY")).length,k=g.filter(R=>R.action.startsWith("SELL")).length,C=w>k?"BULLISH":k>w?"BEARISH":"NEUTRAL";lt.addLog("SIGNAL",`${g.length} trading signals - ${C}`,{fullReason:`AI identified ${g.length} trading opportunities across the analyzed markets.
                    ${w} BUY signals and ${k} SELL signals indicate a ${C} overall stance.`,context:{totalIntents:g.length,buySignals:w,sellSignals:k,sentiment:C,intents:g.map(R=>{var B;return{market:R.question.slice(0,60),action:R.action,confidence:R.confidence,reason:(B=R.reason)==null?void 0:B.slice(0,100)}})}}),lt.setCurrentSignal(C),lt.setStatusDetail(`${w} buy signals, ${k} sell signals`)}if(g.length>0&&o&&this.executor){lt.setCurrentTask("Executing Trades"),lt.setStatusMessage("Executing trading decisions...");for(const w of g){if(w.confidence<60){lt.addLog("INFO","Skipping low-confidence intent: "+w.question.slice(0,50));continue}if(i.length>=n.maxOpenPositions){lt.addLog("WARNING","Max positions reached, skipping remaining intents");break}try{await this.executor(w),lt.addLog("TRADE",`${w.action} on "${w.question.slice(0,40)}..."`,{fullReason:w.reason||"Trade executed based on AI analysis",context:{action:w.action,confidence:w.confidence,marketId:w.marketId,question:w.question,suggestedPrice:w.suggestedPrice,suggestedSize:w.suggestedSize}})}catch(k){lt.addLog("ERROR","Failed to execute: "+k.message)}}}lt.setAnalyzing(!1),lt.setCurrentTask(""),lt.setStatusMessage("Cycle complete. Waiting "+n.checkIntervalSeconds+"s..."),lt.setStatusDetail(""),console.log("[PolymarketDealerService] === Cycle complete ===");const b=l.markets.map(w=>w.market.question.slice(0,30));sd.recordCycle("polymarket",{timestamp:Date.now(),decisions:g.map(w=>({asset:w.question.slice(0,40),action:w.action,confidence:w.confidence/100})),assetsAnalyzed:b})}catch(n){console.error("[PolymarketDealerService] Cycle error:",n),lt.addLog("ERROR","Cycle error: "+n.message),lt.setAnalyzing(!1),lt.setCurrentTask(""),lt.setStatusMessage("Error occurred. Retrying next cycle...")}}}const $pt=new Fpt;function m0e(t,e){const n=A.useSyncExternalStore(lt.subscribe.bind(lt),lt.getSnapshot.bind(lt)),r=A.useRef(!1);A.useEffect(()=>{if(!t.isUnlocked||!t.pmEncryptedPrivateKey||!e||e.trim()==="")return;(async()=>{try{const g=await or.decrypt(t.pmEncryptedPrivateKey,e);await is.initialize(g)?lt.addLog("INFO","Polymarket service initialized"):lt.addLog("ERROR","Failed to initialize Polymarket service")}catch(g){console.error("[usePolymarket] Init error:",g),lt.addLog("ERROR","Initialization error: "+g.message)}})()},[t.isUnlocked,t.pmEncryptedPrivateKey,e]),A.useEffect(()=>{r.current||($pt.setExecutor(async m=>{await i(m)}),r.current=!0)},[]);const i=async m=>{var k,C;if(!is.getIsInitialized()){lt.addLog("ERROR","Service not initialized");return}const g=m.suggestedPrice||.5,x=m.suggestedSize||n.settings.maxPositionSizeUSDC;let v=m.tokenId;if(!v){lt.addLog("WARNING",`Skipping "${(k=m.question)==null?void 0:k.slice(0,40)}..." - tokenId not available`);return}const b=(g*100).toFixed(1);lt.addLog("TRADE",`Executing ${m.action} on "${(C=m.question)==null?void 0:C.slice(0,40)}..." @ ${b}`);const w=await is.createOrder({tokenId:v,side:m.action==="BUY_YES"||m.action==="BUY_NO"?"BUY":"SELL",price:g,size:Math.floor(x/g)});w.success?(lt.addLog("TRADE",`Order placed: ${w.orderId}`),lt.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.action.includes("YES")?"YES":"NO",action:m.action.startsWith("BUY")?"BUY":"SELL",timestamp:Date.now(),price:g,shares:x/g,sizeUSDC:x,reasoning:m.reason||m.reasoning||"",confidence:m.confidence,status:"OPEN"})):lt.addLog("ERROR",`Order failed: ${w.error}`)};A.useEffect(()=>{if(!n.isOn||!is.getIsInitialized())return;const m=async()=>{try{const[x,v]=await Promise.all([is.getBalance(),is.getPositions()]),b=v.reduce((w,k)=>w+k.currentValue,0);lt.updatePortfolioState(v,x,b)}catch(x){console.error("[usePolymarket] Sync error:",x)}};m();const g=setInterval(m,3e4);return()=>clearInterval(g)},[n.isOn]);const s=m=>{lt.toggleDealer(m),m?lt.addLog("INFO","Polymarket Dealer activated"):lt.addLog("INFO","Polymarket Dealer deactivated")},o=m=>{lt.updateSettings(m)},a=()=>{lt.reload(),lt.addLog("INFO","Settings applied")},l=m=>{lt.setStrategyPrompt(m),lt.addLog("INFO","Strategy prompt updated")},c=()=>{lt.clearLogs()},u=async m=>{if(!is.getIsInitialized())return lt.addLog("ERROR","Service not initialized"),{success:!1,error:"Service not initialized"};const g=(m.price*100).toFixed(1);lt.addLog("TRADE","Executing "+m.side+" "+m.outcome+" @ "+g+"c");const x=await is.createOrder({tokenId:m.tokenId,side:m.side,price:m.price,size:m.size});return x.success?(lt.addLog("TRADE","Order placed: "+x.orderId),lt.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.outcome,action:m.side,timestamp:Date.now(),price:m.price,shares:m.size,sizeUSDC:m.size*m.price,reasoning:m.reason,confidence:m.confidence,status:"OPEN"})):lt.addLog("ERROR","Order failed: "+x.error),x},h=async m=>{const g=await is.cancelOrder(m);return g?lt.addLog("INFO","Order "+m+" canceled"):lt.addLog("ERROR","Failed to cancel order "+m),g};return{state:n,isOn:n.isOn,isAnalyzing:n.isAnalyzing,settings:n.settings,logs:n.logs,positions:n.activePositions,operationHistory:n.operationHistory,toggleDealer:s,updateSettings:o,applyChanges:a,saveStrategy:l,clearLogs:c,executeOrder:u,cancelOrder:h}}const zpt=({onSelectConversation:t})=>{const[e,n]=A.useState([]),[r,i]=A.useState(""),{user:s}=L1();A.useEffect(()=>{s!=null&&s.uid&&o()},[s==null?void 0:s.uid]);const o=async()=>{const h=await Jo.getHistory();n(Array.isArray(h)?h:[])},a=async(h,m)=>{h.stopPropagation(),window.confirm("Delete this conversation?")&&(await Jo.deleteConversation(m),o())},l=e.filter(h=>h.title.toLowerCase().includes(r.toLowerCase())),c=l.reduce((h,m)=>{const g=new Date(m.timestamp),v=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));let b="Older";return v===0?b="Today":v===1?b="Yesterday":v<7?b="Previous 7 Days":v<30&&(b="Previous 30 Days"),h[b]||(h[b]=[]),h[b].push(m),h},{}),u=["Today","Yesterday","Previous 7 Days","Previous 30 Days","Older"];return d.jsxs(Bt.div,{className:"h-full flex flex-col p-8 max-w-7xl mx-auto w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight mb-2",children:"Conversation History"}),d.jsx("p",{className:"text-slate-400",children:"Manage and revisit your past interactions with the Vault Operator."})]}),d.jsxs("div",{className:"relative",children:[d.jsx(w8,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),d.jsx(_x,{type:"text",placeholder:"Search conversations...",value:r,onChange:h=>i(h.target.value),className:"pl-10 w-64 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:l.length===0?d.jsxs(Bt.div,{className:"flex flex-col items-center justify-center h-64 text-slate-500",initial:{opacity:0},animate:{opacity:1},children:[d.jsx(_w,{size:48,className:"mb-4 opacity-20"}),d.jsx("p",{children:"No conversations found."})]}):d.jsx("div",{className:"space-y-8",children:u.map(h=>{const m=c[h];return!m||m.length===0?null:d.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"h-px bg-slate-800 flex-1"}),d.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:h}),d.jsx("div",{className:"h-px bg-slate-800 flex-1"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.jsx(Zs,{children:m.map((g,x)=>d.jsx(Bt.div,{onClick:()=>t(g.id),className:"group",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:x*.05},whileHover:{scale:1.02},children:d.jsxs(qs,{className:"p-4 cursor-pointer hover:border-[#E7FE55]/30 hover:shadow-xl hover:shadow-[#E7FE55]/5 relative overflow-hidden h-full",children:[d.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:d.jsx(zi,{variant:"ghost",size:"icon",onClick:v=>a(v,g.id),className:"h-7 w-7 text-slate-400 hover:text-red-400 hover:bg-red-500/20",children:d.jsx(gm,{size:14})})}),d.jsxs("div",{className:"flex flex-col h-full justify-between",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[#E7FE55]",children:[d.jsx(_w,{size:16}),d.jsxs("span",{className:"text-xs font-mono opacity-70",children:["ID: ",g.id.slice(0,8),"..."]})]}),d.jsx("h3",{className:"text-base font-semibold text-slate-200 group-hover:text-white line-clamp-2 mb-2 transition-colors",children:g.title})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-4 pt-4 border-t border-slate-700/30",children:[d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx(h8,{size:12}),d.jsx("span",{children:new Date(g.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),d.jsx("div",{className:"group-hover:translate-x-1 transition-transform text-[#E7FE55]/50 group-hover:text-[#E7FE55]",children:d.jsx(Ul,{size:14})})]})]})]})},g.id))})})]},h)})})})]})};function Eee(t,[e,n]){return Math.min(n,Math.max(e,t))}function Hpt(t){const e=Vpt(t),n=A.forwardRef((r,i)=>{const{children:s,...o}=r,a=A.Children.toArray(s),l=a.find(Gpt);if(l){const c=l.props.children,u=a.map(h=>h===l?A.Children.count(c)>1?A.Children.only(null):A.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:i,children:A.isValidElement(c)?A.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function Vpt(t){const e=A.forwardRef((n,r)=>{const{children:i,...s}=n;if(A.isValidElement(i)){const o=Wpt(i),a=Kpt(s,i.props);return i.type!==A.Fragment&&(a.ref=r?Yx(r,o):o),A.cloneElement(i,a)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var qpt=Symbol("radix.slottable");function Gpt(t){return A.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===qpt}function Kpt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Wpt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ypt(t){const e=A.useRef({value:t,previous:t});return A.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Jpt=[" ","Enter","ArrowUp","ArrowDown"],Xpt=[" ","Enter"],Lm="Select",[uP,dP,Qpt]=epe(Lm),[Ev]=$m(Lm,[Qpt,BC]),fP=BC(),[Zpt,Ph]=Ev(Lm),[emt,tmt]=Ev(Lm),g0e=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:m,required:g,form:x}=t,v=fP(e),[b,w]=A.useState(null),[k,C]=A.useState(null),[R,B]=A.useState(!1),O=KB(c),[F,H]=qw({prop:r,defaultProp:i??!1,onChange:s,caller:Lm}),[j,$]=qw({prop:o,defaultProp:a,onChange:l,caller:Lm}),W=A.useRef(null),V=b?x||!!b.closest("form"):!0,[U,T]=A.useState(new Set),_=Array.from(U).map(L=>L.props.value).join(";");return d.jsx(y5e,{...v,children:d.jsxs(Zpt,{required:g,scope:e,trigger:b,onTriggerChange:w,valueNode:k,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:B,contentId:nh(),value:j,onValueChange:$,open:F,onOpenChange:H,dir:O,triggerPointerDownPosRef:W,disabled:m,children:[d.jsx(uP.Provider,{scope:e,children:d.jsx(emt,{scope:t.__scopeSelect,onNativeOptionAdd:A.useCallback(L=>{T(z=>new Set(z).add(L))},[]),onNativeOptionRemove:A.useCallback(L=>{T(z=>{const G=new Set(z);return G.delete(L),G})},[]),children:n})}),V?d.jsxs(F0e,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:h,value:j,onChange:L=>$(L.target.value),disabled:m,form:x,children:[j===void 0?d.jsx("option",{value:""}):null,Array.from(U)]},_):null]})})};g0e.displayName=Lm;var y0e="SelectTrigger",x0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=fP(n),o=Ph(y0e,n),a=o.disabled||r,l=Nr(e,o.onTriggerChange),c=dP(n),u=A.useRef("touch"),[h,m,g]=z0e(v=>{const b=c().filter(C=>!C.disabled),w=b.find(C=>C.value===o.value),k=H0e(b,v,w);k!==void 0&&o.onValueChange(k.value)}),x=v=>{a||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return d.jsx(uoe,{asChild:!0,...s,children:d.jsx(Mn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":$0e(o.value)?"":void 0,...i,ref:l,onClick:pn(i.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&x(v)}),onPointerDown:pn(i.onPointerDown,v=>{u.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:pn(i.onKeyDown,v=>{const b=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(b&&v.key===" ")&&Jpt.includes(v.key)&&(x(),v.preventDefault())})})})});x0e.displayName=y0e;var v0e="SelectValue",b0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=Ph(v0e,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,h=Nr(e,l.onValueNodeChange);return js(()=>{c(u)},[c,u]),d.jsx(Mn.span,{...a,ref:h,style:{pointerEvents:"none"},children:$0e(l.value)?d.jsx(d.Fragment,{children:o}):s})});b0e.displayName=v0e;var nmt="SelectIcon",w0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return d.jsx(Mn.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});w0e.displayName=nmt;var rmt="SelectPortal",E0e=t=>d.jsx(UC,{asChild:!0,...t});E0e.displayName=rmt;var Dm="SelectContent",S0e=A.forwardRef((t,e)=>{const n=Ph(Dm,t.__scopeSelect),[r,i]=A.useState();if(js(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?zm.createPortal(d.jsx(A0e,{scope:t.__scopeSelect,children:d.jsx(uP.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),s):null}return d.jsx(T0e,{...t,ref:e})});S0e.displayName=Dm;var pl=10,[A0e,_h]=Ev(Dm),imt="SelectContentImpl",smt=Hpt("SelectContent.RemoveScroll"),T0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:v,avoidCollisions:b,...w}=t,k=Ph(Dm,n),[C,R]=A.useState(null),[B,O]=A.useState(null),F=Nr(e,ae=>R(ae)),[H,j]=A.useState(null),[$,W]=A.useState(null),V=dP(n),[U,T]=A.useState(!1),_=A.useRef(!1);A.useEffect(()=>{if(C)return _pe(C)},[C]),Epe();const L=A.useCallback(ae=>{const[Te,...ue]=V().map(se=>se.ref.current),[pe]=ue.slice(-1),be=document.activeElement;for(const se of ae)if(se===be||(se==null||se.scrollIntoView({block:"nearest"}),se===Te&&B&&(B.scrollTop=0),se===pe&&B&&(B.scrollTop=B.scrollHeight),se==null||se.focus(),document.activeElement!==be))return},[V,B]),z=A.useCallback(()=>L([H,C]),[L,H,C]);A.useEffect(()=>{U&&z()},[U,z]);const{onOpenChange:G,triggerPointerDownPosRef:te}=k;A.useEffect(()=>{if(C){let ae={x:0,y:0};const Te=pe=>{var be,se;ae={x:Math.abs(Math.round(pe.pageX)-(((be=te.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(pe.pageY)-(((se=te.current)==null?void 0:se.y)??0))}},ue=pe=>{ae.x<=10&&ae.y<=10?pe.preventDefault():C.contains(pe.target)||G(!1),document.removeEventListener("pointermove",Te),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",ue,{capture:!0})}}},[C,G,te]),A.useEffect(()=>{const ae=()=>G(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[G]);const[K,q]=z0e(ae=>{const Te=V().filter(be=>!be.disabled),ue=Te.find(be=>be.ref.current===document.activeElement),pe=H0e(Te,ae,ue);pe&&setTimeout(()=>pe.ref.current.focus())}),M=A.useCallback((ae,Te,ue)=>{const pe=!_.current&&!ue;(k.value!==void 0&&k.value===Te||pe)&&(j(ae),pe&&(_.current=!0))},[k.value]),P=A.useCallback(()=>C==null?void 0:C.focus(),[C]),Y=A.useCallback((ae,Te,ue)=>{const pe=!_.current&&!ue;(k.value!==void 0&&k.value===Te||pe)&&W(ae)},[k.value]),X=r==="popper"?vD:k0e,re=X===vD?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:x,hideWhenDetached:v,avoidCollisions:b}:{};return d.jsx(A0e,{scope:n,content:C,viewport:B,onViewportChange:O,itemRefCallback:M,selectedItem:H,onItemLeave:P,itemTextRefCallback:Y,focusSelectedItem:z,selectedItemText:$,position:r,isPositioned:U,searchRef:K,children:d.jsx(JB,{as:smt,allowPinchZoom:!0,children:d.jsx(YB,{asChild:!0,trapped:k.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:pn(i,ae=>{var Te;(Te=k.trigger)==null||Te.focus({preventScroll:!0}),ae.preventDefault()}),children:d.jsx(OC,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:d.jsx(X,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:ae=>ae.preventDefault(),...w,...re,onPlaced:()=>T(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:pn(w.onKeyDown,ae=>{const Te=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!Te&&ae.key.length===1&&q(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let pe=V().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const be=ae.target,se=pe.indexOf(be);pe=pe.slice(se+1)}setTimeout(()=>L(pe)),ae.preventDefault()}})})})})})})});T0e.displayName=imt;var omt="SelectItemAlignedPosition",k0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Ph(Dm,n),o=_h(Dm,n),[a,l]=A.useState(null),[c,u]=A.useState(null),h=Nr(e,F=>u(F)),m=dP(n),g=A.useRef(!1),x=A.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:w,focusSelectedItem:k}=o,C=A.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&v&&b&&w){const F=s.trigger.getBoundingClientRect(),H=c.getBoundingClientRect(),j=s.valueNode.getBoundingClientRect(),$=w.getBoundingClientRect();if(s.dir!=="rtl"){const be=$.left-H.left,se=j.left-be,ve=F.left-se,Re=F.width+ve,De=Math.max(Re,H.width),Qe=window.innerWidth-pl,it=Eee(se,[pl,Math.max(pl,Qe-De)]);a.style.minWidth=Re+"px",a.style.left=it+"px"}else{const be=H.right-$.right,se=window.innerWidth-j.right-be,ve=window.innerWidth-F.right-se,Re=F.width+ve,De=Math.max(Re,H.width),Qe=window.innerWidth-pl,it=Eee(se,[pl,Math.max(pl,Qe-De)]);a.style.minWidth=Re+"px",a.style.right=it+"px"}const W=m(),V=window.innerHeight-pl*2,U=v.scrollHeight,T=window.getComputedStyle(c),_=parseInt(T.borderTopWidth,10),L=parseInt(T.paddingTop,10),z=parseInt(T.borderBottomWidth,10),G=parseInt(T.paddingBottom,10),te=_+L+U+G+z,K=Math.min(b.offsetHeight*5,te),q=window.getComputedStyle(v),M=parseInt(q.paddingTop,10),P=parseInt(q.paddingBottom,10),Y=F.top+F.height/2-pl,X=V-Y,re=b.offsetHeight/2,ae=b.offsetTop+re,Te=_+L+ae,ue=te-Te;if(Te<=Y){const be=W.length>0&&b===W[W.length-1].ref.current;a.style.bottom="0px";const se=c.clientHeight-v.offsetTop-v.offsetHeight,ve=Math.max(X,re+(be?P:0)+se+z),Re=Te+ve;a.style.height=Re+"px"}else{const be=W.length>0&&b===W[0].ref.current;a.style.top="0px";const ve=Math.max(Y,_+v.offsetTop+(be?M:0)+re)+ue;a.style.height=ve+"px",v.scrollTop=Te-Y+v.offsetTop}a.style.margin=`${pl}px 0`,a.style.minHeight=K+"px",a.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,s.trigger,s.valueNode,a,c,v,b,w,s.dir,r]);js(()=>C(),[C]);const[R,B]=A.useState();js(()=>{c&&B(window.getComputedStyle(c).zIndex)},[c]);const O=A.useCallback(F=>{F&&x.current===!0&&(C(),k==null||k(),x.current=!1)},[C,k]);return d.jsx(lmt,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:d.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:d.jsx(Mn.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});k0e.displayName=omt;var amt="SelectPopperPosition",vD=A.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=pl,...s}=t,o=fP(n);return d.jsx(doe,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vD.displayName=amt;var[lmt,v7]=Ev(Dm,{}),bD="SelectViewport",C0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=_h(bD,n),o=v7(bD,n),a=Nr(e,s.onViewportChange),l=A.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(uP.Slot,{scope:n,children:d.jsx(Mn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:pn(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(l.current-u.scrollTop);if(g>0){const x=window.innerHeight-pl*2,v=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),w=Math.max(v,b);if(w<x){const k=w+g,C=Math.min(x,k),R=k-C;h.style.height=C+"px",h.style.bottom==="0px"&&(u.scrollTop=R>0?R:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});C0e.displayName=bD;var N0e="SelectGroup",[cmt,umt]=Ev(N0e),dmt=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=nh();return d.jsx(cmt,{scope:n,id:i,children:d.jsx(Mn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});dmt.displayName=N0e;var P0e="SelectLabel",_0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=umt(P0e,n);return d.jsx(Mn.div,{id:i.id,...r,ref:e})});_0e.displayName=P0e;var Y2="SelectItem",[fmt,I0e]=Ev(Y2),R0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Ph(Y2,n),l=_h(Y2,n),c=a.value===r,[u,h]=A.useState(s??""),[m,g]=A.useState(!1),x=Nr(e,k=>{var C;return(C=l.itemRefCallback)==null?void 0:C.call(l,k,r,i)}),v=nh(),b=A.useRef("touch"),w=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(fmt,{scope:n,value:r,disabled:i,textId:v,isSelected:c,onItemTextChange:A.useCallback(k=>{h(C=>C||((k==null?void 0:k.textContent)??"").trim())},[]),children:d.jsx(uP.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:d.jsx(Mn.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:pn(o.onFocus,()=>g(!0)),onBlur:pn(o.onBlur,()=>g(!1)),onClick:pn(o.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:pn(o.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:pn(o.onPointerDown,k=>{b.current=k.pointerType}),onPointerMove:pn(o.onPointerMove,k=>{var C;b.current=k.pointerType,i?(C=l.onItemLeave)==null||C.call(l):b.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pn(o.onPointerLeave,k=>{var C;k.currentTarget===document.activeElement&&((C=l.onItemLeave)==null||C.call(l))}),onKeyDown:pn(o.onKeyDown,k=>{var R;((R=l.searchRef)==null?void 0:R.current)!==""&&k.key===" "||(Xpt.includes(k.key)&&w(),k.key===" "&&k.preventDefault())})})})})});R0e.displayName=Y2;var ew="SelectItemText",O0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Ph(ew,n),a=_h(ew,n),l=I0e(ew,n),c=tmt(ew,n),[u,h]=A.useState(null),m=Nr(e,w=>h(w),l.onItemTextChange,w=>{var k;return(k=a.itemTextRefCallback)==null?void 0:k.call(a,w,l.value,l.disabled)}),g=u==null?void 0:u.textContent,x=A.useMemo(()=>d.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=c;return js(()=>(v(x),()=>b(x)),[v,b,x]),d.jsxs(d.Fragment,{children:[d.jsx(Mn.span,{id:l.textId,...s,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zm.createPortal(s.children,o.valueNode):null]})});O0e.displayName=ew;var M0e="SelectItemIndicator",L0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return I0e(M0e,n).isSelected?d.jsx(Mn.span,{"aria-hidden":!0,...r,ref:e}):null});L0e.displayName=M0e;var wD="SelectScrollUpButton",D0e=A.forwardRef((t,e)=>{const n=_h(wD,t.__scopeSelect),r=v7(wD,t.__scopeSelect),[i,s]=A.useState(!1),o=Nr(e,r.onScrollButtonChange);return js(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?d.jsx(B0e,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});D0e.displayName=wD;var ED="SelectScrollDownButton",j0e=A.forwardRef((t,e)=>{const n=_h(ED,t.__scopeSelect),r=v7(ED,t.__scopeSelect),[i,s]=A.useState(!1),o=Nr(e,r.onScrollButtonChange);return js(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?d.jsx(B0e,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});j0e.displayName=ED;var B0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=_h("SelectScrollButton",n),o=A.useRef(null),a=dP(n),l=A.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return A.useEffect(()=>()=>l(),[l]),js(()=>{var u;const c=a().find(h=>h.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),d.jsx(Mn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:pn(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pn(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pn(i.onPointerLeave,()=>{l()})})}),hmt="SelectSeparator",U0e=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d.jsx(Mn.div,{"aria-hidden":!0,...r,ref:e})});U0e.displayName=hmt;var SD="SelectArrow",pmt=A.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=fP(n),s=Ph(SD,n),o=_h(SD,n);return s.open&&o.position==="popper"?d.jsx(foe,{...i,...r,ref:e}):null});pmt.displayName=SD;var mmt="SelectBubbleInput",F0e=A.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=A.useRef(null),s=Nr(r,i),o=Ypt(e);return A.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const h=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(h)}},[o,e]),d.jsx(Mn.select,{...n,style:{...hoe,...n.style},ref:s,defaultValue:e})});F0e.displayName=mmt;function $0e(t){return t===""||t===void 0}function z0e(t){const e=dh(t),n=A.useRef(""),r=A.useRef(0),i=A.useCallback(o=>{const a=n.current+o;e(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[e]),s=A.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function H0e(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=gmt(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function gmt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var ymt=g0e,V0e=x0e,xmt=b0e,vmt=w0e,bmt=E0e,q0e=S0e,wmt=C0e,G0e=_0e,K0e=R0e,Emt=O0e,Smt=L0e,W0e=D0e,Y0e=j0e,J0e=U0e;const See=ymt,Aee=xmt,AD=A.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(V0e,{ref:r,className:qt("flex h-10 w-full items-center justify-between whitespace-nowrap rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white ring-offset-background placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,d.jsx(vmt,{asChild:!0,children:d.jsx(aa,{className:"h-4 w-4 opacity-50"})})]}));AD.displayName=V0e.displayName;const X0e=A.forwardRef(({className:t,...e},n)=>d.jsx(W0e,{ref:n,className:qt("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(lh,{className:"h-4 w-4"})}));X0e.displayName=W0e.displayName;const Q0e=A.forwardRef(({className:t,...e},n)=>d.jsx(Y0e,{ref:n,className:qt("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(aa,{className:"h-4 w-4"})}));Q0e.displayName=Y0e.displayName;const TD=A.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>d.jsx(bmt,{children:d.jsxs(q0e,{ref:i,className:qt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-700 bg-slate-800 text-slate-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[d.jsx(X0e,{}),d.jsx(wmt,{className:qt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(Q0e,{})]})}));TD.displayName=q0e.displayName;const Amt=A.forwardRef(({className:t,...e},n)=>d.jsx(G0e,{ref:n,className:qt("px-2 py-1.5 text-sm font-semibold text-slate-400",t),...e}));Amt.displayName=G0e.displayName;const kD=A.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(K0e,{ref:r,className:qt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-700 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(Smt,{children:d.jsx(sm,{className:"h-4 w-4"})})}),d.jsx(Emt,{children:e})]}));kD.displayName=K0e.displayName;const Tmt=A.forwardRef(({className:t,...e},n)=>d.jsx(J0e,{ref:n,className:qt("-mx-1 my-1 h-px bg-slate-700",t),...e}));Tmt.displayName=J0e.displayName;const kmt=({onConnect:t,onCancel:e})=>{var W;const[n,r]=A.useState("input"),[i,s]=A.useState(""),[o,a]=A.useState(""),[l,c]=A.useState(!1),[u,h]=A.useState(null),[m,g]=A.useState(null),[x,v]=A.useState(!1),[b,w]=A.useState(null),[k,C]=A.useState(null),R=A.useCallback(()=>{if(!i){w(null);return}const V=ss.validateUrl(i);w(V.valid?null:V.error||"Invalid URL")},[i]),B=A.useCallback(()=>{if(!o){C(null);return}const V=ss.validateAnonKey(o);C(V.valid?null:V.error||"Invalid key")},[o]),O=A.useCallback(async()=>{const V=ss.getSetupSQL();await navigator.clipboard.writeText(V),v(!0),setTimeout(()=>v(!1),2e3)},[]),F=A.useCallback(async()=>{h(null),r("connecting");const V=await ss.connect(i.trim(),o.trim());if(!V.success){h(V.error||"Connection failed"),r("error");return}r("validating");const U=await ss.validateSchema();if(g(U),!U.valid){r("schema-missing");return}r("success")},[i,o]),H=A.useCallback(async()=>{r("validating");const V=await ss.validateSchema();if(g(V),!V.valid){r("schema-missing");return}r("success")},[]),j=A.useCallback(()=>{t()},[t]),$=i.trim()&&o.trim()&&!b&&!k;return d.jsxs(Bt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-5 bg-[#0f1015] border border-[#232328] rounded-xl space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:d.jsx(fC,{className:"w-5 h-5 text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-base font-semibold text-white",children:"Connect Your Supabase"}),d.jsx("p",{className:"text-xs text-[#747580]",children:"Required for 24/7 execution"})]})]}),d.jsxs(Zs,{mode:"wait",children:[n==="input"&&d.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[d.jsxs("div",{className:"p-3 bg-blue-500/5 border border-blue-500/20 rounded-lg",children:[d.jsx("p",{className:"text-xs text-blue-200 mb-2 font-medium",children:"Quick Setup:"}),d.jsxs("ol",{className:"text-xs text-blue-200/80 space-y-1 list-decimal list-inside",children:[d.jsxs("li",{children:["Create free account at ",d.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"supabase.com"})]}),d.jsx("li",{children:"Create a new project (any name)"}),d.jsxs("li",{children:["Go to ",d.jsx("strong",{children:"Settings  API"})]}),d.jsx("li",{children:"Copy the values below"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Project URL"}),d.jsx("input",{type:"text",value:i,onChange:V=>s(V.target.value),onBlur:R,placeholder:"https://abc123.supabase.co",className:qt("w-full px-3 py-2 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",b?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),b&&d.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:b})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Anon Key (public)"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:l?"text":"password",value:o,onChange:V=>a(V.target.value),onBlur:B,placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",className:qt("w-full px-3 py-2 pr-9 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",k?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),d.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#747580] hover:text-white transition-colors",children:l?d.jsx(hC,{size:14}):d.jsx(y8,{size:14})})]}),k&&d.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:k})]}),d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("a",{href:"https://supabase.com/dashboard/project/_/settings/api",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-blue-400/70 hover:text-blue-400 transition-colors flex items-center gap-1",children:["Open Supabase API Settings ",d.jsx(mm,{size:10})]})}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),d.jsxs("button",{onClick:F,disabled:!$,className:qt("flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",$?"bg-blue-600 hover:bg-blue-500 text-white":"bg-[#232328] text-[#3a3b42] cursor-not-allowed"),children:["Connect ",d.jsx(Ul,{size:14})]})]})]},"input"),(n==="connecting"||n==="validating")&&d.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"py-8 flex flex-col items-center gap-4",children:[d.jsx(x8,{className:"w-8 h-8 text-blue-400 animate-spin"}),d.jsx("p",{className:"text-sm text-[#a0a1a8]",children:n==="connecting"?"Connecting to Supabase...":"Validating schema..."})]},"connecting"),n==="schema-missing"&&m&&d.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[d.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(to,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-amber-200",children:"Schema Setup Required"}),d.jsx("p",{className:"text-xs text-amber-200/70 mt-1",children:"Your Supabase project is connected, but missing required tables:"}),d.jsx("ul",{className:"mt-2 space-y-1",children:m.missingTables.map(V=>d.jsxs("li",{className:"text-xs text-amber-300 flex items-center gap-2",children:[d.jsx(Pw,{size:12}),d.jsx("code",{className:"bg-amber-500/10 px-1 rounded",children:V})]},V))})]})]})}),d.jsxs("div",{className:"p-4 bg-[#14151a] border border-[#232328] rounded-lg space-y-3",children:[d.jsx("p",{className:"text-xs text-[#a0a1a8]",children:"Copy this SQL and run it in your Supabase SQL Editor:"}),d.jsx("button",{onClick:O,className:"w-full px-4 py-3 bg-[#0f1015] border border-[#232328] rounded-lg hover:border-blue-500/30 transition-all flex items-center justify-center gap-2 text-sm",children:x?d.jsxs(d.Fragment,{children:[d.jsx(sm,{size:16,className:"text-green-400"}),d.jsx("span",{className:"text-green-400",children:"Copied!"})]}):d.jsxs(d.Fragment,{children:[d.jsx(om,{size:16,className:"text-[#747580]"}),d.jsx("span",{className:"text-white",children:"Copy SQL Schema"})]})}),d.jsxs("a",{href:"https://supabase.com/dashboard/project/_/sql/new",target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-2 bg-[#232328] rounded-lg hover:bg-[#2a2b30] transition-all flex items-center justify-center gap-2 text-sm text-white",children:["Open SQL Editor ",d.jsx(mm,{size:14})]})]}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),d.jsxs("button",{onClick:H,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:["I've Run the SQL ",d.jsx(Ul,{size:14})]})]})]},"schema-missing"),n==="error"&&d.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[d.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Pw,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-red-200",children:"Connection Failed"}),d.jsx("p",{className:"text-xs text-red-200/70 mt-1",children:u})]})]})}),d.jsxs("div",{className:"flex gap-3 pt-2",children:[d.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),d.jsx("button",{onClick:()=>r("input"),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Try Again"})]})]},"error"),n==="success"&&d.jsxs(Bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},className:"py-6 flex flex-col items-center gap-4",children:[d.jsx("div",{className:"p-3 rounded-full bg-green-500/10",children:d.jsx(m8,{className:"w-8 h-8 text-green-400"})}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-sm font-medium text-white",children:"Supabase Connected!"}),d.jsxs("p",{className:"text-xs text-[#747580] mt-1",children:["Project: ",(W=ss.getConfig())==null?void 0:W.projectId]})]}),d.jsx("button",{onClick:j,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Continue"})]},"success")]})]})},Cmt=({isOpen:t,onClose:e,onConnect:n})=>d.jsx(yv,{open:t,onOpenChange:r=>!r&&e(),children:d.jsxs(Wm,{className:"max-w-xl bg-[#13141A] border-gray-800 text-white p-0 overflow-hidden",children:[d.jsxs(Ym,{className:"sr-only",children:[d.jsx(Jm,{children:"Connect Supabase"}),d.jsx(Xm,{children:"Setup your Supabase connection for advanced features"})]}),d.jsx("div",{className:"p-1",children:d.jsx(kmt,{onConnect:n,onCancel:e})})]})}),Nmt=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=A.useState(""),[a,l]=A.useState(24),c=async()=>{s&&await n(s,a)};return d.jsx(yv,{open:t,onOpenChange:e,children:d.jsxs(Wm,{className:"max-w-md glass-panel rounded border-[#232328] text-white",children:[d.jsx(Ym,{children:d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2.5 rounded bg-amber-500/10",children:d.jsx(fs,{className:"w-5 h-5 text-amber-400"})}),d.jsxs("div",{children:[d.jsx(Jm,{className:"text-base font-bold tracking-wide",children:"Setup Session Keys"}),d.jsx(Xm,{className:"text-[11px] text-[#747580] mt-0.5",children:"Configure temporary keys for 24/7 execution"})]})]})}),d.jsxs("div",{className:"space-y-5 py-3",children:[d.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded",children:[d.jsx("h4",{className:"text-[11px] font-bold text-amber-300 mb-2 uppercase tracking-wide",children:"How it works"}),d.jsxs("ul",{className:"text-[10px] text-amber-200/70 space-y-1 list-disc list-inside leading-relaxed",children:[d.jsx("li",{children:"Keys are decrypted and stored in server memory"}),d.jsx("li",{children:"Bot runs 24/7 within the session duration"}),d.jsx("li",{children:"Keys are automatically wiped when session expires"}),d.jsx("li",{children:"More secure than persistent storage"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Session Duration (Hours)"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"number",value:a,onChange:u=>l(Math.max(1,Math.min(72,parseInt(u.target.value)||24))),min:1,max:72,className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm font-mono text-white placeholder:text-[#747580] focus:outline-none focus:border-amber-500/50 transition-colors"}),d.jsx(fs,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]}),d.jsx("p",{className:"text-[9px] text-[#747580] mt-1.5",children:"Maximum 72 hours."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Wallet Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"password",value:s,onChange:u=>o(u.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm text-white placeholder:text-[#747580] focus:outline-none focus:border-amber-500/50 transition-colors"}),d.jsx(ch,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]}),d.jsx("p",{className:"text-[9px] text-[#747580] mt-1.5",children:"Required to decrypt your private key for this session."})]})]}),i&&d.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded text-[10px] text-red-300",children:i})]}),d.jsxs(xv,{className:"gap-2",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 bg-[#1a1b21] hover:bg-[#232328] text-[#a0a1a8] rounded text-[11px] font-semibold uppercase tracking-wide transition-colors",children:"Cancel"}),d.jsx("button",{onClick:c,disabled:!s||r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-[#1a1b21] disabled:text-[#747580] text-white rounded text-[11px] font-semibold uppercase tracking-wide transition-colors flex items-center gap-2",children:r?d.jsxs(d.Fragment,{children:[d.jsx(x8,{className:"w-3.5 h-3.5 animate-spin"}),"Starting..."]}):"Start Session"})]})]})})},Pmt=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=A.useState(""),[a,l]=A.useState(!1),c=async()=>{!s||!a||await n(s)};return d.jsx(yv,{open:t,onOpenChange:e,children:d.jsxs(Wm,{className:"max-w-md glass-panel rounded border-[#232328] text-white",children:[d.jsx(Ym,{children:d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("div",{className:"p-2.5 rounded bg-red-500/10",children:d.jsx(To,{className:"w-5 h-5 text-red-500"})}),d.jsxs("div",{children:[d.jsx(Jm,{className:"text-base font-bold tracking-wide",children:"Setup Persistent Keys"}),d.jsx(Xm,{className:"text-[11px] text-[#747580] mt-0.5",children:"Store encrypted keys for permanent 24/7 execution"})]})]})}),d.jsxs("div",{className:"space-y-5 py-3",children:[d.jsx("div",{className:"p-3 bg-red-500/5 border border-red-500/20 rounded",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(wke,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-[11px] font-bold text-red-300 mb-1 uppercase tracking-wide",children:"Security Warning"}),d.jsx("p",{className:"text-[10px] text-red-200/70 leading-relaxed",children:"This option stores your encrypted private keys and password on the server database. While we use encryption, this is less secure than local or session-based storage. If the server is compromised, your keys could be at risk."})]})]})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Wallet Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"password",value:s,onChange:u=>o(u.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm text-white placeholder:text-[#747580] focus:outline-none focus:border-red-500/50 transition-colors"}),d.jsx(ch,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]})]}),d.jsxs("div",{className:"flex items-start gap-3 p-3 bg-[#0f1015] rounded border border-[#232328] hover:border-[#747580] transition-colors cursor-pointer",onClick:()=>l(!a),children:[d.jsx("div",{className:"flex items-center h-5",children:d.jsx("input",{type:"checkbox",checked:a,onChange:u=>l(u.target.checked),className:"w-4 h-4 rounded border-[#232328] text-red-500 focus:ring-red-500 bg-[#0f1015]"})}),d.jsxs("div",{className:"text-[10px] text-[#747580] select-none leading-relaxed",children:[d.jsx("span",{className:"font-bold text-[#a0a1a8]",children:"I understand the risks."}),d.jsx("span",{className:"block mt-0.5",children:"I accept full responsibility for storing my keys on the server."})]})]})]}),i&&d.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded text-[10px] text-red-300",children:i})]}),d.jsxs(xv,{className:"gap-2",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 bg-[#1a1b21] hover:bg-[#232328] text-[#a0a1a8] rounded text-[11px] font-semibold uppercase tracking-wide transition-colors",children:"Cancel"}),d.jsx("button",{onClick:c,disabled:!s||!a||r,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-[#1a1b21] disabled:text-[#747580] text-white rounded text-[11px] font-semibold uppercase tracking-wide transition-colors flex items-center gap-2",children:r?d.jsxs(d.Fragment,{children:[d.jsx(x8,{className:"w-3.5 h-3.5 animate-spin"}),"Enabling..."]}):"Enable Persistent Keys"})]})]})})},_mt=({onTierChange:t})=>{var H;const e=A.useSyncExternalStore(Tf.subscribe.bind(Tf),()=>Tf.getState()),[n,r]=A.useState(e.currentTier),[i,s]=A.useState(!1),[o,a]=A.useState(null),[l,c]=A.useState(!1),[u,h]=A.useState(ss.isConnected()),[m,g]=A.useState(!1),[x,v]=A.useState(!1),b=Tf.getSessionStatus();A.useEffect(()=>{r(e.currentTier)},[e.currentTier]),A.useEffect(()=>{const j=ss.subscribe($=>{h($)});return()=>j()},[]);const w=async j=>{if(j===e.currentTier){r(j);return}if((j==="session"||j==="persistent")&&!u){r(j),c(!0);return}r(j),a(null),j==="local"?await C():j==="session"?g(!0):j==="persistent"&&v(!0)},k=()=>{c(!1),h(!0),n==="session"?g(!0):n==="persistent"&&v(!0)},C=async()=>{s(!0);try{const j=await Tf.migrateToLocal();if(!j.success)throw new Error(j.error||"Migration failed");t==null||t("local")}catch(j){a(j instanceof Error?j.message:"Unknown error"),r(e.currentTier)}finally{s(!1)}},R=async(j,$)=>{s(!0);try{const W=await ke.getItem(ke.getUserKey("agent_hl_vault_enc")),V=await ke.getItem(ke.getUserKey("agent_hl_vault_salt"));if(!W||!V)throw new Error("No encrypted key found. Please set up your wallet first.");const U=await Tf.migrateToSession(W,V,j,$);if(!U.success)throw new Error(U.error||"Migration failed");g(!1),t==null||t("session")}catch(W){a(W instanceof Error?W.message:"Unknown error")}finally{s(!1)}},B=async j=>{s(!0);try{const $=await ke.getItem(ke.getUserKey("agent_hl_vault_enc")),W=await ke.getItem(ke.getUserKey("agent_hl_vault_salt"));if(!$||!W)throw new Error("No encrypted key found. Please set up your wallet first.");const V=await Tf.migrateToPersistent($,W,j);if(!V.success)throw new Error(V.error||"Migration failed");v(!1),t==null||t("persistent")}catch($){a($ instanceof Error?$.message:"Unknown error")}finally{s(!1)}},O=j=>{switch(j){case"local":return d.jsx(uh,{className:"w-6 h-6"});case"session":return d.jsx(fs,{className:"w-6 h-6"});case"persistent":return d.jsx(To,{className:"w-6 h-6"})}},F=(j,$,W)=>W?"border-emerald-500/50 bg-emerald-500/5":$?"border-blue-500 bg-blue-500/5":"border-gray-800 hover:border-gray-700 bg-gray-900/40";return d.jsxs("div",{className:"space-y-6",children:[e.currentTier==="session"&&b.active&&d.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg animate-in fade-in slide-in-from-top-1",children:[d.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-full animate-pulse",children:d.jsx(fs,{className:"w-3.5 h-3.5 text-amber-400"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"text-sm font-medium text-amber-200",children:"Session Active"}),d.jsxs("span",{className:"text-xs text-amber-200/70 block",children:[b.remainingHours,"h remaining"]})]})]}),d.jsx("div",{className:"grid gap-3",children:Object.keys(sD).map(j=>{const $=sD[j],W=e.currentTier===j,V=n===j;return d.jsxs("button",{onClick:()=>w(j),className:`
                                group relative p-4 rounded-xl border transition-all duration-300 text-left w-full
                                ${F(j,V,W)}
                            `,children:[W&&d.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 backdrop-blur-sm",children:[d.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),d.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-wider",children:"Active"})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:`
                                    p-3 rounded-xl transition-colors
                                    ${j==="local"?"bg-emerald-500/10 text-emerald-400 group-hover:bg-emerald-500/20":j==="session"?"bg-amber-500/10 text-amber-400 group-hover:bg-amber-500/20":"bg-red-500/10 text-red-400 group-hover:bg-red-500/20"}
                                `,children:O(j)}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"flex items-center gap-2 mb-1",children:d.jsx("h4",{className:`font-semibold text-sm ${W?"text-white":"text-gray-200 group-hover:text-white"}`,children:$.label})}),d.jsx("p",{className:"text-xs text-gray-500 leading-relaxed mb-3 pr-8",children:$.description}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${$.execution24x7?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":"bg-gray-800 border-gray-700 text-gray-400"}
                                        `,children:$.execution24x7?"24/7 Cloud Run":"Browser Only"}),d.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${$.securityLevel===3?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":$.securityLevel===2?"bg-amber-500/5 border-amber-500/20 text-amber-400":"bg-red-500/5 border-red-500/20 text-red-400"}
                                        `,children:$.securityLevel===3?"High Security":$.securityLevel===2?"Medium Security":"Low Security"})]})]})]})]},j)})}),(n==="session"||n==="persistent"||u)&&d.jsx("div",{className:"pt-2",children:d.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${u?"bg-emerald-900/10 border-emerald-500/20":"bg-blue-900/10 border-blue-500/20"}`,children:[d.jsx("div",{className:`p-1.5 rounded-md ${u?"bg-emerald-500/20":"bg-blue-500/20"}`,children:d.jsx(fC,{className:`w-3.5 h-3.5 ${u?"text-emerald-400":"text-blue-400"}`})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`text-xs font-medium ${u?"text-emerald-200":"text-blue-200"}`,children:u?"Supabase Connected":"Supabase Connection Required"}),d.jsx("p",{className:`text-[10px] truncate ${u?"text-emerald-200/60":"text-blue-200/60"}`,children:u?`Project: ${(H=ss.getConfig())==null?void 0:H.projectId}`:"Required for cloud execution modes"})]}),u&&d.jsx("button",{onClick:()=>c(!0),className:"text-[10px] font-medium text-emerald-400 hover:text-emerald-300 transition-colors px-2 py-1 bg-emerald-500/10 rounded hover:bg-emerald-500/20",children:"Edit"})]})}),o&&d.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg animate-in fade-in slide-in-from-top-1",children:d.jsx("p",{className:"text-xs text-red-300 font-medium",children:o})}),d.jsx(Cmt,{isOpen:l,onClose:()=>{c(!1),n!==e.currentTier&&r(e.currentTier)},onConnect:k}),d.jsx(Nmt,{isOpen:m,onClose:()=>g(!1),onConfirm:R,isLoading:i,error:o}),d.jsx(Pmt,{isOpen:x,onClose:()=>v(!1),onConfirm:B,isLoading:i,error:o})]})},Imt=({addNotification:t,password:e})=>{var L,z,G,te;const{user:n,logout:r,deleteAccount:i}=L1(),[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(""),[h,m]=A.useState(!1),[g,x]=A.useState(null),[v,b]=A.useState(!1),[w,k]=A.useState(!1),[C,R]=A.useState(""),B=A.useRef(null),[O,F]=A.useState(!1),[H,j]=A.useState(""),$=async K=>{var q,M,P,Y,X,re,ae,Te,ue,pe,be,se,ve,Re,De,Qe,it,et,tt,mt,dt,Wt,qe,Tt,ln,Ie,Ve,gt,ut,oe,J,Z,de,Ae,fe,ge,Ye,Je,ot,Ft;if(!(n!=null&&n.uid)){t("No user session found");return}b(!0);try{const Et=ke.getUserKey("agent_activity_log"),Mt=ke.getUserKey("vault_dealer_strategy"),cn=ke.getUserKey("agent_scheduler_tasks"),[en,rn,Ni]=await Promise.all([ke.getItem(Et),ke.getItem(Mt),ke.getItem(cn)]);let zn=[];if(K){const st=await Jo.getHistory();for(const mn of st)try{const bt=await Jo.loadConversation(mn.id,K);bt&&zn.push(bt)}catch(bt){console.warn(`Failed to decrypt conversation ${mn.id}`,bt)}}const le=await ke.getItem(ke.getUserKey("vault_dealer_storage"));let Q=null;if(le)try{const st=JSON.parse(le);Q={strategyPrompt:(q=st.settings)==null?void 0:q.strategyPrompt,aggressiveMode:(M=st.settings)==null?void 0:M.aggressiveMode,maxLeverage:(P=st.settings)==null?void 0:P.maxLeverage,maxPositionSizeUSDC:(Y=st.settings)==null?void 0:Y.maxPositionSizeUSDC,maxOpenPositions:(X=st.settings)==null?void 0:X.maxOpenPositions,bankrollType:(re=st.settings)==null?void 0:re.bankrollType,manualBankroll:(ae=st.settings)==null?void 0:ae.manualBankroll,tradingPairs:(Te=st.settings)==null?void 0:Te.tradingPairs,checkIntervalSeconds:(ue=st.settings)==null?void 0:ue.checkIntervalSeconds,analysisTimeframe:(pe=st.settings)==null?void 0:pe.analysisTimeframe,historyCandles:(be=st.settings)==null?void 0:be.historyCandles,macroTimeframeEnabled:(se=st.settings)==null?void 0:se.macroTimeframeEnabled,macroTimeframe:(ve=st.settings)==null?void 0:ve.macroTimeframe,macroEnabledIndicators:(Re=st.settings)==null?void 0:Re.macroEnabledIndicators,indicatorSettings:(De=st.settings)==null?void 0:De.indicatorSettings,autonomousIndicators:(Qe=st.settings)==null?void 0:Qe.autonomousIndicators,selectedPreset:(it=st.settings)==null?void 0:it.selectedPreset,promptMode:(et=st.settings)==null?void 0:et.promptMode,stopLossEnabled:(tt=st.settings)==null?void 0:tt.stopLossEnabled,stopLossPercent:(mt=st.settings)==null?void 0:mt.stopLossPercent,takeProfitEnabled:(dt=st.settings)==null?void 0:dt.takeProfitEnabled,takeProfitPercent:(Wt=st.settings)==null?void 0:Wt.takeProfitPercent}}catch(st){console.error("Failed to parse dealer settings",st)}const ee=await ke.getItem(ke.getUserKey("vault_polymarket_storage"));let he=null,Pe;if(ee)try{const st=JSON.parse(ee);he={strategyPrompt:(qe=st.settings)==null?void 0:qe.strategyPrompt,promptMode:(Tt=st.settings)==null?void 0:Tt.promptMode,selectedPreset:(ln=st.settings)==null?void 0:ln.selectedPreset,marketSelectionMode:(Ie=st.settings)==null?void 0:Ie.marketSelectionMode,selectedMarkets:(Ve=st.settings)==null?void 0:Ve.selectedMarkets,allowedCategories:(gt=st.settings)==null?void 0:gt.allowedCategories,maxPositionSizeUSDC:(ut=st.settings)==null?void 0:ut.maxPositionSizeUSDC,maxOpenPositions:(oe=st.settings)==null?void 0:oe.maxOpenPositions,minLiquidity:(J=st.settings)==null?void 0:J.minLiquidity,minVolume24h:(Z=st.settings)==null?void 0:Z.minVolume24h,minVolumeThreshold:(de=st.settings)==null?void 0:de.minVolumeThreshold,minLiquidityThreshold:(Ae=st.settings)==null?void 0:Ae.minLiquidityThreshold,minSpreadThreshold:(fe=st.settings)==null?void 0:fe.minSpreadThreshold,confidenceThreshold:(ge=st.settings)==null?void 0:ge.confidenceThreshold,bankrollType:(Ye=st.settings)==null?void 0:Ye.bankrollType,manualBankroll:(Je=st.settings)==null?void 0:Je.manualBankroll,checkIntervalSeconds:(ot=st.settings)==null?void 0:ot.checkIntervalSeconds},Pe=(Ft=st.settings)==null?void 0:Ft.strategyPrompt}catch(st){console.error("Failed to parse polymarket settings",st)}const Oe={version:"1.0",exportedAt:new Date().toISOString(),data:{activityLog:en?JSON.parse(en):[],conversations:zn.length>0?zn:void 0,hyperliquidDealer:{settings:Q,strategyPrompt:rn||void 0},polymarketDealer:{settings:he,strategyPrompt:Pe},schedulerTasks:Ni?JSON.parse(Ni):[]}},ze=new Blob([JSON.stringify(Oe,null,2)],{type:"application/json"}),Xt=URL.createObjectURL(ze),$t=document.createElement("a");$t.href=Xt,$t.download=`autonomousvault_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild($t),$t.click(),document.body.removeChild($t),URL.revokeObjectURL(Xt),t("Backup exported successfully!"),F(!1),j("")}catch(Et){console.error("Export failed:",Et),t("Failed to export data")}finally{b(!1)}},W=()=>{j(""),F(!0)},V=()=>{if(!H){t("Please enter your password");return}if(H!==e){t("Incorrect password");return}$(H)},U=K=>{var P;const q=(P=K.target.files)==null?void 0:P[0];if(!q)return;const M=new FileReader;M.onload=Y=>{var X;try{const re=(X=Y.target)==null?void 0:X.result,ae=JSON.parse(re);if(!ae.version||!ae.data){t("Invalid backup file format");return}x(ae),m(!0)}catch(re){console.error("Failed to parse backup file:",re),t("Failed to read backup file")}},M.readAsText(q),B.current&&(B.current.value="")},T=async()=>{var K,q,M,P,Y,X,re;if(!(!g||!(n!=null&&n.uid))){k(!0);try{const{data:ae}=g;if((K=ae.activityLog)!=null&&K.length){const ue=ke.getUserKey("agent_activity_log");await ke.setItem(ue,JSON.stringify(ae.activityLog))}if((q=ae.schedulerTasks)!=null&&q.length){const ue=ke.getUserKey("agent_scheduler_tasks");await ke.setItem(ue,JSON.stringify(ae.schedulerTasks))}if((M=ae.hyperliquidDealer)!=null&&M.strategyPrompt){const ue=ke.getUserKey("vault_dealer_strategy");await ke.setItem(ue,ae.hyperliquidDealer.strategyPrompt)}const Te=e||C;if((P=ae.conversations)!=null&&P.length){if(!Te){t("ERROR: Password required to import conversations"),k(!1);return}console.log(`[Import] Restoring ${ae.conversations.length} conversations using provided password...`);for(const ue of ae.conversations)try{await Jo.saveConversation(ue,Te)}catch(pe){console.warn(`Failed to restore conversation ${ue.id}`,pe)}}if((Y=ae.hyperliquidDealer)!=null&&Y.settings){const ue=await ke.getItem(ke.getUserKey("vault_dealer_storage"));try{const pe=ue?JSON.parse(ue):{settings:{}};pe.settings={...pe.settings,...ae.hyperliquidDealer.settings},await ke.setItem(ke.getUserKey("vault_dealer_storage"),JSON.stringify(pe))}catch(pe){console.error("Failed to merge dealer settings",pe)}}if((X=ae.polymarketDealer)!=null&&X.settings||(re=ae.polymarketDealer)!=null&&re.strategyPrompt){console.log("[Import] Restoring Polymarket settings:",ae.polymarketDealer);const ue=await ke.getItem(ke.getUserKey("vault_polymarket_storage"));try{const pe=ue?JSON.parse(ue):{settings:{}};ae.polymarketDealer.settings&&(pe.settings={...pe.settings,...ae.polymarketDealer.settings}),ae.polymarketDealer.strategyPrompt&&(pe.settings={...pe.settings,strategyPrompt:ae.polymarketDealer.strategyPrompt}),console.log("[Import] Saving Polymarket settings:",pe.settings),await ke.setItem(ke.getUserKey("vault_polymarket_storage"),JSON.stringify(pe))}catch(pe){console.error("Failed to merge polymarket settings",pe)}}else console.log("[Import] No Polymarket settings to restore");console.log("[Import] Reloading stores from storage..."),await pt.reloadFromStorage(),await lt.reloadFromStorage(),t("Data restored successfully!"),m(!1),x(null)}catch(ae){console.error("Import failed:",ae),t("Failed to import data")}finally{k(!1)}}},_=async()=>{if(!(!n||c!=="DELETE")){l(!0);try{pt.reset(),lt.reset(),await i(),t("Account deleted successfully")}catch(K){console.error("Delete account failed:",K),t(K.message||"Failed to delete account"),l(!1)}}};return d.jsxs(Bt.div,{className:"flex flex-col gap-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[d.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-blue-500/10 rounded",children:d.jsx(uh,{className:"h-4 w-4 text-blue-400"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Security & Execution"}),d.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5 font-light",children:"Choose how your bot runs and stores keys"})]})]}),d.jsx("div",{className:"p-6",children:d.jsx(_mt,{onTierChange:K=>t(`Security tier changed to ${K}`)})})]}),d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:d.jsx(fC,{className:"h-4 w-4 text-white"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Data Backup"}),d.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:"Export your settings to move to another device"})]})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("p",{className:"text-xs text-gray-500 mb-5 font-light leading-relaxed",children:["Export your full configuration history, conversations, and strategies to a JSON file.",d.jsx("br",{}),d.jsx("span",{className:"text-amber-500/80 font-medium",children:" Note: Private keys and sensitive API tokens are never included in exports."})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsxs("button",{onClick:W,disabled:v,className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[d.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10 text-emerald-500 group-hover:text-emerald-400 transition-colors",children:d.jsx(Vs,{size:18})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:v?"Exporting...":"Export Data"}),d.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Download settings backup file"})]})]}),d.jsxs("button",{onClick:()=>{var K;return(K=B.current)==null?void 0:K.click()},className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[d.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 group-hover:text-blue-400 transition-colors",children:d.jsx(tk,{size:18})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:"Import Data"}),d.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Restore from backup JSON"})]})]}),d.jsx("input",{ref:B,type:"file",accept:".json",onChange:U,className:"hidden"})]})]})]}),d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-red-900/40 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-red-500/10 rounded",children:d.jsx(to,{className:"h-4 w-4 text-red-500"})}),d.jsx("div",{className:"flex-1",children:d.jsx("h2",{className:"text-sm font-bold text-red-500 tracking-wide",children:"Danger Zone"})})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-sm font-medium text-red-300 mb-1",children:"Delete Account"}),d.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["Permanently remove your account and all associated data. This involves clearing your local storage, dealer settings, and cloud database records. ",d.jsx("strong",{className:"text-red-400/80",children:"This action cannot be undone."})]})]}),d.jsx("button",{onClick:()=>o(!0),className:"px-5 py-2.5 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-xs font-semibold hover:bg-red-500 hover:text-white hover:border-red-500 transition-all whitespace-nowrap",children:"Delete Account"})]})]})]}),s&&d.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsx(Bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[d.jsx("div",{className:"p-3 rounded-full bg-red-500/10",children:d.jsx(to,{size:24,className:"text-red-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Delete Account"}),d.jsx("p",{className:"text-xs text-gray-500",children:"This action is irreversible"})]})]}),d.jsxs("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:["All your data will be permanently deleted.",d.jsx("br",{}),"To confirm, type ",d.jsx("strong",{className:"text-white",children:"DELETE"})," below:"]}),d.jsx("input",{type:"text",value:c,onChange:K=>u(K.target.value),placeholder:"Type DELETE to confirm",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-red-500/50 focus:ring-1 focus:ring-red-500/20 transition-all mb-5 text-sm"}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>{o(!1),u("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:_,disabled:c!=="DELETE"||a,className:qt("flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all",c==="DELETE"?"bg-red-500 text-white hover:bg-red-600":"bg-red-500/20 text-red-500/40 cursor-not-allowed"),children:a?"Deleting...":"Delete Account"})]})]})})}),h&&g&&d.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsx(Bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[d.jsx("div",{className:"p-3 rounded-full bg-blue-500/10",children:d.jsx(tk,{size:24,className:"text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Import Backup"}),d.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(g.exportedAt).toLocaleDateString()]})]})]}),d.jsxs("div",{className:"border border-gray-800 rounded-lg p-4 mb-5 space-y-2",children:[d.jsx("p",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-2",children:"Data to restore:"}),(L=g.data.activityLog)!=null&&L.length?d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[d.jsx(sm,{size:12,className:"text-emerald-500"}),d.jsxs("span",{children:["Activity Log (",g.data.activityLog.length," items)"]})]}):null,(z=g.data.conversations)!=null&&z.length?d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[d.jsx(sm,{size:12,className:"text-emerald-500"}),d.jsxs("span",{children:["Conversations (",g.data.conversations.length," chats)"]})]}):null,(G=g.data.hyperliquidDealer)!=null&&G.settings?d.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[d.jsx(sm,{size:12,className:"text-emerald-500"}),d.jsx("span",{children:"Hyperliquid Dealer Settings"})]}):null,d.jsxs("div",{className:"text-[10px] text-gray-600 pl-5",children:["...and ",Object.keys(g.data).length-2," other data points"]})]}),(te=g.data.conversations)!=null&&te.length?d.jsxs("div",{className:"mb-5",children:[d.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Encryption password required:"}),d.jsx("input",{type:"password",value:C,onChange:K=>R(K.target.value),placeholder:"Enter encryption password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-blue-500/50 transition-all text-sm"}),!C&&!e&&d.jsxs("p",{className:"text-[10px] text-amber-500 mt-1.5 flex items-center gap-1",children:[d.jsx(to,{size:10})," Password required to decrypt conversations"]})]}):null,d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>{m(!1),x(null),R("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:T,disabled:w,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors disabled:opacity-50",children:w?"Importing...":"Restore Data"})]})]})})}),O&&d.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsx(Bt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[d.jsx("div",{className:"p-3 rounded-full bg-emerald-500/10",children:d.jsx(Vs,{size:24,className:"text-emerald-400"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Confirm Export"}),d.jsx("p",{className:"text-xs text-gray-500",children:"Security check required"})]})]}),d.jsx("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:"Please enter your Vault password to authorize the export. This ensures only you can download your data."}),d.jsx("div",{className:"mb-5",children:d.jsx("input",{type:"password",value:H,onChange:K=>j(K.target.value),placeholder:"Enter Vault password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-emerald-500/50 transition-all text-sm",onKeyDown:K=>{K.key==="Enter"&&V()}})}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>{F(!1),j("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:V,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors",children:"Export"})]})]})})})]})},W4={operator:{name:"Chat Operator",shortName:"Operator",icon:d.jsx(cke,{size:16}),description:"Chat assistant",color:"#9b87f5"},hyperliquidDealer:{name:"Hyperliquid Dealer",shortName:"Hyperliquid",icon:d.jsx(_n,{size:16}),description:"Perp trading",color:"#E7FE55"},polymarketDealer:{name:"Polymarket Dealer",shortName:"Polymarket",icon:d.jsx(Jg,{size:16}),description:"Predictions",color:"#22d3ee"}},Rmt=({vault:t,password:e,addNotification:n,activeTab:r,setActiveTab:i})=>{const[s,o]=A.useState("gemini"),[a,l]=A.useState({gemini:"",openai:"",claude:""}),[c,u]=A.useState({gemini:!1,openai:!1,claude:!1}),[h,m]=A.useState({gemini:"empty",openai:"empty",claude:"empty"}),[g,x]=A.useState({operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}}),[v,b]=A.useState("devnet"),[w,k]=A.useState("testnet");A.useEffect(()=>{const j=Un.getSnapshot(),$={gemini:"",openai:"",claude:""},W={gemini:"empty",openai:"empty",claude:"empty"};for(const U of["gemini","openai","claude"]){const T=Un.getApiKey(U);$[U]=T,W[U]=T?"saved":"empty"}l($),m(W),x(j.componentConfigs);const V=Un.subscribe(()=>{const U=Un.getSnapshot();x(U.componentConfigs)});return()=>{V()}},[]);const C=(j,$)=>{l(V=>({...V,[j]:$}));const W=Un.getApiKey(j);m(V=>({...V,[j]:$===""?"empty":$!==W?"modified":"saved"}))},R=j=>{const $=a[j].trim();$&&(Un.setApiKey(j,$),m(W=>({...W,[j]:"saved"})),n(`${vu[j].name} API Key saved!`))},B=j=>{Un.clearApiKey(j),l($=>({...$,[j]:""})),m($=>({...$,[j]:"empty"})),n(`${vu[j].name} API Key cleared`)},O=(j,$)=>{var T;const V=((T=dy[$][0])==null?void 0:T.id)||"",U={providerType:$,modelId:V};Un.isProviderConfigured($)?(Un.setComponentConfig(j,U),n(`${W4[j].name} now using ${vu[$].name}`)):n(`Please configure ${vu[$].name} API key first`)},F=(j,$)=>{const W=g[j],V={...W,modelId:$};Un.setComponentConfig(j,V);const U=dy[W.providerType].find(T=>T.id===$);n(`${W4[j].name} model changed to ${(U==null?void 0:U.name)||$}`)},H=()=>Un.getConfiguredProviders();return d.jsx(Bt.div,{className:"h-full flex flex-col overflow-y-auto custom-scrollbar",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:d.jsx("div",{className:"flex-1 w-full max-w-5xl mx-auto px-6 py-8 flex flex-col gap-6",children:r==="user"?d.jsx(Imt,{addNotification:n,password:e}):d.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center justify-between font-light",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:d.jsx(zne,{className:"h-4 w-4 text-white"})}),d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"AI Providers"})]}),d.jsx("div",{className:"flex items-center gap-2",children:["gemini","openai","claude"].map(j=>d.jsx("div",{className:qt("w-1.5 h-1.5 rounded-full transition-all",h[j]==="saved"?"bg-emerald-500":"bg-gray-700"),title:`${vu[j].name}: ${h[j]==="saved"?"Configured":"Not configured"}`},j))})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("div",{className:"flex items-center gap-6 border-b border-gray-800/60 mb-6 pb-1",children:["gemini","openai","claude"].map(j=>{const $=s===j;return d.jsxs("button",{onClick:()=>o(j),className:qt("relative pb-3 text-sm font-medium transition-all",$?"text-white":"text-gray-500 hover:text-gray-300"),children:[vu[j].name,$&&d.jsx(Bt.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#E7FE55]"})]},j)})}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("label",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[d.jsx("span",{children:"API Key"}),h[s]==="saved"&&d.jsxs("span",{className:"text-emerald-500 flex items-center gap-1 normal-case tracking-normal bg-emerald-500/10 px-2 py-0.5 rounded text-[10px] font-semibold",children:[d.jsx(sm,{size:10})," Saved"]})]}),d.jsxs("a",{href:vu[s].keyUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[#E7FE55] hover:underline flex items-center gap-1 transition-colors",children:["Get API key ",d.jsx(mm,{size:10})]})]}),d.jsxs("div",{className:"relative group mb-4",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(M3,{size:14,className:"text-gray-600 group-focus-within:text-white transition-colors"})}),d.jsx("input",{type:c[s]?"text":"password",value:a[s],onChange:j=>C(s,j.target.value),placeholder:`Enter ${vu[s].name} key...`,className:"w-full bg-transparent border border-gray-800 rounded-lg py-2.5 pl-10 pr-10 text-sm text-gray-200 focus:outline-none focus:border-[#E7FE55]/50 focus:ring-1 focus:ring-[#E7FE55]/20 font-mono transition-all placeholder:text-gray-700"}),d.jsx("button",{type:"button",onClick:()=>u(j=>({...j,[s]:!j[s]})),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 hover:text-white transition-colors",children:c[s]?d.jsx(hC,{size:14}):d.jsx(y8,{size:14})})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{onClick:()=>R(s),disabled:h[s]!=="modified",className:qt("h-9 px-5 rounded-lg text-sm font-medium transition-all",h[s]==="modified"?"bg-white text-black hover:bg-gray-200":"bg-gray-800/50 text-gray-500 cursor-not-allowed border border-gray-800"),children:"Save Changes"}),h[s]!=="empty"&&d.jsx("button",{onClick:()=>B(s),className:"h-9 px-4 rounded-lg text-sm text-gray-500 hover:text-red-400 hover:bg-red-500/10 transition-all ml-auto",children:"Disconnect"})]})]})]})]}),d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:d.jsx(dT,{className:"h-4 w-4 text-white"})}),d.jsxs("div",{className:"text-left",children:[d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Network Settings"}),d.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5 font-light",children:"Configure blockchain connections"})]})]}),d.jsxs("div",{className:"p-6 space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:d.jsx(To,{size:14,className:"text-[#9945FF]"})}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Solana"}),d.jsx("span",{className:"text-xs text-gray-600 block",children:"Blockchain Network"})]})]}),d.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[d.jsx("button",{onClick:()=>b("devnet"),className:qt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",v==="devnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Devnet"}),d.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",d.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]}),d.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:d.jsx(_n,{size:14,className:"text-[#E7FE55]"})}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Hyperliquid"}),d.jsx("span",{className:"text-xs text-gray-600 block",children:"Trading Engine"})]})]}),d.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[d.jsx("button",{onClick:()=>k("testnet"),className:qt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",w==="testnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Testnet"}),d.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",d.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]})]})]}),d.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[d.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:d.jsx(eo,{className:"h-4 w-4 text-white"})}),d.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Model Assignment"})]}),d.jsx("div",{className:"p-6",children:d.jsx("div",{className:"flex flex-col gap-4",children:["operator","hyperliquidDealer","polymarketDealer"].map(j=>{const $=W4[j],W=g[j],V=dy[W.providerType],U=H(),T=U.includes(W.providerType);return d.jsxs("div",{className:"group p-4 rounded-lg border border-gray-800/60 hover:border-gray-700 transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"p-1.5 rounded-lg shrink-0",style:{backgroundColor:`${$.color}10`,color:$.color},children:$.icon}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:$.shortName}),d.jsx("span",{className:qt("w-2 h-2 rounded-full",T?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]":"bg-amber-500")})]}),d.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:$.description})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Provider"}),d.jsxs(See,{value:W.providerType,onValueChange:_=>O(j,_),children:[d.jsx(AD,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:d.jsx(Aee,{})}),d.jsx(TD,{className:"bg-[#1A1B21] border-[#2E2F36]",children:["gemini","openai","claude"].map(_=>{const L=vu[_],z=U.includes(_);return d.jsx(kD,{value:_,disabled:!z,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{children:L.name}),!z&&d.jsx("span",{className:"opacity-50 text-[10px] ml-auto",children:"(no key)"})]})},_)})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Model"}),d.jsxs(See,{value:W.modelId,onValueChange:_=>F(j,_),children:[d.jsx(AD,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:d.jsx(Aee,{})}),d.jsx(TD,{className:"bg-[#1A1B21] border-[#2E2F36]",children:V.map(_=>d.jsx(kD,{value:_.id,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:_.name},_.id))})]})]})]})]},j)})})})]})]})})})},Omt=(t,e,n)=>t*n.inputPricePerMillion/1e6+e*n.outputPricePerMillion/1e6,Mmt=({addNotification:t})=>{const[e,n]=A.useState(null),[r,i]=A.useState([]),[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=A.useState(20),[h,m]=A.useState("ALL"),[g,x]=A.useState(Cs.getSnapshot().pricing),[v,b]=A.useState(Cs.getSnapshot().pricing),w=F=>{const H=Cs.getRecords(1e3),j=Cs.getStats();if(!j)return null;const $=new Date,W=new Date($.getFullYear(),$.getMonth(),$.getDate()).getTime(),V=new Date($.getFullYear(),$.getMonth(),1).getTime();let U=0;const T={MANAGER:0,DEALER:0,POLYMARKET_DEALER:0},_={input:0,output:0,cost:0},L={input:0,output:0,cost:0};for(const z of H){const G=Omt(z.inputTokens,z.outputTokens,F);U+=G,T[z.source]+=G,z.timestamp>=W&&(_.input+=z.inputTokens,_.output+=z.outputTokens,_.cost+=G),z.timestamp>=V&&(L.input+=z.inputTokens,L.output+=z.outputTokens,L.cost+=G)}return{...j,totalCost:U,bySource:{MANAGER:{...j.bySource.MANAGER,cost:T.MANAGER},DEALER:{...j.bySource.DEALER,cost:T.DEALER},POLYMARKET_DEALER:{...j.bySource.POLYMARKET_DEALER,cost:T.POLYMARKET_DEALER}},today:_,thisMonth:L}};A.useEffect(()=>{const F=()=>{n(w(v)),i(Cs.getRecords(c,h==="ALL"?void 0:h))};F();const H=Cs.subscribe(F);return()=>{H()}},[c,h]),A.useEffect(()=>{const F=w(v);n(F)},[v]);const k=()=>{Cs.updatePricing(g),b({...g}),t("Pricing updated successfully")},C=()=>{confirm("Are you sure you want to clear all token usage history?")&&(Cs.clearHistory(),t("Token usage history cleared"))},R=F=>F>=1e6?(F/1e6).toFixed(2)+"M":F>=1e3?(F/1e3).toFixed(1)+"K":F.toFixed(0),B=F=>"$"+F.toFixed(4),O=F=>new Date(F).toLocaleString();return e?d.jsxs(Bt.div,{className:"h-full flex flex-col space-y-6 overflow-y-auto px-1 pb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx(qs,{className:"border-slate-700/50 bg-gradient-to-br from-slate-900/80 to-slate-800/30",children:d.jsxs(Tu,{className:"p-5",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:d.jsx(To,{className:"text-indigo-400",size:20})}),d.jsx("span",{className:"text-sm text-slate-400",children:"Total Tokens"})]}),d.jsxs(zi,{variant:"ghost",size:"sm",onClick:C,className:"h-7 px-2 text-xs text-slate-400 hover:text-red-400 hover:bg-red-500/10",children:[d.jsx(gm,{size:14,className:"mr-1"})," Clear"]})]}),d.jsx("div",{className:"text-2xl font-bold text-white",children:R(e.totalInputTokens+e.totalOutputTokens)}),d.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-slate-500",children:[d.jsxs("span",{children:["In: ",R(e.totalInputTokens)]}),d.jsxs("span",{children:["Out: ",R(e.totalOutputTokens)]})]})]})}),d.jsx(qs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:d.jsxs(Tu,{className:"p-5",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:d.jsx(g8,{className:"text-amber-400",size:20})}),d.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"})]}),d.jsx("div",{className:"text-2xl font-bold text-amber-400",children:B(e.totalCost)}),d.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Estimated based on current pricing"})]})}),d.jsx(qs,{className:"border-emerald-500/30 bg-gradient-to-br from-slate-900/80 to-emerald-950/20",children:d.jsxs(Tu,{className:"p-5",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/20",children:d.jsx(_n,{className:"text-emerald-400",size:20})}),d.jsx("span",{className:"text-sm text-slate-400",children:"Today"})]}),d.jsx("div",{className:"text-2xl font-bold text-white",children:R(e.today.input+e.today.output)}),d.jsx("div",{className:"text-xs text-emerald-400 mt-2",children:B(e.today.cost)})]})}),d.jsx(qs,{className:"border-blue-500/30 bg-gradient-to-br from-slate-900/80 to-blue-950/20",children:d.jsxs(Tu,{className:"p-5",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:d.jsx(mC,{className:"text-blue-400",size:20})}),d.jsx("span",{className:"text-sm text-slate-400",children:"This Month"})]}),d.jsx("div",{className:"text-2xl font-bold text-white",children:R(e.thisMonth.input+e.thisMonth.output)}),d.jsx("div",{className:"text-xs text-blue-400 mt-2",children:B(e.thisMonth.cost)})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs(qs,{className:"border-indigo-500/30 bg-gradient-to-br from-slate-900/80 to-indigo-950/20",children:[d.jsx(zL,{className:"pb-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:d.jsx(Rg,{className:"text-indigo-400",size:24})}),d.jsxs("div",{children:[d.jsx(HL,{className:"text-base",children:"Vault Operator"}),d.jsx(VL,{children:"User queries and tool calls"})]})]})}),d.jsxs(Tu,{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Total Queries"}),d.jsx("span",{className:"text-white font-medium",children:e.managerMetrics.totalQueries})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Avg Tokens/Query"}),d.jsx("span",{className:"text-white font-medium",children:R(e.managerMetrics.avgTokensPerQuery)})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Interaction"}),d.jsx("span",{className:"text-indigo-400 font-medium",children:e.managerMetrics.totalQueries>0?B(e.bySource.MANAGER.cost/e.managerMetrics.totalQueries):"$0.0000"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),d.jsx("span",{className:"text-indigo-400 font-medium",children:B(e.bySource.MANAGER.cost)})]}),d.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[d.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[d.jsxs("span",{children:["Input: ",R(e.bySource.MANAGER.input)]}),d.jsxs("span",{children:["Output: ",R(e.bySource.MANAGER.output)]})]}),d.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[d.jsx("div",{className:"bg-indigo-500 h-full",style:{width:`${e.bySource.MANAGER.input/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}}),d.jsx("div",{className:"bg-indigo-300 h-full",style:{width:`${e.bySource.MANAGER.output/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}})]})]})]})]}),d.jsxs(qs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:[d.jsx(zL,{className:"pb-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:d.jsx(To,{className:"text-amber-400",size:24})}),d.jsxs("div",{children:[d.jsx(HL,{className:"text-base",children:"Hyperliquid Dealer"}),d.jsx(VL,{children:"Automated analysis cycles"})]})]})}),d.jsxs(Tu,{className:"space-y-3",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Analysis Cycles"}),d.jsx("span",{className:"text-white font-medium",children:e.bySource.DEALER.count})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Coins Analyzed"}),d.jsx("span",{className:"text-white font-medium",children:e.dealerMetrics.totalCoinsAnalyzed})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Cycle"}),d.jsx("span",{className:"text-amber-400 font-medium",children:e.bySource.DEALER.count>0?B(e.bySource.DEALER.cost/e.bySource.DEALER.count):"$0.0000"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Coin"}),d.jsx("span",{className:"text-amber-400 font-medium",children:e.dealerMetrics.totalCoinsAnalyzed>0?B(e.bySource.DEALER.cost/e.dealerMetrics.totalCoinsAnalyzed):"$0.0000"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),d.jsx("span",{className:"text-amber-400 font-medium",children:B(e.bySource.DEALER.cost)})]}),d.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[d.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[d.jsxs("span",{children:["Input: ",R(e.bySource.DEALER.input)]}),d.jsxs("span",{children:["Output: ",R(e.bySource.DEALER.output)]})]}),d.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[d.jsx("div",{className:"bg-amber-500 h-full",style:{width:`${e.bySource.DEALER.input/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}}),d.jsx("div",{className:"bg-amber-300 h-full",style:{width:`${e.bySource.DEALER.output/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}})]})]})]})]})]}),d.jsxs(qs,{children:[d.jsxs("button",{onClick:()=>o(!s),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(ek,{size:20,className:"text-slate-400"}),d.jsx("span",{className:"text-white font-medium",children:"Pricing Configuration"})]}),s?d.jsx(lh,{size:20,className:"text-slate-400"}):d.jsx(aa,{size:20,className:"text-slate-400"})]}),s&&d.jsxs(Tu,{className:"pt-0 border-t border-slate-700/50",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Input Price (per 1M tokens)"}),d.jsx(_x,{type:"number",step:"0.01",value:g.inputPricePerMillion,onChange:F=>x(H=>({...H,inputPricePerMillion:parseFloat(F.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Output Price (per 1M tokens)"}),d.jsx(_x,{type:"number",step:"0.01",value:g.outputPricePerMillion,onChange:F=>x(H=>({...H,outputPricePerMillion:parseFloat(F.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),d.jsx("div",{className:"mt-4 flex justify-end",children:d.jsx(zi,{onClick:k,variant:"success",size:"sm",children:"Apply Pricing"})})]})]}),d.jsxs(qs,{children:[d.jsxs("button",{onClick:()=>l(!a),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Fl,{size:20,className:"text-slate-400"}),d.jsx("span",{className:"text-white font-medium",children:"Usage History"}),d.jsxs(tl,{variant:"secondary",children:[r.length," records"]})]}),a?d.jsx(lh,{size:20,className:"text-slate-400"}):d.jsx(aa,{size:20,className:"text-slate-400"})]}),a&&d.jsxs(Tu,{className:"pt-0 border-t border-slate-700/50",children:[d.jsxs("div",{className:"flex items-center gap-4 mt-4 mb-4",children:[d.jsx("div",{className:"flex bg-slate-800 rounded-lg p-1",children:["ALL","MANAGER","DEALER"].map(F=>d.jsx(zi,{variant:h===F?"default":"ghost",size:"sm",onClick:()=>m(F),className:"text-xs",children:F},F))}),d.jsxs("select",{value:c,onChange:F=>u(parseInt(F.target.value)),className:"bg-slate-800 border border-slate-700 text-white rounded-lg px-3 py-1.5 text-xs",children:[d.jsx("option",{value:10,children:"10 records"}),d.jsx("option",{value:20,children:"20 records"}),d.jsx("option",{value:50,children:"50 records"})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-slate-400 text-xs uppercase border-b border-slate-700",children:[d.jsx("th",{className:"text-left py-3 px-2",children:"Timestamp"}),d.jsx("th",{className:"text-left py-3 px-2",children:"Source"}),d.jsx("th",{className:"text-left py-3 px-2",children:"Operation"}),d.jsx("th",{className:"text-right py-3 px-2",children:"Input"}),d.jsx("th",{className:"text-right py-3 px-2",children:"Output"}),d.jsx("th",{className:"text-right py-3 px-2",children:"Cost"})]})}),d.jsxs("tbody",{children:[r.map(F=>d.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[d.jsx("td",{className:"py-2 px-2 text-slate-400 text-xs",children:O(F.timestamp)}),d.jsx("td",{className:"py-2 px-2",children:d.jsx(tl,{variant:F.source==="MANAGER"?"info":"warning",children:F.source})}),d.jsx("td",{className:"py-2 px-2 text-slate-300 text-xs",children:F.operation}),d.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:R(F.inputTokens)}),d.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:R(F.outputTokens)}),d.jsx("td",{className:"py-2 px-2 text-right text-amber-400 font-medium",children:B(F.inputTokens*v.inputPricePerMillion/1e6+F.outputTokens*v.outputPricePerMillion/1e6)})]},F.id)),r.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"py-8 text-center text-slate-500",children:"No usage records yet."})})]})]})})]})]})]}):d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx(Bt.div,{className:"h-8 w-8 border-b-2 border-indigo-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})},Lmt=t=>{const e=t.match(/Market:\s*(.+?)(?:\s*\||$)/);return e?e[1].slice(0,30):null},Dmt=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var $;const[i,s]=A.useState(0),[o,a]=A.useState([]),[l,c]=A.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[u,h]=A.useState(!1),{summary:m,isGenerating:g,cycleCount:x,lastUpdate:v,hasSummary:b}=Zhe("polymarket"),[w,k]=A.useState(0),C=A.useMemo(()=>t.logs.filter(W=>W.type==="REASONING"||W.type==="SIGNAL").slice(0,20),[t.logs]),R=A.useMemo(()=>{var V,U,T;const W=new Map;for(const _ of C){const L=Lmt(_.message)||((T=(U=(V=_.details)==null?void 0:V.context)==null?void 0:U.question)==null?void 0:T.slice(0,30));L&&!W.has(L)&&W.set(L,_)}return Array.from(W.entries()).sort((_,L)=>L[1].timestamp-_[1].timestamp).map(([_,L])=>({market:_,log:L}))},[C]);A.useEffect(()=>{R.length>0&&!t.isAnalyzing&&k(0)},[R.length,t.isAnalyzing]);const B=R[w];A.useEffect(()=>{if(t.operationHistory.length>0){let W=0,V=0,U=0,T=0;const _=[];let L=0;t.operationHistory.slice().reverse().forEach(G=>{const te=G.pnl||0;L+=te,W+=te,T+=G.sizeUSDC,te>0?V++:te<0&&U++,_.push({time:G.timestamp,date:new Date(G.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:L})});const z=V+U;c({totalPnl:W,winRate:z>0?V/z*100:0,totalVolume:T,tradesWithPnl:z}),a(_)}},[t.operationHistory]),A.useEffect(()=>{if(!n)return;const W=async()=>{try{const U=await is.getBalance();s(U)}catch(U){console.error("Failed to fetch Polymarket balance",U)}};W();const V=setInterval(W,6e4);return()=>clearInterval(V)},[n]);const O=()=>{n&&e(!t.isOn)},F=A.useMemo(()=>t.activePositions.reduce((W,V)=>W+V.unrealizedPnl,0),[t.activePositions]),H=()=>{k(W=>Math.min(R.length-1,W+1))},j=()=>{k(W=>Math.max(0,W-1))};return n?d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[d.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsx("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[d.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),d.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),d.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),d.jsx("button",{onClick:O,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:d.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]})}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Profit"}),d.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${l.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[l.totalPnl>=0?"+":"",l.totalPnl.toFixed(2)," USD"]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),d.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${F>=0?"text-[#34d399]":"text-red-400"}`,children:[F>=0?"+":"",F.toFixed(2)," USD"]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),d.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[l.winRate.toFixed(1),"%"]})]})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),d.jsx(ld,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Categories"}),d.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.allowedCategories.length})]}),d.jsx(Cw,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.checkIntervalSeconds,"s"]})]}),d.jsx(fs,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Position"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.maxPositionSizeUSDC]})]}),d.jsx(F1,{className:"h-4 w-4 text-[#747580]"})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(_n,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),d.jsx("div",{className:"flex-1 w-full",children:o.length>0?d.jsx(Jw,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:d.jsxs(Gde,{data:o,children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"colorPnlPoly",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),d.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),d.jsx(l1,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),d.jsx(u1,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),d.jsx(d1,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:W=>`$${W}`}),d.jsx(s2,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:W=>[`$${W.toFixed(2)}`,"Net PnL"]}),d.jsx(jN,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnlPoly)"})]})}):d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[d.jsx(Rl,{className:"h-8 w-8 mb-2 opacity-40"}),d.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ao,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),d.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[d.jsx("button",{onClick:()=>h(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${u?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),d.jsx("button",{onClick:()=>b&&h(!0),disabled:!b,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${u?"bg-[#E7FE55] text-black":b?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:b?"View AI Summary":`Available after ${2-x} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!u&&d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&R.length>0&&!u&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:H,disabled:w>=R.length-1,className:`p-1 rounded transition-colors ${w>=R.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous market",children:d.jsx(Nw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[w+1,"/",R.length]}),d.jsx("button",{onClick:j,disabled:w<=0,className:`p-1 rounded transition-colors ${w<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next market",children:d.jsx(Ul,{size:16})})]})]}),u?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[x," cycles"]}),g&&d.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),v>0&&d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:m?d.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m}):d.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusDetail||t.statusMessage,'"']})})]}):B?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider truncate max-w-[150px]",children:B.market}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(B.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',(($=B.log.details)==null?void 0:$.fullReason)||B.log.message,'"']})})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusMessage||"Waiting for analysis...",'"']})})]}),d.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),d.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),d.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),d.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Jg,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Active Positions"})]}),d.jsxs("span",{className:"text-[10px] text-[#747580]",children:[t.activePositions.length," / ",t.settings.maxOpenPositions]})]}),t.activePositions.length>0?d.jsx("div",{className:"overflow-auto max-h-[200px] custom-scrollbar",children:d.jsxs("table",{className:"w-full text-xs",children:[d.jsx("thead",{className:"text-[#747580] text-left sticky top-0 bg-[#14151a]",children:d.jsxs("tr",{children:[d.jsx("th",{className:"pb-2 font-medium",children:"Market"}),d.jsx("th",{className:"pb-2 font-medium",children:"Side"}),d.jsx("th",{className:"pb-2 font-medium text-right",children:"Shares"}),d.jsx("th",{className:"pb-2 font-medium text-right",children:"Avg Price"}),d.jsx("th",{className:"pb-2 font-medium text-right",children:"Current"}),d.jsx("th",{className:"pb-2 font-medium text-right",children:"PnL"})]})}),d.jsx("tbody",{className:"text-[#a0a1a8]",children:t.activePositions.map((W,V)=>d.jsxs("tr",{className:"border-t border-[#232328] hover:bg-[#1a1b21]",children:[d.jsxs("td",{className:"py-2 max-w-[200px] truncate",title:W.question,children:[W.question.slice(0,40),"..."]}),d.jsx("td",{className:`py-2 font-medium ${W.outcome==="YES"?"text-[#34d399]":"text-red-400"}`,children:W.outcome}),d.jsx("td",{className:"py-2 text-right font-mono",children:W.shares.toFixed(2)}),d.jsxs("td",{className:"py-2 text-right font-mono",children:[(W.avgPrice*100).toFixed(1),""]}),d.jsxs("td",{className:"py-2 text-right font-mono",children:[(W.currentPrice*100).toFixed(1),""]}),d.jsxs("td",{className:`py-2 text-right font-mono ${W.unrealizedPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[W.unrealizedPnl>=0?"+":"","$",W.unrealizedPnl.toFixed(2)]})]},V))})]})}):d.jsxs("div",{className:"h-24 flex flex-col items-center justify-center text-[#747580] gap-2 bg-[#0f1015] rounded border border-[#232328]",children:[d.jsx(cx,{className:"h-6 w-6 opacity-40"}),d.jsx("span",{className:"text-[11px]",children:"No active positions"})]})]})]}):d.jsx("div",{className:"flex flex-col h-full items-center justify-center",children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:d.jsx(cx,{size:32,className:"text-[#E7FE55]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Polymarket Vault Required"}),d.jsxs("p",{className:"text-[#747580] text-sm",children:["To use the Polymarket Dealer, you need to create a ",d.jsx("span",{className:"text-[#E7FE55]",children:"Polymarket Vault"})," first."]}),d.jsx("button",{onClick:()=>r(we.VAULT),className:"mt-4 px-6 py-3 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black font-bold rounded-xl transition-all",children:"Go to Vault Operator"})]})})},jmt=({settings:t,onUpdateSettings:e,onApplyChanges:n,isOn:r=!1,onToggle:i})=>{const[s,o]=A.useState(t),[a,l]=A.useState(!1);A.useEffect(()=>{o(t)},[t]),A.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(t))},[s,t]);const c=x=>{o(v=>({...v,...x}))},u=()=>{e(s),n()},h=()=>{o(t),l(!1)},m=x=>{if(x==="custom")return;const v=rw[x];v&&c({selectedPreset:x,allowedCategories:v.categories})},g=x=>{const v=s.allowedCategories,b=v.includes(x)?v.filter(w=>w!==x):[...v,x];c({allowedCategories:b})};return d.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("div",{className:"glass-panel p-4 rounded",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${r?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:d.jsx(To,{className:"h-5 w-5"})}),d.jsxs("div",{children:[d.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),d.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[d.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),d.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:r?"Active & Running":"Stopped"})]})]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[i&&d.jsx("button",{onClick:()=>i(!r),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${r?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:d.jsx("span",{className:`${r?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),a&&d.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-[#1a1b21] hover:bg-[#232328] text-[#747580] px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all",children:[d.jsx(ux,{className:"h-3 w-3"})," Reset"]}),d.jsxs("button",{onClick:u,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[d.jsx(Fl,{className:"h-3 w-3"})," Apply"]})]})]})}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(_w,{className:"h-3.5 w-3.5"})," Strategy Preset"]}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(rw).filter(([x])=>x!=="custom").map(([x,v])=>d.jsxs("button",{onClick:()=>m(x),className:`p-3 rounded border text-left transition-all ${s.selectedPreset===x?"border-[#E7FE55] bg-[#E7FE55]/10":"border-[#232328] hover:border-[#747580] bg-[#0f1015]"}`,children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"text-sm",children:v.emoji}),d.jsx("span",{className:"text-[11px] font-semibold text-white",children:v.name})]}),d.jsx("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:v.description})]},x))})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(F1,{className:"h-3.5 w-3.5"})," Capital & Risk"]}),d.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Type"}),d.jsxs("div",{className:"flex gap-0.5",children:[d.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#60a5fa] text-white":"text-[#747580] hover:text-white"}`,children:"Fix"}),d.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#34d399] text-white":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Amount ($)"}),s.bankrollType==="MANUAL"?d.jsx("input",{type:"number",value:s.manualBankroll,onChange:x=>c({manualBankroll:parseFloat(x.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}):d.jsx("span",{className:"text-sm font-mono text-[#34d399]",children:"Auto"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Pos ($)"}),d.jsx("input",{type:"number",value:s.maxPositionSizeUSDC,onChange:x=>c({maxPositionSizeUSDC:parseInt(x.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Open"}),d.jsx("input",{type:"number",value:s.maxOpenPositions,onChange:x=>c({maxOpenPositions:parseInt(x.target.value)||1}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(fs,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),d.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Interval"}),d.jsxs("div",{className:"flex items-baseline gap-1",children:[d.jsx("input",{type:"number",value:s.checkIntervalSeconds,onChange:x=>c({checkIntervalSeconds:Math.max(60,parseInt(x.target.value)||60)}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"}),d.jsx("span",{className:"text-[10px] text-[#747580]",children:"s"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Volume"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"text-[10px] text-[#747580] mr-1",children:"$"}),d.jsx("input",{type:"number",value:s.minVolumeThreshold,onChange:x=>c({minVolumeThreshold:parseInt(x.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Liquidity"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"text-[10px] text-[#747580] mr-1",children:"$"}),d.jsx("input",{type:"number",value:s.minLiquidityThreshold,onChange:x=>c({minLiquidityThreshold:parseInt(x.target.value)||0}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})]})]})]})]})]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[d.jsx(Hne,{className:"h-3.5 w-3.5"})," Market Categories"]}),d.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.allowedCategories.length})]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:Twe.map(x=>d.jsxs("button",{onClick:()=>g(x.value),className:`px-3 py-1.5 rounded-full text-xs flex items-center gap-1.5 transition-all ${s.allowedCategories.includes(x.value)?"bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/50":"bg-[#0f1015] text-[#747580] border border-[#232328] hover:border-[#747580]"}`,children:[d.jsx("span",{children:x.icon}),x.label]},x.value))})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[d.jsx(_n,{className:"h-3.5 w-3.5"})," Market Filters"]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Spread Edge"}),d.jsx("div",{className:"flex items-baseline gap-1",children:d.jsx("input",{type:"number",step:"0.01",value:s.minSpreadThreshold||.02,onChange:x=>c({minSpreadThreshold:parseFloat(x.target.value)||.02}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})})]}),d.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[d.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Confidence"}),d.jsx("div",{className:"flex items-baseline gap-1",children:d.jsx("input",{type:"number",step:"0.05",min:"0",max:"1",value:s.confidenceThreshold||.6,onChange:x=>c({confidenceThreshold:parseFloat(x.target.value)||.6}),className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none"})})]})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-start gap-3",children:[d.jsx(p8,{className:"h-4 w-4 text-[#E7FE55] shrink-0 mt-0.5"}),d.jsx("div",{children:d.jsxs("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:[d.jsx("strong",{className:"text-[#a0a1a8]",children:"Polymarket Data:"})," Market data is fetched via the CLOB API. Categories filter which markets are analyzed. Higher confidence = fewer but more certain trades."]})})]})]})]})})},Bmt=({settings:t,onUpdateSettings:e,onApplyChanges:n})=>{var v,b;const[r,i]=A.useState(t.strategyPrompt),[s,o]=A.useState(!1),[a,l]=A.useState(t.promptMode||"preset"),[c,u]=A.useState(t.selectedPreset||"balanced");A.useEffect(()=>{i(t.strategyPrompt),l(t.promptMode||"preset"),u(t.selectedPreset||"balanced")},[t.strategyPrompt,t.promptMode,t.selectedPreset]),A.useEffect(()=>{o(r!==t.strategyPrompt)},[r,t.strategyPrompt]);const h=w=>{if(w==="custom")l("custom"),u("custom"),o(!0);else{const k=qT[w];i(k),l("preset"),u(w),o(k!==t.strategyPrompt)}},m=w=>{i(w);const k=Object.entries(qT).find(([C,R])=>R===w);k?(l("preset"),u(k[0])):(l("custom"),u("custom")),o(w!==t.strategyPrompt)},g=()=>{e({strategyPrompt:r,promptMode:a,selectedPreset:c}),n(),o(!1)},x=w=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${c===w&&a==="preset"||a==="custom"&&w==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return d.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[d.jsx("div",{className:"glass-panel p-4 shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(_w,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),d.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${a==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[d.jsx("span",{className:`h-1 w-1 rounded-full ${a==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),a==="preset"?`${(v=rw[c])==null?void 0:v.emoji} ${(b=rw[c])==null?void 0:b.name}`:"Custom"]}),s&&d.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"})]}),d.jsxs("button",{onClick:g,disabled:!s,className:`
                            flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                            ${s?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                        `,children:[d.jsx(v8,{className:"h-3.5 w-3.5"}),"Save"]})]})}),d.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[d.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[d.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[d.jsx(Kne,{size:12,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),d.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(rw).filter(([w])=>w!=="custom").map(([w,k])=>d.jsxs("button",{onClick:()=>h(w),className:x(w),children:[d.jsx("span",{children:k.emoji}),d.jsx("span",{children:k.name})]},w)),d.jsx("div",{className:"h-px bg-[#232328] my-2"}),d.jsxs("button",{onClick:()=>h("custom"),className:x("custom"),children:[d.jsx("span",{children:""}),d.jsx("span",{children:"Custom"})]})]}),d.jsx("div",{className:"mt-auto pt-4 px-1",children:d.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),d.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[d.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),d.jsx("textarea",{value:r,onChange:w=>m(w.target.value),className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your prediction market strategy here...
// 
// Example:
// You are a probability analyst focusing on mispriced markets.
// 1. Look for markets with high volume and clear catalysts.
// 2. Prioritize events with upcoming resolution dates.
// 3. Consider news sentiment and expert opinions.`}),d.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),d.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[d.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),d.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})},Umt=({logs:t,onClearLogs:e})=>{const[n,r]=A.useState(null),i=t.filter(a=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(a.type))return!0;if(["INFO","WARNING"].includes(a.type)){const l=a.message.toLowerCase();return l.includes("executing")||l.includes("skipping")||l.includes("ignored")||l.includes("position")}return!1}),s=(a,l)=>a==="ERROR"?d.jsx("div",{className:"text-red-400",children:d.jsx(L3,{size:16})}):a==="TRADE"?d.jsx("div",{className:"text-[#34d399]",children:d.jsx(mm,{size:16})}):l.includes("YES")||l.includes("BULLISH")?d.jsx("div",{className:"text-[#34d399]",children:d.jsx(_n,{size:16})}):l.includes("NO")||l.includes("BEARISH")?d.jsx("div",{className:"text-red-400",children:d.jsx(mC,{size:16})}):d.jsx("div",{className:"text-[#E7FE55]",children:d.jsx(Ao,{size:16})}),o=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});return d.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[d.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[d.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[d.jsx(Ao,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),d.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[d.jsx(Ao,{size:48,className:"mb-4 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),d.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(a=>{var h,m;const l=n===a.id,c=(h=a.details)==null?void 0:h.context,u=(m=a.details)==null?void 0:m.context;return d.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[d.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),d.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[s(a.type,a.message),d.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${a.type==="ERROR"?"text-red-400":a.type==="TRADE"?"text-[#34d399]":a.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:a.type})]}),d.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[d.jsx(fs,{size:10}),o(a.timestamp)]})]}),d.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:a.message}),a.details&&a.details.fullReason&&d.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#E7FE55]/30 whitespace-pre-wrap",children:['"',typeof a.details.fullReason=="string"?a.details.fullReason:JSON.stringify(a.details.fullReason),'"']}),c&&d.jsxs("button",{onClick:()=>r(l?null:a.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#E7FE55] hover:text-[#d4eb4d] transition-colors uppercase tracking-wider",children:[l?d.jsx(lh,{size:12}):d.jsx(aa,{size:12}),l?"Hide":"Show"," Market Context"]}),l&&c&&d.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[u.question&&d.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Market: ",d.jsxs("span",{className:"text-white",children:[u.question.slice(0,100),u.question.length>100?"...":""]})]}),(u.volume24h||u.liquidity)&&d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[d.jsx(F1,{size:10}),d.jsx("span",{children:"Market Metrics"})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[u.volume24h&&d.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Volume 24h"}),d.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",u.volume24h.toLocaleString()]})]}),u.liquidity&&d.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Liquidity"}),d.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",u.liquidity.toLocaleString()]})]}),u.spread&&d.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[d.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Spread"}),d.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:[(u.spread*100).toFixed(2),"%"]})]})]})]}),(u.yesPrice||u.noPrice)&&d.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Prices:",u.yesPrice&&d.jsxs("span",{className:"text-[#34d399] font-mono ml-2",children:["YES: ",(u.yesPrice*100).toFixed(1),""]}),u.noPrice&&d.jsxs("span",{className:"text-red-400 font-mono ml-2",children:["NO: ",(u.noPrice*100).toFixed(1),""]})]}),d.jsx("pre",{className:"text-[9px] text-[#747580] overflow-x-auto whitespace-pre-wrap custom-scrollbar max-h-[200px]",children:JSON.stringify(u,null,2)})]})]})]},a.id)})})]})},Fmt=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=A.useState(!1),s=t.details&&Object.keys(t.details).length>0;return d.jsxs(Bt.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[d.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(tl,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),d.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),s&&d.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?d.jsx(aa,{className:"h-4 w-4"}):d.jsx(Ul,{className:"h-4 w-4"})})]}),d.jsx(Zs,{children:s&&r&&d.jsx(Bt.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},$mt=({status:t,onClearLogs:e})=>{const[n,r]=A.useState("thinking"),i=A.useRef(null);if(!t)return d.jsx("div",{className:"p-4 text-red-500",children:"Error: Status not available"});const s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`polymarket_logs_${new Date().toISOString()}.json`,u=document.createElement("a");u.setAttribute("href",l),u.setAttribute("download",c),u.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";case"REASONING":return"secondary";default:return"secondary"}};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden p-4",children:[d.jsx("div",{className:"glass-panel p-4 shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[d.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(Ao,{className:"h-4 w-4"}),"Thinking"]}),d.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(b8,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&d.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),d.jsx(Zs,{children:n==="logs"&&d.jsxs(Bt.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[d.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:d.jsx(gm,{className:"h-4 w-4"})}),d.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:d.jsx(Vs,{className:"h-4 w-4"})})]})})]})}),d.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&d.jsx(Umt,{logs:t.logs,onClearLogs:e}),n==="logs"&&d.jsx("div",{className:"flex-1 min-h-0 relative",children:d.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?d.jsxs(Bt.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[d.jsx(pC,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):d.jsx(Zs,{children:t.logs.map((a,l)=>d.jsx(Fmt,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},zmt=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.pmPublicKey,s=n===we.POLYMARKET_DEALER?we.POLYMARKET_DASHBOARD:n,{state:o,toggleDealer:a,updateSettings:l,applyChanges:c,clearLogs:u}=m0e(t,e),h=()=>{switch(s){case we.POLYMARKET_DASHBOARD:return"dashboard";case we.POLYMARKET_THINKING:return"thinking";case we.POLYMARKET_CONFIG:return"config";case we.POLYMARKET_PROMPT:return"prompt";default:return"dashboard"}},m=g=>{switch(g){case"dashboard":r(we.POLYMARKET_DASHBOARD);break;case"thinking":r(we.POLYMARKET_THINKING);break;case"config":r(we.POLYMARKET_CONFIG);break;case"prompt":r(we.POLYMARKET_PROMPT);break}};return i?d.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&d.jsx(Bt.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:d.jsx(tl,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),d.jsx(bpe,{value:h(),onValueChange:m,className:"flex-1 flex flex-col min-h-0",children:d.jsxs("div",{className:"flex-1 min-h-0 relative",children:[d.jsx(Qu,{value:"dashboard",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:d.jsx(Dmt,{status:o,onToggle:a,vaultAddress:t.pmPublicKey,setActiveTab:r})}),d.jsx(Qu,{value:"thinking",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:d.jsx($mt,{status:o,onClearLogs:u})}),d.jsx(Qu,{value:"config",forceMount:!0,className:"h-full mt-0 absolute inset-0 overflow-y-auto data-[state=inactive]:hidden",children:d.jsx(jmt,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c,isOn:o.isOn,onToggle:a})}),d.jsx(Qu,{value:"prompt",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:d.jsx(Bmt,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c})})]})})]}):d.jsx(Bt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:d.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[d.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:d.jsx(cx,{size:32,className:"text-[#E7FE55]"})}),d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),d.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Polymarket wallet before using Polymarket Dealer. Go to the ",d.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallet."]}),d.jsx(zi,{onClick:()=>r(we.VAULT),variant:"success",size:"lg",className:"mt-4 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black",children:"Go to Vault"})]})})},Tee=({state:t,walletAddress:e})=>{const[n,r]=Ns.useState(!1),[i,s]=Ns.useState(!1),[o,a]=Ns.useState(0),l=async()=>{if(e){r(!0);try{const b=await Tg.getAllPositions(e),w=[...b.meteora.map(k=>{var C,R;return{poolAddress:k.poolAddress,poolName:k.poolAddress.slice(0,8)+"...",protocol:k.protocol,valueUSD:k.valueUSD,unclaimedFeesUSD:k.unclaimedFees.totalUSD,inRange:((C=k.priceRange)==null?void 0:C.inRange)??!0,priceRange:k.priceRange?{min:k.priceRange.min,max:k.priceRange.max}:void 0,currentPrice:(R=k.priceRange)==null?void 0:R.current}}),...b.raydium.map(k=>{var C,R;return{poolAddress:k.poolAddress,poolName:k.poolAddress.slice(0,8)+"...",protocol:k.protocol,valueUSD:k.valueUSD,unclaimedFeesUSD:k.unclaimedFees.totalUSD,inRange:((C=k.priceRange)==null?void 0:C.inRange)??!0,priceRange:k.priceRange?{min:k.priceRange.min,max:k.priceRange.max}:void 0,currentPrice:(R=k.priceRange)==null?void 0:R.current}})];Zr.updatePositions(w),Zr.addLog("INFO",`Refreshed ${w.length} positions`)}catch(b){Zr.addLog("ERROR","Failed to refresh positions",b.message)}r(!1)}},c=t.activePositions.filter(b=>b.inRange).length,u=t.activePositions.filter(b=>!b.inRange).length,h=A.useMemo(()=>t.logs.slice(0,10),[t.logs]),m=h[o],g=()=>{a(b=>Math.min(h.length-1,b+1))},x=()=>{a(b=>Math.max(0,b-1))},v=()=>{const b=!t.settings.policy.enabled;Zr.updatePolicy({enabled:b})};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[d.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[d.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.settings.policy.enabled?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[d.jsxs("span",{className:"relative flex h-2 w-2",children:[t.settings.policy.enabled&&d.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),d.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.settings.policy.enabled?"bg-[#E7FE55]":"bg-red-500"}`})]}),d.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.settings.policy.enabled?"text-[#E7FE55]":"text-[#747580]"}`,children:t.settings.policy.enabled?"ACTIVE":"OFFLINE"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Policy"}),d.jsx("button",{onClick:v,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.settings.policy.enabled?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:d.jsx("span",{className:`${t.settings.policy.enabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Value"}),d.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:["$",t.totalValueUSD.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unclaimed Fees"}),d.jsxs("div",{className:"text-xl font-semibold text-[#34d399] font-mono tracking-tight",children:["+$",t.totalUnclaimedFeesUSD.toFixed(2)]})]}),d.jsxs("div",{className:"glass-panel p-4 rounded",children:[d.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Positions"}),d.jsx("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:t.activePositions.length})]})]}),d.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"In Range"}),d.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:c})]}),d.jsx(m8,{className:"h-4 w-4 text-[#34d399]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Out of Range"}),d.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:u})]}),d.jsx(Pw,{className:"h-4 w-4 text-[#ef4444]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Min TVL"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.policy.minTVLRequired.toLocaleString()]})]}),d.jsx(uh,{className:"h-4 w-4 text-[#747580]"})]}),d.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Range"}),d.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.policy.maxRangeWidthPercent,"%"]})]}),d.jsx(ZT,{className:"h-4 w-4 text-[#747580]"})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(O3,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Active LP Positions"})]}),d.jsxs("button",{onClick:l,disabled:n||!e,className:"flex items-center gap-1 px-2 py-1 text-[10px] text-[#747580] hover:text-white transition-colors disabled:opacity-50",children:[d.jsx(Fl,{size:12,className:n?"animate-spin":""}),"Refresh"]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:t.activePositions.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[d.jsx(O3,{className:"h-8 w-8 mb-2 opacity-40"}),d.jsx("span",{className:"text-[11px]",children:"No active LP positions"}),d.jsx("span",{className:"text-[10px] text-[#5a5b63] mt-1",children:e?"Use the Vault Operator to open positions":"Connect wallet to view positions"})]}):d.jsx("div",{className:"space-y-2",children:t.activePositions.map((b,w)=>d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328] flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-2 h-2 rounded-full ${b.inRange?"bg-[#10b981]":"bg-[#ef4444]"}`}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-white",children:b.poolName}),d.jsx("div",{className:"text-[10px] text-[#747580] uppercase",children:b.protocol.replace("_"," ")})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:"text-sm font-medium text-white font-mono",children:["$",b.valueUSD.toLocaleString(void 0,{maximumFractionDigits:2})]}),b.unclaimedFeesUSD>0&&d.jsxs("div",{className:"text-[10px] text-[#10b981] font-mono",children:["+$",b.unclaimedFeesUSD.toFixed(2)," fees"]})]})]},w))})})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ao,{className:`h-4 w-4 shrink-0 ${t.logs.length>0?"text-[#E7FE55]":"text-[#E7FE55]/60"}`}),d.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[d.jsx("button",{onClick:()=>s(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${i?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),d.jsx("button",{onClick:()=>s(!0),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${i?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Policy"})]})]}),!i&&h.length>0&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:g,disabled:o>=h.length-1,className:`p-1 rounded transition-colors ${o>=h.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous activity",children:d.jsx(Nw,{size:16})}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[o+1,"/",h.length]}),d.jsx("button",{onClick:x,disabled:o<=0,className:`p-1 rounded transition-colors ${o<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next activity",children:d.jsx(Ul,{size:16})})]})]}),i?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:"POLICY CONFIG"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsxs("div",{className:"space-y-3 text-[13px]",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-[#747580]",children:"Min TVL Required"}),d.jsxs("span",{className:"text-white font-mono",children:["$",t.settings.policy.minTVLRequired.toLocaleString()]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-[#747580]",children:"Max Range Width"}),d.jsxs("span",{className:"text-white font-mono",children:[t.settings.policy.maxRangeWidthPercent,"%"]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-[#747580]",children:"Max Capital/Pool"}),d.jsxs("span",{className:"text-white font-mono",children:[t.settings.policy.maxCapitalPerPoolPercent,"%"]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-[#747580]",children:"Confirmation Actions"}),d.jsx("span",{className:"text-white font-mono",children:t.settings.policy.requireConfirmationFor.length})]}),d.jsxs("div",{className:"pt-2 border-t border-[#232328]",children:[d.jsx("span",{className:"text-[#747580] text-[11px] uppercase tracking-wider",children:"Requires Confirmation"}),d.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.settings.policy.requireConfirmationFor.map((b,w)=>d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#232328] text-[#a0a1a8] text-[10px]",children:b},w))})]})]})})]}):m?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold uppercase tracking-wider ${m.type==="ERROR"?"bg-red-500/15 text-red-400":m.type==="WARNING"?"bg-[#f59e0b]/15 text-[#f59e0b]":m.type==="POLICY"?"bg-[#a855f7]/15 text-[#a855f7]":"bg-[#E7FE55]/15 text-[#E7FE55]"}`,children:m.type}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),d.jsxs("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:[d.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m.message}),m.details&&d.jsx("div",{className:"mt-3 pt-3 border-t border-[#232328] text-[11px] text-[#747580] font-mono",children:typeof m.details=="string"?m.details:JSON.stringify(m.details,null,2)})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex items-center justify-between mb-3",children:d.jsx("span",{className:"px-2 py-0.5 rounded bg-[#1a1b21] text-[#747580] text-[9px] font-semibold uppercase tracking-wider",children:"IDLE"})}),d.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:d.jsx("p",{className:"text-[13px] text-[#747580] italic leading-relaxed",children:"No recent activity. Start interacting with LP positions to see updates here."})})]}),d.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Status"}),d.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.settings.policy.enabled?" Policy Active":" Policy Disabled"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Positions"}),d.jsxs("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:[t.activePositions.length," active (",c," in range)"]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Wallet"}),d.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1 font-mono",children:e?`${e.slice(0,8)}...${e.slice(-6)}`:"Not connected"})]})]})]})]}),d.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[d.jsx(eo,{className:"h-4 w-4 text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Activity Log"}),d.jsxs("span",{className:"text-[10px] text-[#747580] ml-auto",children:[t.logs.length," entries"]})]}),d.jsxs("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:[t.logs.slice(0,10).map((b,w)=>d.jsxs("div",{className:"py-2 border-b border-[#232328]/50 last:border-0 flex items-start gap-3",children:[d.jsx("span",{className:`text-[10px] font-medium uppercase shrink-0 ${b.type==="ERROR"?"text-[#ef4444]":b.type==="WARNING"?"text-[#f59e0b]":b.type==="POLICY"?"text-[#a855f7]":"text-[#747580]"}`,children:b.type}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono shrink-0",children:new Date(b.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),d.jsx("span",{className:"text-[12px] text-[#a0a1a8] flex-1 truncate",children:b.message})]},w)),t.logs.length===0&&d.jsx("div",{className:"py-4 text-center text-[#747580] text-[11px]",children:"No activity recorded yet"})]})]})]})},Hmt=({policy:t})=>{const[e,n]=A.useState(t),[r,i]=A.useState(""),[s,o]=A.useState(""),[a,l]=A.useState(!1),c=b=>{n(w=>({...w,...b})),l(!0)},u=()=>{Zr.updatePolicy(e),l(!1)},h=()=>{n(x7),l(!0)},m=()=>{r&&!e.tokenAllowlist.includes(r.toUpperCase())&&(c({tokenAllowlist:[...e.tokenAllowlist,r.toUpperCase()]}),i(""))},g=()=>{s&&!e.tokenBlocklist.includes(s.toUpperCase())&&(c({tokenBlocklist:[...e.tokenBlocklist,s.toUpperCase()]}),o(""))},x=(b,w)=>{c(b==="allowlist"?{tokenAllowlist:e.tokenAllowlist.filter(k=>k!==w)}:{tokenBlocklist:e.tokenBlocklist.filter(k=>k!==w)})},v=b=>{const w=e.requireConfirmationFor;w.includes(b)?c({requireConfirmationFor:w.filter(k=>k!==b)}):c({requireConfirmationFor:[...w,b]})};return d.jsxs("div",{className:"flex flex-col h-full gap-3",children:[d.jsxs("div",{className:"glass-panel px-4 py-3 rounded shrink-0 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(uh,{size:18,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-sm font-semibold text-white",children:"Policy Engine"}),d.jsx("button",{onClick:()=>c({enabled:!e.enabled}),className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${e.enabled?"bg-[#10b981]/20 text-[#10b981] border border-[#10b981]/30":"bg-[#ef4444]/20 text-[#ef4444] border border-[#ef4444]/30"}`,children:e.enabled?"Enabled":"Disabled"}),a&&d.jsxs("div",{className:"flex items-center gap-1 text-[#f59e0b]",children:[d.jsx(to,{size:12}),d.jsx("span",{className:"text-[10px]",children:"Unsaved"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:h,className:"p-1.5 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors",title:"Reset",children:d.jsx(Gne,{size:14})}),d.jsxs("button",{onClick:u,disabled:!a,className:"flex items-center gap-1 px-2.5 py-1 bg-[#E7FE55] hover:bg-[#d4eb4c] text-black rounded text-[10px] font-semibold uppercase disabled:opacity-50",children:[d.jsx(v8,{size:12}),"Save"]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 flex-1 min-h-0",children:[d.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(ZT,{size:14,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Constraints"})]}),d.jsxs("div",{className:"space-y-3 flex-1",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[d.jsx("span",{className:"text-[#747580]",children:"Max Range Width"}),d.jsxs("span",{className:"text-white font-mono",children:[e.maxRangeWidthPercent,"%"]})]}),d.jsx("input",{type:"range",min:"5",max:"200",value:e.maxRangeWidthPercent,onChange:b=>c({maxRangeWidthPercent:parseInt(b.target.value)}),className:"w-full accent-[#E7FE55] h-1"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[d.jsx("span",{className:"text-[#747580]",children:"Min Range Width"}),d.jsxs("span",{className:"text-white font-mono",children:[e.minRangeWidthPercent,"%"]})]}),d.jsx("input",{type:"range",min:"1",max:"50",value:e.minRangeWidthPercent,onChange:b=>c({minRangeWidthPercent:parseInt(b.target.value)}),className:"w-full accent-[#E7FE55] h-1"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[d.jsx("span",{className:"text-[#747580]",children:"Max Capital/Pool"}),d.jsxs("span",{className:"text-white font-mono",children:[e.maxCapitalPerPoolPercent,"%"]})]}),d.jsx("input",{type:"range",min:"5",max:"100",value:e.maxCapitalPerPoolPercent,onChange:b=>c({maxCapitalPerPoolPercent:parseInt(b.target.value)}),className:"w-full accent-[#E7FE55] h-1"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-[9px] text-[#747580] uppercase",children:"Min TVL"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-[#747580] text-[10px]",children:"$"}),d.jsx("input",{type:"number",min:"0",step:"1000",value:e.minTVLRequired,onChange:b=>c({minTVLRequired:parseInt(b.target.value)||0}),className:"w-full pl-5 pr-2 py-1.5 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] font-mono focus:outline-none focus:border-[#E7FE55]"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-[9px] text-[#747580] uppercase",children:"Min Volume"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-[#747580] text-[10px]",children:"$"}),d.jsx("input",{type:"number",min:"0",step:"100",value:e.minVolumeRequired,onChange:b=>c({minVolumeRequired:parseInt(b.target.value)||0}),className:"w-full pl-5 pr-2 py-1.5 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] font-mono focus:outline-none focus:border-[#E7FE55]"})]})]})]})]})]}),d.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(g8,{size:14,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Token Filtering"})]}),d.jsxs("div",{className:"space-y-3 flex-1",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"text-[9px] text-[#747580] uppercase",children:["Allowlist ",d.jsx("span",{className:"normal-case text-[#5a5b63]",children:"(empty=all)"})]}),d.jsxs("div",{className:"flex gap-1 mt-1",children:[d.jsx("input",{type:"text",value:r,onChange:b=>i(b.target.value.toUpperCase()),onKeyPress:b=>b.key==="Enter"&&m(),className:"flex-1 px-2 py-1 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] focus:outline-none focus:border-[#E7FE55]",placeholder:"SOL, USDC..."}),d.jsx("button",{onClick:m,className:"px-2 bg-[#10b981] hover:bg-[#0d9668] text-white rounded",children:d.jsx(kl,{size:12})})]}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-2 min-h-[24px]",children:e.tokenAllowlist.length===0?d.jsx("span",{className:"text-[9px] text-[#5a5b63] italic",children:"All allowed"}):e.tokenAllowlist.map(b=>d.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-[#10b981]/15 text-[#10b981] rounded text-[9px] border border-[#10b981]/30",children:[b,d.jsx("button",{onClick:()=>x("allowlist",b),children:d.jsx(ux,{size:10})})]},b))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-[9px] text-[#747580] uppercase",children:"Blocklist"}),d.jsxs("div",{className:"flex gap-1 mt-1",children:[d.jsx("input",{type:"text",value:s,onChange:b=>o(b.target.value.toUpperCase()),onKeyPress:b=>b.key==="Enter"&&g(),className:"flex-1 px-2 py-1 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] focus:outline-none focus:border-[#E7FE55]",placeholder:"Block tokens..."}),d.jsx("button",{onClick:g,className:"px-2 bg-[#ef4444] hover:bg-[#dc2626] text-white rounded",children:d.jsx(kl,{size:12})})]}),d.jsx("div",{className:"flex flex-wrap gap-1 mt-2 min-h-[24px]",children:e.tokenBlocklist.length===0?d.jsx("span",{className:"text-[9px] text-[#5a5b63] italic",children:"None blocked"}):e.tokenBlocklist.map(b=>d.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-[#ef4444]/15 text-[#ef4444] rounded text-[9px] border border-[#ef4444]/30",children:[b,d.jsx("button",{onClick:()=>x("blocklist",b),children:d.jsx(ux,{size:10})})]},b))})]})]})]}),d.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(ch,{size:14,className:"text-[#E7FE55]"}),d.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Confirmations"})]}),d.jsx("div",{className:"space-y-1.5 flex-1 overflow-y-auto custom-scrollbar",children:Object.keys(yy).map(b=>{const w=yy[b],k=e.requireConfirmationFor.includes(b);return d.jsxs("button",{onClick:()=>v(b),className:`w-full flex items-center justify-between px-2.5 py-2 rounded transition-colors ${k?"bg-[#E7FE55]/10 border border-[#E7FE55]/30":"bg-[#0f1015] hover:bg-[#1a1b21] border border-[#232328]"}`,children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center text-[10px] ${k?"bg-[#E7FE55] text-black":"bg-[#232328] text-[#747580]"}`,children:k&&d.jsx(sm,{size:10})}),d.jsx("div",{className:"text-left",children:d.jsx("div",{className:"text-[11px] text-white",children:w.label})})]}),d.jsx("span",{className:`text-[8px] uppercase font-semibold px-1.5 py-0.5 rounded ${w.riskLevel==="high"?"bg-[#ef4444]/15 text-[#ef4444]":w.riskLevel==="medium"?"bg-[#f59e0b]/15 text-[#f59e0b]":"bg-[#10b981]/15 text-[#10b981]"}`,children:w.riskLevel})]},b)})})]})]})]})},Vmt=({auditLog:t})=>{const[e,n]=A.useState("all"),[r,i]=A.useState("all"),[s,o]=A.useState(null),[a,l]=A.useState(""),c=A.useMemo(()=>t.filter(x=>{var v;return!(e!=="all"&&x.scope!==e||r!=="all"&&x.status!==r||a&&!x.action.toLowerCase().includes(a.toLowerCase())&&!((v=x.poolName)!=null&&v.toLowerCase().includes(a.toLowerCase())))}),[t,e,r,a]),u=A.useMemo(()=>{const x=t.filter(w=>w.status==="executed").length,v=t.filter(w=>w.status==="failed"||w.status==="rejected").length,b=t.filter(w=>w.status==="pending"||w.status==="confirmed").length;return{executed:x,failed:v,pending:b,total:t.length}},[t]),h=()=>{const x=JSON.stringify(t,null,2),v="data:application/json;charset=utf-8,"+encodeURIComponent(x),b=`solana_audit_log_${new Date().toISOString()}.json`,w=document.createElement("a");w.setAttribute("href",v),w.setAttribute("download",b),w.click()},m=x=>{switch(x){case"executed":return d.jsx(m8,{size:14,className:"text-[#10b981]"});case"failed":case"rejected":return d.jsx(Pw,{size:14,className:"text-[#ef4444]"});case"pending":case"confirmed":return d.jsx(fs,{size:14,className:"text-[#f59e0b]"});default:return null}},g=x=>{switch(x){case"executed":return"text-[#10b981] bg-[#10b981]/15 border-[#10b981]/30";case"failed":return"text-[#ef4444] bg-[#ef4444]/15 border-[#ef4444]/30";case"rejected":return"text-[#ef4444] bg-[#ef4444]/15 border-[#ef4444]/30";case"pending":return"text-[#f59e0b] bg-[#f59e0b]/15 border-[#f59e0b]/30";case"confirmed":return"text-[#3b82f6] bg-[#3b82f6]/15 border-[#3b82f6]/30";default:return"text-[#747580] bg-[#747580]/15 border-[#747580]/30"}};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[d.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"p-2 rounded-lg bg-[#E7FE55]/10",children:d.jsx(uH,{size:20,className:"text-[#E7FE55]"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-sm font-semibold text-white",children:"Audit Log"}),d.jsxs("p",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:[u.total," total entries"]})]})]}),d.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 px-3 py-1.5 bg-[#1a1b21] hover:bg-[#232328] rounded text-[10px] text-[#a0a1a8] hover:text-white transition-colors border border-[#232328]",children:[d.jsx(Vs,{size:12}),"Export"]})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Total"}),d.jsx("div",{className:"text-lg font-semibold text-white font-mono",children:u.total})]}),d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Executed"}),d.jsx("div",{className:"text-lg font-semibold text-[#10b981] font-mono",children:u.executed})]}),d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Failed"}),d.jsx("div",{className:"text-lg font-semibold text-[#ef4444] font-mono",children:u.failed})]}),d.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Pending"}),d.jsx("div",{className:"text-lg font-semibold text-[#f59e0b] font-mono",children:u.pending})]})]})]}),d.jsx("div",{className:"glass-panel p-4 rounded shrink-0",children:d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[d.jsx(w8,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#747580]"}),d.jsx("input",{type:"text",value:a,onChange:x=>l(x.target.value),placeholder:"Search actions or pools...",className:"w-full pl-9 pr-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Hne,{size:14,className:"text-[#747580]"}),d.jsxs("select",{value:e,onChange:x=>n(x.target.value),className:"px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]",children:[d.jsx("option",{value:"all",children:"All Scopes"}),Object.keys(yy).map(x=>d.jsx("option",{value:x,children:yy[x].label},x))]})]}),d.jsxs("select",{value:r,onChange:x=>i(x.target.value),className:"px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]",children:[d.jsx("option",{value:"all",children:"All Status"}),d.jsx("option",{value:"executed",children:"Executed"}),d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"confirmed",children:"Confirmed"}),d.jsx("option",{value:"rejected",children:"Rejected"}),d.jsx("option",{value:"failed",children:"Failed"})]}),d.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[c.length," / ",t.length]})]})}),d.jsx("div",{className:"glass-panel rounded flex-1 min-h-0 overflow-hidden",children:c.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[d.jsx(uH,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No audit entries found"}),d.jsx("p",{className:"text-[11px] text-[#5a5b63]",children:"LP operations will be logged here"})]}):d.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar divide-y divide-[#232328]",children:c.map(x=>{var v,b;return d.jsxs("div",{className:"hover:bg-[#1a1b21]/50 transition-colors",children:[d.jsxs("button",{onClick:()=>o(s===x.id?null:x.id),className:"w-full px-5 py-4 flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[m(x.status),d.jsxs("div",{className:"text-left",children:[d.jsx("div",{className:"text-sm text-white font-medium",children:x.action}),d.jsxs("div",{className:"text-[10px] text-[#747580] flex items-center gap-2",children:[d.jsx("span",{className:"px-1.5 py-0.5 rounded bg-[#232328] text-[9px] uppercase",children:(v=yy[x.scope])==null?void 0:v.label}),d.jsx("span",{children:""}),d.jsx("span",{children:x.poolName||((b=x.poolAddress)==null?void 0:b.slice(0,8))||"N/A"})]})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase border ${g(x.status)}`,children:x.status}),d.jsx("div",{className:"text-[10px] text-[#747580] mt-1 font-mono",children:new Date(x.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s===x.id?d.jsx(lh,{size:16,className:"text-[#747580]"}):d.jsx(aa,{size:16,className:"text-[#747580]"})]})]}),s===x.id&&d.jsxs("div",{className:"px-5 pb-4 pt-0 space-y-4",children:[x.rationale&&d.jsxs("div",{className:"bg-[#0f1015] rounded p-4 border border-[#232328]",children:[d.jsx("div",{className:"text-[9px] uppercase tracking-wider text-[#E7FE55] mb-2 font-semibold",children:"Rationale"}),d.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',x.rationale,'"']})]}),x.policyViolations&&x.policyViolations.length>0&&d.jsxs("div",{className:"bg-[#ef4444]/5 border border-[#ef4444]/30 rounded p-4",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsx(to,{size:14,className:"text-[#ef4444]"}),d.jsx("span",{className:"text-[10px] font-semibold text-[#ef4444] uppercase tracking-wider",children:"Policy Violations"})]}),d.jsx("ul",{className:"text-[12px] text-[#ef4444]/80 space-y-1",children:x.policyViolations.map((w,k)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{className:"text-[#ef4444]",children:""}),w]},k))})]}),Object.keys(x.params).length>0&&d.jsxs("div",{children:[d.jsx("div",{className:"text-[9px] uppercase tracking-wider text-[#747580] mb-2 font-semibold",children:"Parameters"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(x.params).map(([w,k])=>d.jsxs("div",{className:"bg-[#0f1015] rounded px-3 py-2 border border-[#232328]",children:[d.jsx("span",{className:"text-[9px] text-[#747580] uppercase",children:w}),d.jsx("div",{className:"text-[12px] text-white font-mono truncate",children:typeof k=="object"?JSON.stringify(k):String(k)})]},w))})]}),x.txSignature&&d.jsxs("div",{className:"flex items-center gap-3 pt-2 border-t border-[#232328]",children:[d.jsx("span",{className:"text-[9px] uppercase tracking-wider text-[#747580]",children:"Transaction"}),d.jsxs("a",{href:`https://explorer.solana.com/tx/${x.txSignature}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-[#3b82f6] hover:text-[#60a5fa] transition-colors font-mono",children:[x.txSignature.slice(0,16),"...",x.txSignature.slice(-8),d.jsx(mm,{size:10})]})]})]})]},x.id)})})})]})},qmt=({log:t,index:e})=>{const[n,r]=A.useState(!1),i=t.details&&(typeof t.details=="object"?Object.keys(t.details).length>0:!0),s=a=>{switch(a){case"ERROR":return d.jsx(Pw,{size:14,className:"text-[#ef4444]"});case"WARNING":return d.jsx(to,{size:14,className:"text-[#f59e0b]"});case"OPERATION":return d.jsx(To,{size:14,className:"text-[#3b82f6]"});case"POLICY":return d.jsx(uh,{size:14,className:"text-[#a855f7]"});default:return d.jsx(Vne,{size:14,className:"text-[#747580]"})}},o=a=>{switch(a){case"ERROR":return"bg-[#ef4444]/15 text-[#ef4444] border-[#ef4444]/30";case"WARNING":return"bg-[#f59e0b]/15 text-[#f59e0b] border-[#f59e0b]/30";case"OPERATION":return"bg-[#3b82f6]/15 text-[#3b82f6] border-[#3b82f6]/30";case"POLICY":return"bg-[#a855f7]/15 text-[#a855f7] border-[#a855f7]/30";default:return"bg-[#747580]/15 text-[#747580] border-[#747580]/30"}};return d.jsxs("div",{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",children:[d.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[s(t.type),d.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] uppercase tracking-wider font-medium border ${o(t.type)}`,children:t.type}),d.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),i&&d.jsx("button",{onClick:()=>r(!n),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:n?"Collapse details":"Expand details",children:n?d.jsx(aa,{className:"h-4 w-4"}):d.jsx(Ul,{className:"h-4 w-4"})})]}),i&&n&&d.jsx("pre",{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",children:typeof t.details=="string"?t.details:JSON.stringify(t.details,null,2)})]})]})},Gmt=({logs:t})=>{const e=t.filter(n=>n.type==="POLICY"||n.type==="OPERATION"||n.message.toLowerCase().includes("analyzing"));return e.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[d.jsx(Ao,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No reasoning activity yet"}),d.jsx("p",{className:"text-xs text-[#5a5b63]",children:"AI analysis will appear here during operations"})]}):d.jsx("div",{className:"p-4 space-y-4",children:e.slice(0,20).map((n,r)=>d.jsxs("div",{className:`p-4 rounded-lg border-l-2 ${n.type==="POLICY"?"bg-[#a855f7]/5 border-[#a855f7]":n.type==="OPERATION"?"bg-[#3b82f6]/5 border-[#3b82f6]":"bg-[#E7FE55]/5 border-[#E7FE55]"}`,children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[n.type==="POLICY"?d.jsx(uh,{size:14,className:"text-[#a855f7]"}):n.type==="OPERATION"?d.jsx(To,{size:14,className:"text-[#3b82f6]"}):d.jsx(Ao,{size:14,className:"text-[#E7FE55]"}),d.jsx("span",{className:`text-[10px] font-medium uppercase ${n.type==="POLICY"?"text-[#a855f7]":n.type==="OPERATION"?"text-[#3b82f6]":"text-[#E7FE55]"}`,children:n.type})]}),d.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(n.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),d.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed",children:n.message}),n.details&&d.jsx("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:d.jsx("pre",{className:"text-[10px] text-[#747580] font-mono overflow-x-auto",children:typeof n.details=="string"?n.details:JSON.stringify(n.details,null,2)})})]},n.id))})},Kmt=({logs:t})=>{const[e,n]=A.useState("thinking"),r=A.useRef(null),i=()=>{Zr.clearLogs()},s=()=>{const o=JSON.stringify(t,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(o),l=`solana_dealer_logs_${new Date().toISOString()}.json`,c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",l),c.click()};return d.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[d.jsx("div",{className:"glass-panel p-4 rounded shrink-0",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[d.jsxs("button",{onClick:()=>n("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${e==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(Ao,{className:"h-4 w-4"}),"Thinking"]}),d.jsxs("button",{onClick:()=>n("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${e==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[d.jsx(b8,{className:"h-4 w-4"}),"Activity Log",t.length>0&&d.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.length})]})]}),e==="logs"&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:i,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:d.jsx(gm,{className:"h-4 w-4"})}),d.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:d.jsx(Vs,{className:"h-4 w-4"})})]})]})}),d.jsxs("div",{className:"glass-panel rounded flex-1 min-h-0 overflow-hidden flex flex-col",children:[e==="thinking"&&d.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:d.jsx(Gmt,{logs:t})}),e==="logs"&&d.jsx("div",{ref:r,className:"flex-1 overflow-y-auto custom-scrollbar",children:t.length===0?d.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[d.jsx(pC,{className:"h-10 w-10 opacity-30"}),d.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):d.jsx("div",{className:"p-2",children:t.map((o,a)=>d.jsx(qmt,{log:o,index:a},o.id))})})]})]})},Wmt=({activeTab:t,walletAddress:e})=>{const n=Rpt(),r=()=>{switch(t){case we.SOLANA_DEALER:case we.SOLANA_DEALER_DASHBOARD:return d.jsx(Tee,{state:n,walletAddress:e});case we.SOLANA_DEALER_THINKING:return d.jsx(Kmt,{logs:n.logs});case we.SOLANA_DEALER_POLICY:return d.jsx(Hmt,{policy:n.settings.policy});case we.SOLANA_DEALER_LOG:return d.jsx(Vmt,{auditLog:n.auditLog});default:return d.jsx(Tee,{state:n,walletAddress:e})}};return d.jsx("div",{className:"h-full flex flex-col",children:r()})},Z0e=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return d.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:d.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[d.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Privacy Policy"}),d.jsx("p",{className:"text-slate-400",children:"Last Updated: December 23, 2025"})]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:d.jsx(QT,{size:24})})]}),d.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6 mb-8",children:d.jsx("p",{className:"text-blue-200 text-sm",children:"This Privacy Policy explains how AutonomousVault handles your data. In short: We don't want your data, and we can't see your keys."})}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(fC,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Data Collection & Storage"})]}),d.jsxs("p",{className:"leading-relaxed text-slate-300",children:["AutonomousVault operates on a ",d.jsx("strong",{children:'"Local-First"'})," architecture."]}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Private Keys:"})," Generated locally and stored ONLY in your browser's encrypted storage (IndexedDB). They never leave your device unencrypted."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Chat History:"})," Stored locally on your device."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Usage Data:"})," We do not collect analytics or tracking data."]})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(hC,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Third-Party Services"})]}),d.jsx("p",{className:"leading-relaxed text-slate-300",children:"While the app runs locally, it interacts with the following services to function:"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[d.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[d.jsx("h3",{className:"text-white font-medium mb-1",children:"Google Gemini (AI)"}),d.jsx("p",{className:"text-xs text-slate-400",children:"Processes user prompts to generate responses. Your keys are NOT sent to the AI."})]}),d.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[d.jsx("h3",{className:"text-white font-medium mb-1",children:"Supabase (Auth & Database)"}),d.jsx("p",{className:"text-xs text-slate-400",children:"Handles authentication (Email/Google), user settings, and encrypted conversation history (if 24/7 mode is enabled). We only see your User ID and Email."})]}),d.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[d.jsx("h3",{className:"text-white font-medium mb-1",children:"RPC Nodes"}),d.jsx("p",{className:"text-xs text-slate-400",children:"Public nodes (Solana, Hyperliquid, Polygon) receive your signed transactions to execute them on-chain."})]})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(ch,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Your Rights (GDPR/LGPD)"})]}),d.jsx("p",{className:"leading-relaxed text-slate-300",children:"You have complete control over your data:"}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Access:"})," All your data is visible within the application."]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Deletion:"}),' You can use the "Delete Account" button in Settings to wipe all local data and delete your Supabase authentication record.']}),d.jsxs("li",{children:[d.jsx("strong",{children:"Portability:"})," You can export your private keys at any time via the Backup feature."]})]})]}),d.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[d.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),d.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[d.jsx(QT,{size:14})," Return to App"]})]})]})})},ege=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return d.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:d.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[d.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Terms of Use"}),d.jsx("p",{className:"text-slate-400",children:"Effective Date: December 23, 2025"})]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:d.jsx(QT,{size:24})})]}),d.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 flex flex-col gap-4",children:[d.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[d.jsx(to,{size:24}),d.jsx("h2",{className:"text-xl font-semibold",children:"Critical Disclaimer"})]}),d.jsx("p",{className:"text-sm leading-relaxed text-red-100/80",children:'AutonomousVault is experimental, open-source software. It is provided "AS IS", without warranty of any kind. You use this software entirely at your own risk. The developers constitute a non-custodial entity and accept no liability for lost funds, private key mismanagement, or protocol failures.'})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(M3,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Self-Custody Model"})]}),d.jsx("p",{className:"leading-relaxed text-slate-300",children:"By using AutonomousVault, you acknowledge that:"}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsx("li",{children:"You are the sole custodian of your cryptographic private keys."}),d.jsx("li",{children:"Private keys are encrypted and stored solely within your device's browser (IndexedDB)."}),d.jsx("li",{children:"We (the developers) never have access to your private keys or funds."}),d.jsx("li",{children:"If you lose your password or clear your browser data without a backup, your funds are permanently lost."})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(uh,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Universal Data Liability"})]}),d.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(to,{className:"text-red-400 shrink-0 mt-1",size:20}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-red-200 font-medium",children:"Full User Responsibility"}),d.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The user assumes ",d.jsx("strong",{children:"FULL RESPONSIBILITY"})," for data security, custody, and management in ",d.jsx("strong",{children:"ALL MODES OF OPERATION"}),' (including "Local-Only" and "24/7 Server Mode").']}),d.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The application always operates on the user's own infrastructure (local machine or personal Supabase database). The developers of AutonomousVault accept ",d.jsx("strong",{children:"NO LIABILITY"})," for data loss, unauthorized access, key compromise, or any other security breaches under any circumstances."]})]})]})})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(pC,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Experimental Protocols & Risks"})]}),d.jsxs("div",{className:"space-y-4 text-slate-300",children:[d.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[d.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-400"}),"Hyperliquid (Testnet)"]}),d.jsxs("p",{className:"text-sm",children:["Trading on Hyperliquid is currently on ",d.jsx("strong",{children:"Testnet"}),". While no real funds are at risk on Testnet, the trading logic is experimental. The AI Agent's performance on Testnet does not guarantee future results on Mainnet."]})]}),d.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[d.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[d.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-400"}),"Polymarket (Prediction Markets)"]}),d.jsxs("p",{className:"text-sm",children:["Prediction markets involve high risk. The AI Agent provides analysis based on available data, but ",d.jsx("strong",{children:"outcome predictions are never guaranteed"}),"."]}),d.jsxs("p",{className:"text-sm mt-2 text-slate-400 italic",children:[d.jsx("strong",{children:"Regular compliance:"})," You are solely responsible for ensuring that using prediction markets complies with the laws of your jurisdiction."]})]})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(M3,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"4. AI Agent Autonomy"})]}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsx("li",{children:"The AI Agent executes instructions based on your prompts."}),d.jsx("li",{children:"It may generate code, execute transactions (Solana), trade perps (Hyperliquid), or interact with prediction markets (Polymarket)."}),d.jsxs("li",{children:[d.jsx("strong",{children:"You are the final approver."})," While the agent can be autonomous, you are responsible for monitoring its actions."]}),d.jsx("li",{children:"The developers are not liable for losses caused by AI hallucination, error, or unintended execution."})]})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[d.jsx(uh,{size:20}),d.jsx("h2",{className:"text-2xl font-light text-white",children:"5. Prohibited Activities"})]}),d.jsx("p",{className:"leading-relaxed text-slate-300",children:"You agree not to use AutonomousVault for:"}),d.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[d.jsx("li",{children:"Money laundering or financing terrorism."}),d.jsx("li",{children:"Interacting with sanctioned addresses or entities."}),d.jsx("li",{children:"Any illegal activity defined by the laws of your jurisdiction."})]})]}),d.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[d.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),d.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[d.jsx(QT,{size:14})," Return to App"]})]})]})})},Ymt=({userId:t})=>{const[e,n]=A.useState(!0),[r,i]=A.useState(!0),s=t?`legal_consent_v1_${t}`:null;A.useEffect(()=>{(async()=>{if(!s){i(!1);return}const l=await ke.getItem(s);n(l==="true"),i(!1)})()},[s]);const o=async()=>{s&&await ke.setItem(s,"true"),n(!0)};return r||e?null:d.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-[#0f172a] border border-slate-700 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden",children:[d.jsxs("div",{className:"p-8 pb-4 text-center",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#E7FE55]/10 mb-4",children:d.jsx(ld,{size:32,className:"text-[#E7FE55]"})}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Welcome to AutonomousVault"}),d.jsx("p",{className:"text-slate-400 text-sm",children:"Use AI to manage your DeFi portfolio autonomously."})]}),d.jsxs("div",{className:"px-8 py-4 space-y-4",children:[d.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 text-sm text-slate-300 border border-slate-700",children:[d.jsx("p",{className:"mb-2 font-semibold text-white",children:"Before you continue:"}),d.jsxs("ul",{className:"space-y-2 list-disc pl-4 text-slate-400",children:[d.jsxs("li",{children:["This software is ",d.jsx("strong",{children:"experimental"}),"."]}),d.jsxs("li",{children:["You maintain ",d.jsx("strong",{children:"sole custody"})," of your keys."]}),d.jsxs("li",{children:["The developers are ",d.jsx("strong",{children:"not liable"})," for any funds lost."]})]})]}),d.jsxs("p",{className:"text-sm text-center text-slate-400 mt-4 leading-relaxed",children:['By clicking "I Agree", you acknowledge that you have read and agree to our',d.jsx("br",{}),d.jsx("a",{href:"/terms.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline font-medium",children:"Terms of Use"})," and ",d.jsx("a",{href:"/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline font-medium",children:"Privacy Policy"}),"."]})]}),d.jsx("div",{className:"p-8 pt-4",children:d.jsxs("button",{onClick:o,className:"w-full bg-[#E7FE55] hover:bg-[#d9f044] text-black font-bold py-3.5 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-[#E7FE55]/20",children:["I Agree & Continue ",d.jsx(Fne,{size:18})]})})]})})},Jmt=({onNavigate:t})=>d.jsx("footer",{className:"w-full py-4 text-center mt-auto border-t border-[#232328]/50",children:d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx("p",{className:"text-[10px] text-slate-600 font-medium tracking-wide",children:" 2025 AutonomousVault. All rights reserved."}),t&&d.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-slate-500",children:[d.jsx("button",{onClick:()=>t(we.TERMS),className:"hover:text-[#E7FE55] transition-colors",children:"Terms of Use"}),d.jsx("span",{children:""}),d.jsx("button",{onClick:()=>t(we.PRIVACY),className:"hover:text-[#E7FE55] transition-colors",children:"Privacy Policy"})]})]})});function Xmt(){var ca,Ql,Po,_o,ua,Io,xr,Zc;const[t,e]=A.useState(we.AGENT),[n,r]=A.useState([]),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,c]=A.useState("providers"),[u,h]=A.useState("main"),{user:m,logout:g}=L1(),x=A.useRef(null);A.useEffect(()=>{x.current&&(x.current.scrollTop=0)},[t]);const v=vr=>{const Yr=Date.now();r(ps=>[...ps,{id:Yr,message:vr}]),setTimeout(()=>{r(ps=>ps.filter(Ih=>Ih.id!==Yr))},5e3)},{vault:b,password:w,setPassword:k,withdrawAmount:C,setWithdrawAmount:R,withdrawNetwork:B,setWithdrawNetwork:O,showBackupModal:F,setShowBackupModal:H,backupKey:j,setBackupKey:$,showHLBackupModal:W,setShowHLBackupModal:V,hlBackupKey:U,setHLBackupKey:T,isImporting:_,setIsImporting:L,importKey:z,setImportKey:G,refreshBalance:te,connectOwnerWallet:K,disconnectOwnerWallet:q,createVault:M,unlockVault:P,requestAirdrop:Y,handleWithdraw:X,handleWithdrawHL:re,handleWithdrawPM:ae,importVault:Te,resolveTokenMint:ue,connectHLOwnerWallet:pe,disconnectHLOwnerWallet:be,refreshHLBalance:se,isImportingSolana:ve,setIsImportingSolana:Re,isImportingHyperliquid:De,setIsImportingHyperliquid:Qe,isImportingPolymarket:it,setIsImportingPolymarket:et,solanaPassword:tt,setSolanaPassword:mt,hyperliquidPassword:dt,setHyperliquidPassword:Wt,polymarketPassword:qe,setPolymarketPassword:Tt,solanaImportKey:ln,setSolanaImportKey:Ie,hlImportKey:Ve,setHLImportKey:gt,pmImportKey:ut,setPMImportKey:oe,createSolanaVault:J,createHyperliquidVault:Z,createPolymarketVault:de,importSolanaVault:Ae,importHyperliquidVault:fe,importPolymarketVault:ge,connectPMOwnerWallet:Ye,disconnectPMOwnerWallet:Je,showPMBackupModal:ot,setShowPMBackupModal:Ft,pmBackupKey:Et,setPMBackupKey:Mt}=mpt(v,(m==null?void 0:m.uid)||null),cn=!!(b.publicKey||b.hlPublicKey);A.useEffect(()=>{const vr=[we.VAULT,we.PRIVACY,we.TERMS];cn&&!b.isUnlocked&&!vr.includes(t)&&e(we.VAULT)},[t,b.isUnlocked,cn]),A.useEffect(()=>{b.isUnlocked&&e(we.DASHBOARD)},[b.isUnlocked]);const{portfolioHistoryDaily:en,portfolioHistoryLongTerm:rn,assetPrices:Ni,assetAllocationData:zn}=gpt(b),{activityFeed:le,activityDisplayCount:Q,addActivityLog:ee}=ypt(b),{scheduledTasks:he,setScheduledTasks:Pe}=xpt(b,w,v,te,ee),{messages:Oe,inputMessage:ze,setInputMessage:Xt,isAiProcessing:$t,aiStatus:st,scrollRef:mn,handleSendMessage:bt,activeConversationId:vn,loadConversation:sl,startNewConversation:ur}=Lpt(b,w,Pe,v,te,ee,ue);m0e(b,w);const yr=async vr=>{try{const Yr=await Jo.loadConversation(vr,w);Yr?sl(Yr):v("Failed to load conversation.")}catch(Yr){console.error(Yr),v("Error loading conversation. Check password.")}},Qc=()=>{ur(),e(we.AGENT)},Xl=async()=>{v("Refreshing data...");try{const vr=[];b.publicKey&&vr.push(te(b.publicKey)),b.hlPublicKey&&vr.push(se(b.hlPublicKey)),await Promise.all(vr),v("Data refreshed successfully")}catch(vr){console.error("Refresh failed",vr),v("Failed to refresh data")}};return d.jsxs("div",{className:"flex h-screen bg-[#0f1015] text-[#e4e5e9] font-sans selection:bg-[#E7FE55]/30 overflow-hidden",children:[d.jsx(BOe,{activeTab:t,setActiveTab:e,isVaultUnlocked:b.isUnlocked,onSelectConversation:yr,onNewChat:Qc,currentConversationId:vn,password:w,isOpen:i,onClose:()=>s(!1)}),d.jsxs("main",{ref:x,className:`flex-1 ml-0 xl:ml-[264px] h-full flex flex-col relative transition-all duration-300 ${[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT,we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT,we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)?"overflow-hidden":"overflow-y-auto"}`,children:[t===we.AGENT&&d.jsxs("header",{className:"flex justify-between items-center mb-0 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 px-4 md:px-8 lg:px-12 xl:px-16 transition-all shrink-0 relative",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:d.jsx(fH,{size:24})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Vault Operator"}),d.jsx("p",{className:"text-[#747580] text-sm hidden sm:block",children:"Interact with Vault Operator using natural language."})]})]}),d.jsxs("div",{className:"hidden sm:flex items-center gap-2 absolute left-1/2 transform -translate-x-1/2",children:[d.jsxs("button",{onClick:Qc,className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#E7FE55] hover:bg-[#f0ff7a] text-black text-sm font-medium transition-colors",title:"New Chat",children:[d.jsx("div",{className:"w-5 h-5 rounded bg-black/20 flex items-center justify-center",children:d.jsx(kl,{size:12,strokeWidth:2.5})}),d.jsx("span",{className:"hidden md:inline",children:"New"})]}),d.jsx("div",{className:"h-6 w-px bg-[#232328]"}),d.jsxs("button",{onClick:()=>e(we.HISTORY),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Chat History",children:[d.jsx(fs,{size:14}),d.jsx("span",{className:"hidden md:inline",children:"History"})]}),d.jsxs("button",{onClick:()=>e(we.SCHEDULER),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Automations",children:[d.jsx(h8,{size:14}),d.jsx("span",{className:"hidden md:inline",children:"Automations"})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-right hidden md:block",children:[d.jsx("div",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:"System Status"}),d.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[#E7FE55] text-[11px] font-medium",children:[d.jsx("div",{className:"w-1 h-1 bg-[#E7FE55] rounded-full"}),"Online"]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(m==null?void 0:m.email)||"User",children:m!=null&&m.photoURL?d.jsx("img",{src:m.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((Ql=(ca=m==null?void 0:m.email)==null?void 0:ca[0])==null?void 0:Ql.toUpperCase())||"U"})}),o&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),d.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[d.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:d.jsxs("div",{className:"flex items-center gap-3",children:[m!=null&&m.photoURL?d.jsx("img",{src:m.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((_o=(Po=m==null?void 0:m.email)==null?void 0:Po[0])==null?void 0:_o.toUpperCase())||"U"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-white text-sm font-medium truncate",children:(m==null?void 0:m.displayName)||"User"}),d.jsx("p",{className:"text-[#747580] text-xs truncate",children:m==null?void 0:m.email})]})]})}),d.jsxs("div",{className:"p-2 space-y-1",children:[d.jsxs("button",{onClick:()=>{a(!1),Xl()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(Fl,{size:16}),"Refresh Data"]}),d.jsxs("button",{onClick:()=>{a(!1),e(we.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(ek,{size:16}),"Configuration"]}),d.jsx("div",{className:"border-t border-[#232328] my-2"}),d.jsxs("button",{onClick:async()=>{a(!1),await g()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(dH,{size:16}),"Sign Out"]})]})]})]})]})]})]}),d.jsxs("div",{className:`flex-1 pb-8 max-w-[1920px] mx-auto w-full ${t===we.AGENT?"px-6 md:px-24 lg:px-40 xl:px-64":"px-4 md:px-8 lg:px-12 xl:px-16"} ${[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT,we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t)?"flex flex-col h-full":""}`,children:[t!==we.AGENT&&d.jsxs("header",{className:"flex justify-between items-center mb-6 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 -mx-4 px-4 md:px-0 md:-mx-0 transition-all shrink-0",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:d.jsx(fH,{size:24})}),d.jsx("div",{className:"flex items-center gap-4",children:d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-semibold text-white tracking-tight",children:[t===we.DASHBOARD&&"Dashboard",t===we.VAULT&&"Vault",t===we.SCHEDULER&&"Automations",[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t)&&"Hyperliquid Dealer",[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)&&"Solana Dealer",t===we.CONFIGURATION&&"Configuration",t===we.HYPERLIQUID&&"Hyperliquid Trading",t===we.HISTORY&&"History",t===we.TOKEN_COSTS&&"Token Costs",[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD].includes(t)&&"Polymarket Dealer",t===we.POLYMARKET_CONFIG&&"Polymarket Config",t===we.POLYMARKET_PROMPT&&"Polymarket Strategy"]}),d.jsxs("p",{className:"text-[#747580] text-sm hidden sm:block",children:[t===we.DASHBOARD&&"Overview of your autonomous DeFi agent.",t===we.VAULT&&"Manage your secure local vault and assets.",t===we.SCHEDULER&&"Automate swaps, transfers and trading strategies.",[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t)&&"Autonomous trading engine (BETA).",[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)&&"Solana LP operations with Policy Engine.",t===we.CONFIGURATION&&"Configure trading parameters and risk management.",t===we.HYPERLIQUID&&"Trade on Hyperliquid Testnet.",t===we.HISTORY&&"Review past conversations.",t===we.TOKEN_COSTS&&"Monitor AI token consumption and costs.",[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD].includes(t)&&"Autonomous prediction market trading (BETA).",t===we.POLYMARKET_CONFIG&&"Configure Polymarket trading parameters.",t===we.POLYMARKET_PROMPT&&"Customize your Polymarket strategy."]})]})})]}),[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t)&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>e(we.DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[we.VAULT_DEALER,we.DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),d.jsx("button",{onClick:()=>e(we.DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),d.jsx("button",{onClick:()=>e(we.DEALER_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.DEALER_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),d.jsx("button",{onClick:()=>e(we.DEALER_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.DEALER_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t)&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>e(we.POLYMARKET_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),d.jsx("button",{onClick:()=>e(we.POLYMARKET_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.POLYMARKET_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),d.jsx("button",{onClick:()=>e(we.POLYMARKET_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.POLYMARKET_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),d.jsx("button",{onClick:()=>e(we.POLYMARKET_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.POLYMARKET_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>e(we.SOLANA_DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),d.jsx("button",{onClick:()=>e(we.SOLANA_DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.SOLANA_DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),d.jsx("button",{onClick:()=>e(we.SOLANA_DEALER_POLICY),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.SOLANA_DEALER_POLICY?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Policy"}),d.jsx("button",{onClick:()=>e(we.SOLANA_DEALER_LOG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===we.SOLANA_DEALER_LOG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Audit Log"})]}),t===we.CONFIGURATION&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>c("providers"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${l==="providers"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"AI Providers"}),d.jsx("button",{onClick:()=>c("user"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${l==="user"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"User Settings"})]}),t===we.VAULT&&d.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[d.jsx("button",{onClick:()=>h("main"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="main"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Overview"}),d.jsx("button",{onClick:()=>h("solana"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="solana"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Solana"}),d.jsx("button",{onClick:()=>h("hyperliquid"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="hyperliquid"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Hyperliquid"}),d.jsx("button",{onClick:()=>h("polymarket"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${u==="polymarket"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Polymarket"})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"text-right hidden md:block",children:[d.jsx("div",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:"System Status"}),d.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-[#E7FE55] text-[11px] font-medium",children:[d.jsx("div",{className:"w-1 h-1 bg-[#E7FE55] rounded-full"}),"Online"]})]}),d.jsxs("div",{className:"relative",children:[d.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(m==null?void 0:m.email)||"User",children:m!=null&&m.photoURL?d.jsx("img",{src:m.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):d.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((Io=(ua=m==null?void 0:m.email)==null?void 0:ua[0])==null?void 0:Io.toUpperCase())||"U"})}),o&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),d.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[d.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:d.jsxs("div",{className:"flex items-center gap-3",children:[m!=null&&m.photoURL?d.jsx("img",{src:m.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((Zc=(xr=m==null?void 0:m.email)==null?void 0:xr[0])==null?void 0:Zc.toUpperCase())||"U"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-white text-sm font-medium truncate",children:(m==null?void 0:m.displayName)||"User"}),d.jsx("p",{className:"text-[#747580] text-xs truncate",children:m==null?void 0:m.email})]})]})}),d.jsxs("div",{className:"p-2 space-y-1",children:[d.jsxs("button",{onClick:()=>{a(!1),Xl()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(Fl,{size:16}),"Refresh Data"]}),d.jsxs("button",{onClick:()=>{a(!1),e(we.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(ek,{size:16}),"Configuration"]}),d.jsx("div",{className:"border-t border-[#232328] my-2"}),d.jsxs("button",{onClick:async()=>{a(!1),await g()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[d.jsx(dH,{size:16}),"Sign Out"]})]})]})]})]})]})]}),d.jsxs("div",{className:`animate-fade-in ${[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT,we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t)?"flex-1 min-h-0":""}`,children:[t===we.DASHBOARD&&d.jsx(iKe,{vault:b,connectOwnerWallet:K,disconnectOwnerWallet:q,connectHLOwnerWallet:pe,disconnectHLOwnerWallet:be,connectPMOwnerWallet:Ye,disconnectPMOwnerWallet:Je,assetPrices:Ni,portfolioHistoryDaily:en,portfolioHistoryLongTerm:rn,scheduledTasks:he,assetAllocationData:zn,activityFeed:le,activityDisplayCount:Q,setActiveTab:e,refreshData:Xl,onNewChat:Qc,setActivityDisplayCount:function(vr){throw new Error("Function not implemented.")}}),t===we.VAULT&&d.jsx(sKe,{vault:b,password:w,setPassword:k,withdrawAmount:C,setWithdrawAmount:R,withdrawNetwork:B,setWithdrawNetwork:O,isImporting:_,setIsImporting:L,importKey:z,setImportKey:G,createVault:M,unlockVault:P,requestAirdrop:Y,handleWithdraw:X,handleWithdrawHL:re,handleWithdrawPM:ae,importVault:Te,addNotification:v,isImportingSolana:ve,setIsImportingSolana:Re,isImportingHyperliquid:De,setIsImportingHyperliquid:Qe,isImportingPolymarket:it,setIsImportingPolymarket:et,solanaPassword:tt,setSolanaPassword:mt,hyperliquidPassword:dt,setHyperliquidPassword:Wt,polymarketPassword:qe,setPolymarketPassword:Tt,solanaImportKey:ln,setSolanaImportKey:Ie,hlImportKey:Ve,setHLImportKey:gt,pmImportKey:ut,setPMImportKey:oe,createSolanaVault:J,createHyperliquidVault:Z,createPolymarketVault:de,importSolanaVault:Ae,importHyperliquidVault:fe,importPolymarketVault:ge,setActiveTab:e,activeVaultTab:u,setActiveVaultTab:h}),t===we.AGENT&&d.jsx(zZe,{messages:Oe,inputMessage:ze,setInputMessage:Xt,handleSendMessage:bt,isAiProcessing:$t,aiStatus:st,scrollRef:mn,isVaultUnlocked:b.isUnlocked,password:w,setPassword:k,unlockVault:P,hasVault:!!(b.publicKey||b.hlPublicKey),onNavigate:e}),t===we.HISTORY&&d.jsx(zpt,{onSelectConversation:vr=>{yr(vr),e(we.AGENT)}}),t===we.SCHEDULER&&d.jsx(VZe,{scheduledTasks:he,setScheduledTasks:Pe,addNotification:v}),[we.VAULT_DEALER,we.DEALER_DASHBOARD,we.DEALER_THINKING,we.DEALER_CONFIG,we.DEALER_PROMPT].includes(t)&&d.jsx(klt,{vault:b,password:w,activeTab:t,setActiveTab:e}),t===we.CONFIGURATION&&d.jsx(Rmt,{vault:b,password:w,addNotification:v,activeTab:l,setActiveTab:c}),t===we.HYPERLIQUID&&d.jsx(Clt,{vault:b,connectHLOwnerWallet:pe,refreshHLBalance:se,activityLog:le}),t===we.TOKEN_COSTS&&d.jsx(Mmt,{addNotification:v}),[we.POLYMARKET_DEALER,we.POLYMARKET_DASHBOARD,we.POLYMARKET_THINKING,we.POLYMARKET_CONFIG,we.POLYMARKET_PROMPT].includes(t)&&d.jsx(zmt,{vault:b,password:w,activeTab:t,setActiveTab:e}),[we.SOLANA_DEALER,we.SOLANA_DEALER_DASHBOARD,we.SOLANA_DEALER_THINKING,we.SOLANA_DEALER_POLICY,we.SOLANA_DEALER_LOG].includes(t)&&d.jsx(Wmt,{activeTab:t,walletAddress:b.publicKey||void 0}),t===we.PRIVACY&&d.jsx(Z0e,{onBack:()=>e(we.DASHBOARD)}),t===we.TERMS&&d.jsx(ege,{onBack:()=>e(we.DASHBOARD)})]})]}),t!==we.AGENT&&d.jsx(Jmt,{onNavigate:e})]}),d.jsx("div",{className:"fixed bottom-6 right-6 z-[60] space-y-2 pointer-events-none",children:n.map(vr=>d.jsxs("div",{className:"bg-[#14151a] border border-[#232328] text-white px-4 py-3 rounded shadow-xl flex items-center gap-3 animate-slide-up pointer-events-auto max-w-sm",children:[d.jsx("div",{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full"}),d.jsx("span",{className:"text-sm font-medium",children:vr.message}),d.jsx("button",{onClick:()=>r(Yr=>Yr.filter(ps=>ps.id!==vr.id)),className:"text-[#747580] hover:text-white ml-2",children:d.jsx(ux,{size:14})})]},vr.id))}),F&&d.jsx(Uct,{backupKey:j,setBackupKey:$,setShowBackupModal:H,addNotification:v,onClose:()=>{V(!0)}}),W&&d.jsx(Fct,{backupKey:U,setBackupKey:T,setShowBackupModal:V,addNotification:v}),ot&&d.jsx($ct,{backupKey:Et,setBackupKey:Mt,setShowBackupModal:Ft,addNotification:v}),d.jsx(Ymt,{userId:(m==null?void 0:m.uid)||null})]})}function Qmt(){const{signInWithGoogle:t,signInWithGitHub:e,signInWithDiscord:n,signInWithEthereum:r,signInWithSolana:i,signInWithEmail:s,signUp:o}=L1(),[a,l]=A.useState(""),[c,u]=A.useState(""),[h,m]=A.useState(!1),[g,x]=A.useState(!1),[v,b]=A.useState(null),[w,k]=A.useState(!1),[C,R]=A.useState(null),B=async H=>{b(null),R(H);try{H==="google"?await t():H==="github"?await e():H==="discord"&&await n()}catch(j){b(j.message||`Failed to sign in with ${H}`)}finally{R(null)}},O=async H=>{b(null),R(H);try{H==="ethereum"?await r():await i()}catch(j){b(j.message||`Failed to sign in with ${H}`)}finally{R(null)}},F=async H=>{H.preventDefault(),b(null),k(!0);try{h?await o(a,c):await s(a,c)}catch(j){const $=j.code||"";$.includes("user-not-found")?b("No account found with this email"):$.includes("wrong-password")?b("Incorrect password"):$.includes("email-already-in-use")?b("An account already exists with this email"):$.includes("weak-password")?b("Password should be at least 6 characters"):$.includes("invalid-email")?b("Invalid email address"):b(j.message||"Authentication failed")}finally{k(!1)}};return d.jsx("div",{className:"min-h-screen bg-[#0f1015] flex items-center justify-center p-4",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-[#E7FE55] to-[#c8e044] rounded-2xl mb-4 shadow-lg shadow-[#E7FE55]/20",children:d.jsxs("svg",{className:"w-8 h-8 text-black",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),d.jsx("path",{d:"M12 8v4"}),d.jsx("path",{d:"M12 16h.01"})]})}),d.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"AutonomousVault"}),d.jsx("p",{className:"text-[#747580] text-sm",children:"Multi-Chain DeFi Agent"})]}),d.jsxs("div",{className:"bg-[#14151a] border border-[#232328] rounded-xl p-6 shadow-xl",children:[d.jsx("h2",{className:"text-lg font-semibold text-white mb-6 text-center",children:h?"Create Account":"Welcome Back"}),v&&d.jsxs("div",{className:"flex items-center gap-2 bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-4",children:[d.jsx(p8,{size:16}),d.jsx("span",{className:"text-sm",children:v})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[d.jsxs("button",{onClick:()=>B("google"),disabled:C!==null,className:"flex items-center justify-center gap-2 bg-white hover:bg-gray-100 text-gray-800 font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),C==="google"?"...":"Google"]}),d.jsxs("button",{onClick:()=>B("github"),disabled:C!==null,className:"flex items-center justify-center gap-2 bg-[#24292e] hover:bg-[#2d3339] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0112 6.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})}),C==="github"?"...":"GitHub"]}),d.jsxs("button",{onClick:()=>B("discord"),disabled:C!==null,className:"flex items-center justify-center gap-2 bg-[#5865F2] hover:bg-[#4752c4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),C==="discord"?"...":"Discord"]}),d.jsxs("button",{onClick:()=>O("ethereum"),disabled:C!==null,className:"flex items-center justify-center gap-2 bg-[#627EEA] hover:bg-[#5470d4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Ethereum wallet (MetaMask, etc.)",children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[d.jsx("path",{d:"M12 1.5l-9 15.5L12 22l9-5-9-15.5zM12 22v-5l9-5-9 10z",opacity:"0.6"}),d.jsx("path",{d:"M12 1.5v8l9 5.5-9-13.5zM12 1.5L3 17l9-7.5V1.5z"})]}),C==="ethereum"?"...":"ETH"]}),d.jsxs("button",{onClick:()=>O("solana"),disabled:C!==null,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-[#9945FF] to-[#14F195] hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Solana wallet (Phantom, etc.)",children:[d.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:d.jsx("path",{d:"M4.5 17.88l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28l-2.12 2.12a.75.75 0 01-.53.22H4.5a.75.75 0 01-.53-1.28h.03zM4.5 5.88A.75.75 0 015.03 4.6l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28L17.91 5.66a.75.75 0 01-.53.22H4.5zM19.5 11.88l-2.12-2.12a.75.75 0 00-.53-.22H4.5a.75.75 0 00-.53 1.28l2.12 2.12a.75.75 0 00.53.22H19.5a.75.75 0 00.53-1.28z"})}),C==="solana"?"...":"SOL"]})]}),d.jsxs("div",{className:"flex items-center gap-4 my-6",children:[d.jsx("div",{className:"flex-1 h-px bg-[#232328]"}),d.jsx("span",{className:"text-[#5a5b63] text-xs uppercase tracking-wider",children:"or continue with email"}),d.jsx("div",{className:"flex-1 h-px bg-[#232328]"})]}),d.jsxs("form",{onSubmit:F,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(oke,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),d.jsx("input",{type:"email",value:a,onChange:H=>l(H.target.value),placeholder:"you@example.com",required:!0,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-4 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(ch,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),d.jsx("input",{type:g?"text":"password",value:c,onChange:H=>u(H.target.value),placeholder:"",required:!0,minLength:6,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-12 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"}),d.jsx("button",{type:"button",onClick:()=>x(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#5a5b63] hover:text-[#a0a1a8] transition-colors",children:g?d.jsx(hC,{size:16}):d.jsx(y8,{size:16})})]})]}),d.jsx("button",{type:"submit",disabled:w,className:"w-full bg-[#E7FE55] hover:bg-[#f0ff7a] text-black font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Loading...":h?"Create Account":"Sign In"})]}),d.jsxs("p",{className:"text-center text-[#747580] text-sm mt-6",children:[h?"Already have an account?":"Don't have an account?"," ",d.jsx("button",{onClick:()=>{m(!h),b(null)},className:"text-[#E7FE55] hover:underline font-medium",children:h?"Sign In":"Sign Up"})]})]}),d.jsxs("p",{className:"text-center text-[#5a5b63] text-xs mt-6",children:["By continuing, you agree to our"," ",d.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Terms of Use"})," ","and"," ",d.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Privacy Policy"})]})]})})}function Zmt({children:t}){const{user:e,loading:n}=L1();return n?d.jsx("div",{className:"h-screen w-screen bg-[#0f1015] flex items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsxs("div",{className:"relative w-12 h-12",children:[d.jsx("div",{className:"absolute inset-0 border-2 border-[#232328] rounded-full"}),d.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-[#E7FE55] rounded-full animate-spin"})]}),d.jsx("p",{className:"text-[#747580] text-sm",children:"Loading..."})]})}):e?d.jsx(d.Fragment,{children:t}):d.jsx(Qmt,{})}gy.initializeProductionSecurity();const tge=document.getElementById("root");if(!tge)throw new Error("Failed to find the root element");const Y4=Oxe.createRoot(tge),kee=window.location.pathname;kee==="/terms"?Y4.render(d.jsx(Ns.StrictMode,{children:d.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:d.jsx(ege,{onBack:()=>window.location.href="/"})})})):kee==="/privacy"?Y4.render(d.jsx(Ns.StrictMode,{children:d.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:d.jsx(Z0e,{onBack:()=>window.location.href="/"})})})):Y4.render(d.jsx(Ns.StrictMode,{children:d.jsx(Nwe,{children:d.jsx(Zmt,{children:d.jsx(Xmt,{})})})}));export{Um as $,nee as A,on as B,spt as C,cd as D,Dr as E,Xg as F,Fke as G,ik as H,sM as I,Lt as J,oa as K,Ee as L,lM as M,dse as N,GPe as O,ft as P,Ke as Q,QCe as R,JZ as S,Di as T,M_e as U,Nc as V,dd as W,ks as X,w_e as Y,Cl as Z,Qn as _,Dx as a,mM as a$,ls as a0,Bw as a1,j8 as a2,ny as a3,Wx as a4,R_e as a5,yse as a6,Ir as a7,kt as a8,Zt as a9,d_e as aA,sk as aB,vm as aC,Tc as aD,_C as aE,zw as aF,cw as aG,uV as aH,ER as aI,G1 as aJ,jPe as aK,qCe as aL,bx as aM,e_e as aN,NC as aO,us as aP,dx as aQ,no as aR,Mc as aS,lm as aT,BPe as aU,nse as aV,Fw as aW,Ls as aX,ym as aY,sse as aZ,Yke as a_,K8 as aa,O_e as ab,gr as ac,B_e as ad,F_e as ae,wm as af,hk as ag,FPe as ah,Yu as ai,VPe as aj,HPe as ak,H8 as al,ose as am,IC as an,fk as ao,UPe as ap,vo as aq,h0t as ar,Ac as as,z8 as at,tre as au,Pu as av,hV as aw,xV as ax,t2e as ay,eh as az,upt as b,th as b0,U_e as b1,Rw as b2,DH as b3,Yne as b4,Jne as b5,bh as b6,bie as b7,a0t as b8,q1 as b9,zie as bA,fd as bB,g0t as bC,gie as bD,gC as bE,E8 as bF,PV as bG,CV as bH,x0t as bI,Ap as bJ,rM as bK,o0t as bL,l2e as bM,EC as bN,Fi as bO,r0t as bP,ud as bQ,z1 as bR,$ke as bS,i0t as bT,c2e as bU,y0t as bV,v0t as bW,b0t as bX,Wne as bY,Uw as ba,mr as bb,Vke as bc,qke as bd,H1 as be,_V as bf,aIe as bg,oIe as bh,PR as bi,mPe as bj,ere as bk,Gke as bl,Oc as bm,Nse as bn,Cse as bo,pPe as bp,s0t as bq,dre as br,nk as bs,w0t as bt,cs as bu,m0t as bv,p0t as bw,E0t as bx,yC as by,wie as bz,RZ as c,Uut as d,J0t as e,Ga as f,hs as g,Kme as h,Hx as i,wh as j,Kn as k,Vx as l,Gx as m,Xa as n,I8 as o,dee as p,ye as q,td as r,qx as s,rt as t,a0e as u,On as v,yt as w,mi as x,yn as y,Zne as z};
