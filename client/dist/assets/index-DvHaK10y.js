var qxe=Object.defineProperty;var B$=t=>{throw TypeError(t)};var Gxe=(t,e,n)=>e in t?qxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ce=(t,e,n)=>Gxe(t,typeof e!="symbol"?e+"":e,n),q_=(t,e,n)=>e.has(t)||B$("Cannot "+n);var re=(t,e,n)=>(q_(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?B$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ge=(t,e,n,r)=>(q_(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),st=(t,e,n)=>(q_(t,e,"access private method"),n);var Sb=(t,e,n,r)=>({set _(i){ge(t,e,i,n)},get _(){return re(t,e,r)}});function Kxe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var tD={},TN={};TN.byteLength=Jxe;TN.toByteArray=Qxe;TN.fromByteArray=tve;var Pc=[],za=[],Wxe=typeof Uint8Array<"u"?Uint8Array:Array,G_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var X0=0,Yxe=G_.length;X0<Yxe;++X0)Pc[X0]=G_[X0],za[G_.charCodeAt(X0)]=X0;za[45]=62;za[95]=63;function ite(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Jxe(t){var e=ite(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Xxe(t,e,n){return(e+n)*3/4-n}function Qxe(t){var e,n=ite(t),r=n[0],i=n[1],s=new Wxe(Xxe(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=za[t.charCodeAt(l)]<<18|za[t.charCodeAt(l+1)]<<12|za[t.charCodeAt(l+2)]<<6|za[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=za[t.charCodeAt(l)]<<2|za[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=za[t.charCodeAt(l)]<<10|za[t.charCodeAt(l+1)]<<4|za[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Zxe(t){return Pc[t>>18&63]+Pc[t>>12&63]+Pc[t>>6&63]+Pc[t&63]}function eve(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Zxe(r));return i.join("")}function tve(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(eve(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Pc[e>>2]+Pc[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Pc[e>>10]+Pc[e>>4&63]+Pc[e<<2&63]+"=")),i.join("")}var nD={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */nD.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,g=t[e+h];for(h+=m,s=g&(1<<-d)-1,g>>=-d,d+=a;d>0;s=s*256+t[e+h],h+=m,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)};nD.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,d=(1<<c)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,v=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=v,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=v,o/=256,c-=8);t[n+g-v]|=x*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=TN,n=nD,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=D,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const se=new s(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,s.prototype),Object.setPrototypeOf(se,J),se.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function c(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');const J=new s(se);return Object.setPrototypeOf(J,d.prototype),J}function d(se,J,Z){if(typeof se=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(se)}return h(se,J,Z)}d.poolSize=8192;function h(se,J,Z){if(typeof se=="string")return x(se,J);if(o.isView(se))return w(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(Lt(se,o)||se&&Lt(se.buffer,o)||typeof a<"u"&&(Lt(se,a)||se&&Lt(se.buffer,a)))return k(se,J,Z);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ue=se.valueOf&&se.valueOf();if(ue!=null&&ue!==se)return d.from(ue,J,Z);const Se=N(se);if(Se)return Se;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return d.from(se[Symbol.toPrimitive]("string"),J,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}d.from=function(se,J,Z){return h(se,J,Z)},Object.setPrototypeOf(d.prototype,s.prototype),Object.setPrototypeOf(d,s);function m(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function g(se,J,Z){return m(se),se<=0?c(se):J!==void 0?typeof Z=="string"?c(se).fill(J,Z):c(se).fill(J):c(se)}d.alloc=function(se,J,Z){return g(se,J,Z)};function v(se){return m(se),c(se<0?0:O(se)|0)}d.allocUnsafe=function(se){return v(se)},d.allocUnsafeSlow=function(se){return v(se)};function x(se,J){if((typeof J!="string"||J==="")&&(J="utf8"),!d.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const Z=_(se,J)|0;let ue=c(Z);const Se=ue.write(se,J);return Se!==Z&&(ue=ue.slice(0,Se)),ue}function b(se){const J=se.length<0?0:O(se.length)|0,Z=c(J);for(let ue=0;ue<J;ue+=1)Z[ue]=se[ue]&255;return Z}function w(se){if(Lt(se,s)){const J=new s(se);return k(J.buffer,J.byteOffset,J.byteLength)}return b(se)}function k(se,J,Z){if(J<0||se.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<J+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let ue;return J===void 0&&Z===void 0?ue=new s(se):Z===void 0?ue=new s(se,J):ue=new s(se,J,Z),Object.setPrototypeOf(ue,d.prototype),ue}function N(se){if(d.isBuffer(se)){const J=O(se.length)|0,Z=c(J);return Z.length===0||se.copy(Z,0,0,J),Z}if(se.length!==void 0)return typeof se.length!="number"||Ie(se.length)?c(0):b(se);if(se.type==="Buffer"&&Array.isArray(se.data))return b(se.data)}function O(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return se|0}function D(se){return+se!=se&&(se=0),d.alloc(+se)}d.isBuffer=function(J){return J!=null&&J._isBuffer===!0&&J!==d.prototype},d.compare=function(J,Z){if(Lt(J,s)&&(J=d.from(J,J.offset,J.byteLength)),Lt(Z,s)&&(Z=d.from(Z,Z.offset,Z.byteLength)),!d.isBuffer(J)||!d.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===Z)return 0;let ue=J.length,Se=Z.length;for(let he=0,pe=Math.min(ue,Se);he<pe;++he)if(J[he]!==Z[he]){ue=J[he],Se=Z[he];break}return ue<Se?-1:Se<ue?1:0},d.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(J,Z){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return d.alloc(0);let ue;if(Z===void 0)for(Z=0,ue=0;ue<J.length;++ue)Z+=J[ue].length;const Se=d.allocUnsafe(Z);let he=0;for(ue=0;ue<J.length;++ue){let pe=J[ue];if(Lt(pe,s))he+pe.length>Se.length?(d.isBuffer(pe)||(pe=d.from(pe)),pe.copy(Se,he)):s.prototype.set.call(Se,pe,he);else if(d.isBuffer(pe))pe.copy(Se,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=pe.length}return Se};function _(se,J){if(d.isBuffer(se))return se.length;if(o.isView(se)||Lt(se,o))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const Z=se.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&Z===0)return 0;let Se=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return Ze(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return qe(se).length;default:if(Se)return ue?-1:Ze(se).length;J=(""+J).toLowerCase(),Se=!0}}d.byteLength=_;function F(se,J,Z){let ue=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,J>>>=0,Z<=J))return"";for(se||(se="utf8");;)switch(se){case"hex":return M(this,J,Z);case"utf8":case"utf-8":return q(this,J,Z);case"ascii":return Y(this,J,Z);case"latin1":case"binary":return H(this,J,Z);case"base64":return j(this,J,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,J,Z);default:if(ue)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),ue=!0}}d.prototype._isBuffer=!0;function z(se,J,Z){const ue=se[J];se[J]=se[Z],se[Z]=ue}d.prototype.swap16=function(){const J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<J;Z+=2)z(this,Z,Z+1);return this},d.prototype.swap32=function(){const J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<J;Z+=4)z(this,Z,Z+3),z(this,Z+1,Z+2);return this},d.prototype.swap64=function(){const J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<J;Z+=8)z(this,Z,Z+7),z(this,Z+1,Z+6),z(this,Z+2,Z+5),z(this,Z+3,Z+4);return this},d.prototype.toString=function(){const J=this.length;return J===0?"":arguments.length===0?q(this,0,J):F.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(J){if(!d.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J?!0:d.compare(this,J)===0},d.prototype.inspect=function(){let J="";const Z=t.INSPECT_MAX_BYTES;return J=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(J+=" ... "),"<Buffer "+J+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(J,Z,ue,Se,he){if(Lt(J,s)&&(J=d.from(J,J.offset,J.byteLength)),!d.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(Z===void 0&&(Z=0),ue===void 0&&(ue=J?J.length:0),Se===void 0&&(Se=0),he===void 0&&(he=this.length),Z<0||ue>J.length||Se<0||he>this.length)throw new RangeError("out of range index");if(Se>=he&&Z>=ue)return 0;if(Se>=he)return-1;if(Z>=ue)return 1;if(Z>>>=0,ue>>>=0,Se>>>=0,he>>>=0,this===J)return 0;let pe=he-Se,Je=ue-Z;const Xe=Math.min(pe,Je),ot=this.slice(Se,he),Nt=J.slice(Z,ue);for(let wt=0;wt<Xe;++wt)if(ot[wt]!==Nt[wt]){pe=ot[wt],Je=Nt[wt];break}return pe<Je?-1:Je<pe?1:0};function L(se,J,Z,ue,Se){if(se.length===0)return-1;if(typeof Z=="string"?(ue=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Ie(Z)&&(Z=Se?0:se.length-1),Z<0&&(Z=se.length+Z),Z>=se.length){if(Se)return-1;Z=se.length-1}else if(Z<0)if(Se)Z=0;else return-1;if(typeof J=="string"&&(J=d.from(J,ue)),d.isBuffer(J))return J.length===0?-1:$(se,J,Z,ue,Se);if(typeof J=="number")return J=J&255,typeof s.prototype.indexOf=="function"?Se?s.prototype.indexOf.call(se,J,Z):s.prototype.lastIndexOf.call(se,J,Z):$(se,[J],Z,ue,Se);throw new TypeError("val must be string, number or Buffer")}function $(se,J,Z,ue,Se){let he=1,pe=se.length,Je=J.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(se.length<2||J.length<2)return-1;he=2,pe/=2,Je/=2,Z/=2}function Xe(Nt,wt){return he===1?Nt[wt]:Nt.readUInt16BE(wt*he)}let ot;if(Se){let Nt=-1;for(ot=Z;ot<pe;ot++)if(Xe(se,ot)===Xe(J,Nt===-1?0:ot-Nt)){if(Nt===-1&&(Nt=ot),ot-Nt+1===Je)return Nt*he}else Nt!==-1&&(ot-=ot-Nt),Nt=-1}else for(Z+Je>pe&&(Z=pe-Je),ot=Z;ot>=0;ot--){let Nt=!0;for(let wt=0;wt<Je;wt++)if(Xe(se,ot+wt)!==Xe(J,wt)){Nt=!1;break}if(Nt)return ot}return-1}d.prototype.includes=function(J,Z,ue){return this.indexOf(J,Z,ue)!==-1},d.prototype.indexOf=function(J,Z,ue){return L(this,J,Z,ue,!0)},d.prototype.lastIndexOf=function(J,Z,ue){return L(this,J,Z,ue,!1)};function G(se,J,Z,ue){Z=Number(Z)||0;const Se=se.length-Z;ue?(ue=Number(ue),ue>Se&&(ue=Se)):ue=Se;const he=J.length;ue>he/2&&(ue=he/2);let pe;for(pe=0;pe<ue;++pe){const Je=parseInt(J.substr(pe*2,2),16);if(Ie(Je))return pe;se[Z+pe]=Je}return pe}function V(se,J,Z,ue){return it(Ze(J,se.length-Z),se,Z,ue)}function U(se,J,Z,ue){return it(at(J),se,Z,ue)}function A(se,J,Z,ue){return it(qe(J),se,Z,ue)}function I(se,J,Z,ue){return it(St(J,se.length-Z),se,Z,ue)}d.prototype.write=function(J,Z,ue,Se){if(Z===void 0)Se="utf8",ue=this.length,Z=0;else if(ue===void 0&&typeof Z=="string")Se=Z,ue=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(ue)?(ue=ue>>>0,Se===void 0&&(Se="utf8")):(Se=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-Z;if((ue===void 0||ue>he)&&(ue=he),J.length>0&&(ue<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");let pe=!1;for(;;)switch(Se){case"hex":return G(this,J,Z,ue);case"utf8":case"utf-8":return V(this,J,Z,ue);case"ascii":case"latin1":case"binary":return U(this,J,Z,ue);case"base64":return A(this,J,Z,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,J,Z,ue);default:if(pe)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),pe=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(se,J,Z){return J===0&&Z===se.length?e.fromByteArray(se):e.fromByteArray(se.slice(J,Z))}function q(se,J,Z){Z=Math.min(se.length,Z);const ue=[];let Se=J;for(;Se<Z;){const he=se[Se];let pe=null,Je=he>239?4:he>223?3:he>191?2:1;if(Se+Je<=Z){let Xe,ot,Nt,wt;switch(Je){case 1:he<128&&(pe=he);break;case 2:Xe=se[Se+1],(Xe&192)===128&&(wt=(he&31)<<6|Xe&63,wt>127&&(pe=wt));break;case 3:Xe=se[Se+1],ot=se[Se+2],(Xe&192)===128&&(ot&192)===128&&(wt=(he&15)<<12|(Xe&63)<<6|ot&63,wt>2047&&(wt<55296||wt>57343)&&(pe=wt));break;case 4:Xe=se[Se+1],ot=se[Se+2],Nt=se[Se+3],(Xe&192)===128&&(ot&192)===128&&(Nt&192)===128&&(wt=(he&15)<<18|(Xe&63)<<12|(ot&63)<<6|Nt&63,wt>65535&&wt<1114112&&(pe=wt))}}pe===null?(pe=65533,Je=1):pe>65535&&(pe-=65536,ue.push(pe>>>10&1023|55296),pe=56320|pe&1023),ue.push(pe),Se+=Je}return te(ue)}const K=4096;function te(se){const J=se.length;if(J<=K)return String.fromCharCode.apply(String,se);let Z="",ue=0;for(;ue<J;)Z+=String.fromCharCode.apply(String,se.slice(ue,ue+=K));return Z}function Y(se,J,Z){let ue="";Z=Math.min(se.length,Z);for(let Se=J;Se<Z;++Se)ue+=String.fromCharCode(se[Se]&127);return ue}function H(se,J,Z){let ue="";Z=Math.min(se.length,Z);for(let Se=J;Se<Z;++Se)ue+=String.fromCharCode(se[Se]);return ue}function M(se,J,Z){const ue=se.length;(!J||J<0)&&(J=0),(!Z||Z<0||Z>ue)&&(Z=ue);let Se="";for(let he=J;he<Z;++he)Se+=Ge[se[he]];return Se}function P(se,J,Z){const ue=se.slice(J,Z);let Se="";for(let he=0;he<ue.length-1;he+=2)Se+=String.fromCharCode(ue[he]+ue[he+1]*256);return Se}d.prototype.slice=function(J,Z){const ue=this.length;J=~~J,Z=Z===void 0?ue:~~Z,J<0?(J+=ue,J<0&&(J=0)):J>ue&&(J=ue),Z<0?(Z+=ue,Z<0&&(Z=0)):Z>ue&&(Z=ue),Z<J&&(Z=J);const Se=this.subarray(J,Z);return Object.setPrototypeOf(Se,d.prototype),Se};function W(se,J,Z){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+J>Z)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||W(J,Z,this.length);let Se=this[J],he=1,pe=0;for(;++pe<Z&&(he*=256);)Se+=this[J+pe]*he;return Se},d.prototype.readUintBE=d.prototype.readUIntBE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||W(J,Z,this.length);let Se=this[J+--Z],he=1;for(;Z>0&&(he*=256);)Se+=this[J+--Z]*he;return Se},d.prototype.readUint8=d.prototype.readUInt8=function(J,Z){return J=J>>>0,Z||W(J,1,this.length),this[J]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(J,Z){return J=J>>>0,Z||W(J,2,this.length),this[J]|this[J+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(J,Z){return J=J>>>0,Z||W(J,2,this.length),this[J]<<8|this[J+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])},d.prototype.readBigUInt64LE=Tt(function(J){J=J>>>0,me(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&Ne(J,this.length-8);const Se=Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24,he=this[++J]+this[++J]*2**8+this[++J]*2**16+ue*2**24;return BigInt(Se)+(BigInt(he)<<BigInt(32))}),d.prototype.readBigUInt64BE=Tt(function(J){J=J>>>0,me(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&Ne(J,this.length-8);const Se=Z*2**24+this[++J]*2**16+this[++J]*2**8+this[++J],he=this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+ue;return(BigInt(Se)<<BigInt(32))+BigInt(he)}),d.prototype.readIntLE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||W(J,Z,this.length);let Se=this[J],he=1,pe=0;for(;++pe<Z&&(he*=256);)Se+=this[J+pe]*he;return he*=128,Se>=he&&(Se-=Math.pow(2,8*Z)),Se},d.prototype.readIntBE=function(J,Z,ue){J=J>>>0,Z=Z>>>0,ue||W(J,Z,this.length);let Se=Z,he=1,pe=this[J+--Se];for(;Se>0&&(he*=256);)pe+=this[J+--Se]*he;return he*=128,pe>=he&&(pe-=Math.pow(2,8*Z)),pe},d.prototype.readInt8=function(J,Z){return J=J>>>0,Z||W(J,1,this.length),this[J]&128?(255-this[J]+1)*-1:this[J]},d.prototype.readInt16LE=function(J,Z){J=J>>>0,Z||W(J,2,this.length);const ue=this[J]|this[J+1]<<8;return ue&32768?ue|4294901760:ue},d.prototype.readInt16BE=function(J,Z){J=J>>>0,Z||W(J,2,this.length);const ue=this[J+1]|this[J]<<8;return ue&32768?ue|4294901760:ue},d.prototype.readInt32LE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},d.prototype.readInt32BE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},d.prototype.readBigInt64LE=Tt(function(J){J=J>>>0,me(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&Ne(J,this.length-8);const Se=this[J+4]+this[J+5]*2**8+this[J+6]*2**16+(ue<<24);return(BigInt(Se)<<BigInt(32))+BigInt(Z+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24)}),d.prototype.readBigInt64BE=Tt(function(J){J=J>>>0,me(J,"offset");const Z=this[J],ue=this[J+7];(Z===void 0||ue===void 0)&&Ne(J,this.length-8);const Se=(Z<<24)+this[++J]*2**16+this[++J]*2**8+this[++J];return(BigInt(Se)<<BigInt(32))+BigInt(this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+ue)}),d.prototype.readFloatLE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),n.read(this,J,!0,23,4)},d.prototype.readFloatBE=function(J,Z){return J=J>>>0,Z||W(J,4,this.length),n.read(this,J,!1,23,4)},d.prototype.readDoubleLE=function(J,Z){return J=J>>>0,Z||W(J,8,this.length),n.read(this,J,!0,52,8)},d.prototype.readDoubleBE=function(J,Z){return J=J>>>0,Z||W(J,8,this.length),n.read(this,J,!1,52,8)};function X(se,J,Z,ue,Se,he){if(!d.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>Se||J<he)throw new RangeError('"value" argument is out of bounds');if(Z+ue>se.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,ue=ue>>>0,!Se){const Je=Math.pow(2,8*ue)-1;X(this,J,Z,ue,Je,0)}let he=1,pe=0;for(this[Z]=J&255;++pe<ue&&(he*=256);)this[Z+pe]=J/he&255;return Z+ue},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,ue=ue>>>0,!Se){const Je=Math.pow(2,8*ue)-1;X(this,J,Z,ue,Je,0)}let he=ue-1,pe=1;for(this[Z+he]=J&255;--he>=0&&(pe*=256);)this[Z+he]=J/pe&255;return Z+ue},d.prototype.writeUint8=d.prototype.writeUInt8=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,1,255,0),this[Z]=J&255,Z+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,65535,0),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,65535,0),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,4294967295,0),this[Z+3]=J>>>24,this[Z+2]=J>>>16,this[Z+1]=J>>>8,this[Z]=J&255,Z+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,4294967295,0),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4};function ie(se,J,Z,ue,Se){Ve(J,ue,Se,se,Z,7);let he=Number(J&BigInt(4294967295));se[Z++]=he,he=he>>8,se[Z++]=he,he=he>>8,se[Z++]=he,he=he>>8,se[Z++]=he;let pe=Number(J>>BigInt(32)&BigInt(4294967295));return se[Z++]=pe,pe=pe>>8,se[Z++]=pe,pe=pe>>8,se[Z++]=pe,pe=pe>>8,se[Z++]=pe,Z}function oe(se,J,Z,ue,Se){Ve(J,ue,Se,se,Z,7);let he=Number(J&BigInt(4294967295));se[Z+7]=he,he=he>>8,se[Z+6]=he,he=he>>8,se[Z+5]=he,he=he>>8,se[Z+4]=he;let pe=Number(J>>BigInt(32)&BigInt(4294967295));return se[Z+3]=pe,pe=pe>>8,se[Z+2]=pe,pe=pe>>8,se[Z+1]=pe,pe=pe>>8,se[Z]=pe,Z+8}d.prototype.writeBigUInt64LE=Tt(function(J,Z=0){return ie(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Tt(function(J,Z=0){return oe(this,J,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,!Se){const Xe=Math.pow(2,8*ue-1);X(this,J,Z,ue,Xe-1,-Xe)}let he=0,pe=1,Je=0;for(this[Z]=J&255;++he<ue&&(pe*=256);)J<0&&Je===0&&this[Z+he-1]!==0&&(Je=1),this[Z+he]=(J/pe>>0)-Je&255;return Z+ue},d.prototype.writeIntBE=function(J,Z,ue,Se){if(J=+J,Z=Z>>>0,!Se){const Xe=Math.pow(2,8*ue-1);X(this,J,Z,ue,Xe-1,-Xe)}let he=ue-1,pe=1,Je=0;for(this[Z+he]=J&255;--he>=0&&(pe*=256);)J<0&&Je===0&&this[Z+he+1]!==0&&(Je=1),this[Z+he]=(J/pe>>0)-Je&255;return Z+ue},d.prototype.writeInt8=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,1,127,-128),J<0&&(J=255+J+1),this[Z]=J&255,Z+1},d.prototype.writeInt16LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,32767,-32768),this[Z]=J&255,this[Z+1]=J>>>8,Z+2},d.prototype.writeInt16BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,2,32767,-32768),this[Z]=J>>>8,this[Z+1]=J&255,Z+2},d.prototype.writeInt32LE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,2147483647,-2147483648),this[Z]=J&255,this[Z+1]=J>>>8,this[Z+2]=J>>>16,this[Z+3]=J>>>24,Z+4},d.prototype.writeInt32BE=function(J,Z,ue){return J=+J,Z=Z>>>0,ue||X(this,J,Z,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[Z]=J>>>24,this[Z+1]=J>>>16,this[Z+2]=J>>>8,this[Z+3]=J&255,Z+4},d.prototype.writeBigInt64LE=Tt(function(J,Z=0){return ie(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Tt(function(J,Z=0){return oe(this,J,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Te(se,J,Z,ue,Se,he){if(Z+ue>se.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function ce(se,J,Z,ue,Se){return J=+J,Z=Z>>>0,Se||Te(se,J,Z,4),n.write(se,J,Z,ue,23,4),Z+4}d.prototype.writeFloatLE=function(J,Z,ue){return ce(this,J,Z,!0,ue)},d.prototype.writeFloatBE=function(J,Z,ue){return ce(this,J,Z,!1,ue)};function de(se,J,Z,ue,Se){return J=+J,Z=Z>>>0,Se||Te(se,J,Z,8),n.write(se,J,Z,ue,52,8),Z+8}d.prototype.writeDoubleLE=function(J,Z,ue){return de(this,J,Z,!0,ue)},d.prototype.writeDoubleBE=function(J,Z,ue){return de(this,J,Z,!1,ue)},d.prototype.copy=function(J,Z,ue,Se){if(!d.isBuffer(J))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Se&&Se!==0&&(Se=this.length),Z>=J.length&&(Z=J.length),Z||(Z=0),Se>0&&Se<ue&&(Se=ue),Se===ue||J.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),J.length-Z<Se-ue&&(Se=J.length-Z+ue);const he=Se-ue;return this===J&&typeof s.prototype.copyWithin=="function"?this.copyWithin(Z,ue,Se):s.prototype.set.call(J,this.subarray(ue,Se),Z),he},d.prototype.fill=function(J,Z,ue,Se){if(typeof J=="string"){if(typeof Z=="string"?(Se=Z,Z=0,ue=this.length):typeof ue=="string"&&(Se=ue,ue=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!d.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(J.length===1){const pe=J.charCodeAt(0);(Se==="utf8"&&pe<128||Se==="latin1")&&(J=pe)}}else typeof J=="number"?J=J&255:typeof J=="boolean"&&(J=Number(J));if(Z<0||this.length<Z||this.length<ue)throw new RangeError("Out of range index");if(ue<=Z)return this;Z=Z>>>0,ue=ue===void 0?this.length:ue>>>0,J||(J=0);let he;if(typeof J=="number")for(he=Z;he<ue;++he)this[he]=J;else{const pe=d.isBuffer(J)?J:d.from(J,Se),Je=pe.length;if(Je===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(he=0;he<ue-Z;++he)this[he+Z]=pe[he%Je]}return this};const ke={};function ye(se,J,Z){ke[se]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(Se){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Se,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(se,J){return`The "${se}" argument must be of type number. Received type ${typeof J}`},TypeError),ye("ERR_OUT_OF_RANGE",function(se,J,Z){let ue=`The value of "${se}" is out of range.`,Se=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?Se=Ke(String(Z)):typeof Z=="bigint"&&(Se=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(Se=Ke(Se)),Se+="n"),ue+=` It must be ${J}. Received ${Se}`,ue},RangeError);function Ke(se){let J="",Z=se.length;const ue=se[0]==="-"?1:0;for(;Z>=ue+4;Z-=3)J=`_${se.slice(Z-3,Z)}${J}`;return`${se.slice(0,Z)}${J}`}function je(se,J,Z){me(J,"offset"),(se[J]===void 0||se[J+Z]===void 0)&&Ne(J,se.length-(Z+1))}function Ve(se,J,Z,ue,Se,he){if(se>Z||se<J){const pe=typeof J=="bigint"?"n":"";let Je;throw J===0||J===BigInt(0)?Je=`>= 0${pe} and < 2${pe} ** ${(he+1)*8}${pe}`:Je=`>= -(2${pe} ** ${(he+1)*8-1}${pe}) and < 2 ** ${(he+1)*8-1}${pe}`,new ke.ERR_OUT_OF_RANGE("value",Je,se)}je(ue,Se,he)}function me(se,J){if(typeof se!="number")throw new ke.ERR_INVALID_ARG_TYPE(J,"number",se)}function Ne(se,J,Z){throw Math.floor(se)!==se?(me(se,Z),new ke.ERR_OUT_OF_RANGE("offset","an integer",se)):J<0?new ke.ERR_BUFFER_OUT_OF_BOUNDS:new ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${J}`,se)}const We=/[^+/0-9A-Za-z-_]/g;function Qe(se){if(se=se.split("=")[0],se=se.trim().replace(We,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function Ze(se,J){J=J||1/0;let Z;const ue=se.length;let Se=null;const he=[];for(let pe=0;pe<ue;++pe){if(Z=se.charCodeAt(pe),Z>55295&&Z<57344){if(!Se){if(Z>56319){(J-=3)>-1&&he.push(239,191,189);continue}else if(pe+1===ue){(J-=3)>-1&&he.push(239,191,189);continue}Se=Z;continue}if(Z<56320){(J-=3)>-1&&he.push(239,191,189),Se=Z;continue}Z=(Se-55296<<10|Z-56320)+65536}else Se&&(J-=3)>-1&&he.push(239,191,189);if(Se=null,Z<128){if((J-=1)<0)break;he.push(Z)}else if(Z<2048){if((J-=2)<0)break;he.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((J-=3)<0)break;he.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((J-=4)<0)break;he.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return he}function at(se){const J=[];for(let Z=0;Z<se.length;++Z)J.push(se.charCodeAt(Z)&255);return J}function St(se,J){let Z,ue,Se;const he=[];for(let pe=0;pe<se.length&&!((J-=2)<0);++pe)Z=se.charCodeAt(pe),ue=Z>>8,Se=Z%256,he.push(Se),he.push(ue);return he}function qe(se){return e.toByteArray(Qe(se))}function it(se,J,Z,ue){let Se;for(Se=0;Se<ue&&!(Se+Z>=J.length||Se>=se.length);++Se)J[Se+Z]=se[Se];return Se}function Lt(se,J){return se instanceof J||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===J.name}function Ie(se){return se!==se}const Ge=(function(){const se="0123456789abcdef",J=new Array(256);for(let Z=0;Z<16;++Z){const ue=Z*16;for(let Se=0;Se<16;++Se)J[ue+Se]=se[Z]+se[Se]}return J})();function Tt(se){return typeof BigInt>"u"?xt:se}function xt(){throw new Error("BigInt not supported")}})(tD);const un=tD.Buffer,dn=tD.Buffer;window.Buffer=dn;function bs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ste(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var K_={exports:{}},Ab={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U$;function nve(){if(U$)return Ab;U$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var a in i)a!=="key"&&(s[a]=i[a])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Ab.Fragment=e,Ab.jsx=n,Ab.jsxs=n,Ab}var F$;function rve(){return F$||(F$=1,K_.exports=nve()),K_.exports}var u=rve();function ive(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ote={exports:{}},ci=ote.exports={},gc,yc;function EO(){throw new Error("setTimeout has not been defined")}function SO(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?gc=setTimeout:gc=EO}catch{gc=EO}try{typeof clearTimeout=="function"?yc=clearTimeout:yc=SO}catch{yc=SO}})();function ate(t){if(gc===setTimeout)return setTimeout(t,0);if((gc===EO||!gc)&&setTimeout)return gc=setTimeout,setTimeout(t,0);try{return gc(t,0)}catch{try{return gc.call(null,t,0)}catch{return gc.call(this,t,0)}}}function sve(t){if(yc===clearTimeout)return clearTimeout(t);if((yc===SO||!yc)&&clearTimeout)return yc=clearTimeout,clearTimeout(t);try{return yc(t)}catch{try{return yc.call(null,t)}catch{return yc.call(this,t)}}}var ld=[],iy=!1,Up,k2=-1;function ove(){!iy||!Up||(iy=!1,Up.length?ld=Up.concat(ld):k2=-1,ld.length&&lte())}function lte(){if(!iy){var t=ate(ove);iy=!0;for(var e=ld.length;e;){for(Up=ld,ld=[];++k2<e;)Up&&Up[k2].run();k2=-1,e=ld.length}Up=null,iy=!1,sve(t)}}ci.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];ld.push(new cte(t,e)),ld.length===1&&!iy&&ate(lte)};function cte(t,e){this.fun=t,this.array=e}cte.prototype.run=function(){this.fun.apply(null,this.array)};ci.title="browser";ci.browser=!0;ci.env={};ci.argv=[];ci.version="";ci.versions={};function Ud(){}ci.on=Ud;ci.addListener=Ud;ci.once=Ud;ci.off=Ud;ci.removeListener=Ud;ci.removeAllListeners=Ud;ci.emit=Ud;ci.prependListener=Ud;ci.prependOnceListener=Ud;ci.listeners=function(t){return[]};ci.binding=function(t){throw new Error("process.binding is not supported")};ci.cwd=function(){return"/"};ci.chdir=function(t){throw new Error("process.chdir is not supported")};ci.umask=function(){return 0};var ave=ote.exports;const ql=ive(ave);window.global=window;window.process=ql;window.Buffer=dn;console.log("Polyfills loaded");var W_={exports:{}},ln={},$$;function lve(){if($$)return ln;$$=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),m=Symbol.iterator;function g(H){return H===null||typeof H!="object"?null:(H=m&&H[m]||H["@@iterator"],typeof H=="function"?H:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function w(H,M,P){this.props=H,this.context=M,this.refs=b,this.updater=P||v}w.prototype.isReactComponent={},w.prototype.setState=function(H,M){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,M,"setState")},w.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function k(){}k.prototype=w.prototype;function N(H,M,P){this.props=H,this.context=M,this.refs=b,this.updater=P||v}var O=N.prototype=new k;O.constructor=N,x(O,w.prototype),O.isPureReactComponent=!0;var D=Array.isArray;function _(){}var F={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function L(H,M,P){var W=P.ref;return{$$typeof:t,type:H,key:M,ref:W!==void 0?W:null,props:P}}function $(H,M){return L(H.type,M,H.props)}function G(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function V(H){var M={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(P){return M[P]})}var U=/\/+/g;function A(H,M){return typeof H=="object"&&H!==null&&H.key!=null?V(""+H.key):M.toString(36)}function I(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(_,_):(H.status="pending",H.then(function(M){H.status==="pending"&&(H.status="fulfilled",H.value=M)},function(M){H.status==="pending"&&(H.status="rejected",H.reason=M)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function j(H,M,P,W,X){var ie=typeof H;(ie==="undefined"||ie==="boolean")&&(H=null);var oe=!1;if(H===null)oe=!0;else switch(ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(H.$$typeof){case t:case e:oe=!0;break;case d:return oe=H._init,j(oe(H._payload),M,P,W,X)}}if(oe)return X=X(H),oe=W===""?"."+A(H,0):W,D(X)?(P="",oe!=null&&(P=oe.replace(U,"$&/")+"/"),j(X,M,P,"",function(de){return de})):X!=null&&(G(X)&&(X=$(X,P+(X.key==null||H&&H.key===X.key?"":(""+X.key).replace(U,"$&/")+"/")+oe)),M.push(X)),1;oe=0;var Te=W===""?".":W+":";if(D(H))for(var ce=0;ce<H.length;ce++)W=H[ce],ie=Te+A(W,ce),oe+=j(W,M,P,ie,X);else if(ce=g(H),typeof ce=="function")for(H=ce.call(H),ce=0;!(W=H.next()).done;)W=W.value,ie=Te+A(W,ce++),oe+=j(W,M,P,ie,X);else if(ie==="object"){if(typeof H.then=="function")return j(I(H),M,P,W,X);throw M=String(H),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return oe}function q(H,M,P){if(H==null)return H;var W=[],X=0;return j(H,W,"","",function(ie){return M.call(P,ie,X++)}),W}function K(H){if(H._status===-1){var M=H._result;M=M(),M.then(function(P){(H._status===0||H._status===-1)&&(H._status=1,H._result=P)},function(P){(H._status===0||H._status===-1)&&(H._status=2,H._result=P)}),H._status===-1&&(H._status=0,H._result=M)}if(H._status===1)return H._result.default;throw H._result}var te=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(M))return}else if(typeof ql=="object"&&typeof ql.emit=="function"){ql.emit("uncaughtException",H);return}console.error(H)},Y={map:q,forEach:function(H,M,P){q(H,function(){M.apply(this,arguments)},P)},count:function(H){var M=0;return q(H,function(){M++}),M},toArray:function(H){return q(H,function(M){return M})||[]},only:function(H){if(!G(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ln.Activity=h,ln.Children=Y,ln.Component=w,ln.Fragment=n,ln.Profiler=i,ln.PureComponent=N,ln.StrictMode=r,ln.Suspense=l,ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,ln.__COMPILER_RUNTIME={__proto__:null,c:function(H){return F.H.useMemoCache(H)}},ln.cache=function(H){return function(){return H.apply(null,arguments)}},ln.cacheSignal=function(){return null},ln.cloneElement=function(H,M,P){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var W=x({},H.props),X=H.key;if(M!=null)for(ie in M.key!==void 0&&(X=""+M.key),M)!z.call(M,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&M.ref===void 0||(W[ie]=M[ie]);var ie=arguments.length-2;if(ie===1)W.children=P;else if(1<ie){for(var oe=Array(ie),Te=0;Te<ie;Te++)oe[Te]=arguments[Te+2];W.children=oe}return L(H.type,X,W)},ln.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:s,_context:H},H},ln.createElement=function(H,M,P){var W,X={},ie=null;if(M!=null)for(W in M.key!==void 0&&(ie=""+M.key),M)z.call(M,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(X[W]=M[W]);var oe=arguments.length-2;if(oe===1)X.children=P;else if(1<oe){for(var Te=Array(oe),ce=0;ce<oe;ce++)Te[ce]=arguments[ce+2];X.children=Te}if(H&&H.defaultProps)for(W in oe=H.defaultProps,oe)X[W]===void 0&&(X[W]=oe[W]);return L(H,ie,X)},ln.createRef=function(){return{current:null}},ln.forwardRef=function(H){return{$$typeof:a,render:H}},ln.isValidElement=G,ln.lazy=function(H){return{$$typeof:d,_payload:{_status:-1,_result:H},_init:K}},ln.memo=function(H,M){return{$$typeof:c,type:H,compare:M===void 0?null:M}},ln.startTransition=function(H){var M=F.T,P={};F.T=P;try{var W=H(),X=F.S;X!==null&&X(P,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(_,te)}catch(ie){te(ie)}finally{M!==null&&P.types!==null&&(M.types=P.types),F.T=M}},ln.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},ln.use=function(H){return F.H.use(H)},ln.useActionState=function(H,M,P){return F.H.useActionState(H,M,P)},ln.useCallback=function(H,M){return F.H.useCallback(H,M)},ln.useContext=function(H){return F.H.useContext(H)},ln.useDebugValue=function(){},ln.useDeferredValue=function(H,M){return F.H.useDeferredValue(H,M)},ln.useEffect=function(H,M){return F.H.useEffect(H,M)},ln.useEffectEvent=function(H){return F.H.useEffectEvent(H)},ln.useId=function(){return F.H.useId()},ln.useImperativeHandle=function(H,M,P){return F.H.useImperativeHandle(H,M,P)},ln.useInsertionEffect=function(H,M){return F.H.useInsertionEffect(H,M)},ln.useLayoutEffect=function(H,M){return F.H.useLayoutEffect(H,M)},ln.useMemo=function(H,M){return F.H.useMemo(H,M)},ln.useOptimistic=function(H,M){return F.H.useOptimistic(H,M)},ln.useReducer=function(H,M,P){return F.H.useReducer(H,M,P)},ln.useRef=function(H){return F.H.useRef(H)},ln.useState=function(H){return F.H.useState(H)},ln.useSyncExternalStore=function(H,M,P){return F.H.useSyncExternalStore(H,M,P)},ln.useTransition=function(){return F.H.useTransition()},ln.version="19.2.3",ln}var z$;function Jx(){return z$||(z$=1,W_.exports=lve()),W_.exports}var S=Jx();const Ms=bs(S),kN=Kxe({__proto__:null,default:Ms},[S]);var Y_={exports:{}},Tb={},J_={exports:{}},X_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V$;function cve(){return V$||(V$=1,(function(t){function e(j,q){var K=j.length;j.push(q);e:for(;0<K;){var te=K-1>>>1,Y=j[te];if(0<i(Y,q))j[te]=q,j[K]=Y,K=te;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var q=j[0],K=j.pop();if(K!==q){j[0]=K;e:for(var te=0,Y=j.length,H=Y>>>1;te<H;){var M=2*(te+1)-1,P=j[M],W=M+1,X=j[W];if(0>i(P,K))W<Y&&0>i(X,P)?(j[te]=X,j[W]=K,te=W):(j[te]=P,j[M]=K,te=M);else if(W<Y&&0>i(X,K))j[te]=X,j[W]=K,te=W;else break e}}return q}function i(j,q){var K=j.sortIndex-q.sortIndex;return K!==0?K:j.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,m=3,g=!1,v=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(j){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=j)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function D(j){if(x=!1,O(j),!v)if(n(l)!==null)v=!0,_||(_=!0,V());else{var q=n(c);q!==null&&I(D,q.startTime-j)}}var _=!1,F=-1,z=5,L=-1;function $(){return b?!0:!(t.unstable_now()-L<z)}function G(){if(b=!1,_){var j=t.unstable_now();L=j;var q=!0;try{e:{v=!1,x&&(x=!1,k(F),F=-1),g=!0;var K=m;try{t:{for(O(j),h=n(l);h!==null&&!(h.expirationTime>j&&$());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var Y=te(h.expirationTime<=j);if(j=t.unstable_now(),typeof Y=="function"){h.callback=Y,O(j),q=!0;break t}h===n(l)&&r(l),O(j)}else r(l);h=n(l)}if(h!==null)q=!0;else{var H=n(c);H!==null&&I(D,H.startTime-j),q=!1}}break e}finally{h=null,m=K,g=!1}q=void 0}}finally{q?V():_=!1}}}var V;if(typeof N=="function")V=function(){N(G)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,A=U.port2;U.port1.onmessage=G,V=function(){A.postMessage(null)}}else V=function(){w(G,0)};function I(j,q){F=w(function(){j(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(j){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var K=m;m=q;try{return j()}finally{m=K}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(j,q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var K=m;m=j;try{return q()}finally{m=K}},t.unstable_scheduleCallback=function(j,q,K){var te=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=K+Y,j={id:d++,callback:q,priorityLevel:j,startTime:K,expirationTime:Y,sortIndex:-1},K>te?(j.sortIndex=K,e(c,j),n(l)===null&&j===n(c)&&(x?(k(F),F=-1):x=!0,I(D,K-te))):(j.sortIndex=Y,e(l,j),v||g||(v=!0,_||(_=!0,V()))),j},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(j){var q=m;return function(){var K=m;m=q;try{return j.apply(this,arguments)}finally{m=K}}}})(X_)),X_}var H$;function uve(){return H$||(H$=1,J_.exports=cve()),J_.exports}var Q_={exports:{}},ws={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q$;function dve(){if(q$)return ws;q$=1;var t=Jx();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:l,containerInfo:c,implementation:d}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ws.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ws.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,d)},ws.flushSync=function(l){var c=o.T,d=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=d,r.d.f()}},ws.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},ws.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ws.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,h=a(d,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ws.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},ws.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,h=a(d,c.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ws.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},ws.requestFormReset=function(l){r.d.r(l)},ws.unstable_batchedUpdates=function(l,c){return l(c)},ws.useFormState=function(l,c,d){return o.H.useFormState(l,c,d)},ws.useFormStatus=function(){return o.H.useHostTransitionStatus()},ws.version="19.2.3",ws}var G$;function ute(){if(G$)return Q_.exports;G$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Q_.exports=dve(),Q_.exports}var K$;function fve(){if(K$)return Tb;K$=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=uve(),e=Jx(),n=ute();function r(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var p=f,y=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(y=p.return),f=p.return;while(f)}return p.tag===3?y:null}function o(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function a(f){if(f.tag===31){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function l(f){if(s(f)!==f)throw Error(r(188))}function c(f){var p=f.alternate;if(!p){if(p=s(f),p===null)throw Error(r(188));return p!==f?null:f}for(var y=f,E=p;;){var R=y.return;if(R===null)break;var B=R.alternate;if(B===null){if(E=R.return,E!==null){y=E;continue}break}if(R.child===B.child){for(B=R.child;B;){if(B===y)return l(R),f;if(B===E)return l(R),p;B=B.sibling}throw Error(r(188))}if(y.return!==E.return)y=R,E=B;else{for(var ne=!1,le=R.child;le;){if(le===y){ne=!0,y=R,E=B;break}if(le===E){ne=!0,E=R,y=B;break}le=le.sibling}if(!ne){for(le=B.child;le;){if(le===y){ne=!0,y=B,E=R;break}if(le===E){ne=!0,E=B,y=R;break}le=le.sibling}if(!ne)throw Error(r(189))}}if(y.alternate!==E)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?f:p}function d(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=d(f),p!==null)return p;f=f.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function V(f){return f===null||typeof f!="object"?null:(f=G&&f[G]||f["@@iterator"],typeof f=="function"?f:null)}var U=Symbol.for("react.client.reference");function A(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===U?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case x:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case _:return"SuspenseList";case L:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case v:return"Portal";case N:return f.displayName||"Context";case k:return(f._context.displayName||"Context")+".Consumer";case O:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case F:return p=f.displayName||null,p!==null?p:A(f.type)||"Memo";case z:p=f._payload,f=f._init;try{return A(f(p))}catch{}}return null}var I=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},te=[],Y=-1;function H(f){return{current:f}}function M(f){0>Y||(f.current=te[Y],te[Y]=null,Y--)}function P(f,p){Y++,te[Y]=f.current,f.current=p}var W=H(null),X=H(null),ie=H(null),oe=H(null);function Te(f,p){switch(P(ie,p),P(X,f),P(W,null),p.nodeType){case 9:case 11:f=(f=p.documentElement)&&(f=f.namespaceURI)?a$(f):0;break;default:if(f=p.tagName,p=p.namespaceURI)p=a$(p),f=l$(p,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}M(W),P(W,f)}function ce(){M(W),M(X),M(ie)}function de(f){f.memoizedState!==null&&P(oe,f);var p=W.current,y=l$(p,f.type);p!==y&&(P(X,f),P(W,y))}function ke(f){X.current===f&&(M(W),M(X)),oe.current===f&&(M(oe),vb._currentValue=K)}var ye,Ke;function je(f){if(ye===void 0)try{throw Error()}catch(y){var p=y.stack.trim().match(/\n( *(at )?)/);ye=p&&p[1]||"",Ke=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+f+Ke}var Ve=!1;function me(f,p){if(!f||Ve)return"";Ve=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(He){var $e=He}Reflect.construct(f,[],rt)}else{try{rt.call()}catch(He){$e=He}f.call(rt.prototype)}}else{try{throw Error()}catch(He){$e=He}(rt=f())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch(He){if(He&&$e&&typeof He.stack=="string")return[He.stack,$e.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=E.DetermineComponentFrameRoot(),ne=B[0],le=B[1];if(ne&&le){var Ee=ne.split(`
`),Be=le.split(`
`);for(R=E=0;E<Ee.length&&!Ee[E].includes("DetermineComponentFrameRoot");)E++;for(;R<Be.length&&!Be[R].includes("DetermineComponentFrameRoot");)R++;if(E===Ee.length||R===Be.length)for(E=Ee.length-1,R=Be.length-1;1<=E&&0<=R&&Ee[E]!==Be[R];)R--;for(;1<=E&&0<=R;E--,R--)if(Ee[E]!==Be[R]){if(E!==1||R!==1)do if(E--,R--,0>R||Ee[E]!==Be[R]){var Ye=`
`+Ee[E].replace(" at new "," at ");return f.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",f.displayName)),Ye}while(1<=E&&0<=R);break}}}finally{Ve=!1,Error.prepareStackTrace=y}return(y=f?f.displayName||f.name:"")?je(y):""}function Ne(f,p){switch(f.tag){case 26:case 27:case 5:return je(f.type);case 16:return je("Lazy");case 13:return f.child!==p&&p!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return me(f.type,!1);case 11:return me(f.type.render,!1);case 1:return me(f.type,!0);case 31:return je("Activity");default:return""}}function We(f){try{var p="",y=null;do p+=Ne(f,y),y=f,f=f.return;while(f);return p}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}var Qe=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,at=t.unstable_cancelCallback,St=t.unstable_shouldYield,qe=t.unstable_requestPaint,it=t.unstable_now,Lt=t.unstable_getCurrentPriorityLevel,Ie=t.unstable_ImmediatePriority,Ge=t.unstable_UserBlockingPriority,Tt=t.unstable_NormalPriority,xt=t.unstable_LowPriority,se=t.unstable_IdlePriority,J=t.log,Z=t.unstable_setDisableYieldValue,ue=null,Se=null;function he(f){if(typeof J=="function"&&Z(f),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(ue,f)}catch{}}var pe=Math.clz32?Math.clz32:ot,Je=Math.log,Xe=Math.LN2;function ot(f){return f>>>=0,f===0?32:31-(Je(f)/Xe|0)|0}var Nt=256,wt=262144,Rt=4194304;function rn(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function et(f,p,y){var E=f.pendingLanes;if(E===0)return 0;var R=0,B=f.suspendedLanes,ne=f.pingedLanes;f=f.warmLanes;var le=E&134217727;return le!==0?(E=le&~B,E!==0?R=rn(E):(ne&=le,ne!==0?R=rn(ne):y||(y=le&~f,y!==0&&(R=rn(y))))):(le=E&~B,le!==0?R=rn(le):ne!==0?R=rn(ne):y||(y=E&~f,y!==0&&(R=rn(y)))),R===0?0:p!==0&&p!==R&&(p&B)===0&&(B=R&-R,y=p&-p,B>=y||B===32&&(y&4194048)!==0)?p:R}function Ht(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function Hn(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sn(){var f=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),f}function ae(f){for(var p=[],y=0;31>y;y++)p.push(f);return p}function Q(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function ee(f,p,y,E,R,B){var ne=f.pendingLanes;f.pendingLanes=y,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=y,f.entangledLanes&=y,f.errorRecoveryDisabledLanes&=y,f.shellSuspendCounter=0;var le=f.entanglements,Ee=f.expirationTimes,Be=f.hiddenUpdates;for(y=ne&~y;0<y;){var Ye=31-pe(y),rt=1<<Ye;le[Ye]=0,Ee[Ye]=-1;var $e=Be[Ye];if($e!==null)for(Be[Ye]=null,Ye=0;Ye<$e.length;Ye++){var He=$e[Ye];He!==null&&(He.lane&=-536870913)}y&=~rt}E!==0&&fe(f,E,0),B!==0&&R===0&&f.tag!==0&&(f.suspendedLanes|=B&~(ne&~p))}function fe(f,p,y){f.pendingLanes|=p,f.suspendedLanes&=~p;var E=31-pe(p);f.entangledLanes|=p,f.entanglements[E]=f.entanglements[E]|1073741824|y&261930}function _e(f,p){var y=f.entangledLanes|=p;for(f=f.entanglements;y;){var E=31-pe(y),R=1<<E;R&p|f[E]&p&&(f[E]|=p),y&=~R}}function Re(f,p){var y=p&-p;return y=(y&42)!==0?1:Ue(y),(y&(f.suspendedLanes|p))!==0?0:y}function Ue(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function en(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function Kt(){var f=q.p;return f!==0?f:(f=window.event,f===void 0?32:I$(f.type))}function ut(f,p){var y=q.p;try{return q.p=f,p()}finally{q.p=y}}var pn=Math.random().toString(36).slice(2),Ct="__reactFiber$"+pn,wn="__reactProps$"+pn,pa="__reactContainer$"+pn,or="__reactEvents$"+pn,br="__reactListeners$"+pn,tf="__reactHandles$"+pn,nf="__reactResources$"+pn,fl="__reactMarker$"+pn;function du(f){delete f[Ct],delete f[wn],delete f[or],delete f[br],delete f[tf]}function ma(f){var p=f[Ct];if(p)return p;for(var y=f.parentNode;y;){if(p=y[pa]||y[Ct]){if(y=p.alternate,p.child!==null||y!==null&&y.child!==null)for(f=m$(f);f!==null;){if(y=f[Ct])return y;f=m$(f)}return p}f=y,y=f.parentNode}return null}function ga(f){if(f=f[Ct]||f[pa]){var p=f.tag;if(p===5||p===6||p===13||p===31||p===26||p===27||p===3)return f}return null}function hl(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f.stateNode;throw Error(r(33))}function Bo(f){var p=f[nf];return p||(p=f[nf]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function Nr(f){f[fl]=!0}var rf=new Set,fu={};function Gs(f,p){mo(f,p),mo(f+"Capture",p)}function mo(f,p){for(fu[f]=p,f=0;f<p.length;f++)rf.add(p[f])}var sf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hu={},pu={};function of(f){return Qe.call(pu,f)?!0:Qe.call(hu,f)?!1:sf.test(f)?pu[f]=!0:(hu[f]=!0,!1)}function pl(f,p,y){if(of(p))if(y===null)f.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":f.removeAttribute(p);return;case"boolean":var E=p.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){f.removeAttribute(p);return}}f.setAttribute(p,""+y)}}function ml(f,p,y){if(y===null)f.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(p);return}f.setAttribute(p,""+y)}}function ya(f,p,y,E){if(E===null)f.removeAttribute(y);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(y);return}f.setAttributeNS(p,y,""+E)}}function Ks(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Cr(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function xa(f,p,y){var E=Object.getOwnPropertyDescriptor(f.constructor.prototype,p);if(!f.hasOwnProperty(p)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var R=E.get,B=E.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return R.call(this)},set:function(ne){y=""+ne,B.call(this,ne)}}),Object.defineProperty(f,p,{enumerable:E.enumerable}),{getValue:function(){return y},setValue:function(ne){y=""+ne},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function gl(f){if(!f._valueTracker){var p=Cr(f)?"checked":"value";f._valueTracker=xa(f,p,""+f[p])}}function YE(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var y=p.getValue(),E="";return f&&(E=Cr(f)?f.checked?"true":"false":f.value),f=E,f!==y?(p.setValue(f),!0):!1}function JE(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var Uge=/[\n"\\]/g;function va(f){return f.replace(Uge,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function UP(f,p,y,E,R,B,ne,le){f.name="",ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?f.type=ne:f.removeAttribute("type"),p!=null?ne==="number"?(p===0&&f.value===""||f.value!=p)&&(f.value=""+Ks(p)):f.value!==""+Ks(p)&&(f.value=""+Ks(p)):ne!=="submit"&&ne!=="reset"||f.removeAttribute("value"),p!=null?FP(f,ne,Ks(p)):y!=null?FP(f,ne,Ks(y)):E!=null&&f.removeAttribute("value"),R==null&&B!=null&&(f.defaultChecked=!!B),R!=null&&(f.checked=R&&typeof R!="function"&&typeof R!="symbol"),le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?f.name=""+Ks(le):f.removeAttribute("name")}function tU(f,p,y,E,R,B,ne,le){if(B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(f.type=B),p!=null||y!=null){if(!(B!=="submit"&&B!=="reset"||p!=null)){gl(f);return}y=y!=null?""+Ks(y):"",p=p!=null?""+Ks(p):y,le||p===f.value||(f.value=p),f.defaultValue=p}E=E??R,E=typeof E!="function"&&typeof E!="symbol"&&!!E,f.checked=le?f.checked:!!E,f.defaultChecked=!!E,ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(f.name=ne),gl(f)}function FP(f,p,y){p==="number"&&JE(f.ownerDocument)===f||f.defaultValue===""+y||(f.defaultValue=""+y)}function x0(f,p,y,E){if(f=f.options,p){p={};for(var R=0;R<y.length;R++)p["$"+y[R]]=!0;for(y=0;y<f.length;y++)R=p.hasOwnProperty("$"+f[y].value),f[y].selected!==R&&(f[y].selected=R),R&&E&&(f[y].defaultSelected=!0)}else{for(y=""+Ks(y),p=null,R=0;R<f.length;R++){if(f[R].value===y){f[R].selected=!0,E&&(f[R].defaultSelected=!0);return}p!==null||f[R].disabled||(p=f[R])}p!==null&&(p.selected=!0)}}function nU(f,p,y){if(p!=null&&(p=""+Ks(p),p!==f.value&&(f.value=p),y==null)){f.defaultValue!==p&&(f.defaultValue=p);return}f.defaultValue=y!=null?""+Ks(y):""}function rU(f,p,y,E){if(p==null){if(E!=null){if(y!=null)throw Error(r(92));if(I(E)){if(1<E.length)throw Error(r(93));E=E[0]}y=E}y==null&&(y=""),p=y}y=Ks(p),f.defaultValue=y,E=f.textContent,E===y&&E!==""&&E!==null&&(f.value=E),gl(f)}function v0(f,p){if(p){var y=f.firstChild;if(y&&y===f.lastChild&&y.nodeType===3){y.nodeValue=p;return}}f.textContent=p}var Fge=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iU(f,p,y){var E=p.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?E?f.setProperty(p,""):p==="float"?f.cssFloat="":f[p]="":E?f.setProperty(p,y):typeof y!="number"||y===0||Fge.has(p)?p==="float"?f.cssFloat=y:f[p]=(""+y).trim():f[p]=y+"px"}function sU(f,p,y){if(p!=null&&typeof p!="object")throw Error(r(62));if(f=f.style,y!=null){for(var E in y)!y.hasOwnProperty(E)||p!=null&&p.hasOwnProperty(E)||(E.indexOf("--")===0?f.setProperty(E,""):E==="float"?f.cssFloat="":f[E]="");for(var R in p)E=p[R],p.hasOwnProperty(R)&&y[R]!==E&&iU(f,R,E)}else for(var B in p)p.hasOwnProperty(B)&&iU(f,B,p[B])}function $P(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $ge=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zge=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function XE(f){return zge.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}function mu(){}var zP=null;function VP(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var b0=null,w0=null;function oU(f){var p=ga(f);if(p&&(f=p.stateNode)){var y=f[wn]||null;e:switch(f=p.stateNode,p.type){case"input":if(UP(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),p=y.name,y.type==="radio"&&p!=null){for(y=f;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+va(""+p)+'"][type="radio"]'),p=0;p<y.length;p++){var E=y[p];if(E!==f&&E.form===f.form){var R=E[wn]||null;if(!R)throw Error(r(90));UP(E,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(p=0;p<y.length;p++)E=y[p],E.form===f.form&&YE(E)}break e;case"textarea":nU(f,y.value,y.defaultValue);break e;case"select":p=y.value,p!=null&&x0(f,!!y.multiple,p,!1)}}}var HP=!1;function aU(f,p,y){if(HP)return f(p,y);HP=!0;try{var E=f(p);return E}finally{if(HP=!1,(b0!==null||w0!==null)&&(BS(),b0&&(p=b0,f=w0,w0=b0=null,oU(p),f)))for(p=0;p<f.length;p++)oU(f[p])}}function jv(f,p){var y=f.stateNode;if(y===null)return null;var E=y[wn]||null;if(E===null)return null;y=E[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(y&&typeof y!="function")throw Error(r(231,p,typeof y));return y}var gu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qP=!1;if(gu)try{var Dv={};Object.defineProperty(Dv,"passive",{get:function(){qP=!0}}),window.addEventListener("test",Dv,Dv),window.removeEventListener("test",Dv,Dv)}catch{qP=!1}var af=null,GP=null,QE=null;function lU(){if(QE)return QE;var f,p=GP,y=p.length,E,R="value"in af?af.value:af.textContent,B=R.length;for(f=0;f<y&&p[f]===R[f];f++);var ne=y-f;for(E=1;E<=ne&&p[y-E]===R[B-E];E++);return QE=R.slice(f,1<E?1-E:void 0)}function ZE(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function eS(){return!0}function cU(){return!1}function go(f){function p(y,E,R,B,ne){this._reactName=y,this._targetInst=R,this.type=E,this.nativeEvent=B,this.target=ne,this.currentTarget=null;for(var le in f)f.hasOwnProperty(le)&&(y=f[le],this[le]=y?y(B):B[le]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?eS:cU,this.isPropagationStopped=cU,this}return h(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=eS)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=eS)},persist:function(){},isPersistent:eS}),p}var Qh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tS=go(Qh),Bv=h({},Qh,{view:0,detail:0}),Vge=go(Bv),KP,WP,Uv,nS=h({},Bv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JP,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Uv&&(Uv&&f.type==="mousemove"?(KP=f.screenX-Uv.screenX,WP=f.screenY-Uv.screenY):WP=KP=0,Uv=f),KP)},movementY:function(f){return"movementY"in f?f.movementY:WP}}),uU=go(nS),Hge=h({},nS,{dataTransfer:0}),qge=go(Hge),Gge=h({},Bv,{relatedTarget:0}),YP=go(Gge),Kge=h({},Qh,{animationName:0,elapsedTime:0,pseudoElement:0}),Wge=go(Kge),Yge=h({},Qh,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),Jge=go(Yge),Xge=h({},Qh,{data:0}),dU=go(Xge),Qge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eye={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tye(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=eye[f])?!!p[f]:!1}function JP(){return tye}var nye=h({},Bv,{key:function(f){if(f.key){var p=Qge[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=ZE(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Zge[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JP,charCode:function(f){return f.type==="keypress"?ZE(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?ZE(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),rye=go(nye),iye=h({},nS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fU=go(iye),sye=h({},Bv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JP}),oye=go(sye),aye=h({},Qh,{propertyName:0,elapsedTime:0,pseudoElement:0}),lye=go(aye),cye=h({},nS,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),uye=go(cye),dye=h({},Qh,{newState:0,oldState:0}),fye=go(dye),hye=[9,13,27,32],XP=gu&&"CompositionEvent"in window,Fv=null;gu&&"documentMode"in document&&(Fv=document.documentMode);var pye=gu&&"TextEvent"in window&&!Fv,hU=gu&&(!XP||Fv&&8<Fv&&11>=Fv),pU=" ",mU=!1;function gU(f,p){switch(f){case"keyup":return hye.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yU(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var E0=!1;function mye(f,p){switch(f){case"compositionend":return yU(p);case"keypress":return p.which!==32?null:(mU=!0,pU);case"textInput":return f=p.data,f===pU&&mU?null:f;default:return null}}function gye(f,p){if(E0)return f==="compositionend"||!XP&&gU(f,p)?(f=lU(),QE=GP=af=null,E0=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return hU&&p.locale!=="ko"?null:p.data;default:return null}}var yye={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xU(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!yye[f.type]:p==="textarea"}function vU(f,p,y,E){b0?w0?w0.push(E):w0=[E]:b0=E,p=qS(p,"onChange"),0<p.length&&(y=new tS("onChange","change",null,y,E),f.push({event:y,listeners:p}))}var $v=null,zv=null;function xye(f){t$(f,0)}function rS(f){var p=hl(f);if(YE(p))return f}function bU(f,p){if(f==="change")return p}var wU=!1;if(gu){var QP;if(gu){var ZP="oninput"in document;if(!ZP){var EU=document.createElement("div");EU.setAttribute("oninput","return;"),ZP=typeof EU.oninput=="function"}QP=ZP}else QP=!1;wU=QP&&(!document.documentMode||9<document.documentMode)}function SU(){$v&&($v.detachEvent("onpropertychange",AU),zv=$v=null)}function AU(f){if(f.propertyName==="value"&&rS(zv)){var p=[];vU(p,zv,f,VP(f)),aU(xye,p)}}function vye(f,p,y){f==="focusin"?(SU(),$v=p,zv=y,$v.attachEvent("onpropertychange",AU)):f==="focusout"&&SU()}function bye(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return rS(zv)}function wye(f,p){if(f==="click")return rS(p)}function Eye(f,p){if(f==="input"||f==="change")return rS(p)}function Sye(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Uo=typeof Object.is=="function"?Object.is:Sye;function Vv(f,p){if(Uo(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var y=Object.keys(f),E=Object.keys(p);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var R=y[E];if(!Qe.call(p,R)||!Uo(f[R],p[R]))return!1}return!0}function TU(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function kU(f,p){var y=TU(f);f=0;for(var E;y;){if(y.nodeType===3){if(E=f+y.textContent.length,f<=p&&E>=p)return{node:y,offset:p-f};f=E}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=TU(y)}}function NU(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?NU(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function CU(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var p=JE(f.document);p instanceof f.HTMLIFrameElement;){try{var y=typeof p.contentWindow.location.href=="string"}catch{y=!1}if(y)f=p.contentWindow;else break;p=JE(f.document)}return p}function e5(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}var Aye=gu&&"documentMode"in document&&11>=document.documentMode,S0=null,t5=null,Hv=null,n5=!1;function PU(f,p,y){var E=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;n5||S0==null||S0!==JE(E)||(E=S0,"selectionStart"in E&&e5(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Hv&&Vv(Hv,E)||(Hv=E,E=qS(t5,"onSelect"),0<E.length&&(p=new tS("onSelect","select",null,p,y),f.push({event:p,listeners:E}),p.target=S0)))}function Zh(f,p){var y={};return y[f.toLowerCase()]=p.toLowerCase(),y["Webkit"+f]="webkit"+p,y["Moz"+f]="moz"+p,y}var A0={animationend:Zh("Animation","AnimationEnd"),animationiteration:Zh("Animation","AnimationIteration"),animationstart:Zh("Animation","AnimationStart"),transitionrun:Zh("Transition","TransitionRun"),transitionstart:Zh("Transition","TransitionStart"),transitioncancel:Zh("Transition","TransitionCancel"),transitionend:Zh("Transition","TransitionEnd")},r5={},_U={};gu&&(_U=document.createElement("div").style,"AnimationEvent"in window||(delete A0.animationend.animation,delete A0.animationiteration.animation,delete A0.animationstart.animation),"TransitionEvent"in window||delete A0.transitionend.transition);function ep(f){if(r5[f])return r5[f];if(!A0[f])return f;var p=A0[f],y;for(y in p)if(p.hasOwnProperty(y)&&y in _U)return r5[f]=p[y];return f}var IU=ep("animationend"),RU=ep("animationiteration"),OU=ep("animationstart"),Tye=ep("transitionrun"),kye=ep("transitionstart"),Nye=ep("transitioncancel"),MU=ep("transitionend"),LU=new Map,i5="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");i5.push("scrollEnd");function yl(f,p){LU.set(f,p),Gs(p,[f])}var iS=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof ql=="object"&&typeof ql.emit=="function"){ql.emit("uncaughtException",f);return}console.error(f)},ba=[],T0=0,s5=0;function sS(){for(var f=T0,p=s5=T0=0;p<f;){var y=ba[p];ba[p++]=null;var E=ba[p];ba[p++]=null;var R=ba[p];ba[p++]=null;var B=ba[p];if(ba[p++]=null,E!==null&&R!==null){var ne=E.pending;ne===null?R.next=R:(R.next=ne.next,ne.next=R),E.pending=R}B!==0&&jU(y,R,B)}}function oS(f,p,y,E){ba[T0++]=f,ba[T0++]=p,ba[T0++]=y,ba[T0++]=E,s5|=E,f.lanes|=E,f=f.alternate,f!==null&&(f.lanes|=E)}function o5(f,p,y,E){return oS(f,p,y,E),aS(f)}function tp(f,p){return oS(f,null,null,p),aS(f)}function jU(f,p,y){f.lanes|=y;var E=f.alternate;E!==null&&(E.lanes|=y);for(var R=!1,B=f.return;B!==null;)B.childLanes|=y,E=B.alternate,E!==null&&(E.childLanes|=y),B.tag===22&&(f=B.stateNode,f===null||f._visibility&1||(R=!0)),f=B,B=B.return;return f.tag===3?(B=f.stateNode,R&&p!==null&&(R=31-pe(y),f=B.hiddenUpdates,E=f[R],E===null?f[R]=[p]:E.push(p),p.lane=y|536870912),B):null}function aS(f){if(50<fb)throw fb=0,m_=null,Error(r(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}var k0={};function Cye(f,p,y,E){this.tag=f,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fo(f,p,y,E){return new Cye(f,p,y,E)}function a5(f){return f=f.prototype,!(!f||!f.isReactComponent)}function yu(f,p){var y=f.alternate;return y===null?(y=Fo(f.tag,p,f.key,f.mode),y.elementType=f.elementType,y.type=f.type,y.stateNode=f.stateNode,y.alternate=f,f.alternate=y):(y.pendingProps=p,y.type=f.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=f.flags&65011712,y.childLanes=f.childLanes,y.lanes=f.lanes,y.child=f.child,y.memoizedProps=f.memoizedProps,y.memoizedState=f.memoizedState,y.updateQueue=f.updateQueue,p=f.dependencies,y.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},y.sibling=f.sibling,y.index=f.index,y.ref=f.ref,y.refCleanup=f.refCleanup,y}function DU(f,p){f.flags&=65011714;var y=f.alternate;return y===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,p=y.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function lS(f,p,y,E,R,B){var ne=0;if(E=f,typeof f=="function")a5(f)&&(ne=1);else if(typeof f=="string")ne=Oxe(f,y,W.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case L:return f=Fo(31,y,p,R),f.elementType=L,f.lanes=B,f;case x:return np(y.children,R,B,p);case b:ne=8,R|=24;break;case w:return f=Fo(12,y,p,R|2),f.elementType=w,f.lanes=B,f;case D:return f=Fo(13,y,p,R),f.elementType=D,f.lanes=B,f;case _:return f=Fo(19,y,p,R),f.elementType=_,f.lanes=B,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case N:ne=10;break e;case k:ne=9;break e;case O:ne=11;break e;case F:ne=14;break e;case z:ne=16,E=null;break e}ne=29,y=Error(r(130,f===null?"null":typeof f,"")),E=null}return p=Fo(ne,y,p,R),p.elementType=f,p.type=E,p.lanes=B,p}function np(f,p,y,E){return f=Fo(7,f,E,p),f.lanes=y,f}function l5(f,p,y){return f=Fo(6,f,null,p),f.lanes=y,f}function BU(f){var p=Fo(18,null,null,0);return p.stateNode=f,p}function c5(f,p,y){return p=Fo(4,f.children!==null?f.children:[],f.key,p),p.lanes=y,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}var UU=new WeakMap;function wa(f,p){if(typeof f=="object"&&f!==null){var y=UU.get(f);return y!==void 0?y:(p={value:f,source:p,stack:We(p)},UU.set(f,p),p)}return{value:f,source:p,stack:We(p)}}var N0=[],C0=0,cS=null,qv=0,Ea=[],Sa=0,lf=null,ac=1,lc="";function xu(f,p){N0[C0++]=qv,N0[C0++]=cS,cS=f,qv=p}function FU(f,p,y){Ea[Sa++]=ac,Ea[Sa++]=lc,Ea[Sa++]=lf,lf=f;var E=ac;f=lc;var R=32-pe(E)-1;E&=~(1<<R),y+=1;var B=32-pe(p)+R;if(30<B){var ne=R-R%5;B=(E&(1<<ne)-1).toString(32),E>>=ne,R-=ne,ac=1<<32-pe(p)+R|y<<R|E,lc=B+f}else ac=1<<B|y<<R|E,lc=f}function u5(f){f.return!==null&&(xu(f,1),FU(f,1,0))}function d5(f){for(;f===cS;)cS=N0[--C0],N0[C0]=null,qv=N0[--C0],N0[C0]=null;for(;f===lf;)lf=Ea[--Sa],Ea[Sa]=null,lc=Ea[--Sa],Ea[Sa]=null,ac=Ea[--Sa],Ea[Sa]=null}function $U(f,p){Ea[Sa++]=ac,Ea[Sa++]=lc,Ea[Sa++]=lf,ac=p.id,lc=p.overflow,lf=f}var Zi=null,wr=null,_n=!1,cf=null,Aa=!1,f5=Error(r(519));function uf(f){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gv(wa(p,f)),f5}function zU(f){var p=f.stateNode,y=f.type,E=f.memoizedProps;switch(p[Ct]=f,p[wn]=E,y){case"dialog":Sn("cancel",p),Sn("close",p);break;case"iframe":case"object":case"embed":Sn("load",p);break;case"video":case"audio":for(y=0;y<pb.length;y++)Sn(pb[y],p);break;case"source":Sn("error",p);break;case"img":case"image":case"link":Sn("error",p),Sn("load",p);break;case"details":Sn("toggle",p);break;case"input":Sn("invalid",p),tU(p,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0);break;case"select":Sn("invalid",p);break;case"textarea":Sn("invalid",p),rU(p,E.value,E.defaultValue,E.children)}y=E.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||p.textContent===""+y||E.suppressHydrationWarning===!0||s$(p.textContent,y)?(E.popover!=null&&(Sn("beforetoggle",p),Sn("toggle",p)),E.onScroll!=null&&Sn("scroll",p),E.onScrollEnd!=null&&Sn("scrollend",p),E.onClick!=null&&(p.onclick=mu),p=!0):p=!1,p||uf(f,!0)}function VU(f){for(Zi=f.return;Zi;)switch(Zi.tag){case 5:case 31:case 13:Aa=!1;return;case 27:case 3:Aa=!0;return;default:Zi=Zi.return}}function P0(f){if(f!==Zi)return!1;if(!_n)return VU(f),_n=!0,!1;var p=f.tag,y;if((y=p!==3&&p!==27)&&((y=p===5)&&(y=f.type,y=!(y!=="form"&&y!=="button")||__(f.type,f.memoizedProps)),y=!y),y&&wr&&uf(f),VU(f),p===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));wr=p$(f)}else if(p===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));wr=p$(f)}else p===27?(p=wr,Af(f.type)?(f=L_,L_=null,wr=f):wr=p):wr=Zi?ka(f.stateNode.nextSibling):null;return!0}function rp(){wr=Zi=null,_n=!1}function h5(){var f=cf;return f!==null&&(bo===null?bo=f:bo.push.apply(bo,f),cf=null),f}function Gv(f){cf===null?cf=[f]:cf.push(f)}var p5=H(null),ip=null,vu=null;function df(f,p,y){P(p5,p._currentValue),p._currentValue=y}function bu(f){f._currentValue=p5.current,M(p5)}function m5(f,p,y){for(;f!==null;){var E=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),f===y)break;f=f.return}}function g5(f,p,y,E){var R=f.child;for(R!==null&&(R.return=f);R!==null;){var B=R.dependencies;if(B!==null){var ne=R.child;B=B.firstContext;e:for(;B!==null;){var le=B;B=R;for(var Ee=0;Ee<p.length;Ee++)if(le.context===p[Ee]){B.lanes|=y,le=B.alternate,le!==null&&(le.lanes|=y),m5(B.return,y,f),E||(ne=null);break e}B=le.next}}else if(R.tag===18){if(ne=R.return,ne===null)throw Error(r(341));ne.lanes|=y,B=ne.alternate,B!==null&&(B.lanes|=y),m5(ne,y,f),ne=null}else ne=R.child;if(ne!==null)ne.return=R;else for(ne=R;ne!==null;){if(ne===f){ne=null;break}if(R=ne.sibling,R!==null){R.return=ne.return,ne=R;break}ne=ne.return}R=ne}}function _0(f,p,y,E){f=null;for(var R=p,B=!1;R!==null;){if(!B){if((R.flags&524288)!==0)B=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var ne=R.alternate;if(ne===null)throw Error(r(387));if(ne=ne.memoizedProps,ne!==null){var le=R.type;Uo(R.pendingProps.value,ne.value)||(f!==null?f.push(le):f=[le])}}else if(R===oe.current){if(ne=R.alternate,ne===null)throw Error(r(387));ne.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(f!==null?f.push(vb):f=[vb])}R=R.return}f!==null&&g5(p,f,y,E),p.flags|=262144}function uS(f){for(f=f.firstContext;f!==null;){if(!Uo(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function sp(f){ip=f,vu=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function es(f){return HU(ip,f)}function dS(f,p){return ip===null&&sp(f),HU(f,p)}function HU(f,p){var y=p._currentValue;if(p={context:p,memoizedValue:y,next:null},vu===null){if(f===null)throw Error(r(308));vu=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else vu=vu.next=p;return y}var Pye=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(y,E){f.push(E)}};this.abort=function(){p.aborted=!0,f.forEach(function(y){return y()})}},_ye=t.unstable_scheduleCallback,Iye=t.unstable_NormalPriority,ui={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function y5(){return{controller:new Pye,data:new Map,refCount:0}}function Kv(f){f.refCount--,f.refCount===0&&_ye(Iye,function(){f.controller.abort()})}var Wv=null,x5=0,I0=0,R0=null;function Rye(f,p){if(Wv===null){var y=Wv=[];x5=0,I0=w_(),R0={status:"pending",value:void 0,then:function(E){y.push(E)}}}return x5++,p.then(qU,qU),p}function qU(){if(--x5===0&&Wv!==null){R0!==null&&(R0.status="fulfilled");var f=Wv;Wv=null,I0=0,R0=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function Oye(f,p){var y=[],E={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return f.then(function(){E.status="fulfilled",E.value=p;for(var R=0;R<y.length;R++)(0,y[R])(p)},function(R){for(E.status="rejected",E.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),E}var GU=j.S;j.S=function(f,p){P9=it(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&Rye(f,p),GU!==null&&GU(f,p)};var op=H(null);function v5(){var f=op.current;return f!==null?f:ar.pooledCache}function fS(f,p){p===null?P(op,op.current):P(op,p.pool)}function KU(){var f=v5();return f===null?null:{parent:ui._currentValue,pool:f}}var O0=Error(r(460)),b5=Error(r(474)),hS=Error(r(542)),pS={then:function(){}};function WU(f){return f=f.status,f==="fulfilled"||f==="rejected"}function YU(f,p,y){switch(y=f[y],y===void 0?f.push(p):y!==p&&(p.then(mu,mu),p=y),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,XU(f),f;default:if(typeof p.status=="string")p.then(mu,mu);else{if(f=ar,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=p,f.status="pending",f.then(function(E){if(p.status==="pending"){var R=p;R.status="fulfilled",R.value=E}},function(E){if(p.status==="pending"){var R=p;R.status="rejected",R.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,XU(f),f}throw lp=p,O0}}function ap(f){try{var p=f._init;return p(f._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(lp=y,O0):y}}var lp=null;function JU(){if(lp===null)throw Error(r(459));var f=lp;return lp=null,f}function XU(f){if(f===O0||f===hS)throw Error(r(483))}var M0=null,Yv=0;function mS(f){var p=Yv;return Yv+=1,M0===null&&(M0=[]),YU(M0,f,p)}function Jv(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function gS(f,p){throw p.$$typeof===m?Error(r(525)):(f=Object.prototype.toString.call(p),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function QU(f){function p(Oe,Pe){if(f){var De=Oe.deletions;De===null?(Oe.deletions=[Pe],Oe.flags|=16):De.push(Pe)}}function y(Oe,Pe){if(!f)return null;for(;Pe!==null;)p(Oe,Pe),Pe=Pe.sibling;return null}function E(Oe){for(var Pe=new Map;Oe!==null;)Oe.key!==null?Pe.set(Oe.key,Oe):Pe.set(Oe.index,Oe),Oe=Oe.sibling;return Pe}function R(Oe,Pe){return Oe=yu(Oe,Pe),Oe.index=0,Oe.sibling=null,Oe}function B(Oe,Pe,De){return Oe.index=De,f?(De=Oe.alternate,De!==null?(De=De.index,De<Pe?(Oe.flags|=67108866,Pe):De):(Oe.flags|=67108866,Pe)):(Oe.flags|=1048576,Pe)}function ne(Oe){return f&&Oe.alternate===null&&(Oe.flags|=67108866),Oe}function le(Oe,Pe,De,nt){return Pe===null||Pe.tag!==6?(Pe=l5(De,Oe.mode,nt),Pe.return=Oe,Pe):(Pe=R(Pe,De),Pe.return=Oe,Pe)}function Ee(Oe,Pe,De,nt){var Gt=De.type;return Gt===x?Ye(Oe,Pe,De.props.children,nt,De.key):Pe!==null&&(Pe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===z&&ap(Gt)===Pe.type)?(Pe=R(Pe,De.props),Jv(Pe,De),Pe.return=Oe,Pe):(Pe=lS(De.type,De.key,De.props,null,Oe.mode,nt),Jv(Pe,De),Pe.return=Oe,Pe)}function Be(Oe,Pe,De,nt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==De.containerInfo||Pe.stateNode.implementation!==De.implementation?(Pe=c5(De,Oe.mode,nt),Pe.return=Oe,Pe):(Pe=R(Pe,De.children||[]),Pe.return=Oe,Pe)}function Ye(Oe,Pe,De,nt,Gt){return Pe===null||Pe.tag!==7?(Pe=np(De,Oe.mode,nt,Gt),Pe.return=Oe,Pe):(Pe=R(Pe,De),Pe.return=Oe,Pe)}function rt(Oe,Pe,De){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=l5(""+Pe,Oe.mode,De),Pe.return=Oe,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case g:return De=lS(Pe.type,Pe.key,Pe.props,null,Oe.mode,De),Jv(De,Pe),De.return=Oe,De;case v:return Pe=c5(Pe,Oe.mode,De),Pe.return=Oe,Pe;case z:return Pe=ap(Pe),rt(Oe,Pe,De)}if(I(Pe)||V(Pe))return Pe=np(Pe,Oe.mode,De,null),Pe.return=Oe,Pe;if(typeof Pe.then=="function")return rt(Oe,mS(Pe),De);if(Pe.$$typeof===N)return rt(Oe,dS(Oe,Pe),De);gS(Oe,Pe)}return null}function $e(Oe,Pe,De,nt){var Gt=Pe!==null?Pe.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return Gt!==null?null:le(Oe,Pe,""+De,nt);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case g:return De.key===Gt?Ee(Oe,Pe,De,nt):null;case v:return De.key===Gt?Be(Oe,Pe,De,nt):null;case z:return De=ap(De),$e(Oe,Pe,De,nt)}if(I(De)||V(De))return Gt!==null?null:Ye(Oe,Pe,De,nt,null);if(typeof De.then=="function")return $e(Oe,Pe,mS(De),nt);if(De.$$typeof===N)return $e(Oe,Pe,dS(Oe,De),nt);gS(Oe,De)}return null}function He(Oe,Pe,De,nt,Gt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return Oe=Oe.get(De)||null,le(Pe,Oe,""+nt,Gt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case g:return Oe=Oe.get(nt.key===null?De:nt.key)||null,Ee(Pe,Oe,nt,Gt);case v:return Oe=Oe.get(nt.key===null?De:nt.key)||null,Be(Pe,Oe,nt,Gt);case z:return nt=ap(nt),He(Oe,Pe,De,nt,Gt)}if(I(nt)||V(nt))return Oe=Oe.get(De)||null,Ye(Pe,Oe,nt,Gt,null);if(typeof nt.then=="function")return He(Oe,Pe,De,mS(nt),Gt);if(nt.$$typeof===N)return He(Oe,Pe,De,dS(Pe,nt),Gt);gS(Pe,nt)}return null}function jt(Oe,Pe,De,nt){for(var Gt=null,Dn=null,Ft=Pe,fn=Pe=0,Pn=null;Ft!==null&&fn<De.length;fn++){Ft.index>fn?(Pn=Ft,Ft=null):Pn=Ft.sibling;var Bn=$e(Oe,Ft,De[fn],nt);if(Bn===null){Ft===null&&(Ft=Pn);break}f&&Ft&&Bn.alternate===null&&p(Oe,Ft),Pe=B(Bn,Pe,fn),Dn===null?Gt=Bn:Dn.sibling=Bn,Dn=Bn,Ft=Pn}if(fn===De.length)return y(Oe,Ft),_n&&xu(Oe,fn),Gt;if(Ft===null){for(;fn<De.length;fn++)Ft=rt(Oe,De[fn],nt),Ft!==null&&(Pe=B(Ft,Pe,fn),Dn===null?Gt=Ft:Dn.sibling=Ft,Dn=Ft);return _n&&xu(Oe,fn),Gt}for(Ft=E(Ft);fn<De.length;fn++)Pn=He(Ft,Oe,fn,De[fn],nt),Pn!==null&&(f&&Pn.alternate!==null&&Ft.delete(Pn.key===null?fn:Pn.key),Pe=B(Pn,Pe,fn),Dn===null?Gt=Pn:Dn.sibling=Pn,Dn=Pn);return f&&Ft.forEach(function(Pf){return p(Oe,Pf)}),_n&&xu(Oe,fn),Gt}function Xt(Oe,Pe,De,nt){if(De==null)throw Error(r(151));for(var Gt=null,Dn=null,Ft=Pe,fn=Pe=0,Pn=null,Bn=De.next();Ft!==null&&!Bn.done;fn++,Bn=De.next()){Ft.index>fn?(Pn=Ft,Ft=null):Pn=Ft.sibling;var Pf=$e(Oe,Ft,Bn.value,nt);if(Pf===null){Ft===null&&(Ft=Pn);break}f&&Ft&&Pf.alternate===null&&p(Oe,Ft),Pe=B(Pf,Pe,fn),Dn===null?Gt=Pf:Dn.sibling=Pf,Dn=Pf,Ft=Pn}if(Bn.done)return y(Oe,Ft),_n&&xu(Oe,fn),Gt;if(Ft===null){for(;!Bn.done;fn++,Bn=De.next())Bn=rt(Oe,Bn.value,nt),Bn!==null&&(Pe=B(Bn,Pe,fn),Dn===null?Gt=Bn:Dn.sibling=Bn,Dn=Bn);return _n&&xu(Oe,fn),Gt}for(Ft=E(Ft);!Bn.done;fn++,Bn=De.next())Bn=He(Ft,Oe,fn,Bn.value,nt),Bn!==null&&(f&&Bn.alternate!==null&&Ft.delete(Bn.key===null?fn:Bn.key),Pe=B(Bn,Pe,fn),Dn===null?Gt=Bn:Dn.sibling=Bn,Dn=Bn);return f&&Ft.forEach(function(Hxe){return p(Oe,Hxe)}),_n&&xu(Oe,fn),Gt}function nr(Oe,Pe,De,nt){if(typeof De=="object"&&De!==null&&De.type===x&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case g:e:{for(var Gt=De.key;Pe!==null;){if(Pe.key===Gt){if(Gt=De.type,Gt===x){if(Pe.tag===7){y(Oe,Pe.sibling),nt=R(Pe,De.props.children),nt.return=Oe,Oe=nt;break e}}else if(Pe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===z&&ap(Gt)===Pe.type){y(Oe,Pe.sibling),nt=R(Pe,De.props),Jv(nt,De),nt.return=Oe,Oe=nt;break e}y(Oe,Pe);break}else p(Oe,Pe);Pe=Pe.sibling}De.type===x?(nt=np(De.props.children,Oe.mode,nt,De.key),nt.return=Oe,Oe=nt):(nt=lS(De.type,De.key,De.props,null,Oe.mode,nt),Jv(nt,De),nt.return=Oe,Oe=nt)}return ne(Oe);case v:e:{for(Gt=De.key;Pe!==null;){if(Pe.key===Gt)if(Pe.tag===4&&Pe.stateNode.containerInfo===De.containerInfo&&Pe.stateNode.implementation===De.implementation){y(Oe,Pe.sibling),nt=R(Pe,De.children||[]),nt.return=Oe,Oe=nt;break e}else{y(Oe,Pe);break}else p(Oe,Pe);Pe=Pe.sibling}nt=c5(De,Oe.mode,nt),nt.return=Oe,Oe=nt}return ne(Oe);case z:return De=ap(De),nr(Oe,Pe,De,nt)}if(I(De))return jt(Oe,Pe,De,nt);if(V(De)){if(Gt=V(De),typeof Gt!="function")throw Error(r(150));return De=Gt.call(De),Xt(Oe,Pe,De,nt)}if(typeof De.then=="function")return nr(Oe,Pe,mS(De),nt);if(De.$$typeof===N)return nr(Oe,Pe,dS(Oe,De),nt);gS(Oe,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,Pe!==null&&Pe.tag===6?(y(Oe,Pe.sibling),nt=R(Pe,De),nt.return=Oe,Oe=nt):(y(Oe,Pe),nt=l5(De,Oe.mode,nt),nt.return=Oe,Oe=nt),ne(Oe)):y(Oe,Pe)}return function(Oe,Pe,De,nt){try{Yv=0;var Gt=nr(Oe,Pe,De,nt);return M0=null,Gt}catch(Ft){if(Ft===O0||Ft===hS)throw Ft;var Dn=Fo(29,Ft,null,Oe.mode);return Dn.lanes=nt,Dn.return=Oe,Dn}finally{}}}var cp=QU(!0),ZU=QU(!1),ff=!1;function w5(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function E5(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function hf(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function pf(f,p,y){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(qn&2)!==0){var R=E.pending;return R===null?p.next=p:(p.next=R.next,R.next=p),E.pending=p,p=aS(f),jU(f,null,y),p}return oS(f,E,p,y),aS(f)}function Xv(f,p,y){if(p=p.updateQueue,p!==null&&(p=p.shared,(y&4194048)!==0)){var E=p.lanes;E&=f.pendingLanes,y|=E,p.lanes=y,_e(f,y)}}function S5(f,p){var y=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,y===E)){var R=null,B=null;if(y=y.firstBaseUpdate,y!==null){do{var ne={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};B===null?R=B=ne:B=B.next=ne,y=y.next}while(y!==null);B===null?R=B=p:B=B.next=p}else R=B=p;y={baseState:E.baseState,firstBaseUpdate:R,lastBaseUpdate:B,shared:E.shared,callbacks:E.callbacks},f.updateQueue=y;return}f=y.lastBaseUpdate,f===null?y.firstBaseUpdate=p:f.next=p,y.lastBaseUpdate=p}var A5=!1;function Qv(){if(A5){var f=R0;if(f!==null)throw f}}function Zv(f,p,y,E){A5=!1;var R=f.updateQueue;ff=!1;var B=R.firstBaseUpdate,ne=R.lastBaseUpdate,le=R.shared.pending;if(le!==null){R.shared.pending=null;var Ee=le,Be=Ee.next;Ee.next=null,ne===null?B=Be:ne.next=Be,ne=Ee;var Ye=f.alternate;Ye!==null&&(Ye=Ye.updateQueue,le=Ye.lastBaseUpdate,le!==ne&&(le===null?Ye.firstBaseUpdate=Be:le.next=Be,Ye.lastBaseUpdate=Ee))}if(B!==null){var rt=R.baseState;ne=0,Ye=Be=Ee=null,le=B;do{var $e=le.lane&-536870913,He=$e!==le.lane;if(He?(Cn&$e)===$e:(E&$e)===$e){$e!==0&&$e===I0&&(A5=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var jt=f,Xt=le;$e=p;var nr=y;switch(Xt.tag){case 1:if(jt=Xt.payload,typeof jt=="function"){rt=jt.call(nr,rt,$e);break e}rt=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=Xt.payload,$e=typeof jt=="function"?jt.call(nr,rt,$e):jt,$e==null)break e;rt=h({},rt,$e);break e;case 2:ff=!0}}$e=le.callback,$e!==null&&(f.flags|=64,He&&(f.flags|=8192),He=R.callbacks,He===null?R.callbacks=[$e]:He.push($e))}else He={lane:$e,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Ye===null?(Be=Ye=He,Ee=rt):Ye=Ye.next=He,ne|=$e;if(le=le.next,le===null){if(le=R.shared.pending,le===null)break;He=le,le=He.next,He.next=null,R.lastBaseUpdate=He,R.shared.pending=null}}while(!0);Ye===null&&(Ee=rt),R.baseState=Ee,R.firstBaseUpdate=Be,R.lastBaseUpdate=Ye,B===null&&(R.shared.lanes=0),vf|=ne,f.lanes=ne,f.memoizedState=rt}}function eF(f,p){if(typeof f!="function")throw Error(r(191,f));f.call(p)}function tF(f,p){var y=f.callbacks;if(y!==null)for(f.callbacks=null,f=0;f<y.length;f++)eF(y[f],p)}var L0=H(null),yS=H(0);function nF(f,p){f=Pu,P(yS,f),P(L0,p),Pu=f|p.baseLanes}function T5(){P(yS,Pu),P(L0,L0.current)}function k5(){Pu=yS.current,M(L0),M(yS)}var $o=H(null),Ta=null;function mf(f){var p=f.alternate;P(ti,ti.current&1),P($o,f),Ta===null&&(p===null||L0.current!==null||p.memoizedState!==null)&&(Ta=f)}function N5(f){P(ti,ti.current),P($o,f),Ta===null&&(Ta=f)}function rF(f){f.tag===22?(P(ti,ti.current),P($o,f),Ta===null&&(Ta=f)):gf()}function gf(){P(ti,ti.current),P($o,$o.current)}function zo(f){M($o),Ta===f&&(Ta=null),M(ti)}var ti=H(0);function xS(f){for(var p=f;p!==null;){if(p.tag===13){var y=p.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||O_(y)||M_(y)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var wu=0,cn=null,er=null,di=null,vS=!1,j0=!1,up=!1,bS=0,eb=0,D0=null,Mye=0;function qr(){throw Error(r(321))}function C5(f,p){if(p===null)return!1;for(var y=0;y<p.length&&y<f.length;y++)if(!Uo(f[y],p[y]))return!1;return!0}function P5(f,p,y,E,R,B){return wu=B,cn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,j.H=f===null||f.memoizedState===null?FF:H5,up=!1,B=y(E,R),up=!1,j0&&(B=sF(p,y,E,R)),iF(f),B}function iF(f){j.H=rb;var p=er!==null&&er.next!==null;if(wu=0,di=er=cn=null,vS=!1,eb=0,D0=null,p)throw Error(r(300));f===null||fi||(f=f.dependencies,f!==null&&uS(f)&&(fi=!0))}function sF(f,p,y,E){cn=f;var R=0;do{if(j0&&(D0=null),eb=0,j0=!1,25<=R)throw Error(r(301));if(R+=1,di=er=null,f.updateQueue!=null){var B=f.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}j.H=$F,B=p(y,E)}while(j0);return B}function Lye(){var f=j.H,p=f.useState()[0];return p=typeof p.then=="function"?tb(p):p,f=f.useState()[0],(er!==null?er.memoizedState:null)!==f&&(cn.flags|=1024),p}function _5(){var f=bS!==0;return bS=0,f}function I5(f,p,y){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~y}function R5(f){if(vS){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}vS=!1}wu=0,di=er=cn=null,j0=!1,eb=bS=0,D0=null}function Ws(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?cn.memoizedState=di=f:di=di.next=f,di}function ni(){if(er===null){var f=cn.alternate;f=f!==null?f.memoizedState:null}else f=er.next;var p=di===null?cn.memoizedState:di.next;if(p!==null)di=p,er=f;else{if(f===null)throw cn.alternate===null?Error(r(467)):Error(r(310));er=f,f={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},di===null?cn.memoizedState=di=f:di=di.next=f}return di}function wS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tb(f){var p=eb;return eb+=1,D0===null&&(D0=[]),f=YU(D0,f,p),p=cn,(di===null?p.memoizedState:di.next)===null&&(p=p.alternate,j.H=p===null||p.memoizedState===null?FF:H5),f}function ES(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return tb(f);if(f.$$typeof===N)return es(f)}throw Error(r(438,String(f)))}function O5(f){var p=null,y=cn.updateQueue;if(y!==null&&(p=y.memoCache),p==null){var E=cn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(R){return R.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),y===null&&(y=wS(),cn.updateQueue=y),y.memoCache=p,y=p.data[p.index],y===void 0)for(y=p.data[p.index]=Array(f),E=0;E<f;E++)y[E]=$;return p.index++,y}function Eu(f,p){return typeof p=="function"?p(f):p}function SS(f){var p=ni();return M5(p,er,f)}function M5(f,p,y){var E=f.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=y;var R=f.baseQueue,B=E.pending;if(B!==null){if(R!==null){var ne=R.next;R.next=B.next,B.next=ne}p.baseQueue=R=B,E.pending=null}if(B=f.baseState,R===null)f.memoizedState=B;else{p=R.next;var le=ne=null,Ee=null,Be=p,Ye=!1;do{var rt=Be.lane&-536870913;if(rt!==Be.lane?(Cn&rt)===rt:(wu&rt)===rt){var $e=Be.revertLane;if($e===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),rt===I0&&(Ye=!0);else if((wu&$e)===$e){Be=Be.next,$e===I0&&(Ye=!0);continue}else rt={lane:0,revertLane:Be.revertLane,gesture:null,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Ee===null?(le=Ee=rt,ne=B):Ee=Ee.next=rt,cn.lanes|=$e,vf|=$e;rt=Be.action,up&&y(B,rt),B=Be.hasEagerState?Be.eagerState:y(B,rt)}else $e={lane:rt,revertLane:Be.revertLane,gesture:Be.gesture,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null},Ee===null?(le=Ee=$e,ne=B):Ee=Ee.next=$e,cn.lanes|=rt,vf|=rt;Be=Be.next}while(Be!==null&&Be!==p);if(Ee===null?ne=B:Ee.next=le,!Uo(B,f.memoizedState)&&(fi=!0,Ye&&(y=R0,y!==null)))throw y;f.memoizedState=B,f.baseState=ne,f.baseQueue=Ee,E.lastRenderedState=B}return R===null&&(E.lanes=0),[f.memoizedState,E.dispatch]}function L5(f){var p=ni(),y=p.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=f;var E=y.dispatch,R=y.pending,B=p.memoizedState;if(R!==null){y.pending=null;var ne=R=R.next;do B=f(B,ne.action),ne=ne.next;while(ne!==R);Uo(B,p.memoizedState)||(fi=!0),p.memoizedState=B,p.baseQueue===null&&(p.baseState=B),y.lastRenderedState=B}return[B,E]}function oF(f,p,y){var E=cn,R=ni(),B=_n;if(B){if(y===void 0)throw Error(r(407));y=y()}else y=p();var ne=!Uo((er||R).memoizedState,y);if(ne&&(R.memoizedState=y,fi=!0),R=R.queue,B5(cF.bind(null,E,R,f),[f]),R.getSnapshot!==p||ne||di!==null&&di.memoizedState.tag&1){if(E.flags|=2048,B0(9,{destroy:void 0},lF.bind(null,E,R,y,p),null),ar===null)throw Error(r(349));B||(wu&127)!==0||aF(E,p,y)}return y}function aF(f,p,y){f.flags|=16384,f={getSnapshot:p,value:y},p=cn.updateQueue,p===null?(p=wS(),cn.updateQueue=p,p.stores=[f]):(y=p.stores,y===null?p.stores=[f]:y.push(f))}function lF(f,p,y,E){p.value=y,p.getSnapshot=E,uF(p)&&dF(f)}function cF(f,p,y){return y(function(){uF(p)&&dF(f)})}function uF(f){var p=f.getSnapshot;f=f.value;try{var y=p();return!Uo(f,y)}catch{return!0}}function dF(f){var p=tp(f,2);p!==null&&wo(p,f,2)}function j5(f){var p=Ws();if(typeof f=="function"){var y=f;if(f=y(),up){he(!0);try{y()}finally{he(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eu,lastRenderedState:f},p}function fF(f,p,y,E){return f.baseState=y,M5(f,er,typeof E=="function"?E:Eu)}function jye(f,p,y,E,R){if(kS(f))throw Error(r(485));if(f=p.action,f!==null){var B={payload:R,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){B.listeners.push(ne)}};j.T!==null?y(!0):B.isTransition=!1,E(B),y=p.pending,y===null?(B.next=p.pending=B,hF(p,B)):(B.next=y.next,p.pending=y.next=B)}}function hF(f,p){var y=p.action,E=p.payload,R=f.state;if(p.isTransition){var B=j.T,ne={};j.T=ne;try{var le=y(R,E),Ee=j.S;Ee!==null&&Ee(ne,le),pF(f,p,le)}catch(Be){D5(f,p,Be)}finally{B!==null&&ne.types!==null&&(B.types=ne.types),j.T=B}}else try{B=y(R,E),pF(f,p,B)}catch(Be){D5(f,p,Be)}}function pF(f,p,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(E){mF(f,p,E)},function(E){return D5(f,p,E)}):mF(f,p,y)}function mF(f,p,y){p.status="fulfilled",p.value=y,gF(p),f.state=y,p=f.pending,p!==null&&(y=p.next,y===p?f.pending=null:(y=y.next,p.next=y,hF(f,y)))}function D5(f,p,y){var E=f.pending;if(f.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=y,gF(p),p=p.next;while(p!==E)}f.action=null}function gF(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function yF(f,p){return p}function xF(f,p){if(_n){var y=ar.formState;if(y!==null){e:{var E=cn;if(_n){if(wr){t:{for(var R=wr,B=Aa;R.nodeType!==8;){if(!B){R=null;break t}if(R=ka(R.nextSibling),R===null){R=null;break t}}B=R.data,R=B==="F!"||B==="F"?R:null}if(R){wr=ka(R.nextSibling),E=R.data==="F!";break e}}uf(E)}E=!1}E&&(p=y[0])}}return y=Ws(),y.memoizedState=y.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yF,lastRenderedState:p},y.queue=E,y=DF.bind(null,cn,E),E.dispatch=y,E=j5(!1),B=V5.bind(null,cn,!1,E.queue),E=Ws(),R={state:p,dispatch:null,action:f,pending:null},E.queue=R,y=jye.bind(null,cn,R,B,y),R.dispatch=y,E.memoizedState=f,[p,y,!1]}function vF(f){var p=ni();return bF(p,er,f)}function bF(f,p,y){if(p=M5(f,p,yF)[0],f=SS(Eu)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var E=tb(p)}catch(ne){throw ne===O0?hS:ne}else E=p;p=ni();var R=p.queue,B=R.dispatch;return y!==p.memoizedState&&(cn.flags|=2048,B0(9,{destroy:void 0},Dye.bind(null,R,y),null)),[E,B,f]}function Dye(f,p){f.action=p}function wF(f){var p=ni(),y=er;if(y!==null)return bF(p,y,f);ni(),p=p.memoizedState,y=ni();var E=y.queue.dispatch;return y.memoizedState=f,[p,E,!1]}function B0(f,p,y,E){return f={tag:f,create:y,deps:E,inst:p,next:null},p=cn.updateQueue,p===null&&(p=wS(),cn.updateQueue=p),y=p.lastEffect,y===null?p.lastEffect=f.next=f:(E=y.next,y.next=f,f.next=E,p.lastEffect=f),f}function EF(){return ni().memoizedState}function AS(f,p,y,E){var R=Ws();cn.flags|=f,R.memoizedState=B0(1|p,{destroy:void 0},y,E===void 0?null:E)}function TS(f,p,y,E){var R=ni();E=E===void 0?null:E;var B=R.memoizedState.inst;er!==null&&E!==null&&C5(E,er.memoizedState.deps)?R.memoizedState=B0(p,B,y,E):(cn.flags|=f,R.memoizedState=B0(1|p,B,y,E))}function SF(f,p){AS(8390656,8,f,p)}function B5(f,p){TS(2048,8,f,p)}function Bye(f){cn.flags|=4;var p=cn.updateQueue;if(p===null)p=wS(),cn.updateQueue=p,p.events=[f];else{var y=p.events;y===null?p.events=[f]:y.push(f)}}function AF(f){var p=ni().memoizedState;return Bye({ref:p,nextImpl:f}),function(){if((qn&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function TF(f,p){return TS(4,2,f,p)}function kF(f,p){return TS(4,4,f,p)}function NF(f,p){if(typeof p=="function"){f=f();var y=p(f);return function(){typeof y=="function"?y():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function CF(f,p,y){y=y!=null?y.concat([f]):null,TS(4,4,NF.bind(null,p,f),y)}function U5(){}function PF(f,p){var y=ni();p=p===void 0?null:p;var E=y.memoizedState;return p!==null&&C5(p,E[1])?E[0]:(y.memoizedState=[f,p],f)}function _F(f,p){var y=ni();p=p===void 0?null:p;var E=y.memoizedState;if(p!==null&&C5(p,E[1]))return E[0];if(E=f(),up){he(!0);try{f()}finally{he(!1)}}return y.memoizedState=[E,p],E}function F5(f,p,y){return y===void 0||(wu&1073741824)!==0&&(Cn&261930)===0?f.memoizedState=p:(f.memoizedState=y,f=I9(),cn.lanes|=f,vf|=f,y)}function IF(f,p,y,E){return Uo(y,p)?y:L0.current!==null?(f=F5(f,y,E),Uo(f,p)||(fi=!0),f):(wu&42)===0||(wu&1073741824)!==0&&(Cn&261930)===0?(fi=!0,f.memoizedState=y):(f=I9(),cn.lanes|=f,vf|=f,p)}function RF(f,p,y,E,R){var B=q.p;q.p=B!==0&&8>B?B:8;var ne=j.T,le={};j.T=le,V5(f,!1,p,y);try{var Ee=R(),Be=j.S;if(Be!==null&&Be(le,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Ye=Oye(Ee,E);nb(f,p,Ye,qo(f))}else nb(f,p,E,qo(f))}catch(rt){nb(f,p,{then:function(){},status:"rejected",reason:rt},qo())}finally{q.p=B,ne!==null&&le.types!==null&&(ne.types=le.types),j.T=ne}}function Uye(){}function $5(f,p,y,E){if(f.tag!==5)throw Error(r(476));var R=OF(f).queue;RF(f,R,p,K,y===null?Uye:function(){return MF(f),y(E)})}function OF(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eu,lastRenderedState:K},next:null};var y={};return p.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eu,lastRenderedState:y},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function MF(f){var p=OF(f);p.next===null&&(p=f.alternate.memoizedState),nb(f,p.next.queue,{},qo())}function z5(){return es(vb)}function LF(){return ni().memoizedState}function jF(){return ni().memoizedState}function Fye(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var y=qo();f=hf(y);var E=pf(p,f,y);E!==null&&(wo(E,p,y),Xv(E,p,y)),p={cache:y5()},f.payload=p;return}p=p.return}}function $ye(f,p,y){var E=qo();y={lane:E,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},kS(f)?BF(p,y):(y=o5(f,p,y,E),y!==null&&(wo(y,f,E),UF(y,p,E)))}function DF(f,p,y){var E=qo();nb(f,p,y,E)}function nb(f,p,y,E){var R={lane:E,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(kS(f))BF(p,R);else{var B=f.alternate;if(f.lanes===0&&(B===null||B.lanes===0)&&(B=p.lastRenderedReducer,B!==null))try{var ne=p.lastRenderedState,le=B(ne,y);if(R.hasEagerState=!0,R.eagerState=le,Uo(le,ne))return oS(f,p,R,0),ar===null&&sS(),!1}catch{}finally{}if(y=o5(f,p,R,E),y!==null)return wo(y,f,E),UF(y,p,E),!0}return!1}function V5(f,p,y,E){if(E={lane:2,revertLane:w_(),gesture:null,action:E,hasEagerState:!1,eagerState:null,next:null},kS(f)){if(p)throw Error(r(479))}else p=o5(f,y,E,2),p!==null&&wo(p,f,2)}function kS(f){var p=f.alternate;return f===cn||p!==null&&p===cn}function BF(f,p){j0=vS=!0;var y=f.pending;y===null?p.next=p:(p.next=y.next,y.next=p),f.pending=p}function UF(f,p,y){if((y&4194048)!==0){var E=p.lanes;E&=f.pendingLanes,y|=E,p.lanes=y,_e(f,y)}}var rb={readContext:es,use:ES,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useLayoutEffect:qr,useInsertionEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useSyncExternalStore:qr,useId:qr,useHostTransitionStatus:qr,useFormState:qr,useActionState:qr,useOptimistic:qr,useMemoCache:qr,useCacheRefresh:qr};rb.useEffectEvent=qr;var FF={readContext:es,use:ES,useCallback:function(f,p){return Ws().memoizedState=[f,p===void 0?null:p],f},useContext:es,useEffect:SF,useImperativeHandle:function(f,p,y){y=y!=null?y.concat([f]):null,AS(4194308,4,NF.bind(null,p,f),y)},useLayoutEffect:function(f,p){return AS(4194308,4,f,p)},useInsertionEffect:function(f,p){AS(4,2,f,p)},useMemo:function(f,p){var y=Ws();p=p===void 0?null:p;var E=f();if(up){he(!0);try{f()}finally{he(!1)}}return y.memoizedState=[E,p],E},useReducer:function(f,p,y){var E=Ws();if(y!==void 0){var R=y(p);if(up){he(!0);try{y(p)}finally{he(!1)}}}else R=p;return E.memoizedState=E.baseState=R,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:R},E.queue=f,f=f.dispatch=$ye.bind(null,cn,f),[E.memoizedState,f]},useRef:function(f){var p=Ws();return f={current:f},p.memoizedState=f},useState:function(f){f=j5(f);var p=f.queue,y=DF.bind(null,cn,p);return p.dispatch=y,[f.memoizedState,y]},useDebugValue:U5,useDeferredValue:function(f,p){var y=Ws();return F5(y,f,p)},useTransition:function(){var f=j5(!1);return f=RF.bind(null,cn,f.queue,!0,!1),Ws().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,y){var E=cn,R=Ws();if(_n){if(y===void 0)throw Error(r(407));y=y()}else{if(y=p(),ar===null)throw Error(r(349));(Cn&127)!==0||aF(E,p,y)}R.memoizedState=y;var B={value:y,getSnapshot:p};return R.queue=B,SF(cF.bind(null,E,B,f),[f]),E.flags|=2048,B0(9,{destroy:void 0},lF.bind(null,E,B,y,p),null),y},useId:function(){var f=Ws(),p=ar.identifierPrefix;if(_n){var y=lc,E=ac;y=(E&~(1<<32-pe(E)-1)).toString(32)+y,p="_"+p+"R_"+y,y=bS++,0<y&&(p+="H"+y.toString(32)),p+="_"}else y=Mye++,p="_"+p+"r_"+y.toString(32)+"_";return f.memoizedState=p},useHostTransitionStatus:z5,useFormState:xF,useActionState:xF,useOptimistic:function(f){var p=Ws();p.memoizedState=p.baseState=f;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=y,p=V5.bind(null,cn,!0,y),y.dispatch=p,[f,p]},useMemoCache:O5,useCacheRefresh:function(){return Ws().memoizedState=Fye.bind(null,cn)},useEffectEvent:function(f){var p=Ws(),y={impl:f};return p.memoizedState=y,function(){if((qn&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}},H5={readContext:es,use:ES,useCallback:PF,useContext:es,useEffect:B5,useImperativeHandle:CF,useInsertionEffect:TF,useLayoutEffect:kF,useMemo:_F,useReducer:SS,useRef:EF,useState:function(){return SS(Eu)},useDebugValue:U5,useDeferredValue:function(f,p){var y=ni();return IF(y,er.memoizedState,f,p)},useTransition:function(){var f=SS(Eu)[0],p=ni().memoizedState;return[typeof f=="boolean"?f:tb(f),p]},useSyncExternalStore:oF,useId:LF,useHostTransitionStatus:z5,useFormState:vF,useActionState:vF,useOptimistic:function(f,p){var y=ni();return fF(y,er,f,p)},useMemoCache:O5,useCacheRefresh:jF};H5.useEffectEvent=AF;var $F={readContext:es,use:ES,useCallback:PF,useContext:es,useEffect:B5,useImperativeHandle:CF,useInsertionEffect:TF,useLayoutEffect:kF,useMemo:_F,useReducer:L5,useRef:EF,useState:function(){return L5(Eu)},useDebugValue:U5,useDeferredValue:function(f,p){var y=ni();return er===null?F5(y,f,p):IF(y,er.memoizedState,f,p)},useTransition:function(){var f=L5(Eu)[0],p=ni().memoizedState;return[typeof f=="boolean"?f:tb(f),p]},useSyncExternalStore:oF,useId:LF,useHostTransitionStatus:z5,useFormState:wF,useActionState:wF,useOptimistic:function(f,p){var y=ni();return er!==null?fF(y,er,f,p):(y.baseState=f,[f,y.queue.dispatch])},useMemoCache:O5,useCacheRefresh:jF};$F.useEffectEvent=AF;function q5(f,p,y,E){p=f.memoizedState,y=y(E,p),y=y==null?p:h({},p,y),f.memoizedState=y,f.lanes===0&&(f.updateQueue.baseState=y)}var G5={enqueueSetState:function(f,p,y){f=f._reactInternals;var E=qo(),R=hf(E);R.payload=p,y!=null&&(R.callback=y),p=pf(f,R,E),p!==null&&(wo(p,f,E),Xv(p,f,E))},enqueueReplaceState:function(f,p,y){f=f._reactInternals;var E=qo(),R=hf(E);R.tag=1,R.payload=p,y!=null&&(R.callback=y),p=pf(f,R,E),p!==null&&(wo(p,f,E),Xv(p,f,E))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var y=qo(),E=hf(y);E.tag=2,p!=null&&(E.callback=p),p=pf(f,E,y),p!==null&&(wo(p,f,y),Xv(p,f,y))}};function zF(f,p,y,E,R,B,ne){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,B,ne):p.prototype&&p.prototype.isPureReactComponent?!Vv(y,E)||!Vv(R,B):!0}function VF(f,p,y,E){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(y,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(y,E),p.state!==f&&G5.enqueueReplaceState(p,p.state,null)}function dp(f,p){var y=p;if("ref"in p){y={};for(var E in p)E!=="ref"&&(y[E]=p[E])}if(f=f.defaultProps){y===p&&(y=h({},y));for(var R in f)y[R]===void 0&&(y[R]=f[R])}return y}function HF(f){iS(f)}function qF(f){console.error(f)}function GF(f){iS(f)}function NS(f,p){try{var y=f.onUncaughtError;y(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function KF(f,p,y){try{var E=f.onCaughtError;E(y.value,{componentStack:y.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function K5(f,p,y){return y=hf(y),y.tag=3,y.payload={element:null},y.callback=function(){NS(f,p)},y}function WF(f){return f=hf(f),f.tag=3,f}function YF(f,p,y,E){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var B=E.value;f.payload=function(){return R(B)},f.callback=function(){KF(p,y,E)}}var ne=y.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(f.callback=function(){KF(p,y,E),typeof R!="function"&&(bf===null?bf=new Set([this]):bf.add(this));var le=E.stack;this.componentDidCatch(E.value,{componentStack:le!==null?le:""})})}function zye(f,p,y,E,R){if(y.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=y.alternate,p!==null&&_0(p,y,R,!0),y=$o.current,y!==null){switch(y.tag){case 31:case 13:return Ta===null?US():y.alternate===null&&Gr===0&&(Gr=3),y.flags&=-257,y.flags|=65536,y.lanes=R,E===pS?y.flags|=16384:(p=y.updateQueue,p===null?y.updateQueue=new Set([E]):p.add(E),x_(f,E,R)),!1;case 22:return y.flags|=65536,E===pS?y.flags|=16384:(p=y.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},y.updateQueue=p):(y=p.retryQueue,y===null?p.retryQueue=new Set([E]):y.add(E)),x_(f,E,R)),!1}throw Error(r(435,y.tag))}return x_(f,E,R),US(),!1}if(_n)return p=$o.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=R,E!==f5&&(f=Error(r(422),{cause:E}),Gv(wa(f,y)))):(E!==f5&&(p=Error(r(423),{cause:E}),Gv(wa(p,y))),f=f.current.alternate,f.flags|=65536,R&=-R,f.lanes|=R,E=wa(E,y),R=K5(f.stateNode,E,R),S5(f,R),Gr!==4&&(Gr=2)),!1;var B=Error(r(520),{cause:E});if(B=wa(B,y),db===null?db=[B]:db.push(B),Gr!==4&&(Gr=2),p===null)return!0;E=wa(E,y),y=p;do{switch(y.tag){case 3:return y.flags|=65536,f=R&-R,y.lanes|=f,f=K5(y.stateNode,E,f),S5(y,f),!1;case 1:if(p=y.type,B=y.stateNode,(y.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(bf===null||!bf.has(B))))return y.flags|=65536,R&=-R,y.lanes|=R,R=WF(R),YF(R,f,y,E),S5(y,R),!1}y=y.return}while(y!==null);return!1}var W5=Error(r(461)),fi=!1;function ts(f,p,y,E){p.child=f===null?ZU(p,null,y,E):cp(p,f.child,y,E)}function JF(f,p,y,E,R){y=y.render;var B=p.ref;if("ref"in E){var ne={};for(var le in E)le!=="ref"&&(ne[le]=E[le])}else ne=E;return sp(p),E=P5(f,p,y,ne,B,R),le=_5(),f!==null&&!fi?(I5(f,p,R),Su(f,p,R)):(_n&&le&&u5(p),p.flags|=1,ts(f,p,E,R),p.child)}function XF(f,p,y,E,R){if(f===null){var B=y.type;return typeof B=="function"&&!a5(B)&&B.defaultProps===void 0&&y.compare===null?(p.tag=15,p.type=B,QF(f,p,B,E,R)):(f=lS(y.type,null,E,p,p.mode,R),f.ref=p.ref,f.return=p,p.child=f)}if(B=f.child,!n_(f,R)){var ne=B.memoizedProps;if(y=y.compare,y=y!==null?y:Vv,y(ne,E)&&f.ref===p.ref)return Su(f,p,R)}return p.flags|=1,f=yu(B,E),f.ref=p.ref,f.return=p,p.child=f}function QF(f,p,y,E,R){if(f!==null){var B=f.memoizedProps;if(Vv(B,E)&&f.ref===p.ref)if(fi=!1,p.pendingProps=E=B,n_(f,R))(f.flags&131072)!==0&&(fi=!0);else return p.lanes=f.lanes,Su(f,p,R)}return Y5(f,p,y,E,R)}function ZF(f,p,y,E){var R=E.children,B=f!==null?f.memoizedState:null;if(f===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.mode==="hidden"){if((p.flags&128)!==0){if(B=B!==null?B.baseLanes|y:y,f!==null){for(E=p.child=f.child,R=0;E!==null;)R=R|E.lanes|E.childLanes,E=E.sibling;E=R&~B}else E=0,p.child=null;return e9(f,p,B,y,E)}if((y&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&fS(p,B!==null?B.cachePool:null),B!==null?nF(p,B):T5(),rF(p);else return E=p.lanes=536870912,e9(f,p,B!==null?B.baseLanes|y:y,y,E)}else B!==null?(fS(p,B.cachePool),nF(p,B),gf(),p.memoizedState=null):(f!==null&&fS(p,null),T5(),gf());return ts(f,p,R,y),p.child}function ib(f,p){return f!==null&&f.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function e9(f,p,y,E,R){var B=v5();return B=B===null?null:{parent:ui._currentValue,pool:B},p.memoizedState={baseLanes:y,cachePool:B},f!==null&&fS(p,null),T5(),rF(p),f!==null&&_0(f,p,E,!0),p.childLanes=R,null}function CS(f,p){return p=_S({mode:p.mode,children:p.children},f.mode),p.ref=f.ref,f.child=p,p.return=f,p}function t9(f,p,y){return cp(p,f.child,null,y),f=CS(p,p.pendingProps),f.flags|=2,zo(p),p.memoizedState=null,f}function Vye(f,p,y){var E=p.pendingProps,R=(p.flags&128)!==0;if(p.flags&=-129,f===null){if(_n){if(E.mode==="hidden")return f=CS(p,E),p.lanes=536870912,ib(null,f);if(N5(p),(f=wr)?(f=h$(f,Aa),f=f!==null&&f.data==="&"?f:null,f!==null&&(p.memoizedState={dehydrated:f,treeContext:lf!==null?{id:ac,overflow:lc}:null,retryLane:536870912,hydrationErrors:null},y=BU(f),y.return=p,p.child=y,Zi=p,wr=null)):f=null,f===null)throw uf(p);return p.lanes=536870912,null}return CS(p,E)}var B=f.memoizedState;if(B!==null){var ne=B.dehydrated;if(N5(p),R)if(p.flags&256)p.flags&=-257,p=t9(f,p,y);else if(p.memoizedState!==null)p.child=f.child,p.flags|=128,p=null;else throw Error(r(558));else if(fi||_0(f,p,y,!1),R=(y&f.childLanes)!==0,fi||R){if(E=ar,E!==null&&(ne=Re(E,y),ne!==0&&ne!==B.retryLane))throw B.retryLane=ne,tp(f,ne),wo(E,f,ne),W5;US(),p=t9(f,p,y)}else f=B.treeContext,wr=ka(ne.nextSibling),Zi=p,_n=!0,cf=null,Aa=!1,f!==null&&$U(p,f),p=CS(p,E),p.flags|=4096;return p}return f=yu(f.child,{mode:E.mode,children:E.children}),f.ref=p.ref,p.child=f,f.return=p,f}function PS(f,p){var y=p.ref;if(y===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(f===null||f.ref!==y)&&(p.flags|=4194816)}}function Y5(f,p,y,E,R){return sp(p),y=P5(f,p,y,E,void 0,R),E=_5(),f!==null&&!fi?(I5(f,p,R),Su(f,p,R)):(_n&&E&&u5(p),p.flags|=1,ts(f,p,y,R),p.child)}function n9(f,p,y,E,R,B){return sp(p),p.updateQueue=null,y=sF(p,E,y,R),iF(f),E=_5(),f!==null&&!fi?(I5(f,p,B),Su(f,p,B)):(_n&&E&&u5(p),p.flags|=1,ts(f,p,y,B),p.child)}function r9(f,p,y,E,R){if(sp(p),p.stateNode===null){var B=k0,ne=y.contextType;typeof ne=="object"&&ne!==null&&(B=es(ne)),B=new y(E,B),p.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=G5,p.stateNode=B,B._reactInternals=p,B=p.stateNode,B.props=E,B.state=p.memoizedState,B.refs={},w5(p),ne=y.contextType,B.context=typeof ne=="object"&&ne!==null?es(ne):k0,B.state=p.memoizedState,ne=y.getDerivedStateFromProps,typeof ne=="function"&&(q5(p,y,ne,E),B.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(ne=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),ne!==B.state&&G5.enqueueReplaceState(B,B.state,null),Zv(p,E,B,R),Qv(),B.state=p.memoizedState),typeof B.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(f===null){B=p.stateNode;var le=p.memoizedProps,Ee=dp(y,le);B.props=Ee;var Be=B.context,Ye=y.contextType;ne=k0,typeof Ye=="object"&&Ye!==null&&(ne=es(Ye));var rt=y.getDerivedStateFromProps;Ye=typeof rt=="function"||typeof B.getSnapshotBeforeUpdate=="function",le=p.pendingProps!==le,Ye||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(le||Be!==ne)&&VF(p,B,E,ne),ff=!1;var $e=p.memoizedState;B.state=$e,Zv(p,E,B,R),Qv(),Be=p.memoizedState,le||$e!==Be||ff?(typeof rt=="function"&&(q5(p,y,rt,E),Be=p.memoizedState),(Ee=ff||zF(p,y,Ee,E,$e,Be,ne))?(Ye||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(p.flags|=4194308)):(typeof B.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=Be),B.props=E,B.state=Be,B.context=ne,E=Ee):(typeof B.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{B=p.stateNode,E5(f,p),ne=p.memoizedProps,Ye=dp(y,ne),B.props=Ye,rt=p.pendingProps,$e=B.context,Be=y.contextType,Ee=k0,typeof Be=="object"&&Be!==null&&(Ee=es(Be)),le=y.getDerivedStateFromProps,(Be=typeof le=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(ne!==rt||$e!==Ee)&&VF(p,B,E,Ee),ff=!1,$e=p.memoizedState,B.state=$e,Zv(p,E,B,R),Qv();var He=p.memoizedState;ne!==rt||$e!==He||ff||f!==null&&f.dependencies!==null&&uS(f.dependencies)?(typeof le=="function"&&(q5(p,y,le,E),He=p.memoizedState),(Ye=ff||zF(p,y,Ye,E,$e,He,Ee)||f!==null&&f.dependencies!==null&&uS(f.dependencies))?(Be||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(E,He,Ee),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(E,He,Ee)),typeof B.componentDidUpdate=="function"&&(p.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof B.componentDidUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=He),B.props=E,B.state=He,B.context=Ee,E=Ye):(typeof B.componentDidUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||ne===f.memoizedProps&&$e===f.memoizedState||(p.flags|=1024),E=!1)}return B=E,PS(f,p),E=(p.flags&128)!==0,B||E?(B=p.stateNode,y=E&&typeof y.getDerivedStateFromError!="function"?null:B.render(),p.flags|=1,f!==null&&E?(p.child=cp(p,f.child,null,R),p.child=cp(p,null,y,R)):ts(f,p,y,R),p.memoizedState=B.state,f=p.child):f=Su(f,p,R),f}function i9(f,p,y,E){return rp(),p.flags|=256,ts(f,p,y,E),p.child}var J5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function X5(f){return{baseLanes:f,cachePool:KU()}}function Q5(f,p,y){return f=f!==null?f.childLanes&~y:0,p&&(f|=Ho),f}function s9(f,p,y){var E=p.pendingProps,R=!1,B=(p.flags&128)!==0,ne;if((ne=B)||(ne=f!==null&&f.memoizedState===null?!1:(ti.current&2)!==0),ne&&(R=!0,p.flags&=-129),ne=(p.flags&32)!==0,p.flags&=-33,f===null){if(_n){if(R?mf(p):gf(),(f=wr)?(f=h$(f,Aa),f=f!==null&&f.data!=="&"?f:null,f!==null&&(p.memoizedState={dehydrated:f,treeContext:lf!==null?{id:ac,overflow:lc}:null,retryLane:536870912,hydrationErrors:null},y=BU(f),y.return=p,p.child=y,Zi=p,wr=null)):f=null,f===null)throw uf(p);return M_(f)?p.lanes=32:p.lanes=536870912,null}var le=E.children;return E=E.fallback,R?(gf(),R=p.mode,le=_S({mode:"hidden",children:le},R),E=np(E,R,y,null),le.return=p,E.return=p,le.sibling=E,p.child=le,E=p.child,E.memoizedState=X5(y),E.childLanes=Q5(f,ne,y),p.memoizedState=J5,ib(null,E)):(mf(p),Z5(p,le))}var Ee=f.memoizedState;if(Ee!==null&&(le=Ee.dehydrated,le!==null)){if(B)p.flags&256?(mf(p),p.flags&=-257,p=e_(f,p,y)):p.memoizedState!==null?(gf(),p.child=f.child,p.flags|=128,p=null):(gf(),le=E.fallback,R=p.mode,E=_S({mode:"visible",children:E.children},R),le=np(le,R,y,null),le.flags|=2,E.return=p,le.return=p,E.sibling=le,p.child=E,cp(p,f.child,null,y),E=p.child,E.memoizedState=X5(y),E.childLanes=Q5(f,ne,y),p.memoizedState=J5,p=ib(null,E));else if(mf(p),M_(le)){if(ne=le.nextSibling&&le.nextSibling.dataset,ne)var Be=ne.dgst;ne=Be,E=Error(r(419)),E.stack="",E.digest=ne,Gv({value:E,source:null,stack:null}),p=e_(f,p,y)}else if(fi||_0(f,p,y,!1),ne=(y&f.childLanes)!==0,fi||ne){if(ne=ar,ne!==null&&(E=Re(ne,y),E!==0&&E!==Ee.retryLane))throw Ee.retryLane=E,tp(f,E),wo(ne,f,E),W5;O_(le)||US(),p=e_(f,p,y)}else O_(le)?(p.flags|=192,p.child=f.child,p=null):(f=Ee.treeContext,wr=ka(le.nextSibling),Zi=p,_n=!0,cf=null,Aa=!1,f!==null&&$U(p,f),p=Z5(p,E.children),p.flags|=4096);return p}return R?(gf(),le=E.fallback,R=p.mode,Ee=f.child,Be=Ee.sibling,E=yu(Ee,{mode:"hidden",children:E.children}),E.subtreeFlags=Ee.subtreeFlags&65011712,Be!==null?le=yu(Be,le):(le=np(le,R,y,null),le.flags|=2),le.return=p,E.return=p,E.sibling=le,p.child=E,ib(null,E),E=p.child,le=f.child.memoizedState,le===null?le=X5(y):(R=le.cachePool,R!==null?(Ee=ui._currentValue,R=R.parent!==Ee?{parent:Ee,pool:Ee}:R):R=KU(),le={baseLanes:le.baseLanes|y,cachePool:R}),E.memoizedState=le,E.childLanes=Q5(f,ne,y),p.memoizedState=J5,ib(f.child,E)):(mf(p),y=f.child,f=y.sibling,y=yu(y,{mode:"visible",children:E.children}),y.return=p,y.sibling=null,f!==null&&(ne=p.deletions,ne===null?(p.deletions=[f],p.flags|=16):ne.push(f)),p.child=y,p.memoizedState=null,y)}function Z5(f,p){return p=_S({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function _S(f,p){return f=Fo(22,f,null,p),f.lanes=0,f}function e_(f,p,y){return cp(p,f.child,null,y),f=Z5(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function o9(f,p,y){f.lanes|=p;var E=f.alternate;E!==null&&(E.lanes|=p),m5(f.return,p,y)}function t_(f,p,y,E,R,B){var ne=f.memoizedState;ne===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:R,treeForkCount:B}:(ne.isBackwards=p,ne.rendering=null,ne.renderingStartTime=0,ne.last=E,ne.tail=y,ne.tailMode=R,ne.treeForkCount=B)}function a9(f,p,y){var E=p.pendingProps,R=E.revealOrder,B=E.tail;E=E.children;var ne=ti.current,le=(ne&2)!==0;if(le?(ne=ne&1|2,p.flags|=128):ne&=1,P(ti,ne),ts(f,p,E,y),E=_n?qv:0,!le&&f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&o9(f,y,p);else if(f.tag===19)o9(f,y,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(R){case"forwards":for(y=p.child,R=null;y!==null;)f=y.alternate,f!==null&&xS(f)===null&&(R=y),y=y.sibling;y=R,y===null?(R=p.child,p.child=null):(R=y.sibling,y.sibling=null),t_(p,!1,R,y,B,E);break;case"backwards":case"unstable_legacy-backwards":for(y=null,R=p.child,p.child=null;R!==null;){if(f=R.alternate,f!==null&&xS(f)===null){p.child=R;break}f=R.sibling,R.sibling=y,y=R,R=f}t_(p,!0,y,null,B,E);break;case"together":t_(p,!1,null,null,void 0,E);break;default:p.memoizedState=null}return p.child}function Su(f,p,y){if(f!==null&&(p.dependencies=f.dependencies),vf|=p.lanes,(y&p.childLanes)===0)if(f!==null){if(_0(f,p,y,!1),(y&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(r(153));if(p.child!==null){for(f=p.child,y=yu(f,f.pendingProps),p.child=y,y.return=p;f.sibling!==null;)f=f.sibling,y=y.sibling=yu(f,f.pendingProps),y.return=p;y.sibling=null}return p.child}function n_(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&uS(f)))}function Hye(f,p,y){switch(p.tag){case 3:Te(p,p.stateNode.containerInfo),df(p,ui,f.memoizedState.cache),rp();break;case 27:case 5:de(p);break;case 4:Te(p,p.stateNode.containerInfo);break;case 10:df(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,N5(p),null;break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(mf(p),p.flags|=128,null):(y&p.child.childLanes)!==0?s9(f,p,y):(mf(p),f=Su(f,p,y),f!==null?f.sibling:null);mf(p);break;case 19:var R=(f.flags&128)!==0;if(E=(y&p.childLanes)!==0,E||(_0(f,p,y,!1),E=(y&p.childLanes)!==0),R){if(E)return a9(f,p,y);p.flags|=128}if(R=p.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),P(ti,ti.current),E)break;return null;case 22:return p.lanes=0,ZF(f,p,y,p.pendingProps);case 24:df(p,ui,f.memoizedState.cache)}return Su(f,p,y)}function l9(f,p,y){if(f!==null)if(f.memoizedProps!==p.pendingProps)fi=!0;else{if(!n_(f,y)&&(p.flags&128)===0)return fi=!1,Hye(f,p,y);fi=(f.flags&131072)!==0}else fi=!1,_n&&(p.flags&1048576)!==0&&FU(p,qv,p.index);switch(p.lanes=0,p.tag){case 16:e:{var E=p.pendingProps;if(f=ap(p.elementType),p.type=f,typeof f=="function")a5(f)?(E=dp(f,E),p.tag=1,p=r9(null,p,f,E,y)):(p.tag=0,p=Y5(null,p,f,E,y));else{if(f!=null){var R=f.$$typeof;if(R===O){p.tag=11,p=JF(null,p,f,E,y);break e}else if(R===F){p.tag=14,p=XF(null,p,f,E,y);break e}}throw p=A(f)||f,Error(r(306,p,""))}}return p;case 0:return Y5(f,p,p.type,p.pendingProps,y);case 1:return E=p.type,R=dp(E,p.pendingProps),r9(f,p,E,R,y);case 3:e:{if(Te(p,p.stateNode.containerInfo),f===null)throw Error(r(387));E=p.pendingProps;var B=p.memoizedState;R=B.element,E5(f,p),Zv(p,E,null,y);var ne=p.memoizedState;if(E=ne.cache,df(p,ui,E),E!==B.cache&&g5(p,[ui],y,!0),Qv(),E=ne.element,B.isDehydrated)if(B={element:E,isDehydrated:!1,cache:ne.cache},p.updateQueue.baseState=B,p.memoizedState=B,p.flags&256){p=i9(f,p,E,y);break e}else if(E!==R){R=wa(Error(r(424)),p),Gv(R),p=i9(f,p,E,y);break e}else{switch(f=p.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(wr=ka(f.firstChild),Zi=p,_n=!0,cf=null,Aa=!0,y=ZU(p,null,E,y),p.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(rp(),E===R){p=Su(f,p,y);break e}ts(f,p,E,y)}p=p.child}return p;case 26:return PS(f,p),f===null?(y=v$(p.type,null,p.pendingProps,null))?p.memoizedState=y:_n||(y=p.type,f=p.pendingProps,E=GS(ie.current).createElement(y),E[Ct]=p,E[wn]=f,ns(E,y,f),Nr(E),p.stateNode=E):p.memoizedState=v$(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:return de(p),f===null&&_n&&(E=p.stateNode=g$(p.type,p.pendingProps,ie.current),Zi=p,Aa=!0,R=wr,Af(p.type)?(L_=R,wr=ka(E.firstChild)):wr=R),ts(f,p,p.pendingProps.children,y),PS(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&_n&&((R=E=wr)&&(E=bxe(E,p.type,p.pendingProps,Aa),E!==null?(p.stateNode=E,Zi=p,wr=ka(E.firstChild),Aa=!1,R=!0):R=!1),R||uf(p)),de(p),R=p.type,B=p.pendingProps,ne=f!==null?f.memoizedProps:null,E=B.children,__(R,B)?E=null:ne!==null&&__(R,ne)&&(p.flags|=32),p.memoizedState!==null&&(R=P5(f,p,Lye,null,null,y),vb._currentValue=R),PS(f,p),ts(f,p,E,y),p.child;case 6:return f===null&&_n&&((f=y=wr)&&(y=wxe(y,p.pendingProps,Aa),y!==null?(p.stateNode=y,Zi=p,wr=null,f=!0):f=!1),f||uf(p)),null;case 13:return s9(f,p,y);case 4:return Te(p,p.stateNode.containerInfo),E=p.pendingProps,f===null?p.child=cp(p,null,E,y):ts(f,p,E,y),p.child;case 11:return JF(f,p,p.type,p.pendingProps,y);case 7:return ts(f,p,p.pendingProps,y),p.child;case 8:return ts(f,p,p.pendingProps.children,y),p.child;case 12:return ts(f,p,p.pendingProps.children,y),p.child;case 10:return E=p.pendingProps,df(p,p.type,E.value),ts(f,p,E.children,y),p.child;case 9:return R=p.type._context,E=p.pendingProps.children,sp(p),R=es(R),E=E(R),p.flags|=1,ts(f,p,E,y),p.child;case 14:return XF(f,p,p.type,p.pendingProps,y);case 15:return QF(f,p,p.type,p.pendingProps,y);case 19:return a9(f,p,y);case 31:return Vye(f,p,y);case 22:return ZF(f,p,y,p.pendingProps);case 24:return sp(p),E=es(ui),f===null?(R=v5(),R===null&&(R=ar,B=y5(),R.pooledCache=B,B.refCount++,B!==null&&(R.pooledCacheLanes|=y),R=B),p.memoizedState={parent:E,cache:R},w5(p),df(p,ui,R)):((f.lanes&y)!==0&&(E5(f,p),Zv(p,null,null,y),Qv()),R=f.memoizedState,B=p.memoizedState,R.parent!==E?(R={parent:E,cache:E},p.memoizedState=R,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=R),df(p,ui,E)):(E=B.cache,df(p,ui,E),E!==R.cache&&g5(p,[ui],y,!0))),ts(f,p,p.pendingProps.children,y),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function Au(f){f.flags|=4}function r_(f,p,y,E,R){if((p=(f.mode&32)!==0)&&(p=!1),p){if(f.flags|=16777216,(R&335544128)===R)if(f.stateNode.complete)f.flags|=8192;else if(L9())f.flags|=8192;else throw lp=pS,b5}else f.flags&=-16777217}function c9(f,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!A$(p))if(L9())f.flags|=8192;else throw lp=pS,b5}function IS(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?sn():536870912,f.lanes|=p,z0|=p)}function sb(f,p){if(!_n)switch(f.tailMode){case"hidden":p=f.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?f.tail=null:y.sibling=null;break;case"collapsed":y=f.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function Er(f){var p=f.alternate!==null&&f.alternate.child===f.child,y=0,E=0;if(p)for(var R=f.child;R!==null;)y|=R.lanes|R.childLanes,E|=R.subtreeFlags&65011712,E|=R.flags&65011712,R.return=f,R=R.sibling;else for(R=f.child;R!==null;)y|=R.lanes|R.childLanes,E|=R.subtreeFlags,E|=R.flags,R.return=f,R=R.sibling;return f.subtreeFlags|=E,f.childLanes=y,p}function qye(f,p,y){var E=p.pendingProps;switch(d5(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(p),null;case 1:return Er(p),null;case 3:return y=p.stateNode,E=null,f!==null&&(E=f.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),bu(ui),ce(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(f===null||f.child===null)&&(P0(p)?Au(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,h5())),Er(p),null;case 26:var R=p.type,B=p.memoizedState;return f===null?(Au(p),B!==null?(Er(p),c9(p,B)):(Er(p),r_(p,R,null,E,y))):B?B!==f.memoizedState?(Au(p),Er(p),c9(p,B)):(Er(p),p.flags&=-16777217):(f=f.memoizedProps,f!==E&&Au(p),Er(p),r_(p,R,f,E,y)),null;case 27:if(ke(p),y=ie.current,R=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==E&&Au(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return Er(p),null}f=W.current,P0(p)?zU(p):(f=g$(R,E,y),p.stateNode=f,Au(p))}return Er(p),null;case 5:if(ke(p),R=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==E&&Au(p);else{if(!E){if(p.stateNode===null)throw Error(r(166));return Er(p),null}if(B=W.current,P0(p))zU(p);else{var ne=GS(ie.current);switch(B){case 1:B=ne.createElementNS("http://www.w3.org/2000/svg",R);break;case 2:B=ne.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;default:switch(R){case"svg":B=ne.createElementNS("http://www.w3.org/2000/svg",R);break;case"math":B=ne.createElementNS("http://www.w3.org/1998/Math/MathML",R);break;case"script":B=ne.createElement("div"),B.innerHTML="<script><\/script>",B=B.removeChild(B.firstChild);break;case"select":B=typeof E.is=="string"?ne.createElement("select",{is:E.is}):ne.createElement("select"),E.multiple?B.multiple=!0:E.size&&(B.size=E.size);break;default:B=typeof E.is=="string"?ne.createElement(R,{is:E.is}):ne.createElement(R)}}B[Ct]=p,B[wn]=E;e:for(ne=p.child;ne!==null;){if(ne.tag===5||ne.tag===6)B.appendChild(ne.stateNode);else if(ne.tag!==4&&ne.tag!==27&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===p)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===p)break e;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}p.stateNode=B;e:switch(ns(B,R,E),R){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}E&&Au(p)}}return Er(p),r_(p,p.type,f===null?null:f.memoizedProps,p.pendingProps,y),null;case 6:if(f&&p.stateNode!=null)f.memoizedProps!==E&&Au(p);else{if(typeof E!="string"&&p.stateNode===null)throw Error(r(166));if(f=ie.current,P0(p)){if(f=p.stateNode,y=p.memoizedProps,E=null,R=Zi,R!==null)switch(R.tag){case 27:case 5:E=R.memoizedProps}f[Ct]=p,f=!!(f.nodeValue===y||E!==null&&E.suppressHydrationWarning===!0||s$(f.nodeValue,y)),f||uf(p,!0)}else f=GS(f).createTextNode(E),f[Ct]=p,p.stateNode=f}return Er(p),null;case 31:if(y=p.memoizedState,f===null||f.memoizedState!==null){if(E=P0(p),y!==null){if(f===null){if(!E)throw Error(r(318));if(f=p.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(557));f[Ct]=p}else rp(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Er(p),f=!1}else y=h5(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=y),f=!0;if(!f)return p.flags&256?(zo(p),p):(zo(p),null);if((p.flags&128)!==0)throw Error(r(558))}return Er(p),null;case 13:if(E=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(R=P0(p),E!==null&&E.dehydrated!==null){if(f===null){if(!R)throw Error(r(318));if(R=p.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[Ct]=p}else rp(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Er(p),R=!1}else R=h5(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=R),R=!0;if(!R)return p.flags&256?(zo(p),p):(zo(p),null)}return zo(p),(p.flags&128)!==0?(p.lanes=y,p):(y=E!==null,f=f!==null&&f.memoizedState!==null,y&&(E=p.child,R=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(R=E.alternate.memoizedState.cachePool.pool),B=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(B=E.memoizedState.cachePool.pool),B!==R&&(E.flags|=2048)),y!==f&&y&&(p.child.flags|=8192),IS(p,p.updateQueue),Er(p),null);case 4:return ce(),f===null&&T_(p.stateNode.containerInfo),Er(p),null;case 10:return bu(p.type),Er(p),null;case 19:if(M(ti),E=p.memoizedState,E===null)return Er(p),null;if(R=(p.flags&128)!==0,B=E.rendering,B===null)if(R)sb(E,!1);else{if(Gr!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(B=xS(f),B!==null){for(p.flags|=128,sb(E,!1),f=B.updateQueue,p.updateQueue=f,IS(p,f),p.subtreeFlags=0,f=y,y=p.child;y!==null;)DU(y,f),y=y.sibling;return P(ti,ti.current&1|2),_n&&xu(p,E.treeForkCount),p.child}f=f.sibling}E.tail!==null&&it()>jS&&(p.flags|=128,R=!0,sb(E,!1),p.lanes=4194304)}else{if(!R)if(f=xS(B),f!==null){if(p.flags|=128,R=!0,f=f.updateQueue,p.updateQueue=f,IS(p,f),sb(E,!0),E.tail===null&&E.tailMode==="hidden"&&!B.alternate&&!_n)return Er(p),null}else 2*it()-E.renderingStartTime>jS&&y!==536870912&&(p.flags|=128,R=!0,sb(E,!1),p.lanes=4194304);E.isBackwards?(B.sibling=p.child,p.child=B):(f=E.last,f!==null?f.sibling=B:p.child=B,E.last=B)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=it(),f.sibling=null,y=ti.current,P(ti,R?y&1|2:y&1),_n&&xu(p,E.treeForkCount),f):(Er(p),null);case 22:case 23:return zo(p),k5(),E=p.memoizedState!==null,f!==null?f.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(y&536870912)!==0&&(p.flags&128)===0&&(Er(p),p.subtreeFlags&6&&(p.flags|=8192)):Er(p),y=p.updateQueue,y!==null&&IS(p,y.retryQueue),y=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==y&&(p.flags|=2048),f!==null&&M(op),null;case 24:return y=null,f!==null&&(y=f.memoizedState.cache),p.memoizedState.cache!==y&&(p.flags|=2048),bu(ui),Er(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function Gye(f,p){switch(d5(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return bu(ui),ce(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return ke(p),null;case 31:if(p.memoizedState!==null){if(zo(p),p.alternate===null)throw Error(r(340));rp()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 13:if(zo(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(r(340));rp()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return M(ti),null;case 4:return ce(),null;case 10:return bu(p.type),null;case 22:case 23:return zo(p),k5(),f!==null&&M(op),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return bu(ui),null;case 25:return null;default:return null}}function u9(f,p){switch(d5(p),p.tag){case 3:bu(ui),ce();break;case 26:case 27:case 5:ke(p);break;case 4:ce();break;case 31:p.memoizedState!==null&&zo(p);break;case 13:zo(p);break;case 19:M(ti);break;case 10:bu(p.type);break;case 22:case 23:zo(p),k5(),f!==null&&M(op);break;case 24:bu(ui)}}function ob(f,p){try{var y=p.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var R=E.next;y=R;do{if((y.tag&f)===f){E=void 0;var B=y.create,ne=y.inst;E=B(),ne.destroy=E}y=y.next}while(y!==R)}}catch(le){Xn(p,p.return,le)}}function yf(f,p,y){try{var E=p.updateQueue,R=E!==null?E.lastEffect:null;if(R!==null){var B=R.next;E=B;do{if((E.tag&f)===f){var ne=E.inst,le=ne.destroy;if(le!==void 0){ne.destroy=void 0,R=p;var Ee=y,Be=le;try{Be()}catch(Ye){Xn(R,Ee,Ye)}}}E=E.next}while(E!==B)}}catch(Ye){Xn(p,p.return,Ye)}}function d9(f){var p=f.updateQueue;if(p!==null){var y=f.stateNode;try{tF(p,y)}catch(E){Xn(f,f.return,E)}}}function f9(f,p,y){y.props=dp(f.type,f.memoizedProps),y.state=f.memoizedState;try{y.componentWillUnmount()}catch(E){Xn(f,p,E)}}function ab(f,p){try{var y=f.ref;if(y!==null){switch(f.tag){case 26:case 27:case 5:var E=f.stateNode;break;case 30:E=f.stateNode;break;default:E=f.stateNode}typeof y=="function"?f.refCleanup=y(E):y.current=E}}catch(R){Xn(f,p,R)}}function cc(f,p){var y=f.ref,E=f.refCleanup;if(y!==null)if(typeof E=="function")try{E()}catch(R){Xn(f,p,R)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){Xn(f,p,R)}else y.current=null}function h9(f){var p=f.type,y=f.memoizedProps,E=f.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":y.autoFocus&&E.focus();break e;case"img":y.src?E.src=y.src:y.srcSet&&(E.srcset=y.srcSet)}}catch(R){Xn(f,f.return,R)}}function i_(f,p,y){try{var E=f.stateNode;pxe(E,f.type,y,p),E[wn]=p}catch(R){Xn(f,f.return,R)}}function p9(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&Af(f.type)||f.tag===4}function s_(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||p9(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&Af(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function o_(f,p,y){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(f,p):(p=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,p.appendChild(f),y=y._reactRootContainer,y!=null||p.onclick!==null||(p.onclick=mu));else if(E!==4&&(E===27&&Af(f.type)&&(y=f.stateNode,p=null),f=f.child,f!==null))for(o_(f,p,y),f=f.sibling;f!==null;)o_(f,p,y),f=f.sibling}function RS(f,p,y){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?y.insertBefore(f,p):y.appendChild(f);else if(E!==4&&(E===27&&Af(f.type)&&(y=f.stateNode),f=f.child,f!==null))for(RS(f,p,y),f=f.sibling;f!==null;)RS(f,p,y),f=f.sibling}function m9(f){var p=f.stateNode,y=f.memoizedProps;try{for(var E=f.type,R=p.attributes;R.length;)p.removeAttributeNode(R[0]);ns(p,E,y),p[Ct]=f,p[wn]=y}catch(B){Xn(f,f.return,B)}}var Tu=!1,hi=!1,a_=!1,g9=typeof WeakSet=="function"?WeakSet:Set,ji=null;function Kye(f,p){if(f=f.containerInfo,C_=ZS,f=CU(f),e5(f)){if("selectionStart"in f)var y={start:f.selectionStart,end:f.selectionEnd};else e:{y=(y=f.ownerDocument)&&y.defaultView||window;var E=y.getSelection&&y.getSelection();if(E&&E.rangeCount!==0){y=E.anchorNode;var R=E.anchorOffset,B=E.focusNode;E=E.focusOffset;try{y.nodeType,B.nodeType}catch{y=null;break e}var ne=0,le=-1,Ee=-1,Be=0,Ye=0,rt=f,$e=null;t:for(;;){for(var He;rt!==y||R!==0&&rt.nodeType!==3||(le=ne+R),rt!==B||E!==0&&rt.nodeType!==3||(Ee=ne+E),rt.nodeType===3&&(ne+=rt.nodeValue.length),(He=rt.firstChild)!==null;)$e=rt,rt=He;for(;;){if(rt===f)break t;if($e===y&&++Be===R&&(le=ne),$e===B&&++Ye===E&&(Ee=ne),(He=rt.nextSibling)!==null)break;rt=$e,$e=rt.parentNode}rt=He}y=le===-1||Ee===-1?null:{start:le,end:Ee}}else y=null}y=y||{start:0,end:0}}else y=null;for(P_={focusedElem:f,selectionRange:y},ZS=!1,ji=p;ji!==null;)if(p=ji,f=p.child,(p.subtreeFlags&1028)!==0&&f!==null)f.return=p,ji=f;else for(;ji!==null;){switch(p=ji,B=p.alternate,f=p.flags,p.tag){case 0:if((f&4)!==0&&(f=p.updateQueue,f=f!==null?f.events:null,f!==null))for(y=0;y<f.length;y++)R=f[y],R.ref.impl=R.nextImpl;break;case 11:case 15:break;case 1:if((f&1024)!==0&&B!==null){f=void 0,y=p,R=B.memoizedProps,B=B.memoizedState,E=y.stateNode;try{var jt=dp(y.type,R);f=E.getSnapshotBeforeUpdate(jt,B),E.__reactInternalSnapshotBeforeUpdate=f}catch(Xt){Xn(y,y.return,Xt)}}break;case 3:if((f&1024)!==0){if(f=p.stateNode.containerInfo,y=f.nodeType,y===9)R_(f);else if(y===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":R_(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=p.sibling,f!==null){f.return=p.return,ji=f;break}ji=p.return}}function y9(f,p,y){var E=y.flags;switch(y.tag){case 0:case 11:case 15:Nu(f,y),E&4&&ob(5,y);break;case 1:if(Nu(f,y),E&4)if(f=y.stateNode,p===null)try{f.componentDidMount()}catch(ne){Xn(y,y.return,ne)}else{var R=dp(y.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(R,p,f.__reactInternalSnapshotBeforeUpdate)}catch(ne){Xn(y,y.return,ne)}}E&64&&d9(y),E&512&&ab(y,y.return);break;case 3:if(Nu(f,y),E&64&&(f=y.updateQueue,f!==null)){if(p=null,y.child!==null)switch(y.child.tag){case 27:case 5:p=y.child.stateNode;break;case 1:p=y.child.stateNode}try{tF(f,p)}catch(ne){Xn(y,y.return,ne)}}break;case 27:p===null&&E&4&&m9(y);case 26:case 5:Nu(f,y),p===null&&E&4&&h9(y),E&512&&ab(y,y.return);break;case 12:Nu(f,y);break;case 31:Nu(f,y),E&4&&b9(f,y);break;case 13:Nu(f,y),E&4&&w9(f,y),E&64&&(f=y.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(y=nxe.bind(null,y),Exe(f,y))));break;case 22:if(E=y.memoizedState!==null||Tu,!E){p=p!==null&&p.memoizedState!==null||hi,R=Tu;var B=hi;Tu=E,(hi=p)&&!B?Cu(f,y,(y.subtreeFlags&8772)!==0):Nu(f,y),Tu=R,hi=B}break;case 30:break;default:Nu(f,y)}}function x9(f){var p=f.alternate;p!==null&&(f.alternate=null,x9(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&du(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Pr=null,yo=!1;function ku(f,p,y){for(y=y.child;y!==null;)v9(f,p,y),y=y.sibling}function v9(f,p,y){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(ue,y)}catch{}switch(y.tag){case 26:hi||cc(y,p),ku(f,p,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:hi||cc(y,p);var E=Pr,R=yo;Af(y.type)&&(Pr=y.stateNode,yo=!1),ku(f,p,y),gb(y.stateNode),Pr=E,yo=R;break;case 5:hi||cc(y,p);case 6:if(E=Pr,R=yo,Pr=null,ku(f,p,y),Pr=E,yo=R,Pr!==null)if(yo)try{(Pr.nodeType===9?Pr.body:Pr.nodeName==="HTML"?Pr.ownerDocument.body:Pr).removeChild(y.stateNode)}catch(B){Xn(y,p,B)}else try{Pr.removeChild(y.stateNode)}catch(B){Xn(y,p,B)}break;case 18:Pr!==null&&(yo?(f=Pr,d$(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,y.stateNode),J0(f)):d$(Pr,y.stateNode));break;case 4:E=Pr,R=yo,Pr=y.stateNode.containerInfo,yo=!0,ku(f,p,y),Pr=E,yo=R;break;case 0:case 11:case 14:case 15:yf(2,y,p),hi||yf(4,y,p),ku(f,p,y);break;case 1:hi||(cc(y,p),E=y.stateNode,typeof E.componentWillUnmount=="function"&&f9(y,p,E)),ku(f,p,y);break;case 21:ku(f,p,y);break;case 22:hi=(E=hi)||y.memoizedState!==null,ku(f,p,y),hi=E;break;default:ku(f,p,y)}}function b9(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{J0(f)}catch(y){Xn(p,p.return,y)}}}function w9(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{J0(f)}catch(y){Xn(p,p.return,y)}}function Wye(f){switch(f.tag){case 31:case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new g9),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new g9),p;default:throw Error(r(435,f.tag))}}function OS(f,p){var y=Wye(f);p.forEach(function(E){if(!y.has(E)){y.add(E);var R=rxe.bind(null,f,E);E.then(R,R)}})}function xo(f,p){var y=p.deletions;if(y!==null)for(var E=0;E<y.length;E++){var R=y[E],B=f,ne=p,le=ne;e:for(;le!==null;){switch(le.tag){case 27:if(Af(le.type)){Pr=le.stateNode,yo=!1;break e}break;case 5:Pr=le.stateNode,yo=!1;break e;case 3:case 4:Pr=le.stateNode.containerInfo,yo=!0;break e}le=le.return}if(Pr===null)throw Error(r(160));v9(B,ne,R),Pr=null,yo=!1,B=R.alternate,B!==null&&(B.return=null),R.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)E9(p,f),p=p.sibling}var xl=null;function E9(f,p){var y=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:xo(p,f),vo(f),E&4&&(yf(3,f,f.return),ob(3,f),yf(5,f,f.return));break;case 1:xo(p,f),vo(f),E&512&&(hi||y===null||cc(y,y.return)),E&64&&Tu&&(f=f.updateQueue,f!==null&&(E=f.callbacks,E!==null&&(y=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=y===null?E:y.concat(E))));break;case 26:var R=xl;if(xo(p,f),vo(f),E&512&&(hi||y===null||cc(y,y.return)),E&4){var B=y!==null?y.memoizedState:null;if(E=f.memoizedState,y===null)if(E===null)if(f.stateNode===null){e:{E=f.type,y=f.memoizedProps,R=R.ownerDocument||R;t:switch(E){case"title":B=R.getElementsByTagName("title")[0],(!B||B[fl]||B[Ct]||B.namespaceURI==="http://www.w3.org/2000/svg"||B.hasAttribute("itemprop"))&&(B=R.createElement(E),R.head.insertBefore(B,R.querySelector("head > title"))),ns(B,E,y),B[Ct]=f,Nr(B),E=B;break e;case"link":var ne=E$("link","href",R).get(E+(y.href||""));if(ne){for(var le=0;le<ne.length;le++)if(B=ne[le],B.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&B.getAttribute("rel")===(y.rel==null?null:y.rel)&&B.getAttribute("title")===(y.title==null?null:y.title)&&B.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){ne.splice(le,1);break t}}B=R.createElement(E),ns(B,E,y),R.head.appendChild(B);break;case"meta":if(ne=E$("meta","content",R).get(E+(y.content||""))){for(le=0;le<ne.length;le++)if(B=ne[le],B.getAttribute("content")===(y.content==null?null:""+y.content)&&B.getAttribute("name")===(y.name==null?null:y.name)&&B.getAttribute("property")===(y.property==null?null:y.property)&&B.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&B.getAttribute("charset")===(y.charSet==null?null:y.charSet)){ne.splice(le,1);break t}}B=R.createElement(E),ns(B,E,y),R.head.appendChild(B);break;default:throw Error(r(468,E))}B[Ct]=f,Nr(B),E=B}f.stateNode=E}else S$(R,f.type,f.stateNode);else f.stateNode=w$(R,E,f.memoizedProps);else B!==E?(B===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):B.count--,E===null?S$(R,f.type,f.stateNode):w$(R,E,f.memoizedProps)):E===null&&f.stateNode!==null&&i_(f,f.memoizedProps,y.memoizedProps)}break;case 27:xo(p,f),vo(f),E&512&&(hi||y===null||cc(y,y.return)),y!==null&&E&4&&i_(f,f.memoizedProps,y.memoizedProps);break;case 5:if(xo(p,f),vo(f),E&512&&(hi||y===null||cc(y,y.return)),f.flags&32){R=f.stateNode;try{v0(R,"")}catch(jt){Xn(f,f.return,jt)}}E&4&&f.stateNode!=null&&(R=f.memoizedProps,i_(f,R,y!==null?y.memoizedProps:R)),E&1024&&(a_=!0);break;case 6:if(xo(p,f),vo(f),E&4){if(f.stateNode===null)throw Error(r(162));E=f.memoizedProps,y=f.stateNode;try{y.nodeValue=E}catch(jt){Xn(f,f.return,jt)}}break;case 3:if(YS=null,R=xl,xl=KS(p.containerInfo),xo(p,f),xl=R,vo(f),E&4&&y!==null&&y.memoizedState.isDehydrated)try{J0(p.containerInfo)}catch(jt){Xn(f,f.return,jt)}a_&&(a_=!1,S9(f));break;case 4:E=xl,xl=KS(f.stateNode.containerInfo),xo(p,f),vo(f),xl=E;break;case 12:xo(p,f),vo(f);break;case 31:xo(p,f),vo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,OS(f,E)));break;case 13:xo(p,f),vo(f),f.child.flags&8192&&f.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(LS=it()),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,OS(f,E)));break;case 22:R=f.memoizedState!==null;var Ee=y!==null&&y.memoizedState!==null,Be=Tu,Ye=hi;if(Tu=Be||R,hi=Ye||Ee,xo(p,f),hi=Ye,Tu=Be,vo(f),E&8192)e:for(p=f.stateNode,p._visibility=R?p._visibility&-2:p._visibility|1,R&&(y===null||Ee||Tu||hi||fp(f)),y=null,p=f;;){if(p.tag===5||p.tag===26){if(y===null){Ee=y=p;try{if(B=Ee.stateNode,R)ne=B.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none";else{le=Ee.stateNode;var rt=Ee.memoizedProps.style,$e=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;le.style.display=$e==null||typeof $e=="boolean"?"":(""+$e).trim()}}catch(jt){Xn(Ee,Ee.return,jt)}}}else if(p.tag===6){if(y===null){Ee=p;try{Ee.stateNode.nodeValue=R?"":Ee.memoizedProps}catch(jt){Xn(Ee,Ee.return,jt)}}}else if(p.tag===18){if(y===null){Ee=p;try{var He=Ee.stateNode;R?f$(He,!0):f$(Ee.stateNode,!1)}catch(jt){Xn(Ee,Ee.return,jt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;y===p&&(y=null),p=p.return}y===p&&(y=null),p.sibling.return=p.return,p=p.sibling}E&4&&(E=f.updateQueue,E!==null&&(y=E.retryQueue,y!==null&&(E.retryQueue=null,OS(f,y))));break;case 19:xo(p,f),vo(f),E&4&&(E=f.updateQueue,E!==null&&(f.updateQueue=null,OS(f,E)));break;case 30:break;case 21:break;default:xo(p,f),vo(f)}}function vo(f){var p=f.flags;if(p&2){try{for(var y,E=f.return;E!==null;){if(p9(E)){y=E;break}E=E.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var R=y.stateNode,B=s_(f);RS(f,B,R);break;case 5:var ne=y.stateNode;y.flags&32&&(v0(ne,""),y.flags&=-33);var le=s_(f);RS(f,le,ne);break;case 3:case 4:var Ee=y.stateNode.containerInfo,Be=s_(f);o_(f,Be,Ee);break;default:throw Error(r(161))}}catch(Ye){Xn(f,f.return,Ye)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function S9(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;S9(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),f=f.sibling}}function Nu(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)y9(f,p.alternate,p),p=p.sibling}function fp(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:yf(4,p,p.return),fp(p);break;case 1:cc(p,p.return);var y=p.stateNode;typeof y.componentWillUnmount=="function"&&f9(p,p.return,y),fp(p);break;case 27:gb(p.stateNode);case 26:case 5:cc(p,p.return),fp(p);break;case 22:p.memoizedState===null&&fp(p);break;case 30:fp(p);break;default:fp(p)}f=f.sibling}}function Cu(f,p,y){for(y=y&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,R=f,B=p,ne=B.flags;switch(B.tag){case 0:case 11:case 15:Cu(R,B,y),ob(4,B);break;case 1:if(Cu(R,B,y),E=B,R=E.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Be){Xn(E,E.return,Be)}if(E=B,R=E.updateQueue,R!==null){var le=E.stateNode;try{var Ee=R.shared.hiddenCallbacks;if(Ee!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Ee.length;R++)eF(Ee[R],le)}catch(Be){Xn(E,E.return,Be)}}y&&ne&64&&d9(B),ab(B,B.return);break;case 27:m9(B);case 26:case 5:Cu(R,B,y),y&&E===null&&ne&4&&h9(B),ab(B,B.return);break;case 12:Cu(R,B,y);break;case 31:Cu(R,B,y),y&&ne&4&&b9(R,B);break;case 13:Cu(R,B,y),y&&ne&4&&w9(R,B);break;case 22:B.memoizedState===null&&Cu(R,B,y),ab(B,B.return);break;case 30:break;default:Cu(R,B,y)}p=p.sibling}}function l_(f,p){var y=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==y&&(f!=null&&f.refCount++,y!=null&&Kv(y))}function c_(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&Kv(f))}function vl(f,p,y,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)A9(f,p,y,E),p=p.sibling}function A9(f,p,y,E){var R=p.flags;switch(p.tag){case 0:case 11:case 15:vl(f,p,y,E),R&2048&&ob(9,p);break;case 1:vl(f,p,y,E);break;case 3:vl(f,p,y,E),R&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&Kv(f)));break;case 12:if(R&2048){vl(f,p,y,E),f=p.stateNode;try{var B=p.memoizedProps,ne=B.id,le=B.onPostCommit;typeof le=="function"&&le(ne,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Ee){Xn(p,p.return,Ee)}}else vl(f,p,y,E);break;case 31:vl(f,p,y,E);break;case 13:vl(f,p,y,E);break;case 23:break;case 22:B=p.stateNode,ne=p.alternate,p.memoizedState!==null?B._visibility&2?vl(f,p,y,E):lb(f,p):B._visibility&2?vl(f,p,y,E):(B._visibility|=2,U0(f,p,y,E,(p.subtreeFlags&10256)!==0||!1)),R&2048&&l_(ne,p);break;case 24:vl(f,p,y,E),R&2048&&c_(p.alternate,p);break;default:vl(f,p,y,E)}}function U0(f,p,y,E,R){for(R=R&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var B=f,ne=p,le=y,Ee=E,Be=ne.flags;switch(ne.tag){case 0:case 11:case 15:U0(B,ne,le,Ee,R),ob(8,ne);break;case 23:break;case 22:var Ye=ne.stateNode;ne.memoizedState!==null?Ye._visibility&2?U0(B,ne,le,Ee,R):lb(B,ne):(Ye._visibility|=2,U0(B,ne,le,Ee,R)),R&&Be&2048&&l_(ne.alternate,ne);break;case 24:U0(B,ne,le,Ee,R),R&&Be&2048&&c_(ne.alternate,ne);break;default:U0(B,ne,le,Ee,R)}p=p.sibling}}function lb(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var y=f,E=p,R=E.flags;switch(E.tag){case 22:lb(y,E),R&2048&&l_(E.alternate,E);break;case 24:lb(y,E),R&2048&&c_(E.alternate,E);break;default:lb(y,E)}p=p.sibling}}var cb=8192;function F0(f,p,y){if(f.subtreeFlags&cb)for(f=f.child;f!==null;)T9(f,p,y),f=f.sibling}function T9(f,p,y){switch(f.tag){case 26:F0(f,p,y),f.flags&cb&&f.memoizedState!==null&&Mxe(y,xl,f.memoizedState,f.memoizedProps);break;case 5:F0(f,p,y);break;case 3:case 4:var E=xl;xl=KS(f.stateNode.containerInfo),F0(f,p,y),xl=E;break;case 22:f.memoizedState===null&&(E=f.alternate,E!==null&&E.memoizedState!==null?(E=cb,cb=16777216,F0(f,p,y),cb=E):F0(f,p,y));break;default:F0(f,p,y)}}function k9(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function ub(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];ji=E,C9(E,f)}k9(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)N9(f),f=f.sibling}function N9(f){switch(f.tag){case 0:case 11:case 15:ub(f),f.flags&2048&&yf(9,f,f.return);break;case 3:ub(f);break;case 12:ub(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,MS(f)):ub(f);break;default:ub(f)}}function MS(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];ji=E,C9(E,f)}k9(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:yf(8,p,p.return),MS(p);break;case 22:y=p.stateNode,y._visibility&2&&(y._visibility&=-3,MS(p));break;default:MS(p)}f=f.sibling}}function C9(f,p){for(;ji!==null;){var y=ji;switch(y.tag){case 0:case 11:case 15:yf(8,y,p);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var E=y.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:Kv(y.memoizedState.cache)}if(E=y.child,E!==null)E.return=y,ji=E;else e:for(y=f;ji!==null;){E=ji;var R=E.sibling,B=E.return;if(x9(E),E===y){ji=null;break e}if(R!==null){R.return=B,ji=R;break e}ji=B}}}var Yye={getCacheForType:function(f){var p=es(ui),y=p.data.get(f);return y===void 0&&(y=f(),p.data.set(f,y)),y},cacheSignal:function(){return es(ui).controller.signal}},Jye=typeof WeakMap=="function"?WeakMap:Map,qn=0,ar=null,En=null,Cn=0,Jn=0,Vo=null,xf=!1,$0=!1,u_=!1,Pu=0,Gr=0,vf=0,hp=0,d_=0,Ho=0,z0=0,db=null,bo=null,f_=!1,LS=0,P9=0,jS=1/0,DS=null,bf=null,ki=0,wf=null,V0=null,_u=0,h_=0,p_=null,_9=null,fb=0,m_=null;function qo(){return(qn&2)!==0&&Cn!==0?Cn&-Cn:j.T!==null?w_():Kt()}function I9(){if(Ho===0)if((Cn&536870912)===0||_n){var f=wt;wt<<=1,(wt&3932160)===0&&(wt=262144),Ho=f}else Ho=536870912;return f=$o.current,f!==null&&(f.flags|=32),Ho}function wo(f,p,y){(f===ar&&(Jn===2||Jn===9)||f.cancelPendingCommit!==null)&&(H0(f,0),Ef(f,Cn,Ho,!1)),Q(f,y),((qn&2)===0||f!==ar)&&(f===ar&&((qn&2)===0&&(hp|=y),Gr===4&&Ef(f,Cn,Ho,!1)),uc(f))}function R9(f,p,y){if((qn&6)!==0)throw Error(r(327));var E=!y&&(p&127)===0&&(p&f.expiredLanes)===0||Ht(f,p),R=E?Zye(f,p):y_(f,p,!0),B=E;do{if(R===0){$0&&!E&&Ef(f,p,0,!1);break}else{if(y=f.current.alternate,B&&!Xye(y)){R=y_(f,p,!1),B=!1;continue}if(R===2){if(B=p,f.errorRecoveryDisabledLanes&B)var ne=0;else ne=f.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){p=ne;e:{var le=f;R=db;var Ee=le.current.memoizedState.isDehydrated;if(Ee&&(H0(le,ne).flags|=256),ne=y_(le,ne,!1),ne!==2){if(u_&&!Ee){le.errorRecoveryDisabledLanes|=B,hp|=B,R=4;break e}B=bo,bo=R,B!==null&&(bo===null?bo=B:bo.push.apply(bo,B))}R=ne}if(B=!1,R!==2)continue}}if(R===1){H0(f,0),Ef(f,p,0,!0);break}e:{switch(E=f,B=R,B){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:Ef(E,p,Ho,!xf);break e;case 2:bo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(R=LS+300-it(),10<R)){if(Ef(E,p,Ho,!xf),et(E,0,!0)!==0)break e;_u=p,E.timeoutHandle=c$(O9.bind(null,E,y,bo,DS,f_,p,Ho,hp,z0,xf,B,"Throttled",-0,0),R);break e}O9(E,y,bo,DS,f_,p,Ho,hp,z0,xf,B,null,-0,0)}}break}while(!0);uc(f)}function O9(f,p,y,E,R,B,ne,le,Ee,Be,Ye,rt,$e,He){if(f.timeoutHandle=-1,rt=p.subtreeFlags,rt&8192||(rt&16785408)===16785408){rt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mu},T9(p,B,rt);var jt=(B&62914560)===B?LS-it():(B&4194048)===B?P9-it():0;if(jt=Lxe(rt,jt),jt!==null){_u=B,f.cancelPendingCommit=jt($9.bind(null,f,p,B,y,E,R,ne,le,Ee,Ye,rt,null,$e,He)),Ef(f,B,ne,!Be);return}}$9(f,p,B,y,E,R,ne,le,Ee)}function Xye(f){for(var p=f;;){var y=p.tag;if((y===0||y===11||y===15)&&p.flags&16384&&(y=p.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var E=0;E<y.length;E++){var R=y[E],B=R.getSnapshot;R=R.value;try{if(!Uo(B(),R))return!1}catch{return!1}}if(y=p.child,p.subtreeFlags&16384&&y!==null)y.return=p,p=y;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ef(f,p,y,E){p&=~d_,p&=~hp,f.suspendedLanes|=p,f.pingedLanes&=~p,E&&(f.warmLanes|=p),E=f.expirationTimes;for(var R=p;0<R;){var B=31-pe(R),ne=1<<B;E[B]=-1,R&=~ne}y!==0&&fe(f,y,p)}function BS(){return(qn&6)===0?(hb(0),!1):!0}function g_(){if(En!==null){if(Jn===0)var f=En.return;else f=En,vu=ip=null,R5(f),M0=null,Yv=0,f=En;for(;f!==null;)u9(f.alternate,f),f=f.return;En=null}}function H0(f,p){var y=f.timeoutHandle;y!==-1&&(f.timeoutHandle=-1,yxe(y)),y=f.cancelPendingCommit,y!==null&&(f.cancelPendingCommit=null,y()),_u=0,g_(),ar=f,En=y=yu(f.current,null),Cn=p,Jn=0,Vo=null,xf=!1,$0=Ht(f,p),u_=!1,z0=Ho=d_=hp=vf=Gr=0,bo=db=null,f_=!1,(p&8)!==0&&(p|=p&32);var E=f.entangledLanes;if(E!==0)for(f=f.entanglements,E&=p;0<E;){var R=31-pe(E),B=1<<R;p|=f[R],E&=~B}return Pu=p,sS(),y}function M9(f,p){cn=null,j.H=rb,p===O0||p===hS?(p=JU(),Jn=3):p===b5?(p=JU(),Jn=4):Jn=p===W5?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Vo=p,En===null&&(Gr=1,NS(f,wa(p,f.current)))}function L9(){var f=$o.current;return f===null?!0:(Cn&4194048)===Cn?Ta===null:(Cn&62914560)===Cn||(Cn&536870912)!==0?f===Ta:!1}function j9(){var f=j.H;return j.H=rb,f===null?rb:f}function D9(){var f=j.A;return j.A=Yye,f}function US(){Gr=4,xf||(Cn&4194048)!==Cn&&$o.current!==null||($0=!0),(vf&134217727)===0&&(hp&134217727)===0||ar===null||Ef(ar,Cn,Ho,!1)}function y_(f,p,y){var E=qn;qn|=2;var R=j9(),B=D9();(ar!==f||Cn!==p)&&(DS=null,H0(f,p)),p=!1;var ne=Gr;e:do try{if(Jn!==0&&En!==null){var le=En,Ee=Vo;switch(Jn){case 8:g_(),ne=6;break e;case 3:case 2:case 9:case 6:$o.current===null&&(p=!0);var Be=Jn;if(Jn=0,Vo=null,q0(f,le,Ee,Be),y&&$0){ne=0;break e}break;default:Be=Jn,Jn=0,Vo=null,q0(f,le,Ee,Be)}}Qye(),ne=Gr;break}catch(Ye){M9(f,Ye)}while(!0);return p&&f.shellSuspendCounter++,vu=ip=null,qn=E,j.H=R,j.A=B,En===null&&(ar=null,Cn=0,sS()),ne}function Qye(){for(;En!==null;)B9(En)}function Zye(f,p){var y=qn;qn|=2;var E=j9(),R=D9();ar!==f||Cn!==p?(DS=null,jS=it()+500,H0(f,p)):$0=Ht(f,p);e:do try{if(Jn!==0&&En!==null){p=En;var B=Vo;t:switch(Jn){case 1:Jn=0,Vo=null,q0(f,p,B,1);break;case 2:case 9:if(WU(B)){Jn=0,Vo=null,U9(p);break}p=function(){Jn!==2&&Jn!==9||ar!==f||(Jn=7),uc(f)},B.then(p,p);break e;case 3:Jn=7;break e;case 4:Jn=5;break e;case 7:WU(B)?(Jn=0,Vo=null,U9(p)):(Jn=0,Vo=null,q0(f,p,B,7));break;case 5:var ne=null;switch(En.tag){case 26:ne=En.memoizedState;case 5:case 27:var le=En;if(ne?A$(ne):le.stateNode.complete){Jn=0,Vo=null;var Ee=le.sibling;if(Ee!==null)En=Ee;else{var Be=le.return;Be!==null?(En=Be,FS(Be)):En=null}break t}}Jn=0,Vo=null,q0(f,p,B,5);break;case 6:Jn=0,Vo=null,q0(f,p,B,6);break;case 8:g_(),Gr=6;break e;default:throw Error(r(462))}}exe();break}catch(Ye){M9(f,Ye)}while(!0);return vu=ip=null,j.H=E,j.A=R,qn=y,En!==null?0:(ar=null,Cn=0,sS(),Gr)}function exe(){for(;En!==null&&!St();)B9(En)}function B9(f){var p=l9(f.alternate,f,Pu);f.memoizedProps=f.pendingProps,p===null?FS(f):En=p}function U9(f){var p=f,y=p.alternate;switch(p.tag){case 15:case 0:p=n9(y,p,p.pendingProps,p.type,void 0,Cn);break;case 11:p=n9(y,p,p.pendingProps,p.type.render,p.ref,Cn);break;case 5:R5(p);default:u9(y,p),p=En=DU(p,Pu),p=l9(y,p,Pu)}f.memoizedProps=f.pendingProps,p===null?FS(f):En=p}function q0(f,p,y,E){vu=ip=null,R5(p),M0=null,Yv=0;var R=p.return;try{if(zye(f,R,p,y,Cn)){Gr=1,NS(f,wa(y,f.current)),En=null;return}}catch(B){if(R!==null)throw En=R,B;Gr=1,NS(f,wa(y,f.current)),En=null;return}p.flags&32768?(_n||E===1?f=!0:$0||(Cn&536870912)!==0?f=!1:(xf=f=!0,(E===2||E===9||E===3||E===6)&&(E=$o.current,E!==null&&E.tag===13&&(E.flags|=16384))),F9(p,f)):FS(p)}function FS(f){var p=f;do{if((p.flags&32768)!==0){F9(p,xf);return}f=p.return;var y=qye(p.alternate,p,Pu);if(y!==null){En=y;return}if(p=p.sibling,p!==null){En=p;return}En=p=f}while(p!==null);Gr===0&&(Gr=5)}function F9(f,p){do{var y=Gye(f.alternate,f);if(y!==null){y.flags&=32767,En=y;return}if(y=f.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!p&&(f=f.sibling,f!==null)){En=f;return}En=f=y}while(f!==null);Gr=6,En=null}function $9(f,p,y,E,R,B,ne,le,Ee){f.cancelPendingCommit=null;do $S();while(ki!==0);if((qn&6)!==0)throw Error(r(327));if(p!==null){if(p===f.current)throw Error(r(177));if(B=p.lanes|p.childLanes,B|=s5,ee(f,y,B,ne,le,Ee),f===ar&&(En=ar=null,Cn=0),V0=p,wf=f,_u=y,h_=B,p_=R,_9=E,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,ixe(Tt,function(){return G9(),null})):(f.callbackNode=null,f.callbackPriority=0),E=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||E){E=j.T,j.T=null,R=q.p,q.p=2,ne=qn,qn|=4;try{Kye(f,p,y)}finally{qn=ne,q.p=R,j.T=E}}ki=1,z9(),V9(),H9()}}function z9(){if(ki===1){ki=0;var f=wf,p=V0,y=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||y){y=j.T,j.T=null;var E=q.p;q.p=2;var R=qn;qn|=4;try{E9(p,f);var B=P_,ne=CU(f.containerInfo),le=B.focusedElem,Ee=B.selectionRange;if(ne!==le&&le&&le.ownerDocument&&NU(le.ownerDocument.documentElement,le)){if(Ee!==null&&e5(le)){var Be=Ee.start,Ye=Ee.end;if(Ye===void 0&&(Ye=Be),"selectionStart"in le)le.selectionStart=Be,le.selectionEnd=Math.min(Ye,le.value.length);else{var rt=le.ownerDocument||document,$e=rt&&rt.defaultView||window;if($e.getSelection){var He=$e.getSelection(),jt=le.textContent.length,Xt=Math.min(Ee.start,jt),nr=Ee.end===void 0?Xt:Math.min(Ee.end,jt);!He.extend&&Xt>nr&&(ne=nr,nr=Xt,Xt=ne);var Oe=kU(le,Xt),Pe=kU(le,nr);if(Oe&&Pe&&(He.rangeCount!==1||He.anchorNode!==Oe.node||He.anchorOffset!==Oe.offset||He.focusNode!==Pe.node||He.focusOffset!==Pe.offset)){var De=rt.createRange();De.setStart(Oe.node,Oe.offset),He.removeAllRanges(),Xt>nr?(He.addRange(De),He.extend(Pe.node,Pe.offset)):(De.setEnd(Pe.node,Pe.offset),He.addRange(De))}}}}for(rt=[],He=le;He=He.parentNode;)He.nodeType===1&&rt.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<rt.length;le++){var nt=rt[le];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}ZS=!!C_,P_=C_=null}finally{qn=R,q.p=E,j.T=y}}f.current=p,ki=2}}function V9(){if(ki===2){ki=0;var f=wf,p=V0,y=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||y){y=j.T,j.T=null;var E=q.p;q.p=2;var R=qn;qn|=4;try{y9(f,p.alternate,p)}finally{qn=R,q.p=E,j.T=y}}ki=3}}function H9(){if(ki===4||ki===3){ki=0,qe();var f=wf,p=V0,y=_u,E=_9;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?ki=5:(ki=0,V0=wf=null,q9(f,f.pendingLanes));var R=f.pendingLanes;if(R===0&&(bf=null),en(y),p=p.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(ue,p,void 0,(p.current.flags&128)===128)}catch{}if(E!==null){p=j.T,R=q.p,q.p=2,j.T=null;try{for(var B=f.onRecoverableError,ne=0;ne<E.length;ne++){var le=E[ne];B(le.value,{componentStack:le.stack})}}finally{j.T=p,q.p=R}}(_u&3)!==0&&$S(),uc(f),R=f.pendingLanes,(y&261930)!==0&&(R&42)!==0?f===m_?fb++:(fb=0,m_=f):fb=0,hb(0)}}function q9(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,Kv(p)))}function $S(){return z9(),V9(),H9(),G9()}function G9(){if(ki!==5)return!1;var f=wf,p=h_;h_=0;var y=en(_u),E=j.T,R=q.p;try{q.p=32>y?32:y,j.T=null,y=p_,p_=null;var B=wf,ne=_u;if(ki=0,V0=wf=null,_u=0,(qn&6)!==0)throw Error(r(331));var le=qn;if(qn|=4,N9(B.current),A9(B,B.current,ne,y),qn=le,hb(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(ue,B)}catch{}return!0}finally{q.p=R,j.T=E,q9(f,p)}}function K9(f,p,y){p=wa(y,p),p=K5(f.stateNode,p,2),f=pf(f,p,2),f!==null&&(Q(f,2),uc(f))}function Xn(f,p,y){if(f.tag===3)K9(f,f,y);else for(;p!==null;){if(p.tag===3){K9(p,f,y);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(bf===null||!bf.has(E))){f=wa(y,f),y=WF(2),E=pf(p,y,2),E!==null&&(YF(y,E,p,f),Q(E,2),uc(E));break}}p=p.return}}function x_(f,p,y){var E=f.pingCache;if(E===null){E=f.pingCache=new Jye;var R=new Set;E.set(p,R)}else R=E.get(p),R===void 0&&(R=new Set,E.set(p,R));R.has(y)||(u_=!0,R.add(y),f=txe.bind(null,f,p,y),p.then(f,f))}function txe(f,p,y){var E=f.pingCache;E!==null&&E.delete(p),f.pingedLanes|=f.suspendedLanes&y,f.warmLanes&=~y,ar===f&&(Cn&y)===y&&(Gr===4||Gr===3&&(Cn&62914560)===Cn&&300>it()-LS?(qn&2)===0&&H0(f,0):d_|=y,z0===Cn&&(z0=0)),uc(f)}function W9(f,p){p===0&&(p=sn()),f=tp(f,p),f!==null&&(Q(f,p),uc(f))}function nxe(f){var p=f.memoizedState,y=0;p!==null&&(y=p.retryLane),W9(f,y)}function rxe(f,p){var y=0;switch(f.tag){case 31:case 13:var E=f.stateNode,R=f.memoizedState;R!==null&&(y=R.retryLane);break;case 19:E=f.stateNode;break;case 22:E=f.stateNode._retryCache;break;default:throw Error(r(314))}E!==null&&E.delete(p),W9(f,y)}function ixe(f,p){return Ze(f,p)}var zS=null,G0=null,v_=!1,VS=!1,b_=!1,Sf=0;function uc(f){f!==G0&&f.next===null&&(G0===null?zS=G0=f:G0=G0.next=f),VS=!0,v_||(v_=!0,oxe())}function hb(f,p){if(!b_&&VS){b_=!0;do for(var y=!1,E=zS;E!==null;){if(f!==0){var R=E.pendingLanes;if(R===0)var B=0;else{var ne=E.suspendedLanes,le=E.pingedLanes;B=(1<<31-pe(42|f)+1)-1,B&=R&~(ne&~le),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(y=!0,Q9(E,B))}else B=Cn,B=et(E,E===ar?B:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(B&3)===0||Ht(E,B)||(y=!0,Q9(E,B));E=E.next}while(y);b_=!1}}function sxe(){Y9()}function Y9(){VS=v_=!1;var f=0;Sf!==0&&gxe()&&(f=Sf);for(var p=it(),y=null,E=zS;E!==null;){var R=E.next,B=J9(E,p);B===0?(E.next=null,y===null?zS=R:y.next=R,R===null&&(G0=y)):(y=E,(f!==0||(B&3)!==0)&&(VS=!0)),E=R}ki!==0&&ki!==5||hb(f),Sf!==0&&(Sf=0)}function J9(f,p){for(var y=f.suspendedLanes,E=f.pingedLanes,R=f.expirationTimes,B=f.pendingLanes&-62914561;0<B;){var ne=31-pe(B),le=1<<ne,Ee=R[ne];Ee===-1?((le&y)===0||(le&E)!==0)&&(R[ne]=Hn(le,p)):Ee<=p&&(f.expiredLanes|=le),B&=~le}if(p=ar,y=Cn,y=et(f,f===p?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E=f.callbackNode,y===0||f===p&&(Jn===2||Jn===9)||f.cancelPendingCommit!==null)return E!==null&&E!==null&&at(E),f.callbackNode=null,f.callbackPriority=0;if((y&3)===0||Ht(f,y)){if(p=y&-y,p===f.callbackPriority)return p;switch(E!==null&&at(E),en(y)){case 2:case 8:y=Ge;break;case 32:y=Tt;break;case 268435456:y=se;break;default:y=Tt}return E=X9.bind(null,f),y=Ze(y,E),f.callbackPriority=p,f.callbackNode=y,p}return E!==null&&E!==null&&at(E),f.callbackPriority=2,f.callbackNode=null,2}function X9(f,p){if(ki!==0&&ki!==5)return f.callbackNode=null,f.callbackPriority=0,null;var y=f.callbackNode;if($S()&&f.callbackNode!==y)return null;var E=Cn;return E=et(f,f===ar?E:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),E===0?null:(R9(f,E,p),J9(f,it()),f.callbackNode!=null&&f.callbackNode===y?X9.bind(null,f):null)}function Q9(f,p){if($S())return null;R9(f,p,!0)}function oxe(){xxe(function(){(qn&6)!==0?Ze(Ie,sxe):Y9()})}function w_(){if(Sf===0){var f=I0;f===0&&(f=Nt,Nt<<=1,(Nt&261888)===0&&(Nt=256)),Sf=f}return Sf}function Z9(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:XE(""+f)}function e$(f,p){var y=p.ownerDocument.createElement("input");return y.name=p.name,y.value=p.value,f.id&&y.setAttribute("form",f.id),p.parentNode.insertBefore(y,p),f=new FormData(f),y.parentNode.removeChild(y),f}function axe(f,p,y,E,R){if(p==="submit"&&y&&y.stateNode===R){var B=Z9((R[wn]||null).action),ne=E.submitter;ne&&(p=(p=ne[wn]||null)?Z9(p.formAction):ne.getAttribute("formAction"),p!==null&&(B=p,ne=null));var le=new tS("action","action",null,E,R);f.push({event:le,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(Sf!==0){var Ee=ne?e$(R,ne):new FormData(R);$5(y,{pending:!0,data:Ee,method:R.method,action:B},null,Ee)}}else typeof B=="function"&&(le.preventDefault(),Ee=ne?e$(R,ne):new FormData(R),$5(y,{pending:!0,data:Ee,method:R.method,action:B},B,Ee))},currentTarget:R}]})}}for(var E_=0;E_<i5.length;E_++){var S_=i5[E_],lxe=S_.toLowerCase(),cxe=S_[0].toUpperCase()+S_.slice(1);yl(lxe,"on"+cxe)}yl(IU,"onAnimationEnd"),yl(RU,"onAnimationIteration"),yl(OU,"onAnimationStart"),yl("dblclick","onDoubleClick"),yl("focusin","onFocus"),yl("focusout","onBlur"),yl(Tye,"onTransitionRun"),yl(kye,"onTransitionStart"),yl(Nye,"onTransitionCancel"),yl(MU,"onTransitionEnd"),mo("onMouseEnter",["mouseout","mouseover"]),mo("onMouseLeave",["mouseout","mouseover"]),mo("onPointerEnter",["pointerout","pointerover"]),mo("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uxe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pb));function t$(f,p){p=(p&4)!==0;for(var y=0;y<f.length;y++){var E=f[y],R=E.event;E=E.listeners;e:{var B=void 0;if(p)for(var ne=E.length-1;0<=ne;ne--){var le=E[ne],Ee=le.instance,Be=le.currentTarget;if(le=le.listener,Ee!==B&&R.isPropagationStopped())break e;B=le,R.currentTarget=Be;try{B(R)}catch(Ye){iS(Ye)}R.currentTarget=null,B=Ee}else for(ne=0;ne<E.length;ne++){if(le=E[ne],Ee=le.instance,Be=le.currentTarget,le=le.listener,Ee!==B&&R.isPropagationStopped())break e;B=le,R.currentTarget=Be;try{B(R)}catch(Ye){iS(Ye)}R.currentTarget=null,B=Ee}}}}function Sn(f,p){var y=p[or];y===void 0&&(y=p[or]=new Set);var E=f+"__bubble";y.has(E)||(n$(p,f,2,!1),y.add(E))}function A_(f,p,y){var E=0;p&&(E|=4),n$(y,f,E,p)}var HS="_reactListening"+Math.random().toString(36).slice(2);function T_(f){if(!f[HS]){f[HS]=!0,rf.forEach(function(y){y!=="selectionchange"&&(uxe.has(y)||A_(y,!1,f),A_(y,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[HS]||(p[HS]=!0,A_("selectionchange",!1,p))}}function n$(f,p,y,E){switch(I$(p)){case 2:var R=Bxe;break;case 8:R=Uxe;break;default:R=F_}y=R.bind(null,p,y,f),R=void 0,!qP||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(R=!0),E?R!==void 0?f.addEventListener(p,y,{capture:!0,passive:R}):f.addEventListener(p,y,!0):R!==void 0?f.addEventListener(p,y,{passive:R}):f.addEventListener(p,y,!1)}function k_(f,p,y,E,R){var B=E;if((p&1)===0&&(p&2)===0&&E!==null)e:for(;;){if(E===null)return;var ne=E.tag;if(ne===3||ne===4){var le=E.stateNode.containerInfo;if(le===R)break;if(ne===4)for(ne=E.return;ne!==null;){var Ee=ne.tag;if((Ee===3||Ee===4)&&ne.stateNode.containerInfo===R)return;ne=ne.return}for(;le!==null;){if(ne=ma(le),ne===null)return;if(Ee=ne.tag,Ee===5||Ee===6||Ee===26||Ee===27){E=B=ne;continue e}le=le.parentNode}}E=E.return}aU(function(){var Be=B,Ye=VP(y),rt=[];e:{var $e=LU.get(f);if($e!==void 0){var He=tS,jt=f;switch(f){case"keypress":if(ZE(y)===0)break e;case"keydown":case"keyup":He=rye;break;case"focusin":jt="focus",He=YP;break;case"focusout":jt="blur",He=YP;break;case"beforeblur":case"afterblur":He=YP;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=uU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=qge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=oye;break;case IU:case RU:case OU:He=Wge;break;case MU:He=lye;break;case"scroll":case"scrollend":He=Vge;break;case"wheel":He=uye;break;case"copy":case"cut":case"paste":He=Jge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=fU;break;case"toggle":case"beforetoggle":He=fye}var Xt=(p&4)!==0,nr=!Xt&&(f==="scroll"||f==="scrollend"),Oe=Xt?$e!==null?$e+"Capture":null:$e;Xt=[];for(var Pe=Be,De;Pe!==null;){var nt=Pe;if(De=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||De===null||Oe===null||(nt=jv(Pe,Oe),nt!=null&&Xt.push(mb(Pe,nt,De))),nr)break;Pe=Pe.return}0<Xt.length&&($e=new He($e,jt,null,y,Ye),rt.push({event:$e,listeners:Xt}))}}if((p&7)===0){e:{if($e=f==="mouseover"||f==="pointerover",He=f==="mouseout"||f==="pointerout",$e&&y!==zP&&(jt=y.relatedTarget||y.fromElement)&&(ma(jt)||jt[pa]))break e;if((He||$e)&&($e=Ye.window===Ye?Ye:($e=Ye.ownerDocument)?$e.defaultView||$e.parentWindow:window,He?(jt=y.relatedTarget||y.toElement,He=Be,jt=jt?ma(jt):null,jt!==null&&(nr=s(jt),Xt=jt.tag,jt!==nr||Xt!==5&&Xt!==27&&Xt!==6)&&(jt=null)):(He=null,jt=Be),He!==jt)){if(Xt=uU,nt="onMouseLeave",Oe="onMouseEnter",Pe="mouse",(f==="pointerout"||f==="pointerover")&&(Xt=fU,nt="onPointerLeave",Oe="onPointerEnter",Pe="pointer"),nr=He==null?$e:hl(He),De=jt==null?$e:hl(jt),$e=new Xt(nt,Pe+"leave",He,y,Ye),$e.target=nr,$e.relatedTarget=De,nt=null,ma(Ye)===Be&&(Xt=new Xt(Oe,Pe+"enter",jt,y,Ye),Xt.target=De,Xt.relatedTarget=nr,nt=Xt),nr=nt,He&&jt)t:{for(Xt=dxe,Oe=He,Pe=jt,De=0,nt=Oe;nt;nt=Xt(nt))De++;nt=0;for(var Gt=Pe;Gt;Gt=Xt(Gt))nt++;for(;0<De-nt;)Oe=Xt(Oe),De--;for(;0<nt-De;)Pe=Xt(Pe),nt--;for(;De--;){if(Oe===Pe||Pe!==null&&Oe===Pe.alternate){Xt=Oe;break t}Oe=Xt(Oe),Pe=Xt(Pe)}Xt=null}else Xt=null;He!==null&&r$(rt,$e,He,Xt,!1),jt!==null&&nr!==null&&r$(rt,nr,jt,Xt,!0)}}e:{if($e=Be?hl(Be):window,He=$e.nodeName&&$e.nodeName.toLowerCase(),He==="select"||He==="input"&&$e.type==="file")var Dn=bU;else if(xU($e))if(wU)Dn=Eye;else{Dn=bye;var Ft=vye}else He=$e.nodeName,!He||He.toLowerCase()!=="input"||$e.type!=="checkbox"&&$e.type!=="radio"?Be&&$P(Be.elementType)&&(Dn=bU):Dn=wye;if(Dn&&(Dn=Dn(f,Be))){vU(rt,Dn,y,Ye);break e}Ft&&Ft(f,$e,Be),f==="focusout"&&Be&&$e.type==="number"&&Be.memoizedProps.value!=null&&FP($e,"number",$e.value)}switch(Ft=Be?hl(Be):window,f){case"focusin":(xU(Ft)||Ft.contentEditable==="true")&&(S0=Ft,t5=Be,Hv=null);break;case"focusout":Hv=t5=S0=null;break;case"mousedown":n5=!0;break;case"contextmenu":case"mouseup":case"dragend":n5=!1,PU(rt,y,Ye);break;case"selectionchange":if(Aye)break;case"keydown":case"keyup":PU(rt,y,Ye)}var fn;if(XP)e:{switch(f){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else E0?gU(f,y)&&(Pn="onCompositionEnd"):f==="keydown"&&y.keyCode===229&&(Pn="onCompositionStart");Pn&&(hU&&y.locale!=="ko"&&(E0||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&E0&&(fn=lU()):(af=Ye,GP="value"in af?af.value:af.textContent,E0=!0)),Ft=qS(Be,Pn),0<Ft.length&&(Pn=new dU(Pn,f,null,y,Ye),rt.push({event:Pn,listeners:Ft}),fn?Pn.data=fn:(fn=yU(y),fn!==null&&(Pn.data=fn)))),(fn=pye?mye(f,y):gye(f,y))&&(Pn=qS(Be,"onBeforeInput"),0<Pn.length&&(Ft=new dU("onBeforeInput","beforeinput",null,y,Ye),rt.push({event:Ft,listeners:Pn}),Ft.data=fn)),axe(rt,f,Be,y,Ye)}t$(rt,p)})}function mb(f,p,y){return{instance:f,listener:p,currentTarget:y}}function qS(f,p){for(var y=p+"Capture",E=[];f!==null;){var R=f,B=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||B===null||(R=jv(f,y),R!=null&&E.unshift(mb(f,R,B)),R=jv(f,p),R!=null&&E.push(mb(f,R,B))),f.tag===3)return E;f=f.return}return[]}function dxe(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function r$(f,p,y,E,R){for(var B=p._reactName,ne=[];y!==null&&y!==E;){var le=y,Ee=le.alternate,Be=le.stateNode;if(le=le.tag,Ee!==null&&Ee===E)break;le!==5&&le!==26&&le!==27||Be===null||(Ee=Be,R?(Be=jv(y,B),Be!=null&&ne.unshift(mb(y,Be,Ee))):R||(Be=jv(y,B),Be!=null&&ne.push(mb(y,Be,Ee)))),y=y.return}ne.length!==0&&f.push({event:p,listeners:ne})}var fxe=/\r\n?/g,hxe=/\u0000|\uFFFD/g;function i$(f){return(typeof f=="string"?f:""+f).replace(fxe,`
`).replace(hxe,"")}function s$(f,p){return p=i$(p),i$(f)===p}function tr(f,p,y,E,R,B){switch(y){case"children":typeof E=="string"?p==="body"||p==="textarea"&&E===""||v0(f,E):(typeof E=="number"||typeof E=="bigint")&&p!=="body"&&v0(f,""+E);break;case"className":ml(f,"class",E);break;case"tabIndex":ml(f,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":ml(f,y,E);break;case"style":sU(f,E,B);break;case"data":if(p!=="object"){ml(f,"data",E);break}case"src":case"href":if(E===""&&(p!=="a"||y!=="href")){f.removeAttribute(y);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(y);break}E=XE(""+E),f.setAttribute(y,E);break;case"action":case"formAction":if(typeof E=="function"){f.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof B=="function"&&(y==="formAction"?(p!=="input"&&tr(f,p,"name",R.name,R,null),tr(f,p,"formEncType",R.formEncType,R,null),tr(f,p,"formMethod",R.formMethod,R,null),tr(f,p,"formTarget",R.formTarget,R,null)):(tr(f,p,"encType",R.encType,R,null),tr(f,p,"method",R.method,R,null),tr(f,p,"target",R.target,R,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){f.removeAttribute(y);break}E=XE(""+E),f.setAttribute(y,E);break;case"onClick":E!=null&&(f.onclick=mu);break;case"onScroll":E!=null&&Sn("scroll",f);break;case"onScrollEnd":E!=null&&Sn("scrollend",f);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(y=E.__html,y!=null){if(R.children!=null)throw Error(r(60));f.innerHTML=y}}break;case"multiple":f.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":f.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){f.removeAttribute("xlink:href");break}y=XE(""+E),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(y,""+E):f.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(y,""):f.removeAttribute(y);break;case"capture":case"download":E===!0?f.setAttribute(y,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?f.setAttribute(y,E):f.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?f.setAttribute(y,E):f.removeAttribute(y);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?f.removeAttribute(y):f.setAttribute(y,E);break;case"popover":Sn("beforetoggle",f),Sn("toggle",f),pl(f,"popover",E);break;case"xlinkActuate":ya(f,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":ya(f,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":ya(f,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":ya(f,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":ya(f,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":ya(f,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":ya(f,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":ya(f,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":ya(f,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":pl(f,"is",E);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=$ge.get(y)||y,pl(f,y,E))}}function N_(f,p,y,E,R,B){switch(y){case"style":sU(f,E,B);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(r(61));if(y=E.__html,y!=null){if(R.children!=null)throw Error(r(60));f.innerHTML=y}}break;case"children":typeof E=="string"?v0(f,E):(typeof E=="number"||typeof E=="bigint")&&v0(f,""+E);break;case"onScroll":E!=null&&Sn("scroll",f);break;case"onScrollEnd":E!=null&&Sn("scrollend",f);break;case"onClick":E!=null&&(f.onclick=mu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fu.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(R=y.endsWith("Capture"),p=y.slice(2,R?y.length-7:void 0),B=f[wn]||null,B=B!=null?B[y]:null,typeof B=="function"&&f.removeEventListener(p,B,R),typeof E=="function")){typeof B!="function"&&B!==null&&(y in f?f[y]=null:f.hasAttribute(y)&&f.removeAttribute(y)),f.addEventListener(p,E,R);break e}y in f?f[y]=E:E===!0?f.setAttribute(y,""):pl(f,y,E)}}}function ns(f,p,y){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Sn("error",f),Sn("load",f);var E=!1,R=!1,B;for(B in y)if(y.hasOwnProperty(B)){var ne=y[B];if(ne!=null)switch(B){case"src":E=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:tr(f,p,B,ne,y,null)}}R&&tr(f,p,"srcSet",y.srcSet,y,null),E&&tr(f,p,"src",y.src,y,null);return;case"input":Sn("invalid",f);var le=B=ne=R=null,Ee=null,Be=null;for(E in y)if(y.hasOwnProperty(E)){var Ye=y[E];if(Ye!=null)switch(E){case"name":R=Ye;break;case"type":ne=Ye;break;case"checked":Ee=Ye;break;case"defaultChecked":Be=Ye;break;case"value":B=Ye;break;case"defaultValue":le=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,p));break;default:tr(f,p,E,Ye,y,null)}}tU(f,B,le,Ee,Be,ne,R,!1);return;case"select":Sn("invalid",f),E=ne=B=null;for(R in y)if(y.hasOwnProperty(R)&&(le=y[R],le!=null))switch(R){case"value":B=le;break;case"defaultValue":ne=le;break;case"multiple":E=le;default:tr(f,p,R,le,y,null)}p=B,y=ne,f.multiple=!!E,p!=null?x0(f,!!E,p,!1):y!=null&&x0(f,!!E,y,!0);return;case"textarea":Sn("invalid",f),B=R=E=null;for(ne in y)if(y.hasOwnProperty(ne)&&(le=y[ne],le!=null))switch(ne){case"value":E=le;break;case"defaultValue":R=le;break;case"children":B=le;break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(91));break;default:tr(f,p,ne,le,y,null)}rU(f,E,R,B);return;case"option":for(Ee in y)if(y.hasOwnProperty(Ee)&&(E=y[Ee],E!=null))switch(Ee){case"selected":f.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:tr(f,p,Ee,E,y,null)}return;case"dialog":Sn("beforetoggle",f),Sn("toggle",f),Sn("cancel",f),Sn("close",f);break;case"iframe":case"object":Sn("load",f);break;case"video":case"audio":for(E=0;E<pb.length;E++)Sn(pb[E],f);break;case"image":Sn("error",f),Sn("load",f);break;case"details":Sn("toggle",f);break;case"embed":case"source":case"link":Sn("error",f),Sn("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Be in y)if(y.hasOwnProperty(Be)&&(E=y[Be],E!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:tr(f,p,Be,E,y,null)}return;default:if($P(p)){for(Ye in y)y.hasOwnProperty(Ye)&&(E=y[Ye],E!==void 0&&N_(f,p,Ye,E,y,void 0));return}}for(le in y)y.hasOwnProperty(le)&&(E=y[le],E!=null&&tr(f,p,le,E,y,null))}function pxe(f,p,y,E){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,B=null,ne=null,le=null,Ee=null,Be=null,Ye=null;for(He in y){var rt=y[He];if(y.hasOwnProperty(He)&&rt!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":Ee=rt;default:E.hasOwnProperty(He)||tr(f,p,He,null,E,rt)}}for(var $e in E){var He=E[$e];if(rt=y[$e],E.hasOwnProperty($e)&&(He!=null||rt!=null))switch($e){case"type":B=He;break;case"name":R=He;break;case"checked":Be=He;break;case"defaultChecked":Ye=He;break;case"value":ne=He;break;case"defaultValue":le=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,p));break;default:He!==rt&&tr(f,p,$e,He,E,rt)}}UP(f,ne,le,Ee,Be,Ye,B,R);return;case"select":He=ne=le=$e=null;for(B in y)if(Ee=y[B],y.hasOwnProperty(B)&&Ee!=null)switch(B){case"value":break;case"multiple":He=Ee;default:E.hasOwnProperty(B)||tr(f,p,B,null,E,Ee)}for(R in E)if(B=E[R],Ee=y[R],E.hasOwnProperty(R)&&(B!=null||Ee!=null))switch(R){case"value":$e=B;break;case"defaultValue":le=B;break;case"multiple":ne=B;default:B!==Ee&&tr(f,p,R,B,E,Ee)}p=le,y=ne,E=He,$e!=null?x0(f,!!y,$e,!1):!!E!=!!y&&(p!=null?x0(f,!!y,p,!0):x0(f,!!y,y?[]:"",!1));return;case"textarea":He=$e=null;for(le in y)if(R=y[le],y.hasOwnProperty(le)&&R!=null&&!E.hasOwnProperty(le))switch(le){case"value":break;case"children":break;default:tr(f,p,le,null,E,R)}for(ne in E)if(R=E[ne],B=y[ne],E.hasOwnProperty(ne)&&(R!=null||B!=null))switch(ne){case"value":$e=R;break;case"defaultValue":He=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==B&&tr(f,p,ne,R,E,B)}nU(f,$e,He);return;case"option":for(var jt in y)if($e=y[jt],y.hasOwnProperty(jt)&&$e!=null&&!E.hasOwnProperty(jt))switch(jt){case"selected":f.selected=!1;break;default:tr(f,p,jt,null,E,$e)}for(Ee in E)if($e=E[Ee],He=y[Ee],E.hasOwnProperty(Ee)&&$e!==He&&($e!=null||He!=null))switch(Ee){case"selected":f.selected=$e&&typeof $e!="function"&&typeof $e!="symbol";break;default:tr(f,p,Ee,$e,E,He)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in y)$e=y[Xt],y.hasOwnProperty(Xt)&&$e!=null&&!E.hasOwnProperty(Xt)&&tr(f,p,Xt,null,E,$e);for(Be in E)if($e=E[Be],He=y[Be],E.hasOwnProperty(Be)&&$e!==He&&($e!=null||He!=null))switch(Be){case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(r(137,p));break;default:tr(f,p,Be,$e,E,He)}return;default:if($P(p)){for(var nr in y)$e=y[nr],y.hasOwnProperty(nr)&&$e!==void 0&&!E.hasOwnProperty(nr)&&N_(f,p,nr,void 0,E,$e);for(Ye in E)$e=E[Ye],He=y[Ye],!E.hasOwnProperty(Ye)||$e===He||$e===void 0&&He===void 0||N_(f,p,Ye,$e,E,He);return}}for(var Oe in y)$e=y[Oe],y.hasOwnProperty(Oe)&&$e!=null&&!E.hasOwnProperty(Oe)&&tr(f,p,Oe,null,E,$e);for(rt in E)$e=E[rt],He=y[rt],!E.hasOwnProperty(rt)||$e===He||$e==null&&He==null||tr(f,p,rt,$e,E,He)}function o$(f){switch(f){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mxe(){if(typeof performance.getEntriesByType=="function"){for(var f=0,p=0,y=performance.getEntriesByType("resource"),E=0;E<y.length;E++){var R=y[E],B=R.transferSize,ne=R.initiatorType,le=R.duration;if(B&&le&&o$(ne)){for(ne=0,le=R.responseEnd,E+=1;E<y.length;E++){var Ee=y[E],Be=Ee.startTime;if(Be>le)break;var Ye=Ee.transferSize,rt=Ee.initiatorType;Ye&&o$(rt)&&(Ee=Ee.responseEnd,ne+=Ye*(Ee<le?1:(le-Be)/(Ee-Be)))}if(--E,p+=8*(B+ne)/(R.duration/1e3),f++,10<f)break}}if(0<f)return p/f/1e6}return navigator.connection&&(f=navigator.connection.downlink,typeof f=="number")?f:5}var C_=null,P_=null;function GS(f){return f.nodeType===9?f:f.ownerDocument}function a$(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l$(f,p){if(f===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&p==="foreignObject"?0:f}function __(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var I_=null;function gxe(){var f=window.event;return f&&f.type==="popstate"?f===I_?!1:(I_=f,!0):(I_=null,!1)}var c$=typeof setTimeout=="function"?setTimeout:void 0,yxe=typeof clearTimeout=="function"?clearTimeout:void 0,u$=typeof Promise=="function"?Promise:void 0,xxe=typeof queueMicrotask=="function"?queueMicrotask:typeof u$<"u"?function(f){return u$.resolve(null).then(f).catch(vxe)}:c$;function vxe(f){setTimeout(function(){throw f})}function Af(f){return f==="head"}function d$(f,p){var y=p,E=0;do{var R=y.nextSibling;if(f.removeChild(y),R&&R.nodeType===8)if(y=R.data,y==="/$"||y==="/&"){if(E===0){f.removeChild(R),J0(p);return}E--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")E++;else if(y==="html")gb(f.ownerDocument.documentElement);else if(y==="head"){y=f.ownerDocument.head,gb(y);for(var B=y.firstChild;B;){var ne=B.nextSibling,le=B.nodeName;B[fl]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&B.rel.toLowerCase()==="stylesheet"||y.removeChild(B),B=ne}}else y==="body"&&gb(f.ownerDocument.body);y=R}while(y);J0(p)}function f$(f,p){var y=f;f=0;do{var E=y.nextSibling;if(y.nodeType===1?p?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(p?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),E&&E.nodeType===8)if(y=E.data,y==="/$"){if(f===0)break;f--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||f++;y=E}while(y)}function R_(f){var p=f.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var y=p;switch(p=p.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":R_(y),du(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}f.removeChild(y)}}function bxe(f,p,y,E){for(;f.nodeType===1;){var R=y;if(f.nodeName.toLowerCase()!==p.toLowerCase()){if(!E&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(E){if(!f[fl])switch(p){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(B=f.getAttribute("rel"),B==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(B!==R.rel||f.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||f.getAttribute("title")!==(R.title==null?null:R.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(B=f.getAttribute("src"),(B!==(R.src==null?null:R.src)||f.getAttribute("type")!==(R.type==null?null:R.type)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&B&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(p==="input"&&f.type==="hidden"){var B=R.name==null?null:""+R.name;if(R.type==="hidden"&&f.getAttribute("name")===B)return f}else return f;if(f=ka(f.nextSibling),f===null)break}return null}function wxe(f,p,y){if(p==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!y||(f=ka(f.nextSibling),f===null))return null;return f}function h$(f,p){for(;f.nodeType!==8;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!p||(f=ka(f.nextSibling),f===null))return null;return f}function O_(f){return f.data==="$?"||f.data==="$~"}function M_(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState!=="loading"}function Exe(f,p){var y=f.ownerDocument;if(f.data==="$~")f._reactRetry=p;else if(f.data!=="$?"||y.readyState!=="loading")p();else{var E=function(){p(),y.removeEventListener("DOMContentLoaded",E)};y.addEventListener("DOMContentLoaded",E),f._reactRetry=E}}function ka(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"||p==="F!"||p==="F")break;if(p==="/$"||p==="/&")return null}}return f}var L_=null;function p$(f){f=f.nextSibling;for(var p=0;f;){if(f.nodeType===8){var y=f.data;if(y==="/$"||y==="/&"){if(p===0)return ka(f.nextSibling);p--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||p++}f=f.nextSibling}return null}function m$(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var y=f.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(p===0)return f;p--}else y!=="/$"&&y!=="/&"||p++}f=f.previousSibling}return null}function g$(f,p,y){switch(p=GS(y),f){case"html":if(f=p.documentElement,!f)throw Error(r(452));return f;case"head":if(f=p.head,!f)throw Error(r(453));return f;case"body":if(f=p.body,!f)throw Error(r(454));return f;default:throw Error(r(451))}}function gb(f){for(var p=f.attributes;p.length;)f.removeAttributeNode(p[0]);du(f)}var Na=new Map,y$=new Set;function KS(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Iu=q.d;q.d={f:Sxe,r:Axe,D:Txe,C:kxe,L:Nxe,m:Cxe,X:_xe,S:Pxe,M:Ixe};function Sxe(){var f=Iu.f(),p=BS();return f||p}function Axe(f){var p=ga(f);p!==null&&p.tag===5&&p.type==="form"?MF(p):Iu.r(f)}var K0=typeof document>"u"?null:document;function x$(f,p,y){var E=K0;if(E&&typeof p=="string"&&p){var R=va(p);R='link[rel="'+f+'"][href="'+R+'"]',typeof y=="string"&&(R+='[crossorigin="'+y+'"]'),y$.has(R)||(y$.add(R),f={rel:f,crossOrigin:y,href:p},E.querySelector(R)===null&&(p=E.createElement("link"),ns(p,"link",f),Nr(p),E.head.appendChild(p)))}}function Txe(f){Iu.D(f),x$("dns-prefetch",f,null)}function kxe(f,p){Iu.C(f,p),x$("preconnect",f,p)}function Nxe(f,p,y){Iu.L(f,p,y);var E=K0;if(E&&f&&p){var R='link[rel="preload"][as="'+va(p)+'"]';p==="image"&&y&&y.imageSrcSet?(R+='[imagesrcset="'+va(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(R+='[imagesizes="'+va(y.imageSizes)+'"]')):R+='[href="'+va(f)+'"]';var B=R;switch(p){case"style":B=W0(f);break;case"script":B=Y0(f)}Na.has(B)||(f=h({rel:"preload",href:p==="image"&&y&&y.imageSrcSet?void 0:f,as:p},y),Na.set(B,f),E.querySelector(R)!==null||p==="style"&&E.querySelector(yb(B))||p==="script"&&E.querySelector(xb(B))||(p=E.createElement("link"),ns(p,"link",f),Nr(p),E.head.appendChild(p)))}}function Cxe(f,p){Iu.m(f,p);var y=K0;if(y&&f){var E=p&&typeof p.as=="string"?p.as:"script",R='link[rel="modulepreload"][as="'+va(E)+'"][href="'+va(f)+'"]',B=R;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":B=Y0(f)}if(!Na.has(B)&&(f=h({rel:"modulepreload",href:f},p),Na.set(B,f),y.querySelector(R)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(xb(B)))return}E=y.createElement("link"),ns(E,"link",f),Nr(E),y.head.appendChild(E)}}}function Pxe(f,p,y){Iu.S(f,p,y);var E=K0;if(E&&f){var R=Bo(E).hoistableStyles,B=W0(f);p=p||"default";var ne=R.get(B);if(!ne){var le={loading:0,preload:null};if(ne=E.querySelector(yb(B)))le.loading=5;else{f=h({rel:"stylesheet",href:f,"data-precedence":p},y),(y=Na.get(B))&&j_(f,y);var Ee=ne=E.createElement("link");Nr(Ee),ns(Ee,"link",f),Ee._p=new Promise(function(Be,Ye){Ee.onload=Be,Ee.onerror=Ye}),Ee.addEventListener("load",function(){le.loading|=1}),Ee.addEventListener("error",function(){le.loading|=2}),le.loading|=4,WS(ne,p,E)}ne={type:"stylesheet",instance:ne,count:1,state:le},R.set(B,ne)}}}function _xe(f,p){Iu.X(f,p);var y=K0;if(y&&f){var E=Bo(y).hoistableScripts,R=Y0(f),B=E.get(R);B||(B=y.querySelector(xb(R)),B||(f=h({src:f,async:!0},p),(p=Na.get(R))&&D_(f,p),B=y.createElement("script"),Nr(B),ns(B,"link",f),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},E.set(R,B))}}function Ixe(f,p){Iu.M(f,p);var y=K0;if(y&&f){var E=Bo(y).hoistableScripts,R=Y0(f),B=E.get(R);B||(B=y.querySelector(xb(R)),B||(f=h({src:f,async:!0,type:"module"},p),(p=Na.get(R))&&D_(f,p),B=y.createElement("script"),Nr(B),ns(B,"link",f),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},E.set(R,B))}}function v$(f,p,y,E){var R=(R=ie.current)?KS(R):null;if(!R)throw Error(r(446));switch(f){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(p=W0(y.href),y=Bo(R).hoistableStyles,E=y.get(p),E||(E={type:"style",instance:null,count:0,state:null},y.set(p,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){f=W0(y.href);var B=Bo(R).hoistableStyles,ne=B.get(f);if(ne||(R=R.ownerDocument||R,ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},B.set(f,ne),(B=R.querySelector(yb(f)))&&!B._p&&(ne.instance=B,ne.state.loading=5),Na.has(f)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Na.set(f,y),B||Rxe(R,f,y,ne.state))),p&&E===null)throw Error(r(528,""));return ne}if(p&&E!==null)throw Error(r(529,""));return null;case"script":return p=y.async,y=y.src,typeof y=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Y0(y),y=Bo(R).hoistableScripts,E=y.get(p),E||(E={type:"script",instance:null,count:0,state:null},y.set(p,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,f))}}function W0(f){return'href="'+va(f)+'"'}function yb(f){return'link[rel="stylesheet"]['+f+"]"}function b$(f){return h({},f,{"data-precedence":f.precedence,precedence:null})}function Rxe(f,p,y,E){f.querySelector('link[rel="preload"][as="style"]['+p+"]")?E.loading=1:(p=f.createElement("link"),E.preload=p,p.addEventListener("load",function(){return E.loading|=1}),p.addEventListener("error",function(){return E.loading|=2}),ns(p,"link",y),Nr(p),f.head.appendChild(p))}function Y0(f){return'[src="'+va(f)+'"]'}function xb(f){return"script[async]"+f}function w$(f,p,y){if(p.count++,p.instance===null)switch(p.type){case"style":var E=f.querySelector('style[data-href~="'+va(y.href)+'"]');if(E)return p.instance=E,Nr(E),E;var R=h({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return E=(f.ownerDocument||f).createElement("style"),Nr(E),ns(E,"style",R),WS(E,y.precedence,f),p.instance=E;case"stylesheet":R=W0(y.href);var B=f.querySelector(yb(R));if(B)return p.state.loading|=4,p.instance=B,Nr(B),B;E=b$(y),(R=Na.get(R))&&j_(E,R),B=(f.ownerDocument||f).createElement("link"),Nr(B);var ne=B;return ne._p=new Promise(function(le,Ee){ne.onload=le,ne.onerror=Ee}),ns(B,"link",E),p.state.loading|=4,WS(B,y.precedence,f),p.instance=B;case"script":return B=Y0(y.src),(R=f.querySelector(xb(B)))?(p.instance=R,Nr(R),R):(E=y,(R=Na.get(B))&&(E=h({},y),D_(E,R)),f=f.ownerDocument||f,R=f.createElement("script"),Nr(R),ns(R,"link",E),f.head.appendChild(R),p.instance=R);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(E=p.instance,p.state.loading|=4,WS(E,y.precedence,f));return p.instance}function WS(f,p,y){for(var E=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=E.length?E[E.length-1]:null,B=R,ne=0;ne<E.length;ne++){var le=E[ne];if(le.dataset.precedence===p)B=le;else if(B!==R)break}B?B.parentNode.insertBefore(f,B.nextSibling):(p=y.nodeType===9?y.head:y,p.insertBefore(f,p.firstChild))}function j_(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.title==null&&(f.title=p.title)}function D_(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.integrity==null&&(f.integrity=p.integrity)}var YS=null;function E$(f,p,y){if(YS===null){var E=new Map,R=YS=new Map;R.set(y,E)}else R=YS,E=R.get(y),E||(E=new Map,R.set(y,E));if(E.has(f))return E;for(E.set(f,null),y=y.getElementsByTagName(f),R=0;R<y.length;R++){var B=y[R];if(!(B[fl]||B[Ct]||f==="link"&&B.getAttribute("rel")==="stylesheet")&&B.namespaceURI!=="http://www.w3.org/2000/svg"){var ne=B.getAttribute(p)||"";ne=f+ne;var le=E.get(ne);le?le.push(B):E.set(ne,[B])}}return E}function S$(f,p,y){f=f.ownerDocument||f,f.head.insertBefore(y,p==="title"?f.querySelector("head > title"):null)}function Oxe(f,p,y){if(y===1||p.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return f=p.disabled,typeof p.precedence=="string"&&f==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function A$(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}function Mxe(f,p,y,E){if(y.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var R=W0(E.href),B=p.querySelector(yb(R));if(B){p=B._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(f.count++,f=JS.bind(f),p.then(f,f)),y.state.loading|=4,y.instance=B,Nr(B);return}B=p.ownerDocument||p,E=b$(E),(R=Na.get(R))&&j_(E,R),B=B.createElement("link"),Nr(B);var ne=B;ne._p=new Promise(function(le,Ee){ne.onload=le,ne.onerror=Ee}),ns(B,"link",E),y.instance=B}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(y,p),(p=y.state.preload)&&(y.state.loading&3)===0&&(f.count++,y=JS.bind(f),p.addEventListener("load",y),p.addEventListener("error",y))}}var B_=0;function Lxe(f,p){return f.stylesheets&&f.count===0&&QS(f,f.stylesheets),0<f.count||0<f.imgCount?function(y){var E=setTimeout(function(){if(f.stylesheets&&QS(f,f.stylesheets),f.unsuspend){var B=f.unsuspend;f.unsuspend=null,B()}},6e4+p);0<f.imgBytes&&B_===0&&(B_=62500*mxe());var R=setTimeout(function(){if(f.waitingForImages=!1,f.count===0&&(f.stylesheets&&QS(f,f.stylesheets),f.unsuspend)){var B=f.unsuspend;f.unsuspend=null,B()}},(f.imgBytes>B_?50:800)+p);return f.unsuspend=y,function(){f.unsuspend=null,clearTimeout(E),clearTimeout(R)}}:null}function JS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)QS(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var XS=null;function QS(f,p){f.stylesheets=null,f.unsuspend!==null&&(f.count++,XS=new Map,p.forEach(jxe,f),XS=null,JS.call(f))}function jxe(f,p){if(!(p.state.loading&4)){var y=XS.get(f);if(y)var E=y.get(null);else{y=new Map,XS.set(f,y);for(var R=f.querySelectorAll("link[data-precedence],style[data-precedence]"),B=0;B<R.length;B++){var ne=R[B];(ne.nodeName==="LINK"||ne.getAttribute("media")!=="not all")&&(y.set(ne.dataset.precedence,ne),E=ne)}E&&y.set(null,E)}R=p.instance,ne=R.getAttribute("data-precedence"),B=y.get(ne)||E,B===E&&y.set(null,R),y.set(ne,R),this.count++,E=JS.bind(this),R.addEventListener("load",E),R.addEventListener("error",E),B?B.parentNode.insertBefore(R,B.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(R,f.firstChild)),p.state.loading|=4}}var vb={$$typeof:N,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Dxe(f,p,y,E,R,B,ne,le,Ee){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ae(0),this.hiddenUpdates=ae(null),this.identifierPrefix=E,this.onUncaughtError=R,this.onCaughtError=B,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function T$(f,p,y,E,R,B,ne,le,Ee,Be,Ye,rt){return f=new Dxe(f,p,y,ne,Ee,Be,Ye,rt,le),p=1,B===!0&&(p|=24),B=Fo(3,null,null,p),f.current=B,B.stateNode=f,p=y5(),p.refCount++,f.pooledCache=p,p.refCount++,B.memoizedState={element:E,isDehydrated:y,cache:p},w5(B),f}function k$(f){return f?(f=k0,f):k0}function N$(f,p,y,E,R,B){R=k$(R),E.context===null?E.context=R:E.pendingContext=R,E=hf(p),E.payload={element:y},B=B===void 0?null:B,B!==null&&(E.callback=B),y=pf(f,E,p),y!==null&&(wo(y,f,p),Xv(y,f,p))}function C$(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var y=f.retryLane;f.retryLane=y!==0&&y<p?y:p}}function U_(f,p){C$(f,p),(f=f.alternate)&&C$(f,p)}function P$(f){if(f.tag===13||f.tag===31){var p=tp(f,67108864);p!==null&&wo(p,f,67108864),U_(f,67108864)}}function _$(f){if(f.tag===13||f.tag===31){var p=qo();p=Ue(p);var y=tp(f,p);y!==null&&wo(y,f,p),U_(f,p)}}var ZS=!0;function Bxe(f,p,y,E){var R=j.T;j.T=null;var B=q.p;try{q.p=2,F_(f,p,y,E)}finally{q.p=B,j.T=R}}function Uxe(f,p,y,E){var R=j.T;j.T=null;var B=q.p;try{q.p=8,F_(f,p,y,E)}finally{q.p=B,j.T=R}}function F_(f,p,y,E){if(ZS){var R=$_(E);if(R===null)k_(f,p,E,eA,y),R$(f,E);else if($xe(R,f,p,y,E))E.stopPropagation();else if(R$(f,E),p&4&&-1<Fxe.indexOf(f)){for(;R!==null;){var B=ga(R);if(B!==null)switch(B.tag){case 3:if(B=B.stateNode,B.current.memoizedState.isDehydrated){var ne=rn(B.pendingLanes);if(ne!==0){var le=B;for(le.pendingLanes|=2,le.entangledLanes|=2;ne;){var Ee=1<<31-pe(ne);le.entanglements[1]|=Ee,ne&=~Ee}uc(B),(qn&6)===0&&(jS=it()+500,hb(0))}}break;case 31:case 13:le=tp(B,2),le!==null&&wo(le,B,2),BS(),U_(B,2)}if(B=$_(E),B===null&&k_(f,p,E,eA,y),B===R)break;R=B}R!==null&&E.stopPropagation()}else k_(f,p,E,null,y)}}function $_(f){return f=VP(f),z_(f)}var eA=null;function z_(f){if(eA=null,f=ma(f),f!==null){var p=s(f);if(p===null)f=null;else{var y=p.tag;if(y===13){if(f=o(p),f!==null)return f;f=null}else if(y===31){if(f=a(p),f!==null)return f;f=null}else if(y===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null)}}return eA=f,null}function I$(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lt()){case Ie:return 2;case Ge:return 8;case Tt:case xt:return 32;case se:return 268435456;default:return 32}default:return 32}}var V_=!1,Tf=null,kf=null,Nf=null,bb=new Map,wb=new Map,Cf=[],Fxe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R$(f,p){switch(f){case"focusin":case"focusout":Tf=null;break;case"dragenter":case"dragleave":kf=null;break;case"mouseover":case"mouseout":Nf=null;break;case"pointerover":case"pointerout":bb.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":wb.delete(p.pointerId)}}function Eb(f,p,y,E,R,B){return f===null||f.nativeEvent!==B?(f={blockedOn:p,domEventName:y,eventSystemFlags:E,nativeEvent:B,targetContainers:[R]},p!==null&&(p=ga(p),p!==null&&P$(p)),f):(f.eventSystemFlags|=E,p=f.targetContainers,R!==null&&p.indexOf(R)===-1&&p.push(R),f)}function $xe(f,p,y,E,R){switch(p){case"focusin":return Tf=Eb(Tf,f,p,y,E,R),!0;case"dragenter":return kf=Eb(kf,f,p,y,E,R),!0;case"mouseover":return Nf=Eb(Nf,f,p,y,E,R),!0;case"pointerover":var B=R.pointerId;return bb.set(B,Eb(bb.get(B)||null,f,p,y,E,R)),!0;case"gotpointercapture":return B=R.pointerId,wb.set(B,Eb(wb.get(B)||null,f,p,y,E,R)),!0}return!1}function O$(f){var p=ma(f.target);if(p!==null){var y=s(p);if(y!==null){if(p=y.tag,p===13){if(p=o(y),p!==null){f.blockedOn=p,ut(f.priority,function(){_$(y)});return}}else if(p===31){if(p=a(y),p!==null){f.blockedOn=p,ut(f.priority,function(){_$(y)});return}}else if(p===3&&y.stateNode.current.memoizedState.isDehydrated){f.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}f.blockedOn=null}function tA(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var y=$_(f.nativeEvent);if(y===null){y=f.nativeEvent;var E=new y.constructor(y.type,y);zP=E,y.target.dispatchEvent(E),zP=null}else return p=ga(y),p!==null&&P$(p),f.blockedOn=y,!1;p.shift()}return!0}function M$(f,p,y){tA(f)&&y.delete(p)}function zxe(){V_=!1,Tf!==null&&tA(Tf)&&(Tf=null),kf!==null&&tA(kf)&&(kf=null),Nf!==null&&tA(Nf)&&(Nf=null),bb.forEach(M$),wb.forEach(M$)}function nA(f,p){f.blockedOn===p&&(f.blockedOn=null,V_||(V_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zxe)))}var rA=null;function L$(f){rA!==f&&(rA=f,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){rA===f&&(rA=null);for(var p=0;p<f.length;p+=3){var y=f[p],E=f[p+1],R=f[p+2];if(typeof E!="function"){if(z_(E||y)===null)continue;break}var B=ga(y);B!==null&&(f.splice(p,3),p-=3,$5(B,{pending:!0,data:R,method:y.method,action:E},E,R))}}))}function J0(f){function p(Ee){return nA(Ee,f)}Tf!==null&&nA(Tf,f),kf!==null&&nA(kf,f),Nf!==null&&nA(Nf,f),bb.forEach(p),wb.forEach(p);for(var y=0;y<Cf.length;y++){var E=Cf[y];E.blockedOn===f&&(E.blockedOn=null)}for(;0<Cf.length&&(y=Cf[0],y.blockedOn===null);)O$(y),y.blockedOn===null&&Cf.shift();if(y=(f.ownerDocument||f).$$reactFormReplay,y!=null)for(E=0;E<y.length;E+=3){var R=y[E],B=y[E+1],ne=R[wn]||null;if(typeof B=="function")ne||L$(y);else if(ne){var le=null;if(B&&B.hasAttribute("formAction")){if(R=B,ne=B[wn]||null)le=ne.formAction;else if(z_(R)!==null)continue}else le=ne.action;typeof le=="function"?y[E+1]=le:(y.splice(E,3),E-=3),L$(y)}}}function j$(){function f(B){B.canIntercept&&B.info==="react-transition"&&B.intercept({handler:function(){return new Promise(function(ne){return R=ne})},focusReset:"manual",scroll:"manual"})}function p(){R!==null&&(R(),R=null),E||setTimeout(y,20)}function y(){if(!E&&!navigation.transition){var B=navigation.currentEntry;B&&B.url!=null&&navigation.navigate(B.url,{state:B.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var E=!1,R=null;return navigation.addEventListener("navigate",f),navigation.addEventListener("navigatesuccess",p),navigation.addEventListener("navigateerror",p),setTimeout(y,100),function(){E=!0,navigation.removeEventListener("navigate",f),navigation.removeEventListener("navigatesuccess",p),navigation.removeEventListener("navigateerror",p),R!==null&&(R(),R=null)}}}function H_(f){this._internalRoot=f}iA.prototype.render=H_.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(r(409));var y=p.current,E=qo();N$(y,E,f,p,null,null)},iA.prototype.unmount=H_.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;N$(f.current,2,null,f,null,null),BS(),p[pa]=null}};function iA(f){this._internalRoot=f}iA.prototype.unstable_scheduleHydration=function(f){if(f){var p=Kt();f={blockedOn:null,target:f,priority:p};for(var y=0;y<Cf.length&&p!==0&&p<Cf[y].priority;y++);Cf.splice(y,0,f),y===0&&O$(f)}};var D$=e.version;if(D$!=="19.2.3")throw Error(r(527,D$,"19.2.3"));q.findDOMNode=function(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=c(p),f=f!==null?d(f):null,f=f===null?null:f.stateNode,f};var Vxe={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sA.isDisabled&&sA.supportsFiber)try{ue=sA.inject(Vxe),Se=sA}catch{}}return Tb.createRoot=function(f,p){if(!i(f))throw Error(r(299));var y=!1,E="",R=HF,B=qF,ne=GF;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(R=p.onUncaughtError),p.onCaughtError!==void 0&&(B=p.onCaughtError),p.onRecoverableError!==void 0&&(ne=p.onRecoverableError)),p=T$(f,1,!1,null,null,y,E,null,R,B,ne,j$),f[pa]=p.current,T_(f),new H_(p)},Tb.hydrateRoot=function(f,p,y){if(!i(f))throw Error(r(299));var E=!1,R="",B=HF,ne=qF,le=GF,Ee=null;return y!=null&&(y.unstable_strictMode===!0&&(E=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onUncaughtError!==void 0&&(B=y.onUncaughtError),y.onCaughtError!==void 0&&(ne=y.onCaughtError),y.onRecoverableError!==void 0&&(le=y.onRecoverableError),y.formState!==void 0&&(Ee=y.formState)),p=T$(f,1,!0,p,y??null,E,R,Ee,B,ne,le,j$),p.context=k$(null),y=p.current,E=qo(),E=Ue(E),R=hf(E),R.callback=null,pf(y,R,E),y=E,p.current.lanes=y,Q(p,y),uc(p),f[pa]=p.current,T_(f),new iA(p)},Tb.version="19.2.3",Tb}var W$;function hve(){if(W$)return Y_.exports;W$=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Y_.exports=fve(),Y_.exports}var pve=hve();const mve=bs(pve),gve="modulepreload",yve=function(t){return"/"+t},Y$={},ko=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(n.map(c=>{if(c=yve(c),c in Y$)return;Y$[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":gve,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var _c=function(){return _c=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_c.apply(this,arguments)};function Xx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xve(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function vve(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}const bve=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class rD extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class wve extends rD{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class J$ extends rD{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class X$ extends rD{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var AO;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(AO||(AO={}));class Eve{constructor(e,{headers:n={},customFetch:r,region:i=AO.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=bve(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return xve(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:d,timeout:h}=r;let m={},{region:g}=r;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let x;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",x=c):typeof c=="string"?(m["Content-Type"]="text/plain",x=c):typeof FormData<"u"&&c instanceof FormData?x=c:(m["Content-Type"]="application/json",x=JSON.stringify(c)):x=c;let b=d;h&&(o=new AbortController,s=setTimeout(()=>o.abort(),h),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const w=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:x,signal:b}).catch(D=>{throw new wve(D)}),k=w.headers.get("x-relay-error");if(k&&k==="true")throw new J$(w);if(!w.ok)throw new X$(w);let N=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),O;return N==="application/json"?O=yield w.json():N==="application/octet-stream"||N==="application/pdf"?O=yield w.blob():N==="text/event-stream"?O=w:N==="multipart/form-data"?O=yield w.formData():O=yield w.text(),{data:O,error:null,response:w}}catch(a){return{data:null,error:a,response:a instanceof X$||a instanceof J$?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var Sve=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Ave=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,a=null,l=null,c=s.status,d=s.statusText;if(s.ok){var h,m;if(n.method!=="HEAD"){var g;const w=await s.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?a=w:a=JSON.parse(w))}const x=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(m=s.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");x&&b&&b.length>1&&(l=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,d="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var v;const x=await s.text();try{o=JSON.parse(x),Array.isArray(o)&&s.status===404&&(a=[],o=null,c=200,d="OK")}catch{s.status===404&&x===""?(c=204,d="No Content"):o={message:x}}if(o&&n.isMaybeSingle&&(!(o==null||(v=o.details)===null||v===void 0)&&v.includes("0 rows"))&&(o=null,c=200,d="OK"),o&&n.shouldThrowOnError)throw new Sve(o)}return{error:o,data:a,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let a="";const l=s==null?void 0:s.cause;if(l){var c,d,h,m;const v=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",x=(d=l==null?void 0:l.code)!==null&&d!==void 0?d:"";a=`${(h=s==null?void 0:s.name)!==null&&h!==void 0?h:"FetchError"}: ${s==null?void 0:s.message}`,a+=`

Caused by: ${(m=l==null?void 0:l.name)!==null&&m!==void 0?m:"Error"}: ${v}`,x&&(a+=` (${x})`),l!=null&&l.stack&&(a+=`
${l.stack}`)}else{var g;a=(g=s==null?void 0:s.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},Tve=class extends Ave{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${a};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Q$=new RegExp("[,()]");var Cg=class extends Tve{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Q$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Q$.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},kve=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Cg({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((o,a)=>o.concat(Object.keys(a)),[]);if(s.length>0){const o=[...new Set(s)].map(a=>`"${a}"`);this.url.searchParams.set("columns",o.join(","))}}return new Cg({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Cg({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Cg({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Cg({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Nve=class dte{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new kve(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new dte(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{l.searchParams.append(h,m)})):(a="POST",c=n);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new Cg({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Cve{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof ql<"u"){const n=ql.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Pve="2.89.0",_ve=`realtime-js/${Pve}`,fte="1.0.0",Ive="2.0.0",Z$=fte,TO=1e4,Rve=1e3,Ove=100;var Wf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Wf||(Wf={}));var Ci;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ci||(Ci={}));var jl;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(jl||(jl={}));var kO;(function(t){t.websocket="websocket"})(kO||(kO={}));var Rp;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Rp||(Rp={}));class Mve{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),x=0;v.setUint8(x++,this.KINDS.userBroadcastPush),v.setUint8(x++,l.length),v.setUint8(x++,a.length),v.setUint8(x++,o.length),v.setUint8(x++,c.length),v.setUint8(x++,h.length),v.setUint8(x++,n),Array.from(l,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(a,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(o,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(c,w=>v.setUint8(x++,w.charCodeAt(0))),Array.from(h,w=>v.setUint8(x++,w.charCodeAt(0)));var b=new Uint8Array(g.byteLength+r.byteLength);return b.set(new Uint8Array(g),0),b.set(new Uint8Array(r),g.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+s));l=l+s;const h=r.decode(e.slice(l,l+o));l=l+o;const m=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,v={type:this.BROADCAST_EVENT,event:d,payload:g};return o>0&&(v.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class hte{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(mr||(mr={}));const ez=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=Lve(o,t,e,i),s),{}):{}},Lve=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?pte(s,o):NO(o)},pte=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Uve(e,n)}switch(t){case mr.bool:return jve(e);case mr.float4:case mr.float8:case mr.int2:case mr.int4:case mr.int8:case mr.numeric:case mr.oid:return Dve(e);case mr.json:case mr.jsonb:return Bve(e);case mr.timestamp:return Fve(e);case mr.abstime:case mr.date:case mr.daterange:case mr.int4range:case mr.int8range:case mr.money:case mr.reltime:case mr.text:case mr.time:case mr.timestamptz:case mr.timetz:case mr.tsrange:case mr.tstzrange:return NO(e);default:return NO(e)}},NO=t=>t,jve=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Dve=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Bve=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Uve=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>pte(e,a))}return t},Fve=t=>typeof t=="string"?t.replace(" ","T"):t,mte=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Z_{constructor(e,n,r={},i=TO){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tz;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tz||(tz={}));class p1{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=p1.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=p1.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=p1.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const h=s[c];if(h){const m=d.map(b=>b.presence_ref),g=h.map(b=>b.presence_ref),v=d.filter(b=>g.indexOf(b.presence_ref)<0),x=h.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(a[c]=v),x.length>0&&(l[c]=x)}else a[c]=d}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(g=>g.presence_ref),m=d.filter(g=>h.indexOf(g.presence_ref)<0);e[a].unshift(...m)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nz;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(nz||(nz={}));var m1;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(m1||(m1={}));var Fu;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Fu||(Fu={}));class Ug{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ci.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Z_(this,jl.join,this.params,this.timeout),this.rejoinTimer=new hte(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ci.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ci.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ci.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ci.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ci.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jl.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new p1(this),this.broadcastEndpointURL=mte(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ci.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[m1.PRESENCE]&&this.bindings[m1.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Fu.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Fu.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(Fu.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,w=[];for(let k=0;k<b;k++){const N=x[k],{filter:{event:O,schema:D,table:_,filter:F}}=N,z=g&&g[k];if(z&&z.event===O&&Ug.isFilterValueEqual(z.schema,D)&&Ug.isFilterValueEqual(z.table,_)&&Ug.isFilterValueEqual(z.filter,F))w.push(Object.assign(Object.assign({},N),{id:z.id}));else{this.unsubscribe(),this.state=Ci.errored,e==null||e(Fu.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Fu.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ci.errored,e==null||e(Fu.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Fu.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ci.joined&&e===m1.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ci.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jl.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Z_(this,jl.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ci.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Z_(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ove){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=jl;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,x,b;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(x=g.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var v,x,b,w,k,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const O=g.id,D=(v=g.filter)===null||v===void 0?void 0:v.event;return O&&((x=n.ids)===null||x===void 0?void 0:x.includes(O))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const O=(k=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return O==="*"||O===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:x,table:b,commit_timestamp:w,type:k,errors:N}=v;m=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:w,eventType:k,new:{},old:{},errors:N}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===Ci.closed}_isJoined(){return this.state===Ci.joined}_isJoining(){return this.state===Ci.joining}_isLeaving(){return this.state===Ci.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Ug.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(jl.close,{},e)}_onError(e){this._on(jl.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ci.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ez(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ez(e.columns,e.old_record)),n}}const eI=()=>{},oA={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$ve=[1e3,2e3,5e3,1e4],zve=1e4,Vve=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Hve{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=TO,this.transport=null,this.heartbeatIntervalMs=oA.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eI,this.ref=0,this.reconnectTimer=null,this.vsn=Z$,this.logger=eI,this.conn=null,this.sendBuffer=[],this.serializer=new Mve,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${kO.websocket}`,this.httpEndpoint=mte(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Cve.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wf.connecting:return Rp.Connecting;case Wf.open:return Rp.Open;case Wf.closing:return Rp.Closing;default:return Rp.Closed}}isConnected(){return this.connectionState()===Rp.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Ug(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Rve,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},oA.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Wf.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Wf.open||this.conn.readyState===Wf.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(jl.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Vve],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:_ve};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(jl.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new hte(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},oA.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,d,h,m,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:TO,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:oA.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:eI,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Z$,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(v=>$ve[v-1]||zve),this.vsn){case fte:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:((v,x)=>x(JSON.stringify(v))),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:((v,x)=>x(JSON.parse(v)));break;case Ive:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var _1=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function qve(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function Gve(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Kve(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=qve(t.baseUrl,r,i),l=await Gve(t.auth),c=await e(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),m=h&&d?JSON.parse(d):d;if(!c.ok){const g=h?m:void 0,v=g==null?void 0:g.error;throw new _1((v==null?void 0:v.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:c.status,headers:c.headers,data:m}}}}function aA(t){return t.join("")}var Wve=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:aA(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aA(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aA(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aA(t.namespace)}`}),!0}catch(e){if(e instanceof _1&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof _1&&n.status===409)return;throw n}}};function Q0(t){return t.join("")}var Yve=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Q0(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Q0(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Q0(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Q0(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Q0(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Q0(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof _1&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof _1&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Jve=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Kve({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Wve(this.client,e),this.tableOps=new Yve(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},NN=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Dr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Xve=class extends NN{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},CO=class extends NN{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const iD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Qve=()=>Response,PO=t=>{if(Array.isArray(t))return t.map(n=>PO(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=PO(r)}),e},Zve=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ebe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function I1(t){"@babel/helpers - typeof";return I1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I1(t)}function tbe(t,e){if(I1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(I1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nbe(t){var e=tbe(t,"string");return I1(e)=="symbol"?e:e+""}function rbe(t,e,n){return(e=nbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rz(Object(n),!0).forEach(function(r){rbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const tI=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},ibe=async(t,e,n)=>{t instanceof await Qve()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,s=(r==null?void 0:r.statusCode)||i+"";e(new Xve(tI(r),i,s))}).catch(r=>{e(new CO(tI(r),r))}):e(new CO(tI(t),t))},sbe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Zve(r)?(i.headers=Zt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Zt(Zt({},i),n))};async function Yw(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,sbe(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ibe(l,a,r))})}async function R1(t,e,n,r){return Yw(t,"GET",e,n,r)}async function Cl(t,e,n,r,i){return Yw(t,"POST",e,r,i,n)}async function _O(t,e,n,r,i){return Yw(t,"PUT",e,r,i,n)}async function obe(t,e,n,r){return Yw(t,"HEAD",e,Zt(Zt({},n),{},{noResolveJson:!0}),r)}async function sD(t,e,n,r,i){return Yw(t,"DELETE",e,r,i,n)}var abe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Dr(e))return{data:null,error:e};throw e}}};let gte;gte=Symbol.toStringTag;var lbe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[gte]="BlobDownloadBuilder",this.promise=null}asStream(){return new abe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Dr(e))return{data:null,error:e};throw e}}};const cbe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iz={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ube=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=iD(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const o=Zt(Zt({},iz),r);let a=Zt(Zt({},i.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=Zt(Zt({},a),r.headers));const c=i._removeEmptyFolders(e),d=i._getFinalPath(c),h=await(t=="PUT"?_O:Cl)(i.fetch,`${i.url}/object/${d}`,s,Zt({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Dr(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),o=i._getFinalPath(s),a=new URL(i.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const c=Zt({upsert:iz.upsert},r),d=Zt(Zt({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:s,fullPath:(await _O(i.fetch,a.toString(),l,{headers:d})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Dr(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=Zt({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await Cl(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(n.url+s.url),a=o.searchParams.get("token");if(!a)throw new NN("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Cl(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await Cl(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await Cl(r.fetch,`${r.url}/object/sign/${i}`,Zt({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await Cl(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Zt(Zt({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),o=()=>R1(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new lbe(o,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:PO(await R1(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await obe(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Dr(r)&&r instanceof CO){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${a}`)}}}async remove(t){var e=this;try{return{data:await sD(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=Zt(Zt(Zt({},cbe),e),{},{prefix:t||""});return{data:await Cl(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Dr(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=Zt({},t);return{data:await Cl(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof un<"u"?un.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const yte="2.89.0",xte={"X-Client-Info":`storage-js/${yte}`};var dbe=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Zt(Zt({},xte),e),this.fetch=iD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await R1(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await R1(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Cl(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await _O(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Dr(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Cl(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await sD(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},fbe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Zt(Zt({},xte),e),this.fetch=iD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Cl(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await R1(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await sD(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Dr(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!ebe(t))throw new NN("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Jve({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(i,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const oD={"X-Client-Info":`storage-js/${yte}`,"Content-Type":"application/json"};var vte=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function sa(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var nI=class extends vte{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},hbe=class extends vte{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const aD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),pbe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},sz=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),mbe=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const o=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";e(new nI(sz(s),r,o))}).catch(()=>{const s=r+"";e(new nI(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new nI(i.statusText||`HTTP ${r} error`,r,s))}}else e(new hbe(sz(t),t))},gbe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(pbe(r)?(i.headers=Zt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Zt(Zt({},i),n)):i};async function ybe(t,e,n,r,i,s){return new Promise((o,a)=>{t(n,gbe(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>mbe(l,a,r))})}async function oa(t,e,n,r,i){return ybe(t,"POST",e,r,i,n)}var xbe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Zt(Zt({},oD),e),this.fetch=aD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await oa(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await oa(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(sa(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await oa(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await oa(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(sa(r))return{data:null,error:r};throw r}}},vbe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Zt(Zt({},oD),e),this.fetch=aD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await oa(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await oa(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await oa(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await oa(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await oa(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}},bbe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Zt(Zt({},oD),e),this.fetch=aD(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await oa(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await oa(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await oa(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await oa(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(sa(n))return{data:null,error:n};throw n}}},wbe=class extends bbe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Ebe(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},Ebe=class extends xbe{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Zt(Zt({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Zt(Zt({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new Sbe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Sbe=class extends vbe{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Zt(Zt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Zt(Zt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Zt(Zt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Zt(Zt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Zt(Zt({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Abe=class extends dbe{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new ube(this.url,this.headers,t,this.fetch)}get vectors(){return new wbe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fbe(this.url+"/iceberg",this.headers,this.fetch)}};const bte="2.89.0",Pg=30*1e3,IO=3,rI=IO*Pg,Tbe="http://localhost:9999",kbe="supabase.auth.token",Nbe={"X-Client-Info":`gotrue-js/${bte}`},RO="X-Supabase-Api-Version",wte={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Cbe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Pbe=600*1e3;class O1 extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Vt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class _be extends O1{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Ibe(t){return Vt(t)&&t.name==="AuthApiError"}class Op extends O1{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Fd extends O1{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Go extends Fd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Rbe(t){return Vt(t)&&t.name==="AuthSessionMissingError"}class Z0 extends Fd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class lA extends Fd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cA extends Fd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Obe(t){return Vt(t)&&t.name==="AuthImplicitGrantRedirectError"}class oz extends Fd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mbe extends Fd{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class OO extends Fd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function iI(t){return Vt(t)&&t.name==="AuthRetryableFetchError"}class az extends Fd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class MO extends Fd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const aT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lz=` 	
\r=`.split(""),Lbe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<lz.length;e+=1)t[lz[e].charCodeAt(0)]=-2;for(let e=0;e<aT.length;e+=1)t[aT[e].charCodeAt(0)]=e;return t})();function cz(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(aT[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(aT[r]),e.queuedBits-=6}}function Ete(t,e,n){const r=Lbe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uz(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{Bbe(o,r,n)};for(let o=0;o<t.length;o+=1)Ete(t.charCodeAt(o),i,s);return e.join("")}function jbe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Dbe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}jbe(r,e)}}function Bbe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function sy(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Ete(t.charCodeAt(i),n,r);return new Uint8Array(e)}function Ube(t){const e=[];return Dbe(t,n=>e.push(n)),new Uint8Array(e)}function Fp(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>cz(i,n,r)),cz(null,n,r),e.join("")}function Fbe(t){return Math.round(Date.now()/1e3)+t}function $be(){return Symbol("auth-callback")}const os=()=>typeof window<"u"&&typeof document<"u",pp={tested:!1,writable:!1},Ste=()=>{if(!os())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pp.tested)return pp.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),pp.tested=!0,pp.writable=!0}catch{pp.tested=!0,pp.writable=!1}return pp.writable};function zbe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Ate=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Vbe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",_g=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},mp=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rs=async(t,e)=>{await t.removeItem(e)};class CN{constructor(){this.promise=new CN.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}CN.promiseConstructor=Promise;function sI(t){const e=t.split(".");if(e.length!==3)throw new MO("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Cbe.test(e[r]))throw new MO("JWT not in base64url format");return{header:JSON.parse(uz(e[0])),payload:JSON.parse(uz(e[1])),signature:sy(e[2]),raw:{header:e[0],payload:e[1]}}}async function Hbe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function qbe(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Gbe(t){return("0"+t.toString(16)).substr(-2)}function Kbe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Gbe).join("")}async function Wbe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Ybe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Wbe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function eg(t,e,n=!1){const r=Kbe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await _g(t,`${e}-code-verifier`,i);const s=await Ybe(r);return[s,r===s?"plain":"s256"]}const Jbe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xbe(t){const e=t.headers.get(RO);if(!e||!e.match(Jbe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Qbe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Zbe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const e1e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function tg(t){if(!e1e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function oI(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function t1e(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function dz(t){return JSON.parse(JSON.stringify(t))}const Sp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),n1e=[502,503,504];async function fz(t){var e;if(!Vbe(t))throw new OO(Sp(t),0);if(n1e.includes(t.status))throw new OO(Sp(t),t.status);let n;try{n=await t.json()}catch(s){throw new Op(Sp(s),s)}let r;const i=Xbe(t);if(i&&i.getTime()>=wte["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new az(Sp(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Go}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new az(Sp(n),t.status,n.weak_password.reasons);throw new _be(Sp(n),t.status||500,r)}const r1e=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Qt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[RO]||(s[RO]=wte["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await i1e(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function i1e(t,e,n,r,i,s){const o=r1e(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new OO(Sp(l),0)}if(a.ok||await fz(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await fz(l)}}function El(t){var e;let n=null;a1e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Fbe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function hz(t){const e=El(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function eh(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function s1e(t){return{data:t,error:null}}function o1e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=Xx(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function pz(t){return t}function a1e(t){return t.access_token&&t.refresh_token&&t.expires_in}const aI=["global","local","others"];class l1e{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Ate(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=aI[0]){if(aI.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${aI.join(", ")}`);try{return await Qt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:eh})}catch(r){if(Vt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Xx(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:o1e,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Vt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Qt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:eh})}catch(n){if(Vt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await Qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:pz});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=x}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Vt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){tg(e);try{return await Qt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:eh})}catch(n){if(Vt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){tg(e);try{return await Qt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:eh})}catch(r){if(Vt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){tg(e);try{return await Qt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:eh})}catch(r){if(Vt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){tg(e.userId);try{const{data:n,error:r}=await Qt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){tg(e.userId),tg(e.id);try{return{data:await Qt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await Qt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:pz});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);c[`${b}Page`]=x}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(Vt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Qt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Qt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Qt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Vt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Qt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Qt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Vt(n))return{data:null,error:n};throw n}}}function mz(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ng={debug:!!(globalThis&&Ste()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tte extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class c1e extends Tte{}async function u1e(t,e,n){ng.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ng.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ng.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ng.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ng.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new c1e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ng.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function d1e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function kte(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function f1e(t){return parseInt(t,16)}function h1e(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function p1e(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:h,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=kte(t.address),v=d?`${d}://${r}`:r,x=t.statement?`${t.statement}
`:"",b=`${v} wants you to sign in with your Ethereum account:
${g}

${x}`;let w=`URI: ${h}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(w+=`
Expiration Time: ${i.toISOString()}`),a&&(w+=`
Not Before: ${a.toISOString()}`),l&&(w+=`
Request ID: ${l}`),c){let k=`
Resources:`;for(const N of c){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);k+=`
- ${N}`}w+=k}return`${b}
${w}`}class mi extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class lT extends mi{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function m1e({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new mi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new mi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new mi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new mi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new mi({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new mi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new mi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Nte(o)){if(s.rp.id!==o)return new mi({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new mi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new mi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function g1e({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new mi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new mi({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Nte(r)){if(n.rpId!==r)return new mi({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new mi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class y1e{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const x1e=new y1e;function v1e(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Xx(t,["challenge","user","excludeCredentials"]),s=sy(e).buffer,o=Object.assign(Object.assign({},n),{id:sy(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:sy(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function b1e(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Xx(t,["challenge","allowCredentials"]),i=sy(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:sy(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function w1e(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Fp(new Uint8Array(t.response.attestationObject)),clientDataJSON:Fp(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function E1e(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Fp(new Uint8Array(i.authenticatorData)),clientDataJSON:Fp(new Uint8Array(i.clientDataJSON)),signature:Fp(new Uint8Array(i.signature)),userHandle:i.userHandle?Fp(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Nte(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function gz(){var t,e;return!!(os()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function S1e(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lT("Browser returned unexpected credential type",e)}:{data:null,error:new lT("Empty credential response",e)}}catch(e){return{data:null,error:m1e({error:e,options:t})}}}async function A1e(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lT("Browser returned unexpected credential type",e)}:{data:null,error:new lT("Empty credential response",e)}}catch(e){return{data:null,error:g1e({error:e,options:t})}}}const T1e={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},k1e={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function cT(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=cT(a,o):r[s]=cT(o)}else r[s]=o}return r}function N1e(t,e){return cT(T1e,t,e||{})}function C1e(t,e){return cT(k1e,t,e||{})}class P1e{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??x1e.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=N1e(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:h}=await S1e({publicKey:c,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=C1e(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:h}=await A1e(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return Vt(o)?{data:null,error:o}:{data:null,error:new Op("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new O1("rpId is required for WebAuthn authentication")};try{if(!gz())return{data:null,error:new Op("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Vt(o)?{data:null,error:o}:{data:null,error:new Op("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new O1("rpId is required for WebAuthn registration")};try{if(!gz())return{data:null,error:new Op("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return Vt(o)?{data:null,error:o}:{data:null,error:new Op("Unexpected error in register",o)}}}}d1e();const _1e={url:Tbe,storageKey:kbe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Nbe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function yz(t,e,n){return await n()}const rg={};class M1{get jwks(){var e,n;return(n=(e=rg[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){rg[this.storageKey]=Object.assign(Object.assign({},rg[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=rg[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){rg[this.storageKey]=Object.assign(Object.assign({},rg[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},_1e),e);if(this.storageKey=s.storageKey,this.instanceID=(n=M1.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,M1.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&os()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new l1e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ate(s.fetch),this.lock=s.lock||yz,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&os()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=u1e:this.lock=yz,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new P1e(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Ste()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mz(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=mz(this.memoryStorage)),os()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${bte}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(os()&&(n=zbe(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),os()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Obe(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Vt(n)?this._returnResult({error:n}):this._returnResult({error:new Op("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:El}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Vt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:d,password:h,options:m}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await eg(this.storage,this.storageKey)),s=await Qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:El})}else if("phone"in e){const{phone:d,password:h,options:m}=e;s=await Qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:El})}else throw new lA("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await rs(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Vt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hz})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hz})}else throw new lA("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Z0;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Vt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,d,h,m;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:x,wallet:b,statement:w,options:k}=e;let N;if(os())if(typeof b=="object")N=b;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")N=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=b}const O=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href),D=await N.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=kte(D[0]);let F=(r=k==null?void 0:k.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!F){const L=await N.request({method:"eth_chainId"});F=f1e(L)}const z={domain:O.host,address:_,statement:w,uri:O.href,version:"1",chainId:F,nonce:(i=k==null?void 0:k.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=k==null?void 0:k.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=k==null?void 0:k.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=k==null?void 0:k.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=k==null?void 0:k.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=k==null?void 0:k.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=p1e(z),v=await N.request({method:"personal_sign",params:[h1e(g),_]})}try{const{data:x,error:b}=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:El});if(b)throw b;if(!x||!x.session||!x.user){const w=new Z0;return this._returnResult({data:{user:null,session:null},error:w})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:b})}catch(x){if(Vt(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,d,h,m,g;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:b,wallet:w,statement:k,options:N}=e;let O;if(os())if(typeof w=="object")O=w;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))O=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=w}const D=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const _=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),k?{statement:k}:null));let F;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")F=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)F=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)v=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),x=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${D.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=N==null?void 0:N.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((h=(d=N==null?void 0:N.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...N.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const _=await O.signMessage(new TextEncoder().encode(v),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=_}}try{const{data:b,error:w}=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Fp(x)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:El});if(w)throw w;if(!b||!b.session||!b.user){const k=new Z0;return this._returnResult({data:{user:null,session:null},error:k})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:w})}catch(b){if(Vt(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await mp(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Mbe;const{data:s,error:o}=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:El});if(await rs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new Z0;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Vt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:El}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new Z0;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(Vt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await eg(this.storage,this.storageKey));const{error:h}=await Qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await Qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new lA("You must provide either an email or phone number.")}catch(a){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Vt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:El});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Vt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await eg(this.storage,this.storageKey));const c=await Qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:s1e});return!((s=c.data)===null||s===void 0)&&s.url&&os()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Vt(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Go;const{error:i}=await Qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Vt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Qt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Qt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new lA("You must provide either an email or phone number and a type")}catch(n){if(Vt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await mp(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<rI:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await mp(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=oI()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=t1e(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:eh}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Go}:await Qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:eh})})}catch(n){if(Vt(n))return Rbe(n)&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Go;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await eg(this.storage,this.storageKey));const{data:c,error:d}=await Qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:eh});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Vt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Go;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=sI(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Vt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Go;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Vt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!os())throw new cA("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cA(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new oz("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cA("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oz("No code detected.");const{data:k,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new cA("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let m=d+h;l&&(m=parseInt(l));const g=m-d;g*1e3<=Pg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:x,error:b}=await this._getUser(s);if(b)throw b;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:m,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:e.type},error:null})}catch(r){if(Vt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await mp(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Ibe(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=$be(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await eg(this.storage,this.storageKey,!0));try{return await Qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Vt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Vt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,d;const{data:h,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Qt(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return os()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Vt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:d}=e,h=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:El}),{data:m,error:g}=h;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Z0}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Vt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Qt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Vt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await qbe(async i=>(i>0&&await Hbe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:El})),(i,s)=>{const o=200*Math.pow(2,i);return s&&iI(s)&&Date.now()+o-r<Pg})}catch(r){if(this._debug(n,"error",r),Vt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),os()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await mp(this.storage,this.storageKey);if(i&&this.userStorage){let o=await mp(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await _g(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:oI()}else if(i&&!i.user&&!i.user){const o=await mp(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await rs(this.storage,this.storageKey+"-user"),await _g(this.storage,this.storageKey,i)):i.user=oI()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rI;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${rI}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),iI(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Go;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new CN;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Go;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Vt(s)){const o={data:null,error:s};return iI(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await rs(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await _g(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=dz(i);await _g(this.storage,this.storageKey,s)}else{const i=dz(n);await _g(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rs(this.storage,this.storageKey),await rs(this.storage,this.storageKey+"-code-verifier"),await rs(this.storage,this.storageKey+"-user"),this.userStorage&&await rs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&os()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Pg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Pg}ms, refresh threshold is ${IO} ticks`),i<=IO&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Tte)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!os()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await eg(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await Qt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Vt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Qt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Vt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?w1e(e.webauthn.credential_response):E1e(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await Qt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(Vt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await Qt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:v1e(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:b1e(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Vt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=sI(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Qt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Go})})}catch(n){if(Vt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Go});const o=await Qt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&os()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Go});const o=await Qt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&os()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Qt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Go})})}catch(e){if(Vt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Qt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Go})})}catch(n){if(Vt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Pbe>i)return r;const{data:s,error:o}=await Qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=sI(r);n!=null&&n.allowExpired||Qbe(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const d=Zbe(i.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,Ube(`${a}.${l}`)))throw new MO("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Vt(r))return this._returnResult({data:null,error:r});throw r}}}M1.nextInstanceID={};const I1e=M1,R1e="2.89.0";let Xb="";typeof Deno<"u"?Xb="deno":typeof document<"u"?Xb="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xb="react-native":Xb="node";const O1e={"X-Client-Info":`supabase-js-${Xb}/${R1e}`},M1e={headers:O1e},L1e={schema:"public"},j1e={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},D1e={};function L1(t){"@babel/helpers - typeof";return L1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L1(t)}function B1e(t,e){if(L1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(L1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U1e(t){var e=B1e(t,"string");return L1(e)=="symbol"?e:e+""}function F1e(t,e,n){return(e=U1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xz(Object(n),!0).forEach(function(r){F1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const $1e=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),z1e=()=>Headers,V1e=(t,e,n)=>{const r=$1e(n),i=z1e();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Wr(Wr({},o),{},{headers:c}))}};function H1e(t){return t.endsWith("/")?t:t+"/"}function q1e(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:h}=e,m={db:Wr(Wr({},l),i),auth:Wr(Wr({},c),s),realtime:Wr(Wr({},d),o),storage:{},global:Wr(Wr(Wr({},h),a),{},{headers:Wr(Wr({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function G1e(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(H1e(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var K1e=class extends I1e{constructor(t){super(t)}},W1e=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=G1e(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,a={db:L1e,realtime:D1e,auth:Wr(Wr({},j1e),{},{storageKey:o}),global:M1e},l=q1e(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=V1e(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Wr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Nve(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Abe(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Eve(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:o,lock:a,debug:l,throwOnError:c},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new K1e({url:this.authUrl.href,headers:Wr(Wr({},m),d),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:o,lock:a,debug:l,throwOnError:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Hve(this.realtimeUrl.href,Wr(Wr({},t),{},{params:Wr(Wr({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Cte=(t,e,n)=>new W1e(t,e,n);function Y1e(){if(typeof window<"u"||typeof ql>"u")return!1;const t=ql.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Y1e()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function Pte(){return{url:"https://rhkkqojnaiyrxmiiykay.supabase.co",anonKey:"sb_publishable_Kd3ZVGh8x-DOQs8gEuVxYQ_tX2sBfpA"}}let uT=null;async function J1e(){if(uT)return!0;const t=Pte();if(!t.url||!t.anonKey)return console.error("[Supabase] Cannot initialize: missing configuration"),!1;try{return uT=Cte(t.url,t.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),!0}catch(e){return console.error("[Supabase] Initialization failed:",e),!1}}function ds(){return uT||console.warn("[Supabase] Client not initialized. Call initializeSupabase() first."),uT}function X1e(){const t=Pte();return!!(t.url&&t.anonKey)}function ig(t){var e,n,r;return t?{id:t.id,email:t.email||null,displayName:((e=t.user_metadata)==null?void 0:e.full_name)||((n=t.email)==null?void 0:n.split("@")[0])||null,photoURL:((r=t.user_metadata)==null?void 0:r.avatar_url)||null,emailVerified:t.email_confirmed_at!==null,createdAt:t.created_at}:null}class Q1e{constructor(){this.currentUser=null,this.listeners=[]}getUser(){return this.currentUser}onAuthStateChange(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}async signInWithGoogle(){return this.signInWithProvider("google",{queryParams:{access_type:"offline",prompt:"consent"}})}async signInWithGitHub(){return this.signInWithProvider("github",{scopes:"read:user user:email"})}async signInWithDiscord(){return this.signInWithProvider("discord",{scopes:"identify email"})}async signInWithProvider(e,n){const r=ds();if(!r)throw console.error("[Auth] Supabase client not initialized"),new Error("Supabase not initialized");console.log(`[Auth] Starting sign in with ${e}...`,n);try{const{data:i,error:s}=await r.auth.signInWithOAuth({provider:e,options:{redirectTo:window.location.origin,scopes:n==null?void 0:n.scopes,queryParams:n==null?void 0:n.queryParams,skipBrowserRedirect:!1}});if(s)throw console.error(`[Auth] Error signing in with ${e}:`,s),s;return console.log(`[Auth] params for ${e} sign in initiated`,i),this.currentUser}catch(i){throw console.error(`[Auth] Unexpected error during ${e} sign in:`,i),i}}async signInWithEthereum(){const e=ds();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.ethereum)throw new Error("No Ethereum wallet detected. Please install MetaMask or another Web3 wallet.");const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"ethereum",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=ig(n.user),this.notifyListeners(),this.currentUser}async signInWithSolana(){const e=ds();if(!e)throw new Error("Supabase not initialized");if(typeof window<"u"&&!window.solana)throw new Error("No Solana wallet detected. Please install Phantom or another Solana wallet.");try{await window.solana.connect()}catch{throw new Error("Failed to connect to Solana wallet")}const{data:n,error:r}=await e.auth.signInWithWeb3({chain:"solana",statement:"I accept the AutonomousVault Terms of Service"});if(r)throw r;return this.currentUser=ig(n.user),this.notifyListeners(),this.currentUser}async signInWithEmail(e,n){const r=ds();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signInWithPassword({email:e,password:n});if(s)throw s;return this.currentUser=ig(i.user),this.notifyListeners(),this.currentUser}async signUp(e,n){const r=ds();if(!r)throw new Error("Supabase not initialized");const{data:i,error:s}=await r.auth.signUp({email:e,password:n});if(s)throw s;return this.currentUser=ig(i.user),this.notifyListeners(),this.currentUser}async logout(){const e=ds();if(!e)throw new Error("Supabase not initialized");const{error:n}=await e.auth.signOut();if(n)throw n;this.currentUser=null,this.notifyListeners()}async deleteAccount(){var r;const e=ds();if(!e)throw new Error("Supabase not initialized");const{data:{user:n}}=await e.auth.getUser();if(!n)throw new Error("Not authenticated");try{const{StorageService:i}=await ko(async()=>{const{StorageService:s}=await Promise.resolve().then(()=>nwe);return{StorageService:s}},void 0);await i.clearUserData(n.id),console.log("[Auth] Local storage cleared")}catch(i){console.warn("[Auth] Failed to clear local storage:",i)}try{const{error:i}=await e.rpc("delete_user");if(i)throw console.warn("[Auth] RPC delete_user not available, signing out only:",i.message),await this.logout(),new Error("Account deletion requires admin action. Please contact support or delete via Supabase dashboard.")}catch(i){throw(r=i.message)!=null&&r.includes("contact support")?i:(await this.logout(),new Error("Account deletion failed. You have been signed out. Please contact support to complete account deletion."))}this.currentUser=null,this.notifyListeners(),console.log("[Auth] Account deleted successfully")}async initialize(){const e=ds();if(!e){console.warn("[SupabaseAuth] Cannot initialize: client not available");return}e.auth.onAuthStateChange((r,i)=>{this.currentUser=i?ig(i.user):null,this.notifyListeners()});const{data:{session:n}}=await e.auth.getSession();this.currentUser=n?ig(n.user):null,this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>{try{e(this.currentUser)}catch(n){console.error("[SupabaseAuth] Listener error:",n)}})}getUserId(){var e;return((e=this.currentUser)==null?void 0:e.id)||null}isAuthenticated(){return this.currentUser!==null}async getAccessToken(){const e=ds();if(!e)return null;const{data:{session:n}}=await e.auth.getSession();return(n==null?void 0:n.access_token)||null}}const Ca=new Q1e;function r0(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Z1e(t,e){let n;const r=()=>{if(n)return n;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),n=r0(i),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(i,s)=>r().then(o=>s(o.transaction(e,i).objectStore(e)))}let lI;function Jw(){return lI||(lI=Z1e("keyval-store","keyval")),lI}function cI(t,e=Jw()){return e("readonly",n=>r0(n.get(t)))}function uI(t,e,n=Jw()){return n("readwrite",r=>(r.put(e,t),r0(r.transaction)))}function dI(t,e=Jw()){return e("readwrite",n=>(n.delete(t),r0(n.transaction)))}function ewe(t=Jw()){return t("readwrite",e=>(e.clear(),r0(e.transaction)))}function twe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},r0(t.transaction)}function vz(t=Jw()){return t("readonly",e=>{if(e.getAllKeys)return r0(e.getAllKeys());const n=[];return twe(e,r=>n.push(r.key)).then(()=>n)})}const WB=class WB{static setUserId(e){console.log(`[StorageService] User context set to: ${e?e.substring(0,8)+"...":"null"}`),this.currentUserId=e}static getUserId(){return this.currentUserId}static getUserKey(e){return this.currentUserId?`${e}_${this.currentUserId}`:(console.warn(`[StorageService] No user context set! Using global key for: ${e}`),e)}static async getItem(e){try{return await cI(e)}catch(n){return console.error(`[StorageService] Failed to get item ${e}:`,n),null}}static async setItem(e,n){try{await uI(e,n)}catch(r){console.error(`[StorageService] Failed to set item ${e}:`,r)}}static async removeItem(e){try{await dI(e)}catch(n){console.error(`[StorageService] Failed to remove item ${e}:`,n)}}static async clear(){try{await ewe()}catch(e){console.error("[StorageService] Failed to clear storage:",e)}}static async clearUserData(e){try{const n=await vz(),r=`_${e}`,i=n.filter(s=>typeof s=="string"&&s.endsWith(r));console.log(`[StorageService] Clearing ${i.length} keys for user ${e.substring(0,8)}...`);for(const s of i)await dI(s);console.log("[StorageService] User data cleared.")}catch(n){console.error("[StorageService] Failed to clear user data:",n)}}static async migrateFromLocalStorage(){console.log("[StorageService] Checking for legacy localStorage data...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","agent_chat_history","agent_chat_sessions","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_dealer_settings"];let n=0;for(const r of e){const i=localStorage.getItem(r);if(i)try{await uI(r,i),console.log(`[StorageService] Migrated key: ${r}`),n++}catch(s){console.error(`[StorageService] Failed to migrate key ${r}:`,s)}}if(n>0){console.log(`[StorageService] Migration complete. Moved ${n} items.`);for(const r of e)localStorage.removeItem(r);console.log("[StorageService] Legacy localStorage keys cleared.")}else console.log("[StorageService] No legacy data found to migrate.")}static async migrateToUserScoped(){if(!this.currentUserId){console.warn("[StorageService] Cannot migrate to user-scoped: no userId set");return}console.log("[StorageService] Checking for unscoped IndexedDB data to migrate...");const e=["agent_vault_pubkey","agent_vault_enc","agent_owner_pubkey","agent_hl_vault_pubkey","agent_hl_vault_enc","agent_hl_owner_pubkey","agent_pm_vault_pubkey","agent_pm_vault_enc","agent_pm_owner_pubkey","vault_dealer_strategy","agent_activity_log","agent_scheduler_tasks","agent_conversations_metadata","vault_dealer_storage","vault_polymarket_storage","ai_config_store","vault_balance_history","token_usage_store"],r=(await vz()).filter(o=>typeof o=="string"&&o.startsWith("agent_conversation_")&&!o.includes("_"+this.currentUserId)),i=[...e,...r];let s=0;for(const o of i)try{const a=await cI(o);if(a){const l=`${o}_${this.currentUserId}`;await cI(l)||(await uI(l,a),console.log(`[StorageService] Migrated to user-scoped: ${o} -> ${l}`),s++),await dI(o)}}catch(a){console.error(`[StorageService] Failed to migrate key ${o}:`,a)}s>0?console.log(`[StorageService] User-scoped migration complete. Moved ${s} items.`):console.log("[StorageService] No unscoped data found to migrate.")}};WB.currentUserId=null;let Ae=WB;const nwe=Object.freeze(Object.defineProperty({__proto__:null,StorageService:Ae},Symbol.toStringTag,{value:"Module"})),rwe={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},_te={gemini:{providerType:"gemini",apiKey:"",isConfigured:!1},openai:{providerType:"openai",apiKey:"",isConfigured:!1},claude:{providerType:"claude",apiKey:"",isConfigured:!1}},Ite={operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}},fI={credentials:_te,componentConfigs:Ite},bz="ai_config_store";class iwe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=fI,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){if(!this.isInitialized){if(!Ae.getUserId()){console.log("[AIConfigStore] No user context yet, skipping initial load"),this.isInitialized=!0;return}await this.loadFromStorage(),this.isInitialized=!0,this.notifyListeners()}}async reload(){console.log("[AIConfigStore] Reloading from storage..."),await this.loadFromStorage(),this.notifyListeners()}reset(){console.log("[AIConfigStore] Resetting to initial state..."),this.state={...fI},this.notifyListeners()}async loadFromStorage(){try{const e=await Ae.getItem(Ae.getUserKey(bz));if(e){const n=JSON.parse(e);this.state={...fI,...n,credentials:{..._te,...n.credentials},componentConfigs:{...Ite,...n.componentConfigs}},console.log("[AIConfigStore] Loaded credentials from storage")}}catch(e){console.error("Failed to load AI config state:",e)}}async waitForInit(){this.initPromise&&await this.initPromise}async saveState(){try{await Ae.setItem(Ae.getUserKey(bz),JSON.stringify(this.state))}catch(e){console.error("Failed to save AI config state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}setApiKey(e,n){this.state={...this.state,credentials:{...this.state.credentials,[e]:{providerType:e,apiKey:n,isConfigured:n.trim().length>0}}},this.notify()}getApiKey(e){return this.state.credentials[e].apiKey}clearApiKey(e){this.setApiKey(e,"")}isProviderConfigured(e){return this.state.credentials[e].isConfigured}getConfiguredProviders(){return Object.entries(this.state.credentials).filter(([e,n])=>n.isConfigured).map(([e,n])=>e)}setComponentConfig(e,n){return this.state.credentials[n.providerType].isConfigured?rwe[n.providerType].find(i=>i.id===n.modelId)?(this.state={...this.state,componentConfigs:{...this.state.componentConfigs,[e]:n}},this.notify(),!0):(console.warn(`Invalid model ${n.modelId} for provider ${n.providerType}`),!1):(console.warn(`Cannot set ${e} to use ${n.providerType}: API key not configured`),!1)}getComponentConfig(e){return this.state.componentConfigs[e]}getComponentProvider(e){return this.state.componentConfigs[e].providerType}getComponentModel(e){return this.state.componentConfigs[e].modelId}getComponentApiKey(e){const n=this.getComponentProvider(e);return this.getApiKey(n)}isComponentConfigValid(e){const n=this.state.componentConfigs[e];return this.state.credentials[n.providerType].isConfigured}getInvalidComponents(){return Object.keys(this.state.componentConfigs).filter(e=>!this.isComponentConfigValid(e))}}const An=new iwe,PN={trend:{name:"Trend / Structure",color:"purple",icon:"TrendingUp",maxIndicators:2,indicators:["ema","sma","adx","ichimoku"],description:"Market direction and trend strength"},momentum:{name:"Momentum",color:"blue",icon:"Activity",maxIndicators:2,indicators:["rsi","macd","stoch"],description:"Entry/exit timing and divergences"},volume:{name:"Volume",color:"green",icon:"BarChart2",maxIndicators:1,indicators:["obv","vwap"],description:"Move confirmation with participation"},volatility:{name:"Volatility / Risk",color:"orange",icon:"Zap",maxIndicators:1,indicators:["atr","bollinger"],description:"Risk context and market regime"}},Rte=5,pd={balanced:{name:"Balanced",description:"Trend + Momentum + Timing + Risk",emoji:"",indicators:["ema","rsi","macd","atr"],marketCondition:"uncertain or mixed signals"},scalp:{name:"Scalp Momentum",description:"Fast entries, frequent trades (5m-15m)",emoji:"",indicators:["ema","rsi","stoch","vwap"],marketCondition:"high volatility with quick reversals"},trendFollowing:{name:"Trend Following",description:"Sustained movements (15m-1h)",emoji:"",indicators:["ema","sma","adx","macd"],marketCondition:"strong directional trend"},meanReversion:{name:"Mean Reversion",description:"Range / Lateral markets",emoji:"",indicators:["bollinger","rsi","stoch","vwap"],marketCondition:"ranging or sideways market"},volumeConfirm:{name:"Volume Confirmation",description:"Avoid fake breakouts",emoji:"",indicators:["ema","rsi","obv","vwap"],marketCondition:"breakout scenarios or unusual volume"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",indicators:[],marketCondition:"user-defined"}},LO={balanced:`You are Hyperliquid Dealer, an autonomous trading engine.
Your goal is to identify balanced trading opportunities using a combination of indicators.

RULES:
1. Use EMA for trend confirmation, RSI for timing, MACD for momentum, and ATR for risk management.
2. Enter LONG when: EMA points UP + RSI < 40 + MACD histogram positive.
3. Enter SHORT when: EMA points DOWN + RSI > 60 + MACD histogram negative.
4. Stop Loss: Position at 1.5x ATR from entry price.
5. Take Profit: Target 2x risk (1:2 ratio).
6. HOLD if indicators give conflicting signals.`,scalp:`You are Hyperliquid Dealer, a high-frequency scalping engine.
Your goal is to capture quick price movements (5m-15m) in volatile markets.

RULES:
1. Use EMA(9) for immediate direction, RSI for entry, Stoch for confirmation, VWAP as support/resistance.
2. LONG: Price above VWAP + RSI < 35 + Stoch crossing up.
3. SHORT: Price below VWAP + RSI > 65 + Stoch crossing down.
4. Quick trades: Target 0.3-0.5% profit per trade.
5. Tight stop: 0.5% maximum.
6. AVOID trades during low volatility.`,trendFollowing:`You are Hyperliquid Dealer, specialized in following strong trends.
Your goal is to ride sustained directional movements (15m-1h).

RULES:
1. Use EMA/SMA to confirm trend, ADX for strength, MACD for timing.
2. ONLY enter when ADX > 25 (strong trend).
3. LONG: EMA(20) > SMA(50) + ADX > 25 + MACD positive.
4. SHORT: EMA(20) < SMA(50) + ADX > 25 + MACD negative.
5. Let profits run: Trailing stop at 2x ATR.
6. HOLD in sideways markets (ADX < 20).`,meanReversion:`You are Hyperliquid Dealer, specialized in mean reversion.
Your goal is to trade ranging/sideways markets, buying dips and selling tops.

RULES:
1. Use Bollinger Bands for extremes, RSI for oversold/overbought, Stoch for confirmation, VWAP as anchor.
2. LONG: Price touches lower Bollinger + RSI < 30 + Stoch < 20.
3. SHORT: Price touches upper Bollinger + RSI > 70 + Stoch > 80.
4. Target: Return to mean (Bollinger middle or VWAP).
5. Stop: Outside the opposite band.
6. AVOID trading when Bollinger expands (breakout).`,volumeConfirm:`You are Hyperliquid Dealer with focus on volume confirmation.
Your goal is to avoid false breakouts by only trading with volume confirmation.

RULES:
1. Use EMA for trend, RSI for timing, OBV for volume flow, VWAP for institutional levels.
2. LONG: EMA up + RSI < 45 + OBV making higher highs + price above VWAP.
3. SHORT: EMA down + RSI > 55 + OBV making lower lows + price below VWAP.
4. Volume is KING: No OBV confirmation = no trade.
5. Breakouts: Only enter if volume > 1.5x average.
6. HOLD if OBV diverges from price (possible reversal signal).`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a conservative trader focused on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`},oy={rsi:{enabled:!0,params:{period:14},weight:1},macd:{enabled:!0,params:{fast:12,slow:26,signal:9},weight:1},bollinger:{enabled:!1,params:{period:20,stdDev:2},weight:1},atr:{enabled:!0,params:{period:14},weight:1},adx:{enabled:!1,params:{period:14},weight:1},obv:{enabled:!1,params:{},weight:1},vwap:{enabled:!1,params:{},weight:1},ichimoku:{enabled:!1,params:{conversion:9,base:26,spanB:52,displacement:26},weight:1},ema:{enabled:!0,params:{period:20},weight:1},sma:{enabled:!1,params:{period:20},weight:1},stoch:{enabled:!1,params:{period:14,signalPeriod:3},weight:1}},swe=LO.balanced,Ote={strategyPrompt:swe,aggressiveMode:!1,maxLeverage:5,maxPositionSizeUSDC:50,maxOpenPositions:3,bankrollType:"MANUAL",manualBankroll:100,tradingPairs:["BTC","ETH","SOL"],checkIntervalSeconds:300,analysisTimeframe:"60",historyCandles:30,macroTimeframeEnabled:!1,macroTimeframe:"240",macroEnabledIndicators:["rsi","macd","ema"],indicatorSettings:oy,autonomousIndicators:!1,selectedPreset:"balanced",promptMode:"preset",stopLossEnabled:!1,stopLossPercent:null,takeProfitEnabled:!1,takeProfitPercent:null},hI={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",executionMode:"local",currentTask:null,currentSignal:null,trendAssessment:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:Ote,logs:[],operationHistory:[]};class owe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=hI,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[DealerStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[DealerStore] Resetting to initial state..."),this.state={...hI},this.notifyListeners()}async loadState(){var e,n;try{const r=await Ae.getItem(Ae.getUserKey("vault_dealer_storage"));if(r){const i=JSON.parse(r);let s=((e=i.settings)==null?void 0:e.indicatorSettings)||oy;const o={};for(const a of Object.keys(oy)){const l=s[a],c=oy[a];o[a]={enabled:(l==null?void 0:l.enabled)??c.enabled,params:(l==null?void 0:l.params)??c.params,weight:(l==null?void 0:l.weight)??1}}this.state={...hI,...i,settings:{...Ote,...i.settings||{},indicatorSettings:o,selectedPreset:((n=i.settings)==null?void 0:n.selectedPreset)||"balanced"},isAnalyzing:!1,pendingExecution:!1,logs:i.logs||[]}}}catch(r){console.error("Failed to load dealer state:",r)}}async saveState(){try{await Ae.setItem(Ae.getUserKey("vault_dealer_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save dealer state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Dealer Activated":"Dealer Stopped"},this.addLog("INFO",`Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,trendAssessment:r!==void 0?r:this.state.trendAssessment,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,trendAssessment:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","System reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.cloid===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e,n=10,r=!0){let i=this.state.operationHistory;e&&(i=i.filter(a=>a.coin.toUpperCase()===e.toUpperCase()));const s=r?this.state.logs.filter(a=>a.type==="REASONING"||a.type==="TRADE"||a.type==="SIGNAL"):[];return{operations:i.slice(0,n).map(a=>{var c,d;const l=s.find(h=>h.message.includes(a.coin)&&Math.abs(h.timestamp-a.timestamp)<6e4);return{...a,fullReasoning:((c=l==null?void 0:l.details)==null?void 0:c.fullReason)||a.reasoning,analysisContext:(d=l==null?void 0:l.details)==null?void 0:d.context}}),totalOperations:i.length,recentLogs:s.slice(0,5)}}}const yt=new owe,awe=[{value:"politics",label:"Politics",icon:""},{value:"crypto",label:"Crypto",icon:""},{value:"sports",label:"Sports",icon:""},{value:"pop-culture",label:"Pop Culture",icon:""},{value:"science",label:"Science",icon:""},{value:"business",label:"Business",icon:""},{value:"other",label:"Other",icon:""}],g1={balanced:{name:"Balanced",description:"Trade across all categories with balanced risk",emoji:"",categories:["politics","crypto","business","science"],marketCondition:"diverse markets with good liquidity"},highVolume:{name:"High Volume",description:"Focus on most liquid markets",emoji:"",categories:["politics","crypto","sports"],marketCondition:"high volume markets with tight spreads"},crypto:{name:"Crypto Focus",description:"Only cryptocurrency-related markets",emoji:"",categories:["crypto"],marketCondition:"crypto market events and predictions"},conservative:{name:"Conservative",description:"Low risk, high confidence trades only",emoji:"",categories:["politics","business"],marketCondition:"stable markets with clear probable outcomes"},custom:{name:"Custom",description:"Your custom configuration",emoji:"",categories:[],marketCondition:"user-defined"}},dT={balanced:`You are Polymarket Dealer, an autonomous prediction market trading engine.
Your goal is to identify high-probability trading opportunities across diverse markets.

RULES:
1. Analyze market question, current probability, volume, and time to resolution.
2. BUY YES when probability is undervalued (market < 40% but your analysis suggests > 60%).
3. BUY NO when probability is overvalued (market > 60% but your analysis suggests < 40%).
4. SELL positions when probability has moved 15%+ in your favor OR if new information changes thesis.
5. AVOID markets with < $10k liquidity or < 7 days to resolution (unless very high confidence).
6. Max position: 5% of bankroll per market.
7. HOLD if confidence < 65%.`,highVolume:`You are Polymarket Dealer, focused on liquid markets with high volume.
Your goal is to trade actively in markets with the best liquidity and tightest spreads.

RULES:
1. Only trade markets with > $50k volume in 24h.
2. Target spreads < 5% for entries and exits.
3. Look for momentum: price moving in a direction with increasing volume.
4. Use smaller positions (2% max) but trade more frequently.
5. Take profits quickly: exit at 10%+ gain.
6. Cut losses at 8%.
7. AVOID low-liquidity markets even if edge seems large.`,crypto:`You are Polymarket Dealer, specialized in cryptocurrency prediction markets.
Your goal is to leverage crypto market knowledge for prediction market alpha.

RULES:
1. Trade only crypto-related markets (price predictions, ETF approvals, protocol events).
2. Use your understanding of crypto market dynamics and sentiment.
3. BUY YES on bullish crypto catalysts you believe are underpriced.
4. BUY NO when crypto hype seems overextended.
5. Watch for correlation with actual crypto prices.
6. Higher conviction trades allowed (up to 8% of bankroll).
7. AVOID markets about specific coins you lack knowledge of.`,conservative:`You are Polymarket Dealer, taking a conservative low-risk approach.
Your goal is to identify very high probability trades with minimal downside.

RULES:
1. Only trade when confidence > 80%.
2. Focus on markets where outcome seems nearly certain (price > 85% or < 15%).
3. Look for arbitrage opportunities and mispriced markets.
4. Small position sizes (max 3% of bankroll).
5. AVOID volatile markets or those with incoming news catalysts.
6. Prefer longer time horizons (> 30 days to resolution).
7. HOLD cash if no clear opportunities.`,custom:`// Write your custom strategy instructions here...
// Example:
// You are a specialized Polymarket trader.
// 1. Focus on political markets only.
// 2. Trade based on polling data and historical patterns.
// 3. Never risk more than 2% per trade.`},lwe=dT.balanced,Mte={strategyPrompt:lwe,marketSelectionMode:"AI_DISCOVERY",selectedMarkets:[],allowedCategories:["politics","crypto","business","science"],maxPositionSizeUSDC:50,maxOpenPositions:5,minLiquidity:1e4,minVolume24h:5e3,minVolumeThreshold:5e3,minLiquidityThreshold:1e4,minSpreadThreshold:.02,confidenceThreshold:.6,bankrollType:"MANUAL",manualBankroll:100,checkIntervalSeconds:300,promptMode:"preset",selectedPreset:"balanced"},pI={isOn:!1,isAnalyzing:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",currentTask:null,currentSignal:null,analysisNote:"Waiting for data...",pendingExecution:!1,currentExposure:0,activePositions:[],portfolioValue:0,lastSyncTimestamp:0,settings:Mte,logs:[],operationHistory:[]};class cwe{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=pI,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async reloadFromStorage(){console.log("[PolymarketStore] Reloading from storage..."),await this.loadState(),this.notifyListeners()}reset(){console.log("[PolymarketStore] Resetting to initial state..."),this.state={...pI},this.notifyListeners()}async loadState(){try{const e=Ae.getUserKey("vault_polymarket_storage");console.log("[PolymarketStore] Loading from key:",e);const n=await Ae.getItem(e);if(n){const r=JSON.parse(n);console.log("[PolymarketStore] Loaded settings:",r.settings),this.state={...pI,...r,settings:{...Mte,...r.settings||{}},isAnalyzing:!1,pendingExecution:!1,logs:r.logs||[]}}else console.log("[PolymarketStore] No saved data found")}catch(e){console.error("Failed to load Polymarket state:",e)}}async saveState(){try{await Ae.setItem(Ae.getUserKey("vault_polymarket_storage"),JSON.stringify(this.state))}catch(e){console.error("Failed to save Polymarket state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}toggleDealer(e){this.state={...this.state,isOn:e,statusMessage:e?"Polymarket Dealer Activated":"Polymarket Dealer Stopped"},this.addLog("INFO",`Polymarket Dealer turned ${e?"ON":"OFF"}`),this.notify()}updateSettings(e){this.state={...this.state,settings:{...this.state.settings,...e}},this.addLog("INFO","Polymarket settings updated"),this.notify()}setStrategyPrompt(e){this.updateSettings({strategyPrompt:e})}setAnalyzing(e){this.state={...this.state,isAnalyzing:e},this.notify()}setCurrentTask(e){this.state={...this.state,currentTask:e},this.notify()}setStatusMessage(e){this.state={...this.state,statusMessage:e},this.notify()}setStatusDetail(e){this.state={...this.state,statusDetail:e},this.notify()}setAnalysisNote(e){this.state={...this.state,analysisNote:e},this.notify()}setCurrentSignal(e){this.state={...this.state,currentSignal:e},this.notify()}updateStatus(e,n,r,i,s){this.state={...this.state,currentTask:e!==void 0?e:this.state.currentTask,currentSignal:n!==void 0?n:this.state.currentSignal,analysisNote:r!==void 0?r:this.state.analysisNote,currentExposure:i!==void 0?i:this.state.currentExposure,statusDetail:s!==void 0?s:this.state.statusDetail},this.notify()}updatePortfolioState(e,n,r){this.state={...this.state,activePositions:e,portfolioValue:n,currentExposure:r,lastSyncTimestamp:Date.now()},this.notify()}addLog(e,n,r){const s=[{id:Date.now().toString()+Math.random().toString().slice(2,5),timestamp:Date.now(),type:e,message:n,details:r},...this.state.logs].slice(0,100);this.state={...this.state,logs:s},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}reload(){this.state={...this.state,isAnalyzing:!1,currentTask:null,currentSignal:null,pendingExecution:!1,analysisNote:"Reset by user",statusMessage:"Settings Applied"},this.addLog("INFO","Polymarket system reloaded manually"),this.notify()}addOperationRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,5)},...this.state.operationHistory].slice(0,50);this.state={...this.state,operationHistory:r},this.notify()}updateOperationStatus(e,n){const r=this.state.operationHistory.map(i=>i.id===e?{...i,...n}:i);this.state={...this.state,operationHistory:r},this.notify()}getTradeHistory(e=10,n=!0){let r=this.state.operationHistory;const i=n?this.state.logs.filter(o=>o.type==="REASONING"||o.type==="TRADE"||o.type==="SIGNAL"):[];return{operations:r.slice(0,e).map(o=>{var l,c;const a=i.find(d=>d.message.includes(o.question.slice(0,30))&&Math.abs(d.timestamp-o.timestamp)<6e4);return{...o,fullReasoning:((l=a==null?void 0:a.details)==null?void 0:l.fullReason)||o.reasoning,analysisContext:(c=a==null?void 0:a.details)==null?void 0:c.context}}),totalOperations:r.length,recentLogs:i.slice(0,5)}}}const ht=new cwe,Lte=S.createContext(void 0);function Xw(){const t=S.useContext(Lte);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function wz(t){return t?{uid:t.id,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified}:null}function uwe({children:t}){const[e,n]=S.useState(null),[r,i]=S.useState(!0);S.useEffect(()=>{(async()=>{if(!X1e()){console.warn("[AuthContext] Supabase not configured. Auth will not work until configured."),i(!1);return}await J1e(),await Ca.initialize();const w=wz(Ca.getUser());n(w),Ae.setUserId((w==null?void 0:w.uid)||null),w!=null&&w.uid&&(await Ae.migrateToUserScoped(),await An.reload(),await yt.reloadFromStorage(),await ht.reloadFromStorage()),i(!1)})();const b=Ca.onAuthStateChange(async w=>{const k=wz(w);n(k),Ae.setUserId((k==null?void 0:k.uid)||null),k!=null&&k.uid?(await Ae.migrateToUserScoped(),await An.reload(),await yt.reloadFromStorage(),await ht.reloadFromStorage()):(yt.reset(),ht.reset())});return()=>b()},[]);const v={user:e,loading:r,signInWithGoogle:async()=>{try{await Ca.signInWithGoogle()}catch(x){throw console.error("Google sign-in error:",x),x}},signInWithGitHub:async()=>{try{await Ca.signInWithGitHub()}catch(x){throw console.error("GitHub sign-in error:",x),x}},signInWithDiscord:async()=>{try{await Ca.signInWithDiscord()}catch(x){throw console.error("Discord sign-in error:",x),x}},signInWithEthereum:async()=>{try{await Ca.signInWithEthereum()}catch(x){throw console.error("Ethereum sign-in error:",x),x}},signInWithSolana:async()=>{try{await Ca.signInWithSolana()}catch(x){throw console.error("Solana sign-in error:",x),x}},signInWithEmail:async(x,b)=>{try{await Ca.signInWithEmail(x,b)}catch(w){throw console.error("Email sign-in error:",w),w}},signUp:async(x,b)=>{try{await Ca.signUp(x,b)}catch(w){throw console.error("Sign-up error:",w),w}},logout:async()=>{try{await Ca.logout()}catch(x){throw console.error("Logout error:",x),x}},deleteAccount:async()=>{try{await Ca.deleteAccount()}catch(x){throw console.error("Delete account error:",x),x}}};return u.jsx(Lte.Provider,{value:v,children:t})}var be=(t=>(t.DASHBOARD="dashboard",t.VAULT="vault",t.AGENT="agent",t.SCHEDULER="scheduler",t.HYPERLIQUID="hyperliquid",t.VAULT_DEALER="vault_dealer",t.DEALER_DASHBOARD="dealer_dashboard",t.DEALER_THINKING="dealer_thinking",t.DEALER_CONFIG="dealer_config",t.DEALER_PROMPT="dealer_prompt",t.CONFIGURATION="configuration",t.SETTINGS="settings",t.HISTORY="history",t.TOKEN_COSTS="token_costs",t.POLYMARKET_DEALER="polymarket_dealer",t.POLYMARKET_DASHBOARD="polymarket_dashboard",t.POLYMARKET_THINKING="polymarket_thinking",t.POLYMARKET_CONFIG="polymarket_config",t.POLYMARKET_PROMPT="polymarket_prompt",t.SOLANA_DEALER="solana_dealer",t.SOLANA_DEALER_DASHBOARD="solana_dealer_dashboard",t.SOLANA_DEALER_THINKING="solana_dealer_thinking",t.SOLANA_DEALER_POLICY="solana_dealer_policy",t.SOLANA_DEALER_LOG="solana_dealer_log",t.PRIVACY="privacy",t.TERMS="terms",t))(be||{});const lD=S.createContext({});function cD(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const uD=typeof window<"u",jte=uD?S.useLayoutEffect:S.useEffect,_N=S.createContext(null);function dD(t,e){t.indexOf(e)===-1&&t.push(e)}function fD(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const bd=(t,e,n)=>n>e?e:n<t?t:n;let hD=()=>{};const wd={},Dte=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Bte(t){return typeof t=="object"&&t!==null}const Ute=t=>/^0[^.\s]+$/u.test(t);function pD(t){let e;return()=>(e===void 0&&(e=t()),e)}const nl=t=>t,dwe=(t,e)=>n=>e(t(n)),Qw=(...t)=>t.reduce(dwe),j1=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class mD{constructor(){this.subscriptions=[]}add(e){return dD(this.subscriptions,e),()=>fD(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Bc=t=>t*1e3,el=t=>t/1e3;function Fte(t,e){return e?t*(1e3/e):0}const $te=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,fwe=1e-7,hwe=12;function pwe(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=$te(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>fwe&&++a<hwe);return o}function Zw(t,e,n,r){if(t===e&&n===r)return nl;const i=s=>pwe(s,0,1,t,n);return s=>s===0||s===1?s:$te(i(s),e,r)}const zte=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Vte=t=>e=>1-t(1-e),Hte=Zw(.33,1.53,.69,.99),gD=Vte(Hte),qte=zte(gD),Gte=t=>(t*=2)<1?.5*gD(t):.5*(2-Math.pow(2,-10*(t-1))),yD=t=>1-Math.sin(Math.acos(t)),Kte=Vte(yD),Wte=zte(yD),mwe=Zw(.42,0,1,1),gwe=Zw(0,0,.58,1),Yte=Zw(.42,0,.58,1),ywe=t=>Array.isArray(t)&&typeof t[0]!="number",Jte=t=>Array.isArray(t)&&typeof t[0]=="number",xwe={linear:nl,easeIn:mwe,easeInOut:Yte,easeOut:gwe,circIn:yD,circInOut:Wte,circOut:Kte,backIn:gD,backInOut:qte,backOut:Hte,anticipate:Gte},vwe=t=>typeof t=="string",Ez=t=>{if(Jte(t)){hD(t.length===4);const[e,n,r,i]=t;return Zw(e,n,r,i)}else if(vwe(t))return xwe[t];return t},uA=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function bwe(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(d){o.has(d)&&(c.schedule(d),t()),d(a)}const c={schedule:(d,h=!1,m=!1)=>{const v=m&&i?n:r;return h&&o.add(d),v.has(d)||v.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(d))}};return c}const wwe=40;function Xte(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=uA.reduce((N,O)=>(N[O]=bwe(s),N),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:m,render:g,postRender:v}=o,x=()=>{const N=wd.useManualTiming?i.timestamp:performance.now();n=!1,wd.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,wwe),1)),i.timestamp=N,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),d.process(i),h.process(i),m.process(i),g.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},b=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:uA.reduce((N,O)=>{const D=o[O];return N[O]=(_,F=!1,z=!1)=>(n||b(),D.schedule(_,F,z)),N},{}),cancel:N=>{for(let O=0;O<uA.length;O++)o[uA[O]].cancel(N)},state:i,steps:o}}const{schedule:Ir,cancel:Nh,state:cs,steps:mI}=Xte(typeof requestAnimationFrame<"u"?requestAnimationFrame:nl,!0);let N2;function Ewe(){N2=void 0}const Po={now:()=>(N2===void 0&&Po.set(cs.isProcessing||wd.useManualTiming?cs.timestamp:performance.now()),N2),set:t=>{N2=t,queueMicrotask(Ewe)}},Qte=t=>e=>typeof e=="string"&&e.startsWith(t),Zte=Qte("--"),Swe=Qte("var(--"),xD=t=>Swe(t)?Awe.test(t.split("/*")[0].trim()):!1,Awe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Qx={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},D1={...Qx,transform:t=>bd(0,1,t)},dA={...Qx,default:1},y1=t=>Math.round(t*1e5)/1e5,vD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Twe(t){return t==null}const kwe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bD=(t,e)=>n=>!!(typeof n=="string"&&kwe.test(n)&&n.startsWith(t)||e&&!Twe(n)&&Object.prototype.hasOwnProperty.call(n,e)),ene=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(vD);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Nwe=t=>bd(0,255,t),gI={...Qx,transform:t=>Math.round(Nwe(t))},$p={test:bD("rgb","red"),parse:ene("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+gI.transform(t)+", "+gI.transform(e)+", "+gI.transform(n)+", "+y1(D1.transform(r))+")"};function Cwe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const jO={test:bD("#"),parse:Cwe,transform:$p.transform},eE=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Hf=eE("deg"),Uc=eE("%"),tn=eE("px"),Pwe=eE("vh"),_we=eE("vw"),Sz={...Uc,parse:t=>Uc.parse(t)/100,transform:t=>Uc.transform(t*100)},Fg={test:bD("hsl","hue"),parse:ene("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Uc.transform(y1(e))+", "+Uc.transform(y1(n))+", "+y1(D1.transform(r))+")"},gi={test:t=>$p.test(t)||jO.test(t)||Fg.test(t),parse:t=>$p.test(t)?$p.parse(t):Fg.test(t)?Fg.parse(t):jO.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$p.transform(t):Fg.transform(t),getAnimatableNone:t=>{const e=gi.parse(t);return e.alpha=0,gi.transform(e)}},Iwe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Rwe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(vD))==null?void 0:e.length)||0)+(((n=t.match(Iwe))==null?void 0:n.length)||0)>0}const tne="number",nne="color",Owe="var",Mwe="var(",Az="${}",Lwe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function B1(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Lwe,l=>(gi.test(l)?(r.color.push(s),i.push(nne),n.push(gi.parse(l))):l.startsWith(Mwe)?(r.var.push(s),i.push(Owe),n.push(l)):(r.number.push(s),i.push(tne),n.push(parseFloat(l))),++s,Az)).split(Az);return{values:n,split:a,indexes:r,types:i}}function rne(t){return B1(t).values}function ine(t){const{split:e,types:n}=B1(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===tne?s+=y1(i[o]):a===nne?s+=gi.transform(i[o]):s+=i[o]}return s}}const jwe=t=>typeof t=="number"?0:gi.test(t)?gi.getAnimatableNone(t):t;function Dwe(t){const e=rne(t);return ine(t)(e.map(jwe))}const Ch={test:Rwe,parse:rne,createTransformer:ine,getAnimatableNone:Dwe};function yI(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Bwe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=yI(l,a,t+1/3),s=yI(l,a,t),o=yI(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function fT(t,e){return n=>n>0?e:t}const $r=(t,e,n)=>t+(e-t)*n,xI=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Uwe=[jO,$p,Fg],Fwe=t=>Uwe.find(e=>e.test(t));function Tz(t){const e=Fwe(t);if(!e)return!1;let n=e.parse(t);return e===Fg&&(n=Bwe(n)),n}const kz=(t,e)=>{const n=Tz(t),r=Tz(e);if(!n||!r)return fT(t,e);const i={...n};return s=>(i.red=xI(n.red,r.red,s),i.green=xI(n.green,r.green,s),i.blue=xI(n.blue,r.blue,s),i.alpha=$r(n.alpha,r.alpha,s),$p.transform(i))},DO=new Set(["none","hidden"]);function $we(t,e){return DO.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zwe(t,e){return n=>$r(t,e,n)}function wD(t){return typeof t=="number"?zwe:typeof t=="string"?xD(t)?fT:gi.test(t)?kz:qwe:Array.isArray(t)?sne:typeof t=="object"?gi.test(t)?kz:Vwe:fT}function sne(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>wD(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function Vwe(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=wD(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Hwe(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const qwe=(t,e)=>{const n=Ch.createTransformer(e),r=B1(t),i=B1(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?DO.has(t)&&!i.values.length||DO.has(e)&&!r.values.length?$we(t,e):Qw(sne(Hwe(r,i),i.values),n):fT(t,e)};function one(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?$r(t,e,n):wD(t)(t,e)}const Gwe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ir.update(e,n),stop:()=>Nh(e),now:()=>cs.isProcessing?cs.timestamp:Po.now()}},ane=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},hT=2e4;function ED(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<hT;)e+=n,r=t.next(e);return e>=hT?1/0:e}function Kwe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(ED(r),hT);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:el(i)}}const Wwe=5;function lne(t,e,n){const r=Math.max(e-Wwe,0);return Fte(n-t(r),e-r)}const Yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vI=.001;function Ywe({duration:t=Yr.duration,bounce:e=Yr.bounce,velocity:n=Yr.velocity,mass:r=Yr.mass}){let i,s,o=1-e;o=bd(Yr.minDamping,Yr.maxDamping,o),t=bd(Yr.minDuration,Yr.maxDuration,el(t)),o<1?(i=c=>{const d=c*o,h=d*t,m=d-n,g=BO(c,o),v=Math.exp(-h);return vI-m/g*v},s=c=>{const h=c*o*t,m=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-h),x=BO(Math.pow(c,2),o);return(-i(c)+vI>0?-1:1)*((m-g)*v)/x}):(i=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-vI+d*h},s=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=Xwe(i,s,a);if(t=Bc(t),isNaN(l))return{stiffness:Yr.stiffness,damping:Yr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Jwe=12;function Xwe(t,e,n){let r=n;for(let i=1;i<Jwe;i++)r=r-t(r)/e(r);return r}function BO(t,e){return t*Math.sqrt(1-e*e)}const Qwe=["duration","bounce"],Zwe=["stiffness","damping","mass"];function Nz(t,e){return e.some(n=>t[n]!==void 0)}function eEe(t){let e={velocity:Yr.velocity,stiffness:Yr.stiffness,damping:Yr.damping,mass:Yr.mass,isResolvedFromDuration:!1,...t};if(!Nz(t,Zwe)&&Nz(t,Qwe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*bd(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Yr.mass,stiffness:i,damping:s}}else{const n=Ywe(t);e={...e,...n,mass:Yr.mass},e.isResolvedFromDuration=!0}return e}function pT(t=Yr.visualDuration,e=Yr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:h,velocity:m,isResolvedFromDuration:g}=eEe({...n,velocity:-el(n.velocity||0)}),v=m||0,x=c/(2*Math.sqrt(l*d)),b=o-s,w=el(Math.sqrt(l/d)),k=Math.abs(b)<5;r||(r=k?Yr.restSpeed.granular:Yr.restSpeed.default),i||(i=k?Yr.restDelta.granular:Yr.restDelta.default);let N;if(x<1){const D=BO(w,x);N=_=>{const F=Math.exp(-x*w*_);return o-F*((v+x*w*b)/D*Math.sin(D*_)+b*Math.cos(D*_))}}else if(x===1)N=D=>o-Math.exp(-w*D)*(b+(v+w*b)*D);else{const D=w*Math.sqrt(x*x-1);N=_=>{const F=Math.exp(-x*w*_),z=Math.min(D*_,300);return o-F*((v+x*w*b)*Math.sinh(z)+D*b*Math.cosh(z))/D}}const O={calculatedDuration:g&&h||null,next:D=>{const _=N(D);if(g)a.done=D>=h;else{let F=D===0?v:0;x<1&&(F=D===0?Bc(v):lne(N,D,_));const z=Math.abs(F)<=r,L=Math.abs(o-_)<=i;a.done=z&&L}return a.value=a.done?o:_,a},toString:()=>{const D=Math.min(ED(O),hT),_=ane(F=>O.next(D*F).value,D,30);return D+"ms "+_},toTransition:()=>{}};return O}pT.applyToOptions=t=>{const e=Kwe(t,100,pT);return t.ease=e.ease,t.duration=Bc(e.duration),t.type="keyframes",t};function UO({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],m={done:!1,value:h},g=z=>a!==void 0&&z<a||l!==void 0&&z>l,v=z=>a===void 0?l:l===void 0||Math.abs(a-z)<Math.abs(l-z)?a:l;let x=n*e;const b=h+x,w=o===void 0?b:o(b);w!==b&&(x=w-h);const k=z=>-x*Math.exp(-z/r),N=z=>w+k(z),O=z=>{const L=k(z),$=N(z);m.done=Math.abs(L)<=c,m.value=m.done?w:$};let D,_;const F=z=>{g(m.value)&&(D=z,_=pT({keyframes:[m.value,v(m.value)],velocity:lne(N,z,m.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return F(0),{calculatedDuration:null,next:z=>{let L=!1;return!_&&D===void 0&&(L=!0,O(z),F(z)),D!==void 0&&z>=D?_.next(z-D):(!L&&O(z),m)}}}function tEe(t,e,n){const r=[],i=n||wd.mix||one,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||nl:e;a=Qw(l,a)}r.push(a)}return r}function nEe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(hD(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=tEe(e,r,i),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const m=j1(t[h],t[h+1],d);return a[h](m)};return n?d=>c(bd(t[0],t[s-1],d)):c}function rEe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=j1(0,e,r);t.push($r(n,1,i))}}function iEe(t){const e=[0];return rEe(e,t.length-1),e}function sEe(t,e){return t.map(n=>n*e)}function oEe(t,e){return t.map(()=>e||Yte).splice(0,t.length-1)}function x1({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=ywe(r)?r.map(Ez):Ez(r),s={done:!1,value:e[0]},o=sEe(n&&n.length===e.length?n:iEe(e),t),a=nEe(o,e,{ease:Array.isArray(i)?i:oEe(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const aEe=t=>t!==null;function SD(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(aEe),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const lEe={decay:UO,inertia:UO,tween:x1,keyframes:x1,spring:pT};function cne(t){typeof t.type=="string"&&(t.type=lEe[t.type])}class AD{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const cEe=t=>t/100;class TD extends AD{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Po.now()&&this.tick(Po.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;cne(e);const{type:n=x1,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||x1;l!==x1&&typeof a[0]!="number"&&(this.mixKeyframes=Qw(cEe,one(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=ED(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:g,type:v,onUpdate:x,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,O=r;if(h){const z=Math.min(this.currentTime,i)/a;let L=Math.floor(z),$=z%1;!$&&z>=1&&($=1),$===1&&L--,L=Math.min(L,h+1),!!(L%2)&&(m==="reverse"?($=1-$,g&&($-=g/a)):m==="mirror"&&(O=o)),N=bd(0,1,$)*a}const D=k?{done:!1,value:d[0]}:O.next(N);s&&(D.value=s(D.value));let{done:_}=D;!k&&l!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return F&&v!==UO&&(D.value=SD(d,this.options,b,this.speed)),x&&x(D.value),F&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return el(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+el(e)}get time(){return el(this.currentTime)}set time(e){var n;e=Bc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Po.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=el(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Gwe,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Po.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function uEe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const zp=t=>t*180/Math.PI,FO=t=>{const e=zp(Math.atan2(t[1],t[0]));return $O(e)},dEe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:FO,rotateZ:FO,skewX:t=>zp(Math.atan(t[1])),skewY:t=>zp(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},$O=t=>(t=t%360,t<0&&(t+=360),t),Cz=FO,Pz=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),_z=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),fEe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Pz,scaleY:_z,scale:t=>(Pz(t)+_z(t))/2,rotateX:t=>$O(zp(Math.atan2(t[6],t[5]))),rotateY:t=>$O(zp(Math.atan2(-t[2],t[0]))),rotateZ:Cz,rotate:Cz,skewX:t=>zp(Math.atan(t[4])),skewY:t=>zp(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function zO(t){return t.includes("scale")?1:0}function VO(t,e){if(!t||t==="none")return zO(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=fEe,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=dEe,i=a}if(!i)return zO(e);const s=r[e],o=i[1].split(",").map(pEe);return typeof s=="function"?s(o):o[s]}const hEe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return VO(n,e)};function pEe(t){return parseFloat(t.trim())}const Zx=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ev=new Set(Zx),Iz=t=>t===Qx||t===tn,mEe=new Set(["x","y","z"]),gEe=Zx.filter(t=>!mEe.has(t));function yEe(t){const e=[];return gEe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Em={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>VO(e,"x"),y:(t,{transform:e})=>VO(e,"y")};Em.translateX=Em.x;Em.translateY=Em.y;const Sm=new Set;let HO=!1,qO=!1,GO=!1;function une(){if(qO){const t=Array.from(Sm).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=yEe(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}qO=!1,HO=!1,Sm.forEach(t=>t.complete(GO)),Sm.clear()}function dne(){Sm.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(qO=!0)})}function xEe(){GO=!0,dne(),une(),GO=!1}class kD{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Sm.add(this),HO||(HO=!0,Ir.read(dne),Ir.resolveKeyframes(une))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}uEe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Sm.delete(this)}cancel(){this.state==="scheduled"&&(Sm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const vEe=t=>t.startsWith("--");function bEe(t,e,n){vEe(e)?t.style.setProperty(e,n):t.style[e]=n}const wEe=pD(()=>window.ScrollTimeline!==void 0),EEe={};function SEe(t,e){const n=pD(t);return()=>EEe[e]??n()}const fne=SEe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Qb=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Rz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qb([0,.65,.55,1]),circOut:Qb([.55,0,1,.45]),backIn:Qb([.31,.01,.66,-.59]),backOut:Qb([.33,1.53,.69,.99])};function hne(t,e){if(t)return typeof t=="function"?fne()?ane(t,e):"ease-out":Jte(t)?Qb(t):Array.isArray(t)?t.map(n=>hne(n,e)||Rz.easeOut):Rz[t]}function AEe(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const h=hne(a,i);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(d,m)}function pne(t){return typeof t=="function"&&"applyToOptions"in t}function TEe({type:t,...e}){return pne(t)&&fne()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class kEe extends AD{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,hD(typeof e.type!="string");const c=TEe(e);this.animation=AEe(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=SD(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):bEe(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return el(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+el(e)}get time(){return el(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Bc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&wEe()?(this.animation.timeline=e,nl):n(this)}}const mne={anticipate:Gte,backInOut:qte,circInOut:Wte};function NEe(t){return t in mne}function CEe(t){typeof t.ease=="string"&&NEe(t.ease)&&(t.ease=mne[t.ease])}const Oz=10;class PEe extends kEe{constructor(e){CEe(e),cne(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new TD({...o,autoplay:!1}),l=Bc(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Oz).value,a.sample(l).value,Oz),a.stop()}}const Mz=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ch.test(t)||t==="0")&&!t.startsWith("url("));function _Ee(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function IEe(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Mz(i,e),a=Mz(s,e);return!o||!a?!1:_Ee(t)||(n==="spring"||pne(n))&&r}function KO(t){t.duration=0,t.type="keyframes"}const REe=new Set(["opacity","clipPath","filter","transform"]),OEe=pD(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function MEe(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return OEe()&&n&&REe.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const LEe=40;class jEe extends AD{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:d,...h}){var v;super(),this.stop=()=>{var x,b;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Po.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||kD;this.keyframeResolver=new g(a,(x,b,w)=>this.onKeyframesResolved(x,b,m,!w),l,c,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:d}=r;this.resolvedAt=Po.now(),IEe(e,s,o,a)||((wd.instantAnimations||!l)&&(d==null||d(SD(e,r,n))),e[0]=e[e.length-1],KO(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>LEe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&MEe(m)?new PEe({...m,element:m.motionValue.owner.current}):new TD(m);g.finished.then(()=>this.notifyFinished()).catch(nl),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),xEe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const DEe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function BEe(t){const e=DEe.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function gne(t,e,n=1){const[r,i]=BEe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Dte(o)?parseFloat(o):o}return xD(i)?gne(i,e,n+1):i}function ND(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const yne=new Set(["width","height","top","left","right","bottom",...Zx]),UEe={test:t=>t==="auto",parse:t=>t},xne=t=>e=>e.test(t),vne=[Qx,tn,Uc,Hf,_we,Pwe,UEe],Lz=t=>vne.find(xne(t));function FEe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Ute(t):!0}const $Ee=new Set(["brightness","contrast","saturate","opacity"]);function zEe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(vD)||[];if(!r)return t;const i=n.replace(r,"");let s=$Ee.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const VEe=/\b([a-z-]*)\(.*?\)/gu,WO={...Ch,getAnimatableNone:t=>{const e=t.match(VEe);return e?e.map(zEe).join(" "):t}},jz={...Qx,transform:Math.round},HEe={rotate:Hf,rotateX:Hf,rotateY:Hf,rotateZ:Hf,scale:dA,scaleX:dA,scaleY:dA,scaleZ:dA,skew:Hf,skewX:Hf,skewY:Hf,distance:tn,translateX:tn,translateY:tn,translateZ:tn,x:tn,y:tn,z:tn,perspective:tn,transformPerspective:tn,opacity:D1,originX:Sz,originY:Sz,originZ:tn},CD={borderWidth:tn,borderTopWidth:tn,borderRightWidth:tn,borderBottomWidth:tn,borderLeftWidth:tn,borderRadius:tn,radius:tn,borderTopLeftRadius:tn,borderTopRightRadius:tn,borderBottomRightRadius:tn,borderBottomLeftRadius:tn,width:tn,maxWidth:tn,height:tn,maxHeight:tn,top:tn,right:tn,bottom:tn,left:tn,padding:tn,paddingTop:tn,paddingRight:tn,paddingBottom:tn,paddingLeft:tn,margin:tn,marginTop:tn,marginRight:tn,marginBottom:tn,marginLeft:tn,backgroundPositionX:tn,backgroundPositionY:tn,...HEe,zIndex:jz,fillOpacity:D1,strokeOpacity:D1,numOctaves:jz},qEe={...CD,color:gi,backgroundColor:gi,outlineColor:gi,fill:gi,stroke:gi,borderColor:gi,borderTopColor:gi,borderRightColor:gi,borderBottomColor:gi,borderLeftColor:gi,filter:WO,WebkitFilter:WO},bne=t=>qEe[t];function wne(t,e){let n=bne(t);return n!==WO&&(n=Ch),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const GEe=new Set(["auto","none","0"]);function KEe(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!GEe.has(s)&&B1(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=wne(n,i)}class WEe extends kD{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),xD(c))){const d=gne(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!yne.has(r)||e.length!==2)return;const[i,s]=e,o=Lz(i),a=Lz(s);if(o!==a)if(Iz(o)&&Iz(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Em[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||FEe(e[i]))&&r.push(i);r.length&&KEe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Em[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Em[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function YEe(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Ene=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Sne(t){return Bte(t)&&"offsetHeight"in t}const Dz=30,JEe=t=>!isNaN(parseFloat(t));class XEe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Po.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Po.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=JEe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new mD);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ir.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Po.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Dz)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Dz);return Fte(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bx(t,e){return new XEe(t,e)}const{schedule:PD}=Xte(queueMicrotask,!1),Sl={x:!1,y:!1};function Ane(){return Sl.x||Sl.y}function QEe(t){return t==="x"||t==="y"?Sl[t]?null:(Sl[t]=!0,()=>{Sl[t]=!1}):Sl.x||Sl.y?null:(Sl.x=Sl.y=!0,()=>{Sl.x=Sl.y=!1})}function Tne(t,e){const n=YEe(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Bz(t){return!(t.pointerType==="touch"||Ane())}function ZEe(t,e,n={}){const[r,i,s]=Tne(t,n),o=a=>{if(!Bz(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const d=h=>{Bz(h)&&(c(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const kne=(t,e)=>e?t===e?!0:kne(t,e.parentElement):!1,_D=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,eSe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function tSe(t){return eSe.has(t.tagName)||t.tabIndex!==-1}const C2=new WeakSet;function Uz(t){return e=>{e.key==="Enter"&&t(e)}}function bI(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const nSe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Uz(()=>{if(C2.has(n))return;bI(n,"down");const i=Uz(()=>{bI(n,"up")}),s=()=>bI(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Fz(t){return _D(t)&&!Ane()}function rSe(t,e,n={}){const[r,i,s]=Tne(t,n),o=a=>{const l=a.currentTarget;if(!Fz(a))return;C2.add(l);const c=e(l,a),d=(g,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),C2.has(l)&&C2.delete(l),Fz(g)&&typeof c=="function"&&c(g,{success:v})},h=g=>{d(g,l===window||l===document||n.useGlobalTarget||kne(l,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),Sne(a)&&(a.addEventListener("focus",c=>nSe(c,i)),!tSe(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function Nne(t){return Bte(t)&&"ownerSVGElement"in t}function iSe(t){return Nne(t)&&t.tagName==="svg"}const Bs=t=>!!(t&&t.getVelocity),sSe=[...vne,gi,Ch],oSe=t=>sSe.find(xne(t)),ID=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function $z(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function aSe(...t){return e=>{let n=!1;const r=t.map(i=>{const s=$z(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():$z(t[i],null)}}}}function lSe(...t){return S.useCallback(aSe(...t),t)}class cSe extends S.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Sne(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function uSe({children:t,isPresent:e,anchorX:n,root:r}){const i=S.useId(),s=S.useRef(null),o=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=S.useContext(ID),l=lSe(s,t==null?void 0:t.ref);return S.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:m,right:g}=o.current;if(e||!s.current||!c||!d)return;const v=n==="left"?`left: ${m}`:`right: ${g}`;s.current.dataset.motionPopId=i;const x=document.createElement("style");a&&(x.nonce=a);const b=r??document.head;return b.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${v}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(x)&&b.removeChild(x)}},[e]),u.jsx(cSe,{isPresent:e,childRef:s,sizeRef:o,children:S.cloneElement(t,{ref:l})})}const dSe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=cD(fSe),d=S.useId();let h=!0,m=S.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:n,custom:i,onExitComplete:g=>{c.set(g,!0);for(const v of c.values())if(!v)return;r&&r()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[n,c,r]);return s&&h&&(m={...m}),S.useMemo(()=>{c.forEach((g,v)=>c.set(v,!1))},[n]),S.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=u.jsx(uSe,{isPresent:n,anchorX:a,root:l,children:t})),u.jsx(_N.Provider,{value:m,children:t})};function fSe(){return new Map}function Cne(t=!0){const e=S.useContext(_N);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=S.useId();S.useEffect(()=>{if(t)return i(s)},[t]);const o=S.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const fA=t=>t.key||"";function zz(t){const e=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&e.push(n)}),e}const Ei=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,d]=Cne(o),h=S.useMemo(()=>zz(t),[t]),m=o&&!c?[]:h.map(fA),g=S.useRef(!0),v=S.useRef(h),x=cD(()=>new Map),[b,w]=S.useState(h),[k,N]=S.useState(h);jte(()=>{g.current=!1,v.current=h;for(let _=0;_<k.length;_++){const F=fA(k[_]);m.includes(F)?x.delete(F):x.get(F)!==!0&&x.set(F,!1)}},[k,m.length,m.join("-")]);const O=[];if(h!==b){let _=[...h];for(let F=0;F<k.length;F++){const z=k[F],L=fA(z);m.includes(L)||(_.splice(F,0,z),O.push(z))}return s==="wait"&&O.length&&(_=O),N(zz(_)),w(h),null}const{forceRender:D}=S.useContext(lD);return u.jsx(u.Fragment,{children:k.map(_=>{const F=fA(_),z=o&&!c?!1:h===k||m.includes(F),L=()=>{if(x.has(F))x.set(F,!0);else return;let $=!0;x.forEach(G=>{G||($=!1)}),$&&(D==null||D(),N(v.current),o&&(d==null||d()),r&&r())};return u.jsx(dSe,{isPresent:z,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:z?void 0:L,anchorX:a,children:_},F)})})},Pne=S.createContext({strict:!1}),Vz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wx={};for(const t in Vz)wx[t]={isEnabled:e=>Vz[t].some(n=>!!e[n])};function hSe(t){for(const e in t)wx[e]={...wx[e],...t[e]}}const pSe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mT(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||pSe.has(t)}let _ne=t=>!mT(t);function mSe(t){typeof t=="function"&&(_ne=e=>e.startsWith("on")?!mT(e):t(e))}try{mSe(require("@emotion/is-prop-valid").default)}catch{}function gSe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(_ne(i)||n===!0&&mT(i)||!e&&!mT(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const IN=S.createContext({});function RN(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function U1(t){return typeof t=="string"||Array.isArray(t)}const RD=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],OD=["initial",...RD];function ON(t){return RN(t.animate)||OD.some(e=>U1(t[e]))}function Ine(t){return!!(ON(t)||t.variants)}function ySe(t,e){if(ON(t)){const{initial:n,animate:r}=t;return{initial:n===!1||U1(n)?n:void 0,animate:U1(r)?r:void 0}}return t.inherit!==!1?e:{}}function xSe(t){const{initial:e,animate:n}=ySe(t,S.useContext(IN));return S.useMemo(()=>({initial:e,animate:n}),[Hz(e),Hz(n)])}function Hz(t){return Array.isArray(t)?t.join(" "):t}function qz(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kb={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(tn.test(t))t=parseFloat(t);else return t;const n=qz(t,e.target.x),r=qz(t,e.target.y);return`${n}% ${r}%`}},vSe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ch.parse(t);if(i.length>5)return r;const s=Ch.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=$r(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},YO={borderRadius:{...kb,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kb,borderTopRightRadius:kb,borderBottomLeftRadius:kb,borderBottomRightRadius:kb,boxShadow:vSe};function Rne(t,{layout:e,layoutId:n}){return ev.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!YO[t]||t==="opacity")}const bSe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wSe=Zx.length;function ESe(t,e,n){let r="",i=!0;for(let s=0;s<wSe;s++){const o=Zx[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Ene(a,CD[o]);if(!l){i=!1;const d=bSe[o]||o;r+=`${d}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function MD(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ev.has(l)){o=!0;continue}else if(Zte(l)){i[l]=c;continue}else{const d=Ene(c,CD[l]);l.startsWith("origin")?(a=!0,s[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=ESe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;r.transformOrigin=`${l} ${c} ${d}`}}const LD=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function One(t,e,n){for(const r in e)!Bs(e[r])&&!Rne(r,n)&&(t[r]=e[r])}function SSe({transformTemplate:t},e){return S.useMemo(()=>{const n=LD();return MD(n,e,t),Object.assign({},n.vars,n.style)},[e])}function ASe(t,e){const n=t.style||{},r={};return One(r,n,t),Object.assign(r,SSe(t,e)),r}function TSe(t,e){const n={},r=ASe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const kSe={offset:"stroke-dashoffset",array:"stroke-dasharray"},NSe={offset:"strokeDashoffset",array:"strokeDasharray"};function CSe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?kSe:NSe;t[s.offset]=tn.transform(-r);const o=tn.transform(e),a=tn.transform(n);t[s.array]=`${o} ${a}`}function Mne(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,d){if(MD(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&CSe(h,i,s,o,!1)}const Lne=()=>({...LD(),attrs:{}}),jne=t=>typeof t=="string"&&t.toLowerCase()==="svg";function PSe(t,e,n,r){const i=S.useMemo(()=>{const s=Lne();return Mne(s,e,jne(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};One(s,t.style,t),i.style={...s,...i.style}}return i}const _Se=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jD(t){return typeof t!="string"||t.includes("-")?!1:!!(_Se.indexOf(t)>-1||/[A-Z]/u.test(t))}function ISe(t,e,n,{latestValues:r},i,s=!1){const a=(jD(t)?PSe:TSe)(e,r,i,t),l=gSe(e,typeof t=="string",s),c=t!==S.Fragment?{...l,...a,ref:n}:{},{children:d}=e,h=S.useMemo(()=>Bs(d)?d.get():d,[d]);return S.createElement(t,{...c,children:h})}function Gz(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function DD(t,e,n,r){if(typeof e=="function"){const[i,s]=Gz(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Gz(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function P2(t){return Bs(t)?t.get():t}function RSe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:OSe(n,r,i,t),renderState:e()}}function OSe(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=P2(s[m]);let{initial:o,animate:a}=t;const l=ON(t),c=Ine(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!RN(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const v=DD(t,m[g]);if(v){const{transitionEnd:x,transition:b,...w}=v;for(const k in w){let N=w[k];if(Array.isArray(N)){const O=d?N.length-1:0;N=N[O]}N!==null&&(i[k]=N)}for(const k in x)i[k]=x[k]}}}return i}const Dne=t=>(e,n)=>{const r=S.useContext(IN),i=S.useContext(_N),s=()=>RSe(t,e,r,i);return n?s():cD(s)};function BD(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Bs(r[o])||e.style&&Bs(e.style[o])||Rne(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const MSe=Dne({scrapeMotionValuesFromProps:BD,createRenderState:LD});function Bne(t,e,n){const r=BD(t,e,n);for(const i in t)if(Bs(t[i])||Bs(e[i])){const s=Zx.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const LSe=Dne({scrapeMotionValuesFromProps:Bne,createRenderState:Lne}),jSe=Symbol.for("motionComponentSymbol");function $g(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function DSe(t,e,n){return S.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):$g(n)&&(n.current=r))},[e])}const UD=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BSe="framerAppearId",Une="data-"+UD(BSe),Fne=S.createContext({});function USe(t,e,n,r,i){var x,b;const{visualElement:s}=S.useContext(IN),o=S.useContext(Pne),a=S.useContext(_N),l=S.useContext(ID).reducedMotion,c=S.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,h=S.useContext(Fne);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&FSe(c.current,n,i,h);const m=S.useRef(!1);S.useInsertionEffect(()=>{d&&m.current&&d.update(n,a)});const g=n[Une],v=S.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return jte(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),v.current&&d.animationState&&d.animationState.animateChanges())}),S.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),v.current=!1),d.enteringChildren=void 0)}),d}function FSe(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:$ne(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&$g(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}function $ne(t){if(t)return t.options.allowProjection!==!1?t.projection:$ne(t.parent)}function wI(t,{forwardMotionProps:e=!1}={},n,r){n&&hSe(n);const i=jD(t)?LSe:MSe;function s(a,l){let c;const d={...S.useContext(ID),...a,layoutId:$Se(a)},{isStatic:h}=d,m=xSe(a),g=i(a,h);if(!h&&uD){zSe();const v=VSe(d);c=v.MeasureLayout,m.visualElement=USe(t,g,d,r,v.ProjectionNode)}return u.jsxs(IN.Provider,{value:m,children:[c&&m.visualElement?u.jsx(c,{visualElement:m.visualElement,...d}):null,ISe(t,a,DSe(g,m.visualElement,l),g,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=S.forwardRef(s);return o[jSe]=t,o}function $Se({layoutId:t}){const e=S.useContext(lD).id;return e&&t!==void 0?e+"-"+t:t}function zSe(t,e){S.useContext(Pne).strict}function VSe(t){const{drag:e,layout:n}=wx;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function HSe(t,e){if(typeof Proxy>"u")return wI;const n=new Map,r=(s,o)=>wI(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,wI(o,void 0,t,e)),n.get(o))})}function zne({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function qSe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function GSe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function EI(t){return t===void 0||t===1}function JO({scale:t,scaleX:e,scaleY:n}){return!EI(t)||!EI(e)||!EI(n)}function Ap(t){return JO(t)||Vne(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Vne(t){return Kz(t.x)||Kz(t.y)}function Kz(t){return t&&t!=="0%"}function gT(t,e,n){const r=t-n,i=e*r;return n+i}function Wz(t,e,n,r,i){return i!==void 0&&(t=gT(t,i,r)),gT(t,n,r)+e}function XO(t,e=0,n=1,r,i){t.min=Wz(t.min,e,n,r,i),t.max=Wz(t.max,e,n,r,i)}function Hne(t,{x:e,y:n}){XO(t.x,e.translate,e.scale,e.originPoint),XO(t.y,n.translate,n.scale,n.originPoint)}const Yz=.999999999999,Jz=1.0000000000001;function KSe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Vg(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Hne(t,o)),r&&Ap(s.latestValues)&&Vg(t,s.latestValues))}e.x<Jz&&e.x>Yz&&(e.x=1),e.y<Jz&&e.y>Yz&&(e.y=1)}function zg(t,e){t.min=t.min+e,t.max=t.max+e}function Xz(t,e,n,r,i=.5){const s=$r(t.min,t.max,i);XO(t,e,n,s,r)}function Vg(t,e){Xz(t.x,e.x,e.scaleX,e.scale,e.originX),Xz(t.y,e.y,e.scaleY,e.scale,e.originY)}function qne(t,e){return zne(GSe(t.getBoundingClientRect(),e))}function WSe(t,e,n){const r=qne(t,n),{scroll:i}=e;return i&&(zg(r.x,i.offset.x),zg(r.y,i.offset.y)),r}const Qz=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hg=()=>({x:Qz(),y:Qz()}),Zz=()=>({min:0,max:0}),Pi=()=>({x:Zz(),y:Zz()}),QO={current:null},Gne={current:!1};function YSe(){if(Gne.current=!0,!!uD)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>QO.current=t.matches;t.addEventListener("change",e),e()}else QO.current=!1}const JSe=new WeakMap;function XSe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Bs(i))t.addValue(r,i);else if(Bs(s))t.addValue(r,bx(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,bx(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const eV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class QSe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kD,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Po.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ir.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=ON(n),this.isVariantNode=Ine(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&Bs(g)&&g.set(l[m])}}mount(e){var n;this.current=e,JSe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),Gne.current||YSe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:QO.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Nh(this.notifyUpdate),Nh(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ev.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ir.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in wx){const n=wx[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<eV.length;r++){const i=eV[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=XSe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=bx(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Dte(r)||Ute(r))?r=parseFloat(r):!oSe(r)&&Ch.test(n)&&(r=wne(e,n)),this.setBaseTarget(e,Bs(r)?r.get():r)),Bs(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=DD(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Bs(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new mD),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){PD.render(this.render)}}class Kne extends QSe{constructor(){super(...arguments),this.KeyframeResolver=WEe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Bs(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Wne(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function ZSe(t){return window.getComputedStyle(t)}class eAe extends Kne{constructor(){super(...arguments),this.type="html",this.renderInstance=Wne}readValueFromInstance(e,n){var r;if(ev.has(n))return(r=this.projection)!=null&&r.isProjecting?zO(n):hEe(e,n);{const i=ZSe(e),s=(Zte(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return qne(e,n)}build(e,n,r){MD(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return BD(e,n,r)}}const Yne=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tAe(t,e,n,r){Wne(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Yne.has(i)?i:UD(i),e.attrs[i])}class nAe extends Kne{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pi}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ev.has(n)){const r=bne(n);return r&&r.default||0}return n=Yne.has(n)?n:UD(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Bne(e,n,r)}build(e,n,r){Mne(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){tAe(e,n,r,i)}mount(e){this.isSVGTag=jne(e.tagName),super.mount(e)}}const rAe=(t,e)=>jD(t)?new nAe(e):new eAe(e,{allowProjection:t!==S.Fragment});function ay(t,e,n){const r=t.getProps();return DD(r,e,n!==void 0?n:r.custom,t)}const ZO=t=>Array.isArray(t);function iAe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,bx(n))}function sAe(t){return ZO(t)?t[t.length-1]||0:t}function oAe(t,e){const n=ay(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=sAe(s[o]);iAe(t,o,a)}}function aAe(t){return!!(Bs(t)&&t.add)}function eM(t,e){const n=t.getValue("willChange");if(aAe(n))return n.add(e);if(!n&&wd.WillChange){const r=new wd.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Jne(t){return t.props[Une]}const lAe=t=>t!==null;function cAe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(lAe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const uAe={type:"spring",stiffness:500,damping:25,restSpeed:10},dAe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fAe={type:"keyframes",duration:.8},hAe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pAe=(t,{keyframes:e})=>e.length>2?fAe:ev.has(t)?t.startsWith("scale")?dAe(e[1]):uAe:hAe;function mAe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const FD=(t,e,n,r={},i,s)=>o=>{const a=ND(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Bc(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};mAe(a)||Object.assign(d,pAe(t,d)),d.duration&&(d.duration=Bc(d.duration)),d.repeatDelay&&(d.repeatDelay=Bc(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(KO(d),d.delay===0&&(h=!0)),(wd.instantAnimations||wd.skipAnimations)&&(h=!0,KO(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const m=cAe(d.keyframes,a);if(m!==void 0){Ir.update(()=>{d.onUpdate(m),d.onComplete()});return}}return a.isSync?new TD(d):new jEe(d)};function gAe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Xne(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const d in a){const h=t.getValue(d,t.latestValues[d]??null),m=a[d];if(m===void 0||c&&gAe(c,d))continue;const g={delay:n,...ND(s||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===v&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const w=Jne(t);if(w){const k=window.MotionHandoffAnimation(w,d,Ir);k!==null&&(g.startTime=k,x=!0)}}eM(t,d),h.start(FD(d,h,m,t.shouldReduceMotion&&yne.has(d)?{type:!1}:g,t,x));const b=h.animation;b&&l.push(b)}return o&&Promise.all(l).then(()=>{Ir.update(()=>{o&&oAe(t,o)})}),l}function Qne(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,d)=>c.sortNodePosition(d)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function tM(t,e,n={}){var l;const r=ay(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Xne(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=i;return yAe(t,e,c,d,h,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,d]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function yAe(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(tM(l,e,{...o,delay:n+(typeof r=="function"?0:r)+Qne(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function xAe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>tM(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=tM(t,e,n);else{const i=typeof e=="function"?ay(t,e,n.custom):e;r=Promise.all(Xne(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Zne(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const vAe=OD.length;function ere(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?ere(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<vAe;n++){const r=OD[n],i=t.props[r];(U1(i)||i===!1)&&(e[r]=i)}return e}const bAe=[...RD].reverse(),wAe=RD.length;function EAe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>xAe(t,n,r)))}function SAe(t){let e=EAe(t),n=tV(),r=!0;const i=l=>(c,d)=>{var m;const h=ay(t,d,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:g,transitionEnd:v,...x}=h;c={...c,...x,...v}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,d=ere(t.parent)||{},h=[],m=new Set;let g={},v=1/0;for(let b=0;b<wAe;b++){const w=bAe[b],k=n[w],N=c[w]!==void 0?c[w]:d[w],O=U1(N),D=w===l?k.isActive:null;D===!1&&(v=b);let _=N===d[w]&&N!==c[w]&&O;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),k.protectedKeys={...g},!k.isActive&&D===null||!N&&!k.prevProp||RN(N)||typeof N=="boolean")continue;const F=AAe(k.prevProp,N);let z=F||w===l&&k.isActive&&!_&&O||b>v&&O,L=!1;const $=Array.isArray(N)?N:[N];let G=$.reduce(i(w),{});D===!1&&(G={});const{prevResolvedValues:V={}}=k,U={...V,...G},A=q=>{z=!0,m.has(q)&&(L=!0,m.delete(q)),k.needsAnimating[q]=!0;const K=t.getValue(q);K&&(K.liveStyle=!1)};for(const q in U){const K=G[q],te=V[q];if(g.hasOwnProperty(q))continue;let Y=!1;ZO(K)&&ZO(te)?Y=!Zne(K,te):Y=K!==te,Y?K!=null?A(q):m.add(q):K!==void 0&&m.has(q)?A(q):k.protectedKeys[q]=!0}k.prevProp=N,k.prevResolvedValues=G,k.isActive&&(g={...g,...G}),r&&t.blockInitialAnimation&&(z=!1);const I=_&&F;z&&(!I||L)&&h.push(...$.map(q=>{const K={type:w};if(typeof q=="string"&&r&&!I&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,Y=ay(te,q);if(te.enteringChildren&&Y){const{delayChildren:H}=Y.transition||{};K.delay=Qne(te.enteringChildren,t,H)}}return{animation:q,options:K}}))}if(m.size){const b={};if(typeof c.initial!="boolean"){const w=ay(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(b.transition=w.transition)}m.forEach(w=>{const k=t.getBaseTarget(w),N=t.getValue(w);N&&(N.liveStyle=!0),b[w]=k??null}),h.push({animation:b})}let x=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=tV()}}}function AAe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Zne(e,t):!1}function gp(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tV(){return{animate:gp(!0),whileInView:gp(),whileHover:gp(),whileTap:gp(),whileDrag:gp(),whileFocus:gp(),exit:gp()}}class Fh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class TAe extends Fh{constructor(e){super(e),e.animationState||(e.animationState=SAe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();RN(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let kAe=0;class NAe extends Fh{constructor(){super(...arguments),this.id=kAe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const CAe={animation:{Feature:TAe},exit:{Feature:NAe}};function F1(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function tE(t){return{point:{x:t.pageX,y:t.pageY}}}const PAe=t=>e=>_D(e)&&t(e,tE(e));function v1(t,e,n,r){return F1(t,e,PAe(n),r)}const tre=1e-4,_Ae=1-tre,IAe=1+tre,nre=.01,RAe=0-nre,OAe=0+nre;function ro(t){return t.max-t.min}function MAe(t,e,n){return Math.abs(t-e)<=n}function nV(t,e,n,r=.5){t.origin=r,t.originPoint=$r(e.min,e.max,t.origin),t.scale=ro(n)/ro(e),t.translate=$r(n.min,n.max,t.origin)-t.originPoint,(t.scale>=_Ae&&t.scale<=IAe||isNaN(t.scale))&&(t.scale=1),(t.translate>=RAe&&t.translate<=OAe||isNaN(t.translate))&&(t.translate=0)}function b1(t,e,n,r){nV(t.x,e.x,n.x,r?r.originX:void 0),nV(t.y,e.y,n.y,r?r.originY:void 0)}function rV(t,e,n){t.min=n.min+e.min,t.max=t.min+ro(e)}function LAe(t,e,n){rV(t.x,e.x,n.x),rV(t.y,e.y,n.y)}function iV(t,e,n){t.min=e.min-n.min,t.max=t.min+ro(e)}function yT(t,e,n){iV(t.x,e.x,n.x),iV(t.y,e.y,n.y)}function Ba(t){return[t("x"),t("y")]}const rre=({current:t})=>t?t.ownerDocument.defaultView:null,sV=(t,e)=>Math.abs(t-e);function jAe(t,e){const n=sV(t.x,e.x),r=sV(t.y,e.y);return Math.sqrt(n**2+r**2)}class ire{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=AI(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,v=jAe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!v)return;const{point:x}=m,{timestamp:b}=cs;this.history.push({...x,timestamp:b});const{onStart:w,onMove:k}=this.handlers;g||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=SI(g,this.transformPagePoint),Ir.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=AI(m.type==="pointercancel"?this.lastMoveEventInfo:SI(g,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,w),x&&x(m,w)},!_D(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=tE(e),l=SI(a,this.transformPagePoint),{point:c}=l,{timestamp:d}=cs;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,AI(l,this.history)),this.removeListeners=Qw(v1(this.contextWindow,"pointermove",this.handlePointerMove),v1(this.contextWindow,"pointerup",this.handlePointerUp),v1(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Nh(this.updatePoint)}}function SI(t,e){return e?{point:e(t.point)}:t}function oV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function AI({point:t},e){return{point:t,delta:oV(t,sre(e)),offset:oV(t,DAe(e)),velocity:BAe(e,.1)}}function DAe(t){return t[0]}function sre(t){return t[t.length-1]}function BAe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=sre(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Bc(e)));)n--;if(!r)return{x:0,y:0};const s=el(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function UAe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?$r(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?$r(n,t,r.max):Math.min(t,n)),t}function aV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function FAe(t,{top:e,left:n,bottom:r,right:i}){return{x:aV(t.x,n,i),y:aV(t.y,e,r)}}function lV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $Ae(t,e){return{x:lV(t.x,e.x),y:lV(t.y,e.y)}}function zAe(t,e){let n=.5;const r=ro(t),i=ro(e);return i>r?n=j1(e.min,e.max-r,t.min):r>i&&(n=j1(t.min,t.max-i,e.min)),bd(0,1,n)}function VAe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const nM=.35;function HAe(t=nM){return t===!1?t=0:t===!0&&(t=nM),{x:cV(t,"left","right"),y:cV(t,"top","bottom")}}function cV(t,e,n){return{min:uV(t,e),max:uV(t,n)}}function uV(t,e){return typeof t=="number"?t:t[e]||0}const qAe=new WeakMap;class GAe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(tE(h).point)},o=(h,m)=>{const{drag:g,dragPropagation:v,onDragStart:x}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=QEe(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ba(w=>{let k=this.getAxisMotionValue(w).get()||0;if(Uc.test(k)){const{projection:N}=this.visualElement;if(N&&N.layout){const O=N.layout.layoutBox[w];O&&(k=ro(O)*(parseFloat(k)/100))}}this.originPoint[w]=k}),x&&Ir.postRender(()=>x(h,m)),eM(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:x,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=m;if(v&&this.currentDirection===null){this.currentDirection=KAe(w),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),b&&b(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Ba(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new ire(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:rre(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ir.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!hA(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=UAe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&$g(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=FAe(r.layoutBox,e):this.constraints=!1,this.elastic=HAe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ba(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=VAe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!$g(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=WSe(r,i.root,this.visualElement.getTransformPagePoint());let o=$Ae(i.layout.layoutBox,s);if(n){const a=n(qSe(o));this.hasMutatedConstraints=!!a,a&&(o=zne(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ba(d=>{if(!hA(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const m=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return eM(this.visualElement,e),r.start(FD(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ba(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ba(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ba(n=>{const{drag:r}=this.getProps();if(!hA(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-$r(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!$g(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ba(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=zAe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ba(o=>{if(!hA(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set($r(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;qAe.set(this.visualElement,this);const e=this.visualElement.current,n=v1(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();$g(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ir.read(r);const o=F1(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ba(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=nM,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function hA(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function KAe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class WAe extends Fh{constructor(e){super(e),this.removeGroupControls=nl,this.removeListeners=nl,this.controls=new GAe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nl}unmount(){this.removeGroupControls(),this.removeListeners()}}const dV=t=>(e,n)=>{t&&Ir.postRender(()=>t(e,n))};class YAe extends Fh{constructor(){super(...arguments),this.removePointerDownListener=nl}onPointerDown(e){this.session=new ire(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rre(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:dV(e),onStart:dV(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ir.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=v1(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let TI=!1;class JAe extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),TI&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),_2.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,TI=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ir.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),PD.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;TI=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ore(t){const[e,n]=Cne(),r=S.useContext(lD);return u.jsx(JAe,{...t,layoutGroup:r,switchLayoutGroup:S.useContext(Fne),isPresent:e,safeToRemove:n})}function XAe(t,e,n){const r=Bs(t)?t:bx(t);return r.start(FD("",r,e,n)),r.animation}const QAe=(t,e)=>t.depth-e.depth;class ZAe{constructor(){this.children=[],this.isDirty=!1}add(e){dD(this.children,e),this.isDirty=!0}remove(e){fD(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(QAe),this.isDirty=!1,this.children.forEach(e)}}function e2e(t,e){const n=Po.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Nh(r),t(s-e))};return Ir.setup(r,!0),()=>Nh(r)}const are=["TopLeft","TopRight","BottomLeft","BottomRight"],t2e=are.length,fV=t=>typeof t=="string"?parseFloat(t):t,hV=t=>typeof t=="number"||tn.test(t);function n2e(t,e,n,r,i,s){i?(t.opacity=$r(0,n.opacity??1,r2e(r)),t.opacityExit=$r(e.opacity??1,0,i2e(r))):s&&(t.opacity=$r(e.opacity??1,n.opacity??1,r));for(let o=0;o<t2e;o++){const a=`border${are[o]}Radius`;let l=pV(e,a),c=pV(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||hV(l)===hV(c)?(t[a]=Math.max($r(fV(l),fV(c),r),0),(Uc.test(c)||Uc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=$r(e.rotate||0,n.rotate||0,r))}function pV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const r2e=lre(0,.5,Kte),i2e=lre(.5,.95,nl);function lre(t,e,n){return r=>r<t?0:r>e?1:n(j1(t,e,r))}function mV(t,e){t.min=e.min,t.max=e.max}function bl(t,e){mV(t.x,e.x),mV(t.y,e.y)}function gV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function yV(t,e,n,r,i){return t-=e,t=gT(t,1/n,r),i!==void 0&&(t=gT(t,1/i,r)),t}function s2e(t,e=0,n=1,r=.5,i,s=t,o=t){if(Uc.test(e)&&(e=parseFloat(e),e=$r(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=$r(s.min,s.max,r);t===s&&(a-=e),t.min=yV(t.min,e,n,a,i),t.max=yV(t.max,e,n,a,i)}function xV(t,e,[n,r,i],s,o){s2e(t,e[n],e[r],e[i],e.scale,s,o)}const o2e=["x","scaleX","originX"],a2e=["y","scaleY","originY"];function vV(t,e,n,r){xV(t.x,e,o2e,n?n.x:void 0,r?r.x:void 0),xV(t.y,e,a2e,n?n.y:void 0,r?r.y:void 0)}function bV(t){return t.translate===0&&t.scale===1}function cre(t){return bV(t.x)&&bV(t.y)}function wV(t,e){return t.min===e.min&&t.max===e.max}function l2e(t,e){return wV(t.x,e.x)&&wV(t.y,e.y)}function EV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ure(t,e){return EV(t.x,e.x)&&EV(t.y,e.y)}function SV(t){return ro(t.x)/ro(t.y)}function AV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class c2e{constructor(){this.members=[]}add(e){dD(this.members,e),e.scheduleRender()}remove(e){if(fD(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function u2e(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:m,skewX:g,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const kI=["","X","Y","Z"],d2e=1e3;let f2e=0;function NI(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function dre(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Jne(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ir,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&dre(r)}function fre({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=f2e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(m2e),this.nodes.forEach(v2e),this.nodes.forEach(b2e),this.nodes.forEach(g2e)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZAe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new mD),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Nne(o)&&!iSe(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d,h=0;const m=()=>this.root.updateBlockedByResize=!1;Ir.read(()=>{h=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,d&&d(),d=e2e(m,250),_2.hasAnimatedSinceResize&&(_2.hasAnimatedSinceResize=!1,this.nodes.forEach(NV)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||T2e,{onLayoutAnimationStart:x,onLayoutAnimationComplete:b}=c.getProps(),w=!this.targetLayout||!ure(this.targetLayout,g),k=!h&&m;if(this.options.layoutRoot||this.resumeFrom||k||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...ND(v,"layout"),onPlay:x,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(d,k)}else h||NV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Nh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(w2e),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&dre(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(x2e),this.nodes.forEach(h2e),this.nodes.forEach(p2e)):this.nodes.forEach(kV),this.clearAllSnapshots();const a=Po.now();cs.delta=bd(0,1e3/60,a-cs.timestamp),cs.timestamp=a,cs.isProcessing=!0,mI.update.process(cs),mI.preRender.process(cs),mI.render.process(cs),cs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,PD.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(y2e),this.sharedNodes.forEach(E2e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ir.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ir.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ro(this.snapshot.measuredBox.x)&&!ro(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Pi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!cre(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Ap(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),k2e(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Pi();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(N2e))){const{scroll:d}=this.root;d&&(zg(a.x,d.offset.x),zg(a.y,d.offset.y))}return a}removeElementScroll(o){var l;const a=Pi();if(bl(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&bl(a,o),zg(a.x,h.offset.x),zg(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Pi();bl(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Vg(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ap(d.latestValues)&&Vg(l,d.latestValues)}return Ap(this.latestValues)&&Vg(l,this.latestValues),l}removeTransform(o){const a=Pi();bl(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ap(c.latestValues))continue;JO(c.latestValues)&&c.updateSnapshot();const d=Pi(),h=c.measurePageBox();bl(d,h),vV(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Ap(this.latestValues)&&vV(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=cs.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pi(),this.targetWithTransforms=Pi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LAe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bl(this.target,this.layout.layoutBox),Hne(this.target,this.targetDelta)):bl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||JO(this.parent.latestValues)||Vne(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pi(),this.relativeTargetOrigin=Pi(),yT(this.relativeTargetOrigin,a,l),bl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===cs.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;bl(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;KSe(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Pi());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gV(this.prevProjectionDelta.x,this.projectionDelta.x),gV(this.prevProjectionDelta.y,this.projectionDelta.y)),b1(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!AV(this.projectionDelta.x,this.prevProjectionDelta.x)||!AV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hg(),this.projectionDelta=Hg(),this.projectionDeltaWithTransform=Hg()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=Hg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Pi(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=g!==v,b=this.getStack(),w=!b||b.members.length<=1,k=!!(x&&!w&&this.options.crossfade===!0&&!this.path.some(A2e));this.animationProgress=0;let N;this.mixTargetDelta=O=>{const D=O/1e3;CV(h.x,o.x,D),CV(h.y,o.y,D),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yT(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),S2e(this.relativeTarget,this.relativeTargetOrigin,m,D),N&&l2e(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Pi()),bl(N,this.relativeTarget)),x&&(this.animationValues=d,n2e(d,c,this.latestValues,D,k,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Nh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ir.update(()=>{_2.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bx(0)),this.currentAnimation=XAe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(d2e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&hre(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Pi();const h=ro(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=ro(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}bl(a,l),Vg(a,d),b1(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new c2e),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&NI("z",o,c,this.animationValues);for(let d=0;d<kI.length;d++)NI(`rotate${kI[d]}`,o,c,this.animationValues),NI(`skew${kI[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=P2(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=P2(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ap(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=u2e(this.projectionDeltaWithTransform,this.treeScale,d);l&&(h=l(d,h)),o.transform=h;const{x:m,y:g}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in YO){if(d[v]===void 0)continue;const{correct:x,applyTo:b,isCSSVariable:w}=YO[v],k=h==="none"?d[v]:x(d[v],c);if(b){const N=b.length;for(let O=0;O<N;O++)o[b[O]]=k}else w?this.options.visualElement.renderState.vars[v]=k:o[v]=k}this.options.layoutId&&(o.pointerEvents=c===this?P2(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(TV),this.root.sharedNodes.clear()}}}function h2e(t){t.updateLayout()}function p2e(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Ba(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],g=ro(m);m.min=r[h].min,m.max=m.min+g}):hre(s,e.layoutBox,r)&&Ba(h=>{const m=o?e.measuredBox[h]:e.layoutBox[h],g=ro(r[h]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=Hg();b1(a,r,e.layoutBox);const l=Hg();o?b1(l,t.applyTransform(i,!0),e.measuredBox):b1(l,r,e.layoutBox);const c=!cre(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const v=Pi();yT(v,e.layoutBox,m.layoutBox);const x=Pi();yT(x,r,g.layoutBox),ure(v,x)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function m2e(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function g2e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function y2e(t){t.clearSnapshot()}function TV(t){t.clearMeasurements()}function kV(t){t.isLayoutDirty=!1}function x2e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function NV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function v2e(t){t.resolveTargetDelta()}function b2e(t){t.calcProjection()}function w2e(t){t.resetSkewAndRotation()}function E2e(t){t.removeLeadSnapshot()}function CV(t,e,n){t.translate=$r(e.translate,0,n),t.scale=$r(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function PV(t,e,n,r){t.min=$r(e.min,n.min,r),t.max=$r(e.max,n.max,r)}function S2e(t,e,n,r){PV(t.x,e.x,n.x,r),PV(t.y,e.y,n.y,r)}function A2e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const T2e={duration:.45,ease:[.4,0,.1,1]},_V=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),IV=_V("applewebkit/")&&!_V("chrome/")?Math.round:nl;function RV(t){t.min=IV(t.min),t.max=IV(t.max)}function k2e(t){RV(t.x),RV(t.y)}function hre(t,e,n){return t==="position"||t==="preserve-aspect"&&!MAe(SV(e),SV(n),.2)}function N2e(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const C2e=fre({attachResizeListener:(t,e)=>F1(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),CI={current:void 0},pre=fre({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!CI.current){const t=new C2e({});t.mount(window),t.setOptions({layoutScroll:!0}),CI.current=t}return CI.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),P2e={pan:{Feature:YAe},drag:{Feature:WAe,ProjectionNode:pre,MeasureLayout:ore}};function OV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ir.postRender(()=>s(e,tE(e)))}class _2e extends Fh{mount(){const{current:e}=this.node;e&&(this.unmount=ZEe(e,(n,r)=>(OV(this.node,r,"Start"),i=>OV(this.node,i,"End"))))}unmount(){}}class I2e extends Fh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qw(F1(this.node.current,"focus",()=>this.onFocus()),F1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function MV(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ir.postRender(()=>s(e,tE(e)))}class R2e extends Fh{mount(){const{current:e}=this.node;e&&(this.unmount=rSe(e,(n,r)=>(MV(this.node,r,"Start"),(i,{success:s})=>MV(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const rM=new WeakMap,PI=new WeakMap,O2e=t=>{const e=rM.get(t.target);e&&e(t)},M2e=t=>{t.forEach(O2e)};function L2e({root:t,...e}){const n=t||document;PI.has(n)||PI.set(n,{});const r=PI.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(M2e,{root:t,...e})),r[i]}function j2e(t,e,n){const r=L2e(e);return rM.set(t,n),r.observe(t),()=>{rM.delete(t),r.unobserve(t)}}const D2e={some:0,all:1};class B2e extends Fh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:D2e[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=c?d:h;m&&m(l)};return j2e(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(U2e(e,n))&&this.startObserver()}unmount(){}}function U2e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const F2e={inView:{Feature:B2e},tap:{Feature:R2e},focus:{Feature:I2e},hover:{Feature:_2e}},$2e={layout:{ProjectionNode:pre,MeasureLayout:ore}},z2e={...CAe,...F2e,...P2e,...$2e},gt=HSe(z2e,rAe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),H2e=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),LV=t=>{const e=H2e(t);return e.charAt(0).toUpperCase()+e.slice(1)},mre=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),q2e=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var G2e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2e=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...G2e,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:mre("lucide",i),...!s&&!q2e(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(t,e)=>{const n=S.forwardRef(({className:r,...i},s)=>S.createElement(K2e,{ref:s,iconNode:e,className:mre(`lucide-${V2e(LV(t))}`,`lucide-${t}`,r),...i}));return n.displayName=LV(t),n};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Si=pt("activity",W2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2e=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],J2e=pt("arrow-down-left",Y2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2e=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],Q2e=pt("arrow-down-to-line",X2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2e=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xT=pt("arrow-left",Z2e);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eTe=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],tTe=pt("arrow-right-left",eTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nTe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],nE=pt("arrow-right",nTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rTe=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],gre=pt("arrow-up-right",rTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iTe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],sTe=pt("bell",iTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oTe=[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 16a2 2 0 0 1-2 2H8.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 4 20.286V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z",key:"11gyqh"}],["path",{d:"M9 11v2",key:"1ueba0"}]],yre=pt("bot-message-square",oTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aTe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Zb=pt("bot",aTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lTe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],cTe=pt("brain-circuit",lTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uTe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],ao=pt("brain",uTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dTe=[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],fTe=pt("briefcase-business",dTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hTe=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],pTe=pt("bug",hTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mTe=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],$D=pt("calendar-clock",mTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gTe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],yTe=pt("chart-bar",gTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xTe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],MN=pt("chart-column",xTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vTe=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],zl=pt("chart-no-axes-column",vTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bTe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],$1=pt("chart-pie",bTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wTe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Am=pt("check",wTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ETe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Oo=pt("chevron-down",ETe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const STe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],z1=pt("chevron-left",STe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ATe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],il=pt("chevron-right",ATe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TTe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ph=pt("chevron-up",TTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],V1=pt("circle-alert",kTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NTe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mm=pt("circle-check-big",NTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],LN=pt("circle-check",CTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_Te=pt("circle-question-mark",PTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ITe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Lm=pt("circle-x",ITe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RTe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fr=pt("clock",RTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OTe=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],vT=pt("coins",OTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MTe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Tm=pt("copy",MTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LTe=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],xre=pt("cpu",LTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jTe=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],jN=pt("database",jTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DTe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],tv=pt("dollar-sign",DTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BTe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Qs=pt("download",BTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UTe=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],bT=pt("droplets",UTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FTe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ed=pt("external-link",FTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Te=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],DN=pt("eye-off",$Te);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zTe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zD=pt("eye",zTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VTe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jV=pt("file-text",VTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HTe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vre=pt("funnel",HTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],I2=pt("globe",qTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GTe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],KTe=pt("history",GTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WTe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],nv=pt("info",WTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YTe=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],H1=pt("key",YTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JTe=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],XTe=pt("landmark",JTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QTe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],wT=pt("layers",QTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZTe=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],eke=pt("lightbulb",ZTe);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tke=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],VD=pt("loader-circle",tke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nke=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],bre=pt("lock-open",nke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rke=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Vl=pt("lock",rke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ike=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],DV=pt("log-out",ike);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ske=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],oke=pt("mail",ske);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ake=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],BV=pt("menu",ake);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lke=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],wre=pt("message-square-plus",lke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cke=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ET=pt("message-square",cke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uke=[["path",{d:"M5 12h14",key:"1ays0h"}]],Br=pt("minus",uke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dke=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],fke=pt("percent",dke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hke=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],cr=pt("plus",hke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pke=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jl=pt("refresh-cw",pke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mke=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ere=pt("rotate-ccw",mke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gke=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],HD=pt("save",gke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yke=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],qD=pt("scroll-text",yke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xke=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],GD=pt("search",xke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vke=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],KD=pt("send",vke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bke=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ly=pt("settings",bke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wke=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Eke=pt("shield-alert",wke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ske=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Kc=pt("shield-check",Ske);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ake=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Wc=pt("shield",Ake);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tke=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],q1=pt("sparkles",Tke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],cy=pt("target",kke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nke=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],BN=pt("terminal",Nke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cke=[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]],WD=pt("thumbs-down",Cke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pke=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],Sre=pt("thumbs-up",Pke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ke=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_h=pt("trash-2",_ke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ike=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Ro=pt("trending-down",Ike);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rke=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],on=pt("trending-up",Rke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oke=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ii=pt("triangle-alert",Oke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mke=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ST=pt("upload",Mke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lke=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jke=pt("user",Lke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dke=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]],_I=pt("wallet-cards",Dke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bke=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ih=pt("wallet",Bke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uke=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Are=pt("wand-sparkles",Uke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fke=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ex=pt("x",Fke);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ke=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Mo=pt("zap",$ke),Tre="6.16.0";function zke(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}async function Rs(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,i,s)=>(r[e[s]]=i,r),{})}function $t(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&zke(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function qg(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>qg(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return qg(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${qg(r,e)}: ${qg(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function gs(t,e){return t&&t.code===e}function YD(t){return gs(t,"CALL_EXCEPTION")}function jr(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${qg(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+qg(a))}}s.push(`code=${e}`),s.push(`version=${Tre}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return $t(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&$t(i,{shortMessage:r}),i}function tt(t,e,n,r){if(!t)throw jr(e,n,r)}function ve(t,e,n,r){tt(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function kre(t,e,n){n==null&&(n=""),n&&(n=": "+n),tt(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),tt(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const Vke=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function Nre(t){tt(Vke.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function $h(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),tt(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function Cre(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}ve(!1,"invalid BytesLike value",e||"value",t)}function Et(t,e){return Cre(t,e,!1)}function ys(t,e){return Cre(t,e,!0)}function vr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function UN(t){return vr(t,!0)||t instanceof Uint8Array}const UV="0123456789abcdef";function ct(t){const e=Et(t);let n="0x";for(let r=0;r<e.length;r++){const i=e[r];n+=UV[(i&240)>>4]+UV[i&15]}return n}function Ln(t){return"0x"+t.map(e=>ct(e).substring(2)).join("")}function uy(t){return vr(t,!0)?(t.length-2)/2:Et(t).length}function xr(t,e,n){const r=Et(t);return n!=null&&n>r.length&&tt(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),ct(r.slice(e??0,n??r.length))}function qgt(t){let e=ct(t).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function Pre(t,e,n){const r=Et(t);tt(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),n?i.set(r,e-r.length):i.set(r,0),ct(i)}function Sd(t,e){return Pre(t,e,!0)}function Hke(t,e){return Pre(t,e,!1)}const rE=BigInt(0),Bl=BigInt(1),Gg=9007199254740991;function AT(t,e){const n=FN(t,"value"),r=BigInt(nn(e,"width"));if(tt(n>>r===rE,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Bl){const i=(Bl<<r)-Bl;return-((~n&i)+Bl)}return n}function _re(t,e){let n=It(t,"value");const r=BigInt(nn(e,"width")),i=Bl<<r-Bl;if(n<rE){n=-n,tt(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const s=(Bl<<r)-Bl;return(~n&s)+Bl}else tt(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Vp(t,e){const n=FN(t,"value"),r=BigInt(nn(e,"bits"));return n&(Bl<<r)-Bl}function It(t,e){switch(typeof t){case"bigint":return t;case"number":return ve(Number.isInteger(t),"underflow",e||"value",t),ve(t>=-Gg&&t<=Gg,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){ve(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}ve(!1,"invalid BigNumberish value",e||"value",t)}function FN(t,e){const n=It(t,e);return tt(n>=rE,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const FV="0123456789abcdef";function iE(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=FV[n>>4],e+=FV[n&15];return BigInt(e)}return It(t)}function nn(t,e){switch(typeof t){case"bigint":return ve(t>=-Gg&&t<=Gg,"overflow",e||"value",t),Number(t);case"number":return ve(Number.isInteger(t),"underflow",e||"value",t),ve(t>=-Gg&&t<=Gg,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return nn(BigInt(t),e)}catch(n){ve(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}ve(!1,"invalid numeric value",e||"value",t)}function qke(t){return nn(iE(t))}function Ad(t,e){const n=FN(t,"value");let r=n.toString(16);if(e==null)r.length%2&&(r="0"+r);else{const i=nn(e,"width");if(i===0&&n===rE)return"0x";for(tt(i*2>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<i*2;)r="0"+r}return"0x"+r}function zr(t,e){const n=FN(t,"value");if(n===rE){const s=e!=null?nn(e,"width"):0;return new Uint8Array(s)}let r=n.toString(16);if(r.length%2&&(r="0"+r),e!=null){const s=nn(e,"width");for(;r.length<s*2;)r="00"+r;tt(s*2===r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:t})}const i=new Uint8Array(r.length/2);for(let s=0;s<i.length;s++){const o=s*2;i[s]=parseInt(r.substring(o,o+2),16)}return i}function Dl(t){let e=ct(UN(t)?t:zr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const TT="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let pA=null;function Gke(t){if(pA==null){pA={};for(let n=0;n<TT.length;n++)pA[TT[n]]=BigInt(n)}const e=pA[t];return ve(e!=null,"invalid base58 value","letter",t),e}const Kke=BigInt(0),iM=BigInt(58);function Ire(t){const e=Et(t);let n=iE(e),r="";for(;n;)r=TT[Number(n%iM)]+r,n/=iM;for(let i=0;i<e.length&&!e[i];i++)r=TT[0]+r;return r}function Wke(t){let e=Kke;for(let n=0;n<t.length;n++)e*=iM,e+=Gke(t[n]);return e}function Yke(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Et(e)}function Jke(t){const e=Et(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var Iy;class Rre{constructor(e,n,r){Ce(this,"filter");Ce(this,"emitter");Fe(this,Iy);ge(this,Iy,n),$t(this,{emitter:e,filter:r})}async removeListener(){re(this,Iy)!=null&&await this.emitter.off(this.filter,re(this,Iy))}}Iy=new WeakMap;function Xke(t,e,n,r,i){ve(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Ore(t,e,n,r,i){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)s++;return s}return t==="OVERRUN"?n.length-e-1:0}function Qke(t,e,n,r,i){return t==="OVERLONG"?(ve(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),Ore(t,e,n))}const Zke=Object.freeze({error:Xke,ignore:Ore,replace:Qke});function Mre(t,e){e==null&&(e=Zke.error);const n=Et(t,"bytes"),r=[];let i=0;for(;i<n.length;){const s=n[i++];if(s>>7===0){r.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,n,r):i+=e("BAD_PREFIX",i-1,n,r);continue}if(i-1+o>=n.length){i+=e("OVERRUN",i-1,n,r);continue}let l=s&(1<<8-o-1)-1;for(let c=0;c<o;c++){let d=n[i];if((d&192)!=128){i+=e("MISSING_CONTINUE",i,n,r),l=null;break}l=l<<6|d&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-o,n,r,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-o,n,r,l);continue}if(l<=a){i+=e("OVERLONG",i-1-o,n,r,l);continue}r.push(l)}}return r}function bi(t,e){ve(typeof t=="string","invalid string value","str",t),e!=null&&(Nre(e),t=t.normalize(e));let n=[];for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(i&63|128);else if((i&64512)==55296){r++;const s=t.charCodeAt(r);ve(r<t.length&&(s&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((i&1023)<<10)+(s&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128)}return new Uint8Array(n)}function eNe(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function kT(t,e){return eNe(Mre(t,e))}function Ggt(t,e){return Mre(bi(t,e))}function Lre(t){async function e(n,r){tt(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const i=n.url.split(":")[0].toLowerCase();tt(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),tt(i==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const o=new AbortController,a=setTimeout(()=>{s=jr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{s=jr("request cancelled","CANCELLED"),o.abort()});const l=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let c;try{c=await fetch(n.url,l)}catch(g){throw clearTimeout(a),s||g}clearTimeout(a);const d={};c.headers.forEach((g,v)=>{d[v.toLowerCase()]=g});const h=await c.arrayBuffer(),m=h==null?null:new Uint8Array(h);return{statusCode:c.status,statusMessage:c.statusText,headers:d,body:m}}return e}const tNe=12,nNe=250;let $V=Lre();const rNe=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),iNe=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let II=!1;async function jre(t,e){try{const n=t.match(rNe);if(!n)throw new Error("invalid data");return new Eh(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Yke(n[3]):oNe(n[3]))}catch{return new Eh(599,"BAD REQUEST (invalid data: URI)",{},null,new Td(t))}}function Dre(t){async function e(n,r){try{const i=n.match(iNe);if(!i)throw new Error("invalid link");return new Td(`${t}${i[2]}`)}catch{return new Eh(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Td(n))}}return e}const mA={data:jre,ipfs:Dre("https://gateway.ipfs.io/ipfs/")},Bre=new WeakMap;var em,nh;class sNe{constructor(e){Fe(this,em);Fe(this,nh);ge(this,em,[]),ge(this,nh,!1),Bre.set(e,()=>{if(!re(this,nh)){ge(this,nh,!0);for(const n of re(this,em))setTimeout(()=>{n()},0);ge(this,em,[])}})}addListener(e){tt(!re(this,nh),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),re(this,em).push(e)}get cancelled(){return re(this,nh)}checkSignal(){tt(!this.cancelled,"cancelled","CANCELLED",{})}}em=new WeakMap,nh=new WeakMap;function gA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var Ry,Oy,_l,Gu,My,Ly,Ui,Jo,Ku,tm,nm,rm,vc,Il,rh,im,e1;const xN=class xN{constructor(e){Fe(this,im);Fe(this,Ry);Fe(this,Oy);Fe(this,_l);Fe(this,Gu);Fe(this,My);Fe(this,Ly);Fe(this,Ui);Fe(this,Jo);Fe(this,Ku);Fe(this,tm);Fe(this,nm);Fe(this,rm);Fe(this,vc);Fe(this,Il);Fe(this,rh);ge(this,Ly,String(e)),ge(this,Ry,!1),ge(this,Oy,!0),ge(this,_l,{}),ge(this,Gu,""),ge(this,My,3e5),ge(this,Il,{slotInterval:nNe,maxAttempts:tNe}),ge(this,rh,null)}get url(){return re(this,Ly)}set url(e){ge(this,Ly,String(e))}get body(){return re(this,Ui)==null?null:new Uint8Array(re(this,Ui))}set body(e){if(e==null)ge(this,Ui,void 0),ge(this,Jo,void 0);else if(typeof e=="string")ge(this,Ui,bi(e)),ge(this,Jo,"text/plain");else if(e instanceof Uint8Array)ge(this,Ui,e),ge(this,Jo,"application/octet-stream");else if(typeof e=="object")ge(this,Ui,bi(JSON.stringify(e))),ge(this,Jo,"application/json");else throw new Error("invalid body")}hasBody(){return re(this,Ui)!=null}get method(){return re(this,Gu)?re(this,Gu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),ge(this,Gu,String(e).toUpperCase())}get headers(){const e=Object.assign({},re(this,_l));return re(this,Ku)&&(e.authorization=`Basic ${Jke(bi(re(this,Ku)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&re(this,Jo)&&(e["content-type"]=re(this,Jo)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){re(this,_l)[String(e).toLowerCase()]=String(n)}clearHeaders(){ge(this,_l,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return re(this,Ku)||null}setCredentials(e,n){ve(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),ge(this,Ku,`${e}:${n}`)}get allowGzip(){return re(this,Oy)}set allowGzip(e){ge(this,Oy,!!e)}get allowInsecureAuthentication(){return!!re(this,Ry)}set allowInsecureAuthentication(e){ge(this,Ry,!!e)}get timeout(){return re(this,My)}set timeout(e){ve(e>=0,"timeout must be non-zero","timeout",e),ge(this,My,e)}get preflightFunc(){return re(this,tm)||null}set preflightFunc(e){ge(this,tm,e)}get processFunc(){return re(this,nm)||null}set processFunc(e){ge(this,nm,e)}get retryFunc(){return re(this,rm)||null}set retryFunc(e){ge(this,rm,e)}get getUrlFunc(){return re(this,rh)||$V}set getUrlFunc(e){ge(this,rh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${re(this,Ui)?ct(re(this,Ui)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(re(this,Il).slotInterval=e.slotInterval),e.maxAttempts!=null&&(re(this,Il).maxAttempts=e.maxAttempts)}send(){return tt(re(this,vc)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),ge(this,vc,new sNe(this)),st(this,im,e1).call(this,0,zV()+this.timeout,0,this,new Eh(0,"",{},null,this))}cancel(){tt(re(this,vc)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Bre.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();tt(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new xN(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,ge(i,_l,Object.assign({},re(this,_l))),re(this,Ui)&&ge(i,Ui,new Uint8Array(re(this,Ui))),ge(i,Jo,re(this,Jo)),i}clone(){const e=new xN(this.url);return ge(e,Gu,re(this,Gu)),re(this,Ui)&&ge(e,Ui,re(this,Ui)),ge(e,Jo,re(this,Jo)),ge(e,_l,Object.assign({},re(this,_l))),ge(e,Ku,re(this,Ku)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),ge(e,tm,re(this,tm)),ge(e,nm,re(this,nm)),ge(e,rm,re(this,rm)),ge(e,Il,Object.assign({},re(this,Il))),ge(e,rh,re(this,rh)),e}static lockConfig(){II=!0}static getGateway(e){return mA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(II)throw new Error("gateways locked");mA[e]=n}static registerGetUrl(e){if(II)throw new Error("gateways locked");$V=e}static createGetUrlFunc(e){return Lre(e)}static createDataGateway(){return jre}static createIpfsGatewayFunc(e){return Dre(e)}};Ry=new WeakMap,Oy=new WeakMap,_l=new WeakMap,Gu=new WeakMap,My=new WeakMap,Ly=new WeakMap,Ui=new WeakMap,Jo=new WeakMap,Ku=new WeakMap,tm=new WeakMap,nm=new WeakMap,rm=new WeakMap,vc=new WeakMap,Il=new WeakMap,rh=new WeakMap,im=new WeakSet,e1=async function(e,n,r,i,s){var d,h,m;if(e>=re(this,Il).maxAttempts)return s.makeServerError("exceeded maximum retry limit");tt(zV()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await aNe(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in mA){const g=await mA[a](o.url,gA(re(i,vc)));if(g instanceof Eh){let v=g;if(this.processFunc){gA(re(i,vc));try{v=await this.processFunc(o,v)}catch(x){(x.throttle==null||typeof x.stall!="number")&&v.makeServerError("error in post-processing function",x).assertOk()}}return v}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const l=await this.getUrlFunc(o,gA(re(i,vc)));let c=new Eh(l.statusCode,l.statusMessage,l.headers,l.body,i);if(c.statusCode===301||c.statusCode===302){try{const g=c.headers.location||"";return st(d=o.redirect(g),im,e1).call(d,e+1,n,0,i,c)}catch{}return c}else if(c.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,c,e))){const g=c.headers["retry-after"];let v=re(this,Il).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(v=parseInt(g)),st(h=o.clone(),im,e1).call(h,e+1,n,v,i,c)}if(this.processFunc){gA(re(i,vc));try{c=await this.processFunc(o,c)}catch(g){(g.throttle==null||typeof g.stall!="number")&&c.makeServerError("error in post-processing function",g).assertOk();let v=re(this,Il).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return g.stall>=0&&(v=g.stall),st(m=o.clone(),im,e1).call(m,e+1,n,v,i,c)}}return c};let Td=xN;var Ow,Mw,Lw,Xo,jy,sm;const YB=class YB{constructor(e,n,r,i,s){Fe(this,Ow);Fe(this,Mw);Fe(this,Lw);Fe(this,Xo);Fe(this,jy);Fe(this,sm);ge(this,Ow,e),ge(this,Mw,n),ge(this,Lw,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),ge(this,Xo,i==null?null:new Uint8Array(i)),ge(this,jy,s||null),ge(this,sm,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${re(this,Xo)?ct(re(this,Xo)):"null"}>`}get statusCode(){return re(this,Ow)}get statusMessage(){return re(this,Mw)}get headers(){return Object.assign({},re(this,Lw))}get body(){return re(this,Xo)==null?null:new Uint8Array(re(this,Xo))}get bodyText(){try{return re(this,Xo)==null?"":kT(re(this,Xo))}catch{tt(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{tt(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const i=n[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new YB(599,r,this.headers,this.body,re(this,jy)||void 0);return ge(i,sm,{message:e,error:n}),i}throwThrottleError(e,n){n==null?n=-1:ve(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw $t(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return re(this,Xo)!=null}get request(){return re(this,jy)}ok(){return re(this,sm).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=re(this,sm);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{re(this,Xo)&&(i=kT(re(this,Xo)))}catch{}tt(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Ow=new WeakMap,Mw=new WeakMap,Lw=new WeakMap,Xo=new WeakMap,jy=new WeakMap,sm=new WeakMap;let Eh=YB;function zV(){return new Date().getTime()}function oNe(t){return bi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function aNe(t){return new Promise(e=>setTimeout(e,t))}const lNe=BigInt(-1),Al=BigInt(0),Kg=BigInt(1),cNe=BigInt(5),sg={};let dy="0000";for(;dy.length<80;)dy+=dy;function yp(t){let e=dy;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Nb(t,e,n){const r=BigInt(e.width);if(e.signed){const i=Kg<<r-Kg;tt(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>Al?t=AT(Vp(t,r),r):t=-AT(Vp(-t,r),r)}else{const i=Kg<<r;tt(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-Kg}return t}function RI(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ve(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,l,c)=>s[a]==null?c:(ve(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}ve(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),ve(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function uNe(t,e){let n="";t<Al&&(n="-",t*=lNe);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=dy+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var Rl,ir,Ys,Kn,Tp,Du,sM,oM,aM,lM;const Qf=class Qf{constructor(e,n,r){Fe(this,Kn);Ce(this,"format");Fe(this,Rl);Fe(this,ir);Fe(this,Ys);Ce(this,"_value");$h(e,sg,"FixedNumber"),ge(this,ir,n),ge(this,Rl,r);const i=uNe(n,r.decimals);$t(this,{format:r.name,_value:i}),ge(this,Ys,yp(r.decimals))}get signed(){return re(this,Rl).signed}get width(){return re(this,Rl).width}get decimals(){return re(this,Rl).decimals}get value(){return re(this,ir)}addUnsafe(e){return st(this,Kn,sM).call(this,e)}add(e){return st(this,Kn,sM).call(this,e,"add")}subUnsafe(e){return st(this,Kn,oM).call(this,e)}sub(e){return st(this,Kn,oM).call(this,e,"sub")}mulUnsafe(e){return st(this,Kn,aM).call(this,e)}mul(e){return st(this,Kn,aM).call(this,e,"mul")}mulSignal(e){st(this,Kn,Tp).call(this,e);const n=re(this,ir)*re(e,ir);return tt(n%re(this,Ys)===Al,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),st(this,Kn,Du).call(this,n/re(this,Ys),"mulSignal")}divUnsafe(e){return st(this,Kn,lM).call(this,e)}div(e){return st(this,Kn,lM).call(this,e,"div")}divSignal(e){tt(re(e,ir)!==Al,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),st(this,Kn,Tp).call(this,e);const n=re(this,ir)*re(this,Ys);return tt(n%re(e,ir)===Al,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),st(this,Kn,Du).call(this,n/re(e,ir),"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=yp(i):i<0&&(n*=yp(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=re(this,ir);return re(this,ir)<Al&&(e-=re(this,Ys)-Kg),e=re(this,ir)/re(this,Ys)*re(this,Ys),st(this,Kn,Du).call(this,e,"floor")}ceiling(){let e=re(this,ir);return re(this,ir)>Al&&(e+=re(this,Ys)-Kg),e=re(this,ir)/re(this,Ys)*re(this,Ys),st(this,Kn,Du).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=cNe*yp(n-1);let i=this.value+r;const s=yp(n);return i=i/s*s,Nb(i,re(this,Rl),"round"),new Qf(sg,i,re(this,Rl))}isZero(){return re(this,ir)===Al}isNegative(){return re(this,ir)<Al}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Qf.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:nn(n),s=RI(r);let o=It(e,"value");const a=i-s.decimals;if(a>0){const l=yp(a);tt(o%l===Al,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=yp(-a));return Nb(o,s,"fromValue"),new Qf(sg,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);ve(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=RI(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=dy;tt(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return Nb(a,i,"fromString"),new Qf(sg,a,i)}static fromBytes(e,n){let r=iE(Et(e,"value"));const i=RI(n);return i.signed&&(r=AT(r,i.width)),Nb(r,i,"fromBytes"),new Qf(sg,r,i)}};Rl=new WeakMap,ir=new WeakMap,Ys=new WeakMap,Kn=new WeakSet,Tp=function(e){ve(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Du=function(e,n){return e=Nb(e,re(this,Rl),n),new Qf(sg,e,re(this,Rl))},sM=function(e,n){return st(this,Kn,Tp).call(this,e),st(this,Kn,Du).call(this,re(this,ir)+re(e,ir),n)},oM=function(e,n){return st(this,Kn,Tp).call(this,e),st(this,Kn,Du).call(this,re(this,ir)-re(e,ir),n)},aM=function(e,n){return st(this,Kn,Tp).call(this,e),st(this,Kn,Du).call(this,re(this,ir)*re(e,ir)/re(this,Ys),n)},lM=function(e,n){return tt(re(e,ir)!==Al,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),st(this,Kn,Tp).call(this,e),st(this,Kn,Du).call(this,re(this,ir)*re(this,Ys)/re(e,ir),n)};let NT=Qf;function dNe(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function VV(t,e,n){let r=0;for(let i=0;i<n;i++)r=r*256+t[e+i];return r}function HV(t,e,n,r){const i=[];for(;n<e+1+r;){const s=Ure(t,n);i.push(s.result),n+=s.consumed,tt(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:i}}function Ure(t,e){tt(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{tt(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const i=VV(t,e+1,r);return n(e+1+r+i),HV(t,e,e+1+r,r+i)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),HV(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const i=VV(t,e+1,r);n(e+1+r+i);const s=ct(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:s}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const i=ct(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:dNe(t[e])}}function sE(t){const e=Et(t,"data"),n=Ure(e,0);return ve(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function qV(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Fre(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(s){r=r.concat(Fre(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=qV(r.length);return i.unshift(247+i.length),i.concat(r)}const e=Array.prototype.slice.call(Et(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=qV(e.length);return n.unshift(183+n.length),n.concat(e)}const GV="0123456789abcdef";function Fc(t){let e="0x";for(const n of Fre(t))e+=GV[n>>4],e+=GV[n&15];return e}const $re=["wei","kwei","mwei","gwei","szabo","finney","ether"];function zre(t,e){let n=18;if(typeof e=="string"){const r=$re.indexOf(e);ve(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=nn(e,"unit"));return NT.fromValue(t,n,{decimals:n,width:512}).toString()}function fNe(t,e){ve(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=$re.indexOf(e);ve(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=nn(e,"unit"));return NT.fromString(t,{decimals:n,width:512}).value}function Kgt(t){return zre(t,18)}function Wgt(t){return fNe(t,18)}function hNe(t){const e=Et(t,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=ct(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const io=32,cM=new Uint8Array(io),pNe=["then"],yA={},Vre=new WeakMap;function Mp(t){return Vre.get(t)}function KV(t,e){Vre.set(t,e)}function Cb(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function uM(t,e,n){return t.indexOf(null)>=0?e.map((r,i)=>r instanceof Sx?uM(Mp(r),r,n):r):t.reduce((r,i,s)=>{let o=e.getValue(i);return i in r||(n&&o instanceof Sx&&(o=uM(Mp(o),o,n)),r[i]=o),r},{})}var Dy;const ty=class ty extends Array{constructor(...n){const r=n[0];let i=n[1],s=(n[2]||[]).slice(),o=!0;r!==yA&&(i=n,s=[],o=!1);super(i.length);Fe(this,Dy);i.forEach((c,d)=>{this[d]=c});const a=s.reduce((c,d)=>(typeof d=="string"&&c.set(d,(c.get(d)||0)+1),c),new Map);if(KV(this,Object.freeze(i.map((c,d)=>{const h=s[d];return h!=null&&a.get(h)===1?h:null}))),ge(this,Dy,[]),re(this,Dy)==null&&re(this,Dy),!o)return;Object.freeze(this);const l=new Proxy(this,{get:(c,d,h)=>{if(typeof d=="string"){if(d.match(/^[0-9]+$/)){const g=nn(d,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const v=c[g];return v instanceof Error&&Cb(`index ${g}`,v),v}if(pNe.indexOf(d)>=0)return Reflect.get(c,d,h);const m=c[d];if(m instanceof Function)return function(...g){return m.apply(this===h?c:this,g)};if(!(d in c))return c.getValue.apply(this===h?c:this,[d])}return Reflect.get(c,d,h)}});return KV(l,Mp(this)),l}toArray(n){const r=[];return this.forEach((i,s)=>{i instanceof Error&&Cb(`index ${s}`,i),n&&i instanceof ty&&(i=i.toArray(n)),r.push(i)}),r}toObject(n){const r=Mp(this);return r.reduce((i,s,o)=>(tt(s!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),uM(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const i=Mp(this),s=[],o=[];for(let a=n;a<r;a++)s.push(this[a]),o.push(i[a]);return new ty(yA,s,o)}filter(n,r){const i=Mp(this),s=[],o=[];for(let a=0;a<this.length;a++){const l=this[a];l instanceof Error&&Cb(`index ${a}`,l),n.call(r,l,a,this)&&(s.push(l),o.push(i[a]))}return new ty(yA,s,o)}map(n,r){const i=[];for(let s=0;s<this.length;s++){const o=this[s];o instanceof Error&&Cb(`index ${s}`,o),i.push(n.call(r,o,s,this))}return i}getValue(n){const r=Mp(this).indexOf(n);if(r===-1)return;const i=this[r];return i instanceof Error&&Cb(`property ${JSON.stringify(n)}`,i.error),i}static fromItems(n,r){return new ty(yA,n,r)}};Dy=new WeakMap;let Sx=ty;function Ygt(t){const e=[],n=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{n(o,i[s])}catch(a){e.push({path:o,error:a})}}};return n([],t),e}function WV(t){let e=zr(t);return tt(e.length<=io,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:io,offset:e.length}),e.length!==io&&(e=ys(Ln([cM.slice(e.length%io),e]))),e}class $d{constructor(e,n,r,i){Ce(this,"name");Ce(this,"type");Ce(this,"localName");Ce(this,"dynamic");$t(this,{name:e,type:n,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){ve(!1,e,this.localName,n)}}var Wu,om,By,R2;class dM{constructor(){Fe(this,By);Fe(this,Wu);Fe(this,om);ge(this,Wu,[]),ge(this,om,0)}get data(){return Ln(re(this,Wu))}get length(){return re(this,om)}appendWriter(e){return st(this,By,R2).call(this,ys(e.data))}writeBytes(e){let n=ys(e);const r=n.length%io;return r&&(n=ys(Ln([n,cM.slice(r)]))),st(this,By,R2).call(this,n)}writeValue(e){return st(this,By,R2).call(this,WV(e))}writeUpdatableValue(){const e=re(this,Wu).length;return re(this,Wu).push(cM),ge(this,om,re(this,om)+io),n=>{re(this,Wu)[e]=WV(n)}}}Wu=new WeakMap,om=new WeakMap,By=new WeakSet,R2=function(e){return re(this,Wu).push(e),ge(this,om,re(this,om)+e.length),e.length};var So,Qo,am,lm,ih,n0,hM,Hre;const JB=class JB{constructor(e,n,r){Fe(this,n0);Ce(this,"allowLoose");Fe(this,So);Fe(this,Qo);Fe(this,am);Fe(this,lm);Fe(this,ih);$t(this,{allowLoose:!!n}),ge(this,So,ys(e)),ge(this,am,0),ge(this,lm,null),ge(this,ih,r??1024),ge(this,Qo,0)}get data(){return ct(re(this,So))}get dataLength(){return re(this,So).length}get consumed(){return re(this,Qo)}get bytes(){return new Uint8Array(re(this,So))}subReader(e){const n=new JB(re(this,So).slice(re(this,Qo)+e),this.allowLoose,re(this,ih));return ge(n,lm,this),n}readBytes(e,n){let r=st(this,n0,Hre).call(this,0,e,!!n);return st(this,n0,hM).call(this,e),ge(this,Qo,re(this,Qo)+r.length),r.slice(0,e)}readValue(){return iE(this.readBytes(io))}readIndex(){return qke(this.readBytes(io))}};So=new WeakMap,Qo=new WeakMap,am=new WeakMap,lm=new WeakMap,ih=new WeakMap,n0=new WeakSet,hM=function(e){var n;if(re(this,lm))return st(n=re(this,lm),n0,hM).call(n,e);ge(this,am,re(this,am)+e),tt(re(this,ih)<1||re(this,am)<=re(this,ih)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${re(this,ih)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:ys(re(this,So)),offset:re(this,Qo),length:e,info:{bytesRead:re(this,am),dataLength:this.dataLength}})},Hre=function(e,n,r){let i=Math.ceil(n/io)*io;return re(this,Qo)+i>re(this,So).length&&(this.allowLoose&&r&&re(this,Qo)+n<=re(this,So).length?i=n:tt(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:ys(re(this,So)),length:re(this,So).length,offset:re(this,Qo)+i})),re(this,So).slice(re(this,Qo),re(this,Qo)+i)};let fM=JB;function ra(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function JD(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function qre(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ra(t.outputLen),ra(t.blockLen)}function Ax(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Gre(t,e){JD(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const OI=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kre=t=>t instanceof Uint8Array,O2=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),M2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),dc=(t,e)=>t<<32-e|t>>>e,mNe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!mNe)throw new Error("Non little-endian hardware is not supported");const gNe=async()=>{};async function YV(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);const s=Date.now()-r;s>=0&&s<e||(await gNe(),r+=s)}}function yNe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Tx(t){if(typeof t=="string"&&(t=yNe(t)),!Kre(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function xNe(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!Kre(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}let XD=class{clone(){return this._cloneInto()}};const vNe={}.toString;function Wre(t,e){if(e!==void 0&&vNe.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function $N(t){const e=r=>t().update(Tx(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function bNe(t=32){if(OI&&typeof OI.getRandomValues=="function")return OI.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}let Yre=class extends XD{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,qre(e);const r=Tx(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Ax(this),this.iHash.update(e),this}digestInto(e){Ax(this),JD(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const zN=(t,e,n)=>new Yre(t,e).update(n).digest();zN.create=(t,e)=>new Yre(t,e);function wNe(t,e,n,r){qre(t);const i=Wre({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(ra(s),ra(o),ra(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=Tx(e),c=Tx(n),d=new Uint8Array(o),h=zN.create(t,l),m=h._cloneInto().update(c);return{c:s,dkLen:o,asyncTick:a,DK:d,PRF:h,PRFSalt:m}}function ENe(t,e,n,r,i){return t.destroy(),e.destroy(),r&&r.destroy(),i.fill(0),n}function QD(t,e,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=wNe(t,e,n,r);let c;const d=new Uint8Array(4),h=M2(d),m=new Uint8Array(a.outputLen);for(let g=1,v=0;v<s;g++,v+=a.outputLen){const x=o.subarray(v,v+a.outputLen);h.setInt32(0,g,!1),(c=l._cloneInto(c)).update(d).digestInto(m),x.set(m.subarray(0,x.length));for(let b=1;b<i;b++){a._cloneInto(c).update(m).digestInto(m);for(let w=0;w<x.length;w++)x[w]^=m[w]}}return ENe(a,l,o,c,m)}function SNe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}class ZD extends XD{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=M2(this.buffer)}update(e){Ax(this);const{view:n,buffer:r,blockLen:i}=this;e=Tx(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=M2(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ax(this),Gre(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;SNe(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=M2(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const ANe=(t,e,n)=>t&e^~t&n,TNe=(t,e,n)=>t&e^t&n^e&n,kNe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_f=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),If=new Uint32Array(64);let NNe=class extends ZD{constructor(){super(64,32,8,!1),this.A=_f[0]|0,this.B=_f[1]|0,this.C=_f[2]|0,this.D=_f[3]|0,this.E=_f[4]|0,this.F=_f[5]|0,this.G=_f[6]|0,this.H=_f[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)If[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=If[h-15],g=If[h-2],v=dc(m,7)^dc(m,18)^m>>>3,x=dc(g,17)^dc(g,19)^g>>>10;If[h]=x+If[h-7]+v+If[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:d}=this;for(let h=0;h<64;h++){const m=dc(a,6)^dc(a,11)^dc(a,25),g=d+m+ANe(a,l,c)+kNe[h]+If[h]|0,x=(dc(r,2)^dc(r,13)^dc(r,22))+TNe(r,i,s)|0;d=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+x|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,l,c,d)}roundClean(){If.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const rv=$N(()=>new NNe),xA=BigInt(2**32-1),pM=BigInt(32);function Jre(t,e=!1){return e?{h:Number(t&xA),l:Number(t>>pM&xA)}:{h:Number(t>>pM&xA)|0,l:Number(t&xA)|0}}function Xre(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Jre(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const CNe=(t,e)=>BigInt(t>>>0)<<pM|BigInt(e>>>0),PNe=(t,e,n)=>t>>>n,_Ne=(t,e,n)=>t<<32-n|e>>>n,INe=(t,e,n)=>t>>>n|e<<32-n,RNe=(t,e,n)=>t<<32-n|e>>>n,ONe=(t,e,n)=>t<<64-n|e>>>n-32,MNe=(t,e,n)=>t>>>n-32|e<<64-n,LNe=(t,e)=>e,jNe=(t,e)=>t,Qre=(t,e,n)=>t<<n|e>>>32-n,Zre=(t,e,n)=>e<<n|t>>>32-n,eie=(t,e,n)=>e<<n-32|t>>>64-n,tie=(t,e,n)=>t<<n-32|e>>>64-n;function DNe(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const BNe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),UNe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,FNe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),$Ne=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,zNe=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),VNe=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,mn={fromBig:Jre,split:Xre,toBig:CNe,shrSH:PNe,shrSL:_Ne,rotrSH:INe,rotrSL:RNe,rotrBH:ONe,rotrBL:MNe,rotr32H:LNe,rotr32L:jNe,rotlSH:Qre,rotlSL:Zre,rotlBH:eie,rotlBL:tie,add:DNe,add3L:BNe,add3H:UNe,add4L:FNe,add4H:$Ne,add5H:VNe,add5L:zNe},[HNe,qNe]=mn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Rf=new Uint32Array(80),Of=new Uint32Array(80);let GNe=class extends ZD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:d,Fh:h,Fl:m,Gh:g,Gl:v,Hh:x,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b]}set(e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=d|0,this.Fh=h|0,this.Fl=m|0,this.Gh=g|0,this.Gl=v|0,this.Hh=x|0,this.Hl=b|0}process(e,n){for(let N=0;N<16;N++,n+=4)Rf[N]=e.getUint32(n),Of[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const O=Rf[N-15]|0,D=Of[N-15]|0,_=mn.rotrSH(O,D,1)^mn.rotrSH(O,D,8)^mn.shrSH(O,D,7),F=mn.rotrSL(O,D,1)^mn.rotrSL(O,D,8)^mn.shrSL(O,D,7),z=Rf[N-2]|0,L=Of[N-2]|0,$=mn.rotrSH(z,L,19)^mn.rotrBH(z,L,61)^mn.shrSH(z,L,6),G=mn.rotrSL(z,L,19)^mn.rotrBL(z,L,61)^mn.shrSL(z,L,6),V=mn.add4L(F,G,Of[N-7],Of[N-16]),U=mn.add4H(V,_,$,Rf[N-7],Rf[N-16]);Rf[N]=U|0,Of[N]=V|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:d,Eh:h,El:m,Fh:g,Fl:v,Gh:x,Gl:b,Hh:w,Hl:k}=this;for(let N=0;N<80;N++){const O=mn.rotrSH(h,m,14)^mn.rotrSH(h,m,18)^mn.rotrBH(h,m,41),D=mn.rotrSL(h,m,14)^mn.rotrSL(h,m,18)^mn.rotrBL(h,m,41),_=h&g^~h&x,F=m&v^~m&b,z=mn.add5L(k,D,F,qNe[N],Of[N]),L=mn.add5H(z,w,O,_,HNe[N],Rf[N]),$=z|0,G=mn.rotrSH(r,i,28)^mn.rotrBH(r,i,34)^mn.rotrBH(r,i,39),V=mn.rotrSL(r,i,28)^mn.rotrBL(r,i,34)^mn.rotrBL(r,i,39),U=r&s^r&a^s&a,A=i&o^i&l^o&l;w=x|0,k=b|0,x=g|0,b=v|0,g=h|0,v=m|0,{h,l:m}=mn.add(c|0,d|0,L|0,$|0),c=a|0,d=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const I=mn.add3L($,V,A);r=mn.add3H(I,L,G,U),i=I|0}({h:r,l:i}=mn.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=mn.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=mn.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:d}=mn.add(this.Dh|0,this.Dl|0,c|0,d|0),{h,l:m}=mn.add(this.Eh|0,this.El|0,h|0,m|0),{h:g,l:v}=mn.add(this.Fh|0,this.Fl|0,g|0,v|0),{h:x,l:b}=mn.add(this.Gh|0,this.Gl|0,x|0,b|0),{h:w,l:k}=mn.add(this.Hh|0,this.Hl|0,w|0,k|0),this.set(r,i,s,o,a,l,c,d,h,m,g,v,x,b,w,k)}roundClean(){Rf.fill(0),Of.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const e8=$N(()=>new GNe);function KNe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const JV=KNe(),XV=JV.crypto||JV.msCrypto;function nie(t){switch(t){case"sha256":return rv.create();case"sha512":return e8.create()}ve(!1,"invalid hashing algorithm name","algorithm",t)}function WNe(t,e){const n={sha256:rv,sha512:e8}[t];return ve(n!=null,"invalid hmac algorithm","algorithm",t),zN.create(n,e)}function YNe(t,e,n,r,i){const s={sha256:rv,sha512:e8}[i];return ve(s!=null,"invalid pbkdf2 algorithm","algorithm",i),QD(s,t,e,{c:n,dkLen:r})}function JNe(t){tt(XV!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),ve(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return XV.getRandomValues(e),e}let rie=!1;const iie=function(t,e,n){return WNe(t,e).update(n).digest()};let sie=iie;function iv(t,e,n){const r=Et(e,"key"),i=Et(n,"data");return ct(sie(t,r,i))}iv._=iie;iv.lock=function(){rie=!0};iv.register=function(t){if(rie)throw new Error("computeHmac is locked");sie=t};Object.freeze(iv);const[oie,aie,lie]=[[],[],[]],XNe=BigInt(0),Pb=BigInt(1),QNe=BigInt(2),ZNe=BigInt(7),eCe=BigInt(256),tCe=BigInt(113);for(let t=0,e=Pb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],oie.push(2*(5*r+n)),aie.push((t+1)*(t+2)/2%64);let i=XNe;for(let s=0;s<7;s++)e=(e<<Pb^(e>>ZNe)*tCe)%eCe,e&QNe&&(i^=Pb<<(Pb<<BigInt(s))-Pb);lie.push(i)}const[nCe,rCe]=Xre(lie,!0),QV=(t,e,n)=>n>32?eie(t,e,n):Qre(t,e,n),ZV=(t,e,n)=>n>32?tie(t,e,n):Zre(t,e,n);function iCe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=n[l],d=n[l+1],h=QV(c,d,1)^n[a],m=ZV(c,d,1)^n[a+1];for(let g=0;g<50;g+=10)t[o+g]^=h,t[o+g+1]^=m}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=aie[o],l=QV(i,s,a),c=ZV(i,s,a),d=oie[o];i=t[d],s=t[d+1],t[d]=l,t[d+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=nCe[r],t[1]^=rCe[r]}n.fill(0)}class t8 extends XD{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ra(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=O2(this.state)}keccak(){iCe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Ax(this);const{blockLen:n,state:r}=this;e=Tx(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ax(this,!1),JD(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ra(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Gre(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new t8(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const sCe=(t,e,n)=>$N(()=>new t8(e,t,n)),oCe=sCe(1,136,256/8);let cie=!1;const uie=function(t){return oCe(t)};let die=uie;function Wn(t){const e=Et(t,"data");return ct(die(e))}Wn._=uie;Wn.lock=function(){cie=!0};Wn.register=function(t){if(cie)throw new TypeError("keccak256 is locked");die=t};Object.freeze(Wn);const aCe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),fie=Uint8Array.from({length:16},(t,e)=>e),lCe=fie.map(t=>(9*t+5)%16);let n8=[fie],r8=[lCe];for(let t=0;t<4;t++)for(let e of[n8,r8])e.push(e[t].map(n=>aCe[n]));const hie=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),cCe=n8.map((t,e)=>t.map(n=>hie[e][n])),uCe=r8.map((t,e)=>t.map(n=>hie[e][n])),dCe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),fCe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),vA=(t,e)=>t<<e|t>>>32-e;function eH(t,e,n,r){return t===0?e^n^r:t===1?e&n|~e&r:t===2?(e|~n)^r:t===3?e&r|n&~r:e^(n|~r)}const bA=new Uint32Array(16);class hCe extends ZD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:n,h2:r,h3:i,h4:s}=this;return[e,n,r,i,s]}set(e,n,r,i,s){this.h0=e|0,this.h1=n|0,this.h2=r|0,this.h3=i|0,this.h4=s|0}process(e,n){for(let g=0;g<16;g++,n+=4)bA[g]=e.getUint32(n,!0);let r=this.h0|0,i=r,s=this.h1|0,o=s,a=this.h2|0,l=a,c=this.h3|0,d=c,h=this.h4|0,m=h;for(let g=0;g<5;g++){const v=4-g,x=dCe[g],b=fCe[g],w=n8[g],k=r8[g],N=cCe[g],O=uCe[g];for(let D=0;D<16;D++){const _=vA(r+eH(g,s,a,c)+bA[w[D]]+x,N[D])+h|0;r=h,h=c,c=vA(a,10)|0,a=s,s=_}for(let D=0;D<16;D++){const _=vA(i+eH(v,o,l,d)+bA[k[D]]+b,O[D])+m|0;i=m,m=d,d=vA(l,10)|0,l=o,o=_}}this.set(this.h1+a+d|0,this.h2+c+m|0,this.h3+h+i|0,this.h4+r+o|0,this.h0+s+l|0)}roundClean(){bA.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const pCe=$N(()=>new hCe);let pie=!1;const mie=function(t){return pCe(t)};let gie=mie;function sv(t){const e=Et(t,"data");return ct(gie(e))}sv._=mie;sv.lock=function(){pie=!0};sv.register=function(t){if(pie)throw new TypeError("ripemd160 is locked");gie=t};Object.freeze(sv);let yie=!1;const xie=function(t,e,n,r,i){return YNe(t,e,n,r,i)};let vie=xie;function zh(t,e,n,r,i){const s=Et(t,"password"),o=Et(e,"salt");return ct(vie(s,o,n,r,i))}zh._=xie;zh.lock=function(){yie=!0};zh.register=function(t){if(yie)throw new Error("pbkdf2 is locked");vie=t};Object.freeze(zh);let bie=!1;const wie=function(t){return new Uint8Array(JNe(t))};let Eie=wie;function md(t){return Eie(t)}md._=wie;md.lock=function(){bie=!0};md.register=function(t){if(bie)throw new Error("randomBytes is locked");Eie=t};Object.freeze(md);const Un=(t,e)=>t<<e|t>>>32-e;function tH(t,e,n,r,i,s){let o=t[e++]^n[r++],a=t[e++]^n[r++],l=t[e++]^n[r++],c=t[e++]^n[r++],d=t[e++]^n[r++],h=t[e++]^n[r++],m=t[e++]^n[r++],g=t[e++]^n[r++],v=t[e++]^n[r++],x=t[e++]^n[r++],b=t[e++]^n[r++],w=t[e++]^n[r++],k=t[e++]^n[r++],N=t[e++]^n[r++],O=t[e++]^n[r++],D=t[e++]^n[r++],_=o,F=a,z=l,L=c,$=d,G=h,V=m,U=g,A=v,I=x,j=b,q=w,K=k,te=N,Y=O,H=D;for(let M=0;M<8;M+=2)$^=Un(_+K|0,7),A^=Un($+_|0,9),K^=Un(A+$|0,13),_^=Un(K+A|0,18),I^=Un(G+F|0,7),te^=Un(I+G|0,9),F^=Un(te+I|0,13),G^=Un(F+te|0,18),Y^=Un(j+V|0,7),z^=Un(Y+j|0,9),V^=Un(z+Y|0,13),j^=Un(V+z|0,18),L^=Un(H+q|0,7),U^=Un(L+H|0,9),q^=Un(U+L|0,13),H^=Un(q+U|0,18),F^=Un(_+L|0,7),z^=Un(F+_|0,9),L^=Un(z+F|0,13),_^=Un(L+z|0,18),V^=Un(G+$|0,7),U^=Un(V+G|0,9),$^=Un(U+V|0,13),G^=Un($+U|0,18),q^=Un(j+I|0,7),A^=Un(q+j|0,9),I^=Un(A+q|0,13),j^=Un(I+A|0,18),K^=Un(H+Y|0,7),te^=Un(K+H|0,9),Y^=Un(te+K|0,13),H^=Un(Y+te|0,18);i[s++]=o+_|0,i[s++]=a+F|0,i[s++]=l+z|0,i[s++]=c+L|0,i[s++]=d+$|0,i[s++]=h+G|0,i[s++]=m+V|0,i[s++]=g+U|0,i[s++]=v+A|0,i[s++]=x+I|0,i[s++]=b+j|0,i[s++]=w+q|0,i[s++]=k+K|0,i[s++]=N+te|0,i[s++]=O+Y|0,i[s++]=D+H|0}function fy(t,e,n,r,i){let s=r+0,o=r+16*i;for(let a=0;a<16;a++)n[o+a]=t[e+(2*i-1)*16+a];for(let a=0;a<i;a++,s+=16,e+=16)tH(n,o,t,e,n,s),a>0&&(o+=16),tH(n,s,t,e+=16,n,o)}function Sie(t,e,n){const r=Wre({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:i,r:s,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:d}=r;if(ra(i),ra(s),ra(o),ra(a),ra(l),ra(c),d!==void 0&&typeof d!="function")throw new Error("progressCb should be function");const h=128*s,m=h/4;if(i<=1||(i&i-1)!==0||i>=2**(h/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/h)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=h*(i+o);if(g>c)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${c} (maxmem)`);const v=QD(rv,t,e,{c:1,dkLen:h*o}),x=O2(v),b=O2(new Uint8Array(h*i)),w=O2(new Uint8Array(h));let k=()=>{};if(d){const N=2*i*o,O=Math.max(Math.floor(N/1e4),1);let D=0;k=()=>{D++,d&&(!(D%O)||D===N)&&d(D/N)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:m,V:b,B32:x,B:v,tmp:w,blockMixCb:k,asyncTick:l}}function Aie(t,e,n,r,i){const s=QD(rv,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),i.fill(0),s}function mCe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:d,tmp:h,blockMixCb:m}=Sie(t,e,n);for(let g=0;g<s;g++){const v=a*g;for(let x=0;x<a;x++)l[x]=c[v+x];for(let x=0,b=0;x<r-1;x++)fy(l,b,l,b+=a,i),m();fy(l,(r-1)*a,c,v,i),m();for(let x=0;x<r;x++){const b=c[v+a-16]%r;for(let w=0;w<a;w++)h[w]=c[v+w]^l[b*a+w];fy(h,0,c,v,i),m()}}return Aie(t,o,d,l,h)}async function gCe(t,e,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:d,tmp:h,blockMixCb:m,asyncTick:g}=Sie(t,e,n);for(let v=0;v<s;v++){const x=a*v;for(let w=0;w<a;w++)l[w]=c[x+w];let b=0;await YV(r-1,g,()=>{fy(l,b,l,b+=a,i),m()}),fy(l,(r-1)*a,c,x,i),m(),await YV(r,g,()=>{const w=c[x+a-16]%r;for(let k=0;k<a;k++)h[k]=c[x+k]^l[w*a+k];fy(h,0,c,x,i),m()})}return Aie(t,o,d,l,h)}let Tie=!1,kie=!1;const Nie=async function(t,e,n,r,i,s,o){return await gCe(t,e,{N:n,r,p:i,dkLen:s,onProgress:o})},Cie=function(t,e,n,r,i,s){return mCe(t,e,{N:n,r,p:i,dkLen:s})};let Pie=Nie,_ie=Cie;async function ov(t,e,n,r,i,s,o){const a=Et(t,"passwd"),l=Et(e,"salt");return ct(await Pie(a,l,n,r,i,s,o))}ov._=Nie;ov.lock=function(){kie=!0};ov.register=function(t){if(kie)throw new Error("scrypt is locked");Pie=t};Object.freeze(ov);function av(t,e,n,r,i,s){const o=Et(t,"passwd"),a=Et(e,"salt");return ct(_ie(o,a,n,r,i,s))}av._=Cie;av.lock=function(){Tie=!0};av.register=function(t){if(Tie)throw new Error("scryptSync is locked");_ie=t};Object.freeze(av);const Iie=function(t){return nie("sha256").update(t).digest()},Rie=function(t){return nie("sha512").update(t).digest()};let Oie=Iie,Mie=Rie,Lie=!1,jie=!1;function sl(t){const e=Et(t,"data");return ct(Oie(e))}sl._=Iie;sl.lock=function(){Lie=!0};sl.register=function(t){if(Lie)throw new Error("sha256 is locked");Oie=t};Object.freeze(sl);function i8(t){const e=Et(t,"data");return ct(Mie(e))}i8._=Rie;i8.lock=function(){jie=!0};i8.register=function(t){if(jie)throw new Error("sha512 is locked");Mie=t};Object.freeze(sl);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Die=BigInt(0),VN=BigInt(1),yCe=BigInt(2),HN=t=>t instanceof Uint8Array,xCe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function kx(t){if(!HN(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=xCe[t[n]];return e}function Bie(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function s8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Nx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const i=r*2,s=t.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function km(t){return s8(kx(t))}function o8(t){if(!HN(t))throw new Error("Uint8Array expected");return s8(kx(Uint8Array.from(t).reverse()))}function Cx(t,e){return Nx(t.toString(16).padStart(e*2,"0"))}function a8(t,e){return Cx(t,e).reverse()}function vCe(t){return Nx(Bie(t))}function Pl(t,e,n){let r;if(typeof e=="string")try{r=Nx(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(HN(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${t} expected ${n} bytes, got ${i}`);return r}function G1(...t){const e=new Uint8Array(t.reduce((r,i)=>r+i.length,0));let n=0;return t.forEach(r=>{if(!HN(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function bCe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function wCe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ECe(t){let e;for(e=0;t>Die;t>>=VN,e+=1);return e}function SCe(t,e){return t>>BigInt(e)&VN}const ACe=(t,e,n)=>t|(n?VN:Die)<<BigInt(e),l8=t=>(yCe<<BigInt(t-1))-VN,MI=t=>new Uint8Array(t),nH=t=>Uint8Array.from(t);function Uie(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=MI(t),i=MI(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),l=(h=MI())=>{i=a(nH([0]),h),r=a(),h.length!==0&&(i=a(nH([1]),h),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const m=[];for(;h<e;){r=a();const g=r.slice();m.push(g),h+=r.length}return G1(...m)};return(h,m)=>{o(),l(h);let g;for(;!(g=m(c()));)l();return o(),g}}const TCe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function oE(t,e,n={}){const r=(i,s,o)=>{const a=TCe[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const kCe=Object.freeze(Object.defineProperty({__proto__:null,bitGet:SCe,bitLen:ECe,bitMask:l8,bitSet:ACe,bytesToHex:kx,bytesToNumberBE:km,bytesToNumberLE:o8,concatBytes:G1,createHmacDrbg:Uie,ensureBytes:Pl,equalBytes:bCe,hexToBytes:Nx,hexToNumber:s8,numberToBytesBE:Cx,numberToBytesLE:a8,numberToHexUnpadded:Bie,numberToVarBytesBE:vCe,utf8ToBytes:wCe,validateObject:oE},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ki=BigInt(0),ai=BigInt(1),Lp=BigInt(2),NCe=BigInt(3),mM=BigInt(4),rH=BigInt(5),iH=BigInt(8);BigInt(9);BigInt(16);function To(t,e){const n=t%e;return n>=Ki?n:e+n}function CCe(t,e,n){if(n<=Ki||e<Ki)throw new Error("Expected power/modulo > 0");if(n===ai)return Ki;let r=ai;for(;e>Ki;)e&ai&&(r=r*t%n),t=t*t%n,e>>=ai;return r}function Pa(t,e,n){let r=t;for(;e-- >Ki;)r*=r,r%=n;return r}function gM(t,e){if(t===Ki||e<=Ki)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=To(t,e),r=e,i=Ki,s=ai;for(;n!==Ki;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==ai)throw new Error("invert: does not exist");return To(i,e)}function PCe(t){const e=(t-ai)/Lp;let n,r,i;for(n=t-ai,r=0;n%Lp===Ki;n/=Lp,r++);for(i=Lp;i<t&&CCe(i,e,t)!==t-ai;i++);if(r===1){const o=(t+ai)/mM;return function(l,c){const d=l.pow(c,o);if(!l.eql(l.sqr(d),c))throw new Error("Cannot find square root");return d}}const s=(n+ai)/Lp;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=r,d=a.pow(a.mul(a.ONE,i),n),h=a.pow(l,s),m=a.pow(l,n);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let g=1;for(let x=a.sqr(m);g<c&&!a.eql(x,a.ONE);g++)x=a.sqr(x);const v=a.pow(d,ai<<BigInt(c-g-1));d=a.sqr(v),h=a.mul(h,v),m=a.mul(m,d),c=g}return h}}function _Ce(t){if(t%mM===NCe){const e=(t+ai)/mM;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%iH===rH){const e=(t-rH)/iH;return function(r,i){const s=r.mul(i,Lp),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,Lp),o),c=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return PCe(t)}const ICe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function RCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ICe.reduce((r,i)=>(r[i]="function",r),e);return oE(t,n)}function OCe(t,e,n){if(n<Ki)throw new Error("Expected power > 0");if(n===Ki)return t.ONE;if(n===ai)return e;let r=t.ONE,i=e;for(;n>Ki;)n&ai&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ai;return r}function MCe(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Fie(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function LCe(t,e,n=!1,r={}){if(t<=Ki)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:s}=Fie(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=_Ce(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:l8(i),ZERO:Ki,ONE:ai,create:l=>To(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Ki<=l&&l<t},is0:l=>l===Ki,isOdd:l=>(l&ai)===ai,neg:l=>To(-l,t),eql:(l,c)=>l===c,sqr:l=>To(l*l,t),add:(l,c)=>To(l+c,t),sub:(l,c)=>To(l-c,t),mul:(l,c)=>To(l*c,t),pow:(l,c)=>OCe(a,l,c),div:(l,c)=>To(l*gM(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>gM(l,t),sqrt:r.sqrt||(l=>o(a,l)),invertBatch:l=>MCe(a,l),cmov:(l,c,d)=>d?c:l,toBytes:l=>n?a8(l,s):Cx(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return n?o8(l):km(l)}});return Object.freeze(a)}function $ie(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function zie(t){const e=$ie(t);return e+Math.ceil(e/2)}function jCe(t,e,n=!1){const r=t.length,i=$ie(e),s=zie(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=n?km(t):o8(t),a=To(o,e-ai)+ai;return n?a8(a,i):Cx(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const DCe=BigInt(0),LI=BigInt(1);function BCe(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>DCe;)s&LI&&(o=o.add(a)),a=a.double(),s>>=LI;return o},precomputeWindow(i,s){const{windows:o,windowSize:a}=r(s),l=[];let c=i,d=c;for(let h=0;h<o;h++){d=c,l.push(d);for(let m=1;m<a;m++)d=d.add(c),l.push(d);c=d.double()}return l},wNAF(i,s,o){const{windows:a,windowSize:l}=r(i);let c=t.ZERO,d=t.BASE;const h=BigInt(2**i-1),m=2**i,g=BigInt(i);for(let v=0;v<a;v++){const x=v*l;let b=Number(o&h);o>>=g,b>l&&(b-=m,o+=LI);const w=x,k=x+Math.abs(b)-1,N=v%2!==0,O=b<0;b===0?d=d.add(n(N,s[w])):c=c.add(n(O,s[k]))}return{p:c,f:d}},wNAFCached(i,s,o,a){const l=i._WINDOW_SIZE||1;let c=s.get(i);return c||(c=this.precomputeWindow(i,l),l!==1&&s.set(i,a(c))),this.wNAF(l,c,o)}}}function Vie(t){return RCe(t.Fp),oE(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Fie(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function UCe(t){const e=Vie(t);oE(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:FCe,hexToBytes:$Ce}=kCe,Hp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Hp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:FCe(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Hp,n=typeof t=="string"?$Ce(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Hp._parseInt(n.subarray(2)),{d:o,l:a}=Hp._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){const e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,n=c=>{const d=c.toString(16);return d.length&1?`0${d}`:d},r=e(n(t.s)),i=e(n(t.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},rd=BigInt(0),Ka=BigInt(1);BigInt(2);const sH=BigInt(3);BigInt(4);function zCe(t){const e=UCe(t),{Fp:n}=e,r=e.toBytes||((v,x,b)=>{const w=x.toAffine();return G1(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),i=e.fromBytes||(v=>{const x=v.subarray(1),b=n.fromBytes(x.subarray(0,n.BYTES)),w=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:b,y:w}});function s(v){const{a:x,b}=e,w=n.sqr(v),k=n.mul(w,v);return n.add(n.add(k,n.mul(v,x)),b)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(v){return typeof v=="bigint"&&rd<v&&v<e.n}function a(v){if(!o(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(v){const{allowedPrivateKeyLengths:x,nByteLength:b,wrapPrivateKey:w,n:k}=e;if(x&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=kx(v)),typeof v!="string"||!x.includes(v.length))throw new Error("Invalid key");v=v.padStart(b*2,"0")}let N;try{N=typeof v=="bigint"?v:km(Pl("private key",v,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof v}`)}return w&&(N=To(N,k)),a(N),N}const c=new Map;function d(v){if(!(v instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(x,b,w){if(this.px=x,this.py=b,this.pz=w,x==null||!n.isValid(x))throw new Error("x required");if(b==null||!n.isValid(b))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(x){const{x:b,y:w}=x||{};if(!x||!n.isValid(b)||!n.isValid(w))throw new Error("invalid affine point");if(x instanceof h)throw new Error("projective point not allowed");const k=N=>n.eql(N,n.ZERO);return k(b)&&k(w)?h.ZERO:new h(b,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const b=n.invertBatch(x.map(w=>w.pz));return x.map((w,k)=>w.toAffine(b[k])).map(h.fromAffine)}static fromHex(x){const b=h.fromAffine(i(Pl("pointHex",x)));return b.assertValidity(),b}static fromPrivateKey(x){return h.BASE.multiply(l(x))}_setWindowSize(x){this._WINDOW_SIZE=x,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:b}=this.toAffine();if(!n.isValid(x)||!n.isValid(b))throw new Error("bad point: x or y not FE");const w=n.sqr(b),k=s(x);if(!n.eql(w,k))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(n.isOdd)return!n.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){d(x);const{px:b,py:w,pz:k}=this,{px:N,py:O,pz:D}=x,_=n.eql(n.mul(b,D),n.mul(N,k)),F=n.eql(n.mul(w,D),n.mul(O,k));return _&&F}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:x,b}=e,w=n.mul(b,sH),{px:k,py:N,pz:O}=this;let D=n.ZERO,_=n.ZERO,F=n.ZERO,z=n.mul(k,k),L=n.mul(N,N),$=n.mul(O,O),G=n.mul(k,N);return G=n.add(G,G),F=n.mul(k,O),F=n.add(F,F),D=n.mul(x,F),_=n.mul(w,$),_=n.add(D,_),D=n.sub(L,_),_=n.add(L,_),_=n.mul(D,_),D=n.mul(G,D),F=n.mul(w,F),$=n.mul(x,$),G=n.sub(z,$),G=n.mul(x,G),G=n.add(G,F),F=n.add(z,z),z=n.add(F,z),z=n.add(z,$),z=n.mul(z,G),_=n.add(_,z),$=n.mul(N,O),$=n.add($,$),z=n.mul($,G),D=n.sub(D,z),F=n.mul($,L),F=n.add(F,F),F=n.add(F,F),new h(D,_,F)}add(x){d(x);const{px:b,py:w,pz:k}=this,{px:N,py:O,pz:D}=x;let _=n.ZERO,F=n.ZERO,z=n.ZERO;const L=e.a,$=n.mul(e.b,sH);let G=n.mul(b,N),V=n.mul(w,O),U=n.mul(k,D),A=n.add(b,w),I=n.add(N,O);A=n.mul(A,I),I=n.add(G,V),A=n.sub(A,I),I=n.add(b,k);let j=n.add(N,D);return I=n.mul(I,j),j=n.add(G,U),I=n.sub(I,j),j=n.add(w,k),_=n.add(O,D),j=n.mul(j,_),_=n.add(V,U),j=n.sub(j,_),z=n.mul(L,I),_=n.mul($,U),z=n.add(_,z),_=n.sub(V,z),z=n.add(V,z),F=n.mul(_,z),V=n.add(G,G),V=n.add(V,G),U=n.mul(L,U),I=n.mul($,I),V=n.add(V,U),U=n.sub(G,U),U=n.mul(L,U),I=n.add(I,U),G=n.mul(V,I),F=n.add(F,G),G=n.mul(j,I),_=n.mul(A,_),_=n.sub(_,G),G=n.mul(A,V),z=n.mul(j,z),z=n.add(z,G),new h(_,F,z)}subtract(x){return this.add(x.negate())}is0(){return this.equals(h.ZERO)}wNAF(x){return g.wNAFCached(this,c,x,b=>{const w=n.invertBatch(b.map(k=>k.pz));return b.map((k,N)=>k.toAffine(w[N])).map(h.fromAffine)})}multiplyUnsafe(x){const b=h.ZERO;if(x===rd)return b;if(a(x),x===Ka)return this;const{endo:w}=e;if(!w)return g.unsafeLadder(this,x);let{k1neg:k,k1:N,k2neg:O,k2:D}=w.splitScalar(x),_=b,F=b,z=this;for(;N>rd||D>rd;)N&Ka&&(_=_.add(z)),D&Ka&&(F=F.add(z)),z=z.double(),N>>=Ka,D>>=Ka;return k&&(_=_.negate()),O&&(F=F.negate()),F=new h(n.mul(F.px,w.beta),F.py,F.pz),_.add(F)}multiply(x){a(x);let b=x,w,k;const{endo:N}=e;if(N){const{k1neg:O,k1:D,k2neg:_,k2:F}=N.splitScalar(b);let{p:z,f:L}=this.wNAF(D),{p:$,f:G}=this.wNAF(F);z=g.constTimeNegate(O,z),$=g.constTimeNegate(_,$),$=new h(n.mul($.px,N.beta),$.py,$.pz),w=z.add($),k=L.add(G)}else{const{p:O,f:D}=this.wNAF(b);w=O,k=D}return h.normalizeZ([w,k])[0]}multiplyAndAddUnsafe(x,b,w){const k=h.BASE,N=(D,_)=>_===rd||_===Ka||!D.equals(k)?D.multiplyUnsafe(_):D.multiply(_),O=N(this,b).add(N(x,w));return O.is0()?void 0:O}toAffine(x){const{px:b,py:w,pz:k}=this,N=this.is0();x==null&&(x=N?n.ONE:n.inv(k));const O=n.mul(b,x),D=n.mul(w,x),_=n.mul(k,x);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:O,y:D}}isTorsionFree(){const{h:x,isTorsionFree:b}=e;if(x===Ka)return!0;if(b)return b(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:b}=e;return x===Ka?this:b?b(h,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return this.assertValidity(),r(h,this,x)}toHex(x=!0){return kx(this.toRawBytes(x))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const m=e.nBitLength,g=BCe(h,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function VCe(t){const e=Vie(t);return oE(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function HCe(t){const e=VCe(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(I){return rd<I&&I<n.ORDER}function a(I){return To(I,r)}function l(I){return gM(I,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:m}=zCe({...e,toBytes(I,j,q){const K=j.toAffine(),te=n.toBytes(K.x),Y=G1;return q?Y(Uint8Array.from([j.hasEvenY()?2:3]),te):Y(Uint8Array.from([4]),te,n.toBytes(K.y))},fromBytes(I){const j=I.length,q=I[0],K=I.subarray(1);if(j===i&&(q===2||q===3)){const te=km(K);if(!o(te))throw new Error("Point is not on curve");const Y=h(te);let H=n.sqrt(Y);const M=(H&Ka)===Ka;return(q&1)===1!==M&&(H=n.neg(H)),{x:te,y:H}}else if(j===s&&q===4){const te=n.fromBytes(K.subarray(0,n.BYTES)),Y=n.fromBytes(K.subarray(n.BYTES,2*n.BYTES));return{x:te,y:Y}}else throw new Error(`Point of length ${j} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),g=I=>kx(Cx(I,e.nByteLength));function v(I){const j=r>>Ka;return I>j}function x(I){return v(I)?a(-I):I}const b=(I,j,q)=>km(I.slice(j,q));class w{constructor(j,q,K){this.r=j,this.s=q,this.recovery=K,this.assertValidity()}static fromCompact(j){const q=e.nByteLength;return j=Pl("compactSignature",j,q*2),new w(b(j,0,q),b(j,q,2*q))}static fromDER(j){const{r:q,s:K}=Hp.toSig(Pl("DER",j));return new w(q,K)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(j){return new w(this.r,this.s,j)}recoverPublicKey(j){const{r:q,s:K,recovery:te}=this,Y=F(Pl("msgHash",j));if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");const H=te===2||te===3?q+e.n:q;if(H>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=(te&1)===0?"02":"03",P=c.fromHex(M+g(H)),W=l(H),X=a(-Y*W),ie=a(K*W),oe=c.BASE.multiplyAndAddUnsafe(P,X,ie);if(!oe)throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Nx(this.toDERHex())}toDERHex(){return Hp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Nx(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const k={isValidPrivateKey(I){try{return d(I),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const I=zie(e.n);return jCe(e.randomBytes(I),e.n)},precompute(I=8,j=c.BASE){return j._setWindowSize(I),j.multiply(BigInt(3)),j}};function N(I,j=!0){return c.fromPrivateKey(I).toRawBytes(j)}function O(I){const j=I instanceof Uint8Array,q=typeof I=="string",K=(j||q)&&I.length;return j?K===i||K===s:q?K===2*i||K===2*s:I instanceof c}function D(I,j,q=!0){if(O(I))throw new Error("first arg must be private key");if(!O(j))throw new Error("second arg must be public key");return c.fromHex(j).multiply(d(I)).toRawBytes(q)}const _=e.bits2int||function(I){const j=km(I),q=I.length*8-e.nBitLength;return q>0?j>>BigInt(q):j},F=e.bits2int_modN||function(I){return a(_(I))},z=l8(e.nBitLength);function L(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(rd<=I&&I<z))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Cx(I,e.nByteLength)}function $(I,j,q=G){if(["recovered","canonical"].some(ce=>ce in q))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:te}=e;let{lowS:Y,prehash:H,extraEntropy:M}=q;Y==null&&(Y=!0),I=Pl("msgHash",I),H&&(I=Pl("prehashed msgHash",K(I)));const P=F(I),W=d(j),X=[L(W),L(P)];if(M!=null){const ce=M===!0?te(n.BYTES):M;X.push(Pl("extraEntropy",ce))}const ie=G1(...X),oe=P;function Te(ce){const de=_(ce);if(!m(de))return;const ke=l(de),ye=c.BASE.multiply(de).toAffine(),Ke=a(ye.x);if(Ke===rd)return;const je=a(ke*a(oe+Ke*W));if(je===rd)return;let Ve=(ye.x===Ke?0:2)|Number(ye.y&Ka),me=je;return Y&&v(je)&&(me=x(je),Ve^=1),new w(Ke,me,Ve)}return{seed:ie,k2sig:Te}}const G={lowS:e.lowS,prehash:!1},V={lowS:e.lowS,prehash:!1};function U(I,j,q=G){const{seed:K,k2sig:te}=$(I,j,q),Y=e;return Uie(Y.hash.outputLen,Y.nByteLength,Y.hmac)(K,te)}c.BASE._setWindowSize(8);function A(I,j,q,K=V){var ye;const te=I;if(j=Pl("msgHash",j),q=Pl("publicKey",q),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:H}=K;let M,P;try{if(typeof te=="string"||te instanceof Uint8Array)try{M=w.fromDER(te)}catch(Ke){if(!(Ke instanceof Hp.Err))throw Ke;M=w.fromCompact(te)}else if(typeof te=="object"&&typeof te.r=="bigint"&&typeof te.s=="bigint"){const{r:Ke,s:je}=te;M=new w(Ke,je)}else throw new Error("PARSE");P=c.fromHex(q)}catch(Ke){if(Ke.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&M.hasHighS())return!1;H&&(j=e.hash(j));const{r:W,s:X}=M,ie=F(j),oe=l(X),Te=a(ie*oe),ce=a(W*oe),de=(ye=c.BASE.multiplyAndAddUnsafe(P,Te,ce))==null?void 0:ye.toAffine();return de?a(de.x)===W:!1}return{CURVE:e,getPublicKey:N,getSharedSecret:D,sign:U,verify:A,ProjectivePoint:c,Signature:w,utils:k}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qCe(t){return{hash:t,hmac:(e,...n)=>zN(t,e,xNe(...n)),randomBytes:bNe}}function GCe(t,e){const n=r=>HCe({...t,...qCe(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hie=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),oH=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),KCe=BigInt(1),yM=BigInt(2),aH=(t,e)=>(t+e/yM)/e;function WCe(t){const e=Hie,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,d=c*c*t%e,h=Pa(d,n,e)*d%e,m=Pa(h,n,e)*d%e,g=Pa(m,yM,e)*c%e,v=Pa(g,i,e)*g%e,x=Pa(v,s,e)*v%e,b=Pa(x,a,e)*x%e,w=Pa(b,l,e)*b%e,k=Pa(w,a,e)*x%e,N=Pa(k,n,e)*d%e,O=Pa(N,o,e)*v%e,D=Pa(O,r,e)*c%e,_=Pa(D,yM,e);if(!xM.eql(xM.sqr(_),t))throw new Error("Cannot find square root");return _}const xM=LCe(Hie,void 0,void 0,{sqrt:WCe}),qf=GCe({a:BigInt(0),b:BigInt(7),Fp:xM,n:oH,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=oH,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-KCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=aH(s*t,e),l=aH(-r*t,e);let c=To(t-a*n-l*i,e),d=To(-a*r-l*s,e);const h=c>o,m=d>o;if(h&&(c=e-c),m&&(d=e-d),c>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:d}}}},rv);BigInt(0);qf.ProjectivePoint;const K1="0x0000000000000000000000000000000000000000",lH="0x0000000000000000000000000000000000000000000000000000000000000000",tyt="",YCe=`Ethereum Signed Message:
`,cH=BigInt(0),uH=BigInt(1),vM=BigInt(2),dH=BigInt(27),fH=BigInt(28),wA=BigInt(35),qie=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),JCe=qie/vM,XCe=Symbol.for("nodejs.util.inspect.custom"),xp={};function jI(t){return Sd(zr(t),32)}var Uy,bc,Fy,sh;const Ua=class Ua{constructor(e,n,r,i){Fe(this,Uy);Fe(this,bc);Fe(this,Fy);Fe(this,sh);$h(e,xp,"Signature"),ge(this,Uy,n),ge(this,bc,r),ge(this,Fy,i),ge(this,sh,null)}get r(){return re(this,Uy)}set r(e){ve(uy(e)===32,"invalid r","value",e),ge(this,Uy,ct(e))}get s(){return ve(parseInt(re(this,bc).substring(0,3))<8,"non-canonical s; use ._s","s",re(this,bc)),re(this,bc)}set s(e){ve(uy(e)===32,"invalid s","value",e),ge(this,bc,ct(e))}get _s(){return re(this,bc)}isValid(){return BigInt(re(this,bc))<=JCe}get v(){return re(this,Fy)}set v(e){const n=nn(e,"value");ve(n===27||n===28,"invalid v","v",e),ge(this,Fy,n)}get networkV(){return re(this,sh)}get legacyChainId(){const e=this.networkV;return e==null?null:Ua.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Et(this.s);return this.yParity&&(e[0]|=128),ct(e)}get compactSerialized(){return Ln([this.r,this.yParityAndS])}get serialized(){return Ln([this.r,this.s,this.yParity?"0x1c":"0x1b"])}getCanonical(){if(this.isValid())return this;const e=qie-BigInt(this._s),n=55-this.v,r=new Ua(xp,this.r,jI(e),n);return this.networkV&&ge(r,sh,this.networkV),r}clone(){const e=new Ua(xp,this.r,this._s,this.v);return this.networkV&&ge(e,sh,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[XCe](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const n=It(e,"v");return n==dH||n==fH?cH:(ve(n>=wA,"invalid EIP-155 v","v",e),(n-wA)/vM)}static getChainIdV(e,n){return It(e)*vM+BigInt(35+n-27)}static getNormalizedV(e){const n=It(e);return n===cH||n===dH?27:n===uH||n===fH?28:(ve(n>=wA,"invalid v","v",e),n&uH?27:28)}static from(e){function n(c,d){ve(c,d,"signature",e)}if(e==null)return new Ua(xp,lH,lH,27);if(typeof e=="string"){const c=Et(e,"signature");if(c.length===64){const d=ct(c.slice(0,32)),h=c.slice(32,64),m=h[0]&128?28:27;return h[0]&=127,new Ua(xp,d,ct(h),m)}if(c.length===65){const d=ct(c.slice(0,32)),h=ct(c.slice(32,64)),m=Ua.getNormalizedV(c[64]);return new Ua(xp,d,h,m)}n(!1,"invalid raw signature length")}if(e instanceof Ua)return e.clone();const r=e.r;n(r!=null,"missing r");const i=jI(r),s=(function(c,d){if(c!=null)return jI(c);if(d!=null){n(vr(d,32),"invalid yParityAndS");const h=Et(d);return h[0]&=127,ct(h)}n(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(c,d,h){if(c!=null){const m=It(c);return{networkV:m>=wA?m:void 0,v:Ua.getNormalizedV(m)}}if(d!=null)return n(vr(d,32),"invalid yParityAndS"),{v:Et(d)[0]&128?28:27};if(h!=null){switch(nn(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),l=new Ua(xp,i,s,a);return o&&ge(l,sh,o),n(e.yParity==null||nn(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};Uy=new WeakMap,bc=new WeakMap,Fy=new WeakMap,sh=new WeakMap;let lo=Ua;var Yu;const jp=class jp{constructor(e){Fe(this,Yu);ve(uy(e)===32,"invalid private key","privateKey","[REDACTED]"),ge(this,Yu,ct(e))}get privateKey(){return re(this,Yu)}get publicKey(){return jp.computePublicKey(re(this,Yu))}get compressedPublicKey(){return jp.computePublicKey(re(this,Yu),!0)}sign(e){ve(uy(e)===32,"invalid digest length","digest",e);const n=qf.sign(ys(e),ys(re(this,Yu)),{lowS:!0});return lo.from({r:Ad(n.r,32),s:Ad(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=jp.computePublicKey(e);return ct(qf.getSharedSecret(ys(re(this,Yu)),Et(n),!1))}static computePublicKey(e,n){let r=Et(e,"key");if(r.length===32){const s=qf.getPublicKey(r,!!n);return ct(s)}if(r.length===64){const s=new Uint8Array(65);s[0]=4,s.set(r,1),r=s}const i=qf.ProjectivePoint.fromHex(r);return ct(i.toRawBytes(n))}static recoverPublicKey(e,n){ve(uy(e)===32,"invalid digest length","digest",e);const r=lo.from(n);let i=qf.Signature.fromCompact(ys(Ln([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const s=i.recoverPublicKey(ys(e));return ve(s!=null,"invalid signature for digest","signature",n),"0x"+s.toHex(!1)}static addPoints(e,n,r){const i=qf.ProjectivePoint.fromHex(jp.computePublicKey(e).substring(2)),s=qf.ProjectivePoint.fromHex(jp.computePublicKey(n).substring(2));return"0x"+i.add(s).toHex(!!r)}};Yu=new WeakMap;let $c=jp;const QCe=BigInt(0),ZCe=BigInt(36);function hH(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=e[i].charCodeAt(0);const r=Et(Wn(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const c8={};for(let t=0;t<10;t++)c8[String(t)]=String(t);for(let t=0;t<26;t++)c8[String.fromCharCode(65+t)]=String(10+t);const pH=15;function Gie(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>c8[r]).join("");for(;e.length>=pH;){let r=e.substring(0,pH);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const ePe=(function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t})();function tPe(t){t=t.toLowerCase();let e=QCe;for(let n=0;n<t.length;n++)e=e*ZCe+ePe[t[n]];return e}function vn(t){if(ve(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=hH(t);return ve(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ve(t.substring(2,4)===Gie(t),"bad icap checksum","address",t);let e=tPe(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return hH("0x"+e)}ve(!1,"invalid address","address",t)}function nyt(t){let e=BigInt(vn(t)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Gie("XE00"+e)+e}function nPe(t){const e=vn(t.from);let r=It(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,vn(xr(Wn(Fc([e,r])),12))}function ryt(t,e,n){const r=vn(t),i=Et(e,"salt"),s=Et(n,"initCodeHash");return ve(i.length===32,"salt must be 32 bytes","salt",e),ve(s.length===32,"initCodeHash must be 32 bytes","initCodeHash",n),vn(xr(Wn(Ln(["0xff",r,i,s])),12))}function Kie(t){return t&&typeof t.getAddress=="function"}function iyt(t){try{return vn(t),!0}catch{}return!1}async function DI(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(tt(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),ve(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),vn(n)}function Wi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?vn(t):(tt(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),DI(t,e.resolveName(t)));if(Kie(t))return DI(t,t.getAddress());if(t&&typeof t.then=="function")return DI(t,t);ve(!1,"unsupported addressable value","target",t)}const $u={};function Ot(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new $s($u,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Fn(t,e){return new $s($u,`bytes${e||""}`,t,{size:e})}const mH=Symbol.for("_ethers_typed");var cm;const zu=class zu{constructor(e,n,r,i){Ce(this,"type");Ce(this,"value");Fe(this,cm);Ce(this,"_typedSymbol");i==null&&(i=null),$h($u,e,"Typed"),$t(this,{_typedSymbol:mH,type:n,value:r}),ge(this,cm,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return re(this,cm)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return re(this,cm)===!0?-1:re(this,cm)===!1?this.value.length:null}static from(e,n){return new zu($u,e,n)}static uint8(e){return Ot(e,8)}static uint16(e){return Ot(e,16)}static uint24(e){return Ot(e,24)}static uint32(e){return Ot(e,32)}static uint40(e){return Ot(e,40)}static uint48(e){return Ot(e,48)}static uint56(e){return Ot(e,56)}static uint64(e){return Ot(e,64)}static uint72(e){return Ot(e,72)}static uint80(e){return Ot(e,80)}static uint88(e){return Ot(e,88)}static uint96(e){return Ot(e,96)}static uint104(e){return Ot(e,104)}static uint112(e){return Ot(e,112)}static uint120(e){return Ot(e,120)}static uint128(e){return Ot(e,128)}static uint136(e){return Ot(e,136)}static uint144(e){return Ot(e,144)}static uint152(e){return Ot(e,152)}static uint160(e){return Ot(e,160)}static uint168(e){return Ot(e,168)}static uint176(e){return Ot(e,176)}static uint184(e){return Ot(e,184)}static uint192(e){return Ot(e,192)}static uint200(e){return Ot(e,200)}static uint208(e){return Ot(e,208)}static uint216(e){return Ot(e,216)}static uint224(e){return Ot(e,224)}static uint232(e){return Ot(e,232)}static uint240(e){return Ot(e,240)}static uint248(e){return Ot(e,248)}static uint256(e){return Ot(e,256)}static uint(e){return Ot(e,256)}static int8(e){return Ot(e,-8)}static int16(e){return Ot(e,-16)}static int24(e){return Ot(e,-24)}static int32(e){return Ot(e,-32)}static int40(e){return Ot(e,-40)}static int48(e){return Ot(e,-48)}static int56(e){return Ot(e,-56)}static int64(e){return Ot(e,-64)}static int72(e){return Ot(e,-72)}static int80(e){return Ot(e,-80)}static int88(e){return Ot(e,-88)}static int96(e){return Ot(e,-96)}static int104(e){return Ot(e,-104)}static int112(e){return Ot(e,-112)}static int120(e){return Ot(e,-120)}static int128(e){return Ot(e,-128)}static int136(e){return Ot(e,-136)}static int144(e){return Ot(e,-144)}static int152(e){return Ot(e,-152)}static int160(e){return Ot(e,-160)}static int168(e){return Ot(e,-168)}static int176(e){return Ot(e,-176)}static int184(e){return Ot(e,-184)}static int192(e){return Ot(e,-192)}static int200(e){return Ot(e,-200)}static int208(e){return Ot(e,-208)}static int216(e){return Ot(e,-216)}static int224(e){return Ot(e,-224)}static int232(e){return Ot(e,-232)}static int240(e){return Ot(e,-240)}static int248(e){return Ot(e,-248)}static int256(e){return Ot(e,-256)}static int(e){return Ot(e,-256)}static bytes1(e){return Fn(e,1)}static bytes2(e){return Fn(e,2)}static bytes3(e){return Fn(e,3)}static bytes4(e){return Fn(e,4)}static bytes5(e){return Fn(e,5)}static bytes6(e){return Fn(e,6)}static bytes7(e){return Fn(e,7)}static bytes8(e){return Fn(e,8)}static bytes9(e){return Fn(e,9)}static bytes10(e){return Fn(e,10)}static bytes11(e){return Fn(e,11)}static bytes12(e){return Fn(e,12)}static bytes13(e){return Fn(e,13)}static bytes14(e){return Fn(e,14)}static bytes15(e){return Fn(e,15)}static bytes16(e){return Fn(e,16)}static bytes17(e){return Fn(e,17)}static bytes18(e){return Fn(e,18)}static bytes19(e){return Fn(e,19)}static bytes20(e){return Fn(e,20)}static bytes21(e){return Fn(e,21)}static bytes22(e){return Fn(e,22)}static bytes23(e){return Fn(e,23)}static bytes24(e){return Fn(e,24)}static bytes25(e){return Fn(e,25)}static bytes26(e){return Fn(e,26)}static bytes27(e){return Fn(e,27)}static bytes28(e){return Fn(e,28)}static bytes29(e){return Fn(e,29)}static bytes30(e){return Fn(e,30)}static bytes31(e){return Fn(e,31)}static bytes32(e){return Fn(e,32)}static address(e){return new zu($u,"address",e)}static bool(e){return new zu($u,"bool",!!e)}static bytes(e){return new zu($u,"bytes",e)}static string(e){return new zu($u,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new zu($u,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===mH}static dereference(e,n){if(zu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};cm=new WeakMap;let $s=zu;class rPe extends $d{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=$s.dereference(n,"string");try{r=vn(r)}catch(i){return this._throwError(i.message,n)}return e.writeValue(r)}decode(e){return vn(Ad(e.readValue(),20))}}class iPe extends $d{constructor(n){super(n.name,n.type,"_",n.dynamic);Ce(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function Wie(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let l={};r=e.map(c=>{const d=c.localName;return tt(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),tt(!l[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:c},value:n}),l[d]=!0,n[d]})}else ve(!1,"invalid tuple value","tuple",n);ve(e.length===r.length,"types/value length mismatch","tuple",n);let i=new dM,s=new dM,o=[];e.forEach((l,c)=>{let d=r[c];if(l.dynamic){let h=s.length;l.encode(s,d);let m=i.writeUpdatableValue();o.push(g=>{m(g+h)})}else l.encode(i,d)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function Yie(t,e){let n=[],r=[],i=t.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readIndex(),l=i.subReader(a);try{o=s.decode(l)}catch(c){if(gs(c,"BUFFER_OVERRUN"))throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(gs(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");n.push(o),r.push(s.localName||null)}),Sx.fromItems(n,r)}class sPe extends $d{constructor(n,r,i){const s=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",s,i,o);Ce(this,"coder");Ce(this,"length");$t(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let i=0;i<this.length;i++)r.push(n);return r}encode(n,r){const i=$s.dereference(r,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,n.writeValue(i.length)),kre(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<i.length;a++)o.push(this.coder);return Wie(n,o,i)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),tt(r*io<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*io,length:n.dataLength}));let i=[];for(let s=0;s<r;s++)i.push(new iPe(this.coder));return Yie(n,i)}}class oPe extends $d{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=$s.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Jie extends $d{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=ys(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class aPe extends Jie{constructor(e){super("bytes",e)}decode(e){return ct(super.decode(e))}}class lPe extends $d{constructor(n,r){let i="bytes"+String(n);super(i,i,r,!1);Ce(this,"size");$t(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let i=ys($s.dereference(r,this.type));return i.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(i)}decode(n){return ct(n.readBytes(this.size))}}const cPe=new Uint8Array([]);class uPe extends $d{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(cPe)}decode(e){return e.readBytes(0),null}}const dPe=BigInt(0),fPe=BigInt(1),hPe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class pPe extends $d{constructor(n,r,i){const s=(r?"int":"uint")+n*8;super(s,s,i,!1);Ce(this,"size");Ce(this,"signed");$t(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let i=It($s.dereference(r,this.type)),s=Vp(hPe,io*8);if(this.signed){let o=Vp(s,this.size*8-1);(i>o||i<-(o+fPe))&&this._throwError("value out-of-bounds",r),i=_re(i,8*io)}else(i<dPe||i>Vp(s,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(i)}decode(n){let r=Vp(n.readValue(),this.size*8);return this.signed&&(r=AT(r,this.size*8)),r}}class mPe extends Jie{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,bi($s.dereference(n,"string")))}decode(e){return kT(super.decode(e))}}class EA extends $d{constructor(n,r){let i=!1;const s=[];n.forEach(a=>{a.dynamic&&(i=!0),s.push(a.type)});const o="tuple("+s.join(",")+")";super("tuple",o,r,i);Ce(this,"coders");$t(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(i=>{n.push(i.defaultValue())});const r=this.coders.reduce((i,s)=>{const o=s.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});return this.coders.forEach((i,s)=>{let o=i.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[s]))}),Object.freeze(n)}encode(n,r){const i=$s.dereference(r,"tuple");return Wie(n,this.coders,i)}decode(n){return Yie(n,this.coders)}}function BI(t,e){return{address:vn(t),storageKeys:e.map((n,r)=>(ve(vr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function i0(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(ve(n.length===2,"invalid slot set",`value[${r}]`,n),BI(n[0],n[1])):(ve(n!=null&&typeof n=="object","invalid address-slot set","value",t),BI(n.address,n.storageKeys)));ve(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((i,s)=>(i[s]=!0,i),{});return BI(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Xie(t){return{address:vn(t.address),nonce:It(t.nonce!=null?t.nonce:0),chainId:It(t.chainId!=null?t.chainId:0),signature:lo.from(t.signature)}}function aE(t){let e;return typeof t=="string"?e=$c.computePublicKey(t,!1):e=t.publicKey,vn(Wn("0x"+e.substring(4)).substring(26))}function qN(t,e){return aE($c.recoverPublicKey(t,e))}const qi=BigInt(0),gPe=BigInt(2),yPe=BigInt(27),xPe=BigInt(28),vPe=BigInt(35),bPe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),wPe=Symbol.for("nodejs.util.inspect.custom"),UI=4096*32,L2=128;function EPe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Et(t.blobToKzgCommitment(ct(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Et(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Et(t.blobToKZGCommitment(ct(r)));ve(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Et(t.computeBlobProof(ct(r),ct(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Et(t.computeBlobKZGProof(ct(r),ct(i)));ve(!1,"unsupported KZG library","kzg",t)}}}function gH(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=sl(e).substring(4),"0x"+n}function lv(t){return t==="0x"?null:vn(t)}function GN(t,e){try{return i0(t)}catch(n){ve(!1,n.message,e,t)}}function SPe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);n.push({address:lv(i[1]),nonce:sr(i[2],"nonce"),chainId:sr(i[0],"chainId"),signature:lo.from({yParity:s0(i[3],"yParity"),r:Sd(i[4],32),s:Sd(i[5],32)})})}return n}catch(n){ve(!1,n.message,e,t)}}function s0(t,e){return t==="0x"?0:nn(t,e)}function sr(t,e){if(t==="0x")return qi;const n=It(t,e);return ve(n<=bPe,"value exceeds uint size",e,n),n}function Rn(t,e){const n=It(t,"value"),r=zr(n);return ve(r.length<=32,"value too large",`tx.${e}`,n),r}function KN(t){return i0(t).map(e=>[e.address,e.storageKeys])}function APe(t){return t.map(e=>[Rn(e.chainId,"chainId"),e.address,Rn(e.nonce,"nonce"),Rn(e.signature.yParity,"yParity"),zr(e.signature.r),zr(e.signature._s)])}function TPe(t,e){ve(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)ve(vr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function kPe(t){const e=sE(t);ve(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:s0(e[0],"nonce"),gasPrice:sr(e[1],"gasPrice"),gasLimit:sr(e[2],"gasLimit"),to:lv(e[3]),value:sr(e[4],"value"),data:ct(e[5]),chainId:qi};if(e.length===6)return n;const r=sr(e[6],"v"),i=sr(e[7],"r"),s=sr(e[8],"s");if(i===qi&&s===qi)n.chainId=r;else{let o=(r-vPe)/gPe;o<qi&&(o=qi),n.chainId=o,ve(o!==qi||r===yPe||r===xPe,"non-canonical legacy v","v",e[6]),n.signature=lo.from({r:Sd(e[7],32),s:Sd(e[8],32),v:r})}return n}function NPe(t,e){const n=[Rn(t.nonce,"nonce"),Rn(t.gasPrice||0,"gasPrice"),Rn(t.gasLimit,"gasLimit"),t.to||"0x",Rn(t.value,"value"),t.data];let r=qi;if(t.chainId!=qi)r=It(t.chainId,"tx.chainId"),ve(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const s=t.signature.legacyChainId;s!=null&&(r=s)}if(!e)return r!==qi&&(n.push(zr(r)),n.push("0x"),n.push("0x")),Fc(n);let i=BigInt(27+e.yParity);return r!==qi?i=lo.getChainIdV(r,e.v):BigInt(e.v)!==i&&ve(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(zr(i)),n.push(zr(e.r)),n.push(zr(e._s)),Fc(n)}function WN(t,e){let n;try{if(n=s0(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{ve(!1,"invalid yParity","yParity",e[0])}const r=Sd(e[1],32),i=Sd(e[2],32),s=lo.from({r,s:i,yParity:n});t.signature=s}function CPe(t){const e=sE(Et(t).slice(1));ve(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",ct(t));const n={type:2,chainId:sr(e[0],"chainId"),nonce:s0(e[1],"nonce"),maxPriorityFeePerGas:sr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:sr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:sr(e[4],"gasLimit"),to:lv(e[5]),value:sr(e[6],"value"),data:ct(e[7]),accessList:GN(e[8],"accessList")};return e.length===9||WN(n,e.slice(9)),n}function PPe(t,e){const n=[Rn(t.chainId,"chainId"),Rn(t.nonce,"nonce"),Rn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Rn(t.maxFeePerGas||0,"maxFeePerGas"),Rn(t.gasLimit,"gasLimit"),t.to||"0x",Rn(t.value,"value"),t.data,KN(t.accessList||[])];return e&&(n.push(Rn(e.yParity,"yParity")),n.push(zr(e.r)),n.push(zr(e.s))),Ln(["0x02",Fc(n)])}function _Pe(t){const e=sE(Et(t).slice(1));ve(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",ct(t));const n={type:1,chainId:sr(e[0],"chainId"),nonce:s0(e[1],"nonce"),gasPrice:sr(e[2],"gasPrice"),gasLimit:sr(e[3],"gasLimit"),to:lv(e[4]),value:sr(e[5],"value"),data:ct(e[6]),accessList:GN(e[7],"accessList")};return e.length===8||WN(n,e.slice(8)),n}function IPe(t,e){const n=[Rn(t.chainId,"chainId"),Rn(t.nonce,"nonce"),Rn(t.gasPrice||0,"gasPrice"),Rn(t.gasLimit,"gasLimit"),t.to||"0x",Rn(t.value,"value"),t.data,KN(t.accessList||[])];return e&&(n.push(Rn(e.yParity,"recoveryParam")),n.push(zr(e.r)),n.push(zr(e.s))),Ln(["0x01",Fc(n)])}function RPe(t){let e=sE(Et(t).slice(1)),n="3",r=null,i=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const o=e[1],a=e[2],l=e[3];ve(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),ve(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),ve(Array.isArray(l),"invalid network format: proofs not an array","fields[3]",l),ve(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ve(o.length===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<e[1].length;c++)i.push({data:o[c],commitment:a[c],proof:l[c]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){n="3 (EIP-7594 network format)",r=nn(e[1]);const o=e[2],a=e[3],l=e[4];ve(r===1,`unsupported EIP-7594 network format version: ${r}`,"fields[1]",r),ve(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),ve(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),ve(Array.isArray(l),"invalid EIP-7594 network format: proofs not an array","fields[4]",l),ve(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ve(o.length*L2===l.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let c=0;c<o.length;c++){const d=[];for(let h=0;h<L2;h++)d.push(l[c*L2+h]);i.push({data:o[c],commitment:a[c],proof:Ln(d)})}e=e[0]}ve(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",ct(t));const s={type:3,chainId:sr(e[0],"chainId"),nonce:s0(e[1],"nonce"),maxPriorityFeePerGas:sr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:sr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:sr(e[4],"gasLimit"),to:lv(e[5]),value:sr(e[6],"value"),data:ct(e[7]),accessList:GN(e[8],"accessList"),maxFeePerBlobGas:sr(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:r};i&&(s.blobs=i),ve(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),ve(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<s.blobVersionedHashes.length;o++)ve(vr(s.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||WN(s,e.slice(11)),s}function OPe(t,e,n){const r=[Rn(t.chainId,"chainId"),Rn(t.nonce,"nonce"),Rn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Rn(t.maxFeePerGas||0,"maxFeePerGas"),Rn(t.gasLimit,"gasLimit"),t.to||K1,Rn(t.value,"value"),t.data,KN(t.accessList||[]),Rn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),TPe(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(r.push(Rn(e.yParity,"yParity")),r.push(zr(e.r)),r.push(zr(e.s)),n)){if(t.blobWrapperVersion!=null){const i=zr(t.blobWrapperVersion),s=[];for(const{proof:o}of n){const a=Et(o),l=a.length/L2;for(let c=0;c<a.length;c+=l)s.push(a.subarray(c,c+l))}return Ln(["0x03",Fc([r,i,n.map(o=>o.data),n.map(o=>o.commitment),s])])}return Ln(["0x03",Fc([r,n.map(i=>i.data),n.map(i=>i.commitment),n.map(i=>i.proof)])])}return Ln(["0x03",Fc(r)])}function MPe(t){const e=sE(Et(t).slice(1));ve(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",ct(t));const n={type:4,chainId:sr(e[0],"chainId"),nonce:s0(e[1],"nonce"),maxPriorityFeePerGas:sr(e[2],"maxPriorityFeePerGas"),maxFeePerGas:sr(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:sr(e[4],"gasLimit"),to:lv(e[5]),value:sr(e[6],"value"),data:ct(e[7]),accessList:GN(e[8],"accessList"),authorizationList:SPe(e[9],"authorizationList")};return e.length===10||WN(n,e.slice(10)),n}function LPe(t,e){const n=[Rn(t.chainId,"chainId"),Rn(t.nonce,"nonce"),Rn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Rn(t.maxFeePerGas||0,"maxFeePerGas"),Rn(t.gasLimit,"gasLimit"),t.to||"0x",Rn(t.value,"value"),t.data,KN(t.accessList||[]),APe(t.authorizationList||[])];return e&&(n.push(Rn(e.yParity,"yParity")),n.push(zr(e.r)),n.push(zr(e.s))),Ln(["0x04",Fc(n)])}var Ol,$y,zy,Vy,Hy,qy,Gy,Ky,Wy,Yy,Jy,Xy,um,oh,wc,ah,Qy,Zy,ex,j2,ea;let u8=(ea=class{constructor(){Fe(this,ex);Fe(this,Ol);Fe(this,$y);Fe(this,zy);Fe(this,Vy);Fe(this,Hy);Fe(this,qy);Fe(this,Gy);Fe(this,Ky);Fe(this,Wy);Fe(this,Yy);Fe(this,Jy);Fe(this,Xy);Fe(this,um);Fe(this,oh);Fe(this,wc);Fe(this,ah);Fe(this,Qy);Fe(this,Zy);ge(this,Ol,null),ge(this,$y,null),ge(this,Vy,0),ge(this,Hy,qi),ge(this,qy,null),ge(this,Gy,null),ge(this,Ky,null),ge(this,zy,"0x"),ge(this,Wy,qi),ge(this,Yy,qi),ge(this,Jy,null),ge(this,Xy,null),ge(this,um,null),ge(this,oh,null),ge(this,wc,null),ge(this,ah,null),ge(this,Qy,null),ge(this,Zy,null)}get type(){return re(this,Ol)}set type(e){switch(e){case null:ge(this,Ol,null);break;case 0:case"legacy":ge(this,Ol,0);break;case 1:case"berlin":case"eip-2930":ge(this,Ol,1);break;case 2:case"london":case"eip-1559":ge(this,Ol,2);break;case 3:case"cancun":case"eip-4844":ge(this,Ol,3);break;case 4:case"pectra":case"eip-7702":ge(this,Ol,4);break;default:ve(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=re(this,$y);return e==null&&this.type===3?K1:e}set to(e){ge(this,$y,e==null?null:vn(e))}get nonce(){return re(this,Vy)}set nonce(e){ge(this,Vy,nn(e,"value"))}get gasLimit(){return re(this,Hy)}set gasLimit(e){ge(this,Hy,It(e))}get gasPrice(){const e=re(this,qy);return e==null&&(this.type===0||this.type===1)?qi:e}set gasPrice(e){ge(this,qy,e==null?null:It(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=re(this,Gy);return e??(this.type===2||this.type===3?qi:null)}set maxPriorityFeePerGas(e){ge(this,Gy,e==null?null:It(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=re(this,Ky);return e??(this.type===2||this.type===3?qi:null)}set maxFeePerGas(e){ge(this,Ky,e==null?null:It(e,"maxFeePerGas"))}get data(){return re(this,zy)}set data(e){ge(this,zy,ct(e))}get value(){return re(this,Wy)}set value(e){ge(this,Wy,It(e,"value"))}get chainId(){return re(this,Yy)}set chainId(e){ge(this,Yy,It(e))}get signature(){return re(this,Jy)||null}set signature(e){ge(this,Jy,e==null?null:lo.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const n=this.authorizationList;if(n){for(const r of n)if(!r.signature.isValid())return!1}return!0}get accessList(){const e=re(this,Xy)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){ge(this,Xy,e==null?null:i0(e))}get authorizationList(){const e=re(this,Qy)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){ge(this,Qy,e==null?null:e.map(n=>Xie(n)))}get maxFeePerBlobGas(){const e=re(this,um);return e==null&&this.type===3?qi:e}set maxFeePerBlobGas(e){ge(this,um,e==null?null:It(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=re(this,oh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ve(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)ve(vr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}ge(this,oh,e)}get blobs(){return re(this,ah)==null?null:re(this,ah).map(e=>Object.assign({},e))}set blobs(e){if(e==null){ge(this,ah,null);return}const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(UN(s)){tt(re(this,wc),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Et(s);if(ve(o.length<=UI,"blob is too large",`blobs[${i}]`,s),o.length!==UI){const c=new Uint8Array(UI);c.set(o),o=c}const a=re(this,wc).blobToKzgCommitment(o),l=ct(re(this,wc).computeBlobKzgProof(o,a));n.push({data:ct(o),commitment:ct(a),proof:l}),r.push(gH(1,a))}else{const o=ct(s.data),a=ct(s.commitment),l=ct(s.proof);n.push({data:o,commitment:a,proof:l}),r.push(gH(1,a))}}ge(this,ah,n),ge(this,oh,r)}get kzg(){return re(this,wc)}set kzg(e){e==null?ge(this,wc,null):ge(this,wc,EPe(e))}get blobWrapperVersion(){return re(this,Zy)}set blobWrapperVersion(e){ge(this,Zy,e)}get hash(){return this.signature==null?null:Wn(st(this,ex,j2).call(this,!0,!1))}get unsignedHash(){return Wn(this.unsignedSerialized)}get from(){return this.signature==null?null:qN(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:$c.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return st(this,ex,j2).call(this,!0,!0)}get unsignedSerialized(){return st(this,ex,j2).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,i=re(this,um)!=null||re(this,oh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&tt(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),tt(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),tt(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):n?s.push(2):e?(s.push(1),r||s.push(0)):r?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return ea.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[wPe](){return this.toString()}toString(){const e=[],n=i=>{let s=this[i];typeof s=="string"&&(s=JSON.stringify(s)),e.push(`${i}: ${s}`)};this.type&&n("type"),n("to"),n("data"),n("nonce"),n("gasLimit"),n("value"),this.chainId!=null&&n("chainId"),this.signature&&(n("from"),e.push(`signature: ${this.signature.toString()}`));const r=this.authorizationList;if(r){const i=[];for(const s of r){const o=[];o.push(`address: ${JSON.stringify(s.address)}`),s.nonce!=null&&o.push(`nonce: ${s.nonce}`),s.chainId!=null&&o.push(`chainId: ${s.chainId}`),s.signature&&o.push(`signature: ${s.signature.toString()}`),i.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${i.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new ea;if(typeof e=="string"){const r=Et(e);if(r[0]>=127)return ea.from(kPe(r));switch(r[0]){case 1:return ea.from(_Pe(r));case 2:return ea.from(CPe(r));case 3:return ea.from(RPe(r));case 4:return ea.from(MPe(r))}tt(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new ea;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=lo.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobWrapperVersion!=null&&(n.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(ve(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ve(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ve(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ve(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}},Ol=new WeakMap,$y=new WeakMap,zy=new WeakMap,Vy=new WeakMap,Hy=new WeakMap,qy=new WeakMap,Gy=new WeakMap,Ky=new WeakMap,Wy=new WeakMap,Yy=new WeakMap,Jy=new WeakMap,Xy=new WeakMap,um=new WeakMap,oh=new WeakMap,wc=new WeakMap,ah=new WeakMap,Qy=new WeakMap,Zy=new WeakMap,ex=new WeakSet,j2=function(e,n){tt(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return NPe(this,r);case 1:return IPe(this,r);case 2:return PPe(this,r);case 3:return OPe(this,r,n?this.blobs:null);case 4:return LPe(this,r)}tt(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})},ea);function Qie(t){return ve(typeof t.address=="string","invalid address for hashAuthorization","auth.address",t),Wn(Ln(["0x05",Fc([t.chainId!=null?zr(t.chainId):"0x",vn(t.address),t.nonce!=null?zr(t.nonce):"0x"])]))}function syt(t,e){return qN(Qie(t),e)}function kd(t){return Wn(bi(t))}var jPe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const yH=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),xH=4;function DPe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),i=1,s=[0,1];for(let D=1;D<r;D++)s.push(i+=n());let o=n(),a=e;e+=o;let l=0,c=0;function d(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const h=31,m=2**h,g=m>>>1,v=g>>1,x=m-1;let b=0;for(let D=0;D<h;D++)b=b<<1|d();let w=[],k=0,N=m;for(;;){let D=Math.floor(((b-k+1)*i-1)/N),_=0,F=r;for(;F-_>1;){let $=_+F>>>1;D<s[$]?F=$:_=$}if(_==0)break;w.push(_);let z=k+Math.floor(N*s[_]/i),L=k+Math.floor(N*s[_+1]/i)-1;for(;((z^L)&g)==0;)b=b<<1&x|d(),z=z<<1&x,L=L<<1&x|1;for(;z&~L&v;)b=b&g|b<<1&x>>>1|d(),z=z<<1^g,L=(L^g)<<1|g|1;k=z,N=1+L-z}let O=r-4;return w.map(D=>{switch(D-O){case 3:return O+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return O+256+(t[a++]<<8|t[a++]);case 1:return O+t[a++];default:return D-1}})}function BPe(t){let e=0;return()=>t[e++]}function Zie(t){return BPe(DPe(UPe(t)))}function UPe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let n=t.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|e[t.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}function FPe(t){return t&1?~t>>1:t>>1}function $Pe(t,e){let n=Array(t);for(let r=0,i=0;r<t;r++)n[r]=i+=FPe(e());return n}function W1(t,e=0){let n=[];for(;;){let r=t(),i=t();if(!i)break;e+=r;for(let s=0;s<i;s++)n.push(e+s);e+=i+1}return n}function ese(t){return Y1(()=>{let e=W1(t);if(e.length)return e})}function tse(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(zPe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(VPe(n,t))}return e.flat()}function Y1(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function nse(t,e,n){let r=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)$Pe(t,n).forEach((s,o)=>r[o].push(s));return r}function zPe(t,e){let n=1+e(),r=e(),i=Y1(e);return nse(i.length,1+t,e).flatMap((o,a)=>{let[l,...c]=o;return Array(i[a]).fill().map((d,h)=>{let m=h*r;return[l+h*n,c.map(g=>g+m)]})})}function VPe(t,e){let n=1+e();return nse(n,1+t,e).map(i=>[i[0],i.slice(1)])}function HPe(t){let e=[],n=W1(t);return i(r([]),[]),e;function r(s){let o=t(),a=Y1(()=>{let l=W1(t).map(c=>n[c]);if(l.length)return r(l)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,l){if(!(s&4&&l===a[a.length-1])){s&2&&(l=a[a.length-1]),s&1&&e.push(a);for(let c of o)for(let d of c.Q)i(c,[...a,d],l)}}}function qPe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function rse(t){return`{${qPe(t)}}`}function GPe(t){let e=[];for(let n=0,r=t.length;n<r;){let i=t.codePointAt(n);n+=i<65536?1:2,e.push(i)}return e}function Px(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let i=0;i<n;)r.push(String.fromCodePoint(...t.slice(i,i+=4096)));return r.join("")}function KPe(t,e){let n=t.length,r=n-e.length;for(let i=0;r==0&&i<n;i++)r=t[i]-e[i];return r}var WPe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const J1=44032,CT=4352,PT=4449,_T=4519,ise=19,sse=21,_x=28,IT=sse*_x,YPe=ise*IT,JPe=J1+YPe,XPe=CT+ise,QPe=PT+sse,ZPe=_T+_x;function t1(t){return t>>24&255}function ose(t){return t&16777215}let bM,vH,wM,D2;function e5e(){let t=Zie(WPe);bM=new Map(ese(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),vH=new Set(W1(t)),wM=new Map,D2=new Map;for(let[e,n]of tse(t)){if(!vH.has(e)&&n.length==2){let[r,i]=n,s=D2.get(r);s||(s=new Map,D2.set(r,s)),s.set(i,e)}wM.set(e,n.reverse())}}function ase(t){return t>=J1&&t<JPe}function t5e(t,e){if(t>=CT&&t<XPe&&e>=PT&&e<QPe)return J1+(t-CT)*IT+(e-PT)*_x;if(ase(t)&&e>_T&&e<ZPe&&(t-J1)%_x==0)return t+(e-_T);{let n=D2.get(t);return n&&(n=n.get(e),n)?n:-1}}function lse(t){bM||e5e();let e=[],n=[],r=!1;function i(s){let o=bM.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of t)for(;;){if(s<128)e.push(s);else if(ase(s)){let o=s-J1,a=o/IT|0,l=o%IT/_x|0,c=o%_x;i(CT+a),i(PT+l),c>0&&i(_T+c)}else{let o=wM.get(s);o?n.push(...o):i(s)}if(!n.length)break;s=n.pop()}if(r&&e.length>1){let s=t1(e[0]);for(let o=1;o<e.length;o++){let a=t1(e[o]);if(a==0||s<=a){s=a;continue}let l=o-1;for(;;){let c=e[l+1];if(e[l+1]=e[l],e[l]=c,!l||(s=t1(e[--l]),s<=a))break}s=t1(e[o])}}return e}function n5e(t){let e=[],n=[],r=-1,i=0;for(let s of t){let o=t1(s),a=ose(s);if(r==-1)o==0?r=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),i=o;else{let l=t5e(r,a);l>=0?r=l:i==0&&o==0?(e.push(r),r=a):(n.push(a),i=o)}}return r>=0&&e.push(r,...n),e}function cse(t){return lse(t).map(ose)}function r5e(t){return n5e(lse(t))}const bH=45,use=".",dse=65039,fse=1,RT=t=>Array.from(t);function X1(t,e){return t.P.has(e)||t.Q.has(e)}class i5e extends Array{get is_emoji(){return!0}}let EM,hse,qp,SM,pse,hy,FI,Ig,kp,wH,AM;function d8(){if(EM)return;let t=Zie(jPe);const e=()=>W1(t),n=()=>new Set(e()),r=(d,h)=>h.forEach(m=>d.add(m));EM=new Map(tse(t)),hse=n(),qp=e(),SM=new Set(e().map(d=>qp[d])),qp=new Set(qp),pse=n(),n();let i=ese(t),s=t();const o=()=>{let d=new Set;return e().forEach(h=>r(d,i[h])),r(d,e()),d};hy=Y1(d=>{let h=Y1(t).map(m=>m+96);if(h.length){let m=d>=s;h[0]-=32,h=Px(h),m&&(h=`Restricted[${h}]`);let g=o(),v=o(),x=!t();return{N:h,P:g,Q:v,M:x,R:m}}}),FI=n(),Ig=new Map;let a=e().concat(RT(FI)).sort((d,h)=>d-h);a.forEach((d,h)=>{let m=t(),g=a[h]=m?a[h-m]:{V:[],M:new Map};g.V.push(d),FI.has(d)||Ig.set(d,g)});for(let{V:d,M:h}of new Set(Ig.values())){let m=[];for(let v of d){let x=hy.filter(w=>X1(w,v)),b=m.find(({G:w})=>x.some(k=>w.has(k)));b||(b={G:new Set,V:[]},m.push(b)),b.V.push(v),r(b.G,x)}let g=m.flatMap(v=>RT(v.G));for(let{G:v,V:x}of m){let b=new Set(g.filter(w=>!v.has(w)));for(let w of x)h.set(w,b)}}kp=new Set;let l=new Set;const c=d=>kp.has(d)?l.add(d):kp.add(d);for(let d of hy){for(let h of d.P)c(h);for(let h of d.Q)c(h)}for(let d of kp)!Ig.has(d)&&!l.has(d)&&Ig.set(d,fse);r(kp,cse(kp)),wH=HPe(t).map(d=>i5e.from(d)).sort(KPe),AM=new Map;for(let d of wH){let h=[AM];for(let m of d){let g=h.map(v=>{let x=v.get(m);return x||(x=new Map,v.set(m,x)),x});m===dse?h.push(...g):h=g}for(let m of h)m.V=d}}function f8(t){return(mse(t)?"":`${h8(YN([t]))} `)+rse(t)}function h8(t){return`"${t}"`}function s5e(t){if(t.length>=4&&t[2]==bH&&t[3]==bH)throw new Error(`invalid label extension: "${Px(t.slice(0,4))}"`)}function o5e(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function a5e(t){let e=t[0],n=yH.get(e);if(n)throw w1(`leading ${n}`);let r=t.length,i=-1;for(let s=1;s<r;s++){e=t[s];let o=yH.get(e);if(o){if(i==s)throw w1(`${n} + ${o}`);i=s+1,n=o}}if(i==r)throw w1(`trailing ${n}`)}function YN(t,e=1/0,n=rse){let r=[];l5e(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let i=0,s=t.length;for(let o=0;o<s;o++){let a=t[o];mse(a)&&(r.push(Px(t.slice(i,o))),r.push(n(a)),i=o+1)}return r.push(Px(t.slice(i,s))),r.join("")}function l5e(t){return d8(),qp.has(t)}function mse(t){return d8(),pse.has(t)}function c5e(t){return h5e(u5e(t,r5e,g5e))}function u5e(t,e,n){if(!t)return[];d8();let r=0;return t.split(use).map(i=>{let s=GPe(i),o={input:s,offset:r};r+=s.length+1;try{let a=o.tokens=m5e(s,e,n),l=a.length,c;if(!l)throw new Error("empty label");let d=o.output=a.flat();if(o5e(d),!(o.emoji=l>1||a[0].is_emoji)&&d.every(m=>m<128))s5e(d),c="ASCII";else{let m=a.flatMap(g=>g.is_emoji?[]:g);if(!m.length)c="Emoji";else{if(qp.has(d[0]))throw w1("leading combining mark");for(let x=1;x<l;x++){let b=a[x];if(!b.is_emoji&&qp.has(b[0]))throw w1(`emoji + combining mark: "${Px(a[x-1])} + ${YN([b[0]])}"`)}a5e(d);let g=RT(new Set(m)),[v]=f5e(g);p5e(v,m),d5e(v,g),c=v.N}}o.type=c}catch(a){o.error=a}return o})}function d5e(t,e){let n,r=[];for(let i of e){let s=Ig.get(i);if(s===fse)return;if(s){let o=s.M.get(i);if(n=n?n.filter(a=>o.has(a)):RT(o),!n.length)return}else r.push(i)}if(n){for(let i of n)if(r.every(s=>X1(i,s)))throw new Error(`whole-script confusable: ${t.N}/${i.N}`)}}function f5e(t){let e=hy;for(let n of t){let r=e.filter(i=>X1(i,n));if(!r.length)throw hy.some(i=>X1(i,n))?yse(e[0],n):gse(n);if(e=r,r.length==1)break}return e}function h5e(t){return t.map(({input:e,error:n,output:r})=>{if(n){let i=n.message;throw new Error(t.length==1?i:`Invalid label ${h8(YN(e,63))}: ${i}`)}return Px(r)}).join(use)}function gse(t){return new Error(`disallowed character: ${f8(t)}`)}function yse(t,e){let n=f8(e),r=hy.find(i=>i.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function w1(t){return new Error(`illegal placement: ${t}`)}function p5e(t,e){for(let n of e)if(!X1(t,n))throw yse(t,n);if(t.M){let n=cse(e);for(let r=1,i=n.length;r<i;r++)if(SM.has(n[r])){let s=r+1;for(let o;s<i&&SM.has(o=n[s]);s++)for(let a=r;a<s;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${f8(o)}`);if(s-r>xH)throw new Error(`excessive non-spacing marks: ${h8(YN(n.slice(r-1,s)))} (${s-r}/${xH})`);r=s}}}function m5e(t,e,n){let r=[],i=[];for(t=t.slice().reverse();t.length;){let s=y5e(t);if(s)i.length&&(r.push(e(i)),i=[]),r.push(n(s));else{let o=t.pop();if(kp.has(o))i.push(o);else{let a=EM.get(o);if(a)i.push(...a);else if(!hse.has(o))throw gse(o)}}}return i.length&&r.push(e(i)),r}function g5e(t){return t.filter(e=>e!=dse)}function y5e(t,e){let n=AM,r,i=t.length;for(;i&&(n=n.get(t[--i]),!!n);){let{V:s}=n;s&&(r=s,t.length=i)}return r}const xse=new Uint8Array(32);xse.fill(0);function EH(t){return ve(t.length!==0,"invalid ENS name; empty component","comp",t),t}function p8(t){const e=bi(x5e(t)),n=[];if(t.length===0)return n;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(n.push(EH(e.slice(r,i))),r=i+1);return ve(r<e.length,"invalid ENS name; empty component","name",t),n.push(EH(e.slice(r))),n}function x5e(t){try{if(t.length===0)throw new Error("empty label");return c5e(t)}catch(e){ve(!1,`invalid ENS name (${e.message})`,"name",t)}}function oyt(t){try{return p8(t).length!==0}catch{}return!1}function TM(t){ve(typeof t=="string","invalid ENS name; not a string","name",t),ve(t.length,"invalid ENS name (empty label)","name",t);let e=xse;const n=p8(t);for(;n.length;)e=Wn(Ln([e,Wn(n.pop())]));return ct(e)}function v5e(t,e){const n=e??63;return ve(n<=255,"DNS encoded label cannot exceed 255","length",n),ct(Ln(p8(t).map(r=>{ve(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const i=new Uint8Array(r.length+1);return i.set(r,1),i[0]=i.length-1,i})))+"00"}function vse(t){return typeof t=="string"&&(t=bi(t)),Wn(Ln([bi(YCe),bi(String(t.length)),t]))}function ayt(t,e){const n=vse(t);return qN(n,e)}const bse=new Uint8Array(32);bse.fill(0);const b5e=BigInt(-1),wse=BigInt(0),Ese=BigInt(1),w5e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function E5e(t){const e=Et(t),n=e.length%32;return n?Ln([e,bse.slice(n)]):ct(e)}const S5e=Ad(Ese,32),A5e=Ad(wse,32),SH={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},$I=["name","version","chainId","verifyingContract","salt"];function AH(t){return function(e){return ve(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const T5e={name:AH("name"),version:AH("version"),chainId:function(t){const e=It(t,"domain.chainId");return ve(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Dl(e)},verifyingContract:function(t){try{return vn(t).toLowerCase()}catch{}ve(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Et(t,"domain.salt");return ve(e.length===32,'invalid domain value "salt"',"domain.salt",t),ct(e)}};function zI(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);ve(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const i=Vp(w5e,n?r-1:r),s=n?(i+Ese)*b5e:wse;return function(o){const a=It(o,"value");return ve(a>=s&&a<=i,`value out-of-bounds for ${t}`,"value",a),Ad(n?_re(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return ve(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const i=Et(r);return ve(i.length===n,`invalid length for ${t}`,"value",r),E5e(r)}}}switch(t){case"address":return function(e){return Sd(vn(e),32)};case"bool":return function(e){return e?S5e:A5e};case"bytes":return function(e){return Wn(e)};case"string":return function(e){return kd(e)}}return null}function TH(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function SA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var jw,Ju,tx,vN,Sse;const Fa=class Fa{constructor(e){Fe(this,vN);Ce(this,"primaryType");Fe(this,jw);Fe(this,Ju);Fe(this,tx);ge(this,Ju,new Map),ge(this,tx,new Map);const n=new Map,r=new Map,i=new Map,s={};Object.keys(e).forEach(l=>{s[l]=e[l].map(({name:c,type:d})=>{let{base:h,index:m}=SA(d);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:c,type:h+(m||"")}}),n.set(l,new Set),r.set(l,[]),i.set(l,new Set)}),ge(this,jw,JSON.stringify(s));for(const l in s){const c=new Set;for(const d of s[l]){ve(!c.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(l)}`,"types",e),c.add(d.name);const h=SA(d.type).base;ve(h!==l,`circular type reference to ${JSON.stringify(h)}`,"types",e),!zI(h)&&(ve(r.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),r.get(h).push(l),n.get(l).add(h))}}const o=Array.from(r.keys()).filter(l=>r.get(l).length===0);ve(o.length!==0,"missing primary type","types",e),ve(o.length===1,`ambiguous primary types or unused types: ${o.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),$t(this,{primaryType:o[0]});function a(l,c){ve(!c.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),c.add(l);for(const d of n.get(l))if(r.has(d)){a(d,c);for(const h of c)i.get(h).add(d)}c.delete(l)}a(this.primaryType,new Set);for(const[l,c]of i){const d=Array.from(c);d.sort(),re(this,Ju).set(l,TH(l,s[l])+d.map(h=>TH(h,s[h])).join(""))}}get types(){return JSON.parse(re(this,jw))}getEncoder(e){let n=re(this,tx).get(e);return n||(n=st(this,vN,Sse).call(this,e),re(this,tx).set(e,n)),n}encodeType(e){const n=re(this,Ju).get(e);return ve(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Wn(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(zI(e))return r(e,n);const i=SA(e).array;if(i)return ve(i.count===-1||i.count===n.length,`array length mismatch; expected length ${i.count}`,"value",n),n.map(o=>this._visit(i.prefix,o,r));const s=this.types[e];if(s)return s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,n[a],r),o),{});ve(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Fa(e)}static getPrimaryType(e){return Fa.from(e).primaryType}static hashStruct(e,n,r){return Fa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const i=SH[r];ve(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:i})}return n.sort((r,i)=>$I.indexOf(r.name)-$I.indexOf(i.name)),Fa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Ln(["0x1901",Fa.hashDomain(e),Fa.from(n).hash(r)])}static hash(e,n,r){return Wn(Fa.encode(e,n,r))}static async resolveNames(e,n,r,i){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const s={};e.verifyingContract&&!vr(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Fa.from(n);o.visit(r,(a,l)=>(a==="address"&&!vr(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=await i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}}static getPayload(e,n,r){Fa.hashDomain(e);const i={},s=[];$I.forEach(l=>{const c=e[l];c!=null&&(i[l]=T5e[l](c),s.push({name:l,type:SH[l]}))});const o=Fa.from(n);n=o.types;const a=Object.assign({},n);return ve(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,c)=>{if(l.match(/^bytes(\d*)/))return ct(Et(c));if(l.match(/^u?int/))return It(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return ve(typeof c=="string","invalid string","value",c),c}ve(!1,"unsupported type","type",l)})}}};jw=new WeakMap,Ju=new WeakMap,tx=new WeakMap,vN=new WeakSet,Sse=function(e){{const i=zI(e);if(i)return i}const n=SA(e).array;if(n){const i=n.prefix,s=this.getEncoder(i);return o=>{ve(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(s);return re(this,Ju).has(i)&&(a=a.map(Wn)),Wn(Ln(a))}}const r=this.types[e];if(r){const i=kd(re(this,Ju).get(e));return s=>{const o=r.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return re(this,Ju).has(l)?Wn(c):c});return o.unshift(i),Ln(o)}}ve(!1,`unknown type: ${e}`,"type",e)};let jm=Fa;function lyt(t,e,n,r){return qN(jm.hash(t,e,n),r)}function so(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const k5e="external public payable override",N5e=so(k5e.split(" ")),Ase="constant external internal payable private public pure view override",C5e=so(Ase.split(" ")),Tse="constructor error event fallback function receive struct",kse=so(Tse.split(" ")),Nse="calldata memory storage payable indexed",P5e=so(Nse.split(" ")),_5e="tuple returns",I5e=[Tse,Nse,_5e,Ase].join(" "),R5e=so(I5e.split(" ")),O5e={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},M5e=new RegExp("^(\\s*)"),L5e=new RegExp("^([0-9]+)"),j5e=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Cse=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Pse=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var as,Ml,Dw,kM;const bN=class bN{constructor(e){Fe(this,Dw);Fe(this,as);Fe(this,Ml);ge(this,as,0),ge(this,Ml,e.slice())}get offset(){return re(this,as)}get length(){return re(this,Ml).length-re(this,as)}clone(){return new bN(re(this,Ml))}reset(){ge(this,as,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=st(this,Dw,kM).call(this,re(this,as)+1,e.match+1);return ge(this,as,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;re(this,as)<e.match-1;){const r=this.peek().linkNext;n.push(st(this,Dw,kM).call(this,re(this,as)+1,r)),ge(this,as,r)}return ge(this,as,e.match+1),n}peek(){if(re(this,as)>=re(this,Ml).length)throw new Error("out-of-bounds");return re(this,Ml)[re(this,as)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Sb(this,as)._++,e}toString(){const e=[];for(let n=re(this,as);n<re(this,Ml).length;n++){const r=re(this,Ml)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};as=new WeakMap,Ml=new WeakMap,Dw=new WeakSet,kM=function(e=0,n=0){return new bN(re(this,Ml).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Xl=bN;function Vh(t){const e=[],n=o=>{const a=s<t.length?JSON.stringify(t[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)};let r=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(M5e);a&&(s+=a[1].length,o=t.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let c=O5e[o[0]]||"";if(c){if(l.type=c,l.text=o[0],s++,c==="OPEN_PAREN")r.push(e.length-1),i.push(e.length-1);else if(c=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),l.match=r.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(c==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(c==="OPEN_BRACKET")l.type="BRACKET";else if(c==="CLOSE_BRACKET"){let d=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const h=e.pop().text;d=h+d,e[e.length-1].value=nn(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=d}continue}if(a=o.match(j5e),a){if(l.text=a[1],s+=l.text.length,R5e.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(Pse)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(L5e),a){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new Xl(e.map(o=>Object.freeze(o)))}function kH(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function JN(t,e){if(e.peekKeyword(kse)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Nd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function _se(t){let e=Nd(t,C5e);return kH(e,so("constant payable nonpayable".split(" "))),kH(e,so("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function gd(t,e){return t.popParams().map(n=>xs.from(n,e))}function Ise(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return It(t.pop().text);throw new Error("invalid gas")}return null}function Dm(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const D5e=new RegExp(/^(.*)\[([0-9]*)\]$/);function NH(t){const e=t.match(Pse);if(ve(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);ve(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);ve(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const Fr={},Lo=Symbol.for("_ethers_internal"),CH="_ParamTypeInternal",PH="_ErrorInternal",_H="_EventInternal",IH="_ConstructorInternal",RH="_FallbackInternal",OH="_FunctionInternal",MH="_StructInternal";var nx,B2;const $a=class $a{constructor(e,n,r,i,s,o,a,l){Fe(this,nx);Ce(this,"name");Ce(this,"type");Ce(this,"baseType");Ce(this,"indexed");Ce(this,"components");Ce(this,"arrayLength");Ce(this,"arrayChildren");if($h(e,Fr,"ParamType"),Object.defineProperty(this,Lo,{value:CH}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||l==null)throw new Error("")}else if(a!=null||l!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");$t(this,{name:n,type:r,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=r,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(i=>r.arrayChildren.walk(i,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((i,s)=>r.components[s].walk(i,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],i=[e];return st(this,nx,B2).call(this,r,e,n,s=>{i[0]=s}),r.length&&await Promise.all(r),i[0]}static from(e,n){if($a.isParamType(e))return e;if(typeof e=="string")try{return $a.from(Vh(e),n)}catch{ve(!1,"invalid param type","obj",e)}else if(e instanceof Xl){let a="",l="",c=null;Nd(e,so(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",c=e.popParams().map(x=>$a.from(x)),a=`tuple(${c.map(x=>x.format()).join(",")})`):(a=NH(e.popType("TYPE")),l=a);let d=null,h=null;for(;e.length&&e.peekType("BRACKET");){const x=e.pop();d=new $a(Fr,"",a,l,null,c,h,d),h=x.value,a+=x.text,l="array",c=null}let m=null;if(Nd(e,P5e).has("indexed")){if(!n)throw new Error("");m=!0}const v=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new $a(Fr,v,a,l,m,c,h,d)}const r=e.name;ve(!r||typeof r=="string"&&r.match(Cse),"invalid name","obj.name",r);let i=e.indexed;i!=null&&(ve(n,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(D5e);if(o){const a=parseInt(o[2]||"-1"),l=$a.from({type:o[1],components:e.components});return new $a(Fr,r||"",s,"array",i,null,a,l)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const a=e.components!=null?e.components.map(c=>$a.from(c)):null;return new $a(Fr,r||"",s,"tuple",i,a,null,null)}return s=NH(e.type),new $a(Fr,r||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[Lo]===CH}};nx=new WeakSet,B2=function(e,n,r,i){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((l,c)=>{var d;st(d=o,nx,B2).call(d,e,l,r,h=>{a[c]=h})}),i(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in n))throw new Error(`missing value for component ${l.name}`);return n[l.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((l,c)=>{var d;st(d=o[c],nx,B2).call(d,e,l,r,h=>{a[c]=h})}),i(a);return}const s=r(this.type,n);s.then?e.push((async function(){i(await s)})()):i(s)};let xs=$a;class Bm{constructor(e,n,r){Ce(this,"type");Ce(this,"inputs");$h(e,Fr,"Fragment"),r=Object.freeze(r.slice()),$t(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Bm.from(JSON.parse(e))}catch{}return Bm.from(Vh(e))}if(e instanceof Xl)switch(e.peekKeyword(kse)){case"constructor":return cd.from(e);case"error":return No.from(e);case"event":return Ic.from(e);case"fallback":case"receive":return Vu.from(e);case"function":return Rc.from(e);case"struct":return Nm.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return cd.from(e);case"error":return No.from(e);case"event":return Ic.from(e);case"fallback":case"receive":return Vu.from(e);case"function":return Rc.from(e);case"struct":return Nm.from(e)}tt(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ve(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return cd.isFragment(e)}static isError(e){return No.isFragment(e)}static isEvent(e){return Ic.isFragment(e)}static isFunction(e){return Rc.isFragment(e)}static isStruct(e){return Nm.isFragment(e)}}class XN extends Bm{constructor(n,r,i,s){super(n,r,s);Ce(this,"name");ve(typeof i=="string"&&i.match(Cse),"invalid identifier","name",i),s=Object.freeze(s.slice()),$t(this,{name:i})}}function Q1(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class No extends XN{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,Lo,{value:PH})}get selector(){return kd(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+Q1(e,this.inputs)),n.join(" ")}static from(e){if(No.isFragment(e))return e;if(typeof e=="string")return No.from(Vh(e));if(e instanceof Xl){const n=JN("error",e),r=gd(e);return Dm(e),new No(Fr,n,r)}return new No(Fr,e.name,e.inputs?e.inputs.map(xs.from):[])}static isFragment(e){return e&&e[Lo]===PH}}class Ic extends XN{constructor(n,r,i,s){super(n,"event",r,i);Ce(this,"anonymous");Object.defineProperty(this,Lo,{value:_H}),$t(this,{anonymous:s})}get topicHash(){return kd(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+Q1(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(s=>xs.from(s)),new Ic(Fr,n,r,!1).topicHash}static from(n){if(Ic.isFragment(n))return n;if(typeof n=="string")try{return Ic.from(Vh(n))}catch{ve(!1,"invalid event fragment","obj",n)}else if(n instanceof Xl){const r=JN("event",n),i=gd(n,!0),s=!!Nd(n,so(["anonymous"])).has("anonymous");return Dm(n),new Ic(Fr,r,i,s)}return new Ic(Fr,n.name,n.inputs?n.inputs.map(r=>xs.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[Lo]===_H}}class cd extends Bm{constructor(n,r,i,s,o){super(n,r,i);Ce(this,"payable");Ce(this,"gas");Object.defineProperty(this,Lo,{value:IH}),$t(this,{payable:s,gas:o})}format(n){if(tt(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n)))});const r=[`constructor${Q1(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(cd.isFragment(n))return n;if(typeof n=="string")try{return cd.from(Vh(n))}catch{ve(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Xl){Nd(n,so(["constructor"]));const r=gd(n),i=!!Nd(n,N5e).has("payable"),s=Ise(n);return Dm(n),new cd(Fr,"constructor",r,i,s)}return new cd(Fr,"constructor",n.inputs?n.inputs.map(xs.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Lo]===IH}}class Vu extends Bm{constructor(n,r,i){super(n,"fallback",r);Ce(this,"payable");Object.defineProperty(this,Lo,{value:RH}),$t(this,{payable:i})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:i})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Vu.isFragment(n))return n;if(typeof n=="string")try{return Vu.from(Vh(n))}catch{ve(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Xl){const r=n.toString(),i=n.peekKeyword(so(["fallback","receive"]));if(ve(i,"type must be fallback or receive","obj",r),n.popKeyword(so(["fallback","receive"]))==="receive"){const l=gd(n);return ve(l.length===0,"receive cannot have arguments","obj.inputs",l),Nd(n,so(["payable"])),Dm(n),new Vu(Fr,[],!0)}let o=gd(n);o.length?ve(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(l=>l.format("minimal")).join(", ")):o=[xs.from("bytes")];const a=_se(n);if(ve(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Nd(n,so(["returns"])).has("returns")){const l=gd(n);ve(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(c=>c.format("minimal")).join(", "))}return Dm(n),new Vu(Fr,o,a==="payable")}if(n.type==="receive")return new Vu(Fr,[],!0);if(n.type==="fallback"){const r=[xs.from("bytes")],i=n.stateMutability==="payable";return new Vu(Fr,r,i)}ve(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[Lo]===RH}}class Rc extends XN{constructor(n,r,i,s,o,a){super(n,"function",r,s);Ce(this,"constant");Ce(this,"outputs");Ce(this,"stateMutability");Ce(this,"payable");Ce(this,"gas");Object.defineProperty(this,Lo,{value:OH}),o=Object.freeze(o.slice()),$t(this,{constant:i==="view"||i==="pure",gas:a,outputs:o,payable:i==="payable",stateMutability:i})}get selector(){return kd(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(n))),outputs:this.outputs.map(i=>JSON.parse(i.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+Q1(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Q1(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(s=>xs.from(s)),new Rc(Fr,n,"view",r,[],null).selector}static from(n){if(Rc.isFragment(n))return n;if(typeof n=="string")try{return Rc.from(Vh(n))}catch{ve(!1,"invalid function fragment","obj",n)}else if(n instanceof Xl){const i=JN("function",n),s=gd(n),o=_se(n);let a=[];Nd(n,so(["returns"])).has("returns")&&(a=gd(n));const l=Ise(n);return Dm(n),new Rc(Fr,i,o,s,a,l)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Rc(Fr,n.name,r,n.inputs?n.inputs.map(xs.from):[],n.outputs?n.outputs.map(xs.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[Lo]===OH}}class Nm extends XN{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,Lo,{value:MH})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Nm.from(Vh(e))}catch{ve(!1,"invalid struct fragment","obj",e)}else if(e instanceof Xl){const n=JN("struct",e),r=gd(e);return Dm(e),new Nm(Fr,n,r)}return new Nm(Fr,e.name,e.inputs?e.inputs.map(xs.from):[])}static isFragment(e){return e&&e[Lo]===MH}}const rc=new Map;rc.set(0,"GENERIC_PANIC");rc.set(1,"ASSERT_FALSE");rc.set(17,"OVERFLOW");rc.set(18,"DIVIDE_BY_ZERO");rc.set(33,"ENUM_RANGE_ERROR");rc.set(34,"BAD_STORAGE_DATA");rc.set(49,"STACK_UNDERFLOW");rc.set(50,"ARRAY_RANGE_ERROR");rc.set(65,"OUT_OF_MEMORY");rc.set(81,"UNINITIALIZED_FUNCTION_CALL");const B5e=new RegExp(/^bytes([0-9]*)$/),U5e=new RegExp(/^(u?int)([0-9]*)$/);let VI=null,LH=1024;function F5e(t,e,n,r){let i="missing revert data",s=null;const o=null;let a=null;if(n){i="execution reverted";const c=Et(n);if(n=ct(n),c.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(c.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(ct(c.slice(0,4))==="0x08c379a0")try{s=r.decode(["string"],c.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(ct(c.slice(0,4))==="0x4e487b71")try{const d=Number(r.decode(["uint256"],c.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[d]},s=`Panic due to ${rc.get(d)||"UNKNOWN"}(${d})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?vn(e.to):null,data:e.data||"0x"};return e.from&&(l.from=vn(e.from)),jr(i,"CALL_EXCEPTION",{action:t,data:n,reason:s,transaction:l,invocation:o,revert:a})}var lh,Rg;const wN=class wN{constructor(){Fe(this,lh)}getDefaultValue(e){const n=e.map(i=>st(this,lh,Rg).call(this,xs.from(i)));return new EA(n,"_").defaultValue()}encode(e,n){kre(n.length,e.length,"types/values length mismatch");const r=e.map(o=>st(this,lh,Rg).call(this,xs.from(o))),i=new EA(r,"_"),s=new dM;return i.encode(s,n),s.data}decode(e,n,r){const i=e.map(o=>st(this,lh,Rg).call(this,xs.from(o)));return new EA(i,"_").decode(new fM(n,r,LH))}static _setDefaultMaxInflation(e){ve(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),LH=e}static defaultAbiCoder(){return VI==null&&(VI=new wN),VI}static getBuiltinCallException(e,n,r){return F5e(e,n,r,wN.defaultAbiCoder())}};lh=new WeakSet,Rg=function(e){if(e.isArray())return new sPe(st(this,lh,Rg).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new EA(e.components.map(r=>st(this,lh,Rg).call(this,r)),e.name);switch(e.baseType){case"address":return new rPe(e.name);case"bool":return new oPe(e.name);case"string":return new mPe(e.name);case"bytes":return new aPe(e.name);case"":return new uPe(e.name)}let n=e.type.match(U5e);if(n){let r=parseInt(n[2]||"256");return ve(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new pPe(r/8,n[1]==="int",e.name)}if(n=e.type.match(B5e),n){let r=parseInt(n[1]);return ve(r!==0&&r<=32,"invalid bytes length","param",e),new lPe(r,e.name)}ve(!1,"invalid type","type",e.type)};let Z1=wN;class $5e{constructor(e,n,r){Ce(this,"fragment");Ce(this,"name");Ce(this,"signature");Ce(this,"topic");Ce(this,"args");const i=e.name,s=e.format();$t(this,{fragment:e,name:i,signature:s,topic:n,args:r})}}class z5e{constructor(e,n,r,i){Ce(this,"fragment");Ce(this,"name");Ce(this,"args");Ce(this,"signature");Ce(this,"selector");Ce(this,"value");const s=e.name,o=e.format();$t(this,{fragment:e,name:s,args:r,signature:o,selector:n,value:i})}}class V5e{constructor(e,n,r){Ce(this,"fragment");Ce(this,"name");Ce(this,"args");Ce(this,"signature");Ce(this,"selector");const i=e.name,s=e.format();$t(this,{fragment:e,name:i,args:r,signature:s,selector:n})}}class jH{constructor(e){Ce(this,"hash");Ce(this,"_isIndexed");$t(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const DH={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},BH={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&DH[t.toString()]&&(e=DH[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Ec,Sc,Ac,Ns,Gc,U2,F2;const Dp=class Dp{constructor(e){Fe(this,Gc);Ce(this,"fragments");Ce(this,"deploy");Ce(this,"fallback");Ce(this,"receive");Fe(this,Ec);Fe(this,Sc);Fe(this,Ac);Fe(this,Ns);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,ge(this,Ac,new Map),ge(this,Ec,new Map),ge(this,Sc,new Map);const r=[];for(const o of n)try{r.push(Bm.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}$t(this,{fragments:Object.freeze(r)});let i=null,s=!1;ge(this,Ns,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let l;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}$t(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(ve(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":l=re(this,Ac);break;case"event":l=re(this,Sc);break;case"error":l=re(this,Ec);break;default:return}const c=o.format();l.has(c)||l.set(c,o)}),this.deploy||$t(this,{deploy:cd.from("constructor()")}),$t(this,{fallback:i,receive:s})}format(e){const n=e?"minimal":"full";return this.fragments.map(i=>i.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return Z1.defaultAbiCoder()}getFunctionName(e){const n=st(this,Gc,U2).call(this,e,null,!1);return ve(n,"no matching function","key",e),n.name}hasFunction(e){return!!st(this,Gc,U2).call(this,e,null,!1)}getFunction(e,n){return st(this,Gc,U2).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(re(this,Ac).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(re(this,Ac).get(i),r)}}getEventName(e){const n=st(this,Gc,F2).call(this,e,null,!1);return ve(n,"no matching event","key",e),n.name}hasEvent(e){return!!st(this,Gc,F2).call(this,e,null,!1)}getEvent(e,n){return st(this,Gc,F2).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(re(this,Sc).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(re(this,Sc).get(i),r)}}getError(e,n){if(vr(e)){const i=e.toLowerCase();if(BH[i])return No.from(BH[i].signature);for(const s of re(this,Ec).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,o]of re(this,Ec))s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?No.from("error Error(string)"):e==="Panic"?No.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(o=>JSON.stringify(o.format())).join(", ");ve(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=No.from(e).format(),e==="Error(string)")return No.from("error Error(string)");if(e==="Panic(uint256)")return No.from("error Panic(uint256)");const r=re(this,Ec).get(e);return r||null}forEachError(e){const n=Array.from(re(this,Ec).keys());n.sort((r,i)=>r.localeCompare(i));for(let r=0;r<n.length;r++){const i=n[r];e(re(this,Ec).get(i),r)}}_decodeParams(e,n){return re(this,Ns).decode(e,n)}_encodeParams(e,n){return re(this,Ns).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ve(r,"unknown error","fragment",e),e=r}return ve(xr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,xr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);ve(r,"unknown error","fragment",e),e=r}return Ln([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ve(r,"unknown function","fragment",e),e=r}return ve(xr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,xr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);ve(r,"unknown function","fragment",e),e=r}return Ln([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const s=this.getFunction(e);ve(s,"unknown function","fragment",e),e=s}let r="invalid length for result data";const i=ys(n);if(i.length%32===0)try{return re(this,Ns).decode(e.outputs,i)}catch{r="could not decode result data"}tt(!1,r,"BAD_DATA",{value:ct(i),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Et(e,"data"),i=Z1.getBuiltinCallException("call",n,r);if(i.message.startsWith("execution reverted (unknown custom error)")){const a=ct(r.slice(0,4)),l=this.getError(a);if(l)try{const c=re(this,Ns).decode(l.inputs,r.slice(4));i.revert={name:l.name,signature:l.format(),args:c},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);ve(r,"unknown function","fragment",e),e=r}return ct(re(this,Ns).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const s=this.getEvent(e);ve(s,"unknown event","eventFragment",e),e=s}tt(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const i=(s,o)=>s.type==="string"?kd(o):s.type==="bytes"?Wn(ct(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=Ad(o):s.type.match(/^bytes/)?o=Hke(o,32):s.type==="address"&&re(this,Ns).encode(["address"],[o]),Sd(ct(o),32));for(n.forEach((s,o)=>{const a=e.inputs[o];if(!a.indexed){ve(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?ve(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);ve(o,"unknown event","eventFragment",e),e=o}const r=[],i=[],s=[];return e.anonymous||r.push(e.topicHash),ve(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const l=n[a];if(o.indexed)if(o.type==="string")r.push(kd(l));else if(o.type==="bytes")r.push(Wn(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(re(this,Ns).encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:re(this,Ns).encode(i,s),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const g=this.getEvent(e);ve(g,"unknown event","eventFragment",e),e=g}if(r!=null&&!e.anonymous){const g=e.topicHash;ve(vr(r[0],32)&&r[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const i=[],s=[],o=[];e.inputs.forEach((g,v)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(i.push(xs.from({type:"bytes32",name:g.name})),o.push(!0)):(i.push(g),o.push(!1)):(s.push(g),o.push(!1))});const a=r!=null?re(this,Ns).decode(i,Ln(r)):null,l=re(this,Ns).decode(s,n,!0),c=[],d=[];let h=0,m=0;return e.inputs.forEach((g,v)=>{let x=null;if(g.indexed)if(a==null)x=new jH(null);else if(o[v])x=new jH(a[m++]);else try{x=a[m++]}catch(b){x=b}else try{x=l[h++]}catch(b){x=b}c.push(x),d.push(g.name||null)}),Sx.fromItems(c,d)}parseTransaction(e){const n=Et(e.data,"tx.data"),r=It(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(ct(n.slice(0,4)));if(!i)return null;const s=re(this,Ns).decode(i.inputs,n.slice(4));return new z5e(i,i.selector,s,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new $5e(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=ct(e),r=this.getError(xr(n,0,4));if(!r)return null;const i=re(this,Ns).decode(r.inputs,xr(n,4));return new V5e(r,r.selector,i)}static from(e){return e instanceof Dp?e:typeof e=="string"?new Dp(JSON.parse(e)):typeof e.formatJson=="function"?new Dp(e.formatJson()):typeof e.format=="function"?new Dp(e.format("json")):new Dp(e)}};Ec=new WeakMap,Sc=new WeakMap,Ac=new WeakMap,Ns=new WeakMap,Gc=new WeakSet,U2=function(e,n,r){if(vr(e)){const s=e.toLowerCase();for(const o of re(this,Ac).values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of re(this,Ac))o.split("(")[0]===e&&s.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,l=!0;$s.isTyped(o)&&o.type==="overrides"&&(l=!1,a--);for(let c=s.length-1;c>=0;c--){const d=s[c].inputs.length;d!==a&&(!l||d!==a-1)&&s.splice(c,1)}for(let c=s.length-1;c>=0;c--){const d=s[c].inputs;for(let h=0;h<n.length;h++)if($s.isTyped(n[h])){if(h>=d.length){if(n[h].type==="overrides")continue;s.splice(c,1);break}if(n[h].type!==d[h].baseType){s.splice(c,1);break}}}}if(s.length===1&&n&&n.length!==s[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ve(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}const i=re(this,Ac).get(Rc.from(e).format());return i||null},F2=function(e,n,r){if(vr(e)){const s=e.toLowerCase();for(const o of re(this,Sc).values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const s=[];for(const[o,a]of re(this,Sc))o.split("(")[0]===e&&s.push(a);if(n){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<n.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){const a=s[o].inputs;for(let l=0;l<n.length;l++)if($s.isTyped(n[l])&&n[l].type!==a[l].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&r){const o=s.map(a=>JSON.stringify(a.format())).join(", ");ve(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}const i=re(this,Sc).get(Ic.from(e).format());return i||null};let NM=Dp;const Rse=BigInt(0);function py(t){return t??null}function oi(t){return t==null?null:t.toString()}class UH{constructor(e,n,r){Ce(this,"gasPrice");Ce(this,"maxFeePerGas");Ce(this,"maxPriorityFeePerGas");$t(this,{gasPrice:py(e),maxFeePerGas:py(n),maxPriorityFeePerGas:py(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:oi(e),maxFeePerGas:oi(n),maxPriorityFeePerGas:oi(r)}}}function ew(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=ct(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)!(i in t)||t[i]==null||(e[i]=It(t[i],`request.${i}`));const r="type,nonce".split(/,/);for(const i of r)!(i in t)||t[i]==null||(e[i]=nn(t[i],`request.${i}`));return t.accessList&&(e.accessList=i0(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(i=>UN(i)?ct(i):Object.assign({},i))),e}var Xu;class H5e{constructor(e,n){Ce(this,"provider");Ce(this,"number");Ce(this,"hash");Ce(this,"timestamp");Ce(this,"parentHash");Ce(this,"parentBeaconBlockRoot");Ce(this,"nonce");Ce(this,"difficulty");Ce(this,"gasLimit");Ce(this,"gasUsed");Ce(this,"stateRoot");Ce(this,"receiptsRoot");Ce(this,"blobGasUsed");Ce(this,"excessBlobGas");Ce(this,"miner");Ce(this,"prevRandao");Ce(this,"extraData");Ce(this,"baseFeePerGas");Fe(this,Xu);ge(this,Xu,e.transactions.map(r=>typeof r!="string"?new tw(r,n):r)),$t(this,{provider:n,hash:py(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:py(e.prevRandao),extraData:e.extraData,baseFeePerGas:py(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return re(this,Xu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=re(this,Xu).slice();return e.length===0?[]:(tt(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:l,nonce:c,number:d,parentHash:h,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:v,timestamp:x,transactions:b}=this;return{_type:"Block",baseFeePerGas:oi(e),difficulty:oi(n),extraData:r,gasLimit:oi(i),gasUsed:oi(s),blobGasUsed:oi(this.blobGasUsed),excessBlobGas:oi(this.excessBlobGas),hash:o,miner:a,prevRandao:l,nonce:c,number:d,parentHash:h,timestamp:x,parentBeaconBlockRoot:m,stateRoot:g,receiptsRoot:v,transactions:b}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return re(this,Xu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=re(this,Xu)[e];else{const r=e.toLowerCase();for(const i of re(this,Xu))if(typeof i=="string"){if(i!==r)continue;n=i;break}else{if(i.hash!==r)continue;n=i;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;ve(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return q5e(this)}}Xu=new WeakMap;class lE{constructor(e,n){Ce(this,"provider");Ce(this,"transactionHash");Ce(this,"blockHash");Ce(this,"blockNumber");Ce(this,"removed");Ce(this,"address");Ce(this,"data");Ce(this,"topics");Ce(this,"index");Ce(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());$t(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:i,index:s,removed:o,topics:a,transactionHash:l,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return tt(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return tt(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return tt(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return G5e(this)}}var Bw;class Ose{constructor(e,n){Ce(this,"provider");Ce(this,"to");Ce(this,"from");Ce(this,"contractAddress");Ce(this,"hash");Ce(this,"index");Ce(this,"blockHash");Ce(this,"blockNumber");Ce(this,"logsBloom");Ce(this,"gasUsed");Ce(this,"blobGasUsed");Ce(this,"cumulativeGasUsed");Ce(this,"gasPrice");Ce(this,"blobGasPrice");Ce(this,"type");Ce(this,"status");Ce(this,"root");Fe(this,Bw);ge(this,Bw,Object.freeze(e.logs.map(i=>new lE(i,n))));let r=Rse;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),$t(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return re(this,Bw)}toJSON(){const{to:e,from:n,contractAddress:r,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:l,logs:c,status:d,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:oi(this.cumulativeGasUsed),from:n,gasPrice:oi(this.gasPrice),blobGasUsed:oi(this.blobGasUsed),blobGasPrice:oi(this.blobGasPrice),gasUsed:oi(this.gasUsed),hash:i,index:s,logs:c,logsBloom:l,root:h,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Lse(this)}reorderedEvent(e){return tt(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Mse(this,e)}}Bw=new WeakMap;var ch;const XB=class XB{constructor(e,n){Ce(this,"provider");Ce(this,"blockNumber");Ce(this,"blockHash");Ce(this,"index");Ce(this,"hash");Ce(this,"type");Ce(this,"to");Ce(this,"from");Ce(this,"nonce");Ce(this,"gasLimit");Ce(this,"gasPrice");Ce(this,"maxPriorityFeePerGas");Ce(this,"maxFeePerGas");Ce(this,"maxFeePerBlobGas");Ce(this,"data");Ce(this,"value");Ce(this,"chainId");Ce(this,"signature");Ce(this,"accessList");Ce(this,"blobVersionedHashes");Ce(this,"authorizationList");Fe(this,ch);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,ge(this,ch,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:i,type:s,to:o,from:a,nonce:l,data:c,signature:d,accessList:h,blobVersionedHashes:m}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:n,blobVersionedHashes:m,chainId:oi(this.chainId),data:c,from:a,gasLimit:oi(this.gasLimit),gasPrice:oi(this.gasPrice),hash:i,maxFeePerGas:oi(this.maxFeePerGas),maxPriorityFeePerGas:oi(this.maxPriorityFeePerGas),maxFeePerBlobGas:oi(this.maxFeePerBlobGas),nonce:l,signature:d,to:o,index:r,type:s,value:oi(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Rs({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,i=n??0;let s=re(this,ch),o=-1,a=s===-1;const l=async()=>{if(a)return null;const{blockNumber:m,nonce:g}=await Rs({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){s=m;return}if(a)return null;const v=await this.getTransaction();if(!(v&&v.blockNumber!=null))for(o===-1&&(o=s-3,o<re(this,ch)&&(o=re(this,ch)));o<=m;){if(a)return null;const x=await this.provider.getBlock(o,!0);if(x==null)return;for(const b of x)if(b===this.hash)return;for(let b=0;b<x.length;b++){const w=await x.getTransaction(b);if(w.from===this.from&&w.nonce===this.nonce){if(a)return null;const k=await this.provider.getTransactionReceipt(w.hash);if(k==null||m-k.blockNumber+1<r)return;let N="replaced";w.data===this.data&&w.to===this.to&&w.value===this.value?N="repriced":w.data==="0x"&&w.from===w.to&&w.value===Rse&&(N="cancelled"),tt(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:N==="replaced"||N==="cancelled",reason:N,replacement:w.replaceableTransaction(s),hash:w.hash,receipt:k})}}o++}},c=m=>{if(m==null||m.status!==0)return m;tt(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:m.to,from:m.from,data:""},receipt:m})},d=await this.provider.getTransactionReceipt(this.hash);if(r===0)return c(d);if(d){if(r===1||await d.confirmations()>=r)return c(d)}else if(await l(),r===0)return null;return await new Promise((m,g)=>{const v=[],x=()=>{v.forEach(w=>w())};if(v.push(()=>{a=!0}),i>0){const w=setTimeout(()=>{x(),g(jr("wait for transaction timeout","TIMEOUT"))},i);v.push(()=>{clearTimeout(w)})}const b=async w=>{if(await w.confirmations()>=r){x();try{m(c(w))}catch(k){g(k)}}};if(v.push(()=>{this.provider.off(this.hash,b)}),this.provider.on(this.hash,b),s>=0){const w=async()=>{try{await l()}catch(k){if(gs(k,"TRANSACTION_REPLACED")){x(),g(k);return}}a||this.provider.once("block",w)};v.push(()=>{this.provider.off("block",w)}),this.provider.once("block",w)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return tt(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Lse(this)}reorderedEvent(e){return tt(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),tt(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Mse(this,e)}replaceableTransaction(e){ve(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new XB(this,this.provider);return ge(n,ch,e),n}};ch=new WeakMap;let tw=XB;function q5e(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Mse(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Lse(t){return{orphan:"drop-transaction",tx:t}}function G5e(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class m8 extends lE{constructor(n,r,i){super(n,n.provider);Ce(this,"interface");Ce(this,"fragment");Ce(this,"args");const s=r.decodeEventLog(i,n.data,n.topics);$t(this,{args:s,fragment:i,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class jse extends lE{constructor(n,r){super(n,n.provider);Ce(this,"error");$t(this,{error:r})}}var rx;class K5e extends Ose{constructor(n,r,i){super(i,r);Fe(this,rx);ge(this,rx,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?re(this,rx).getEvent(n.topics[0]):null;if(r)try{return new m8(n,re(this,rx),r)}catch(i){return new jse(n,i)}return n})}}rx=new WeakMap;var Uw;class g8 extends tw{constructor(n,r,i){super(i,r);Fe(this,Uw);ge(this,Uw,n)}async wait(n,r){const i=await super.wait(n,r);return i==null?null:new K5e(re(this,Uw),this.provider,i)}}Uw=new WeakMap;class Dse extends Rre{constructor(n,r,i,s){super(n,r,i);Ce(this,"log");$t(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class W5e extends Dse{constructor(e,n,r,i,s){super(e,n,r,new m8(s,e.interface,i));const o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);$t(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const FH=BigInt(0);function Bse(t){return t&&typeof t.call=="function"}function Use(t){return t&&typeof t.estimateGas=="function"}function QN(t){return t&&typeof t.resolveName=="function"}function Fse(t){return t&&typeof t.sendTransaction=="function"}function $se(t){if(t!=null){if(QN(t))return t;if(t.provider)return t.provider}}var Fw;class Y5e{constructor(e,n,r){Fe(this,Fw);Ce(this,"fragment");if($t(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const i=Um(e.runner,"resolveName"),s=QN(i)?i:null;ge(this,Fw,(async function(){const o=await Promise.all(n.inputs.map((a,l)=>r[l]==null?null:a.walkAsync(r[l],(d,h)=>d==="address"?Array.isArray(h)?Promise.all(h.map(m=>Wi(m,s))):Wi(h,s):h)));return e.interface.encodeFilterTopics(n,o)})())}getTopicFilter(){return re(this,Fw)}}Fw=new WeakMap;function Um(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Gp(t){return t==null?null:t.provider||null}async function zse(t,e){const n=$s.dereference(t,"overrides");ve(typeof n=="object","invalid overrides parameter","overrides",t);const r=ew(n);return ve(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ve(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function J5e(t,e,n){const r=Um(t,"resolveName"),i=QN(r)?r:null;return await Promise.all(e.map((s,o)=>s.walkAsync(n[o],(a,l)=>(l=$s.dereference(l,a),a==="address"?Wi(l,i):l))))}function X5e(t){const e=async function(o){const a=await zse(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Wi(a.from,$se(t.runner)));const l=t.interface,c=It(a.value||FH,"overrides.value")===FH,d=(a.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!d&&!c&&ve(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),ve(l.fallback||d,"cannot send data to receive-only contract","overrides.data",a.data);const h=l.receive||l.fallback&&l.fallback.payable;return ve(h||c,"cannot send value to non-payable fallback","overrides.value",a.value),ve(l.fallback||d,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Um(t.runner,"call");tt(Bse(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(o);try{return await a.call(l)}catch(c){throw YD(c)&&c.data?t.interface.makeError(c.data,l):c}},r=async function(o){const a=t.runner;tt(Fse(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await a.sendTransaction(await e(o)),c=Gp(t.runner);return new g8(t.interface,c,l)},i=async function(o){const a=Um(t.runner,"estimateGas");return tt(Use(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},s=async o=>await r(o);return $t(s,{_contract:t,estimateGas:i,populateTransaction:e,send:r,staticCall:n}),s}function Q5e(t,e){const n=function(...c){const d=t.interface.getFunction(e,c);return tt(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:c}}),d},r=async function(...c){const d=n(...c);let h={};if(d.inputs.length+1===c.length&&(h=await zse(c.pop()),h.from&&(h.from=await Wi(h.from,$se(t.runner)))),d.inputs.length!==c.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const m=await J5e(t.runner,d.inputs,c);return Object.assign({},h,await Rs({to:t.getAddress(),data:t.interface.encodeFunctionData(d,m)}))},i=async function(...c){const d=await a(...c);return d.length===1?d[0]:d},s=async function(...c){const d=t.runner;tt(Fse(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await d.sendTransaction(await r(...c)),m=Gp(t.runner);return new g8(t.interface,m,h)},o=async function(...c){const d=Um(t.runner,"estimateGas");return tt(Use(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await r(...c))},a=async function(...c){const d=Um(t.runner,"call");tt(Bse(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await r(...c);let m="0x";try{m=await d.call(h)}catch(v){throw YD(v)&&v.data?t.interface.makeError(v.data,h):v}const g=n(...c);return t.interface.decodeFunctionResult(g,m)},l=async(...c)=>n(...c).constant?await i(...c):await s(...c);return $t(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const c=t.interface.getFunction(e);return tt(c,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),c}}),l}function Z5e(t,e){const n=function(...i){const s=t.interface.getEvent(e,i);return tt(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},r=function(...i){return new Y5e(t,n(...i),i)};return $t(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=t.interface.getEvent(e);return tt(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),r}const OT=Symbol.for("_ethersInternal_contract"),Vse=new WeakMap;function e_e(t,e){Vse.set(t[OT],e)}function Yo(t){return Vse.get(t[OT])}function t_e(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function y8(t,e){let n,r=null;if(Array.isArray(e)){const s=function(o){if(vr(o,32))return o;const a=t.interface.getEvent(o);return ve(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?n=[null]:typeof e=="string"?vr(e,32)?n=[e]:(r=t.interface.getEvent(e),ve(r,"unknown fragment","event",e),n=[r.topicHash]):t_e(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):ve(!1,"unknown event name","event",e);n=n.map(s=>{if(s==null)return null;if(Array.isArray(s)){const o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});const i=n.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:r,tag:i,topics:n}}async function n1(t,e){const{subs:n}=Yo(t);return n.get((await y8(t,e)).tag)||null}async function $H(t,e,n){const r=Gp(t.runner);tt(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:o}=await y8(t,n),{addr:a,subs:l}=Yo(t);let c=l.get(s);if(!c){const h={address:a||t,topics:o},m=b=>{let w=i;if(w==null)try{w=t.interface.getEvent(b.topics[0])}catch{}if(w){const k=w,N=i?t.interface.decodeEventLog(i,b.data,b.topics):[];PM(t,n,N,O=>new W5e(t,O,n,k,b))}else PM(t,n,[],k=>new Dse(t,k,n,b))};let g=[];c={tag:s,listeners:[],start:()=>{g.length||g.push(r.on(h,m))},stop:async()=>{if(g.length==0)return;let b=g;g=[],await Promise.all(b),r.off(h,m)}},l.set(s,c)}return c}let CM=Promise.resolve();async function n_e(t,e,n,r){await CM;const i=await n1(t,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{const l=Array.from(n);r&&l.push(r(a?null:o));try{o.call(t,...l)}catch{}return!a}),i.listeners.length===0&&(i.stop(),Yo(t).subs.delete(i.tag)),s>0}async function PM(t,e,n,r){try{await CM}catch{}const i=n_e(t,e,n,r);return CM=i,await i}const AA=["then"];var rte;rte=OT;const P1=class P1{constructor(e,n,r,i){Ce(this,"target");Ce(this,"interface");Ce(this,"runner");Ce(this,"filters");Ce(this,rte);Ce(this,"fallback");ve(typeof e=="string"||Kie(e),"invalid value for Contract target","target",e),r==null&&(r=null);const s=NM.from(n);$t(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,OT,{value:{}});let o,a=null,l=null;if(i){const h=Gp(r);l=new g8(this.interface,h,i)}let c=new Map;if(typeof e=="string")if(vr(e))a=e,o=Promise.resolve(e);else{const h=Um(r,"resolveName");if(!QN(h))throw jr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(e).then(m=>{if(m==null)throw jr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Yo(this).addr=m,m})}else o=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return Yo(this).addr=h,h});e_e(this,{addrPromise:o,addr:a,deployTx:l,subs:c});const d=new Proxy({},{get:(h,m,g)=>{if(typeof m=="symbol"||AA.indexOf(m)>=0)return Reflect.get(h,m,g);try{return this.getEvent(m)}catch(v){if(!gs(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(h,m)=>AA.indexOf(m)>=0?Reflect.has(h,m):Reflect.has(h,m)||this.interface.hasEvent(String(m))});return $t(this,{filters:d}),$t(this,{fallback:s.receive||s.fallback?X5e(this):null}),new Proxy(this,{get:(h,m,g)=>{if(typeof m=="symbol"||m in h||AA.indexOf(m)>=0)return Reflect.get(h,m,g);try{return h.getFunction(m)}catch(v){if(!gs(v,"INVALID_ARGUMENT")||v.argument!=="key")throw v}},has:(h,m)=>typeof m=="symbol"||m in h||AA.indexOf(m)>=0?Reflect.has(h,m):h.interface.hasFunction(m)})}connect(e){return new P1(this.target,this.interface,e)}attach(e){return new P1(e,this.interface,this.runner)}async getAddress(){return await Yo(this).addrPromise}async getDeployedCode(){const e=Gp(this.runner);tt(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Gp(this.runner);return tt(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);r.once("block",o)}catch(a){s(a)}};o()})}deploymentTransaction(){return Yo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Q5e(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),Z5e(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:i,addrPromise:s}=Yo(this),o=i||await s,{fragment:a,topics:l}=await y8(this,e),c={address:o,topics:l,fromBlock:n,toBlock:r},d=Gp(this.runner);return tt(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(c)).map(h=>{let m=a;if(m==null)try{m=this.interface.getEvent(h.topics[0])}catch{}if(m)try{return new m8(h,this.interface,m)}catch(g){return new jse(h,g)}return new lE(h,d)})}async on(e,n){const r=await $H(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await $H(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await PM(this,e,n,null)}async listenerCount(e){if(e){const i=await n1(this,e);return i?i.listeners.length:0}const{subs:n}=Yo(this);let r=0;for(const{listeners:i}of n.values())r+=i.length;return r}async listeners(e){if(e){const i=await n1(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:n}=Yo(this);let r=[];for(const{listeners:i}of n.values())r=r.concat(i.map(({listener:s})=>s));return r}async off(e,n){const r=await n1(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Yo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await n1(this,e);if(!n)return this;n.stop(),Yo(this).subs.delete(n.tag)}else{const{subs:n}=Yo(this);for(const{tag:r,stop:i}of n.values())i(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends P1{constructor(i,s=null){super(i,e,s)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let _M=P1;function r_e(){return _M}class my extends r_e(){}function HI(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):ve(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class i_e{constructor(e){Ce(this,"name");$t(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Hse=new RegExp("^(ipfs)://(.*)$","i"),zH=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Hse,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var uh,dm,dh,Og,EN,qse;const ny=class ny{constructor(e,n,r){Fe(this,dh);Ce(this,"provider");Ce(this,"address");Ce(this,"name");Fe(this,uh);Fe(this,dm);$t(this,{provider:e,address:n,name:r}),ge(this,uh,null),ge(this,dm,new my(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return re(this,uh)==null&&ge(this,uh,(async()=>{try{return await re(this,dm).supportsInterface("0x9061b923")}catch(e){if(gs(e,"CALL_EXCEPTION"))return!1;throw ge(this,uh,null),e}})()),await re(this,uh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await st(this,dh,Og).call(this,"addr(bytes32)");return s==null||s===K1?null:s}catch(s){if(gs(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const o=await st(this,dh,Og).call(this,"addr(bytes32,uint)",[s]);if(vr(o,20))return vn(o)}let n=null;for(const s of this.provider.plugins)if(s instanceof i_e&&s.supportsCoinType(e)){n=s;break}if(n==null)return null;const r=await st(this,dh,Og).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const i=await n.decodeAddress(e,r);if(i!=null)return i;tt(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await st(this,dh,Og).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await st(this,dh,Og).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const i=n[1]==="e3010170"?"ipfs":"ipns",s=parseInt(n[4],16);if(n[5].length===s*2)return`${i}://${Ire("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;tt(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<zH.length;r++){const i=n.match(zH[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=HI(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const c=l[1],d=new my(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const x=await d.ownerOf(c);if(a!==x)return e.push({type:"!owner",value:x}),{url:null,linkage:e};e.push({type:"owner",value:x})}else if(s==="erc1155"){const x=await d.balanceOf(a,c);if(!x)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:x.toString()})}let h=await d[o](c);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),s==="erc1155"&&(h=h.replace("{id}",Ad(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=HI(h)),e.push({type:"metadata-url",value:h});let m={};const g=await new Td(h).send();g.assertOk();try{m=g.bodyJson}catch{try{e.push({type:"!metadata",value:g.bodyText})}catch{const w=g.body;return w&&e.push({type:"!metadata",value:ct(w)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!m)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(m)});let v=m.image;if(typeof v!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!v.match(/^(https:\/\/|data:)/i)){if(v.match(Hse)==null)return e.push({type:"!imageUrl-ipfs",value:v}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:v}),v=HI(v)}return e.push({type:"url",value:v}),{linkage:e,url:v}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return tt(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var i;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const s=await st(i=ny,EN,qse).call(i,e,r);if(s!=null){const o=new ny(e,s,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};uh=new WeakMap,dm=new WeakMap,dh=new WeakSet,Og=async function(e,n){n=(n||[]).slice();const r=re(this,dm).interface;n.unshift(TM(this.name));let i=null;await this.supportsWildcard()&&(i=r.getFunction(e),tt(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[v5e(this.name,255),r.encodeFunctionData(i,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const s=await re(this,dm)[e](...n);return i?r.decodeFunctionResult(i,s)[0]:s}catch(s){if(!gs(s,"CALL_EXCEPTION"))throw s}return null},EN=new WeakSet,qse=async function(e,n){const r=await ny.getEnsAddress(e);try{const s=await new my(r,["function resolver(bytes32) view returns (address)"],e).resolver(TM(n),{enableCcipRead:!0});return s===K1?null:s}catch(i){throw i}return null},Fe(ny,EN);let MT=ny;const VH=BigInt(0);function In(t,e){return(function(n){return n==null?e:t(n)})}function nw(t,e){return(n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))})}function cE(t,e){return(n=>{const r={};for(const i in t){let s=i;if(e&&i in e&&!(s in n)){for(const o of e[i])if(o in n){s=o;break}}try{const o=t[i](n[s]);o!==void 0&&(r[i]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";tt(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:n})}}return r})}function s_e(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}ve(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Ix(t){return ve(vr(t,!0),"invalid data","value",t),t}function ps(t){return ve(vr(t,32),"invalid hash","value",t),t}const o_e=cE({address:vn,blockHash:ps,blockNumber:nn,data:Ix,index:nn,removed:In(s_e,!1),topics:nw(ps),transactionHash:ps,transactionIndex:nn},{index:["logIndex"]});function a_e(t){return o_e(t)}const l_e=cE({hash:In(ps),parentHash:ps,parentBeaconBlockRoot:In(ps,null),number:nn,timestamp:nn,nonce:In(Ix),difficulty:It,gasLimit:It,gasUsed:It,stateRoot:In(ps,null),receiptsRoot:In(ps,null),blobGasUsed:In(It,null),excessBlobGas:In(It,null),miner:In(vn),prevRandao:In(ps,null),extraData:Ix,baseFeePerGas:In(It)},{prevRandao:["mixHash"]});function c_e(t){const e=l_e(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Gse(n)),e}const u_e=cE({transactionIndex:nn,blockNumber:nn,transactionHash:ps,address:vn,topics:nw(ps),data:Ix,index:nn,blockHash:ps},{index:["logIndex"]});function d_e(t){return u_e(t)}const f_e=cE({to:In(vn,null),from:In(vn,null),contractAddress:In(vn,null),index:nn,root:In(ct),gasUsed:It,blobGasUsed:In(It,null),logsBloom:In(Ix),blockHash:ps,hash:ps,logs:nw(d_e),blockNumber:nn,cumulativeGasUsed:It,effectiveGasPrice:In(It),blobGasPrice:In(It,null),status:In(nn),type:In(nn,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function h_e(t){return f_e(t)}function Gse(t){t.to&&It(t.to)===VH&&(t.to="0x0000000000000000000000000000000000000000");const e=cE({hash:ps,index:In(nn,void 0),type:n=>n==="0x"||n==null?0:nn(n),accessList:In(i0,null),blobVersionedHashes:In(nw(ps,!0),null),authorizationList:In(nw(n=>{let r;if(n.signature)r=n.signature;else{let i=n.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),r=Object.assign({},n,{yParity:i})}return{address:vn(n.address),chainId:It(n.chainId),nonce:It(n.nonce),signature:lo.from(r)}},!1),null),blockHash:In(ps,null),blockNumber:In(nn,null),transactionIndex:In(nn,null),from:vn,gasPrice:In(It),maxPriorityFeePerGas:In(It),maxFeePerGas:In(It),maxFeePerBlobGas:In(It,null),gasLimit:It,to:In(vn,null),value:It,nonce:nn,data:Ix,creates:In(vn,null),chainId:In(It,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=nPe(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=lo.from(t.signature):e.signature=lo.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&It(e.blockHash)===VH&&(e.blockHash=null),e}const p_e="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class cv{constructor(e){Ce(this,"name");$t(this,{name:e})}clone(){return new cv(this.name)}}class ZN extends cv{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);Ce(this,"effectiveBlock");Ce(this,"txBase");Ce(this,"txCreate");Ce(this,"txDataZero");Ce(this,"txDataNonzero");Ce(this,"txAccessListStorageKey");Ce(this,"txAccessListAddress");const i={effectiveBlock:n};function s(o,a){let l=(r||{})[o];l==null&&(l=a),ve(typeof l=="number",`invalud value for ${o}`,"costs",r),i[o]=l}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),$t(this,i)}clone(){return new ZN(this.effectiveBlock,this)}}class eC extends cv{constructor(n,r){super("org.ethers.plugins.network.Ens");Ce(this,"address");Ce(this,"targetNetwork");$t(this,{address:n||p_e,targetNetwork:r??1})}clone(){return new eC(this.address,this.targetNetwork)}}var fm;const QB=class QB extends cv{constructor(n){super("org.ethers.plugins.network.FeeData");Fe(this,fm);ge(this,fm,n)}get feeDataFunc(){return re(this,fm)}async getFeeData(n){return await re(this,fm).call(this,n)}clone(){return new QB(re(this,fm))}};fm=new WeakMap;let HH=QB;var $w,zw;class m_e extends cv{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Fe(this,$w);Fe(this,zw);ge(this,$w,n),ge(this,zw,r)}get url(){return re(this,$w)}get processFunc(){return re(this,zw)}clone(){return this}}$w=new WeakMap,zw=new WeakMap;const qI=new Map;var ix,sx,fh;const ry=class ry{constructor(e,n){Fe(this,ix);Fe(this,sx);Fe(this,fh);ge(this,ix,e),ge(this,sx,It(n)),ge(this,fh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return re(this,ix)}set name(e){ge(this,ix,e)}get chainId(){return re(this,sx)}set chainId(e){ge(this,sx,It(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===It(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===It(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===It(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(re(this,fh).values())}attachPlugin(e){if(re(this,fh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return re(this,fh).set(e.name,e.clone()),this}getPlugin(e){return re(this,fh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new ry(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new ZN;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const i=i0(e.accessList);for(const s in i)r+=n.txAccessListAddress+n.txAccessListStorageKey*i[s].storageKeys.length}return r}static from(e){if(g_e(),e==null)return ry.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=qI.get(e);if(n)return n();if(typeof e=="bigint")return new ry("unknown",e);ve(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){ve(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new ry(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new eC(e.ensAddress,e.ensNetwork)),n}ve(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=qI.get(e);r&&ve(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),qI.set(e,n)}};ix=new WeakMap,sx=new WeakMap,fh=new WeakMap;let Lc=ry;function qH(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let i=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||i++,r[1]=i.toString()}return BigInt(r[0]+r[1])}function GH(t){return new m_e(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[s,o]=await Promise.all([r.send(),e()]);i=s;const a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:qH(a.maxFee,9),maxPriorityFeePerGas:qH(a.maxPriorityFee,9)}}catch(s){tt(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:s})}})}let KH=!1;function g_e(){if(KH)return;KH=!0;function t(e,n,r){const i=function(){const s=new Lc(e,n);return r.ensNetwork!=null&&s.attachPlugin(new eC(null,r.ensNetwork)),s.attachPlugin(new ZN),(r.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Lc.register(e,i),Lc.register(n,i),r.altNames&&r.altNames.forEach(s=>{Lc.register(s,i)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("filecoin",314,{}),t("filecoin-calibration",314159,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[GH("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[GH("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function IM(t){return JSON.parse(JSON.stringify(t))}var Qu,Va,hh,Tc,ox,$2;class y_e{constructor(e){Fe(this,ox);Fe(this,Qu);Fe(this,Va);Fe(this,hh);Fe(this,Tc);ge(this,Qu,e),ge(this,Va,null),ge(this,hh,4e3),ge(this,Tc,-2)}get pollingInterval(){return re(this,hh)}set pollingInterval(e){ge(this,hh,e)}start(){re(this,Va)||(ge(this,Va,re(this,Qu)._setTimeout(st(this,ox,$2).bind(this),re(this,hh))),st(this,ox,$2).call(this))}stop(){re(this,Va)&&(re(this,Qu)._clearTimeout(re(this,Va)),ge(this,Va,null))}pause(e){this.stop(),e&&ge(this,Tc,-2)}resume(){this.start()}}Qu=new WeakMap,Va=new WeakMap,hh=new WeakMap,Tc=new WeakMap,ox=new WeakSet,$2=async function(){try{const e=await re(this,Qu).getBlockNumber();if(re(this,Tc)===-2){ge(this,Tc,e);return}if(e!==re(this,Tc)){for(let n=re(this,Tc)+1;n<=e;n++){if(re(this,Va)==null)return;await re(this,Qu).emit("block",n)}ge(this,Tc,e)}}catch{}re(this,Va)!=null&&ge(this,Va,re(this,Qu)._setTimeout(st(this,ox,$2).bind(this),re(this,hh)))};var hm,pm,ph;class x8{constructor(e){Fe(this,hm);Fe(this,pm);Fe(this,ph);ge(this,hm,e),ge(this,ph,!1),ge(this,pm,n=>{this._poll(n,re(this,hm))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){re(this,ph)||(ge(this,ph,!0),re(this,pm).call(this,-2),re(this,hm).on("block",re(this,pm)))}stop(){re(this,ph)&&(ge(this,ph,!1),re(this,hm).off("block",re(this,pm)))}pause(e){this.stop()}resume(){this.start()}}hm=new WeakMap,pm=new WeakMap,ph=new WeakMap;var ax,Zu;class x_e extends x8{constructor(n,r){super(n);Fe(this,ax);Fe(this,Zu);ge(this,ax,r),ge(this,Zu,-2)}pause(n){n&&ge(this,Zu,-2),super.pause(n)}async _poll(n,r){const i=await r.getBlock(re(this,ax));i!=null&&(re(this,Zu)===-2?ge(this,Zu,i.number):i.number>re(this,Zu)&&(r.emit(re(this,ax),i.number),ge(this,Zu,i.number)))}}ax=new WeakMap,Zu=new WeakMap;var SN;class v_e extends x8{constructor(n,r){super(n);Fe(this,SN);ge(this,SN,IM(r))}async _poll(n,r){throw new Error("@TODO")}}SN=new WeakMap;var lx;class b_e extends x8{constructor(n,r){super(n);Fe(this,lx);ge(this,lx,r)}async _poll(n,r){const i=await r.getTransactionReceipt(re(this,lx));i&&r.emit(re(this,lx),i)}}lx=new WeakMap;var ed,cx,ux,mh,Ha,AN,Kse;class v8{constructor(e,n){Fe(this,AN);Fe(this,ed);Fe(this,cx);Fe(this,ux);Fe(this,mh);Fe(this,Ha);ge(this,ed,e),ge(this,cx,IM(n)),ge(this,ux,st(this,AN,Kse).bind(this)),ge(this,mh,!1),ge(this,Ha,-2)}start(){re(this,mh)||(ge(this,mh,!0),re(this,Ha)===-2&&re(this,ed).getBlockNumber().then(e=>{ge(this,Ha,e)}),re(this,ed).on("block",re(this,ux)))}stop(){re(this,mh)&&(ge(this,mh,!1),re(this,ed).off("block",re(this,ux)))}pause(e){this.stop(),e&&ge(this,Ha,-2)}resume(){this.start()}}ed=new WeakMap,cx=new WeakMap,ux=new WeakMap,mh=new WeakMap,Ha=new WeakMap,AN=new WeakSet,Kse=async function(e){if(re(this,Ha)===-2)return;const n=IM(re(this,cx));n.fromBlock=re(this,Ha)+1,n.toBlock=e;const r=await re(this,ed).getLogs(n);if(r.length===0){re(this,Ha)<e-60&&ge(this,Ha,e-60);return}for(const i of r)re(this,ed).emit(re(this,cx),i),ge(this,Ha,i.blockNumber)};const w_e=BigInt(2),E_e=10;function TA(t){return t&&typeof t.then=="function"}function z2(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const i=Object.keys(r);return i.sort(),i.reduce((s,o)=>(s[o]=r[o],s),{})}return r})}class Wse{constructor(e){Ce(this,"name");$t(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function S_e(t){return JSON.parse(JSON.stringify(t))}function RM(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function GI(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(vr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:z2("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:z2("orphan",n),filter:S_e(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(i=>i==null?null:Array.isArray(i)?RM(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(n.address){const i=[],s=[],o=a=>{vr(a)?i.push(a):s.push((async()=>{i.push(await Wi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),s.length&&await Promise.all(s),r.address=RM(i.map(a=>a.toLowerCase()))}return{filter:r,tag:z2("event",r),type:"event"}}ve(!1,"unknown ProviderEvent","event",t)}function KI(){return new Date().getTime()}const A_e={cacheTimeout:250,pollingInterval:4e3};var Cs,gh,Ps,dx,Zo,mm,yh,td,Vw,qa,fx,hx,bn,Ko,OM,MM,r1,LM,i1,V2;class T_e{constructor(e,n){Fe(this,bn);Fe(this,Cs);Fe(this,gh);Fe(this,Ps);Fe(this,dx);Fe(this,Zo);Fe(this,mm);Fe(this,yh);Fe(this,td);Fe(this,Vw);Fe(this,qa);Fe(this,fx);Fe(this,hx);if(ge(this,hx,Object.assign({},A_e,n||{})),e==="any")ge(this,mm,!0),ge(this,Zo,null);else if(e){const r=Lc.from(e);ge(this,mm,!1),ge(this,Zo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else ge(this,mm,!1),ge(this,Zo,null);ge(this,td,-1),ge(this,yh,new Map),ge(this,Cs,new Map),ge(this,gh,new Map),ge(this,Ps,null),ge(this,dx,!1),ge(this,Vw,1),ge(this,qa,new Map),ge(this,fx,!1)}get pollingInterval(){return re(this,hx).pollingInterval}get provider(){return this}get plugins(){return Array.from(re(this,gh).values())}attachPlugin(e){if(re(this,gh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return re(this,gh).set(e.name,e.connect(this)),this}getPlugin(e){return re(this,gh).get(e)||null}get disableCcipRead(){return re(this,fx)}set disableCcipRead(e){ge(this,fx,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],c=l.replace("{sender}",i).replace("{data}",s),d=new Td(c);l.indexOf("{data}")===-1&&(d.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:a,urls:r});let h="unknown error",m;try{m=await d.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:g}});continue}try{const g=m.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:g}),g.data;g.message&&(h=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:g})}catch{}tt(m.statusCode<400||m.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:h}}),o.push(h)}tt(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new H5e(c_e(e),this)}_wrapLog(e,n){return new lE(a_e(e),this)}_wrapTransactionReceipt(e,n){return new Ose(h_e(e),this)}_wrapTransactionResponse(e,n){return new tw(Gse(e),this)}_detectNetwork(){tt(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){tt(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=nn(await st(this,bn,Ko).call(this,{method:"getBlockNumber"}),"%response");return re(this,td)>=0&&ge(this,td,e),e}_getAddress(e){return Wi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(vr(e))return vr(e,32)?e:Dl(e);if(typeof e=="bigint"&&(e=nn(e,"blockTag")),typeof e=="number")return e>=0?Dl(e):re(this,td)>=0?Dl(re(this,td)+e):this.getBlockNumber().then(n=>Dl(n+e));ve(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?RM(l.map(c=>c.toLowerCase())):l.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,i=(l,c,d)=>{let h;switch(l.length){case 0:break;case 1:h=l[0];break;default:l.sort(),h=l}if(r&&(c!=null||d!=null))throw new Error("invalid filter");const m={};return h&&(m.address=h),n.length&&(m.topics=n),c&&(m.fromBlock=c),d&&(m.toBlock=d),r&&(m.blockHash=r),m};let s=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)s.push(this._getAddress(l));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(l=>typeof l!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(l=>i(l[0],l[1],l[2])):i(s,o,a)}_getTransactionRequest(e){const n=ew(e),r=[];if(["to","from"].forEach(i=>{if(n[i]==null)return;const s=Wi(n[i],this);TA(s)?r.push((async function(){n[i]=await s})()):n[i]=s}),n.blockTag!=null){const i=this._getBlockTag(n.blockTag);TA(i)?r.push((async function(){n.blockTag=await i})()):n.blockTag=i}return r.length?(async function(){return await Promise.all(r),n})():n}async getNetwork(){if(re(this,Zo)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw re(this,Zo)===i&&ge(this,Zo,null),s}})();return ge(this,Zo,i),(await i).clone()}const e=re(this,Zo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(re(this,mm)?(this.emit("network",r,n),re(this,Zo)===e&&ge(this,Zo,Promise.resolve(r))):tt(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:i,gasPrice:s,priorityFee:o}=await Rs({_block:st(this,bn,LM).call(this,"latest",!1),gasPrice:(async()=>{try{const d=await st(this,bn,Ko).call(this,{method:"getGasPrice"});return It(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await st(this,bn,Ko).call(this,{method:"getPriorityFee"});return It(d,"%response")}catch{}return null})()});let a=null,l=null;const c=this._wrapBlock(i,e);return c&&c.baseFeePerGas&&(l=o??BigInt("1000000000"),a=c.baseFeePerGas*w_e+l),new UH(s,a,l)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const i=new Td(r.url),s=await r.processFunc(n,this,i);return new UH(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return TA(n)&&(n=await n),It(await st(this,bn,Ko).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await Rs({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await st(this,bn,MM).call(this,st(this,bn,OM).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return It(await st(this,bn,r1).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return nn(await st(this,bn,r1).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return ct(await st(this,bn,r1).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const i=It(n,"position");return ct(await st(this,bn,r1).call(this,{method:"getStorage",position:i},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:i}=await Rs({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=u8.from(e);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:i}=await Rs({network:this.getNetwork(),params:st(this,bn,LM).call(this,e,!!n)});return i==null?null:this._wrapBlock(i,r)}async getTransaction(e){const{network:n,params:r}=await Rs({network:this.getNetwork(),params:st(this,bn,Ko).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Rs({network:this.getNetwork(),params:st(this,bn,Ko).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const i=await st(this,bn,Ko).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Rs({network:this.getNetwork(),result:st(this,bn,Ko).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:ct(n)}async getLogs(e){let n=this._getFilter(e);TA(n)&&(n=await n);const{network:r,params:i}=await Rs({network:this.getNetwork(),params:st(this,bn,Ko).call(this,{method:"getLogs",filter:n})});return i.map(s=>this._wrapLog(s,r))}_getProvider(e){tt(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await MT.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=vn(e);const n=TM(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await MT.getEnsAddress(this),s=await new my(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(s==null||s===K1)return null;const a=await new my(s,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(gs(r,"BAD_DATA")&&r.value==="0x"||gs(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const i=n??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,o)=>{let a=null;const l=(async c=>{try{const d=await this.getTransactionReceipt(e);if(d!=null&&c-d.blockNumber+1>=i){s(d),a&&(clearTimeout(a),a=null);return}}catch(d){console.log("EEE",d)}this.once("block",l)});r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",l),o(jr("timeout","TIMEOUT",{reason:"timeout"})))},r)),l(await this.getBlockNumber())})}async waitForBlock(e){tt(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=re(this,qa).get(e);n&&(n.timer&&clearTimeout(n.timer),re(this,qa).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Sb(this,Vw)._++,i=()=>{re(this,qa).delete(r),e()};if(this.paused)re(this,qa).set(r,{timer:null,func:i,time:n});else{const s=setTimeout(i,n);re(this,qa).set(r,{timer:s,func:i,time:KI()})}return r}_forEachSubscriber(e){for(const n of re(this,Cs).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Wse(e.type);case"block":{const n=new y_e(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new x_e(this,e.type);case"event":return new v8(this,e.filter);case"transaction":return new b_e(this,e.hash);case"orphan":return new v_e(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of re(this,Cs).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),re(this,Ps)!=null&&n.pause(re(this,Ps));break}}async on(e,n){const r=await st(this,bn,V2).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,re(this,Ps)!=null&&r.subscriber.pause(re(this,Ps))),this}async once(e,n){const r=await st(this,bn,V2).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,re(this,Ps)!=null&&r.subscriber.pause(re(this,Ps))),this}async emit(e,...n){const r=await st(this,bn,i1).call(this,e,n);if(!r||r.listeners.length===0)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:s,once:o})=>{const a=new Rre(this,o?null:s,e);try{s.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),re(this,Cs).delete(r.tag)),i>0}async listenerCount(e){if(e){const r=await st(this,bn,i1).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of re(this,Cs).values())n+=r.length;return n}async listeners(e){if(e){const r=await st(this,bn,i1).call(this,e);return r?r.listeners.map(({listener:i})=>i):[]}let n=[];for(const{listeners:r}of re(this,Cs).values())n=n.concat(r.map(({listener:i})=>i));return n}async off(e,n){const r=await st(this,bn,i1).call(this,e);if(!r)return this;if(n){const i=r.listeners.map(({listener:s})=>s).indexOf(n);i>=0&&r.listeners.splice(i,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),re(this,Cs).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:i}=await st(this,bn,V2).call(this,e);r&&i.stop(),re(this,Cs).delete(n)}else for(const[n,{started:r,subscriber:i}]of re(this,Cs))r&&i.stop(),re(this,Cs).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return re(this,dx)}destroy(){this.removeAllListeners();for(const e of re(this,qa).keys())this._clearTimeout(e);ge(this,dx,!0)}get paused(){return re(this,Ps)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(ge(this,td,-1),re(this,Ps)!=null){if(re(this,Ps)==!!e)return;tt(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),ge(this,Ps,!!e);for(const n of re(this,qa).values())n.timer&&clearTimeout(n.timer),n.time=KI()-n.time}resume(){if(re(this,Ps)!=null){this._forEachSubscriber(e=>e.resume()),ge(this,Ps,null);for(const e of re(this,qa).values()){let n=e.time;n<0&&(n=0),e.time=KI(),setTimeout(e.func,n)}}}}Cs=new WeakMap,gh=new WeakMap,Ps=new WeakMap,dx=new WeakMap,Zo=new WeakMap,mm=new WeakMap,yh=new WeakMap,td=new WeakMap,Vw=new WeakMap,qa=new WeakMap,fx=new WeakMap,hx=new WeakMap,bn=new WeakSet,Ko=async function(e){const n=re(this,hx).cacheTimeout;if(n<0)return await this._perform(e);const r=z2(e.method,e);let i=re(this,yh).get(r);return i||(i=this._perform(e),re(this,yh).set(r,i),setTimeout(()=>{re(this,yh).get(r)===i&&re(this,yh).delete(r)},n)),await i},OM=async function(e,n,r){tt(r<E_e,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const i=ew(e);try{return ct(await this._perform({method:"call",transaction:i,blockTag:n}))}catch(s){if(!this.disableCcipRead&&YD(s)&&s.data&&r>=0&&n==="latest"&&i.to!=null&&xr(s.data,0,4)==="0x556f1830"){const o=s.data,a=await Wi(i.to,this);let l;try{l=__e(xr(s.data,4))}catch(h){tt(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}tt(l.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const c=await this.ccipReadFetch(i,l.calldata,l.urls);tt(c!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:l.errorArgs}});const d={to:a,data:Ln([l.selector,P_e([c,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const h=await st(this,bn,OM).call(this,d,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:h}),h}}throw s}},MM=async function(e){const{value:n}=await Rs({network:this.getNetwork(),value:e});return n},r1=async function(e,n,r){let i=this._getAddress(n),s=this._getBlockTag(r);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await st(this,bn,MM).call(this,st(this,bn,Ko).call(this,Object.assign(e,{address:i,blockTag:s})))},LM=async function(e,n){if(vr(e,32))return await st(this,bn,Ko).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await st(this,bn,Ko).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},i1=async function(e,n){let r=await GI(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await GI({orphan:"drop-log",log:n[0]},this)),re(this,Cs).get(r.tag)||null},V2=async function(e){const n=await GI(e,this),r=n.tag;let i=re(this,Cs).get(r);return i||(i={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},re(this,Cs).set(r,i)),i};function k_e(t,e){try{const n=jM(t,e);if(n)return kT(n)}catch{}return null}function jM(t,e){if(t==="0x")return null;try{const n=nn(xr(t,e,e+32)),r=nn(xr(t,n,n+32));return xr(t,n+32,n+32+r)}catch{}return null}function WH(t){const e=zr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function N_e(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const C_e=new Uint8Array([]);function P_e(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(C_e),n+=32;for(let r=0;r<t.length;r++){const i=Et(t[r]);e[r]=WH(n),e.push(WH(i.length)),e.push(N_e(i)),n+=32+Math.ceil(i.length/32)*32}return Ln(e)}const YH="0x0000000000000000000000000000000000000000000000000000000000000000";function __e(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};tt(uy(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=xr(t,0,32);tt(xr(n,0,12)===xr(YH,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=xr(n,12);try{const r=[],i=nn(xr(t,32,64)),s=nn(xr(t,i,i+32)),o=xr(t,i+32);for(let a=0;a<s;a++){const l=k_e(o,a*32);if(l==null)throw new Error("abort");r.push(l)}e.urls=r}catch{tt(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=jM(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{tt(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}tt(xr(t,100,128)===xr(YH,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=xr(t,96,100);try{const r=jM(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{tt(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function vp(t,e){if(t.provider)return t.provider;tt(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function JH(t,e){let n=ew(e);if(n.to!=null&&(n.to=Wi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Wi(r,t)]).then(([i,s])=>(ve(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else n.from=t.getAddress();return await Rs(n)}class b8{constructor(e){Ce(this,"provider");$t(this,{provider:e||null})}async getNonce(e){return vp(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await JH(this,e)}async populateTransaction(e){const n=vp(this,"populateTransaction"),r=await JH(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(r.chainId!=null){const o=It(r.chainId);ve(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=i.chainId;const s=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||s)?ve(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&s&&ve(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();tt(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(tt(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):tt(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Rs(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await vp(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return vp(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return vp(this,"call").call(await this.populateCall(e))}async resolveName(e){return await vp(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=vp(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const i=u8.from(r);return await n.broadcastTransaction(await this.signTransaction(i))}authorize(e){tt(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var px,H2;const ZB=class ZB extends b8{constructor(n,r){super(r);Fe(this,px);Ce(this,"address");$t(this,{address:n})}async getAddress(){return this.address}connect(n){return new ZB(this.address,n)}async signTransaction(n){st(this,px,H2).call(this,"transactions","signTransaction")}async signMessage(n){st(this,px,H2).call(this,"messages","signMessage")}async signTypedData(n,r,i){st(this,px,H2).call(this,"typed-data","signTypedData")}};px=new WeakSet,H2=function(n,r){tt(!1,`VoidSigner cannot sign ${n}`,"UNSUPPORTED_OPERATION",{operation:r})};let DM=ZB;function I_e(t){return JSON.parse(JSON.stringify(t))}var Js,kc,gm,xh,ym,mx,Uh,BM,UM;class Yse{constructor(e){Fe(this,Uh);Fe(this,Js);Fe(this,kc);Fe(this,gm);Fe(this,xh);Fe(this,ym);Fe(this,mx);ge(this,Js,e),ge(this,kc,null),ge(this,gm,st(this,Uh,BM).bind(this)),ge(this,xh,!1),ge(this,ym,null),ge(this,mx,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){re(this,xh)||(ge(this,xh,!0),st(this,Uh,BM).call(this,-2))}stop(){re(this,xh)&&(ge(this,xh,!1),ge(this,mx,!0),st(this,Uh,UM).call(this),re(this,Js).off("block",re(this,gm)))}pause(e){e&&st(this,Uh,UM).call(this),re(this,Js).off("block",re(this,gm))}resume(){this.start()}}Js=new WeakMap,kc=new WeakMap,gm=new WeakMap,xh=new WeakMap,ym=new WeakMap,mx=new WeakMap,Uh=new WeakSet,BM=async function(e){try{re(this,kc)==null&&ge(this,kc,this._subscribe(re(this,Js)));let n=null;try{n=await re(this,kc)}catch(s){if(!gs(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(n==null){ge(this,kc,null),re(this,Js)._recoverSubscriber(this,this._recover(re(this,Js)));return}const r=await re(this,Js).getNetwork();if(re(this,ym)||ge(this,ym,r),re(this,ym).chainId!==r.chainId)throw new Error("chaid changed");if(re(this,mx))return;const i=await re(this,Js).send("eth_getFilterChanges",[n]);await this._emitResults(re(this,Js),i)}catch(n){console.log("@TODO",n)}re(this,Js).once("block",re(this,gm))},UM=function(){const e=re(this,kc);e&&(ge(this,kc,null),e.then(n=>{re(this,Js).destroyed||re(this,Js).send("eth_uninstallFilter",[n])}))};var xm;class R_e extends Yse{constructor(n,r){super(n);Fe(this,xm);ge(this,xm,I_e(r))}_recover(n){return new v8(n,re(this,xm))}async _subscribe(n){return await n.send("eth_newFilter",[re(this,xm)])}async _emitResults(n,r){for(const i of r)n.emit(re(this,xm),n._wrapLog(i,n._network))}}xm=new WeakMap;class O_e extends Yse{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const M_e="bigint,boolean,function,number,string,symbol".split(/,/g);function q2(t){if(t==null||M_e.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(q2);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function L_e(t){return new Promise(e=>{setTimeout(e,t)})}function og(t){return t&&t.toLowerCase()}function XH(t){return t&&typeof t.pollingInterval=="number"}const Jse={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class WI extends b8{constructor(n,r){super(n);Ce(this,"address");r=vn(r),$t(this,{address:r})}connect(n){tt(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=q2(n),i=[];if(r.from){const o=r.from;i.push((async()=>{const a=await Wi(o,this.provider);ve(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&i.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;i.push((async()=>{r.to=await Wi(o,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(n);return await new Promise((s,o)=>{const a=[1e3,100];let l=0;const c=async()=>{try{const d=await this.provider.getTransaction(i);if(d!=null){s(d.replaceableTransaction(r));return}}catch(d){if(gs(d,"CANCELLED")||gs(d,"BAD_DATA")||gs(d,"NETWORK_ERROR")||gs(d,"UNSUPPORTED_OPERATION")){d.info==null&&(d.info={}),d.info.sendTransactionHash=i,o(d);return}if(gs(d,"INVALID_ARGUMENT")&&(l++,d.info==null&&(d.info={}),d.info.sendTransactionHash=i,l>10)){o(d);return}this.provider.emit("error",jr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:d}))}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(n){const r=q2(n);if(r.from){const s=await Wi(r.from,this.provider);ve(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=s}else r.from=this.address;const i=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[i])}async signMessage(n){const r=typeof n=="string"?bi(n):n;return await this.provider.send("personal_sign",[ct(r),this.address.toLowerCase()])}async signTypedData(n,r,i){const s=q2(i),o=await jm.resolveNames(n,r,s,async a=>{const l=await Wi(a);return ve(l!=null,"TypedData does not support null address","value",a),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(jm.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?bi(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),ct(r)])}}var vm,gx,nd,Nc,Ll,Ga,Ao,Hw,FM;class j_e extends T_e{constructor(n,r){super(n,r);Fe(this,Hw);Fe(this,vm);Fe(this,gx);Fe(this,nd);Fe(this,Nc);Fe(this,Ll);Fe(this,Ga);Fe(this,Ao);ge(this,gx,1),ge(this,vm,Object.assign({},Jse,r||{})),ge(this,nd,[]),ge(this,Nc,null),ge(this,Ga,null),ge(this,Ao,null);{let s=null;const o=new Promise(a=>{s=a});ge(this,Ll,{promise:o,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(ve(!i||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),i&&n!=null&&ge(this,Ga,Lc.from(n))):i&&(ve(n==null||i.matches(n),"staticNetwork MUST match network object","options",r),ge(this,Ga,i))}_getOption(n){return re(this,vm)[n]}get _network(){return tt(re(this,Ga),"network is not available yet","NETWORK_ERROR"),re(this,Ga)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let i=n.transaction;if(i&&i.type!=null&&It(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},i,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(re(this,Ga))return re(this,Ga)}else return n;return re(this,Ao)?await re(this,Ao):this.ready?(ge(this,Ao,(async()=>{try{const r=Lc.from(It(await this.send("eth_chainId",[])));return ge(this,Ao,null),r}catch(r){throw ge(this,Ao,null),r}})()),await re(this,Ao)):(ge(this,Ao,(async()=>{const r={id:Sb(this,gx)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let i;try{i=(await this._send(r))[0],ge(this,Ao,null)}catch(s){throw ge(this,Ao,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Lc.from(It(i.result));throw this.getRpcError(r,i)})()),await re(this,Ao))}_start(){re(this,Ll)==null||re(this,Ll).resolve==null||(re(this,Ll).resolve(),ge(this,Ll,null),(async()=>{for(;re(this,Ga)==null&&!this.destroyed;)try{ge(this,Ga,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",jr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await L_e(1e3)}st(this,Hw,FM).call(this)})())}async _waitUntilReady(){if(re(this,Ll)!=null)return await re(this,Ll).promise}_getSubscriber(n){return n.type==="pending"?new O_e(this):n.type==="event"?this._getOption("polling")?new v8(this,n.filter):new R_e(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Wse("orphan"):super._getSubscriber(n)}get ready(){return re(this,Ll)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(n[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),r[s]=Dl(It(n[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{n[i]!=null&&(r[i]=ct(n[i]))}),n.accessList&&(r.accessList=i0(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(i=>i.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(i=>{const s=Xie(i);return{address:s.address,nonce:Dl(s.nonce),chainId:Dl(s.chainId),yParity:Dl(s.signature.yParity),r:Dl(s.signature.r),s:Dl(s.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[og(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[og(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[og(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[og(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(og):n.filter.address=og(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:i}=n,{error:s}=r;if(i==="eth_estimateGas"&&s.message){const l=s.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return jr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:s}});if(l.match(/nonce/i)&&l.match(/too low/i))return jr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=$M(s),c=Z1.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",n.params[0],l?l.data:null);return c.info={error:s,payload:n},c}const o=JSON.stringify(U_e(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return jr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:n,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return jr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:s}});if(o.match(/nonce/i)&&o.match(/too low/i))return jr("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:s}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return jr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:s}});if(o.match(/only replay-protected/i))return jr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:s}}})}let a=!!o.match(/the method .* does not exist/i);return a||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(a=!0),a?jr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:s,payload:n}}):jr("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(jr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const i=Sb(this,gx)._++,s=new Promise((o,a)=>{re(this,nd).push({resolve:o,reject:a,payload:{method:n,params:r,id:i,jsonrpc:"2.0"}})});return st(this,Hw,FM).call(this),s}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const s=await r;if(n>=s.length)throw new Error("no such account");return new WI(this,s[n])}const{accounts:i}=await Rs({network:this.getNetwork(),accounts:r});n=vn(n);for(const s of i)if(vn(s)===n)return new WI(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new WI(this,r))}destroy(){re(this,Nc)&&(clearTimeout(re(this,Nc)),ge(this,Nc,null));for(const{payload:n,reject:r}of re(this,nd))r(jr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));ge(this,nd,[]),super.destroy()}}vm=new WeakMap,gx=new WeakMap,nd=new WeakMap,Nc=new WeakMap,Ll=new WeakMap,Ga=new WeakMap,Ao=new WeakMap,Hw=new WeakSet,FM=function(){if(re(this,Nc))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");ge(this,Nc,setTimeout(()=>{ge(this,Nc,null);const r=re(this,nd);for(ge(this,nd,[]);r.length;){const i=[r.shift()];for(;r.length&&i.length!==re(this,vm).batchMaxCount;)if(i.push(r.shift()),JSON.stringify(i.map(o=>o.payload)).length>re(this,vm).batchMaxSize){r.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const o=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:l,payload:c}of i){if(this.destroyed){l(jr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const d=o.filter(h=>h.id===c.id)[0];if(d==null){const h=jr("missing response for request","BAD_DATA",{value:o,info:{payload:c}});this.emit("error",h),l(h);continue}if("error"in d){l(this.getRpcError(c,d));continue}a(d.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of i)a(o)}})()}},n))};var vh;class D_e extends j_e{constructor(n,r){super(n,r);Fe(this,vh);let i=this._getOption("pollingInterval");i==null&&(i=Jse.pollingInterval),ge(this,vh,i)}_getSubscriber(n){const r=super._getSubscriber(n);return XH(r)&&(r.pollingInterval=re(this,vh)),r}get pollingInterval(){return re(this,vh)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");ge(this,vh,n),this._forEachSubscriber(r=>{XH(r)&&(r.pollingInterval=re(this,vh))})}}vh=new WeakMap;var yx;class B_e extends D_e{constructor(n,r,i){n==null&&(n="http://localhost:8545");super(r,i);Fe(this,yx);typeof n=="string"?ge(this,yx,new Td(n)):ge(this,yx,n.clone())}_getConnection(){return re(this,yx).clone()}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){const r=this._getConnection();r.body=JSON.stringify(n),r.setHeader("content-type","application/json");const i=await r.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}yx=new WeakMap;function $M(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&vr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=$M(t[e]);if(n)return n}return null}if(typeof t=="string")try{return $M(JSON.parse(t))}catch{}return null}function zM(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)zM(t[n],e);if(typeof t=="string")try{return zM(JSON.parse(t),e)}catch{}}}function U_e(t){const e=[];return zM(t,e),e}var xx;const eU=class eU extends b8{constructor(n,r){super(r);Ce(this,"address");Fe(this,xx);ve(n&&typeof n.sign=="function","invalid private key","privateKey","[ REDACTED ]"),ge(this,xx,n);const i=aE(this.signingKey.publicKey);$t(this,{address:i})}get signingKey(){return re(this,xx)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(n){return new eU(re(this,xx),n)}async signTransaction(n){n=ew(n);const{to:r,from:i}=await Rs({to:n.to?Wi(n.to,this):void 0,from:n.from?Wi(n.from,this):void 0});r!=null&&(n.to=r),i!=null&&(n.from=i),n.from!=null&&(ve(vn(n.from)===this.address,"transaction from address mismatch","tx.from",n.from),delete n.from);const s=u8.from(n);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(n){return this.signMessageSync(n)}signMessageSync(n){return this.signingKey.sign(vse(n)).serialized}authorizeSync(n){ve(typeof n.address=="string","invalid address for authorizeSync","auth.address",n);const r=this.signingKey.sign(Qie(n));return Object.assign({},{address:vn(n.address),nonce:It(n.nonce||0),chainId:It(n.chainId||0)},{signature:r})}async authorize(n){return n=Object.assign({},n,{address:await Wi(n.address,this)}),this.authorizeSync(await this.populateAuthorization(n))}async signTypedData(n,r,i){const s=await jm.resolveNames(n,r,i,async o=>{tt(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:o}});const a=await this.provider.resolveName(o);return tt(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:o}),a});return this.signingKey.sign(jm.hash(s.domain,r,s.value)).serialized}};xx=new WeakMap;let LT=eU;const jT=" !#$%&'()*+,-./<=>?@[]^_`{|}~",F_e=/^[a-z]*$/i;function QH(t,e){let n=97;return t.reduce((r,i)=>(i===e?n++:i.match(F_e)?r.push(String.fromCharCode(n)+i):(n=97,r.push(i)),r),[])}function $_e(t,e){for(let i=jT.length-1;i>=0;i--)t=t.split(jT[i]).join(e.substring(2*i,2*i+2));const n=[],r=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,o,a)=>{if(o)for(let l=parseInt(o);l>=0;l--)n.push(";");else n.push(s.toLowerCase());return""});if(r)throw new Error(`leftovers: ${JSON.stringify(r)}`);return QH(QH(n,";"),":")}function z_e(t){return ve(t[0]==="0","unsupported auwl data","data",t),$_e(t.substring(1+2*jT.length),t.substring(1,1+2*jT.length))}class V_e{constructor(e){Ce(this,"locale");$t(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var vx,qw,bm,Gw,VM;class H_e extends V_e{constructor(n,r,i){super(n);Fe(this,Gw);Fe(this,vx);Fe(this,qw);Fe(this,bm);ge(this,vx,r),ge(this,qw,i),ge(this,bm,null)}get _data(){return re(this,vx)}_decodeWords(){return z_e(re(this,vx))}getWord(n){const r=st(this,Gw,VM).call(this);return ve(n>=0&&n<r.length,`invalid word index: ${n}`,"index",n),r[n]}getWordIndex(n){return st(this,Gw,VM).call(this).indexOf(n)}}vx=new WeakMap,qw=new WeakMap,bm=new WeakMap,Gw=new WeakSet,VM=function(){if(re(this,bm)==null){const n=this._decodeWords();if(kd(n.join(`
`)+`
`)!==re(this,qw))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);ge(this,bm,n)}return re(this,bm)};const q_e="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",G_e="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let YI=null;class Fm extends H_e{constructor(){super("en",q_e,G_e)}static wordlist(){return YI==null&&(YI=new Fm),YI}}function Xse(t){return(1<<t)-1<<8-t&255}function K_e(t){return(1<<t)-1&255}function JI(t,e){Nre("NFKD"),e==null&&(e=Fm.wordlist());const n=e.split(t);ve(n.length%3===0&&n.length>=12&&n.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const r=new Uint8Array(Math.ceil(11*n.length/8));let i=0;for(let c=0;c<n.length;c++){let d=e.getWordIndex(n[c].normalize("NFKD"));ve(d>=0,`invalid mnemonic word at index ${c}`,"mnemonic","[ REDACTED ]");for(let h=0;h<11;h++)d&1<<10-h&&(r[i>>3]|=1<<7-i%8),i++}const s=32*n.length/3,o=n.length/3,a=Xse(o),l=Et(sl(r.slice(0,s/8)))[0]&a;return ve(l===(r[r.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),ct(r.slice(0,s/8))}function XI(t,e){ve(t.length%4===0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=Fm.wordlist());const n=[0];let r=11;for(let o=0;o<t.length;o++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=t[o],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[o]>>8-r,n.push(t[o]&K_e(8-r)),r+=3);const i=t.length/4,s=parseInt(sl(t).substring(2,4),16)&Xse(i);return n[n.length-1]<<=i,n[n.length-1]|=s>>8-i,e.join(n.map(o=>e.getWord(o)))}const QI={};class Rx{constructor(e,n,r,i,s){Ce(this,"phrase");Ce(this,"password");Ce(this,"wordlist");Ce(this,"entropy");i==null&&(i=""),s==null&&(s=Fm.wordlist()),$h(e,QI,"Mnemonic"),$t(this,{phrase:r,password:i,wordlist:s,entropy:n})}computeSeed(){const e=bi("mnemonic"+this.password,"NFKD");return zh(bi(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,n,r){const i=JI(e,r);return e=XI(Et(i),r),new Rx(QI,i,e,n,r)}static fromEntropy(e,n,r){const i=Et(e,"entropy"),s=XI(i,r);return new Rx(QI,ct(i),s,n,r)}static entropyToPhrase(e,n){const r=Et(e,"entropy");return XI(r,n)}static phraseToEntropy(e,n){return JI(e,n)}static isValidMnemonic(e,n){try{return JI(e,n),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var is=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ZI=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},G2,La,pc;const W_e={16:10,24:12,32:14},Y_e=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],_a=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],kA=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],J_e=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],X_e=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Q_e=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Z_e=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],eIe=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],tIe=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],nIe=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],rIe=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],iIe=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],sIe=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],oIe=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],aIe=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function eR(t){const e=[];for(let n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}class w8{get key(){return is(this,G2,"f").slice()}constructor(e){if(G2.set(this,void 0),La.set(this,void 0),pc.set(this,void 0),!(this instanceof w8))throw Error("AES must be instanitated with `new`");ZI(this,G2,new Uint8Array(e),"f");const n=W_e[this.key.length];if(n==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");ZI(this,pc,[],"f"),ZI(this,La,[],"f");for(let d=0;d<=n;d++)is(this,pc,"f").push([0,0,0,0]),is(this,La,"f").push([0,0,0,0]);const r=(n+1)*4,i=this.key.length/4,s=eR(this.key);let o;for(let d=0;d<i;d++)o=d>>2,is(this,pc,"f")[o][d%4]=s[d],is(this,La,"f")[n-o][d%4]=s[d];let a=0,l=i,c;for(;l<r;){if(c=s[i-1],s[0]^=_a[c>>16&255]<<24^_a[c>>8&255]<<16^_a[c&255]<<8^_a[c>>24&255]^Y_e[a]<<24,a+=1,i!=8)for(let g=1;g<i;g++)s[g]^=s[g-1];else{for(let g=1;g<i/2;g++)s[g]^=s[g-1];c=s[i/2-1],s[i/2]^=_a[c&255]^_a[c>>8&255]<<8^_a[c>>16&255]<<16^_a[c>>24&255]<<24;for(let g=i/2+1;g<i;g++)s[g]^=s[g-1]}let d=0,h,m;for(;d<i&&l<r;)h=l>>2,m=l%4,is(this,pc,"f")[h][m]=s[d],is(this,La,"f")[n-h][m]=s[d++],l++}for(let d=1;d<n;d++)for(let h=0;h<4;h++)c=is(this,La,"f")[d][h],is(this,La,"f")[d][h]=iIe[c>>24&255]^sIe[c>>16&255]^oIe[c>>8&255]^aIe[c&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const n=is(this,pc,"f").length-1,r=[0,0,0,0];let i=eR(e);for(let a=0;a<4;a++)i[a]^=is(this,pc,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=J_e[i[l]>>24&255]^X_e[i[(l+1)%4]>>16&255]^Q_e[i[(l+2)%4]>>8&255]^Z_e[i[(l+3)%4]&255]^is(this,pc,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=is(this,pc,"f")[n][a],s[4*a]=(_a[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(_a[i[(a+1)%4]>>16&255]^o>>16)&255,s[4*a+2]=(_a[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(_a[i[(a+3)%4]&255]^o)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const n=is(this,La,"f").length-1,r=[0,0,0,0];let i=eR(e);for(let a=0;a<4;a++)i[a]^=is(this,La,"f")[0][a];for(let a=1;a<n;a++){for(let l=0;l<4;l++)r[l]=eIe[i[l]>>24&255]^tIe[i[(l+3)%4]>>16&255]^nIe[i[(l+2)%4]>>8&255]^rIe[i[(l+1)%4]&255]^is(this,La,"f")[a][l];i=r.slice()}const s=new Uint8Array(16);let o=0;for(let a=0;a<4;a++)o=is(this,La,"f")[n][a],s[4*a]=(kA[i[a]>>24&255]^o>>24)&255,s[4*a+1]=(kA[i[(a+3)%4]>>16&255]^o>>16)&255,s[4*a+2]=(kA[i[(a+2)%4]>>8&255]^o>>8)&255,s[4*a+3]=(kA[i[(a+1)%4]&255]^o)&255;return s}}G2=new WeakMap,La=new WeakMap,pc=new WeakMap;class Qse{constructor(e,n,r){if(r&&!(this instanceof r))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new w8(n)},name:{enumerable:!0,value:e}})}}var NA=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},ag=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},s1,Bu;class E8 extends Qse{constructor(e,n){if(super("ECC",e,E8),s1.set(this,void 0),Bu.set(this,void 0),n){if(n.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");NA(this,s1,new Uint8Array(n),"f")}else NA(this,s1,new Uint8Array(16),"f");NA(this,Bu,this.iv,"f")}get iv(){return new Uint8Array(ag(this,s1,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let i=0;i<16;i++)ag(this,Bu,"f")[i]^=e[r+i];NA(this,Bu,this.aes.encrypt(ag(this,Bu,"f")),"f"),n.set(ag(this,Bu,"f"),r)}return n}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const n=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){const i=this.aes.decrypt(e.subarray(r,r+16));for(let s=0;s<16;s++)n[r+s]=i[s]^ag(this,Bu,"f")[s],ag(this,Bu,"f")[s]=e[r+s]}return n}}s1=new WeakMap,Bu=new WeakMap;var lg=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Ia=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},o1,Np,ja;class Ox extends Qse{constructor(e,n){super("CTR",e,Ox),o1.set(this,void 0),Np.set(this,void 0),ja.set(this,void 0),lg(this,ja,new Uint8Array(16),"f"),Ia(this,ja,"f").fill(0),lg(this,o1,Ia(this,ja,"f"),"f"),lg(this,Np,16,"f"),n==null&&(n=1),typeof n=="number"?this.setCounterValue(n):this.setCounterBytes(n)}get counter(){return new Uint8Array(Ia(this,ja,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let n=15;n>=0;--n)Ia(this,ja,"f")[n]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");Ia(this,ja,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(Ia(this,ja,"f")[e]===255)Ia(this,ja,"f")[e]=0;else{Ia(this,ja,"f")[e]++;break}}encrypt(e){var n,r;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)Ia(this,Np,"f")===16&&(lg(this,o1,this.aes.encrypt(Ia(this,ja,"f")),"f"),lg(this,Np,0,"f"),this.increment()),i[s]^=Ia(this,o1,"f")[lg(this,Np,(r=Ia(this,Np,"f"),n=r++,r),"f"),n];return i}decrypt(e){return this.encrypt(e)}}o1=new WeakMap,Np=new WeakMap,ja=new WeakMap;function lIe(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const n=t.length-e;for(let r=0;r<e;r++)if(t[n+r]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,n))}function Zse(t){return typeof t=="string"&&!t.startsWith("0x")&&(t="0x"+t),ys(t)}function _b(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function uE(t){return typeof t=="string"?bi(t,"NFKC"):ys(t)}function ii(t,e){const n=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);ve(n!=null,"invalid path","path",e);const r=n[1],i=n[3],s=n[4]==="!";let o=t;for(const a of r.toLowerCase().split(".")){if(Array.isArray(o)){if(!a.match(/^[0-9]+$/))break;o=o[parseInt(a)]}else if(typeof o=="object"){let l=null;for(const c in o)if(c.toLowerCase()===a){l=o[c];break}o=l}else o=null;if(o==null)break}if(ve(!s||o!=null,"missing required value","path",r),i&&o!=null){if(i==="int"){if(typeof o=="string"&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if(i==="number"&&typeof o=="string"&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if(i==="data"&&typeof o=="string")return Zse(o);if(i==="array"&&Array.isArray(o)||i===typeof o)return o;ve(!1,`wrong type found for ${i} `,"path",r)}return o}const eoe="m/44'/60'/0'/0/0";function ZH(t){try{const e=JSON.parse(t);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function cIe(t,e,n){if(ii(t,"crypto.cipher:string")==="aes-128-ctr"){const i=ii(t,"crypto.cipherparams.iv:data!"),s=new Ox(e,i);return ct(s.decrypt(n))}tt(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function DT(t,e){const n=Et(e),r=ii(t,"crypto.ciphertext:data!"),i=ct(Wn(Ln([n.slice(16,32),r]))).substring(2);ve(i===ii(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=cIe(t,n.slice(0,16),r),o=aE(s);if(t.address){let c=t.address.toLowerCase();c.startsWith("0x")||(c="0x"+c),ve(vn(c)===o,"keystore address/privateKey mismatch","address",t.address)}const a={address:o,privateKey:s};if(ii(t,"x-ethers.version:string")==="0.1"){const c=n.slice(32,64),d=ii(t,"x-ethers.mnemonicCiphertext:data!"),h=ii(t,"x-ethers.mnemonicCounter:data!"),m=new Ox(c,h);a.mnemonic={path:ii(t,"x-ethers.path:string")||eoe,locale:ii(t,"x-ethers.locale:string")||"en",entropy:ct(Et(m.decrypt(d)))}}return a}function toe(t){const e=ii(t,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const n=ii(t,"crypto.kdfparams.salt:data!"),r=ii(t,"crypto.kdfparams.n:int!"),i=ii(t,"crypto.kdfparams.r:int!"),s=ii(t,"crypto.kdfparams.p:int!");ve(r>0&&(r&r-1)===0,"invalid kdf.N","kdf.N",r),ve(i>0&&s>0,"invalid kdf","kdf",e);const o=ii(t,"crypto.kdfparams.dklen:int!");return ve(o===32,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:n,N:r,r:i,p:s,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const n=ii(t,"crypto.kdfparams.salt:data!"),r=ii(t,"crypto.kdfparams.prf:string!"),i=r.split("-").pop();ve(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",r);const s=ii(t,"crypto.kdfparams.c:int!"),o=ii(t,"crypto.kdfparams.dklen:int!");return ve(o===32,"invalid kdf.dklen","kdf.dklen",o),{name:"pbkdf2",salt:n,count:s,dkLen:o,algorithm:i}}}ve(!1,"unsupported key-derivation function","kdf",e)}function uIe(t,e){const n=JSON.parse(t),r=uE(e),i=toe(n);if(i.name==="pbkdf2"){const{salt:h,count:m,dkLen:g,algorithm:v}=i,x=zh(r,h,m,g,v);return DT(n,x)}tt(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:o,r:a,p:l,dkLen:c}=i,d=av(r,s,o,a,l,c);return DT(n,d)}function eq(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}async function dIe(t,e,n){const r=JSON.parse(t),i=uE(e),s=toe(r);if(s.name==="pbkdf2"){n&&(n(0),await eq(0));const{salt:m,count:g,dkLen:v,algorithm:x}=s,b=zh(i,m,g,v,x);return n&&(n(1),await eq(0)),DT(r,b)}tt(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:o,N:a,r:l,p:c,dkLen:d}=s,h=await ov(i,o,a,l,c,d,n);return DT(r,h)}function noe(t){const e=t.salt!=null?Et(t.salt,"options.salt"):md(32);let n=1<<17,r=8,i=1;return t.scrypt&&(t.scrypt.N&&(n=t.scrypt.N),t.scrypt.r&&(r=t.scrypt.r),t.scrypt.p&&(i=t.scrypt.p)),ve(typeof n=="number"&&n>0&&Number.isSafeInteger(n)&&(BigInt(n)&BigInt(n-1))===BigInt(0),"invalid scrypt N parameter","options.N",n),ve(typeof r=="number"&&r>0&&Number.isSafeInteger(r),"invalid scrypt r parameter","options.r",r),ve(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:n,r,p:i}}function roe(t,e,n,r){const i=Et(n.privateKey,"privateKey"),s=r.iv!=null?Et(r.iv,"options.iv"):md(16);ve(s.length===16,"invalid options.iv length","options.iv",r.iv);const o=r.uuid!=null?Et(r.uuid,"options.uuid"):md(16);ve(o.length===16,"invalid options.uuid length","options.uuid",r.iv);const a=t.slice(0,16),l=t.slice(16,32),c=new Ox(a,s),d=Et(c.encrypt(i)),h=Wn(Ln([l,d])),m={address:n.address.substring(2).toLowerCase(),id:hNe(o),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:ct(s).substring(2)},ciphertext:ct(d).substring(2),kdf:"scrypt",kdfparams:{salt:ct(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:h.substring(2)}};if(n.mnemonic){const g=r.client!=null?r.client:`ethers/${Tre}`,v=n.mnemonic.path||eoe,x=n.mnemonic.locale||"en",b=t.slice(32,64),w=Et(n.mnemonic.entropy,"account.mnemonic.entropy"),k=md(16),N=new Ox(b,k),O=Et(N.encrypt(w)),D=new Date,F="UTC--"+(D.getUTCFullYear()+"-"+_b(D.getUTCMonth()+1,2)+"-"+_b(D.getUTCDate(),2)+"T"+_b(D.getUTCHours(),2)+"-"+_b(D.getUTCMinutes(),2)+"-"+_b(D.getUTCSeconds(),2)+".0Z")+"--"+m.address;m["x-ethers"]={client:g,gethFilename:F,path:v,locale:x,mnemonicCounter:ct(k).substring(2),mnemonicCiphertext:ct(O).substring(2),version:"0.1"}}return JSON.stringify(m)}function ioe(t,e,n){n==null&&(n={});const r=uE(e),i=noe(n),s=av(r,i.salt,i.N,i.r,i.p,64);return roe(Et(s),i,t,n)}async function soe(t,e,n){n==null&&(n={});const r=uE(e),i=noe(n),s=await ov(r,i.salt,i.N,i.r,i.p,64,n.progressCallback);return roe(Et(s),i,t,n)}const tR="m/44'/60'/0'/0/0",fIe=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),zc=2147483648,hIe=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),pIe="0123456789abcdef";function BT(t,e){let n="";for(;t;)n=pIe[t%16]+n,t=Math.trunc(t/16);for(;n.length<e*2;)n="0"+n;return"0x"+n}function HM(t){const e=Et(t),n=xr(sl(sl(e)),0,4),r=Ln([e,n]);return Ire(r)}const xc={};function ooe(t,e,n,r){const i=new Uint8Array(37);t&zc?(tt(r!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(Et(r),1)):i.set(Et(n));for(let o=24;o>=0;o-=8)i[33+(o>>3)]=t>>24-o&255;const s=Et(iv("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function aoe(t,e){const n=e.split("/");ve(n.length>0,"invalid path","path",e),n[0]==="m"&&(ve(t.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${t.depth}`,"path",e),n.shift());let r=t;for(let i=0;i<n.length;i++){const s=n[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));ve(o<zc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(zc+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);ve(o<zc,"invalid path index",`path[${i}]`,s),r=r.deriveChild(o)}else ve(!1,"invalid path component",`path[${i}]`,s)}return r}var Kw,qM,wm,a1;const Nl=class Nl extends LT{constructor(n,r,i,s,o,a,l,c,d){super(r,d);Fe(this,Kw);Ce(this,"publicKey");Ce(this,"fingerprint");Ce(this,"parentFingerprint");Ce(this,"mnemonic");Ce(this,"chainCode");Ce(this,"path");Ce(this,"index");Ce(this,"depth");$h(n,xc,"HDNodeWallet"),$t(this,{publicKey:r.compressedPublicKey});const h=xr(sv(sl(this.publicKey)),0,4);$t(this,{parentFingerprint:i,fingerprint:h,chainCode:s,path:o,index:a,depth:l}),$t(this,{mnemonic:c})}connect(n){return new Nl(xc,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,n)}async encrypt(n,r){return await soe(st(this,Kw,qM).call(this),n,{progressCallback:r})}encryptSync(n){return ioe(st(this,Kw,qM).call(this),n)}get extendedKey(){return tt(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),HM(Ln(["0x0488ADE4",BT(this.depth,1),this.parentFingerprint,BT(this.index,4),this.chainCode,Ln(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new rw(xc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(n){const r=nn(n,"index");ve(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~zc),r&zc&&(i+="'"));const{IR:s,IL:o}=ooe(r,this.chainCode,this.publicKey,this.privateKey),a=new $c(Ad((iE(o)+BigInt(this.privateKey))%hIe,32));return new Nl(xc,a,this.fingerprint,ct(s),i,r,this.depth+1,this.mnemonic,this.provider)}derivePath(n){return aoe(this,n)}static fromExtendedKey(n){const r=zr(Wke(n));ve(r.length===82||HM(r.slice(0,78))===n,"invalid extended key","extendedKey","[ REDACTED ]");const i=r[4],s=ct(r.slice(5,9)),o=parseInt(ct(r.slice(9,13)).substring(2),16),a=ct(r.slice(13,45)),l=r.slice(45,78);switch(ct(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const c=ct(l);return new rw(xc,aE(c),c,s,a,null,o,i,null)}case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new Nl(xc,new $c(l.slice(1)),s,a,null,o,i,null,null)}ve(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(n,r,i){var o;n==null&&(n=""),r==null&&(r=tR),i==null&&(i=Fm.wordlist());const s=Rx.fromEntropy(md(16),n,i);return st(o=Nl,wm,a1).call(o,s.computeSeed(),s).derivePath(r)}static fromMnemonic(n,r){var i;return r||(r=tR),st(i=Nl,wm,a1).call(i,n.computeSeed(),n).derivePath(r)}static fromPhrase(n,r,i,s){var a;r==null&&(r=""),i==null&&(i=tR),s==null&&(s=Fm.wordlist());const o=Rx.fromPhrase(n,r,s);return st(a=Nl,wm,a1).call(a,o.computeSeed(),o).derivePath(i)}static fromSeed(n){var r;return st(r=Nl,wm,a1).call(r,n,null)}};Kw=new WeakSet,qM=function(){const n={address:this.address,privateKey:this.privateKey},r=this.mnemonic;return this.path&&r&&r.wordlist.locale==="en"&&r.password===""&&(n.mnemonic={path:this.path,locale:"en",entropy:r.entropy}),n},wm=new WeakSet,a1=function(n,r){ve(UN(n),"invalid seed","seed","[REDACTED]");const i=Et(n,"seed");ve(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=Et(iv("sha512",fIe,i)),o=new $c(ct(s.slice(0,32)));return new Nl(xc,o,"0x00000000",ct(s.slice(32)),"m",0,0,r,null)},Fe(Nl,wm);let E1=Nl;class rw extends DM{constructor(n,r,i,s,o,a,l,c,d){super(r,d);Ce(this,"publicKey");Ce(this,"fingerprint");Ce(this,"parentFingerprint");Ce(this,"chainCode");Ce(this,"path");Ce(this,"index");Ce(this,"depth");$h(n,xc,"HDNodeVoidWallet"),$t(this,{publicKey:i});const h=xr(sv(sl(i)),0,4);$t(this,{publicKey:i,fingerprint:h,parentFingerprint:s,chainCode:o,path:a,index:l,depth:c})}connect(n){return new rw(xc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,n)}get extendedKey(){return tt(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),HM(Ln(["0x0488B21E",BT(this.depth,1),this.parentFingerprint,BT(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(n){const r=nn(n,"index");ve(r<=4294967295,"invalid index","index",r);let i=this.path;i&&(i+="/"+(r&~zc),r&zc&&(i+="'"));const{IR:s,IL:o}=ooe(r,this.chainCode,this.publicKey,null),a=$c.addPoints(o,this.publicKey,!0),l=aE(a);return new rw(xc,l,a,this.fingerprint,ct(s),i,r,this.depth+1,this.provider)}derivePath(n){return aoe(this,n)}}function cyt(t){const e=nn(t,"index");return ve(e>=0&&e<zc,"invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function uyt(t){const e=nn(t,"index");return ve(e>=0&&e<zc,"invalid account index","index",e),`m/44'/60'/0'/0/${e}`}function tq(t){try{if(JSON.parse(t).encseed)return!0}catch{}return!1}function nq(t,e){const n=JSON.parse(t),r=uE(e),i=vn(ii(n,"ethaddr:string!")),s=Zse(ii(n,"encseed:string!"));ve(s&&s.length%16===0,"invalid encseed","json",t);const o=Et(zh(r,r,2e3,32,"sha256")).slice(0,16),a=s.slice(0,16),l=s.slice(16),c=new E8(o,a),d=lIe(Et(c.decrypt(l)));let h="";for(let m=0;m<d.length;m++)h+=String.fromCharCode(d[m]);return{address:i,privateKey:kd(h)}}function rq(t){return new Promise(e=>{setTimeout(()=>{e()},t)})}var Ww,GM;const Bp=class Bp extends LT{constructor(e,n){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let r=typeof e=="string"?new $c(e):e;super(r,n)}connect(e){return new Bp(this.signingKey,e)}async encrypt(e,n){const r={address:this.address,privateKey:this.privateKey};return await soe(r,e,{progressCallback:n})}encryptSync(e){const n={address:this.address,privateKey:this.privateKey};return ioe(n,e)}static async fromEncryptedJson(e,n,r){var s;let i=null;return ZH(e)?i=await dIe(e,n,r):tq(e)&&(r&&(r(0),await rq(0)),i=nq(e,n),r&&(r(1),await rq(0))),st(s=Bp,Ww,GM).call(s,i)}static fromEncryptedJsonSync(e,n){var i;let r=null;return ZH(e)?r=uIe(e,n):tq(e)?r=nq(e,n):ve(!1,"invalid JSON wallet","json","[ REDACTED ]"),st(i=Bp,Ww,GM).call(i,r)}static createRandom(e){const n=E1.createRandom();return e?n.connect(e):n}static fromPhrase(e,n){const r=E1.fromPhrase(e);return n?r.connect(n):r}};Ww=new WeakSet,GM=function(e){if(ve(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const r=Rx.fromEntropy(e.mnemonic.entropy),i=E1.fromMnemonic(r,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const n=new Bp(e.privateKey);return ve(n.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),n},Fe(Bp,Ww);let Sh=Bp;var Mf={},nR={},rR={},iR={},sR={},oR={},Ib,iq;function mIe(){if(iq)return Ib;iq=1,Ib=t(typeof un<"u"&&un)||t(Ib.Buffer)||t(typeof window<"u"&&window.Buffer)||Ib.Buffer;function t(e){return e&&e.isBuffer&&e}return Ib}var aR,sq;function S8(){if(sq)return aR;sq=1;var t={}.toString;return aR=Array.isArray||function(e){return t.call(e)=="[object Array]"},aR}var lR={exports:{}},oq;function gIe(){if(oq)return lR.exports;oq=1;var t=ul(),e=lR.exports=n(0);e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Array(i)}function r(i){if(!t.isBuffer(i)&&t.isView(i))i=t.Uint8Array.from(i);else if(t.isArrayBuffer(i))i=new Uint8Array(i);else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(i)}return lR.exports}var cR={exports:{}},aq;function yIe(){if(aq)return cR.exports;aq=1;var t=ul(),e=t.global,n=cR.exports=t.hasBuffer?r(0):[];n.alloc=t.hasBuffer&&e.alloc||r,n.concat=t.concat,n.from=i;function r(s){return new e(s)}function i(s){if(!t.isBuffer(s)&&t.isView(s))s=t.Uint8Array.from(s);else if(t.isArrayBuffer(s))s=new Uint8Array(s);else{if(typeof s=="string")return t.from.call(n,s);if(typeof s=="number")throw new TypeError('"value" argument must not be a number')}return e.from&&e.from.length!==1?e.from(s):new e(s)}return cR.exports}var uR={exports:{}},lq;function xIe(){if(lq)return uR.exports;lq=1;var t=ul(),e=uR.exports=t.hasArrayBuffer?n(0):[];e.alloc=n,e.concat=t.concat,e.from=r;function n(i){return new Uint8Array(i)}function r(i){if(t.isView(i)){var s=i.byteOffset,o=i.byteLength;i=i.buffer,i.byteLength!==o&&(i.slice?i=i.slice(s,s+o):(i=new Uint8Array(i),i.byteLength!==o&&(i=Array.prototype.slice.call(i,s,s+o))))}else{if(typeof i=="string")return t.from.call(e,i);if(typeof i=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(i)}return uR.exports}var cg={},Rb={},cq;function vIe(){if(cq)return Rb;cq=1,Rb.copy=n,Rb.toString=e,Rb.write=t;function t(r,i){for(var s=this,o=i||(i|=0),a=r.length,l=0,c=0;c<a;)l=r.charCodeAt(c++),l<128?s[o++]=l:l<2048?(s[o++]=192|l>>>6,s[o++]=128|l&63):l<55296||l>57343?(s[o++]=224|l>>>12,s[o++]=128|l>>>6&63,s[o++]=128|l&63):(l=(l-55296<<10|r.charCodeAt(c++)-56320)+65536,s[o++]=240|l>>>18,s[o++]=128|l>>>12&63,s[o++]=128|l>>>6&63,s[o++]=128|l&63);return o-i}function e(r,i,s){var o=this,a=i|0;s||(s=o.length);for(var l="",c=0;a<s;){if(c=o[a++],c<128){l+=String.fromCharCode(c);continue}(c&224)===192?c=(c&31)<<6|o[a++]&63:(c&240)===224?c=(c&15)<<12|(o[a++]&63)<<6|o[a++]&63:(c&248)===240&&(c=(c&7)<<18|(o[a++]&63)<<12|(o[a++]&63)<<6|o[a++]&63),c>=65536?(c-=65536,l+=String.fromCharCode((c>>>10)+55296,(c&1023)+56320)):l+=String.fromCharCode(c)}return l}function n(r,i,s,o){var a;s||(s=0),!o&&o!==0&&(o=this.length),i||(i=0);var l=o-s;if(r===this&&s<i&&i<o)for(a=l-1;a>=0;a--)r[a+i]=this[a+s];else for(a=0;a<l;a++)r[a+i]=this[a+s];return l}return Rb}var uq;function A8(){if(uq)return cg;uq=1;var t=vIe();cg.copy=s,cg.slice=o,cg.toString=a,cg.write=l("write");var e=ul(),n=e.global,r=e.hasBuffer&&"TYPED_ARRAY_SUPPORT"in n,i=r&&!n.TYPED_ARRAY_SUPPORT;function s(c,d,h,m){var g=e.isBuffer(this),v=e.isBuffer(c);if(g&&v)return this.copy(c,d,h,m);if(!i&&!g&&!v&&e.isView(this)&&e.isView(c)){var x=h||m!=null?o.call(this,h,m):this;return c.set(x,d),x.length}else return t.copy.call(this,c,d,h,m)}function o(c,d){var h=this.slice||!i&&this.subarray;if(h)return h.call(this,c,d);var m=e.alloc.call(this,d-c);return s.call(this,m,0,c,d),m}function a(c,d,h){var m=!r&&e.isBuffer(this)?this.toString:t.toString;return m.apply(this,arguments)}function l(c){return d;function d(){var h=this[c]||t[c];return h.apply(this,arguments)}}return cg}var dq;function ul(){return dq||(dq=1,(function(t){var e=t.global=mIe(),n=t.hasBuffer=e&&!!e.isBuffer,r=t.hasArrayBuffer=typeof ArrayBuffer<"u",i=t.isArray=S8();t.isArrayBuffer=r?x:k;var s=t.isBuffer=n?e.isBuffer:k,o=t.isView=r?ArrayBuffer.isView||N("ArrayBuffer","buffer"):k;t.alloc=m,t.concat=g,t.from=h;var a=t.Array=gIe(),l=t.Buffer=yIe(),c=t.Uint8Array=xIe(),d=t.prototype=A8();function h(O){return typeof O=="string"?b.call(this,O):w(this).from(O)}function m(O){return w(this).alloc(O)}function g(O,D){D||(D=0,Array.prototype.forEach.call(O,L));var _=this!==t&&this||O[0],F=m.call(_,D),z=0;return Array.prototype.forEach.call(O,$),F;function L(G){D+=G.length}function $(G){z+=d.copy.call(G,F,z)}}var v=N("ArrayBuffer");function x(O){return O instanceof ArrayBuffer||v(O)}function b(O){var D=O.length*3,_=m.call(this,D),F=d.write.call(_,O);return D!==F&&(_=d.slice.call(_,0,F)),_}function w(O){return s(O)?l:o(O)?c:i(O)?a:n?l:r?c:a}function k(){return!1}function N(O,D){return O="[object "+O+"]",function(_){return _!=null&&{}.toString.call(D?_[D]:_)===O}}})(oR)),oR}var fq;function T8(){if(fq)return sR;fq=1,sR.ExtBuffer=e;var t=ul();function e(n,r){if(!(this instanceof e))return new e(n,r);this.buffer=t.from(n),this.type=r}return sR}var dR={},hq;function bIe(){if(hq)return dR;hq=1,dR.setExtPackers=s;var t=ul(),e=t.global,n=t.Uint8Array.from,r,i={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function s(d){d.addExtPacker(14,Error,[c,o]),d.addExtPacker(1,EvalError,[c,o]),d.addExtPacker(2,RangeError,[c,o]),d.addExtPacker(3,ReferenceError,[c,o]),d.addExtPacker(4,SyntaxError,[c,o]),d.addExtPacker(5,TypeError,[c,o]),d.addExtPacker(6,URIError,[c,o]),d.addExtPacker(10,RegExp,[l,o]),d.addExtPacker(11,Boolean,[a,o]),d.addExtPacker(12,String,[a,o]),d.addExtPacker(13,Date,[Number,o]),d.addExtPacker(15,Number,[a,o]),typeof Uint8Array<"u"&&(d.addExtPacker(17,Int8Array,n),d.addExtPacker(18,Uint8Array,n),d.addExtPacker(19,Int16Array,n),d.addExtPacker(20,Uint16Array,n),d.addExtPacker(21,Int32Array,n),d.addExtPacker(22,Uint32Array,n),d.addExtPacker(23,Float32Array,n),typeof Float64Array<"u"&&d.addExtPacker(24,Float64Array,n),typeof Uint8ClampedArray<"u"&&d.addExtPacker(25,Uint8ClampedArray,n),d.addExtPacker(26,ArrayBuffer,n),d.addExtPacker(29,DataView,n)),t.hasBuffer&&d.addExtPacker(27,e,t.from)}function o(d){return r||(r=foe().encode),r(d)}function a(d){return d.valueOf()}function l(d){d=RegExp.prototype.toString.call(d).split("/"),d.shift();var h=[d.pop()];return h.unshift(d.join("/")),h}function c(d){var h={};for(var m in i)h[m]=d[m];return h}return dR}var fR={},CA={},pq;function k8(){return pq||(pq=1,(function(t){(function(e){var n="undefined",r=n!==typeof un&&un,i=n!==typeof Uint8Array&&Uint8Array,s=n!==typeof ArrayBuffer&&ArrayBuffer,o=[0,0,0,0,0,0,0,0],a=Array.isArray||_,l=4294967296,c=16777216,d;h("Uint64BE",!0,!0),h("Int64BE",!0,!1),h("Uint64LE",!1,!0),h("Int64LE",!1,!1);function h(F,z,L){var $=z?0:4,G=z?4:0,V=z?0:3,U=z?1:2,A=z?2:1,I=z?3:0,j=z?k:O,q=z?N:D,K=H.prototype,te="is"+F,Y="_"+te;return K.buffer=void 0,K.offset=0,K[Y]=!0,K.toNumber=X,K.toString=ie,K.toJSON=X,K.toArray=m,r&&(K.toBuffer=g),i&&(K.toArrayBuffer=v),H[te]=M,e[F]=H,H;function H(ce,de,ke,ye){return this instanceof H?P(this,ce,de,ke,ye):new H(ce,de,ke,ye)}function M(ce){return!!(ce&&ce[Y])}function P(ce,de,ke,ye,Ke){if(i&&s&&(de instanceof s&&(de=new i(de)),ye instanceof s&&(ye=new i(ye))),!de&&!ke&&!ye&&!d){ce.buffer=w(o,0);return}if(!x(de,ke)){var je=d||Array;Ke=ke,ye=de,ke=0,de=new je(8)}ce.buffer=de,ce.offset=ke|=0,n!==typeof ye&&(typeof ye=="string"?W(de,ke,ye,Ke||10):x(ye,Ke)?b(de,ke,ye,Ke):typeof Ke=="number"?(oe(de,ke+$,ye),oe(de,ke+G,Ke)):ye>0?j(de,ke,ye):ye<0?q(de,ke,ye):b(de,ke,o,0))}function W(ce,de,ke,ye){var Ke=0,je=ke.length,Ve=0,me=0;ke[0]==="-"&&Ke++;for(var Ne=Ke;Ke<je;){var We=parseInt(ke[Ke++],ye);if(!(We>=0))break;me=me*ye+We,Ve=Ve*ye+Math.floor(me/l),me%=l}Ne&&(Ve=~Ve,me?me=l-me:Ve++),oe(ce,de+$,Ve),oe(ce,de+G,me)}function X(){var ce=this.buffer,de=this.offset,ke=Te(ce,de+$),ye=Te(ce,de+G);return L||(ke|=0),ke?ke*l+ye:ye}function ie(ce){var de=this.buffer,ke=this.offset,ye=Te(de,ke+$),Ke=Te(de,ke+G),je="",Ve=!L&&ye&2147483648;for(Ve&&(ye=~ye,Ke=l-Ke),ce=ce||10;;){var me=ye%ce*l+Ke;if(ye=Math.floor(ye/ce),Ke=Math.floor(me/ce),je=(me%ce).toString(ce)+je,!ye&&!Ke)break}return Ve&&(je="-"+je),je}function oe(ce,de,ke){ce[de+I]=ke&255,ke=ke>>8,ce[de+A]=ke&255,ke=ke>>8,ce[de+U]=ke&255,ke=ke>>8,ce[de+V]=ke&255}function Te(ce,de){return ce[de+V]*c+(ce[de+U]<<16)+(ce[de+A]<<8)+ce[de+I]}}function m(F){var z=this.buffer,L=this.offset;return d=null,F!==!1&&L===0&&z.length===8&&a(z)?z:w(z,L)}function g(F){var z=this.buffer,L=this.offset;if(d=r,F!==!1&&L===0&&z.length===8&&un.isBuffer(z))return z;var $=new r(8);return b($,0,z,L),$}function v(F){var z=this.buffer,L=this.offset,$=z.buffer;if(d=i,F!==!1&&L===0&&$ instanceof s&&$.byteLength===8)return $;var G=new i(8);return b(G,0,z,L),G.buffer}function x(F,z){var L=F&&F.length;return z|=0,L&&z+8<=L&&typeof F[z]!="string"}function b(F,z,L,$){z|=0,$|=0;for(var G=0;G<8;G++)F[z++]=L[$++]&255}function w(F,z){return Array.prototype.slice.call(F,z,z+8)}function k(F,z,L){for(var $=z+8;$>z;)F[--$]=L&255,L/=256}function N(F,z,L){var $=z+8;for(L++;$>z;)F[--$]=-L&255^255,L/=256}function O(F,z,L){for(var $=z+8;z<$;)F[z++]=L&255,L/=256}function D(F,z,L){var $=z+8;for(L++;z<$;)F[z++]=-L&255^255,L/=256}function _(F){return!!F&&Object.prototype.toString.call(F)=="[object Array]"}})(typeof t.nodeName!="string"?t:CA||{})})(CA)),CA}var hR={},PA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var mq;function loe(){return mq||(mq=1,PA.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,d=-7,h=n?i-1:0,m=n?-1:1,g=t[e+h];for(h+=m,s=g&(1<<-d)-1,g>>=-d,d+=a;d>0;s=s*256+t[e+h],h+=m,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=r;d>0;o=o*256+t[e+h],h+=m,d-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(g?-1:1)*o*Math.pow(2,s-r)},PA.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,d=(1<<c)-1,h=d>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,v=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=m/l:e+=m*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+g]=a&255,g+=v,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+g]=o&255,g+=v,o/=256,c-=8);t[n+g-v]|=x*128}),PA}var pR={},gq;function coe(){if(gq)return pR;gq=1;for(var t=pR.uint8=new Array(256),e=0;e<=255;e++)t[e]=n(e);function n(r){return function(i){var s=i.reserve(1);i.buffer[s]=r}}return pR}var yq;function wIe(){if(yq)return hR;yq=1;var t=loe(),e=k8(),n=e.Uint64BE,r=e.Int64BE,i=coe().uint8,s=ul(),o=s.global,a=s.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,l=a&&!o.TYPED_ARRAY_SUPPORT,c=s.hasBuffer&&o.prototype||{};hR.getWriteToken=d;function d(_){return _&&_.uint8array?h():l||s.hasBuffer&&_&&_.safe?g():m()}function h(){var _=m();return _[202]=w(202,4,O),_[203]=w(203,8,D),_}function m(){var _=i.slice();return _[196]=v(196),_[197]=x(197),_[198]=b(198),_[199]=v(199),_[200]=x(200),_[201]=b(201),_[202]=w(202,4,c.writeFloatBE||O,!0),_[203]=w(203,8,c.writeDoubleBE||D,!0),_[204]=v(204),_[205]=x(205),_[206]=b(206),_[207]=w(207,8,k),_[208]=v(208),_[209]=x(209),_[210]=b(210),_[211]=w(211,8,N),_[217]=v(217),_[218]=x(218),_[219]=b(219),_[220]=x(220),_[221]=b(221),_[222]=x(222),_[223]=b(223),_}function g(){var _=i.slice();return _[196]=w(196,1,o.prototype.writeUInt8),_[197]=w(197,2,o.prototype.writeUInt16BE),_[198]=w(198,4,o.prototype.writeUInt32BE),_[199]=w(199,1,o.prototype.writeUInt8),_[200]=w(200,2,o.prototype.writeUInt16BE),_[201]=w(201,4,o.prototype.writeUInt32BE),_[202]=w(202,4,o.prototype.writeFloatBE),_[203]=w(203,8,o.prototype.writeDoubleBE),_[204]=w(204,1,o.prototype.writeUInt8),_[205]=w(205,2,o.prototype.writeUInt16BE),_[206]=w(206,4,o.prototype.writeUInt32BE),_[207]=w(207,8,k),_[208]=w(208,1,o.prototype.writeInt8),_[209]=w(209,2,o.prototype.writeInt16BE),_[210]=w(210,4,o.prototype.writeInt32BE),_[211]=w(211,8,N),_[217]=w(217,1,o.prototype.writeUInt8),_[218]=w(218,2,o.prototype.writeUInt16BE),_[219]=w(219,4,o.prototype.writeUInt32BE),_[220]=w(220,2,o.prototype.writeUInt16BE),_[221]=w(221,4,o.prototype.writeUInt32BE),_[222]=w(222,2,o.prototype.writeUInt16BE),_[223]=w(223,4,o.prototype.writeUInt32BE),_}function v(_){return function(F,z){var L=F.reserve(2),$=F.buffer;$[L++]=_,$[L]=z}}function x(_){return function(F,z){var L=F.reserve(3),$=F.buffer;$[L++]=_,$[L++]=z>>>8,$[L]=z}}function b(_){return function(F,z){var L=F.reserve(5),$=F.buffer;$[L++]=_,$[L++]=z>>>24,$[L++]=z>>>16,$[L++]=z>>>8,$[L]=z}}function w(_,F,z,L){return function($,G){var V=$.reserve(F+1);$.buffer[V++]=_,z.call($.buffer,G,V,L)}}function k(_,F){new n(this,F,_)}function N(_,F){new r(this,F,_)}function O(_,F){t.write(this,_,F,!1,23,4)}function D(_,F){t.write(this,_,F,!1,52,8)}return hR}var xq;function EIe(){if(xq)return fR;xq=1;var t=S8(),e=k8(),n=e.Uint64BE,r=e.Int64BE,i=ul(),s=A8(),o=wIe(),a=coe().uint8,l=T8().ExtBuffer,c=typeof Uint8Array<"u",d=typeof Map<"u",h=[];h[1]=212,h[2]=213,h[4]=214,h[8]=215,h[16]=216,fR.getWriteType=m;function m(g){var v=o.getWriteToken(g),x=g&&g.useraw,b=c&&g&&g.binarraybuffer,w=b?i.isArrayBuffer:i.isBuffer,k=b?K:q,N=d&&g&&g.usemap,O=N?H:Y,D={boolean:_,function:I,number:F,object:x?A:U,string:V(x?G:$),symbol:I,undefined:I};return D;function _(P,W){var X=W?195:194;v[X](P,W)}function F(P,W){var X=W|0,ie;if(W!==X){ie=203,v[ie](P,W);return}else-32<=X&&X<=127?ie=X&255:0<=X?ie=X<=255?204:X<=65535?205:206:ie=-128<=X?208:-32768<=X?209:210;v[ie](P,X)}function z(P,W){var X=207;v[X](P,W.toArray())}function L(P,W){var X=211;v[X](P,W.toArray())}function $(P){return P<32?1:P<=255?2:P<=65535?3:5}function G(P){return P<32?1:P<=65535?3:5}function V(P){return W;function W(X,ie){var oe=ie.length,Te=5+oe*3;X.offset=X.reserve(Te);var ce=X.buffer,de=P(oe),ke=X.offset+de;oe=s.write.call(ce,ie,ke);var ye=P(oe);if(de!==ye){var Ke=ke+ye-de,je=ke+oe;s.copy.call(ce,ce,Ke,ke,je)}var Ve=ye===1?160+oe:ye<=3?215+ye:219;v[Ve](X,oe),X.offset+=oe}}function U(P,W){if(W===null)return I(P,W);if(w(W))return k(P,W);if(t(W))return j(P,W);if(n.isUint64BE(W))return z(P,W);if(r.isInt64BE(W))return L(P,W);var X=P.codec.getExtPacker(W);if(X&&(W=X(W)),W instanceof l)return te(P,W);O(P,W)}function A(P,W){if(w(W))return M(P,W);U(P,W)}function I(P,W){var X=192;v[X](P,W)}function j(P,W){var X=W.length,ie=X<16?144+X:X<=65535?220:221;v[ie](P,X);for(var oe=P.codec.encode,Te=0;Te<X;Te++)oe(P,W[Te])}function q(P,W){var X=W.length,ie=X<255?196:X<=65535?197:198;v[ie](P,X),P.send(W)}function K(P,W){q(P,new Uint8Array(W))}function te(P,W){var X=W.buffer,ie=X.length,oe=h[ie]||(ie<255?199:ie<=65535?200:201);v[oe](P,ie),a[W.type](P),P.send(X)}function Y(P,W){var X=Object.keys(W),ie=X.length,oe=ie<16?128+ie:ie<=65535?222:223;v[oe](P,ie);var Te=P.codec.encode;X.forEach(function(ce){Te(P,ce),Te(P,W[ce])})}function H(P,W){if(!(W instanceof Map))return Y(P,W);var X=W.size,ie=X<16?128+X:X<=65535?222:223;v[ie](P,X);var oe=P.codec.encode;W.forEach(function(Te,ce,de){oe(P,ce),oe(P,Te)})}function M(P,W){var X=W.length,ie=X<32?160+X:X<=65535?218:219;v[ie](P,X),P.send(W)}}return fR}var ug={},vq;function tC(){if(vq)return ug;vq=1;var t=S8();ug.createCodec=a,ug.install=r,ug.filter=o;var e=ul();function n(l){if(!(this instanceof n))return new n(l);this.options=l,this.init()}n.prototype.init=function(){var l=this.options;return l&&l.uint8array&&(this.bufferish=e.Uint8Array),this};function r(l){for(var c in l)n.prototype[c]=i(n.prototype[c],l[c])}function i(l,c){return l&&c?d:l||c;function d(){return l.apply(this,arguments),c.apply(this,arguments)}}function s(l){return l=l.slice(),function(d){return l.reduce(c,d)};function c(d,h){return h(d)}}function o(l){return t(l)?s(l):l}function a(l){return new n(l)}return ug.preset=a({preset:!0}),ug}var bq;function N8(){if(bq)return iR;bq=1;var t=T8().ExtBuffer,e=bIe(),n=EIe(),r=tC();r.install({addExtPacker:o,getExtPacker:a,init:s}),iR.preset=s.call(r.preset);function i(l){var c=n.getWriteType(l);return d;function d(h,m){var g=c[typeof m];if(!g)throw new Error('Unsupported type "'+typeof m+'": '+m);g(h,m)}}function s(){var l=this.options;return this.encode=i(l),l&&l.preset&&e.setExtPackers(this),this}function o(l,c,d){d=r.filter(d);var h=c.name;if(h&&h!=="Object"){var m=this.extPackers||(this.extPackers={});m[h]=v}else{var g=this.extEncoderList||(this.extEncoderList=[]);g.unshift([c,v])}function v(x){return d&&(x=d(x)),new t(x,l)}}function a(l){var c=this.extPackers||(this.extPackers={}),d=l.constructor,h=d&&d.name&&c[d.name];if(h)return h;for(var m=this.extEncoderList||(this.extEncoderList=[]),g=m.length,v=0;v<g;v++){var x=m[v];if(d===x[0])return x[1]}}return iR}var _A={},wq;function uoe(){if(wq)return _A;wq=1,_A.FlexDecoder=i,_A.FlexEncoder=s;var t=ul(),e=2048,n=65536,r="BUFFER_SHORTAGE";function i(){if(!(this instanceof i))return new i}function s(){if(!(this instanceof s))return new s}i.mixin=g(o()),i.mixin(i.prototype),s.mixin=g(a()),s.mixin(s.prototype);function o(){return{bufferish:t,write:v,fetch:c,flush:x,push:h,pull:m,read:d,reserve:b,offset:0};function v(w){var k=this.offset?t.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=k?w?this.bufferish.concat([k,w]):k:w,this.offset=0}function x(){for(;this.offset<this.buffer.length;){var w=this.offset,k;try{k=this.fetch()}catch(N){if(N&&N.message!=r)throw N;this.offset=w;break}this.push(k)}}function b(w){var k=this.offset,N=k+w;if(N>this.buffer.length)throw new Error(r);return this.offset=N,k}}function a(){return{bufferish:t,write:l,fetch:v,flush:x,push:h,pull:b,read:d,reserve:w,send:k,maxBufferSize:n,minBufferSize:e,offset:0,start:0};function v(){var N=this.start;if(N<this.offset){var O=this.start=this.offset;return t.prototype.slice.call(this.buffer,N,O)}}function x(){for(;this.start<this.offset;){var N=this.fetch();N&&this.push(N)}}function b(){var N=this.buffers||(this.buffers=[]),O=N.length>1?this.bufferish.concat(N):N[0];return N.length=0,O}function w(N){var O=N|0;if(this.buffer){var D=this.buffer.length,_=this.offset|0,F=_+O;if(F<D)return this.offset=F,_;this.flush(),N=Math.max(N,Math.min(D*2,this.maxBufferSize))}return N=Math.max(N,this.minBufferSize),this.buffer=this.bufferish.alloc(N),this.start=0,this.offset=O,0}function k(N){var O=N.length;if(O>this.minBufferSize)this.flush(),this.push(N);else{var D=this.reserve(O);t.prototype.copy.call(N,this.buffer,D)}}}function l(){throw new Error("method not implemented: write()")}function c(){throw new Error("method not implemented: fetch()")}function d(){var v=this.buffers&&this.buffers.length;return v?(this.flush(),this.pull()):this.fetch()}function h(v){var x=this.buffers||(this.buffers=[]);x.push(v)}function m(){var v=this.buffers||(this.buffers=[]);return v.shift()}function g(v){return x;function x(b){for(var w in v)b[w]=v[w];return b}}return _A}var Eq;function doe(){if(Eq)return rR;Eq=1,rR.EncodeBuffer=n;var t=N8().preset,e=uoe().FlexEncoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.write=function(r){this.codec.encode(this,r)},rR}var Sq;function foe(){if(Sq)return nR;Sq=1,nR.encode=e;var t=doe().EncodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return nR}var mR={},gR={},yR={},xR={},Aq;function SIe(){if(Aq)return xR;Aq=1,xR.setExtUnpackers=i;var t=ul(),e=t.global,n,r={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function i(d){d.addExtUnpacker(14,[s,a(Error)]),d.addExtUnpacker(1,[s,a(EvalError)]),d.addExtUnpacker(2,[s,a(RangeError)]),d.addExtUnpacker(3,[s,a(ReferenceError)]),d.addExtUnpacker(4,[s,a(SyntaxError)]),d.addExtUnpacker(5,[s,a(TypeError)]),d.addExtUnpacker(6,[s,a(URIError)]),d.addExtUnpacker(10,[s,o]),d.addExtUnpacker(11,[s,l(Boolean)]),d.addExtUnpacker(12,[s,l(String)]),d.addExtUnpacker(13,[s,l(Date)]),d.addExtUnpacker(15,[s,l(Number)]),typeof Uint8Array<"u"&&(d.addExtUnpacker(17,l(Int8Array)),d.addExtUnpacker(18,l(Uint8Array)),d.addExtUnpacker(19,[c,l(Int16Array)]),d.addExtUnpacker(20,[c,l(Uint16Array)]),d.addExtUnpacker(21,[c,l(Int32Array)]),d.addExtUnpacker(22,[c,l(Uint32Array)]),d.addExtUnpacker(23,[c,l(Float32Array)]),typeof Float64Array<"u"&&d.addExtUnpacker(24,[c,l(Float64Array)]),typeof Uint8ClampedArray<"u"&&d.addExtUnpacker(25,l(Uint8ClampedArray)),d.addExtUnpacker(26,c),d.addExtUnpacker(29,[c,l(DataView)])),t.hasBuffer&&d.addExtUnpacker(27,l(e))}function s(d){return n||(n=moe().decode),n(d)}function o(d){return RegExp.apply(null,d)}function a(d){return function(h){var m=new d;for(var g in r)m[g]=h[g];return m}}function l(d){return function(h){return new d(h)}}function c(d){return new Uint8Array(d).buffer}return xR}var IA={},Tq;function hoe(){if(Tq)return IA;Tq=1;var t=loe(),e=k8(),n=e.Uint64BE,r=e.Int64BE;IA.getReadFormat=l,IA.readUint8=b;var i=ul(),s=A8(),o=typeof Map<"u",a=!0;function l(U){var A=i.hasArrayBuffer&&U&&U.binarraybuffer,I=U&&U.int64,j=o&&U&&U.usemap,q={map:j?d:c,array:h,str:m,bin:A?v:g,ext:x,uint8:b,uint16:k,uint32:O,uint64:_(8,I?L:F),int8:w,int16:N,int32:D,int64:_(8,I?$:z),float32:_(4,G),float64:_(8,V)};return q}function c(U,A){var I={},j,q=new Array(A),K=new Array(A),te=U.codec.decode;for(j=0;j<A;j++)q[j]=te(U),K[j]=te(U);for(j=0;j<A;j++)I[q[j]]=K[j];return I}function d(U,A){var I=new Map,j,q=new Array(A),K=new Array(A),te=U.codec.decode;for(j=0;j<A;j++)q[j]=te(U),K[j]=te(U);for(j=0;j<A;j++)I.set(q[j],K[j]);return I}function h(U,A){for(var I=new Array(A),j=U.codec.decode,q=0;q<A;q++)I[q]=j(U);return I}function m(U,A){var I=U.reserve(A),j=I+A;return s.toString.call(U.buffer,"utf-8",I,j)}function g(U,A){var I=U.reserve(A),j=I+A,q=s.slice.call(U.buffer,I,j);return i.from(q)}function v(U,A){var I=U.reserve(A),j=I+A,q=s.slice.call(U.buffer,I,j);return i.Uint8Array.from(q).buffer}function x(U,A){var I=U.reserve(A+1),j=U.buffer[I++],q=I+A,K=U.codec.getExtUnpacker(j);if(!K)throw new Error("Invalid ext type: "+(j&&"0x"+j.toString(16)));var te=s.slice.call(U.buffer,I,q);return K(te)}function b(U){var A=U.reserve(1);return U.buffer[A]}function w(U){var A=U.reserve(1),I=U.buffer[A];return I&128?I-256:I}function k(U){var A=U.reserve(2),I=U.buffer;return I[A++]<<8|I[A]}function N(U){var A=U.reserve(2),I=U.buffer,j=I[A++]<<8|I[A];return j&32768?j-65536:j}function O(U){var A=U.reserve(4),I=U.buffer;return I[A++]*16777216+(I[A++]<<16)+(I[A++]<<8)+I[A]}function D(U){var A=U.reserve(4),I=U.buffer;return I[A++]<<24|I[A++]<<16|I[A++]<<8|I[A]}function _(U,A){return function(I){var j=I.reserve(U);return A.call(I.buffer,j,a)}}function F(U){return new n(this,U).toNumber()}function z(U){return new r(this,U).toNumber()}function L(U){return new n(this,U)}function $(U){return new r(this,U)}function G(U){return t.read(this,U,!1,23,4)}function V(U){return t.read(this,U,!1,52,8)}return IA}var vR={},kq;function AIe(){if(kq)return vR;kq=1;var t=hoe();vR.getReadToken=e;function e(a){var l=t.getReadFormat(a);return a&&a.useraw?r(l):n(l)}function n(a){var l,c=new Array(256);for(l=0;l<=127;l++)c[l]=i(l);for(l=128;l<=143;l++)c[l]=o(l-128,a.map);for(l=144;l<=159;l++)c[l]=o(l-144,a.array);for(l=160;l<=191;l++)c[l]=o(l-160,a.str);for(c[192]=i(null),c[193]=null,c[194]=i(!1),c[195]=i(!0),c[196]=s(a.uint8,a.bin),c[197]=s(a.uint16,a.bin),c[198]=s(a.uint32,a.bin),c[199]=s(a.uint8,a.ext),c[200]=s(a.uint16,a.ext),c[201]=s(a.uint32,a.ext),c[202]=a.float32,c[203]=a.float64,c[204]=a.uint8,c[205]=a.uint16,c[206]=a.uint32,c[207]=a.uint64,c[208]=a.int8,c[209]=a.int16,c[210]=a.int32,c[211]=a.int64,c[212]=o(1,a.ext),c[213]=o(2,a.ext),c[214]=o(4,a.ext),c[215]=o(8,a.ext),c[216]=o(16,a.ext),c[217]=s(a.uint8,a.str),c[218]=s(a.uint16,a.str),c[219]=s(a.uint32,a.str),c[220]=s(a.uint16,a.array),c[221]=s(a.uint32,a.array),c[222]=s(a.uint16,a.map),c[223]=s(a.uint32,a.map),l=224;l<=255;l++)c[l]=i(l-256);return c}function r(a){var l,c=n(a).slice();for(c[217]=c[196],c[218]=c[197],c[219]=c[198],l=160;l<=191;l++)c[l]=o(l-160,a.bin);return c}function i(a){return function(){return a}}function s(a,l){return function(c){var d=a(c);return l(c,d)}}function o(a,l){return function(c){return l(c,a)}}return vR}var Nq;function C8(){if(Nq)return yR;Nq=1;var t=T8().ExtBuffer,e=SIe(),n=hoe().readUint8,r=AIe(),i=tC();i.install({addExtUnpacker:a,getExtUnpacker:l,init:o}),yR.preset=o.call(i.preset);function s(c){var d=r.getReadToken(c);return h;function h(m){var g=n(m),v=d[g];if(!v)throw new Error("Invalid type: "+(g&&"0x"+g.toString(16)));return v(m)}}function o(){var c=this.options;return this.decode=s(c),c&&c.preset&&e.setExtUnpackers(this),this}function a(c,d){var h=this.extUnpackers||(this.extUnpackers=[]);h[c]=i.filter(d)}function l(c){var d=this.extUnpackers||(this.extUnpackers=[]);return d[c]||h;function h(m){return new t(m,c)}}return yR}var Cq;function poe(){if(Cq)return gR;Cq=1,gR.DecodeBuffer=n;var t=C8().preset,e=uoe().FlexDecoder;e.mixin(n.prototype);function n(r){if(!(this instanceof n))return new n(r);if(r&&(this.options=r,r.codec)){var i=this.codec=r.codec;i.bufferish&&(this.bufferish=i.bufferish)}}return n.prototype.codec=t,n.prototype.fetch=function(){return this.codec.decode(this)},gR}var Pq;function moe(){if(Pq)return mR;Pq=1,mR.decode=e;var t=poe().DecodeBuffer;function e(n,r){var i=new t(r);return i.write(n),i.read()}return mR}var bR={},wR={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */var _q;function goe(){return _q||(_q=1,(function(t){function e(){if(!(this instanceof e))return new e}(function(n){t.exports=n;var r="listeners",i={on:o,once:a,off:l,emit:c};s(n.prototype),n.mixin=s;function s(h){for(var m in i)h[m]=i[m];return h}function o(h,m){return d(this,h).push(m),this}function a(h,m){var g=this;return v.originalListener=m,d(g,h).push(v),g;function v(){l.call(g,h,v),m.apply(this,arguments)}}function l(h,m){var g=this,v;if(!arguments.length)delete g[r];else if(m){if(v=d(g,h,!0),v){if(v=v.filter(x),!v.length)return l.call(g,h);g[r][h]=v}}else if(v=g[r],v&&(delete v[h],!Object.keys(v).length))return l.call(g);return g;function x(b){return b!==m&&b.originalListener!==m}}function c(h,m){var g=this,v=d(g,h,!0);if(!v)return!1;var x=arguments.length;if(x===1)v.forEach(w);else if(x===2)v.forEach(k);else{var b=Array.prototype.slice.call(arguments,1);v.forEach(N)}return!!v.length;function w(O){O.call(g)}function k(O){O.call(g,m)}function N(O){O.apply(g,b)}}function d(h,m,g){if(!(g&&!h[r])){var v=h[r]||(h[r]={});return v[m]||(v[m]=[])}}})(e)})(wR)),wR.exports}var Iq;function TIe(){if(Iq)return bR;Iq=1,bR.Encoder=n;var t=goe(),e=doe().EncodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.encode=function(r){this.write(r),this.emit("data",this.read())},n.prototype.end=function(r){arguments.length&&this.encode(r),this.flush(),this.emit("end")},bR}var ER={},Rq;function kIe(){if(Rq)return ER;Rq=1,ER.Decoder=n;var t=goe(),e=poe().DecodeBuffer;function n(r){if(!(this instanceof n))return new n(r);e.call(this,r)}return n.prototype=new e,t.mixin(n.prototype),n.prototype.decode=function(r){arguments.length&&this.write(r),this.flush()},n.prototype.push=function(r){this.emit("data",r)},n.prototype.end=function(r){this.decode(r),this.emit("end")},ER}var SR={},Oq;function NIe(){return Oq||(Oq=1,C8(),N8(),SR.createCodec=tC().createCodec),SR}var AR={},Mq;function CIe(){return Mq||(Mq=1,C8(),N8(),AR.codec={preset:tC().preset}),AR}var Lq;function PIe(){return Lq||(Lq=1,Mf.encode=foe().encode,Mf.decode=moe().decode,Mf.Encoder=TIe().Encoder,Mf.Decoder=kIe().Decoder,Mf.createCodec=NIe().createCodec,Mf.codec=CIe().codec),Mf}var _Ie=PIe();const IIe=bs(_Ie),yoe="https://api.hyperliquid-testnet.xyz",RIe=`${yoe}/exchange`,wl=`${yoe}/info`,OIe=!1,jq=1200,TR=60*1e3,Dq=100,kR=3,Bq=2e3,Uq={l2Book:2,allMids:2,clearinghouseState:2,orderStatus:2,spotClearinghouseState:2,exchangeStatus:2,meta:20,metaAndAssetCtxs:20,candleSnapshot:20,userFills:20,openOrders:20,userRole:60,default:20};class MIe{constructor(){this.weightHistory=[],this.requestQueue=Promise.resolve(),this.lastRequestTime=0,this.cache=new Map,this.CACHE_TTL_MS=5e3,this.PRICE_CACHE_TTL_MS=2e3,this.CANDLE_CACHE_TTL_MS=1e4,this.ASSET_CONTEXT_CACHE_TTL_MS=3e4,this.dealerLockActive=!1,this.dealerLockResolver=null,this.waitingForDealerUnlock=Promise.resolve(),this.sharedDataCache=new Map,this.SHARED_CACHE_TTL_MS=15e3,this.universeCache=[],this.lastCacheUpdate=0}acquireDealerLock(){this.dealerLockActive||(this.dealerLockActive=!0,this.waitingForDealerUnlock=new Promise(e=>{this.dealerLockResolver=e}),console.log("[Hyperliquid]  Dealer lock ACQUIRED - other requests will be skipped"))}releaseDealerLock(){this.dealerLockActive&&(this.dealerLockActive=!1,this.dealerLockResolver&&(this.dealerLockResolver(),this.dealerLockResolver=null),this.waitingForDealerUnlock=Promise.resolve(),console.log("[Hyperliquid]  Dealer lock RELEASED - other requests can proceed"))}isDealerActive(){return this.dealerLockActive}getCurrentWeight(){const n=Date.now()-TR;return this.weightHistory=this.weightHistory.filter(r=>r.timestamp>n),this.weightHistory.reduce((r,i)=>r+i.weight,0)}recordWeight(e){this.weightHistory.push({timestamp:Date.now(),weight:e})}calculateWeight(e,n){const r=Uq[e]||Uq.default;return e==="candleSnapshot"&&n?r+Math.ceil(n/60):r}async waitForBudget(e){const n=this.getCurrentWeight(),r=jq-n;if(e<=r)return;const i=Date.now(),s=i-TR,o=[...this.weightHistory].sort((d,h)=>d.timestamp-h.timestamp);let a=e-r,l=i;for(const d of o)if(!(d.timestamp<=s)&&(a-=d.weight,l=d.timestamp+TR,a<=0))break;const c=Math.max(0,l-i);c>0&&(console.log(`[Hyperliquid] Rate budget: ${n}/${jq} used, waiting ${(c/1e3).toFixed(1)}s for budget...`),await new Promise(d=>setTimeout(d,c+100)))}async throttledFetch(e,n,r,i,s="default",o){if(r){const c=this.cache.get(r);if(c&&Date.now()-c.timestamp<(i||this.CACHE_TTL_MS))return new Response(JSON.stringify(c.data),{status:200,headers:{"Content-Type":"application/json"}})}const a=this.calculateWeight(s,o);this.requestQueue=this.requestQueue.then(async()=>{await this.waitForBudget(a);const d=Date.now()-this.lastRequestTime;d<Dq&&await new Promise(h=>setTimeout(h,Dq-d)),this.lastRequestTime=Date.now()}),await this.requestQueue,this.recordWeight(a);let l=null;for(let c=0;c<kR;c++)try{const d=await fetch(e,n);if(d.status===429){const h=parseInt(d.headers.get("Retry-After")||"2",10),m=Math.max(h*1e3,Bq*Math.pow(2,c));console.warn(`[Hyperliquid] Rate limited (429), waiting ${m}ms before retry ${c+1}/${kR}`),await new Promise(g=>setTimeout(g,m));continue}if(d.ok&&r){const h=d.clone();try{const m=await h.json();this.cache.set(r,{data:m,timestamp:Date.now()})}catch{}}return d}catch(d){if(l=d,c<kR-1){const h=Bq*Math.pow(2,c);await new Promise(m=>setTimeout(m,h))}}throw l||new Error("Request failed after retries")}async checkHealth(){try{return await this.getMetadata(),!0}catch(e){return console.error("Hyperliquid Health Check Failed:",e),!1}}createVaultWallet(){const e=Sh.createRandom();return new Sh(e.privateKey)}getWalletFromPrivateKey(e){return new Sh(e)}async getMarketData(e){try{const n=await this.throttledFetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"l2Book",coin:e})},`marketData:${e}`,this.PRICE_CACHE_TTL_MS,"l2Book");if(!n.ok)throw new Error(`Failed to fetch market data: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Market Data Error:",n),n}}async getOrderBookMetrics(e){var n,r,i,s,o,a,l,c;try{const d=await this.getMarketData(e),h=((n=d.levels)==null?void 0:n[0])||[],m=((r=d.levels)==null?void 0:r[1])||[];if(h.length===0||m.length===0)throw new Error(`No order book data for ${e}`);const g=parseFloat(((i=h[0])==null?void 0:i.px)||"0"),v=parseFloat(((s=m[0])==null?void 0:s.px)||"0"),x=(g+v)/2,b=v-g,w=x>0?b/x*100:0,k=5;let N=0,O=0,D=0,_=0;const F=[],z=[];for(let I=0;I<h.length;I++){const j=parseFloat(((o=h[I])==null?void 0:o.px)||"0"),q=parseFloat(((a=h[I])==null?void 0:a.sz)||"0"),K=j*q;I<k&&(N+=K),D+=K,F.push({price:j,volume:K})}for(let I=0;I<m.length;I++){const j=parseFloat(((l=m[I])==null?void 0:l.px)||"0"),q=parseFloat(((c=m[I])==null?void 0:c.sz)||"0"),K=j*q;I<k&&(O+=K),_+=K,z.push({price:j,volume:K})}const L=_>0?D/_:1,$=.2,G=.2;let V,U;for(const{price:I,volume:j}of F)if(D>0&&j/D>$){V=I;break}for(const{price:I,volume:j}of z)if(_>0&&j/_>G){U=I;break}const A={bidAskSpread:parseFloat(w.toFixed(4)),bidAskSpreadUSDC:parseFloat(b.toFixed(4)),imbalanceRatio:parseFloat(L.toFixed(3)),nearBidDepth:parseFloat(N.toFixed(2)),nearAskDepth:parseFloat(O.toFixed(2)),totalBidDepth:parseFloat(D.toFixed(2)),totalAskDepth:parseFloat(_.toFixed(2)),bidWallPrice:V,askWallPrice:U,midPrice:parseFloat(x.toFixed(6)),bestBid:parseFloat(g.toFixed(6)),bestAsk:parseFloat(v.toFixed(6))};return console.log(`[Hyperliquid] OrderBook ${e}: Spread=${A.bidAskSpread}%, Imbalance=${A.imbalanceRatio}, NearDepth(B/A)=${A.nearBidDepth}/${A.nearAskDepth}`),A}catch(d){return console.error(`Hyperliquid OrderBook Metrics Error for ${e}:`,d),{bidAskSpread:0,bidAskSpreadUSDC:0,imbalanceRatio:1,nearBidDepth:0,nearAskDepth:0,totalBidDepth:0,totalAskDepth:0,midPrice:0,bestBid:0,bestAsk:0}}}async getUserState(e){try{const n=await this.throttledFetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"clearinghouseState",user:e})},`userState:${e}`,this.CACHE_TTL_MS,"clearinghouseState");if(!n.ok)throw new Error(`Failed to fetch user state: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid User State Error:",n),n}}async getOpenOrders(e){try{const n=await this.throttledFetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"frontendOpenOrders",user:e})},`frontendOpenOrders:${e}`,this.CACHE_TTL_MS,"openOrders");if(!n.ok)throw new Error(`Failed to fetch open orders: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Hyperliquid Open Orders Error:",n),n}}async getUserFills(e,n=20){try{const r=await this.throttledFetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFills",user:e})},`userFills:${e}`,this.CACHE_TTL_MS,"userFills");if(!r.ok)throw new Error(`Failed to fetch user fills: ${r.statusText}`);const i=await r.json();return Array.isArray(i)?i.slice(0,n):[]}catch(r){return console.error("Hyperliquid User Fills Error:",r),[]}}async getUserLedgerUpdates(e){try{const n=await this.throttledFetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userNonFundingLedgerUpdates",user:e})},`ledgerUpdates:${e}`,this.CACHE_TTL_MS,"default");if(!n.ok)throw new Error(`Failed to fetch ledger updates: ${n.statusText}`);return await n.json()}catch(n){return console.error("Hyperliquid Ledger Updates Error:",n),[]}}async getCandles(e,n="1h",r=100){try{const i=Date.now(),s=this.intervalToMs(n),o=i-s*r,a=await this.throttledFetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"candleSnapshot",req:{coin:e,interval:n,startTime:o}})},`candles:${e}:${n}:${r}`,this.CANDLE_CACHE_TTL_MS,"candleSnapshot",r);if(!a.ok)throw new Error(`Failed to fetch candles: ${a.statusText}`);const l=await a.json();return Array.isArray(l)?l.map(c=>({time:c.t||c.time,open:parseFloat(c.o||c.open),high:parseFloat(c.h||c.high),low:parseFloat(c.l||c.low),close:parseFloat(c.c||c.close),volume:parseFloat(c.v||c.volume||"0")})):l.t&&Array.isArray(l.t)?l.t.map((c,d)=>{var h;return{time:c,open:parseFloat(l.o[d]),high:parseFloat(l.h[d]),low:parseFloat(l.l[d]),close:parseFloat(l.c[d]),volume:parseFloat(((h=l.v)==null?void 0:h[d])||"0")}}):[]}catch(i){return console.error("Hyperliquid Candles Error:",i),[]}}async getCurrentPrice(e){var n,r;try{const i=await this.getMarketData(e),s=parseFloat(((n=i.levels[0][0])==null?void 0:n.px)||"0"),o=parseFloat(((r=i.levels[1][0])==null?void 0:r.px)||"0");return(s+o)/2}catch(i){throw console.error(`Hyperliquid Price Error for ${e}:`,i),i}}intervalToMs(e){return{"1m":6e4,"5m":3e5,"15m":9e5,"1h":36e5,"4h":144e5,"1d":864e5,"1D":864e5}[e]||3600*1e3}async getMetadata(){try{const e=await this.throttledFetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"metadata",6e4,"meta");if(!e.ok)throw new Error(`Failed to fetch metadata: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Hyperliquid Metadata Error:",e),e}}async getAllAvailableAssets(){try{return(await this.getMetadata()).universe.filter(n=>!n.isDelisted).map(n=>n.name)}catch(e){throw console.error("Hyperliquid Get Available Assets Error:",e),e}}async isValidAsset(e){try{return(await this.getAllAvailableAssets()).some(r=>r.toLowerCase()===e.toLowerCase())}catch(n){return console.error("Hyperliquid Asset Validation Error:",n),!0}}async signL1Action(e,n,r,i,s){const o=this.actionHash(n,r,i,s),a=this.constructPhantomAgent(o,OIe),l={name:"Exchange",version:"1",chainId:1337,verifyingContract:"0x0000000000000000000000000000000000000000"},c={Agent:[{name:"source",type:"string"},{name:"connectionId",type:"bytes32"}]},d=await e.signTypedData(l,c,a),h=lo.from(d);return console.log("[Hyperliquid]  Signing Action:"),console.log("  - Domain:",JSON.stringify(l)),console.log("  - Types:",JSON.stringify(c)),console.log("  - Phantom Agent:",JSON.stringify(a)),console.log("  - Signature:",d),{r:h.r,s:h.s,v:h.v}}actionHash(e,n,r,i){let s=IIe.encode(e);const o=un.alloc(8);if(o.writeBigUInt64BE(BigInt(r),0),s=un.concat([s,o]),n===null)s=un.concat([s,un.from([0])]);else{s=un.concat([s,un.from([1])]);const a=un.from(n.replace("0x",""),"hex");s=un.concat([s,a])}if(i!==void 0){s=un.concat([s,un.from([0])]);const a=un.alloc(8);a.writeBigUInt64BE(BigInt(i),0),s=un.concat([s,a])}return Wn(s)}constructPhantomAgent(e,n){return{source:n?"a":"b",connectionId:e}}floatToWire(e){return e===0?"0":e.toFixed(8).replace(/\.?0+$/,"")}async postAction(e,n,r){var l,c;const i=await this.signL1Action(n,e,null,r),s={action:e,nonce:r,signature:i,vaultAddress:null};console.log("[Hyperliquid]  Sending action:",JSON.stringify({action:e,nonce:r},null,2)),console.log("[Hyperliquid]  Payload:",JSON.stringify(s,null,2));const o=await fetch(RIe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok){let d=`HTTP ${o.status}: ${o.statusText}`;try{const h=await o.text();console.error("[Hyperliquid] Error response:",h);try{const m=JSON.parse(h);d=`Exchange API Error (${o.status}): ${JSON.stringify(m)}`}catch{d=`Exchange API Error (${o.status}): ${h}`}}catch(h){console.error("[Hyperliquid] Failed to read error response:",h)}throw new Error(d)}const a=await o.json();if(console.log("[Hyperliquid]  Raw Response:",JSON.stringify(a,null,2)),a.status!=="ok")throw new Error(`Exchange API Error: ${JSON.stringify(a.response||a)}`);if((c=(l=a.response)==null?void 0:l.data)!=null&&c.statuses){const h=a.response.data.statuses.find(m=>m.error);if(h)throw new Error(`Order Failed: ${h.error}`)}return a}async placeOrder(e,n,r,i,s,o){const a=Date.now(),l=await this.getAssetIndex(n),c=(o==null?void 0:o.orderType)||"limit",d=(o==null?void 0:o.reduceOnly)||!1;let h;c==="market"?h={market:{}}:h={limit:{tif:(o==null?void 0:o.tif)||(c==="ioc"?"Ioc":c==="alo"?"Alo":"Gtc")}};let m="0";if(s){const b=await this.getAssetDecimals(n),w=Math.max(0,6-b);let k=parseFloat(s.toFixed(w));k=parseFloat(k.toPrecision(5)),k=parseFloat(k.toFixed(w)),m=this.floatToWire(k),console.log(`[Hyperliquid] Price rounding: ${s} -> ${m} (maxDecimals=${w}, szDecimals=${b})`)}const g={a:l,b:r,p:m,s:this.floatToWire(i),r:d,t:h};o!=null&&o.cloid&&(g.c=o.cloid);const v={type:"order",orders:[g],grouping:"na"},x=await this.postAction(v,e,a);return(o!=null&&o.stopLoss||o!=null&&o.takeProfit)&&await this.placeTpSlOrders(e,n,r,i,o.stopLoss,o.takeProfit,o.cloid),x}async placeTpSlOrders(e,n,r,i,s,o,a){const l=await this.getAssetIndex(n),d=6-await this.getAssetDecimals(n),h=v=>{let x=parseFloat(v.toFixed(d));return x=parseFloat(x.toPrecision(5)),x=parseFloat(x.toFixed(d)),this.floatToWire(x)},m=()=>{const v=new Uint8Array(16);return crypto.getRandomValues(v),"0x"+Array.from(v,x=>x.toString(16).padStart(2,"0")).join("")},g=[];if(s){const v=h(s),x=m();console.log(`[HL TP/SL] SL Price: ${s} -> Rounded: ${v}, cloid: ${x}`),g.push({a:l,b:!r,p:v,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:v,tpsl:"sl"}},c:x})}if(o){const v=h(o),x=m();console.log(`[HL TP/SL] TP Price: ${o} -> Rounded: ${v}, cloid: ${x}`),g.push({a:l,b:!r,p:v,s:this.floatToWire(i),r:!0,t:{trigger:{isMarket:!0,triggerPx:v,tpsl:"tp"}},c:x})}if(g.length>0){const v=Date.now(),x={type:"order",orders:g,grouping:"positionTpsl"};await this.postAction(x,e,v)}}async cancelOrder(e,n,r){const i=Date.now(),s={type:"cancel",cancels:[{a:await this.getAssetIndex(n),o:r}]};return await this.postAction(s,e,i)}async updateLeverage(e,n,r,i){const s=Date.now(),o={type:"updateLeverage",asset:await this.getAssetIndex(n),isCross:i,leverage:r};return await this.postAction(o,e,s)}async updateIsolatedMargin(e,n,r,i){const s=Date.now(),o=Math.floor(i*1e6),a={type:"updateIsolatedMargin",asset:await this.getAssetIndex(n),isBuy:r,ntli:o};return console.log(`[Hyperliquid] Updating Isolated Margin: ${i} USDC -> ntli: ${o} for ${n} (isBuy: ${r})`),await this.postAction(a,e,s)}async closePosition(e,n,r,i="market",s){const a=(await this.getUserState(e.address)).assetPositions.find(g=>g.position.coin===n);if(!a||parseFloat(a.position.szi)===0)throw new Error(`No open position for ${n}`);const l=parseFloat(a.position.szi),c=l<0,d=r||Math.abs(l);let h=i,m=s;if(i==="market"){const g=await this.getMarketData(n),v=parseFloat(g.levels[0][0].px),x=parseFloat(g.levels[1][0].px),b=c?x:v,w=.01;let k=c?b*(1+w):b*(1-w);const O=6-await this.getAssetDecimals(n);let D=parseFloat(k.toFixed(O));D=parseFloat(D.toPrecision(5)),m=parseFloat(D.toFixed(O)),h="ioc",console.log(`[HL Close] Market Close -> Base: ${b}, Price: ${m} `)}return await this.placeOrder(e,n,c,d,m,{orderType:h==="market"?"ioc":h,reduceOnly:!0})}async withdrawUSDC(e,n,r){if(r<=1)throw new Error("Withdrawal amount must be greater than $1 to cover the withdrawal fee");const i=Date.now(),s={type:"usdSend",hyperliquidChain:"Testnet",signatureChainId:"0xa4b1",destination:n,amount:this.floatToWire(r),time:i};return await this.postAction(s,e,i)}async getAssetIndex(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return this.universeCache.indexOf(n)}async getAssetDecimals(e){await this.updateUniverseCache();const n=this.universeCache.find(r=>r.name===e);if(!n)throw new Error(`Asset ${e} not found`);return n.szDecimals}async updateUniverseCache(){const e=Date.now();if(this.universeCache.length>0&&e-this.lastCacheUpdate<300*1e3)return;const r=await(await this.throttledFetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"meta"})},"universeCache",300*1e3)).json();this.universeCache=r.universe,this.lastCacheUpdate=e}async getAssetContexts(){try{const e=await this.throttledFetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"metaAndAssetCtxs"})},"assetContexts",this.ASSET_CONTEXT_CACHE_TTL_MS,"metaAndAssetCtxs");if(!e.ok)throw new Error(`Failed to fetch asset contexts: ${e.statusText}`);const n=await e.json();return Array.isArray(n)&&n.length>1?n[1]:[]}catch(e){return console.error("Hyperliquid Asset Contexts Error:",e),[]}}async getFundingRate(e){try{const n=await this.getAssetContexts();await this.updateUniverseCache();const r=this.universeCache.findIndex(s=>s.name===e);if(r===-1)return null;const i=n[r];return i?{funding:parseFloat(i.funding||"0"),premium:parseFloat(i.premium||"0"),nextFunding:parseFloat(i.funding||"0")}:null}catch(n){return console.error(`Hyperliquid Funding Rate Error for ${e}:`,n),null}}async getUserFees(e){try{const n=await fetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"userFees",user:e})});if(!n.ok)throw new Error(`Failed to fetch user fees: ${n.statusText}`);const r=await n.json();return{makerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userAddRate)||"0.0002"),takerFee:parseFloat((r==null?void 0:r.userCrossRate)||(r==null?void 0:r.userRemoveRate)||"0.0005"),dailyVolume:parseFloat((r==null?void 0:r.dailyUserVlm)||"0"),feeSchedule:(r==null?void 0:r.feeSchedule)||null}}catch(n){return console.error("Hyperliquid User Fees Error:",n),{makerFee:2e-4,takerFee:5e-4,dailyVolume:0,feeSchedule:null}}}async getUserFundingHistory(e,n,r){try{const i=Date.now(),s={type:"userFunding",user:e,startTime:n||i-1440*60*1e3};r&&(s.endTime=r);const o=await fetch(wl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Failed to fetch funding history: ${o.statusText}`);return await o.json()}catch(i){return console.error("Hyperliquid Funding History Error:",i),[]}}calculateBreakevenPrice(e,n,r,i=2e-4,s=5e-4,o=0,a=8){const l=s,c=s,d=a/8,h=Math.abs(o)*d,m=l+c+h,g=e*m,v=r?e+g:e-g,x=.01,b=r?v*(1+x):v*(1-x);return{breakevenPrice:v,minProfitPrice:b,totalCostPercent:m,costBreakdown:{entryFeePercent:l,exitFeePercent:c,fundingCostPercent:h}}}async getUserStateShared(e){const n=`shared:userState:${e}`,r=this.sharedDataCache.get(n);if(r&&Date.now()-r.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userState"),r.data;const i=await this.getUserState(e);return this.sharedDataCache.set(n,{data:i,timestamp:Date.now()}),i}async getUserFillsShared(e,n=20){const r=`shared:userFills:${e}`,i=this.sharedDataCache.get(r);if(i&&Date.now()-i.timestamp<this.SHARED_CACHE_TTL_MS)return console.log("[Hyperliquid]  Using shared cache for userFills"),i.data;const s=await this.getUserFills(e,n);return this.sharedDataCache.set(r,{data:s,timestamp:Date.now()}),s}clearSharedCache(){this.sharedDataCache.clear(),console.log("[Hyperliquid]  Shared cache cleared")}}const qt=new MIe;function yn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Fq(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function uv(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Fq(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Fq(t[i],null)}}}}function Or(...t){return S.useCallback(uv(...t),t)}function LIe(t,e){const n=S.createContext(e),r=s=>{const{children:o,...a}=s,l=S.useMemo(()=>a,Object.values(a));return u.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=S.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function o0(t,e=[]){let n=[];function r(s,o){const a=S.createContext(o),l=n.length;n=[...n,o];const c=h=>{var w;const{scope:m,children:g,...v}=h,x=((w=m==null?void 0:m[t])==null?void 0:w[l])||a,b=S.useMemo(()=>v,Object.values(v));return u.jsx(x.Provider,{value:b,children:g})};c.displayName=s+"Provider";function d(h,m){var x;const g=((x=m==null?void 0:m[t])==null?void 0:x[l])||a,v=S.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,d]}const i=()=>{const s=n.map(o=>S.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,jIe(i,...e)]}function jIe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var a0=ute();const DIe=bs(a0);function BIe(t){const e=UIe(t),n=S.forwardRef((r,i)=>{const{children:s,...o}=r,a=S.Children.toArray(s),l=a.find($Ie);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function UIe(t){const e=S.forwardRef((n,r)=>{const{children:i,...s}=n;if(S.isValidElement(i)){const o=VIe(i),a=zIe(s,i.props);return i.type!==S.Fragment&&(a.ref=r?uv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var FIe=Symbol("radix.slottable");function $Ie(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===FIe}function zIe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function VIe(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var HIe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jn=HIe.reduce((t,e)=>{const n=BIe(`Primitive.${e}`),r=S.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function qIe(t,e){t&&a0.flushSync(()=>t.dispatchEvent(e))}function Rh(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function GIe(t,e=globalThis==null?void 0:globalThis.document){const n=Rh(t);S.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var KIe="DismissableLayer",KM="dismissableLayer.update",WIe="dismissableLayer.pointerDownOutside",YIe="dismissableLayer.focusOutside",$q,xoe=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nC=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=S.useContext(xoe),[d,h]=S.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=S.useState({}),v=Or(e,F=>h(F)),x=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(b),k=d?x.indexOf(d):-1,N=c.layersWithOutsidePointerEventsDisabled.size>0,O=k>=w,D=QIe(F=>{const z=F.target,L=[...c.branches].some($=>$.contains(z));!O||L||(i==null||i(F),o==null||o(F),F.defaultPrevented||a==null||a())},m),_=ZIe(F=>{const z=F.target;[...c.branches].some($=>$.contains(z))||(s==null||s(F),o==null||o(F),F.defaultPrevented||a==null||a())},m);return GIe(F=>{k===c.layers.size-1&&(r==null||r(F),!F.defaultPrevented&&a&&(F.preventDefault(),a()))},m),S.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&($q=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),zq(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=$q)}},[d,m,n,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),zq())},[d,c]),S.useEffect(()=>{const F=()=>g({});return document.addEventListener(KM,F),()=>document.removeEventListener(KM,F)},[]),u.jsx(jn.div,{...l,ref:v,style:{pointerEvents:N?O?"auto":"none":void 0,...t.style},onFocusCapture:yn(t.onFocusCapture,_.onFocusCapture),onBlurCapture:yn(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:yn(t.onPointerDownCapture,D.onPointerDownCapture)})});nC.displayName=KIe;var JIe="DismissableLayerBranch",XIe=S.forwardRef((t,e)=>{const n=S.useContext(xoe),r=S.useRef(null),i=Or(e,r);return S.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),u.jsx(jn.div,{...t,ref:i})});XIe.displayName=JIe;function QIe(t,e=globalThis==null?void 0:globalThis.document){const n=Rh(t),r=S.useRef(!1),i=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){voe(WIe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function ZIe(t,e=globalThis==null?void 0:globalThis.document){const n=Rh(t),r=S.useRef(!1);return S.useEffect(()=>{const i=s=>{s.target&&!r.current&&voe(YIe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function zq(){const t=new CustomEvent(KM);document.dispatchEvent(t)}function voe(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?qIe(i,s):i.dispatchEvent(s)}var Vs=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},eRe=kN[" useId ".trim().toString()]||(()=>{}),tRe=0;function yd(t){const[e,n]=S.useState(eRe());return Vs(()=>{n(r=>r??String(tRe++))},[t]),e?`radix-${e}`:""}const nRe=["top","right","bottom","left"],Oh=Math.min,ia=Math.max,UT=Math.round,RA=Math.floor,Vc=t=>({x:t,y:t}),rRe={left:"right",right:"left",bottom:"top",top:"bottom"},iRe={start:"end",end:"start"};function WM(t,e,n){return ia(t,Oh(e,n))}function Cd(t,e){return typeof t=="function"?t(e):t}function Pd(t){return t.split("-")[0]}function dv(t){return t.split("-")[1]}function P8(t){return t==="x"?"y":"x"}function _8(t){return t==="y"?"height":"width"}const sRe=new Set(["top","bottom"]);function jc(t){return sRe.has(Pd(t))?"y":"x"}function I8(t){return P8(jc(t))}function oRe(t,e,n){n===void 0&&(n=!1);const r=dv(t),i=I8(t),s=_8(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=FT(o)),[o,FT(o)]}function aRe(t){const e=FT(t);return[YM(t),e,YM(e)]}function YM(t){return t.replace(/start|end/g,e=>iRe[e])}const Vq=["left","right"],Hq=["right","left"],lRe=["top","bottom"],cRe=["bottom","top"];function uRe(t,e,n){switch(t){case"top":case"bottom":return n?e?Hq:Vq:e?Vq:Hq;case"left":case"right":return e?lRe:cRe;default:return[]}}function dRe(t,e,n,r){const i=dv(t);let s=uRe(Pd(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(YM)))),s}function FT(t){return t.replace(/left|right|bottom|top/g,e=>rRe[e])}function fRe(t){return{top:0,right:0,bottom:0,left:0,...t}}function boe(t){return typeof t!="number"?fRe(t):{top:t,right:t,bottom:t,left:t}}function $T(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function qq(t,e,n){let{reference:r,floating:i}=t;const s=jc(e),o=I8(e),a=_8(o),l=Pd(e),c=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-i.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-i.width,y:h};break;default:g={x:r.x,y:r.y}}switch(dv(e)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const hRe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=qq(c,r,l),m=r,g={},v=0;for(let x=0;x<a.length;x++){const{name:b,fn:w}=a[x],{x:k,y:N,data:O,reset:D}=await w({x:d,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});d=k??d,h=N??h,g={...g,[b]:{...g[b],...O}},D&&v<=50&&(v++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(c=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:d,y:h}=qq(c,m,l)),x=-1)}return{x:d,y:h,placement:m,strategy:i,middlewareData:g}};async function iw(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Cd(e,t),v=boe(g),b=a[m?h==="floating"?"reference":"floating":h],w=$T(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(b)))==null||n?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),k=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,N=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),O=await(s.isElement==null?void 0:s.isElement(N))?await(s.getScale==null?void 0:s.getScale(N))||{x:1,y:1}:{x:1,y:1},D=$T(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:k,offsetParent:N,strategy:l}):k);return{top:(w.top-D.top+v.top)/O.y,bottom:(D.bottom-w.bottom+v.bottom)/O.y,left:(w.left-D.left+v.left)/O.x,right:(D.right-w.right+v.right)/O.x}}const pRe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Cd(t,e)||{};if(c==null)return{};const h=boe(d),m={x:n,y:r},g=I8(i),v=_8(g),x=await o.getDimensions(c),b=g==="y",w=b?"top":"left",k=b?"bottom":"right",N=b?"clientHeight":"clientWidth",O=s.reference[v]+s.reference[g]-m[g]-s.floating[v],D=m[g]-s.reference[g],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let F=_?_[N]:0;(!F||!await(o.isElement==null?void 0:o.isElement(_)))&&(F=a.floating[N]||s.floating[v]);const z=O/2-D/2,L=F/2-x[v]/2-1,$=Oh(h[w],L),G=Oh(h[k],L),V=$,U=F-x[v]-G,A=F/2-x[v]/2+z,I=WM(V,A,U),j=!l.arrow&&dv(i)!=null&&A!==I&&s.reference[v]/2-(A<V?$:G)-x[v]/2<0,q=j?A<V?A-V:A-U:0;return{[g]:m[g]+q,data:{[g]:I,centerOffset:A-I-q,...j&&{alignmentOffset:q}},reset:j}}}),mRe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...b}=Cd(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const w=Pd(i),k=jc(a),N=Pd(a)===a,O=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=m||(N||!x?[FT(a)]:aRe(a)),_=v!=="none";!m&&_&&D.push(...dRe(a,x,v,O));const F=[a,...D],z=await iw(e,b),L=[];let $=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&L.push(z[w]),h){const A=oRe(i,o,O);L.push(z[A[0]],z[A[1]])}if($=[...$,{placement:i,overflows:L}],!L.every(A=>A<=0)){var G,V;const A=(((G=s.flip)==null?void 0:G.index)||0)+1,I=F[A];if(I&&(!(h==="alignment"?k!==jc(I):!1)||$.every(K=>jc(K.placement)===k?K.overflows[0]>0:!0)))return{data:{index:A,overflows:$},reset:{placement:I}};let j=(V=$.filter(q=>q.overflows[0]<=0).sort((q,K)=>q.overflows[1]-K.overflows[1])[0])==null?void 0:V.placement;if(!j)switch(g){case"bestFit":{var U;const q=(U=$.filter(K=>{if(_){const te=jc(K.placement);return te===k||te==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(te=>te>0).reduce((te,Y)=>te+Y,0)]).sort((K,te)=>K[1]-te[1])[0])==null?void 0:U[0];q&&(j=q);break}case"initialPlacement":j=a;break}if(i!==j)return{reset:{placement:j}}}return{}}}};function Gq(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Kq(t){return nRe.some(e=>t[e]>=0)}const gRe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Cd(t,e);switch(r){case"referenceHidden":{const s=await iw(e,{...i,elementContext:"reference"}),o=Gq(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Kq(o)}}}case"escaped":{const s=await iw(e,{...i,altBoundary:!0}),o=Gq(s,n.floating);return{data:{escapedOffsets:o,escaped:Kq(o)}}}default:return{}}}}},woe=new Set(["left","top"]);async function yRe(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Pd(n),a=dv(n),l=jc(n)==="y",c=woe.has(o)?-1:1,d=s&&l?-1:1,h=Cd(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*d,y:m*c}:{x:m*c,y:g*d}}const xRe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await yRe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},vRe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:w,y:k}=b;return{x:w,y:k}}},...l}=Cd(t,e),c={x:n,y:r},d=await iw(e,l),h=jc(Pd(i)),m=P8(h);let g=c[m],v=c[h];if(s){const b=m==="y"?"top":"left",w=m==="y"?"bottom":"right",k=g+d[b],N=g-d[w];g=WM(k,g,N)}if(o){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",k=v+d[b],N=v-d[w];v=WM(k,v,N)}const x=a.fn({...e,[m]:g,[h]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[m]:s,[h]:o}}}}}},bRe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Cd(t,e),d={x:n,y:r},h=jc(i),m=P8(h);let g=d[m],v=d[h];const x=Cd(a,e),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const N=m==="y"?"height":"width",O=s.reference[m]-s.floating[N]+b.mainAxis,D=s.reference[m]+s.reference[N]-b.mainAxis;g<O?g=O:g>D&&(g=D)}if(c){var w,k;const N=m==="y"?"width":"height",O=woe.has(Pd(i)),D=s.reference[h]-s.floating[N]+(O&&((w=o.offset)==null?void 0:w[h])||0)+(O?0:b.crossAxis),_=s.reference[h]+s.reference[N]+(O?0:((k=o.offset)==null?void 0:k[h])||0)-(O?b.crossAxis:0);v<D?v=D:v>_&&(v=_)}return{[m]:g,[h]:v}}}},wRe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Cd(t,e),d=await iw(e,c),h=Pd(i),m=dv(i),g=jc(i)==="y",{width:v,height:x}=s.floating;let b,w;h==="top"||h==="bottom"?(b=h,w=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=h,b=m==="end"?"top":"bottom");const k=x-d.top-d.bottom,N=v-d.left-d.right,O=Oh(x-d[b],k),D=Oh(v-d[w],N),_=!e.middlewareData.shift;let F=O,z=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(z=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(F=k),_&&!m){const $=ia(d.left,0),G=ia(d.right,0),V=ia(d.top,0),U=ia(d.bottom,0);g?z=v-2*($!==0||G!==0?$+G:ia(d.left,d.right)):F=x-2*(V!==0||U!==0?V+U:ia(d.top,d.bottom))}await l({...e,availableWidth:z,availableHeight:F});const L=await o.getDimensions(a.floating);return v!==L.width||x!==L.height?{reset:{rects:!0}}:{}}}};function rC(){return typeof window<"u"}function fv(t){return Eoe(t)?(t.nodeName||"").toLowerCase():"#document"}function ca(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function nu(t){var e;return(e=(Eoe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Eoe(t){return rC()?t instanceof Node||t instanceof ca(t).Node:!1}function Ql(t){return rC()?t instanceof Element||t instanceof ca(t).Element:!1}function Yc(t){return rC()?t instanceof HTMLElement||t instanceof ca(t).HTMLElement:!1}function Wq(t){return!rC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ca(t).ShadowRoot}const ERe=new Set(["inline","contents"]);function dE(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Zl(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!ERe.has(i)}const SRe=new Set(["table","td","th"]);function ARe(t){return SRe.has(fv(t))}const TRe=[":popover-open",":modal"];function iC(t){return TRe.some(e=>{try{return t.matches(e)}catch{return!1}})}const kRe=["transform","translate","scale","rotate","perspective"],NRe=["transform","translate","scale","rotate","perspective","filter"],CRe=["paint","layout","strict","content"];function R8(t){const e=O8(),n=Ql(t)?Zl(t):t;return kRe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||NRe.some(r=>(n.willChange||"").includes(r))||CRe.some(r=>(n.contain||"").includes(r))}function PRe(t){let e=Mh(t);for(;Yc(e)&&!Mx(e);){if(R8(e))return e;if(iC(e))return null;e=Mh(e)}return null}function O8(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _Re=new Set(["html","body","#document"]);function Mx(t){return _Re.has(fv(t))}function Zl(t){return ca(t).getComputedStyle(t)}function sC(t){return Ql(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Mh(t){if(fv(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Wq(t)&&t.host||nu(t);return Wq(e)?e.host:e}function Soe(t){const e=Mh(t);return Mx(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yc(e)&&dE(e)?e:Soe(e)}function sw(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Soe(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ca(i);if(s){const a=JM(o);return e.concat(o,o.visualViewport||[],dE(i)?i:[],a&&n?sw(a):[])}return e.concat(i,sw(i,[],n))}function JM(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Aoe(t){const e=Zl(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Yc(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=UT(n)!==s||UT(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function M8(t){return Ql(t)?t:t.contextElement}function gy(t){const e=M8(t);if(!Yc(e))return Vc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=Aoe(e);let o=(s?UT(n.width):n.width)/r,a=(s?UT(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const IRe=Vc(0);function Toe(t){const e=ca(t);return!O8()||!e.visualViewport?IRe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function RRe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ca(t)?!1:e}function $m(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=M8(t);let o=Vc(1);e&&(r?Ql(r)&&(o=gy(r)):o=gy(t));const a=RRe(s,n,r)?Toe(s):Vc(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const m=ca(s),g=r&&Ql(r)?ca(r):r;let v=m,x=JM(v);for(;x&&r&&g!==v;){const b=gy(x),w=x.getBoundingClientRect(),k=Zl(x),N=w.left+(x.clientLeft+parseFloat(k.paddingLeft))*b.x,O=w.top+(x.clientTop+parseFloat(k.paddingTop))*b.y;l*=b.x,c*=b.y,d*=b.x,h*=b.y,l+=N,c+=O,v=ca(x),x=JM(v)}}return $T({width:d,height:h,x:l,y:c})}function oC(t,e){const n=sC(t).scrollLeft;return e?e.left+n:$m(nu(t)).left+n}function koe(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-oC(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function ORe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=nu(r),a=e?iC(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Vc(1);const d=Vc(0),h=Yc(r);if((h||!h&&!s)&&((fv(r)!=="body"||dE(o))&&(l=sC(r)),Yc(r))){const g=$m(r);c=gy(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=o&&!h&&!s?koe(o,l):Vc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+m.x,y:n.y*c.y-l.scrollTop*c.y+d.y+m.y}}function MRe(t){return Array.from(t.getClientRects())}function LRe(t){const e=nu(t),n=sC(t),r=t.ownerDocument.body,i=ia(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ia(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+oC(t);const a=-n.scrollTop;return Zl(r).direction==="rtl"&&(o+=ia(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const Yq=25;function jRe(t,e){const n=ca(t),r=nu(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const d=O8();(!d||d&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=oC(r);if(c<=0){const d=r.ownerDocument,h=d.body,m=getComputedStyle(h),g=d.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,v=Math.abs(r.clientWidth-h.clientWidth-g);v<=Yq&&(s-=v)}else c<=Yq&&(s+=c);return{width:s,height:o,x:a,y:l}}const DRe=new Set(["absolute","fixed"]);function BRe(t,e){const n=$m(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Yc(t)?gy(t):Vc(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Jq(t,e,n){let r;if(e==="viewport")r=jRe(t,n);else if(e==="document")r=LRe(nu(t));else if(Ql(e))r=BRe(e,n);else{const i=Toe(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return $T(r)}function Noe(t,e){const n=Mh(t);return n===e||!Ql(n)||Mx(n)?!1:Zl(n).position==="fixed"||Noe(n,e)}function URe(t,e){const n=e.get(t);if(n)return n;let r=sw(t,[],!1).filter(a=>Ql(a)&&fv(a)!=="body"),i=null;const s=Zl(t).position==="fixed";let o=s?Mh(t):t;for(;Ql(o)&&!Mx(o);){const a=Zl(o),l=R8(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&DRe.has(i.position)||dE(o)&&!l&&Noe(t,o))?r=r.filter(d=>d!==o):i=a,o=Mh(o)}return e.set(t,r),r}function FRe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?iC(e)?[]:URe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=Jq(e,d,i);return c.top=ia(h.top,c.top),c.right=Oh(h.right,c.right),c.bottom=Oh(h.bottom,c.bottom),c.left=ia(h.left,c.left),c},Jq(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function $Re(t){const{width:e,height:n}=Aoe(t);return{width:e,height:n}}function zRe(t,e,n){const r=Yc(e),i=nu(e),s=n==="fixed",o=$m(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Vc(0);function c(){l.x=oC(i)}if(r||!r&&!s)if((fv(e)!=="body"||dE(i))&&(a=sC(e)),r){const g=$m(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();s&&!r&&i&&c();const d=i&&!r&&!s?koe(i,a):Vc(0),h=o.left+a.scrollLeft-l.x-d.x,m=o.top+a.scrollTop-l.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function NR(t){return Zl(t).position==="static"}function Xq(t,e){if(!Yc(t)||Zl(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return nu(t)===n&&(n=n.ownerDocument.body),n}function Coe(t,e){const n=ca(t);if(iC(t))return n;if(!Yc(t)){let i=Mh(t);for(;i&&!Mx(i);){if(Ql(i)&&!NR(i))return i;i=Mh(i)}return n}let r=Xq(t,e);for(;r&&ARe(r)&&NR(r);)r=Xq(r,e);return r&&Mx(r)&&NR(r)&&!R8(r)?n:r||PRe(t)||n}const VRe=async function(t){const e=this.getOffsetParent||Coe,n=this.getDimensions,r=await n(t.floating);return{reference:zRe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function HRe(t){return Zl(t).direction==="rtl"}const qRe={convertOffsetParentRelativeRectToViewportRelativeRect:ORe,getDocumentElement:nu,getClippingRect:FRe,getOffsetParent:Coe,getElementRects:VRe,getClientRects:MRe,getDimensions:$Re,getScale:gy,isElement:Ql,isRTL:HRe};function Poe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function GRe(t,e){let n=null,r;const i=nu(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:d,top:h,width:m,height:g}=c;if(a||e(),!m||!g)return;const v=RA(h),x=RA(i.clientWidth-(d+m)),b=RA(i.clientHeight-(h+g)),w=RA(d),N={rootMargin:-v+"px "+-x+"px "+-b+"px "+-w+"px",threshold:ia(0,Oh(1,l))||1};let O=!0;function D(_){const F=_[0].intersectionRatio;if(F!==l){if(!O)return o();F?o(!1,F):r=setTimeout(()=>{o(!1,1e-7)},1e3)}F===1&&!Poe(c,t.getBoundingClientRect())&&o(),O=!1}try{n=new IntersectionObserver(D,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,N)}n.observe(t)}return o(!0),s}function KRe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=M8(t),d=i||s?[...c?sw(c):[],...sw(e)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),s&&w.addEventListener("resize",n)});const h=c&&a?GRe(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(w=>{let[k]=w;k&&k.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var N;(N=g)==null||N.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let v,x=l?$m(t):null;l&&b();function b(){const w=$m(t);x&&!Poe(x,w)&&n(),x=w,v=requestAnimationFrame(b)}return n(),()=>{var w;d.forEach(k=>{i&&k.removeEventListener("scroll",n),s&&k.removeEventListener("resize",n)}),h==null||h(),(w=g)==null||w.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const WRe=xRe,YRe=vRe,JRe=mRe,XRe=wRe,QRe=gRe,Qq=pRe,ZRe=bRe,e3e=(t,e,n)=>{const r=new Map,i={platform:qRe,...n},s={...i.platform,_c:r};return hRe(t,e,{...i,platform:s})};var t3e=typeof document<"u",n3e=function(){},K2=t3e?S.useLayoutEffect:n3e;function zT(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!zT(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!zT(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function _oe(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Zq(t,e){const n=_oe(t);return Math.round(e*n)/n}function CR(t){const e=S.useRef(t);return K2(()=>{e.current=t}),e}function r3e(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=S.useState(r);zT(m,r)||g(r);const[v,x]=S.useState(null),[b,w]=S.useState(null),k=S.useCallback(K=>{K!==_.current&&(_.current=K,x(K))},[]),N=S.useCallback(K=>{K!==F.current&&(F.current=K,w(K))},[]),O=s||v,D=o||b,_=S.useRef(null),F=S.useRef(null),z=S.useRef(d),L=l!=null,$=CR(l),G=CR(i),V=CR(c),U=S.useCallback(()=>{if(!_.current||!F.current)return;const K={placement:e,strategy:n,middleware:m};G.current&&(K.platform=G.current),e3e(_.current,F.current,K).then(te=>{const Y={...te,isPositioned:V.current!==!1};A.current&&!zT(z.current,Y)&&(z.current=Y,a0.flushSync(()=>{h(Y)}))})},[m,e,n,G,V]);K2(()=>{c===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[c]);const A=S.useRef(!1);K2(()=>(A.current=!0,()=>{A.current=!1}),[]),K2(()=>{if(O&&(_.current=O),D&&(F.current=D),O&&D){if($.current)return $.current(O,D,U);U()}},[O,D,U,$,L]);const I=S.useMemo(()=>({reference:_,floating:F,setReference:k,setFloating:N}),[k,N]),j=S.useMemo(()=>({reference:O,floating:D}),[O,D]),q=S.useMemo(()=>{const K={position:n,left:0,top:0};if(!j.floating)return K;const te=Zq(j.floating,d.x),Y=Zq(j.floating,d.y);return a?{...K,transform:"translate("+te+"px, "+Y+"px)",..._oe(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:Y}},[n,a,j.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:U,refs:I,elements:j,floatingStyles:q}),[d,U,I,j,q])}const i3e=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Qq({element:r.current,padding:i}).fn(n):{}:r?Qq({element:r,padding:i}).fn(n):{}}}},s3e=(t,e)=>({...WRe(t),options:[t,e]}),o3e=(t,e)=>({...YRe(t),options:[t,e]}),a3e=(t,e)=>({...ZRe(t),options:[t,e]}),l3e=(t,e)=>({...JRe(t),options:[t,e]}),c3e=(t,e)=>({...XRe(t),options:[t,e]}),u3e=(t,e)=>({...QRe(t),options:[t,e]}),d3e=(t,e)=>({...i3e(t),options:[t,e]});var f3e="Arrow",Ioe=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return u.jsx(jn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ioe.displayName=f3e;var h3e=Ioe;function p3e(t){const[e,n]=S.useState(void 0);return Vs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var L8="Popper",[Roe,aC]=o0(L8),[m3e,Ooe]=Roe(L8),Moe=t=>{const{__scopePopper:e,children:n}=t,[r,i]=S.useState(null);return u.jsx(m3e,{scope:e,anchor:r,onAnchorChange:i,children:n})};Moe.displayName=L8;var Loe="PopperAnchor",joe=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=Ooe(Loe,n),o=S.useRef(null),a=Or(e,o),l=S.useRef(null);return S.useEffect(()=>{const c=l.current;l.current=(r==null?void 0:r.current)||o.current,c!==l.current&&s.onAnchorChange(l.current)}),r?null:u.jsx(jn.div,{...i,ref:a})});joe.displayName=Loe;var j8="PopperContent",[g3e,y3e]=Roe(j8),Doe=S.forwardRef((t,e)=>{var oe,Te,ce,de,ke,ye;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...x}=t,b=Ooe(j8,n),[w,k]=S.useState(null),N=Or(e,Ke=>k(Ke)),[O,D]=S.useState(null),_=p3e(O),F=(_==null?void 0:_.width)??0,z=(_==null?void 0:_.height)??0,L=r+(s!=="center"?"-"+s:""),$=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},G=Array.isArray(c)?c:[c],V=G.length>0,U={padding:$,boundary:G.filter(v3e),altBoundary:V},{refs:A,floatingStyles:I,placement:j,isPositioned:q,middlewareData:K}=r3e({strategy:"fixed",placement:L,whileElementsMounted:(...Ke)=>KRe(...Ke,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[s3e({mainAxis:i+z,alignmentAxis:o}),l&&o3e({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?a3e():void 0,...U}),l&&l3e({...U}),c3e({...U,apply:({elements:Ke,rects:je,availableWidth:Ve,availableHeight:me})=>{const{width:Ne,height:We}=je.reference,Qe=Ke.floating.style;Qe.setProperty("--radix-popper-available-width",`${Ve}px`),Qe.setProperty("--radix-popper-available-height",`${me}px`),Qe.setProperty("--radix-popper-anchor-width",`${Ne}px`),Qe.setProperty("--radix-popper-anchor-height",`${We}px`)}}),O&&d3e({element:O,padding:a}),b3e({arrowWidth:F,arrowHeight:z}),m&&u3e({strategy:"referenceHidden",...U})]}),[te,Y]=Foe(j),H=Rh(v);Vs(()=>{q&&(H==null||H())},[q,H]);const M=(oe=K.arrow)==null?void 0:oe.x,P=(Te=K.arrow)==null?void 0:Te.y,W=((ce=K.arrow)==null?void 0:ce.centerOffset)!==0,[X,ie]=S.useState();return Vs(()=>{w&&ie(window.getComputedStyle(w).zIndex)},[w]),u.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:q?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(de=K.transformOrigin)==null?void 0:de.x,(ke=K.transformOrigin)==null?void 0:ke.y].join(" "),...((ye=K.hide)==null?void 0:ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:u.jsx(g3e,{scope:n,placedSide:te,onArrowChange:D,arrowX:M,arrowY:P,shouldHideArrow:W,children:u.jsx(jn.div,{"data-side":te,"data-align":Y,...x,ref:N,style:{...x.style,animation:q?void 0:"none"}})})})});Doe.displayName=j8;var Boe="PopperArrow",x3e={top:"bottom",right:"left",bottom:"top",left:"right"},Uoe=S.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=y3e(Boe,r),o=x3e[s.placedSide];return u.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:u.jsx(h3e,{...i,ref:n,style:{...i.style,display:"block"}})})});Uoe.displayName=Boe;function v3e(t){return t!==null}var b3e=t=>({name:"transformOrigin",options:t,fn(e){var b,w,k;const{placement:n,rects:r,middlewareData:i}=e,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=Foe(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((w=i.arrow)==null?void 0:w.x)??0)+a/2,g=(((k=i.arrow)==null?void 0:k.y)??0)+l/2;let v="",x="";return c==="bottom"?(v=o?h:`${m}px`,x=`${-l}px`):c==="top"?(v=o?h:`${m}px`,x=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,x=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+l}px`,x=o?h:`${g}px`),{data:{x:v,y:x}}}});function Foe(t){const[e,n="center"]=t.split("-");return[e,n]}var $oe=Moe,zoe=joe,Voe=Doe,Hoe=Uoe,w3e="Portal",lC=S.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=S.useState(!1);Vs(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?DIe.createPortal(u.jsx(jn.div,{...r,ref:e}),o):null});lC.displayName=w3e;function E3e(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var l0=t=>{const{present:e,children:n}=t,r=S3e(e),i=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),s=Or(r.ref,A3e(i));return typeof n=="function"||r.isPresent?S.cloneElement(i,{ref:s}):null};l0.displayName="Presence";function S3e(t){const[e,n]=S.useState(),r=S.useRef(null),i=S.useRef(t),s=S.useRef("none"),o=t?"mounted":"unmounted",[a,l]=E3e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=OA(r.current);s.current=a==="mounted"?c:"none"},[a]),Vs(()=>{const c=r.current,d=i.current;if(d!==t){const m=s.current,g=OA(c);t?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Vs(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=g=>{const x=OA(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&x&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=g=>{g.target===e&&(s.current=OA(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function OA(t){return(t==null?void 0:t.animationName)||"none"}function A3e(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var T3e=Symbol("radix.slottable");function k3e(t){const e=({children:n})=>u.jsx(u.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=T3e,e}var N3e=kN[" useInsertionEffect ".trim().toString()]||Vs;function Lx({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=C3e({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const d=S.useRef(t!==void 0);S.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=S.useCallback(d=>{var h;if(a){const m=P3e(d)?d(t):d;m!==t&&((h=o.current)==null||h.call(o,m))}else s(d)},[a,t,s,o]);return[l,c]}function C3e({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),i=S.useRef(n),s=S.useRef(e);return N3e(()=>{s.current=e},[e]),S.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function P3e(t){return typeof t=="function"}var qoe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_3e="VisuallyHidden",Goe=S.forwardRef((t,e)=>u.jsx(jn.span,{...t,ref:e,style:{...qoe,...t.style}}));Goe.displayName=_3e;var I3e=Goe,[cC]=o0("Tooltip",[aC]),uC=aC(),Koe="TooltipProvider",R3e=700,XM="tooltip.open",[O3e,D8]=cC(Koe),Woe=t=>{const{__scopeTooltip:e,delayDuration:n=R3e,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),u.jsx(O3e,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};Woe.displayName=Koe;var ow="Tooltip",[M3e,fE]=cC(ow),Yoe=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,l=D8(ow,t.__scopeTooltip),c=uC(e),[d,h]=S.useState(null),m=yd(),g=S.useRef(0),v=o??l.disableHoverableContent,x=a??l.delayDuration,b=S.useRef(!1),[w,k]=Lx({prop:r,defaultProp:i??!1,onChange:F=>{F?(l.onOpen(),document.dispatchEvent(new CustomEvent(XM))):l.onClose(),s==null||s(F)},caller:ow}),N=S.useMemo(()=>w?b.current?"delayed-open":"instant-open":"closed",[w]),O=S.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,k(!0)},[k]),D=S.useCallback(()=>{window.clearTimeout(g.current),g.current=0,k(!1)},[k]),_=S.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,k(!0),g.current=0},x)},[x,k]);return S.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),u.jsx($oe,{...c,children:u.jsx(M3e,{scope:e,contentId:m,open:w,stateAttribute:N,trigger:d,onTriggerChange:h,onTriggerEnter:S.useCallback(()=>{l.isOpenDelayedRef.current?_():O()},[l.isOpenDelayedRef,_,O]),onTriggerLeave:S.useCallback(()=>{v?D():(window.clearTimeout(g.current),g.current=0)},[D,v]),onOpen:O,onClose:D,disableHoverableContent:v,children:n})})};Yoe.displayName=ow;var QM="TooltipTrigger",Joe=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=fE(QM,n),s=D8(QM,n),o=uC(n),a=S.useRef(null),l=Or(e,a,i.onTriggerChange),c=S.useRef(!1),d=S.useRef(!1),h=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),u.jsx(zoe,{asChild:!0,...o,children:u.jsx(jn.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:yn(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:yn(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:yn(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:yn(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:yn(t.onBlur,i.onClose),onClick:yn(t.onClick,i.onClose)})})});Joe.displayName=QM;var B8="TooltipPortal",[L3e,j3e]=cC(B8,{forceMount:void 0}),Xoe=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=fE(B8,e);return u.jsx(L3e,{scope:e,forceMount:n,children:u.jsx(l0,{present:n||s.open,children:u.jsx(lC,{asChild:!0,container:i,children:r})})})};Xoe.displayName=B8;var jx="TooltipContent",Qoe=S.forwardRef((t,e)=>{const n=j3e(jx,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=fE(jx,t.__scopeTooltip);return u.jsx(l0,{present:r||o.open,children:o.disableHoverableContent?u.jsx(Zoe,{side:i,...s,ref:e}):u.jsx(D3e,{side:i,...s,ref:e})})}),D3e=S.forwardRef((t,e)=>{const n=fE(jx,t.__scopeTooltip),r=D8(jx,t.__scopeTooltip),i=S.useRef(null),s=Or(e,i),[o,a]=S.useState(null),{trigger:l,onClose:c}=n,d=i.current,{onPointerInTransitChange:h}=r,m=S.useCallback(()=>{a(null),h(!1)},[h]),g=S.useCallback((v,x)=>{const b=v.currentTarget,w={x:v.clientX,y:v.clientY},k=z3e(w,b.getBoundingClientRect()),N=V3e(w,k),O=H3e(x.getBoundingClientRect()),D=G3e([...N,...O]);a(D),h(!0)},[h]);return S.useEffect(()=>()=>m(),[m]),S.useEffect(()=>{if(l&&d){const v=b=>g(b,d),x=b=>g(b,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",x)}}},[l,d,g,m]),S.useEffect(()=>{if(o){const v=x=>{const b=x.target,w={x:x.clientX,y:x.clientY},k=(l==null?void 0:l.contains(b))||(d==null?void 0:d.contains(b)),N=!q3e(w,o);k?m():N&&(m(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,o,c,m]),u.jsx(Zoe,{...t,ref:s})}),[B3e,U3e]=cC(ow,{isInside:!1}),F3e=k3e("TooltipContent"),Zoe=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=fE(jx,n),c=uC(n),{onClose:d}=l;return S.useEffect(()=>(document.addEventListener(XM,d),()=>document.removeEventListener(XM,d)),[d]),S.useEffect(()=>{if(l.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),u.jsx(nC,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:u.jsxs(Voe,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(F3e,{children:r}),u.jsx(B3e,{scope:n,isInside:!0,children:u.jsx(I3e,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Qoe.displayName=jx;var eae="TooltipArrow",$3e=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=uC(n);return U3e(eae,n).isInside?null:u.jsx(Hoe,{...i,...r,ref:e})});$3e.displayName=eae;function z3e(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function V3e(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function H3e(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function q3e(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,d=a.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-c)*(r-d)/(m-d)+c&&(i=!i)}return i}function G3e(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),K3e(e)}function K3e(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var W3e=Woe,Y3e=Yoe,J3e=Joe,X3e=Xoe,tae=Qoe;function nae(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=nae(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Mn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=nae(t))&&(r&&(r+=" "),r+=e);return r}const Q3e=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},Z3e=(t,e)=>({classGroupId:t,validator:e}),rae=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),VT="-",eG=[],e4e="arbitrary..",t4e=t=>{const e=r4e(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return n4e(o);const a=o.split(VT),l=a[0]===""&&a.length>1?1:0;return iae(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],c=n[o];return l?c?Q3e(c,l):l:c||eG}return n[o]||eG}}},iae=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const c=iae(t,e+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=e===0?t.join(VT):t.slice(e).join(VT),l=o.length;for(let c=0;c<l;c++){const d=o[c];if(d.validator(a))return d.classGroupId}},n4e=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?e4e+r:void 0})(),r4e=t=>{const{theme:e,classGroups:n}=t;return i4e(n,e)},i4e=(t,e)=>{const n=rae();for(const r in t){const i=t[r];U8(i,n,r,e)}return n},U8=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const o=t[s];s4e(o,e,n,r)}},s4e=(t,e,n,r)=>{if(typeof t=="string"){o4e(t,e,n);return}if(typeof t=="function"){a4e(t,e,n,r);return}l4e(t,e,n,r)},o4e=(t,e,n)=>{const r=t===""?e:sae(e,t);r.classGroupId=n},a4e=(t,e,n,r)=>{if(c4e(t)){U8(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(Z3e(n,t))},l4e=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];U8(l,sae(e,a),n,r)}},sae=(t,e)=>{let n=t;const r=e.split(VT),i=r.length;for(let s=0;s<i;s++){const o=r[s];let a=n.nextPart.get(o);a||(a=rae(),n.nextPart.set(o,a)),n=a}return n},c4e=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,u4e=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,o)=>{n[s]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=r[s])!==void 0)return i(s,o),o},set(s,o){s in n?n[s]=o:i(s,o)}}},ZM="!",tG=":",d4e=[],nG=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),f4e=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;const d=i.length;for(let x=0;x<d;x++){const b=i[x];if(o===0&&a===0){if(b===tG){s.push(i.slice(l,x)),l=x+1;continue}if(b==="/"){c=x;continue}}b==="["?o++:b==="]"?o--:b==="("?a++:b===")"&&a--}const h=s.length===0?i:i.slice(l);let m=h,g=!1;h.endsWith(ZM)?(m=h.slice(0,-1),g=!0):h.startsWith(ZM)&&(m=h.slice(1),g=!0);const v=c&&c>l?c-l:void 0;return nG(s,g,m,v)};if(e){const i=e+tG,s=r;r=o=>o.startsWith(i)?s(o.slice(i.length)):nG(d4e,!1,o,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},h4e=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=e.has(o);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},p4e=t=>({cache:u4e(t.cacheSize),parseClassName:f4e(t),sortModifiers:h4e(t),...t4e(t)}),m4e=/\s+/,g4e=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(m4e);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let b=!!x,w=r(b?v.substring(0,x):v);if(!w){if(!b){l=d+(l.length>0?" "+l:l);continue}if(w=r(v),!w){l=d+(l.length>0?" "+l:l);continue}b=!1}const k=m.length===0?"":m.length===1?m[0]:s(m).join(":"),N=g?k+ZM:k,O=N+w;if(o.indexOf(O)>-1)continue;o.push(O);const D=i(w,b);for(let _=0;_<D.length;++_){const F=D[_];o.push(N+F)}l=d+(l.length>0?" "+l:l)}return l},y4e=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=oae(n))&&(i&&(i+=" "),i+=r);return i},oae=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=oae(t[r]))&&(n&&(n+=" "),n+=e);return n},x4e=(t,...e)=>{let n,r,i,s;const o=l=>{const c=e.reduce((d,h)=>h(d),t());return n=p4e(c),r=n.cache.get,i=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const d=g4e(l,n);return i(l,d),d};return s=o,(...l)=>s(y4e(...l))},v4e=[],Ni=t=>{const e=n=>n[t]||v4e;return e.isThemeGetter=!0,e},aae=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,lae=/^\((?:(\w[\w-]*):)?(.+)\)$/i,b4e=/^\d+\/\d+$/,w4e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E4e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S4e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,A4e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T4e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,dg=t=>b4e.test(t),xn=t=>!!t&&!Number.isNaN(Number(t)),Lf=t=>!!t&&Number.isInteger(Number(t)),PR=t=>t.endsWith("%")&&xn(t.slice(0,-1)),Ru=t=>w4e.test(t),k4e=()=>!0,N4e=t=>E4e.test(t)&&!S4e.test(t),cae=()=>!1,C4e=t=>A4e.test(t),P4e=t=>T4e.test(t),_4e=t=>!Dt(t)&&!Bt(t),I4e=t=>hv(t,fae,cae),Dt=t=>aae.test(t),bp=t=>hv(t,hae,N4e),_R=t=>hv(t,j4e,xn),rG=t=>hv(t,uae,cae),R4e=t=>hv(t,dae,P4e),MA=t=>hv(t,pae,C4e),Bt=t=>lae.test(t),Ob=t=>pv(t,hae),O4e=t=>pv(t,D4e),iG=t=>pv(t,uae),M4e=t=>pv(t,fae),L4e=t=>pv(t,dae),LA=t=>pv(t,pae,!0),hv=(t,e,n)=>{const r=aae.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},pv=(t,e,n=!1)=>{const r=lae.exec(t);return r?r[1]?e(r[1]):n:!1},uae=t=>t==="position"||t==="percentage",dae=t=>t==="image"||t==="url",fae=t=>t==="length"||t==="size"||t==="bg-size",hae=t=>t==="length",j4e=t=>t==="number",D4e=t=>t==="family-name",pae=t=>t==="shadow",B4e=()=>{const t=Ni("color"),e=Ni("font"),n=Ni("text"),r=Ni("font-weight"),i=Ni("tracking"),s=Ni("leading"),o=Ni("breakpoint"),a=Ni("container"),l=Ni("spacing"),c=Ni("radius"),d=Ni("shadow"),h=Ni("inset-shadow"),m=Ni("text-shadow"),g=Ni("drop-shadow"),v=Ni("blur"),x=Ni("perspective"),b=Ni("aspect"),w=Ni("ease"),k=Ni("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...O(),Bt,Dt],_=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],z=()=>[Bt,Dt,l],L=()=>[dg,"full","auto",...z()],$=()=>[Lf,"none","subgrid",Bt,Dt],G=()=>["auto",{span:["full",Lf,Bt,Dt]},Lf,Bt,Dt],V=()=>[Lf,"auto",Bt,Dt],U=()=>["auto","min","max","fr",Bt,Dt],A=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],I=()=>["start","end","center","stretch","center-safe","end-safe"],j=()=>["auto",...z()],q=()=>[dg,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],K=()=>[t,Bt,Dt],te=()=>[...O(),iG,rG,{position:[Bt,Dt]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",M4e,I4e,{size:[Bt,Dt]}],M=()=>[PR,Ob,bp],P=()=>["","none","full",c,Bt,Dt],W=()=>["",xn,Ob,bp],X=()=>["solid","dashed","dotted","double"],ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>[xn,PR,iG,rG],Te=()=>["","none",v,Bt,Dt],ce=()=>["none",xn,Bt,Dt],de=()=>["none",xn,Bt,Dt],ke=()=>[xn,Bt,Dt],ye=()=>[dg,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ru],breakpoint:[Ru],color:[k4e],container:[Ru],"drop-shadow":[Ru],ease:["in","out","in-out"],font:[_4e],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ru],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ru],shadow:[Ru],spacing:["px",xn],text:[Ru],"text-shadow":[Ru],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",dg,Dt,Bt,b]}],container:["container"],columns:[{columns:[xn,Dt,Bt,a]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[Lf,"auto",Bt,Dt]}],basis:[{basis:[dg,"full","auto",a,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[xn,dg,"auto","initial","none",Dt]}],grow:[{grow:["",xn,Bt,Dt]}],shrink:[{shrink:["",xn,Bt,Dt]}],order:[{order:[Lf,"first","last","none",Bt,Dt]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":U()}],"auto-rows":[{"auto-rows":U()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...A(),"normal"]}],"justify-items":[{"justify-items":[...I(),"normal"]}],"justify-self":[{"justify-self":["auto",...I()]}],"align-content":[{content:["normal",...A()]}],"align-items":[{items:[...I(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...I(),{baseline:["","last"]}]}],"place-content":[{"place-content":A()}],"place-items":[{"place-items":[...I(),"baseline"]}],"place-self":[{"place-self":["auto",...I()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:j()}],mx:[{mx:j()}],my:[{my:j()}],ms:[{ms:j()}],me:[{me:j()}],mt:[{mt:j()}],mr:[{mr:j()}],mb:[{mb:j()}],ml:[{ml:j()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[a,"screen",...q()]}],"min-w":[{"min-w":[a,"screen","none",...q()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",n,Ob,bp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Bt,_R]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",PR,Dt]}],"font-family":[{font:[O4e,Dt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Bt,Dt]}],"line-clamp":[{"line-clamp":[xn,"none",Bt,_R]}],leading:[{leading:[s,...z()]}],"list-image":[{"list-image":["none",Bt,Dt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Bt,Dt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[xn,"from-font","auto",Bt,bp]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[xn,"auto",Bt,Dt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Bt,Dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Bt,Dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Lf,Bt,Dt],radial:["",Bt,Dt],conic:[Lf,Bt,Dt]},L4e,R4e]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:M()}],"gradient-via-pos":[{via:M()}],"gradient-to-pos":[{to:M()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:W()}],"border-w-x":[{"border-x":W()}],"border-w-y":[{"border-y":W()}],"border-w-s":[{"border-s":W()}],"border-w-e":[{"border-e":W()}],"border-w-t":[{"border-t":W()}],"border-w-r":[{"border-r":W()}],"border-w-b":[{"border-b":W()}],"border-w-l":[{"border-l":W()}],"divide-x":[{"divide-x":W()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":W()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[xn,Bt,Dt]}],"outline-w":[{outline:["",xn,Ob,bp]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",d,LA,MA]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",h,LA,MA]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[xn,bp]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":W()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",m,LA,MA]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[xn,Bt,Dt]}],"mix-blend":[{"mix-blend":[...ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[xn]}],"mask-image-linear-from-pos":[{"mask-linear-from":oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":oe()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":oe()}],"mask-image-t-to-pos":[{"mask-t-to":oe()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":oe()}],"mask-image-r-to-pos":[{"mask-r-to":oe()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":oe()}],"mask-image-b-to-pos":[{"mask-b-to":oe()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":oe()}],"mask-image-l-to-pos":[{"mask-l-to":oe()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":oe()}],"mask-image-x-to-pos":[{"mask-x-to":oe()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":oe()}],"mask-image-y-to-pos":[{"mask-y-to":oe()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[Bt,Dt]}],"mask-image-radial-from-pos":[{"mask-radial-from":oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":oe()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":O()}],"mask-image-conic-pos":[{"mask-conic":[xn]}],"mask-image-conic-from-pos":[{"mask-conic-from":oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":oe()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Bt,Dt]}],filter:[{filter:["","none",Bt,Dt]}],blur:[{blur:Te()}],brightness:[{brightness:[xn,Bt,Dt]}],contrast:[{contrast:[xn,Bt,Dt]}],"drop-shadow":[{"drop-shadow":["","none",g,LA,MA]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",xn,Bt,Dt]}],"hue-rotate":[{"hue-rotate":[xn,Bt,Dt]}],invert:[{invert:["",xn,Bt,Dt]}],saturate:[{saturate:[xn,Bt,Dt]}],sepia:[{sepia:["",xn,Bt,Dt]}],"backdrop-filter":[{"backdrop-filter":["","none",Bt,Dt]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[xn,Bt,Dt]}],"backdrop-contrast":[{"backdrop-contrast":[xn,Bt,Dt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",xn,Bt,Dt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[xn,Bt,Dt]}],"backdrop-invert":[{"backdrop-invert":["",xn,Bt,Dt]}],"backdrop-opacity":[{"backdrop-opacity":[xn,Bt,Dt]}],"backdrop-saturate":[{"backdrop-saturate":[xn,Bt,Dt]}],"backdrop-sepia":[{"backdrop-sepia":["",xn,Bt,Dt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Bt,Dt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[xn,"initial",Bt,Dt]}],ease:[{ease:["linear","initial",w,Bt,Dt]}],delay:[{delay:[xn,Bt,Dt]}],animate:[{animate:["none",k,Bt,Dt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,Bt,Dt]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:ce()}],"rotate-x":[{"rotate-x":ce()}],"rotate-y":[{"rotate-y":ce()}],"rotate-z":[{"rotate-z":ce()}],scale:[{scale:de()}],"scale-x":[{"scale-x":de()}],"scale-y":[{"scale-y":de()}],"scale-z":[{"scale-z":de()}],"scale-3d":["scale-3d"],skew:[{skew:ke()}],"skew-x":[{"skew-x":ke()}],"skew-y":[{"skew-y":ke()}],transform:[{transform:[Bt,Dt,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ye()}],"translate-x":[{"translate-x":ye()}],"translate-y":[{"translate-y":ye()}],"translate-z":[{"translate-z":ye()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Bt,Dt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Bt,Dt]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[xn,Ob,bp,_R]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},U4e=x4e(B4e);function dt(...t){return U4e(Mn(t))}const mae=W3e,dC=Y3e,fC=J3e,hE=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>u.jsx(X3e,{children:u.jsx(tae,{ref:r,sideOffset:e,className:dt("z-50 overflow-hidden rounded-md bg-slate-800 border border-slate-700 px-3 py-1.5 text-xs text-slate-200 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));hE.displayName=tae.displayName;const fg=({icon:t,label:e,isActive:n,onClick:r,isSubItem:i=!1,infoTooltip:s})=>u.jsxs("div",{className:"relative flex items-center group",children:[u.jsxs("button",{onClick:r,className:dt("w-full flex items-center gap-3 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden",i?"px-3 py-2 pl-6":"px-3 py-2.5",n?"text-white bg-[#1a1b21]/80 backdrop-blur-sm":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40",s&&"pr-8"),title:e,children:[n&&u.jsx("div",{className:dt("absolute top-1/2 -translate-y-1/2 w-1 rounded-full bg-[#E7FE55]",i?"left-0 h-4":"left-0 h-6")}),u.jsx("span",{className:dt("flex items-center justify-center transition-colors",!i&&"ml-1",n&&"text-[#E7FE55]"),children:t}),u.jsx("span",{className:"tracking-wide",children:e})]}),s&&u.jsxs(dC,{children:[u.jsx(fC,{asChild:!0,children:u.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#4a4b53] hover:text-[#E7FE55] transition-all duration-200 cursor-help hover:scale-110 opacity-0 group-hover:opacity-100",children:u.jsx(nv,{size:14,strokeWidth:2})})}),u.jsx(hE,{side:"right",className:"max-w-[250px] text-xs leading-relaxed bg-[#1a1b21] border-[#2a2b30] text-[#a0a1a8]",children:s})]})]}),F4e=({icon:t,label:e,isExpanded:n,onToggle:r,hasActiveChild:i,children:s,infoTooltip:o})=>u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"relative flex items-center group",children:[u.jsxs("button",{onClick:r,className:dt("w-full flex items-center justify-between px-3 py-2.5 text-[13px] font-medium transition-all duration-200 rounded-xl relative overflow-hidden","text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]/40",o&&"pr-12"),title:e,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:dt("flex items-center justify-center transition-colors ml-1"),children:t}),u.jsx("span",{className:"tracking-wide",children:e})]}),u.jsx(gt.span,{initial:!1,animate:{rotate:n?180:0},transition:{duration:.2},className:"text-[#5a5b63]",children:u.jsx(Oo,{size:14})})]}),o&&u.jsxs(dC,{children:[u.jsx(fC,{asChild:!0,children:u.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#4a4b53] hover:text-[#E7FE55] transition-all duration-200 cursor-help hover:scale-110 opacity-0 group-hover:opacity-100",children:u.jsx(nv,{size:14,strokeWidth:2})})}),u.jsx(hE,{side:"right",className:"max-w-[250px] text-xs leading-relaxed bg-[#1a1b21] border-[#2a2b30] text-[#a0a1a8]",children:o})]})]}),u.jsx(Ei,{initial:!1,children:n&&u.jsx(gt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:u.jsx("div",{className:"relative ml-1 pl-2 border-l border-[#2a2b30]",children:s})})})]}),$4e=({icon:t,label:e,isExpanded:n,onToggle:r,onNavigate:i,isActive:s,hasActiveChild:o,children:a,infoTooltip:l})=>u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"relative flex items-center group",children:[u.jsxs("div",{className:dt("w-full flex items-center transition-all duration-200 rounded-xl relative overflow-hidden",s?"bg-[#1a1b21]/80 backdrop-blur-sm":"hover:bg-[#1a1b21]/40"),children:[u.jsxs("button",{onClick:i,className:dt("flex items-center gap-3 pl-3 pr-3 py-2.5 text-[13px] font-medium whitespace-nowrap",s?"text-white":"text-[#747580] hover:text-[#a0a1a8]"),title:e,children:[s&&u.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 left-0 w-1 h-6 rounded-full bg-[#E7FE55]"}),u.jsx("span",{className:dt("flex items-center justify-center transition-colors ml-1",s&&"text-[#E7FE55]"),children:t}),u.jsx("span",{className:"tracking-wide truncate",children:e})]}),u.jsx("button",{onClick:r,className:dt("p-2.5 pl-0 flex items-center justify-center transition-colors z-10","text-[#5a5b63] hover:text-[#a0a1a8]",l?"mr-9":"mr-0"),children:u.jsx(gt.span,{initial:!1,animate:{rotate:n?180:0},transition:{duration:.2},children:u.jsx(Oo,{size:14})})})]}),l&&u.jsxs(dC,{children:[u.jsx(fC,{asChild:!0,children:u.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#4a4b53] hover:text-[#E7FE55] transition-all duration-200 cursor-help hover:scale-110 opacity-0 group-hover:opacity-100 z-50",children:u.jsx(nv,{size:14,strokeWidth:2})})}),u.jsx(hE,{side:"right",className:"max-w-[250px] text-xs leading-relaxed bg-[#1a1b21] border-[#2a2b30] text-[#a0a1a8]",children:l})]})]}),u.jsx(Ei,{initial:!1,children:n&&u.jsx(gt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:u.jsx("div",{className:"relative ml-1 pl-2 border-l border-[#2a2b30]",children:a})})})]}),sG=({status:t,label:e,latency:n,network:r})=>{const i=t==="Down",s=t==="Checking",o=i?"#ef4444":s?"#747580":"#E7FE55";return u.jsxs("div",{className:"flex items-center justify-between py-0.5",children:[u.jsx("span",{className:"text-[9px] uppercase tracking-[0.05em] text-[#5a5b63]",children:e}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"text-[9px] font-mono text-[#5a5b63]",children:i?"DOWN":s?"...":n}),u.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:o}})]})]})},z4e=({activeTab:t,setActiveTab:e,isVaultUnlocked:n,onSelectConversation:r,onNewChat:i,currentConversationId:s,password:o,isOpen:a=!1,onClose:l})=>{const[c,d]=S.useState("Checking"),h=[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t),m=[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t),g=[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t),v=h||m||g,[x,b]=S.useState(v),[w,k]=S.useState(t===be.AGENT||t===be.DASHBOARD),N=t===be.AGENT||t===be.DASHBOARD;S.useEffect(()=>{v&&b(!0)},[v]),S.useEffect(()=>{N&&k(!0)},[N]),S.useEffect(()=>{const D=async()=>{const F=await qt.checkHealth();d(F?"Online":"Down")};D();const _=setInterval(D,3e4);return()=>clearInterval(_)},[]);const O=D=>{e(D),l&&l()};return u.jsxs(mae,{delayDuration:300,children:[u.jsx(Ei,{children:a&&u.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-40 xl:hidden",onClick:l})}),u.jsxs("aside",{className:dt("m-3 p-5 flex flex-col fixed h-[calc(100%-24px)] bg-[#0f1015]/95 backdrop-blur-xl z-50 w-60 transform transition-transform duration-300 ease-in-out","rounded-2xl border border-[#232328]/60 shadow-2xl shadow-black/20",a?"translate-x-0":"-translate-x-full","xl:translate-x-0"),children:[u.jsxs("div",{className:"mb-8 flex items-center gap-3 px-2",children:[u.jsx("div",{className:"w-8 h-8 flex-shrink-0 bg-[#E7FE55] rounded flex items-center justify-center",children:u.jsx(Kc,{className:"text-black w-5 h-5"})}),u.jsx("h1",{className:"text-[15px] font-semibold text-white tracking-tight hidden xl:block",children:"AutonomousVault"})]}),u.jsxs("nav",{className:"space-y-1 flex-1",children:[u.jsx($4e,{icon:u.jsx(yre,{size:18}),label:"Vault Operator",isExpanded:w,onToggle:D=>{D.stopPropagation(),k(!w)},onNavigate:()=>{O(be.AGENT),k(!w)},isActive:t===be.AGENT,hasActiveChild:t===be.DASHBOARD,infoTooltip:"Manual control and oversight of your vault. Visit Overview for metrics or chat directly with the Operator.",children:u.jsx(fg,{icon:u.jsx(Si,{size:16}),label:"Overview",isActive:t===be.DASHBOARD,onClick:()=>O(be.DASHBOARD),isSubItem:!0})}),u.jsxs(F4e,{icon:u.jsx(fTe,{size:18}),label:"Vault Dealer",isExpanded:x,onToggle:()=>b(!x),hasActiveChild:v,infoTooltip:"Autonomous trading agent. Operates continuously within your predefined strategy and risk limits.",children:[u.jsx(fg,{icon:u.jsx(_I,{size:16}),label:"Hyperliquid",isActive:h,onClick:()=>O(be.VAULT_DEALER),isSubItem:!0}),u.jsx(fg,{icon:u.jsx(_I,{size:16}),label:"Solana",isActive:g,onClick:()=>O(be.SOLANA_DEALER),isSubItem:!0}),u.jsx(fg,{icon:u.jsx(_I,{size:16}),label:"Polymarket",isActive:m,onClick:()=>O(be.POLYMARKET_DEALER),isSubItem:!0})]}),u.jsx(fg,{icon:u.jsx(XTe,{size:18}),label:"Vault",isActive:t===be.VAULT,onClick:()=>O(be.VAULT)}),u.jsx(fg,{icon:u.jsx(vT,{size:18}),label:"Token Costs",isActive:t===be.TOKEN_COSTS,onClick:()=>O(be.TOKEN_COSTS)})]}),u.jsxs("div",{className:"pt-6 border-t border-[#232328]",children:[u.jsx("div",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-3 px-2",children:"Network Status"}),u.jsxs("div",{className:"space-y-2 px-2",children:[u.jsx(sG,{status:"Online",label:"Solana Devnet",latency:"18m",network:"solana"}),u.jsx(sG,{status:c,label:"Hyperliquid Testnet",latency:"450ms",network:"hyperliquid"})]})]})]})]})};var V4e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function F8(t){if(typeof t!="string")return!1;var e=V4e;return e.includes(t)}var H4e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],q4e=new Set(H4e);function gae(t){return typeof t!="string"?!1:q4e.has(t)}function yae(t){return typeof t=="string"&&t.startsWith("data-")}function co(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(gae(n)||yae(n))&&(e[n]=t[n]);return e}function zm(t){if(t==null)return null;if(S.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return co(e)}return typeof t=="object"&&!Array.isArray(t)?co(t):null}function Hs(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(gae(n)||yae(n)||F8(n))&&(e[n]=t[n]);return e}function G4e(t){return t==null?null:S.isValidElement(t)?Hs(t.props):typeof t=="object"&&!Array.isArray(t)?Hs(t):null}var K4e=["children","width","height","viewBox","className","style","title","desc"];function eL(){return eL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eL.apply(null,arguments)}function W4e(t,e){if(t==null)return{};var n,r,i=Y4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Y4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xae=S.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:a,title:l,desc:c}=t,d=W4e(t,K4e),h=s||{width:r,height:i,x:0,y:0},m=Mn("recharts-surface",o);return S.createElement("svg",eL({},Hs(d),{className:m,width:r,height:i,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),S.createElement("title",null,l),S.createElement("desc",null,c),n)}),J4e=["children","className"];function tL(){return tL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tL.apply(null,arguments)}function X4e(t,e){if(t==null)return{};var n,r,i=Q4e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Q4e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ei=S.forwardRef((t,e)=>{var{children:n,className:r}=t,i=X4e(t,J4e),s=Mn("recharts-layer",r);return S.createElement("g",tL({className:s},Hs(i),{ref:e}),n)}),Z4e=S.createContext(null);function yr(t){return function(){return t}}const vae=Math.cos,HT=Math.sin,ic=Math.sqrt,qT=Math.PI,hC=2*qT,nL=Math.PI,rL=2*nL,Cp=1e-6,eOe=rL-Cp;function bae(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function tOe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return bae;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class nOe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?bae:tOe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,c=i-n,d=o-e,h=a-n,m=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>Cp)if(!(Math.abs(h*l-c*d)>Cp)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,v=i-a,x=l*l+c*c,b=g*g+v*v,w=Math.sqrt(x),k=Math.sqrt(m),N=s*Math.tan((nL-Math.acos((x+m-b)/(2*w*k)))/2),O=N/k,D=N/w;Math.abs(O-1)>Cp&&this._append`L${e+O*d},${n+O*h}`,this._append`A${s},${s},0,0,${+(h*g>d*v)},${this._x1=e+D*l},${this._y1=n+D*c}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,d=n+l,h=1^o,m=o?i-s:s-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Cp||Math.abs(this._y1-d)>Cp)&&this._append`L${c},${d}`,r&&(m<0&&(m=m%rL+rL),m>eOe?this._append`A${r},${r},0,1,${h},${e-a},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=d}`:m>Cp&&this._append`A${r},${r},0,${+(m>=nL)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function $8(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new nOe(e)}function z8(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function wae(t){this._context=t}wae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function pC(t){return new wae(t)}function Eae(t){return t[0]}function Sae(t){return t[1]}function Aae(t,e){var n=yr(!0),r=null,i=pC,s=null,o=$8(a);t=typeof t=="function"?t:t===void 0?Eae:yr(t),e=typeof e=="function"?e:e===void 0?Sae:yr(e);function a(l){var c,d=(l=z8(l)).length,h,m=!1,g;for(r==null&&(s=i(g=o())),c=0;c<=d;++c)!(c<d&&n(h=l[c],c,l))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(h,c,l),+e(h,c,l));if(g)return s=null,g+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:yr(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:yr(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:yr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function jA(t,e,n){var r=null,i=yr(!0),s=null,o=pC,a=null,l=$8(c);t=typeof t=="function"?t:t===void 0?Eae:yr(+t),e=typeof e=="function"?e:yr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Sae:yr(+n);function c(h){var m,g,v,x=(h=z8(h)).length,b,w=!1,k,N=new Array(x),O=new Array(x);for(s==null&&(a=o(k=l())),m=0;m<=x;++m){if(!(m<x&&i(b=h[m],m,h))===w)if(w=!w)g=m,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),v=m-1;v>=g;--v)a.point(N[v],O[v]);a.lineEnd(),a.areaEnd()}w&&(N[m]=+t(b,m,h),O[m]=+e(b,m,h),a.point(r?+r(b,m,h):N[m],n?+n(b,m,h):O[m]))}if(k)return a=null,k+""||null}function d(){return Aae().defined(i).curve(o).context(s)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:yr(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:yr(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:yr(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:yr(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:yr(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:yr(+h),c):n},c.lineX0=c.lineY0=function(){return d().x(t).y(e)},c.lineY1=function(){return d().x(t).y(n)},c.lineX1=function(){return d().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:yr(!!h),c):i},c.curve=function(h){return arguments.length?(o=h,s!=null&&(a=o(s)),c):o},c.context=function(h){return arguments.length?(h==null?s=a=null:a=o(s=h),c):s},c}class Tae{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function rOe(t){return new Tae(t,!0)}function iOe(t){return new Tae(t,!1)}const V8={draw(t,e){const n=ic(e/qT);t.moveTo(n,0),t.arc(0,0,n,0,hC)}},sOe={draw(t,e){const n=ic(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},kae=ic(1/3),oOe=kae*2,aOe={draw(t,e){const n=ic(e/oOe),r=n*kae;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},lOe={draw(t,e){const n=ic(e),r=-n/2;t.rect(r,r,n,n)}},cOe=.8908130915292852,Nae=HT(qT/10)/HT(7*qT/10),uOe=HT(hC/10)*Nae,dOe=-vae(hC/10)*Nae,fOe={draw(t,e){const n=ic(e*cOe),r=uOe*n,i=dOe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const o=hC*s/5,a=vae(o),l=HT(o);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},IR=ic(3),hOe={draw(t,e){const n=-ic(e/(IR*3));t.moveTo(0,n*2),t.lineTo(-IR*n,-n),t.lineTo(IR*n,-n),t.closePath()}},Ra=-.5,Oa=ic(3)/2,iL=1/ic(12),pOe=(iL/2+1)*3,mOe={draw(t,e){const n=ic(e/pOe),r=n/2,i=n*iL,s=r,o=n*iL+n,a=-s,l=o;t.moveTo(r,i),t.lineTo(s,o),t.lineTo(a,l),t.lineTo(Ra*r-Oa*i,Oa*r+Ra*i),t.lineTo(Ra*s-Oa*o,Oa*s+Ra*o),t.lineTo(Ra*a-Oa*l,Oa*a+Ra*l),t.lineTo(Ra*r+Oa*i,Ra*i-Oa*r),t.lineTo(Ra*s+Oa*o,Ra*o-Oa*s),t.lineTo(Ra*a+Oa*l,Ra*l-Oa*a),t.closePath()}};function gOe(t,e){let n=null,r=$8(i);t=typeof t=="function"?t:yr(t||V8),e=typeof e=="function"?e:yr(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:yr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:yr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function GT(){}function KT(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Cae(t){this._context=t}Cae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:KT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:KT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function yOe(t){return new Cae(t)}function Pae(t){this._context=t}Pae.prototype={areaStart:GT,areaEnd:GT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:KT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xOe(t){return new Pae(t)}function _ae(t){this._context=t}_ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:KT(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vOe(t){return new _ae(t)}function Iae(t){this._context=t}Iae.prototype={areaStart:GT,areaEnd:GT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function bOe(t){return new Iae(t)}function oG(t){return t<0?-1:1}function aG(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(oG(s)+oG(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function lG(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function RR(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function WT(t){this._context=t}WT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:RR(this,this._t0,lG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,RR(this,lG(this,n=aG(this,t,e)),n);break;default:RR(this,this._t0,n=aG(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Rae(t){this._context=new Oae(t)}(Rae.prototype=Object.create(WT.prototype)).point=function(t,e){WT.prototype.point.call(this,e,t)};function Oae(t){this._context=t}Oae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function wOe(t){return new WT(t)}function EOe(t){return new Rae(t)}function Mae(t){this._context=t}Mae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=cG(t),i=cG(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function cG(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function SOe(t){return new Mae(t)}function mC(t,e){this._context=t,this._t=e}mC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function AOe(t){return new mC(t,.5)}function TOe(t){return new mC(t,0)}function kOe(t){return new mC(t,1)}function Vm(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function sL(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function NOe(t,e){return t[e]}function COe(t){const e=[];return e.key=t,e}function POe(){var t=yr([]),e=sL,n=Vm,r=NOe;function i(s){var o=Array.from(t.apply(this,arguments),COe),a,l=o.length,c=-1,d;for(const h of s)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(h,o[a].key,c,s)]).data=h;for(a=0,d=z8(e(o));a<l;++a)o[d[a]].index=a;return n(o,d),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:yr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:yr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?sL:typeof s=="function"?s:yr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Vm,i):n},i}function _Oe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Vm(t,e)}}function IOe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Vm(t,e)}}function ROe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var d=t[e[a]],h=d[r][1]||0,m=d[r-1][1]||0,g=(h-m)/2,v=0;v<a;++v){var x=t[e[v]],b=x[r][1]||0,w=x[r-1][1]||0;g+=b-w}l+=h,c+=g*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Vm(t,e)}}var OR={},MR={},uG;function OOe(){return uG||(uG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(MR)),MR}var LR={},dG;function Lae(){return dG||(dG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(LR)),LR}var jR={},fG;function H8(){return fG||(fG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(jR)),jR}var DR={},BR={},hG;function MOe(){return hG||(hG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(BR)),BR}var pG;function q8(){return pG||(pG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MOe(),n=H8();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let a=0,l="",c="",d=!1;for(i.charCodeAt(0)===46&&(s.push(""),a++);a<o;){const h=i[a];c?h==="\\"&&a+1<o?(a++,l+=i[a]):h===c?c="":l+=h:d?h==='"'||h==="'"?c=h:h==="]"?(d=!1,s.push(l),l=""):l+=h:h==="["?(d=!0,l&&(s.push(l),l="")):h==="."?l&&(s.push(l),l=""):l+=h,a++}return l&&s.push(l),s}t.toPath=r})(DR)),DR}var mG;function G8(){return mG||(mG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OOe(),n=Lae(),r=H8(),i=q8();function s(a,l,c){if(a==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const d=a[l];return d===void 0?n.isDeepKey(l)?s(a,i.toPath(l),c):c:d}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const d=a[l];return d===void 0?c:d}default:{if(Array.isArray(l))return o(a,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const d=a[l];return d===void 0?c:d}}}function o(a,l,c){if(l.length===0)return c;let d=a;for(let h=0;h<l.length;h++){if(d==null||e.isUnsafeProperty(l[h]))return c;d=d[l[h]]}return d===void 0?c:d}t.get=s})(OR)),OR}var UR,gG;function LOe(){return gG||(gG=1,UR=G8().get),UR}var jOe=LOe();const Hm=bs(jOe);var DOe=4;function bh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DOe,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Jr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,s,o)=>{var a=n[o-1];return typeof a=="string"?i+a+s:a!==void 0?i+bh(a)+s:i+s},"")}var Yi=t=>t===0?0:t>0?1:-1,ol=t=>typeof t=="number"&&t!=+t,_d=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,_t=t=>(typeof t=="number"||t instanceof Number)&&!ol(t),Jc=t=>_t(t)||typeof t=="string",BOe=0,aw=t=>{var e=++BOe;return"".concat(t||"").concat(e)},zs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_t(e)&&typeof e!="string")return r;var s;if(_d(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return ol(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},jae=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Gn(t,e,n){return _t(t)&&_t(e)?bh(t+n*(e-t)):e}function Dae(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Hm(r,e))===n)}var kr=t=>t===null||typeof t>"u",pE=t=>kr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function UOe(t){return t!=null}function mE(){}var FOe=["type","size","sizeType"];function oL(){return oL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oL.apply(null,arguments)}function yG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yG(Object(n),!0).forEach(function(r){$Oe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Oe(t,e,n){return(e=zOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zOe(t){var e=VOe(t,"string");return typeof e=="symbol"?e:e+""}function VOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HOe(t,e){if(t==null)return{};var n,r,i=qOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Bae={symbolCircle:V8,symbolCross:sOe,symbolDiamond:aOe,symbolSquare:lOe,symbolStar:fOe,symbolTriangle:hOe,symbolWye:mOe},GOe=Math.PI/180,KOe=t=>{var e="symbol".concat(pE(t));return Bae[e]||V8},WOe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*GOe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},YOe=(t,e)=>{Bae["symbol".concat(pE(t))]=e},Uae=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=HOe(t,FOe),s=xG(xG({},i),{},{type:e,size:n,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var a=()=>{var m=KOe(o),g=gOe().type(m).size(WOe(n,r,o)),v=g();if(v!==null)return v},{className:l,cx:c,cy:d}=s,h=Hs(s);return _t(c)&&_t(d)&&_t(n)?S.createElement("path",oL({},h,{className:Mn("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:a()})):null};Uae.registerSymbol=YOe;var Fae=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,K8=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(S.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{F8(i)&&(r[i]=(s=>n[i](n,s)))}),r},JOe=(t,e,n)=>r=>(t(e,n,r),null),gC=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];F8(i)&&typeof s=="function"&&(r||(r={}),r[i]=JOe(s,e,n))}),r};function vG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XOe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vG(Object(n),!0).forEach(function(r){QOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QOe(t,e,n){return(e=ZOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZOe(t){var e=eMe(t,"string");return typeof e=="symbol"?e:e+""}function eMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ti(t,e){var n=XOe({},t),r=e,i=Object.keys(e),s=i.reduce((o,a)=>(o[a]===void 0&&r[a]!==void 0&&(o[a]=r[a]),o),n);return s}var FR={},$R={},bG;function tMe(){return bG||(bG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],a=r(o);i.has(a)||i.set(a,o)}return Array.from(i.values())}t.uniqBy=e})($R)),$R}var zR={},wG;function $ae(){return wG||(wG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(zR)),zR}var VR={},HR={},qR={},EG;function nMe(){return EG||(EG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(qR)),qR}var SG;function W8(){return SG||(SG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nMe();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(HR)),HR}var GR={},AG;function rMe(){return AG||(AG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(GR)),GR}var TG;function iMe(){return TG||(TG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=W8(),n=rMe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(VR)),VR}var KR={},WR={},kG;function sMe(){return kG||(kG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G8();function n(r){return function(i){return e.get(i,r)}}t.property=n})(WR)),WR}var YR={},JR={},XR={},QR={},NG;function zae(){return NG||(NG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(QR)),QR}var ZR={},CG;function Vae(){return CG||(CG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(ZR)),ZR}var e3={},PG;function Hae(){return PG||(PG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(e3)),e3}var _G;function oMe(){return _G||(_G=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zae(),n=Vae(),r=Hae();function i(d,h,m){return typeof m!="function"?i(d,h,()=>{}):s(d,h,function g(v,x,b,w,k,N){const O=m(v,x,b,w,k,N);return O!==void 0?!!O:s(v,x,g,N)},new Map)}function s(d,h,m,g){if(h===d)return!0;switch(typeof h){case"object":return o(d,h,m,g);case"function":return Object.keys(h).length>0?s(d,{...h},m,g):r.eq(d,h);default:return e.isObject(d)?typeof h=="string"?h==="":!0:r.eq(d,h)}}function o(d,h,m,g){if(h==null)return!0;if(Array.isArray(h))return l(d,h,m,g);if(h instanceof Map)return a(d,h,m,g);if(h instanceof Set)return c(d,h,m,g);const v=Object.keys(h);if(d==null||n.isPrimitive(d))return v.length===0;if(v.length===0)return!0;if(g!=null&&g.has(h))return g.get(h)===d;g==null||g.set(h,d);try{for(let x=0;x<v.length;x++){const b=v[x];if(!n.isPrimitive(d)&&!(b in d)||h[b]===void 0&&d[b]!==void 0||h[b]===null&&d[b]!==null||!m(d[b],h[b],b,d,h,g))return!1}return!0}finally{g==null||g.delete(h)}}function a(d,h,m,g){if(h.size===0)return!0;if(!(d instanceof Map))return!1;for(const[v,x]of h.entries()){const b=d.get(v);if(m(b,x,v,d,h,g)===!1)return!1}return!0}function l(d,h,m,g){if(h.length===0)return!0;if(!Array.isArray(d))return!1;const v=new Set;for(let x=0;x<h.length;x++){const b=h[x];let w=!1;for(let k=0;k<d.length;k++){if(v.has(k))continue;const N=d[k];let O=!1;if(m(N,b,x,d,h,g)&&(O=!0),O){v.add(k),w=!0;break}}if(!w)return!1}return!0}function c(d,h,m,g){return h.size===0?!0:d instanceof Set?l([...d],[...h],m,g):!1}t.isMatchWith=i,t.isSetMatch=c})(XR)),XR}var IG;function qae(){return IG||(IG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oMe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(JR)),JR}var t3={},n3={},r3={},RG;function aMe(){return RG||(RG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(r3)),r3}var i3={},OG;function Gae(){return OG||(OG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(i3)),i3}var s3={},MG;function Kae(){return MG||(MG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",a="[object Date]",l="[object Map]",c="[object Set]",d="[object Array]",h="[object Function]",m="[object ArrayBuffer]",g="[object Object]",v="[object Error]",x="[object DataView]",b="[object Uint8Array]",w="[object Uint8ClampedArray]",k="[object Uint16Array]",N="[object Uint32Array]",O="[object BigUint64Array]",D="[object Int8Array]",_="[object Int16Array]",F="[object Int32Array]",z="[object BigInt64Array]",L="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=m,t.arrayTag=d,t.bigInt64ArrayTag=z,t.bigUint64ArrayTag=O,t.booleanTag=i,t.dataViewTag=x,t.dateTag=a,t.errorTag=v,t.float32ArrayTag=L,t.float64ArrayTag=$,t.functionTag=h,t.int16ArrayTag=_,t.int32ArrayTag=F,t.int8ArrayTag=D,t.mapTag=l,t.numberTag=r,t.objectTag=g,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=k,t.uint32ArrayTag=N,t.uint8ArrayTag=b,t.uint8ClampedArrayTag=w})(s3)),s3}var o3={},LG;function lMe(){return LG||(LG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(o3)),o3}var jG;function Wae(){return jG||(jG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aMe(),n=Gae(),r=Kae(),i=Vae(),s=lMe();function o(d,h){return a(d,void 0,d,new Map,h)}function a(d,h,m,g=new Map,v=void 0){const x=v==null?void 0:v(d,h,m,g);if(x!==void 0)return x;if(i.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const b=new Array(d.length);g.set(d,b);for(let w=0;w<d.length;w++)b[w]=a(d[w],w,m,g,v);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;g.set(d,b);for(const[w,k]of d)b.set(w,a(k,w,m,g,v));return b}if(d instanceof Set){const b=new Set;g.set(d,b);for(const w of d)b.add(a(w,void 0,m,g,v));return b}if(typeof un<"u"&&un.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,b);for(let w=0;w<d.length;w++)b[w]=a(d[w],w,m,g,v);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,b),l(b,d,m,g,v),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return g.set(d,b),l(b,d,m,g,v),b}if(typeof Blob<"u"&&d instanceof Blob){const b=new Blob([d],{type:d.type});return g.set(d,b),l(b,d,m,g,v),b}if(d instanceof Error){const b=new d.constructor;return g.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,l(b,d,m,g,v),b}if(d instanceof Boolean){const b=new Boolean(d.valueOf());return g.set(d,b),l(b,d,m,g,v),b}if(d instanceof Number){const b=new Number(d.valueOf());return g.set(d,b),l(b,d,m,g,v),b}if(d instanceof String){const b=new String(d.valueOf());return g.set(d,b),l(b,d,m,g,v),b}if(typeof d=="object"&&c(d)){const b=Object.create(Object.getPrototypeOf(d));return g.set(d,b),l(b,d,m,g,v),b}return d}function l(d,h,m=d,g,v){const x=[...Object.keys(h),...e.getSymbols(h)];for(let b=0;b<x.length;b++){const w=x[b],k=Object.getOwnPropertyDescriptor(d,w);(k==null||k.writable)&&(d[w]=a(h[w],w,m,g,v))}}function c(d){switch(n.getTag(d)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=a,t.copyProperties=l})(n3)),n3}var DG;function cMe(){return DG||(DG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wae();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(t3)),t3}var BG;function uMe(){return BG||(BG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qae(),n=cMe();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(YR)),YR}var a3={},l3={},c3={},UG;function dMe(){return UG||(UG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wae(),n=Kae();function r(i,s){return e.cloneDeepWith(i,(o,a,l,c)=>{const d=s==null?void 0:s(o,a,l,c);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(h,i),h}case n.argumentsTag:{const h={};return e.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}t.cloneDeepWith=r})(c3)),c3}var FG;function fMe(){return FG||(FG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dMe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(l3)),l3}var u3={},d3={},$G;function Yae(){return $G||($G=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(d3)),d3}var f3={},zG;function hMe(){return zG||(zG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gae();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(f3)),f3}var VG;function pMe(){return VG||(VG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lae(),n=Yae(),r=hMe(),i=q8();function s(o,a){let l;if(Array.isArray(a)?l=a:typeof a=="string"&&e.isDeepKey(a)&&(o==null?void 0:o[a])==null?l=i.toPath(a):l=[a],l.length===0)return!1;let c=o;for(let d=0;d<l.length;d++){const h=l[d];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}t.has=s})(u3)),u3}var HG;function mMe(){return HG||(HG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qae(),n=H8(),r=fMe(),i=G8(),s=pMe();function o(a,l){switch(typeof a){case"object":{Object.is(a==null?void 0:a.valueOf(),-0)&&(a="-0");break}case"number":{a=n.toKey(a);break}}return l=r.cloneDeep(l),function(c){const d=i.get(c,a);return d===void 0?s.has(c,a):l===void 0?d===void 0:e.isMatch(d,l)}}t.matchesProperty=o})(a3)),a3}var qG;function gMe(){return qG||(qG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$ae(),n=sMe(),r=uMe(),i=mMe();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(KR)),KR}var GG;function yMe(){return GG||(GG=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tMe(),n=$ae(),r=iMe(),i=gMe();function s(o,a=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(a)):[]}t.uniqBy=s})(FR)),FR}var h3,KG;function xMe(){return KG||(KG=1,h3=yMe().uniqBy),h3}var vMe=xMe();const WG=bs(vMe);function bMe(t,e,n){return e===!0?WG(t,n):typeof e=="function"?WG(t,e):t}var p3={exports:{}},m3={},g3={exports:{}},y3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YG;function wMe(){if(YG)return y3;YG=1;var t=Jx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,m){var g=m(),v=r({inst:{value:g,getSnapshot:m}}),x=v[0].inst,b=v[1];return s(function(){x.value=g,x.getSnapshot=m,l(x)&&b({inst:x})},[h,g,m]),i(function(){return l(x)&&b({inst:x}),h(function(){l(x)&&b({inst:x})})},[h]),o(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!n(h,g)}catch{return!0}}function c(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return y3.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,y3}var JG;function EMe(){return JG||(JG=1,g3.exports=wMe()),g3.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XG;function SMe(){if(XG)return m3;XG=1;var t=Jx(),e=EMe();function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return m3.useSyncExternalStoreWithSelector=function(c,d,h,m,g){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=a(function(){function w(_){if(!k){if(k=!0,N=_,_=m(_),g!==void 0&&x.hasValue){var F=x.value;if(g(F,_))return O=F}return O=_}if(F=O,r(N,_))return F;var z=m(_);return g!==void 0&&g(F,z)?(N=_,F):(N=_,O=z)}var k=!1,N,O,D=h===void 0?null:h;return[function(){return w(d())},D===null?void 0:function(){return w(D())}]},[d,h,m,g]);var b=i(c,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),l(b),b},m3}var QG;function AMe(){return QG||(QG=1,p3.exports=SMe()),p3.exports}var TMe=AMe(),Y8=S.createContext(null),kMe=t=>t,Mr=()=>{var t=S.useContext(Y8);return t?t.store.dispatch:kMe},W2=()=>{},NMe=()=>W2,CMe=(t,e)=>t===e;function Ut(t){var e=S.useContext(Y8);return TMe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:NMe,e?e.store.getState:W2,e?e.store.getState:W2,e?t:W2,CMe)}function PMe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function _Me(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function IMe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var ZG=t=>Array.isArray(t)?t:[t];function RMe(t){const e=Array.isArray(t[0])?t[0]:t;return IMe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function OMe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var MMe=class{constructor(t){this.value=t}deref(){return this.value}},LMe=typeof WeakRef<"u"?WeakRef:MMe,jMe=0,eK=1;function DA(){return{s:jMe,v:void 0,o:null,p:null}}function Jae(t,e={}){let n=DA();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var h;let a=n;const{length:l}=arguments;for(let m=0,g=l;m<g;m++){const v=arguments[m];if(typeof v=="function"||typeof v=="object"&&v!==null){let x=a.o;x===null&&(a.o=x=new WeakMap);const b=x.get(v);b===void 0?(a=DA(),x.set(v,a)):a=b}else{let x=a.p;x===null&&(a.p=x=new Map);const b=x.get(v);b===void 0?(a=DA(),x.set(v,a)):a=b}}const c=a;let d;if(a.s===eK)d=a.v;else if(d=t.apply(null,arguments),s++,r){const m=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;m!=null&&r(m,d)&&(d=m,s!==0&&s--),i=typeof d=="object"&&d!==null||typeof d=="function"?new LMe(d):d}return c.s=eK,c.v=d,d}return o.clearCache=()=>{n=DA(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function DMe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),PMe(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...n,...l},{memoize:h,memoizeOptions:m=[],argsMemoize:g=Jae,argsMemoizeOptions:v=[]}=d,x=ZG(m),b=ZG(v),w=RMe(i),k=h(function(){return s++,c.apply(null,arguments)},...x),N=g(function(){o++;const D=OMe(w,arguments);return a=k.apply(null,D),a},...b);return Object.assign(N,{resultFunc:c,memoizedResultFunc:k,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var Le=DMe(Jae),BMe=Object.assign((t,e=Le)=>{_Me(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>BMe}),x3={},v3={},b3={},tK;function UMe(){return tK||(tK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),a=e(i);if(o===a&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?a-o:o-a}return 0};t.compareValues=n})(b3)),b3}var w3={},E3={},nK;function Xae(){return nK||(nK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(E3)),E3}var rK;function FMe(){return rK||(rK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xae(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(w3)),w3}var iK;function $Me(){return iK||(iK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UMe(),n=FMe(),r=q8();function i(s,o,a,l){if(s==null)return[];a=l?void 0:a,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(a)||(a=a==null?[]:[a]),a=a.map(g=>String(g));const c=(g,v)=>{let x=g;for(let b=0;b<v.length&&x!=null;++b)x=x[v[b]];return x},d=(g,v)=>v==null||g==null?v:typeof g=="object"&&"key"in g?Object.hasOwn(v,g.key)?v[g.key]:c(v,g.path):typeof g=="function"?g(v):Array.isArray(g)?c(v,g):typeof v=="object"?v[g]:v,h=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return s.map(g=>({original:g,criteria:h.map(v=>d(v,g))})).slice().sort((g,v)=>{for(let x=0;x<h.length;x++){const b=e.compareValues(g.criteria[x],v.criteria[x],a[x]);if(b!==0)return b}return 0}).map(g=>g.original)}t.orderBy=i})(v3)),v3}var S3={},sK;function zMe(){return sK||(sK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(a,l)=>{for(let c=0;c<a.length;c++){const d=a[c];Array.isArray(d)&&l<s?o(d,l+1):i.push(d)}};return o(n,0),i}t.flatten=e})(S3)),S3}var A3={},oK;function Qae(){return oK||(oK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yae(),n=W8(),r=zae(),i=Hae();function s(o,a,l){return r.isObject(l)&&(typeof a=="number"&&n.isArrayLike(l)&&e.isIndex(a)&&a<l.length||typeof a=="string"&&a in l)?i.eq(l[a],o):!1}t.isIterateeCall=s})(A3)),A3}var aK;function VMe(){return aK||(aK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$Me(),n=zMe(),r=Qae();function i(s,...o){const a=o.length;return a>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:a>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(x3)),x3}var T3,lK;function HMe(){return lK||(lK=1,T3=VMe().sortBy),T3}var qMe=HMe();const yC=bs(qMe);var Zae=t=>t.legend.settings,GMe=t=>t.legend.size,KMe=t=>t.legend.payload;Le([KMe,Zae],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?yC(r,n):r});var BA=1;function WMe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=S.useState({height:0,left:0,top:0,width:0}),r=S.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>BA||Math.abs(o.left-e.left)>BA||Math.abs(o.top-e.top)>BA||Math.abs(o.width-e.width)>BA)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ls(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var YMe=typeof Symbol=="function"&&Symbol.observable||"@@observable",cK=YMe,k3=()=>Math.random().toString(36).substring(7).split("").join("."),JMe={INIT:`@@redux/INIT${k3()}`,REPLACE:`@@redux/REPLACE${k3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${k3()}`},YT=JMe;function J8(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function ele(t,e,n){if(typeof t!="function")throw new Error(ls(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ls(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ls(1));return n(ele)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((b,w)=>{o.set(w,b)}))}function d(){if(l)throw new Error(ls(3));return i}function h(b){if(typeof b!="function")throw new Error(ls(4));if(l)throw new Error(ls(5));let w=!0;c();const k=a++;return o.set(k,b),function(){if(w){if(l)throw new Error(ls(6));w=!1,c(),o.delete(k),s=null}}}function m(b){if(!J8(b))throw new Error(ls(7));if(typeof b.type>"u")throw new Error(ls(8));if(typeof b.type!="string")throw new Error(ls(17));if(l)throw new Error(ls(9));try{l=!0,i=r(i,b)}finally{l=!1}return(s=o).forEach(k=>{k()}),b}function g(b){if(typeof b!="function")throw new Error(ls(10));r=b,m({type:YT.REPLACE})}function v(){const b=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(ls(11));function k(){const O=w;O.next&&O.next(d())}return k(),{unsubscribe:b(k)}},[cK](){return this}}}return m({type:YT.INIT}),{dispatch:m,subscribe:h,getState:d,replaceReducer:g,[cK]:v}}function XMe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:YT.INIT})>"u")throw new Error(ls(12));if(typeof n(void 0,{type:YT.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ls(13))})}function tle(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{XMe(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let d=0;d<r.length;d++){const h=r[d],m=n[h],g=o[h],v=m(g,a);if(typeof v>"u")throw a&&a.type,new Error(ls(14));c[h]=v,l=l||v!==g}return l=l||r.length!==Object.keys(o).length,l?c:o}}function JT(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function QMe(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(ls(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=JT(...a)(i.dispatch),{...i,dispatch:s}}}function nle(t){return J8(t)&&"type"in t&&typeof t.type=="string"}var rle=Symbol.for("immer-nothing"),uK=Symbol.for("immer-draftable"),uo=Symbol.for("immer-state");function Ul(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var la=Object,Dx=la.getPrototypeOf,XT="constructor",xC="prototype",aL="configurable",QT="enumerable",Y2="writable",lw="value",Id=t=>!!t&&!!t[uo];function ec(t){var e;return t?ile(t)||vC(t)||!!t[uK]||!!((e=t[XT])!=null&&e[uK])||bC(t)||wC(t):!1}var ZMe=la[xC][XT].toString(),dK=new WeakMap;function ile(t){if(!t||!X8(t))return!1;const e=Dx(t);if(e===null||e===la[xC])return!0;const n=la.hasOwnProperty.call(e,XT)&&e[XT];if(n===Object)return!0;if(!Mg(n))return!1;let r=dK.get(n);return r===void 0&&(r=Function.toString.call(n),dK.set(n,r)),r===ZMe}function gE(t,e,n=!0){yE(t)===0?(n?Reflect.ownKeys(t):la.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function yE(t){const e=t[uo];return e?e.type_:vC(t)?1:bC(t)?2:wC(t)?3:0}var fK=(t,e,n=yE(t))=>n===2?t.has(e):la[xC].hasOwnProperty.call(t,e),lL=(t,e,n=yE(t))=>n===2?t.get(e):t[e],ZT=(t,e,n,r=yE(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function eLe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var vC=Array.isArray,bC=t=>t instanceof Map,wC=t=>t instanceof Set,X8=t=>typeof t=="object",Mg=t=>typeof t=="function",N3=t=>typeof t=="boolean";function tLe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Hu=t=>t.copy_||t.base_,Q8=t=>t.modified_?t.copy_:t.base_;function cL(t,e){if(bC(t))return new Map(t);if(wC(t))return new Set(t);if(vC(t))return Array[xC].slice.call(t);const n=ile(t);if(e===!0||e==="class_only"&&!n){const r=la.getOwnPropertyDescriptors(t);delete r[uo];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a[Y2]===!1&&(a[Y2]=!0,a[aL]=!0),(a.get||a.set)&&(r[o]={[aL]:!0,[Y2]:!0,[QT]:a[QT],[lw]:t[o]})}return la.create(Dx(t),r)}else{const r=Dx(t);if(r!==null&&n)return{...t};const i=la.create(r);return la.assign(i,t)}}function Z8(t,e=!1){return EC(t)||Id(t)||!ec(t)||(yE(t)>1&&la.defineProperties(t,{set:UA,add:UA,clear:UA,delete:UA}),la.freeze(t),e&&gE(t,(n,r)=>{Z8(r,!0)},!1)),t}function nLe(){Ul(2)}var UA={[lw]:nLe};function EC(t){return t===null||!X8(t)?!0:la.isFrozen(t)}var ek="MapSet",uL="Patches",hK="ArrayMethods",sle={};function qm(t){const e=sle[t];return e||Ul(0,t),e}var pK=t=>!!sle[t],cw,ole=()=>cw,rLe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:pK(ek)?qm(ek):void 0,arrayMethodsPlugin_:pK(hK)?qm(hK):void 0});function mK(t,e){e&&(t.patchPlugin_=qm(uL),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function dL(t){fL(t),t.drafts_.forEach(iLe),t.drafts_=null}function fL(t){t===cw&&(cw=t.parent_)}var gK=t=>cw=rLe(cw,t);function iLe(t){const e=t[uo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function yK(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[uo].modified_&&(dL(e),Ul(4)),ec(t)&&(t=xK(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[uo].base_,t,e)}else t=xK(e,n);return sLe(e,t,!0),dL(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==rle?t:void 0}function xK(t,e){if(EC(e))return e;const n=e[uo];if(!n)return e6(e,t.handledSet_,t);if(!SC(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);cle(n,t)}return n.copy_}function sLe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Z8(e,n)}function ale(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var SC=(t,e)=>t.scope_===e,oLe=[];function lle(t,e,n,r){const i=Hu(t),s=t.type_;if(r!==void 0&&lL(i,r,s)===e){ZT(i,r,n,s);return}if(!t.draftLocations_){const a=t.draftLocations_=new Map;gE(i,(l,c)=>{if(Id(c)){const d=a.get(c)||[];d.push(l),a.set(c,d)}})}const o=t.draftLocations_.get(e)??oLe;for(const a of o)ZT(i,a,n,s)}function aLe(t,e,n){t.callbacks_.push(function(i){var a;const s=e;if(!s||!SC(s,i))return;(a=i.mapSetPlugin_)==null||a.fixSetContents(s);const o=Q8(s);lle(t,s.draft_??s,o,n),cle(s,i)})}function cle(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}ale(t)}}function lLe(t,e,n){const{scope_:r}=t;if(Id(n)){const i=n[uo];SC(i,r)&&i.callbacks_.push(function(){J2(t);const o=Q8(i);lle(t,n,o,e)})}else ec(n)&&t.callbacks_.push(function(){const s=Hu(t);lL(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&e6(lL(t.copy_,e,t.type_),r.handledSet_,r)})}function e6(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Id(t)||e.has(t)||!ec(t)||EC(t)||(e.add(t),gE(t,(r,i)=>{if(Id(i)){const s=i[uo];if(SC(s,n)){const o=Q8(s);ZT(t,r,o,t.type_),ale(s)}}else ec(i)&&e6(i,e,n)})),t}function cLe(t,e){const n=vC(t),r={type_:n?1:0,scope_:e?e.scope_:ole(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=t6;n&&(i=[r],s=uw);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,[a,r]}var t6={get(t,e){if(e===uo)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Hu(t);if(!fK(i,e,t.type_))return uLe(t,i,e);const s=i[e];if(t.finalized_||!ec(s)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&tLe(e))return s;if(s===C3(t.base_,e)){J2(t);const o=t.type_===1?+e:e,a=pL(t.scope_,s,t,o);return t.copy_[o]=a}return s},has(t,e){return e in Hu(t)},ownKeys(t){return Reflect.ownKeys(Hu(t))},set(t,e,n){const r=ule(Hu(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=C3(Hu(t),e),s=i==null?void 0:i[uo];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(eLe(n,i)&&(n!==void 0||fK(t.base_,e,t.type_)))return!0;J2(t),hL(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),lLe(t,e,n)),!0},deleteProperty(t,e){return J2(t),C3(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),hL(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Hu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[Y2]:!0,[aL]:t.type_!==1||e!=="length",[QT]:r[QT],[lw]:n[e]}},defineProperty(){Ul(11)},getPrototypeOf(t){return Dx(t.base_)},setPrototypeOf(){Ul(12)}},uw={};gE(t6,(t,e)=>{uw[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});uw.deleteProperty=function(t,e){return uw.set.call(this,t,e,void 0)};uw.set=function(t,e,n){return t6.set.call(this,t[0],e,n,t[0])};function C3(t,e){const n=t[uo];return(n?Hu(n):t)[e]}function uLe(t,e,n){var i;const r=ule(e,n);return r?lw in r?r[lw]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function ule(t,e){if(!(e in t))return;let n=Dx(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Dx(n)}}function hL(t){t.modified_||(t.modified_=!0,t.parent_&&hL(t.parent_))}function J2(t){t.copy_||(t.assigned_=new Map,t.copy_=cL(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var dLe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Mg(n)&&!Mg(r)){const o=r;r=n;const a=this;return function(c=o,...d){return a.produce(c,h=>r.call(this,h,...d))}}Mg(r)||Ul(6),i!==void 0&&!Mg(i)&&Ul(7);let s;if(ec(n)){const o=gK(this),a=pL(o,n,void 0);let l=!0;try{s=r(a),l=!1}finally{l?dL(o):fL(o)}return mK(o,i),yK(s,o)}else if(!n||!X8(n)){if(s=r(n),s===void 0&&(s=n),s===rle&&(s=void 0),this.autoFreeze_&&Z8(s,!0),i){const o=[],a=[];qm(uL).generateReplacementPatches_(n,s,{patches_:o,inversePatches_:a}),i(o,a)}return s}else Ul(1,n)},this.produceWithPatches=(n,r)=>{if(Mg(n))return(a,...l)=>this.produceWithPatches(a,c=>n(c,...l));let i,s;return[this.produce(n,r,(a,l)=>{i=a,s=l}),i,s]},N3(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),N3(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),N3(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ec(e)||Ul(8),Id(e)&&(e=Gl(e));const n=gK(this),r=pL(n,e,void 0);return r[uo].isManual_=!0,fL(n),r}finishDraft(e,n){const r=e&&e[uo];(!r||!r.isManual_)&&Ul(9);const{scope_:i}=r;return mK(i,n),yK(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=qm(uL).applyPatches_;return Id(e)?i(e,n):this.produce(e,s=>i(s,n))}};function pL(t,e,n,r){const[i,s]=bC(e)?qm(ek).proxyMap_(e,n):wC(e)?qm(ek).proxySet_(e,n):cLe(e,n);return((n==null?void 0:n.scope_)??ole()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?aLe(n,s,r):s.callbacks_.push(function(l){var d;(d=l.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function Gl(t){return Id(t)||Ul(10,t),dle(t)}function dle(t){if(!ec(t)||EC(t))return t;const e=t[uo];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=cL(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=cL(t,!0);return gE(n,(i,s)=>{ZT(n,i,dle(s))},r),e&&(e.finalized_=!1),n}var fLe=new dLe,fle=fLe.produce;function hle(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var hLe=hle(),pLe=hle,mLe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?JT:JT.apply(null,arguments)};function al(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(ua(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>nle(r)&&r.type===t,n}var ple=class l1 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,l1.prototype)}static get[Symbol.species](){return l1}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new l1(...e[0].concat(this)):new l1(...e.concat(this))}};function vK(t){return ec(t)?fle(t,()=>{}):t}function FA(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function gLe(t){return typeof t=="boolean"}var yLe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new ple;return n&&(gLe(n)?o.push(hLe):o.push(pLe(n.extraArgument))),o},mle="RTK_autoBatch",_r=()=>t=>({payload:t,meta:{[mle]:!0}}),bK=t=>e=>{setTimeout(e,t)},gle=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:bK(10):t.type==="callback"?t.queueNotification:bK(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const h=()=>i&&d(),m=r.subscribe(h);return a.add(d),()=>{m(),a.delete(d)}},dispatch(d){var h;try{return i=!((h=d==null?void 0:d.meta)!=null&&h[mle]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(d)}finally{i=!0}}})},xLe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new ple(t);return r&&i.push(gle(typeof r=="object"?r:void 0)),i};function vLe(t){const e=yLe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(J8(n))a=tle(n);else throw new Error(ua(1));let l;typeof r=="function"?l=r(e):l=e();let c=JT;i&&(c=mLe({trace:!1,...typeof i=="object"&&i}));const d=QMe(...l),h=xLe(d);let m=typeof o=="function"?o(h):h();const g=c(...m);return ele(a,s,g)}function yle(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(ua(28));if(a in e)throw new Error(ua(29));return e[a]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function bLe(t){return typeof t=="function"}function wLe(t,e){let[n,r,i]=yle(e),s;if(bLe(t))s=()=>vK(t());else{const a=vK(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,h)=>{if(h)if(Id(d)){const g=h(d,l);return g===void 0?d:g}else{if(ec(d))return fle(d,m=>h(m,l));{const m=h(d,l);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},a)}return o.getInitialState=s,o}var ELe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",SLe=(t=21)=>{let e="",n=t;for(;n--;)e+=ELe[Math.random()*64|0];return e},ALe=Symbol.for("rtk-slice-createasyncthunk");function TLe(t,e){return`${t}/${e}`}function kLe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[ALe];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(ua(11));const a=(typeof i.reducers=="function"?i.reducers(CLe()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(O,D){const _=typeof O=="string"?O:O.type;if(!_)throw new Error(ua(12));if(_ in c.sliceCaseReducersByType)throw new Error(ua(13));return c.sliceCaseReducersByType[_]=D,d},addMatcher(O,D){return c.sliceMatchers.push({matcher:O,reducer:D}),d},exposeAction(O,D){return c.actionCreators[O]=D,d},exposeCaseReducer(O,D){return c.sliceCaseReducersByName[O]=D,d}};l.forEach(O=>{const D=a[O],_={reducerName:O,type:TLe(s,O),createNotation:typeof i.reducers=="function"};_Le(D)?RLe(_,D,d,e):PLe(_,D,d)});function h(){const[O={},D=[],_=void 0]=typeof i.extraReducers=="function"?yle(i.extraReducers):[i.extraReducers],F={...O,...c.sliceCaseReducersByType};return wLe(i.initialState,z=>{for(let L in F)z.addCase(L,F[L]);for(let L of c.sliceMatchers)z.addMatcher(L.matcher,L.reducer);for(let L of D)z.addMatcher(L.matcher,L.reducer);_&&z.addDefaultCase(_)})}const m=O=>O,g=new Map,v=new WeakMap;let x;function b(O,D){return x||(x=h()),x(O,D)}function w(){return x||(x=h()),x.getInitialState()}function k(O,D=!1){function _(z){let L=z[O];return typeof L>"u"&&D&&(L=FA(v,_,w)),L}function F(z=m){const L=FA(g,D,()=>new WeakMap);return FA(L,z,()=>{const $={};for(const[G,V]of Object.entries(i.selectors??{}))$[G]=NLe(V,z,()=>FA(v,z,w),D);return $})}return{reducerPath:O,getSelectors:F,get selectors(){return F(_)},selectSlice:_}}const N={name:s,reducer:b,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:w,...k(o),injectInto(O,{reducerPath:D,..._}={}){const F=D??o;return O.inject({reducerPath:F,reducer:b},_),{...N,...k(F,!0)}}};return N}}function NLe(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var jo=kLe();function CLe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function PLe({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!ILe(r))throw new Error(ua(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?al(t,o):al(t))}function _Le(t){return t._reducerDefinitionType==="asyncThunk"}function ILe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function RLe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(ua(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:d}=n,h=i(t,s,d);r.exposeAction(e,h),o&&r.addCase(h.fulfilled,o),a&&r.addCase(h.pending,a),l&&r.addCase(h.rejected,l),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(e,{fulfilled:o||$A,pending:a||$A,rejected:l||$A,settled:c||$A})}function $A(){}var OLe="task",xle="listener",vle="completed",n6="cancelled",MLe=`task-${n6}`,LLe=`task-${vle}`,mL=`${xle}-${n6}`,jLe=`${xle}-${vle}`,AC=class{constructor(t){Ce(this,"name","TaskAbortError");Ce(this,"message");this.code=t,this.message=`${OLe} ${n6} (reason: ${t})`}},r6=(t,e)=>{if(typeof t!="function")throw new TypeError(ua(32))},tk=()=>{},ble=(t,e=tk)=>(t.catch(e),t),wle=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Cm=t=>{if(t.aborted)throw new AC(t.reason)};function Ele(t,e){let n=tk;return new Promise((r,i)=>{const s=()=>i(new AC(t.reason));if(t.aborted){s();return}n=wle(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=tk})}var DLe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof AC?"cancelled":"rejected",error:n}}finally{e==null||e()}},nk=t=>e=>ble(Ele(t,e).then(n=>(Cm(t),n))),Sle=t=>{const e=nk(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:yy}=Object,wK={},TC="listenerMiddleware",BLe=(t,e)=>{const n=r=>wle(t,()=>r.abort(t.reason));return(r,i)=>{r6(r);const s=new AbortController;n(s);const o=DLe(async()=>{Cm(t),Cm(s.signal);const a=await r({pause:nk(s.signal),delay:Sle(s.signal),signal:s.signal});return Cm(s.signal),a},()=>s.abort(LLe));return i!=null&&i.autoJoin&&e.push(o.catch(tk)),{result:nk(t)(o),cancel(){s.abort(MLe)}}}},ULe=(t,e)=>{const n=async(r,i)=>{Cm(e);let s=()=>{};const a=[new Promise((l,c)=>{let d=t({predicate:r,effect:(h,m)=>{m.unsubscribe(),l([h,m.getState(),m.getOriginalState()])}});s=()=>{d(),c()}})];i!=null&&a.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await Ele(e,Promise.race(a));return Cm(e),l}finally{s()}};return(r,i)=>ble(n(r,i))},Ale=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=al(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ua(21));return r6(s),{predicate:i,type:e,effect:s}},Tle=yy(t=>{const{type:e,predicate:n,effect:r}=Ale(t);return{id:SLe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ua(22))}}},{withTypes:()=>Tle}),EK=(t,e)=>{const{type:n,effect:r,predicate:i}=Ale(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},gL=t=>{t.pending.forEach(e=>{e.abort(mL)})},FLe=(t,e)=>()=>{for(const n of e.keys())gL(n);t.clear()},SK=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},kle=yy(al(`${TC}/add`),{withTypes:()=>kle}),$Le=al(`${TC}/removeAll`),Nle=yy(al(`${TC}/remove`),{withTypes:()=>Nle}),zLe=(...t)=>{console.error(`${TC}/error`,...t)},xE=(t={})=>{const e=new Map,n=new Map,r=g=>{const v=n.get(g)??0;n.set(g,v+1)},i=g=>{const v=n.get(g)??1;v===1?n.delete(g):n.set(g,v-1)},{extra:s,onError:o=zLe}=t;r6(o);const a=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),v=>{g.unsubscribe(),v!=null&&v.cancelActive&&gL(g)}),l=g=>{const v=EK(e,g)??Tle(g);return a(v)};yy(l,{withTypes:()=>l});const c=g=>{const v=EK(e,g);return v&&(v.unsubscribe(),g.cancelActive&&gL(v)),!!v};yy(c,{withTypes:()=>c});const d=async(g,v,x,b)=>{const w=new AbortController,k=ULe(l,w.signal),N=[];try{g.pending.add(w),r(g),await Promise.resolve(g.effect(v,yy({},x,{getOriginalState:b,condition:(O,D)=>k(O,D).then(Boolean),take:k,delay:Sle(w.signal),pause:nk(w.signal),extra:s,signal:w.signal,fork:BLe(w.signal,N),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((O,D,_)=>{O!==w&&(O.abort(mL),_.delete(O))})},cancel:()=>{w.abort(mL),g.pending.delete(w)},throwIfCancelled:()=>{Cm(w.signal)}})))}catch(O){O instanceof AC||SK(o,O,{raisedBy:"effect"})}finally{await Promise.all(N),w.abort(jLe),i(g),g.pending.delete(w)}},h=FLe(e,n);return{middleware:g=>v=>x=>{if(!nle(x))return v(x);if(kle.match(x))return l(x.payload);if($Le.match(x)){h();return}if(Nle.match(x))return c(x.payload);let b=g.getState();const w=()=>{if(b===wK)throw new Error(ua(23));return b};let k;try{if(k=v(x),e.size>0){const N=g.getState(),O=Array.from(e.values());for(const D of O){let _=!1;try{_=D.predicate(x,N,b)}catch(F){_=!1,SK(o,F,{raisedBy:"predicate"})}_&&d(D,x,g,w)}}}finally{b=wK}return k},startListening:l,stopListening:c,clearListeners:h}};function ua(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var VLe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Cle=jo({name:"chartLayout",initialState:VLe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:HLe,setLayout:qLe,setChartSize:GLe,setScale:KLe}=Cle.actions,WLe=Cle.reducer;function Ple(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function hr(t){return Number.isFinite(t)}function Xc(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function AK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AK(Object(n),!0).forEach(function(r){YLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YLe(t,e,n){return(e=JLe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JLe(t){var e=XLe(t,"string");return typeof e=="symbol"?e:e+""}function XLe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yn(t,e,n){return kr(t)||kr(e)?n:Jc(e)?Hm(t,e,n):typeof e=="function"?e(t):n}var QLe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:a}=e;if((a==="vertical"||a==="horizontal"&&o==="middle")&&s!=="center"&&_t(t[s]))return Wg(Wg({},t),{},{[s]:t[s]+(r||0)});if((a==="horizontal"||a==="vertical"&&s==="center")&&o!=="middle"&&_t(t[o]))return Wg(Wg({},t),{},{[o]:t[o]+(i||0)})}return t},ru=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",_le=(t,e,n,r)=>{if(r)return t.map(a=>a.coordinate);var i,s,o=t.map(a=>(a.coordinate===e&&(i=!0),a.coordinate===n&&(s=!0),a.coordinate));return i||o.push(e),s||o.push(n),o},Ile=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:o,realScaleType:a,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:h,niceTicks:m,axisType:g}=t;if(!o)return null;var v=a==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=i==="category"&&o.bandwidth?o.bandwidth()/v:0;if(x=g==="angleAxis"&&s&&s.length>=2?Yi(s[0]-s[1])*2*x:x,h||m){var b=(h||m||[]).map((w,k)=>{var N=r?r.indexOf(w):w;return{coordinate:o(N)+x,value:w,offset:x,index:k}});return b.filter(w=>!ol(w.coordinate))}return l&&c?c.map((w,k)=>({coordinate:o(w)+x,value:w,index:k,offset:x})):o.ticks&&d!=null?o.ticks(d).map((w,k)=>({coordinate:o(w)+x,value:w,offset:x,index:k})):o.domain().map((w,k)=>({coordinate:o(w)+x,value:r?r[w]:w,index:k,offset:x}))},TK=1e-4,ZLe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-TK,s=Math.max(r[0],r[1])+TK,o=t(e[0]),a=t(e[n-1]);(o<i||o>s||a<i||a>s)&&t.domain([e[0],e[n-1]])}},eje=(t,e)=>{if(!e||e.length!==2||!_t(e[0])||!_t(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!_t(t[0])||t[0]<n)&&(i[0]=n),(!_t(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},tje=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0,a=0;a<n;++a){var l=t[a],c=l==null?void 0:l[i];if(c!=null){var d=c[1],h=c[0],m=ol(d)?h:d;m>=0?(c[0]=s,c[1]=s+m,s=d):(c[0]=o,c[1]=o+m,o=d)}}}},nje=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0;o<n;++o){var a=t[o],l=a==null?void 0:a[i];if(l!=null){var c=ol(l[1])?l[0]:l[1];c>=0?(l[0]=s,l[1]=s+c,s=l[1]):(l[0]=0,l[1]=0)}}}},rje={sign:tje,expand:_Oe,none:Vm,silhouette:IOe,wiggle:ROe,positive:nje},ije=(t,e,n)=>{var r,i=(r=rje[n])!==null&&r!==void 0?r:Vm,s=POe().keys(e).value((a,l)=>Number(Yn(a,l,0))).order(sL).offset(i),o=s(t);return o.forEach((a,l)=>{a.forEach((c,d)=>{var h=Yn(t[d],e[l],0);Array.isArray(h)&&h.length===2&&_t(h[0])&&_t(h[1])&&(c[0]=h[0],c[1]=h[1])})}),o};function Rle(t){return t==null?void 0:String(t)}function rk(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!kr(i[e.dataKey])){var a=Dae(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Yn(i,kr(o)?e.dataKey:o);return kr(l)?null:e.scale(l)}var kK=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:s,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var a=Yn(s,e.dataKey,e.scale.domain()[o]);return kr(a)?null:e.scale(a)-i/2+r},sje=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},oje=t=>{var e=t.flat(2).filter(_t);return[Math.min(...e),Math.max(...e)]},aje=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],lje=(t,e,n)=>{if(t!=null)return aje(Object.keys(t).reduce((r,i)=>{var s=t[i];if(!s)return r;var{stackedData:o}=s,a=o.reduce((l,c)=>{var d=Ple(c,e,n),h=oje(d);return!hr(h[0])||!hr(h[1])?l:[Math.min(l[0],h[0]),Math.max(l[1],h[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]))},NK=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CK=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lh=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=yC(e,d=>d.coordinate),s=1/0,o=1,a=i.length;o<a;o++){var l=i[o],c=i[o-1];s=Math.min(((l==null?void 0:l.coordinate)||0)-((c==null?void 0:c.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function PK(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return Wg(Wg({},e),{},{dataKey:n,payload:r,value:i,name:s})}function Hh(t,e){if(t)return String(t);if(typeof e=="string")return e}var cje=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},uje=(t,e)=>e==="centric"?t.angle:t.radius,zd=t=>t.layout.width,Vd=t=>t.layout.height,dje=t=>t.layout.scale,Ole=t=>t.layout.margin,kC=Le(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),NC=Le(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Mle="data-recharts-item-index",Lle="data-recharts-item-id",vE=60;function _K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_K(Object(n),!0).forEach(function(r){fje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_K(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fje(t,e,n){return(e=hje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hje(t){var e=pje(t,"string");return typeof e=="symbol"?e:e+""}function pje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mje=t=>t.brush.height;function gje(t){var e=NC(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:vE;return n+i}return n},0)}function yje(t){var e=NC(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:vE;return n+i}return n},0)}function xje(t){var e=kC(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function vje(t){var e=kC(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ri=Le([zd,Vd,Ole,mje,gje,yje,xje,vje,Zae,GMe],(t,e,n,r,i,s,o,a,l,c)=>{var d={left:(n.left||0)+i,right:(n.right||0)+s},h={top:(n.top||0)+o,bottom:(n.bottom||0)+a},m=zA(zA({},h),d),g=m.bottom;m.bottom+=r,m=QLe(m,l,c);var v=t-m.left-m.right,x=e-m.top-m.bottom;return zA(zA({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(x,0)})}),bje=Le(Ri,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),i6=Le(zd,Vd,(t,e)=>({x:0,y:0,width:t,height:e})),wje=S.createContext(null),Ji=()=>S.useContext(wje)!=null,CC=t=>t.brush,PC=Le([CC,Ri,Ole],(t,e,n)=>({height:t.height,x:_t(t.x)?t.x:e.left,y:_t(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:_t(t.width)?t.width:e.width})),P3={},_3={},I3={},IK;function Eje(){return IK||(IK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,a=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),d=()=>{a!==null&&(n.apply(o,a),o=void 0,a=null)},h=()=>{c&&d(),x()};let m=null;const g=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,h()},r)},v=()=>{m!==null&&(clearTimeout(m),m=null)},x=()=>{v(),o=void 0,a=null},b=()=>{d()},w=function(...k){if(i!=null&&i.aborted)return;o=this,a=k;const N=m==null;g(),l&&N&&d()};return w.schedule=g,w.cancel=x,w.flush=b,i==null||i.addEventListener("abort",x,{once:!0}),w}t.debounce=e})(I3)),I3}var RK;function Sje(){return RK||(RK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Eje();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:a=!0,maxWait:l}=s,c=Array(2);o&&(c[0]="leading"),a&&(c[1]="trailing");let d,h=null;const m=e.debounce(function(...x){d=r.apply(this,x),h=null},i,{edges:c}),g=function(...x){return l!=null&&(h===null&&(h=Date.now()),Date.now()-h>=l)?(d=r.apply(this,x),h=Date.now(),m.cancel(),m.schedule(),d):(m.apply(this,x),d)},v=()=>(m.flush(),d);return g.cancel=m.cancel,g.flush=v,g}t.debounce=n})(_3)),_3}var OK;function Aje(){return OK||(OK=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Sje();function n(r,i=0,s={}){const{leading:o=!0,trailing:a=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:a})}t.throttle=n})(P3)),P3}var R3,MK;function Tje(){return MK||(MK=1,R3=Aje().throttle),R3}var kje=Tje();const Nje=bs(kje);var ik=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},jle=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:o}=n,a=_d(r)?t:Number(r),l=_d(i)?e:Number(i);return s&&s>0&&(a?l=a/s:l&&(a=l*s),o&&l!=null&&l>o&&(l=o)),{calculatedWidth:a,calculatedHeight:l}},Cje={width:0,height:0,overflow:"visible"},Pje={width:0,overflowX:"visible"},_je={height:0,overflowY:"visible"},Ije={},Rje=t=>{var{width:e,height:n}=t,r=_d(e),i=_d(n);return r&&i?Cje:r?Pje:i?_je:Ije};function Oje(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function yL(){return yL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yL.apply(null,arguments)}function LK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LK(Object(n),!0).forEach(function(r){Mje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mje(t,e,n){return(e=Lje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lje(t){var e=jje(t,"string");return typeof e=="symbol"?e:e+""}function jje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dle=S.createContext({width:-1,height:-1});function Dje(t){return Xc(t.width)&&Xc(t.height)}function Ble(t){var{children:e,width:n,height:r}=t,i=S.useMemo(()=>({width:n,height:r}),[n,r]);return Dje(i)?S.createElement(Dle.Provider,{value:i},e):null}var s6=()=>S.useContext(Dle),Bje=S.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:o=0,minHeight:a,maxHeight:l,children:c,debounce:d=0,id:h,className:m,onResize:g,style:v={}}=t,x=S.useRef(null),b=S.useRef();b.current=g,S.useImperativeHandle(e,()=>x.current);var[w,k]=S.useState({containerWidth:r.width,containerHeight:r.height}),N=S.useCallback((z,L)=>{k($=>{var G=Math.round(z),V=Math.round(L);return $.containerWidth===G&&$.containerHeight===V?$:{containerWidth:G,containerHeight:V}})},[]);S.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return mE;var z=V=>{var U,{width:A,height:I}=V[0].contentRect;N(A,I),(U=b.current)===null||U===void 0||U.call(b,A,I)};d>0&&(z=Nje(z,d,{trailing:!0,leading:!1}));var L=new ResizeObserver(z),{width:$,height:G}=x.current.getBoundingClientRect();return N($,G),L.observe(x.current),()=>{L.disconnect()}},[N,d]);var{containerWidth:O,containerHeight:D}=w;ik(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:_,calculatedHeight:F}=jle(O,D,{width:i,height:s,aspect:n,maxHeight:l});return ik(_!=null&&_>0||F!=null&&F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,F,i,s,o,a,n),S.createElement("div",{id:h?"".concat(h):void 0,className:Mn("recharts-responsive-container",m),style:jK(jK({},v),{},{width:i,height:s,minWidth:o,minHeight:a,maxHeight:l}),ref:x},S.createElement("div",{style:Rje({width:i,height:s})},S.createElement(Ble,{width:_,height:F},c)))}),dw=S.forwardRef((t,e)=>{var n=s6();if(Xc(n.width)&&Xc(n.height))return t.children;var{width:r,height:i}=Oje({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=jle(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return _t(s)&&_t(o)?S.createElement(Ble,{width:s,height:o},t.children):S.createElement(Bje,yL({},t,{width:r,height:i,ref:e}))});function Ule(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var _C=()=>{var t,e=Ji(),n=Ut(bje),r=Ut(PC),i=(t=Ut(CC))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Uje={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Fle=()=>{var t;return(t=Ut(Ri))!==null&&t!==void 0?t:Uje},$le=()=>Ut(zd),zle=()=>Ut(Vd),Nn=t=>t.layout.layoutType,qh=()=>Ut(Nn),Fje=()=>{var t=qh();if(t==="horizontal"||t==="vertical")return t},$je=()=>{var t=qh();return t!==void 0},IC=t=>{var e=Mr(),n=Ji(),{width:r,height:i}=t,s=s6(),o=r,a=i;return s&&(o=s.width>0?s.width:r,a=s.height>0?s.height:i),S.useEffect(()=>{!n&&Xc(o)&&Xc(a)&&e(GLe({width:o,height:a}))},[e,n,o,a]),null},Vle=Symbol.for("immer-nothing"),DK=Symbol.for("immer-draftable"),ha=Symbol.for("immer-state");function Fl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var fw=Object.getPrototypeOf;function Bx(t){return!!t&&!!t[ha]}function Gm(t){var e;return t?Hle(t)||Array.isArray(t)||!!t[DK]||!!((e=t.constructor)!=null&&e[DK])||bE(t)||OC(t):!1}var zje=Object.prototype.constructor.toString(),BK=new WeakMap;function Hle(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=BK.get(n);return r===void 0&&(r=Function.toString.call(n),BK.set(n,r)),r===zje}function sk(t,e,n=!0){RC(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function RC(t){const e=t[ha];return e?e.type_:Array.isArray(t)?1:bE(t)?2:OC(t)?3:0}function xL(t,e){return RC(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function qle(t,e,n){const r=RC(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Vje(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function bE(t){return t instanceof Map}function OC(t){return t instanceof Set}function Pp(t){return t.copy_||t.base_}function vL(t,e){if(bE(t))return new Map(t);if(OC(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Hle(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ha];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(fw(t),r)}else{const r=fw(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function o6(t,e=!1){return MC(t)||Bx(t)||!Gm(t)||(RC(t)>1&&Object.defineProperties(t,{set:VA,add:VA,clear:VA,delete:VA}),Object.freeze(t),e&&Object.values(t).forEach(n=>o6(n,!0))),t}function Hje(){Fl(2)}var VA={value:Hje};function MC(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var qje={};function Km(t){const e=qje[t];return e||Fl(0,t),e}var hw;function Gle(){return hw}function Gje(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function UK(t,e){e&&(Km("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function bL(t){wL(t),t.drafts_.forEach(Kje),t.drafts_=null}function wL(t){t===hw&&(hw=t.parent_)}function FK(t){return hw=Gje(hw,t)}function Kje(t){const e=t[ha];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function $K(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ha].modified_&&(bL(e),Fl(4)),Gm(t)&&(t=ok(e,t),e.parent_||ak(e,t)),e.patches_&&Km("Patches").generateReplacementPatches_(n[ha].base_,t,e.patches_,e.inversePatches_)):t=ok(e,n,[]),bL(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Vle?t:void 0}function ok(t,e,n){if(MC(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[ha];if(!i)return sk(e,(s,o)=>zK(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return ak(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),sk(o,(l,c)=>zK(t,i,s,l,c,n,a),r),ak(t,s,!1),n&&t.patches_&&Km("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function zK(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=MC(i);if(!(a&&!o)){if(Bx(i)){const l=s&&e&&e.type_!==3&&!xL(e.assigned_,r)?s.concat(r):void 0,c=ok(t,i,l);if(qle(n,r,c),Bx(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Gm(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;ok(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(bE(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&ak(t,i)}}}function ak(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&o6(e,n)}function Wje(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Gle(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=a6;n&&(i=[r],s=pw);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var a6={get(t,e){if(e===ha)return t;const n=Pp(t);if(!xL(n,e))return Yje(t,n,e);const r=n[e];return t.finalized_||!Gm(r)?r:r===O3(t.base_,e)?(M3(t),t.copy_[e]=SL(r,t)):r},has(t,e){return e in Pp(t)},ownKeys(t){return Reflect.ownKeys(Pp(t))},set(t,e,n){const r=Kle(Pp(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=O3(Pp(t),e),s=i==null?void 0:i[ha];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Vje(n,i)&&(n!==void 0||xL(t.base_,e)))return!0;M3(t),EL(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return O3(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,M3(t),EL(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Pp(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Fl(11)},getPrototypeOf(t){return fw(t.base_)},setPrototypeOf(){Fl(12)}},pw={};sk(a6,(t,e)=>{pw[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});pw.deleteProperty=function(t,e){return pw.set.call(this,t,e,void 0)};pw.set=function(t,e,n){return a6.set.call(this,t[0],e,n,t[0])};function O3(t,e){const n=t[ha];return(n?Pp(n):t)[e]}function Yje(t,e,n){var i;const r=Kle(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Kle(t,e){if(!(e in t))return;let n=fw(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=fw(n)}}function EL(t){t.modified_||(t.modified_=!0,t.parent_&&EL(t.parent_))}function M3(t){t.copy_||(t.copy_=vL(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Jje=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,d=>n.call(this,d,...c))}}typeof n!="function"&&Fl(6),r!==void 0&&typeof r!="function"&&Fl(7);let i;if(Gm(e)){const s=FK(this),o=SL(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?bL(s):wL(s)}return UK(s,r),$K(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Vle&&(i=void 0),this.autoFreeze_&&o6(i,!0),r){const s=[],o=[];Km("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Fl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Gm(t)||Fl(8),Bx(t)&&(t=Xje(t));const e=FK(this),n=SL(t,void 0);return n[ha].isManual_=!0,wL(e),n}finishDraft(t,e){const n=t&&t[ha];(!n||!n.isManual_)&&Fl(9);const{scope_:r}=n;return UK(r,e),$K(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Km("Patches").applyPatches_;return Bx(t)?r(t,e):this.produce(t,i=>r(i,e))}};function SL(t,e){const n=bE(t)?Km("MapSet").proxyMap_(t,e):OC(t)?Km("MapSet").proxySet_(t,e):Wje(t,e);return(e?e.scope_:Gle()).drafts_.push(n),n}function Xje(t){return Bx(t)||Fl(10,t),Wle(t)}function Wle(t){if(!Gm(t)||MC(t))return t;const e=t[ha];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=vL(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=vL(t,!0);return sk(n,(i,s)=>{qle(n,i,Wle(s))},r),e&&(e.finalized_=!1),n}var Qje=new Jje;Qje.produce;var Zje={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Yle=jo({name:"legend",initialState:Zje,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:_r()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Gl(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:_r()},removeLegendPayload:{reducer(t,e){var n=Gl(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:_r()}}}),{setLegendSize:fyt,setLegendSettings:hyt,addLegendPayload:Jle,replaceLegendPayload:Xle,removeLegendPayload:Qle}=Yle.actions,eDe=Yle.reducer;function AL(){return AL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AL.apply(null,arguments)}function VK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VK(Object(n),!0).forEach(function(r){tDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tDe(t,e,n){return(e=nDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nDe(t){var e=rDe(t,"string");return typeof e=="symbol"?e:e+""}function rDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iDe(t){return Array.isArray(t)&&Jc(t[0])&&Jc(t[1])?t.join(" ~ "):t}var sDe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:o,itemSorter:a,wrapperClassName:l,labelClassName:c,label:d,labelFormatter:h,accessibilityLayer:m=!1}=t,g=()=>{if(s&&s.length){var D={padding:0,margin:0},_=(a?yC(s,a):s).map((F,z)=>{if(F.type==="none")return null;var L=F.formatter||o||iDe,{value:$,name:G}=F,V=$,U=G;if(L){var A=L($,G,F,z,s);if(Array.isArray(A))[V,U]=A;else if(A!=null)V=A;else return null}var I=L3({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},r);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:I},Jc(U)?S.createElement("span",{className:"recharts-tooltip-item-name"},U):null,Jc(U)?S.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,S.createElement("span",{className:"recharts-tooltip-item-value"},V),S.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:D},_)}return null},v=L3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=L3({margin:0},i),b=!kr(d),w=b?d:"",k=Mn("recharts-default-tooltip",l),N=Mn("recharts-tooltip-label",c);b&&h&&s!==void 0&&s!==null&&(w=h(d,s));var O=m?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",AL({className:k,style:v},O),S.createElement("p",{className:N,style:x},S.isValidElement(w)?w:"".concat(w)),g())},Mb="recharts-tooltip-wrapper",oDe={visibility:"hidden"};function aDe(t){var{coordinate:e,translateX:n,translateY:r}=t;return Mn(Mb,{["".concat(Mb,"-right")]:_t(n)&&e&&_t(e.x)&&n>=e.x,["".concat(Mb,"-left")]:_t(n)&&e&&_t(e.x)&&n<e.x,["".concat(Mb,"-bottom")]:_t(r)&&e&&_t(e.y)&&r>=e.y,["".concat(Mb,"-top")]:_t(r)&&e&&_t(e.y)&&r<e.y})}function HK(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:o,tooltipDimension:a,viewBox:l,viewBoxDimension:c}=t;if(s&&_t(s[r]))return s[r];var d=n[r]-a-(i>0?i:0),h=n[r]+i;if(e[r])return o[r]?d:h;var m=l[r];if(m==null)return 0;if(o[r]){var g=d,v=m;return g<v?Math.max(h,m):Math.max(d,m)}if(c==null)return 0;var x=h+a,b=m+c;return x>b?Math.max(d,m):Math.max(h,m)}function lDe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function cDe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:o,useTranslate3d:a,viewBox:l}=t,c,d,h;return o.height>0&&o.width>0&&n?(d=HK({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),h=HK({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=lDe({translateX:d,translateY:h,useTranslate3d:a})):c=oDe,{cssProperties:c,cssClasses:aDe({translateX:d,translateY:h,coordinate:n})}}function qK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qK(Object(n),!0).forEach(function(r){TL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TL(t,e,n){return(e=uDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uDe(t){var e=dDe(t,"string");return typeof e=="symbol"?e:e+""}function dDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class fDe extends S.PureComponent{constructor(){super(...arguments),TL(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),TL(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:a,isAnimationActive:l,offset:c,position:d,reverseDirection:h,useTranslate3d:m,viewBox:g,wrapperStyle:v,lastBoundingBox:x,innerRef:b,hasPortalFromProps:w}=this.props,{cssClasses:k,cssProperties:N}=cDe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:d,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:m,viewBox:g}),O=w?{}:HA(HA({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&a?"visible":"hidden",position:"absolute",top:0,left:0}),D=HA(HA({},O),{},{visibility:!this.state.dismissed&&e&&a?"visible":"hidden"},v);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:D,ref:b},s)}}var Zle=()=>{var t;return(t=Ut(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function kL(){return kL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kL.apply(null,arguments)}function GK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GK(Object(n),!0).forEach(function(r){hDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hDe(t,e,n){return(e=pDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pDe(t){var e=mDe(t,"string");return typeof e=="symbol"?e:e+""}function mDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WK={curveBasisClosed:xOe,curveBasisOpen:vOe,curveBasis:yOe,curveBumpX:rOe,curveBumpY:iOe,curveLinearClosed:bOe,curveLinear:pC,curveMonotoneX:wOe,curveMonotoneY:EOe,curveNatural:SOe,curveStep:AOe,curveStepAfter:kOe,curveStepBefore:TOe},lk=t=>hr(t.x)&&hr(t.y),YK=t=>t.base!=null&&lk(t.base)&&lk(t),Lb=t=>t.x,jb=t=>t.y,gDe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(pE(t));return(n==="curveMonotone"||n==="curveBump")&&e?WK["".concat(n).concat(e==="vertical"?"Y":"X")]:WK[n]||pC},yDe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,o=gDe(e,i),a=s?n.filter(lk):n,l;if(Array.isArray(r)){var c=n.map((g,v)=>KK(KK({},g),{},{base:r[v]}));i==="vertical"?l=jA().y(jb).x1(Lb).x0(g=>g.base.x):l=jA().x(Lb).y1(jb).y0(g=>g.base.y);var d=l.defined(YK).curve(o),h=s?c.filter(YK):c;return d(h)}i==="vertical"&&_t(r)?l=jA().y(jb).x1(Lb).x0(r):_t(r)?l=jA().x(Lb).y1(jb).y0(r):l=Aae().x(Lb).y(jb);var m=l.defined(lk).curve(o);return m(a)},xy=t=>{var{className:e,points:n,path:r,pathRef:i}=t,s=qh();if((!n||!n.length)&&!r)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},a=n&&n.length?yDe(o):r;return S.createElement("path",kL({},co(t),K8(t),{className:Mn("recharts-curve",e),d:a===null?void 0:a,ref:i}))},xDe=["x","y","top","left","width","height","className"];function NL(){return NL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NL.apply(null,arguments)}function JK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JK(Object(n),!0).forEach(function(r){bDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bDe(t,e,n){return(e=wDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wDe(t){var e=EDe(t,"string");return typeof e=="symbol"?e:e+""}function EDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SDe(t,e){if(t==null)return{};var n,r,i=ADe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ADe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var TDe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),kDe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:a}=t,l=SDe(t,xDe),c=vDe({x:e,y:n,top:r,left:i,width:s,height:o},l);return!_t(e)||!_t(n)||!_t(s)||!_t(o)||!_t(r)||!_t(i)?null:S.createElement("path",NL({},Hs(c),{className:Mn("recharts-cross",a),d:TDe(e,n,s,o,r,i)}))};function NDe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function XK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XK(Object(n),!0).forEach(function(r){CDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CDe(t,e,n){return(e=PDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PDe(t){var e=_De(t,"string");return typeof e=="symbol"?e:e+""}function _De(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IDe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),ece=(t,e,n)=>t.map(r=>"".concat(IDe(r)," ").concat(e,"ms ").concat(n)).join(","),RDe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),mw=(t,e)=>Object.keys(e).reduce((n,r)=>QK(QK({},n),{},{[r]:t(r,e[r])}),{});function ZK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZK(Object(n),!0).forEach(function(r){ODe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ODe(t,e,n){return(e=MDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MDe(t){var e=LDe(t,"string");return typeof e=="symbol"?e:e+""}function LDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ck=(t,e,n)=>t+(e-t)*n,CL=t=>{var{from:e,to:n}=t;return e!==n},tce=(t,e,n)=>{var r=mw((i,s)=>{if(CL(s)){var[o,a]=t(s.from,s.to,s.velocity);return _i(_i({},s),{},{from:o,velocity:a})}return s},e);return n<1?mw((i,s)=>CL(s)&&r[i]!=null?_i(_i({},s),{},{velocity:ck(s.velocity,r[i].velocity,n),from:ck(s.from,r[i].from,n)}):s,e):tce(t,r,n-1)};function jDe(t,e,n,r,i,s){var o,a=r.reduce((m,g)=>_i(_i({},m),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),l=()=>mw((m,g)=>g.from,a),c=()=>!Object.values(a).filter(CL).length,d=null,h=m=>{o||(o=m);var g=m-o,v=g/n.dt;a=tce(n,a,v),i(_i(_i(_i({},t),e),l())),o=m,c()||(d=s.setTimeout(h))};return()=>(d=s.setTimeout(h),()=>{var m;(m=d)===null||m===void 0||m()})}function DDe(t,e,n,r,i,s,o){var a=null,l=i.reduce((h,m)=>{var g=t[m],v=e[m];return g==null||v==null?h:_i(_i({},h),{},{[m]:[g,v]})},{}),c,d=h=>{c||(c=h);var m=(h-c)/r,g=mw((x,b)=>ck(...b,n(m)),l);if(s(_i(_i(_i({},t),e),g)),m<1)a=o.setTimeout(d);else{var v=mw((x,b)=>ck(...b,n(1)),l);s(_i(_i(_i({},t),e),v))}};return()=>(a=o.setTimeout(d),()=>{var h;(h=a)===null||h===void 0||h()})}const BDe=(t,e,n,r,i,s)=>{var o=RDe(t,e);return n==null?()=>(i(_i(_i({},t),e)),()=>{}):n.isStepper===!0?jDe(t,e,n,o,i,s):DDe(t,e,n,r,o,i,s)};var uk=1e-4,nce=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],rce=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),eW=(t,e)=>n=>{var r=nce(t,e);return rce(r,n)},UDe=(t,e)=>n=>{var r=nce(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return rce(i,n)},FDe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},$De=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=FDe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},zDe=(t,e,n,r)=>{var i=eW(t,n),s=eW(e,r),o=UDe(t,n),a=c=>c>1?1:c<0?0:c,l=c=>{for(var d=c>1?1:c,h=d,m=0;m<8;++m){var g=i(h)-d,v=o(h);if(Math.abs(g-d)<uk||v<uk)return s(h);h=a(h-g/v)}return s(h)};return l.isStepper=!1,l},tW=function(){return zDe(...$De(...arguments))},VDe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,a,l)=>{var c=-(o-a)*n,d=l*r,h=l+(c-d)*i/1e3,m=l*i/1e3+o;return Math.abs(m-a)<uk&&Math.abs(h)<uk?[a,0]:[m,h]};return s.isStepper=!0,s.dt=i,s},HDe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tW(t);case"spring":return VDe();default:if(t.split("(")[0]==="cubic-bezier")return tW(t)}return typeof t=="function"?t:null};function qDe(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[l,...c]=a;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class GDe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function KDe(){return qDe(new GDe)}var WDe=S.createContext(KDe);function YDe(t,e){var n=S.useContext(WDe);return S.useMemo(()=>e??n(t),[t,e,n])}var JDe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),wE={isSsr:JDe()},XDe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},nW={t:0},j3={t:1};function mv(t){var e=Ti(t,XDe),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:a,onAnimationStart:l,children:c}=e,d=n==="auto"?!wE.isSsr:n,h=YDe(e.animationId,e.animationManager),[m,g]=S.useState(d?nW:j3),v=S.useRef(null);return S.useEffect(()=>{d||g(j3)},[d]),S.useEffect(()=>{if(!d||!r)return mE;var x=BDe(nW,j3,HDe(s),i,g,h.getTimeoutController()),b=()=>{v.current=x()};return h.start([l,o,b,i,a]),()=>{h.stop(),v.current&&v.current(),a()}},[d,r,i,s,o,l,a,h]),c(m.t)}function gv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=S.useRef(aw(e)),r=S.useRef(t);return r.current!==t&&(n.current=aw(e),r.current=t),n.current}var QDe=["radius"],ZDe=["radius"],rW,iW,sW,oW,aW,lW,cW,uW,dW,fW;function hW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hW(Object(n),!0).forEach(function(r){e8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e8e(t,e,n){return(e=t8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t8e(t){var e=n8e(t,"string");return typeof e=="symbol"?e:e+""}function n8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dk(){return dk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dk.apply(null,arguments)}function mW(t,e){if(t==null)return{};var n,r,i=r8e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function r8e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fc(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var gW=(t,e,n,r,i)=>{var s=bh(n),o=bh(r),a=Math.min(Math.abs(s)/2,Math.abs(o)/2),l=o>=0?1:-1,c=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0,h;if(a>0&&i instanceof Array){for(var m=[0,0,0,0],g=0,v=4;g<v;g++)m[g]=i[g]>a?a:i[g];h=Jr(rW||(rW=fc(["M",",",""])),t,e+l*m[0]),m[0]>0&&(h+=Jr(iW||(iW=fc(["A ",",",",0,0,",",",",",""])),m[0],m[0],d,t+c*m[0],e)),h+=Jr(sW||(sW=fc(["L ",",",""])),t+n-c*m[1],e),m[1]>0&&(h+=Jr(oW||(oW=fc(["A ",",",",0,0,",`,
        `,",",""])),m[1],m[1],d,t+n,e+l*m[1])),h+=Jr(aW||(aW=fc(["L ",",",""])),t+n,e+r-l*m[2]),m[2]>0&&(h+=Jr(lW||(lW=fc(["A ",",",",0,0,",`,
        `,",",""])),m[2],m[2],d,t+n-c*m[2],e+r)),h+=Jr(cW||(cW=fc(["L ",",",""])),t+c*m[3],e+r),m[3]>0&&(h+=Jr(uW||(uW=fc(["A ",",",",0,0,",`,
        `,",",""])),m[3],m[3],d,t,e+r-l*m[3])),h+="Z"}else if(a>0&&i===+i&&i>0){var x=Math.min(a,i);h=Jr(dW||(dW=fc(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+l*x,x,x,d,t+c*x,e,t+n-c*x,e,x,x,d,t+n,e+l*x,t+n,e+r-l*x,x,x,d,t+n-c*x,e+r,t+c*x,e+r,x,x,d,t,e+r-l*x)}else h=Jr(fW||(fW=fc(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},yW={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ice=t=>{var e=Ti(t,yW),n=S.useRef(null),[r,i]=S.useState(-1);S.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var q=n.current.getTotalLength();q&&i(q)}catch{}},[]);var{x:s,y:o,width:a,height:l,radius:c,className:d}=e,{animationEasing:h,animationDuration:m,animationBegin:g,isAnimationActive:v,isUpdateAnimationActive:x}=e,b=S.useRef(a),w=S.useRef(l),k=S.useRef(s),N=S.useRef(o),O=S.useMemo(()=>({x:s,y:o,width:a,height:l,radius:c}),[s,o,a,l,c]),D=gv(O,"rectangle-");if(s!==+s||o!==+o||a!==+a||l!==+l||a===0||l===0)return null;var _=Mn("recharts-rectangle",d);if(!x){var F=Hs(e),{radius:z}=F,L=mW(F,QDe);return S.createElement("path",dk({},L,{x:bh(s),y:bh(o),width:bh(a),height:bh(l),radius:typeof c=="number"?c:void 0,className:_,d:gW(s,o,a,l,c)}))}var $=b.current,G=w.current,V=k.current,U=N.current,A="0px ".concat(r===-1?1:r,"px"),I="".concat(r,"px 0px"),j=ece(["strokeDasharray"],m,typeof h=="string"?h:yW.animationEasing);return S.createElement(mv,{animationId:D,key:D,canBegin:r>0,duration:m,easing:h,isActive:x,begin:g},q=>{var K=Gn($,a,q),te=Gn(G,l,q),Y=Gn(V,s,q),H=Gn(U,o,q);n.current&&(b.current=K,w.current=te,k.current=Y,N.current=H);var M;v?q>0?M={transition:j,strokeDasharray:I}:M={strokeDasharray:A}:M={strokeDasharray:I};var P=Hs(e),{radius:W}=P,X=mW(P,ZDe);return S.createElement("path",dk({},X,{radius:typeof c=="number"?c:void 0,className:_,d:gW(Y,H,K,te,c),ref:n,style:pW(pW({},M),e.style)}))})};function xW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xW(Object(n),!0).forEach(function(r){i8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i8e(t,e,n){return(e=s8e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s8e(t){var e=o8e(t,"string");return typeof e=="symbol"?e:e+""}function o8e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fk=Math.PI/180,a8e=t=>t*180/Math.PI,wi=(t,e,n,r)=>({x:t+Math.cos(-fk*r)*n,y:e+Math.sin(-fk*r)*n}),sce=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},l8e=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},c8e=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=l8e({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var a=(n-i)/o,l=Math.acos(a);return r>s&&(l=2*Math.PI-l),{radius:o,angle:a8e(l),angleInRadian:l}},u8e=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},d8e=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},f8e=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=c8e({x:n,y:r},e),{innerRadius:o,outerRadius:a}=e;if(i<o||i>a||i===0)return null;var{startAngle:l,endAngle:c}=u8e(e),d=s,h;if(l<=c){for(;d>c;)d-=360;for(;d<l;)d+=360;h=d>=l&&d<=c}else{for(;d>l;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=l}return h?vW(vW({},e),{},{radius:i,angle:d8e(d,e)}):null};function oce(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=wi(e,n,r,i),a=wi(e,n,r,s);return{points:[o,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}var bW,wW,EW,SW,AW,TW,kW;function PL(){return PL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PL.apply(null,arguments)}function Kp(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var h8e=(t,e)=>{var n=Yi(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},qA=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:a,cornerIsExternal:l}=t,c=a*(o?1:-1)+r,d=Math.asin(a/c)/fk,h=l?i:i+s*d,m=wi(e,n,c,h),g=wi(e,n,r,h),v=l?i-s*d:i,x=wi(e,n,c*Math.cos(d*fk),v);return{center:m,circleTangency:g,lineTangency:x,theta:d}},ace=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,a=h8e(s,o),l=s+a,c=wi(e,n,i,s),d=wi(e,n,i,l),h=Jr(bW||(bW=Kp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,i,i,+(Math.abs(a)>180),+(s>l),d.x,d.y);if(r>0){var m=wi(e,n,r,s),g=wi(e,n,r,l);h+=Jr(wW||(wW=Kp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),g.x,g.y,r,r,+(Math.abs(a)>180),+(s<=l),m.x,m.y)}else h+=Jr(EW||(EW=Kp(["L ",","," Z"])),e,n);return h},p8e=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:a,startAngle:l,endAngle:c}=t,d=Yi(c-l),{circleTangency:h,lineTangency:m,theta:g}=qA({cx:e,cy:n,radius:i,angle:l,sign:d,cornerRadius:s,cornerIsExternal:a}),{circleTangency:v,lineTangency:x,theta:b}=qA({cx:e,cy:n,radius:i,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:a}),w=a?Math.abs(l-c):Math.abs(l-c)-g-b;if(w<0)return o?Jr(SW||(SW=Kp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),m.x,m.y,s,s,s*2,s,s,-s*2):ace({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var k=Jr(AW||(AW=Kp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),m.x,m.y,s,s,+(d<0),h.x,h.y,i,i,+(w>180),+(d<0),v.x,v.y,s,s,+(d<0),x.x,x.y);if(r>0){var{circleTangency:N,lineTangency:O,theta:D}=qA({cx:e,cy:n,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),{circleTangency:_,lineTangency:F,theta:z}=qA({cx:e,cy:n,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:a}),L=a?Math.abs(l-c):Math.abs(l-c)-D-z;if(L<0&&s===0)return"".concat(k,"L").concat(e,",").concat(n,"Z");k+=Jr(TW||(TW=Kp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),F.x,F.y,s,s,+(d<0),_.x,_.y,r,r,+(L>180),+(d>0),N.x,N.y,s,s,+(d<0),O.x,O.y)}else k+=Jr(kW||(kW=Kp(["L",",","Z"])),e,n);return k},m8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},lce=t=>{var e=Ti(t,m8e),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:d,className:h}=e;if(s<i||c===d)return null;var m=Mn("recharts-sector",h),g=s-i,v=zs(o,g,0,!0),x;return v>0&&Math.abs(c-d)<360?x=p8e({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(v,g/2),forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:d}):x=ace({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:d}),S.createElement("path",PL({},Hs(e),{className:m,d:x}))};function g8e(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(Fae(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:o,angle:a}=e,l=wi(r,i,s,a),c=wi(r,i,o,a);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return oce(e)}}var D3={},B3={},U3={},NW;function y8e(){return NW||(NW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xae();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(U3)),U3}var CW;function x8e(){return CW||(CW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y8e();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(B3)),B3}var PW;function v8e(){return PW||(PW=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qae(),n=x8e();function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const a=Math.max(Math.ceil((s-i)/(o||1)),0),l=new Array(a);for(let c=0;c<a;c++)l[c]=i,i+=o;return l}t.range=r})(D3)),D3}var F3,_W;function b8e(){return _W||(_W=1,F3=v8e().range),F3}var w8e=b8e();const cce=bs(w8e);function Ah(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function E8e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function l6(t){let e,n,r;t.length!==2?(e=Ah,n=(a,l)=>Ah(t(a),l),r=(a,l)=>t(a)-l):(e=t===Ah||t===E8e?t:S8e,n=t,r=t);function i(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const h=c+d>>>1;n(a[h],l)<0?c=h+1:d=h}while(c<d)}return c}function s(a,l,c=0,d=a.length){if(c<d){if(e(l,l)!==0)return d;do{const h=c+d>>>1;n(a[h],l)<=0?c=h+1:d=h}while(c<d)}return c}function o(a,l,c=0,d=a.length){const h=i(a,l,c,d-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:o,right:s}}function S8e(){return 0}function uce(t){return t===null?NaN:+t}function*A8e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const T8e=l6(Ah),EE=T8e.right;l6(uce).center;class IW extends Map{constructor(e,n=C8e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(RW(this,e))}has(e){return super.has(RW(this,e))}set(e,n){return super.set(k8e(this,e),n)}delete(e){return super.delete(N8e(this,e))}}function RW({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function k8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function N8e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function C8e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function P8e(t=Ah){if(t===Ah)return dce;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function dce(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const _8e=Math.sqrt(50),I8e=Math.sqrt(10),R8e=Math.sqrt(2);function hk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=_8e?10:s>=I8e?5:s>=R8e?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/o,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?hk(t,e,n*2):[a,l,c]}function _L(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?hk(e,t,n):hk(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(i+c)/-o;else for(let c=0;c<a;++c)l[c]=(i+c)*o;return l}function IL(t,e,n){return e=+e,t=+t,n=+n,hk(t,e,n)[2]}function RL(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?IL(e,t,n):IL(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function OW(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function MW(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function fce(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?dce:P8e(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+m)),v=Math.min(r,Math.floor(e+(l-c)*h/l+m));fce(t,e,g,v,i)}const s=t[e];let o=n,a=r;for(Db(t,n,e),i(t[r],s)>0&&Db(t,n,r);o<a;){for(Db(t,o,a),++o,--a;i(t[o],s)<0;)++o;for(;i(t[a],s)>0;)--a}i(t[n],s)===0?Db(t,n,a):(++a,Db(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Db(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function O8e(t,e,n){if(t=Float64Array.from(A8e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return MW(t);if(e>=1)return OW(t);var r,i=(r-1)*e,s=Math.floor(i),o=OW(fce(t,s).subarray(0,s+1)),a=MW(t.subarray(s+1));return o+(a-o)*(i-s)}}function M8e(t,e,n=uce){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(i-s)}}function L8e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function dl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Hd(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const OL=Symbol("implicit");function c6(){var t=new IW,e=[],n=[],r=OL;function i(s){let o=t.get(s);if(o===void 0){if(r!==OL)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new IW;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return c6(e,n).unknown(r)},dl.apply(i,arguments),i}function u6(){var t=c6().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,d=.5;delete t.unknown;function h(){var m=e().length,g=i<r,v=g?i:r,x=g?r:i;s=(x-v)/Math.max(1,m-l+c*2),a&&(s=Math.floor(s)),v+=(x-v-s*(m-l))*d,o=s*(1-l),a&&(v=Math.round(v),o=Math.round(o));var b=L8e(m).map(function(w){return v+s*w});return n(g?b.reverse():b)}return t.domain=function(m){return arguments.length?(e(m),h()):e()},t.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,a=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(m){return arguments.length?(a=!!m,h()):a},t.padding=function(m){return arguments.length?(l=Math.min(1,c=+m),h()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),h()):l},t.paddingOuter=function(m){return arguments.length?(c=+m,h()):c},t.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),h()):d},t.copy=function(){return u6(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(d)},dl.apply(h(),arguments)}function hce(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return hce(e())},t}function j8e(){return hce(u6.apply(null,arguments).paddingInner(1))}function d6(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function pce(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function SE(){}var gw=.7,pk=1/gw,vy="\\s*([+-]?\\d+)\\s*",yw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D8e=/^#([0-9a-f]{3,8})$/,B8e=new RegExp(`^rgb\\(${vy},${vy},${vy}\\)$`),U8e=new RegExp(`^rgb\\(${Hc},${Hc},${Hc}\\)$`),F8e=new RegExp(`^rgba\\(${vy},${vy},${vy},${yw}\\)$`),$8e=new RegExp(`^rgba\\(${Hc},${Hc},${Hc},${yw}\\)$`),z8e=new RegExp(`^hsl\\(${yw},${Hc},${Hc}\\)$`),V8e=new RegExp(`^hsla\\(${yw},${Hc},${Hc},${yw}\\)$`),LW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};d6(SE,xw,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:jW,formatHex:jW,formatHex8:H8e,formatHsl:q8e,formatRgb:DW,toString:DW});function jW(){return this.rgb().formatHex()}function H8e(){return this.rgb().formatHex8()}function q8e(){return mce(this).formatHsl()}function DW(){return this.rgb().formatRgb()}function xw(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=D8e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?BW(e):n===3?new _o(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?GA(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?GA(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=B8e.exec(t))?new _o(e[1],e[2],e[3],1):(e=U8e.exec(t))?new _o(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=F8e.exec(t))?GA(e[1],e[2],e[3],e[4]):(e=$8e.exec(t))?GA(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=z8e.exec(t))?$W(e[1],e[2]/100,e[3]/100,1):(e=V8e.exec(t))?$W(e[1],e[2]/100,e[3]/100,e[4]):LW.hasOwnProperty(t)?BW(LW[t]):t==="transparent"?new _o(NaN,NaN,NaN,0):null}function BW(t){return new _o(t>>16&255,t>>8&255,t&255,1)}function GA(t,e,n,r){return r<=0&&(t=e=n=NaN),new _o(t,e,n,r)}function G8e(t){return t instanceof SE||(t=xw(t)),t?(t=t.rgb(),new _o(t.r,t.g,t.b,t.opacity)):new _o}function ML(t,e,n,r){return arguments.length===1?G8e(t):new _o(t,e,n,r??1)}function _o(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}d6(_o,ML,pce(SE,{brighter(t){return t=t==null?pk:Math.pow(pk,t),new _o(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gw:Math.pow(gw,t),new _o(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _o(Pm(this.r),Pm(this.g),Pm(this.b),mk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UW,formatHex:UW,formatHex8:K8e,formatRgb:FW,toString:FW}));function UW(){return`#${Wp(this.r)}${Wp(this.g)}${Wp(this.b)}`}function K8e(){return`#${Wp(this.r)}${Wp(this.g)}${Wp(this.b)}${Wp((isNaN(this.opacity)?1:this.opacity)*255)}`}function FW(){const t=mk(this.opacity);return`${t===1?"rgb(":"rgba("}${Pm(this.r)}, ${Pm(this.g)}, ${Pm(this.b)}${t===1?")":`, ${t})`}`}function mk(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Pm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wp(t){return t=Pm(t),(t<16?"0":"")+t.toString(16)}function $W(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $l(t,e,n,r)}function mce(t){if(t instanceof $l)return new $l(t.h,t.s,t.l,t.opacity);if(t instanceof SE||(t=xw(t)),!t)return new $l;if(t instanceof $l)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new $l(o,a,l,t.opacity)}function W8e(t,e,n,r){return arguments.length===1?mce(t):new $l(t,e,n,r??1)}function $l(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}d6($l,W8e,pce(SE,{brighter(t){return t=t==null?pk:Math.pow(pk,t),new $l(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gw:Math.pow(gw,t),new $l(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _o($3(t>=240?t-240:t+120,i,r),$3(t,i,r),$3(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new $l(zW(this.h),KA(this.s),KA(this.l),mk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=mk(this.opacity);return`${t===1?"hsl(":"hsla("}${zW(this.h)}, ${KA(this.s)*100}%, ${KA(this.l)*100}%${t===1?")":`, ${t})`}`}}));function zW(t){return t=(t||0)%360,t<0?t+360:t}function KA(t){return Math.max(0,Math.min(1,t||0))}function $3(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const f6=t=>()=>t;function Y8e(t,e){return function(n){return t+n*e}}function J8e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function X8e(t){return(t=+t)==1?gce:function(e,n){return n-e?J8e(e,n,t):f6(isNaN(e)?n:e)}}function gce(t,e){var n=e-t;return n?Y8e(t,n):f6(isNaN(t)?e:t)}const VW=(function t(e){var n=X8e(e);function r(i,s){var o=n((i=ML(i)).r,(s=ML(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=gce(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=a(d),i.b=l(d),i.opacity=c(d),i+""}}return r.gamma=t,r})(1);function Q8e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Z8e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function e6e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=yv(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function t6e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function gk(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function n6e(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=yv(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var LL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,z3=new RegExp(LL.source,"g");function r6e(t){return function(){return t}}function i6e(t){return function(e){return t(e)+""}}function s6e(t,e){var n=LL.lastIndex=z3.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=LL.exec(t))&&(i=z3.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:gk(r,i)})),n=z3.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?i6e(l[0].x):r6e(e):(e=l.length,function(c){for(var d=0,h;d<e;++d)a[(h=l[d]).i]=h.x(c);return a.join("")})}function yv(t,e){var n=typeof e,r;return e==null||n==="boolean"?f6(e):(n==="number"?gk:n==="string"?(r=xw(e))?(e=r,VW):s6e:e instanceof xw?VW:e instanceof Date?t6e:Z8e(e)?Q8e:Array.isArray(e)?e6e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?n6e:gk)(t,e)}function h6(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function o6e(t,e){e===void 0&&(e=t,t=yv);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function a6e(t){return function(){return t}}function yk(t){return+t}var HW=[0,1];function oo(t){return t}function jL(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:a6e(isNaN(e)?NaN:.5)}function l6e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function c6e(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=jL(i,r),s=n(o,s)):(r=jL(r,i),s=n(s,o)),function(a){return s(r(a))}}function u6e(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=jL(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=EE(t,a,1,r)-1;return s[l](i[l](a))}}function AE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function LC(){var t=HW,e=HW,n=yv,r,i,s,o=oo,a,l,c;function d(){var m=Math.min(t.length,e.length);return o!==oo&&(o=l6e(t[0],t[m-1])),a=m>2?u6e:c6e,l=c=null,h}function h(m){return m==null||isNaN(m=+m)?s:(l||(l=a(t.map(r),e,n)))(r(o(m)))}return h.invert=function(m){return o(i((c||(c=a(e,t.map(r),gk)))(m)))},h.domain=function(m){return arguments.length?(t=Array.from(m,yk),d()):t.slice()},h.range=function(m){return arguments.length?(e=Array.from(m),d()):e.slice()},h.rangeRound=function(m){return e=Array.from(m),n=h6,d()},h.clamp=function(m){return arguments.length?(o=m?!0:oo,d()):o!==oo},h.interpolate=function(m){return arguments.length?(n=m,d()):n},h.unknown=function(m){return arguments.length?(s=m,h):s},function(m,g){return r=m,i=g,d()}}function p6(){return LC()(oo,oo)}function d6e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xk(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ux(t){return t=xk(Math.abs(t)),t?t[1]:NaN}function f6e(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function h6e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var p6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vw(t){if(!(e=p6e.exec(t)))throw new Error("invalid format: "+t);var e;return new m6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}vw.prototype=m6.prototype;function m6(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}m6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function m6e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var yce;function g6e(t,e){var n=xk(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(yce=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+xk(t,Math.max(0,e+s-1))[0]}function qW(t,e){var n=xk(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const GW={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:d6e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>qW(t*100,e),r:qW,s:g6e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function KW(t){return t}var WW=Array.prototype.map,YW=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function y6e(t){var e=t.grouping===void 0||t.thousands===void 0?KW:f6e(WW.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?KW:h6e(WW.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=vw(h);var m=h.fill,g=h.align,v=h.sign,x=h.symbol,b=h.zero,w=h.width,k=h.comma,N=h.precision,O=h.trim,D=h.type;D==="n"?(k=!0,D="g"):GW[D]||(N===void 0&&(N=12),O=!0,D="g"),(b||m==="0"&&g==="=")&&(b=!0,m="0",g="=");var _=x==="$"?n:x==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",F=x==="$"?r:/[%p]/.test(D)?o:"",z=GW[D],L=/[defgprs%]/.test(D);N=N===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function $(G){var V=_,U=F,A,I,j;if(D==="c")U=z(G)+U,G="";else{G=+G;var q=G<0||1/G<0;if(G=isNaN(G)?l:z(Math.abs(G),N),O&&(G=m6e(G)),q&&+G==0&&v!=="+"&&(q=!1),V=(q?v==="("?v:a:v==="-"||v==="("?"":v)+V,U=(D==="s"?YW[8+yce/3]:"")+U+(q&&v==="("?")":""),L){for(A=-1,I=G.length;++A<I;)if(j=G.charCodeAt(A),48>j||j>57){U=(j===46?i+G.slice(A+1):G.slice(A))+U,G=G.slice(0,A);break}}}k&&!b&&(G=e(G,1/0));var K=V.length+G.length+U.length,te=K<w?new Array(w-K+1).join(m):"";switch(k&&b&&(G=e(te+G,te.length?w-U.length:1/0),te=""),g){case"<":G=V+G+U+te;break;case"=":G=V+te+G+U;break;case"^":G=te.slice(0,K=te.length>>1)+V+G+U+te.slice(K);break;default:G=te+V+G+U;break}return s(G)}return $.toString=function(){return h+""},$}function d(h,m){var g=c((h=vw(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Ux(m)/3)))*3,x=Math.pow(10,-v),b=YW[8+v/3];return function(w){return g(x*w)+b}}return{format:c,formatPrefix:d}}var WA,g6,xce;x6e({thousands:",",grouping:[3],currency:["$",""]});function x6e(t){return WA=y6e(t),g6=WA.format,xce=WA.formatPrefix,WA}function v6e(t){return Math.max(0,-Ux(Math.abs(t)))}function b6e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ux(e)/3)))*3-Ux(Math.abs(t)))}function w6e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ux(e)-Ux(t))+1}function vce(t,e,n,r){var i=RL(t,e,n),s;switch(r=vw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=b6e(i,o))&&(r.precision=s),xce(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=w6e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=v6e(i))&&(r.precision=s-(r.type==="%")*2);break}}return g6(r)}function Gh(t){var e=t.domain;return t.ticks=function(n){var r=e();return _L(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return vce(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,d=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);d-- >0;){if(c=IL(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function bce(){var t=p6();return t.copy=function(){return AE(t,bce())},dl.apply(t,arguments),Gh(t)}function wce(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,yk),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return wce(t).unknown(e)},t=arguments.length?Array.from(t,yk):[0,1],Gh(n)}function Ece(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function JW(t){return Math.log(t)}function XW(t){return Math.exp(t)}function E6e(t){return-Math.log(-t)}function S6e(t){return-Math.exp(-t)}function A6e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function T6e(t){return t===10?A6e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function k6e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function QW(t){return(e,n)=>-t(-e,n)}function y6(t){const e=t(JW,XW),n=e.domain;let r=10,i,s;function o(){return i=k6e(r),s=T6e(r),n()[0]<0?(i=QW(i),s=QW(s),t(E6e,S6e)):t(JW,XW),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let c=l[0],d=l[l.length-1];const h=d<c;h&&([c,d]=[d,c]);let m=i(c),g=i(d),v,x;const b=a==null?10:+a;let w=[];if(!(r%1)&&g-m<b){if(m=Math.floor(m),g=Math.ceil(g),c>0){for(;m<=g;++m)for(v=1;v<r;++v)if(x=m<0?v/s(-m):v*s(m),!(x<c)){if(x>d)break;w.push(x)}}else for(;m<=g;++m)for(v=r-1;v>=1;--v)if(x=m>0?v/s(-m):v*s(m),!(x<c)){if(x>d)break;w.push(x)}w.length*2<b&&(w=_L(c,d,b))}else w=_L(m,g,Math.min(g-m,b)).map(s);return h?w.reverse():w},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=vw(l)).precision==null&&(l.trim=!0),l=g6(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return d=>{let h=d/s(Math.round(i(d)));return h*r<r-.5&&(h*=r),h<=c?l(d):""}},e.nice=()=>n(Ece(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function Sce(){const t=y6(LC()).domain([1,10]);return t.copy=()=>AE(t,Sce()).base(t.base()),dl.apply(t,arguments),t}function ZW(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function eY(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function x6(t){var e=1,n=t(ZW(e),eY(e));return n.constant=function(r){return arguments.length?t(ZW(e=+r),eY(e)):e},Gh(n)}function Ace(){var t=x6(LC());return t.copy=function(){return AE(t,Ace()).constant(t.constant())},dl.apply(t,arguments)}function tY(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function N6e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function C6e(t){return t<0?-t*t:t*t}function v6(t){var e=t(oo,oo),n=1;function r(){return n===1?t(oo,oo):n===.5?t(N6e,C6e):t(tY(n),tY(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Gh(e)}function b6(){var t=v6(LC());return t.copy=function(){return AE(t,b6()).exponent(t.exponent())},dl.apply(t,arguments),t}function P6e(){return b6.apply(null,arguments).exponent(.5)}function nY(t){return Math.sign(t)*t*t}function _6e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Tce(){var t=p6(),e=[0,1],n=!1,r;function i(s){var o=_6e(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(nY(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,yk)).map(nY)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Tce(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},dl.apply(i,arguments),Gh(i)}function kce(){var t=[],e=[],n=[],r;function i(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=M8e(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:e[EE(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ah),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return kce().domain(t).range(e).unknown(r)},dl.apply(s,arguments)}function Nce(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[EE(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Nce().domain([t,e]).range(i).unknown(s)},dl.apply(Gh(o),arguments)}function Cce(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[EE(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Cce().domain(t).range(e).unknown(n)},dl.apply(i,arguments)}const V3=new Date,H3=new Date;function Oi(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=s=>Oi(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(V3.setTime(+s),H3.setTime(+o),t(V3),t(H3),Math.floor(n(V3,H3))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const vk=Oi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);vk.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Oi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):vk);vk.range;const ud=1e3,tl=ud*60,dd=tl*60,Rd=dd*24,w6=Rd*7,rY=Rd*30,q3=Rd*365,Yp=Oi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ud)},(t,e)=>(e-t)/ud,t=>t.getUTCSeconds());Yp.range;const E6=Oi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ud)},(t,e)=>{t.setTime(+t+e*tl)},(t,e)=>(e-t)/tl,t=>t.getMinutes());E6.range;const S6=Oi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*tl)},(t,e)=>(e-t)/tl,t=>t.getUTCMinutes());S6.range;const A6=Oi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ud-t.getMinutes()*tl)},(t,e)=>{t.setTime(+t+e*dd)},(t,e)=>(e-t)/dd,t=>t.getHours());A6.range;const T6=Oi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*dd)},(t,e)=>(e-t)/dd,t=>t.getUTCHours());T6.range;const TE=Oi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*tl)/Rd,t=>t.getDate()-1);TE.range;const jC=Oi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rd,t=>t.getUTCDate()-1);jC.range;const Pce=Oi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rd,t=>Math.floor(t/Rd));Pce.range;function c0(t){return Oi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*tl)/w6)}const DC=c0(0),bk=c0(1),I6e=c0(2),R6e=c0(3),Fx=c0(4),O6e=c0(5),M6e=c0(6);DC.range;bk.range;I6e.range;R6e.range;Fx.range;O6e.range;M6e.range;function u0(t){return Oi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/w6)}const BC=u0(0),wk=u0(1),L6e=u0(2),j6e=u0(3),$x=u0(4),D6e=u0(5),B6e=u0(6);BC.range;wk.range;L6e.range;j6e.range;$x.range;D6e.range;B6e.range;const k6=Oi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());k6.range;const N6=Oi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());N6.range;const Od=Oi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Od.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Oi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Od.range;const Md=Oi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Md.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Oi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Md.range;function _ce(t,e,n,r,i,s){const o=[[Yp,1,ud],[Yp,5,5*ud],[Yp,15,15*ud],[Yp,30,30*ud],[s,1,tl],[s,5,5*tl],[s,15,15*tl],[s,30,30*tl],[i,1,dd],[i,3,3*dd],[i,6,6*dd],[i,12,12*dd],[r,1,Rd],[r,2,2*Rd],[n,1,w6],[e,1,rY],[e,3,3*rY],[t,1,q3]];function a(c,d,h){const m=d<c;m&&([c,d]=[d,c]);const g=h&&typeof h.range=="function"?h:l(c,d,h),v=g?g.range(c,+d+1):[];return m?v.reverse():v}function l(c,d,h){const m=Math.abs(d-c)/h,g=l6(([,,b])=>b).right(o,m);if(g===o.length)return t.every(RL(c/q3,d/q3,h));if(g===0)return vk.every(Math.max(RL(c,d,h),1));const[v,x]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return v.every(x)}return[a,l]}const[U6e,F6e]=_ce(Md,N6,BC,Pce,T6,S6),[$6e,z6e]=_ce(Od,k6,DC,TE,A6,E6);function G3(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function K3(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bb(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function V6e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=Ub(i),d=Fb(i),h=Ub(s),m=Fb(s),g=Ub(o),v=Fb(o),x=Ub(a),b=Fb(a),w=Ub(l),k=Fb(l),N={a:q,A:K,b:te,B:Y,c:null,d:cY,e:cY,f:f7e,g:E7e,G:A7e,H:c7e,I:u7e,j:d7e,L:Ice,m:h7e,M:p7e,p:H,q:M,Q:fY,s:hY,S:m7e,u:g7e,U:y7e,V:x7e,w:v7e,W:b7e,x:null,X:null,y:w7e,Y:S7e,Z:T7e,"%":dY},O={a:P,A:W,b:X,B:ie,c:null,d:uY,e:uY,f:P7e,g:U7e,G:$7e,H:k7e,I:N7e,j:C7e,L:Oce,m:_7e,M:I7e,p:oe,q:Te,Q:fY,s:hY,S:R7e,u:O7e,U:M7e,V:L7e,w:j7e,W:D7e,x:null,X:null,y:B7e,Y:F7e,Z:z7e,"%":dY},D={a:$,A:G,b:V,B:U,c:A,d:aY,e:aY,f:s7e,g:oY,G:sY,H:lY,I:lY,j:t7e,L:i7e,m:e7e,M:n7e,p:L,q:Z6e,Q:a7e,s:l7e,S:r7e,u:W6e,U:Y6e,V:J6e,w:K6e,W:X6e,x:I,X:j,y:oY,Y:sY,Z:Q6e,"%":o7e};N.x=_(n,N),N.X=_(r,N),N.c=_(e,N),O.x=_(n,O),O.X=_(r,O),O.c=_(e,O);function _(ce,de){return function(ke){var ye=[],Ke=-1,je=0,Ve=ce.length,me,Ne,We;for(ke instanceof Date||(ke=new Date(+ke));++Ke<Ve;)ce.charCodeAt(Ke)===37&&(ye.push(ce.slice(je,Ke)),(Ne=iY[me=ce.charAt(++Ke)])!=null?me=ce.charAt(++Ke):Ne=me==="e"?" ":"0",(We=de[me])&&(me=We(ke,Ne)),ye.push(me),je=Ke+1);return ye.push(ce.slice(je,Ke)),ye.join("")}}function F(ce,de){return function(ke){var ye=Bb(1900,void 0,1),Ke=z(ye,ce,ke+="",0),je,Ve;if(Ke!=ke.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(de&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(je=K3(Bb(ye.y,0,1)),Ve=je.getUTCDay(),je=Ve>4||Ve===0?wk.ceil(je):wk(je),je=jC.offset(je,(ye.V-1)*7),ye.y=je.getUTCFullYear(),ye.m=je.getUTCMonth(),ye.d=je.getUTCDate()+(ye.w+6)%7):(je=G3(Bb(ye.y,0,1)),Ve=je.getDay(),je=Ve>4||Ve===0?bk.ceil(je):bk(je),je=TE.offset(je,(ye.V-1)*7),ye.y=je.getFullYear(),ye.m=je.getMonth(),ye.d=je.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Ve="Z"in ye?K3(Bb(ye.y,0,1)).getUTCDay():G3(Bb(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Ve+5)%7:ye.w+ye.U*7-(Ve+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,K3(ye)):G3(ye)}}function z(ce,de,ke,ye){for(var Ke=0,je=de.length,Ve=ke.length,me,Ne;Ke<je;){if(ye>=Ve)return-1;if(me=de.charCodeAt(Ke++),me===37){if(me=de.charAt(Ke++),Ne=D[me in iY?de.charAt(Ke++):me],!Ne||(ye=Ne(ce,ke,ye))<0)return-1}else if(me!=ke.charCodeAt(ye++))return-1}return ye}function L(ce,de,ke){var ye=c.exec(de.slice(ke));return ye?(ce.p=d.get(ye[0].toLowerCase()),ke+ye[0].length):-1}function $(ce,de,ke){var ye=g.exec(de.slice(ke));return ye?(ce.w=v.get(ye[0].toLowerCase()),ke+ye[0].length):-1}function G(ce,de,ke){var ye=h.exec(de.slice(ke));return ye?(ce.w=m.get(ye[0].toLowerCase()),ke+ye[0].length):-1}function V(ce,de,ke){var ye=w.exec(de.slice(ke));return ye?(ce.m=k.get(ye[0].toLowerCase()),ke+ye[0].length):-1}function U(ce,de,ke){var ye=x.exec(de.slice(ke));return ye?(ce.m=b.get(ye[0].toLowerCase()),ke+ye[0].length):-1}function A(ce,de,ke){return z(ce,e,de,ke)}function I(ce,de,ke){return z(ce,n,de,ke)}function j(ce,de,ke){return z(ce,r,de,ke)}function q(ce){return o[ce.getDay()]}function K(ce){return s[ce.getDay()]}function te(ce){return l[ce.getMonth()]}function Y(ce){return a[ce.getMonth()]}function H(ce){return i[+(ce.getHours()>=12)]}function M(ce){return 1+~~(ce.getMonth()/3)}function P(ce){return o[ce.getUTCDay()]}function W(ce){return s[ce.getUTCDay()]}function X(ce){return l[ce.getUTCMonth()]}function ie(ce){return a[ce.getUTCMonth()]}function oe(ce){return i[+(ce.getUTCHours()>=12)]}function Te(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var de=_(ce+="",N);return de.toString=function(){return ce},de},parse:function(ce){var de=F(ce+="",!1);return de.toString=function(){return ce},de},utcFormat:function(ce){var de=_(ce+="",O);return de.toString=function(){return ce},de},utcParse:function(ce){var de=F(ce+="",!0);return de.toString=function(){return ce},de}}}var iY={"-":"",_:" ",0:"0"},Xi=/^\s*\d+/,H6e=/^%/,q6e=/[\\^$*+?|[\]().{}]/g;function zn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function G6e(t){return t.replace(q6e,"\\$&")}function Ub(t){return new RegExp("^(?:"+t.map(G6e).join("|")+")","i")}function Fb(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function K6e(t,e,n){var r=Xi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function W6e(t,e,n){var r=Xi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Y6e(t,e,n){var r=Xi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function J6e(t,e,n){var r=Xi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function X6e(t,e,n){var r=Xi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function sY(t,e,n){var r=Xi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function oY(t,e,n){var r=Xi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Q6e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Z6e(t,e,n){var r=Xi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function e7e(t,e,n){var r=Xi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function aY(t,e,n){var r=Xi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function t7e(t,e,n){var r=Xi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function lY(t,e,n){var r=Xi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function n7e(t,e,n){var r=Xi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function r7e(t,e,n){var r=Xi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function i7e(t,e,n){var r=Xi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function s7e(t,e,n){var r=Xi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function o7e(t,e,n){var r=H6e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function a7e(t,e,n){var r=Xi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function l7e(t,e,n){var r=Xi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function cY(t,e){return zn(t.getDate(),e,2)}function c7e(t,e){return zn(t.getHours(),e,2)}function u7e(t,e){return zn(t.getHours()%12||12,e,2)}function d7e(t,e){return zn(1+TE.count(Od(t),t),e,3)}function Ice(t,e){return zn(t.getMilliseconds(),e,3)}function f7e(t,e){return Ice(t,e)+"000"}function h7e(t,e){return zn(t.getMonth()+1,e,2)}function p7e(t,e){return zn(t.getMinutes(),e,2)}function m7e(t,e){return zn(t.getSeconds(),e,2)}function g7e(t){var e=t.getDay();return e===0?7:e}function y7e(t,e){return zn(DC.count(Od(t)-1,t),e,2)}function Rce(t){var e=t.getDay();return e>=4||e===0?Fx(t):Fx.ceil(t)}function x7e(t,e){return t=Rce(t),zn(Fx.count(Od(t),t)+(Od(t).getDay()===4),e,2)}function v7e(t){return t.getDay()}function b7e(t,e){return zn(bk.count(Od(t)-1,t),e,2)}function w7e(t,e){return zn(t.getFullYear()%100,e,2)}function E7e(t,e){return t=Rce(t),zn(t.getFullYear()%100,e,2)}function S7e(t,e){return zn(t.getFullYear()%1e4,e,4)}function A7e(t,e){var n=t.getDay();return t=n>=4||n===0?Fx(t):Fx.ceil(t),zn(t.getFullYear()%1e4,e,4)}function T7e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+zn(e/60|0,"0",2)+zn(e%60,"0",2)}function uY(t,e){return zn(t.getUTCDate(),e,2)}function k7e(t,e){return zn(t.getUTCHours(),e,2)}function N7e(t,e){return zn(t.getUTCHours()%12||12,e,2)}function C7e(t,e){return zn(1+jC.count(Md(t),t),e,3)}function Oce(t,e){return zn(t.getUTCMilliseconds(),e,3)}function P7e(t,e){return Oce(t,e)+"000"}function _7e(t,e){return zn(t.getUTCMonth()+1,e,2)}function I7e(t,e){return zn(t.getUTCMinutes(),e,2)}function R7e(t,e){return zn(t.getUTCSeconds(),e,2)}function O7e(t){var e=t.getUTCDay();return e===0?7:e}function M7e(t,e){return zn(BC.count(Md(t)-1,t),e,2)}function Mce(t){var e=t.getUTCDay();return e>=4||e===0?$x(t):$x.ceil(t)}function L7e(t,e){return t=Mce(t),zn($x.count(Md(t),t)+(Md(t).getUTCDay()===4),e,2)}function j7e(t){return t.getUTCDay()}function D7e(t,e){return zn(wk.count(Md(t)-1,t),e,2)}function B7e(t,e){return zn(t.getUTCFullYear()%100,e,2)}function U7e(t,e){return t=Mce(t),zn(t.getUTCFullYear()%100,e,2)}function F7e(t,e){return zn(t.getUTCFullYear()%1e4,e,4)}function $7e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?$x(t):$x.ceil(t),zn(t.getUTCFullYear()%1e4,e,4)}function z7e(){return"+0000"}function dY(){return"%"}function fY(t){return+t}function hY(t){return Math.floor(+t/1e3)}var hg,Lce,jce;V7e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function V7e(t){return hg=V6e(t),Lce=hg.format,hg.parse,jce=hg.utcFormat,hg.utcParse,hg}function H7e(t){return new Date(t)}function q7e(t){return t instanceof Date?+t:+new Date(+t)}function C6(t,e,n,r,i,s,o,a,l,c){var d=p6(),h=d.invert,m=d.domain,g=c(".%L"),v=c(":%S"),x=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),k=c("%b %d"),N=c("%B"),O=c("%Y");function D(_){return(l(_)<_?g:a(_)<_?v:o(_)<_?x:s(_)<_?b:r(_)<_?i(_)<_?w:k:n(_)<_?N:O)(_)}return d.invert=function(_){return new Date(h(_))},d.domain=function(_){return arguments.length?m(Array.from(_,q7e)):m().map(H7e)},d.ticks=function(_){var F=m();return t(F[0],F[F.length-1],_??10)},d.tickFormat=function(_,F){return F==null?D:c(F)},d.nice=function(_){var F=m();return(!_||typeof _.range!="function")&&(_=e(F[0],F[F.length-1],_??10)),_?m(Ece(F,_)):d},d.copy=function(){return AE(d,C6(t,e,n,r,i,s,o,a,l,c))},d}function G7e(){return dl.apply(C6($6e,z6e,Od,k6,DC,TE,A6,E6,Yp,Lce).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function K7e(){return dl.apply(C6(U6e,F6e,Md,N6,BC,jC,T6,S6,Yp,jce).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function UC(){var t=0,e=1,n,r,i,s,o=oo,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:o(i===0?.5:(h=(s(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([t,e]=h,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(o=h,c):o};function d(h){return function(m){var g,v;return arguments.length?([g,v]=m,o=h(g,v),c):[o(0),o(1)]}}return c.range=d(yv),c.rangeRound=d(h6),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return s=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),c}}function Kh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Dce(){var t=Gh(UC()(oo));return t.copy=function(){return Kh(t,Dce())},Hd.apply(t,arguments)}function Bce(){var t=y6(UC()).domain([1,10]);return t.copy=function(){return Kh(t,Bce()).base(t.base())},Hd.apply(t,arguments)}function Uce(){var t=x6(UC());return t.copy=function(){return Kh(t,Uce()).constant(t.constant())},Hd.apply(t,arguments)}function P6(){var t=v6(UC());return t.copy=function(){return Kh(t,P6()).exponent(t.exponent())},Hd.apply(t,arguments)}function W7e(){return P6.apply(null,arguments).exponent(.5)}function Fce(){var t=[],e=oo;function n(r){if(r!=null&&!isNaN(r=+r))return e((EE(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ah),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>O8e(t,s/r))},n.copy=function(){return Fce(e).domain(t)},Hd.apply(n,arguments)}function FC(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,c=oo,d,h=!1,m;function g(x){return isNaN(x=+x)?m:(x=.5+((x=+d(x))-s)*(r*x<r*s?a:l),c(h?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,n]=x,i=d(t=+t),s=d(e=+e),o=d(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g):[t,e,n]},g.clamp=function(x){return arguments.length?(h=!!x,g):h},g.interpolator=function(x){return arguments.length?(c=x,g):c};function v(x){return function(b){var w,k,N;return arguments.length?([w,k,N]=b,c=o6e(x,[w,k,N]),g):[c(0),c(.5),c(1)]}}return g.range=v(yv),g.rangeRound=v(h6),g.unknown=function(x){return arguments.length?(m=x,g):m},function(x){return d=x,i=x(t),s=x(e),o=x(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,g}}function $ce(){var t=Gh(FC()(oo));return t.copy=function(){return Kh(t,$ce())},Hd.apply(t,arguments)}function zce(){var t=y6(FC()).domain([.1,1,10]);return t.copy=function(){return Kh(t,zce()).base(t.base())},Hd.apply(t,arguments)}function Vce(){var t=x6(FC());return t.copy=function(){return Kh(t,Vce()).constant(t.constant())},Hd.apply(t,arguments)}function _6(){var t=v6(FC());return t.copy=function(){return Kh(t,_6()).exponent(t.exponent())},Hd.apply(t,arguments)}function Y7e(){return _6.apply(null,arguments).exponent(.5)}const c1=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:u6,scaleDiverging:$ce,scaleDivergingLog:zce,scaleDivergingPow:_6,scaleDivergingSqrt:Y7e,scaleDivergingSymlog:Vce,scaleIdentity:wce,scaleImplicit:OL,scaleLinear:bce,scaleLog:Sce,scaleOrdinal:c6,scalePoint:j8e,scalePow:b6,scaleQuantile:kce,scaleQuantize:Nce,scaleRadial:Tce,scaleSequential:Dce,scaleSequentialLog:Bce,scaleSequentialPow:P6,scaleSequentialQuantile:Fce,scaleSequentialSqrt:W7e,scaleSequentialSymlog:Uce,scaleSqrt:P6e,scaleSymlog:Ace,scaleThreshold:Cce,scaleTime:G7e,scaleUtc:K7e,tickFormat:vce},Symbol.toStringTag,{value:"Module"}));var qd=t=>t.chartData,$C=Le([qd],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),I6=(t,e,n,r)=>r?$C(t):qd(t),Hce=(t,e,n)=>n?$C(t):qd(t);function jh(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(hr(e)&&hr(n))return!0}return!1}function pY(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function qce(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(hr(n))i=n;else if(typeof n=="function")return;if(hr(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(jh(o))return o}}function J7e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(jh(r))return pY(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,a;if(i==="auto")e!=null&&(o=Math.min(...e));else if(_t(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&NK.test(i)){var l=NK.exec(i);if(l==null||l[1]==null||e==null)o=void 0;else{var c=+l[1];o=e[0]-c}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(a=Math.max(...e));else if(_t(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&CK.test(s)){var d=CK.exec(s);if(d==null||d[1]==null||e==null)a=void 0;else{var h=+d[1];a=e[1]+h}}else a=e==null?void 0:e[1];var m=[o,a];if(jh(m))return e==null?m:pY(m,e,n)}}}var xv=1e9,X7e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},O6,Rr=!0,ll="[DecimalError] ",_m=ll+"Invalid argument: ",R6=ll+"Exponent out of range: ",vv=Math.floor,_p=Math.pow,Q7e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,aa,zi=1e7,Ar=7,Gce=9007199254740991,Ek=vv(Gce/Ar),Mt={};Mt.absoluteValue=Mt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Mt.comparedTo=Mt.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Mt.decimalPlaces=Mt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ar;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Mt.dividedBy=Mt.div=function(t){return xd(this,new this.constructor(t))};Mt.dividedToIntegerBy=Mt.idiv=function(t){var e=this,n=e.constructor;return ur(xd(e,new n(t),0,1),n.precision)};Mt.equals=Mt.eq=function(t){return!this.cmp(t)};Mt.exponent=function(){return Ai(this)};Mt.greaterThan=Mt.gt=function(t){return this.cmp(t)>0};Mt.greaterThanOrEqualTo=Mt.gte=function(t){return this.cmp(t)>=0};Mt.isInteger=Mt.isint=function(){return this.e>this.d.length-2};Mt.isNegative=Mt.isneg=function(){return this.s<0};Mt.isPositive=Mt.ispos=function(){return this.s>0};Mt.isZero=function(){return this.s===0};Mt.lessThan=Mt.lt=function(t){return this.cmp(t)<0};Mt.lessThanOrEqualTo=Mt.lte=function(t){return this.cmp(t)<1};Mt.logarithm=Mt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(aa))throw Error(ll+"NaN");if(n.s<1)throw Error(ll+(n.s?"NaN":"-Infinity"));return n.eq(aa)?new r(0):(Rr=!1,e=xd(bw(n,s),bw(t,s),s),Rr=!0,ur(e,i))};Mt.minus=Mt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Yce(e,t):Kce(e,(t.s=-t.s,t))};Mt.modulo=Mt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(ll+"NaN");return n.s?(Rr=!1,e=xd(n,t,0,1).times(t),Rr=!0,n.minus(e)):ur(new r(n),i)};Mt.naturalExponential=Mt.exp=function(){return Wce(this)};Mt.naturalLogarithm=Mt.ln=function(){return bw(this)};Mt.negated=Mt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Mt.plus=Mt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Kce(e,t):Yce(e,(t.s=-t.s,t))};Mt.precision=Mt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(_m+t);if(e=Ai(i)+1,r=i.d.length-1,n=r*Ar+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Mt.squareRoot=Mt.sqrt=function(){var t,e,n,r,i,s,o,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(ll+"NaN")}for(t=Ai(a),Rr=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=Dc(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=vv((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(s=r,r=s.plus(xd(a,s,o+2)).times(.5),Dc(s.d).slice(0,o)===(e=Dc(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(ur(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;o+=4}return Rr=!0,ur(r,n)};Mt.times=Mt.mul=function(t){var e,n,r,i,s,o,a,l,c,d=this,h=d.constructor,m=d.d,g=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,l=m.length,c=g.length,l<c&&(s=m,m=g,g=s,o=l,l=c,c=o),s=[],o=l+c,r=o;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+g[r]*m[i-r-1]+e,s[i--]=a%zi|0,e=a/zi|0;s[i]=(s[i]+e)%zi|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Rr?ur(t,h.precision):t};Mt.toDecimalPlaces=Mt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Qc(t,0,xv),e===void 0?e=r.rounding:Qc(e,0,8),ur(n,t+Ai(n)+1,e))};Mt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Wm(r,!0):(Qc(t,0,xv),e===void 0?e=i.rounding:Qc(e,0,8),r=ur(new i(r),t+1,e),n=Wm(r,!0,t+1)),n};Mt.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Wm(i):(Qc(t,0,xv),e===void 0?e=s.rounding:Qc(e,0,8),r=ur(new s(i),t+Ai(i)+1,e),n=Wm(r.abs(),!1,t+Ai(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Mt.toInteger=Mt.toint=function(){var t=this,e=t.constructor;return ur(new e(t),Ai(t)+1,e.rounding)};Mt.toNumber=function(){return+this};Mt.toPower=Mt.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,c=12,d=+(t=new l(t));if(!t.s)return new l(aa);if(a=new l(a),!a.s){if(t.s<1)throw Error(ll+"Infinity");return a}if(a.eq(aa))return a;if(r=l.precision,t.eq(aa))return ur(a,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=a.s,o){if((n=d<0?-d:d)<=Gce){for(i=new l(aa),e=Math.ceil(r/Ar+4),Rr=!1;n%2&&(i=i.times(a),gY(i.d,e)),n=vv(n/2),n!==0;)a=a.times(a),gY(a.d,e);return Rr=!0,t.s<0?new l(aa).div(i):ur(i,r)}}else if(s<0)throw Error(ll+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Rr=!1,i=t.times(bw(a,r+c)),Rr=!0,i=Wce(i),i.s=s,i};Mt.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Ai(i),r=Wm(i,n<=s.toExpNeg||n>=s.toExpPos)):(Qc(t,1,xv),e===void 0?e=s.rounding:Qc(e,0,8),i=ur(new s(i),t,e),n=Ai(i),r=Wm(i,t<=n||n<=s.toExpNeg,t)),r};Mt.toSignificantDigits=Mt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Qc(t,1,xv),e===void 0?e=r.rounding:Qc(e,0,8)),ur(new r(n),t,e)};Mt.toString=Mt.valueOf=Mt.val=Mt.toJSON=Mt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ai(t),n=t.constructor;return Wm(t,e<=n.toExpNeg||e>=n.toExpPos)};function Kce(t,e){var n,r,i,s,o,a,l,c,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Rr?ur(e,h):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),s=o-i,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,i=o,a=l.length),o=Math.ceil(h/Ar),a=o>a?o+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/zi|0,l[s]%=zi;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Rr?ur(e,h):e}function Qc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(_m+t)}function Dc(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=Ar-r.length,n&&(s+=Yf(n)),s+=r;o=t[e],r=o+"",n=Ar-r.length,n&&(s+=Yf(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var xd=(function(){function t(r,i){var s,o=0,a=r.length;for(r=r.slice();a--;)s=r[a]*i+o,r[a]=s%zi|0,o=s/zi|0;return o&&r.unshift(o),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*zi+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var a,l,c,d,h,m,g,v,x,b,w,k,N,O,D,_,F,z,L=r.constructor,$=r.s==i.s?1:-1,G=r.d,V=i.d;if(!r.s)return new L(r);if(!i.s)throw Error(ll+"Division by zero");for(l=r.e-i.e,F=V.length,D=G.length,g=new L($),v=g.d=[],c=0;V[c]==(G[c]||0);)++c;if(V[c]>(G[c]||0)&&--l,s==null?k=s=L.precision:o?k=s+(Ai(r)-Ai(i))+1:k=s,k<0)return new L(0);if(k=k/Ar+2|0,c=0,F==1)for(d=0,V=V[0],k++;(c<D||d)&&k--;c++)N=d*zi+(G[c]||0),v[c]=N/V|0,d=N%V|0;else{for(d=zi/(V[0]+1)|0,d>1&&(V=t(V,d),G=t(G,d),F=V.length,D=G.length),O=F,x=G.slice(0,F),b=x.length;b<F;)x[b++]=0;z=V.slice(),z.unshift(0),_=V[0],V[1]>=zi/2&&++_;do d=0,a=e(V,x,F,b),a<0?(w=x[0],F!=b&&(w=w*zi+(x[1]||0)),d=w/_|0,d>1?(d>=zi&&(d=zi-1),h=t(V,d),m=h.length,b=x.length,a=e(h,x,m,b),a==1&&(d--,n(h,F<m?z:V,m))):(d==0&&(a=d=1),h=V.slice()),m=h.length,m<b&&h.unshift(0),n(x,h,b),a==-1&&(b=x.length,a=e(V,x,F,b),a<1&&(d++,n(x,F<b?z:V,b))),b=x.length):a===0&&(d++,x=[0]),v[c++]=d,a&&x[0]?x[b++]=G[O]||0:(x=[G[O]],b=1);while((O++<D||x[0]!==void 0)&&k--)}return v[0]||v.shift(),g.e=l,ur(g,o?s+Ai(g)+1:s)}})();function Wce(t,e){var n,r,i,s,o,a,l=0,c=0,d=t.constructor,h=d.precision;if(Ai(t)>16)throw Error(R6+Ai(t));if(!t.s)return new d(aa);for(Rr=!1,a=h,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(_p(2,c))/Math.LN10*2+5|0,a+=r,n=i=s=new d(aa),d.precision=a;;){if(i=ur(i.times(t),a),n=n.times(++l),o=s.plus(xd(i,n,a)),Dc(o.d).slice(0,a)===Dc(s.d).slice(0,a)){for(;c--;)s=ur(s.times(s),a);return d.precision=h,e==null?(Rr=!0,ur(s,h)):s}s=o}}function Ai(t){for(var e=t.e*Ar,n=t.d[0];n>=10;n/=10)e++;return e}function W3(t,e,n){if(e>t.LN10.sd())throw Rr=!0,n&&(t.precision=n),Error(ll+"LN10 precision limit exceeded");return ur(new t(t.LN10),e)}function Yf(t){for(var e="";t--;)e+="0";return e}function bw(t,e){var n,r,i,s,o,a,l,c,d,h=1,m=10,g=t,v=g.d,x=g.constructor,b=x.precision;if(g.s<1)throw Error(ll+(g.s?"NaN":"-Infinity"));if(g.eq(aa))return new x(0);if(e==null?(Rr=!1,c=b):c=e,g.eq(10))return e==null&&(Rr=!0),W3(x,c);if(c+=m,x.precision=c,n=Dc(v),r=n.charAt(0),s=Ai(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=Dc(g.d),r=n.charAt(0),h++;s=Ai(g),r>1?(g=new x("0."+n),s++):g=new x(r+"."+n.slice(1))}else return l=W3(x,c+2,b).times(s+""),g=bw(new x(r+"."+n.slice(1)),c-m).plus(l),x.precision=b,e==null?(Rr=!0,ur(g,b)):g;for(a=o=g=xd(g.minus(aa),g.plus(aa),c),d=ur(g.times(g),c),i=3;;){if(o=ur(o.times(d),c),l=a.plus(xd(o,new x(i),c)),Dc(l.d).slice(0,c)===Dc(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(W3(x,c+2,b).times(s+""))),a=xd(a,new x(h),c),x.precision=b,e==null?(Rr=!0,ur(a,b)):a;a=l,i+=2}}function mY(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=vv(n/Ar),t.d=[],r=(n+1)%Ar,n<0&&(r+=Ar),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Ar;r<i;)t.d.push(+e.slice(r,r+=Ar));e=e.slice(r),r=Ar-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Rr&&(t.e>Ek||t.e<-Ek))throw Error(R6+n)}else t.s=0,t.e=0,t.d=[0];return t}function ur(t,e,n){var r,i,s,o,a,l,c,d,h=t.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Ar,i=e,c=h[d=0];else{if(d=Math.ceil((r+1)/Ar),s=h.length,d>=s)return t;for(c=s=h[d],o=1;s>=10;s/=10)o++;r%=Ar,i=r-Ar+o}if(n!==void 0&&(s=_p(10,o-i-1),a=c/s%10|0,l=e<0||h[d+1]!==void 0||c%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?c/_p(10,o-i):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(s=Ai(t),h.length=1,e=e-s-1,h[0]=_p(10,(Ar-e%Ar)%Ar),t.e=vv(-e/Ar)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,s=1,d--):(h.length=d+1,s=_p(10,Ar-r),h[d]=i>0?(c/_p(10,o-i)%_p(10,i)|0)*s:0),l)for(;;)if(d==0){(h[0]+=s)==zi&&(h[0]=1,++t.e);break}else{if(h[d]+=s,h[d]!=zi)break;h[d--]=0,s=1}for(r=h.length;h[--r]===0;)h.pop();if(Rr&&(t.e>Ek||t.e<-Ek))throw Error(R6+Ai(t));return t}function Yce(t,e){var n,r,i,s,o,a,l,c,d,h,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),Rr?ur(e,g):e;if(l=t.d,h=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(d=o<0,d?(n=l,o=-o,a=h.length):(n=h,r=c,a=l.length),i=Math.max(Math.ceil(g/Ar),a)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=h.length,d=i<a,d&&(a=i),i=0;i<a;i++)if(l[i]!=h[i]){d=l[i]<h[i];break}o=0}for(d&&(n=l,l=h,h=n,e.s=-e.s),a=l.length,i=h.length-a;i>0;--i)l[a++]=0;for(i=h.length;i>o;){if(l[--i]<h[i]){for(s=i;s&&l[--s]===0;)l[s]=zi-1;--l[s],l[i]+=zi}l[i]-=h[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Rr?ur(e,g):e):new m(0)}function Wm(t,e,n){var r,i=Ai(t),s=Dc(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Yf(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Yf(-i-1)+s,n&&(r=n-o)>0&&(s+=Yf(r))):i>=o?(s+=Yf(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Yf(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Yf(r))),t.s<0?"-"+s:s}function gY(t,e){if(t.length>e)return t.length=e,!0}function Jce(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(_m+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return mY(o,s.toString())}else if(typeof s!="string")throw Error(_m+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Q7e.test(s))mY(o,s);else throw Error(_m+s)}if(i.prototype=Mt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Jce,i.config=i.set=Z7e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Z7e(t){if(!t||typeof t!="object")throw Error(ll+"Object expected");var e,n,r,i=["precision",1,xv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(vv(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(_m+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(_m+n+": "+r);return this}var O6=Jce(X7e);aa=new O6(1);const Zn=O6;var eBe=t=>t,Xce={},Qce=t=>t===Xce,yY=t=>function e(){return arguments.length===0||arguments.length===1&&Qce(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Zce=(t,e)=>t===1?e:yY(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(o=>o!==Xce).length;return s>=t?e(...r):Zce(t-s,yY(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];var c=r.map(d=>Qce(d)?a.shift():d);return e(...c,...a)}))}),tBe=t=>Zce(t.length,t),DL=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},nBe=tBe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),rBe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return eBe;var i=n.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce((a,l)=>l(a),s(...arguments))}};function eue(t){var e;return t===0?e=1:e=Math.floor(new Zn(t).abs().log(10).toNumber())+1,e}function tue(t,e,n){for(var r=new Zn(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var nue=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},rue=(t,e,n)=>{if(t.lte(0))return new Zn(0);var r=eue(t.toNumber()),i=new Zn(10).pow(r),s=t.div(i),o=r!==1?.05:.1,a=new Zn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),l=a.mul(i);return e?new Zn(l.toNumber()):new Zn(Math.ceil(l.toNumber()))},iBe=(t,e,n)=>{var r=new Zn(1),i=new Zn(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new Zn(10).pow(eue(t)-1),i=new Zn(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Zn(Math.floor(t)))}else t===0?i=new Zn(Math.floor((e-1)/2)):n||(i=new Zn(Math.floor(t)));var o=Math.floor((e-1)/2),a=rBe(nBe(l=>i.add(new Zn(l-o).mul(r)).toNumber()),DL);return a(0,e)},iue=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Zn(0),tickMin:new Zn(0),tickMax:new Zn(0)};var o=rue(new Zn(n).sub(e).div(r-1),i,s),a;e<=0&&n>=0?a=new Zn(0):(a=new Zn(e).add(n).div(2),a=a.sub(new Zn(a).mod(o)));var l=Math.ceil(a.sub(e).div(o).toNumber()),c=Math.ceil(new Zn(n).sub(a).div(o).toNumber()),d=l+c+1;return d>r?iue(e,n,r,i,s+1):(d<r&&(c=n>0?c+(r-d):c,l=n>0?l:l+(r-d)),{step:o,tickMin:a.sub(new Zn(l).mul(o)),tickMax:a.add(new Zn(c).mul(o))})},sBe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[a,l]=nue([n,r]);if(a===-1/0||l===1/0){var c=l===1/0?[a,...DL(0,i-1).map(()=>1/0)]:[...DL(0,i-1).map(()=>-1/0),l];return n>r?c.reverse():c}if(a===l)return iBe(a,i,s);var{step:d,tickMin:h,tickMax:m}=iue(a,l,o,s,0),g=tue(h,m.add(new Zn(.1).mul(d)),d);return n>r?g.reverse():g},oBe=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,a]=nue([r,i]);if(o===-1/0||a===1/0)return[r,i];if(o===a)return[o];var l=Math.max(n,2),c=rue(new Zn(a).sub(o).div(l-1),s,0),d=[...tue(new Zn(o),new Zn(a),c),a];return s===!1&&(d=d.map(h=>Math.round(h))),r>i?d.reverse():d},sue=t=>t.rootProps.maxBarSize,aBe=t=>t.rootProps.barGap,oue=t=>t.rootProps.barCategoryGap,lBe=t=>t.rootProps.barSize,kE=t=>t.rootProps.stackOffset,aue=t=>t.rootProps.reverseStackOrder,M6=t=>t.options.chartName,L6=t=>t.rootProps.syncId,lue=t=>t.rootProps.syncMethod,j6=t=>t.options.eventEmitter,cBe=t=>t.rootProps.baseValue,li={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},id={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ta={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},zC=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},uBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:id.angleAxisId,includeHidden:!1,name:void 0,reversed:id.reversed,scale:id.scale,tick:id.tick,tickCount:void 0,ticks:void 0,type:id.type,unit:void 0},dBe={allowDataOverflow:ta.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ta.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ta.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ta.scale,tick:ta.tick,tickCount:ta.tickCount,ticks:void 0,type:ta.type,unit:void 0},fBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:id.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:id.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:id.scale,tick:id.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},hBe={allowDataOverflow:ta.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ta.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ta.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ta.scale,tick:ta.tick,tickCount:ta.tickCount,ticks:void 0,type:"category",unit:void 0},D6=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?fBe:uBe,B6=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?hBe:dBe,VC=t=>t.polarOptions,U6=Le([zd,Vd,Ri],sce),cue=Le([VC,U6],(t,e)=>{if(t!=null)return zs(t.innerRadius,e,0)}),uue=Le([VC,U6],(t,e)=>{if(t!=null)return zs(t.outerRadius,e,e*.8)}),pBe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},due=Le([VC],pBe);Le([D6,due],zC);var fue=Le([U6,cue,uue],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Le([B6,fue],zC);var hue=Le([Nn,VC,cue,uue,zd,Vd],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:a,startAngle:l,endAngle:c}=e;return{cx:zs(o,i,i/2),cy:zs(a,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Lr=(t,e)=>e,NE=(t,e,n)=>n;function HC(t){return t==null?void 0:t.id}function pue(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,o=new Map;return t.forEach(a=>{var l,c=(l=a.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var d=HC(a);c.forEach((h,m)=>{var g=s==null||i?m:String(Yn(h,s,null)),v=Yn(h,a.dataKey,0),x;o.has(g)?x=o.get(g):x={},Object.assign(x,{[d]:v}),o.set(g,x)})}}),Array.from(o.values())}function qC(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var GC=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function KC(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function mBe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Mi=t=>{var e=Nn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},bv=t=>t.tooltip.settings.axisId;function xY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xY(Object(n),!0).forEach(function(r){gBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gBe(t,e,n){return(e=yBe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yBe(t){var e=xBe(t,"string");return typeof e=="symbol"?e:e+""}function xBe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BL=[0,"auto"],Di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},mue=(t,e)=>t.cartesianAxis.xAxis[e],Gd=(t,e)=>{var n=mue(t,e);return n??Di},Bi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:BL,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:vE},gue=(t,e)=>t.cartesianAxis.yAxis[e],Kd=(t,e)=>{var n=gue(t,e);return n??Bi},vBe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},F6=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??vBe},Hr=(t,e,n)=>{switch(e){case"xAxis":return Gd(t,n);case"yAxis":return Kd(t,n);case"zAxis":return F6(t,n);case"angleAxis":return D6(t,n);case"radiusAxis":return B6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},bBe=(t,e,n)=>{switch(e){case"xAxis":return Gd(t,n);case"yAxis":return Kd(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},CE=(t,e,n)=>{switch(e){case"xAxis":return Gd(t,n);case"yAxis":return Kd(t,n);case"angleAxis":return D6(t,n);case"radiusAxis":return B6(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},yue=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function $6(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var PE=t=>t.graphicalItems.cartesianItems,wBe=Le([Lr,NE],$6),z6=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),_E=Le([PE,Hr,wBe],z6,{memoizeOptions:{resultEqualityCheck:KC}}),xue=Le([_E],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(qC)),vue=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),EBe=Le([_E],vue),V6=t=>t.map(e=>e.data).filter(Boolean).flat(1),SBe=Le([_E],V6,{memoizeOptions:{resultEqualityCheck:KC}}),H6=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},q6=Le([SBe,I6],H6),G6=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Yn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Yn(i,r)}))):t.map(r=>({value:r})),WC=Le([q6,Hr,_E],G6);function bue(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function X2(t){if(Jc(t)||t instanceof Date){var e=Number(t);if(hr(e))return e}}function vY(t){if(Array.isArray(t)){var e=[X2(t[0]),X2(t[1])];return jh(e)?e:void 0}var n=X2(t);if(n!=null)return[n,n]}function Ld(t){return t.map(X2).filter(UOe)}function ABe(t,e,n){return!n||typeof e!="number"||ol(e)?[]:n.length?Ld(n.flatMap(r=>{var i=Yn(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!hr(s)||!hr(o)))return[e-s,e+o]})):[]}var Li=t=>{var e=Mi(t),n=bv(t);return CE(t,e,n)},IE=Le([Li],t=>t==null?void 0:t.dataKey),TBe=Le([xue,I6,Li],pue),wue=(t,e,n,r)=>{var i={},s=e.reduce((o,a)=>{if(a.stackId==null)return o;var l=o[a.stackId];return l==null&&(l=[]),l.push(a),o[a.stackId]=l,o},i);return Object.fromEntries(Object.entries(s).map(o=>{var[a,l]=o,c=r?[...l].reverse():l,d=c.map(HC);return[a,{stackedData:ije(t,d,n),graphicalItems:c}]}))},Ak=Le([TBe,xue,kE,aue],wue),Eue=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var o=lje(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},kBe=Le([Hr],t=>t.allowDataOverflow),K6=t=>{var e;if(t==null||!("domain"in t))return BL;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Ld(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:BL},W6=Le([Hr],K6),Y6=Le([W6,kBe],qce),NBe=Le([Ak,qd,Lr,Y6],Eue,{memoizeOptions:{resultEqualityCheck:GC}}),YC=t=>t.errorBars,CBe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>bue(n,r)),Tk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),a=Math.max(...s);return[o,a]}},J6=(t,e,n,r,i)=>{var s,o;if(n.length>0&&t.forEach(a=>{n.forEach(l=>{var c,d,h=(c=r[l.id])===null||c===void 0?void 0:c.filter(w=>bue(i,w)),m=Yn(a,(d=e.dataKey)!==null&&d!==void 0?d:l.dataKey),g=ABe(a,m,h);if(g.length>=2){var v=Math.min(...g),x=Math.max(...g);(s==null||v<s)&&(s=v),(o==null||x>o)&&(o=x)}var b=vY(m);b!=null&&(s=s==null?b[0]:Math.min(s,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(a=>{var l=vY(Yn(a,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),o=o==null?l[1]:Math.max(o,l[1]))}),hr(s)&&hr(o))return[s,o]},PBe=Le([q6,Hr,EBe,YC,Lr],J6,{memoizeOptions:{resultEqualityCheck:GC}});function _Be(t){var{value:e}=t;if(Jc(e)||e instanceof Date)return e}var IBe=(t,e,n)=>{var r=t.map(_Be).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&jae(r))?cce(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},Sue=t=>t.referenceElements.dots,wv=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),RBe=Le([Sue,Lr,NE],wv),Aue=t=>t.referenceElements.areas,OBe=Le([Aue,Lr,NE],wv),Tue=t=>t.referenceElements.lines,MBe=Le([Tue,Lr,NE],wv),kue=(t,e)=>{if(t!=null){var n=Ld(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},LBe=Le(RBe,Lr,kue),Nue=(t,e)=>{if(t!=null){var n=Ld(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},jBe=Le([OBe,Lr],Nue);function DBe(t){var e;if(t.x!=null)return Ld([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Ld(n)}function BBe(t){var e;if(t.y!=null)return Ld([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Ld(n)}var Cue=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?DBe(r):BBe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},UBe=Le([MBe,Lr],Cue),FBe=Le(LBe,UBe,jBe,(t,e,n)=>Tk(t,n,e)),X6=(t,e,n,r,i,s,o,a)=>{if(n!=null)return n;var l=o==="vertical"&&a==="xAxis"||o==="horizontal"&&a==="yAxis",c=l?Tk(r,s,i):Tk(s,i);return J7e(e,c,t.allowDataOverflow)},$Be=Le([Hr,W6,Y6,NBe,PBe,FBe,Nn,Lr],X6,{memoizeOptions:{resultEqualityCheck:GC}}),zBe=[0,1],Q6=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:a,type:l}=t,c=ru(e,s);if(c&&a==null){var d;return cce(0,(d=n==null?void 0:n.length)!==null&&d!==void 0?d:0)}return l==="category"?IBe(r,t,c):i==="expand"?zBe:o}},Z6=Le([Hr,Nn,q6,WC,kE,Lr,$Be],Q6),Pue=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var a="scale".concat(pE(s));return a in c1?a:"point"}}},Ev=Le([Hr,Nn,yue,M6,Lr],Pue);function VBe(t){if(t!=null){if(t in c1)return c1[t]();var e="scale".concat(pE(t));if(e in c1)return c1[e]()}}function e7(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=VBe(e);if(i!=null){var s=i.domain(n).range(r);return ZLe(s),s}}}var t7=(t,e,n)=>{var r=K6(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&jh(t))return sBe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&jh(t))return oBe(t,e.tickCount,e.allowDecimals)}},n7=Le([Z6,CE,Ev],t7),r7=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&jh(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],o=e[1],a=n[n.length-1];return[Math.min(i,s),Math.max(o,a)]}return e},HBe=Le([Hr,Z6,n7,Lr],r7),qBe=Le(WC,Hr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Ld(t.map(h=>h.value))).sort((h,m)=>h-m),i=r[0],s=r[r.length-1];if(i==null||s==null)return 1/0;var o=s-i;if(o===0)return 1/0;for(var a=0;a<r.length-1;a++){var l=r[a],c=r[a+1];if(!(l==null||c==null)){var d=c-l;n=Math.min(n,d)}}return n/o}}),_ue=Le(qBe,Nn,oue,Ri,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!hr(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=zs(n,t*s),a=t*s/2;return a-o-(a-o)/s*o}return 0}),GBe=(t,e,n)=>{var r=Gd(t,e);return r==null||typeof r.padding!="string"?0:_ue(t,"xAxis",e,n,r.padding)},KBe=(t,e,n)=>{var r=Kd(t,e);return r==null||typeof r.padding!="string"?0:_ue(t,"yAxis",e,n,r.padding)},WBe=Le(Gd,GBe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),YBe=Le(Kd,KBe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),JBe=Le([Ri,WBe,PC,CC,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),XBe=Le([Ri,Nn,YBe,PC,CC,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),RE=(t,e,n,r)=>{var i;switch(e){case"xAxis":return JBe(t,n,r);case"yAxis":return XBe(t,n,r);case"zAxis":return(i=F6(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return due(t);case"radiusAxis":return fue(t,n);default:return}},Iue=Le([Hr,RE],zC),JC=Le([Hr,Ev,HBe,Iue],e7);Le([_E,YC,Lr],CBe);function Rue(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var XC=(t,e)=>e,QC=(t,e,n)=>n,QBe=Le(kC,XC,QC,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Rue)),ZBe=Le(NC,XC,QC,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Rue)),Oue=(t,e)=>({width:t.width,height:e.height}),eUe=(t,e)=>{var n=typeof e.width=="number"?e.width:vE;return{width:n,height:t.height}},Mue=Le(Ri,Gd,Oue),tUe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},nUe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},rUe=Le(Vd,Ri,QBe,XC,QC,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=Oue(e,a);o==null&&(o=tUe(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[a.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height}),s}),iUe=Le(zd,Ri,ZBe,XC,QC,(t,e,n,r,i)=>{var s={},o;return n.forEach(a=>{var l=eUe(e,a);o==null&&(o=nUe(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[a.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width}),s}),sUe=(t,e)=>{var n=Gd(t,e);if(n!=null)return rUe(t,n.orientation,n.mirror)},oUe=Le([Ri,Gd,sUe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),aUe=(t,e)=>{var n=Kd(t,e);if(n!=null)return iUe(t,n.orientation,n.mirror)},lUe=Le([Ri,Kd,aUe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Lue=Le(Ri,Kd,(t,e)=>{var n=typeof e.width=="number"?e.width:vE;return{width:n,height:t.height}}),bY=(t,e,n)=>{switch(e){case"xAxis":return Mue(t,n).width;case"yAxis":return Lue(t,n).height;default:return}},jue=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,a=ru(t,r),l=e.map(c=>c.value);if(o&&a&&s==="category"&&i&&jae(l))return l}},i7=Le([Nn,WC,Hr,Lr],jue),Due=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=ru(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(a=>a.value)}},s7=Le([Nn,WC,CE,Lr],Due),wY=Le([Nn,bBe,Ev,JC,i7,s7,RE,n7,Lr],(t,e,n,r,i,s,o,a,l)=>{if(e!=null){var c=ru(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:a,range:o,realScaleType:n,scale:r}}}),cUe=(t,e,n,r,i,s,o,a,l)=>{if(!(e==null||r==null)){var c=ru(t,l),{type:d,ticks:h,tickCount:m}=e,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,v=d==="category"&&r.bandwidth?r.bandwidth()/g:0;v=l==="angleAxis"&&s!=null&&s.length>=2?Yi(s[0]-s[1])*2*v:v;var x=h||i;if(x){var b=x.map((w,k)=>{var N=o?o.indexOf(w):w;return{index:k,coordinate:r(N)+v,value:w,offset:v}});return b.filter(w=>hr(w.coordinate))}return c&&a?a.map((w,k)=>({coordinate:r(w)+v,value:w,index:k,offset:v})).filter(w=>hr(w.coordinate)):r.ticks?r.ticks(m).map(w=>({coordinate:r(w)+v,value:w,offset:v})):r.domain().map((w,k)=>({coordinate:r(w)+v,value:o?o[w]:w,index:k,offset:v}))}},Bue=Le([Nn,CE,Ev,JC,n7,RE,i7,s7,Lr],cUe),uUe=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var a=ru(t,o),{tickCount:l}=e,c=0;return c=o==="angleAxis"&&(r==null?void 0:r.length)>=2?Yi(r[0]-r[1])*2*c:c,a&&s?s.map((d,h)=>({coordinate:n(d)+c,value:d,index:h,offset:c})):n.ticks?n.ticks(l).map(d=>({coordinate:n(d)+c,value:d,offset:c})):n.domain().map((d,h)=>({coordinate:n(d)+c,value:i?i[d]:d,index:h,offset:c}))}},Zc=Le([Nn,CE,JC,RE,i7,s7,Lr],uUe),eu=Le(Hr,JC,(t,e)=>{if(!(t==null||e==null))return Sk(Sk({},t),{},{scale:e})}),dUe=Le([Hr,Ev,Z6,Iue],e7);Le((t,e,n)=>F6(t,n),dUe,(t,e)=>{if(!(t==null||e==null))return Sk(Sk({},t),{},{scale:e})});var fUe=Le([Nn,kC,NC],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Uue=t=>t.options.defaultTooltipEventType,Fue=t=>t.options.validateTooltipEventTypes;function $ue(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function o7(t,e){var n=Uue(t),r=Fue(t);return $ue(e,n,r)}function hUe(t){return Ut(e=>o7(e,t))}var zue=(t,e)=>{var n,r=Number(e);if(!(ol(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},pUe=t=>t.tooltip.settings,th={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},mUe={itemInteraction:{click:th,hover:th},axisInteraction:{click:th,hover:th},keyboardInteraction:th,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Vue=jo({name:"tooltip",initialState:mUe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:_r()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Gl(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:_r()},removeTooltipEntrySettings:{reducer(t,e){var n=Gl(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:_r()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:gUe,replaceTooltipEntrySettings:yUe,removeTooltipEntrySettings:xUe,setTooltipSettingsState:vUe,setActiveMouseOverItemIndex:Hue,mouseLeaveItem:bUe,mouseLeaveChart:que,setActiveClickItemIndex:wUe,setMouseOverAxisIndex:Gue,setMouseClickAxisIndex:EUe,setSyncInteraction:UL,setKeyboardInteraction:FL}=Vue.actions,SUe=Vue.reducer;function EY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EY(Object(n),!0).forEach(function(r){AUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AUe(t,e,n){return(e=TUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TUe(t){var e=kUe(t,"string");return typeof e=="symbol"?e:e+""}function kUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NUe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function CUe(t){return t.index!=null}var Kue=(t,e,n,r)=>{if(e==null)return th;var i=NUe(t,e,n);if(i==null)return th;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(CUe(i)){if(s)return YA(YA({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return YA(YA({},th),{},{coordinate:i.coordinate})};function PUe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function _Ue(t,e){var n=PUe(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),o=Math.max(r,i);return n>=s&&n<=o}function IUe(t,e,n){if(n==null||e==null)return!0;var r=Yn(t,e);return r==null||!jh(n)?!0:_Ue(r,n)}var a7=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!hr(s))return i;var o=0,a=1/0;e.length>0&&(a=e.length-1);var l=Math.max(o,Math.min(s,a)),c=e[l];return c==null||IUe(c,n,r)?String(l):null},Wue=(t,e,n,r,i,s,o,a)=>{if(!(s==null||a==null)){var l=o[0],c=l==null?void 0:a(l.positions,s);if(c!=null)return c;var d=i==null?void 0:i[Number(s)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:d.coordinate}}}},Yue=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var a;return((a=o.settings)===null||a===void 0?void 0:a.graphicalItemId)===i})},OE=t=>t.options.tooltipPayloadSearcher,Sv=t=>t.tooltip;function SY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SY(Object(n),!0).forEach(function(r){RUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RUe(t,e,n){return(e=OUe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OUe(t){var e=MUe(t,"string");return typeof e=="symbol"?e:e+""}function MUe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LUe(t,e){return t??e}var Jue=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:a,computedData:l,dataStartIndex:c,dataEndIndex:d}=n,h=[];return t.reduce((m,g)=>{var v,{dataDefinedOnItem:x,settings:b}=g,w=LUe(x,a),k=Array.isArray(w)?Ple(w,c,d):w,N=(v=b==null?void 0:b.dataKey)!==null&&v!==void 0?v:r,O=b==null?void 0:b.nameKey,D;if(r&&Array.isArray(k)&&!Array.isArray(k[0])&&o==="axis"?D=Dae(k,r,i):D=s(k,e,l,O),Array.isArray(D))D.forEach(F=>{var z=AY(AY({},b),{},{name:F.name,unit:F.unit,color:void 0,fill:void 0});m.push(PK({tooltipEntrySettings:z,dataKey:F.dataKey,payload:F.payload,value:Yn(F.payload,F.dataKey),name:F.name}))});else{var _;m.push(PK({tooltipEntrySettings:b,dataKey:N,payload:D,value:Yn(D,N),name:(_=Yn(D,O))!==null&&_!==void 0?_:b==null?void 0:b.name}))}return m},h)}},l7=Le([Li,Nn,yue,M6,Mi],Pue),jUe=Le([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),DUe=Le([Mi,bv],$6),Av=Le([jUe,Li,DUe],z6,{memoizeOptions:{resultEqualityCheck:KC}}),BUe=Le([Av],t=>t.filter(qC)),UUe=Le([Av],V6,{memoizeOptions:{resultEqualityCheck:KC}}),Tv=Le([UUe,qd],H6),FUe=Le([BUe,qd,Li],pue),c7=Le([Tv,Li,Av],G6),Xue=Le([Li],K6),$Ue=Le([Li],t=>t.allowDataOverflow),Que=Le([Xue,$Ue],qce),zUe=Le([Av],t=>t.filter(qC)),VUe=Le([FUe,zUe,kE,aue],wue),HUe=Le([VUe,qd,Mi,Que],Eue),qUe=Le([Av],vue),GUe=Le([Tv,Li,qUe,YC,Mi],J6,{memoizeOptions:{resultEqualityCheck:GC}}),KUe=Le([Sue,Mi,bv],wv),WUe=Le([KUe,Mi],kue),YUe=Le([Aue,Mi,bv],wv),JUe=Le([YUe,Mi],Nue),XUe=Le([Tue,Mi,bv],wv),QUe=Le([XUe,Mi],Cue),ZUe=Le([WUe,QUe,JUe],Tk),eFe=Le([Li,Xue,Que,HUe,GUe,ZUe,Nn,Mi],X6),ME=Le([Li,Nn,Tv,c7,kE,Mi,eFe],Q6),tFe=Le([ME,Li,l7],t7),nFe=Le([Li,ME,tFe,Mi],r7),Zue=t=>{var e=Mi(t),n=bv(t),r=!1;return RE(t,e,n,r)},ede=Le([Li,Zue],zC),tde=Le([Li,l7,nFe,ede],e7),rFe=Le([Nn,c7,Li,Mi],jue),iFe=Le([Nn,c7,Li,Mi],Due),sFe=(t,e,n,r,i,s,o,a)=>{if(e){var{type:l}=e,c=ru(t,a);if(r){var d=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=l==="category"&&r.bandwidth?r.bandwidth()/d:0;return h=a==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Yi(i[0]-i[1])*2*h:h,c&&o?o.map((m,g)=>({coordinate:r(m)+h,value:m,index:g,offset:h})):r.domain().map((m,g)=>({coordinate:r(m)+h,value:s?s[m]:m,index:g,offset:h}))}}},Wd=Le([Nn,Li,l7,tde,Zue,rFe,iFe,Mi],sFe),u7=Le([Uue,Fue,pUe],(t,e,n)=>$ue(n.shared,t,e)),nde=t=>t.tooltip.settings.trigger,d7=t=>t.tooltip.settings.defaultIndex,LE=Le([Sv,u7,nde,d7],Kue),Dh=Le([LE,Tv,IE,ME],a7),rde=Le([Wd,Dh],zue),f7=Le([LE],t=>{if(t)return t.dataKey}),oFe=Le([LE],t=>{if(t)return t.graphicalItemId}),ide=Le([Sv,u7,nde,d7],Yue),aFe=Le([zd,Vd,Nn,Ri,Wd,d7,ide,OE],Wue),lFe=Le([LE,aFe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),cFe=Le([LE],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),uFe=Le([ide,Dh,qd,IE,rde,OE,u7],Jue),dFe=Le([uFe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function TY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TY(Object(n),!0).forEach(function(r){fFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fFe(t,e,n){return(e=hFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hFe(t){var e=pFe(t,"string");return typeof e=="symbol"?e:e+""}function pFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mFe=()=>Ut(Li),gFe=()=>{var t=mFe(),e=Ut(Wd),n=Ut(tde);return Lh(!t||!n?void 0:kY(kY({},t),{},{scale:n}),e)};function NY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NY(Object(n),!0).forEach(function(r){yFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yFe(t,e,n){return(e=xFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xFe(t){var e=vFe(t,"string");return typeof e=="symbol"?e:e+""}function vFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bFe=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},wFe=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:o}=r;return pg(pg(pg({},r),wi(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var a=i.coordinate,{angle:l}=r;return pg(pg(pg({},r),wi(r.cx,r.cy,a,l)),{},{angle:l,radius:a})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function EFe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var sde=(t,e,n,r,i)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var a=0;a<o;a++){var l,c,d,h,m,g=a>0?(l=n[a-1])===null||l===void 0?void 0:l.coordinate:(c=n[o-1])===null||c===void 0?void 0:c.coordinate,v=(d=n[a])===null||d===void 0?void 0:d.coordinate,x=a>=o-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(m=n[a+1])===null||m===void 0?void 0:m.coordinate,b=void 0;if(!(g==null||v==null||x==null))if(Yi(v-g)!==Yi(x-v)){var w=[];if(Yi(x-v)===Yi(i[1]-i[0])){b=x;var k=v+i[1]-i[0];w[0]=Math.min(k,(k+g)/2),w[1]=Math.max(k,(k+g)/2)}else{b=g;var N=x+i[1]-i[0];w[0]=Math.min(v,(N+v)/2),w[1]=Math.max(v,(N+v)/2)}var O=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(t>O[0]&&t<=O[1]||t>=w[0]&&t<=w[1]){var D;return(D=n[a])===null||D===void 0?void 0:D.index}}else{var _=Math.min(g,x),F=Math.max(g,x);if(t>(_+v)/2&&t<=(F+v)/2){var z;return(z=n[a])===null||z===void 0?void 0:z.index}}}else if(e)for(var L=0;L<o;L++){var $=e[L];if($!=null){var G=e[L+1],V=e[L-1];if(L===0&&G!=null&&t<=($.coordinate+G.coordinate)/2||L===o-1&&V!=null&&t>($.coordinate+V.coordinate)/2||L>0&&L<o-1&&V!=null&&G!=null&&t>($.coordinate+V.coordinate)/2&&t<=($.coordinate+G.coordinate)/2)return $.index}}return-1},ode=()=>Ut(M6),h7=(t,e)=>e,ade=(t,e,n)=>n,p7=(t,e,n,r)=>r,SFe=Le(Wd,t=>yC(t,e=>e.coordinate)),m7=Le([Sv,h7,ade,p7],Kue),g7=Le([m7,Tv,IE,ME],a7),AFe=(t,e,n)=>{if(e!=null){var r=Sv(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},lde=Le([Sv,h7,ade,p7],Yue),kk=Le([zd,Vd,Nn,Ri,Wd,p7,lde,OE],Wue),TFe=Le([m7,kk],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),cde=Le([Wd,g7],zue),kFe=Le([lde,g7,qd,IE,cde,OE,h7],Jue),NFe=Le([m7,g7],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),CFe=(t,e,n,r,i,s,o)=>{if(!(!t||!n||!r||!i)&&EFe(t,o)){var a=cje(t,e),l=sde(a,s,i,n,r),c=bFe(e,i,l,t);return{activeIndex:String(l),activeCoordinate:c}}},PFe=(t,e,n,r,i,s,o)=>{if(!(!t||!r||!i||!s||!n)){var a=f8e(t,n);if(a){var l=uje(a,e),c=sde(l,o,s,r,i),d=wFe(e,s,c,a);return{activeIndex:String(c),activeCoordinate:d}}}},_Fe=(t,e,n,r,i,s,o,a)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?CFe(t,e,r,i,s,o,a):PFe(t,e,n,r,i,s,o)},IFe=Le(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),RFe=Le(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(li)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:mBe}});function CY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CY(Object(n),!0).forEach(function(r){OFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OFe(t,e,n){return(e=MFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MFe(t){var e=LFe(t,"string");return typeof e=="symbol"?e:e+""}function LFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jFe={},DFe={zIndexMap:Object.values(li).reduce((t,e)=>PY(PY({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),jFe)},BFe=new Set(Object.values(li));function UFe(t){return BFe.has(t)}var ude=jo({name:"zIndex",initialState:DFe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:_r()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!UFe(n)&&delete t.zIndexMap[n])},prepare:_r()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:_r()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:_r()}}}),{registerZIndexPortal:FFe,unregisterZIndexPortal:$Fe,registerZIndexPortalElement:zFe,unregisterZIndexPortalElement:VFe}=ude.actions,HFe=ude.reducer;function po(t){var{zIndex:e,children:n}=t,r=$je(),i=r&&e!==void 0&&e!==0,s=Ji(),o=Mr();S.useLayoutEffect(()=>i?(o(FFe({zIndex:e})),()=>{o($Fe({zIndex:e}))}):mE,[o,e,i]);var a=Ut(l=>IFe(l,e,s));return i?a?a0.createPortal(n,a):null:n}function $L(){return $L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$L.apply(null,arguments)}function _Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_Y(Object(n),!0).forEach(function(r){qFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_Y(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qFe(t,e,n){return(e=GFe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GFe(t){var e=KFe(t,"string");return typeof e=="symbol"?e:e+""}function KFe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WFe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return S.isValidElement(e)?S.cloneElement(e,r):S.createElement(n,r)}function YFe(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:o,layout:a,cursor:l,tooltipEventType:c,chartName:d}=t,h=n,m=r,g=i;if(!l||!h||d!=="ScatterChart"&&c!=="axis")return null;var v,x,b;if(d==="ScatterChart")v=h,x=kDe,b=li.cursorLine;else if(d==="BarChart")v=NDe(a,h,s,o),x=ice,b=li.cursorRectangle;else if(a==="radial"&&Fae(h)){var{cx:w,cy:k,radius:N,startAngle:O,endAngle:D}=oce(h);v={cx:w,cy:k,startAngle:O,endAngle:D,innerRadius:N,outerRadius:N},x=lce,b=li.cursorLine}else v={points:g8e(a,h,s)},x=xy,b=li.cursorLine;var _=typeof l=="object"&&"className"in l?l.className:void 0,F=JA(JA(JA(JA({stroke:"#ccc",pointerEvents:"none"},s),v),zm(l)),{},{payload:m,payloadIndex:g,className:Mn("recharts-tooltip-cursor",_)});return S.createElement(po,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:b},S.createElement(WFe,{cursor:l,cursorComp:x,cursorProps:F}))}function JFe(t){var e=gFe(),n=Fle(),r=qh(),i=ode();return e==null||n==null||r==null||i==null?null:S.createElement(YFe,$L({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var dde=S.createContext(null),XFe=()=>S.useContext(dde),Y3={exports:{}},IY;function QFe(){return IY||(IY=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new i(d,h||l,m),v=n?n+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)e.call(d,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},a.prototype.listeners=function(c){var d=n?n+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,v=new Array(g);m<g;m++)v[m]=h[m].fn;return v},a.prototype.listenerCount=function(c){var d=n?n+c:c,h=this._events[d];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,d,h,m,g,v){var x=n?n+c:c;if(!this._events[x])return!1;var b=this._events[x],w=arguments.length,k,N;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,m),!0;case 5:return b.fn.call(b.context,d,h,m,g),!0;case 6:return b.fn.call(b.context,d,h,m,g,v),!0}for(N=1,k=new Array(w-1);N<w;N++)k[N-1]=arguments[N];b.fn.apply(b.context,k)}else{var O=b.length,D;for(N=0;N<O;N++)switch(b[N].once&&this.removeListener(c,b[N].fn,void 0,!0),w){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,d);break;case 3:b[N].fn.call(b[N].context,d,h);break;case 4:b[N].fn.call(b[N].context,d,h,m);break;default:if(!k)for(D=1,k=new Array(w-1);D<w;D++)k[D-1]=arguments[D];b[N].fn.apply(b[N].context,k)}}return!0},a.prototype.on=function(c,d,h){return s(this,c,d,h,!1)},a.prototype.once=function(c,d,h){return s(this,c,d,h,!0)},a.prototype.removeListener=function(c,d,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!d)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var x=0,b=[],w=v.length;x<w;x++)(v[x].fn!==d||m&&!v[x].once||h&&v[x].context!==h)&&b.push(v[x]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},a.prototype.removeAllListeners=function(c){var d;return c?(d=n?n+c:c,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Y3)),Y3.exports}var ZFe=QFe();const y7=bs(ZFe);var ww=new y7,zL="recharts.syncEvent.tooltip",RY="recharts.syncEvent.brush";function ZC(t,e){if(e){var n=Number.parseInt(e,10);if(!ol(n))return t==null?void 0:t[n]}}var e9e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},fde=jo({name:"options",initialState:e9e,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),t9e=fde.reducer,{createEventEmitter:n9e}=fde.actions;function r9e(t){return t.tooltip.syncInteraction}var i9e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},hde=jo({name:"chartData",initialState:i9e,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:OY,setDataStartEndIndexes:s9e,setComputedData:pyt}=hde.actions,o9e=hde.reducer,a9e=["x","y"];function MY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MY(Object(n),!0).forEach(function(r){l9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l9e(t,e,n){return(e=c9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c9e(t){var e=u9e(t,"string");return typeof e=="symbol"?e:e+""}function u9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d9e(t,e){if(t==null)return{};var n,r,i=f9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function f9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function h9e(){var t=Ut(L6),e=Ut(j6),n=Mr(),r=Ut(lue),i=Ut(Wd),s=qh(),o=_C(),a=Ut(l=>l.rootProps.className);S.useEffect(()=>{if(t==null)return mE;var l=(c,d,h)=>{if(e!==h&&t===c){if(r==="index"){var m;if(o&&d!==null&&d!==void 0&&(m=d.payload)!==null&&m!==void 0&&m.coordinate&&d.payload.sourceViewBox){var g=d.payload.coordinate,{x:v,y:x}=g,b=d9e(g,a9e),{x:w,y:k,width:N,height:O}=d.payload.sourceViewBox,D=mg(mg({},b),{},{x:o.x+(N?(v-w)/N:0)*o.width,y:o.y+(O?(x-k)/O:0)*o.height});n(mg(mg({},d),{},{payload:mg(mg({},d.payload),{},{coordinate:D})}))}else n(d);return}if(i!=null){var _;if(typeof r=="function"){var F={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},z=r(i,F);_=i[z]}else r==="value"&&(_=i.find(j=>String(j.value)===d.payload.label));var{coordinate:L}=d.payload;if(_==null||d.payload.active===!1||L==null||o==null){n(UL({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:G}=L,V=Math.min($,o.x+o.width),U=Math.min(G,o.y+o.height),A={x:s==="horizontal"?_.coordinate:V,y:s==="horizontal"?U:_.coordinate},I=UL({active:d.payload.active,coordinate:A,dataKey:d.payload.dataKey,index:String(_.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});n(I)}}};return ww.on(zL,l),()=>{ww.off(zL,l)}},[a,n,e,t,r,i,s,o])}function p9e(){var t=Ut(L6),e=Ut(j6),n=Mr();S.useEffect(()=>{if(t==null)return mE;var r=(i,s,o)=>{e!==o&&t===i&&n(s9e(s))};return ww.on(RY,r),()=>{ww.off(RY,r)}},[n,e,t])}function m9e(){var t=Mr();S.useEffect(()=>{t(n9e())},[t]),h9e(),p9e()}function g9e(t,e,n,r,i,s){var o=Ut(g=>AFe(g,t,e)),a=Ut(j6),l=Ut(L6),c=Ut(lue),d=Ut(r9e),h=d==null?void 0:d.active,m=_C();S.useEffect(()=>{if(!h&&l!=null&&a!=null){var g=UL({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:m,graphicalItemId:void 0});ww.emit(zL,l,g,a)}},[h,n,o,i,r,a,l,c,s,m])}function LY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LY(Object(n),!0).forEach(function(r){y9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y9e(t,e,n){return(e=x9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x9e(t){var e=v9e(t,"string");return typeof e=="symbol"?e:e+""}function v9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b9e(t){return t.dataKey}function w9e(t,e){return S.isValidElement(t)?S.cloneElement(t,e):typeof t=="function"?S.createElement(t,e):S.createElement(sDe,e)}var DY=[],E9e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Nk(t){var e,n,r=Ti(t,E9e),{active:i,allowEscapeViewBox:s,animationDuration:o,animationEasing:a,content:l,filterNull:c,isAnimationActive:d,offset:h,payloadUniqBy:m,position:g,reverseDirection:v,useTranslate3d:x,wrapperStyle:b,cursor:w,shared:k,trigger:N,defaultIndex:O,portal:D,axisId:_}=r,F=Mr(),z=typeof O=="number"?String(O):O;S.useEffect(()=>{F(vUe({shared:k,trigger:N,axisId:_,active:i,defaultIndex:z}))},[F,k,N,_,i,z]);var L=_C(),$=Zle(),G=hUe(k),{activeIndex:V,isActive:U}=(e=Ut(oe=>NFe(oe,G,N,z)))!==null&&e!==void 0?e:{},A=Ut(oe=>kFe(oe,G,N,z)),I=Ut(oe=>cde(oe,G,N,z)),j=Ut(oe=>TFe(oe,G,N,z)),q=A,K=XFe(),te=(n=i??U)!==null&&n!==void 0?n:!1,[Y,H]=WMe([q,te]),M=G==="axis"?I:void 0;g9e(G,N,j,M,V,te);var P=D??K;if(P==null||L==null||G==null)return null;var W=q??DY;te||(W=DY),c&&W.length&&(W=bMe(W.filter(oe=>oe.value!=null&&(oe.hide!==!0||r.includeHidden)),m,b9e));var X=W.length>0,ie=S.createElement(fDe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:a,isAnimationActive:d,active:te,coordinate:j,hasPayload:X,offset:h,position:g,reverseDirection:v,useTranslate3d:x,viewBox:L,wrapperStyle:b,lastBoundingBox:Y,innerRef:H,hasPortalFromProps:!!D},w9e(l,jY(jY({},r),{},{payload:W,label:M,active:te,activeIndex:V,coordinate:j,accessibilityLayer:$})));return S.createElement(S.Fragment,null,a0.createPortal(ie,P),te&&S.createElement(JFe,{cursor:w,tooltipEventType:G,coordinate:j,payload:W,index:V}))}var kv=t=>null;kv.displayName="Cell";function S9e(t,e,n){return(e=A9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A9e(t){var e=T9e(t,"string");return typeof e=="symbol"?e:e+""}function T9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class k9e{constructor(e){S9e(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function BY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N9e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BY(Object(n),!0).forEach(function(r){C9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C9e(t,e,n){return(e=P9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P9e(t){var e=_9e(t,"string");return typeof e=="symbol"?e:e+""}function _9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I9e={cacheSize:2e3,enableCache:!0},pde=N9e({},I9e),UY=new k9e(pde.cacheSize),R9e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},FY="recharts_measurement_span";function O9e(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",a=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(a)}var $Y=(t,e)=>{try{var n=document.getElementById(FY);n||(n=document.createElement("span"),n.setAttribute("id",FY),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,R9e,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},S1=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||wE.isSsr)return{width:0,height:0};if(!pde.enableCache)return $Y(e,n);var r=O9e(e,n),i=UY.get(r);if(i)return i;var s=$Y(e,n);return UY.set(r,s),s},mde;function M9e(t,e,n){return(e=L9e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L9e(t){var e=j9e(t,"string");return typeof e=="symbol"?e:e+""}function j9e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,VY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,D9e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,B9e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,U9e={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},F9e=["cm","mm","pt","pc","in","Q","px"];function $9e(t){return F9e.includes(t)}var Yg="NaN";function z9e(t,e){return t*U9e[e]}class us{static parse(e){var n,[,r,i]=(n=B9e.exec(e))!==null&&n!==void 0?n:[];return r==null?us.NaN:new us(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,ol(e)&&(this.unit=""),n!==""&&!D9e.test(n)&&(this.num=NaN,this.unit=""),$9e(n)&&(this.num=z9e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new us(NaN,""):new us(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new us(NaN,""):new us(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new us(NaN,""):new us(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new us(NaN,""):new us(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ol(this.num)}}mde=us;M9e(us,"NaN",new mde(NaN,""));function gde(t){if(t==null||t.includes(Yg))return Yg;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=zY.exec(e))!==null&&n!==void 0?n:[],o=us.parse(r??""),a=us.parse(s??""),l=i==="*"?o.multiply(a):o.divide(a);if(l.isNaN())return Yg;e=e.replace(zY,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,d,h,m]=(c=VY.exec(e))!==null&&c!==void 0?c:[],g=us.parse(d??""),v=us.parse(m??""),x=h==="+"?g.add(v):g.subtract(v);if(x.isNaN())return Yg;e=e.replace(VY,x.toString())}return e}var HY=/\(([^()]*)\)/;function V9e(t){for(var e=t,n;(n=HY.exec(e))!=null;){var[,r]=n;e=e.replace(HY,gde(r))}return e}function H9e(t){var e=t.replace(/\s+/g,"");return e=V9e(e),e=gde(e),e}function q9e(t){try{return H9e(t)}catch{return Yg}}function J3(t){var e=q9e(t.slice(5,-1));return e===Yg?"":e}var G9e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],K9e=["dx","dy","angle","className","breakAll"];function VL(){return VL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VL.apply(null,arguments)}function qY(t,e){if(t==null)return{};var n,r,i=W9e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function W9e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var yde=/[ \f\n\r\t\v\u2028\u2029]+/,xde=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];kr(e)||(n?i=e.toString().split(""):i=e.toString().split(yde));var s=i.map(a=>({word:a,width:S1(a,r).width})),o=n?0:S1("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function Y9e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var vde=(t,e,n,r)=>t.reduce((i,s)=>{var{word:o,width:a}=s,l=i[i.length-1];if(l&&a!=null&&(e==null||r||l.width+a+n<Number(e)))l.words.push(o),l.width+=a+n;else{var c={words:[o],width:a};i.push(c)}return i},[]),bde=t=>t.reduce((e,n)=>e.width>n.width?e:n),J9e="",GY=(t,e,n,r,i,s,o,a)=>{var l=t.slice(0,e),c=xde({breakAll:n,style:r,children:l+J9e});if(!c)return[!1,[]];var d=vde(c.wordsWithComputedWidth,s,o,a),h=d.length>i||bde(d).width>Number(s);return[h,d]},X9e=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:a,breakAll:l}=t,c=_t(s),d=String(o),h=vde(e,r,n,i);if(!c||i)return h;var m=h.length>s||bde(h).width>Number(r);if(!m)return h;for(var g=0,v=d.length-1,x=0,b;g<=v&&x<=d.length-1;){var w=Math.floor((g+v)/2),k=w-1,[N,O]=GY(d,k,l,a,s,r,n,i),[D]=GY(d,w,l,a,s,r,n,i);if(!N&&!D&&(g=w+1),N&&D&&(v=w-1),!N&&D){b=O;break}x++}return b||h},KY=t=>{var e=kr(t)?[]:t.toString().split(yde);return[{words:e,width:void 0}]},Q9e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!wE.isSsr){var a,l,c=xde({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:d,spaceWidth:h}=c;a=d,l=h}else return KY(r);return X9e({breakAll:s,children:r,maxLines:o,style:i},a,l,e,!!n)}return KY(r)},wde="#808080",Z9e={angle:0,breakAll:!1,capHeight:"0.71em",fill:wde,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},eP=S.forwardRef((t,e)=>{var n=Ti(t,Z9e),{x:r,y:i,lineHeight:s,capHeight:o,fill:a,scaleToFit:l,textAnchor:c,verticalAnchor:d}=n,h=qY(n,G9e),m=S.useMemo(()=>Q9e({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:l,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,l,h.style,h.width]),{dx:g,dy:v,angle:x,className:b,breakAll:w}=h,k=qY(h,K9e);if(!Jc(r)||!Jc(i)||m.length===0)return null;var N=Number(r)+(_t(g)?g:0),O=Number(i)+(_t(v)?v:0);if(!hr(N)||!hr(O))return null;var D;switch(d){case"start":D=J3("calc(".concat(o,")"));break;case"middle":D=J3("calc(".concat((m.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:D=J3("calc(".concat(m.length-1," * -").concat(s,")"));break}var _=[];if(l){var F=m[0].width,{width:z}=h;_.push("scale(".concat(_t(z)&&_t(F)?z/F:1,")"))}return x&&_.push("rotate(".concat(x,", ").concat(N,", ").concat(O,")")),_.length&&(k.transform=_.join(" ")),S.createElement("text",VL({},Hs(k),{ref:e,x:N,y:O,className:Mn("recharts-text",b),textAnchor:c,fill:a.includes("url")?wde:a}),m.map((L,$)=>{var G=L.words.join(w?"":" ");return S.createElement("tspan",{x:N,dy:$===0?D:s,key:"".concat(G,"-").concat($)},G)}))});eP.displayName="Text";var e$e=["labelRef"],t$e=["content"];function WY(t,e){if(t==null)return{};var n,r,i=n$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function n$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function YY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YY(Object(n),!0).forEach(function(r){r$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r$e(t,e,n){return(e=i$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i$e(t){var e=s$e(t,"string");return typeof e=="symbol"?e:e+""}function s$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sd(){return sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sd.apply(null,arguments)}var Ede=S.createContext(null),o$e=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o,children:a}=t,l=S.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o}),[e,n,r,i,s,o]);return S.createElement(Ede.Provider,{value:l},a)},Sde=()=>{var t=S.useContext(Ede),e=_C();return t||Ule(e)},a$e=S.createContext(null),l$e=()=>{var t=S.useContext(a$e),e=Ut(hue);return t||e},c$e=t=>{var{value:e,formatter:n}=t,r=kr(t.children)?e:t.children;return typeof n=="function"?n(r):r},x7=t=>t!=null&&typeof t=="function",u$e=(t,e)=>{var n=Yi(e-t),r=Math.min(Math.abs(e-t),360);return n*r},d$e=(t,e,n,r,i)=>{var{offset:s,className:o}=t,{cx:a,cy:l,innerRadius:c,outerRadius:d,startAngle:h,endAngle:m,clockWise:g}=i,v=(c+d)/2,x=u$e(h,m),b=x>=0?1:-1,w,k;switch(e){case"insideStart":w=h+b*s,k=g;break;case"insideEnd":w=m-b*s,k=!g;break;case"end":w=m+b*s,k=g;break;default:throw new Error("Unsupported position ".concat(e))}k=x<=0?k:!k;var N=wi(a,l,v,w),O=wi(a,l,v,w+(k?1:-1)*359),D="M".concat(N.x,",").concat(N.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(k?0:1,`,
    `).concat(O.x,",").concat(O.y),_=kr(t.id)?aw("recharts-radial-line-"):t.id;return S.createElement("text",sd({},r,{dominantBaseline:"central",className:Mn("recharts-radial-bar-label",o)}),S.createElement("defs",null,S.createElement("path",{id:_,d:D})),S.createElement("textPath",{xlinkHref:"#".concat(_)},n))},f$e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:a,endAngle:l}=t,c=(a+l)/2;if(n==="outside"){var{x:d,y:h}=wi(r,i,o+e,c);return{x:d,y:h,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+o)/2,{x:g,y:v}=wi(r,i,m,c);return{x:g,y:v,textAnchor:"middle",verticalAnchor:"middle"}},HL=t=>"cx"in t&&_t(t.cx),h$e=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!HL(n)&&(s=n);var{x:o,y:a,upperWidth:l,lowerWidth:c,height:d}=e,h=o,m=o+(l-c)/2,g=(h+m)/2,v=(l+c)/2,x=h+l/2,b=d>=0?1:-1,w=b*r,k=b>0?"end":"start",N=b>0?"start":"end",O=l>=0?1:-1,D=O*r,_=O>0?"end":"start",F=O>0?"start":"end";if(i==="top"){var z={x:h+l/2,y:a-w,textAnchor:"middle",verticalAnchor:k};return ri(ri({},z),s?{height:Math.max(a-s.y,0),width:l}:{})}if(i==="bottom"){var L={x:m+c/2,y:a+d+w,textAnchor:"middle",verticalAnchor:N};return ri(ri({},L),s?{height:Math.max(s.y+s.height-(a+d),0),width:c}:{})}if(i==="left"){var $={x:g-D,y:a+d/2,textAnchor:_,verticalAnchor:"middle"};return ri(ri({},$),s?{width:Math.max($.x-s.x,0),height:d}:{})}if(i==="right"){var G={x:g+v+D,y:a+d/2,textAnchor:F,verticalAnchor:"middle"};return ri(ri({},G),s?{width:Math.max(s.x+s.width-G.x,0),height:d}:{})}var V=s?{width:v,height:d}:{};return i==="insideLeft"?ri({x:g+D,y:a+d/2,textAnchor:F,verticalAnchor:"middle"},V):i==="insideRight"?ri({x:g+v-D,y:a+d/2,textAnchor:_,verticalAnchor:"middle"},V):i==="insideTop"?ri({x:h+l/2,y:a+w,textAnchor:"middle",verticalAnchor:N},V):i==="insideBottom"?ri({x:m+c/2,y:a+d-w,textAnchor:"middle",verticalAnchor:k},V):i==="insideTopLeft"?ri({x:h+D,y:a+w,textAnchor:F,verticalAnchor:N},V):i==="insideTopRight"?ri({x:h+l-D,y:a+w,textAnchor:_,verticalAnchor:N},V):i==="insideBottomLeft"?ri({x:m+D,y:a+d-w,textAnchor:F,verticalAnchor:k},V):i==="insideBottomRight"?ri({x:m+c-D,y:a+d-w,textAnchor:_,verticalAnchor:k},V):i&&typeof i=="object"&&(_t(i.x)||_d(i.x))&&(_t(i.y)||_d(i.y))?ri({x:o+zs(i.x,v),y:a+zs(i.y,d),textAnchor:"end",verticalAnchor:"end"},V):ri({x,y:a+d/2,textAnchor:"middle",verticalAnchor:"middle"},V)},p$e={angle:0,offset:5,zIndex:li.label,position:"middle",textBreakAll:!1};function Jf(t){var e=Ti(t,p$e),{viewBox:n,position:r,value:i,children:s,content:o,className:a="",textBreakAll:l,labelRef:c}=e,d=l$e(),h=Sde(),m=r==="center"?h:d??h,g,v,x;if(n==null?g=m:HL(n)?g=n:g=Ule(n),!g||kr(i)&&kr(s)&&!S.isValidElement(o)&&typeof o!="function")return null;var b=ri(ri({},e),{},{viewBox:g});if(S.isValidElement(o)){var{labelRef:w}=b,k=WY(b,e$e);return S.cloneElement(o,k)}if(typeof o=="function"){var{content:N}=b,O=WY(b,t$e);if(v=S.createElement(o,O),S.isValidElement(v))return v}else v=c$e(e);var D=Hs(e);if(HL(g)){if(r==="insideStart"||r==="insideEnd"||r==="end")return d$e(e,r,v,D,g);x=f$e(g,e.offset,e.position)}else x=h$e(e,g);return S.createElement(po,{zIndex:e.zIndex},S.createElement(eP,sd({ref:c,className:Mn("recharts-label",a)},D,x,{textAnchor:Y9e(D.textAnchor)?D.textAnchor:x.textAnchor,breakAll:l}),v))}Jf.displayName="Label";var m$e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?S.createElement(Jf,sd({key:"label-implicit"},r)):Jc(t)?S.createElement(Jf,sd({key:"label-implicit",value:t},r)):S.isValidElement(t)?t.type===Jf?S.cloneElement(t,ri({key:"label-implicit"},r)):S.createElement(Jf,sd({key:"label-implicit",content:t},r)):x7(t)?S.createElement(Jf,sd({key:"label-implicit",content:t},r)):t&&typeof t=="object"?S.createElement(Jf,sd({},t,{key:"label-implicit"},r)):null};function g$e(t){var{label:e,labelRef:n}=t,r=Sde();return m$e(e,r,n)||null}var X3={},Q3={},JY;function y$e(){return JY||(JY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(Q3)),Q3}var Z3={},XY;function x$e(){return XY||(XY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Z3)),Z3}var QY;function v$e(){return QY||(QY=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y$e(),n=x$e(),r=W8();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(X3)),X3}var e4,ZY;function b$e(){return ZY||(ZY=1,e4=v$e().last),e4}var w$e=b$e();const E$e=bs(w$e);var S$e=["valueAccessor"],A$e=["dataKey","clockWise","id","textBreakAll","zIndex"];function Ck(){return Ck=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ck.apply(null,arguments)}function eJ(t,e){if(t==null)return{};var n,r,i=T$e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function T$e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var k$e=t=>Array.isArray(t.value)?E$e(t.value):t.value,Ade=S.createContext(void 0),v7=Ade.Provider,Tde=S.createContext(void 0),N$e=Tde.Provider;function C$e(){return S.useContext(Ade)}function P$e(){return S.useContext(Tde)}function Q2(t){var{valueAccessor:e=k$e}=t,n=eJ(t,S$e),{dataKey:r,clockWise:i,id:s,textBreakAll:o,zIndex:a}=n,l=eJ(n,A$e),c=C$e(),d=P$e(),h=c||d;return!h||!h.length?null:S.createElement(po,{zIndex:a??li.label},S.createElement(ei,{className:"recharts-label-list"},h.map((m,g)=>{var v,x=kr(r)?e(m,g):Yn(m&&m.payload,r),b=kr(s)?{}:{id:"".concat(s,"-").concat(g)};return S.createElement(Jf,Ck({key:"label-".concat(g)},Hs(m),l,b,{fill:(v=n.fill)!==null&&v!==void 0?v:m.fill,parentViewBox:m.parentViewBox,value:x,textBreakAll:o,viewBox:m.viewBox,index:g,zIndex:0}))})))}Q2.displayName="LabelList";function tP(t){var{label:e}=t;return e?e===!0?S.createElement(Q2,{key:"labelList-implicit"}):S.isValidElement(e)||x7(e)?S.createElement(Q2,{key:"labelList-implicit",content:e}):typeof e=="object"?S.createElement(Q2,Ck({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function qL(){return qL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qL.apply(null,arguments)}var kde=t=>{var{cx:e,cy:n,r,className:i}=t,s=Mn("recharts-dot",i);return _t(e)&&_t(n)&&_t(r)?S.createElement("circle",qL({},co(t),K8(t),{className:s,cx:e,cy:n,r})):null},Nde=t=>t.graphicalItems.polarItems,_$e=Le([Lr,NE],$6),nP=Le([Nde,Hr,_$e],z6),I$e=Le([nP],V6),rP=Le([I$e,$C],H6),R$e=Le([rP,Hr,nP],G6);Le([rP,Hr,nP],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var s,o=Yn(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Yn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var tJ=()=>{},O$e=Le([rP,Hr,nP,YC,Lr],J6),M$e=Le([Hr,W6,Y6,tJ,O$e,tJ,Nn,Lr],X6),Cde=Le([Hr,Nn,rP,R$e,kE,Lr,M$e],Q6),L$e=Le([Cde,Hr,Ev],t7);Le([Hr,Cde,L$e,Lr],r7);var j$e={radiusAxis:{},angleAxis:{}},Pde=jo({name:"polarAxis",initialState:j$e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:myt,removeRadiusAxis:gyt,addAngleAxis:yyt,removeAngleAxis:xyt}=Pde.actions,D$e=Pde.reducer;function nJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nJ(Object(n),!0).forEach(function(r){B$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B$e(t,e,n){return(e=U$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U$e(t){var e=F$e(t,"string");return typeof e=="symbol"?e:e+""}function F$e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $$e=(t,e)=>e,b7=Le([Nde,$$e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),z$e=[],w7=(t,e,n)=>(n==null?void 0:n.length)===0?z$e:n,_de=Le([$C,b7,w7],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>rJ(rJ({},e.presentationProps),s.props))),i!=null)return i}}),V$e=Le([_de,b7,w7],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var s,o=Yn(r,e.nameKey,e.name),a;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?a=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?a=r.fill:a=e.fill,{value:Hh(o,e.dataKey),color:a,payload:r,type:e.legendType}})}),H$e=Le([_de,b7,w7,Ri],(t,e,n,r)=>{if(!(e==null||t==null))return Gze({offset:r,pieSettings:e,displayedData:t,cells:n})}),t4={exports:{}},rr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iJ;function q$e(){if(iJ)return rr;iJ=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function v(x){if(typeof x=="object"&&x!==null){var b=x.$$typeof;switch(b){case t:switch(x=x.type,x){case n:case i:case r:case l:case c:case m:return x;default:switch(x=x&&x.$$typeof,x){case o:case a:case h:case d:return x;case s:return x;default:return b}}case e:return b}}}return rr.ContextConsumer=s,rr.ContextProvider=o,rr.Element=t,rr.ForwardRef=a,rr.Fragment=n,rr.Lazy=h,rr.Memo=d,rr.Portal=e,rr.Profiler=i,rr.StrictMode=r,rr.Suspense=l,rr.SuspenseList=c,rr.isContextConsumer=function(x){return v(x)===s},rr.isContextProvider=function(x){return v(x)===o},rr.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},rr.isForwardRef=function(x){return v(x)===a},rr.isFragment=function(x){return v(x)===n},rr.isLazy=function(x){return v(x)===h},rr.isMemo=function(x){return v(x)===d},rr.isPortal=function(x){return v(x)===e},rr.isProfiler=function(x){return v(x)===i},rr.isStrictMode=function(x){return v(x)===r},rr.isSuspense=function(x){return v(x)===l},rr.isSuspenseList=function(x){return v(x)===c},rr.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===l||x===c||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===d||x.$$typeof===o||x.$$typeof===s||x.$$typeof===a||x.$$typeof===g||x.getModuleId!==void 0)},rr.typeOf=v,rr}var sJ;function G$e(){return sJ||(sJ=1,t4.exports=q$e()),t4.exports}var K$e=G$e(),oJ=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",aJ=null,n4=null,Ide=t=>{if(t===aJ&&Array.isArray(n4))return n4;var e=[];return S.Children.forEach(t,n=>{kr(n)||(K$e.isFragment(n)?e=e.concat(Ide(n.props.children)):e.push(n))}),n4=e,aJ=t,e};function E7(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>oJ(i)):r=[oJ(e)],Ide(t).forEach(i=>{var s=Hm(i,"type.displayName")||Hm(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var S7=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,r4={},lJ;function W$e(){return lJ||(lJ=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(r4)),r4}var i4,cJ;function Y$e(){return cJ||(cJ=1,i4=W$e().isPlainObject),i4}var J$e=Y$e();const X$e=bs(J$e);var uJ,dJ,fJ,hJ,pJ;function mJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mJ(Object(n),!0).forEach(function(r){Q$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q$e(t,e,n){return(e=Z$e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z$e(t){var e=eze(t,"string");return typeof e=="symbol"?e:e+""}function eze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pk(){return Pk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pk.apply(null,arguments)}function $b(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var yJ=(t,e,n,r,i)=>{var s=n-r,o;return o=Jr(uJ||(uJ=$b(["M ",",",""])),t,e),o+=Jr(dJ||(dJ=$b(["L ",",",""])),t+n,e),o+=Jr(fJ||(fJ=$b(["L ",",",""])),t+n-s/2,e+i),o+=Jr(hJ||(hJ=$b(["L ",",",""])),t+n-s/2-r,e+i),o+=Jr(pJ||(pJ=$b(["L ",","," Z"])),t,e),o},tze={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nze=t=>{var e=Ti(t,tze),{x:n,y:r,upperWidth:i,lowerWidth:s,height:o,className:a}=e,{animationEasing:l,animationDuration:c,animationBegin:d,isUpdateAnimationActive:h}=e,m=S.useRef(null),[g,v]=S.useState(-1),x=S.useRef(i),b=S.useRef(s),w=S.useRef(o),k=S.useRef(n),N=S.useRef(r),O=gv(t,"trapezoid-");if(S.useEffect(()=>{if(m.current&&m.current.getTotalLength)try{var A=m.current.getTotalLength();A&&v(A)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||o!==+o||i===0&&s===0||o===0)return null;var D=Mn("recharts-trapezoid",a);if(!h)return S.createElement("g",null,S.createElement("path",Pk({},Hs(e),{className:D,d:yJ(n,r,i,s,o)})));var _=x.current,F=b.current,z=w.current,L=k.current,$=N.current,G="0px ".concat(g===-1?1:g,"px"),V="".concat(g,"px 0px"),U=ece(["strokeDasharray"],c,l);return S.createElement(mv,{animationId:O,key:O,canBegin:g>0,duration:c,easing:l,isActive:h,begin:d},A=>{var I=Gn(_,i,A),j=Gn(F,s,A),q=Gn(z,o,A),K=Gn(L,n,A),te=Gn($,r,A);m.current&&(x.current=I,b.current=j,w.current=q,k.current=K,N.current=te);var Y=A>0?{transition:U,strokeDasharray:V}:{strokeDasharray:G};return S.createElement("path",Pk({},Hs(e),{className:D,d:yJ(K,te,I,j,q),ref:m,style:gJ(gJ({},Y),e.style)}))})},rze=["option","shapeType","activeClassName"];function ize(t,e){if(t==null)return{};var n,r,i=sze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _k(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xJ(Object(n),!0).forEach(function(r){oze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oze(t,e,n){return(e=aze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aze(t){var e=lze(t,"string");return typeof e=="symbol"?e:e+""}function lze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cze(t,e){return _k(_k({},e),t)}function uze(t,e){return t==="symbols"}function vJ(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return S.createElement(ice,n);case"trapezoid":return S.createElement(nze,n);case"sector":return S.createElement(lce,n);case"symbols":if(uze(e))return S.createElement(Uae,n);break;case"curve":return S.createElement(xy,n);default:return null}}function dze(t){return S.isValidElement(t)?t.props:t}function A7(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=ize(t,rze),s;if(S.isValidElement(e))s=S.cloneElement(e,_k(_k({},i),dze(e)));else if(typeof e=="function")s=e(i,i.index);else if(X$e(e)&&typeof e!="boolean"){var o=cze(e,i);s=S.createElement(vJ,{shapeType:n,elementProps:o})}else{var a=i;s=S.createElement(vJ,{shapeType:n,elementProps:a})}return i.isActive?S.createElement(ei,{className:r},s):s}var T7=(t,e,n)=>{var r=Mr();return(i,s)=>o=>{t==null||t(i,s,o),r(Hue({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},k7=t=>{var e=Mr();return(n,r)=>i=>{t==null||t(n,r,i),e(bUe())}},N7=(t,e,n)=>{var r=Mr();return(i,s)=>o=>{t==null||t(i,s,o),r(wUe({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function iP(t){var{tooltipEntrySettings:e}=t,n=Mr(),r=Ji(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(gUe(e)):i.current!==e&&n(yUe({prev:i.current,next:e})),i.current=e)},[e,n,r]),S.useLayoutEffect(()=>()=>{i.current&&(n(xUe(i.current)),i.current=null)},[n]),null}function C7(t){var{legendPayload:e}=t,n=Mr(),r=Ji(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(Jle(e)):i.current!==e&&n(Xle({prev:i.current,next:e})),i.current=e)},[n,r,e]),S.useLayoutEffect(()=>()=>{i.current&&(n(Qle(i.current)),i.current=null)},[n]),null}function fze(t){var{legendPayload:e}=t,n=Mr(),r=Ut(Nn),i=S.useRef(null);return S.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(Jle(e)):i.current!==e&&n(Xle({prev:i.current,next:e})),i.current=e)},[n,r,e]),S.useLayoutEffect(()=>()=>{i.current&&(n(Qle(i.current)),i.current=null)},[n]),null}var s4,hze=()=>{var[t]=S.useState(()=>aw("uid-"));return t},pze=(s4=kN.useId)!==null&&s4!==void 0?s4:hze;function mze(t,e){var n=pze();return e||(t?"".concat(t,"-").concat(n):n)}var gze=S.createContext(void 0),sP=t=>{var{id:e,type:n,children:r}=t,i=mze("recharts-".concat(n),e);return S.createElement(gze.Provider,{value:i},r(i))},yze={cartesianItems:[],polarItems:[]},Rde=jo({name:"graphicalItems",initialState:yze,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:_r()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Gl(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:_r()},removeCartesianGraphicalItem:{reducer(t,e){var n=Gl(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:_r()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:_r()},removePolarGraphicalItem:{reducer(t,e){var n=Gl(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:_r()}}}),{addCartesianGraphicalItem:xze,replaceCartesianGraphicalItem:vze,removeCartesianGraphicalItem:bze,addPolarGraphicalItem:wze,removePolarGraphicalItem:Eze}=Rde.actions,Sze=Rde.reducer,Aze=t=>{var e=Mr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?e(xze(t)):n.current!==t&&e(vze({prev:n.current,next:t})),n.current=t},[e,t]),S.useLayoutEffect(()=>()=>{n.current&&(e(bze(n.current)),n.current=null)},[e]),null},P7=S.memo(Aze);function Tze(t){var e=Mr();return S.useLayoutEffect(()=>(e(wze(t)),()=>{e(Eze(t))}),[e,t]),null}var kze=["key"],Nze=["onMouseEnter","onClick","onMouseLeave"],Cze=["id"],Pze=["id"];function bJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bJ(Object(n),!0).forEach(function(r){_ze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ze(t,e,n){return(e=Ize(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ize(t){var e=Rze(t,"string");return typeof e=="symbol"?e:e+""}function Rze(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bh(){return Bh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bh.apply(null,arguments)}function oP(t,e){if(t==null)return{};var n,r,i=Oze(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Oze(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Mze(t){var e=S.useMemo(()=>E7(t.children,kv),[t.children]),n=Ut(r=>V$e(r,t.id,e));return n==null?null:S.createElement(fze,{legendPayload:n})}var Lze=S.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:o,name:a,hide:l,tooltipType:c,id:d}=t,h={dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:o,dataKey:e,nameKey:n,name:Hh(a,e),hide:l,type:c,color:o,unit:"",graphicalItemId:d}};return S.createElement(iP,{tooltipEntrySettings:h})}),jze=(t,e)=>t>e?"start":t<e?"end":"middle",Dze=(t,e,n)=>zs(typeof e=="function"?e(t):e,n,n*.8),Bze=(t,e,n)=>{var{top:r,left:i,width:s,height:o}=e,a=sce(s,o),l=i+zs(t.cx,s,s/2),c=r+zs(t.cy,o,o/2),d=zs(t.innerRadius,a,0),h=Dze(n,t.outerRadius,a),m=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:h,maxRadius:m}},Uze=(t,e)=>{var n=Yi(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function Fze(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var $ze=(t,e)=>{if(S.isValidElement(t))return S.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Mn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=oP(e,kze);return S.createElement(xy,Bh({},i,{type:"linear",className:n}))},zze=(t,e,n)=>{if(S.isValidElement(t))return S.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),S.isValidElement(r)))return r;var i=Mn("recharts-pie-label-text",Fze(t));return S.createElement(eP,Bh({},e,{alignmentBaseline:"middle",className:i}),r)};function Vze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:s,dataKey:o}=n;if(!r||!i||!e)return null;var a=co(n),l=zm(i),c=zm(s),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=e.map((m,g)=>{var v=(m.startAngle+m.endAngle)/2,x=wi(m.cx,m.cy,m.outerRadius+d,v),b=Zr(Zr(Zr(Zr({},a),m),{},{stroke:"none"},l),{},{index:g,textAnchor:jze(x.x,m.cx)},x),w=Zr(Zr(Zr(Zr({},a),m),{},{fill:"none",stroke:m.fill},c),{},{index:g,points:[wi(m.cx,m.cy,m.outerRadius,v),x],key:"line"});return S.createElement(po,{zIndex:li.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(g)},S.createElement(ei,null,s&&$ze(s,w),zze(i,b,Yn(m,o))))});return S.createElement(ei,{className:"recharts-pie-labels"},h)}function Hze(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?S.createElement(tP,{label:i}):S.createElement(Vze,{sectors:e,props:n,showLabels:r})}function qze(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:s,id:o}=t,a=Ut(Dh),l=Ut(f7),c=Ut(oFe),{onMouseEnter:d,onClick:h,onMouseLeave:m}=i,g=oP(i,Nze),v=T7(d,i.dataKey,o),x=k7(m),b=N7(h,i.dataKey,o);return e==null||e.length===0?null:S.createElement(S.Fragment,null,e.map((w,k)=>{if((w==null?void 0:w.startAngle)===0&&(w==null?void 0:w.endAngle)===0&&e.length!==1)return null;var N=c==null||c===o,O=String(k)===a&&(l==null||i.dataKey===l)&&N,D=a?r:null,_=n&&O?n:D,F=Zr(Zr({},w),{},{stroke:w.stroke,tabIndex:-1,[Mle]:k,[Lle]:o});return S.createElement(ei,Bh({key:"sector-".concat(w==null?void 0:w.startAngle,"-").concat(w==null?void 0:w.endAngle,"-").concat(w.midAngle,"-").concat(k),tabIndex:-1,className:"recharts-pie-sector"},gC(g,w,k),{onMouseEnter:v(w,k),onMouseLeave:x(w,k),onClick:b(w,k)}),S.createElement(A7,Bh({option:s??_,index:k,shapeType:"sector",isActive:O},F)))}))}function Gze(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:s}=t,{cornerRadius:o,startAngle:a,endAngle:l,dataKey:c,nameKey:d,tooltipType:h}=n,m=Math.abs(n.minAngle),g=Uze(a,l),v=Math.abs(g),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,b=r.filter(_=>Yn(_,c,0)!==0).length,w=(v>=360?b:b-1)*x,k=v-b*m-w,N=r.reduce((_,F)=>{var z=Yn(F,c,0);return _+(_t(z)?z:0)},0),O;if(N>0){var D;O=r.map((_,F)=>{var z=Yn(_,c,0),L=Yn(_,d,F),$=Bze(n,s,_),G=(_t(z)?z:0)/N,V,U=Zr(Zr({},_),i&&i[F]&&i[F].props);F?V=D.endAngle+Yi(g)*x*(z!==0?1:0):V=a;var A=V+Yi(g)*((z!==0?m:0)+G*k),I=(V+A)/2,j=($.innerRadius+$.outerRadius)/2,q=[{name:L,value:z,payload:U,dataKey:c,type:h,graphicalItemId:n.id}],K=wi($.cx,$.cy,j,I);return D=Zr(Zr(Zr(Zr({},n.presentationProps),{},{percent:G,cornerRadius:typeof o=="string"?parseFloat(o):o,name:L,tooltipPayload:q,midAngle:I,middleRadius:j,tooltipPosition:K},U),$),{},{value:z,dataKey:c,startAngle:V,endAngle:A,payload:U,paddingAngle:Yi(g)*x}),D})}return O}function Kze(t){var{showLabels:e,sectors:n,children:r}=t,i=S.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return S.createElement(N$e,{value:e?i:void 0},r)}function Wze(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:h,onAnimationEnd:m}=e,g=gv(e,"recharts-pie-"),v=n.current,[x,b]=S.useState(!1),w=S.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),k=S.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return S.createElement(Kze,{showLabels:!x,sectors:i},S.createElement(mv,{animationId:g,begin:o,duration:a,isActive:s,easing:l,onAnimationStart:k,onAnimationEnd:w,key:g},N=>{var O=[],D=i&&i[0],_=D==null?void 0:D.startAngle;return i==null||i.forEach((F,z)=>{var L=v&&v[z],$=z>0?Hm(F,"paddingAngle",0):0;if(L){var G=Gn(L.endAngle-L.startAngle,F.endAngle-F.startAngle,N),V=Zr(Zr({},F),{},{startAngle:_+$,endAngle:_+G+$});O.push(V),_=V.endAngle}else{var{endAngle:U,startAngle:A}=F,I=Gn(0,U-A,N),j=Zr(Zr({},F),{},{startAngle:_+$,endAngle:_+I+$});O.push(j),_=j.endAngle}}),n.current=O,S.createElement(ei,null,S.createElement(qze,{sectors:O,activeShape:c,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:r}))}),S.createElement(Hze,{showLabels:!x,sectors:i,props:e}),e.children)}var Yze={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:li.area};function Jze(t){var{id:e}=t,n=oP(t,Cze),{hide:r,className:i,rootTabIndex:s}=t,o=S.useMemo(()=>E7(t.children,kv),[t.children]),a=Ut(d=>H$e(d,e,o)),l=S.useRef(null),c=Mn("recharts-pie",i);return r||a==null?(l.current=null,S.createElement(ei,{tabIndex:s,className:c})):S.createElement(po,{zIndex:t.zIndex},S.createElement(Lze,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:a,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),S.createElement(ei,{tabIndex:s,className:c},S.createElement(Wze,{props:Zr(Zr({},n),{},{sectors:a}),previousSectorsRef:l,id:e})))}function _7(t){var e=Ti(t,Yze),{id:n}=e,r=oP(e,Pze),i=co(r);return S.createElement(sP,{id:n,type:"pie"},s=>S.createElement(S.Fragment,null,S.createElement(Tze,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),S.createElement(Mze,Bh({},r,{id:s})),S.createElement(Jze,Bh({},r,{id:s}))))}_7.displayName="Pie";var Xze=["points"];function wJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function o4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wJ(Object(n),!0).forEach(function(r){Qze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qze(t,e,n){return(e=Zze(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zze(t){var e=eVe(t,"string");return typeof e=="symbol"?e:e+""}function eVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ik(){return Ik=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ik.apply(null,arguments)}function tVe(t,e){if(t==null)return{};var n,r,i=nVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nVe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rVe(t){var{option:e,dotProps:n,className:r}=t;if(S.isValidElement(e))return S.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Mn(r,typeof e!="boolean"?e.className:""),s=n??{},{points:o}=s,a=tVe(s,Xze);return S.createElement(kde,Ik({},a,{className:i}))}function iVe(t,e){return t==null?!1:e?!0:t.length===1}function Ode(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:o,needClip:a,clipPathId:l,zIndex:c=li.scatter}=t;if(!iVe(e,n))return null;var d=S7(n),h=G4e(n),m=e.map((v,x)=>{var b,w,k=o4(o4(o4({r:3},o),h),{},{index:x,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(w=v.y)!==null&&w!==void 0?w:void 0,dataKey:s,value:v.value,payload:v.payload,points:e});return S.createElement(rVe,{key:"dot-".concat(x),option:n,dotProps:k,className:i})}),g={};return a&&l!=null&&(g.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(l,")")),S.createElement(po,{zIndex:c},S.createElement(ei,Ik({className:r},g),m))}function EJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EJ(Object(n),!0).forEach(function(r){sVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sVe(t,e,n){return(e=oVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oVe(t){var e=aVe(t,"string");return typeof e=="symbol"?e:e+""}function aVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mde=0,lVe={xAxis:{},yAxis:{},zAxis:{}},Lde=jo({name:"cartesianAxis",initialState:lVe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:_r()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:_r()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:_r()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:_r()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:_r()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:_r()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:_r()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:_r()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:_r()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var o=[...s,r].slice(-3);t.yAxis[n]=SJ(SJ({},t.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:cVe,replaceXAxis:uVe,removeXAxis:dVe,addYAxis:fVe,replaceYAxis:hVe,removeYAxis:pVe,addZAxis:vyt,replaceZAxis:byt,removeZAxis:wyt,updateYAxisWidth:mVe}=Lde.actions,gVe=Lde.reducer,yVe=Le([Ri],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),xVe=Le([yVe,zd,Vd],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),aP=()=>Ut(xVe),vVe=()=>Ut(dFe);function AJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AJ(Object(n),!0).forEach(function(r){bVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bVe(t,e,n){return(e=wVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wVe(t){var e=EVe(t,"string");return typeof e=="symbol"?e:e+""}function EVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SVe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:o}=t;if(i===!1||e.x==null||e.y==null)return null;var a={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=a4(a4(a4({},a),zm(i)),K8(i)),c;return S.isValidElement(i)?c=S.cloneElement(i,l):typeof i=="function"?c=i(l):c=S.createElement(kde,l),S.createElement(ei,{className:"recharts-active-dot",clipPath:o},c)};function GL(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:o=li.activeDot}=t,a=Ut(Dh),l=vVe();if(e==null||l==null)return null;var c=e.find(d=>l.includes(d.payload));return kr(c)?null:S.createElement(po,{zIndex:o},S.createElement(SVe,{point:c,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var TJ=(t,e,n)=>{var r=n??t;if(!kr(r))return zs(r,e,0)},AVe=(t,e,n)=>{var r={},i=t.filter(qC),s=t.filter(c=>c.stackId==null),o=i.reduce((c,d)=>(c[d.stackId]||(c[d.stackId]=[]),c[d.stackId].push(d),c),r),a=Object.entries(o).map(c=>{var[d,h]=c,m=h.map(v=>v.dataKey),g=TJ(e,n,h[0].barSize);return{stackId:d,dataKeys:m,barSize:g}}),l=s.map(c=>{var d=[c.dataKey].filter(m=>m!=null),h=TJ(e,n,c.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...a,...l]};function kJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kJ(Object(n),!0).forEach(function(r){TVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TVe(t,e,n){return(e=kVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kVe(t){var e=NVe(t,"string");return typeof e=="symbol"?e:e+""}function NVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CVe(t,e,n,r,i){var s=r.length;if(!(s<1)){var o=zs(t,n,0,!0),a,l=[];if(hr(r[0].barSize)){var c=!1,d=n/s,h=r.reduce((w,k)=>w+(k.barSize||0),0);h+=(s-1)*o,h>=n&&(h-=(s-1)*o,o=0),h>=n&&d>0&&(c=!0,d*=.9,h=s*d);var m=(n-h)/2>>0,g={offset:m-o,size:0};a=r.reduce((w,k)=>{var N,O={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:g.offset+g.size+o,size:c?d:(N=k.barSize)!==null&&N!==void 0?N:0}},D=[...w,O];return g=D[D.length-1].position,D},l)}else{var v=zs(e,n,0,!0);n-2*v-(s-1)*o<=0&&(o=0);var x=(n-2*v-(s-1)*o)/s;x>1&&(x>>=0);var b=hr(i)?Math.min(x,i):x;a=r.reduce((w,k,N)=>[...w,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:v+(x+o)*N+(x-b)/2,size:b}}],l)}return a}}var PVe=(t,e,n,r,i,s,o)=>{var a=kr(o)?e:o,l=CVe(n,r,i!==s?i:s,t,a);return i!==s&&l!=null&&(l=l.map(c=>XA(XA({},c),{},{position:XA(XA({},c.position),{},{offset:c.position.offset-i/2})}))),l},_Ve=(t,e)=>{var n=HC(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:s}=i;if(s)return s.find(o=>o.key===n)}}}};function IVe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&hr(t.zIndex)?t.zIndex:e}var jde=t=>{var{chartData:e}=t,n=Mr(),r=Ji();return S.useEffect(()=>r?()=>{}:(n(OY(e)),()=>{n(OY(void 0))}),[e,n,r]),null},NJ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Dde=jo({name:"brush",initialState:NJ,reducers:{setBrushSettings(t,e){return e.payload==null?NJ:e.payload}}}),{setBrushSettings:Eyt}=Dde.actions,RVe=Dde.reducer;function OVe(t,e,n){return(e=MVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MVe(t){var e=LVe(t,"string");return typeof e=="symbol"?e:e+""}function LVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class I7{static create(e){return new I7(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}OVe(I7,"EPS",1e-4);function jVe(t){return(t%180+180)%180}var DVe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=jVe(i),o=s*Math.PI/180,a=Math.atan(r/n),l=o>a&&o<Math.PI-a?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},BVe={dots:[],areas:[],lines:[]},Bde=jo({name:"referenceElements",initialState:BVe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Gl(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Gl(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Gl(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Syt,removeDot:Ayt,addArea:Tyt,removeArea:kyt,addLine:Nyt,removeLine:Cyt}=Bde.actions,UVe=Bde.reducer,FVe=S.createContext(void 0),$Ve=t=>{var{children:e}=t,[n]=S.useState("".concat(aw("recharts"),"-clip")),r=aP();if(r==null)return null;var{x:i,y:s,width:o,height:a}=r;return S.createElement(FVe.Provider,{value:n},S.createElement("defs",null,S.createElement("clipPath",{id:n},S.createElement("rect",{x:i,y:s,height:a,width:o}))),e)};function Ude(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function zVe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return DVe(r,n)}function VVe(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:a}=t;return e===1?{start:r?i:s,end:r?i+o:s+a}:{start:r?i+o:s+a,end:r?i:s}}function Ew(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function HVe(t,e){return Ude(t,e+1)}function qVe(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:a}=e,l=0,c=1,d=o,h=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:Ude(r,c)};var x=l,b,w=()=>(b===void 0&&(b=n(v,x)),b),k=v.coordinate,N=l===0||Ew(t,k,w,d,a);N||(l=0,d=o,c+=1),N&&(d=k+t*(w()/2+i),l+=c)},m;c<=s.length;)if(m=h(),m)return m.v;return[]}function GVe(t,e,n,r,i){var s=(r||[]).slice(),o=s.length;if(o===0)return[];for(var{start:a,end:l}=e,c=1;c<=o;c++){for(var d=(o-1)%c,h=a,m=!0,g=function(){var k=r[v],N=v,O,D=()=>(O===void 0&&(O=n(k,N)),O),_=k.coordinate,F=v===d||Ew(t,_,D,h,l);if(!F)return m=!1,1;F&&(h=_+t*(D()/2+i))},v=d;v<o&&!g();v+=c);if(m){for(var x=[],b=d;b<o;b+=c)x.push(r[b]);return x}}return[]}function CJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CJ(Object(n),!0).forEach(function(r){KVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KVe(t,e,n){return(e=WVe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WVe(t){var e=YVe(t,"string");return typeof e=="symbol"?e:e+""}function YVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JVe(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:a}=e,{end:l}=e,c=function(m){var g=s[m],v,x=()=>(v===void 0&&(v=n(g,m)),v);if(m===o-1){var b=t*(g.coordinate+t*x()/2-l);s[m]=g=Is(Is({},g),{},{tickCoord:b>0?g.coordinate-b*t:g.coordinate})}else s[m]=g=Is(Is({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var w=Ew(t,g.tickCoord,x,a,l);w&&(l=g.tickCoord-t*(x()/2+i),s[m]=Is(Is({},g),{},{isShow:!0}))}},d=o-1;d>=0;d--)c(d);return s}function XVe(t,e,n,r,i,s){var o=(r||[]).slice(),a=o.length,{start:l,end:c}=e;if(s){var d=r[a-1],h=n(d,a-1),m=t*(d.coordinate+t*h/2-c);if(o[a-1]=d=Is(Is({},d),{},{tickCoord:m>0?d.coordinate-m*t:d.coordinate}),d.tickCoord!=null){var g=Ew(t,d.tickCoord,()=>h,l,c);g&&(c=d.tickCoord-t*(h/2+i),o[a-1]=Is(Is({},d),{},{isShow:!0}))}}for(var v=s?a-1:a,x=function(k){var N=o[k],O,D=()=>(O===void 0&&(O=n(N,k)),O);if(k===0){var _=t*(N.coordinate-t*D()/2-l);o[k]=N=Is(Is({},N),{},{tickCoord:_<0?N.coordinate-_*t:N.coordinate})}else o[k]=N=Is(Is({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var F=Ew(t,N.tickCoord,D,l,c);F&&(l=N.tickCoord+t*(D()/2+i),o[k]=Is(Is({},N),{},{isShow:!0}))}},b=0;b<v;b++)x(b);return o}function R7(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:a,interval:l,tickFormatter:c,unit:d,angle:h}=t;if(!i||!i.length||!r)return[];if(_t(l)||wE.isSsr){var m;return(m=HVe(i,_t(l)?l:0))!==null&&m!==void 0?m:[]}var g=[],v=a==="top"||a==="bottom"?"width":"height",x=d&&v==="width"?S1(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=(N,O)=>{var D=typeof c=="function"?c(N.value,O):N.value;return v==="width"?zVe(S1(D,{fontSize:e,letterSpacing:n}),x,h):S1(D,{fontSize:e,letterSpacing:n})[v]},w=i.length>=2?Yi(i[1].coordinate-i[0].coordinate):1,k=VVe(s,w,v);return l==="equidistantPreserveStart"?qVe(w,k,b,i,o):l==="equidistantPreserveEnd"?GVe(w,k,b,i,o):(l==="preserveStart"||l==="preserveStartEnd"?g=XVe(w,k,b,i,o,l==="preserveStartEnd"):g=JVe(w,k,b,i,o),g.filter(N=>N.isShow))}var QVe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>o&&(o=h.width)}});var a=n?n.getBoundingClientRect().width:0,l=i+s,c=o+l+a+(n?r:0);return Math.round(c)}return 0},ZVe=["axisLine","width","height","className","hide","ticks","axisType"];function eHe(t,e){if(t==null)return{};var n,r,i=tHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ym(){return Ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ym.apply(null,arguments)}function PJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PJ(Object(n),!0).forEach(function(r){nHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nHe(t,e,n){return(e=rHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rHe(t){var e=iHe(t,"string");return typeof e=="symbol"?e:e+""}function iHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vd={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:li.axis};function sHe(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:a,otherSvgProps:l}=t;if(!a)return null;var c=yi(yi(yi({},l),co(a)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);c=yi(yi({},c),{},{x1:e,y1:n+d*i,x2:e+r,y2:n+d*i})}else{var h=+(s==="left"&&!o||s==="right"&&o);c=yi(yi({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return S.createElement("line",Ym({},c,{className:Mn("recharts-cartesian-axis-line",Hm(a,"className"))}))}function oHe(t,e,n,r,i,s,o,a,l){var c,d,h,m,g,v,x=a?-1:1,b=t.tickSize||o,w=_t(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=d=t.coordinate,m=n+ +!a*i,h=m-x*b,v=h-x*l,g=w;break;case"left":h=m=t.coordinate,d=e+ +!a*r,c=d-x*b,g=c-x*l,v=w;break;case"right":h=m=t.coordinate,d=e+ +a*r,c=d+x*b,g=c+x*l,v=w;break;default:c=d=t.coordinate,m=n+ +a*i,h=m+x*b,v=h+x*l,g=w;break}return{line:{x1:c,y1:h,x2:d,y2:m},tick:{x:g,y:v}}}function aHe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function lHe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function cHe(t){var{option:e,tickProps:n,value:r}=t,i,s=Mn(n.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(e))i=S.cloneElement(e,yi(yi({},n),{},{className:s}));else if(typeof e=="function")i=e(yi(yi({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Mn(o,e==null?void 0:e.className)),i=S.createElement(eP,Ym({},n,{className:o}),r)}return i}var uHe=S.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:o,unit:a,padding:l,tickTextProps:c,orientation:d,mirror:h,x:m,y:g,width:v,height:x,tickSize:b,tickMargin:w,fontSize:k,letterSpacing:N,getTicksConfig:O,events:D,axisType:_}=t,F=R7(yi(yi({},O),{},{ticks:n}),k,N),z=aHe(d,h),L=lHe(d,h),$=co(O),G=zm(r),V={};typeof i=="object"&&(V=i);var U=yi(yi({},$),{},{fill:"none"},V),A=F.map(q=>yi({entry:q},oHe(q,m,g,v,x,d,b,h,w))),I=A.map(q=>{var{entry:K,line:te}=q;return S.createElement(ei,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(K.value,"-").concat(K.coordinate,"-").concat(K.tickCoord)},i&&S.createElement("line",Ym({},U,te,{className:Mn("recharts-cartesian-axis-tick-line",Hm(i,"className"))})))}),j=A.map((q,K)=>{var{entry:te,tick:Y}=q,H=yi(yi(yi(yi({textAnchor:z,verticalAnchor:L},$),{},{stroke:"none",fill:s},G),Y),{},{index:K,payload:te,visibleTicksCount:F.length,tickFormatter:o,padding:l},c);return S.createElement(ei,Ym({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},gC(D,te,K)),r&&S.createElement(cHe,{option:r,tickProps:H,value:"".concat(typeof o=="function"?o(te.value,K):te.value).concat(a||"")}))});return S.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},j.length>0&&S.createElement(po,{zIndex:li.label},S.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:e},j)),I.length>0&&S.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},I))}),dHe=S.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:o,ticks:a,axisType:l}=t,c=eHe(t,ZVe),[d,h]=S.useState(""),[m,g]=S.useState(""),v=S.useRef(null);S.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var b;return QVe({ticks:v.current,label:(b=t.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var x=S.useCallback(b=>{if(b){var w=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=w;var k=w[0];if(k){var N=window.getComputedStyle(k),O=N.fontSize,D=N.letterSpacing;(O!==d||D!==m)&&(h(O),g(D))}}},[d,m]);return o||r!=null&&r<=0||i!=null&&i<=0?null:S.createElement(po,{zIndex:t.zIndex},S.createElement(ei,{className:Mn("recharts-cartesian-axis",s)},S.createElement(sHe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:co(t)}),S.createElement(uHe,{ref:x,axisType:l,events:c,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:m,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:a,unit:t.unit,width:t.width,x:t.x,y:t.y}),S.createElement(o$e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},S.createElement(g$e,{label:t.label,labelRef:t.labelRef}),t.children)))}),O7=S.forwardRef((t,e)=>{var n=Ti(t,vd);return S.createElement(dHe,Ym({},n,{ref:e}))});O7.displayName="CartesianAxis";var fHe=["x1","y1","x2","y2","key"],hHe=["offset"],pHe=["xAxisId","yAxisId"],mHe=["xAxisId","yAxisId"];function _J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_J(Object(n),!0).forEach(function(r){gHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_J(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gHe(t,e,n){return(e=yHe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yHe(t){var e=xHe(t,"string");return typeof e=="symbol"?e:e+""}function xHe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jp.apply(null,arguments)}function Rk(t,e){if(t==null)return{};var n,r,i=vHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bHe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:o,ry:a}=t;return S.createElement("rect",{x:r,y:i,ry:a,width:s,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Fde(t){var{option:e,lineItemProps:n}=t,r;if(S.isValidElement(e))r=S.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:o,x2:a,y2:l,key:c}=n,d=Rk(n,fHe),h=(i=co(d))!==null&&i!==void 0?i:{},{offset:m}=h,g=Rk(h,hHe);r=S.createElement("line",Jp({},g,{x1:s,y1:o,x2:a,y2:l,fill:"none",key:c}))}return r}function wHe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=Rk(t,pHe),l=i.map((c,d)=>{var h=js(js({},a),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(d),index:d});return S.createElement(Fde,{key:"line-".concat(d),option:r,lineItemProps:h})});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function EHe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:o}=t,a=Rk(t,mHe),l=i.map((c,d)=>{var h=js(js({},a),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(d),index:d});return S.createElement(Fde,{option:r,lineItemProps:h,key:"line-".concat(d)})});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function SHe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:o,horizontalPoints:a,horizontal:l=!0}=t;if(!l||!e||!e.length||a==null)return null;var c=a.map(h=>Math.round(h+i-i)).sort((h,m)=>h-m);i!==c[0]&&c.unshift(0);var d=c.map((h,m)=>{var g=!c[m+1],v=g?i+o-h:c[m+1]-h;if(v<=0)return null;var x=m%e.length;return S.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:v,width:s,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function AHe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:o,height:a,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(h=>Math.round(h+i-i)).sort((h,m)=>h-m);i!==c[0]&&c.unshift(0);var d=c.map((h,m)=>{var g=!c[m+1],v=g?i+o-h:c[m+1]-h;if(v<=0)return null;var x=m%n.length;return S.createElement("rect",{key:"react-".concat(m),x:h,y:s,width:v,height:a,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var THe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return _le(R7(js(js(js({},vd),n),{},{ticks:Ile(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},kHe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return _le(R7(js(js(js({},vd),n),{},{ticks:Ile(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},NHe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:li.grid};function Sw(t){var e=$le(),n=zle(),r=Fle(),i=js(js({},Ti(t,NHe)),{},{x:_t(t.x)?t.x:r.left,y:_t(t.y)?t.y:r.top,width:_t(t.width)?t.width:r.width,height:_t(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:o,x:a,y:l,width:c,height:d,syncWithTicks:h,horizontalValues:m,verticalValues:g}=i,v=Ji(),x=Ut(L=>wY(L,"xAxis",s,v)),b=Ut(L=>wY(L,"yAxis",o,v));if(!Xc(c)||!Xc(d)||!_t(a)||!_t(l))return null;var w=i.verticalCoordinatesGenerator||THe,k=i.horizontalCoordinatesGenerator||kHe,{horizontalPoints:N,verticalPoints:O}=i;if((!N||!N.length)&&typeof k=="function"){var D=m&&m.length,_=k({yAxis:b?js(js({},b),{},{ticks:D?m:b.ticks}):void 0,width:e??c,height:n??d,offset:r},D?!0:h);ik(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(N=_)}if((!O||!O.length)&&typeof w=="function"){var F=g&&g.length,z=w({xAxis:x?js(js({},x),{},{ticks:F?g:x.ticks}):void 0,width:e??c,height:n??d,offset:r},F?!0:h);ik(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(O=z)}return S.createElement(po,{zIndex:i.zIndex},S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(bHe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),S.createElement(SHe,Jp({},i,{horizontalPoints:N})),S.createElement(AHe,Jp({},i,{verticalPoints:O})),S.createElement(wHe,Jp({},i,{offset:r,horizontalPoints:N,xAxis:x,yAxis:b})),S.createElement(EHe,Jp({},i,{offset:r,verticalPoints:O,xAxis:x,yAxis:b}))))}Sw.displayName="CartesianGrid";var CHe={},$de=jo({name:"errorBars",initialState:CHe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Pyt,replaceErrorBar:_yt,removeErrorBar:Iyt}=$de.actions,PHe=$de.reducer,_He=["children"];function IHe(t,e){if(t==null)return{};var n,r,i=RHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function RHe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var OHe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},MHe=S.createContext(OHe);function zde(t){var{children:e}=t,n=IHe(t,_He);return S.createElement(MHe.Provider,{value:n},e)}function lP(t,e){var n,r,i=Ut(c=>Gd(c,t)),s=Ut(c=>Kd(c,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Di.allowDataOverflow,a=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Bi.allowDataOverflow,l=o||a;return{needClip:l,needClipX:o,needClipY:a}}function M7(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=aP(),{needClipX:s,needClipY:o,needClip:a}=lP(e,n);if(!a||!i)return null;var{x:l,y:c,width:d,height:h}=i;return S.createElement("clipPath",{id:"clipPath-".concat(r)},S.createElement("rect",{x:s?l:l-d/2,y:o?c:c-h/2,width:s?d:d*2,height:o?h:h*2}))}var Vde=(t,e,n,r)=>eu(t,"xAxis",e,r),Hde=(t,e,n,r)=>Zc(t,"xAxis",e,r),qde=(t,e,n,r)=>eu(t,"yAxis",n,r),Gde=(t,e,n,r)=>Zc(t,"yAxis",n,r),LHe=Le([Nn,Vde,qde,Hde,Gde],(t,e,n,r,i)=>ru(t,"xAxis")?Lh(e,r,!1):Lh(n,i,!1)),jHe=(t,e,n,r,i)=>i;function DHe(t){return t.type==="line"}var BHe=Le([PE,jHe],(t,e)=>t.filter(DHe).find(n=>n.id===e)),UHe=Le([Nn,Vde,qde,Hde,Gde,BHe,LHe,I6],(t,e,n,r,i,s,o,a)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:d}=a;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:h,data:m}=s,g;if(m!=null&&m.length>0?g=m:g=l==null?void 0:l.slice(c,d+1),g!=null)return Sqe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:h,bandSize:o,displayedData:g})}});function Kde(t){var e=zm(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,o=Number(i),a=Number(s);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(a)||a<0)&&(a=r),{r:o,strokeWidth:a}}return{r:n,strokeWidth:r}}var l4={exports:{}},c4={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IJ;function FHe(){if(IJ)return c4;IJ=1;var t=Jx();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,a=t.useDebugValue;return c4.useSyncExternalStoreWithSelector=function(l,c,d,h,m){var g=i(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=o(function(){function b(D){if(!w){if(w=!0,k=D,D=h(D),m!==void 0&&v.hasValue){var _=v.value;if(m(_,D))return N=_}return N=D}if(_=N,n(k,D))return _;var F=h(D);return m!==void 0&&m(_,F)?(k=D,_):(k=D,N=F)}var w=!1,k,N,O=d===void 0?null:d;return[function(){return b(c())},O===null?void 0:function(){return b(O())}]},[c,d,h,m]);var x=r(l,g[0],g[1]);return s(function(){v.hasValue=!0,v.value=x},[x]),a(x),x},c4}var RJ;function $He(){return RJ||(RJ=1,l4.exports=FHe()),l4.exports}$He();function zHe(t){t()}function VHe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){zHe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var OJ={notify(){},get:()=>[]};function HHe(t,e){let n,r=OJ,i=0,s=!1;function o(x){d();const b=r.subscribe(x);let w=!1;return()=>{w||(w=!0,b(),h())}}function a(){r.notify()}function l(){v.onStateChange&&v.onStateChange()}function c(){return s}function d(){i++,n||(n=t.subscribe(l),r=VHe())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=OJ)}function m(){s||(s=!0,d())}function g(){s&&(s=!1,h())}const v={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:m,tryUnsubscribe:g,getListeners:()=>r};return v}var qHe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GHe=qHe(),KHe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",WHe=KHe(),YHe=()=>GHe||WHe?S.useLayoutEffect:S.useEffect,JHe=YHe();function MJ(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function XHe(t,e){if(MJ(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!MJ(t[n[i]],e[n[i]]))return!1;return!0}var u4=Symbol.for("react-redux-context"),d4=typeof globalThis<"u"?globalThis:{};function QHe(){if(!S.createContext)return{};const t=d4[u4]??(d4[u4]=new Map);let e=t.get(S.createContext);return e||(e=S.createContext(null),t.set(S.createContext,e)),e}var ZHe=QHe();function eqe(t){const{children:e,context:n,serverState:r,store:i}=t,s=S.useMemo(()=>{const l=HHe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=S.useMemo(()=>i.getState(),[i]);JHe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||ZHe;return S.createElement(a.Provider,{value:s},e)}var tqe=eqe,nqe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function rqe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function jE(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(nqe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!XHe(t[r],e[r]))return!1}else if(!rqe(t[r],e[r]))return!1;return!0}var iqe=["id"],sqe=["type","layout","connectNulls","needClip","shape"],oqe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Aw(){return Aw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Aw.apply(null,arguments)}function LJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LJ(Object(n),!0).forEach(function(r){aqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aqe(t,e,n){return(e=lqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lqe(t){var e=cqe(t,"string");return typeof e=="symbol"?e:e+""}function cqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L7(t,e){if(t==null)return{};var n,r,i=uqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var dqe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Hh(n,e),payload:t}]},fqe=S.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:d}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Hh(o,e),hide:a,type:c,color:r,unit:l,graphicalItemId:d}};return S.createElement(iP,{tooltipEntrySettings:h})}),Wde=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function hqe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var pqe=(t,e,n)=>{var r=n.reduce((h,m)=>h+m);if(!r)return Wde(e,t);for(var i=Math.floor(t/r),s=t%r,o=e-t,a=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>s){a=[...n.slice(0,l),s-c];break}var d=a.length%2===0?[0,o]:[o];return[...hqe(n,i),...a,...d].map(h=>"".concat(h,"px")).join(", ")};function mqe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:o}=r,{id:a}=r,l=L7(r,iqe),c=co(l);return S.createElement(Ode,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:o,clipPathId:e})}function gqe(t){var{showLabels:e,children:n,points:r}=t,i=S.useMemo(()=>r==null?void 0:r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Cc(Cc({},l),{},{value:s.value,payload:s.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[r]);return S.createElement(v7,{value:e?i:void 0},n)}function jJ(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s}=t,{type:o,layout:a,connectNulls:l,needClip:c,shape:d}=s,h=L7(s,sqe),m=Cc(Cc({},Hs(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:o,layout:a,connectNulls:l,strokeDasharray:i??s.strokeDasharray});return S.createElement(S.Fragment,null,(r==null?void 0:r.length)>1&&S.createElement(A7,Aw({shapeType:"curve",option:d},m,{pathRef:n})),S.createElement(mqe,{points:r,clipPathId:e,props:s}))}function yqe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function xqe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:a,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:h,animateNewValues:m,width:g,height:v,onAnimationEnd:x,onAnimationStart:b}=n,w=i.current,k=gv(o,"recharts-line-"),N=S.useRef(k),[O,D]=S.useState(!1),_=!O,F=S.useCallback(()=>{typeof x=="function"&&x(),D(!1)},[x]),z=S.useCallback(()=>{typeof b=="function"&&b(),D(!0)},[b]),L=yqe(r.current),$=S.useRef(0);N.current!==k&&($.current=s.current,N.current=k);var G=$.current;return S.createElement(gqe,{points:o,showLabels:_},n.children,S.createElement(mv,{animationId:k,begin:c,duration:d,isActive:l,easing:h,onAnimationEnd:F,onAnimationStart:z,key:k},V=>{var U=Gn(G,L+G,V),A=Math.min(U,L),I;if(l)if(a){var j="".concat(a).split(/[,\s]+/gim).map(te=>parseFloat(te));I=pqe(A,L,j)}else I=Wde(L,A);else I=a==null?void 0:String(a);if(V>0&&L>0&&(i.current=o,s.current=Math.max(s.current,A)),w){var q=w.length/o.length,K=V===1?o:o.map((te,Y)=>{var H=Math.floor(Y*q);if(w[H]){var M=w[H];return Cc(Cc({},te),{},{x:Gn(M.x,te.x,V),y:Gn(M.y,te.y,V)})}return m?Cc(Cc({},te),{},{x:Gn(g*2,te.x,V),y:Gn(v/2,te.y,V)}):Cc(Cc({},te),{},{x:te.x,y:te.y})});return i.current=K,S.createElement(jJ,{props:n,points:K,clipPathId:e,pathRef:r,strokeDasharray:I})}return S.createElement(jJ,{props:n,points:o,clipPathId:e,pathRef:r,strokeDasharray:I})}),S.createElement(tP,{label:n.label}))}function vqe(t){var{clipPathId:e,props:n}=t,r=S.useRef(null),i=S.useRef(0),s=S.useRef(null);return S.createElement(xqe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var bqe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Yn(t.payload,e)}};class wqe extends S.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:s,yAxisId:o,top:a,left:l,width:c,height:d,id:h,needClip:m,zIndex:g}=this.props;if(e)return null;var v=Mn("recharts-line",i),x=h,{r:b,strokeWidth:w}=Kde(n),k=S7(n),N=b*2+w,O=m?"url(#clipPath-".concat(k?"":"dots-").concat(x,")"):void 0;return S.createElement(po,{zIndex:g},S.createElement(ei,{className:v},m&&S.createElement("defs",null,S.createElement(M7,{clipPathId:x,xAxisId:s,yAxisId:o}),!k&&S.createElement("clipPath",{id:"clipPath-dots-".concat(x)},S.createElement("rect",{x:l-N/2,y:a-N/2,width:c+N,height:d+N}))),S.createElement(zde,{xAxisId:s,yAxisId:o,data:r,dataPointFormatter:bqe,errorBarOffset:0},S.createElement(vqe,{props:this.props,clipPathId:x}))),S.createElement(GL,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:O}))}}var Yde={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:li.line,type:"linear"};function Eqe(t){var e=Ti(t,Yde),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,hide:c,isAnimationActive:d,label:h,legendType:m,xAxisId:g,yAxisId:v,id:x}=e,b=L7(e,oqe),{needClip:w}=lP(g,v),k=aP(),N=qh(),O=Ji(),D=Ut($=>UHe($,g,v,O,x));if(N!=="horizontal"&&N!=="vertical"||D==null||k==null)return null;var{height:_,width:F,x:z,y:L}=k;return S.createElement(wqe,Aw({},b,{id:x,connectNulls:a,dot:l,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:o,isAnimationActive:d,hide:c,label:h,legendType:m,xAxisId:g,yAxisId:v,points:D,layout:N,height:_,width:F,left:z,top:L,needClip:w}))}function Sqe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:o,bandSize:a,displayedData:l}=t;return l.map((c,d)=>{var h=Yn(c,o);if(e==="horizontal"){var m=rk({axis:n,ticks:i,bandSize:a,entry:c,index:d}),g=kr(h)?null:r.scale(h);return{x:m,y:g,value:h,payload:c}}var v=kr(h)?null:n.scale(h),x=rk({axis:r,ticks:s,bandSize:a,entry:c,index:d});return v==null||x==null?null:{x:v,y:x,value:h,payload:c}}).filter(Boolean)}function Aqe(t){var e=Ti(t,Yde),n=Ji();return S.createElement(sP,{id:e.id,type:"line"},r=>S.createElement(S.Fragment,null,S.createElement(C7,{legendPayload:dqe(e)}),S.createElement(fqe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),S.createElement(P7,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),S.createElement(Eqe,Aw({},e,{id:r}))))}var Z2=S.memo(Aqe,jE);Z2.displayName="Line";function iu(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:Mde}function su(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:Mde}var Jde=(t,e,n)=>eu(t,"xAxis",iu(t,e),n),Xde=(t,e,n)=>Zc(t,"xAxis",iu(t,e),n),Qde=(t,e,n)=>eu(t,"yAxis",su(t,e),n),Zde=(t,e,n)=>Zc(t,"yAxis",su(t,e),n),Tqe=Le([Nn,Jde,Qde,Xde,Zde],(t,e,n,r,i)=>ru(t,"xAxis")?Lh(e,r,!1):Lh(n,i,!1)),kqe=(t,e)=>e,efe=Le([PE,kqe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),tfe=t=>{var e=Nn(t),n=ru(e,"xAxis");return n?"yAxis":"xAxis"},Nqe=(t,e)=>{var n=tfe(t);return n==="yAxis"?su(t,e):iu(t,e)},Cqe=(t,e,n)=>Ak(t,tfe(t),Nqe(t,e),n),Pqe=Le([efe,Cqe],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=HC(t);if(!(r==null||i==null)){var s=(n=e[r])===null||n===void 0?void 0:n.stackedData,o=s==null?void 0:s.find(a=>a.key===i);if(o!=null)return o.map(a=>[a[0],a[1]])}}}),_qe=Le([Nn,Jde,Qde,Xde,Zde,Pqe,Hce,Tqe,efe,cBe],(t,e,n,r,i,s,o,a,l,c)=>{var{chartData:d,dataStartIndex:h,dataEndIndex:m}=o;if(!(l==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||a==null)){var{data:g}=l,v;if(g&&g.length>0?v=g:v=d==null?void 0:d.slice(h,m+1),v!=null)return Yqe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:h,areaSettings:l,stackedData:s,displayedData:v,chartBaseValue:c,bandSize:a})}}),Iqe=["id"],Rqe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Im.apply(null,arguments)}function nfe(t,e){if(t==null)return{};var n,r,i=Oqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Oqe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function DJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DJ(Object(n),!0).forEach(function(r){Mqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mqe(t,e,n){return(e=Lqe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lqe(t){var e=jqe(t,"string");return typeof e=="symbol"?e:e+""}function jqe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ok(t,e){return t&&t!=="none"?t:e}var Dqe=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:s,hide:o}=t;return[{inactive:o,dataKey:e,type:s,color:Ok(r,i),value:Hh(n,e),payload:t}]},Bqe=S.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:a,unit:l,tooltipType:c,id:d}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:Hh(o,e),hide:a,type:c,color:Ok(r,s),unit:l,graphicalItemId:d}};return S.createElement(iP,{tooltipEntrySettings:h})});function Uqe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:s,dataKey:o}=r,a=co(r);return S.createElement(Ode,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:a,needClip:i,clipPathId:e})}function Fqe(t){var{showLabels:e,children:n,points:r}=t,i=r.map(s=>{var o,a,l={x:(o=s.x)!==null&&o!==void 0?o:0,y:(a=s.y)!==null&&a!==void 0?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Jg(Jg({},l),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return S.createElement(v7,{value:e?i:void 0},n)}function BJ(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:s}=t,{layout:o,type:a,stroke:l,connectNulls:c,isRange:d}=s,{id:h}=s,m=nfe(s,Iqe),g=co(m),v=Hs(m);return S.createElement(S.Fragment,null,(e==null?void 0:e.length)>1&&S.createElement(ei,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},S.createElement(xy,Im({},v,{id:h,points:e,connectNulls:c,type:a,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),l!=="none"&&S.createElement(xy,Im({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:e})),l!=="none"&&d&&S.createElement(xy,Im({},g,{className:"recharts-area-curve",layout:o,type:a,connectNulls:c,fill:"none",points:n}))),S.createElement(Uqe,{points:e,props:m,clipPathId:i}))}function $qe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.y,l=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!hr(a)||!hr(l))return null;var c=r*Math.abs(a-l),d=Math.max(...s.map(h=>h.x||0));return _t(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(h=>h.x||0),d)),_t(d)?S.createElement("rect",{x:0,y:a<l?a:a-c,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(c)}):null}function zqe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,a=(e=s[0])===null||e===void 0?void 0:e.x,l=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!hr(a)||!hr(l))return null;var c=r*Math.abs(a-l),d=Math.max(...s.map(h=>h.y||0));return _t(i)?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(...i.map(h=>h.y||0),d)),_t(d)?S.createElement("rect",{x:a<l?a:a-c,y:0,width:c,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}function Vqe(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:s}=t;return n==="vertical"?S.createElement($qe,{alpha:e,points:r,baseLine:i,strokeWidth:s}):S.createElement(zqe,{alpha:e,points:r,baseLine:i,strokeWidth:s})}function Hqe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=t,{points:o,baseLine:a,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:h,onAnimationStart:m,onAnimationEnd:g}=r,v=S.useMemo(()=>({points:o,baseLine:a}),[o,a]),x=gv(v,"recharts-area-"),b=Fje(),[w,k]=S.useState(!1),N=!w,O=S.useCallback(()=>{typeof g=="function"&&g(),k(!1)},[g]),D=S.useCallback(()=>{typeof m=="function"&&m(),k(!0)},[m]);if(b==null)return null;var _=i.current,F=s.current;return S.createElement(Fqe,{showLabels:N,points:o},r.children,S.createElement(mv,{animationId:x,begin:c,duration:d,isActive:l,easing:h,onAnimationEnd:O,onAnimationStart:D,key:x},z=>{if(_){var L=_.length/o.length,$=z===1?o:o.map((V,U)=>{var A=Math.floor(U*L);if(_[A]){var I=_[A];return Jg(Jg({},V),{},{x:Gn(I.x,V.x,z),y:Gn(I.y,V.y,z)})}return V}),G;return _t(a)?G=Gn(F,a,z):kr(a)||ol(a)?G=Gn(F,0,z):G=a.map((V,U)=>{var A=Math.floor(U*L);if(Array.isArray(F)&&F[A]){var I=F[A];return Jg(Jg({},V),{},{x:Gn(I.x,V.x,z),y:Gn(I.y,V.y,z)})}return V}),z>0&&(i.current=$,s.current=G),S.createElement(BJ,{points:$,baseLine:G,needClip:e,clipPathId:n,props:r})}return z>0&&(i.current=o,s.current=a),S.createElement(ei,null,l&&S.createElement("defs",null,S.createElement("clipPath",{id:"animationClipPath-".concat(n)},S.createElement(Vqe,{alpha:z,points:o,baseLine:a,layout:b,strokeWidth:r.strokeWidth}))),S.createElement(ei,{clipPath:"url(#animationClipPath-".concat(n,")")},S.createElement(BJ,{points:o,baseLine:a,needClip:e,clipPathId:n,props:r})))}),S.createElement(tP,{label:r.label}))}function qqe(t){var{needClip:e,clipPathId:n,props:r}=t,i=S.useRef(null),s=S.useRef();return S.createElement(Hqe,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s})}class Gqe extends S.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:s,left:o,needClip:a,xAxisId:l,yAxisId:c,width:d,height:h,id:m,baseLine:g,zIndex:v}=this.props;if(e)return null;var x=Mn("recharts-area",i),b=m,{r:w,strokeWidth:k}=Kde(n),N=S7(n),O=w*2+k,D=a?"url(#clipPath-".concat(N?"":"dots-").concat(b,")"):void 0;return S.createElement(po,{zIndex:v},S.createElement(ei,{className:x},a&&S.createElement("defs",null,S.createElement(M7,{clipPathId:b,xAxisId:l,yAxisId:c}),!N&&S.createElement("clipPath",{id:"clipPath-dots-".concat(b)},S.createElement("rect",{x:o-O/2,y:s-O/2,width:d+O,height:h+O}))),S.createElement(qqe,{needClip:a,clipPathId:b,props:this.props})),S.createElement(GL,{points:r,mainColor:Ok(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}),this.props.isRange&&Array.isArray(g)&&S.createElement(GL,{points:g,mainColor:Ok(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}))}}var rfe={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:li.area};function Kqe(t){var e,n=Ti(t,rfe),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:a,dot:l,fill:c,fillOpacity:d,hide:h,isAnimationActive:m,legendType:g,stroke:v,xAxisId:x,yAxisId:b}=n,w=nfe(n,Rqe),k=qh(),N=ode(),{needClip:O}=lP(x,b),D=Ji(),{points:_,isRange:F,baseLine:z}=(e=Ut(A=>_qe(A,t.id,D)))!==null&&e!==void 0?e:{},L=aP();if(k!=="horizontal"&&k!=="vertical"||L==null||N!=="AreaChart"&&N!=="ComposedChart")return null;var{height:$,width:G,x:V,y:U}=L;return!_||!_.length?null:S.createElement(Gqe,Im({},w,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,baseLine:z,connectNulls:a,dot:l,fill:c,fillOpacity:d,height:$,hide:h,layout:k,isAnimationActive:m==="auto"?!wE.isSsr:m,isRange:F,legendType:g,needClip:O,points:_,stroke:v,width:G,left:V,top:U,xAxisId:x,yAxisId:b}))}var Wqe=(t,e,n,r,i)=>{var s=n??e;if(_t(s))return s;var o=t==="horizontal"?i:r,a=o.scale.domain();if(o.type==="number"){var l=Math.max(a[0],a[1]),c=Math.min(a[0],a[1]);return s==="dataMin"?c:s==="dataMax"||l<0?l:Math.max(Math.min(a[0],a[1]),0)}return s==="dataMin"?a[0]:s==="dataMax"?a[1]:a[0]};function Yqe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:o,xAxis:a,yAxis:l,displayedData:c,dataStartIndex:d,xAxisTicks:h,yAxisTicks:m,bandSize:g}=t,v=i&&i.length,x=Wqe(s,o,n,a,l),b=s==="horizontal",w=!1,k=c.map((O,D)=>{var _,F,z;if(v)z=i[d+D];else{var L=Yn(O,r);Array.isArray(L)?(z=L,w=!0):z=[x,L]}var $=(_=(F=z)===null||F===void 0?void 0:F[1])!==null&&_!==void 0?_:null,G=$==null||v&&!e&&Yn(O,r)==null;return b?{x:rk({axis:a,ticks:h,bandSize:g,entry:O,index:D}),y:G?null:l.scale($),value:z,payload:O}:{x:G?null:a.scale($),y:rk({axis:l,ticks:m,bandSize:g,entry:O,index:D}),value:z,payload:O}}),N;return v||w?N=k.map(O=>{var D=Array.isArray(O.value)?O.value[0]:null;return b?{x:O.x,y:D!=null&&O.y!=null?l.scale(D):null,payload:O.payload}:{x:D!=null?a.scale(D):null,y:O.y,payload:O.payload}}):N=b?l.scale(x):a.scale(x),{points:k,baseLine:N,isRange:w}}function Jqe(t){var e=Ti(t,rfe),n=Ji();return S.createElement(sP,{id:e.id,type:"area"},r=>S.createElement(S.Fragment,null,S.createElement(C7,{legendPayload:Dqe(e)}),S.createElement(Bqe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),S.createElement(P7,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:Rle(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),S.createElement(Kqe,Im({},e,{id:r}))))}var cP=S.memo(Jqe,jE);cP.displayName="Area";var Xqe="Invariant failed";function Qqe(t,e){throw new Error(Xqe)}function KL(){return KL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KL.apply(null,arguments)}function Mk(t){return S.createElement(A7,KL({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Zqe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(_t(e))return e;var s=_t(r)||kr(r);return s?e(r,i):(s||Qqe(),n)}},eGe=(t,e,n)=>n,tGe=(t,e)=>e,DE=Le([PE,tGe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),nGe=Le([DE],t=>t==null?void 0:t.maxBarSize),rGe=(t,e,n,r)=>r,iGe=Le([Nn,PE,iu,su,eGe],(t,e,n,r,i)=>e.filter(s=>t==="horizontal"?s.xAxisId===n:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),sGe=(t,e,n)=>{var r=Nn(t),i=iu(t,e),s=su(t,e);if(!(i==null||s==null))return r==="horizontal"?Ak(t,"yAxis",s,n):Ak(t,"xAxis",i,n)},oGe=(t,e)=>{var n=Nn(t),r=iu(t,e),i=su(t,e);if(!(r==null||i==null))return n==="horizontal"?bY(t,"xAxis",r):bY(t,"yAxis",i)},aGe=Le([iGe,lBe,oGe],AVe),lGe=(t,e,n)=>{var r,i,s=DE(t,e);if(s!=null){var o=iu(t,e),a=su(t,e);if(!(o==null||a==null)){var l=Nn(t),c=sue(t),{maxBarSize:d}=s,h=kr(d)?c:d,m,g;return l==="horizontal"?(m=eu(t,"xAxis",o,n),g=Zc(t,"xAxis",o,n)):(m=eu(t,"yAxis",a,n),g=Zc(t,"yAxis",a,n)),(r=(i=Lh(m,g,!0))!==null&&i!==void 0?i:h)!==null&&r!==void 0?r:0}}},ife=(t,e,n)=>{var r=Nn(t),i=iu(t,e),s=su(t,e);if(!(i==null||s==null)){var o,a;return r==="horizontal"?(o=eu(t,"xAxis",i,n),a=Zc(t,"xAxis",i,n)):(o=eu(t,"yAxis",s,n),a=Zc(t,"yAxis",s,n)),Lh(o,a)}},cGe=Le([aGe,sue,aBe,oue,lGe,ife,nGe],PVe),uGe=(t,e,n)=>{var r=iu(t,e);if(r!=null)return eu(t,"xAxis",r,n)},dGe=(t,e,n)=>{var r=su(t,e);if(r!=null)return eu(t,"yAxis",r,n)},fGe=(t,e,n)=>{var r=iu(t,e);if(r!=null)return Zc(t,"xAxis",r,n)},hGe=(t,e,n)=>{var r=su(t,e);if(r!=null)return Zc(t,"yAxis",r,n)},pGe=Le([cGe,DE],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),mGe=Le([sGe,DE],_Ve),gGe=Le([Ri,i6,uGe,dGe,fGe,hGe,pGe,Nn,Hce,ife,mGe,DE,rGe],(t,e,n,r,i,s,o,a,l,c,d,h,m)=>{var{chartData:g,dataStartIndex:v,dataEndIndex:x}=l;if(!(h==null||o==null||e==null||a!=="horizontal"&&a!=="vertical"||n==null||r==null||i==null||s==null||c==null)){var{data:b}=h,w;if(b!=null&&b.length>0?w=b:w=g==null?void 0:g.slice(v,x+1),w!=null)return qGe({layout:a,barSettings:h,pos:o,parentViewBox:e,bandSize:c,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:d,displayedData:w,offset:t,cells:m,dataStartIndex:v})}}),yGe=["index"];function WL(){return WL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WL.apply(null,arguments)}function xGe(t,e){if(t==null)return{};var n,r,i=vGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sfe=S.createContext(void 0),bGe=t=>{var e=S.useContext(sfe);if(e!=null)return e.stackId;if(t!=null)return Rle(t)},wGe=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),EGe=t=>{var e=S.useContext(sfe);if(e!=null){var{stackId:n}=e;return"url(#".concat(wGe(n,t),")")}},SGe=t=>{var{index:e}=t,n=xGe(t,yGe),r=EGe(e);return S.createElement(ei,WL({className:"recharts-bar-stack-layer",clipPath:r},n))},AGe=["onMouseEnter","onMouseLeave","onClick"],TGe=["value","background","tooltipPosition"],kGe=["id"],NGe=["onMouseEnter","onClick","onMouseLeave"];function jd(){return jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jd.apply(null,arguments)}function UJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function to(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UJ(Object(n),!0).forEach(function(r){CGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CGe(t,e,n){return(e=PGe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PGe(t){var e=_Ge(t,"string");return typeof e=="symbol"?e:e+""}function _Ge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lk(t,e){if(t==null)return{};var n,r,i=IGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function IGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var RGe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:Hh(n,e),payload:t}]},OGe=S.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:s,hide:o,unit:a,tooltipType:l,id:c}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:Hh(s,e),hide:o,type:l,color:i,unit:a,graphicalItemId:c}};return S.createElement(iP,{tooltipEntrySettings:d})});function MGe(t){var e=Ut(Dh),{data:n,dataKey:r,background:i,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:a,onClick:l}=s,c=Lk(s,AGe),d=T7(o,r,s.id),h=k7(a),m=N7(l,r,s.id);if(!i||n==null)return null;var g=zm(i);return S.createElement(po,{zIndex:IVe(i,li.barBackground)},n.map((v,x)=>{var{value:b,background:w,tooltipPosition:k}=v,N=Lk(v,TGe);if(!w)return null;var O=d(v,x),D=h(v,x),_=m(v,x),F=to(to(to(to(to({option:i,isActive:String(x)===e},N),{},{fill:"#eee"},w),g),gC(c,v,x)),{},{onMouseEnter:O,onMouseLeave:D,onClick:_,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return S.createElement(Mk,jd({key:"background-bar-".concat(x)},F))}))}function LGe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return to(to({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return S.createElement(v7,{value:e?i:void 0},n)}function jGe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:s,dataKey:o}=t,a=Ut(Dh),l=Ut(f7),c=n&&String(s)===a&&(l==null||o===l),d=c?n:e;return c?S.createElement(po,{zIndex:li.activeBar},S.createElement(Mk,jd({},r,{name:String(r.name)},i,{isActive:c,option:d,index:s,dataKey:o}))):S.createElement(Mk,jd({},r,{name:String(r.name)},i,{isActive:c,option:d,index:s,dataKey:o}))}function DGe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:s}=t;return S.createElement(Mk,jd({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:s}))}function BGe(t){var e,{data:n,props:r}=t,i=(e=co(r))!==null&&e!==void 0?e:{},{id:s}=i,o=Lk(i,kGe),{shape:a,dataKey:l,activeBar:c}=r,{onMouseEnter:d,onClick:h,onMouseLeave:m}=r,g=Lk(r,NGe),v=T7(d,l,s),x=k7(m),b=N7(h,l,s);return n?S.createElement(S.Fragment,null,n.map((w,k)=>S.createElement(SGe,jd({index:k,key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(k),className:"recharts-bar-rectangle"},gC(g,w,k),{onMouseEnter:v(w,k),onMouseLeave:x(w,k),onClick:b(w,k)}),c?S.createElement(jGe,{shape:a,activeBar:c,baseProps:o,entry:w,index:k,dataKey:l}):S.createElement(DGe,{shape:a,baseProps:o,entry:w,index:k,dataKey:l})))):null}function UGe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:s,animationBegin:o,animationDuration:a,animationEasing:l,onAnimationEnd:c,onAnimationStart:d}=e,h=n.current,m=gv(e,"recharts-bar-"),[g,v]=S.useState(!1),x=!g,b=S.useCallback(()=>{typeof c=="function"&&c(),v(!1)},[c]),w=S.useCallback(()=>{typeof d=="function"&&d(),v(!0)},[d]);return S.createElement(LGe,{showLabels:x,rects:r},S.createElement(mv,{animationId:m,begin:o,duration:a,isActive:s,easing:l,onAnimationEnd:b,onAnimationStart:w,key:m},k=>{var N=k===1?r:r==null?void 0:r.map((O,D)=>{var _=h&&h[D];if(_)return to(to({},O),{},{x:Gn(_.x,O.x,k),y:Gn(_.y,O.y,k),width:Gn(_.width,O.width,k),height:Gn(_.height,O.height,k)});if(i==="horizontal"){var F=Gn(0,O.height,k),z=Gn(O.stackedBarStart,O.y,k);return to(to({},O),{},{y:z,height:F})}var L=Gn(0,O.width,k),$=Gn(O.stackedBarStart,O.x,k);return to(to({},O),{},{width:L,x:$})});return k>0&&(n.current=N??null),N==null?null:S.createElement(ei,null,S.createElement(BGe,{props:e,data:N}))}),S.createElement(tP,{label:e.label}),e.children)}function FGe(t){var e=S.useRef(null);return S.createElement(UGe,{previousRectanglesRef:e,props:t})}var ofe=0,$Ge=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Yn(t,e)}};class zGe extends S.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:s,yAxisId:o,needClip:a,background:l,id:c}=this.props;if(e||n==null)return null;var d=Mn("recharts-bar",i),h=c;return S.createElement(ei,{className:d,id:c},a&&S.createElement("defs",null,S.createElement(M7,{clipPathId:h,xAxisId:s,yAxisId:o})),S.createElement(ei,{className:"recharts-bar-rectangles",clipPath:a?"url(#clipPath-".concat(h,")"):void 0},S.createElement(MGe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),S.createElement(FGe,this.props)))}}var VGe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:ofe,xAxisId:0,yAxisId:0,zIndex:li.bar};function HGe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:d}=t,{needClip:h}=lP(e,n),m=qh(),g=Ji(),v=E7(t.children,kv),x=Ut(k=>gGe(k,t.id,g,v));if(m!=="vertical"&&m!=="horizontal")return null;var b,w=x==null?void 0:x[0];return w==null||w.height==null||w.width==null?b=0:b=m==="vertical"?w.height/2:w.width/2,S.createElement(zde,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:$Ge,errorBarOffset:b},S.createElement(zGe,jd({},t,{layout:m,needClip:h,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:s,activeBar:o,animationBegin:a,animationDuration:l,animationEasing:c,isAnimationActive:d})))}function qGe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:s,xAxis:o,yAxis:a,xAxisTicks:l,yAxisTicks:c,stackedData:d,displayedData:h,offset:m,cells:g,parentViewBox:v,dataStartIndex:x}=t,b=e==="horizontal"?a:o,w=d?b.scale.domain():null,k=sje({numericAxis:b}),N=b.scale(k);return h.map((O,D)=>{var _,F,z,L,$,G;if(d){var V=d[D+x];if(V==null)return null;_=eje(V,w)}else _=Yn(O,n),Array.isArray(_)||(_=[k,_]);var U=Zqe(r,ofe)(_[1],D);if(e==="horizontal"){var A,[I,j]=[a.scale(_[0]),a.scale(_[1])];F=kK({axis:o,ticks:l,bandSize:s,offset:i.offset,entry:O,index:D}),z=(A=j??I)!==null&&A!==void 0?A:void 0,L=i.size;var q=I-j;if($=ol(q)?0:q,G={x:F,y:m.top,width:L,height:m.height},Math.abs(U)>0&&Math.abs($)<Math.abs(U)){var K=Yi($||U)*(Math.abs(U)-Math.abs($));z-=K,$+=K}}else{var[te,Y]=[o.scale(_[0]),o.scale(_[1])];if(F=te,z=kK({axis:a,ticks:c,bandSize:s,offset:i.offset,entry:O,index:D}),L=Y-te,$=i.size,G={x:m.left,y:z,width:m.width,height:$},Math.abs(U)>0&&Math.abs(L)<Math.abs(U)){var H=Yi(L||U)*(Math.abs(U)-Math.abs(L));L+=H}}if(F==null||z==null||L==null||$==null)return null;var M=to(to({},O),{},{stackedBarStart:N,x:F,y:z,width:L,height:$,value:d?_:_[1],payload:O,background:G,tooltipPosition:{x:F+L/2,y:z+$/2},parentViewBox:v},g&&g[D]&&g[D].props);return M}).filter(Boolean)}function GGe(t){var e=Ti(t,VGe),n=bGe(e.stackId),r=Ji();return S.createElement(sP,{id:e.id,type:"bar"},i=>S.createElement(S.Fragment,null,S.createElement(C7,{legendPayload:RGe(e)}),S.createElement(OGe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),S.createElement(P7,{type:"bar",id:i,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:n,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),S.createElement(po,{zIndex:e.zIndex},S.createElement(HGe,jd({},e,{id:i})))))}var afe=S.memo(GGe,jE);afe.displayName="Bar";var KGe=["domain","range"],WGe=["domain","range"];function FJ(t,e){if(t==null)return{};var n,r,i=YGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function YGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function $J(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function lfe(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=FJ(t,KGe),{domain:s,range:o}=e,a=FJ(e,WGe);return!$J(n,s)||!$J(r,o)?!1:jE(i,a)}var JGe=["dangerouslySetInnerHTML","ticks","scale"],XGe=["id","scale"];function YL(){return YL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YL.apply(null,arguments)}function zJ(t,e){if(t==null)return{};var n,r,i=QGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function QGe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ZGe(t){var e=Mr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?e(cVe(t)):n.current!==t&&e(uVe({prev:n.current,next:t})),n.current=t},[t,e]),S.useLayoutEffect(()=>()=>{n.current&&(e(dVe(n.current)),n.current=null)},[e]),null}var eKe=t=>{var{xAxisId:e,className:n}=t,r=Ut(i6),i=Ji(),s="xAxis",o=Ut(w=>Bue(w,s,e,i)),a=Ut(w=>Mue(w,e)),l=Ut(w=>oUe(w,e)),c=Ut(w=>mue(w,e));if(a==null||l==null||c==null)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:m}=t,g=zJ(t,JGe),{id:v,scale:x}=c,b=zJ(c,XGe);return S.createElement(O7,YL({},g,b,{x:l.x,y:l.y,width:a.width,height:a.height,className:Mn("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},tKe={allowDataOverflow:Di.allowDataOverflow,allowDecimals:Di.allowDecimals,allowDuplicatedCategory:Di.allowDuplicatedCategory,angle:Di.angle,axisLine:vd.axisLine,height:Di.height,hide:!1,includeHidden:Di.includeHidden,interval:Di.interval,minTickGap:Di.minTickGap,mirror:Di.mirror,orientation:Di.orientation,padding:Di.padding,reversed:Di.reversed,scale:Di.scale,tick:Di.tick,tickCount:Di.tickCount,tickLine:vd.tickLine,tickSize:vd.tickSize,type:Di.type,xAxisId:0},nKe=t=>{var e=Ti(t,tKe);return S.createElement(S.Fragment,null,S.createElement(ZGe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),S.createElement(eKe,e))},Tw=S.memo(nKe,lfe);Tw.displayName="XAxis";var rKe=["dangerouslySetInnerHTML","ticks","scale"],iKe=["id","scale"];function JL(){return JL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JL.apply(null,arguments)}function VJ(t,e){if(t==null)return{};var n,r,i=sKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function oKe(t){var e=Mr(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?e(fVe(t)):n.current!==t&&e(hVe({prev:n.current,next:t})),n.current=t},[t,e]),S.useLayoutEffect(()=>()=>{n.current&&(e(pVe(n.current)),n.current=null)},[e]),null}var aKe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=S.useRef(null),o=S.useRef(null),a=Ut(i6),l=Ji(),c=Mr(),d="yAxis",h=Ut(_=>Lue(_,e)),m=Ut(_=>lUe(_,e)),g=Ut(_=>Bue(_,d,e,l)),v=Ut(_=>gue(_,e));if(S.useLayoutEffect(()=>{if(!(r!=="auto"||!h||x7(i)||S.isValidElement(i)||v==null)){var _=s.current;if(_){var F=_.getCalculatedWidth();Math.round(h.width)!==Math.round(F)&&c(mVe({id:e,width:F}))}}},[g,h,c,i,e,r,v]),h==null||m==null||v==null)return null;var{dangerouslySetInnerHTML:x,ticks:b,scale:w}=t,k=VJ(t,rKe),{id:N,scale:O}=v,D=VJ(v,iKe);return S.createElement(O7,JL({},k,D,{ref:s,labelRef:o,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:Mn("recharts-".concat(d," ").concat(d),n),viewBox:a,ticks:g,axisType:d}))},lKe={allowDataOverflow:Bi.allowDataOverflow,allowDecimals:Bi.allowDecimals,allowDuplicatedCategory:Bi.allowDuplicatedCategory,angle:Bi.angle,axisLine:vd.axisLine,hide:!1,includeHidden:Bi.includeHidden,interval:Bi.interval,minTickGap:Bi.minTickGap,mirror:Bi.mirror,orientation:Bi.orientation,padding:Bi.padding,reversed:Bi.reversed,scale:Bi.scale,tick:Bi.tick,tickCount:Bi.tickCount,tickLine:vd.tickLine,tickSize:vd.tickSize,type:Bi.type,width:Bi.width,yAxisId:0},cKe=t=>{var e=Ti(t,lKe);return S.createElement(S.Fragment,null,S.createElement(oKe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),S.createElement(aKe,e))},kw=S.memo(cKe,lfe);kw.displayName="YAxis";var uKe=(t,e)=>e,j7=Le([uKe,Nn,hue,Mi,ede,Wd,SFe,Ri],_Fe),D7=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},cfe=al("mouseClick"),ufe=xE();ufe.startListening({actionCreator:cfe,effect:(t,e)=>{var n=t.payload,r=j7(e.getState(),D7(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(EUe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var XL=al("mouseMove"),dfe=xE(),QA=null;dfe.startListening({actionCreator:XL,effect:(t,e)=>{var n=t.payload;QA!==null&&cancelAnimationFrame(QA);var r=D7(n);QA=requestAnimationFrame(()=>{var i=e.getState(),s=o7(i,i.tooltip.settings.shared);if(s==="axis"){var o=j7(i,r);(o==null?void 0:o.activeIndex)!=null?e.dispatch(Gue({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(que())}QA=null})}});function dKe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var HJ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},ffe=jo({name:"rootProps",initialState:HJ,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:HJ.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),fKe=ffe.reducer,{updateOptions:hKe}=ffe.actions,hfe=jo({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:pKe}=hfe.actions,mKe=hfe.reducer,pfe=al("keyDown"),mfe=al("focus"),B7=xE();B7.startListening({actionCreator:pfe,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=a7(i,Tv(n),IE(n),ME(n)),a=o==null?-1:Number(o);if(!(!Number.isFinite(a)||a<0)){var l=Wd(n);if(s==="Enter"){var c=kk(n,"axis","hover",String(i.index));e.dispatch(FL({active:!i.active,activeIndex:i.index,activeCoordinate:c}));return}var d=fUe(n),h=d==="left-to-right"?1:-1,m=s==="ArrowRight"?1:-1,g=a+m*h;if(!(l==null||g>=l.length||g<0)){var v=kk(n,"axis","hover",String(g));e.dispatch(FL({active:!0,activeIndex:g.toString(),activeCoordinate:v}))}}}}}});B7.startListening({actionCreator:mfe,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=kk(n,"axis","hover",String(s));e.dispatch(FL({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Da=al("externalEvent"),gfe=xE(),f4=new Map;gfe.startListening({actionCreator:Da,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=f4.get(i);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var a=e.getState(),l={activeCoordinate:lFe(a),activeDataKey:f7(a),activeIndex:Dh(a),activeLabel:rde(a),activeTooltipIndex:Dh(a),isTooltipActive:cFe(a)};n(l,r)}finally{f4.delete(i)}});f4.set(i,o)}}});var gKe=Le([Sv],t=>t.tooltipItemPayloads),yKe=Le([gKe,OE,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(a=>a.settings.graphicalItemId===r);if(i!=null){var{positions:s}=i;if(s!=null){var o=e(s,n);return o}}}),yfe=al("touchMove"),xfe=xE();xfe.startListening({actionCreator:yfe,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=o7(r,r.tooltip.settings.shared);if(i==="axis"){var s=n.touches[0];if(s==null)return;var o=j7(r,D7({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(Gue({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var a,l=n.touches[0];if(document.elementFromPoint==null||l==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(Mle),h=(a=c.getAttribute(Lle))!==null&&a!==void 0?a:void 0,m=Av(r).find(x=>x.id===h);if(d==null||m==null||h==null)return;var{dataKey:g}=m,v=yKe(r,d,h);e.dispatch(Hue({activeDataKey:g,activeIndex:d,activeCoordinate:v,activeGraphicalItemId:h}))}}}});var xKe=tle({brush:RVe,cartesianAxis:gVe,chartData:o9e,errorBars:PHe,graphicalItems:Sze,layout:WLe,legend:eDe,options:t9e,polarAxis:D$e,polarOptions:mKe,referenceElements:UVe,rootProps:fKe,tooltip:SUe,zIndex:HFe}),vKe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return vLe({reducer:xKe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([ufe.middleware,dfe.middleware,B7.middleware,gfe.middleware,xfe.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(gle({type:"raf"}))},devTools:{serialize:{replacer:dKe},name:"recharts-".concat(n)}})};function vfe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Ji(),s=S.useRef(null);if(i)return n;s.current==null&&(s.current=vKe(e,r));var o=Y8;return S.createElement(tqe,{context:o,store:s.current},n)}function bKe(t){var{layout:e,margin:n}=t,r=Mr(),i=Ji();return S.useEffect(()=>{i||(r(qLe(e)),r(HLe(n)))},[r,i,e,n]),null}var bfe=S.memo(bKe,jE);function wfe(t){var e=Mr();return S.useEffect(()=>{e(hKe(t))},[e,t]),null}function qJ(t){var{zIndex:e,isPanorama:n}=t,r=S.useRef(null),i=Mr();return S.useLayoutEffect(()=>(r.current&&i(zFe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(VFe({zIndex:e,isPanorama:n}))}),[i,e,n]),S.createElement("g",{tabIndex:-1,ref:r})}function GJ(t){var{children:e,isPanorama:n}=t,r=Ut(RFe);if(!r||r.length===0)return e;var i=r.filter(o=>o<0),s=r.filter(o=>o>0);return S.createElement(S.Fragment,null,i.map(o=>S.createElement(qJ,{key:o,zIndex:o,isPanorama:n})),e,s.map(o=>S.createElement(qJ,{key:o,zIndex:o,isPanorama:n})))}var wKe=["children"];function EKe(t,e){if(t==null)return{};var n,r,i=SKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function SKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function jk(){return jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jk.apply(null,arguments)}var AKe={width:"100%",height:"100%",display:"block"},TKe=S.forwardRef((t,e)=>{var n=$le(),r=zle(),i=Zle();if(!Xc(n)||!Xc(r))return null;var{children:s,otherAttributes:o,title:a,desc:l}=t,c,d;return o!=null&&(typeof o.tabIndex=="number"?c=o.tabIndex:c=i?0:void 0,typeof o.role=="string"?d=o.role:d=i?"application":void 0),S.createElement(xae,jk({},o,{title:a,desc:l,role:d,tabIndex:c,width:n,height:r,style:AKe,ref:e}),s)}),kKe=t=>{var{children:e}=t,n=Ut(PC);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return S.createElement(xae,{width:r,height:i,x:o,y:s},e)},KJ=S.forwardRef((t,e)=>{var{children:n}=t,r=EKe(t,wKe),i=Ji();return i?S.createElement(kKe,null,S.createElement(GJ,{isPanorama:!0},n)):S.createElement(TKe,jk({ref:e},r),S.createElement(GJ,{isPanorama:!1},n))});function NKe(){var t=Mr(),[e,n]=S.useState(null),r=Ut(dje);return S.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;hr(s)&&s!==r&&t(KLe(s))}},[e,t,r]),n}function WJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CKe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WJ(Object(n),!0).forEach(function(r){PKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PKe(t,e,n){return(e=_Ke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ke(t){var e=IKe(t,"string");return typeof e=="symbol"?e:e+""}function IKe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jm(){return Jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jm.apply(null,arguments)}var RKe=()=>(m9e(),null);function Dk(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var OKe=S.forwardRef((t,e)=>{var n,r,i=S.useRef(null),[s,o]=S.useState({containerWidth:Dk((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Dk((r=t.style)===null||r===void 0?void 0:r.height)}),a=S.useCallback((c,d)=>{o(h=>{var m=Math.round(c),g=Math.round(d);return h.containerWidth===m&&h.containerHeight===g?h:{containerWidth:m,containerHeight:g}})},[]),l=S.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:d,height:h}=c.getBoundingClientRect();a(d,h);var m=v=>{var{width:x,height:b}=v[0].contentRect;a(x,b)},g=new ResizeObserver(m);g.observe(c),i.current=g}},[e,a]);return S.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[a]),S.createElement(S.Fragment,null,S.createElement(IC,{width:s.containerWidth,height:s.containerHeight}),S.createElement("div",Jm({ref:l},t)))}),MKe=S.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=S.useState({containerWidth:Dk(n),containerHeight:Dk(r)}),o=S.useCallback((l,c)=>{s(d=>{var h=Math.round(l),m=Math.round(c);return d.containerWidth===h&&d.containerHeight===m?d:{containerWidth:h,containerHeight:m}})},[]),a=S.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:d}=l.getBoundingClientRect();o(c,d)}},[e,o]);return S.createElement(S.Fragment,null,S.createElement(IC,{width:i.containerWidth,height:i.containerHeight}),S.createElement("div",Jm({ref:a},t)))}),LKe=S.forwardRef((t,e)=>{var{width:n,height:r}=t;return S.createElement(S.Fragment,null,S.createElement(IC,{width:n,height:r}),S.createElement("div",Jm({ref:e},t)))}),jKe=S.forwardRef((t,e)=>{var{width:n,height:r}=t;return _d(n)||_d(r)?S.createElement(MKe,Jm({},t,{ref:e})):S.createElement(LKe,Jm({},t,{ref:e}))});function DKe(t){return t===!0?OKe:jKe}var BKe=S.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:a,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,onMouseMove:h,onMouseUp:m,onTouchEnd:g,onTouchMove:v,onTouchStart:x,style:b,width:w,responsive:k,dispatchTouchEvents:N=!0}=t,O=S.useRef(null),D=Mr(),[_,F]=S.useState(null),[z,L]=S.useState(null),$=NKe(),G=s6(),V=(G==null?void 0:G.width)>0?G.width:w,U=(G==null?void 0:G.height)>0?G.height:i,A=S.useCallback(ce=>{$(ce),typeof e=="function"&&e(ce),F(ce),L(ce),ce!=null&&(O.current=ce)},[$,e,F,L]),I=S.useCallback(ce=>{D(cfe(ce)),D(Da({handler:s,reactEvent:ce}))},[D,s]),j=S.useCallback(ce=>{D(XL(ce)),D(Da({handler:c,reactEvent:ce}))},[D,c]),q=S.useCallback(ce=>{D(que()),D(Da({handler:d,reactEvent:ce}))},[D,d]),K=S.useCallback(ce=>{D(XL(ce)),D(Da({handler:h,reactEvent:ce}))},[D,h]),te=S.useCallback(()=>{D(mfe())},[D]),Y=S.useCallback(ce=>{D(pfe(ce.key))},[D]),H=S.useCallback(ce=>{D(Da({handler:o,reactEvent:ce}))},[D,o]),M=S.useCallback(ce=>{D(Da({handler:a,reactEvent:ce}))},[D,a]),P=S.useCallback(ce=>{D(Da({handler:l,reactEvent:ce}))},[D,l]),W=S.useCallback(ce=>{D(Da({handler:m,reactEvent:ce}))},[D,m]),X=S.useCallback(ce=>{D(Da({handler:x,reactEvent:ce}))},[D,x]),ie=S.useCallback(ce=>{N&&D(yfe(ce)),D(Da({handler:v,reactEvent:ce}))},[D,N,v]),oe=S.useCallback(ce=>{D(Da({handler:g,reactEvent:ce}))},[D,g]),Te=DKe(k);return S.createElement(dde.Provider,{value:_},S.createElement(Z4e.Provider,{value:z},S.createElement(Te,{width:V??(b==null?void 0:b.width),height:U??(b==null?void 0:b.height),className:Mn("recharts-wrapper",r),style:CKe({position:"relative",cursor:"default",width:V,height:U},b),onClick:I,onContextMenu:H,onDoubleClick:M,onFocus:te,onKeyDown:Y,onMouseDown:P,onMouseEnter:j,onMouseLeave:q,onMouseMove:K,onMouseUp:W,onTouchEnd:oe,onTouchMove:ie,onTouchStart:X,ref:A},S.createElement(RKe,null),n)))}),UKe=["width","height","responsive","children","className","style","compact","title","desc"];function FKe(t,e){if(t==null)return{};var n,r,i=$Ke(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $Ke(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Efe=S.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:o,style:a,compact:l,title:c,desc:d}=t,h=FKe(t,UKe),m=co(h);return l?S.createElement(S.Fragment,null,S.createElement(IC,{width:n,height:r}),S.createElement(KJ,{otherAttributes:m,title:c,desc:d},s)):S.createElement(BKe,{className:o,style:a,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},S.createElement(KJ,{otherAttributes:m,title:c,desc:d,ref:e},S.createElement($Ve,null,s)))});function QL(){return QL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QL.apply(null,arguments)}var zKe={top:5,right:5,bottom:5,left:5},VKe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:zKe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},U7=S.forwardRef(function(e,n){var r,i=Ti(e.categoricalChartProps,VKe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:a,tooltipPayloadSearcher:l,eventEmitter:void 0};return S.createElement(vfe,{preloadedState:{options:d},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},S.createElement(jde,{chartData:c.data}),S.createElement(bfe,{layout:i.layout,margin:i.margin}),S.createElement(wfe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),S.createElement(Efe,QL({},i,{ref:n})))}),HKe=["axis","item"],qKe=S.forwardRef((t,e)=>S.createElement(U7,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:HKe,tooltipPayloadSearcher:ZC,categoricalChartProps:t,ref:e}));function GKe(t){var e=Mr();return S.useEffect(()=>{e(pKe(t))},[e,t]),null}var KKe=["layout"];function ZL(){return ZL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZL.apply(null,arguments)}function WKe(t,e){if(t==null)return{};var n,r,i=YKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function YKe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var JKe={top:5,right:5,bottom:5,left:5},Sfe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:JKe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},XKe=S.forwardRef(function(e,n){var r,i=Ti(e.categoricalChartProps,Sfe),{layout:s}=i,o=WKe(i,KKe),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d}=e,h={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return S.createElement(vfe,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:a},S.createElement(jde,{chartData:i.data}),S.createElement(bfe,{layout:s,margin:i.margin}),S.createElement(wfe,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),S.createElement(GKe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),S.createElement(Efe,ZL({},o,{ref:n})))});function YJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YJ(Object(n),!0).forEach(function(r){QKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YJ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QKe(t,e,n){return(e=ZKe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZKe(t){var e=eWe(t,"string");return typeof e=="symbol"?e:e+""}function eWe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tWe=["item"],nWe=JJ(JJ({},Sfe),{},{layout:"centric",startAngle:0,endAngle:360}),Afe=S.forwardRef((t,e)=>{var n=Ti(t,nWe);return S.createElement(XKe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:tWe,tooltipPayloadSearcher:ZC,categoricalChartProps:n,ref:e})}),rWe=["axis"],Tfe=S.forwardRef((t,e)=>S.createElement(U7,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:rWe,tooltipPayloadSearcher:ZC,categoricalChartProps:t,ref:e})),iWe=["axis"],sWe=S.forwardRef((t,e)=>S.createElement(U7,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:iWe,tooltipPayloadSearcher:ZC,categoricalChartProps:t,ref:e}));const F7="https://api.devnet.solana.com",oWe="HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8",Th=[{symbol:"SOL",name:"Solana",mint:"So11111111111111111111111111111111111111112",decimals:9,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"},{symbol:"USDC",name:"USD Coin (Devnet)",mint:"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png"}],Oc={SOL:145.5,USDC:1,RAY:1.85},aWe="https://dlmm-api.meteora.ag",XJ=({network:t})=>{const e={solana:"bg-[#9b87f5]/15 text-[#9b87f5] border-[#9b87f5]/30",hyperliquid:"bg-[#34d399]/15 text-[#34d399] border-[#34d399]/30",polymarket:"bg-[#60a5fa]/15 text-[#60a5fa] border-[#60a5fa]/30"},n={solana:"SOL",hyperliquid:"HL",polymarket:"PM"};return u.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-semibold rounded uppercase tracking-[0.05em] border ${e[t]}`,children:n[t]})},lWe=({vault:t,connectOwnerWallet:e,disconnectOwnerWallet:n,connectHLOwnerWallet:r,disconnectHLOwnerWallet:i,connectPMOwnerWallet:s,disconnectPMOwnerWallet:o,assetPrices:a,portfolioHistoryDaily:l,portfolioHistoryLongTerm:c,scheduledTasks:d,assetAllocationData:h,activityFeed:m,activityDisplayCount:g,setActivityDisplayCount:v,setActiveTab:x,refreshData:b,onNewChat:w})=>{const[k,N]=S.useState("all"),[O,D]=S.useState(0),_=2,[F,z]=S.useState("1D"),L=c.length,$=S.useMemo(()=>({"1D":l.length>0||L>=1,"1W":L>=7,"1M":L>=30,"1Y":L>=365}),[L,l.length]),G=S.useMemo(()=>{if(F==="1D")return l;if(c.length===0)return[];const ie={"1D":1,"1W":7,"1M":30,"1Y":365}[F]||30;return c.slice(-ie)},[l,c,F]),[V,U]=S.useState(0),A=2,[I,j]=S.useState(null),[q,K]=S.useState("pie"),[te,Y]=S.useState(null),[H,M]=S.useState(void 0),P=async X=>{try{await navigator.clipboard.writeText(X),j(X),setTimeout(()=>j(null),2e3)}catch(ie){console.error("Failed to copy:",ie)}},W=X=>X.network==="solana"&&X.signature?`https://solscan.io/tx/${X.signature}?cluster=devnet`:X.network==="hyperliquid"&&X.signature?`https://app.hyperliquid-testnet.xyz/explorer/tx/${X.signature.replace("hl-","")}`:null;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[u.jsxs("div",{className:"flex flex-col gap-4 lg:gap-6",children:[u.jsxs("div",{className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center group",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:u.jsx(Ih,{size:48,className:"text-white"})}),u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold mb-2",children:"Total Net Worth"}),u.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight",children:["$",h.totalValue.toFixed(2)]}),u.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"Cross-Chain Unified Portfolio"})]}),u.jsxs("button",{onClick:w,className:"glass-panel p-5 rounded relative overflow-hidden flex-1 flex flex-col justify-center items-start text-left hover:bg-[#1a1b21] transition-colors group border border-dashed border-[#232328] hover:border-[#E7FE55]/50",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity text-[#E7FE55]",children:u.jsx(cr,{size:48})}),u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(gt.div,{animate:{scale:[1,1.02,1],boxShadow:["0 0 0px rgba(231, 254, 85, 0)","0 0 8px rgba(231, 254, 85, 0.3)","0 0 0px rgba(231, 254, 85, 0)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"p-1.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] group-hover:bg-[#E7FE55] group-hover:text-black transition-colors",children:u.jsx(yre,{size:16})}),u.jsx("h3",{className:"text-[#E7FE55] font-medium text-sm",children:"New Conversation"})]}),u.jsx("div",{className:"text-[11px] text-[#747580]",children:"Start a new task or query"})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(Si,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Solana Vault"})}),u.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[t.solBalance.toFixed(4)," SOL"]}),u.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.solBalance*(a.SOL||Oc.SOL)).toFixed(2)]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),t.publicKey&&u.jsxs("a",{href:`https://solscan.io/address/${t.publicKey}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"View on Solscan Explorer",children:[u.jsx(I2,{size:10})," Solscan"]})]}),t.publicKey?u.jsxs("div",{onClick:()=>P(t.publicKey),className:"flex items-center gap-2 cursor-pointer group",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.publicKey.slice(0,4),"...",t.publicKey.slice(-4)]}),I===t.publicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Solana Owner"})}),t.ownerPublicKey?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{onClick:()=>P(t.ownerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.ownerPublicKey.slice(0,4),"...",t.ownerPublicKey.slice(-4)]}),I===t.ownerPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),u.jsx("button",{onClick:n,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),u.jsx("button",{onClick:e,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(on,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Hyperliquid Vault"})}),u.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.hlBalance||0).toFixed(2)," USDC"]}),u.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:t.hlPositions&&t.hlPositions.length>0?`${t.hlPositions.length} open position${t.hlPositions.length>1?"s":""}`:"No open positions"}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),u.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[u.jsx(on,{size:10})," Hyperliquid"]})]}),t.hlPublicKey?u.jsxs("div",{onClick:()=>P(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),I===t.hlPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Hyperliquid Owner"})}),t.hlOwnerPublicKey?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{onClick:()=>P(t.hlOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlOwnerPublicKey.slice(0,4),"...",t.hlOwnerPublicKey.slice(-4)]}),I===t.hlOwnerPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),u.jsx("button",{onClick:i,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),u.jsx("button",{onClick:r,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(I2,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center gap-2 mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Polymarket Vault"})}),u.jsxs("div",{className:"text-xl lg:text-2xl font-semibold text-white tracking-tight",children:[(t.pmBalance||0).toFixed(2)," USDC"]}),u.jsxs("div",{className:"text-[11px] text-[#E7FE55] mt-1",children:[" $",(t.pmBalance||0).toFixed(2)]}),u.jsxs("div",{className:"mt-4 pt-3 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-[0.05em] text-[#747580]",children:"Vault Address"}),u.jsxs("a",{href:"https://polymarket.com",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Polymarket Platform",children:[u.jsx(I2,{size:10})," Polymarket"]})]}),t.pmPublicKey?u.jsxs("div",{onClick:()=>P(t.pmPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmPublicKey.slice(0,6),"...",t.pmPublicKey.slice(-4)]}),I===t.pmPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not created"})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("span",{className:"text-[10px] uppercase tracking-[0.05em] font-semibold text-[#747580]",children:"Polymarket Owner"})}),t.pmOwnerPublicKey?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{onClick:()=>P(t.pmOwnerPublicKey),className:"flex items-center gap-2 cursor-pointer group flex-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-xs text-white font-mono truncate group-hover:text-[#E7FE55] transition-colors",children:[t.pmOwnerPublicKey.slice(0,4),"...",t.pmOwnerPublicKey.slice(-4)]}),I===t.pmOwnerPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-2",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}),u.jsx("button",{onClick:o,className:"ml-2 px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors flex-shrink-0",children:"Disconnect"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),u.jsx("button",{onClick:s,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors flex-shrink-0",children:"Connect"})]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"2xl:col-span-2 space-y-6",children:[u.jsxs("div",{className:"glass-panel p-6 rounded",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(Si,{className:"text-[#E7FE55]",size:18}),"Portfolio Evolution"]}),u.jsx("div",{className:"flex gap-2",children:["1D","1W","1M","1Y"].map(X=>{const ie=$[X],oe=X===F;return u.jsx("button",{disabled:!ie,onClick:()=>ie&&z(X),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${ie?oe?"bg-[#E7FE55]/15 text-[#E7FE55] border border-[#E7FE55]/30":"text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]":"text-[#3a3a40] cursor-not-allowed"}`,children:X},X)})})]}),u.jsx("div",{className:"h-[250px] lg:h-[300px] w-full",children:u.jsx(dw,{width:"100%",height:"100%",children:u.jsxs(sWe,{data:G.length>0?G:[],children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.25}),u.jsx("stop",{offset:"50%",stopColor:"#E7FE55",stopOpacity:.08}),u.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),u.jsx(Sw,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),u.jsx(Tw,{dataKey:"date",stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),u.jsx(kw,{stroke:"#747580",tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1,tickFormatter:X=>`$${X}`,width:50}),u.jsx(Nk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#e4e5e9"},labelStyle:{color:"#747580"},itemSorter:X=>({value:0,solValue:1,hlValue:2,pmValue:3})[X.dataKey]??10,formatter:(X,ie)=>[`$${X.toFixed(2)}`,ie==="value"?"Total Value":ie==="solValue"?"SOL Value":ie==="hlValue"?"HL Value":ie==="pmValue"?"PM Value":ie]}),u.jsx(cP,{type:"monotone",dataKey:"value",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorValue)"}),u.jsx(Z2,{type:"monotone",dataKey:"solValue",stroke:"#9b87f5",strokeWidth:1.5,dot:!1}),u.jsx(Z2,{type:"monotone",dataKey:"hlValue",stroke:"#34d399",strokeWidth:1.5,dot:!1}),u.jsx(Z2,{type:"monotone",dataKey:"pmValue",stroke:"#60a5fa",strokeWidth:1.5,dot:!1})]})})}),u.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 text-[11px] text-[#747580]",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#E7FE55]"}),u.jsx("span",{children:"Total Value"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]"}),u.jsx("span",{children:"SOL Value"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34d399]"}),u.jsx("span",{children:"HL Value"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#60a5fa]"}),u.jsx("span",{children:"PM Value"})]})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(on,{className:"text-[#E7FE55]",size:18}),"Open Trading"]}),u.jsxs("button",{onClick:()=>x(be.VAULT_DEALER),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[u.jsx(on,{size:12}),"Details"]})]}),!t.hlPositions||t.hlPositions.length===0?u.jsx("div",{className:"text-center py-8 text-[#747580] text-sm bg-[#14151a] rounded border border-[#232328]",children:"No open positions. Start trading to see your portfolio grow!"}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),u.jsx("th",{className:"py-3 font-medium",children:"Size"}),u.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Mark Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),u.jsx("th",{className:"py-3 pr-4 font-medium text-right",children:"Unrealized PnL"})]})}),u.jsx("tbody",{className:"text-sm",children:t.hlPositions.map((X,ie)=>{const oe=parseFloat(X.position.szi),Te=parseFloat(X.position.entryPx),ce=a[X.position.coin]||Te,de=parseFloat(X.position.unrealizedPnl),ke=X.position.leverage.value,ye=oe>0,Ke=ye?Te*(1-.9/ke):Te*(1+.9/ke);return u.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[u.jsx("td",{className:"py-3 pl-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`w-1 h-6 rounded-full ${ye?"bg-[#34d399]":"bg-red-500"}`}),u.jsx("span",{className:"font-semibold text-white",children:X.position.coin}),u.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded uppercase tracking-wider ${ye?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:ye?"LONG":"SHORT"})]})}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:Math.abs(oe).toFixed(4)}),u.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",Te.toFixed(4)]}),u.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",ce.toFixed(4)]}),u.jsxs("td",{className:"py-3 text-orange-400/80",children:["$",Ke.toFixed(4)]}),u.jsxs("td",{className:"py-3 text-[#747580]",children:[ke,"x"]}),u.jsxs("td",{className:`py-3 pr-4 text-right font-medium ${de>=0?"text-[#34d399]":"text-red-400"}`,children:[de>=0?"+":"",de.toFixed(2)," USDC"]})]},ie)})})]})})]}),u.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(fr,{className:"text-[#E7FE55]",size:18}),"Open Tasks"]}),u.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[d.filter(X=>X.status==="active").length," Active"]}),u.jsxs("button",{onClick:()=>x(be.SCHEDULER),className:"text-[10px] px-3 py-1.5 rounded uppercase tracking-wider font-medium transition-colors flex items-center gap-2 text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 border border-[#232328] hover:border-[#E7FE55]/30",children:[u.jsx(fr,{size:12}),"Details"]})]}),u.jsx("div",{className:"flex-1 flex flex-col",children:d.filter(X=>X.status==="active").length===0?u.jsx("div",{className:"text-center py-8 text-[#747580] text-sm my-auto bg-[#14151a] rounded border border-[#232328]",children:"No active tasks scheduled. Ask the AI to schedule a swap or transfer."}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-3",children:d.filter(X=>X.status==="active").slice(V*A,(V+1)*A).map(X=>u.jsxs("div",{className:"bg-[#14151a] p-4 rounded border border-[#232328] flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-sm font-medium text-white flex items-center gap-2",children:[X.type,X.type==="HL_ORDER"&&u.jsx(XJ,{network:"hyperliquid"}),X.condition&&u.jsx("span",{className:"text-[10px] text-yellow-500",children:"(Condition)"})]}),u.jsx("div",{className:"text-[11px] text-[#747580]",children:X.condition?`${X.condition.indicator.toUpperCase()} ${X.condition.operator} ${X.condition.value} (${X.condition.symbol})`:`Executes in ${Math.max(0,Math.round(((X.executeAt||0)-Date.now())/6e4))} mins`})]})]}),u.jsxs("div",{className:"text-[10px] font-mono text-[#747580]",children:["ID: ",X.id.slice(-4)]})]},X.id))}),u.jsx("div",{className:"mt-auto",children:d.filter(X=>X.status==="active").length>A&&u.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[u.jsx("button",{onClick:()=>U(Math.max(0,V-1)),disabled:V===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${V===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:u.jsx(z1,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",V+1," of ",Math.ceil(d.filter(X=>X.status==="active").length/A)]}),u.jsx("button",{onClick:()=>U(Math.min(Math.ceil(d.filter(X=>X.status==="active").length/A)-1,V+1)),disabled:V>=Math.ceil(d.filter(X=>X.status==="active").length/A)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${V>=Math.ceil(d.filter(X=>X.status==="active").length/A)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:u.jsx(il,{size:16})})]})})]})})]})]}),u.jsxs("div",{className:"space-y-6 flex flex-col",children:[u.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-white",children:"Asset Allocation"}),u.jsxs("div",{className:"flex gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[u.jsx("button",{onClick:()=>K("bar"),className:`p-1.5 rounded transition-colors ${q==="bar"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Bar View",children:u.jsx(yTe,{size:14})}),u.jsx("button",{onClick:()=>K("pie"),className:`p-1.5 rounded transition-colors ${q==="pie"?"bg-[#232328] text-[#E7FE55]":"text-[#747580] hover:text-[#a0a1a8]"}`,title:"Pie View",children:u.jsx($1,{size:14})})]})]}),u.jsx("div",{className:"h-[180px] w-full relative flex-shrink-0",children:u.jsx(dw,{width:"100%",height:"100%",children:q==="pie"?u.jsxs(Afe,{children:[u.jsx(_7,{data:h.data,cx:"50%",cy:"50%",innerRadius:45,outerRadius:H!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:(X,ie)=>M(ie),onMouseLeave:()=>M(void 0),animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:h.data.map((X,ie)=>u.jsx(kv,{fill:X.color,stroke:H===ie?X.color:"transparent",strokeWidth:H===ie?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:H===ie?`brightness(1.2) drop-shadow(0 0 8px ${X.color})`:"brightness(1)",transform:H===ie?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${ie}`))}),H!==void 0&&h.data[H]&&u.jsxs("g",{children:[u.jsx("text",{x:"50%",y:"42%",textAnchor:"middle",fill:"#fff",fontSize:12,fontWeight:"bold",children:h.data[H].symbol}),u.jsxs("text",{x:"50%",y:"54%",textAnchor:"middle",fill:h.data[H].color,fontSize:15,fontWeight:"bold",fontFamily:"monospace",children:["$",h.data[H].value.toFixed(2)]}),u.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[(h.data[H].value/(h.totalValue||1)*100).toFixed(1),"%"]})]}),H===void 0&&u.jsxs("g",{children:[u.jsx("text",{x:"50%",y:"46%",textAnchor:"middle",fill:"#747580",fontSize:10,style:{textTransform:"uppercase",letterSpacing:"0.1em"},children:"Total"}),u.jsxs("text",{x:"50%",y:"58%",textAnchor:"middle",fill:"#fff",fontSize:18,fontWeight:"600",children:["$",h.totalValue.toFixed(0)]})]})]}):u.jsxs(qKe,{data:[h.data.reduce((X,ie)=>({...X,[ie.symbol]:ie.value}),{name:"Total"})],layout:"vertical",margin:{top:20,right:30,left:20,bottom:5},children:[u.jsx(Sw,{strokeDasharray:"3 3",horizontal:!0,vertical:!0,stroke:"#232328"}),u.jsx(Tw,{type:"number",tickFormatter:X=>`$${X}`,tick:{fill:"#747580",fontSize:10},tickLine:!1,axisLine:!1}),u.jsx(kw,{type:"category",dataKey:"name",hide:!0}),u.jsx(Nk,{cursor:{fill:"transparent"},content:({active:X,payload:ie})=>{if(!X||!ie||!ie.length||!te)return null;const oe=ie.find(Te=>Te.dataKey===te);return oe?u.jsxs("div",{className:"bg-[#14151a] border border-[#232328] p-2 rounded shadow-lg",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{backgroundColor:oe.color}}),u.jsx("span",{className:"text-[#a0a1a8] font-semibold text-[11px]",children:oe.name})]}),u.jsxs("p",{className:"text-white font-mono text-sm",children:["$",Number(oe.value).toFixed(2)]})]}):null}}),h.data.map((X,ie)=>u.jsx(afe,{dataKey:X.symbol,stackId:"a",fill:X.color,onMouseEnter:()=>Y(X.symbol),onMouseLeave:()=>Y(null),radius:ie===0&&h.data.length===1?[4,4,4,4]:ie===0?[4,0,0,4]:ie===h.data.length-1?[0,4,4,0]:[0,0,0,0],barSize:40},X.symbol))]})})}),u.jsx("div",{className:"mt-4 space-y-1 flex-1 overflow-y-auto pr-2 custom-scrollbar",children:h.data.map((X,ie)=>u.jsxs("div",{className:`flex items-center justify-between text-sm p-2 rounded-lg transition-all cursor-pointer ${H===ie?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>M(ie),onMouseLeave:()=>M(void 0),children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 transition-transform",style:{backgroundColor:X.color,transform:H===ie?"scale(1.3)":"scale(1)",boxShadow:H===ie?`0 0 8px ${X.color}`:"none"}}),u.jsx("span",{className:`truncate max-w-[80px] sm:max-w-[100px] text-xs transition-colors ${H===ie?"text-white":"text-[#a0a1a8]"}`,children:X.symbol}),X.network&&u.jsx("span",{className:`text-[9px] px-1 rounded uppercase tracking-wider ${X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":X.network==="hyperliquid"?"bg-[#34d399]/15 text-[#34d399]":"bg-[#60a5fa]/15 text-[#60a5fa]"}`,children:X.network==="solana"?"SOL":X.network==="hyperliquid"?"HL":"PM"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:`text-xs font-mono transition-colors ${H===ie?"text-white":"text-[#747580]"}`,children:["$",X.value.toFixed(2)]}),u.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:X.color},children:[(X.value/(h.totalValue||1)*100).toFixed(1),"%"]})]})]},ie))})]}),u.jsxs("div",{className:"glass-panel p-6 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-sm font-semibold text-white",children:"Recent Activity"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{N(k==="solana"?"all":"solana"),D(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${k==="solana"?"bg-[#9b87f5] text-white":"bg-[#9b87f5]/15 text-[#9b87f5] hover:bg-[#9b87f5]/25"}`,children:"SOL"}),u.jsx("button",{onClick:()=>{N(k==="hyperliquid"?"all":"hyperliquid"),D(0)},className:`text-[9px] px-2 py-1 rounded uppercase tracking-wider font-medium transition-colors ${k==="hyperliquid"?"bg-[#34d399] text-[#0f1015]":"bg-[#34d399]/15 text-[#34d399] hover:bg-[#34d399]/25"}`,children:"HL"})]})]}),u.jsx("div",{className:"flex-1 flex flex-col",children:m.filter(X=>k==="all"||X.network===k).length===0?u.jsx("div",{className:"text-center text-[#747580] text-sm py-4 my-auto bg-[#14151a] rounded border border-[#232328]",children:"No recent activity"}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"space-y-3",children:m.filter(X=>k==="all"||X.network===k).slice(O*_,(O+1)*_).map((X,ie)=>u.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328] last:border-0",children:[u.jsx("div",{className:`mt-1 p-1.5 rounded-full ${X.status==="failed"?"bg-red-500/15 text-red-400":X.network==="solana"?"bg-[#9b87f5]/15 text-[#9b87f5]":"bg-[#34d399]/15 text-[#34d399]"}`,children:X.status==="failed"?u.jsx(J2e,{size:14}):u.jsx(gre,{size:14})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-sm font-medium ${X.status==="failed"?"text-red-400":X.network==="solana"?"text-[#9b87f5]":"text-[#34d399]"}`,children:X.type}),u.jsx(XJ,{network:X.network})]}),u.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:X.time})]}),u.jsx("div",{className:"text-[11px] text-[#747580] truncate mt-0.5",children:X.desc}),X.signature&&W(X)&&u.jsxs("a",{href:W(X),target:"_blank",rel:"noopener noreferrer",className:`text-[10px] ${X.network==="solana"?"text-[#9b87f5] hover:text-[#a78bfa]":"text-[#34d399] hover:text-[#4ade80]"} flex items-center gap-1 mt-1`,children:[X.network==="solana"?"View on Solscan Explorer":"View on HL Explorer"," ",u.jsx(Ed,{size:10})]})]})]},ie))}),u.jsx("div",{className:"mt-auto",children:m.filter(X=>k==="all"||X.network===k).length>_&&u.jsxs("div",{className:"flex items-center justify-between mt-4 pt-2 border-t border-[#232328]",children:[u.jsx("button",{onClick:()=>D(Math.max(0,O-1)),disabled:O===0,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${O===0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:u.jsx(z1,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580]",children:["Page ",O+1," of ",Math.ceil(m.filter(X=>k==="all"||X.network===k).length/_)]}),u.jsx("button",{onClick:()=>D(Math.min(Math.ceil(m.filter(X=>k==="all"||X.network===k).length/_)-1,O+1)),disabled:O>=Math.ceil(m.filter(X=>k==="all"||X.network===k).length/_)-1,className:`p-1 rounded hover:bg-[#1a1b21] transition-colors ${O>=Math.ceil(m.filter(X=>k==="all"||X.network===k).length/_)-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580]"}`,children:u.jsx(il,{size:16})})]})})]})})]})]})]})]})},cWe=({vault:t,password:e,setPassword:n,withdrawAmount:r,setWithdrawAmount:i,withdrawNetwork:s,setWithdrawNetwork:o,isImporting:a,setIsImporting:l,importKey:c,setImportKey:d,createVault:h,unlockVault:m,requestAirdrop:g,handleWithdraw:v,handleWithdrawHL:x,handleWithdrawPM:b,importVault:w,addNotification:k,showBackupModal:N,showHLBackupModal:O,showPMBackupModal:D,isImportingSolana:_,setIsImportingSolana:F,isImportingHyperliquid:z,setIsImportingHyperliquid:L,isImportingPolymarket:$,setIsImportingPolymarket:G,solanaPassword:V,setSolanaPassword:U,hyperliquidPassword:A,setHyperliquidPassword:I,polymarketPassword:j,setPolymarketPassword:q,solanaImportKey:K,setSolanaImportKey:te,hlImportKey:Y,setHLImportKey:H,pmImportKey:M,setPMImportKey:P,createSolanaVault:W,createHyperliquidVault:X,createPolymarketVault:ie,importSolanaVault:oe,importHyperliquidVault:Te,importPolymarketVault:ce,setActiveTab:de,activeVaultTab:ke,setActiveVaultTab:ye,hasCompletedInitialSetup:Ke,setHasCompletedInitialSetup:je,connectOwnerWallet:Ve,disconnectOwnerWallet:me,connectHLOwnerWallet:Ne,disconnectHLOwnerWallet:We,connectPMOwnerWallet:Qe,disconnectPMOwnerWallet:Ze})=>{var Nt,wt,Rt,rn;const at=async()=>{await m()&&de(be.DASHBOARD)},[St,qe]=S.useState(""),[it,Lt]=S.useState(""),[Ie,Ge]=S.useState(""),Tt=()=>{if(!t.isUnlocked&&V!==St){k("Passwords do not match");return}W(),qe("")},xt=()=>{if(!t.isUnlocked&&A!==it){k("Passwords do not match");return}X(),Lt("")},se=()=>{if(!t.isUnlocked&&j!==Ie){k("Passwords do not match");return}ie(),Ge("")},J=S.useMemo(()=>{const et=(t.solBalance||0)*Oc.SOL,Ht=t.hlBalance||0,Hn=t.pmBalance||0;return et+Ht+Hn},[t.solBalance,t.hlBalance,t.pmBalance]),Z=S.useMemo(()=>{const et=(t.solBalance||0)*Oc.SOL,Ht=t.hlBalance||0,Hn=t.pmBalance||0,sn=et+Ht+Hn;return{solana:{value:et,percent:sn>0?et/sn*100:0},hyperliquid:{value:Ht,percent:sn>0?Ht/sn*100:0},polymarket:{value:Hn,percent:sn>0?Hn/sn*100:0},total:sn}},[t.solBalance,t.hlBalance,t.pmBalance]);!t.publicKey&&!t.hlPublicKey||t.isUnlocked;const ue={solana:"#E7FE55",hyperliquid:"#E7FE55",polymarket:"#60a5fa"},Se=()=>{const{solana:et,hyperliquid:Ht,polymarket:Hn,total:sn}=Z,[ae,Q]=S.useState(void 0),ee=S.useMemo(()=>sn===0?[]:[{name:"Solana",value:et.value,percent:et.percent,color:ue.solana},{name:"Hyperliquid",value:Ht.value,percent:Ht.percent,color:ue.hyperliquid},{name:"Polymarket",value:Hn.value,percent:Hn.percent,color:ue.polymarket}].filter(Re=>Re.value>0),[et,Ht,Hn,sn]);if(sn===0)return u.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[u.jsx("div",{className:"w-32 h-32 rounded-full bg-[#1a1b21] border-2 border-dashed border-[#232328] flex items-center justify-center",children:u.jsx($1,{size:32,className:"text-[#747580]"})}),u.jsx("p",{className:"text-[#747580] text-xs mt-4",children:"No assets"})]});const fe=(Re,Ue)=>{Q(Ue)},_e=()=>{Q(void 0)};return u.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full gap-4",children:[u.jsx("div",{className:"w-full h-[180px] relative",children:u.jsx(dw,{width:"100%",height:"100%",children:u.jsxs(Afe,{children:[u.jsxs("defs",{children:[u.jsxs("linearGradient",{id:"solanaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#E7FE55",stopOpacity:.8}),u.jsx("stop",{offset:"100%",stopColor:"#E7FE55",stopOpacity:.4})]}),u.jsxs("linearGradient",{id:"hyperliquidGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#f3ffad"}),u.jsx("stop",{offset:"100%",stopColor:"#E7FE55"})]}),u.jsxs("linearGradient",{id:"polymarketGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#7db4fb"}),u.jsx("stop",{offset:"100%",stopColor:"#60a5fa"})]})]}),u.jsx(_7,{data:ee,cx:"50%",cy:"50%",innerRadius:45,outerRadius:ae!==void 0?65:70,paddingAngle:3,dataKey:"value",onMouseEnter:fe,onMouseLeave:_e,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:ee.map((Re,Ue)=>u.jsx(kv,{fill:Re.color,stroke:ae===Ue?Re.color:"transparent",strokeWidth:ae===Ue?3:0,style:{cursor:"pointer",transition:"all 0.2s ease-out",filter:ae===Ue?`brightness(1.2) drop-shadow(0 0 8px ${Re.color})`:"brightness(1)",transform:ae===Ue?"scale(1.05)":"scale(1)",transformOrigin:"center"}},`cell-${Ue}`))}),ae!==void 0&&ee[ae]&&u.jsxs("g",{children:[u.jsx("text",{x:"50%",y:"45%",textAnchor:"middle",fill:"#fff",fontSize:13,fontWeight:"bold",children:ee[ae].name}),u.jsxs("text",{x:"50%",y:"55%",textAnchor:"middle",fill:ee[ae].color,fontSize:16,fontWeight:"bold",fontFamily:"monospace",children:["$",ee[ae].value.toFixed(2)]}),u.jsxs("text",{x:"50%",y:"65%",textAnchor:"middle",fill:"#747580",fontSize:10,children:[ee[ae].percent.toFixed(1),"%"]})]})]})})}),u.jsx("div",{className:"flex flex-col gap-2 w-full",children:ee.map((Re,Ue)=>u.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg transition-all cursor-pointer ${ae===Ue?"bg-[#232328]":"hover:bg-[#1a1b21]"}`,onMouseEnter:()=>Q(Ue),onMouseLeave:()=>Q(void 0),children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 rounded-full transition-transform",style:{backgroundColor:Re.color,transform:ae===Ue?"scale(1.3)":"scale(1)",boxShadow:ae===Ue?`0 0 8px ${Re.color}`:"none"}}),u.jsx("span",{className:`text-xs transition-colors ${ae===Ue?"text-white":"text-[#747580]"}`,children:Re.name})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:`text-xs font-mono transition-colors ${ae===Ue?"text-white":"text-[#747580]"}`,children:["$",Re.value.toFixed(2)]}),u.jsxs("span",{className:"text-xs font-mono font-semibold",style:{color:Re.color},children:[Re.percent.toFixed(1),"%"]})]})]},Re.name))})]})},he=u.jsxs("div",{className:"glass-panel p-4 flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#E7FE55] mb-3",children:[u.jsx(ST,{size:14}),"Fast Withdraw"]}),u.jsxs("div",{className:"flex gap-1 mb-3 bg-[#0f1015] p-1 rounded",children:[u.jsx("button",{onClick:()=>o("SOL"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="SOL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"SOL"}),u.jsx("button",{onClick:()=>o("HYPE"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="HYPE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"HYPE"}),u.jsx("button",{onClick:()=>o("POLY"),className:`flex-1 py-1.5 text-[10px] font-semibold uppercase tracking-wider rounded transition-all ${s==="POLY"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"POLY"})]}),u.jsxs("div",{className:"flex-1 flex flex-col justify-end space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"swiss-label block mb-1.5",children:"Amount"}),u.jsxs("div",{className:"flex items-center relative",children:[u.jsx("input",{type:"number",value:r,onChange:et=>i(et.target.value),className:"w-full bg-[#0f1015] border border-[#232328] rounded pl-3 pr-12 py-2.5 text-sm text-white focus:ring-1 outline-none transition-all focus:ring-[#E7FE55]",placeholder:"0.00"}),u.jsx("button",{onClick:()=>{i(s==="SOL"?Math.max(0,t.solBalance-.005).toFixed(4):s==="HYPE"?Math.max(0,(t.hlBalance||0)-1).toFixed(2):Math.max(0,t.pmBalance||0).toFixed(2))},className:"absolute right-2 text-[9px] font-semibold px-1.5 py-0.5 rounded bg-[#E7FE55]/20 text-[#E7FE55]",children:"MAX"})]})]}),u.jsxs("button",{onClick:s==="SOL"?v:s==="HYPE"?x:b,disabled:s==="SOL"&&!t.publicKey||s==="HYPE"&&!t.hlPublicKey||s==="POLY"&&!t.pmPublicKey,className:`w-full font-semibold py-2.5 rounded transition-all flex items-center justify-center gap-2 text-xs ${s==="SOL"&&t.publicKey||s==="HYPE"&&t.hlPublicKey||s==="POLY"&&t.pmPublicKey?"bg-[#E7FE55] hover:brightness-110 text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed"}`,children:[u.jsx(ST,{size:14}),s==="SOL"?"Withdraw SOL":"Withdraw USDC"]})]})]}),pe=u.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[u.jsxs("div",{className:"glass-panel glass-panel-solana p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5] mb-3",children:[u.jsx("img",{src:Th[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"}),"Solana Vault"]}),t.publicKey?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[u.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.publicKey}),u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.publicKey),k("Copied!")},className:"text-[#747580] hover:text-white",children:u.jsx(Tm,{size:12})})]}),u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("div",{className:"swiss-label",children:"Balance"}),u.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[t.solBalance.toFixed(4)," ",u.jsx("span",{className:"text-xs text-[#747580]",children:"SOL"})]})]}),u.jsxs("div",{className:"text-xs text-[#9b87f5] font-mono",children:[" $",(t.solBalance*Oc.SOL).toFixed(2)]})]})]}):u.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx("p",{className:"text-xs text-[#747580]",children:"No Solana wallet found."}),u.jsx("input",{type:"password",value:V,onChange:et=>U(et.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none",placeholder:"Password..."}),_&&u.jsx("input",{type:"password",value:K,onChange:et=>te(et.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#9b87f5] outline-none font-mono",placeholder:"Private Key..."}),u.jsx("div",{className:"flex gap-2",children:_?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:oe,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),u.jsx("button",{onClick:()=>F(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:W,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[u.jsx(cr,{size:12})," New"]}),u.jsxs("button",{onClick:()=>F(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[u.jsx(Qs,{size:12})," Import"]})]})})]})]}),t.publicKey&&u.jsxs("div",{className:"glass-panel glass-panel-solana flex flex-col overflow-hidden flex-1",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#9b87f5]",children:[u.jsx(Jl,{size:12})," Solana Assets"]}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((Nt=t.assets)==null?void 0:Nt.filter(et=>!et.isNft&&et.symbol!=="SOL").length)||0," Assets"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:u.jsxs("table",{className:"swiss-table w-full",children:[u.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4",children:"Asset"}),u.jsx("th",{className:"px-4 text-right",children:"Balance"}),u.jsx("th",{className:"px-4 text-right",children:"Value"})]})}),u.jsxs("tbody",{children:[u.jsxs("tr",{children:[u.jsx("td",{className:"px-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center",children:u.jsx("img",{src:Th[0].logoURI,alt:"SOL",className:"w-4 h-4 rounded-full"})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:"SOL"}),u.jsx("span",{className:"text-[9px] text-[#747580]",children:"Native"})]})]})}),u.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:t.solBalance.toFixed(4)}),u.jsxs("td",{className:"px-4 text-right font-mono text-xs text-[#9b87f5]",children:["$",(t.solBalance*Oc.SOL).toFixed(2)]})]}),t.assets&&t.assets.filter(et=>!et.isNft&&et.symbol!=="SOL").length>0?t.assets.filter(et=>!et.isNft&&et.symbol!=="SOL").map((et,Ht)=>u.jsxs("tr",{children:[u.jsx("td",{className:"px-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-6 h-6 rounded bg-[#1a1b21] flex items-center justify-center text-[10px] font-bold text-[#747580] border border-[#232328]",children:et.symbol[0]}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs font-semibold text-white leading-none",children:et.symbol}),u.jsx("span",{className:"text-[9px] text-[#747580] truncate max-w-[60px]",children:et.name})]})]})}),u.jsx("td",{className:"px-4 text-right font-mono text-xs text-slate-300",children:(parseFloat(et.amount)/Math.pow(10,et.decimals)).toFixed(4)}),u.jsx("td",{className:"px-4 text-right font-mono text-xs text-[#34d399]",children:et.symbol!=="UNKNOWN"?`$${(parseFloat(et.amount)/Math.pow(10,et.decimals)*(Oc[et.symbol]||0)).toFixed(2)}`:"-"})]},Ht)):null]})]})})]})]}),Je=u.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[u.jsxs("div",{className:"glass-panel glass-panel-hyperliquid p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399] mb-3",children:[u.jsx(on,{size:14}),"Hyperliquid Vault"]}),t.hlPublicKey?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[u.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.hlPublicKey}),u.jsx("button",{onClick:()=>{t.hlPublicKey&&(navigator.clipboard.writeText(t.hlPublicKey),k("Copied!"))},className:"text-[#747580] hover:text-white",children:u.jsx(Tm,{size:12})})]}),u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("div",{className:"swiss-label",children:"Balance"}),u.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((wt=t.hlBalance)==null?void 0:wt.toFixed(2))||"0.00"," ",u.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),u.jsx("div",{className:"text-xs text-[#E7FE55] font-mono",children:"Testnet"})]})]}):u.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx("p",{className:"text-xs text-[#747580]",children:"No Hyperliquid wallet found."}),u.jsx("input",{type:"password",value:A,onChange:et=>I(et.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none",placeholder:"Password..."}),z&&u.jsx("input",{type:"password",value:Y,onChange:et=>H(et.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#E7FE55] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),u.jsx("div",{className:"flex gap-2",children:z?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:Te,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded",children:"Confirm"}),u.jsx("button",{onClick:()=>L(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:X,className:"flex-1 bg-[#E7FE55] hover:brightness-110 text-black text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[u.jsx(cr,{size:12})," New"]}),u.jsxs("button",{onClick:()=>L(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[u.jsx(Qs,{size:12})," Import"]})]})})]})]}),t.hlPublicKey&&u.jsxs("div",{className:"glass-panel glass-panel-hyperliquid flex flex-col overflow-hidden flex-1",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#34d399]",children:[u.jsx(on,{size:12})," Active Positions"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[((Rt=t.hlPositions)==null?void 0:Rt.filter(et=>parseFloat(et.position.szi)!==0).length)||0," Open"]}),u.jsxs("button",{onClick:()=>de(be.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/15 hover:bg-[#E7FE55]/25 text-[#E7FE55] border border-[#E7FE55]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[u.jsx(on,{size:10}),"Details"]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:u.jsxs("table",{className:"swiss-table w-full",children:[u.jsx("thead",{className:"sticky top-0 bg-[#0f1015]/90 backdrop-blur-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-3",children:"Ticker"}),u.jsx("th",{className:"px-3",children:"Side"}),u.jsx("th",{className:"px-3 text-right",children:"Size"}),u.jsx("th",{className:"px-3 text-right",children:"PnL"})]})}),u.jsx("tbody",{children:t.hlPositions&&t.hlPositions.filter(et=>parseFloat(et.position.szi)!==0).length>0?t.hlPositions.filter(et=>parseFloat(et.position.szi)!==0).map((et,Ht)=>{const Hn=parseFloat(et.position.szi),sn=Hn>0,ae=parseFloat(et.position.unrealizedPnl||"0");return u.jsxs("tr",{children:[u.jsx("td",{className:"px-3",children:u.jsx("span",{className:"text-xs font-semibold text-white",children:et.position.coin})}),u.jsx("td",{className:"px-3",children:u.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-semibold ${sn?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:sn?"LONG":"SHORT"})}),u.jsx("td",{className:"px-3 text-right font-mono text-xs text-slate-300",children:Math.abs(Hn).toFixed(4)}),u.jsxs("td",{className:`px-3 text-right font-mono text-xs font-semibold ${ae>=0?"text-[#34d399]":"text-red-400"}`,children:[ae>=0?"+":"",ae.toFixed(2)]})]},`hl-${Ht}`)}):u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-[#747580] text-xs italic",children:"No active positions."})})})]})})]})]}),Xe=u.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[u.jsxs("div",{className:"glass-panel glass-panel-polymarket p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa] mb-3",children:[u.jsx(zl,{size:14}),"Polymarket Vault"]}),t.pmPublicKey?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] flex items-center justify-between",children:[u.jsx("code",{className:"text-[10px] text-[#747580] font-mono truncate max-w-[200px]",children:t.pmPublicKey}),u.jsx("button",{onClick:()=>{t.pmPublicKey&&(navigator.clipboard.writeText(t.pmPublicKey),k("Copied!"))},className:"text-[#747580] hover:text-white",children:u.jsx(Tm,{size:12})})]}),u.jsxs("div",{className:"flex justify-between items-end",children:[u.jsxs("div",{children:[u.jsx("div",{className:"swiss-label",children:"Balance"}),u.jsxs("div",{className:"text-xl font-bold text-white leading-none mt-1",children:[((rn=t.pmBalance)==null?void 0:rn.toFixed(2))||"0.00"," ",u.jsx("span",{className:"text-xs text-[#747580]",children:"USDC"})]})]}),u.jsx("div",{className:"text-xs text-[#60a5fa] font-mono",children:"Polygon"})]})]}):u.jsxs("div",{className:"space-y-3 p-3 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx("p",{className:"text-xs text-[#747580]",children:"No Polymarket wallet found."}),u.jsx("input",{type:"password",value:j,onChange:et=>q(et.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none",placeholder:"Password..."}),$&&u.jsx("input",{type:"password",value:M,onChange:et=>P(et.target.value),className:"w-full bg-[#14151a] border border-[#232328] rounded px-2 py-1.5 text-xs text-white focus:ring-1 focus:ring-[#60a5fa] outline-none font-mono",placeholder:"PrivKey (0x...)..."}),u.jsx("div",{className:"flex gap-2",children:$?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:ce,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded",children:"Confirm"}),u.jsx("button",{onClick:()=>G(!1),className:"px-2 py-1.5 text-[#747580] text-xs hover:text-white",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:ie,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1",children:[u.jsx(cr,{size:12})," New"]}),u.jsxs("button",{onClick:()=>G(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white text-xs font-semibold py-1.5 rounded flex items-center justify-center gap-1 border border-[#232328]",children:[u.jsx(Qs,{size:12})," Import"]})]})})]})]}),t.pmPublicKey&&u.jsxs("div",{className:"glass-panel glass-panel-polymarket flex flex-col overflow-hidden flex-1",children:[u.jsxs("div",{className:"px-4 py-3 border-b border-[#232328] flex items-center justify-between bg-[#0f1015]/50",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-[#60a5fa]",children:[u.jsx(zl,{size:12})," Market Positions"]}),u.jsxs("button",{onClick:()=>de(be.POLYMARKET_DASHBOARD),className:"text-[10px] bg-[#60a5fa]/15 hover:bg-[#60a5fa]/25 text-[#60a5fa] border border-[#60a5fa]/30 px-2 py-1 rounded transition-colors flex items-center gap-1",children:[u.jsx(zl,{size:10}),"Details"]})]}),u.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:u.jsx("p",{className:"text-xs text-[#747580] text-center",children:"View your Polymarket positions in the Polymarket Dealer dashboard."})})]})]}),ot=u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[u.jsxs("div",{className:"glass-panel p-4 flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 swiss-label text-white",children:[u.jsx($1,{size:14}),"Asset Allocation"]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:"Net Worth"}),u.jsxs("div",{className:"text-lg font-bold font-mono text-white",children:["$",J.toFixed(2)]})]})]}),u.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[200px]",children:u.jsx(Se,{})})]}),he]});return u.jsx("div",{className:"h-full flex flex-col gap-6 overflow-y-auto custom-scrollbar p-1",children:!Ke||N||O||D||!t.publicKey&&!t.hlPublicKey&&!t.pmPublicKey?u.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto relative z-10 flex flex-col items-center justify-center flex-1 py-8",children:[u.jsxs(gt.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"w-20 h-20 rounded-full flex items-center justify-center mb-6 border border-slate-700/50 bg-[#0f172a]/50 backdrop-blur-sm relative group",children:[u.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/5 rounded-full blur-xl group-hover:bg-[#E7FE55]/10 transition-colors"}),u.jsx(Kc,{size:36,className:"text-[#E7FE55] relative z-10"})]}),u.jsx("h2",{className:"text-4xl font-bold text-white mb-3 text-center tracking-tight",children:"Configure Your Vault"}),u.jsx("p",{className:"text-slate-400 text-center mb-10 text-base max-w-2xl",children:"Set up your non-custodial wallets across multiple networks. Your keys, your control."}),u.jsx("div",{className:"w-full max-w-4xl mb-8 glass-panel rounded p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#E7FE55]/10 border border-[#E7FE55]/30 flex items-center justify-center",children:u.jsxs("span",{className:"text-[#E7FE55] font-bold text-sm",children:[(t.publicKey?1:0)+(t.hlPublicKey?1:0)+(t.pmPublicKey?1:0),"/3"]})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-semibold text-sm",children:"Networks Configured"}),u.jsx("p",{className:"text-slate-500 text-xs",children:t.publicKey||t.hlPublicKey||t.pmPublicKey?"Add more networks or continue to app":"Start by configuring at least one network"})]})]}),u.jsxs("div",{className:"flex gap-2",children:[t.publicKey&&u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5]",title:"Solana"}),t.hlPublicKey&&u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34d399]",title:"Hyperliquid"}),t.pmPublicKey&&u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#60a5fa]",title:"Polymarket"})]})]})}),u.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[u.jsxs("div",{className:dt("glass-panel-solana p-6 space-y-4 transition-all duration-300 rounded",t.publicKey&&"ring-2 ring-[#9b87f5]/30"),children:[t.publicKey&&u.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-[#E7FE55] flex items-center justify-center",children:u.jsx("svg",{className:"w-4 h-4 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-[#9b87f5]/10 rounded-lg flex items-center justify-center border border-[#9b87f5]/20",children:u.jsx("img",{src:Th[0].logoURI,alt:"SOL",className:"w-6 h-6 rounded-full"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-bold text-lg",children:"Solana"}),u.jsx("span",{className:"text-[10px] text-[#9b87f5] uppercase tracking-wider font-semibold",children:"Devnet"})]})]}),t.publicKey?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[#0f1015]/50 border border-slate-700/30 rounded-lg p-3",children:[u.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider mb-1",children:"Vault Address"}),u.jsxs("code",{className:"text-xs text-slate-300 font-mono",children:[t.publicKey.slice(0,8),"...",t.publicKey.slice(-8)]})]}),u.jsxs("div",{className:"bg-[#0f1015]/50 border border-slate-700/30 rounded-lg p-3",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Owner Wallet"})}),t.ownerPublicKey?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("code",{className:"text-xs text-slate-300 font-mono",children:[t.ownerPublicKey.slice(0,4),"...",t.ownerPublicKey.slice(-4)]})]}),u.jsx("button",{onClick:me,className:"px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors",children:"Disconnect"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),u.jsx("button",{onClick:Ve,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors",children:"Connect"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-[#9b87f5] text-sm",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"text-xs font-medium",children:"Configured"})]})]}):u.jsxs(u.Fragment,{children:[t.isUnlocked?u.jsxs("div",{className:"bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Vl,{size:14,className:"text-[#9b87f5]"}),u.jsx("span",{className:"text-sm text-slate-400 italic",children:"Using main vault password"})]}),u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#9b87f5] animate-pulse"})]}):u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"password",value:V,onChange:et=>U(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 text-white text-sm focus:ring-2 focus:ring-[#9b87f5]/50 focus:border-[#9b87f5]/50 outline-none transition-all placeholder:text-slate-500",placeholder:"Enter password"}),u.jsx("input",{type:"password",value:St,onChange:et=>qe(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 text-white text-sm focus:ring-2 focus:ring-[#9b87f5]/50 focus:border-[#9b87f5]/50 outline-none transition-all placeholder:text-slate-500",placeholder:"Confirm password"})]}),u.jsx("p",{className:"text-[10px] text-slate-500 text-center px-1",children:"For security consistency, all wallets in this vault must share the same password."}),_&&u.jsx("input",{type:"password",value:K,onChange:et=>te(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 text-white text-sm focus:ring-2 focus:ring-[#9b87f5]/50 focus:border-[#9b87f5]/50 outline-none transition-all font-mono placeholder:text-slate-500",placeholder:"Private key (Base58)"}),u.jsx("div",{className:"flex gap-2",children:_?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:oe,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider shadow-lg shadow-[#9b87f5]/20",children:[u.jsx(Qs,{size:16})," Import"]}),u.jsx("button",{onClick:()=>F(!1),className:"px-4 py-3 text-slate-400 hover:text-white text-xs font-semibold transition-colors",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:Tt,className:"flex-1 bg-[#9b87f5] hover:bg-[#a896f7] text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider shadow-lg shadow-[#9b87f5]/20",children:[u.jsx(cr,{size:16})," Create"]}),u.jsxs("button",{onClick:()=>F(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[u.jsx(Qs,{size:16})," Import"]})]})})]})]}),u.jsxs("div",{className:dt("glass-panel-hyperliquid p-6 space-y-4 transition-all duration-300 rounded",t.hlPublicKey&&"ring-2 ring-[#34d399]/30"),children:[t.hlPublicKey&&u.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-[#E7FE55] flex items-center justify-center",children:u.jsx("svg",{className:"w-4 h-4 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-[#34d399]/10 rounded-lg flex items-center justify-center border border-[#34d399]/20",children:u.jsx(on,{size:24,className:"text-[#34d399]"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-bold text-lg",children:"Hyperliquid"}),u.jsx("span",{className:"text-[10px] text-[#34d399] uppercase tracking-wider font-semibold",children:"Testnet"})]})]}),t.hlPublicKey?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[#0f1015]/50 border border-slate-700/30 rounded-lg p-3",children:[u.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider mb-1",children:"Vault Address"}),u.jsxs("code",{className:"text-xs text-slate-300 font-mono",children:[t.hlPublicKey.slice(0,8),"...",t.hlPublicKey.slice(-8)]})]}),u.jsxs("div",{className:"bg-[#0f1015]/50 border border-slate-700/30 rounded-lg p-3",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Owner Wallet"})}),t.hlOwnerPublicKey?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("code",{className:"text-xs text-slate-300 font-mono",children:[t.hlOwnerPublicKey.slice(0,4),"...",t.hlOwnerPublicKey.slice(-4)]})]}),u.jsx("button",{onClick:We,className:"px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors",children:"Disconnect"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),u.jsx("button",{onClick:Ne,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors",children:"Connect"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-[#34d399] text-sm",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"text-xs font-medium",children:"Configured"})]})]}):u.jsxs(u.Fragment,{children:[t.isUnlocked?u.jsxs("div",{className:"bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Vl,{size:14,className:"text-[#34d399]"}),u.jsx("span",{className:"text-sm text-slate-400 italic",children:"Using main vault password"})]}),u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#34d399] animate-pulse"})]}):u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"password",value:A,onChange:et=>I(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 text-white text-sm focus:ring-2 focus:ring-[#34d399]/50 focus:border-[#34d399]/50 outline-none transition-all placeholder:text-slate-500",placeholder:"Enter password"}),u.jsx("input",{type:"password",value:it,onChange:et=>Lt(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 text-white text-sm focus:ring-2 focus:ring-[#34d399]/50 focus:border-[#34d399]/50 outline-none transition-all placeholder:text-slate-500",placeholder:"Confirm password"})]}),u.jsx("p",{className:"text-[10px] text-slate-500 text-center px-1",children:"For security consistency, all wallets in this vault must share the same password."}),z&&u.jsx("input",{type:"password",value:Y,onChange:et=>H(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 text-white text-sm focus:ring-2 focus:ring-[#34d399]/50 focus:border-[#34d399]/50 outline-none transition-all font-mono placeholder:text-slate-500",placeholder:"Private key (0x...)"}),u.jsx("div",{className:"flex gap-2",children:z?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:Te,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider shadow-lg shadow-[#34d399]/20",children:[u.jsx(Qs,{size:16})," Import"]}),u.jsx("button",{onClick:()=>L(!1),className:"px-4 py-3 text-slate-400 hover:text-white text-xs font-semibold transition-colors",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:xt,className:"flex-1 bg-[#34d399] hover:bg-[#4ade80] text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider shadow-lg shadow-[#34d399]/20",children:[u.jsx(cr,{size:16})," Create"]}),u.jsxs("button",{onClick:()=>L(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[u.jsx(Qs,{size:16})," Import"]})]})})]})]}),u.jsxs("div",{className:dt("glass-panel-polymarket p-6 space-y-4 transition-all duration-300 rounded",t.pmPublicKey&&"ring-2 ring-[#60a5fa]/30"),children:[t.pmPublicKey&&u.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-[#E7FE55] flex items-center justify-center",children:u.jsx("svg",{className:"w-4 h-4 text-black",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-[#60a5fa]/10 rounded-lg flex items-center justify-center border border-[#60a5fa]/20",children:u.jsx(zl,{size:24,className:"text-[#60a5fa]"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-bold text-lg",children:"Polymarket"}),u.jsx("span",{className:"text-[10px] text-[#60a5fa] uppercase tracking-wider font-semibold",children:"Polygon"})]})]}),t.pmPublicKey?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[#0f1015]/50 border border-slate-700/30 rounded-lg p-3",children:[u.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider mb-1",children:"Vault Address"}),u.jsxs("code",{className:"text-xs text-slate-300 font-mono",children:[t.pmPublicKey.slice(0,8),"...",t.pmPublicKey.slice(-8)]})]}),u.jsxs("div",{className:"bg-[#0f1015]/50 border border-slate-700/30 rounded-lg p-3",children:[u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-wider",children:"Owner Wallet"})}),t.pmOwnerPublicKey?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("code",{className:"text-xs text-slate-300 font-mono",children:[t.pmOwnerPublicKey.slice(0,4),"...",t.pmOwnerPublicKey.slice(-4)]})]}),u.jsx("button",{onClick:Ze,className:"px-2 py-1 text-[10px] font-medium text-[#747580] hover:text-[#E7FE55] bg-transparent hover:bg-[#E7FE55]/10 rounded border border-[#232328] hover:border-[#E7FE55]/30 transition-colors",children:"Disconnect"})]}):u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-[10px] text-[#747580] italic",children:"Not connected"}),u.jsx("button",{onClick:Qe,className:"px-2 py-1 text-[10px] font-medium text-[#E7FE55] hover:text-[#f0ff85] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 rounded border border-[#E7FE55]/20 transition-colors",children:"Connect"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-[#60a5fa] text-sm",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"text-xs font-medium",children:"Configured"})]})]}):u.jsxs(u.Fragment,{children:[t.isUnlocked?u.jsxs("div",{className:"bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Vl,{size:14,className:"text-[#60a5fa]"}),u.jsx("span",{className:"text-sm text-slate-400 italic",children:"Using main vault password"})]}),u.jsx("div",{className:"w-2 h-2 rounded-full bg-[#60a5fa] animate-pulse"})]}):u.jsxs("div",{className:"space-y-2",children:[u.jsx("input",{type:"password",value:j,onChange:et=>q(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 text-white text-sm focus:ring-2 focus:ring-[#60a5fa]/50 focus:border-[#60a5fa]/50 outline-none transition-all placeholder:text-slate-500",placeholder:"Enter password"}),u.jsx("input",{type:"password",value:Ie,onChange:et=>Ge(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 text-white text-sm focus:ring-2 focus:ring-[#60a5fa]/50 focus:border-[#60a5fa]/50 outline-none transition-all placeholder:text-slate-500",placeholder:"Confirm password"})]}),u.jsx("p",{className:"text-[10px] text-slate-500 text-center px-1",children:"For security consistency, all wallets in this vault must share the same password."}),$&&u.jsx("input",{type:"password",value:M,onChange:et=>P(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-lg px-4 py-3 text-white text-sm focus:ring-2 focus:ring-[#60a5fa]/50 focus:border-[#60a5fa]/50 outline-none transition-all font-mono placeholder:text-slate-500",placeholder:"Private key (0x...)"}),u.jsx("div",{className:"flex gap-2",children:$?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:ce,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider shadow-lg shadow-[#60a5fa]/20",children:[u.jsx(Qs,{size:16})," Import"]}),u.jsx("button",{onClick:()=>G(!1),className:"px-4 py-3 text-slate-400 hover:text-white text-xs font-semibold transition-colors",children:"Cancel"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:se,className:"flex-1 bg-[#60a5fa] hover:bg-[#7db4fb] text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider shadow-lg shadow-[#60a5fa]/20",children:[u.jsx(cr,{size:16})," Create"]}),u.jsxs("button",{onClick:()=>G(!0),className:"flex-1 bg-[#1a1b21] hover:bg-[#232328] text-white font-bold py-3 rounded-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-wider border border-[#232328]",children:[u.jsx(Qs,{size:16})," Import"]})]})})]})]})]}),u.jsxs("div",{className:"w-full max-w-4xl space-y-4",children:[(t.publicKey||t.hlPublicKey||t.pmPublicKey)&&u.jsxs(gt.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},onClick:()=>{je(!0),de(be.AGENT)},className:"w-full bg-[#E7FE55] hover:brightness-110 active:scale-[0.98] text-black font-bold py-4 rounded transition-all flex items-center justify-center gap-3 text-sm uppercase tracking-widest shadow-xl shadow-[#E7FE55]/20",children:[u.jsx(nE,{size:20}),"Go to App"]}),u.jsx("div",{className:"glass-panel p-4 border border-[#E7FE55]/20 bg-gradient-to-br from-[#E7FE55]/5 to-transparent",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-6 h-6 rounded-lg bg-[#E7FE55]/10 border border-[#E7FE55]/30 flex items-center justify-center flex-shrink-0",children:u.jsx(H1,{size:14,className:"text-[#E7FE55]"})}),u.jsxs("p",{className:"text-slate-400 text-xs leading-relaxed",children:[u.jsx("span",{className:"text-white font-semibold",children:"Only the connected Owner Wallet"})," can receive automated withdrawals from the vault. Connect your external wallet (Phantom/MetaMask) after creating the vault."]})]})}),u.jsx("div",{className:"bg-amber-500/5 border border-amber-500/20 rounded p-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx("svg",{className:"w-3 h-3 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-amber-200 font-semibold text-sm mb-1",children:"Security Notice"}),u.jsx("p",{className:"text-amber-200/70 text-xs leading-relaxed",children:"Your wallets are encrypted and stored locally on your device. Never share your private keys or passwords with anyone. You are solely responsible for keeping your credentials secure."})]})]})})]})]}):t.isUnlocked?u.jsxs("div",{className:"flex flex-col gap-6 flex-1",children:[ke==="main"&&ot,ke==="solana"&&pe,ke==="hyperliquid"&&Je,ke==="polymarket"&&Xe]}):u.jsxs(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4},className:"max-w-md mx-auto relative z-10 flex flex-col items-center justify-center min-h-[calc(100vh-120px)] w-full",children:[u.jsxs(gt.div,{animate:{rotate:[0,-10,10,-10,10,0]},transition:{delay:.5,duration:.5,ease:"easeInOut"},className:"w-24 h-24 glass-panel rounded-full flex items-center justify-center mb-8 border-[#E7FE55]/30 relative",children:[u.jsx("div",{className:"absolute inset-0 bg-[#E7FE55]/10 rounded-full blur-2xl animate-pulse"}),u.jsx(Vl,{size:40,className:"text-[#E7FE55] relative z-10"})]}),u.jsx("h2",{className:"text-3xl font-bold text-white mb-2 text-center tracking-tight",children:"Vault Locked"}),u.jsx("p",{className:"text-[#747580] text-center mb-10 text-sm",children:"Authentication required to access your assets."}),u.jsxs("div",{className:"w-full glass-panel p-8 space-y-6 border-[#E7FE55]/10 shadow-2xl",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"swiss-label px-1",children:"Security Password"}),u.jsx("input",{type:"password",value:e,onChange:et=>n(et.target.value),className:"w-full bg-[#0f1015]/80 border border-[#232328] rounded-md px-4 py-4 text-white focus:ring-1 focus:ring-[#E7FE55]/50 outline-none transition-all placeholder:text-[#333540] text-lg font-mono",placeholder:"",onKeyDown:et=>et.key==="Enter"&&at()})]}),u.jsxs("button",{onClick:at,className:"w-full bg-[#E7FE55] hover:brightness-110 active:scale-[0.98] text-black font-bold py-4 rounded-md transition-all flex items-center justify-center gap-2 text-sm uppercase tracking-widest",children:[u.jsx(bre,{size:18})," Unlock Vault"]})]})]})})};function uWe(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const dWe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,fWe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hWe={};function QJ(t,e){return(hWe.jsx?fWe:dWe).test(t)}const pWe=/[ \t\n\f\r]/g;function mWe(t){return typeof t=="object"?t.type==="text"?ZJ(t.value):!1:ZJ(t)}function ZJ(t){return t.replace(pWe,"")===""}class BE{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}BE.prototype.normal={};BE.prototype.property={};BE.prototype.space=void 0;function kfe(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new BE(n,r,e)}function ej(t){return t.toLowerCase()}class Do{constructor(e,n){this.attribute=n,this.property=e}}Do.prototype.attribute="";Do.prototype.booleanish=!1;Do.prototype.boolean=!1;Do.prototype.commaOrSpaceSeparated=!1;Do.prototype.commaSeparated=!1;Do.prototype.defined=!1;Do.prototype.mustUseProperty=!1;Do.prototype.number=!1;Do.prototype.overloadedBoolean=!1;Do.prototype.property="";Do.prototype.spaceSeparated=!1;Do.prototype.space=void 0;let gWe=0;const hn=d0(),pi=d0(),tj=d0(),ft=d0(),gr=d0(),by=d0(),Wo=d0();function d0(){return 2**++gWe}const nj=Object.freeze(Object.defineProperty({__proto__:null,boolean:hn,booleanish:pi,commaOrSpaceSeparated:Wo,commaSeparated:by,number:ft,overloadedBoolean:tj,spaceSeparated:gr},Symbol.toStringTag,{value:"Module"})),h4=Object.keys(nj);class $7 extends Do{constructor(e,n,r,i){let s=-1;if(super(e,n),eX(this,"space",i),typeof r=="number")for(;++s<h4.length;){const o=h4[s];eX(this,h4[s],(r&nj[o])===nj[o])}}}$7.prototype.defined=!0;function eX(t,e,n){n&&(t[e]=n)}function Nv(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new $7(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[ej(r)]=r,n[ej(s.attribute)]=r}return new BE(e,n,t.space)}const Nfe=Nv({properties:{ariaActiveDescendant:null,ariaAtomic:pi,ariaAutoComplete:null,ariaBusy:pi,ariaChecked:pi,ariaColCount:ft,ariaColIndex:ft,ariaColSpan:ft,ariaControls:gr,ariaCurrent:null,ariaDescribedBy:gr,ariaDetails:null,ariaDisabled:pi,ariaDropEffect:gr,ariaErrorMessage:null,ariaExpanded:pi,ariaFlowTo:gr,ariaGrabbed:pi,ariaHasPopup:null,ariaHidden:pi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:gr,ariaLevel:ft,ariaLive:null,ariaModal:pi,ariaMultiLine:pi,ariaMultiSelectable:pi,ariaOrientation:null,ariaOwns:gr,ariaPlaceholder:null,ariaPosInSet:ft,ariaPressed:pi,ariaReadOnly:pi,ariaRelevant:null,ariaRequired:pi,ariaRoleDescription:gr,ariaRowCount:ft,ariaRowIndex:ft,ariaRowSpan:ft,ariaSelected:pi,ariaSetSize:ft,ariaSort:null,ariaValueMax:ft,ariaValueMin:ft,ariaValueNow:ft,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Cfe(t,e){return e in t?t[e]:e}function Pfe(t,e){return Cfe(t,e.toLowerCase())}const yWe=Nv({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:by,acceptCharset:gr,accessKey:gr,action:null,allow:null,allowFullScreen:hn,allowPaymentRequest:hn,allowUserMedia:hn,alt:null,as:null,async:hn,autoCapitalize:null,autoComplete:gr,autoFocus:hn,autoPlay:hn,blocking:gr,capture:null,charSet:null,checked:hn,cite:null,className:gr,cols:ft,colSpan:null,content:null,contentEditable:pi,controls:hn,controlsList:gr,coords:ft|by,crossOrigin:null,data:null,dateTime:null,decoding:null,default:hn,defer:hn,dir:null,dirName:null,disabled:hn,download:tj,draggable:pi,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:hn,formTarget:null,headers:gr,height:ft,hidden:tj,high:ft,href:null,hrefLang:null,htmlFor:gr,httpEquiv:gr,id:null,imageSizes:null,imageSrcSet:null,inert:hn,inputMode:null,integrity:null,is:null,isMap:hn,itemId:null,itemProp:gr,itemRef:gr,itemScope:hn,itemType:gr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:hn,low:ft,manifest:null,max:null,maxLength:ft,media:null,method:null,min:null,minLength:ft,multiple:hn,muted:hn,name:null,nonce:null,noModule:hn,noValidate:hn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:hn,optimum:ft,pattern:null,ping:gr,placeholder:null,playsInline:hn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:hn,referrerPolicy:null,rel:gr,required:hn,reversed:hn,rows:ft,rowSpan:ft,sandbox:gr,scope:null,scoped:hn,seamless:hn,selected:hn,shadowRootClonable:hn,shadowRootDelegatesFocus:hn,shadowRootMode:null,shape:null,size:ft,sizes:null,slot:null,span:ft,spellCheck:pi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ft,step:null,style:null,tabIndex:ft,target:null,title:null,translate:null,type:null,typeMustMatch:hn,useMap:null,value:pi,width:ft,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:gr,axis:null,background:null,bgColor:null,border:ft,borderColor:null,bottomMargin:ft,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:hn,declare:hn,event:null,face:null,frame:null,frameBorder:null,hSpace:ft,leftMargin:ft,link:null,longDesc:null,lowSrc:null,marginHeight:ft,marginWidth:ft,noResize:hn,noHref:hn,noShade:hn,noWrap:hn,object:null,profile:null,prompt:null,rev:null,rightMargin:ft,rules:null,scheme:null,scrolling:pi,standby:null,summary:null,text:null,topMargin:ft,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ft,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:hn,disableRemotePlayback:hn,prefix:null,property:null,results:ft,security:null,unselectable:null},space:"html",transform:Pfe}),xWe=Nv({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Wo,accentHeight:ft,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ft,amplitude:ft,arabicForm:null,ascent:ft,attributeName:null,attributeType:null,azimuth:ft,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ft,by:null,calcMode:null,capHeight:ft,className:gr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ft,diffuseConstant:ft,direction:null,display:null,dur:null,divisor:ft,dominantBaseline:null,download:hn,dx:null,dy:null,edgeMode:null,editable:null,elevation:ft,enableBackground:null,end:null,event:null,exponent:ft,externalResourcesRequired:null,fill:null,fillOpacity:ft,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:by,g2:by,glyphName:by,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ft,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ft,horizOriginX:ft,horizOriginY:ft,id:null,ideographic:ft,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ft,k:ft,k1:ft,k2:ft,k3:ft,k4:ft,kernelMatrix:Wo,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ft,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ft,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ft,overlineThickness:ft,paintOrder:null,panose1:null,path:null,pathLength:ft,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:gr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ft,pointsAtY:ft,pointsAtZ:ft,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Wo,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Wo,rev:Wo,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Wo,requiredFeatures:Wo,requiredFonts:Wo,requiredFormats:Wo,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ft,specularExponent:ft,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ft,strikethroughThickness:ft,string:null,stroke:null,strokeDashArray:Wo,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ft,strokeOpacity:ft,strokeWidth:null,style:null,surfaceScale:ft,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Wo,tabIndex:ft,tableValues:null,target:null,targetX:ft,targetY:ft,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Wo,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ft,underlineThickness:ft,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ft,values:null,vAlphabetic:ft,vMathematical:ft,vectorEffect:null,vHanging:ft,vIdeographic:ft,version:null,vertAdvY:ft,vertOriginX:ft,vertOriginY:ft,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ft,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Cfe}),_fe=Nv({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Ife=Nv({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Pfe}),Rfe=Nv({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),vWe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},bWe=/[A-Z]/g,tX=/-[a-z]/g,wWe=/^data[-\w.:]+$/i;function EWe(t,e){const n=ej(e);let r=e,i=Do;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&wWe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(tX,AWe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!tX.test(s)){let o=s.replace(bWe,SWe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=$7}return new i(r,e)}function SWe(t){return"-"+t.toLowerCase()}function AWe(t){return t.charAt(1).toUpperCase()}const TWe=kfe([Nfe,yWe,_fe,Ife,Rfe],"html"),z7=kfe([Nfe,xWe,_fe,Ife,Rfe],"svg");function kWe(t){return t.join(" ").trim()}var gg={},p4,nX;function NWe(){if(nX)return p4;nX=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,c="/",d="*",h="",m="comment",g="declaration";function v(b,w){if(typeof b!="string")throw new TypeError("First argument must be a string");if(!b)return[];w=w||{};var k=1,N=1;function O(A){var I=A.match(e);I&&(k+=I.length);var j=A.lastIndexOf(l);N=~j?A.length-j:N+A.length}function D(){var A={line:k,column:N};return function(I){return I.position=new _(A),L(),I}}function _(A){this.start=A,this.end={line:k,column:N},this.source=w.source}_.prototype.content=b;function F(A){var I=new Error(w.source+":"+k+":"+N+": "+A);if(I.reason=A,I.filename=w.source,I.line=k,I.column=N,I.source=b,!w.silent)throw I}function z(A){var I=A.exec(b);if(I){var j=I[0];return O(j),b=b.slice(j.length),I}}function L(){z(n)}function $(A){var I;for(A=A||[];I=G();)I!==!1&&A.push(I);return A}function G(){var A=D();if(!(c!=b.charAt(0)||d!=b.charAt(1))){for(var I=2;h!=b.charAt(I)&&(d!=b.charAt(I)||c!=b.charAt(I+1));)++I;if(I+=2,h===b.charAt(I-1))return F("End of comment missing");var j=b.slice(2,I-2);return N+=2,O(j),b=b.slice(I),N+=2,A({type:m,comment:j})}}function V(){var A=D(),I=z(r);if(I){if(G(),!z(i))return F("property missing ':'");var j=z(s),q=A({type:g,property:x(I[0].replace(t,h)),value:j?x(j[0].replace(t,h)):h});return z(o),q}}function U(){var A=[];$(A);for(var I;I=V();)I!==!1&&(A.push(I),$(A));return A}return L(),U()}function x(b){return b?b.replace(a,h):h}return p4=v,p4}var rX;function CWe(){if(rX)return gg;rX=1;var t=gg&&gg.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gg,"__esModule",{value:!0}),gg.default=n;const e=t(NWe());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const o=(0,e.default)(r),a=typeof i=="function";return o.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:d}=l;a?i(c,d,l):d&&(s=s||{},s[c]=d)}),s}return gg}var zb={},iX;function PWe(){if(iX)return zb;iX=1,Object.defineProperty(zb,"__esModule",{value:!0}),zb.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(c){return!c||n.test(c)||t.test(c)},o=function(c,d){return d.toUpperCase()},a=function(c,d){return"".concat(d,"-")},l=function(c,d){return d===void 0&&(d={}),s(c)?c:(c=c.toLowerCase(),d.reactCompat?c=c.replace(i,a):c=c.replace(r,a),c.replace(e,o))};return zb.camelCase=l,zb}var Vb,sX;function _We(){if(sX)return Vb;sX=1;var t=Vb&&Vb.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(CWe()),n=PWe();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(a,l){a&&l&&(o[(0,n.camelCase)(a,s)]=l)}),o}return r.default=r,Vb=r,Vb}var IWe=_We();const RWe=bs(IWe),Ofe=Mfe("end"),V7=Mfe("start");function Mfe(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function OWe(t){const e=V7(t),n=Ofe(t);if(e&&n)return{start:e,end:n}}function A1(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?oX(t.position):"start"in t||"end"in t?oX(t):"line"in t||"column"in t?rj(t):""}function rj(t){return aX(t&&t.line)+":"+aX(t&&t.column)}function oX(t){return rj(t&&t.start)+"-"+rj(t&&t.end)}function aX(t){return t&&typeof t=="number"?t:1}class qs extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=A1(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}qs.prototype.file="";qs.prototype.name="";qs.prototype.reason="";qs.prototype.message="";qs.prototype.stack="";qs.prototype.column=void 0;qs.prototype.line=void 0;qs.prototype.ancestors=void 0;qs.prototype.cause=void 0;qs.prototype.fatal=void 0;qs.prototype.place=void 0;qs.prototype.ruleId=void 0;qs.prototype.source=void 0;const H7={}.hasOwnProperty,MWe=new Map,LWe=/[A-Z]/g,jWe=new Set(["table","tbody","thead","tfoot","tr"]),DWe=new Set(["td","th"]),Lfe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function BWe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=GWe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=qWe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?z7:TWe,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=jfe(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function jfe(t,e,n){if(e.type==="element")return UWe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return FWe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return zWe(t,e,n);if(e.type==="mdxjsEsm")return $We(t,e);if(e.type==="root")return VWe(t,e,n);if(e.type==="text")return HWe(t,e)}function UWe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=z7,t.schema=i),t.ancestors.push(e);const s=Bfe(t,e.tagName,!1),o=KWe(t,e);let a=G7(t,e);return jWe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!mWe(l):!0})),Dfe(t,o,s,e),q7(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function FWe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Nw(t,e.position)}function $We(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Nw(t,e.position)}function zWe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=z7,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:Bfe(t,e.name,!0),o=WWe(t,e),a=G7(t,e);return Dfe(t,o,s,e),q7(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function VWe(t,e,n){const r={};return q7(r,G7(t,e)),t.create(e,t.Fragment,r,n)}function HWe(t,e){return e.value}function Dfe(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function q7(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function qWe(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function GWe(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=V7(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function KWe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&H7.call(e.properties,i)){const s=YWe(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&DWe.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function WWe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Nw(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Nw(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function G7(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:MWe;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=jfe(t,s,o);a!==void 0&&n.push(a)}return n}function YWe(t,e,n){const r=EWe(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?uWe(n):kWe(n)),r.property==="style"){let i=typeof n=="object"?n:JWe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=XWe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?vWe[r.property]||r.property:r.attribute,n]}}function JWe(t,e){try{return RWe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new qs("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=Lfe+"#cannot-parse-style-attribute",i}}function Bfe(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=QJ(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=QJ(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return H7.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Nw(t)}function Nw(t,e){const n=new qs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Lfe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function XWe(t){const e={};let n;for(n in t)H7.call(t,n)&&(e[QWe(n)]=t[n]);return e}function QWe(t){let e=t.replace(LWe,ZWe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function ZWe(t){return"-"+t.toLowerCase()}const m4={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},eYe={};function K7(t,e){const n=eYe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Ufe(t,r,i)}function Ufe(t,e,n){if(tYe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return lX(t.children,e,n)}return Array.isArray(t)?lX(t,e,n):""}function lX(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=Ufe(t[i],e,n);return r.join("")}function tYe(t){return!!(t&&typeof t=="object")}const cX=document.createElement("i");function W7(t){const e="&"+t+";";cX.innerHTML=e;const n=cX.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function da(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Xa(t,e){return t.length>0?(da(t,t.length,0,e),t):e}const uX={}.hasOwnProperty;function Ffe(t){const e={};let n=-1;for(;++n<t.length;)nYe(e,t[n]);return e}function nYe(t,e){let n;for(n in e){const i=(uX.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){uX.call(i,o)||(i[o]=[]);const a=s[o];rYe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function rYe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);da(t,0,0,r)}function $fe(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Kl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const no=Wh(/[A-Za-z]/),Us=Wh(/[\dA-Za-z]/),iYe=Wh(/[#-'*+\--9=?A-Z^-~]/);function Bk(t){return t!==null&&(t<32||t===127)}const ij=Wh(/\d/),sYe=Wh(/[\dA-Fa-f]/),oYe=Wh(/[!-/:-@[-`{-~]/);function Jt(t){return t!==null&&t<-2}function dr(t){return t!==null&&(t<0||t===32)}function kn(t){return t===-2||t===-1||t===32}const uP=Wh(new RegExp("\\p{P}|\\p{S}","u")),Xm=Wh(/\s/);function Wh(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Cv(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Us(t.charCodeAt(n+1))&&Us(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function On(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return kn(l)?(t.enter(n),a(l)):e(l)}function a(l){return kn(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const aYe={tokenize:lYe};function lYe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),On(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Jt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const cYe={tokenize:uYe},dX={tokenize:dYe};function uYe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(N){if(r<n.length){const O=n[r];return e.containerState=O[1],t.attempt(O[0].continuation,l,c)(N)}return c(N)}function l(N){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&k();const O=e.events.length;let D=O,_;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){_=e.events[D][1].end;break}w(r);let F=O;for(;F<e.events.length;)e.events[F][1].end={..._},F++;return da(e.events,D+1,0,e.events.slice(O)),e.events.length=F,c(N)}return a(N)}function c(N){if(r===n.length){if(!i)return m(N);if(i.currentConstruct&&i.currentConstruct.concrete)return v(N);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(dX,d,h)(N)}function d(N){return i&&k(),w(r),m(N)}function h(N){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,v(N)}function m(N){return e.containerState={},t.attempt(dX,g,v)(N)}function g(N){return r++,n.push([e.currentConstruct,e.containerState]),m(N)}function v(N){if(N===null){i&&k(),w(0),t.consume(N);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),x(N)}function x(N){if(N===null){b(t.exit("chunkFlow"),!0),w(0),t.consume(N);return}return Jt(N)?(t.consume(N),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(N),x)}function b(N,O){const D=e.sliceStream(N);if(O&&D.push(null),N.previous=s,s&&(s.next=N),s=N,i.defineSkip(N.start),i.write(D),e.parser.lazy[N.start.line]){let _=i.events.length;for(;_--;)if(i.events[_][1].start.offset<o&&(!i.events[_][1].end||i.events[_][1].end.offset>o))return;const F=e.events.length;let z=F,L,$;for(;z--;)if(e.events[z][0]==="exit"&&e.events[z][1].type==="chunkFlow"){if(L){$=e.events[z][1].end;break}L=!0}for(w(r),_=F;_<e.events.length;)e.events[_][1].end={...$},_++;da(e.events,z+1,0,e.events.slice(F)),e.events.length=_}}function w(N){let O=n.length;for(;O-- >N;){const D=n[O];e.containerState=D[1],D[0].exit.call(e,t)}n.length=N}function k(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function dYe(t,e,n){return On(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function zx(t){if(t===null||dr(t)||Xm(t))return 1;if(uP(t))return 2}function dP(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const sj={name:"attention",resolveAll:fYe,tokenize:hYe};function fYe(t,e){let n=-1,r,i,s,o,a,l,c,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},m={...t[n][1].start};fX(h,-l),fX(m,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Xa(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Xa(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Xa(c,dP(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Xa(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,c=Xa(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,da(t,r-1,n-r+3,c),n=r+c.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function hYe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=zx(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),d=zx(l),h=!d||d===2&&i||n.includes(l),m=!i||i===2&&d||n.includes(r);return c._open=!!(s===42?h:h&&(i||!m)),c._close=!!(s===42?m:m&&(d||!h)),e(l)}}function fX(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const pYe={name:"autolink",tokenize:mYe};function mYe(t,e,n){let r=0;return i;function i(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return no(g)?(t.consume(g),o):g===64?n(g):c(g)}function o(g){return g===43||g===45||g===46||Us(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(t.consume(g),r=0,l):(g===43||g===45||g===46||Us(g))&&r++<32?(t.consume(g),a):(r=0,c(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Bk(g)?n(g):(t.consume(g),l)}function c(g){return g===64?(t.consume(g),d):iYe(g)?(t.consume(g),c):n(g)}function d(g){return Us(g)?h(g):n(g)}function h(g){return g===46?(t.consume(g),r=0,d):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||Us(g))&&r++<63){const v=g===45?m:h;return t.consume(g),v}return n(g)}}const UE={partial:!0,tokenize:gYe};function gYe(t,e,n){return r;function r(s){return kn(s)?On(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Jt(s)?e(s):n(s)}}const zfe={continuation:{tokenize:xYe},exit:vYe,name:"blockQuote",tokenize:yYe};function yYe(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return kn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function xYe(t,e,n){const r=this;return i;function i(o){return kn(o)?On(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(zfe,e,n)(o)}}function vYe(t){t.exit("blockQuote")}const Vfe={name:"characterEscape",tokenize:bYe};function bYe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return oYe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const Hfe={name:"characterReference",tokenize:wYe};function wYe(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Us,d(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=sYe,d):(t.enter("characterReferenceValue"),s=7,o=ij,d(h))}function d(h){if(h===59&&i){const m=t.exit("characterReferenceValue");return o===Us&&!W7(r.sliceSerialize(m))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),d):n(h)}}const hX={partial:!0,tokenize:SYe},pX={concrete:!0,name:"codeFenced",tokenize:EYe};function EYe(t,e,n){const r=this,i={partial:!0,tokenize:D};let s=0,o=0,a;return l;function l(_){return c(_)}function c(_){const F=r.events[r.events.length-1];return s=F&&F[1].type==="linePrefix"?F[2].sliceSerialize(F[1],!0).length:0,a=_,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(_)}function d(_){return _===a?(o++,t.consume(_),d):o<3?n(_):(t.exit("codeFencedFenceSequence"),kn(_)?On(t,h,"whitespace")(_):h(_))}function h(_){return _===null||Jt(_)?(t.exit("codeFencedFence"),r.interrupt?e(_):t.check(hX,x,O)(_)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===null||Jt(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(_)):kn(_)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),On(t,g,"whitespace")(_)):_===96&&_===a?n(_):(t.consume(_),m)}function g(_){return _===null||Jt(_)?h(_):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),v(_))}function v(_){return _===null||Jt(_)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(_)):_===96&&_===a?n(_):(t.consume(_),v)}function x(_){return t.attempt(i,O,b)(_)}function b(_){return t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),w}function w(_){return s>0&&kn(_)?On(t,k,"linePrefix",s+1)(_):k(_)}function k(_){return _===null||Jt(_)?t.check(hX,x,O)(_):(t.enter("codeFlowValue"),N(_))}function N(_){return _===null||Jt(_)?(t.exit("codeFlowValue"),k(_)):(t.consume(_),N)}function O(_){return t.exit("codeFenced"),e(_)}function D(_,F,z){let L=0;return $;function $(I){return _.enter("lineEnding"),_.consume(I),_.exit("lineEnding"),G}function G(I){return _.enter("codeFencedFence"),kn(I)?On(_,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):V(I)}function V(I){return I===a?(_.enter("codeFencedFenceSequence"),U(I)):z(I)}function U(I){return I===a?(L++,_.consume(I),U):L>=o?(_.exit("codeFencedFenceSequence"),kn(I)?On(_,A,"whitespace")(I):A(I)):z(I)}function A(I){return I===null||Jt(I)?(_.exit("codeFencedFence"),F(I)):z(I)}}}function SYe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const g4={name:"codeIndented",tokenize:TYe},AYe={partial:!0,tokenize:kYe};function TYe(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),On(t,s,"linePrefix",5)(c)}function s(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Jt(c)?t.attempt(AYe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Jt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function kYe(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Jt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):On(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Jt(o)?i(o):n(o)}}const NYe={name:"codeText",previous:PYe,resolve:CYe,tokenize:_Ye};function CYe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function PYe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function _Ye(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,d(h)):Jt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||Jt(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function d(h){return h===96?(t.consume(h),i++,d):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class IYe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Hb(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Hb(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Hb(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Hb(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Hb(this.left,n.reverse())}}}function Hb(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function qfe(t){const e={};let n=-1,r,i,s,o,a,l,c;const d=new IYe(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,RYe(d,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},a=d.slice(i,n),a.unshift(r),d.splice(i,n-i+1,a))}}return da(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function RYe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let d,h,m=-1,g=n,v=0,x=0;const b=[x];for(;g;){for(;t.get(++i)[1]!==g;);s.push(i),g._tokenizer||(d=r.sliceStream(g),g.next||d.push(null),h&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(x=m+1,b.push(x),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):b.pop(),m=b.length;m--;){const w=a.slice(b[m],b[m+1]),k=s.pop();l.push([k,k+w.length-1]),t.splice(k,2,w)}for(l.reverse(),m=-1;++m<l.length;)c[v+l[m][0]]=v+l[m][1],v+=l[m][1]-l[m][0]-1;return c}const OYe={resolve:LYe,tokenize:jYe},MYe={partial:!0,tokenize:DYe};function LYe(t){return qfe(t),t}function jYe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Jt(a)?t.check(MYe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function DYe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),On(t,s,"linePrefix")}function s(o){if(o===null||Jt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function Gfe(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return h;function h(w){return w===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(w),t.exit(s),m):w===null||w===32||w===41||Bk(w)?n(w):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),x(w))}function m(w){return w===62?(t.enter(s),t.consume(w),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===62?(t.exit("chunkString"),t.exit(a),m(w)):w===null||w===60||Jt(w)?n(w):(t.consume(w),w===92?v:g)}function v(w){return w===60||w===62||w===92?(t.consume(w),g):g(w)}function x(w){return!d&&(w===null||w===41||dr(w))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(w)):d<c&&w===40?(t.consume(w),d++,x):w===41?(t.consume(w),d--,x):w===null||w===32||w===40||Bk(w)?n(w):(t.consume(w),w===92?b:x)}function b(w){return w===40||w===41||w===92?(t.consume(w),x):x(w)}}function Kfe(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(g){return t.enter(r),t.enter(i),t.consume(g),t.exit(i),t.enter(s),d}function d(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):Jt(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===null||g===91||g===93||Jt(g)||a++>999?(t.exit("chunkString"),d(g)):(t.consume(g),l||(l=!kn(g)),g===92?m:h)}function m(g){return g===91||g===92||g===93?(t.consume(g),a++,h):h(g)}}function Wfe(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,l):n(m)}function l(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),c(m))}function c(m){return m===o?(t.exit(s),l(o)):m===null?n(m):Jt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),On(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===o||m===null||Jt(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?h:d)}function h(m){return m===o||m===92?(t.consume(m),d):d(m)}}function T1(t,e){let n;return r;function r(i){return Jt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):kn(i)?On(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const BYe={name:"definition",tokenize:FYe},UYe={partial:!0,tokenize:$Ye};function FYe(t,e,n){const r=this;let i;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return Kfe.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=Kl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return dr(g)?T1(t,c)(g):c(g)}function c(g){return Gfe(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function d(g){return t.attempt(UYe,h,h)(g)}function h(g){return kn(g)?On(t,m,"whitespace")(g):m(g)}function m(g){return g===null||Jt(g)?(t.exit("definition"),r.parser.defined.push(i),e(g)):n(g)}}function $Ye(t,e,n){return r;function r(a){return dr(a)?T1(t,i)(a):n(a)}function i(a){return Wfe(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return kn(a)?On(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Jt(a)?e(a):n(a)}}const zYe={name:"hardBreakEscape",tokenize:VYe};function VYe(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Jt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const HYe={name:"headingAtx",resolve:qYe,tokenize:GYe};function qYe(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},da(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function GYe(t,e,n){let r=0;return i;function i(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(t.consume(d),o):d===null||dr(d)?(t.exit("atxHeadingSequence"),a(d)):n(d)}function a(d){return d===35?(t.enter("atxHeadingSequence"),l(d)):d===null||Jt(d)?(t.exit("atxHeading"),e(d)):kn(d)?On(t,a,"whitespace")(d):(t.enter("atxHeadingText"),c(d))}function l(d){return d===35?(t.consume(d),l):(t.exit("atxHeadingSequence"),a(d))}function c(d){return d===null||d===35||dr(d)?(t.exit("atxHeadingText"),a(d)):(t.consume(d),c)}}const KYe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],mX=["pre","script","style","textarea"],WYe={concrete:!0,name:"htmlFlow",resolveTo:XYe,tokenize:QYe},YYe={partial:!0,tokenize:eJe},JYe={partial:!0,tokenize:ZYe};function XYe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function QYe(t,e,n){const r=this;let i,s,o,a,l;return c;function c(P){return d(P)}function d(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),h}function h(P){return P===33?(t.consume(P),m):P===47?(t.consume(P),s=!0,x):P===63?(t.consume(P),i=3,r.interrupt?e:Y):no(P)?(t.consume(P),o=String.fromCharCode(P),b):n(P)}function m(P){return P===45?(t.consume(P),i=2,g):P===91?(t.consume(P),i=5,a=0,v):no(P)?(t.consume(P),i=4,r.interrupt?e:Y):n(P)}function g(P){return P===45?(t.consume(P),r.interrupt?e:Y):n(P)}function v(P){const W="CDATA[";return P===W.charCodeAt(a++)?(t.consume(P),a===W.length?r.interrupt?e:V:v):n(P)}function x(P){return no(P)?(t.consume(P),o=String.fromCharCode(P),b):n(P)}function b(P){if(P===null||P===47||P===62||dr(P)){const W=P===47,X=o.toLowerCase();return!W&&!s&&mX.includes(X)?(i=1,r.interrupt?e(P):V(P)):KYe.includes(o.toLowerCase())?(i=6,W?(t.consume(P),w):r.interrupt?e(P):V(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):s?k(P):N(P))}return P===45||Us(P)?(t.consume(P),o+=String.fromCharCode(P),b):n(P)}function w(P){return P===62?(t.consume(P),r.interrupt?e:V):n(P)}function k(P){return kn(P)?(t.consume(P),k):$(P)}function N(P){return P===47?(t.consume(P),$):P===58||P===95||no(P)?(t.consume(P),O):kn(P)?(t.consume(P),N):$(P)}function O(P){return P===45||P===46||P===58||P===95||Us(P)?(t.consume(P),O):D(P)}function D(P){return P===61?(t.consume(P),_):kn(P)?(t.consume(P),D):N(P)}function _(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),l=P,F):kn(P)?(t.consume(P),_):z(P)}function F(P){return P===l?(t.consume(P),l=null,L):P===null||Jt(P)?n(P):(t.consume(P),F)}function z(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||dr(P)?D(P):(t.consume(P),z)}function L(P){return P===47||P===62||kn(P)?N(P):n(P)}function $(P){return P===62?(t.consume(P),G):n(P)}function G(P){return P===null||Jt(P)?V(P):kn(P)?(t.consume(P),G):n(P)}function V(P){return P===45&&i===2?(t.consume(P),j):P===60&&i===1?(t.consume(P),q):P===62&&i===4?(t.consume(P),H):P===63&&i===3?(t.consume(P),Y):P===93&&i===5?(t.consume(P),te):Jt(P)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(YYe,M,U)(P)):P===null||Jt(P)?(t.exit("htmlFlowData"),U(P)):(t.consume(P),V)}function U(P){return t.check(JYe,A,M)(P)}function A(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),I}function I(P){return P===null||Jt(P)?U(P):(t.enter("htmlFlowData"),V(P))}function j(P){return P===45?(t.consume(P),Y):V(P)}function q(P){return P===47?(t.consume(P),o="",K):V(P)}function K(P){if(P===62){const W=o.toLowerCase();return mX.includes(W)?(t.consume(P),H):V(P)}return no(P)&&o.length<8?(t.consume(P),o+=String.fromCharCode(P),K):V(P)}function te(P){return P===93?(t.consume(P),Y):V(P)}function Y(P){return P===62?(t.consume(P),H):P===45&&i===2?(t.consume(P),Y):V(P)}function H(P){return P===null||Jt(P)?(t.exit("htmlFlowData"),M(P)):(t.consume(P),H)}function M(P){return t.exit("htmlFlow"),e(P)}}function ZYe(t,e,n){const r=this;return i;function i(o){return Jt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function eJe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(UE,e,n)}}const tJe={name:"htmlText",tokenize:nJe};function nJe(t,e,n){const r=this;let i,s,o;return a;function a(Y){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(Y),l}function l(Y){return Y===33?(t.consume(Y),c):Y===47?(t.consume(Y),D):Y===63?(t.consume(Y),N):no(Y)?(t.consume(Y),z):n(Y)}function c(Y){return Y===45?(t.consume(Y),d):Y===91?(t.consume(Y),s=0,v):no(Y)?(t.consume(Y),k):n(Y)}function d(Y){return Y===45?(t.consume(Y),g):n(Y)}function h(Y){return Y===null?n(Y):Y===45?(t.consume(Y),m):Jt(Y)?(o=h,q(Y)):(t.consume(Y),h)}function m(Y){return Y===45?(t.consume(Y),g):h(Y)}function g(Y){return Y===62?j(Y):Y===45?m(Y):h(Y)}function v(Y){const H="CDATA[";return Y===H.charCodeAt(s++)?(t.consume(Y),s===H.length?x:v):n(Y)}function x(Y){return Y===null?n(Y):Y===93?(t.consume(Y),b):Jt(Y)?(o=x,q(Y)):(t.consume(Y),x)}function b(Y){return Y===93?(t.consume(Y),w):x(Y)}function w(Y){return Y===62?j(Y):Y===93?(t.consume(Y),w):x(Y)}function k(Y){return Y===null||Y===62?j(Y):Jt(Y)?(o=k,q(Y)):(t.consume(Y),k)}function N(Y){return Y===null?n(Y):Y===63?(t.consume(Y),O):Jt(Y)?(o=N,q(Y)):(t.consume(Y),N)}function O(Y){return Y===62?j(Y):N(Y)}function D(Y){return no(Y)?(t.consume(Y),_):n(Y)}function _(Y){return Y===45||Us(Y)?(t.consume(Y),_):F(Y)}function F(Y){return Jt(Y)?(o=F,q(Y)):kn(Y)?(t.consume(Y),F):j(Y)}function z(Y){return Y===45||Us(Y)?(t.consume(Y),z):Y===47||Y===62||dr(Y)?L(Y):n(Y)}function L(Y){return Y===47?(t.consume(Y),j):Y===58||Y===95||no(Y)?(t.consume(Y),$):Jt(Y)?(o=L,q(Y)):kn(Y)?(t.consume(Y),L):j(Y)}function $(Y){return Y===45||Y===46||Y===58||Y===95||Us(Y)?(t.consume(Y),$):G(Y)}function G(Y){return Y===61?(t.consume(Y),V):Jt(Y)?(o=G,q(Y)):kn(Y)?(t.consume(Y),G):L(Y)}function V(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?n(Y):Y===34||Y===39?(t.consume(Y),i=Y,U):Jt(Y)?(o=V,q(Y)):kn(Y)?(t.consume(Y),V):(t.consume(Y),A)}function U(Y){return Y===i?(t.consume(Y),i=void 0,I):Y===null?n(Y):Jt(Y)?(o=U,q(Y)):(t.consume(Y),U)}function A(Y){return Y===null||Y===34||Y===39||Y===60||Y===61||Y===96?n(Y):Y===47||Y===62||dr(Y)?L(Y):(t.consume(Y),A)}function I(Y){return Y===47||Y===62||dr(Y)?L(Y):n(Y)}function j(Y){return Y===62?(t.consume(Y),t.exit("htmlTextData"),t.exit("htmlText"),e):n(Y)}function q(Y){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),K}function K(Y){return kn(Y)?On(t,te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Y):te(Y)}function te(Y){return t.enter("htmlTextData"),o(Y)}}const Y7={name:"labelEnd",resolveAll:oJe,resolveTo:aJe,tokenize:lJe},rJe={tokenize:cJe},iJe={tokenize:uJe},sJe={tokenize:dJe};function oJe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&da(t,0,t.length,n),t}function aJe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},d={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Xa(a,t.slice(s+1,s+r+3)),a=Xa(a,[["enter",d,e]]),a=Xa(a,dP(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Xa(a,[["exit",d,e],t[o-2],t[o-1],["exit",c,e]]),a=Xa(a,t.slice(o+1)),a=Xa(a,[["exit",l,e]]),da(t,s,t.length,a),t}function lJe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?h(m):(o=r.parser.defined.includes(Kl(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(rJe,d,o?d:h)(m):m===91?t.attempt(iJe,d,o?c:h)(m):o?d(m):h(m)}function c(m){return t.attempt(sJe,d,h)(m)}function d(m){return e(m)}function h(m){return s._balanced=!0,n(m)}}function cJe(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return dr(h)?T1(t,s)(h):s(h)}function s(h){return h===41?d(h):Gfe(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return dr(h)?T1(t,l)(h):d(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?Wfe(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function c(h){return dr(h)?T1(t,d)(h):d(h)}function d(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function uJe(t,e,n){const r=this;return i;function i(a){return Kfe.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Kl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function dJe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const fJe={name:"labelStartImage",resolveAll:Y7.resolveAll,tokenize:hJe};function hJe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const pJe={name:"labelStartLink",resolveAll:Y7.resolveAll,tokenize:mJe};function mJe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const y4={name:"lineEnding",tokenize:gJe};function gJe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),On(t,e,"linePrefix")}}const eT={name:"thematicBreak",tokenize:yJe};function yJe(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Jt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),kn(c)?On(t,a,"whitespace")(c):a(c))}}const Eo={continuation:{tokenize:wJe},exit:SJe,name:"list",tokenize:bJe},xJe={partial:!0,tokenize:AJe},vJe={partial:!0,tokenize:EJe};function bJe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(g){const v=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:ij(g)){if(r.containerState.type||(r.containerState.type=v,t.enter(v,{_container:!0})),v==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(eT,n,c)(g):c(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return ij(g)&&++o<10?(t.consume(g),l):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(UE,r.interrupt?n:d,t.attempt(xJe,m,h))}function d(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function h(g){return kn(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function wJe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(UE,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,On(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!kn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(vJe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,On(t,t.attempt(Eo,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function EJe(t,e,n){const r=this;return On(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function SJe(t){t.exit(this.containerState.type)}function AJe(t,e,n){const r=this;return On(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!kn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const gX={name:"setextUnderline",resolveTo:TJe,tokenize:kJe};function TJe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function kJe(t,e,n){const r=this;let i;return s;function s(c){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),kn(c)?On(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Jt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const NJe={tokenize:CJe};function CJe(t){const e=this,n=t.attempt(UE,r,t.attempt(this.parser.constructs.flowInitial,i,On(t,t.attempt(this.parser.constructs.flow,i,t.attempt(OYe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const PJe={resolveAll:Jfe()},_Je=Yfe("string"),IJe=Yfe("text");function Yfe(t){return{resolveAll:Jfe(t==="text"?RJe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(d){return c(d)?s(d):a(d)}function a(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return c(d)?(n.exit("data"),s(d)):(n.consume(d),l)}function c(d){if(d===null)return!0;const h=i[d];let m=-1;if(h)for(;++m<h.length;){const g=h[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function Jfe(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function RJe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const OJe={42:Eo,43:Eo,45:Eo,48:Eo,49:Eo,50:Eo,51:Eo,52:Eo,53:Eo,54:Eo,55:Eo,56:Eo,57:Eo,62:zfe},MJe={91:BYe},LJe={[-2]:g4,[-1]:g4,32:g4},jJe={35:HYe,42:eT,45:[gX,eT],60:WYe,61:gX,95:eT,96:pX,126:pX},DJe={38:Hfe,92:Vfe},BJe={[-5]:y4,[-4]:y4,[-3]:y4,33:fJe,38:Hfe,42:sj,60:[pYe,tJe],91:pJe,92:[zYe,Vfe],93:Y7,95:sj,96:NYe},UJe={null:[sj,PJe]},FJe={null:[42,95]},$Je={null:[]},zJe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:FJe,contentInitial:MJe,disable:$Je,document:OJe,flow:jJe,flowInitial:LJe,insideSpan:UJe,string:DJe,text:BJe},Symbol.toStringTag,{value:"Module"}));function VJe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:F(D),check:F(_),consume:k,enter:N,exit:O,interrupt:F(_,{interrupt:!0})},c={code:null,containerState:{},defineSkip:x,events:[],now:v,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:h};let d=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(G){return o=Xa(o,G),b(),o[o.length-1]!==null?[]:(z(e,0),c.events=dP(s,c.events,c),c.events)}function m(G,V){return qJe(g(G),V)}function g(G){return HJe(o,G)}function v(){const{_bufferIndex:G,_index:V,line:U,column:A,offset:I}=r;return{_bufferIndex:G,_index:V,line:U,column:A,offset:I}}function x(G){i[G.line]=G.column,$()}function b(){let G;for(;r._index<o.length;){const V=o[r._index];if(typeof V=="string")for(G=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===G&&r._bufferIndex<V.length;)w(V.charCodeAt(r._bufferIndex));else w(V)}}function w(G){d=d(G)}function k(G){Jt(G)?(r.line++,r.column=1,r.offset+=G===-3?2:1,$()):G!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=G}function N(G,V){const U=V||{};return U.type=G,U.start=v(),c.events.push(["enter",U,c]),a.push(U),U}function O(G){const V=a.pop();return V.end=v(),c.events.push(["exit",V,c]),V}function D(G,V){z(G,V.from)}function _(G,V){V.restore()}function F(G,V){return U;function U(A,I,j){let q,K,te,Y;return Array.isArray(A)?M(A):"tokenize"in A?M([A]):H(A);function H(ie){return oe;function oe(Te){const ce=Te!==null&&ie[Te],de=Te!==null&&ie.null,ke=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(de)?de:de?[de]:[]];return M(ke)(Te)}}function M(ie){return q=ie,K=0,ie.length===0?j:P(ie[K])}function P(ie){return oe;function oe(Te){return Y=L(),te=ie,ie.partial||(c.currentConstruct=ie),ie.name&&c.parser.constructs.disable.null.includes(ie.name)?X():ie.tokenize.call(V?Object.assign(Object.create(c),V):c,l,W,X)(Te)}}function W(ie){return G(te,Y),I}function X(ie){return Y.restore(),++K<q.length?P(q[K]):j}}}function z(G,V){G.resolveAll&&!s.includes(G)&&s.push(G),G.resolve&&da(c.events,V,c.events.length-V,G.resolve(c.events.slice(V),c)),G.resolveTo&&(c.events=G.resolveTo(c.events,c))}function L(){const G=v(),V=c.previous,U=c.currentConstruct,A=c.events.length,I=Array.from(a);return{from:A,restore:j};function j(){r=G,c.previous=V,c.currentConstruct=U,c.events.length=A,a=I,$()}}function $(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function HJe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function qJe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function GJe(t){const r={constructs:Ffe([zJe,...(t||{}).extensions||[]]),content:i(aYe),defined:[],document:i(cYe),flow:i(NJe),lazy:{},string:i(_Je),text:i(IJe)};return r;function i(s){return o;function o(a){return VJe(r,s,a)}}}function KJe(t){for(;!qfe(t););return t}const yX=/[\0\t\n\r]/g;function WJe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,d,h,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(yX.lastIndex=h,c=yX.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){e=s.slice(h);break}if(g===10&&h===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<m&&(l.push(s.slice(h,m)),t+=m-h),g){case 0:{l.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,l.push(-2);t++<d;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=m+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const YJe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function JJe(t){return t.replace(YJe,XJe)}function XJe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return $fe(n.slice(s?2:1),s?16:10)}return W7(n)||t}const Xfe={}.hasOwnProperty;function QJe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),ZJe(n)(KJe(GJe(n).document().write(WJe()(t,e,!0))))}function ZJe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Qe),autolinkProtocol:L,autolinkEmail:L,atxHeading:s(Ve),blockQuote:s(de),characterEscape:L,characterReference:L,codeFenced:s(ke),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ke,o),codeText:s(ye,o),codeTextData:L,data:L,codeFlowValue:L,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(je),hardBreakEscape:s(me),hardBreakTrailing:s(me),htmlFlow:s(Ne,o),htmlFlowData:L,htmlText:s(Ne,o),htmlTextData:L,image:s(We),label:o,link:s(Qe),listItem:s(at),listItemValue:m,listOrdered:s(Ze,h),listUnordered:s(Ze),paragraph:s(St),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ve),strong:s(qe),thematicBreak:s(Lt)},exit:{atxHeading:l(),atxHeadingSequence:D,autolink:l(),autolinkEmail:ce,autolinkProtocol:Te,blockQuote:l(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:ie,characterReference:oe,codeFenced:l(b),codeFencedFence:x,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:$,codeIndented:l(w),codeText:l(I),codeTextData:$,data:$,definition:l(),definitionDestinationString:O,definitionLabelString:k,definitionTitleString:N,emphasis:l(),hardBreakEscape:l(V),hardBreakTrailing:l(V),htmlFlow:l(U),htmlFlowData:$,htmlText:l(A),htmlTextData:$,image:l(q),label:te,labelText:K,lineEnding:G,link:l(j),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:W,resourceDestinationString:Y,resourceTitleString:H,resource:M,setextHeading:l(z),setextHeadingLineSequence:F,setextHeadingText:_,strong:l(),thematicBreak:l()}};Qfe(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Ie){let Ge={type:"root",children:[]};const Tt={stack:[Ge],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:d,data:n},xt=[];let se=-1;for(;++se<Ie.length;)if(Ie[se][1].type==="listOrdered"||Ie[se][1].type==="listUnordered")if(Ie[se][0]==="enter")xt.push(se);else{const J=xt.pop();se=i(Ie,J,se)}for(se=-1;++se<Ie.length;){const J=e[Ie[se][0]];Xfe.call(J,Ie[se][1].type)&&J[Ie[se][1].type].call(Object.assign({sliceSerialize:Ie[se][2].sliceSerialize},Tt),Ie[se][1])}if(Tt.tokenStack.length>0){const J=Tt.tokenStack[Tt.tokenStack.length-1];(J[1]||xX).call(Tt,void 0,J[0])}for(Ge.position={start:jf(Ie.length>0?Ie[0][1].start:{line:1,column:1,offset:0}),end:jf(Ie.length>0?Ie[Ie.length-2][1].end:{line:1,column:1,offset:0})},se=-1;++se<e.transforms.length;)Ge=e.transforms[se](Ge)||Ge;return Ge}function i(Ie,Ge,Tt){let xt=Ge-1,se=-1,J=!1,Z,ue,Se,he;for(;++xt<=Tt;){const pe=Ie[xt];switch(pe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{pe[0]==="enter"?se++:se--,he=void 0;break}case"lineEndingBlank":{pe[0]==="enter"&&(Z&&!he&&!se&&!Se&&(Se=xt),he=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:he=void 0}if(!se&&pe[0]==="enter"&&pe[1].type==="listItemPrefix"||se===-1&&pe[0]==="exit"&&(pe[1].type==="listUnordered"||pe[1].type==="listOrdered")){if(Z){let Je=xt;for(ue=void 0;Je--;){const Xe=Ie[Je];if(Xe[1].type==="lineEnding"||Xe[1].type==="lineEndingBlank"){if(Xe[0]==="exit")continue;ue&&(Ie[ue][1].type="lineEndingBlank",J=!0),Xe[1].type="lineEnding",ue=Je}else if(!(Xe[1].type==="linePrefix"||Xe[1].type==="blockQuotePrefix"||Xe[1].type==="blockQuotePrefixWhitespace"||Xe[1].type==="blockQuoteMarker"||Xe[1].type==="listItemIndent"))break}Se&&(!ue||Se<ue)&&(Z._spread=!0),Z.end=Object.assign({},ue?Ie[ue][1].start:pe[1].end),Ie.splice(ue||xt,0,["exit",Z,pe[2]]),xt++,Tt++}if(pe[1].type==="listItemPrefix"){const Je={type:"listItem",_spread:!1,start:Object.assign({},pe[1].start),end:void 0};Z=Je,Ie.splice(xt,0,["enter",Je,pe[2]]),xt++,Tt++,Se=void 0,he=!0}}}return Ie[Ge][1]._spread=J,Tt}function s(Ie,Ge){return Tt;function Tt(xt){a.call(this,Ie(xt),xt),Ge&&Ge.call(this,xt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ie,Ge,Tt){this.stack[this.stack.length-1].children.push(Ie),this.stack.push(Ie),this.tokenStack.push([Ge,Tt||void 0]),Ie.position={start:jf(Ge.start),end:void 0}}function l(Ie){return Ge;function Ge(Tt){Ie&&Ie.call(this,Tt),c.call(this,Tt)}}function c(Ie,Ge){const Tt=this.stack.pop(),xt=this.tokenStack.pop();if(xt)xt[0].type!==Ie.type&&(Ge?Ge.call(this,Ie,xt[0]):(xt[1]||xX).call(this,Ie,xt[0]));else throw new Error("Cannot close `"+Ie.type+"` ("+A1({start:Ie.start,end:Ie.end})+"): its not open");Tt.position.end=jf(Ie.end)}function d(){return K7(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(Ie){if(this.data.expectingFirstListItemValue){const Ge=this.stack[this.stack.length-2];Ge.start=Number.parseInt(this.sliceSerialize(Ie),10),this.data.expectingFirstListItemValue=void 0}}function g(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.lang=Ie}function v(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.meta=Ie}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Ie.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Ie.replace(/(\r?\n|\r)$/g,"")}function k(Ie){const Ge=this.resume(),Tt=this.stack[this.stack.length-1];Tt.label=Ge,Tt.identifier=Kl(this.sliceSerialize(Ie)).toLowerCase()}function N(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.title=Ie}function O(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.url=Ie}function D(Ie){const Ge=this.stack[this.stack.length-1];if(!Ge.depth){const Tt=this.sliceSerialize(Ie).length;Ge.depth=Tt}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function F(Ie){const Ge=this.stack[this.stack.length-1];Ge.depth=this.sliceSerialize(Ie).codePointAt(0)===61?1:2}function z(){this.data.setextHeadingSlurpLineEnding=void 0}function L(Ie){const Tt=this.stack[this.stack.length-1].children;let xt=Tt[Tt.length-1];(!xt||xt.type!=="text")&&(xt=it(),xt.position={start:jf(Ie.start),end:void 0},Tt.push(xt)),this.stack.push(xt)}function $(Ie){const Ge=this.stack.pop();Ge.value+=this.sliceSerialize(Ie),Ge.position.end=jf(Ie.end)}function G(Ie){const Ge=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Tt=Ge.children[Ge.children.length-1];Tt.position.end=jf(Ie.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ge.type)&&(L.call(this,Ie),$.call(this,Ie))}function V(){this.data.atHardBreak=!0}function U(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Ie}function A(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Ie}function I(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.value=Ie}function j(){const Ie=this.stack[this.stack.length-1];if(this.data.inReference){const Ge=this.data.referenceType||"shortcut";Ie.type+="Reference",Ie.referenceType=Ge,delete Ie.url,delete Ie.title}else delete Ie.identifier,delete Ie.label;this.data.referenceType=void 0}function q(){const Ie=this.stack[this.stack.length-1];if(this.data.inReference){const Ge=this.data.referenceType||"shortcut";Ie.type+="Reference",Ie.referenceType=Ge,delete Ie.url,delete Ie.title}else delete Ie.identifier,delete Ie.label;this.data.referenceType=void 0}function K(Ie){const Ge=this.sliceSerialize(Ie),Tt=this.stack[this.stack.length-2];Tt.label=JJe(Ge),Tt.identifier=Kl(Ge).toLowerCase()}function te(){const Ie=this.stack[this.stack.length-1],Ge=this.resume(),Tt=this.stack[this.stack.length-1];if(this.data.inReference=!0,Tt.type==="link"){const xt=Ie.children;Tt.children=xt}else Tt.alt=Ge}function Y(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.url=Ie}function H(){const Ie=this.resume(),Ge=this.stack[this.stack.length-1];Ge.title=Ie}function M(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function W(Ie){const Ge=this.resume(),Tt=this.stack[this.stack.length-1];Tt.label=Ge,Tt.identifier=Kl(this.sliceSerialize(Ie)).toLowerCase(),this.data.referenceType="full"}function X(Ie){this.data.characterReferenceType=Ie.type}function ie(Ie){const Ge=this.sliceSerialize(Ie),Tt=this.data.characterReferenceType;let xt;Tt?(xt=$fe(Ge,Tt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):xt=W7(Ge);const se=this.stack[this.stack.length-1];se.value+=xt}function oe(Ie){const Ge=this.stack.pop();Ge.position.end=jf(Ie.end)}function Te(Ie){$.call(this,Ie);const Ge=this.stack[this.stack.length-1];Ge.url=this.sliceSerialize(Ie)}function ce(Ie){$.call(this,Ie);const Ge=this.stack[this.stack.length-1];Ge.url="mailto:"+this.sliceSerialize(Ie)}function de(){return{type:"blockquote",children:[]}}function ke(){return{type:"code",lang:null,meta:null,value:""}}function ye(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function je(){return{type:"emphasis",children:[]}}function Ve(){return{type:"heading",depth:0,children:[]}}function me(){return{type:"break"}}function Ne(){return{type:"html",value:""}}function We(){return{type:"image",title:null,url:"",alt:null}}function Qe(){return{type:"link",title:null,url:"",children:[]}}function Ze(Ie){return{type:"list",ordered:Ie.type==="listOrdered",start:null,spread:Ie._spread,children:[]}}function at(Ie){return{type:"listItem",spread:Ie._spread,checked:null,children:[]}}function St(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function it(){return{type:"text",value:""}}function Lt(){return{type:"thematicBreak"}}}function jf(t){return{line:t.line,column:t.column,offset:t.offset}}function Qfe(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?Qfe(t,r):eXe(t,r)}}function eXe(t,e){let n;for(n in e)if(Xfe.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function xX(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+A1({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+A1({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+A1({start:e.start,end:e.end})+") is still open")}function tXe(t){const e=this;e.parser=n;function n(r){return QJe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function nXe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function rXe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function iXe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function sXe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oXe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function aXe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Cv(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function lXe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cXe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Zfe(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function uXe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Zfe(t,e);const i={src:Cv(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function dXe(t,e){const n={src:Cv(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function fXe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function hXe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Zfe(t,e);const i={href:Cv(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function pXe(t,e){const n={href:Cv(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function mXe(t,e,n){const r=t.all(e),i=n?gXe(n):ehe(e),s={},o=[];if(typeof e.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const d=r[a];(i||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function gXe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=ehe(n[r])}return e}function ehe(t){const e=t.spread;return e??t.children.length>1}function yXe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function xXe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vXe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function bXe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function wXe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=V7(e.children[1]),l=Ofe(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function EXe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],m={},g=o?o[l]:void 0;g&&(m.align=g);let v={type:"element",tagName:s,properties:m,children:[]};h&&(v.children=t.all(h),t.patch(h,v),v=t.applyData(h,v)),c.push(v)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,d),t.applyData(e,d)}function SXe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const vX=9,bX=32;function AXe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(wX(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(wX(e.slice(i),i>0,!1)),s.join("")}function wX(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===vX||s===bX;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===vX||s===bX;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function TXe(t,e){const n={type:"text",value:AXe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function kXe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const NXe={blockquote:nXe,break:rXe,code:iXe,delete:sXe,emphasis:oXe,footnoteReference:aXe,heading:lXe,html:cXe,imageReference:uXe,image:dXe,inlineCode:fXe,linkReference:hXe,link:pXe,listItem:mXe,list:yXe,paragraph:xXe,root:vXe,strong:bXe,table:wXe,tableCell:SXe,tableRow:EXe,text:TXe,thematicBreak:kXe,toml:ZA,yaml:ZA,definition:ZA,footnoteDefinition:ZA};function ZA(){}const the=-1,fP=0,k1=1,Uk=2,J7=3,X7=4,Q7=5,Z7=6,nhe=7,rhe=8,EX=typeof self=="object"?self:globalThis,CXe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case fP:case the:return n(o,i);case k1:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Uk:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case J7:return n(new Date(o),i);case X7:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Q7:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case Z7:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case nhe:{const{name:a,message:l}=o;return n(new EX[a](l),i)}case rhe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new EX[s](o),i)};return r},SX=t=>CXe(new Map,t)(0),yg="",{toString:PXe}={},{keys:_Xe}=Object,qb=t=>{const e=typeof t;if(e!=="object"||!t)return[fP,e];const n=PXe.call(t).slice(8,-1);switch(n){case"Array":return[k1,yg];case"Object":return[Uk,yg];case"Date":return[J7,yg];case"RegExp":return[X7,yg];case"Map":return[Q7,yg];case"Set":return[Z7,yg];case"DataView":return[k1,n]}return n.includes("Array")?[k1,n]:n.includes("Error")?[nhe,n]:[Uk,n]},e2=([t,e])=>t===fP&&(e==="function"||e==="symbol"),IXe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=qb(o);switch(a){case fP:{let d=o;switch(l){case"bigint":a=rhe,d=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return i([the],o)}return i([a,d],o)}case k1:{if(l){let m=o;return l==="DataView"?m=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(o)),i([l,[...m]],o)}const d=[],h=i([a,d],o);for(const m of o)d.push(s(m));return h}case Uk:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const d=[],h=i([a,d],o);for(const m of _Xe(o))(t||!e2(qb(o[m])))&&d.push([s(m),s(o[m])]);return h}case J7:return i([a,o.toISOString()],o);case X7:{const{source:d,flags:h}=o;return i([a,{source:d,flags:h}],o)}case Q7:{const d=[],h=i([a,d],o);for(const[m,g]of o)(t||!(e2(qb(m))||e2(qb(g))))&&d.push([s(m),s(g)]);return h}case Z7:{const d=[],h=i([a,d],o);for(const m of o)(t||!e2(qb(m)))&&d.push(s(m));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},AX=(t,{json:e,lossy:n}={})=>{const r=[];return IXe(!(e||n),!!e,new Map,r)(t),r},Fk=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?SX(AX(t,e)):structuredClone(t):(t,e)=>SX(AX(t,e));function RXe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function OXe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function MXe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||RXe,r=t.options.footnoteBackLabel||OXe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const d=t.all(c),h=String(c.identifier).toUpperCase(),m=Cv(h.toLowerCase());let g=0;const v=[],x=t.footnoteCounts.get(h);for(;x!==void 0&&++g<=x;){v.length>0&&v.push({type:"text",value:" "});let k=typeof n=="string"?n:n(l,g);typeof k=="string"&&(k={type:"text",value:k}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const b=d[d.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const k=b.children[b.children.length-1];k&&k.type==="text"?k.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...v)}else d.push(...v);const w={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(d,!0)};t.patch(c,w),a.push(w)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Fk(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const hP=(function(t){if(t==null)return BXe;if(typeof t=="function")return pP(t);if(typeof t=="object")return Array.isArray(t)?LXe(t):jXe(t);if(typeof t=="string")return DXe(t);throw new Error("Expected function, string, or object as test")});function LXe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=hP(t[n]);return pP(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function jXe(t){const e=t;return pP(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function DXe(t){return pP(e);function e(n){return n&&n.type===t}}function pP(t){return e;function e(n,r,i){return!!(UXe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function BXe(){return!0}function UXe(t){return t!==null&&typeof t=="object"&&"type"in t}const ihe=[],FXe=!0,oj=!1,$Xe="skip";function she(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=hP(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,d){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const g=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=ihe,v,x,b;if((!e||s(l,c,d[d.length-1]||void 0))&&(g=zXe(n(l,d)),g[0]===oj))return g;if("children"in l&&l.children){const w=l;if(w.children&&g[0]!==$Xe)for(x=(r?w.children.length:-1)+o,b=d.concat(w);x>-1&&x<w.children.length;){const k=w.children[x];if(v=a(k,x,b)(),v[0]===oj)return v;x=typeof v[1]=="number"?v[1]:x+o}}return g}}}function zXe(t){return Array.isArray(t)?t:typeof t=="number"?[FXe,t]:t==null?ihe:[t]}function eB(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),she(t,s,a,i);function a(l,c){const d=c[c.length-1],h=d?d.children.indexOf(l):void 0;return o(l,h,d)}}const aj={}.hasOwnProperty,VXe={};function HXe(t,e){const n=e||VXe,r=new Map,i=new Map,s=new Map,o={...NXe,...n.handlers},a={all:c,applyData:GXe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:qXe,wrap:WXe};return eB(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:i,m=String(d.identifier).toUpperCase();h.has(m)||h.set(m,d)}}),a;function l(d,h){const m=d.type,g=a.handlers[m];if(aj.call(a.handlers,m)&&g)return g(a,d,h);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in d){const{children:x,...b}=d,w=Fk(b);return w.children=a.all(d),w}return Fk(d)}return(a.options.unknownHandler||KXe)(a,d,h)}function c(d){const h=[];if("children"in d){const m=d.children;let g=-1;for(;++g<m.length;){const v=a.one(m[g],d);if(v){if(g&&m[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=TX(v.value)),!Array.isArray(v)&&v.type==="element")){const x=v.children[0];x&&x.type==="text"&&(x.value=TX(x.value))}Array.isArray(v)?h.push(...v):h.push(v)}}}return h}}function qXe(t,e){t.position&&(e.position=OWe(t))}function GXe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Fk(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function KXe(t,e){const n=e.data||{},r="value"in e&&!(aj.call(n,"hProperties")||aj.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function WXe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function TX(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function kX(t,e){const n=HXe(t,e),r=n.one(t,void 0),i=MXe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function YXe(t,e){return t&&"run"in t?async function(n,r){const i=kX(n,{file:r,...e});await t.run(i,r)}:function(n,r){return kX(n,{file:r,...t||e})}}function NX(t){if(t)throw t}var x4,CX;function JXe(){if(CX)return x4;CX=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},s=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var d=t.call(c,"constructor"),h=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!d&&!h)return!1;var m;for(m in c);return typeof m>"u"||t.call(c,m)},o=function(c,d){n&&d.name==="__proto__"?n(c,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):c[d.name]=d.newValue},a=function(c,d){if(d==="__proto__")if(t.call(c,d)){if(r)return r(c,d).value}else return;return c[d]};return x4=function l(){var c,d,h,m,g,v,x=arguments[0],b=1,w=arguments.length,k=!1;for(typeof x=="boolean"&&(k=x,x=arguments[1]||{},b=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});b<w;++b)if(c=arguments[b],c!=null)for(d in c)h=a(x,d),m=a(c,d),x!==m&&(k&&m&&(s(m)||(g=i(m)))?(g?(g=!1,v=h&&i(h)?h:[]):v=h&&s(h)?h:{},o(x,{name:d,newValue:l(k,v,m)})):typeof m<"u"&&o(x,{name:d,newValue:m}));return x},x4}var XXe=JXe();const v4=bs(XXe);function lj(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function QXe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const d=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,d?ZXe(d,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function ZXe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const d=c;if(a&&n)throw d;return i(d)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const mc={basename:eQe,dirname:tQe,extname:nQe,join:rQe,sep:"/"};function eQe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');FE(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function tQe(t){if(FE(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function nQe(t){FE(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function rQe(...t){let e=-1,n;for(;++e<t.length;)FE(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":iQe(n)}function iQe(t){FE(t);const e=t.codePointAt(0)===47;let n=sQe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function sQe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function FE(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const oQe={cwd:aQe};function aQe(){return"/"}function cj(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function lQe(t){if(typeof t=="string")t=new URL(t);else if(!cj(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return cQe(t)}function cQe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const b4=["history","path","basename","stem","extname","dirname"];class ohe{constructor(e){let n;e?cj(e)?n={path:e}:typeof e=="string"||uQe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":oQe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<b4.length;){const s=b4[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)b4.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?mc.basename(this.path):void 0}set basename(e){E4(e,"basename"),w4(e,"basename"),this.path=mc.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?mc.dirname(this.path):void 0}set dirname(e){PX(this.basename,"dirname"),this.path=mc.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?mc.extname(this.path):void 0}set extname(e){if(w4(e,"extname"),PX(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=mc.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){cj(e)&&(e=lQe(e)),E4(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?mc.basename(this.path,this.extname):void 0}set stem(e){E4(e,"stem"),w4(e,"stem"),this.path=mc.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new qs(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function w4(t,e){if(t&&t.includes(mc.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+mc.sep+"`")}function E4(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function PX(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function uQe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const dQe=(function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),fQe={}.hasOwnProperty;class tB extends dQe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=QXe()}copy(){const e=new tB;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(v4(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(T4("data",this.frozen),this.namespace[e]=n,this):fQe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(T4("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=t2(e),r=this.parser||this.Parser;return S4("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),S4("process",this.parser||this.Parser),A4("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=t2(e),l=r.parse(a);r.run(l,a,function(d,h,m){if(d||!h||!m)return c(d);const g=h,v=r.stringify(g,m);mQe(v)?m.value=v:m.result=v,c(d,m)});function c(d,h){d||!h?o(d):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),S4("processSync",this.parser||this.Parser),A4("processSync",this.compiler||this.Compiler),this.process(e,i),IX("processSync","process",n),r;function i(s,o){n=!0,NX(s),r=o}}run(e,n,r){_X(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=t2(n);i.run(e,l,c);function c(d,h,m){const g=h||e;d?a(d):o?o(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),IX("runSync","run",r),i;function s(o,a){NX(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=t2(n),i=this.compiler||this.Compiler;return A4("stringify",i),_X(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(T4("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...h]=c;l(d,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=v4(!0,i.settings,c.settings))}function a(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const h=c[d];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===c){m=h;break}if(m===-1)r.push([c,...d]);else if(d.length>0){let[g,...v]=d;const x=r[m][1];lj(x)&&lj(g)&&(g=v4(!0,x,g)),r[m]=[c,g,...v]}}}}const hQe=new tB().freeze();function S4(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function A4(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function T4(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _X(t){if(!lj(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function IX(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function t2(t){return pQe(t)?t:new ohe(t)}function pQe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function mQe(t){return typeof t=="string"||gQe(t)}function gQe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const yQe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",RX=[],OX={allowDangerousHtml:!0},xQe=/^(https?|ircs?|mailto|xmpp)$/i,vQe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function bQe(t){const e=wQe(t),n=EQe(t);return SQe(e.runSync(e.parse(n),n),t)}function wQe(t){const e=t.rehypePlugins||RX,n=t.remarkPlugins||RX,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...OX}:OX;return hQe().use(tXe).use(n).use(YXe,r).use(e)}function EQe(t){const e=t.children||"",n=new ohe;return typeof e=="string"&&(n.value=e),n}function SQe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||AQe;for(const d of vQe)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+yQe+d.id,void 0);return eB(t,c),BWe(t,{Fragment:u.Fragment,components:i,ignoreInvalidStyle:!0,jsx:u.jsx,jsxs:u.jsxs,passKeys:!0,passNode:!0});function c(d,h,m){if(d.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let g;for(g in m4)if(Object.hasOwn(m4,g)&&Object.hasOwn(d.properties,g)){const v=d.properties[g],x=m4[g];(x===null||x.includes(d.tagName))&&(d.properties[g]=l(String(v||""),g,d))}}if(d.type==="element"){let g=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!g&&r&&typeof h=="number"&&(g=!r(d,h,m)),g&&m&&typeof h=="number")return a&&d.children?m.children.splice(h,1,...d.children):m.children.splice(h,1),h}}}function AQe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||xQe.test(t.slice(0,e))?t:""}function MX(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function TQe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function kQe(t,e,n){const i=hP((n||{}).ignore||[]),s=NQe(e);let o=-1;for(;++o<s.length;)she(t,"text",a);function a(c,d){let h=-1,m;for(;++h<d.length;){const g=d[h],v=m?m.children:void 0;if(i(g,v?v.indexOf(g):void 0,m))return;m=g}if(m)return l(c,d)}function l(c,d){const h=d[d.length-1],m=s[o][0],g=s[o][1];let v=0;const b=h.children.indexOf(c);let w=!1,k=[];m.lastIndex=0;let N=m.exec(c.value);for(;N;){const O=N.index,D={index:N.index,input:N.input,stack:[...d,c]};let _=g(...N,D);if(typeof _=="string"&&(_=_.length>0?{type:"text",value:_}:void 0),_===!1?m.lastIndex=O+1:(v!==O&&k.push({type:"text",value:c.value.slice(v,O)}),Array.isArray(_)?k.push(..._):_&&k.push(_),v=O+N[0].length,w=!0),!m.global)break;N=m.exec(c.value)}return w?(v<c.value.length&&k.push({type:"text",value:c.value.slice(v)}),h.children.splice(b,1,...k)):k=[c],b+k.length}}function NQe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([CQe(i[0]),PQe(i[1])])}return e}function CQe(t){return typeof t=="string"?new RegExp(TQe(t),"g"):t}function PQe(t){return typeof t=="function"?t:function(){return t}}const k4="phrasing",N4=["autolink","link","image","label"];function _Qe(){return{transforms:[DQe],enter:{literalAutolink:RQe,literalAutolinkEmail:C4,literalAutolinkHttp:C4,literalAutolinkWww:C4},exit:{literalAutolink:jQe,literalAutolinkEmail:LQe,literalAutolinkHttp:OQe,literalAutolinkWww:MQe}}}function IQe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:k4,notInConstruct:N4},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:k4,notInConstruct:N4},{character:":",before:"[ps]",after:"\\/",inConstruct:k4,notInConstruct:N4}]}}function RQe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function C4(t){this.config.enter.autolinkProtocol.call(this,t)}function OQe(t){this.config.exit.autolinkProtocol.call(this,t)}function MQe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function LQe(t){this.config.exit.autolinkEmail.call(this,t)}function jQe(t){this.exit(t)}function DQe(t){kQe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,BQe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),UQe]],{ignore:["link","linkReference"]})}function BQe(t,e,n,r,i){let s="";if(!ahe(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!FQe(n)))return!1;const o=$Qe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function UQe(t,e,n,r){return!ahe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function FQe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function $Qe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=MX(t,"(");let s=MX(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function ahe(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Xm(n)||uP(n))&&(!e||n!==47)}lhe.peek=JQe;function zQe(){this.buffer()}function VQe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function HQe(){this.buffer()}function qQe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function GQe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Kl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function KQe(t){this.exit(t)}function WQe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Kl(this.sliceSerialize(t)).toLowerCase(),n.label=e}function YQe(t){this.exit(t)}function JQe(){return"["}function lhe(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function XQe(){return{enter:{gfmFootnoteCallString:zQe,gfmFootnoteCall:VQe,gfmFootnoteDefinitionLabelString:HQe,gfmFootnoteDefinition:qQe},exit:{gfmFootnoteCallString:GQe,gfmFootnoteCall:KQe,gfmFootnoteDefinitionLabelString:WQe,gfmFootnoteDefinition:YQe}}}function QQe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:lhe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),d=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),d(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?che:ZQe))),c(),l}}function ZQe(t,e,n){return e===0?t:che(t,e,n)}function che(t,e,n){return(n?"":"    ")+t}const eZe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];uhe.peek=sZe;function tZe(){return{canContainEols:["delete"],enter:{strikethrough:rZe},exit:{strikethrough:iZe}}}function nZe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:eZe}],handlers:{delete:uhe}}}function rZe(t){this.enter({type:"delete",children:[]},t)}function iZe(t){this.exit(t)}function uhe(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function sZe(){return"~"}function oZe(t){return t.length}function aZe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||oZe,s=[],o=[],a=[],l=[];let c=0,d=-1;for(;++d<t.length;){const x=[],b=[];let w=-1;for(t[d].length>c&&(c=t[d].length);++w<t[d].length;){const k=lZe(t[d][w]);if(n.alignDelimiters!==!1){const N=i(k);b[w]=N,(l[w]===void 0||N>l[w])&&(l[w]=N)}x.push(k)}o[d]=x,a[d]=b}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<c;)s[h]=LX(r[h]);else{const x=LX(r);for(;++h<c;)s[h]=x}h=-1;const m=[],g=[];for(;++h<c;){const x=s[h];let b="",w="";x===99?(b=":",w=":"):x===108?b=":":x===114&&(w=":");let k=n.alignDelimiters===!1?1:Math.max(1,l[h]-b.length-w.length);const N=b+"-".repeat(k)+w;n.alignDelimiters!==!1&&(k=b.length+k+w.length,k>l[h]&&(l[h]=k),g[h]=k),m[h]=N}o.splice(1,0,m),a.splice(1,0,g),d=-1;const v=[];for(;++d<o.length;){const x=o[d],b=a[d];h=-1;const w=[];for(;++h<c;){const k=x[h]||"";let N="",O="";if(n.alignDelimiters!==!1){const D=l[h]-(b[h]||0),_=s[h];_===114?N=" ".repeat(D):_===99?D%2?(N=" ".repeat(D/2+.5),O=" ".repeat(D/2-.5)):(N=" ".repeat(D/2),O=N):O=" ".repeat(D)}n.delimiterStart!==!1&&!h&&w.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||h)&&w.push(" "),n.alignDelimiters!==!1&&w.push(N),w.push(k),n.alignDelimiters!==!1&&w.push(O),n.padding!==!1&&w.push(" "),(n.delimiterEnd!==!1||h!==c-1)&&w.push("|")}v.push(n.delimiterEnd===!1?w.join("").replace(/ +$/,""):w.join(""))}return v.join(`
`)}function lZe(t){return t==null?"":String(t)}function LX(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function cZe(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),uZe);return i(),o}function uZe(t,e,n){return">"+(n?"":" ")+t}function dZe(t,e){return jX(t,e.inConstruct,!0)&&!jX(t,e.notInConstruct,!1)}function jX(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function DX(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&dZe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function fZe(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function hZe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function pZe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function mZe(t,e,n,r){const i=pZe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(hZe(t,n)){const h=n.enter("codeIndented"),m=n.indentLines(s,gZe);return h(),m}const a=n.createTracker(r),l=i.repeat(Math.max(fZe(s,i)+1,3)),c=n.enter("codeFenced");let d=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);d+=a.move(n.safe(t.lang,{before:d,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);d+=a.move(" "),d+=a.move(n.safe(t.meta,{before:d,after:`
`,encode:["`"],...a.current()})),h()}return d+=a.move(`
`),s&&(d+=a.move(s+`
`)),d+=a.move(l),c(),d}function gZe(t,e,n){return(n?"":"    ")+t}function nB(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function yZe(t,e,n,r){const i=nB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function xZe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Cw(t){return"&#x"+t.toString(16).toUpperCase()+";"}function $k(t,e,n){const r=zx(t),i=zx(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}dhe.peek=vZe;function dhe(t,e,n,r){const i=xZe(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),d=$k(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(l=Cw(c)+l.slice(1));const h=l.charCodeAt(l.length-1),m=$k(r.after.charCodeAt(0),h,i);m.inside&&(l=l.slice(0,-1)+Cw(h));const g=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},a+l+g}function vZe(t,e,n){return n.options.emphasis||"*"}function bZe(t,e){let n=!1;return eB(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,oj}),!!((!t.depth||t.depth<3)&&K7(t)&&(e.options.setext||n))}function wZe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(bZe(t,n)){const d=n.enter("headingSetext"),h=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),d(),m+`
`+(i===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=Cw(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}fhe.peek=EZe;function fhe(t){return t.value||""}function EZe(){return"<"}hhe.peek=SZe;function hhe(t,e,n,r){const i=nB(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function SZe(){return"!"}phe.peek=AZe;function phe(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function AZe(){return"!"}mhe.peek=TZe;function mhe(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function TZe(){return"`"}function ghe(t,e){const n=K7(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}yhe.peek=kZe;function yhe(t,e,n,r){const i=nB(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(ghe(t,n)){const d=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=d,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function kZe(t,e,n){return ghe(t,n)?"<":"["}xhe.peek=NZe;function xhe(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=d,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function NZe(){return"["}function rB(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function CZe(t){const e=rB(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function PZe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function vhe(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function _Ze(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?PZe(n):rB(n);const a=t.ordered?o==="."?")":".":CZe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const d=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),vhe(n)===o&&d){let h=-1;for(;++h<t.children.length;){const m=t.children[h];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function IZe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function RZe(t,e,n,r){const i=IZe(n);let s=n.bulletCurrent||rB(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),d);return l(),c;function d(h,m,g){return m?(g?"":" ".repeat(o))+h:(g?s:s+" ".repeat(o-s.length))+h}}function OZe(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const MZe=hP(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function LZe(t,e,n,r){return(t.children.some(function(o){return MZe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function jZe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}bhe.peek=DZe;function bhe(t,e,n,r){const i=jZe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),d=$k(r.before.charCodeAt(r.before.length-1),c,i);d.inside&&(l=Cw(c)+l.slice(1));const h=l.charCodeAt(l.length-1),m=$k(r.after.charCodeAt(0),h,i);m.inside&&(l=l.slice(0,-1)+Cw(h));const g=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:d.outside},a+l+g}function DZe(t,e,n){return n.options.strong||"*"}function BZe(t,e,n,r){return n.safe(t.value,r)}function UZe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function FZe(t,e,n){const r=(vhe(n)+(n.options.ruleSpaces?" ":"")).repeat(UZe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const whe={blockquote:cZe,break:DX,code:mZe,definition:yZe,emphasis:dhe,hardBreak:DX,heading:wZe,html:fhe,image:hhe,imageReference:phe,inlineCode:mhe,link:yhe,linkReference:xhe,list:_Ze,listItem:RZe,paragraph:OZe,root:LZe,strong:bhe,text:BZe,thematicBreak:FZe};function $Ze(){return{enter:{table:zZe,tableData:BX,tableHeader:BX,tableRow:HZe},exit:{codeText:qZe,table:VZe,tableData:P4,tableHeader:P4,tableRow:P4}}}function zZe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function VZe(t){this.exit(t),this.data.inTable=void 0}function HZe(t){this.enter({type:"tableRow",children:[]},t)}function P4(t){this.exit(t)}function BX(t){this.enter({type:"tableCell",children:[]},t)}function qZe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,GZe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function GZe(t,e){return e==="|"?e:t}function KZe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:l,tableRow:a}};function o(g,v,x,b){return c(d(g,x,b),g.align)}function a(g,v,x,b){const w=h(g,x,b),k=c([w]);return k.slice(0,k.indexOf(`
`))}function l(g,v,x,b){const w=x.enter("tableCell"),k=x.enter("phrasing"),N=x.containerPhrasing(g,{...b,before:s,after:s});return k(),w(),N}function c(g,v){return aZe(g,{align:v,alignDelimiters:r,padding:n,stringLength:i})}function d(g,v,x){const b=g.children;let w=-1;const k=[],N=v.enter("table");for(;++w<b.length;)k[w]=h(b[w],v,x);return N(),k}function h(g,v,x){const b=g.children;let w=-1;const k=[],N=v.enter("tableRow");for(;++w<b.length;)k[w]=l(b[w],g,v,x);return N(),k}function m(g,v,x){let b=whe.inlineCode(g,v,x);return x.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function WZe(){return{exit:{taskListCheckValueChecked:UX,taskListCheckValueUnchecked:UX,paragraph:JZe}}}function YZe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:XZe}}}function UX(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function JZe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function XZe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=whe.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(d){return d+o}}function QZe(){return[_Qe(),XQe(),tZe(),$Ze(),WZe()]}function ZZe(t){return{extensions:[IQe(),QQe(t),nZe(),KZe(t),YZe()]}}const eet={tokenize:oet,partial:!0},Ehe={tokenize:aet,partial:!0},She={tokenize:cet,partial:!0},Ahe={tokenize:uet,partial:!0},tet={tokenize:det,partial:!0},The={name:"wwwAutolink",tokenize:iet,previous:Nhe},khe={name:"protocolAutolink",tokenize:set,previous:Che},Yd={name:"emailAutolink",tokenize:ret,previous:Phe},ou={};function net(){return{text:ou}}let wp=48;for(;wp<123;)ou[wp]=Yd,wp++,wp===58?wp=65:wp===91&&(wp=97);ou[43]=Yd;ou[45]=Yd;ou[46]=Yd;ou[95]=Yd;ou[72]=[Yd,khe];ou[104]=[Yd,khe];ou[87]=[Yd,The];ou[119]=[Yd,The];function ret(t,e,n){const r=this;let i,s;return o;function o(h){return!uj(h)||!Phe.call(r,r.previous)||iB(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return uj(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(tet,d,c)(h):h===45||h===95||Us(h)?(s=!0,t.consume(h),l):d(h)}function c(h){return t.consume(h),i=!0,l}function d(h){return s&&i&&no(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function iet(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!Nhe.call(r,r.previous)||iB(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(eet,t.attempt(Ehe,t.attempt(She,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function set(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&Che.call(r,r.previous)&&!iB(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(no(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const m=i.toLowerCase();if(m==="http"||m==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),s?c:(s=!0,l)):n(h)}function c(h){return h===null||Bk(h)||dr(h)||Xm(h)||uP(h)?n(h):t.attempt(Ehe,t.attempt(She,d),n)(h)}function d(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function oet(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function aet(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(Ahe,l,a)(c):c===null||dr(c)||Xm(c)||c!==45&&uP(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function cet(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Ahe,e,s)(o):o===null||dr(o)||Xm(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function uet(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||dr(a)||Xm(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||dr(a)||Xm(a)?e(a):r(a)}function s(a){return no(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):no(a)?(t.consume(a),o):n(a)}}function det(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return Us(s)?n(s):e(s)}}function Nhe(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||dr(t)}function Che(t){return!no(t)}function Phe(t){return!(t===47||uj(t))}function uj(t){return t===43||t===45||t===46||t===95||Us(t)}function iB(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const fet={tokenize:bet,partial:!0};function het(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:yet,continuation:{tokenize:xet},exit:vet}},text:{91:{name:"gfmFootnoteCall",tokenize:get},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:pet,resolveTo:met}}}}function pet(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=Kl(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function met(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function get(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||dr(h))return n(h);if(h===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return i.includes(Kl(r.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return dr(h)||(o=!0),s++,t.consume(h),h===92?d:c}function d(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function yet(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(v){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(v){return v===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",d):n(v)}function d(v){if(o>999||v===93&&!a||v===null||v===91||dr(v))return n(v);if(v===93){t.exit("chunkString");const x=t.exit("gfmFootnoteDefinitionLabelString");return s=Kl(r.sliceSerialize(x)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(v),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return dr(v)||(a=!0),o++,t.consume(v),v===92?h:d}function h(v){return v===91||v===92||v===93?(t.consume(v),o++,d):d(v)}function m(v){return v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),i.includes(s)||i.push(s),On(t,g,"gfmFootnoteDefinitionWhitespace")):n(v)}function g(v){return e(v)}}function xet(t,e,n){return t.check(UE,e,t.attempt(fet,e,n))}function vet(t){t.exit("gfmFootnoteDefinition")}function bet(t,e,n){const r=this;return On(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function wet(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},m=[["enter",d,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],g=a.parser.constructs.insideSpan.null;g&&da(m,m.length,0,dP(g,o.slice(c+1,l),a)),da(m,m.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",d,a]]),da(o,c-1,l-c+3,m),l=c+m.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,d=this.events;let h=0;return m;function m(v){return c===126&&d[d.length-1][1].type!=="characterEscape"?l(v):(o.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const x=zx(c);if(v===126)return h>1?l(v):(o.consume(v),h++,g);if(h<2&&!n)return l(v);const b=o.exit("strikethroughSequenceTemporary"),w=zx(v);return b._open=!w||w===2&&!!x,b._close=!x||x===2&&!!w,a(v)}}}class Eet{constructor(){this.map=[]}add(e,n,r){Aet(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function Aet(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function Tet(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function ket(){return{flow:{null:{name:"table",tokenize:Net,resolveAll:Cet}}}}function Net(t,e,n){const r=this;let i=0,s=0,o;return a;function a($){let G=r.events.length-1;for(;G>-1;){const A=r.events[G][1].type;if(A==="lineEnding"||A==="linePrefix")G--;else break}const V=G>-1?r.events[G][1].type:null,U=V==="tableHead"||V==="tableRow"?_:l;return U===_&&r.parser.lazy[r.now().line]?n($):U($)}function l($){return t.enter("tableHead"),t.enter("tableRow"),c($)}function c($){return $===124||(o=!0,s+=1),d($)}function d($){return $===null?n($):Jt($)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),g):n($):kn($)?On(t,d,"whitespace")($):(s+=1,o&&(o=!1,i+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,d):(t.enter("data"),h($)))}function h($){return $===null||$===124||dr($)?(t.exit("data"),d($)):(t.consume($),$===92?m:h)}function m($){return $===92||$===124?(t.consume($),h):h($)}function g($){return r.interrupt=!1,r.parser.lazy[r.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,kn($)?On(t,v,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):v($))}function v($){return $===45||$===58?b($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),x):D($)}function x($){return kn($)?On(t,b,"whitespace")($):b($)}function b($){return $===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),w):$===45?(s+=1,w($)):$===null||Jt($)?O($):D($)}function w($){return $===45?(t.enter("tableDelimiterFiller"),k($)):D($)}function k($){return $===45?(t.consume($),k):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),N):(t.exit("tableDelimiterFiller"),N($))}function N($){return kn($)?On(t,O,"whitespace")($):O($)}function O($){return $===124?v($):$===null||Jt($)?!o||i!==s?D($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):D($)}function D($){return n($)}function _($){return t.enter("tableRow"),F($)}function F($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),F):$===null||Jt($)?(t.exit("tableRow"),e($)):kn($)?On(t,F,"whitespace")($):(t.enter("data"),z($))}function z($){return $===null||$===124||dr($)?(t.exit("data"),F($)):(t.consume($),$===92?L:z)}function L($){return $===92||$===124?(t.consume($),z):z($)}}function Cet(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,d,h;const m=new Eet;for(;++n<t.length;){const g=t[n],v=g[1];g[0]==="enter"?v.type==="tableHead"?(a=!1,l!==0&&(FX(m,e,l,c,d),d=void 0,l=0),c={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(n,0,[["enter",c,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,d={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(n,0,[["enter",d,e]])),i=v.type==="tableDelimiterRow"?2:d?3:1):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=n2(m,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):v.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=n2(m,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):v.type==="tableHead"?(a=!0,l=n):v.type==="tableRow"||v.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],h=n2(m,e,s,i,n,h)):o[1]!==0&&(h=n2(m,e,o,i,n,h)),i=0):i&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&FX(m,e,l,c,d),m.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=Tet(e.events,n))}return t}function n2(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Lg(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Lg(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=Lg(e.events,n[2]),d=Lg(e.events,n[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},d)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const m=e.events[n[2]],g=e.events[n[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const v=n[2]+1,x=n[3]-n[2]-1;t.add(v,x,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},Lg(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function FX(t,e,n,r,i){const s=[],o=Lg(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Lg(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const Pet={name:"tasklistCheck",tokenize:Iet};function _et(){return{text:{91:Pet}}}function Iet(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return dr(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Jt(l)?e(l):kn(l)?t.check({tokenize:Ret},e,n)(l):n(l)}}function Ret(t,e,n){return On(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function Oet(t){return Ffe([net(),het(),wet(t),ket(),_et()])}const Met={};function Let(t){const e=this,n=t||Met,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Oet(n)),s.push(QZe()),o.push(ZZe(n))}const Zs=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:dt("rounded border border-[#232328] bg-[#14151a] text-card-foreground shadow-sm",t),...e}));Zs.displayName="Card";const dj=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:dt("flex flex-col space-y-1.5 p-6",t),...e}));dj.displayName="CardHeader";const fj=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:dt("font-semibold leading-none tracking-tight text-white",t),...e}));fj.displayName="CardTitle";const hj=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:dt("text-sm text-muted-foreground",t),...e}));hj.displayName="CardDescription";const Uu=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:dt("p-6 pt-0",t),...e}));Uu.displayName="CardContent";const jet=S.forwardRef(({className:t,...e},n)=>u.jsx("div",{ref:n,className:dt("flex items-center p-6 pt-0",t),...e}));jet.displayName="CardFooter";const Det=({messages:t})=>{const e=S.useRef(null),n=S.useMemo(()=>{const r=[];return t.forEach(i=>{i.role==="model"&&i.toolResults&&i.toolResults.length>0&&i.toolResults.forEach(s=>{if(s.type==="error")return;const o=s.title||"",a=s.details||"";if(o.includes("Swap")||o.includes("Order")||o.includes("Transfer")||o.includes("Withdraw")||o.includes("Position")||o.includes("Leverage")){let l="info";o.includes("Swap")?l="swap":o.includes("Order")||o.includes("Position")||o.includes("Leverage")?l="order":(o.includes("Transfer")||o.includes("Withdraw"))&&(l="transfer"),r.push({type:l,title:o,details:a.split(`
`)[0]||a,subDetails:s.tx?"Transaction Executed":void 0,timestamp:i.timestamp,tx:s.tx})}else o.includes("Task")||o.includes("Scheduled")?r.push({type:"info",title:o,details:a,timestamp:i.timestamp}):o.includes("Price")||o.includes("OHLCV")||o.includes("Indicator")||o.includes("TradingView")||o.includes("Summary")||o.includes("Market Data")?r.push({type:"price",title:o,details:a,timestamp:i.timestamp}):o.includes("Balance")?r.push({type:"balance",title:"Balance Checked",details:a.split(`
`)[0],subDetails:"View specific assets in chat",timestamp:i.timestamp}):r.push({type:"info",title:o,details:a.substring(0,100)+(a.length>100?"...":""),timestamp:i.timestamp})})}),r},[t]);return S.useEffect(()=>{e.current&&e.current.scrollTo({top:e.current.scrollHeight,behavior:"smooth"})},[n.length]),n.length===0?null:u.jsxs("div",{ref:e,className:"w-full h-full overflow-y-auto pr-1 custom-scrollbar space-y-3 pb-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 sticky top-0 bg-slate-900/90 backdrop-blur-sm py-2 z-10",children:[u.jsx(Si,{size:12,className:"text-indigo-400"}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500",children:"Activity Feed"})]}),u.jsx(Ei,{children:n.map((r,i)=>{var l;const s=r.tx,o=r.title.includes("Hyperliquid")||r.title.includes("Order"),a=s?o?`https://app.hyperliquid.xyz/explorer/tx/${s}`:`https://solscan.io/tx/${s}`:null;return u.jsx(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.05},children:u.jsxs(Zs,{className:"p-3 relative overflow-hidden group hover:border-indigo-500/30 transition-all duration-300",children:[u.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-indigo-500/5 rounded-full blur-xl -z-10 transition-all duration-700 group-hover:bg-indigo-500/10"}),u.jsx("div",{className:"flex items-center justify-between mb-1.5",children:u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:dt("w-1 h-1 rounded-full",r.type==="error"?"bg-red-500":"bg-indigo-500")}),u.jsx("span",{className:"text-[9px] text-slate-600 font-mono",children:new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("h3",{className:"text-xs font-bold text-white leading-tight",children:r.title}),u.jsx("div",{className:"py-1",children:r.type==="swap"?u.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:u.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}):r.type==="price"&&r.details.includes(":")&&!r.details.includes(`
`)?u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("div",{className:"text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-teal-300",children:(l=r.details.split(":")[1])==null?void 0:l.trim()}),u.jsx("div",{className:"text-[10px] text-slate-400 font-medium",children:r.details.split(":")[0]})]}):u.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:r.details})}),u.jsxs("div",{className:"flex items-center justify-between mt-1 pt-1 border-t border-slate-800/50",children:[r.subDetails&&!s&&u.jsx("div",{className:"flex items-center gap-1.5 text-[10px] text-emerald-400 font-medium",children:r.subDetails}),s&&u.jsxs("a",{href:a||"#",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-[10px] text-indigo-400 hover:text-indigo-300 transition-colors group/link ml-auto",children:["View Transaction",u.jsx(gre,{size:10,className:"group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]})]})]})]})},`${r.timestamp}-${i}`)})})]})},_he={meteora:{label:"Meteora",shortLabel:"MET",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"rgba(139, 92, 246, 0.3)"},raydium:{label:"Raydium",shortLabel:"RAY",color:"#14B8A6",bgColor:"rgba(20, 184, 166, 0.15)",borderColor:"rgba(20, 184, 166, 0.3)"},hyperliquid:{label:"Hyperliquid",shortLabel:"HL",color:"#E7FE55",bgColor:"rgba(231, 254, 85, 0.15)",borderColor:"rgba(231, 254, 85, 0.3)"},solana:{label:"Solana",shortLabel:"SOL",color:"#9945FF",bgColor:"rgba(153, 69, 255, 0.15)",borderColor:"rgba(153, 69, 255, 0.3)"},polymarket:{label:"Polymarket",shortLabel:"PM",color:"#2563EB",bgColor:"rgba(37, 99, 235, 0.15)",borderColor:"rgba(37, 99, 235, 0.3)"}},pj={hyperliquid:{label:"Hyperliquid",shortLabel:"HL",color:"#E7FE55",bgColor:"rgba(231, 254, 85, 0.15)",borderColor:"rgba(231, 254, 85, 0.3)"},binance:{label:"Binance",shortLabel:"BIN",color:"#F0B90B",bgColor:"rgba(240, 185, 11, 0.15)",borderColor:"rgba(240, 185, 11, 0.3)"},tradingview:{label:"TradingView",shortLabel:"TV",color:"#2962FF",bgColor:"rgba(41, 98, 255, 0.15)",borderColor:"rgba(41, 98, 255, 0.3)"},unknown:{label:"Exchange",shortLabel:"EX",color:"#747580",bgColor:"rgba(116, 117, 128, 0.15)",borderColor:"rgba(116, 117, 128, 0.3)"}};function mj(t,e){switch(t){case"meteora":return`https://app.meteora.ag/pools/${e}`;case"raydium":return`https://raydium.io/liquidity-v2/?mode=add&pool_id=${e}`;default:return""}}function Bet(t,e){switch(t){case"solana":return`https://solscan.io/tx/${e}`;case"hyperliquid":return`https://app.hyperliquid.xyz/explorer/tx/${e}`;case"polygon":return`https://polygonscan.com/tx/${e}`;default:return""}}function Pw(t,e={}){if(t==null||isNaN(t))return"N/A";const{prefix:n="$",suffix:r="",decimals:i=2,showSign:s=!1}=e,o=Math.abs(t),a=s&&t>0?"+":t<0?"-":"";let l,c="";return o>=1e9?(l=(o/1e9).toFixed(i),c="B"):o>=1e6?(l=(o/1e6).toFixed(i),c="M"):o>=1e3?(l=(o/1e3).toFixed(i),c="K"):o>=1?l=o.toFixed(i):o>0?l=o.toFixed(Math.max(i,4)):l="0",l=l.replace(/\.?0+$/,""),c&&!l.includes(".")&&(l+=".0"),`${a}${n}${l}${c}${r}`}function Xf(t,e={}){if(t==null||isNaN(t))return"N/A";const{decimals:n=2,showSign:r=!1,isRaw:i=!0}=e,s=i?t:t*100;return`${r&&s>0?"+":""}${s.toFixed(n)}%`}function Ihe(t,e={}){if(t==null||isNaN(t))return"N/A";const{symbol:n="",maxDecimals:r=6,minDecimals:i=2}=e;let s;return t>=1e3?s=t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):t>=1?s=t.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:Math.min(4,r)}):t>0?s=t.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:r}):s="0",n?`${s} ${n}`:s}function gj(t,e={}){if(t==null||isNaN(t))return"N/A";const{compact:n=!1,showSign:r=!1,decimals:i=2}=e;return n?Pw(t,{prefix:"$",showSign:r,decimals:i}):`${r&&t>0?"+":""}$${Math.abs(t).toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:i})}`}function $X(t,e={}){if(!t)return"N/A";const{startChars:n=6,endChars:r=4}=e;return t.length<=n+r+3?t:`${t.slice(0,n)}...${t.slice(-r)}`}const sB=({protocol:t,size:e="sm",showLabel:n=!1,className:r})=>{const i=_he[t];if(!i)return null;const s={sm:"text-[9px] px-1.5 py-0.5",md:"text-[10px] px-2 py-1",lg:"text-xs px-2.5 py-1"};return u.jsx("span",{className:dt("inline-flex items-center font-bold uppercase tracking-wider rounded",s[e],r),style:{color:i.color,backgroundColor:i.bgColor,border:`1px solid ${i.borderColor}`},children:n?i.label:i.shortLabel})},zX=({data:t,index:e=0,compact:n=!1,className:r})=>{const i=t.poolUrl||mj(t.protocol,t.poolAddress),s=o=>{o.preventDefault(),i&&window.open(i,"_blank","noopener,noreferrer")};return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:dt("bg-[#1a1b21] border border-[#232328] rounded-lg p-3 group","hover:border-[#E7FE55]/30 transition-all duration-300","relative overflow-hidden",r),children:[u.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-[#E7FE55]/5 rounded-full blur-2xl -z-0 opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsxs("div",{className:"flex items-center justify-between mb-2 relative z-10",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(sB,{protocol:t.protocol,size:"sm"}),u.jsxs("span",{className:"text-sm font-bold text-white",children:[t.tokenA.symbol," / ",t.tokenB.symbol]})]}),i&&u.jsx("button",{onClick:s,className:"p-1.5 rounded hover:bg-[#E7FE55]/10 text-[#747580] hover:text-[#E7FE55] transition-colors",title:"Open Pool",children:u.jsx(Ed,{size:14})})]}),u.jsxs("div",{className:dt("grid gap-2 text-[11px] relative z-10",n?"grid-cols-2":"grid-cols-3"),children:[t.volume24h!==void 0&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(on,{size:12,className:"text-[#60a5fa]"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider",children:"Vol"}),u.jsx("div",{className:"font-semibold text-white",children:Pw(t.volume24h)})]})]}),t.tvl!==void 0&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(bT,{size:12,className:"text-[#8b5cf6]"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider",children:"TVL"}),u.jsx("div",{className:"font-semibold text-white",children:Pw(t.tvl)})]})]}),t.apy!==void 0&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(fke,{size:12,className:"text-[#34d399]"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider",children:"APY"}),u.jsx("div",{className:dt("font-semibold",t.apy>0?"text-[#34d399]":"text-white"),children:Xf(t.apy)})]})]})]}),t.currentPrice!==void 0&&!n&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-[#232328] text-[10px] text-[#747580] relative z-10",children:["Price: ",u.jsxs("span",{className:"text-white font-mono",children:["$",t.currentPrice.toFixed(4)]})]})]})},Uet={solana:{color:"#9945FF",label:"Solana"},hyperliquid:{color:"#E7FE55",label:"Hyperliquid"},polygon:{color:"#8247E5",label:"Polygon"}},yj=({data:t,index:e=0,className:n})=>{const r=Uet[t.network],i=t.valueUsd!==void 0&&t.valueUsd>0;return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:dt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",n),children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:`${r.color}15`,border:`1px solid ${r.color}30`},children:u.jsx(Ih,{size:16,style:{color:r.color}})}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs font-semibold text-white",children:[t.token.symbol," Balance"]}),u.jsx("div",{className:"text-[10px] text-[#747580]",children:r.label})]})]}),u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:"text-xl font-bold text-white",children:Ihe(t.amount,{symbol:t.token.symbol})}),t.valueUsd!==void 0&&u.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[u.jsx("span",{className:"text-[#747580]",children:""}),u.jsx("span",{className:dt("font-medium",i?"text-[#34d399]":"text-[#747580]"),children:gj(t.valueUsd)})]})]})]})},Fet=({balances:t,className:e})=>u.jsx("div",{className:dt("grid grid-cols-1 sm:grid-cols-2 gap-3",e),children:t.map((n,r)=>u.jsx(yj,{data:n,index:r},`${n.network}-${n.token.symbol}-${r}`))}),$et={success:{icon:Mm,color:"#34d399",bgColor:"rgba(52, 211, 153, 0.1)",borderColor:"rgba(52, 211, 153, 0.3)",label:"Success"},pending:{icon:fr,color:"#fbbf24",bgColor:"rgba(251, 191, 36, 0.1)",borderColor:"rgba(251, 191, 36, 0.3)",label:"Pending"},failed:{icon:Lm,color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",borderColor:"rgba(239, 68, 68, 0.3)",label:"Failed"}},zet=({data:t,index:e=0,className:n})=>{const r=$et[t.status],i=r.icon,s=t.explorerUrl||(t.txHash?Bet(t.network,t.txHash):null),o=a=>{a.preventDefault(),s&&window.open(s,"_blank","noopener,noreferrer")};return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:dt("bg-[#1a1b21] border rounded-lg p-4 group","transition-all duration-300",n),style:{borderColor:r.borderColor},children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:r.bgColor},children:u.jsx(i,{size:16,style:{color:r.color}})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold text-white",children:t.title}),u.jsx("div",{className:"text-[10px]",style:{color:r.color},children:r.label})]})]})}),t.details&&u.jsxs("div",{className:"p-3 rounded-lg mb-3 text-sm",style:{backgroundColor:r.bgColor},children:[t.details.amount!==void 0&&t.details.token&&u.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[u.jsx("span",{children:Ihe(t.details.amount,{symbol:t.details.token})}),t.details.from&&t.details.to&&u.jsxs(u.Fragment,{children:[u.jsx(nE,{size:14,className:"text-[#747580]"}),u.jsx("span",{className:"text-[#747580] text-xs font-mono",children:$X(t.details.to)})]})]}),t.details.fee!==void 0&&u.jsxs("div",{className:"text-[10px] text-[#747580] mt-1",children:["Fee: $",t.details.fee.toFixed(2)]})]}),t.description&&u.jsx("p",{className:"text-xs text-[#a0a0a8] mb-3",children:t.description}),s&&u.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 text-[11px] text-[#60a5fa] hover:text-[#93c5fd] transition-colors group/link",children:["View Transaction",u.jsx(Ed,{size:12,className:"group-hover/link:translate-x-0.5 group-hover/link:-translate-y-0.5 transition-transform"})]}),t.txHash&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-[#232328] text-[9px] font-mono text-[#747580]",children:["TX: ",$X(t.txHash,{startChars:10,endChars:8})]})]})},Vet={high:{color:"#34d399",label:"High",emoji:""},medium:{color:"#fbbf24",label:"Medium",emoji:""},low:{color:"#ef4444",label:"Low",emoji:""}},Het={conservative:{color:"#34d399",bgColor:"rgba(52, 211, 153, 0.1)",emoji:""},moderate:{color:"#fbbf24",bgColor:"rgba(251, 191, 36, 0.1)",emoji:""},aggressive:{color:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",emoji:""}},qet=({data:t,rangeSuggestions:e,index:n=0,className:r,onSendMessage:i})=>{const s=Vet[t.confidence],o=t.priceChange24h!==void 0&&t.priceChange24h>=0,a=t.priceChange7d!==void 0&&t.priceChange7d>=0;return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:n*.05},className:dt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",r),children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-[#60a5fa]/10 border border-[#60a5fa]/30 flex items-center justify-center",children:u.jsx(MN,{size:16,className:"text-[#60a5fa]"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm font-semibold text-white",children:t.poolName||`Pool ${t.poolAddress.slice(0,8)}...`}),u.jsx(sB,{protocol:t.protocol,size:"sm"})]}),u.jsx("div",{className:"text-[10px] text-[#747580]",children:"Volatility Analysis"})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-xs font-mono text-white",children:["$",t.currentPrice.toFixed(4)]}),u.jsx("div",{className:"text-[9px] text-[#747580]",children:"Current Price"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[u.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-4",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Volume 24h"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg font-bold text-[#f59e0b]",children:Pw(t.volume24h||0)}),t.volumeChange24h!==void 0&&u.jsxs("div",{className:dt("text-xs flex items-center gap-0.5",t.volumeChange24h>=0?"text-[#34d399]":"text-[#ef4444]"),children:[t.volumeChange24h>=0?u.jsx(on,{size:12}):u.jsx(Ro,{size:12}),Xf(Math.abs(t.volumeChange24h))]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-4",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"APY"}),u.jsx("div",{className:dt("text-lg font-bold",(t.apy||0)>0?"text-[#34d399]":"text-[#747580]"),children:Xf(t.apy||0)})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-4",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Daily Volatility"}),u.jsx("div",{className:"text-lg font-bold text-[#60a5fa]",children:Xf(t.volatilityDaily)})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded-lg p-4",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Monthly Volatility"}),u.jsx("div",{className:"text-lg font-bold text-[#8b5cf6]",children:Xf(t.volatilityAnnualized/Math.sqrt(12))})]})]}),u.jsxs("div",{className:"flex items-center gap-4 text-xs mb-4",children:[t.tvl!==void 0&&u.jsxs("div",{className:"text-[#747580]",children:["TVL: ",u.jsx("span",{className:"text-white font-medium",children:Pw(t.tvl)})]}),t.priceChange24h!==void 0&&u.jsxs("div",{className:"flex items-center gap-1",children:[o?u.jsx(on,{size:12,className:"text-[#34d399]"}):u.jsx(Ro,{size:12,className:"text-[#ef4444]"}),u.jsx("span",{className:o?"text-[#34d399]":"text-[#ef4444]",children:Xf(t.priceChange24h,{showSign:!0})}),u.jsx("span",{className:"text-[#747580]",children:"24h"})]}),t.priceChange7d!==void 0&&u.jsxs("div",{className:"flex items-center gap-1",children:[a?u.jsx(on,{size:12,className:"text-[#34d399]"}):u.jsx(Ro,{size:12,className:"text-[#ef4444]"}),u.jsx("span",{className:a?"text-[#34d399]":"text-[#ef4444]",children:Xf(t.priceChange7d,{showSign:!0})}),u.jsx("span",{className:"text-[#747580]",children:"7d"})]})]}),e&&e.length>0&&u.jsxs("div",{className:"mt-4 pt-4 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsx("span",{className:"text-[10px] text-[#747580] uppercase tracking-wider font-medium",children:"Suggested Ranges"})]}),u.jsx("div",{className:"space-y-2",children:e.map((l,c)=>{const d=Het[l.strategy];return u.jsxs("div",{className:"group/range p-3 rounded-lg border transition-all duration-300 hover:scale-[1.01]",style:{backgroundColor:d.bgColor,borderColor:`${d.color}20`},children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-sm font-bold uppercase tracking-wide",style:{color:d.color},children:[d.emoji," ",l.strategy]}),u.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full font-mono",style:{backgroundColor:`${d.color}20`,color:d.color},children:["",l.sigmaMultiple,""]})]}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-medium",children:[l.widthPercent.toFixed(1),"% width"]})]}),u.jsxs("div",{className:"bg-[#0f1015]/60 rounded-md px-3 py-2 mb-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase",children:"Min"}),u.jsx("div",{className:"text-[9px] text-[#747580] uppercase",children:"Max"})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"font-mono text-sm text-white font-semibold",children:["$",l.priceMin.toFixed(4)]}),u.jsx("div",{className:"flex-1 mx-3 h-px bg-gradient-to-r from-transparent via-[#747580]/30 to-transparent"}),u.jsxs("span",{className:"font-mono text-sm text-white font-semibold",children:["$",l.priceMax.toFixed(4)]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-[#a0a0a8]",children:[u.jsx(Si,{size:10,className:"text-[#747580]"}),u.jsx("span",{children:l.estimatedTimeInRange})]}),i&&u.jsxs("button",{onClick:()=>{const m=`Adicionar liquidez na pool ${t.poolName||t.poolAddress.slice(0,8)} com range ${l.strategy}: min $${l.priceMin.toFixed(4)}, max $${l.priceMax.toFixed(4)}`;i(m)},className:"flex items-center gap-1 px-2 py-1 rounded text-[9px] font-medium transition-all duration-200 hover:scale-105",style:{backgroundColor:`${d.color}20`,color:d.color,border:`1px solid ${d.color}40`},children:[u.jsx("span",{children:"Use Range"}),u.jsx(nE,{size:10})]})]})]},c)})})]}),u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328] flex items-center justify-between text-[10px]",children:[u.jsxs("span",{className:"text-[#747580]",children:[t.dataPoints," data points"]}),u.jsxs("span",{style:{color:s.color},children:[s.emoji," ",s.label," Confidence"]})]}),t.confidence==="low"&&u.jsxs("div",{className:"mt-2 flex items-center gap-1.5 text-[10px] text-[#fbbf24] bg-[#fbbf24]/10 p-2 rounded",children:[u.jsx(Ii,{size:12}),u.jsx("span",{children:"Ranges based on estimated volatility due to limited data"})]})]})},Get=({data:t,index:e=0,className:n})=>{var o,a;const r=t.direction==="long",i=t.pnl!==void 0,s=i&&t.pnl.value>=0;return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:dt("bg-[#1a1b21] border rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",r?"border-[#34d399]/30":"border-[#ef4444]/30",n),children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(sB,{protocol:t.protocol,size:"sm"}),u.jsx("span",{className:"text-base font-bold text-white",children:t.coin}),u.jsx("span",{className:dt("text-xs font-bold px-2 py-0.5 rounded",r?"bg-[#34d399]/20 text-[#34d399]":"bg-[#ef4444]/20 text-[#ef4444]"),children:r?" LONG":" SHORT"})]}),t.leverage&&u.jsxs("span",{className:"text-xs text-[#747580]",children:[t.leverage,"x"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 text-xs",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Size"}),u.jsxs("div",{className:"font-semibold text-white",children:[(o=t.size)==null?void 0:o.toFixed(4)," ",t.coin]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Entry"}),u.jsxs("div",{className:"font-mono text-white",children:["$",(a=t.entryPrice)==null?void 0:a.toFixed(2)]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Value"}),u.jsx("div",{className:"font-bold text-white",children:gj(t.valueUsd)})]}),i&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Unrealized PnL"}),u.jsxs("div",{className:dt("flex items-center gap-1 font-bold",s?"text-[#34d399]":"text-[#ef4444]"),children:[s?u.jsx(on,{size:12}):u.jsx(Ro,{size:12}),gj(t.pnl.value,{showSign:!0}),u.jsxs("span",{className:"text-[10px] opacity-70",children:["(",Xf(t.pnl.percent,{showSign:!0}),")"]})]})]})]}),t.liquidationPrice&&t.liquidationPrice>0&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-[#232328] flex items-center gap-2 text-[10px] text-[#fbbf24]",children:[u.jsx(Ii,{size:12}),u.jsxs("span",{children:["Liq. Price: $",t.liquidationPrice.toFixed(2)]})]})]})},Ket=({data:t,index:e=0})=>{const n=_he.hyperliquid,r=o=>{switch(o){case"BUY":return u.jsx(on,{className:"w-3.5 h-3.5 text-[#34d399]"});case"SELL":return u.jsx(Ro,{className:"w-3.5 h-3.5 text-[#f87171]"});case"CLOSE":return u.jsx(Br,{className:"w-3.5 h-3.5 text-[#fbbf24]"});default:return u.jsx(Br,{className:"w-3.5 h-3.5 text-[#747580]"})}},i=o=>{switch(o){case"BUY":return{text:"text-[#34d399]",bg:"bg-[#34d399]/10"};case"SELL":return{text:"text-[#f87171]",bg:"bg-[#f87171]/10"};case"CLOSE":return{text:"text-[#fbbf24]",bg:"bg-[#fbbf24]/10"};default:return{text:"text-[#747580]",bg:"bg-[#747580]/10"}}},s=o=>o>=.7?"#34d399":o>=.4?"#fbbf24":"#f87171";return u.jsxs("div",{className:"bg-[#1a1b21] border rounded-lg overflow-hidden",style:{borderColor:n.borderColor},children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{backgroundColor:n.bgColor,borderColor:n.borderColor},children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ao,{className:"w-4 h-4",style:{color:n.color}}),u.jsx("span",{className:"font-semibold text-white text-sm",children:"Hyperliquid Dealer Thinking"}),t.cycleNumber&&u.jsxs("span",{className:"text-[#747580] text-xs",children:["Cycle #",t.cycleNumber]})]}),u.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded font-bold uppercase",style:{color:n.color,backgroundColor:"rgba(231,254,85,0.2)"},children:n.shortLabel})]}),u.jsxs("div",{className:"p-4 space-y-4",children:[t.aiSummary&&u.jsxs("div",{className:"bg-[#0d0e12] rounded-lg p-3 border-l-2",style:{borderColor:n.color},children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[u.jsx(MN,{className:"w-3 h-3",style:{color:n.color}}),u.jsx("span",{className:"text-[10px] uppercase tracking-wider font-medium",style:{color:n.color},children:"AI Analysis"})]}),u.jsx("p",{className:"text-[#a0a0a8] text-xs leading-relaxed",children:t.aiSummary})]}),t.decisions.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-[#747580] text-[10px] uppercase tracking-wider mb-2 font-medium",children:["Decisions (",t.decisions.length,")"]}),u.jsx("div",{className:"space-y-1.5",children:t.decisions.map((o,a)=>{const l=i(o.action);return u.jsxs("div",{className:"flex items-center justify-between bg-[#0d0e12] rounded-lg px-3 py-2.5",children:[u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:`p-1 rounded ${l.bg}`,children:r(o.action)}),u.jsx("span",{className:"font-medium text-white text-xs",children:o.asset}),u.jsx("span",{className:`text-xs font-bold ${l.text}`,children:o.action})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"text-[#747580] text-[10px]",children:"Confidence"}),u.jsxs("div",{className:"text-xs font-bold px-1.5 py-0.5 rounded",style:{color:s(o.confidence),backgroundColor:`${s(o.confidence)}15`},children:[(o.confidence*100).toFixed(0),"%"]})]})]},`${o.asset}-${a}`)})})]}),t.decisions.length===0&&!t.aiSummary&&u.jsx("div",{className:"text-center py-4 text-[#747580] text-xs",children:"No decisions recorded for this cycle"})]}),u.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5 border-t text-[10px]",style:{borderColor:n.borderColor},children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-[#747580]",children:[u.jsx(fr,{className:"w-3 h-3"}),u.jsx("span",{children:new Date(t.cycleTimestamp).toLocaleString()})]}),t.assetsAnalyzed.length>0&&u.jsxs("span",{className:"text-[#747580]",children:[t.assetsAnalyzed.length," assets: ",t.assetsAnalyzed.slice(0,3).join(", "),t.assetsAnalyzed.length>3&&` +${t.assetsAnalyzed.length-3}`]})]})]})},Wet=({children:t,columns:e=2,gap:n="md",className:r})=>{const i={1:"grid-cols-1",2:"grid-cols-1 sm:grid-cols-2",3:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"},s={sm:"gap-2",md:"gap-3",lg:"gap-4"};return u.jsx("div",{className:dt("grid",i[e],s[n],r),children:t})},Yet=({data:t,index:e=0,className:n})=>{var l,c;const r=((l=t.exchange)==null?void 0:l.toLowerCase())||"unknown",i=pj[r]||pj.unknown,s=t.change24hPercent!==void 0,o=(t.change24hPercent??0)>=0,a=d=>d>=1e3?d.toLocaleString("en-US",{maximumFractionDigits:2}):d>=1?d.toFixed(4):d.toFixed(6);return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:dt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300","relative overflow-hidden",n),children:[u.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-[#E7FE55]/5 rounded-full blur-2xl -z-0 opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsxs("div",{className:"flex items-center justify-between mb-3 relative z-10",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded font-bold uppercase tracking-wide",style:{color:i.color,backgroundColor:i.bgColor,border:`1px solid ${i.borderColor}`},children:i.shortLabel}),u.jsx("span",{className:"text-sm font-bold text-white",children:t.symbol})]}),s&&u.jsxs("div",{className:dt("flex items-center gap-1 text-xs font-medium px-2 py-0.5 rounded",o?"text-[#34d399] bg-[#34d399]/10":"text-red-400 bg-red-400/10"),children:[o?u.jsx(on,{size:12}):u.jsx(Ro,{size:12}),u.jsxs("span",{children:[o?"+":"",(c=t.change24hPercent)==null?void 0:c.toFixed(2),"%"]})]})]}),u.jsxs("div",{className:"flex items-center gap-2 relative z-10",children:[u.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:i.bgColor,border:`1px solid ${i.borderColor}`},children:u.jsx(tv,{size:20,style:{color:i.color}})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:"Market Price"}),u.jsxs("div",{className:"text-xl font-bold text-white font-mono",children:["$",a(t.price)]})]})]}),t.change24h!==void 0&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-[#232328] text-[10px] text-[#747580] relative z-10",children:["24h: ",u.jsxs("span",{className:dt("font-medium",o?"text-[#34d399]":"text-red-400"),children:[o?"+":"","$",t.change24h.toFixed(2)]})]}),(t.bid!==void 0||t.ask!==void 0)&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-[#232328] grid grid-cols-2 gap-2 text-[10px] relative z-10",children:[t.bid!==void 0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] uppercase tracking-wider mb-0.5",children:"Bid"}),u.jsxs("div",{className:"text-[#34d399] font-mono font-medium",children:["$",a(t.bid)]})]}),t.ask!==void 0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[#747580] uppercase tracking-wider mb-0.5",children:"Ask"}),u.jsxs("div",{className:"text-red-400 font-mono font-medium",children:["$",a(t.ask)]})]})]})]})},Jet=({data:t,index:e=0,className:n})=>{const r=t.close>=t.open,i=(t.close-t.open)/t.open*100,s=a=>a>=1e3?a.toLocaleString("en-US",{maximumFractionDigits:2}):a>=1?a.toFixed(4):a.toFixed(6),o=a=>a>=1e9?`${(a/1e9).toFixed(2)}B`:a>=1e6?`${(a/1e6).toFixed(2)}M`:a>=1e3?`${(a/1e3).toFixed(2)}K`:a.toFixed(2);return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:dt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",n),children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:dt("w-8 h-8 rounded-full flex items-center justify-center",r?"bg-[#34d399]/10":"bg-red-400/10"),children:u.jsx(MN,{size:16,className:r?"text-[#34d399]":"text-red-400"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-white",children:t.symbol}),u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#747580]",children:[u.jsx(fr,{size:10}),u.jsx("span",{children:t.timeframe})]})]})]}),u.jsxs("div",{className:dt("flex items-center gap-1 text-xs font-medium px-2 py-0.5 rounded",r?"text-[#34d399] bg-[#34d399]/10":"text-red-400 bg-red-400/10"),children:[r?u.jsx(on,{size:12}):u.jsx(Ro,{size:12}),u.jsxs("span",{children:[r?"+":"",i.toFixed(2),"%"]})]})]}),u.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[11px]",children:[u.jsxs("div",{className:"bg-[#0f1015] rounded p-2",children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Open"}),u.jsx("div",{className:"text-white font-mono font-medium",children:s(t.open)})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded p-2",children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"High"}),u.jsx("div",{className:"text-[#34d399] font-mono font-medium",children:s(t.high)})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded p-2",children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Low"}),u.jsx("div",{className:"text-red-400 font-mono font-medium",children:s(t.low)})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded p-2",children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:"Close"}),u.jsx("div",{className:dt("font-mono font-medium",r?"text-[#34d399]":"text-red-400"),children:s(t.close)})]})]}),u.jsxs("div",{className:"mt-2 pt-2 border-t border-[#232328] flex items-center justify-between text-[10px]",children:[u.jsx("span",{className:"text-[#747580]",children:"Volume"}),u.jsx("span",{className:"text-white font-mono",children:o(t.volume)})]})]})},Xet=(t,e)=>{const n=t.toUpperCase();if(typeof e=="number"){if(n==="RSI")return e>=70?{color:"text-red-400",status:"Overbought"}:e<=30?{color:"text-[#34d399]",status:"Oversold"}:{color:"text-[#60a5fa]",status:"Neutral"};if(n==="STOCH"||n==="STOCHASTIC")return e>=80?{color:"text-red-400",status:"Overbought"}:e<=20?{color:"text-[#34d399]",status:"Oversold"}:{color:"text-[#60a5fa]",status:"Neutral"};if(n==="ADX")return e>=50?{color:"text-[#E7FE55]",status:"Strong Trend"}:e>=25?{color:"text-[#60a5fa]",status:"Trending"}:{color:"text-[#747580]",status:"Weak/No Trend"}}return{color:"text-white",status:""}},Qet=t=>{switch(t.toUpperCase()){case"RSI":return{bg:"rgba(96, 165, 250, 0.15)",text:"#60a5fa",border:"rgba(96, 165, 250, 0.3)"};case"MACD":return{bg:"rgba(139, 92, 246, 0.15)",text:"#8b5cf6",border:"rgba(139, 92, 246, 0.3)"};case"EMA":case"SMA":return{bg:"rgba(52, 211, 153, 0.15)",text:"#34d399",border:"rgba(52, 211, 153, 0.3)"};case"BBANDS":case"BOLLINGER":return{bg:"rgba(244, 114, 182, 0.15)",text:"#f472b6",border:"rgba(244, 114, 182, 0.3)"};case"ADX":return{bg:"rgba(251, 191, 36, 0.15)",text:"#fbbf24",border:"rgba(251, 191, 36, 0.3)"};default:return{bg:"rgba(231, 254, 85, 0.15)",text:"#E7FE55",border:"rgba(231, 254, 85, 0.3)"}}},Zet=({data:t,index:e=0,className:n})=>{const{color:r,status:i}=Xet(t.indicator,t.value),s=Qet(t.indicator),o=typeof t.value=="object",a=l=>Math.abs(l)>=1e3?l.toLocaleString("en-US",{maximumFractionDigits:2}):l.toFixed(4);return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:dt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",n),children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded font-bold uppercase tracking-wide",style:{color:s.text,backgroundColor:s.bg,border:`1px solid ${s.border}`},children:t.indicator.toUpperCase()}),u.jsx("span",{className:"text-sm font-bold text-white",children:t.symbol})]}),u.jsx("span",{className:"text-[10px] text-[#747580]",children:t.timeframe})]}),o?u.jsx("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:Object.entries(t.value).map(([l,c])=>u.jsxs("div",{className:"bg-[#0f1015] rounded p-2",children:[u.jsx("div",{className:"text-[#747580] text-[9px] uppercase tracking-wider mb-1",children:l}),u.jsx("div",{className:dt("font-mono font-medium",c>=0?"text-[#34d399]":"text-red-400"),children:a(c)})]},l))}):u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:s.bg,border:`1px solid ${s.border}`},children:u.jsx(Si,{size:20,style:{color:s.text}})}),u.jsxs("div",{children:[u.jsx("div",{className:dt("text-2xl font-bold font-mono",r),children:a(t.value)}),i&&u.jsx("div",{className:"text-[10px] text-[#747580]",children:i})]})]})]})},ett=t=>{const e=t.toUpperCase().replace("_"," ");return e.includes("STRONG BUY")||e==="STRONG_BUY"?{color:"#34d399",bgColor:"rgba(52, 211, 153, 0.15)",borderColor:"rgba(52, 211, 153, 0.3)",icon:u.jsx(on,{size:14}),label:"Strong Buy"}:e.includes("BUY")?{color:"#6ee7b7",bgColor:"rgba(110, 231, 183, 0.15)",borderColor:"rgba(110, 231, 183, 0.3)",icon:u.jsx(on,{size:14}),label:"Buy"}:e.includes("STRONG SELL")||e==="STRONG_SELL"?{color:"#f87171",bgColor:"rgba(248, 113, 113, 0.15)",borderColor:"rgba(248, 113, 113, 0.3)",icon:u.jsx(Ro,{size:14}),label:"Strong Sell"}:e.includes("SELL")?{color:"#fca5a5",bgColor:"rgba(252, 165, 165, 0.15)",borderColor:"rgba(252, 165, 165, 0.3)",icon:u.jsx(Ro,{size:14}),label:"Sell"}:{color:"#747580",bgColor:"rgba(116, 117, 128, 0.15)",borderColor:"rgba(116, 117, 128, 0.3)",icon:u.jsx(Br,{size:14}),label:"Neutral"}},ttt=({data:t,index:e=0,className:n})=>{const r=ett(t.recommendation),i=t.buy+t.sell+t.neutral,s=pj.tradingview,o=i>0?t.buy/i*100:0,a=i>0?t.sell/i*100:0,l=i>0?t.neutral/i*100:0;return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:dt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",n),children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded font-bold uppercase tracking-wide",style:{color:s.color,backgroundColor:s.bgColor,border:`1px solid ${s.borderColor}`},children:s.shortLabel}),u.jsx("span",{className:"text-sm font-bold text-white",children:t.symbol})]}),u.jsxs("span",{className:"flex items-center gap-1 text-[10px] px-2 py-1 rounded font-bold",style:{color:r.color,backgroundColor:r.bgColor,border:`1px solid ${r.borderColor}`},children:[r.icon,r.label]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] text-[#747580] w-12",children:"Buy"}),u.jsx("div",{className:"flex-1 h-2 bg-[#0f1015] rounded-full overflow-hidden",children:u.jsx(gt.div,{className:"h-full bg-[#34d399] rounded-full",initial:{width:0},animate:{width:`${o}%`},transition:{duration:.5,delay:.1}})}),u.jsx("span",{className:"text-[10px] text-[#34d399] font-medium w-8 text-right",children:t.buy})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] text-[#747580] w-12",children:"Neutral"}),u.jsx("div",{className:"flex-1 h-2 bg-[#0f1015] rounded-full overflow-hidden",children:u.jsx(gt.div,{className:"h-full bg-[#747580] rounded-full",initial:{width:0},animate:{width:`${l}%`},transition:{duration:.5,delay:.2}})}),u.jsx("span",{className:"text-[10px] text-[#747580] font-medium w-8 text-right",children:t.neutral})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] text-[#747580] w-12",children:"Sell"}),u.jsx("div",{className:"flex-1 h-2 bg-[#0f1015] rounded-full overflow-hidden",children:u.jsx(gt.div,{className:"h-full bg-red-400 rounded-full",initial:{width:0},animate:{width:`${a}%`},transition:{duration:.5,delay:.3}})}),u.jsx("span",{className:"text-[10px] text-red-400 font-medium w-8 text-right",children:t.sell})]})]})]})},ntt=t=>{switch(t.toUpperCase()){case"SWAP":return{icon:u.jsx(tTe,{size:14}),color:"#8b5cf6",bgColor:"rgba(139, 92, 246, 0.15)",borderColor:"rgba(139, 92, 246, 0.3)",label:"Swap"};case"TRANSFER":return{icon:u.jsx(KD,{size:14}),color:"#60a5fa",bgColor:"rgba(96, 165, 250, 0.15)",borderColor:"rgba(96, 165, 250, 0.3)",label:"Transfer"};case"HL_ORDER":return{icon:u.jsx(on,{size:14}),color:"#E7FE55",bgColor:"rgba(231, 254, 85, 0.15)",borderColor:"rgba(231, 254, 85, 0.3)",label:"HL Order"};case"ALERT":default:return{icon:u.jsx(sTe,{size:14}),color:"#fbbf24",bgColor:"rgba(251, 191, 36, 0.15)",borderColor:"rgba(251, 191, 36, 0.3)",label:"Alert"}}},rtt=t=>{switch(t){case"active":return{color:"#34d399",label:"Active"};case"executed":return{color:"#60a5fa",label:"Executed"};case"pending":default:return{color:"#fbbf24",label:"Pending"}}},itt=({data:t,index:e=0,className:n})=>{const r=ntt(t.taskType),i=rtt(t.status),s=!!t.condition,o=a=>{const l=new Date(a),d=a-new Date().getTime();if(d<=0)return"Now";const h=Math.floor(d/1e3),m=Math.floor(h/60),g=Math.floor(m/60);return g>=24?l.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):g>=1?`in ${g}h ${m%60}m`:m>=1?`in ${m}m`:`in ${h}s`};return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:dt("bg-[#1a1b21] border border-[#232328] rounded-lg p-4 group","hover:border-[#E7FE55]/30 transition-all duration-300",n),children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"flex items-center gap-1 text-[9px] px-2 py-0.5 rounded font-bold uppercase tracking-wide",style:{color:r.color,backgroundColor:r.bgColor,border:`1px solid ${r.borderColor}`},children:[r.icon,r.label]}),u.jsx("span",{className:"text-sm font-medium text-white",children:"Task Scheduled"})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:i.color}}),u.jsx("span",{className:"text-[10px]",style:{color:i.color},children:i.label})]})]}),u.jsx("div",{className:"bg-[#0f1015] rounded p-3",children:s?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#747580]",children:[u.jsx(Mo,{size:12,className:"text-[#E7FE55]"}),u.jsx("span",{children:"Executes when condition is met"})]}),u.jsxs("div",{className:"text-xs text-white",children:[u.jsx("span",{className:"text-[#60a5fa]",children:t.condition.indicator.toUpperCase()})," of ",u.jsx("span",{className:"text-[#E7FE55] font-bold",children:t.condition.symbol})," ",u.jsxs("span",{className:"text-[#747580]",children:["(",t.condition.timeframe,")"]})," ",u.jsx("span",{className:"text-white",children:t.condition.operator})," ",u.jsx("span",{className:"text-[#34d399] font-bold",children:t.condition.value})]})]}):t.executeAt?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(96, 165, 250, 0.15)"},children:u.jsx(fr,{size:16,className:"text-[#60a5fa]"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:"Executes"}),u.jsx("div",{className:"text-sm font-medium text-white",children:o(t.executeAt)})]})]}):u.jsx("div",{className:"text-[10px] text-[#747580]",children:"No execution time set"})}),u.jsxs("div",{className:"mt-2 text-[10px] text-[#747580]",children:["ID: ",u.jsx("span",{className:"font-mono",children:t.taskId})]})]})},stt=({data:t,className:e})=>{const n=t.operations&&t.operations.length>0;return u.jsxs("div",{className:dt("bg-[#1a1b21] border border-[#232328] rounded-xl overflow-hidden w-full max-w-md shadow-lg",e),children:[u.jsxs("div",{className:"bg-[#232328]/50 px-4 py-3 border-b border-[#232328] flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"p-1.5 rounded-md bg-[#E7FE55]/10 text-[#E7FE55]",children:u.jsx(KTe,{size:16})}),u.jsx("span",{className:"font-semibold text-white text-sm",children:"Dealer History"})]}),u.jsxs("div",{className:"text-xs text-[#747580] bg-[#2a2b36] px-2 py-0.5 rounded-full border border-[#343541]",children:[t.totalOperations," Ops"]})]}),u.jsx("div",{className:"p-0",children:n?u.jsx("div",{className:"divide-y divide-[#232328]",children:t.operations.map((r,i)=>u.jsx(ott,{operation:r,index:i},r.id||i))}):u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{className:"text-center py-4 bg-[#232328]/30 rounded-lg border border-[#232328] border-dashed",children:[u.jsx(Si,{className:"mx-auto text-[#747580] mb-2 opacity-50",size:24}),u.jsx("div",{className:"text-[#e4e5e9] text-sm font-medium",children:"No Trades Executed"}),u.jsx("div",{className:"text-[#747580] text-xs mt-1 px-4",children:"The dealer hasn't executed any trades matching your criteria yet."})]}),t.recentLogs&&t.recentLogs.length>0&&u.jsxs("div",{className:"space-y-2 mt-4",children:[u.jsx("div",{className:"text-[10px] uppercase tracking-wider text-[#747580] font-semibold pl-1",children:"Recent Activity"}),t.recentLogs.map((r,i)=>u.jsxs(gt.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"flex gap-3 text-xs p-2 rounded hover:bg-[#232328]/50 transition-colors",children:[u.jsx("div",{className:"mt-0.5 min-w-[14px]",children:r.type==="ERROR"?u.jsx(V1,{size:14,className:"text-red-400"}):r.type==="WARNING"?u.jsx(V1,{size:14,className:"text-orange-400"}):u.jsx(LN,{size:14,className:"text-[#747580]"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[#e4e5e9]",children:r.message}),u.jsxs("div",{className:"text-[#565866] text-[10px] mt-0.5 flex items-center gap-1",children:[u.jsx(fr,{size:8}),new Date(r.timestamp).toLocaleTimeString()]})]})]},i))]})]})}),n&&u.jsxs("div",{className:"bg-[#1e1f26] px-4 py-2 text-[10px] text-[#747580] border-t border-[#232328] flex justify-between",children:[u.jsxs("span",{children:["Last updated: ",new Date().toLocaleTimeString()]}),u.jsxs("span",{children:["Showing ",t.operations.length," most recent"]})]})]})},ott=({operation:t,index:e})=>{var a;const[n,r]=S.useState(!1),i=(t.pnl||0)>=0,s=t.action==="BUY",o=t.action==="CLOSE";return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.05},className:"group",children:[u.jsxs("div",{className:"p-3 hover:bg-[#232328]/40 transition-colors cursor-pointer",onClick:()=>r(!n),children:[u.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:dt("text-[9px] font-bold px-1.5 py-0.5 rounded border uppercase tracking-wider",o?"bg-slate-500/10 text-slate-400 border-slate-500/20":s?"bg-[#34d399]/10 text-[#34d399] border-[#34d399]/20":"bg-red-400/10 text-red-400 border-red-400/20"),children:t.action}),u.jsx("span",{className:"font-bold text-white text-sm",children:t.coin})]}),u.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-[#747580]",children:[u.jsx(fr,{size:10}),u.jsxs("span",{children:[new Date(t.timestamp).toLocaleDateString()," ",new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex gap-4 text-xs",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-[#747580] mr-1",children:"Price:"}),u.jsxs("span",{className:"text-[#e4e5e9] font-mono",children:["$",((a=t.price)==null?void 0:a.toFixed(4))||"0.00"]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-[#747580] mr-1",children:"Size:"}),u.jsx("span",{className:"text-[#e4e5e9] font-mono",children:t.size})]})]}),t.pnl!==void 0&&u.jsxs("div",{className:dt("font-mono font-medium text-xs flex items-center gap-1",i?"text-[#34d399]":"text-red-400"),children:[i?u.jsx(on,{size:12}):u.jsx(Ro,{size:12}),i?"+":"","$",t.pnl.toFixed(2)]})]})]}),u.jsx(Ei,{children:n&&u.jsx(gt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden bg-[#1e1f26]",children:u.jsxs("div",{className:"p-3 border-t border-[#232328] border-dashed mx-3 mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(cTe,{size:12,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[10px] text-[#E7FE55] font-semibold uppercase tracking-wider",children:"AI Reasoning"}),u.jsxs("span",{className:"text-[10px] text-[#747580] bg-[#2a2b36] px-1.5 rounded border border-[#343541]",children:["Confidence: ",Math.round(t.confidence*100),"%"]})]}),u.jsx("p",{className:"text-xs text-[#a1a1aa] leading-relaxed",children:t.reasoning||"No detailed reasoning available for this operation."})]})})})]})},att=({data:t,onSendMessage:e})=>{const n=()=>!t.summary&&!t.title?null:u.jsxs("div",{className:"mb-3",children:[t.title&&u.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:t.title}),t.summary&&u.jsx("p",{className:"text-xs text-[#a0a0a8]",children:t.summary})]});switch(t.resultType){case"pool":case"pools":{const r=t.items.filter(i=>i.type==="pool");return r.length===0?null:r.length===1?u.jsxs("div",{children:[n(),u.jsx(zX,{data:r[0]})]}):u.jsxs("div",{children:[n(),u.jsx(Wet,{columns:2,children:r.map((i,s)=>u.jsx(zX,{data:i,index:s,compact:r.length>4},i.poolAddress||s))})]})}case"balance":case"balances":{const r=t.items.filter(i=>i.type==="balance");return r.length===0?null:r.length===1?u.jsxs("div",{children:[n(),u.jsx(yj,{data:r[0]})]}):u.jsxs("div",{children:[n(),u.jsx(Fet,{balances:r})]})}case"transaction":{const r=t.items.filter(i=>i.type==="transaction");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-3",children:r.map((i,s)=>u.jsx(zet,{data:i,index:s},i.txHash||s))})]})}case"volatility":{const r=t.items.filter(i=>i.type==="volatility");return r.length===0?null:r.length>1?u.jsxs("div",{children:[n(),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-xs",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-left text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"pb-2 pr-2",children:"Pool"}),u.jsx("th",{className:"pb-2 px-2",children:"Protocol"}),u.jsx("th",{className:"pb-2 px-2",children:"TVL"}),u.jsx("th",{className:"pb-2 px-2",children:"Daily Vol"}),u.jsx("th",{className:"pb-2 px-2",children:"Ann. Vol"}),u.jsx("th",{className:"pb-2 pl-2",children:"Price"})]})}),u.jsx("tbody",{children:r.map((i,s)=>{var o;return u.jsxs("tr",{className:"border-b border-[#232328]/50",children:[u.jsx("td",{className:"py-2 pr-2 text-white font-medium",children:((o=i.poolName)==null?void 0:o.slice(0,15))||i.poolAddress.slice(0,8)+"..."}),u.jsx("td",{className:"py-2 px-2",children:u.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded font-bold uppercase",style:{color:i.protocol==="meteora"?"#8B5CF6":"#14B8A6",backgroundColor:i.protocol==="meteora"?"rgba(139, 92, 246, 0.15)":"rgba(20, 184, 166, 0.15)"},children:i.protocol==="meteora"?"MET":"RAY"})}),u.jsx("td",{className:"py-2 px-2 text-white",children:i.tvl?`$${(i.tvl/1e3).toFixed(1)}K`:"N/A"}),u.jsxs("td",{className:"py-2 px-2 text-[#60a5fa]",children:[i.volatilityDaily.toFixed(2),"%"]}),u.jsxs("td",{className:"py-2 px-2 text-[#8b5cf6]",children:[i.volatilityAnnualized.toFixed(1),"%"]}),u.jsxs("td",{className:"py-2 pl-2 text-white font-mono",children:["$",i.currentPrice.toFixed(4)]})]},i.poolAddress)})})]})})]}):u.jsxs("div",{children:[n(),u.jsx(qet,{data:r[0],rangeSuggestions:t.rangeSuggestions,onSendMessage:e})]})}case"position":case"positions":{const r=t.items.filter(o=>o.type==="balance"),i=t.items.filter(o=>o.type==="position"),s=i.filter(o=>o.protocol==="hyperliquid"&&o.coin);return s.length>0?u.jsxs("div",{children:[n(),r.length>0&&u.jsx("div",{className:"mb-3",children:u.jsx(yj,{data:r[0]})}),u.jsx("div",{className:"space-y-3",children:s.map((o,a)=>u.jsx(Get,{data:o,index:a},`${o.coin}-${a}`))})]}):u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-2",children:i.map((o,a)=>u.jsxs("div",{className:"bg-[#1a1b21] border border-[#232328] rounded-lg p-3 text-xs",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"font-semibold text-white",children:o.poolName||"Position"}),u.jsxs("span",{className:"text-[#34d399] font-bold",children:["$",o.valueUsd.toLocaleString()]})]}),o.tokenA&&o.tokenB&&u.jsxs("div",{className:"text-[#747580]",children:[o.tokenA.amount.toFixed(4)," ",o.tokenA.symbol," / ",o.tokenB.amount.toFixed(4)," ",o.tokenB.symbol]}),o.unclaimedFeesUsd!==void 0&&o.unclaimedFeesUsd>0&&u.jsxs("div",{className:"text-[#E7FE55] mt-1",children:["Unclaimed: $",o.unclaimedFeesUsd.toFixed(2)]})]},o.poolAddress||a))})]})}case"hl-thinking":{const r=t.items.filter(i=>i.type==="hl-thinking");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-3",children:r.map((i,s)=>u.jsx(Ket,{data:i,index:s},i.cycleTimestamp||s))})]})}case"market-price":{const r=t.items.filter(i=>i.type==="market-price");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-3",children:r.map((i,s)=>u.jsx(Yet,{data:i,index:s},`${i.symbol}-${i.exchange}-${s}`))})]})}case"ohlcv":{const r=t.items.filter(i=>i.type==="ohlcv");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-3",children:r.map((i,s)=>u.jsx(Jet,{data:i,index:s},`${i.symbol}-${i.timeframe}-${s}`))})]})}case"indicator":{const r=t.items.filter(i=>i.type==="indicator");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-3",children:r.map((i,s)=>u.jsx(Zet,{data:i,index:s},`${i.symbol}-${i.indicator}-${s}`))})]})}case"trading-summary":{const r=t.items.filter(i=>i.type==="trading-summary");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-3",children:r.map((i,s)=>u.jsx(ttt,{data:i,index:s},`${i.symbol}-${s}`))})]})}case"scheduler":{const r=t.items.filter(i=>i.type==="scheduler");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx("div",{className:"space-y-3",children:r.map((i,s)=>u.jsx(itt,{data:i,index:s},i.taskId||s))})]})}case"dealer-history":{const r=t.items.filter(i=>i.type==="dealer-history");return r.length===0?null:u.jsxs("div",{children:[n(),u.jsx(stt,{data:r[0],className:"animate-in fade-in slide-in-from-bottom-4 duration-500"})]})}default:return null}},ltt=[{id:"pools",label:"Liquidity Pools",icon:u.jsx(bT,{size:14}),color:"#9b87f5",suggestions:["Show top pools by volatility","Find SOL/USDC pools","What is the best APY pool?","Suggest optimal range for SOL/USDC"]},{id:"hyperliquid",label:"Hyperliquid",icon:u.jsx(on,{size:14}),color:"#34d399",suggestions:["Check my HL balance","Show my open positions","Analyze market for BTC","Is BTC trending up?"]},{id:"dealer",label:"Vault Dealer",icon:u.jsx(Si,{size:14}),color:"#E7FE55",suggestions:["Explain dealer latest decision","Show dealer trade history","What is the dealer thinking?","Show recent dealer logs"]},{id:"analysis",label:"Market Analysis",icon:u.jsx(MN,{size:14}),color:"#60a5fa",suggestions:["Show RSI analysis for SOL on 4h","Show BTC price and indicators","What is the MACD for ETH?","Show candlestick chart for BTC"]},{id:"automations",label:"Automations",icon:u.jsx(fr,{size:14}),color:"#fbbf24",suggestions:["Swap SOL to USDC in 5 minutes","Alert me when BTC RSI < 30 on 1h","Buy BTC on HL when price hits 95k","Show my scheduled tasks"]},{id:"solana",label:"Solana",icon:u.jsx(Ih,{size:14}),color:"#9b87f5",suggestions:["Check my wallet balance","Show SOL price","List my token holdings","Transfer 1 SOL"]},{id:"withdrawals",label:"Withdrawals",icon:u.jsx(Q2e,{size:14}),color:"#60a5fa",suggestions:["Withdraw 100 USDC from HL","Show pending withdrawals","Check withdrawal status"]}],ctt=({onSuggestionClick:t})=>{const[e,n]=S.useState(null);return u.jsxs("div",{className:"w-full max-w-2xl mx-auto mt-6",children:[u.jsx("p",{className:"text-[10px] uppercase tracking-[0.15em] text-[#747580] text-center mb-4 font-medium",children:"Try asking about"}),u.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:ltt.map(r=>u.jsxs("div",{className:"relative",onMouseEnter:()=>n(r.id),onMouseLeave:()=>n(null),children:[u.jsxs(gt.button,{className:"flex items-center gap-2 px-3 py-1.5 rounded text-[11px] font-medium transition-all border",style:{backgroundColor:e===r.id?`${r.color}15`:"transparent",borderColor:e===r.id?`${r.color}40`:"#232328",color:e===r.id?r.color:"#747580"},whileHover:{scale:1.02},whileTap:{scale:.98},children:[r.icon,r.label,u.jsx(il,{size:12,className:"transition-transform",style:{transform:e===r.id?"rotate(90deg)":"rotate(0deg)",opacity:e===r.id?1:.5}})]}),u.jsx(Ei,{children:e===r.id&&u.jsx(gt.div,{className:"absolute top-full left-0 mt-1 z-50 min-w-[200px]",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15},children:u.jsx("div",{className:"bg-[#14151a] border border-[#232328] rounded p-1 shadow-lg",style:{borderColor:`${r.color}30`},children:r.suggestions.map((i,s)=>u.jsx(gt.button,{className:"w-full text-left px-3 py-2 text-[11px] text-[#e4e5e9] hover:bg-[#1a1b21] rounded transition-colors",onClick:()=>t(i),whileHover:{x:2},children:i},s))})})})]},r.id))})]})};var _4="focusScope.autoFocusOnMount",I4="focusScope.autoFocusOnUnmount",VX={bubbles:!1,cancelable:!0},utt="FocusScope",oB=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=S.useState(null),c=Rh(i),d=Rh(s),h=S.useRef(null),m=Or(e,x=>l(x)),g=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let x=function(N){if(g.paused||!a)return;const O=N.target;a.contains(O)?h.current=O:Gf(h.current,{select:!0})},b=function(N){if(g.paused||!a)return;const O=N.relatedTarget;O!==null&&(a.contains(O)||Gf(h.current,{select:!0}))},w=function(N){if(document.activeElement===document.body)for(const D of N)D.removedNodes.length>0&&Gf(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const k=new MutationObserver(w);return a&&k.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),k.disconnect()}}},[r,a,g.paused]),S.useEffect(()=>{if(a){qX.add(g);const x=document.activeElement;if(!a.contains(x)){const w=new CustomEvent(_4,VX);a.addEventListener(_4,c),a.dispatchEvent(w),w.defaultPrevented||(dtt(gtt(Rhe(a)),{select:!0}),document.activeElement===x&&Gf(a))}return()=>{a.removeEventListener(_4,c),setTimeout(()=>{const w=new CustomEvent(I4,VX);a.addEventListener(I4,d),a.dispatchEvent(w),w.defaultPrevented||Gf(x??document.body,{select:!0}),a.removeEventListener(I4,d),qX.remove(g)},0)}}},[a,c,d,g]);const v=S.useCallback(x=>{if(!n&&!r||g.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(b&&w){const k=x.currentTarget,[N,O]=ftt(k);N&&O?!x.shiftKey&&w===O?(x.preventDefault(),n&&Gf(N,{select:!0})):x.shiftKey&&w===N&&(x.preventDefault(),n&&Gf(O,{select:!0})):w===k&&x.preventDefault()}},[n,r,g.paused]);return u.jsx(jn.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});oB.displayName=utt;function dtt(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Gf(r,{select:e}),document.activeElement!==n)return}function ftt(t){const e=Rhe(t),n=HX(e,t),r=HX(e.reverse(),t);return[n,r]}function Rhe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function HX(t,e){for(const n of t)if(!htt(n,{upTo:e}))return n}function htt(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function ptt(t){return t instanceof HTMLInputElement&&"select"in t}function Gf(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&ptt(t)&&e&&t.select()}}var qX=mtt();function mtt(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=GX(t,e),t.unshift(e)},remove(e){var n;t=GX(t,e),(n=t[0])==null||n.resume()}}}function GX(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function gtt(t){return t.filter(e=>e.tagName!=="A")}var R4=0;function Ohe(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??KX()),document.body.insertAdjacentElement("beforeend",t[1]??KX()),R4++,()=>{R4===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),R4--}},[])}function KX(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var tT="right-scroll-bar-position",nT="width-before-scroll-bar",ytt="with-scroll-bars-hidden",xtt="--removed-body-scroll-bar-size";function O4(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vtt(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var btt=typeof window<"u"?S.useLayoutEffect:S.useEffect,WX=new WeakMap;function wtt(t,e){var n=vtt(null,function(r){return t.forEach(function(i){return O4(i,r)})});return btt(function(){var r=WX.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||O4(a,null)}),s.forEach(function(a){i.has(a)||O4(a,o)})}WX.set(n,t)},[t]),n}function Ett(t){return t}function Stt(t,e){e===void 0&&(e=Ett);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return i}function Att(t){t===void 0&&(t={});var e=Stt(null);return e.options=_c({async:!0,ssr:!1},t),e}var Mhe=function(t){var e=t.sideCar,n=Xx(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,_c({},n))};Mhe.isSideCarExport=!0;function Ttt(t,e){return t.useMedium(e),Mhe}var Lhe=Att(),M4=function(){},mP=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:M4,onWheelCapture:M4,onTouchMoveCapture:M4}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noRelative,v=t.noIsolation,x=t.inert,b=t.allowPinchZoom,w=t.as,k=w===void 0?"div":w,N=t.gapMode,O=Xx(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=m,_=wtt([n,e]),F=_c(_c({},O),i);return S.createElement(S.Fragment,null,d&&S.createElement(D,{sideCar:Lhe,removeScrollBar:c,shards:h,noRelative:g,noIsolation:v,inert:x,setCallbacks:s,allowPinchZoom:!!b,lockRef:n,gapMode:N}),o?S.cloneElement(S.Children.only(a),_c(_c({},F),{ref:_})):S.createElement(k,_c({},F,{className:l,ref:_}),a))});mP.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mP.classNames={fullWidth:nT,zeroRight:tT};var ktt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ntt(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ktt();return e&&t.setAttribute("nonce",e),t}function Ctt(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ptt(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var _tt=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Ntt())&&(Ctt(e,n),Ptt(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Itt=function(){var t=_tt();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},jhe=function(){var t=Itt(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Rtt={left:0,top:0,right:0,gap:0},L4=function(t){return parseInt(t||"",10)||0},Ott=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[L4(n),L4(r),L4(i)]},Mtt=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Rtt;var e=Ott(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Ltt=jhe(),wy="data-scroll-locked",jtt=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(ytt,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(wy,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tT,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(nT,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(tT," .").concat(tT,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(nT," .").concat(nT,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wy,`] {
    `).concat(xtt,": ").concat(a,`px;
  }
`)},YX=function(){var t=parseInt(document.body.getAttribute(wy)||"0",10);return isFinite(t)?t:0},Dtt=function(){S.useEffect(function(){return document.body.setAttribute(wy,(YX()+1).toString()),function(){var t=YX()-1;t<=0?document.body.removeAttribute(wy):document.body.setAttribute(wy,t.toString())}},[])},Btt=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Dtt();var s=S.useMemo(function(){return Mtt(i)},[i]);return S.createElement(Ltt,{styles:jtt(s,!e,i,n?"":"!important")})},xj=!1;if(typeof window<"u")try{var r2=Object.defineProperty({},"passive",{get:function(){return xj=!0,!0}});window.addEventListener("test",r2,r2),window.removeEventListener("test",r2,r2)}catch{xj=!1}var xg=xj?{passive:!1}:!1,Utt=function(t){return t.tagName==="TEXTAREA"},Dhe=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Utt(t)&&n[e]==="visible")},Ftt=function(t){return Dhe(t,"overflowY")},$tt=function(t){return Dhe(t,"overflowX")},JX=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Bhe(t,r);if(i){var s=Uhe(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ztt=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Vtt=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Bhe=function(t,e){return t==="v"?Ftt(e):$tt(e)},Uhe=function(t,e){return t==="v"?ztt(e):Vtt(e)},Htt=function(t,e){return t==="h"&&e==="rtl"?-1:1},qtt=function(t,e,n,r,i){var s=Htt(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,m=0;do{if(!a)break;var g=Uhe(t,a),v=g[0],x=g[1],b=g[2],w=x-b-s*v;(v||w)&&Bhe(t,a)&&(h+=w,m+=v);var k=a.parentNode;a=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(c=!0),c},i2=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},XX=function(t){return[t.deltaX,t.deltaY]},QX=function(t){return t&&"current"in t?t.current:t},Gtt=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Ktt=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Wtt=0,vg=[];function Ytt(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),i=S.useState(Wtt++)[0],s=S.useState(jhe)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=vve([t.lockRef.current],(t.shards||[]).map(QX),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var w=i2(x),k=n.current,N="deltaX"in x?x.deltaX:k[0]-w[0],O="deltaY"in x?x.deltaY:k[1]-w[1],D,_=x.target,F=Math.abs(N)>Math.abs(O)?"h":"v";if("touches"in x&&F==="h"&&_.type==="range")return!1;var z=window.getSelection(),L=z&&z.anchorNode,$=L?L===_||L.contains(_):!1;if($)return!1;var G=JX(F,_);if(!G)return!0;if(G?D=F:(D=F==="v"?"h":"v",G=JX(F,_)),!G)return!1;if(!r.current&&"changedTouches"in x&&(N||O)&&(r.current=D),!D)return!0;var V=r.current||D;return qtt(V,b,x,V==="h"?N:O)},[]),l=S.useCallback(function(x){var b=x;if(!(!vg.length||vg[vg.length-1]!==s)){var w="deltaY"in b?XX(b):i2(b),k=e.current.filter(function(D){return D.name===b.type&&(D.target===b.target||b.target===D.shadowParent)&&Gtt(D.delta,w)})[0];if(k&&k.should){b.cancelable&&b.preventDefault();return}if(!k){var N=(o.current.shards||[]).map(QX).filter(Boolean).filter(function(D){return D.contains(b.target)}),O=N.length>0?a(b,N[0]):!o.current.noIsolation;O&&b.cancelable&&b.preventDefault()}}},[]),c=S.useCallback(function(x,b,w,k){var N={name:x,delta:b,target:w,should:k,shadowParent:Jtt(w)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(O){return O!==N})},1)},[]),d=S.useCallback(function(x){n.current=i2(x),r.current=void 0},[]),h=S.useCallback(function(x){c(x.type,XX(x),x.target,a(x,t.lockRef.current))},[]),m=S.useCallback(function(x){c(x.type,i2(x),x.target,a(x,t.lockRef.current))},[]);S.useEffect(function(){return vg.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,xg),document.addEventListener("touchmove",l,xg),document.addEventListener("touchstart",d,xg),function(){vg=vg.filter(function(x){return x!==s}),document.removeEventListener("wheel",l,xg),document.removeEventListener("touchmove",l,xg),document.removeEventListener("touchstart",d,xg)}},[]);var g=t.removeScrollBar,v=t.inert;return S.createElement(S.Fragment,null,v?S.createElement(s,{styles:Ktt(i)}):null,g?S.createElement(Btt,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Jtt(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Xtt=Ttt(Lhe,Ytt);var aB=S.forwardRef(function(t,e){return S.createElement(mP,_c({},t,{ref:e,sideCar:Xtt}))});aB.classNames=mP.classNames;var Qtt=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},bg=new WeakMap,s2=new WeakMap,o2={},j4=0,Fhe=function(t){return t&&(t.host||Fhe(t.parentNode))},Ztt=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Fhe(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ent=function(t,e,n,r){var i=Ztt(e,Array.isArray(t)?t:[t]);o2[n]||(o2[n]=new WeakMap);var s=o2[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(a.has(m))d(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",x=(bg.get(m)||0)+1,b=(s.get(m)||0)+1;bg.set(m,x),s.set(m,b),o.push(m),x===1&&v&&s2.set(m,!0),b===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(e),a.clear(),j4++,function(){o.forEach(function(h){var m=bg.get(h)-1,g=s.get(h)-1;bg.set(h,m),s.set(h,g),m||(s2.has(h)||h.removeAttribute(r),s2.delete(h)),g||h.removeAttribute(n)}),j4--,j4||(bg=new WeakMap,bg=new WeakMap,s2=new WeakMap,o2={})}},$he=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Qtt(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),ent(r,i,n,"aria-hidden")):function(){return null}};function tnt(t){const e=nnt(t),n=S.forwardRef((r,i)=>{const{children:s,...o}=r,a=S.Children.toArray(s),l=a.find(int);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function nnt(t){const e=S.forwardRef((n,r)=>{const{children:i,...s}=n;if(S.isValidElement(i)){const o=ont(i),a=snt(s,i.props);return i.type!==S.Fragment&&(a.ref=r?uv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var rnt=Symbol("radix.slottable");function int(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===rnt}function snt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function ont(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var gP="Dialog",[zhe]=o0(gP),[ant,sc]=zhe(gP),Vhe=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=S.useRef(null),l=S.useRef(null),[c,d]=Lx({prop:r,defaultProp:i??!1,onChange:s,caller:gP});return u.jsx(ant,{scope:e,triggerRef:a,contentRef:l,contentId:yd(),titleId:yd(),descriptionId:yd(),open:c,onOpenChange:d,onOpenToggle:S.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};Vhe.displayName=gP;var Hhe="DialogTrigger",lnt=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sc(Hhe,n),s=Or(e,i.triggerRef);return u.jsx(jn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":uB(i.open),...r,ref:s,onClick:yn(t.onClick,i.onOpenToggle)})});lnt.displayName=Hhe;var lB="DialogPortal",[cnt,qhe]=zhe(lB,{forceMount:void 0}),Ghe=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=sc(lB,e);return u.jsx(cnt,{scope:e,forceMount:n,children:S.Children.map(r,o=>u.jsx(l0,{present:n||s.open,children:u.jsx(lC,{asChild:!0,container:i,children:o})}))})};Ghe.displayName=lB;var zk="DialogOverlay",Khe=S.forwardRef((t,e)=>{const n=qhe(zk,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=sc(zk,t.__scopeDialog);return s.modal?u.jsx(l0,{present:r||s.open,children:u.jsx(dnt,{...i,ref:e})}):null});Khe.displayName=zk;var unt=tnt("DialogOverlay.RemoveScroll"),dnt=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sc(zk,n);return u.jsx(aB,{as:unt,allowPinchZoom:!0,shards:[i.contentRef],children:u.jsx(jn.div,{"data-state":uB(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Qm="DialogContent",Whe=S.forwardRef((t,e)=>{const n=qhe(Qm,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=sc(Qm,t.__scopeDialog);return u.jsx(l0,{present:r||s.open,children:s.modal?u.jsx(fnt,{...i,ref:e}):u.jsx(hnt,{...i,ref:e})})});Whe.displayName=Qm;var fnt=S.forwardRef((t,e)=>{const n=sc(Qm,t.__scopeDialog),r=S.useRef(null),i=Or(e,n.contentRef,r);return S.useEffect(()=>{const s=r.current;if(s)return $he(s)},[]),u.jsx(Yhe,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:yn(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:yn(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:yn(t.onFocusOutside,s=>s.preventDefault())})}),hnt=S.forwardRef((t,e)=>{const n=sc(Qm,t.__scopeDialog),r=S.useRef(!1),i=S.useRef(!1);return u.jsx(Yhe,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Yhe=S.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=sc(Qm,n),l=S.useRef(null),c=Or(e,l);return Ohe(),u.jsxs(u.Fragment,{children:[u.jsx(oB,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:u.jsx(nC,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":uB(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(pnt,{titleId:a.titleId}),u.jsx(gnt,{contentRef:l,descriptionId:a.descriptionId})]})]})}),cB="DialogTitle",Jhe=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sc(cB,n);return u.jsx(jn.h2,{id:i.titleId,...r,ref:e})});Jhe.displayName=cB;var Xhe="DialogDescription",Qhe=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sc(Xhe,n);return u.jsx(jn.p,{id:i.descriptionId,...r,ref:e})});Qhe.displayName=Xhe;var Zhe="DialogClose",epe=S.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=sc(Zhe,n);return u.jsx(jn.button,{type:"button",...r,ref:e,onClick:yn(t.onClick,()=>i.onOpenChange(!1))})});epe.displayName=Zhe;function uB(t){return t?"open":"closed"}var tpe="DialogTitleWarning",[Ryt,npe]=LIe(tpe,{contentName:Qm,titleName:cB,docsSlug:"dialog"}),pnt=({titleId:t})=>{const e=npe(tpe),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},mnt="DialogDescriptionWarning",gnt=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${npe(mnt).contentName}}.`;return S.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},ynt=Vhe,xnt=Ghe,rpe=Khe,ipe=Whe,spe=Jhe,ope=Qhe,vnt=epe;const Jd=ynt,bnt=xnt,ape=S.forwardRef(({className:t,...e},n)=>u.jsx(rpe,{ref:n,className:dt("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));ape.displayName=rpe.displayName;const au=S.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(bnt,{children:[u.jsx(ape,{}),u.jsxs(ipe,{ref:r,className:dt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-700 bg-slate-900 p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl",t),...n,children:[e,u.jsxs(vnt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(Ex,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));au.displayName=ipe.displayName;const lu=({className:t,...e})=>u.jsx("div",{className:dt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});lu.displayName="DialogHeader";const Xd=({className:t,...e})=>u.jsx("div",{className:dt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Xd.displayName="DialogFooter";const cu=S.forwardRef(({className:t,...e},n)=>u.jsx(spe,{ref:n,className:dt("text-lg font-semibold leading-none tracking-tight text-white",t),...e}));cu.displayName=spe.displayName;const Qd=S.forwardRef(({className:t,...e},n)=>u.jsx(ope,{ref:n,className:dt("text-sm text-muted-foreground",t),...e}));Qd.displayName=ope.displayName;var wnt=Symbol.for("react.lazy"),Vk=kN[" use ".trim().toString()];function Ent(t){return typeof t=="object"&&t!==null&&"then"in t}function lpe(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===wnt&&"_payload"in t&&Ent(t._payload)}function Snt(t){const e=Tnt(t),n=S.forwardRef((r,i)=>{let{children:s,...o}=r;lpe(s)&&typeof Vk=="function"&&(s=Vk(s._payload));const a=S.Children.toArray(s),l=a.find(Nnt);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var Ant=Snt("Slot");function Tnt(t){const e=S.forwardRef((n,r)=>{let{children:i,...s}=n;if(lpe(i)&&typeof Vk=="function"&&(i=Vk(i._payload)),S.isValidElement(i)){const o=Pnt(i),a=Cnt(s,i.props);return i.type!==S.Fragment&&(a.ref=r?uv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var knt=Symbol("radix.slottable");function Nnt(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===knt}function Cnt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Pnt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const ZX=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,eQ=Mn,cpe=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return eQ(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],h=s==null?void 0:s[c];if(d===null)return null;const m=ZX(d)||ZX(h);return i[c][m]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,m]=d;return m===void 0||(c[h]=m),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(v=>{let[x,b]=v;return Array.isArray(b)?b.includes({...s,...a}[x]):{...s,...a}[x]===b})?[...c,h,m]:c},[]);return eQ(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},_nt=cpe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-slate-700 bg-transparent hover:bg-slate-800 hover:text-slate-100",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-slate-800 hover:text-slate-100",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow hover:bg-emerald-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Tr=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Ant:"button";return u.jsx(o,{className:dt(_nt({variant:e,size:n,className:t})),ref:s,...i})});Tr.displayName="Button";const Int=({isOpen:t,onClose:e,onSubmit:n})=>{const[r,i]=S.useState(""),[s,o]=S.useState(!1),a=async c=>{o(!0),await n(c?r.trim():""),o(!1),l()},l=()=>{i(""),e()};return u.jsx(Jd,{open:t,onOpenChange:c=>!c&&l(),children:u.jsxs(au,{className:"sm:max-w-[400px] bg-[#14151a] border-[#232328]",children:[u.jsxs(lu,{children:[u.jsxs(cu,{className:"flex items-center gap-2 text-white",children:[u.jsx(WD,{size:18,className:"text-[#747580]"}),"What went wrong?"]}),u.jsx(Qd,{className:"text-[#747580]",children:"Help us understand - your feedback is optional but appreciated."})]}),u.jsx("div",{className:"space-y-2 mt-2",children:u.jsx("textarea",{value:r,onChange:c=>i(c.target.value),placeholder:"What could have been better? (optional)",className:"w-full h-24 px-4 py-3 rounded-lg bg-[#1a1b21] border border-[#232328] text-white text-sm placeholder:text-[#747580] resize-none focus:outline-none focus:border-[#E7FE55]/30 focus:ring-1 focus:ring-[#E7FE55]/20",autoFocus:!0})}),u.jsxs(Xd,{className:"mt-4 gap-2",children:[u.jsx(Tr,{variant:"outline",onClick:()=>a(!1),disabled:s,className:"border-[#232328] text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21]",children:"Skip"}),u.jsx(Tr,{onClick:()=>a(!0),disabled:s,className:"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:s?"Sending...":"Submit"})]})]})})};class Rnt{async submitGeneralFeedback(e){const n=ds();if(!n)return console.error("[FeedbackService] Supabase client not initialized"),{success:!1,error:"Supabase not connected"};try{const{data:{user:r}}=await n.auth.getUser();if(!r)return{success:!1,error:"User not authenticated"};const{error:i}=await n.from("feedback").insert({user_id:r.id,type:"general",category:e.category,message:e.message,metadata:e.metadata||{}});return i?(console.error("[FeedbackService] Insert error:",i),{success:!1,error:i.message}):(console.log("[FeedbackService] General feedback submitted successfully"),{success:!0})}catch(r){return console.error("[FeedbackService] Unexpected error:",r),{success:!1,error:"Failed to submit feedback"}}}async submitMessageRating(e){const n=ds();if(!n)return console.error("[FeedbackService] Supabase client not initialized"),{success:!1,error:"Supabase not connected"};try{const{data:{user:r}}=await n.auth.getUser();if(!r)return{success:!1,error:"User not authenticated"};const{error:i}=await n.from("feedback").insert({user_id:r.id,type:"message_rating",rating:e.rating,message:e.feedback||null,message_id:e.messageId,conversation_id:e.conversationId,metadata:{}});return i?(console.error("[FeedbackService] Insert error:",i),{success:!1,error:i.message}):(console.log("[FeedbackService] Message rating submitted:",e.rating),{success:!0})}catch(r){return console.error("[FeedbackService] Unexpected error:",r),{success:!1,error:"Failed to submit rating"}}}getSetupSQL(){return`
-- Feedback table for storing all user feedback
CREATE TABLE IF NOT EXISTS public.feedback (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  type TEXT NOT NULL CHECK (type IN ('general', 'message_rating')),
  category TEXT, -- For general: 'suggestion', 'bug', 'other'
  rating TEXT, -- For message_rating: 'positive', 'negative'
  message TEXT,
  message_id TEXT, -- For message_rating
  conversation_id TEXT, -- For message_rating
  metadata JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE public.feedback ENABLE ROW LEVEL SECURITY;

-- Allow authenticated users to insert their own feedback
CREATE POLICY "Users can insert own feedback" ON public.feedback
  FOR INSERT TO authenticated
  WITH CHECK (auth.uid() = user_id);

-- Allow users to view their own feedback
CREATE POLICY "Users can view own feedback" ON public.feedback
  FOR SELECT TO authenticated
  USING (auth.uid() = user_id);
`}}const vj=new Rnt,Vx=S.forwardRef(({className:t,type:e,...n},r)=>u.jsx("input",{type:e,className:dt("flex h-10 w-full rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-500/50 focus-visible:border-slate-500/50 disabled:cursor-not-allowed disabled:opacity-50 transition-colors",t),ref:r,...n}));Vx.displayName="Input";const Ont=({messages:t,inputMessage:e,setInputMessage:n,handleSendMessage:r,isAiProcessing:i,aiStatus:s,scrollRef:o,isVaultUnlocked:a,password:l,setPassword:c,unlockVault:d,hasVault:h,onNavigate:m,conversationId:g})=>{const v=S.useRef(null),[x,b]=S.useState(new Map),[w,k]=S.useState(null);S.useSyncExternalStore(An.subscribe.bind(An),An.getSnapshot.bind(An));const N=An.isComponentConfigValid("operator"),O=async(F,z)=>{if(x.get(F)===z){b($=>{const G=new Map($);return G.delete(F),G});return}z==="negative"?k(F):(b($=>new Map($).set(F,z)),await vj.submitMessageRating({messageId:F,conversationId:g||"unknown",rating:"positive"}))},D=async F=>{w&&(b(z=>new Map(z).set(w,"negative")),await vj.submitMessageRating({messageId:w,conversationId:g||"unknown",rating:"negative",feedback:F}),k(null))},_=S.useMemo(()=>t.some(F=>F.role==="model"&&F.toolResults&&F.toolResults.length>0&&F.toolResults.some(z=>z.type!=="error")),[t]);return S.useEffect(()=>{!i&&a&&v.current&&v.current.focus()},[i,a]),S.useEffect(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[t,o]),!N&&h&&a?u.jsx(gt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsxs("div",{className:"max-w-sm w-full mx-auto space-y-5 p-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx(gt.div,{className:"w-14 h-14 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",animate:{scale:[1,1.03,1]},transition:{duration:2,repeat:1/0},children:u.jsx(H1,{size:28,className:"text-[#E7FE55]"})}),u.jsx("h2",{className:"text-lg font-semibold text-white tracking-tight",children:"API Key Required"}),u.jsx("p",{className:"text-[#747580] mt-2 text-sm",children:"Configure an API key to use Vault Operator."})]}),u.jsx(gt.div,{animate:{boxShadow:["0 0 10px rgba(231, 254, 85, 0.3)","0 0 25px rgba(231, 254, 85, 0.5)","0 0 10px rgba(231, 254, 85, 0.3)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"rounded-lg",children:u.jsxs(Tr,{onClick:()=>m==null?void 0:m(be.CONFIGURATION),className:"w-full bg-[#E7FE55] hover:bg-[#f0ff7a] text-black font-medium",size:"lg",children:[u.jsx(ly,{size:18}),"Go to Configuration"]})})]})}):!a&&h?u.jsx(gt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx(gt.div,{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:u.jsx(Vl,{size:32,className:"text-[#E7FE55]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Unlock Vault Operator"}),u.jsx("p",{className:"text-[#747580] mt-2 text-sm",children:"Enter your password to start using Vault Operator."})]}),u.jsxs(Zs,{className:"p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em] mb-2",children:"Password"}),u.jsx(Vx,{type:"password",value:l,onChange:F=>c(F.target.value),placeholder:"Enter password...",onKeyDown:F=>F.key==="Enter"&&d(),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30",autoFocus:!0})]}),u.jsxs(Tr,{onClick:d,className:"w-full",size:"lg",children:[u.jsx(bre,{size:18})," Unlock Vault Operator"]})]}),u.jsx("p",{className:"text-center text-[11px] text-[#747580]",children:"This is the same password used to unlock your Vault."})]})}):h?u.jsxs("div",{className:"flex h-[calc(100vh-9rem)] gap-6",children:[u.jsxs("div",{className:dt("flex-1 flex flex-col bg-transparent rounded overflow-hidden relative min-w-0",_&&"lg:pr-2"),children:[u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-6",ref:o,children:[u.jsxs(Ei,{children:[t.length===0&&u.jsxs(gt.div,{className:"flex flex-col items-center justify-center h-full",initial:{opacity:0},animate:{opacity:1},children:[u.jsx(Zb,{size:48,className:"mb-4 text-[#E7FE55] opacity-60"}),u.jsx("p",{className:"text-sm font-semibold text-white",children:"Vault Operator Ready"}),u.jsx("p",{className:"text-[11px] text-[#747580] mb-2",children:"Ask me to check balances, swap tokens, or schedule automations."}),u.jsx(ctt,{onSuggestionClick:F=>{r(F)}})]}),t.map((F,z)=>u.jsx(gt.div,{className:dt("flex",F.role==="user"?"justify-end":"justify-start"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:z*.05},children:u.jsxs("div",{className:dt("flex gap-4 group",_?"max-w-[85%]":"max-w-[90%]",F.role==="user"?"flex-row-reverse":"flex-row"),children:[u.jsx("div",{className:dt("w-9 h-9 rounded-full flex items-center justify-center flex-shrink-0 border",F.role==="user"?"bg-[#9b87f5]/10 border-[#9b87f5]/20":"bg-[#E7FE55]/10 border-[#E7FE55]/20"),children:F.role==="user"?u.jsx(jke,{size:18,className:"text-[#9b87f5]"}):u.jsx(Zb,{size:18,className:"text-[#E7FE55]"})}),u.jsxs("div",{className:dt("flex flex-col",F.role==="user"?"items-end":"items-start"),children:[u.jsxs("div",{className:dt("px-4 py-3 rounded-lg bg-[#1a1b21] text-[#e4e5e9] border border-[#232328]",F.role==="user"?"rounded-tr-sm":"rounded-tl-sm"),children:[F.toolResults&&F.toolResults.length>0&&u.jsx("div",{className:"mb-4 space-y-3 w-full",children:F.toolResults.map((L,$)=>u.jsx("div",{children:L.structuredData?u.jsx(att,{data:L.structuredData,onSendMessage:r}):u.jsxs("div",{className:dt("text-[11px] p-3 rounded border",L.type==="success"?"bg-[#34d399]/10 border-[#34d399]/30 text-[#34d399]":L.type==="error"?"bg-red-500/10 border-red-500/30 text-red-400":"bg-[#60a5fa]/10 border-[#60a5fa]/30 text-[#60a5fa]"),children:[u.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[L.type==="success"?u.jsx(Mm,{size:14}):L.type==="error"?u.jsx(Ii,{size:14}):u.jsx(nv,{size:14}),L.title]}),u.jsx("div",{className:"whitespace-pre-wrap font-mono opacity-90",children:L.details}),L.tx&&u.jsxs("div",{className:"mt-2 pt-2 border-t border-white/10 text-[10px] font-mono opacity-70 truncate",children:["TX: ",L.tx]})]})},$))}),u.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:u.jsx(bQe,{remarkPlugins:[Let],components:{a:({href:L,children:$})=>{if(L!=null&&L.startsWith("nav://")){const G=L.replace("nav://",""),U={DEALER_CONFIG:be.DEALER_CONFIG,DEALER_DASHBOARD:be.DEALER_DASHBOARD,DEALER_THINKING:be.DEALER_THINKING,VAULT_DEALER:be.VAULT_DEALER,DASHBOARD:be.DASHBOARD,VAULT:be.VAULT,SCHEDULER:be.SCHEDULER}[G];return U&&m?u.jsxs(Tr,{onClick:A=>{A.preventDefault(),A.stopPropagation(),m(U)},className:"mt-3 inline-flex",children:[u.jsx(ly,{size:16}),u.jsx("span",{children:$}),u.jsx(nE,{size:14})]}):u.jsx("span",{className:"text-indigo-400",children:$})}return u.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 underline",children:$})},pre:({children:L})=>u.jsx("pre",{className:"overflow-x-auto overflow-y-auto max-h-[400px] custom-scrollbar bg-[#0f1015] rounded border border-[#232328] p-4 my-4",children:L}),code:({node:L,inline:$,className:G,children:V,...U})=>$?u.jsx("code",{className:"bg-[#1a1b21] px-1.5 py-0.5 rounded text-sm text-[#E7FE55] font-mono border border-[#232328]",...U,children:V}):u.jsx("code",{className:`${G} text-sm`,...U,children:V})},children:F.content})})]}),u.jsxs("div",{className:"flex items-center justify-between w-full mt-1.5 px-1",children:[u.jsx("span",{className:"text-[10px] text-[#747580]",children:new Date(F.timestamp).toLocaleTimeString()}),F.role==="model"&&u.jsxs("div",{className:dt("flex items-center gap-1 transition-opacity",x.has(F.id)?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[u.jsx("button",{onClick:()=>O(F.id,"positive"),className:dt("p-1 rounded transition-colors",x.get(F.id)==="positive"?"text-[#E7FE55]":"text-[#747580] hover:text-[#E7FE55] hover:bg-[#E7FE55]/10"),title:"Good response",children:u.jsx(Sre,{size:14})}),u.jsx("button",{onClick:()=>O(F.id,"negative"),className:dt("p-1 rounded transition-colors",x.get(F.id)==="negative"?"text-red-400":"text-[#747580] hover:text-red-400 hover:bg-red-400/10"),title:"Bad response",children:u.jsx(WD,{size:14})})]})]})]})]})},F.id))]}),u.jsx(Ei,{children:i&&u.jsx(gt.div,{className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:u.jsxs("div",{className:"flex gap-4 max-w-[80%]",children:[u.jsx(gt.div,{className:"w-9 h-9 rounded-full bg-[#E7FE55]/10 border border-[#E7FE55]/20 flex items-center justify-center flex-shrink-0",animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:u.jsx(Zb,{size:18,className:"text-[#E7FE55]"})}),u.jsxs("div",{className:"bg-[#1a1b21] px-4 py-3 rounded-lg rounded-tl-sm border border-[#232328] flex items-center gap-3",children:[u.jsxs("div",{className:"flex space-x-1",children:[u.jsx(gt.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:0}}),u.jsx(gt.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.15}}),u.jsx(gt.div,{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full",animate:{y:[0,-6,0]},transition:{duration:.5,repeat:1/0,delay:.3}})]}),u.jsx("span",{className:"text-[11px] text-[#E7FE55] font-medium",children:s})]})]})})})]}),u.jsxs("div",{className:"p-4 bg-transparent z-10 box-border",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Vx,{ref:v,type:"text",value:e,onChange:F=>n(F.target.value),onKeyDown:F=>F.key==="Enter"&&!i&&a&&r(),placeholder:"Ask Vault Operator to swap tokens, check prices, or schedule a task...",className:"pl-5 pr-14 py-5 text-sm bg-[#1a1b21] border-[#232328] focus-visible:ring-1 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30 placeholder:text-[#747580]",disabled:i}),u.jsx(Tr,{onClick:()=>r(),disabled:!e.trim()||i,size:"icon",className:"absolute right-2 top-2 bottom-2 h-auto bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:i?u.jsx(fr,{size:18,className:"animate-spin"}):u.jsx(KD,{size:18})})]}),u.jsx("p",{className:"text-center mt-3 text-[10px] text-[#747580] tracking-wide",children:"Vault Operator can make mistakes. Always verify transactions."})]})]}),u.jsx(Ei,{children:_&&u.jsx(gt.div,{className:"hidden lg:block w-64 xl:w-72 h-full flex-shrink-0",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},children:u.jsx(Det,{messages:t})})}),u.jsx(Int,{isOpen:w!==null,onClose:()=>k(null),onSubmit:D})]}):u.jsx(gt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:u.jsx(Zb,{size:32,className:"text-[#747580]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),u.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a vault before using Vault Operator. Go to the ",u.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallets."]})]})})},Mnt=cpe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-red-500/20 text-red-400 border-red-500/30",outline:"text-foreground border-slate-600",success:"border-transparent bg-emerald-500/20 text-emerald-400 border-emerald-500/30",warning:"border-transparent bg-yellow-500/20 text-yellow-400 border-yellow-500/30",info:"border-transparent bg-blue-500/20 text-blue-400 border-blue-500/30",purple:"border-transparent bg-purple-500/20 text-purple-400 border-purple-500/30"}},defaultVariants:{variant:"default"}}),Gi=S.forwardRef(({className:t,variant:e,...n},r)=>u.jsx("div",{ref:r,className:dt(Mnt({variant:e}),t),...n}));Gi.displayName="Badge";const Lnt=({scheduledTasks:t,setScheduledTasks:e,addNotification:n})=>{const r=t.filter(a=>a.status==="active"||a.status==="executing"),i=t.filter(a=>a.status==="completed"||a.status==="failed").sort((a,l)=>(l.lastExecuted||0)-(a.lastExecuted||0)),s=()=>{window.confirm("Clear all task history?")&&(e(a=>{const l=a.filter(c=>c.status==="active"||c.status==="executing");return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(l)),l}),n("Task history cleared"))},o=a=>{window.confirm("Cancel this task?")&&(e(l=>{const c=l.map(d=>d.id===a?{...d,status:"failed",result:"Cancelled by user"}:d);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(c)),c}),n(`Task #${a.slice(-4)} cancelled`))};return u.jsx(gt.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(fr,{size:20,className:"text-emerald-400"})," Active Tasks"]}),u.jsx(Ei,{children:r.length===0?u.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},children:u.jsxs(Zs,{className:"p-8 text-center border-dashed border-2 border-slate-800",children:[u.jsx($D,{size:48,className:"mx-auto text-slate-700 mb-4"}),u.jsx("p",{className:"text-slate-500",children:"No active tasks."}),u.jsx("p",{className:"text-xs text-slate-600 mt-2",children:'Ask the AI to "schedule a swap in 10 mins" or "alert me when BTC > 100k"'})]})}):r.map((a,l)=>{const c=JSON.parse(a.params||"{}");let d=0,h=0,m=0;if(a.type==="HL_ORDER"&&c.price&&c.size){const{price:g,size:v,leverage:x=1,side:b,takeProfit:w,stopLoss:k}=c,N=b==="B";w&&(d=(N?w-g:g-w)*v),k&&(h=(N?g-k:k-g)*v);const O=1/x-.005;m=N?g*(1-O):g*(1+O)}return u.jsx(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:l*.1},children:u.jsxs(Zs,{className:"p-5 border-l-4 border-l-emerald-500 relative overflow-hidden",children:[a.status==="executing"&&u.jsx("div",{className:"absolute top-2 right-2",children:u.jsxs("span",{className:"relative flex h-3 w-3",children:[u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),u.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]})}),u.jsxs("div",{className:"flex justify-between items-start mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Gi,{variant:a.type==="SWAP"||a.type==="TRANSFER"?"info":a.type==="HL_ORDER"?"purple":a.type==="ALERT"?"warning":"secondary",children:a.type}),u.jsxs("span",{className:"text-xs font-mono text-slate-500",children:["#",a.id.slice(-4)]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"text-xs text-slate-400",children:["Created: ",new Date(a.createdAt).toLocaleTimeString()]}),a.status!=="executing"&&u.jsxs(Tr,{variant:"ghost",size:"sm",onClick:()=>o(a.id),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:[u.jsx(_h,{size:12})," Cancel"]})]})]}),u.jsxs("div",{className:"mb-3 space-y-2",children:[a.type==="SWAP"&&u.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800",children:[u.jsx("div",{className:"text-xs text-slate-500 mb-1 font-bold uppercase",children:"Swap Details"}),u.jsxs("div",{className:"text-sm text-white font-medium",children:[c.amount," ",c.inputToken,"  ",c.outputToken]})]}),a.type==="HL_ORDER"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-purple-900/30 space-y-2",children:[u.jsx("div",{className:"text-xs text-slate-500 mb-2 font-bold uppercase",children:"Hyperliquid Order"}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Asset:"}),u.jsx("span",{className:"ml-2 text-white font-bold",children:c.coin})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Direction:"}),u.jsx("span",{className:dt("ml-2 font-bold",c.side==="B"?"text-emerald-400":"text-red-400"),children:c.side==="B"?"LONG":"SHORT"})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Size:"}),u.jsx("span",{className:"ml-2 text-white font-medium",children:c.size})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Type:"}),u.jsx("span",{className:"ml-2 text-white font-medium uppercase",children:c.orderType})]}),c.price&&u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Price:"}),u.jsxs("span",{className:"ml-2 text-white font-medium",children:["$",c.price.toLocaleString()]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Leverage:"}),u.jsxs("span",{className:"ml-2 text-yellow-400 font-bold",children:[c.leverage,"x"]})]})]}),(c.stopLoss||c.takeProfit)&&u.jsxs("div",{className:"pt-2 border-t border-slate-800 grid grid-cols-2 gap-2 text-xs",children:[c.stopLoss&&u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Stop Loss:"}),u.jsxs("span",{className:"ml-2 text-red-400 font-medium",children:["$",c.stopLoss.toLocaleString()]})]}),c.takeProfit&&u.jsxs("div",{children:[u.jsx("span",{className:"text-slate-500",children:"Take Profit:"}),u.jsxs("span",{className:"ml-2 text-emerald-400 font-medium",children:["$",c.takeProfit.toLocaleString()]})]})]})]}),c.price&&u.jsxs("div",{className:"bg-gradient-to-br from-slate-950/80 to-purple-950/20 p-3 rounded-lg border border-purple-900/40 space-y-2",children:[u.jsxs("div",{className:"text-xs text-purple-300 mb-2 font-bold uppercase flex items-center gap-2",children:[u.jsx(on,{size:12})," Risk Analysis"]}),u.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[c.takeProfit&&u.jsxs("div",{className:"bg-emerald-900/20 p-2 rounded border border-emerald-800/30",children:[u.jsx("div",{className:"text-emerald-500 text-[10px] mb-1",children:"MAX PROFIT"}),u.jsxs("div",{className:"text-emerald-400 font-bold",children:["$",d.toFixed(2)]})]}),c.stopLoss&&u.jsxs("div",{className:"bg-red-900/20 p-2 rounded border border-red-800/30",children:[u.jsx("div",{className:"text-red-500 text-[10px] mb-1",children:"MAX LOSS"}),u.jsxs("div",{className:"text-red-400 font-bold",children:["-$",h.toFixed(2)]})]}),u.jsxs("div",{className:"bg-orange-900/20 p-2 rounded border border-orange-800/30",children:[u.jsx("div",{className:"text-orange-500 text-[10px] mb-1",children:"LIQUIDATION"}),u.jsxs("div",{className:"text-orange-400 font-bold",children:["$",m.toFixed(2)]})]})]})]})]})]}),u.jsxs("div",{className:"bg-slate-950/50 p-3 rounded-lg border border-slate-800 text-xs",children:[u.jsx("div",{className:"flex items-center gap-2 mb-2 text-slate-500 font-bold uppercase tracking-wider",children:"Trigger Condition"}),a.condition?u.jsx("div",{className:"space-y-1",children:u.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-medium",children:[u.jsx(on,{size:14}),a.condition.indicator.toUpperCase()," (",a.condition.symbol,") ",a.condition.operator," ",a.condition.value]})}):u.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[u.jsx(fr,{size:14}),"Time: ",new Date(a.executeAt).toLocaleString()]})]})]})},a.id)})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(Mm,{size:20,className:"text-slate-400"})," History"]}),u.jsxs(Tr,{variant:"ghost",size:"sm",onClick:s,className:"text-slate-500 hover:text-white",children:[u.jsx(_h,{size:14})," Clear History"]})]}),u.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto custom-scrollbar pr-2",children:i.length===0?u.jsx("div",{className:"text-center py-8 text-slate-600 text-sm",children:"No history available."}):i.map((a,l)=>u.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:l*.05},children:u.jsxs(Zs,{className:dt("p-4",a.status==="completed"?"opacity-70 hover:opacity-100 transition-opacity":"border-red-900/30 bg-red-900/10"),children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[a.status==="completed"?u.jsx(Mm,{size:16,className:"text-emerald-500"}):u.jsx(Ii,{size:16,className:"text-red-500"}),u.jsx(Gi,{variant:a.status==="completed"?"success":"destructive",children:a.status.toUpperCase()})]}),u.jsx("span",{className:"text-xs text-slate-500",children:a.lastExecuted?new Date(a.lastExecuted).toLocaleString():"Unknown"})]}),u.jsxs("div",{className:"text-xs text-slate-300 mb-2",children:[a.type," - ",a.condition?"Condition":"Time"," Trigger"]}),u.jsx("div",{className:"bg-black/30 p-2 rounded text-[10px] font-mono text-slate-400 break-all",children:a.result})]})},a.id))})]})]})})},jnt=5,Dnt="dealer_cycle_summary",Gb={recentCycles:[],aiSummary:null,lastSummaryTime:0,isGenerating:!1};class Bnt{constructor(){this.state=new Map,this.listeners=new Map,this.initialized=new Map,this.state.set("hyperliquid",{...Gb}),this.state.set("polymarket",{...Gb}),this.listeners.set("hyperliquid",new Set),this.listeners.set("polymarket",new Set),this.initialized.set("hyperliquid",!1),this.initialized.set("polymarket",!1)}getStorageKey(e){return Ae.getUserKey(`${Dnt}_${e}`)}async loadState(e){var n;if(!this.initialized.get(e)){try{const r=this.getStorageKey(e),i=await Ae.getItem(r);if(i){const s=JSON.parse(i);this.state.set(e,{...Gb,...s,isGenerating:!1}),console.log(`[CycleSummaryStore] Loaded ${e} state: ${((n=s.recentCycles)==null?void 0:n.length)||0} cycles`)}}catch(r){console.warn(`[CycleSummaryStore] Failed to load ${e} state:`,r)}this.initialized.set(e,!0)}}async saveState(e){try{const n=this.getStorageKey(e),r=this.state.get(e);if(r){const{isGenerating:i,...s}=r;await Ae.setItem(n,JSON.stringify(s))}}catch(n){console.warn(`[CycleSummaryStore] Failed to save ${e} state:`,n)}}getSnapshot(e){return this.state.get(e)||{...Gb}}subscribe(e,n){const r=this.listeners.get(e);return r&&r.add(n),()=>{r==null||r.delete(n)}}notify(e){const n=this.listeners.get(e);n==null||n.forEach(r=>r())}recordCycle(e,n){const r=this.state.get(e);if(!r)return;const i=r.recentCycles.length+1,o=[{...n,cycleNumber:i},...r.recentCycles].slice(0,jnt);this.state.set(e,{...r,recentCycles:o}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Recorded ${e} cycle #${i}: ${n.decisions.length} decisions`)}setGenerating(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,isGenerating:n}),this.notify(e))}setSummary(e,n){const r=this.state.get(e);r&&(this.state.set(e,{...r,aiSummary:n,lastSummaryTime:Date.now(),isGenerating:!1}),this.notify(e),this.saveState(e),console.log(`[CycleSummaryStore] Updated ${e} AI summary (${n.length} chars)`))}clear(e){this.state.set(e,{...Gb}),this.notify(e),this.saveState(e)}getContextForAI(e){const n=this.state.get(e);return!n||!n.aiSummary?null:n.aiSummary}getCyclesForSummary(e){const n=this.state.get(e);return(n==null?void 0:n.recentCycles)||[]}}const qc=new Bnt;let tQ=class{constructor(e,n,r){this.next=r,r&&(r.prev=this),this.prev=n,n&&(n.next=this),this.data=e}};class upe{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new tQ(e,this._tail),this._length===0&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new tQ(e,void 0,this._head),this._length===0&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(this._length!==0)return this._length--,this._length===0?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(e!==void 0)return this._next=e.next,this._current=e,e.data}}class Ey extends upe{constructor(e,n,r,i){if(super(),this.size=e,this.maintainHigh=n,this.maintainLow=r,this.maintainSum=i,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||typeof e!="number")throw"Size required and should be a number.";this._push=this.push,this.push=function(s){this.add(s),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}let Unt={};function Fnt(t){return Unt[t]}function $nt(t){let e=Fnt("precision");return e?parseFloat(t.toPrecision(e)):t}class Yt{constructor(e){this.format=e.format||$nt}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class tc extends Yt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){var i=new upe,s=0,o=1,a=yield,l;for(i.push(0);;)o<r?(o++,i.push(a),s=s+a):(s=s-i.shift()+a,l=s/r,i.push(a)),a=yield l});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!==void 0&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}tc.calculate=znt;function znt(t){Yt.reverseInputs(t);var e=new tc(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class Hx extends Yt{constructor(e){super(e);var n=e.period,r=e.values,i=2/(n+1),s;this.result=[],s=new tc({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}Hx.calculate=Vnt;function Vnt(t){Yt.reverseInputs(t);var e=new Hx(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class yP extends Yt{constructor(e){super(e);var n=e.period,r=e.values,i=1/n,s;this.result=[],s=new tc({period:n,values:[]});var o=(function*(){for(var a=yield,l;;)l!==void 0&&a!==void 0?(l=(a-l)*i+l,a=yield l):(a=yield,l=s.nextValue(a),l!==void 0&&(a=yield l))});this.generator=o(),this.generator.next(),this.generator.next(),r.forEach(a=>{var l=this.generator.next(a);l.value!=null&&this.result.push(this.format(l.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}yP.calculate=Hnt;function Hnt(t){Yt.reverseInputs(t);var e=new yP(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class Hk extends Yt{constructor(e){super(e);var n=e.SimpleMAOscillator?tc:Hx,r=e.SimpleMASignal?tc:Hx,i=new n({period:e.fastPeriod,values:[],format:l=>l}),s=new n({period:e.slowPeriod,values:[],format:l=>l}),o=new r({period:e.signalPeriod,values:[],format:l=>l}),a=this.format;this.result=[],this.generator=(function*(){for(var l=0,c,d,h,m,g,v;;){if(l<e.slowPeriod){c=yield,g=i.nextValue(c),v=s.nextValue(c),l++;continue}g&&v&&(d=g-v,h=o.nextValue(d)),m=d-h,c=yield{MACD:a(d),signal:h?a(h):void 0,histogram:isNaN(m)?void 0:a(m)},g=i.nextValue(c),v=s.nextValue(c)}})(),this.generator.next(),e.values.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){var n=this.generator.next(e).value;return n}}Hk.calculate=qnt;function qnt(t){Yt.reverseInputs(t);var e=new Hk(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class dB extends Yt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,d,h=o;for(o=yield;;)d=o-h,d=d>0?d:0,d>0&&(l=l+d),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+d)/s,h=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}dB.calculate=Gnt;function Gnt(t){Yt.reverseInputs(t);var e=new dB(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class fB extends Yt{constructor(e){super(e);let n=e.values,r=e.period,i=this.format;this.generator=(function*(s){var o=yield,a=1,l=0,c,d,h=o;for(o=yield;;)d=h-o,d=d>0?d:0,d>0&&(l=l+d),a<s?a++:c===void 0?c=l/s:c=(c*(s-1)+d)/s,h=o,c=c!==void 0?i(c):void 0,o=yield c})(r),this.generator.next(),this.result=[],n.forEach(s=>{var o=this.generator.next(s);o.value!==void 0&&this.result.push(o.value)})}nextValue(e){return this.generator.next(e).value}}fB.calculate=Knt;function Knt(t){Yt.reverseInputs(t);var e=new fB(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class qk extends Yt{constructor(e){super(e);var n=e.period,r=e.values,i=new dB({period:n,values:[]}),s=new fB({period:n,values:[]});this.generator=(function*(o){for(var a=yield,l,c,d,h;;)l=i.nextValue(a),c=s.nextValue(a),l!==void 0&&c!==void 0&&(c===0?h=100:l===0?h=0:(d=l/c,d=isNaN(d)?0:d,h=parseFloat((100-100/(1+d)).toFixed(2)))),a=yield h})(),this.generator.next(),this.result=[],r.forEach(o=>{var a=this.generator.next(o);a.value!==void 0&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}qk.calculate=Wnt;function Wnt(t){Yt.reverseInputs(t);var e=new qk(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class hB extends Yt{constructor(e){super(e);var n=e.period,r=e.values,i=new tc({period:n,values:[],format:s=>s});this.result=[],this.generator=(function*(){var s,o,a=new Ey(n);s=yield;for(var l;;){if(a.push(s),o=i.nextValue(s),o){let c=0;for(let d of a.iterator())c=c+Math.pow(d-o,2);l=Math.sqrt(c/n)}s=yield l}})(),this.generator.next(),r.forEach(s=>{var o=this.generator.next(s);o.value!=null&&this.result.push(this.format(o.value))})}nextValue(e){var n=this.generator.next(e);if(n.value!=null)return this.format(n.value)}}hB.calculate=Ynt;function Ynt(t){Yt.reverseInputs(t);var e=new hB(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class Gk extends Yt{constructor(e){super(e);var n=e.period,r=e.values,i=e.stdDev,s=this.format,o,a;this.result=[],o=new tc({period:n,values:[],format:l=>l}),a=new hB({period:n,values:[],format:l=>l}),this.generator=(function*(){var l,c,d,h;for(c=yield;;){if(d=o.nextValue(c),h=a.nextValue(c),d){let m=s(d),g=s(d+h*i),v=s(d-h*i),x=s((c-v)/(g-v));l={middle:m,upper:g,lower:v,pb:x}}c=yield l}})(),this.generator.next(),r.forEach(l=>{var c=this.generator.next(l);c.value!=null&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}Gk.calculate=Jnt;function Jnt(t){Yt.reverseInputs(t);var e=new Gk(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class N1 extends Yt{constructor(e){super(e),this.period=e.period,this.price=e.values;var n=(function*(r){for(var i=0,s=1,o=yield,a=0;;)s<r?(s++,i=i+o,a=void 0):s==r?(s++,i=i+o,a=i):a=a-a/r+o,o=yield a});this.generator=n(this.period),this.generator.next(),this.result=[],this.price.forEach(r=>{var i=this.generator.next(r);i.value!=null&&this.result.push(this.format(i.value))})}nextValue(e){var n=this.generator.next(e).value;if(n!=null)return this.format(n)}}N1.calculate=Xnt;function Xnt(t){Yt.reverseInputs(t);var e=new N1(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class pB extends Yt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(c>l&&c>0?c:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Yt.reverseInputs(e);var n=new pB(e).result;return e.reversedInput&&n.reverse(),Yt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class mB extends Yt{constructor(e){super(e);var n=e.low,r=e.high,i=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var s,o=yield,a;;){if(a){let l=o.high-a.high,c=a.low-o.low;s=i(l>c&&l>0?l:0)}a=o,o=yield s}})(),this.generator.next(),n.forEach((s,o)=>{var a=this.generator.next({high:r[o],low:n[o]});a.value!==void 0&&this.result.push(a.value)})}static calculate(e){Yt.reverseInputs(e);var n=new mB(e).result;return e.reversedInput&&n.reverse(),Yt.reverseInputs(e),n}nextValue(e){return this.generator.next(e).value}}class xP extends Yt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=this.format;if(n.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=(function*(){for(var o=yield,a,l;;)a===void 0&&(a=o.close,o=yield l),l=Math.max(o.high-o.low,isNaN(Math.abs(o.high-a))?0:Math.abs(o.high-a),isNaN(Math.abs(o.low-a))?0:Math.abs(o.low-a)),a=o.close,l!=null&&(l=s(l)),o=yield l})(),this.generator.next(),n.forEach((o,a)=>{var l=this.generator.next({high:r[a],low:n[a],close:i[a]});l.value!=null&&this.result.push(l.value)})}nextValue(e){return this.generator.next(e).value}}xP.calculate=Qnt;function Qnt(t){Yt.reverseInputs(t);var e=new xP(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class Kk extends Yt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format,a=new mB({high:[],low:[]}),l=new pB({high:[],low:[]}),c=new N1({period:s,values:[],format:v=>v}),d=new N1({period:s,values:[],format:v=>v}),h=new N1({period:s,values:[],format:v=>v}),m=new yP({period:s,values:[],format:v=>v}),g=new xP({low:[],high:[],close:[]});if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){for(var v=yield,x,b,w,k;;){let N=g.nextValue(v),O=a.nextValue(v),D=l.nextValue(v);if(N===void 0){v=yield;continue}let _=h.nextValue(N),F=c.nextValue(O),z=d.nextValue(D);if(_!=null&&F!=null&&z!=null){x=F*100/_,b=z*100/_;let L=Math.abs(x-b),$=x+b;w=L/$*100,k=m.nextValue(w)}v=yield{adx:k,pdi:x,mdi:b}}})(),this.generator.next(),n.forEach((v,x)=>{var b=this.generator.next({high:r[x],low:n[x],close:i[x]});b.value!=null&&b.value.adx!=null&&this.result.push({adx:o(b.value.adx),pdi:o(b.value.pdi),mdi:o(b.value.mdi)})})}nextValue(e){let n=this.generator.next(e).value;if(n!=null&&n.adx!=null)return{adx:this.format(n.adx),pdi:this.format(n.pdi),mdi:this.format(n.mdi)}}}Kk.calculate=Znt;function Znt(t){Yt.reverseInputs(t);var e=new Kk(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class Wk extends Yt{constructor(e){super(e);var n=e.low,r=e.high,i=e.close,s=e.period,o=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";var a=new xP({low:[],high:[],close:[]}),l=new yP({period:s,values:[],format:c=>c});this.result=[],this.generator=(function*(){for(var c=yield,d,h;;)h=a.nextValue({low:c.low,high:c.high,close:c.close}),h===void 0?d=void 0:d=l.nextValue(h),c=yield d})(),this.generator.next(),n.forEach((c,d)=>{var h=this.generator.next({high:r[d],low:n[d],close:i[d]});h.value!==void 0&&this.result.push(o(h.value))})}nextValue(e){return this.generator.next(e).value}}Wk.calculate=ert;function ert(t){Yt.reverseInputs(t);var e=new Wk(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class Yk extends Yt{constructor(e){super(e);let n=e.low,r=e.high,i=e.close,s=e.period,o=e.signalPeriod,a=this.format;if(!(n.length===r.length&&r.length===i.length))throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=(function*(){let l=1,c=new Ey(s,!0,!1),d=new Ey(s,!1,!0),h=new tc({period:o,values:[],format:x=>x}),m,g;for(var v=yield;;){if(c.push(v.high),d.push(v.low),l<s){l++,v=yield;continue}let x=d.periodLow;m=(v.close-x)/(c.periodHigh-x)*100,m=isNaN(m)?0:m,g=h.nextValue(m),v=yield{k:a(m),d:g!==void 0?a(g):void 0}}})(),this.generator.next(),n.forEach((l,c)=>{var d=this.generator.next({high:r[c],low:n[c],close:i[c]});d.value!==void 0&&this.result.push(d.value)})}nextValue(e){let n=this.generator.next(e);if(n.value!==void 0)return n.value}}Yk.calculate=trt;function trt(t){Yt.reverseInputs(t);var e=new Yk(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class Jk extends Yt{constructor(e){super(e);var n=e.close,r=e.volume;this.result=[],this.generator=(function*(){var i=0,s,o;for(s=yield,s.close&&typeof s.close=="number"&&(o=s.close,s=yield);;)o<s.close?i=i+s.volume:s.close<o&&(i=i-s.volume),o=s.close,s=yield i})(),this.generator.next(),n.forEach((i,s)=>{let o={close:n[s],volume:r[s]},a=this.generator.next(o);a.value!=null&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}Jk.calculate=nrt;function nrt(t){Yt.reverseInputs(t);var e=new Jk(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class Xk extends Yt{constructor(e){super(e),this.result=[];var n={conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},r=Object.assign({},n,e),i=new Ey(r.conversionPeriod*2,!0,!0,!1),s=new Ey(r.basePeriod*2,!0,!0,!1),o=new Ey(r.spanPeriod*2,!0,!0,!1);this.generator=(function*(){let a,l,c=Math.max(r.conversionPeriod,r.basePeriod,r.spanPeriod,r.displacement),d=1;for(l=yield;;){if(i.push(l.high),i.push(l.low),s.push(l.high),s.push(l.low),o.push(l.high),o.push(l.low),d<c)d++;else{let h=(i.periodHigh+i.periodLow)/2,m=(s.periodHigh+s.periodLow)/2,g=(h+m)/2,v=(o.periodHigh+o.periodLow)/2;a={conversion:h,base:m,spanA:g,spanB:v}}l=yield a}})(),this.generator.next(),e.low.forEach((a,l)=>{var c=this.generator.next({high:e.high[l],low:e.low[l]});c.value&&this.result.push(c.value)})}nextValue(e){return this.generator.next(e).value}}Xk.calculate=rrt;function rrt(t){Yt.reverseInputs(t);var e=new Xk(t).result;return t.reversedInput&&e.reverse(),Yt.reverseInputs(t),e}class irt{normalizeInterval(e){const n=e.toLowerCase();return{1:"1m",5:"5m",15:"15m",60:"1h",240:"4h",d:"1d","1d":"1d",w:"1d","1w":"1d","7d":"1d"}[n]||"1h"}async getMarketPrice(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,"");return{price:await qt.getCurrentPrice(n),exchange:"Hyperliquid",lastUpdate:new Date().toISOString()}}catch(n){throw console.error(`Error fetching market price for ${e}:`,n),new Error(`Failed to get market price: ${n.message}`)}}async getOHLCV(e,n="60"){try{const r=e.replace(/USDT$/i,"").replace(/USD$/i,""),i=this.normalizeInterval(n),s=await qt.getCandles(r,i,1);if(!s||s.length===0)throw new Error("No candle data available");const o=s[s.length-1];return{open:o.open,high:o.high,low:o.low,close:o.close,volume:o.volume||0,timestamp:new Date(o.time).toISOString()}}catch(r){throw console.error(`Error fetching OHLCV for ${e}:`,r),new Error(`Failed to get OHLCV data: ${r.message}`)}}async getHistory(e,n="1D",r=100){try{const i=e.replace(/USDT$/i,"").replace(/USD$/i,""),s=this.normalizeInterval(n);return(await qt.getCandles(i,s,r)).map(a=>({time:Math.floor(a.time/1e3),open:a.open,high:a.high,low:a.low,close:a.close,volume:a.volume}))}catch(i){return console.error(`Error fetching history for ${e}:`,i),[]}}async getIndicator(e,n,r="60",i){try{const s=e.replace(/USDT$/i,"").replace(/USD$/i,""),o=this.normalizeInterval(r),a=await qt.getCandles(s,o,200);if(!a||a.length===0)throw new Error("No data available for indicator calculation");const l=a.map(x=>x.close),c=a.map(x=>x.high),d=a.map(x=>x.low),h=a.map(x=>x.volume||0);let m=0,g=[];switch(n.toLowerCase()){case"rsi":const x=(i==null?void 0:i.period)||14,b={values:l,period:x},w=qk.calculate(b);m=w[w.length-1],g=w.slice(-100);break;case"macd":const k={values:l,fastPeriod:(i==null?void 0:i.fast)||12,slowPeriod:(i==null?void 0:i.slow)||26,signalPeriod:(i==null?void 0:i.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1},N=Hk.calculate(k),O=N[N.length-1];m={macd:(O==null?void 0:O.MACD)||0,signal:(O==null?void 0:O.signal)||0,histogram:(O==null?void 0:O.histogram)||0},g=N.slice(-100);break;case"ema":const _={period:(i==null?void 0:i.period)||20,values:l},F=Hx.calculate(_);m=F[F.length-1],g=F.slice(-100);break;case"sma":const L={period:(i==null?void 0:i.period)||20,values:l},$=tc.calculate(L);m=$[$.length-1],g=$.slice(-100);break;case"stoch":const G={high:c,low:d,close:l,period:(i==null?void 0:i.period)||14,signalPeriod:(i==null?void 0:i.signalPeriod)||3},V=Yk.calculate(G),U=V[V.length-1];m={k:(U==null?void 0:U.k)||0,d:(U==null?void 0:U.d)||0},g=V.slice(-100);break;case"bollinger":const A=(i==null?void 0:i.period)||20,I=(i==null?void 0:i.stdDev)||2,j={period:A,values:l,stdDev:I},q=Gk.calculate(j),K=q[q.length-1],te=l[l.length-1],Y=K?(te-K.lower)/(K.upper-K.lower):.5;m={upper:(K==null?void 0:K.upper)||0,middle:(K==null?void 0:K.middle)||0,lower:(K==null?void 0:K.lower)||0,pb:Y},g=q.slice(-100);break;case"atr":const H=(i==null?void 0:i.period)||14,M={high:c,low:d,close:l,period:H},P=Wk.calculate(M);m=P[P.length-1]||0,g=P.slice(-100);break;case"adx":const W=(i==null?void 0:i.period)||14,X={high:c,low:d,close:l,period:W},ie=Kk.calculate(X),oe=ie[ie.length-1];m={adx:(oe==null?void 0:oe.adx)||0,pdi:(oe==null?void 0:oe.pdi)||0,mdi:(oe==null?void 0:oe.mdi)||0},g=ie.slice(-100);break;case"obv":const Te={close:l,volume:h},ce=Jk.calculate(Te);m=ce[ce.length-1]||0,g=ce.slice(-100);break;case"vwap":let de=0,ke=0;const ye=[];for(let Ze=0;Ze<a.length;Ze++){const at=(c[Ze]+d[Ze]+l[Ze])/3;de+=at*h[Ze],ke+=h[Ze],ye.push(ke>0?de/ke:at)}m=ye[ye.length-1]||l[l.length-1],g=ye.slice(-100);break;case"ichimoku":const Ke=(i==null?void 0:i.conversion)||9,je=(i==null?void 0:i.base)||26,Ve=(i==null?void 0:i.spanB)||52,me=(i==null?void 0:i.displacement)||26,Ne={high:c,low:d,conversionPeriod:Ke,basePeriod:je,spanPeriod:Ve,displacement:me},We=Xk.calculate(Ne),Qe=We[We.length-1];m={tenkanSen:(Qe==null?void 0:Qe.conversion)||0,kijunSen:(Qe==null?void 0:Qe.base)||0,senkouSpanA:(Qe==null?void 0:Qe.spanA)||0,senkouSpanB:(Qe==null?void 0:Qe.spanB)||0,chikouSpan:l[l.length-me]||l[l.length-1]},g=We.slice(-100);break;case"price":m=l[l.length-1],g=l.slice(-100);break;default:throw new Error(`Unsupported indicator: ${n}`)}return{symbol:e,indicator:n.toUpperCase(),value:m,history:g,timestamp:Date.now()}}catch(s){throw console.error(`Error calculating indicator ${n} for ${e}:`,s),new Error(`Failed to calculate indicator: ${s.message}`)}}async getTradingViewSummary(e){try{const n=e.replace(/USDT$/i,"").replace(/USD$/i,""),r=await qt.getCandles(n,"1h",12);if(!r||r.length<2)return{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"};let i=0,s=0;for(let l=1;l<r.length;l++)r[l].close>r[l-1].close?i++:s++;const o=Math.max(0,r.length-1-i-s);let a;return i>8?a="STRONG_BUY":i>6?a="BUY":s>8?a="STRONG_SELL":s>6?a="SELL":a="NEUTRAL",{buy:i,sell:s,neutral:o,recommendation:a}}catch(n){return console.error(`Error fetching summary for ${e}:`,n),{buy:0,sell:0,neutral:1,recommendation:"NEUTRAL"}}}detectDivergences(e,n,r){const i=[];if(e.length<20||n.length<20)return i;const o=(m,g=5)=>{const v=[],x=[];for(let b=g;b<m.length-g;b++){let w=!0,k=!0;for(let N=b-g;N<=b+g;N++)N!==b&&(m[N]<=m[b]&&(w=!1),m[N]>=m[b]&&(k=!1));w&&v.push(b),k&&x.push(b)}return{minima:v,maxima:x}},a=e.slice(-20),l=n.slice(-20),c=r.slice(-20),d=o(a),h=o(l);if(d.minima.length>=2&&h.minima.length>=2){const m=d.minima[d.minima.length-1],g=d.minima[d.minima.length-2],v=h.minima[h.minima.length-1],x=h.minima[h.minima.length-2],b=a[m]<a[g],w=l[v]>l[x];if(b&&w){const O=l[v]<30?"STRONG":l[v]<40?"MODERATE":"WEAK";i.push({type:"BULLISH",indicator:"RSI",description:`Price made lower low (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made higher low (${l[x].toFixed(1)}  ${l[v].toFixed(1)}). Potential reversal UP.`,strength:O,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}const k=a[m]>a[g],N=l[v]<l[x];k&&N&&i.push({type:"HIDDEN_BULLISH",indicator:"RSI",description:"Price made higher low but RSI made lower low. Bullish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}if(d.maxima.length>=2&&h.maxima.length>=2){const m=d.maxima[d.maxima.length-1],g=d.maxima[d.maxima.length-2],v=h.maxima[h.maxima.length-1],x=h.maxima[h.maxima.length-2],b=a[m]>a[g],w=l[v]<l[x];if(b&&w){const O=l[v]>70?"STRONG":l[v]>60?"MODERATE":"WEAK";i.push({type:"BEARISH",indicator:"RSI",description:`Price made higher high (${a[g].toFixed(2)}  ${a[m].toFixed(2)}) but RSI made lower high (${l[x].toFixed(1)}  ${l[v].toFixed(1)}). Potential reversal DOWN.`,strength:O,priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}const k=a[m]<a[g],N=l[v]>l[x];k&&N&&i.push({type:"HIDDEN_BEARISH",indicator:"RSI",description:"Price made lower high but RSI made higher high. Bearish trend continuation signal.",strength:"MODERATE",priceRange:{start:a[g],end:a[m]},indicatorRange:{start:l[x],end:l[v]}})}if(c.length>=10){const m=c[c.length-1]-c[c.length-5],g=a[a.length-1]-a[a.length-5];m<-.5&&g>0&&i.push({type:"BEARISH",indicator:"MACD",description:"MACD histogram declining while price rising. Momentum weakening.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}}),m>.5&&g<0&&i.push({type:"BULLISH",indicator:"MACD",description:"MACD histogram rising while price falling. Momentum building.",strength:"WEAK",priceRange:{start:a[a.length-5],end:a[a.length-1]},indicatorRange:{start:c[c.length-5],end:c[c.length-1]}})}return i}calculateIndicatorFromCandles(e,n,r){if(!e||e.length===0)return{value:0,history:[]};const i=e.map(h=>h.close),s=e.map(h=>h.high),o=e.map(h=>h.low),a=e.map(h=>h.volume||0);let l=0,c=[];switch(n.toLowerCase()){case"rsi":const h=(r==null?void 0:r.period)||14,m=qk.calculate({values:i,period:h});l=m[m.length-1]||0,c=m.slice(-100);break;case"macd":const g=Hk.calculate({values:i,fastPeriod:(r==null?void 0:r.fast)||12,slowPeriod:(r==null?void 0:r.slow)||26,signalPeriod:(r==null?void 0:r.signal)||9,SimpleMAOscillator:!1,SimpleMASignal:!1}),v=g[g.length-1];l={macd:(v==null?void 0:v.MACD)||0,signal:(v==null?void 0:v.signal)||0,histogram:(v==null?void 0:v.histogram)||0},c=g.slice(-100).map(q=>({macd:(q==null?void 0:q.MACD)||0,signal:(q==null?void 0:q.signal)||0,histogram:(q==null?void 0:q.histogram)||0}));break;case"ema":const x=Hx.calculate({period:(r==null?void 0:r.period)||20,values:i});l=x[x.length-1]||0,c=x.slice(-100);break;case"sma":const b=tc.calculate({period:(r==null?void 0:r.period)||20,values:i});l=b[b.length-1]||0,c=b.slice(-100);break;case"stoch":const w=Yk.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14,signalPeriod:(r==null?void 0:r.signalPeriod)||3}),k=w[w.length-1];l={k:(k==null?void 0:k.k)||0,d:(k==null?void 0:k.d)||0},c=w.slice(-100);break;case"bollinger":const N=Gk.calculate({period:(r==null?void 0:r.period)||20,values:i,stdDev:(r==null?void 0:r.stdDev)||2}),O=N[N.length-1],D=i[i.length-1],_=O?(D-O.lower)/(O.upper-O.lower):.5;l={upper:(O==null?void 0:O.upper)||0,middle:(O==null?void 0:O.middle)||0,lower:(O==null?void 0:O.lower)||0,pb:_},c=N.slice(-100);break;case"atr":const F=Wk.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14});l=F[F.length-1]||0,c=F.slice(-100);break;case"adx":const z=Kk.calculate({high:s,low:o,close:i,period:(r==null?void 0:r.period)||14}),L=z[z.length-1];l={adx:(L==null?void 0:L.adx)||0,pdi:(L==null?void 0:L.pdi)||0,mdi:(L==null?void 0:L.mdi)||0},c=z.slice(-100);break;case"obv":const $=Jk.calculate({close:i,volume:a});l=$[$.length-1]||0,c=$.slice(-100);break;case"vwap":let G=0,V=0;const U=[];for(let q=0;q<e.length;q++){const K=(s[q]+o[q]+i[q])/3;G+=K*a[q],V+=a[q],U.push(V>0?G/V:K)}l=U[U.length-1]||i[i.length-1],c=U.slice(-100);break;case"ichimoku":const A=Xk.calculate({high:s,low:o,conversionPeriod:(r==null?void 0:r.conversion)||9,basePeriod:(r==null?void 0:r.base)||26,spanPeriod:(r==null?void 0:r.spanB)||52,displacement:(r==null?void 0:r.displacement)||26}),I=A[A.length-1],j=(r==null?void 0:r.displacement)||26;l={tenkanSen:(I==null?void 0:I.conversion)||0,kijunSen:(I==null?void 0:I.base)||0,senkouSpanA:(I==null?void 0:I.spanA)||0,senkouSpanB:(I==null?void 0:I.spanB)||0,chikouSpan:i[i.length-j]||i[i.length-1]},c=A.slice(-100);break;default:console.warn(`[MarketDataMCP] Unknown indicator: ${n}`)}return{value:l,history:c}}}const Co=new irt,$n={async getMarketData(t){return await qt.getMarketData(t)},async getPositions(t){return(await qt.getUserState(t)).assetPositions},async getOpenOrders(t){return await qt.getOpenOrders(t)},async getUserFills(t){return await qt.getUserFills(t)},async getUserLedgerUpdates(t){return await qt.getUserLedgerUpdates(t)},async createOrder(t,e,n,r,i,s){return await qt.placeOrder(t,e,n,r,i,s)},async cancelOrder(t,e,n){return await qt.cancelOrder(t,e,n)},async getUserState(t){return await qt.getUserState(t)},async updateLeverage(t,e,n,r){return await qt.updateLeverage(t,e,n,r)},async updateIsolatedMargin(t,e,n,r){return await qt.updateIsolatedMargin(t,e,n,r)},async closePosition(t,e,n,r="market",i){return await qt.closePosition(t,e,n,r,i)},async withdrawUSDC(t,e,n){return await qt.withdrawUSDC(t,e,n)},async getAvailableAssets(){return await qt.getAllAvailableAssets()},async getAssetDecimals(t){return await qt.getAssetDecimals(t)},async validateAsset(t){return await qt.isValidAsset(t)},async getAssetContexts(){return await qt.getAssetContexts()},async getFundingRate(t){return await qt.getFundingRate(t)},async getUserFees(t){return await qt.getUserFees(t)},async getUserFundingHistory(t,e,n){return await qt.getUserFundingHistory(t,e,n)},calculateBreakevenPrice(t,e,n,r,i,s,o){return qt.calculateBreakevenPrice(t,e,n,r,i,s,o)}};function dpe(t){for(const[e,n]of Object.entries(PN))if(n.indicators.includes(t))return e;return null}function fpe(t,e){return PN[e].indicators.filter(r=>{var i;return(i=t[r])==null?void 0:i.enabled}).length}function hpe(t,e){return fpe(t,e)>=PN[e].maxIndicators}function ppe(t){return Object.values(t).filter(e=>e.enabled).length}function mpe(t){return ppe(t)>=Rte}function nQ(t,e){var r;if((r=t[e])!=null&&r.enabled)return!0;if(mpe(t))return!1;const n=dpe(e);return!(n&&hpe(t,n))}function srt(t,e){const r={...e||oy};for(const i of Object.keys(r))r[i]={...r[i],enabled:!1};if(t!=="custom"){const i=pd[t];for(const s of i.indicators)r[s]&&(r[s]={...r[s],enabled:!0})}return r}function ort(t){const e=Object.keys(t).filter(n=>t[n].enabled).sort();for(const[n,r]of Object.entries(pd)){if(n==="custom")continue;const i=[...r.indicators].sort();if(JSON.stringify(e)===JSON.stringify(i))return n}return"custom"}class art{constructor(){this.userFeesCache=null,this.userFeesCacheTime=0,this.FEES_CACHE_TTL=300*1e3}async getUserFeesFromCache(e){const n=Date.now();if(this.userFeesCache&&n-this.userFeesCacheTime<this.FEES_CACHE_TTL)return this.userFeesCache;if(e)try{const r=await $n.getUserFees(e);return this.userFeesCache={makerFee:r.makerFee,takerFee:r.takerFee},this.userFeesCacheTime=n,this.userFeesCache}catch{console.warn("[DealerMCP] Failed to fetch user fees, using defaults")}return{makerFee:2e-4,takerFee:5e-4}}async getMarketContext(e,n,r="60",i,s=100){var a,l;const o=`${e}USDT`;try{const c=await Co.getMarketPrice(o),h=await Co.getHistory(o,r,200),m=h.slice(-s);console.log(`[DealerMCP] Fetched ${h.length} candles, using last ${m.length} for history (config: ${s})`);const g={},v=[],x=h.map(V=>({open:V.open,high:V.high,low:V.low,close:V.close,volume:V.volume||0})),b=i?Object.entries(i).filter(([V,U])=>U.enabled).map(([V,U])=>({name:V,params:U.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:V,params:U}of b)try{const A=Co.calculateIndicatorFromCandles(x,V,U),I=i==null?void 0:i[V],j=(I==null?void 0:I.weight)??1,q=dpe(V);g[V]={value:A.value,history:A.history,weight:j,category:q},v.push(V)}catch(A){console.warn(`[DealerMCP] Failed to calculate ${V} for ${e}:`,A)}const[w,k,N]=await Promise.all([$n.getFundingRate(e).catch(()=>null),this.getUserFeesFromCache(n),qt.getOrderBookMetrics(e).catch(()=>null)]),O=(w==null?void 0:w.funding)||0,D=Math.abs(O)*3,_={fundingRate:O,dailyHoldingCost:D},F=((a=g.rsi)==null?void 0:a.history)||[],L=(((l=g.macd)==null?void 0:l.history)||[]).map(V=>(V==null?void 0:V.histogram)||0),$=m.map(V=>V.close),G=Co.detectDivergences($,F,L);return G.length>0&&console.log(`[DealerMCP] Divergences detected for ${e}:`,G.map(V=>`${V.type}(${V.indicator})`).join(", ")),console.log(`[DealerMCP] Context for ${e} (${r}m): Price=${c.price}, Indicators=[${v.join(",")}], Divergences=${G.length}, OrderBook=${N?"OK":"N/A"}`),{symbol:e,currentPrice:c.price,history:m,indicators:g,divergences:G,tradingCosts:_,orderBook:N||void 0,ts:Math.floor(Date.now()/1e3)}}catch(c){return console.error(`[DealerMCP] Failed to gather context for ${e}:`,c),{symbol:e,currentPrice:0,history:[],indicators:{},divergences:[],tradingCosts:{fundingRate:0,dailyHoldingCost:0},error:c.message||"Data unavailable",ts:Math.floor(Date.now()/1e3)}}}calculatePositionBreakevens(e,n,r){return e.map(i=>{var x,b,w,k,N,O,D;const s=((x=i.position)==null?void 0:x.coin)||i.coin,o=parseFloat(((b=i.position)==null?void 0:b.entryPx)||i.entryPx||"0"),a=((k=(w=i.position)==null?void 0:w.leverage)==null?void 0:k.value)||1,c=parseFloat(((N=i.position)==null?void 0:N.szi)||i.szi||"0")>0,d=r.get(s)||0,h=$n.calculateBreakevenPrice(o,a,c,n.makerFee,n.takerFee,d,8),m=parseFloat(((O=i.position)==null?void 0:O.unrealizedPnl)||"0"),g=parseFloat(((D=i.position)==null?void 0:D.positionValue)||"0"),v=g>0?m/g*100:0;return{coin:s,entryPrice:o,breakevenPrice:h.breakevenPrice,minProfitPrice:h.minProfitPrice,currentPnlPercent:v,isAboveBreakeven:m>0}})}async getMacroSnapshot(e,n,r){const i=`${e}USDT`;try{const o=await Co.getHistory(i,n,50);if(o.length<20)return console.warn(`[DealerMCP] Insufficient candles for macro ${e}@${n}`),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)};const a=o.map(d=>({open:d.open,high:d.high,low:d.low,close:d.close,volume:d.volume||0})),l={},c=r?Object.entries(r).filter(([d,h])=>h.enabled).map(([d,h])=>({name:d,params:h.params})):[{name:"rsi",params:{period:14}},{name:"macd",params:{fast:12,slow:26,signal:9}}];for(const{name:d,params:h}of c)try{const m=Co.calculateIndicatorFromCandles(a,d,h);l[d]={value:m.value}}catch(m){console.warn(`[DealerMCP] Failed to calc macro ${d} for ${e}:`,m)}return console.log(`[DealerMCP] Macro snapshot for ${e}@${n}: ${Object.keys(l).join(",")}`),{timeframe:n,indicators:l,ts:Math.floor(Date.now()/1e3)}}catch(s){return console.error(`[DealerMCP] Macro snapshot failed for ${e}:`,s),{timeframe:n,indicators:{},ts:Math.floor(Date.now()/1e3)}}}}const D4=new art;var lrt={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let crt,urt;function drt(){return{geminiUrl:crt,vertexUrl:urt}}function frt(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=drt();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zd{}function Pt(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function C(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const d=l[c];C(d,e.slice(s+1),n[c])}else for(const c of l)C(c,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];C(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function T(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>T(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function hrt(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&o.add(c)}bj(t,i,s,0,o)}}function bj(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])bj(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(const c of a)l[c]=o[c];for(const[c,d]of Object.entries(l)){const h=[];for(const m of n.slice(r))m==="*"?h.push(c):h.push(m);C(o,h,d)}for(const c of a)delete o[c]}}else{const o=t;s in o&&bj(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gB(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function prt(t){const e={},n=T(t,["operationName"]);n!=null&&C(e,["operationName"],n);const r=T(t,["resourceName"]);return r!=null&&C(e,["_url","resourceName"],r),e}function mrt(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(t,["done"]);i!=null&&C(e,["done"],i);const s=T(t,["error"]);s!=null&&C(e,["error"],s);const o=T(t,["response","generateVideoResponse"]);return o!=null&&C(e,["response"],yrt(o)),e}function grt(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(t,["done"]);i!=null&&C(e,["done"],i);const s=T(t,["error"]);s!=null&&C(e,["error"],s);const o=T(t,["response"]);return o!=null&&C(e,["response"],xrt(o)),e}function yrt(t){const e={},n=T(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>vrt(o))),C(e,["generatedVideos"],s)}const r=T(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=T(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function xrt(t){const e={},n=T(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>brt(o))),C(e,["generatedVideos"],s)}const r=T(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=T(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function vrt(t){const e={},n=T(t,["video"]);return n!=null&&C(e,["video"],krt(n)),e}function brt(t){const e={},n=T(t,["_self"]);return n!=null&&C(e,["video"],Nrt(n)),e}function wrt(t){const e={},n=T(t,["operationName"]);return n!=null&&C(e,["_url","operationName"],n),e}function Ert(t){const e={},n=T(t,["operationName"]);return n!=null&&C(e,["_url","operationName"],n),e}function Srt(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(t,["done"]);i!=null&&C(e,["done"],i);const s=T(t,["error"]);s!=null&&C(e,["error"],s);const o=T(t,["response"]);return o!=null&&C(e,["response"],Art(o)),e}function Art(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["parent"]);r!=null&&C(e,["parent"],r);const i=T(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function gpe(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(t,["done"]);i!=null&&C(e,["done"],i);const s=T(t,["error"]);s!=null&&C(e,["error"],s);const o=T(t,["response"]);return o!=null&&C(e,["response"],Trt(o)),e}function Trt(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["parent"]);r!=null&&C(e,["parent"],r);const i=T(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function krt(t){const e={},n=T(t,["uri"]);n!=null&&C(e,["uri"],n);const r=T(t,["encodedVideo"]);r!=null&&C(e,["videoBytes"],gB(r));const i=T(t,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function Nrt(t){const e={},n=T(t,["gcsUri"]);n!=null&&C(e,["uri"],n);const r=T(t,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],gB(r));const i=T(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rQ;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(rQ||(rQ={}));var iQ;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(iQ||(iQ={}));var sQ;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(sQ||(sQ={}));var xe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(xe||(xe={}));var oQ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(oQ||(oQ={}));var aQ;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(aQ||(aQ={}));var lQ;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(lQ||(lQ={}));var cQ;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(cQ||(cQ={}));var uQ;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(uQ||(uQ={}));var dQ;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(dQ||(dQ={}));var fQ;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(fQ||(fQ={}));var hQ;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(hQ||(hQ={}));var pQ;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(pQ||(pQ={}));var mQ;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(mQ||(mQ={}));var gQ;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(gQ||(gQ={}));var yQ;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(yQ||(yQ={}));var xQ;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xQ||(xQ={}));var vQ;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(vQ||(vQ={}));var bQ;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(bQ||(bQ={}));var Qk;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Qk||(Qk={}));var wQ;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(wQ||(wQ={}));var EQ;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(EQ||(EQ={}));var SQ;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(SQ||(SQ={}));var wj;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wj||(wj={}));var AQ;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(AQ||(AQ={}));var TQ;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(TQ||(TQ={}));var kQ;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(kQ||(kQ={}));var NQ;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(NQ||(NQ={}));var CQ;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(CQ||(CQ={}));var PQ;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PQ||(PQ={}));var _Q;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(_Q||(_Q={}));var IQ;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(IQ||(IQ={}));var RQ;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(RQ||(RQ={}));var OQ;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(OQ||(OQ={}));var MQ;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(MQ||(MQ={}));var LQ;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(LQ||(LQ={}));var jQ;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(jQ||(jQ={}));var DQ;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(DQ||(DQ={}));var BQ;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(BQ||(BQ={}));var UQ;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(UQ||(UQ={}));var FQ;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(FQ||(FQ={}));var $Q;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})($Q||($Q={}));var zQ;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(zQ||(zQ={}));var VQ;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(VQ||(VQ={}));var HQ;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(HQ||(HQ={}));var qQ;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(qQ||(qQ={}));var GQ;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(GQ||(GQ={}));var KQ;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(KQ||(KQ={}));var WQ;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(WQ||(WQ={}));var YQ;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(YQ||(YQ={}));var JQ;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JQ||(JQ={}));var XQ;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(XQ||(XQ={}));var QQ;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(QQ||(QQ={}));var ZQ;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ZQ||(ZQ={}));var eZ;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(eZ||(eZ={}));var Xg;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Xg||(Xg={}));class Ej{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Kb{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const h=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const h of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class tZ{}class nZ{}class Crt{}class Prt{}class _rt{}class Irt{}class rZ{}class iZ{}class sZ{}class Rrt{}class Zk{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Zk;let i;const s=e;return n?i=grt(s):i=mrt(s),Object.assign(r,i),r}}class oZ{}class aZ{}class lZ{}class cZ{}class Ort{}class Mrt{}class Lrt{}class yB{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new yB,s=Srt(e);return Object.assign(r,s),r}}class jrt{}class Drt{}class Brt{}class uZ{}class Urt{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Frt{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class xB{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new xB,s=gpe(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ype(t,e){const n=Vn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function xpe(t){return Array.isArray(t)?t.map(e=>eN(e)):[eN(t)]}function eN(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function vpe(t){const e=eN(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bpe(t){const e=eN(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dZ(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function wpe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>dZ(e)):[dZ(t)]}function Sj(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function fZ(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function hZ(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Fs(t){if(t==null)throw new Error("ContentUnion is required");return Sj(t)?t:{role:"user",parts:wpe(t)}}function vB(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Fs(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Fs(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Fs(n)):[Fs(e)]}function rl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(fZ(t)||hZ(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Fs(t)]}const e=[],n=[],r=Sj(t[0]);for(const i of t){const s=Sj(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(fZ(i)||hZ(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:wpe(n)}),e}function $rt(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(xe).includes(n[0].toUpperCase())?n[0].toUpperCase():xe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(xe).includes(r.toUpperCase())?r.toUpperCase():xe.TYPE_UNSPECIFIED})}}function Sy(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&$rt(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(xe).includes(a.toUpperCase())?a.toUpperCase():xe.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Sy(a);else if(r.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(Sy(c))}e[o]=l}else if(i.includes(o)){const l={};for(const[c,d]of Object.entries(a))l[c]=Sy(d);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function bB(t){return Sy(t)}function wB(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function EB(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Pv(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Sy(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Sy(e.response));return t}function _v(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function zrt(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function ef(t,e){if(typeof e!="string")throw new Error("name must be a string");return zrt(t,e,"cachedContents")}function Epe(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Yh(t){return gB(t)}function Vrt(t){return t!=null&&typeof t=="object"&&"name"in t}function Hrt(t){return t!=null&&typeof t=="object"&&"video"in t}function qrt(t){return t!=null&&typeof t=="object"&&"uri"in t}function Spe(t){var e;let n;if(Vrt(t)&&(n=t.name),!(qrt(t)&&(n=t.uri,n===void 0))&&!(Hrt(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ape(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Tpe(t){for(const e of["models","tunedModels","publisherModels"])if(Grt(t,e))return t[e];return[]}function Grt(t,e){return t!==null&&typeof t=="object"&&e in t}function Krt(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Wrt(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=Krt(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function kpe(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Yrt(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Npe(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Iv(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Cpe(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jrt(t){const e={},n=T(t,["responsesFile"]);n!=null&&C(e,["fileName"],n);const r=T(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>_it(o))),C(e,["inlinedResponses"],s)}const i=T(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["inlinedEmbedContentResponses"],s)}return e}function Xrt(t){const e={},n=T(t,["predictionsFormat"]);n!=null&&C(e,["format"],n);const r=T(t,["gcsDestination","outputUriPrefix"]);r!=null&&C(e,["gcsUri"],r);const i=T(t,["bigqueryDestination","outputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function Qrt(t){const e={},n=T(t,["format"]);n!=null&&C(e,["predictionsFormat"],n);const r=T(t,["gcsUri"]);r!=null&&C(e,["gcsDestination","outputUriPrefix"],r);const i=T(t,["bigqueryUri"]);if(i!=null&&C(e,["bigqueryDestination","outputUri"],i),T(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(T(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(T(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function rT(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["metadata","displayName"]);r!=null&&C(e,["displayName"],r);const i=T(t,["metadata","state"]);i!=null&&C(e,["state"],Cpe(i));const s=T(t,["metadata","createTime"]);s!=null&&C(e,["createTime"],s);const o=T(t,["metadata","endTime"]);o!=null&&C(e,["endTime"],o);const a=T(t,["metadata","updateTime"]);a!=null&&C(e,["updateTime"],a);const l=T(t,["metadata","model"]);l!=null&&C(e,["model"],l);const c=T(t,["metadata","output"]);return c!=null&&C(e,["dest"],Jrt(Npe(c))),e}function Aj(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=T(t,["state"]);i!=null&&C(e,["state"],Cpe(i));const s=T(t,["error"]);s!=null&&C(e,["error"],s);const o=T(t,["createTime"]);o!=null&&C(e,["createTime"],o);const a=T(t,["startTime"]);a!=null&&C(e,["startTime"],a);const l=T(t,["endTime"]);l!=null&&C(e,["endTime"],l);const c=T(t,["updateTime"]);c!=null&&C(e,["updateTime"],c);const d=T(t,["model"]);d!=null&&C(e,["model"],d);const h=T(t,["inputConfig"]);h!=null&&C(e,["src"],Zrt(h));const m=T(t,["outputConfig"]);m!=null&&C(e,["dest"],Xrt(Npe(m)));const g=T(t,["completionStats"]);return g!=null&&C(e,["completionStats"],g),e}function Zrt(t){const e={},n=T(t,["instancesFormat"]);n!=null&&C(e,["format"],n);const r=T(t,["gcsSource","uris"]);r!=null&&C(e,["gcsUri"],r);const i=T(t,["bigquerySource","inputUri"]);return i!=null&&C(e,["bigqueryUri"],i),e}function eit(t,e){const n={};if(T(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(T(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(T(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=T(e,["fileName"]);r!=null&&C(n,["fileName"],r);const i=T(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Pit(t,o))),C(n,["requests","requests"],s)}return n}function tit(t){const e={},n=T(t,["format"]);n!=null&&C(e,["instancesFormat"],n);const r=T(t,["gcsUri"]);r!=null&&C(e,["gcsSource","uris"],r);const i=T(t,["bigqueryUri"]);if(i!=null&&C(e,["bigquerySource","inputUri"],i),T(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(T(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function nit(t){const e={},n=T(t,["data"]);if(n!=null&&C(e,["data"],n),T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function rit(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],Iv(t,r)),n}function iit(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],Iv(t,r)),n}function sit(t){const e={},n=T(t,["content"]);n!=null&&C(e,["content"],n);const r=T(t,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],oit(r));const i=T(t,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const s=T(t,["finishReason"]);s!=null&&C(e,["finishReason"],s);const o=T(t,["avgLogprobs"]);o!=null&&C(e,["avgLogprobs"],o);const a=T(t,["groundingMetadata"]);a!=null&&C(e,["groundingMetadata"],a);const l=T(t,["index"]);l!=null&&C(e,["index"],l);const c=T(t,["logprobsResult"]);c!=null&&C(e,["logprobsResult"],c);const d=T(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),C(e,["safetyRatings"],m)}const h=T(t,["urlContextMetadata"]);return h!=null&&C(e,["urlContextMetadata"],h),e}function oit(t){const e={},n=T(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function Ppe(t){const e={},n=T(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Dit(s))),C(e,["parts"],i)}const r=T(t,["role"]);return r!=null&&C(e,["role"],r),e}function ait(t,e){const n={},r=T(t,["displayName"]);if(e!==void 0&&r!=null&&C(e,["batch","displayName"],r),T(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function lit(t,e){const n={},r=T(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=T(t,["dest"]);return e!==void 0&&i!=null&&C(e,["outputConfig"],Qrt(Yrt(i))),n}function pZ(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["src"]);i!=null&&C(n,["batch","inputConfig"],eit(t,kpe(t,i)));const s=T(e,["config"]);return s!=null&&ait(s,n),n}function cit(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["model"],Vn(t,r));const i=T(e,["src"]);i!=null&&C(n,["inputConfig"],tit(kpe(t,i)));const s=T(e,["config"]);return s!=null&&lit(s,n),n}function uit(t,e){const n={},r=T(t,["displayName"]);return e!==void 0&&r!=null&&C(e,["batch","displayName"],r),n}function dit(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["src"]);i!=null&&C(n,["batch","inputConfig"],xit(t,i));const s=T(e,["config"]);return s!=null&&uit(s,n),n}function fit(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],Iv(t,r)),n}function hit(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],Iv(t,r)),n}function pit(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["name"]);r!=null&&C(e,["name"],r);const i=T(t,["done"]);i!=null&&C(e,["done"],i);const s=T(t,["error"]);return s!=null&&C(e,["error"],s),e}function mit(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["name"]);r!=null&&C(e,["name"],r);const i=T(t,["done"]);i!=null&&C(e,["done"],i);const s=T(t,["error"]);return s!=null&&C(e,["error"],s),e}function git(t,e){const n={},r=T(e,["contents"]);if(r!=null){let s=vB(t,r);Array.isArray(s)&&(s=s.map(o=>o)),C(n,["requests[]","request","content"],s)}const i=T(e,["config"]);return i!=null&&(C(n,["_self"],yit(i,n)),hrt(n,{"requests[].*":"requests[].request.*"})),n}function yit(t,e){const n={},r=T(t,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=T(t,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const s=T(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&C(e,["requests[]","outputDimensionality"],s),T(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(T(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xit(t,e){const n={},r=T(e,["fileName"]);r!=null&&C(n,["file_name"],r);const i=T(e,["inlinedRequests"]);return i!=null&&C(n,["requests"],git(t,i)),n}function vit(t){const e={};if(T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function bit(t){const e={},n=T(t,["id"]);n!=null&&C(e,["id"],n);const r=T(t,["args"]);r!=null&&C(e,["args"],r);const i=T(t,["name"]);if(i!=null&&C(e,["name"],i),T(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wit(t){const e={},n=T(t,["mode"]);n!=null&&C(e,["mode"],n);const r=T(t,["allowedFunctionNames"]);if(r!=null&&C(e,["allowedFunctionNames"],r),T(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Eit(t,e,n){const r={},i=T(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],Ppe(Fs(i)));const s=T(e,["temperature"]);s!=null&&C(r,["temperature"],s);const o=T(e,["topP"]);o!=null&&C(r,["topP"],o);const a=T(e,["topK"]);a!=null&&C(r,["topK"],a);const l=T(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=T(e,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const d=T(e,["stopSequences"]);d!=null&&C(r,["stopSequences"],d);const h=T(e,["responseLogprobs"]);h!=null&&C(r,["responseLogprobs"],h);const m=T(e,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=T(e,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const v=T(e,["frequencyPenalty"]);v!=null&&C(r,["frequencyPenalty"],v);const x=T(e,["seed"]);x!=null&&C(r,["seed"],x);const b=T(e,["responseMimeType"]);b!=null&&C(r,["responseMimeType"],b);const w=T(e,["responseSchema"]);w!=null&&C(r,["responseSchema"],bB(w));const k=T(e,["responseJsonSchema"]);if(k!=null&&C(r,["responseJsonSchema"],k),T(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(T(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=T(e,["safetySettings"]);if(n!==void 0&&N!=null){let U=N;Array.isArray(U)&&(U=U.map(A=>Bit(A))),C(n,["safetySettings"],U)}const O=T(e,["tools"]);if(n!==void 0&&O!=null){let U=_v(O);Array.isArray(U)&&(U=U.map(A=>Fit(Pv(A)))),C(n,["tools"],U)}const D=T(e,["toolConfig"]);if(n!==void 0&&D!=null&&C(n,["toolConfig"],Uit(D)),T(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=T(e,["cachedContent"]);n!==void 0&&_!=null&&C(n,["cachedContent"],ef(t,_));const F=T(e,["responseModalities"]);F!=null&&C(r,["responseModalities"],F);const z=T(e,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const L=T(e,["speechConfig"]);if(L!=null&&C(r,["speechConfig"],wB(L)),T(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=T(e,["thinkingConfig"]);$!=null&&C(r,["thinkingConfig"],$);const G=T(e,["imageConfig"]);G!=null&&C(r,["imageConfig"],Cit(G));const V=T(e,["enableEnhancedCivicAnswers"]);return V!=null&&C(r,["enableEnhancedCivicAnswers"],V),r}function Sit(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>sit(c))),C(e,["candidates"],l)}const i=T(t,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const s=T(t,["promptFeedback"]);s!=null&&C(e,["promptFeedback"],s);const o=T(t,["responseId"]);o!=null&&C(e,["responseId"],o);const a=T(t,["usageMetadata"]);return a!=null&&C(e,["usageMetadata"],a),e}function Ait(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],Iv(t,r)),n}function Tit(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],Iv(t,r)),n}function kit(t){const e={};if(T(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Nit(t){const e={};if(T(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Cit(t){const e={},n=T(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=T(t,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),T(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(T(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Pit(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["request","model"],Vn(t,r));const i=T(e,["contents"]);if(i!=null){let a=rl(i);Array.isArray(a)&&(a=a.map(l=>Ppe(l))),C(n,["request","contents"],a)}const s=T(e,["metadata"]);s!=null&&C(n,["metadata"],s);const o=T(e,["config"]);return o!=null&&C(n,["request","generationConfig"],Eit(t,o,T(n,["request"],{}))),n}function _it(t){const e={},n=T(t,["response"]);n!=null&&C(e,["response"],Sit(n));const r=T(t,["error"]);return r!=null&&C(e,["error"],r),e}function Iit(t,e){const n={},r=T(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(t,["pageToken"]);if(e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),T(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Rit(t,e){const n={},r=T(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(t,["pageToken"]);e!==void 0&&i!=null&&C(e,["_query","pageToken"],i);const s=T(t,["filter"]);return e!==void 0&&s!=null&&C(e,["_query","filter"],s),n}function Oit(t){const e={},n=T(t,["config"]);return n!=null&&Iit(n,e),e}function Mit(t){const e={},n=T(t,["config"]);return n!=null&&Rit(n,e),e}function Lit(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>rT(o))),C(e,["batchJobs"],s)}return e}function jit(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Aj(o))),C(e,["batchJobs"],s)}return e}function Dit(t){const e={},n=T(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=T(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=T(t,["fileData"]);s!=null&&C(e,["fileData"],vit(s));const o=T(t,["functionCall"]);o!=null&&C(e,["functionCall"],bit(o));const a=T(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=T(t,["inlineData"]);l!=null&&C(e,["inlineData"],nit(l));const c=T(t,["text"]);c!=null&&C(e,["text"],c);const d=T(t,["thought"]);d!=null&&C(e,["thought"],d);const h=T(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=T(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function Bit(t){const e={},n=T(t,["category"]);if(n!=null&&C(e,["category"],n),T(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=T(t,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function Uit(t){const e={},n=T(t,["functionCallingConfig"]);n!=null&&C(e,["functionCallingConfig"],wit(n));const r=T(t,["retrievalConfig"]);return r!=null&&C(e,["retrievalConfig"],r),e}function Fit(t){const e={},n=T(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(T(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=T(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=T(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=T(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),T(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],kit(a));const l=T(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],Nit(l));const c=T(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dd;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Dd||(Dd={}));class f0{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $it extends Zd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new f0(Dd.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=pZ(this.apiClient,e),r=n._url,i=Pt("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const d of l){const h=Object.assign({},d);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=m,h.request=g}c.push(h)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=cit(this.apiClient,e);return a=Pt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Aj(d))}else{const c=pZ(this.apiClient,e);return a=Pt("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>rT(d))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dit(this.apiClient,e);return s=Pt("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>rT(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Tit(this.apiClient,e);return a=Pt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Aj(d))}else{const c=Ait(this.apiClient,e);return a=Pt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>rT(d))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=iit(this.apiClient,e);o=Pt("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=rit(this.apiClient,e);o=Pt("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Mit(e);return a=Pt("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=jit(d),m=new uZ;return Object.assign(m,h),m})}else{const c=Oit(e);return a=Pt("batches",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Lit(d),m=new uZ;return Object.assign(m,h),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=hit(this.apiClient,e);return a=Pt("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>mit(d))}else{const c=fit(this.apiClient,e);return a=Pt("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>pit(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zit(t){const e={},n=T(t,["data"]);if(n!=null&&C(e,["data"],n),T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function mZ(t){const e={},n=T(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>dst(s))),C(e,["parts"],i)}const r=T(t,["role"]);return r!=null&&C(e,["role"],r),e}function Vit(t,e){const n={},r=T(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=T(t,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const s=T(t,["displayName"]);e!==void 0&&s!=null&&C(e,["displayName"],s);const o=T(t,["contents"]);if(e!==void 0&&o!=null){let d=rl(o);Array.isArray(d)&&(d=d.map(h=>mZ(h))),C(e,["contents"],d)}const a=T(t,["systemInstruction"]);e!==void 0&&a!=null&&C(e,["systemInstruction"],mZ(Fs(a)));const l=T(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>hst(h))),C(e,["tools"],d)}const c=T(t,["toolConfig"]);if(e!==void 0&&c!=null&&C(e,["toolConfig"],fst(c)),T(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Hit(t,e){const n={},r=T(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=T(t,["expireTime"]);e!==void 0&&i!=null&&C(e,["expireTime"],i);const s=T(t,["displayName"]);e!==void 0&&s!=null&&C(e,["displayName"],s);const o=T(t,["contents"]);if(e!==void 0&&o!=null){let h=rl(o);Array.isArray(h)&&(h=h.map(m=>m)),C(e,["contents"],h)}const a=T(t,["systemInstruction"]);e!==void 0&&a!=null&&C(e,["systemInstruction"],Fs(a));const l=T(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>pst(m))),C(e,["tools"],h)}const c=T(t,["toolConfig"]);e!==void 0&&c!=null&&C(e,["toolConfig"],c);const d=T(t,["kmsKeyName"]);return e!==void 0&&d!=null&&C(e,["encryption_spec","kmsKeyName"],d),n}function qit(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["model"],ype(t,r));const i=T(e,["config"]);return i!=null&&Vit(i,n),n}function Git(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["model"],ype(t,r));const i=T(e,["config"]);return i!=null&&Hit(i,n),n}function Kit(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],ef(t,r)),n}function Wit(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],ef(t,r)),n}function Yit(t){const e={},n=T(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Jit(t){const e={},n=T(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Xit(t){const e={};if(T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Qit(t){const e={},n=T(t,["id"]);n!=null&&C(e,["id"],n);const r=T(t,["args"]);r!=null&&C(e,["args"],r);const i=T(t,["name"]);if(i!=null&&C(e,["name"],i),T(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zit(t){const e={},n=T(t,["mode"]);n!=null&&C(e,["mode"],n);const r=T(t,["allowedFunctionNames"]);if(r!=null&&C(e,["allowedFunctionNames"],r),T(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function est(t){const e={};if(T(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=T(t,["description"]);n!=null&&C(e,["description"],n);const r=T(t,["name"]);r!=null&&C(e,["name"],r);const i=T(t,["parameters"]);i!=null&&C(e,["parameters"],i);const s=T(t,["parametersJsonSchema"]);s!=null&&C(e,["parametersJsonSchema"],s);const o=T(t,["response"]);o!=null&&C(e,["response"],o);const a=T(t,["responseJsonSchema"]);return a!=null&&C(e,["responseJsonSchema"],a),e}function tst(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],ef(t,r)),n}function nst(t,e){const n={},r=T(e,["name"]);return r!=null&&C(n,["_url","name"],ef(t,r)),n}function rst(t){const e={};if(T(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function ist(t){const e={};if(T(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function sst(t,e){const n={},r=T(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function ost(t,e){const n={},r=T(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function ast(t){const e={},n=T(t,["config"]);return n!=null&&sst(n,e),e}function lst(t){const e={},n=T(t,["config"]);return n!=null&&ost(n,e),e}function cst(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["cachedContents"],s)}return e}function ust(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["cachedContents"],s)}return e}function dst(t){const e={},n=T(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=T(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=T(t,["fileData"]);s!=null&&C(e,["fileData"],Xit(s));const o=T(t,["functionCall"]);o!=null&&C(e,["functionCall"],Qit(o));const a=T(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=T(t,["inlineData"]);l!=null&&C(e,["inlineData"],zit(l));const c=T(t,["text"]);c!=null&&C(e,["text"],c);const d=T(t,["thought"]);d!=null&&C(e,["thought"],d);const h=T(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=T(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function fst(t){const e={},n=T(t,["functionCallingConfig"]);n!=null&&C(e,["functionCallingConfig"],Zit(n));const r=T(t,["retrievalConfig"]);return r!=null&&C(e,["retrievalConfig"],r),e}function hst(t){const e={},n=T(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(T(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=T(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=T(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=T(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),T(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],rst(a));const l=T(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],ist(l));const c=T(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function pst(t){const e={},n=T(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>est(m))),C(e,["functionDeclarations"],h)}const r=T(t,["retrieval"]);r!=null&&C(e,["retrieval"],r);const i=T(t,["googleSearchRetrieval"]);i!=null&&C(e,["googleSearchRetrieval"],i);const s=T(t,["computerUse"]);if(s!=null&&C(e,["computerUse"],s),T(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=T(t,["codeExecution"]);o!=null&&C(e,["codeExecution"],o);const a=T(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const l=T(t,["googleMaps"]);l!=null&&C(e,["googleMaps"],l);const c=T(t,["googleSearch"]);c!=null&&C(e,["googleSearch"],c);const d=T(t,["urlContext"]);return d!=null&&C(e,["urlContext"],d),e}function mst(t,e){const n={},r=T(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=T(t,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),n}function gst(t,e){const n={},r=T(t,["ttl"]);e!==void 0&&r!=null&&C(e,["ttl"],r);const i=T(t,["expireTime"]);return e!==void 0&&i!=null&&C(e,["expireTime"],i),n}function yst(t,e){const n={},r=T(e,["name"]);r!=null&&C(n,["_url","name"],ef(t,r));const i=T(e,["config"]);return i!=null&&mst(i,n),n}function xst(t,e){const n={},r=T(e,["name"]);r!=null&&C(n,["_url","name"],ef(t,r));const i=T(e,["config"]);return i!=null&&gst(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vst extends Zd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new f0(Dd.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Git(this.apiClient,e);return a=Pt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=qit(this.apiClient,e);return a=Pt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=nst(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=tst(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Wit(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Jit(d),m=new lZ;return Object.assign(m,h),m})}else{const c=Kit(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Yit(d),m=new lZ;return Object.assign(m,h),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=xst(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}else{const c=yst(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=lst(e);return a=Pt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=ust(d),m=new cZ;return Object.assign(m,h),m})}else{const c=ast(e);return a=Pt("cachedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=cst(d),m=new cZ;return Object.assign(m,h),m})}}}function tN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gZ(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function an(t){return this instanceof an?(this.v=t,this):new an(t)}function Wl(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(v){return Promise.resolve(v).then(g,h)}}function a(g,v){r[g]&&(i[g]=function(x){return new Promise(function(b,w){s.push([g,x,b,w])>1||l(g,x)})},v&&(i[g]=v(i[g])))}function l(g,v){try{c(r[g](v))}catch(x){m(s[0][3],x)}}function c(g){g.value instanceof an?Promise.resolve(g.value.v).then(d,h):m(s[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function m(g,v){g(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Yl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gZ=="function"?gZ(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bst(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:_pe(n)}function _pe(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function wst(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function yZ(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!_pe(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class Est{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Sst(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Sst{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),wst(s)}async sendMessage(e){var n;await this.sendPromise;const r=Fs(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,c=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(a=d.slice(h))!==null&&a!==void 0?a:[]);const g=c?[c]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Fs(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?yZ(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Wl(this,arguments,function*(){var i,s,o,a,l,c;const d=[];try{for(var h=!0,m=Yl(e),g;g=yield an(m.next()),i=g.done,!i;h=!0){a=g.value,h=!1;const v=a;if(bst(v)){const x=(c=(l=v.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;x!==void 0&&d.push(x)}yield yield an(v)}}catch(v){s={error:v}}finally{try{!h&&!i&&(o=m.return)&&(yield an(o.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,d)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...yZ(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vP extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,vP.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ast(t){const e={},n=T(t,["file"]);return n!=null&&C(e,["file"],n),e}function Tst(t){const e={},n=T(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function kst(t){const e={},n=T(t,["name"]);return n!=null&&C(e,["_url","file"],Spe(n)),e}function Nst(t){const e={},n=T(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function Cst(t){const e={},n=T(t,["name"]);return n!=null&&C(e,["_url","file"],Spe(n)),e}function Pst(t,e){const n={},r=T(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function _st(t){const e={},n=T(t,["config"]);return n!=null&&Pst(n,e),e}function Ist(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rst extends Zd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new f0(Dd.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_st(e);return s=Pt("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=Ist(l),d=new jrt;return Object.assign(d,c),d})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Ast(e);return s=Pt("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Tst(l),d=new Drt;return Object.assign(d,c),d})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Cst(e);return s=Pt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=kst(e);return s=Pt("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=Nst(l),d=new Brt;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iT(t){const e={},n=T(t,["data"]);if(n!=null&&C(e,["data"],n),T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Ost(t){const e={},n=T(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Yst(s))),C(e,["parts"],i)}const r=T(t,["role"]);return r!=null&&C(e,["role"],r),e}function Mst(t){const e={};if(T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Lst(t){const e={},n=T(t,["id"]);n!=null&&C(e,["id"],n);const r=T(t,["args"]);r!=null&&C(e,["args"],r);const i=T(t,["name"]);if(i!=null&&C(e,["name"],i),T(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jst(t){const e={};if(T(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=T(t,["description"]);n!=null&&C(e,["description"],n);const r=T(t,["name"]);r!=null&&C(e,["name"],r);const i=T(t,["parameters"]);i!=null&&C(e,["parameters"],i);const s=T(t,["parametersJsonSchema"]);s!=null&&C(e,["parametersJsonSchema"],s);const o=T(t,["response"]);o!=null&&C(e,["response"],o);const a=T(t,["responseJsonSchema"]);return a!=null&&C(e,["responseJsonSchema"],a),e}function Dst(t){const e={},n=T(t,["modelSelectionConfig"]);n!=null&&C(e,["modelConfig"],n);const r=T(t,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=T(t,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const s=T(t,["candidateCount"]);s!=null&&C(e,["candidateCount"],s);const o=T(t,["enableAffectiveDialog"]);o!=null&&C(e,["enableAffectiveDialog"],o);const a=T(t,["frequencyPenalty"]);a!=null&&C(e,["frequencyPenalty"],a);const l=T(t,["logprobs"]);l!=null&&C(e,["logprobs"],l);const c=T(t,["maxOutputTokens"]);c!=null&&C(e,["maxOutputTokens"],c);const d=T(t,["mediaResolution"]);d!=null&&C(e,["mediaResolution"],d);const h=T(t,["presencePenalty"]);h!=null&&C(e,["presencePenalty"],h);const m=T(t,["responseLogprobs"]);m!=null&&C(e,["responseLogprobs"],m);const g=T(t,["responseMimeType"]);g!=null&&C(e,["responseMimeType"],g);const v=T(t,["responseModalities"]);v!=null&&C(e,["responseModalities"],v);const x=T(t,["responseSchema"]);x!=null&&C(e,["responseSchema"],x);const b=T(t,["routingConfig"]);b!=null&&C(e,["routingConfig"],b);const w=T(t,["seed"]);w!=null&&C(e,["seed"],w);const k=T(t,["speechConfig"]);k!=null&&C(e,["speechConfig"],k);const N=T(t,["stopSequences"]);N!=null&&C(e,["stopSequences"],N);const O=T(t,["temperature"]);O!=null&&C(e,["temperature"],O);const D=T(t,["thinkingConfig"]);D!=null&&C(e,["thinkingConfig"],D);const _=T(t,["topK"]);_!=null&&C(e,["topK"],_);const F=T(t,["topP"]);if(F!=null&&C(e,["topP"],F),T(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Bst(t){const e={};if(T(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Ust(t){const e={};if(T(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Fst(t,e){const n={},r=T(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=T(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const s=T(t,["temperature"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","temperature"],s);const o=T(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const a=T(t,["topK"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topK"],a);const l=T(t,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const c=T(t,["mediaResolution"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","mediaResolution"],c);const d=T(t,["seed"]);e!==void 0&&d!=null&&C(e,["setup","generationConfig","seed"],d);const h=T(t,["speechConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","speechConfig"],EB(h));const m=T(t,["thinkingConfig"]);e!==void 0&&m!=null&&C(e,["setup","generationConfig","thinkingConfig"],m);const g=T(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=T(t,["systemInstruction"]);e!==void 0&&v!=null&&C(e,["setup","systemInstruction"],Ost(Fs(v)));const x=T(t,["tools"]);if(e!==void 0&&x!=null){let _=_v(x);Array.isArray(_)&&(_=_.map(F=>Xst(Pv(F)))),C(e,["setup","tools"],_)}const b=T(t,["sessionResumption"]);e!==void 0&&b!=null&&C(e,["setup","sessionResumption"],Jst(b));const w=T(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","inputAudioTranscription"],w);const k=T(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&C(e,["setup","outputAudioTranscription"],k);const N=T(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&C(e,["setup","realtimeInputConfig"],N);const O=T(t,["contextWindowCompression"]);e!==void 0&&O!=null&&C(e,["setup","contextWindowCompression"],O);const D=T(t,["proactivity"]);if(e!==void 0&&D!=null&&C(e,["setup","proactivity"],D),T(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function $st(t,e){const n={},r=T(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],Dst(r));const i=T(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const s=T(t,["temperature"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","temperature"],s);const o=T(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const a=T(t,["topK"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topK"],a);const l=T(t,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const c=T(t,["mediaResolution"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","mediaResolution"],c);const d=T(t,["seed"]);e!==void 0&&d!=null&&C(e,["setup","generationConfig","seed"],d);const h=T(t,["speechConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","speechConfig"],EB(h));const m=T(t,["thinkingConfig"]);e!==void 0&&m!=null&&C(e,["setup","generationConfig","thinkingConfig"],m);const g=T(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=T(t,["systemInstruction"]);e!==void 0&&v!=null&&C(e,["setup","systemInstruction"],Fs(v));const x=T(t,["tools"]);if(e!==void 0&&x!=null){let F=_v(x);Array.isArray(F)&&(F=F.map(z=>Qst(Pv(z)))),C(e,["setup","tools"],F)}const b=T(t,["sessionResumption"]);e!==void 0&&b!=null&&C(e,["setup","sessionResumption"],b);const w=T(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","inputAudioTranscription"],w);const k=T(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&C(e,["setup","outputAudioTranscription"],k);const N=T(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&C(e,["setup","realtimeInputConfig"],N);const O=T(t,["contextWindowCompression"]);e!==void 0&&O!=null&&C(e,["setup","contextWindowCompression"],O);const D=T(t,["proactivity"]);e!==void 0&&D!=null&&C(e,["setup","proactivity"],D);const _=T(t,["explicitVadSignal"]);return e!==void 0&&_!=null&&C(e,["setup","explicitVadSignal"],_),n}function zst(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["setup","model"],Vn(t,r));const i=T(e,["config"]);return i!=null&&C(n,["config"],Fst(i,n)),n}function Vst(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["setup","model"],Vn(t,r));const i=T(e,["config"]);return i!=null&&C(n,["config"],$st(i,n)),n}function Hst(t){const e={},n=T(t,["musicGenerationConfig"]);return n!=null&&C(e,["musicGenerationConfig"],n),e}function qst(t){const e={},n=T(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["weightedPrompts"],r)}return e}function Gst(t){const e={},n=T(t,["media"]);if(n!=null){let c=xpe(n);Array.isArray(c)&&(c=c.map(d=>iT(d))),C(e,["mediaChunks"],c)}const r=T(t,["audio"]);r!=null&&C(e,["audio"],iT(bpe(r)));const i=T(t,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const s=T(t,["video"]);s!=null&&C(e,["video"],iT(vpe(s)));const o=T(t,["text"]);o!=null&&C(e,["text"],o);const a=T(t,["activityStart"]);a!=null&&C(e,["activityStart"],a);const l=T(t,["activityEnd"]);return l!=null&&C(e,["activityEnd"],l),e}function Kst(t){const e={},n=T(t,["media"]);if(n!=null){let c=xpe(n);Array.isArray(c)&&(c=c.map(d=>d)),C(e,["mediaChunks"],c)}const r=T(t,["audio"]);r!=null&&C(e,["audio"],bpe(r));const i=T(t,["audioStreamEnd"]);i!=null&&C(e,["audioStreamEnd"],i);const s=T(t,["video"]);s!=null&&C(e,["video"],vpe(s));const o=T(t,["text"]);o!=null&&C(e,["text"],o);const a=T(t,["activityStart"]);a!=null&&C(e,["activityStart"],a);const l=T(t,["activityEnd"]);return l!=null&&C(e,["activityEnd"],l),e}function Wst(t){const e={},n=T(t,["setupComplete"]);n!=null&&C(e,["setupComplete"],n);const r=T(t,["serverContent"]);r!=null&&C(e,["serverContent"],r);const i=T(t,["toolCall"]);i!=null&&C(e,["toolCall"],i);const s=T(t,["toolCallCancellation"]);s!=null&&C(e,["toolCallCancellation"],s);const o=T(t,["usageMetadata"]);o!=null&&C(e,["usageMetadata"],Zst(o));const a=T(t,["goAway"]);a!=null&&C(e,["goAway"],a);const l=T(t,["sessionResumptionUpdate"]);l!=null&&C(e,["sessionResumptionUpdate"],l);const c=T(t,["voiceActivityDetectionSignal"]);return c!=null&&C(e,["voiceActivityDetectionSignal"],c),e}function Yst(t){const e={},n=T(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=T(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=T(t,["fileData"]);s!=null&&C(e,["fileData"],Mst(s));const o=T(t,["functionCall"]);o!=null&&C(e,["functionCall"],Lst(o));const a=T(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=T(t,["inlineData"]);l!=null&&C(e,["inlineData"],iT(l));const c=T(t,["text"]);c!=null&&C(e,["text"],c);const d=T(t,["thought"]);d!=null&&C(e,["thought"],d);const h=T(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=T(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function Jst(t){const e={},n=T(t,["handle"]);if(n!=null&&C(e,["handle"],n),T(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Xst(t){const e={},n=T(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(T(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=T(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=T(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=T(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),T(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],Bst(a));const l=T(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],Ust(l));const c=T(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function Qst(t){const e={},n=T(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>jst(m))),C(e,["functionDeclarations"],h)}const r=T(t,["retrieval"]);r!=null&&C(e,["retrieval"],r);const i=T(t,["googleSearchRetrieval"]);i!=null&&C(e,["googleSearchRetrieval"],i);const s=T(t,["computerUse"]);if(s!=null&&C(e,["computerUse"],s),T(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=T(t,["codeExecution"]);o!=null&&C(e,["codeExecution"],o);const a=T(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const l=T(t,["googleMaps"]);l!=null&&C(e,["googleMaps"],l);const c=T(t,["googleSearch"]);c!=null&&C(e,["googleSearch"],c);const d=T(t,["urlContext"]);return d!=null&&C(e,["urlContext"],d),e}function Zst(t){const e={},n=T(t,["promptTokenCount"]);n!=null&&C(e,["promptTokenCount"],n);const r=T(t,["cachedContentTokenCount"]);r!=null&&C(e,["cachedContentTokenCount"],r);const i=T(t,["candidatesTokenCount"]);i!=null&&C(e,["responseTokenCount"],i);const s=T(t,["toolUsePromptTokenCount"]);s!=null&&C(e,["toolUsePromptTokenCount"],s);const o=T(t,["thoughtsTokenCount"]);o!=null&&C(e,["thoughtsTokenCount"],o);const a=T(t,["totalTokenCount"]);a!=null&&C(e,["totalTokenCount"],a);const l=T(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["promptTokensDetails"],g)}const c=T(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["cacheTokensDetails"],g)}const d=T(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["responseTokensDetails"],g)}const h=T(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>v)),C(e,["toolUsePromptTokensDetails"],g)}const m=T(t,["trafficType"]);return m!=null&&C(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eot(t){const e={},n=T(t,["data"]);if(n!=null&&C(e,["data"],n),T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function tot(t){const e={},n=T(t,["content"]);n!=null&&C(e,["content"],n);const r=T(t,["citationMetadata"]);r!=null&&C(e,["citationMetadata"],not(r));const i=T(t,["tokenCount"]);i!=null&&C(e,["tokenCount"],i);const s=T(t,["finishReason"]);s!=null&&C(e,["finishReason"],s);const o=T(t,["avgLogprobs"]);o!=null&&C(e,["avgLogprobs"],o);const a=T(t,["groundingMetadata"]);a!=null&&C(e,["groundingMetadata"],a);const l=T(t,["index"]);l!=null&&C(e,["index"],l);const c=T(t,["logprobsResult"]);c!=null&&C(e,["logprobsResult"],c);const d=T(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),C(e,["safetyRatings"],m)}const h=T(t,["urlContextMetadata"]);return h!=null&&C(e,["urlContextMetadata"],h),e}function not(t){const e={},n=T(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),C(e,["citations"],r)}return e}function rot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["contents"]);if(i!=null){let s=rl(i);Array.isArray(s)&&(s=s.map(o=>o)),C(n,["contents"],s)}return n}function iot(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),C(e,["tokensInfo"],i)}return e}function sot(t){const e={},n=T(t,["values"]);n!=null&&C(e,["values"],n);const r=T(t,["statistics"]);return r!=null&&C(e,["statistics"],oot(r)),e}function oot(t){const e={},n=T(t,["truncated"]);n!=null&&C(e,["truncated"],n);const r=T(t,["token_count"]);return r!=null&&C(e,["tokenCount"],r),e}function bP(t){const e={},n=T(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>mat(s))),C(e,["parts"],i)}const r=T(t,["role"]);return r!=null&&C(e,["role"],r),e}function aot(t){const e={},n=T(t,["controlType"]);n!=null&&C(e,["controlType"],n);const r=T(t,["enableControlImageComputation"]);return r!=null&&C(e,["computeControl"],r),e}function lot(t){const e={};if(T(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(T(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(T(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function cot(t,e){const n={},r=T(t,["systemInstruction"]);e!==void 0&&r!=null&&C(e,["systemInstruction"],Fs(r));const i=T(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Mpe(a))),C(e,["tools"],o)}const s=T(t,["generationConfig"]);return e!==void 0&&s!=null&&C(e,["generationConfig"],eat(s)),n}function uot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["contents"]);if(i!=null){let o=rl(i);Array.isArray(o)&&(o=o.map(a=>bP(a))),C(n,["contents"],o)}const s=T(e,["config"]);return s!=null&&lot(s),n}function dot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["contents"]);if(i!=null){let o=rl(i);Array.isArray(o)&&(o=o.map(a=>a)),C(n,["contents"],o)}const s=T(e,["config"]);return s!=null&&cot(s,n),n}function fot(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["totalTokens"]);r!=null&&C(e,["totalTokens"],r);const i=T(t,["cachedContentTokenCount"]);return i!=null&&C(e,["cachedContentTokenCount"],i),e}function hot(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["totalTokens"]);return r!=null&&C(e,["totalTokens"],r),e}function pot(t,e){const n={},r=T(e,["model"]);return r!=null&&C(n,["_url","name"],Vn(t,r)),n}function mot(t,e){const n={},r=T(e,["model"]);return r!=null&&C(n,["_url","name"],Vn(t,r)),n}function got(t){const e={},n=T(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function yot(t){const e={},n=T(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}function xot(t,e){const n={},r=T(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=T(t,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const s=T(t,["numberOfImages"]);e!==void 0&&s!=null&&C(e,["parameters","sampleCount"],s);const o=T(t,["aspectRatio"]);e!==void 0&&o!=null&&C(e,["parameters","aspectRatio"],o);const a=T(t,["guidanceScale"]);e!==void 0&&a!=null&&C(e,["parameters","guidanceScale"],a);const l=T(t,["seed"]);e!==void 0&&l!=null&&C(e,["parameters","seed"],l);const c=T(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&C(e,["parameters","safetySetting"],c);const d=T(t,["personGeneration"]);e!==void 0&&d!=null&&C(e,["parameters","personGeneration"],d);const h=T(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&C(e,["parameters","includeSafetyAttributes"],h);const m=T(t,["includeRaiReason"]);e!==void 0&&m!=null&&C(e,["parameters","includeRaiReason"],m);const g=T(t,["language"]);e!==void 0&&g!=null&&C(e,["parameters","language"],g);const v=T(t,["outputMimeType"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","mimeType"],v);const x=T(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&C(e,["parameters","outputOptions","compressionQuality"],x);const b=T(t,["addWatermark"]);e!==void 0&&b!=null&&C(e,["parameters","addWatermark"],b);const w=T(t,["labels"]);e!==void 0&&w!=null&&C(e,["labels"],w);const k=T(t,["editMode"]);e!==void 0&&k!=null&&C(e,["parameters","editMode"],k);const N=T(t,["baseSteps"]);return e!==void 0&&N!=null&&C(e,["parameters","editConfig","baseSteps"],N),n}function vot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=T(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>wat(l))),C(n,["instances[0]","referenceImages"],a)}const o=T(e,["config"]);return o!=null&&xot(o,n),n}function bot(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>wP(s))),C(e,["generatedImages"],i)}return e}function wot(t,e){const n={},r=T(t,["taskType"]);e!==void 0&&r!=null&&C(e,["requests[]","taskType"],r);const i=T(t,["title"]);e!==void 0&&i!=null&&C(e,["requests[]","title"],i);const s=T(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&C(e,["requests[]","outputDimensionality"],s),T(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(T(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Eot(t,e){const n={},r=T(t,["taskType"]);e!==void 0&&r!=null&&C(e,["instances[]","task_type"],r);const i=T(t,["title"]);e!==void 0&&i!=null&&C(e,["instances[]","title"],i);const s=T(t,["outputDimensionality"]);e!==void 0&&s!=null&&C(e,["parameters","outputDimensionality"],s);const o=T(t,["mimeType"]);e!==void 0&&o!=null&&C(e,["instances[]","mimeType"],o);const a=T(t,["autoTruncate"]);return e!==void 0&&a!=null&&C(e,["parameters","autoTruncate"],a),n}function Sot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["contents"]);if(i!=null){let a=vB(t,i);Array.isArray(a)&&(a=a.map(l=>l)),C(n,["requests[]","content"],a)}const s=T(e,["config"]);s!=null&&wot(s,n);const o=T(e,["model"]);return o!==void 0&&C(n,["requests[]","model"],Vn(t,o)),n}function Aot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["contents"]);if(i!=null){let o=vB(t,i);Array.isArray(o)&&(o=o.map(a=>a)),C(n,["instances[]","content"],o)}const s=T(e,["config"]);return s!=null&&Eot(s,n),n}function Tot(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["embeddings"],s)}const i=T(t,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function kot(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>sot(o))),C(e,["embeddings"],s)}const i=T(t,["metadata"]);return i!=null&&C(e,["metadata"],i),e}function Not(t){const e={},n=T(t,["endpoint"]);n!=null&&C(e,["name"],n);const r=T(t,["deployedModelId"]);return r!=null&&C(e,["deployedModelId"],r),e}function Cot(t){const e={};if(T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Pot(t){const e={},n=T(t,["id"]);n!=null&&C(e,["id"],n);const r=T(t,["args"]);r!=null&&C(e,["args"],r);const i=T(t,["name"]);if(i!=null&&C(e,["name"],i),T(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _ot(t){const e={},n=T(t,["mode"]);n!=null&&C(e,["mode"],n);const r=T(t,["allowedFunctionNames"]);if(r!=null&&C(e,["allowedFunctionNames"],r),T(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Iot(t){const e={};if(T(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=T(t,["description"]);n!=null&&C(e,["description"],n);const r=T(t,["name"]);r!=null&&C(e,["name"],r);const i=T(t,["parameters"]);i!=null&&C(e,["parameters"],i);const s=T(t,["parametersJsonSchema"]);s!=null&&C(e,["parametersJsonSchema"],s);const o=T(t,["response"]);o!=null&&C(e,["response"],o);const a=T(t,["responseJsonSchema"]);return a!=null&&C(e,["responseJsonSchema"],a),e}function Rot(t,e,n){const r={},i=T(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],bP(Fs(i)));const s=T(e,["temperature"]);s!=null&&C(r,["temperature"],s);const o=T(e,["topP"]);o!=null&&C(r,["topP"],o);const a=T(e,["topK"]);a!=null&&C(r,["topK"],a);const l=T(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=T(e,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const d=T(e,["stopSequences"]);d!=null&&C(r,["stopSequences"],d);const h=T(e,["responseLogprobs"]);h!=null&&C(r,["responseLogprobs"],h);const m=T(e,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=T(e,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const v=T(e,["frequencyPenalty"]);v!=null&&C(r,["frequencyPenalty"],v);const x=T(e,["seed"]);x!=null&&C(r,["seed"],x);const b=T(e,["responseMimeType"]);b!=null&&C(r,["responseMimeType"],b);const w=T(e,["responseSchema"]);w!=null&&C(r,["responseSchema"],bB(w));const k=T(e,["responseJsonSchema"]);if(k!=null&&C(r,["responseJsonSchema"],k),T(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(T(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=T(e,["safetySettings"]);if(n!==void 0&&N!=null){let U=N;Array.isArray(U)&&(U=U.map(A=>Eat(A))),C(n,["safetySettings"],U)}const O=T(e,["tools"]);if(n!==void 0&&O!=null){let U=_v(O);Array.isArray(U)&&(U=U.map(A=>Pat(Pv(A)))),C(n,["tools"],U)}const D=T(e,["toolConfig"]);if(n!==void 0&&D!=null&&C(n,["toolConfig"],Cat(D)),T(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=T(e,["cachedContent"]);n!==void 0&&_!=null&&C(n,["cachedContent"],ef(t,_));const F=T(e,["responseModalities"]);F!=null&&C(r,["responseModalities"],F);const z=T(e,["mediaResolution"]);z!=null&&C(r,["mediaResolution"],z);const L=T(e,["speechConfig"]);if(L!=null&&C(r,["speechConfig"],wB(L)),T(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=T(e,["thinkingConfig"]);$!=null&&C(r,["thinkingConfig"],$);const G=T(e,["imageConfig"]);G!=null&&C(r,["imageConfig"],sat(G));const V=T(e,["enableEnhancedCivicAnswers"]);return V!=null&&C(r,["enableEnhancedCivicAnswers"],V),r}function Oot(t,e,n){const r={},i=T(e,["systemInstruction"]);n!==void 0&&i!=null&&C(n,["systemInstruction"],Fs(i));const s=T(e,["temperature"]);s!=null&&C(r,["temperature"],s);const o=T(e,["topP"]);o!=null&&C(r,["topP"],o);const a=T(e,["topK"]);a!=null&&C(r,["topK"],a);const l=T(e,["candidateCount"]);l!=null&&C(r,["candidateCount"],l);const c=T(e,["maxOutputTokens"]);c!=null&&C(r,["maxOutputTokens"],c);const d=T(e,["stopSequences"]);d!=null&&C(r,["stopSequences"],d);const h=T(e,["responseLogprobs"]);h!=null&&C(r,["responseLogprobs"],h);const m=T(e,["logprobs"]);m!=null&&C(r,["logprobs"],m);const g=T(e,["presencePenalty"]);g!=null&&C(r,["presencePenalty"],g);const v=T(e,["frequencyPenalty"]);v!=null&&C(r,["frequencyPenalty"],v);const x=T(e,["seed"]);x!=null&&C(r,["seed"],x);const b=T(e,["responseMimeType"]);b!=null&&C(r,["responseMimeType"],b);const w=T(e,["responseSchema"]);w!=null&&C(r,["responseSchema"],bB(w));const k=T(e,["responseJsonSchema"]);k!=null&&C(r,["responseJsonSchema"],k);const N=T(e,["routingConfig"]);N!=null&&C(r,["routingConfig"],N);const O=T(e,["modelSelectionConfig"]);O!=null&&C(r,["modelConfig"],O);const D=T(e,["safetySettings"]);if(n!==void 0&&D!=null){let j=D;Array.isArray(j)&&(j=j.map(q=>q)),C(n,["safetySettings"],j)}const _=T(e,["tools"]);if(n!==void 0&&_!=null){let j=_v(_);Array.isArray(j)&&(j=j.map(q=>Mpe(Pv(q)))),C(n,["tools"],j)}const F=T(e,["toolConfig"]);n!==void 0&&F!=null&&C(n,["toolConfig"],F);const z=T(e,["labels"]);n!==void 0&&z!=null&&C(n,["labels"],z);const L=T(e,["cachedContent"]);n!==void 0&&L!=null&&C(n,["cachedContent"],ef(t,L));const $=T(e,["responseModalities"]);$!=null&&C(r,["responseModalities"],$);const G=T(e,["mediaResolution"]);G!=null&&C(r,["mediaResolution"],G);const V=T(e,["speechConfig"]);V!=null&&C(r,["speechConfig"],wB(V));const U=T(e,["audioTimestamp"]);U!=null&&C(r,["audioTimestamp"],U);const A=T(e,["thinkingConfig"]);A!=null&&C(r,["thinkingConfig"],A);const I=T(e,["imageConfig"]);if(I!=null&&C(r,["imageConfig"],oat(I)),T(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function xZ(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["contents"]);if(i!=null){let o=rl(i);Array.isArray(o)&&(o=o.map(a=>bP(a))),C(n,["contents"],o)}const s=T(e,["config"]);return s!=null&&C(n,["generationConfig"],Rot(t,s,n)),n}function vZ(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["contents"]);if(i!=null){let o=rl(i);Array.isArray(o)&&(o=o.map(a=>a)),C(n,["contents"],o)}const s=T(e,["config"]);return s!=null&&C(n,["generationConfig"],Oot(t,s,n)),n}function bZ(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>tot(c))),C(e,["candidates"],l)}const i=T(t,["modelVersion"]);i!=null&&C(e,["modelVersion"],i);const s=T(t,["promptFeedback"]);s!=null&&C(e,["promptFeedback"],s);const o=T(t,["responseId"]);o!=null&&C(e,["responseId"],o);const a=T(t,["usageMetadata"]);return a!=null&&C(e,["usageMetadata"],a),e}function wZ(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),C(e,["candidates"],c)}const i=T(t,["createTime"]);i!=null&&C(e,["createTime"],i);const s=T(t,["modelVersion"]);s!=null&&C(e,["modelVersion"],s);const o=T(t,["promptFeedback"]);o!=null&&C(e,["promptFeedback"],o);const a=T(t,["responseId"]);a!=null&&C(e,["responseId"],a);const l=T(t,["usageMetadata"]);return l!=null&&C(e,["usageMetadata"],l),e}function Mot(t,e){const n={};if(T(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(T(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=T(t,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=T(t,["aspectRatio"]);e!==void 0&&i!=null&&C(e,["parameters","aspectRatio"],i);const s=T(t,["guidanceScale"]);if(e!==void 0&&s!=null&&C(e,["parameters","guidanceScale"],s),T(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=T(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&C(e,["parameters","safetySetting"],o);const a=T(t,["personGeneration"]);e!==void 0&&a!=null&&C(e,["parameters","personGeneration"],a);const l=T(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&C(e,["parameters","includeSafetyAttributes"],l);const c=T(t,["includeRaiReason"]);e!==void 0&&c!=null&&C(e,["parameters","includeRaiReason"],c);const d=T(t,["language"]);e!==void 0&&d!=null&&C(e,["parameters","language"],d);const h=T(t,["outputMimeType"]);e!==void 0&&h!=null&&C(e,["parameters","outputOptions","mimeType"],h);const m=T(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&C(e,["parameters","outputOptions","compressionQuality"],m),T(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(T(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=T(t,["imageSize"]);if(e!==void 0&&g!=null&&C(e,["parameters","sampleImageSize"],g),T(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Lot(t,e){const n={},r=T(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=T(t,["negativePrompt"]);e!==void 0&&i!=null&&C(e,["parameters","negativePrompt"],i);const s=T(t,["numberOfImages"]);e!==void 0&&s!=null&&C(e,["parameters","sampleCount"],s);const o=T(t,["aspectRatio"]);e!==void 0&&o!=null&&C(e,["parameters","aspectRatio"],o);const a=T(t,["guidanceScale"]);e!==void 0&&a!=null&&C(e,["parameters","guidanceScale"],a);const l=T(t,["seed"]);e!==void 0&&l!=null&&C(e,["parameters","seed"],l);const c=T(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&C(e,["parameters","safetySetting"],c);const d=T(t,["personGeneration"]);e!==void 0&&d!=null&&C(e,["parameters","personGeneration"],d);const h=T(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&C(e,["parameters","includeSafetyAttributes"],h);const m=T(t,["includeRaiReason"]);e!==void 0&&m!=null&&C(e,["parameters","includeRaiReason"],m);const g=T(t,["language"]);e!==void 0&&g!=null&&C(e,["parameters","language"],g);const v=T(t,["outputMimeType"]);e!==void 0&&v!=null&&C(e,["parameters","outputOptions","mimeType"],v);const x=T(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&C(e,["parameters","outputOptions","compressionQuality"],x);const b=T(t,["addWatermark"]);e!==void 0&&b!=null&&C(e,["parameters","addWatermark"],b);const w=T(t,["labels"]);e!==void 0&&w!=null&&C(e,["labels"],w);const k=T(t,["imageSize"]);e!==void 0&&k!=null&&C(e,["parameters","sampleImageSize"],k);const N=T(t,["enhancePrompt"]);return e!==void 0&&N!=null&&C(e,["parameters","enhancePrompt"],N),n}function jot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=T(e,["config"]);return s!=null&&Mot(s,n),n}function Dot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=T(e,["config"]);return s!=null&&Lot(s,n),n}function Bot(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Jot(o))),C(e,["generatedImages"],s)}const i=T(t,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],Rpe(i)),e}function Uot(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>wP(o))),C(e,["generatedImages"],s)}const i=T(t,["positivePromptSafetyAttributes"]);return i!=null&&C(e,["positivePromptSafetyAttributes"],Ope(i)),e}function Fot(t,e){const n={},r=T(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r),T(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(T(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=T(t,["durationSeconds"]);if(e!==void 0&&i!=null&&C(e,["parameters","durationSeconds"],i),T(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=T(t,["aspectRatio"]);e!==void 0&&s!=null&&C(e,["parameters","aspectRatio"],s);const o=T(t,["resolution"]);e!==void 0&&o!=null&&C(e,["parameters","resolution"],o);const a=T(t,["personGeneration"]);if(e!==void 0&&a!=null&&C(e,["parameters","personGeneration"],a),T(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=T(t,["negativePrompt"]);e!==void 0&&l!=null&&C(e,["parameters","negativePrompt"],l);const c=T(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&C(e,["parameters","enhancePrompt"],c),T(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=T(t,["lastFrame"]);e!==void 0&&d!=null&&C(e,["instances[0]","lastFrame"],EP(d));const h=T(t,["referenceImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>zat(g))),C(e,["instances[0]","referenceImages"],m)}if(T(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(T(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function $ot(t,e){const n={},r=T(t,["numberOfVideos"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=T(t,["outputGcsUri"]);e!==void 0&&i!=null&&C(e,["parameters","storageUri"],i);const s=T(t,["fps"]);e!==void 0&&s!=null&&C(e,["parameters","fps"],s);const o=T(t,["durationSeconds"]);e!==void 0&&o!=null&&C(e,["parameters","durationSeconds"],o);const a=T(t,["seed"]);e!==void 0&&a!=null&&C(e,["parameters","seed"],a);const l=T(t,["aspectRatio"]);e!==void 0&&l!=null&&C(e,["parameters","aspectRatio"],l);const c=T(t,["resolution"]);e!==void 0&&c!=null&&C(e,["parameters","resolution"],c);const d=T(t,["personGeneration"]);e!==void 0&&d!=null&&C(e,["parameters","personGeneration"],d);const h=T(t,["pubsubTopic"]);e!==void 0&&h!=null&&C(e,["parameters","pubsubTopic"],h);const m=T(t,["negativePrompt"]);e!==void 0&&m!=null&&C(e,["parameters","negativePrompt"],m);const g=T(t,["enhancePrompt"]);e!==void 0&&g!=null&&C(e,["parameters","enhancePrompt"],g);const v=T(t,["generateAudio"]);e!==void 0&&v!=null&&C(e,["parameters","generateAudio"],v);const x=T(t,["lastFrame"]);e!==void 0&&x!=null&&C(e,["instances[0]","lastFrame"],oc(x));const b=T(t,["referenceImages"]);if(e!==void 0&&b!=null){let N=b;Array.isArray(N)&&(N=N.map(O=>Vat(O))),C(e,["instances[0]","referenceImages"],N)}const w=T(t,["mask"]);e!==void 0&&w!=null&&C(e,["instances[0]","mask"],$at(w));const k=T(t,["compressionQuality"]);return e!==void 0&&k!=null&&C(e,["parameters","compressionQuality"],k),n}function zot(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(t,["done"]);i!=null&&C(e,["done"],i);const s=T(t,["error"]);s!=null&&C(e,["error"],s);const o=T(t,["response","generateVideoResponse"]);return o!=null&&C(e,["response"],Got(o)),e}function Vot(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(t,["done"]);i!=null&&C(e,["done"],i);const s=T(t,["error"]);s!=null&&C(e,["error"],s);const o=T(t,["response"]);return o!=null&&C(e,["response"],Kot(o)),e}function Hot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=T(e,["image"]);s!=null&&C(n,["instances[0]","image"],EP(s));const o=T(e,["video"]);o!=null&&C(n,["instances[0]","video"],Lpe(o));const a=T(e,["source"]);a!=null&&Wot(a,n);const l=T(e,["config"]);return l!=null&&Fot(l,n),n}function qot(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["prompt"]);i!=null&&C(n,["instances[0]","prompt"],i);const s=T(e,["image"]);s!=null&&C(n,["instances[0]","image"],oc(s));const o=T(e,["video"]);o!=null&&C(n,["instances[0]","video"],jpe(o));const a=T(e,["source"]);a!=null&&Yot(a,n);const l=T(e,["config"]);return l!=null&&$ot(l,n),n}function Got(t){const e={},n=T(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Qot(o))),C(e,["generatedVideos"],s)}const r=T(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=T(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function Kot(t){const e={},n=T(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>Zot(o))),C(e,["generatedVideos"],s)}const r=T(t,["raiMediaFilteredCount"]);r!=null&&C(e,["raiMediaFilteredCount"],r);const i=T(t,["raiMediaFilteredReasons"]);return i!=null&&C(e,["raiMediaFilteredReasons"],i),e}function Wot(t,e){const n={},r=T(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=T(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],EP(i));const s=T(t,["video"]);return e!==void 0&&s!=null&&C(e,["instances[0]","video"],Lpe(s)),n}function Yot(t,e){const n={},r=T(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=T(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],oc(i));const s=T(t,["video"]);return e!==void 0&&s!=null&&C(e,["instances[0]","video"],jpe(s)),n}function Jot(t){const e={},n=T(t,["_self"]);n!=null&&C(e,["image"],aat(n));const r=T(t,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=T(t,["_self"]);return i!=null&&C(e,["safetyAttributes"],Rpe(i)),e}function wP(t){const e={},n=T(t,["_self"]);n!=null&&C(e,["image"],Ipe(n));const r=T(t,["raiFilteredReason"]);r!=null&&C(e,["raiFilteredReason"],r);const i=T(t,["_self"]);i!=null&&C(e,["safetyAttributes"],Ope(i));const s=T(t,["prompt"]);return s!=null&&C(e,["enhancedPrompt"],s),e}function Xot(t){const e={},n=T(t,["_self"]);n!=null&&C(e,["mask"],Ipe(n));const r=T(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),C(e,["labels"],i)}return e}function Qot(t){const e={},n=T(t,["video"]);return n!=null&&C(e,["video"],Uat(n)),e}function Zot(t){const e={},n=T(t,["_self"]);return n!=null&&C(e,["video"],Fat(n)),e}function eat(t){const e={},n=T(t,["modelSelectionConfig"]);n!=null&&C(e,["modelConfig"],n);const r=T(t,["responseJsonSchema"]);r!=null&&C(e,["responseJsonSchema"],r);const i=T(t,["audioTimestamp"]);i!=null&&C(e,["audioTimestamp"],i);const s=T(t,["candidateCount"]);s!=null&&C(e,["candidateCount"],s);const o=T(t,["enableAffectiveDialog"]);o!=null&&C(e,["enableAffectiveDialog"],o);const a=T(t,["frequencyPenalty"]);a!=null&&C(e,["frequencyPenalty"],a);const l=T(t,["logprobs"]);l!=null&&C(e,["logprobs"],l);const c=T(t,["maxOutputTokens"]);c!=null&&C(e,["maxOutputTokens"],c);const d=T(t,["mediaResolution"]);d!=null&&C(e,["mediaResolution"],d);const h=T(t,["presencePenalty"]);h!=null&&C(e,["presencePenalty"],h);const m=T(t,["responseLogprobs"]);m!=null&&C(e,["responseLogprobs"],m);const g=T(t,["responseMimeType"]);g!=null&&C(e,["responseMimeType"],g);const v=T(t,["responseModalities"]);v!=null&&C(e,["responseModalities"],v);const x=T(t,["responseSchema"]);x!=null&&C(e,["responseSchema"],x);const b=T(t,["routingConfig"]);b!=null&&C(e,["routingConfig"],b);const w=T(t,["seed"]);w!=null&&C(e,["seed"],w);const k=T(t,["speechConfig"]);k!=null&&C(e,["speechConfig"],k);const N=T(t,["stopSequences"]);N!=null&&C(e,["stopSequences"],N);const O=T(t,["temperature"]);O!=null&&C(e,["temperature"],O);const D=T(t,["thinkingConfig"]);D!=null&&C(e,["thinkingConfig"],D);const _=T(t,["topK"]);_!=null&&C(e,["topK"],_);const F=T(t,["topP"]);if(F!=null&&C(e,["topP"],F),T(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function tat(t,e){const n={},r=T(e,["model"]);return r!=null&&C(n,["_url","name"],Vn(t,r)),n}function nat(t,e){const n={},r=T(e,["model"]);return r!=null&&C(n,["_url","name"],Vn(t,r)),n}function rat(t){const e={};if(T(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function iat(t){const e={};if(T(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function sat(t){const e={},n=T(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=T(t,["imageSize"]);if(r!=null&&C(e,["imageSize"],r),T(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(T(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function oat(t){const e={},n=T(t,["aspectRatio"]);n!=null&&C(e,["aspectRatio"],n);const r=T(t,["imageSize"]);r!=null&&C(e,["imageSize"],r);const i=T(t,["outputMimeType"]);i!=null&&C(e,["imageOutputOptions","mimeType"],i);const s=T(t,["outputCompressionQuality"]);return s!=null&&C(e,["imageOutputOptions","compressionQuality"],s),e}function aat(t){const e={},n=T(t,["bytesBase64Encoded"]);n!=null&&C(e,["imageBytes"],Yh(n));const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Ipe(t){const e={},n=T(t,["gcsUri"]);n!=null&&C(e,["gcsUri"],n);const r=T(t,["bytesBase64Encoded"]);r!=null&&C(e,["imageBytes"],Yh(r));const i=T(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function EP(t){const e={};if(T(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=T(t,["imageBytes"]);n!=null&&C(e,["bytesBase64Encoded"],Yh(n));const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function oc(t){const e={},n=T(t,["gcsUri"]);n!=null&&C(e,["gcsUri"],n);const r=T(t,["imageBytes"]);r!=null&&C(e,["bytesBase64Encoded"],Yh(r));const i=T(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function lat(t,e,n){const r={},i=T(e,["pageSize"]);n!==void 0&&i!=null&&C(n,["_query","pageSize"],i);const s=T(e,["pageToken"]);n!==void 0&&s!=null&&C(n,["_query","pageToken"],s);const o=T(e,["filter"]);n!==void 0&&o!=null&&C(n,["_query","filter"],o);const a=T(e,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],Ape(t,a)),r}function cat(t,e,n){const r={},i=T(e,["pageSize"]);n!==void 0&&i!=null&&C(n,["_query","pageSize"],i);const s=T(e,["pageToken"]);n!==void 0&&s!=null&&C(n,["_query","pageToken"],s);const o=T(e,["filter"]);n!==void 0&&o!=null&&C(n,["_query","filter"],o);const a=T(e,["queryBase"]);return n!==void 0&&a!=null&&C(n,["_url","models_url"],Ape(t,a)),r}function uat(t,e){const n={},r=T(e,["config"]);return r!=null&&lat(t,r,n),n}function dat(t,e){const n={},r=T(e,["config"]);return r!=null&&cat(t,r,n),n}function fat(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(t,["_self"]);if(i!=null){let s=Tpe(i);Array.isArray(s)&&(s=s.map(o=>Tj(o))),C(e,["models"],s)}return e}function hat(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(t,["_self"]);if(i!=null){let s=Tpe(i);Array.isArray(s)&&(s=s.map(o=>kj(o))),C(e,["models"],s)}return e}function pat(t){const e={},n=T(t,["maskMode"]);n!=null&&C(e,["maskMode"],n);const r=T(t,["segmentationClasses"]);r!=null&&C(e,["maskClasses"],r);const i=T(t,["maskDilation"]);return i!=null&&C(e,["dilation"],i),e}function Tj(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=T(t,["description"]);i!=null&&C(e,["description"],i);const s=T(t,["version"]);s!=null&&C(e,["version"],s);const o=T(t,["_self"]);o!=null&&C(e,["tunedModelInfo"],_at(o));const a=T(t,["inputTokenLimit"]);a!=null&&C(e,["inputTokenLimit"],a);const l=T(t,["outputTokenLimit"]);l!=null&&C(e,["outputTokenLimit"],l);const c=T(t,["supportedGenerationMethods"]);c!=null&&C(e,["supportedActions"],c);const d=T(t,["temperature"]);d!=null&&C(e,["temperature"],d);const h=T(t,["maxTemperature"]);h!=null&&C(e,["maxTemperature"],h);const m=T(t,["topP"]);m!=null&&C(e,["topP"],m);const g=T(t,["topK"]);g!=null&&C(e,["topK"],g);const v=T(t,["thinking"]);return v!=null&&C(e,["thinking"],v),e}function kj(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["displayName"]);r!=null&&C(e,["displayName"],r);const i=T(t,["description"]);i!=null&&C(e,["description"],i);const s=T(t,["versionId"]);s!=null&&C(e,["version"],s);const o=T(t,["deployedModels"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(m=>Not(m))),C(e,["endpoints"],h)}const a=T(t,["labels"]);a!=null&&C(e,["labels"],a);const l=T(t,["_self"]);l!=null&&C(e,["tunedModelInfo"],Iat(l));const c=T(t,["defaultCheckpointId"]);c!=null&&C(e,["defaultCheckpointId"],c);const d=T(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>m)),C(e,["checkpoints"],h)}return e}function mat(t){const e={},n=T(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=T(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=T(t,["fileData"]);s!=null&&C(e,["fileData"],Cot(s));const o=T(t,["functionCall"]);o!=null&&C(e,["functionCall"],Pot(o));const a=T(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=T(t,["inlineData"]);l!=null&&C(e,["inlineData"],eot(l));const c=T(t,["text"]);c!=null&&C(e,["text"],c);const d=T(t,["thought"]);d!=null&&C(e,["thought"],d);const h=T(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=T(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function gat(t){const e={},n=T(t,["productImage"]);return n!=null&&C(e,["image"],oc(n)),e}function yat(t,e){const n={},r=T(t,["numberOfImages"]);e!==void 0&&r!=null&&C(e,["parameters","sampleCount"],r);const i=T(t,["baseSteps"]);e!==void 0&&i!=null&&C(e,["parameters","baseSteps"],i);const s=T(t,["outputGcsUri"]);e!==void 0&&s!=null&&C(e,["parameters","storageUri"],s);const o=T(t,["seed"]);e!==void 0&&o!=null&&C(e,["parameters","seed"],o);const a=T(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&C(e,["parameters","safetySetting"],a);const l=T(t,["personGeneration"]);e!==void 0&&l!=null&&C(e,["parameters","personGeneration"],l);const c=T(t,["addWatermark"]);e!==void 0&&c!=null&&C(e,["parameters","addWatermark"],c);const d=T(t,["outputMimeType"]);e!==void 0&&d!=null&&C(e,["parameters","outputOptions","mimeType"],d);const h=T(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&C(e,["parameters","outputOptions","compressionQuality"],h);const m=T(t,["enhancePrompt"]);e!==void 0&&m!=null&&C(e,["parameters","enhancePrompt"],m);const g=T(t,["labels"]);return e!==void 0&&g!=null&&C(e,["labels"],g),n}function xat(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["source"]);i!=null&&bat(i,n);const s=T(e,["config"]);return s!=null&&yat(s,n),n}function vat(t){const e={},n=T(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>wP(i))),C(e,["generatedImages"],r)}return e}function bat(t,e){const n={},r=T(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=T(t,["personImage"]);e!==void 0&&i!=null&&C(e,["instances[0]","personImage","image"],oc(i));const s=T(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>gat(a))),C(e,["instances[0]","productImages"],o)}return n}function wat(t){const e={},n=T(t,["referenceImage"]);n!=null&&C(e,["referenceImage"],oc(n));const r=T(t,["referenceId"]);r!=null&&C(e,["referenceId"],r);const i=T(t,["referenceType"]);i!=null&&C(e,["referenceType"],i);const s=T(t,["maskImageConfig"]);s!=null&&C(e,["maskImageConfig"],pat(s));const o=T(t,["controlImageConfig"]);o!=null&&C(e,["controlImageConfig"],aot(o));const a=T(t,["styleImageConfig"]);a!=null&&C(e,["styleImageConfig"],a);const l=T(t,["subjectImageConfig"]);return l!=null&&C(e,["subjectImageConfig"],l),e}function Rpe(t){const e={},n=T(t,["safetyAttributes","categories"]);n!=null&&C(e,["categories"],n);const r=T(t,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=T(t,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function Ope(t){const e={},n=T(t,["safetyAttributes","categories"]);n!=null&&C(e,["categories"],n);const r=T(t,["safetyAttributes","scores"]);r!=null&&C(e,["scores"],r);const i=T(t,["contentType"]);return i!=null&&C(e,["contentType"],i),e}function Eat(t){const e={},n=T(t,["category"]);if(n!=null&&C(e,["category"],n),T(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=T(t,["threshold"]);return r!=null&&C(e,["threshold"],r),e}function Sat(t){const e={},n=T(t,["image"]);return n!=null&&C(e,["image"],oc(n)),e}function Aat(t,e){const n={},r=T(t,["mode"]);e!==void 0&&r!=null&&C(e,["parameters","mode"],r);const i=T(t,["maxPredictions"]);e!==void 0&&i!=null&&C(e,["parameters","maxPredictions"],i);const s=T(t,["confidenceThreshold"]);e!==void 0&&s!=null&&C(e,["parameters","confidenceThreshold"],s);const o=T(t,["maskDilation"]);e!==void 0&&o!=null&&C(e,["parameters","maskDilation"],o);const a=T(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&C(e,["parameters","binaryColorThreshold"],a);const l=T(t,["labels"]);return e!==void 0&&l!=null&&C(e,["labels"],l),n}function Tat(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["source"]);i!=null&&Nat(i,n);const s=T(e,["config"]);return s!=null&&Aat(s,n),n}function kat(t){const e={},n=T(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Xot(i))),C(e,["generatedMasks"],r)}return e}function Nat(t,e){const n={},r=T(t,["prompt"]);e!==void 0&&r!=null&&C(e,["instances[0]","prompt"],r);const i=T(t,["image"]);e!==void 0&&i!=null&&C(e,["instances[0]","image"],oc(i));const s=T(t,["scribbleImage"]);return e!==void 0&&s!=null&&C(e,["instances[0]","scribble"],Sat(s)),n}function Cat(t){const e={},n=T(t,["functionCallingConfig"]);n!=null&&C(e,["functionCallingConfig"],_ot(n));const r=T(t,["retrievalConfig"]);return r!=null&&C(e,["retrievalConfig"],r),e}function Pat(t){const e={},n=T(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(T(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=T(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=T(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=T(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),T(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],rat(a));const l=T(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],iat(l));const c=T(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}function Mpe(t){const e={},n=T(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>Iot(m))),C(e,["functionDeclarations"],h)}const r=T(t,["retrieval"]);r!=null&&C(e,["retrieval"],r);const i=T(t,["googleSearchRetrieval"]);i!=null&&C(e,["googleSearchRetrieval"],i);const s=T(t,["computerUse"]);if(s!=null&&C(e,["computerUse"],s),T(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=T(t,["codeExecution"]);o!=null&&C(e,["codeExecution"],o);const a=T(t,["enterpriseWebSearch"]);a!=null&&C(e,["enterpriseWebSearch"],a);const l=T(t,["googleMaps"]);l!=null&&C(e,["googleMaps"],l);const c=T(t,["googleSearch"]);c!=null&&C(e,["googleSearch"],c);const d=T(t,["urlContext"]);return d!=null&&C(e,["urlContext"],d),e}function _at(t){const e={},n=T(t,["baseModel"]);n!=null&&C(e,["baseModel"],n);const r=T(t,["createTime"]);r!=null&&C(e,["createTime"],r);const i=T(t,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function Iat(t){const e={},n=T(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&C(e,["baseModel"],n);const r=T(t,["createTime"]);r!=null&&C(e,["createTime"],r);const i=T(t,["updateTime"]);return i!=null&&C(e,["updateTime"],i),e}function Rat(t,e){const n={},r=T(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=T(t,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const s=T(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&C(e,["defaultCheckpointId"],s),n}function Oat(t,e){const n={},r=T(t,["displayName"]);e!==void 0&&r!=null&&C(e,["displayName"],r);const i=T(t,["description"]);e!==void 0&&i!=null&&C(e,["description"],i);const s=T(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&C(e,["defaultCheckpointId"],s),n}function Mat(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","name"],Vn(t,r));const i=T(e,["config"]);return i!=null&&Rat(i,n),n}function Lat(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["config"]);return i!=null&&Oat(i,n),n}function jat(t,e){const n={},r=T(t,["outputGcsUri"]);e!==void 0&&r!=null&&C(e,["parameters","storageUri"],r);const i=T(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&C(e,["parameters","safetySetting"],i);const s=T(t,["personGeneration"]);e!==void 0&&s!=null&&C(e,["parameters","personGeneration"],s);const o=T(t,["includeRaiReason"]);e!==void 0&&o!=null&&C(e,["parameters","includeRaiReason"],o);const a=T(t,["outputMimeType"]);e!==void 0&&a!=null&&C(e,["parameters","outputOptions","mimeType"],a);const l=T(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&C(e,["parameters","outputOptions","compressionQuality"],l);const c=T(t,["enhanceInputImage"]);e!==void 0&&c!=null&&C(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=T(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&C(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const h=T(t,["labels"]);e!==void 0&&h!=null&&C(e,["labels"],h);const m=T(t,["numberOfImages"]);e!==void 0&&m!=null&&C(e,["parameters","sampleCount"],m);const g=T(t,["mode"]);return e!==void 0&&g!=null&&C(e,["parameters","mode"],g),n}function Dat(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["_url","model"],Vn(t,r));const i=T(e,["image"]);i!=null&&C(n,["instances[0]","image"],oc(i));const s=T(e,["upscaleFactor"]);s!=null&&C(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=T(e,["config"]);return o!=null&&jat(o,n),n}function Bat(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>wP(s))),C(e,["generatedImages"],i)}return e}function Uat(t){const e={},n=T(t,["uri"]);n!=null&&C(e,["uri"],n);const r=T(t,["encodedVideo"]);r!=null&&C(e,["videoBytes"],Yh(r));const i=T(t,["encoding"]);return i!=null&&C(e,["mimeType"],i),e}function Fat(t){const e={},n=T(t,["gcsUri"]);n!=null&&C(e,["uri"],n);const r=T(t,["bytesBase64Encoded"]);r!=null&&C(e,["videoBytes"],Yh(r));const i=T(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}function $at(t){const e={},n=T(t,["image"]);n!=null&&C(e,["_self"],oc(n));const r=T(t,["maskMode"]);return r!=null&&C(e,["maskMode"],r),e}function zat(t){const e={},n=T(t,["image"]);n!=null&&C(e,["image"],EP(n));const r=T(t,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function Vat(t){const e={},n=T(t,["image"]);n!=null&&C(e,["image"],oc(n));const r=T(t,["referenceType"]);return r!=null&&C(e,["referenceType"],r),e}function Lpe(t){const e={},n=T(t,["uri"]);n!=null&&C(e,["uri"],n);const r=T(t,["videoBytes"]);r!=null&&C(e,["encodedVideo"],Yh(r));const i=T(t,["mimeType"]);return i!=null&&C(e,["encoding"],i),e}function jpe(t){const e={},n=T(t,["uri"]);n!=null&&C(e,["gcsUri"],n);const r=T(t,["videoBytes"]);r!=null&&C(e,["bytesBase64Encoded"],Yh(r));const i=T(t,["mimeType"]);return i!=null&&C(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hat(t,e){const n={},r=T(t,["displayName"]);return e!==void 0&&r!=null&&C(e,["displayName"],r),n}function qat(t){const e={},n=T(t,["config"]);return n!=null&&Hat(n,e),e}function Gat(t,e){const n={},r=T(t,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),n}function Kat(t){const e={},n=T(t,["name"]);n!=null&&C(e,["_url","name"],n);const r=T(t,["config"]);return r!=null&&Gat(r,e),e}function Wat(t){const e={},n=T(t,["name"]);return n!=null&&C(e,["_url","name"],n),e}function Yat(t,e){const n={},r=T(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["customMetadata"],s)}const i=T(t,["chunkingConfig"]);return e!==void 0&&i!=null&&C(e,["chunkingConfig"],i),n}function Jat(t){const e={},n=T(t,["name"]);n!=null&&C(e,["name"],n);const r=T(t,["metadata"]);r!=null&&C(e,["metadata"],r);const i=T(t,["done"]);i!=null&&C(e,["done"],i);const s=T(t,["error"]);s!=null&&C(e,["error"],s);const o=T(t,["response"]);return o!=null&&C(e,["response"],Qat(o)),e}function Xat(t){const e={},n=T(t,["fileSearchStoreName"]);n!=null&&C(e,["_url","file_search_store_name"],n);const r=T(t,["fileName"]);r!=null&&C(e,["fileName"],r);const i=T(t,["config"]);return i!=null&&Yat(i,e),e}function Qat(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["parent"]);r!=null&&C(e,["parent"],r);const i=T(t,["documentName"]);return i!=null&&C(e,["documentName"],i),e}function Zat(t,e){const n={},r=T(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function elt(t){const e={},n=T(t,["config"]);return n!=null&&Zat(n,e),e}function tlt(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["fileSearchStores"],s)}return e}function Dpe(t,e){const n={},r=T(t,["mimeType"]);e!==void 0&&r!=null&&C(e,["mimeType"],r);const i=T(t,["displayName"]);e!==void 0&&i!=null&&C(e,["displayName"],i);const s=T(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),C(e,["customMetadata"],a)}const o=T(t,["chunkingConfig"]);return e!==void 0&&o!=null&&C(e,["chunkingConfig"],o),n}function nlt(t){const e={},n=T(t,["fileSearchStoreName"]);n!=null&&C(e,["_url","file_search_store_name"],n);const r=T(t,["config"]);return r!=null&&Dpe(r,e),e}function rlt(t){const e={},n=T(t,["sdkHttpResponse"]);return n!=null&&C(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ilt="Content-Type",slt="X-Server-Timeout",olt="User-Agent",Nj="x-goog-api-client",alt="1.34.0",llt=`google-genai-sdk/${alt}`,clt="v1beta1",ult="v1beta";class dlt{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:clt,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:ult,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&flt(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await EZ(i),new Ej(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await EZ(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Wl(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:d}=yield an(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=s.decode(d,{stream:!0});try{const v=JSON.parse(h);if("error"in v){const x=JSON.parse(JSON.stringify(v.error)),b=x.status,w=x.code,k=`got status: ${b}. ${JSON.stringify(v)}`;if(w>=400&&w<600)throw new vP({message:k,status:w})}}catch(v){if(v.name==="ApiError")throw v}o+=h;let m=-1,g=0;for(;;){m=-1,g=0;for(const b of l){const w=o.indexOf(b);w!==-1&&(m===-1||w<m)&&(m=w,g=b.length)}if(m===-1)break;const v=o.substring(0,m);o=o.substring(m+g);const x=v.trim();if(x.startsWith(a)){const b=x.substring(a.length).trim();try{const w=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield an(new Ej(w))}catch(w){throw new Error(`exception parsing stream chunk ${b}. ${w}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=llt+" "+this.clientOptions.userAgentExtra;return e[olt]=n,e[Nj]=n,e[ilt]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(slt,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},c=this.getFileName(e),d=Pt("upload/v1beta/files",l._url),h=await this.fetchUploadUrl(d,i.sizeBytes,i.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(n),h={};r!=null&&Dpe(r,h);const m=await this.fetchUploadUrl(c,a,l,d,h,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function EZ(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new vP({message:i,status:n}):new Error(i)}}function flt(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=r(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hlt="mcp_used/unknown";let plt=!1;function Bpe(t){for(const e of t)if(mlt(e)||typeof e=="object"&&"inputSchema"in e)return!0;return plt}function Upe(t){var e;const n=(e=t[Nj])!==null&&e!==void 0?e:"";t[Nj]=(n+` ${hlt}`).trimStart()}function mlt(t){return t!==null&&typeof t=="object"&&t instanceof SB}function glt(t){return Wl(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield an(n.listTools({cursor:i}));for(const a of o.tools)yield yield an(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class SB{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new SB(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const d of this.mcpClients)try{for(var a=!0,l=(n=void 0,Yl(glt(d))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const h=i;o.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=d}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Wrt(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ylt(t,e,n){const r=new Frt;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class xlt{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=wlt(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const d=new Promise(N=>{c=N}),h=e.callbacks,m=function(){c({})},g=this.apiClient,v={onopen:m,onmessage:N=>{ylt(g,h.onmessage,N)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(N){}},x=this.webSocketFactory.create(l,blt(o),v);x.connect(),await d;const k={setup:{model:Vn(this.apiClient,e.model)}};return x.send(JSON.stringify(k)),new vlt(x,this.apiClient)}}class vlt{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=qst(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Hst(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Xg.PLAY)}pause(){this.sendPlaybackControl(Xg.PAUSE)}stop(){this.sendPlaybackControl(Xg.STOP)}resetContext(){this.sendPlaybackControl(Xg.RESET_CONTEXT)}close(){this.conn.close()}}function blt(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function wlt(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Elt="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Slt(t,e,n){const r=new Urt;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=Wst(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class Alt{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new xlt(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Bpe(e.config.tools)&&Upe(h);const m=Clt(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d);else{const L=this.apiClient.getApiKey();let $="BidiGenerateContent",G="key";L!=null&&L.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",G="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${$}?${G}=${L}`}let g=()=>{};const v=new Promise(L=>{g=L}),x=e.callbacks,b=function(){var L;(L=x==null?void 0:x.onopen)===null||L===void 0||L.call(x),g({})},w=this.apiClient,k={onopen:b,onmessage:L=>{Slt(w,x.onmessage,L)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(L){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(L){}},N=this.webSocketFactory.create(d,Nlt(m),k);N.connect(),await v;let O=Vn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const L=this.apiClient.getProject(),$=this.apiClient.getLocation();O=`projects/${L}/locations/${$}/`+O}let D={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qk.AUDIO]}:e.config.responseModalities=[Qk.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const _=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],F=[];for(const L of _)if(this.isCallableTool(L)){const $=L;F.push(await $.tool())}else F.push(L);F.length>0&&(e.config.tools=F);const z={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=Vst(this.apiClient,z):D=zst(this.apiClient,z),delete D.config,N.send(JSON.stringify(D)),new klt(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Tlt={turnComplete:!0};class klt{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=rl(n.turns),e.isVertexAI()||(r=r.map(i=>bP(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Elt)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Tlt),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Kst(e)}:n={realtimeInput:Gst(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Nlt(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Clt(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SZ=10;function AZ(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ay(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Ay(t){return"callTool"in t&&typeof t.callTool=="function"}function Plt(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Ay(i)))!==null&&r!==void 0?r:!1}function TZ(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Ay(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function kZ(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _lt extends Zd{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Plt(n)||AZ(n.config))return await this.generateContentInternal(l);const c=TZ(n);if(c.length>0){const x=c.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let d,h;const m=rl(l.contents),g=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:SZ;let v=0;for(;v<g&&(d=await this.generateContentInternal(l),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,b=[];for(const w of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Ay(w)){const N=await w.callTool(d.functionCalls);b.push(...N)}v++,h={role:"user",parts:b},l.contents=rl(l.contents),l.contents.push(x),l.contents.push(h),kZ(l.config)&&(m.push(x),m.push(h))}return kZ(l.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),AZ(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const l=TZ(n);if(l.length>0){const h=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,d=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new f0(Dd.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>Ay(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&Bpe(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Upe(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Ay(o)){const a=o,l=await a.tool();for(const c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:SZ;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,d,h){return Wl(this,arguments,function*(){for(var m,g,v,x,b,w;a<s;){o&&(a++,o=!1);const D=yield an(c.processParamsMaybeAddMcpUsage(h)),_=yield an(c.generateContentStreamInternal(D)),F=[],z=[];try{for(var k=!0,N=(g=void 0,Yl(_)),O;O=yield an(N.next()),m=O.done,!m;k=!0){x=O.value,k=!1;const L=x;if(yield yield an(L),L.candidates&&(!((b=L.candidates[0])===null||b===void 0)&&b.content)){z.push(L.candidates[0].content);for(const $ of(w=L.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(a<s&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has($.functionCall.name)){const G=yield an(d.get($.functionCall.name).callTool([$.functionCall]));F.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(L){g={error:L}}finally{try{!k&&!m&&(v=N.return)&&(yield an(v.call(N)))}finally{if(g)throw g.error}}if(F.length>0){o=!0;const L=new Kb;L.candidates=[{content:{role:"user",parts:F}}],yield yield an(L);const $=[];$.push(...z),$.push({role:"user",parts:F});const G=rl(h.contents).concat($);h.contents=G}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=vZ(this.apiClient,e);return a=Pt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=wZ(d),m=new Kb;return Object.assign(m,h),m})}else{const c=xZ(this.apiClient,e);return a=Pt("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=bZ(d),m=new Kb;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=vZ(this.apiClient,e);return a=Pt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(h){return Wl(this,arguments,function*(){var m,g,v,x;try{for(var b=!0,w=Yl(h),k;k=yield an(w.next()),m=k.done,!m;b=!0){x=k.value,b=!1;const N=x,O=wZ(yield an(N.json()));O.sdkHttpResponse={headers:N.headers};const D=new Kb;Object.assign(D,O),yield yield an(D)}}catch(N){g={error:N}}finally{try{!b&&!m&&(v=w.return)&&(yield an(v.call(w)))}finally{if(g)throw g.error}}})})}else{const c=xZ(this.apiClient,e);return a=Pt("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(h){return Wl(this,arguments,function*(){var m,g,v,x;try{for(var b=!0,w=Yl(h),k;k=yield an(w.next()),m=k.done,!m;b=!0){x=k.value,b=!1;const N=x,O=bZ(yield an(N.json()));O.sdkHttpResponse={headers:N.headers};const D=new Kb;Object.assign(D,O),yield yield an(D)}}catch(N){g={error:N}}finally{try{!b&&!m&&(v=w.return)&&(yield an(v.call(w)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Aot(this.apiClient,e);return a=Pt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=kot(d),m=new tZ;return Object.assign(m,h),m})}else{const c=Sot(this.apiClient,e);return a=Pt("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Tot(d),m=new tZ;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Dot(this.apiClient,e);return a=Pt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Uot(d),m=new nZ;return Object.assign(m,h),m})}else{const c=jot(this.apiClient,e);return a=Pt("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Bot(d),m=new nZ;return Object.assign(m,h),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=vot(this.apiClient,e);return s=Pt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=bot(l),d=new Crt;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Dat(this.apiClient,e);return s=Pt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=Bat(l),d=new Prt;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=xat(this.apiClient,e);return s=Pt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=vat(l),d=new _rt;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=Tat(this.apiClient,e);return s=Pt("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=kat(l),d=new Irt;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=nat(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>kj(d))}else{const c=tat(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>Tj(d))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dat(this.apiClient,e);return a=Pt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=hat(d),m=new rZ;return Object.assign(m,h),m})}else{const c=uat(this.apiClient,e);return a=Pt("{models_url}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=fat(d),m=new rZ;return Object.assign(m,h),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Lat(this.apiClient,e);return a=Pt("{model}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>kj(d))}else{const c=Mat(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>Tj(d))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=mot(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=yot(d),m=new iZ;return Object.assign(m,h),m})}else{const c=pot(this.apiClient,e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=got(d),m=new iZ;return Object.assign(m,h),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=dot(this.apiClient,e);return a=Pt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=hot(d),m=new sZ;return Object.assign(m,h),m})}else{const c=uot(this.apiClient,e);return a=Pt("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=fot(d),m=new sZ;return Object.assign(m,h),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=rot(this.apiClient,e);return s=Pt("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>{const c=iot(l),d=new Rrt;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=qot(this.apiClient,e);return a=Pt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const h=Vot(d),m=new Zk;return Object.assign(m,h),m})}else{const c=Hot(this.apiClient,e);return a=Pt("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o.then(d=>{const h=zot(d),m=new Zk;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ilt extends Zd{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Ert(e);return a=Pt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else{const c=wrt(e);return a=Pt("{operationName}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=prt(e);return s=Pt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rlt(t){const e={},n=T(t,["data"]);if(n!=null&&C(e,["data"],n),T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Olt(t){const e={},n=T(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>zlt(s))),C(e,["parts"],i)}const r=T(t,["role"]);return r!=null&&C(e,["role"],r),e}function Mlt(t,e,n){const r={},i=T(e,["expireTime"]);n!==void 0&&i!=null&&C(n,["expireTime"],i);const s=T(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&C(n,["newSessionExpireTime"],s);const o=T(e,["uses"]);n!==void 0&&o!=null&&C(n,["uses"],o);const a=T(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&C(n,["bidiGenerateContentSetup"],$lt(t,a));const l=T(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&C(n,["fieldMask"],l),r}function Llt(t,e){const n={},r=T(e,["config"]);return r!=null&&C(n,["config"],Mlt(t,r,n)),n}function jlt(t){const e={};if(T(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=T(t,["fileUri"]);n!=null&&C(e,["fileUri"],n);const r=T(t,["mimeType"]);return r!=null&&C(e,["mimeType"],r),e}function Dlt(t){const e={},n=T(t,["id"]);n!=null&&C(e,["id"],n);const r=T(t,["args"]);r!=null&&C(e,["args"],r);const i=T(t,["name"]);if(i!=null&&C(e,["name"],i),T(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(T(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Blt(t){const e={};if(T(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=T(t,["enableWidget"]);return n!=null&&C(e,["enableWidget"],n),e}function Ult(t){const e={};if(T(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(T(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=T(t,["timeRangeFilter"]);return n!=null&&C(e,["timeRangeFilter"],n),e}function Flt(t,e){const n={},r=T(t,["generationConfig"]);e!==void 0&&r!=null&&C(e,["setup","generationConfig"],r);const i=T(t,["responseModalities"]);e!==void 0&&i!=null&&C(e,["setup","generationConfig","responseModalities"],i);const s=T(t,["temperature"]);e!==void 0&&s!=null&&C(e,["setup","generationConfig","temperature"],s);const o=T(t,["topP"]);e!==void 0&&o!=null&&C(e,["setup","generationConfig","topP"],o);const a=T(t,["topK"]);e!==void 0&&a!=null&&C(e,["setup","generationConfig","topK"],a);const l=T(t,["maxOutputTokens"]);e!==void 0&&l!=null&&C(e,["setup","generationConfig","maxOutputTokens"],l);const c=T(t,["mediaResolution"]);e!==void 0&&c!=null&&C(e,["setup","generationConfig","mediaResolution"],c);const d=T(t,["seed"]);e!==void 0&&d!=null&&C(e,["setup","generationConfig","seed"],d);const h=T(t,["speechConfig"]);e!==void 0&&h!=null&&C(e,["setup","generationConfig","speechConfig"],EB(h));const m=T(t,["thinkingConfig"]);e!==void 0&&m!=null&&C(e,["setup","generationConfig","thinkingConfig"],m);const g=T(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&C(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=T(t,["systemInstruction"]);e!==void 0&&v!=null&&C(e,["setup","systemInstruction"],Olt(Fs(v)));const x=T(t,["tools"]);if(e!==void 0&&x!=null){let _=_v(x);Array.isArray(_)&&(_=_.map(F=>Hlt(Pv(F)))),C(e,["setup","tools"],_)}const b=T(t,["sessionResumption"]);e!==void 0&&b!=null&&C(e,["setup","sessionResumption"],Vlt(b));const w=T(t,["inputAudioTranscription"]);e!==void 0&&w!=null&&C(e,["setup","inputAudioTranscription"],w);const k=T(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&C(e,["setup","outputAudioTranscription"],k);const N=T(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&C(e,["setup","realtimeInputConfig"],N);const O=T(t,["contextWindowCompression"]);e!==void 0&&O!=null&&C(e,["setup","contextWindowCompression"],O);const D=T(t,["proactivity"]);if(e!==void 0&&D!=null&&C(e,["setup","proactivity"],D),T(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function $lt(t,e){const n={},r=T(e,["model"]);r!=null&&C(n,["setup","model"],Vn(t,r));const i=T(e,["config"]);return i!=null&&C(n,["config"],Flt(i,n)),n}function zlt(t){const e={},n=T(t,["mediaResolution"]);n!=null&&C(e,["mediaResolution"],n);const r=T(t,["codeExecutionResult"]);r!=null&&C(e,["codeExecutionResult"],r);const i=T(t,["executableCode"]);i!=null&&C(e,["executableCode"],i);const s=T(t,["fileData"]);s!=null&&C(e,["fileData"],jlt(s));const o=T(t,["functionCall"]);o!=null&&C(e,["functionCall"],Dlt(o));const a=T(t,["functionResponse"]);a!=null&&C(e,["functionResponse"],a);const l=T(t,["inlineData"]);l!=null&&C(e,["inlineData"],Rlt(l));const c=T(t,["text"]);c!=null&&C(e,["text"],c);const d=T(t,["thought"]);d!=null&&C(e,["thought"],d);const h=T(t,["thoughtSignature"]);h!=null&&C(e,["thoughtSignature"],h);const m=T(t,["videoMetadata"]);return m!=null&&C(e,["videoMetadata"],m),e}function Vlt(t){const e={},n=T(t,["handle"]);if(n!=null&&C(e,["handle"],n),T(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Hlt(t){const e={},n=T(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),C(e,["functionDeclarations"],d)}if(T(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=T(t,["googleSearchRetrieval"]);r!=null&&C(e,["googleSearchRetrieval"],r);const i=T(t,["computerUse"]);i!=null&&C(e,["computerUse"],i);const s=T(t,["fileSearch"]);s!=null&&C(e,["fileSearch"],s);const o=T(t,["codeExecution"]);if(o!=null&&C(e,["codeExecution"],o),T(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=T(t,["googleMaps"]);a!=null&&C(e,["googleMaps"],Blt(a));const l=T(t,["googleSearch"]);l!=null&&C(e,["googleSearch"],Ult(l));const c=T(t,["urlContext"]);return c!=null&&C(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qlt(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function Glt(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=qlt(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Klt extends Zd{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=Llt(this.apiClient,e);s=Pt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=Glt(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wlt(t,e){const n={},r=T(t,["force"]);return e!==void 0&&r!=null&&C(e,["_query","force"],r),n}function Ylt(t){const e={},n=T(t,["name"]);n!=null&&C(e,["_url","name"],n);const r=T(t,["config"]);return r!=null&&Wlt(r,e),e}function Jlt(t){const e={},n=T(t,["name"]);return n!=null&&C(e,["_url","name"],n),e}function Xlt(t,e){const n={},r=T(t,["pageSize"]);e!==void 0&&r!=null&&C(e,["_query","pageSize"],r);const i=T(t,["pageToken"]);return e!==void 0&&i!=null&&C(e,["_query","pageToken"],i),n}function Qlt(t){const e={},n=T(t,["parent"]);n!=null&&C(e,["_url","parent"],n);const r=T(t,["config"]);return r!=null&&Xlt(r,e),e}function Zlt(t){const e={},n=T(t,["sdkHttpResponse"]);n!=null&&C(e,["sdkHttpResponse"],n);const r=T(t,["nextPageToken"]);r!=null&&C(e,["nextPageToken"],r);const i=T(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),C(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ect extends Zd{constructor(e){super(),this.apiClient=e,this.list=async n=>new f0(Dd.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Jlt(e);return s=Pt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Ylt(e);i=Pt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Qlt(e);return s=Pt("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Zlt(l),d=new Ort;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tct extends Zd{constructor(e,n=new ect(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new f0(Dd.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qat(e);return s=Pt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Wat(e);return s=Pt("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Kat(e);i=Pt("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=elt(e);return s=Pt("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=tlt(l),d=new Mrt;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nlt(e);return s=Pt("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=rlt(l),d=new Lrt;return Object.assign(d,c),d})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Xat(e);return s=Pt("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const c=Jat(l),d=new yB;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Fpe=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Fpe=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const nct=()=>Fpe();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cj(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Pj=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cl extends Error{}class fo extends cl{constructor(e,n,r,i){super(`${fo.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new SP({message:r,cause:Pj(n)});const s=n;return e===400?new zpe(e,s,r,i):e===401?new Vpe(e,s,r,i):e===403?new Hpe(e,s,r,i):e===404?new qpe(e,s,r,i):e===409?new Gpe(e,s,r,i):e===422?new Kpe(e,s,r,i):e===429?new Wpe(e,s,r,i):e>=500?new Ype(e,s,r,i):new fo(e,s,r,i)}}class _j extends fo{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class SP extends fo{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class $pe extends SP{constructor({message:e}={}){super({message:e??"Request timed out."})}}class zpe extends fo{}class Vpe extends fo{}class Hpe extends fo{}class qpe extends fo{}class Gpe extends fo{}class Kpe extends fo{}class Wpe extends fo{}class Ype extends fo{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rct=/^[a-z][a-z0-9+.-]*:/i,ict=t=>rct.test(t);let Ij=t=>(Ij=Array.isArray,Ij(t));const sct=Ij;let oct=sct;const NZ=oct;function act(t){if(!t)return!0;for(const e in t)return!1;return!0}function lct(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const cct=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new cl(`${t} must be an integer`);if(e<0)throw new cl(`${t} must be a positive integer`);return e},uct=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dct=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jg="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fct(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const hct=()=>{var t,e,n,r,i;const s=fct();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":PZ(Deno.build.os),"X-Stainless-Arch":CZ(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":PZ((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":CZ((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=pct();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jg,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pct(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const CZ=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",PZ=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let a2;const mct=()=>a2??(a2=hct());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gct(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Jpe(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function yct(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Jpe({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Xpe(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function xct(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vct=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qpe=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function B4(t,e,n){return Qpe(),new File(t,e??"unknown_file",n)}function bct(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const wct=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zpe=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Ect=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Zpe(t),Sct=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Act(t,e,n){if(Qpe(),t=await t,Ect(t))return t instanceof File?t:B4([await t.arrayBuffer()],t.name);if(Sct(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),B4(await Rj(i),e,n)}const r=await Rj(t);if(e||(e=bct(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return B4(r,e,n)}async function Rj(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(Zpe(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(wct(t))try{for(var a=!0,l=Yl(t),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;const d=i;o.push(...await Rj(d))}}catch(d){n={error:d}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const d=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${Tct(t)}`)}return o}function Tct(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eme{constructor(e){this._client=e}}eme._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tme(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const _Z=Object.freeze(Object.create(null)),kct=(t=tme)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((d,h,m)=>{var g,v,x;/[?#]/.test(h)&&(i=!0);const b=r[m];let w=(i?encodeURIComponent:t)(""+b);return m!==r.length&&(b==null||typeof b=="object"&&b.toString===((x=Object.getPrototypeOf((v=Object.getPrototypeOf((g=b.hasOwnProperty)!==null&&g!==void 0?g:_Z))!==null&&v!==void 0?v:_Z))===null||x===void 0?void 0:x.toString))&&(w=b+"",s.push({start:d.length+h.length,length:w.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),d+h+(m===r.length?"":w)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=l.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((d,h)=>d.start-h.start),s.length>0){let d=0;const h=s.reduce((m,g)=>{const v=" ".repeat(g.start-d),x="^".repeat(g.length);return d=g.start+g.length,m+v+x},"");throw new cl(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${h}`)}return o}),l2=kct(tme);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nme extends eme{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=tN(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new cl("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new cl("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(l2`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(l2`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(l2`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=tN(s,["api_version"]);return this._client.get(l2`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}nme._key=Object.freeze(["interactions"]);class rme extends nme{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nct(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let c2;function AB(t){let e;return(c2??(e=new globalThis.TextEncoder,c2=e.encode.bind(e)))(t)}let u2;function IZ(t){let e;return(u2??(e=new globalThis.TextDecoder,u2=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AP{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?AB(e):e;this.buffer=Nct([this.buffer,n]);const r=[];let i;for(;(i=Cct(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(IZ(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=IZ(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}AP.NEWLINE_CHARS=new Set([`
`,"\r"]);AP.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Cct(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Pct(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nN={off:0,error:200,warn:300,info:400,debug:500},RZ=(t,e,n)=>{if(t){if(lct(nN,t))return t;Xs(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(nN))}`)}};function u1(){}function d2(t,e,n){return!e||nN[t]>nN[n]?u1:e[t].bind(e)}const _ct={error:u1,warn:u1,info:u1,debug:u1};let OZ=new WeakMap;function Xs(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return _ct;const i=OZ.get(n);if(i&&i[0]===r)return i[1];const s={error:d2("error",n,r),warn:d2("warn",n,r),info:d2("info",n,r),debug:d2("debug",n,r)};return OZ.set(n,[r,s]),s}const Ip=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ict=class d1{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?Xs(r):console;function o(){return Wl(this,arguments,function*(){var l,c,d,h;if(i)throw new cl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,v=Yl(Rct(e,n)),x;x=yield an(v.next()),l=x.done,!l;g=!0){h=x.value,g=!1;const b=h;if(!m)if(b.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield an(JSON.parse(b.data))}catch(w){throw s.error("Could not parse message into JSON:",b.data),s.error("From chunk:",b.raw),w}}}catch(b){c={error:b}}finally{try{!g&&!l&&(d=v.return)&&(yield an(d.call(v)))}finally{if(c)throw c.error}}m=!0}catch(b){if(Cj(b))return yield an(void 0);throw b}finally{m||n.abort()}})}return new d1(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return Wl(this,arguments,function*(){var l,c,d,h;const m=new AP,g=Xpe(e);try{for(var v=!0,x=Yl(g),b;b=yield an(x.next()),l=b.done,!l;v=!0){h=b.value,v=!1;const w=h;for(const k of m.decode(w))yield yield an(k)}}catch(w){c={error:w}}finally{try{!v&&!l&&(d=x.return)&&(yield an(d.call(x)))}finally{if(c)throw c.error}}for(const w of m.flush())yield yield an(w)})}function o(){return Wl(this,arguments,function*(){var l,c,d,h;if(i)throw new cl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,v=Yl(s()),x;x=yield an(v.next()),l=x.done,!l;g=!0){h=x.value,g=!1;const b=h;m||b&&(yield yield an(JSON.parse(b)))}}catch(b){c={error:b}}finally{try{!g&&!l&&(d=v.return)&&(yield an(d.call(v)))}finally{if(c)throw c.error}}m=!0}catch(b){if(Cj(b))return yield an(void 0);throw b}finally{m||n.abort()}})}return new d1(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new d1(()=>i(e),this.controller,this.client),new d1(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Jpe({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=AB(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function Rct(t,e){return Wl(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new cl("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new cl("Attempted to iterate over a response with no body");const a=new Mct,l=new AP,c=Xpe(t.body);try{for(var d=!0,h=Yl(Oct(c)),m;m=yield an(h.next()),r=m.done,!r;d=!0){o=m.value,d=!1;const g=o;for(const v of l.decode(g)){const x=a.decode(v);x&&(yield yield an(x))}}}catch(g){i={error:g}}finally{try{!d&&!r&&(s=h.return)&&(yield an(s.call(h)))}finally{if(i)throw i.error}}for(const g of l.flush()){const v=a.decode(g);v&&(yield yield an(v))}})}function Oct(t){return Wl(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Yl(t),c;c=yield an(l.next()),n=c.done,!n;a=!0){s=c.value,a=!1;const d=s;if(d==null)continue;const h=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?AB(d):d;let m=new Uint8Array(o.length+h.length);m.set(o),m.set(h,o.length),o=m;let g;for(;(g=Pct(o))!==-1;)yield yield an(o.slice(0,g)),o=o.slice(g)}}catch(d){r={error:d}}finally{try{!a&&!n&&(i=l.return)&&(yield an(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield an(o))})}class Mct{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Lct(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Lct(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jct(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return Xs(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ict.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),c=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Xs(t).debug(`[${r}] response parsed`,Ip({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TB extends Promise{constructor(e,n,r=jct){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new TB(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ime=Symbol("brand.privateNullableHeaders");function*Dct(t){if(!t)return;if(ime in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():NZ(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=NZ(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const Wb=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Dct(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[ime]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U4=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=lrt)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sme;class TP{constructor(e){var n,r,i,s,o,a,l,{baseURL:c=U4("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(n=U4("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,m=tN(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:d,apiVersion:h},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:TP.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const v="warn";this.logLevel=v,this.logLevel=(o=(s=RZ(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:RZ(U4("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:gct(),this.encoder=vct,this._options=g,this.apiKey=d,this.apiVersion=h,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Wb([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Wb([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Wb([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new cl(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${jg}`}defaultIdempotencyKey(){return`stainless-node-retry-${nct()}`}makeStatusError(e,n,r,i){return fo.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=ict(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return act(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new TB(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:c,url:d,timeout:h}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(c,{url:d,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,v=Date.now();if(Xs(this).debug(`[${m}] sending request`,Ip({retryOfRequestLogID:r,method:a.method,url:d,options:a,headers:c.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new _j;const x=new AbortController,b=await this.fetchWithTimeout(d,c,h,x).catch(Pj),w=Date.now();if(b instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new _j;const O=Cj(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return Xs(this).info(`[${m}] connection ${O?"timed out":"failed"} - ${N}`),Xs(this).debug(`[${m}] connection ${O?"timed out":"failed"} (${N})`,Ip({retryOfRequestLogID:r,url:d,durationMs:w-v,message:b.message})),this.retryRequest(a,n,r??m);throw Xs(this).info(`[${m}] connection ${O?"timed out":"failed"} - error; no more retries left`),Xs(this).debug(`[${m}] connection ${O?"timed out":"failed"} (error; no more retries left)`,Ip({retryOfRequestLogID:r,url:d,durationMs:w-v,message:b.message})),O?new $pe:new SP({cause:b})}const k=`[${m}${g}] ${c.method} ${d} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${w-v}ms`;if(!b.ok){const N=await this.shouldRetry(b);if(n&&N){const L=`retrying, ${n} attempts remaining`;return await xct(b.body),Xs(this).info(`${k} - ${L}`),Xs(this).debug(`[${m}] response error (${L})`,Ip({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-v})),this.retryRequest(a,n,r??m,b.headers)}const O=N?"error; no more retries left":"error; not retryable";Xs(this).info(`${k} - ${O}`);const D=await b.text().catch(L=>Pj(L).message),_=uct(D),F=_?void 0:D;throw Xs(this).debug(`[${m}] response error (${O})`,Ip({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,message:F,durationMs:Date.now()-v})),this.makeStatusError(b.status,_,F,b.headers)}return Xs(this).info(k),Xs(this).debug(`[${m}] response start`,Ip({retryOfRequestLogID:r,url:b.url,status:b.status,headers:b.headers,durationMs:w-v})),{response:b,options:a,controller:x,requestLogID:m,retryOfRequestLogID:r,startTime:v}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=tN(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),r),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},d?{duplex:"half"}:{}),{method:"GET"}),l);a&&(h.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(o=c)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,c)}return await dct(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:c,defaultBaseURL:d}=o,h=this.buildURL(l,c,d);"timeout"in o&&cct("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:o}),v=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:v},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Wb([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),mct()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Wb([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:yct(e)}:this.encoder({body:e,headers:r})}}TP.DEFAULT_TIMEOUT=6e4;class Qi extends TP{constructor(){super(...arguments),this.interactions=new rme(this)}}sme=Qi;Qi.GeminiNextGenAPIClient=sme;Qi.GeminiNextGenAPIClientError=cl;Qi.APIError=fo;Qi.APIConnectionError=SP;Qi.APIConnectionTimeoutError=$pe;Qi.APIUserAbortError=_j;Qi.NotFoundError=qpe;Qi.ConflictError=Gpe;Qi.RateLimitError=Wpe;Qi.BadRequestError=zpe;Qi.AuthenticationError=Vpe;Qi.InternalServerError=Ype;Qi.PermissionDeniedError=Hpe;Qi.UnprocessableEntityError=Kpe;Qi.toFile=Act;Qi.Interactions=rme;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bct(t,e){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Uct(t,e){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Fct(t,e){const n={},r=T(t,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function $ct(t,e){const n={},r=T(t,["sdkHttpResponse"]);return r!=null&&C(n,["sdkHttpResponse"],r),n}function zct(t,e,n){const r={};if(T(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=T(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&C(e,["displayName"],i),T(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=T(t,["epochCount"]);e!==void 0&&s!=null&&C(e,["tuningTask","hyperparameters","epochCount"],s);const o=T(t,["learningRateMultiplier"]);if(o!=null&&C(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),T(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(T(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(T(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=T(t,["batchSize"]);e!==void 0&&a!=null&&C(e,["tuningTask","hyperparameters","batchSize"],a);const l=T(t,["learningRate"]);if(e!==void 0&&l!=null&&C(e,["tuningTask","hyperparameters","learningRate"],l),T(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(T(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Vct(t,e,n){const r={};let i=T(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=T(t,["validationDataset"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec"],MZ(g))}else if(i==="PREFERENCE_TUNING"){const g=T(t,["validationDataset"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec"],MZ(g))}const s=T(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&C(e,["tunedModelDisplayName"],s);const o=T(t,["description"]);e!==void 0&&o!=null&&C(e,["description"],o);let a=T(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=T(t,["epochCount"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=T(t,["epochCount"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=T(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=T(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=T(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=T(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=T(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=T(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let d=T(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=T(t,["adapterSize"]);e!==void 0&&g!=null&&C(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(d==="PREFERENCE_TUNING"){const g=T(t,["adapterSize"]);e!==void 0&&g!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(T(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(T(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=T(t,["labels"]);e!==void 0&&h!=null&&C(e,["labels"],h);const m=T(t,["beta"]);return e!==void 0&&m!=null&&C(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function Hct(t,e){const n={},r=T(t,["baseModel"]);r!=null&&C(n,["baseModel"],r);const i=T(t,["preTunedModel"]);i!=null&&C(n,["preTunedModel"],i);const s=T(t,["trainingDataset"]);s!=null&&tut(s);const o=T(t,["config"]);return o!=null&&zct(o,n),n}function qct(t,e){const n={},r=T(t,["baseModel"]);r!=null&&C(n,["baseModel"],r);const i=T(t,["preTunedModel"]);i!=null&&C(n,["preTunedModel"],i);const s=T(t,["trainingDataset"]);s!=null&&nut(s,n,e);const o=T(t,["config"]);return o!=null&&Vct(o,n,e),n}function Gct(t,e){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Kct(t,e){const n={},r=T(t,["name"]);return r!=null&&C(n,["_url","name"],r),n}function Wct(t,e,n){const r={},i=T(t,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const s=T(t,["pageToken"]);e!==void 0&&s!=null&&C(e,["_query","pageToken"],s);const o=T(t,["filter"]);return e!==void 0&&o!=null&&C(e,["_query","filter"],o),r}function Yct(t,e,n){const r={},i=T(t,["pageSize"]);e!==void 0&&i!=null&&C(e,["_query","pageSize"],i);const s=T(t,["pageToken"]);e!==void 0&&s!=null&&C(e,["_query","pageToken"],s);const o=T(t,["filter"]);return e!==void 0&&o!=null&&C(e,["_query","filter"],o),r}function Jct(t,e){const n={},r=T(t,["config"]);return r!=null&&Wct(r,n),n}function Xct(t,e){const n={},r=T(t,["config"]);return r!=null&&Yct(r,n),n}function Qct(t,e){const n={},r=T(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=T(t,["nextPageToken"]);i!=null&&C(n,["nextPageToken"],i);const s=T(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>ome(a))),C(n,["tuningJobs"],o)}return n}function Zct(t,e){const n={},r=T(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=T(t,["nextPageToken"]);i!=null&&C(n,["nextPageToken"],i);const s=T(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Oj(a))),C(n,["tuningJobs"],o)}return n}function eut(t,e){const n={},r=T(t,["name"]);r!=null&&C(n,["model"],r);const i=T(t,["name"]);return i!=null&&C(n,["endpoint"],i),n}function tut(t,e){const n={};if(T(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(T(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=T(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),C(n,["examples","examples"],i)}return n}function nut(t,e,n){const r={};let i=T(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=T(t,["gcsUri"]);e!==void 0&&o!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=T(t,["gcsUri"]);e!==void 0&&o!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=T(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=T(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&C(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=T(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&C(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(T(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function ome(t,e){const n={},r=T(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=T(t,["name"]);i!=null&&C(n,["name"],i);const s=T(t,["state"]);s!=null&&C(n,["state"],Epe(s));const o=T(t,["createTime"]);o!=null&&C(n,["createTime"],o);const a=T(t,["tuningTask","startTime"]);a!=null&&C(n,["startTime"],a);const l=T(t,["tuningTask","completeTime"]);l!=null&&C(n,["endTime"],l);const c=T(t,["updateTime"]);c!=null&&C(n,["updateTime"],c);const d=T(t,["description"]);d!=null&&C(n,["description"],d);const h=T(t,["baseModel"]);h!=null&&C(n,["baseModel"],h);const m=T(t,["_self"]);return m!=null&&C(n,["tunedModel"],eut(m)),n}function Oj(t,e){const n={},r=T(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=T(t,["name"]);i!=null&&C(n,["name"],i);const s=T(t,["state"]);s!=null&&C(n,["state"],Epe(s));const o=T(t,["createTime"]);o!=null&&C(n,["createTime"],o);const a=T(t,["startTime"]);a!=null&&C(n,["startTime"],a);const l=T(t,["endTime"]);l!=null&&C(n,["endTime"],l);const c=T(t,["updateTime"]);c!=null&&C(n,["updateTime"],c);const d=T(t,["error"]);d!=null&&C(n,["error"],d);const h=T(t,["description"]);h!=null&&C(n,["description"],h);const m=T(t,["baseModel"]);m!=null&&C(n,["baseModel"],m);const g=T(t,["tunedModel"]);g!=null&&C(n,["tunedModel"],g);const v=T(t,["preTunedModel"]);v!=null&&C(n,["preTunedModel"],v);const x=T(t,["supervisedTuningSpec"]);x!=null&&C(n,["supervisedTuningSpec"],x);const b=T(t,["preferenceOptimizationSpec"]);b!=null&&C(n,["preferenceOptimizationSpec"],b);const w=T(t,["tuningDataStats"]);w!=null&&C(n,["tuningDataStats"],w);const k=T(t,["encryptionSpec"]);k!=null&&C(n,["encryptionSpec"],k);const N=T(t,["partnerModelTuningSpec"]);N!=null&&C(n,["partnerModelTuningSpec"],N);const O=T(t,["customBaseModel"]);O!=null&&C(n,["customBaseModel"],O);const D=T(t,["experiment"]);D!=null&&C(n,["experiment"],D);const _=T(t,["labels"]);_!=null&&C(n,["labels"],_);const F=T(t,["outputUri"]);F!=null&&C(n,["outputUri"],F);const z=T(t,["pipelineJob"]);z!=null&&C(n,["pipelineJob"],z);const L=T(t,["serviceAccount"]);L!=null&&C(n,["serviceAccount"],L);const $=T(t,["tunedModelDisplayName"]);$!=null&&C(n,["tunedModelDisplayName"],$);const G=T(t,["veoTuningSpec"]);return G!=null&&C(n,["veoTuningSpec"],G),n}function rut(t,e){const n={},r=T(t,["sdkHttpResponse"]);r!=null&&C(n,["sdkHttpResponse"],r);const i=T(t,["name"]);i!=null&&C(n,["name"],i);const s=T(t,["metadata"]);s!=null&&C(n,["metadata"],s);const o=T(t,["done"]);o!=null&&C(n,["done"],o);const a=T(t,["error"]);return a!=null&&C(n,["error"],a),n}function MZ(t,e){const n={},r=T(t,["gcsUri"]);r!=null&&C(n,["validationDatasetUri"],r);const i=T(t,["vertexDatasetResource"]);return i!=null&&C(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iut extends Zd{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new f0(Dd.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:wj.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Kct(e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>Oj(d))}else{const c=Gct(e);return a=Pt("{name}",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>ome(d))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Xct(e);return a=Pt("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Zct(d),m=new oZ;return Object.assign(m,h),m})}else{const c=Jct(e);return a=Pt("tunedModels",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Qct(d),m=new oZ;return Object.assign(m,h),m})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Uct(e);return a=Pt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=$ct(d),m=new aZ;return Object.assign(m,h),m})}else{const c=Bct(e);return a=Pt("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const h=Fct(d),m=new aZ;return Object.assign(m,h),m})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=qct(e,e);return s=Pt("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>Oj(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Hct(e);return s=Pt("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),i.then(l=>rut(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sut{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const out=1024*1024*8,aut=3,lut=1e3,cut=2,rN="x-goog-upload-status";async function uut(t,e,n){var r;const i=await ame(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[rN])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function dut(t,e,n){var r;const i=await ame(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[rN])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=gpe(s),a=new xB;return Object.assign(a,o),a}async function ame(t,e,n){var r,i;let s=0,o=0,a=new Ej(new Response),l="upload";for(s=t.size;o<s;){const c=Math.min(out,s-o),d=t.slice(o,o+c);o+c>=s&&(l+=", finalize");let h=0,m=lut;for(;h<aut&&(a=await n.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(c)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[rN]));)h++,await hut(m),m=m*cut;if(o+=c,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[rN])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function fut(t){return{size:t.size,type:t.type}}function hut(t){return new Promise(e=>setTimeout(e,t))}class put{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uut(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dut(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await fut(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mut{create(e,n,r){return new gut(e,n,r)}}class gut{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LZ="x-goog-api-key";class yut{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(LZ)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(LZ,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xut="gl-node/";class lme{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Qi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=frt(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new yut(this.apiKey);this.apiClient=new dlt({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:xut+"web",uploader:new put,downloader:new sut}),this.models=new _lt(this.apiClient),this.live=new Alt(this.apiClient,i,new mut),this.batches=new $it(this.apiClient),this.chats=new Est(this.models,this.apiClient),this.caches=new vst(this.apiClient),this.files=new Rst(this.apiClient),this.operations=new Ilt(this.apiClient),this.authTokens=new Klt(this.apiClient),this.tunings=new iut(this.apiClient),this.fileSearchStores=new tct(this.apiClient)}}const cme={inputPricePerMillion:.5,outputPricePerMillion:2.5,customModelPricing:{"gemini-3-flash-preview":{input:.5,output:2.5},"gemini-2.5-pro":{input:1.25,output:10},"gemini-2.5-flash":{input:.15,output:.6},"gemini-2.5-flash-lite":{input:.075,output:.3},"gemini-2.0-flash":{input:.1,output:.4},"gemini-2.0-flash-lite":{input:.075,output:.3}}},jZ={records:[],pricing:cme},DZ="token_usage_store";class vut{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=jZ,this.listeners=new Set,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadState(),this.isInitialized=!0,this.notifyListeners())}async waitForInit(){this.initPromise&&await this.initPromise}async loadState(){try{const e=await Ae.getItem(Ae.getUserKey(DZ));if(e){const n=JSON.parse(e);this.state={...jZ,...n,pricing:{...cme,...n.pricing||{}}}}}catch(e){console.error("[TokenUsageStore] Failed to load state:",e)}}async saveState(){try{await Ae.setItem(Ae.getUserKey(DZ),JSON.stringify(this.state))}catch(e){console.error("[TokenUsageStore] Failed to save state:",e)}}notifyListeners(){this.listeners.forEach(e=>e())}notify(){this.notifyListeners(),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.state}addRecord(e){const r=[{...e,id:Date.now().toString()+Math.random().toString().slice(2,6),timestamp:Date.now()},...this.state.records].slice(0,1e3);this.state={...this.state,records:r},this.notify(),console.log(`[TokenUsageStore] Recorded: ${e.source} ${e.operation} - In: ${e.inputTokens}, Out: ${e.outputTokens}`)}updatePricing(e){this.state={...this.state,pricing:{...this.state.pricing,...e}},this.notify()}clearHistory(){this.state={...this.state,records:[]},this.notify()}calculateCost(e,n,r){var s;const i=this.state.pricing;if(r&&((s=i.customModelPricing)!=null&&s[r])){const o=i.customModelPricing[r];return e*o.input/1e6+n*o.output/1e6}return e*i.inputPricePerMillion/1e6+n*i.outputPricePerMillion/1e6}getStats(){var l;const e=this.state.records,n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime(),i=new Date(n.getFullYear(),n.getMonth(),1).getTime(),s={totalInputTokens:0,totalOutputTokens:0,totalCost:0,bySource:{MANAGER:{input:0,output:0,cost:0,count:0},DEALER:{input:0,output:0,cost:0,count:0},POLYMARKET_DEALER:{input:0,output:0,cost:0,count:0}},byOperation:{},today:{input:0,output:0,cost:0},thisMonth:{input:0,output:0,cost:0},dealerMetrics:{avgTokensPerCoin:0,avgTokensPerCycle:0,totalCoinsAnalyzed:0},managerMetrics:{avgTokensPerQuery:0,totalQueries:0}};let o=0,a=0;for(const c of e){const d=this.calculateCost(c.inputTokens,c.outputTokens,c.model);s.totalInputTokens+=c.inputTokens,s.totalOutputTokens+=c.outputTokens,s.totalCost+=d,s.bySource[c.source].input+=c.inputTokens,s.bySource[c.source].output+=c.outputTokens,s.bySource[c.source].cost+=d,s.bySource[c.source].count++,s.byOperation[c.operation]||(s.byOperation[c.operation]={input:0,output:0,cost:0,count:0}),s.byOperation[c.operation].input+=c.inputTokens,s.byOperation[c.operation].output+=c.outputTokens,s.byOperation[c.operation].cost+=d,s.byOperation[c.operation].count++,c.timestamp>=r&&(s.today.input+=c.inputTokens,s.today.output+=c.outputTokens,s.today.cost+=d),c.timestamp>=i&&(s.thisMonth.input+=c.inputTokens,s.thisMonth.output+=c.outputTokens,s.thisMonth.cost+=d),c.source==="DEALER"&&(o+=c.inputTokens+c.outputTokens,a++,(l=c.metadata)!=null&&l.coinsAnalyzed&&(s.dealerMetrics.totalCoinsAnalyzed+=c.metadata.coinsAnalyzed)),c.source==="MANAGER"&&s.managerMetrics.totalQueries++}if(s.dealerMetrics.totalCoinsAnalyzed>0&&(s.dealerMetrics.avgTokensPerCoin=o/s.dealerMetrics.totalCoinsAnalyzed),a>0&&(s.dealerMetrics.avgTokensPerCycle=o/a),s.managerMetrics.totalQueries>0){const c=s.bySource.MANAGER.input+s.bySource.MANAGER.output;s.managerMetrics.avgTokensPerQuery=c/s.managerMetrics.totalQueries}return s}getRecords(e=50,n){let r=this.state.records;return n&&(r=r.filter(i=>i.source===n)),r.slice(0,e)}}const Os=new vut,Ty={gemini:[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Next generation (Preview)",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast & balanced",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable",inputPricePerMillion:1.25,outputPricePerMillion:10},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight",inputPricePerMillion:.075,outputPricePerMillion:.3},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Stable",inputPricePerMillion:.1,outputPricePerMillion:.4},{id:"gemini-2.0-flash-lite",name:"Gemini 2.0 Flash-Lite",description:"Economy",inputPricePerMillion:.075,outputPricePerMillion:.3}],openai:[{id:"gpt-4o",name:"GPT-4o",description:"Most capable",inputPricePerMillion:2.5,outputPricePerMillion:10},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast & affordable",inputPricePerMillion:.15,outputPricePerMillion:.6},{id:"gpt-4-turbo",name:"GPT-4 Turbo",description:"Stable",inputPricePerMillion:10,outputPricePerMillion:30},{id:"o1-mini",name:"o1-mini",description:"Reasoning model",inputPricePerMillion:3,outputPricePerMillion:12}],claude:[{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Latest & fastest",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",description:"Previous gen",inputPricePerMillion:3,outputPricePerMillion:15},{id:"claude-3-opus-20240229",name:"Claude 3 Opus",description:"Most capable",inputPricePerMillion:15,outputPricePerMillion:75},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku",description:"Economy",inputPricePerMillion:.25,outputPricePerMillion:1.25}]},Ou={gemini:{name:"Google Gemini",icon:"",color:"#4285F4",keyUrl:"https://aistudio.google.com/apikey"},openai:{name:"OpenAI",icon:"",color:"#10A37F",keyUrl:"https://platform.openai.com/api-keys"},claude:{name:"Anthropic Claude",icon:"",color:"#D97757",keyUrl:"https://console.anthropic.com/settings/keys"}},but={gemini:{minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},openai:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500},claude:{minIntervalMs:500,maxRetries:3,baseBackoffMs:1e3,maxBackoffMs:3e4,jitterMs:500}},BZ={CRITICAL:100,HIGH:75,NORMAL:50,LOW:25};class Qg{constructor(){this.queue=[],this.isProcessing=!1,this.lastRequestTime=0,this.consecutiveRateLimits=0,this.blockedUntil=0,this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,this.config={minIntervalMs:5e3,maxRetries:5,baseBackoffMs:5e3,maxBackoffMs:12e4,jitterMs:1e3},this.rateLimitListeners=[],console.log("[AIRequestQueue]  Initialized global request queue")}static getInstance(){return Qg.instance||(Qg.instance=new Qg),Qg.instance}setConfig(e){const n=but[e];n&&(this.config={...n},console.log(`[AIRequestQueue]  Config updated for provider: ${e}`))}addRateLimitListener(e){return this.rateLimitListeners.push(e),()=>{this.rateLimitListeners=this.rateLimitListeners.filter(n=>n!==e)}}setOnRateLimit(e){e&&this.addRateLimitListener(e)}enqueue(e){return new Promise((n,r)=>{const i=this.generateId(),s={id:i,priority:e.priority,source:e.source,execute:e.execute,resolve:n,reject:r,timestamp:Date.now(),retries:0,provider:e.provider||"gemini"};this.insertByPriority(s);const o=this.queue.findIndex(a=>a.id===i)+1;console.log(`[AIRequestQueue]  Queued request #${i.slice(-6)} (position: ${o}, priority: ${e.priority}, source: ${e.source})`),this.isProcessing||this.processQueue()})}insertByPriority(e){const n=BZ[e.priority];let r=this.queue.length;for(let i=0;i<this.queue.length;i++){const s=BZ[this.queue[i].priority];if(n>s){r=i;break}}this.queue.splice(r,0,e)}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0,console.log("[AIRequestQueue]  Starting queue processing");this.queue.length>0;){const e=this.queue.shift();try{await this.waitForSlot();const n=Date.now(),r=await this.executeWithRetry(e),i=Date.now()-e.timestamp;this.successCount++,this.totalWaitTimeMs+=i,this.requestCount++,this.consecutiveRateLimits=0,console.log(`[AIRequestQueue]  Request #${e.id.slice(-6)} completed (wait: ${(i/1e3).toFixed(1)}s)`),e.resolve(r)}catch(n){this.failureCount++,console.error(`[AIRequestQueue]  Request #${e.id.slice(-6)} failed:`,n.message),e.reject(n)}}this.isProcessing=!1,console.log("[AIRequestQueue]  Queue empty, processing stopped")}}async executeWithRetry(e){let n;for(let r=0;r<=this.config.maxRetries;r++)try{return r>0&&console.log(`[AIRequestQueue]  Retry attempt ${r}/${this.config.maxRetries} for #${e.id.slice(-6)}`),await e.execute()}catch(i){if(n=i,this.isRateLimitError(i)){const o=this.parseRetryDelay(i);if(this.handleRateLimit(o),r<this.config.maxRetries){await this.waitForSlot();continue}}if(r===this.config.maxRetries)break;const s=this.calculateBackoff(r);console.log(`[AIRequestQueue]  Waiting ${(s/1e3).toFixed(1)}s before retry...`),await this.sleep(s)}throw n}async waitForSlot(){const e=Date.now();if(this.blockedUntil>e){const l=this.blockedUntil-e;console.log(`[AIRequestQueue]  Rate limited, waiting ${(l/1e3).toFixed(1)}s...`),await this.sleep(l)}const n=Math.pow(2,Math.min(this.consecutiveRateLimits,6)),r=this.config.minIntervalMs*n,i=Math.min(r,this.config.maxBackoffMs),s=Math.random()*this.config.jitterMs,o=i+s,a=e-this.lastRequestTime;if(a<o){const l=o-a;this.consecutiveRateLimits>0&&console.log(`[AIRequestQueue]  Throttling: waiting ${(l/1e3).toFixed(1)}s (backoff level: ${this.consecutiveRateLimits})...`),await this.sleep(l)}this.lastRequestTime=Date.now()}handleRateLimit(e){this.consecutiveRateLimits++;const n=Math.min(this.config.baseBackoffMs+Math.pow(2,this.consecutiveRateLimits)*5e3,this.config.maxBackoffMs);this.blockedUntil=Date.now()+e*1e3+n;const r=e+Math.ceil(n/1e3);console.log(`[AIRequestQueue]  Rate limited (hit #${this.consecutiveRateLimits}). Blocked for ${r}s`);const i=this.consecutiveRateLimits>=this.config.maxRetries;this.rateLimitListeners.forEach(s=>{try{s({consecutiveHits:this.consecutiveRateLimits,blockedForSeconds:r,exhausted:i})}catch(o){console.error("[AIRequestQueue] Error in rate limit listener:",o)}})}calculateBackoff(e){const n=this.config.baseBackoffMs*Math.pow(2,e),r=Math.random()*this.config.jitterMs;return Math.min(n+r,this.config.maxBackoffMs)}isRateLimitError(e){const n=typeof e=="string"?e:JSON.stringify(e);return n.includes("429")||n.includes("RESOURCE_EXHAUSTED")||n.includes("Too Many Requests")||n.includes("quota")||n.includes("rate_limit")||n.includes("rate limit")}parseRetryDelay(e){try{const n=typeof e=="string"?e:JSON.stringify(e),r=n.match(/retry in (\d+\.?\d*)s/i);if(r)return Math.ceil(parseFloat(r[1]));const i=n.match(/"retryDelay"\s*:\s*"(\d+)s?"/i);if(i)return parseInt(i[1]);const s=n.match(/retry-after[:\s]+(\d+)/i);if(s)return parseInt(s[1])}catch{}return 30}generateId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}sleep(e){return new Promise(n=>setTimeout(n,e))}getMetrics(){return{queueLength:this.queue.length,avgWaitTimeMs:this.requestCount>0?this.totalWaitTimeMs/this.requestCount:0,successCount:this.successCount,failureCount:this.failureCount,lastRequestTime:this.lastRequestTime,consecutiveRateLimits:this.consecutiveRateLimits,isProcessing:this.isProcessing}}clear(){const e=this.queue.length;this.queue.forEach(n=>{n.reject(new Error("Queue cleared"))}),this.queue=[],console.log(`[AIRequestQueue]  Cleared ${e} pending requests`)}resetMetrics(){this.successCount=0,this.failureCount=0,this.totalWaitTimeMs=0,this.requestCount=0,console.log("[AIRequestQueue]  Metrics reset")}}const Ds=Qg.getInstance();class wut{constructor(){this.providerType="gemini",this.client=null,this.modelName="gemini-2.5-flash"}isInitialized(){return this.client!==null}initialize(e){this.client=new lme({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance.",parameters:{type:xe.OBJECT,properties:{token:{type:xe.STRING,description:"Optional: Symbol or Mint Address of specific token to check."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet.",parameters:{type:xe.OBJECT,properties:{inputToken:{type:xe.STRING,description:"Symbol or Mint Address of token to sell"},outputToken:{type:xe.STRING,description:"Symbol or Mint Address of token to buy"},amount:{type:xe.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:xe.OBJECT,properties:{amount:{type:xe.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet.",parameters:{type:xe.OBJECT,properties:{tokenMint:{type:xe.STRING,description:"Mint address of the token to transfer"},amount:{type:xe.NUMBER,description:"Amount of tokens to transfer"}},required:["tokenMint","amount"]}},s={name:"getMarketPrice",description:"Get the current market price for a given symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT")'}},required:["symbol"]}},o={name:"getOHLCV",description:"Get OHLCV candlestick data for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:"Trading symbol"},timeframe:{type:xe.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D")'}},required:["symbol"]}},a={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:"Trading symbol"},indicator:{type:xe.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:xe.STRING,description:"Timeframe"}},required:["symbol","indicator"]}},l={name:"getTradingViewSummary",description:"Get TradingView buy/sell/neutral recommendation summary.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:"Trading symbol"}},required:["symbol"]}},c={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault and positions.",parameters:{type:xe.OBJECT,properties:{}}},d={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:xe.OBJECT,properties:{}}},h={name:"getHLMarketData",description:"Get market data for a Hyperliquid asset.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:'Asset symbol (e.g., "BTC", "ETH")'}},required:["coin"]}},m={name:"createHLOrder",description:"Place an order on Hyperliquid Testnet.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},isBuy:{type:xe.BOOLEAN,description:"True for LONG, False for SHORT"},size:{type:xe.NUMBER,description:"Size of the order"},usdcAmount:{type:xe.NUMBER,description:"Amount in USDC to spend"},orderType:{type:xe.STRING,description:'Order type: "limit", "market"'},price:{type:xe.NUMBER,description:"Limit price"},leverage:{type:xe.NUMBER,description:"Leverage multiplier (1-50)"},stopLoss:{type:xe.NUMBER,description:"Stop loss price"},takeProfit:{type:xe.NUMBER,description:"Take profit price"},reduceOnly:{type:xe.BOOLEAN,description:"True to only reduce existing position"}},required:["coin","isBuy","orderType"]}},g={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},orderId:{type:xe.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},v={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},leverage:{type:xe.NUMBER,description:"New leverage (1-50)"},isCross:{type:xe.BOOLEAN,description:"True for cross margin"}},required:["coin","leverage","isCross"]}},x={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},size:{type:xe.NUMBER,description:"Optional: partial close size"},orderType:{type:xe.STRING,description:'Order type: "market" or "limit"'},price:{type:xe.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},b={name:"withdrawFromHL",description:"Execute a USDC withdrawal from Hyperliquid Testnet.",parameters:{type:xe.OBJECT,properties:{amount:{type:xe.NUMBER,description:"Amount of USDC to withdraw"}},required:["amount"]}},w={name:"getDealerTradeHistory",description:"Query the Hyperliquid Dealer's trade history and AI reasoning.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Optional: Filter by coin"},limit:{type:xe.NUMBER,description:"Max records to return (default 10)"},includeReasoning:{type:xe.BOOLEAN,description:"Include full AI reasoning"}}}},k={name:"getHLDealerThinking",description:`Get the Hyperliquid Dealer's AI reasoning from recent analysis cycles.
            Use when user asks about dealer thinking, reasoning, or analysis.`,parameters:{type:xe.OBJECT,properties:{cycleIndex:{type:xe.NUMBER,description:"Cycle index: 0=latest, 1=previous, 2=oldest (max 3 cycles)"}}}},N={name:"scheduleTask",description:"Schedule a task to execute at a specific time or when a market condition is met.",parameters:{type:xe.OBJECT,properties:{taskType:{type:xe.STRING,description:"Type: SWAP, TRANSFER, ALERT, or HL_ORDER"},inputToken:{type:xe.STRING,description:"For SWAP/TRANSFER: Input token"},outputToken:{type:xe.STRING,description:"For SWAP: Output token"},amount:{type:xe.NUMBER,description:"Amount to swap or transfer"},coin:{type:xe.STRING,description:"For HL_ORDER: Asset symbol"},isBuy:{type:xe.BOOLEAN,description:"For HL_ORDER: True for LONG"},size:{type:xe.NUMBER,description:"For HL_ORDER: Order size"},orderType:{type:xe.STRING,description:"For HL_ORDER: Order type"},price:{type:xe.NUMBER,description:"For HL_ORDER: Limit price"},leverage:{type:xe.NUMBER,description:"For HL_ORDER: Leverage"},stopLoss:{type:xe.NUMBER,description:"For HL_ORDER: Stop loss"},takeProfit:{type:xe.NUMBER,description:"For HL_ORDER: Take profit"},reduceOnly:{type:xe.BOOLEAN,description:"For HL_ORDER: Reduce only"},delayMinutes:{type:xe.NUMBER,description:"For time-based: Delay in minutes"},conditionIndicator:{type:xe.STRING,description:"For condition-based: Indicator name"},conditionSymbol:{type:xe.STRING,description:"For condition-based: Trading symbol"},conditionOperator:{type:xe.STRING,description:"For condition-based: Comparison operator"},conditionValue:{type:xe.NUMBER,description:"For condition-based: Threshold value"},conditionTimeframe:{type:xe.STRING,description:"For condition-based: Timeframe"}},required:["taskType"]}};return[{functionDeclarations:[e,n,r,i,N,s,o,a,l,c,d,h,m,g,v,x,b,w,k]}]}async sendMessage(e,n,r,i){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");const s=this.client,o=this.modelName,a=()=>this.getTools();return Ds.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{var m,g,v;const l=e.map(x=>({role:x.role==="model"?"model":"user",parts:[{text:x.content}]})),d=await s.chats.create({model:o,config:{systemInstruction:r,tools:i||a()},history:l}).sendMessage({message:n});let h="";if(d.candidates&&((g=(m=d.candidates[0])==null?void 0:m.content)!=null&&g.parts))for(const x of d.candidates[0].content.parts)x.text&&(h+=x.text);return{text:h,usageMetadata:d.usageMetadata?{promptTokenCount:d.usageMetadata.promptTokenCount||0,candidatesTokenCount:d.usageMetadata.candidatesTokenCount||0}:void 0,functionCalls:((v=d.functionCalls)==null?void 0:v.map(x=>({name:x.name,args:x.args})))||void 0}}})}async sendJsonAnalysis(e,n){if(!this.client)return console.warn("[GeminiProvider] Client not initialized"),null;const r=this.client,i=this.modelName;return Ds.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await r.chats.create({model:i,config:{systemInstruction:n,responseMimeType:"application/json"}}).sendMessage({message:e});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const d of o.candidates[0].content.parts)d.text&&(a+=d.text);return a||null}})}async sendBatchAnalysis(e,n,r){if(!this.client)throw new Error("Gemini not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.client,s=this.modelName,o=this.getBatchDealerSystemInstruction(),a=(d,h,m)=>this.normalizeDecisions(d,h,m),l=e.cycleSummary?`
[RECENT ACTIVITY CONTEXT]
${e.cycleSummary}
`:"",c=`
            [USER STRATEGY]
            ${n}
            ${l}
            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON Array of decisions.
        `;return Ds.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var x,b;if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const h=await i.chats.create({model:s,config:{systemInstruction:o,responseMimeType:"application/json"}}).sendMessage({message:c});if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");let m="";if(h.candidates&&((b=(x=h.candidates[0])==null?void 0:x.content)!=null&&b.parts))for(const w of h.candidates[0].content.parts)w.text&&(m+=w.text);if(!m)return console.warn("[GeminiProvider] Empty response from batch analysis"),{decisions:[]};const g=m.replace(/```json/g,"").replace(/```/g,"").trim();let v;try{v=JSON.parse(g)}catch(w){return console.error("[GeminiProvider] Failed to parse batch response:",w),{decisions:[]}}return a(v,h.usageMetadata,e)}})}normalizeDecisions(e,n,r){let i=[],s;Array.isArray(e)?i=e:typeof e=="object"&&(e.decisions?i=e.decisions:i=[e],e.cycleSummary&&typeof e.cycleSummary=="string"&&(s=e.cycleSummary.slice(0,350)));const a=i.map(d=>d.action==="LONG"?{...d,action:"BUY"}:d.action==="SHORT"?{...d,action:"SELL"}:d.action==="WAIT"?{...d,action:"HOLD"}:d).filter(d=>{const h=typeof d.coin=="string"&&d.coin.length>0,m=["BUY","SELL","HOLD","CLOSE"].includes(d.action);return h&&m}),l=new Map,c={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const d of a){const h=d.coin.toUpperCase(),m=l.get(h);if(!m)l.set(h,d);else{const g=c[m.action]||0,v=c[d.action]||0;(v>g||v===g&&(d.confidence||0)>(m.confidence||0))&&l.set(h,d)}}return{decisions:Array.from(l.values()),cycleSummary:s}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            You will receive:
            1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
            2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
            3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.
            4. [RECENT ACTIVITY CONTEXT]: Summary of your previous analysis cycles (if available).

            You must return valid JSON with this EXACT structure:
            {
                "decisions": [
                    {
                        "coin": "Symbol analyzed",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": number (0.0 to 1.0),
                        "reason": "Format: [ACTION] Position Status + Explanation. Max 600 chars.",
                        "suggestedLeverage": number (1-50, optional),
                        "sizeUSDC": number (optional),
                        "orderType": "limit" | "market",
                        "price": number (for limit orders, optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ],
                "cycleSummary": "Brief 1-2 sentence summary of this analysis cycle for context in the next cycle. Include: key market observations, actions taken, and any notable patterns. Max 300 chars."
            }

            CRITICAL RULES:
            1. ONLY output valid JSON with the structure above.
            2. Must return one decision object per coin provided in the decisions array.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
            5. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            6. CYCLE SUMMARY: ALWAYS include a cycleSummary field with a brief context for the next cycle.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD with no position: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY with no position: "LONG: No position. RSI divergence detected. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE with position: "CLOSE: In LONG at $95000, PnL: +$150. Take profit target reached."
        `}}class Eut{constructor(){this.providerType="openai",this.apiKey="",this.modelName="gpt-4o-mini",this.baseUrl="https://api.openai.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToOpenAI(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({type:"function",function:{name:i.name,description:i.description,parameters:this.convertGeminiParamsToOpenAI(i.parameters)}});return n}convertGeminiParamsToOpenAI(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertGeminiTypeToOpenAI(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertGeminiTypeToOpenAI(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");return Ds.enqueue({priority:"HIGH",source:"operator",provider:"openai",execute:async()=>{var g;const s=[{role:"system",content:r}];for(const v of e)s.push({role:v.role==="model"?"assistant":"user",content:v.content});s.push({role:"user",content:n});const o=this.convertToolsToOpenAI(i),a={model:this.modelName,messages:s};o.length>0&&(a.tools=o,a.tool_choice="auto");const l=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(a)});if(!l.ok){const v=await l.text();throw new Error(`OpenAI API error: ${l.status} ${v}`)}const c=await l.json(),d=(g=c.choices)==null?void 0:g[0],h=d==null?void 0:d.message,m=[];if(h!=null&&h.tool_calls)for(const v of h.tool_calls)v.type==="function"&&m.push({name:v.function.name,args:JSON.parse(v.function.arguments||"{}")});return{text:(h==null?void 0:h.content)||"",usageMetadata:c.usage?{promptTokenCount:c.usage.prompt_tokens||0,candidatesTokenCount:c.usage.completion_tokens||0}:void 0,functionCalls:m.length>0?m:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Ds.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"openai",execute:async()=>{var s,o,a;const r=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:n},{role:"user",content:e}],response_format:{type:"json_object"}})});if(!r.ok){const l=await r.text();throw new Error(`OpenAI API error: ${r.status} ${l}`)}return((a=(o=(s=(await r.json()).choices)==null?void 0:s[0])==null?void 0:o.message)==null?void 0:a.content)||null}}):(console.warn("[OpenAIProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("OpenAI not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with decisions array and cycleSummary.
        `;return Ds.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"openai",execute:async()=>{var d,h,m,g,v;const o=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.modelName,messages:[{role:"system",content:i},{role:"user",content:s}],response_format:{type:"json_object"}}),signal:r});if(!o.ok){const x=await o.text();throw new Error(`OpenAI API error: ${o.status} ${x}`)}const a=await o.json(),l=(m=(h=(d=a.choices)==null?void 0:d[0])==null?void 0:h.message)==null?void 0:m.content;if(!l)throw new Error("Empty response from OpenAI");if(((v=(g=a.choices)==null?void 0:g[0])==null?void 0:v.finish_reason)==="length")throw new Error("Response truncated by length limit");let c;try{c=JSON.parse(l)}catch(x){throw new Error(`Failed to parse JSON response: ${x.message}`)}return this.normalizeDecisions(c)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,d=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&d}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),d=o.get(c);if(!d)o.set(c,l);else{const h=a[d.action]||0,m=a[l.action]||0;(m>h||m===h&&(l.confidence||0)>(d.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`
            You are Hyperliquid Dealer, an autonomous crypto trading engine.
            Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

            RESPONSE FORMAT:
            You MUST return a JSON object with a "decisions" array:
            {
                "decisions": [
                    {
                        "coin": "BTC",
                        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
                        "confidence": 0.0 to 1.0,
                        "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
                        "suggestedLeverage": 1-50,
                        "sizeUSDC": number,
                        "orderType": "limit" | "market",
                        "price": number (optional),
                        "stopLoss": number (optional, ONLY for BUY/SELL actions),
                        "takeProfit": number (optional, ONLY for BUY/SELL actions)
                    }
                ]
            }

            CRITICAL RULES:
            1. Return valid JSON with "decisions" array.
            2. One decision per coin provided.
            3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
            4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
            5. Consider trading costs before recommending trades.
            
            REASONING FORMAT (CRITICAL - MUST FOLLOW):
            - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
            - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
              - Check each coin's 'openPosition.hasPosition' field.
              - If hasPosition === false: MUST say "No position." at the START of your reason.
              - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
            - ENTRY/SL/TP VALUES:
              - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
              - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
            - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
            - Examples:
              - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
              - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
              - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."
        `}}class Sut{constructor(){this.providerType="claude",this.apiKey="",this.modelName="claude-sonnet-4-20250514",this.baseUrl="https://api.anthropic.com/v1"}isInitialized(){return this.apiKey.length>0}initialize(e){this.apiKey=e}setModel(e){this.modelName=e}getModel(){return this.modelName}convertToolsToClaudeFormat(e){if(!e||e.length===0)return[];const n=[];for(const r of e)if(r.functionDeclarations)for(const i of r.functionDeclarations)n.push({name:i.name,description:i.description,input_schema:this.convertParamsToJsonSchema(i.parameters)});return n}convertParamsToJsonSchema(e){if(!e)return{type:"object",properties:{}};const n={},r=e.required||[];if(e.properties)for(const[i,s]of Object.entries(e.properties))n[i]={type:this.convertTypeToJsonSchema(s.type),description:s.description||""};return{type:"object",properties:n,required:r}}convertTypeToJsonSchema(e){return{STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array"}[e]||"string"}async sendMessage(e,n,r,i){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");return Ds.enqueue({priority:"HIGH",source:"operator",provider:"claude",execute:async()=>{const s=[];for(const m of e)s.push({role:m.role==="model"?"assistant":"user",content:m.content});s.push({role:"user",content:n});const o=this.convertToolsToClaudeFormat(i),a={model:this.modelName,max_tokens:4096,system:r,messages:s};o.length>0&&(a.tools=o);const l=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify(a)});if(!l.ok){const m=await l.text();throw new Error(`Claude API error: ${l.status} ${m}`)}const c=await l.json();let d="";const h=[];for(const m of c.content||[])m.type==="text"?d+=m.text:m.type==="tool_use"&&h.push({name:m.name,args:m.input||{}});return{text:d,usageMetadata:c.usage?{promptTokenCount:c.usage.input_tokens||0,candidatesTokenCount:c.usage.output_tokens||0}:void 0,functionCalls:h.length>0?h:void 0}}})}async sendJsonAnalysis(e,n){return this.isInitialized()?Ds.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"claude",execute:async()=>{const r=`${n}

IMPORTANT: You MUST respond with ONLY valid JSON. No explanations, no markdown code blocks, just the raw JSON object.`,i=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:r,messages:[{role:"user",content:e},{role:"assistant",content:"{"}]})});if(!i.ok){const a=await i.text();throw new Error(`Claude API error: ${i.status} ${a}`)}const s=await i.json();let o="";for(const a of s.content||[])a.type==="text"&&(o+=a.text);return"{"+o}}):(console.warn("[ClaudeProvider] Client not initialized"),null)}async sendBatchAnalysis(e,n,r){if(!this.isInitialized())throw new Error("Claude not initialized. Please set API Key.");if(r!=null&&r.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const i=this.getBatchDealerSystemInstruction(),s=`
            [USER STRATEGY]
            ${n}

            [BATCH MARKET DATA]
            ${JSON.stringify(e)}

            Analyze all assets in the batch. Return a JSON object with a "decisions" array.
        `;return Ds.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"claude",execute:async()=>{const o=await fetch(`${this.baseUrl}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:this.modelName,max_tokens:4096,system:i,messages:[{role:"user",content:s},{role:"assistant",content:'{"decisions":'}]}),signal:r});if(!o.ok){const h=await o.text();throw new Error(`Claude API error: ${o.status} ${h}`)}const a=await o.json();let l="";for(const h of a.content||[])h.type==="text"&&(l+=h.text);if(!l)throw new Error("Empty response from Claude");const c='{"decisions":'+l;let d;try{d=JSON.parse(c)}catch{try{const h=l.replace(/```json/g,"").replace(/```/g,"").trim();d={decisions:JSON.parse("["+h)}}catch(h){throw new Error(`Failed to parse JSON response: ${h.message}`)}}return this.normalizeDecisions(d)}})}normalizeDecisions(e){let n=[],r;typeof e=="object"&&e.decisions?(n=e.decisions,e.cycleSummary&&typeof e.cycleSummary=="string"&&(r=e.cycleSummary.slice(0,350))):Array.isArray(e)?n=e:typeof e=="object"&&(n=[e]);const s=n.map(l=>l.action==="LONG"?{...l,action:"BUY"}:l.action==="SHORT"?{...l,action:"SELL"}:l.action==="WAIT"?{...l,action:"HOLD"}:l).filter(l=>{const c=typeof l.coin=="string"&&l.coin.length>0,d=["BUY","SELL","HOLD","CLOSE"].includes(l.action);return c&&d}),o=new Map,a={CLOSE:3,BUY:2,SELL:2,HOLD:1};for(const l of s){const c=l.coin.toUpperCase(),d=o.get(c);if(!d)o.set(c,l);else{const h=a[d.action]||0,m=a[l.action]||0;(m>h||m===h&&(l.confidence||0)>(d.confidence||0))&&o.set(c,l)}}return{decisions:Array.from(o.values()),cycleSummary:r}}getBatchDealerSystemInstruction(){return`You are Hyperliquid Dealer, an autonomous crypto trading engine.
Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

RESPONSE FORMAT:
You MUST respond with ONLY valid JSON. The response will be prefilled with '{"decisions":' so you should continue with the array.

Each decision in the array should have:
{
    "coin": "BTC",
    "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
    "confidence": 0.0 to 1.0,
    "reason": "Format: [ACTION] Position Status + Explanation. See REASONING FORMAT below.",
    "suggestedLeverage": 1-50,
    "sizeUSDC": number,
    "orderType": "limit" | "market",
    "price": number (optional),
    "stopLoss": number (optional, ONLY for BUY/SELL actions),
    "takeProfit": number (optional, ONLY for BUY/SELL actions)
}

CRITICAL RULES:
1. Continue the JSON array after the prefill.
2. One decision per coin provided.
3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if maxPositions is reached.
4. LEVERAGE CONSTRAINT: suggestedLeverage MUST NOT exceed portfolio.settings.maxLeverage.
5. Consider trading costs before recommending trades.

REASONING FORMAT (CRITICAL - MUST FOLLOW):
- Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
- POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
  - Check each coin's 'openPosition.hasPosition' field.
  - If hasPosition === false: MUST say "No position." at the START of your reason.
  - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
- ENTRY/SL/TP VALUES:
  - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
  - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
- CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
- Examples:
  - HOLD: "WAIT: No position. RSI neutral, waiting for signal."
  - BUY: "LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800"
  - CLOSE: "CLOSE: In LONG at $95000, PnL: +$150. Take profit reached."`}}class Aut{constructor(){this.providers=new Map,this.providers.set("gemini",new wut),this.providers.set("openai",new Eut),this.providers.set("claude",new Sut),this.initializeFromConfig(),An.subscribe(()=>{this.initializeFromConfig()})}initializeFromConfig(){const e=An.getSnapshot();for(const[n,r]of Object.entries(e.credentials))r.isConfigured&&r.apiKey&&this.initializeProvider(n,r.apiKey);for(const[n,r]of Object.entries(e.componentConfigs)){const i=this.getProvider(r.providerType);i&&"setModel"in i&&i.setModel(r.modelId)}}getProvider(e){return this.providers.get(e)||null}initializeProvider(e,n){const r=this.providers.get(e);r&&(r.initialize(n),console.log(`[ProviderFactory] Initialized ${e} provider`))}getProviderForComponent(e){const r=An.getSnapshot().componentConfigs[e];if(!r)return console.warn(`[ProviderFactory] No config found for component: ${e}`),null;const i=this.providers.get(r.providerType);if(!i)return console.warn(`[ProviderFactory] Provider ${r.providerType} not found`),null;if(!i.isInitialized()){const s=An.getApiKey(r.providerType);if(s)i.initialize(s);else return console.warn(`[ProviderFactory] Provider ${r.providerType} not initialized (no API key)`),null}return"setModel"in i&&i.setModel(r.modelId),i}getModelForComponent(e){var r;return((r=An.getSnapshot().componentConfigs[e])==null?void 0:r.modelId)||""}isComponentReady(e){const n=this.getProviderForComponent(e);return n!==null&&n.isInitialized()}getAvailableProviders(){return Array.from(this.providers.keys())}getModelsForProvider(e){return Ty[e]||[]}validateConfiguration(){const e=[],n=["operator","hyperliquidDealer","polymarketDealer"];for(const r of n)this.isComponentReady(r)||e.push(r);return{valid:e.length===0,missing:e}}}const wg=new Aut;function Tut(){const t={name:"searchLiquidityPools",description:`Search and filter liquidity pools on Meteora and Raydium (Solana DEVNET).
        
        Supports filtering by:
        - Token pair (e.g., SOL/USDC)
        - Protocol (meteora, raydium, or both)
        - Minimum TVL
        - Minimum volume (with timeframe)
        - Minimum APY
        - Sorting by tvl, volume, apy, or fee
        
        IMPORTANT: If user doesn't specify protocol, ASK which they prefer.`,parameters:{type:xe.OBJECT,properties:{tokenA:{type:xe.STRING,description:'First token symbol (e.g., "SOL")'},tokenB:{type:xe.STRING,description:'Second token symbol (e.g., "USDC")'},protocol:{type:xe.STRING,description:'Filter by protocol: "meteora", "raydium", or empty for both'},minTVL:{type:xe.NUMBER,description:"Minimum TVL in USD"},minVolume:{type:xe.NUMBER,description:"Minimum volume in USD"},volumeTimeframe:{type:xe.STRING,description:'Timeframe for volume: "5m", "1h", "24h", "7d"'},minAPY:{type:xe.NUMBER,description:"Minimum APY percentage"},sortBy:{type:xe.STRING,description:'Sort by: "tvl", "volume", "apy"'},limit:{type:xe.NUMBER,description:"Maximum results (default 10)"}}}},e={name:"getPoolDetails",description:"Get detailed information about a specific liquidity pool.",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address or ID"}},required:["poolAddress"]}},n={name:"getTopLiquidityPools",description:`Get ranked list of top liquidity pools by volume, APY, or TVL.
        
        Examples:
        - "pools com maior volume em 5 minutos"  criteria: "volume", volumeTimeframe: "5m"
        - "melhor rentabilidade com TVL > $5000"  criteria: "apy", minTVL: 5000`,parameters:{type:xe.OBJECT,properties:{criteria:{type:xe.STRING,description:'Ranking criteria: "volume", "apy", or "tvl"'},volumeTimeframe:{type:xe.STRING,description:'Timeframe for volume criteria: "5m", "1h", "24h", "7d"'},minTVL:{type:xe.NUMBER,description:"Minimum TVL filter in USD"},protocol:{type:xe.STRING,description:'Filter by protocol: "meteora", "raydium", or empty for all'},limit:{type:xe.NUMBER,description:"Number of results (default 10)"}},required:["criteria"]}},r={name:"getTopVolatilityPools",description:`Get ranked list of liquidity pools by volatility (highest first).
        
        Use this when user asks for:
        - "pools com maior volatilidade"
        - "most volatile pools"
        - "quais pools esto mais volteis?"
        - "ranking de volatilidade"
        - "pools mais arriscadas"
        
        Returns pools sorted by daily volatility percentage, including price changes and confidence levels.`,parameters:{type:xe.OBJECT,properties:{limit:{type:xe.NUMBER,description:"Number of results (default 10)"},days:{type:xe.NUMBER,description:"Days for volatility calculation (default 7)"},minTVL:{type:xe.NUMBER,description:"Minimum TVL in USD (optional filter)"},protocol:{type:xe.STRING,description:'Filter by protocol: "meteora" or "raydium" (optional)'}}}},i={name:"compareLiquidityPools",description:"Compare multiple pools side by side or compare protocols for a token pair.",parameters:{type:xe.OBJECT,properties:{poolAddresses:{type:xe.ARRAY,items:{type:xe.STRING},description:"Array of pool addresses to compare"},tokenPair:{type:xe.STRING,description:'Token pair to compare across protocols (e.g., "SOL/USDC")'}}}},s={name:"getPoolHistory",description:"Get historical data for a pool (TVL, volume, APY over time).",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},metric:{type:xe.STRING,description:'Metric: "tvl", "volume", or "apy"'},days:{type:xe.NUMBER,description:"Number of days of history (default 7)"}},required:["poolAddress","metric"]}},o={name:"getLPPositions",description:"Get all liquidity positions for the connected wallet across Meteora and Raydium.",parameters:{type:xe.OBJECT,properties:{protocol:{type:xe.STRING,description:'Optional: filter by "meteora" or "raydium"'}}}},a={name:"getLPPositionDetails",description:"Get detailed information about a specific LP position.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address or NFT mint"}},required:["positionAddress"]}},l={name:"getUnclaimedLPRewards",description:"Get unclaimed fees and rewards from LP positions.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Optional: specific position. If empty, shows all."}}}},c={name:"estimateLPPositionPnL",description:"Calculate profit/loss for an LP position including impermanent loss and fees earned.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address"}},required:["positionAddress"]}},d={name:"addLiquidity",description:`Add liquidity to a pool on Meteora or Raydium.
        
        BEFORE EXECUTING:
        1. Confirm pool address and protocol
        2. Confirm token amounts
        3. For concentrated liquidity (DLMM/CLMM), confirm price range
        4. Show simulation result first
        5. Get user confirmation
        
        IMPORTANT: If protocol not specified, ASK the user first.`,parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},amountA:{type:xe.NUMBER,description:"Amount of first token"},amountB:{type:xe.NUMBER,description:"Amount of second token"},priceMin:{type:xe.NUMBER,description:"Minimum price for range (DLMM/CLMM)"},priceMax:{type:xe.NUMBER,description:"Maximum price for range (DLMM/CLMM)"},slippageBps:{type:xe.NUMBER,description:"Slippage tolerance in basis points (default 50)"}},required:["poolAddress","amountA","amountB"]}},h={name:"removeLiquidity",description:`Remove liquidity from an LP position.
        
        BEFORE EXECUTING:
        1. Show current position value
        2. Confirm removal percentage
        3. Get user confirmation`,parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address"},percentage:{type:xe.NUMBER,description:"Percentage to remove (1-100)"},slippageBps:{type:xe.NUMBER,description:"Slippage tolerance in basis points"}},required:["positionAddress","percentage"]}},m={name:"claimLPFees",description:"Claim accumulated trading fees from an LP position.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address"}},required:["positionAddress"]}},g={name:"claimLPRewards",description:"Claim farming/staking rewards from an LP position.",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Position address"}},required:["positionAddress"]}},v={name:"rebalanceLPPosition",description:"Rebalance an LP position to a new price range (closes and reopens with new range).",parameters:{type:xe.OBJECT,properties:{positionAddress:{type:xe.STRING,description:"Current position address"},newPriceMin:{type:xe.NUMBER,description:"New minimum price"},newPriceMax:{type:xe.NUMBER,description:"New maximum price"}},required:["positionAddress","newPriceMin","newPriceMax"]}},x={name:"simulateAddLiquidity",description:"Simulate adding liquidity without executing. Shows expected outcome, share of pool, and price impact.",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},amountA:{type:xe.NUMBER,description:"Amount of first token"},amountB:{type:xe.NUMBER,description:"Amount of second token"},priceMin:{type:xe.NUMBER,description:"Min price for range (optional)"},priceMax:{type:xe.NUMBER,description:"Max price for range (optional)"}},required:["poolAddress","amountA","amountB"]}},b={name:"estimateImpermanentLoss",description:"Calculate potential impermanent loss for a pool based on price change scenarios.",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},priceChangePercent:{type:xe.NUMBER,description:"Expected price change in percentage (e.g., 10 for +10%, -20 for -20%)"}},required:["poolAddress","priceChangePercent"]}},w={name:"calculateOptimalPriceRange",description:"Suggest an optimal price range for concentrated liquidity based on volatility and risk level.",parameters:{type:xe.OBJECT,properties:{poolAddress:{type:xe.STRING,description:"Pool address"},riskLevel:{type:xe.STRING,description:'Risk tolerance: "conservative", "moderate", or "aggressive"'}},required:["poolAddress","riskLevel"]}},k={name:"getLPSwapQuote",description:"Get a swap quote through liquidity pools.",parameters:{type:xe.OBJECT,properties:{inputToken:{type:xe.STRING,description:"Input token symbol or mint"},outputToken:{type:xe.STRING,description:"Output token symbol or mint"},amount:{type:xe.NUMBER,description:"Amount to swap"},slippageBps:{type:xe.NUMBER,description:"Slippage tolerance in basis points"}},required:["inputToken","outputToken","amount"]}},N={name:"createLiquidityPool",description:`Create a new liquidity pool on Meteora or Raydium.
        
        REQUIRES CONFIRMATION:
        1. Protocol (Meteora DLMM or Raydium CLMM/CPMM)
        2. Token pair
        3. Fee tier
        4. Initial price
        5. Initial liquidity amounts`,parameters:{type:xe.OBJECT,properties:{protocol:{type:xe.STRING,description:'Protocol: "meteora_dlmm", "raydium_clmm", or "raydium_cpmm"'},tokenA:{type:xe.STRING,description:"First token mint address"},tokenB:{type:xe.STRING,description:"Second token mint address"},feeBps:{type:xe.NUMBER,description:"Fee in basis points (e.g., 25 = 0.25%)"},initialPrice:{type:xe.NUMBER,description:"Initial price of tokenA in terms of tokenB"},initialLiquidityA:{type:xe.NUMBER,description:"Optional: initial amount of tokenA"},initialLiquidityB:{type:xe.NUMBER,description:"Optional: initial amount of tokenB"}},required:["protocol","tokenA","tokenB","feeBps","initialPrice"]}},O={name:"estimatePoolCreationCost",description:"Estimate the cost (in SOL) to create a new liquidity pool.",parameters:{type:xe.OBJECT,properties:{protocol:{type:xe.STRING,description:'Protocol: "meteora_dlmm", "raydium_clmm", or "raydium_cpmm"'}},required:["protocol"]}};return[t,e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b,w,k,N,O]}class kut{constructor(){this.client=null,this.modelName="gemini-2.5-flash",this.initFromConfig()}initFromConfig(){var i,s;const e=An.getApiKey("gemini"),n=(s=(i=window.process)==null?void 0:i.env)==null?void 0:s.GEMINI_API_KEY,r=e||n;r&&this.initialize(r)}initialize(e){this.client=new lme({apiKey:e})}setModel(e){this.modelName=e}getModel(){return this.modelName}setApiKey(e){An.setApiKey("gemini",e),this.initialize(e)}getApiKey(){return An.getApiKey("gemini")}clearApiKey(){An.clearApiKey("gemini"),this.client=null}isInitialized(){return this.client!==null}getTools(){const e={name:"getVaultBalance",description:"Get the balance of the internal Vault Wallet. Can show all balances or a specific token balance. If no token is specified, ask the user if they want to see all balances or a specific token.",parameters:{type:xe.OBJECT,properties:{token:{type:xe.STRING,description:"Optional: Symbol (e.g., SOL, USDC) or Mint Address of specific token to check. If not provided, show all balances."}}}},n={name:"executeSwap",description:"Execute a token swap on Raydium Devnet. If the token symbol is not known (not SOL/USDC/RAY), you MUST ask the user for the Mint Address.",parameters:{type:xe.OBJECT,properties:{inputToken:{type:xe.STRING,description:"Symbol (e.g., SOL) or Mint Address of token to sell"},outputToken:{type:xe.STRING,description:"Symbol (e.g., RAY) or Mint Address of token to buy"},amount:{type:xe.NUMBER,description:"Amount of input token to swap"}},required:["inputToken","outputToken","amount"]}},r={name:"withdrawSol",description:"Transfer SOL from the internal Vault to the connected Owner Wallet.",parameters:{type:xe.OBJECT,properties:{amount:{type:xe.NUMBER,description:"Amount of SOL to transfer"}},required:["amount"]}},i={name:"scheduleTask",description:`Schedule a task (swap, transfer, alert, or Hyperliquid order) to execute either at a specific time OR when a market condition is met.
      
      CRITICAL: You MUST provide ALL required parameters. If ANY information is missing, ask the user for it instead of calling this tool.
      
      For TIME-BASED tasks: provide 'delayMinutes'
      For CONDITION-BASED tasks: provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'.
      
      IMPORTANT: 'conditionTimeframe' is REQUIRED for condition-based tasks. If the user does not specify it (e.g., "1h", "4h", "1d"), you MUST ASK them for it. DO NOT DEFAULT TO 'D'.

      Examples:
      - Time-based: delayMinutes=5
      - Condition (SWAP): taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"
      - Condition (HL_ORDER): taskType="HL_ORDER", coin="BTC", isBuy=true, size=0.001, orderType="limit", price=90000, leverage=10, stopLoss=88000, takeProfit=99000, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="D"`,parameters:{type:xe.OBJECT,properties:{taskType:{type:xe.STRING,description:"Type of task: SWAP, TRANSFER, ALERT, or HL_ORDER (Hyperliquid order)"},inputToken:{type:xe.STRING,description:"For SWAP: Input token symbol or mint address. For TRANSFER: Token to transfer. Not used for ALERT or HL_ORDER."},outputToken:{type:xe.STRING,description:"For SWAP: Output token symbol or mint address. Not used for other task types."},amount:{type:xe.NUMBER,description:"Amount to swap or transfer. Not used for ALERT or HL_ORDER."},coin:{type:xe.STRING,description:'For HL_ORDER: Asset symbol (e.g., "BTC", "ETH", "SOL"). Required for HL_ORDER.'},isBuy:{type:xe.BOOLEAN,description:"For HL_ORDER: True for LONG/BUY, False for SHORT/SELL. Required for HL_ORDER."},size:{type:xe.NUMBER,description:"For HL_ORDER: Size of the order. Required for HL_ORDER."},orderType:{type:xe.STRING,description:'For HL_ORDER: Order type ("limit", "market", "ioc", "alo"). Ask user if not specified.'},price:{type:xe.NUMBER,description:"For HL_ORDER: Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:xe.NUMBER,description:"For HL_ORDER: Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:xe.NUMBER,description:"For HL_ORDER: Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:xe.NUMBER,description:"For HL_ORDER: Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:xe.BOOLEAN,description:"For HL_ORDER: True to only reduce existing position. Default false."},delayMinutes:{type:xe.NUMBER,description:"For time-based: Number of minutes to wait before executing. Leave empty for condition-based."},conditionIndicator:{type:xe.STRING,description:"For condition-based: Indicator name (rsi, macd, ema, sma, stoch, price). Required for condition-based tasks."},conditionSymbol:{type:xe.STRING,description:"For condition-based: Trading symbol (e.g., BTCUSDT, SOLUSDT). Required for condition-based tasks."},conditionOperator:{type:xe.STRING,description:"For condition-based: Comparison operator (<, >, <=, >=, ==). Required for condition-based tasks."},conditionValue:{type:xe.NUMBER,description:"For condition-based: Threshold value to compare against. Required for condition-based tasks."},conditionTimeframe:{type:xe.STRING,description:"For condition-based: Timeframe (1, 5, 15, 60, 240, D, W). REQUIRED. If missing, ask user."}},required:["taskType"]}},s={name:"transferToken",description:"Transfer SPL tokens or NFTs from the Vault to the Owner Wallet. You can ONLY send to the Owner, not to any other address.",parameters:{type:xe.OBJECT,properties:{tokenMint:{type:xe.STRING,description:"Mint address of the token to transfer"},amount:{type:xe.NUMBER,description:"Amount of tokens to transfer (in human-readable units, not raw)"}},required:["tokenMint","amount"]}},o={name:"getMarketPrice",description:"Get the current market price, exchange, and last update time for a given symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},a={name:"getOHLCV",description:"Get OHLCV (Open, High, Low, Close, Volume) candlestick data for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},timeframe:{type:xe.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol"]}},l={name:"getIndicator",description:"Get a specific technical indicator value for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'},indicator:{type:xe.STRING,description:'Indicator name: "rsi", "macd", "ema", "sma", "stoch"'},timeframe:{type:xe.STRING,description:'Timeframe (e.g., "1", "5", "15", "60", "240", "D"). Default is "60".'}},required:["symbol","indicator"]}},c={name:"getTradingViewSummary",description:"Get the TradingView buy/sell/neutral recommendation summary for a symbol.",parameters:{type:xe.OBJECT,properties:{symbol:{type:xe.STRING,description:'Trading symbol (e.g., "BTCUSDT", "SOLUSDT")'}},required:["symbol"]}},d={name:"getHLBalance",description:"Get the balance of the Hyperliquid Vault (USDC) and positions.",parameters:{type:xe.OBJECT,properties:{}}},h={name:"getHLPositions",description:"Get open positions in the Hyperliquid Vault.",parameters:{type:xe.OBJECT,properties:{}}},m={name:"getHLMarketData",description:"Get market data (price, orderbook) for a Hyperliquid asset.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL")'}},required:["coin"]}},g={name:"createHLOrder",description:`Place an order on Hyperliquid Testnet. 
      
      **USDC-BASED ORDERS:**
      If user says "comprar X USDC de COIN", provide usdcAmount=X and the system will automatically calculate the size.
      
      CRITICAL: You MUST ask the user for ALL required information before calling this tool:
      1. Coin (asset symbol)
      2. Direction (LONG/BUY or SHORT/SELL)
      3. Size (amount) OR usdcAmount (USDC to spend)
      4. Order Type (LIMIT or MARKET)
      5. Price (required for LIMIT orders)
      6. Leverage (1-50x, default 1x if not specified)
      7. Stop Loss (optional)
      8. Take Profit (optional)
      
      Minimum order value: $10 USD`,parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:'Asset symbol (e.g., "BTC", "ETH", "SOL", "HYPE")'},isBuy:{type:xe.BOOLEAN,description:"True for LONG/BUY, False for SHORT/SELL"},size:{type:xe.NUMBER,description:"Size of the order in token units. Leave empty if usdcAmount is provided."},usdcAmount:{type:xe.NUMBER,description:"Amount in USDC to spend (for buys) or receive (for sells). If provided, size will be auto-calculated."},orderType:{type:xe.STRING,description:'Order type: "limit", "market", "ioc", "alo". Ask user if not specified.'},price:{type:xe.NUMBER,description:"Limit price. Required for LIMIT orders, ignored for MARKET."},leverage:{type:xe.NUMBER,description:"Leverage multiplier (1-50). Ask user, default 1x if not specified."},stopLoss:{type:xe.NUMBER,description:"Optional stop loss price. Ask user if they want to set one."},takeProfit:{type:xe.NUMBER,description:"Optional take profit price. Ask user if they want to set one."},reduceOnly:{type:xe.BOOLEAN,description:"True to only reduce existing position. Default false."}},required:["coin","isBuy","orderType"]}},v={name:"cancelHLOrder",description:"Cancel a specific order on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},orderId:{type:xe.NUMBER,description:"Order ID to cancel"}},required:["coin","orderId"]}},x={name:"updateHLLeverage",description:"Update leverage for a specific asset on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},leverage:{type:xe.NUMBER,description:"New leverage (1-50)"},isCross:{type:xe.BOOLEAN,description:"True for cross margin, false for isolated"}},required:["coin","leverage","isCross"]}},b={name:"closeHLPosition",description:"Close an open position on Hyperliquid.",parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:"Asset symbol"},size:{type:xe.NUMBER,description:"Optional: partial close size. If not provided, closes entire position."},orderType:{type:xe.STRING,description:'Order type: "market" (immediate) or "limit"'},price:{type:xe.NUMBER,description:"Price for limit orders"}},required:["coin","orderType"]}},w={name:"withdrawFromHL",description:`Execute a USDC withdrawal from Hyperliquid Testnet Vault to the Owner's wallet.
      
      This tool EXECUTES the withdrawal immediately. Only call this when the user explicitly wants to withdraw/send/transfer USDC from Hyperliquid.
      
      Requirements:
      - Amount must be > $1 (to cover the $1 USDC withdrawal fee)
      - Vault must be unlocked
      - Owner wallet must be connected
      
      Network: Hyperliquid Testnet
      Fee: $1 USDC (deducted from withdrawal amount)
      Processing time: ~5 minutes`,parameters:{type:xe.OBJECT,properties:{amount:{type:xe.NUMBER,description:"Amount of USDC to withdraw (must be > $1 to cover fee)"}},required:["amount"]}},k={name:"getDealerTradeHistory",description:`Query the Hyperliquid Dealer's trade operation history and AI reasoning.
      
      Use this tool when users ask about:
      - Why a specific position was opened/closed
      - The reasoning behind Dealer trades
      - Details about past or current operations
      - What the Dealer did or is doing
      
      Returns:
      - Operation records with coin, action, price, size, PnL
      - Full AI reasoning and confidence for each trade
      - Recent activity logs`,parameters:{type:xe.OBJECT,properties:{coin:{type:xe.STRING,description:'Optional: Filter by specific coin (e.g., "BTC", "ETH"). If not provided, returns all operations.'},limit:{type:xe.NUMBER,description:"Optional: Maximum number of records to return (default 10, max 50)"},includeReasoning:{type:xe.BOOLEAN,description:"Optional: Whether to include full AI reasoning (default true). Set to false for basic info only."}}}},N={name:"getHLDealerThinking",description:`Get the Hyperliquid Dealer's AI reasoning and decisions from recent analysis cycles.
      
      Returns the complete AI thinking process including:
      - Market analysis summary from the AI
      - Individual asset decisions with confidence levels
      - Assets analyzed in the cycle
      
      Use this when user asks about Hyperliquid Dealer:
      - "O que o dealer pensou?" / "What did the dealer think?"
      - "Qual foi o raciocnio?" / "What was the reasoning?"
      - "Por que essa deciso?" / "Why this decision?"
      - "Mostra a anlise" / "Show the analysis"
      
      Can access up to 3 previous cycles (0=latest, 1=previous, 2=oldest).`,parameters:{type:xe.OBJECT,properties:{cycleIndex:{type:xe.NUMBER,description:"Cycle index: 0=latest (default), 1=previous, 2=oldest. Max 3 cycles available."}}}},O=Tut();return[{functionDeclarations:[e,n,r,s,i,o,a,l,c,d,h,m,g,v,x,b,w,k,N,...O]}]}async sendMessage(e,n,r){if(!this.client)throw new Error("AI Agent not initialized. Please set API Key.");const i=this.client,s=this.modelName,o=()=>this.getTools(),a=l=>{l.usageMetadata&&Os.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:l.usageMetadata.promptTokenCount||0,outputTokens:l.usageMetadata.candidatesTokenCount||0,model:s})};return Ds.enqueue({priority:"HIGH",source:"operator",provider:"gemini",execute:async()=>{const l=e.map(h=>({role:h.role==="model"?"model":"user",parts:[{text:h.content}]})),d=await i.chats.create({model:s,config:{systemInstruction:r,tools:o()},history:l}).sendMessage({message:n});return a(d),d}})}async getDealerAnalysis(e,n){if(!this.client)throw new Error("AI Agent not initialized.");const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze provided market data and output a TRADING DECISION based strictly on the user's Strategy and Portfolio Constraints.

      You will receive:
      1. Market Data (Prices, Indicators, Orderbook)
      2. Portfolio Context (Current Balance, Open Positions, PnL, Risk Limits)
      3. TRADING COSTS (Maker/Taker Fees, Funding Rate, Breakeven Prices)

      You must return valid JSON with this schema:
      {
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Detailed explanation citing technicals, fees, and costs. Include Entry Price, Stop Loss, and Take Profit values if applicable. (Max 600 characters)",
        "coin": "Symbol analyzed",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output the JSON decision. No markdown blocks, no fluff.
      2. If data is insufficient or unclear, action="HOLD".
      3. CHECK PORTFOLIO LIMITS: Do not buy if 'maxPositions' is reached.
      4. CLOSE POSITIONS: If an open position hits target or stop loss criteria in your analysis, output "CLOSE".
      5. BANKROLL: Using 'manualBankroll' or 'availableBalance' from context, suggest a safe 'sizeUSDC' for new trades.
      7. USER FEEDBACK (CRITICAL - LEARN FROM THIS):
      ${e.userFeedback||"No recent feedback."}

      USER FEEDBACK ACKNOWLEDGMENT (CRITICAL - IF FEEDBACK EXISTS):
      - If 'userFeedback' contains a review for the coin you are analyzing, you MUST include a brief acknowledgment at the END of your "reason" field.
      - Format: "[REVIEW CONSIDERED: <category>] <brief explanation of how you adjusted>"
      - Example: "[REVIEW CONSIDERED: TOO_BULLISH] Reduced confidence and tightened TP based on user's prior assessment."
      - This acknowledgment should be APPENDED to your normal reasoning, not replace it.
      - If no feedback exists for this specific coin, do not add any acknowledgment.

      8. REASONING FORMAT (CRITICAL - MUST FOLLOW):
      7. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      TRADING COSTS AWARENESS (CRITICAL FOR PROFIT CALCULATION):
      8. FEE CONSIDERATION: Context includes 'tradingCosts.makerFee' and 'tradingCosts.takerFee' (as decimals, e.g., 0.0005 = 0.05%).
         - Total round-trip cost = (takerFee * 2) for market orders or (makerFee * 2) for limit orders.
         - Only enter trades where expected price movement > total round-trip cost.
      9. FUNDING RATE: Context includes 'tradingCosts.fundingRate' (8h rate) and 'estimatedDailyHoldingCost'.
         - Positive funding: Longs pay shorts.
         - Negative funding: Shorts pay longs.
         - Factor funding into holding decisions for swing trades.
      10. BREAKEVEN PRICES: If 'portfolio.positionBreakevens' exists, it contains:
         - breakevenPrice: Price needed to cover entry/exit fees
         - minProfitPrice: Price needed for 1% profit after costs
         - Use these to decide when to CLOSE positions profitably.
      11. PROFIT THRESHOLD: Only suggest trades where expected move > 2x trading costs (to be safe).
    `;return Ds.enqueue({priority:"HIGH",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var d,h;const o=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),a=`
            [USER STRATEGY]
            ${n}

            [MARKET CONTEXT]
            ${JSON.stringify(e)}
        `,l=await o.sendMessage({message:a});let c="";if(l.candidates&&((h=(d=l.candidates[0])==null?void 0:d.content)!=null&&h.parts))for(const m of l.candidates[0].content.parts)m.text&&(c+=m.text);try{const m=c.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(m)}catch{return console.error("Failed to parse Dealer JSON response:",c),{action:"HOLD",reason:"Failed to parse AI response"}}}})}async getBatchDealerAnalysis(e,n){var o,a;if(!this.client){console.warn("[AIService] Client not initialized. Attempting lazy init...");const l=An.getApiKey("gemini"),c=(a=(o=window.process)==null?void 0:o.env)==null?void 0:a.GEMINI_API_KEY,d=l||c;if(d)this.initialize(d),console.log("[AIService] Lazy init successful.");else throw new Error("AI Agent not initialized and no API Key found. Please configure your API key in Settings.")}const r=this.client,i=this.modelName,s=`
      You are Hyperliquid Dealer, an autonomous crypto trading engine.
      Your goal is to analyze specific assets and output a TRADING DECISION for EACH one.

      You will receive:
      1. A JSON Object containing an array of 'coins' with their Market Data (Price, Indicators) AND HISTORICAL SERIES.
      2. Portfolio Context (Balance, Open Positions, Risk Limits, userFees with makerFee/takerFee).
      3. PRE-CALCULATED DIVERGENCE SIGNALS: Each coin includes a 'divergences' array with detected divergence patterns.

      DATA STRUCTURE NOTES:
      - 'portfolio.userFees' contains global makerFee and takerFee (applies to all coins).
      - Each coin's 'tradingCosts' contains only fundingRate and dailyHoldingCost (unique per coin).
      - The keys in each coin's 'indicators' object tell you which indicators are active (e.g., {rsi: ..., macd: ...}).
      - 'ts' is a Unix timestamp (seconds since epoch).

      INDICATOR WEIGHTING SYSTEM:
      - Each indicator includes a 'weight' field (0.5 to 2.0, default 1.0).
      - Each indicator includes a 'category' field (trend, momentum, volume, volatility).
      - weight > 1.0: User considers this indicator MORE important (prioritize its signals)
      - weight < 1.0: User considers this indicator LESS important (lower priority)
      - weight = 1.0: Standard importance
      - When indicators conflict, prefer higher-weighted signals.
      - Give each category's signals equal base weight, then apply individual indicator weights.

      INDICATOR CATEGORIES (do NOT stack similar signals from same category):
      - TREND (EMA, SMA, ADX, Ichimoku): Direction of market
      - MOMENTUM (RSI, MACD, Stochastic): Timing of entry/exit
      - VOLUME (OBV, VWAP): Confirmation of moves
      - VOLATILITY (ATR, Bollinger): Risk context

      AUTONOMOUS MODE (when 'autonomousMode' is true in context):
      - The context includes 'availablePresets' with preset configurations.
      - You MUST analyze market conditions first and choose the best preset.
      - Add a 'chosenPreset' field to your JSON response (outside the decisions array) with one of:
        - 'balanced': For uncertain/mixed signals (default fallback)
        - 'scalp': For high volatility with quick reversals
        - 'trendFollowing': For strong directional trends (ADX > 25)
        - 'meanReversion': For ranging/sideways markets
        - 'volumeConfirm': For breakout scenarios or unusual volume
      - Add a 'presetReason' field explaining why you chose that preset.
      - Focus your analysis on the indicators most relevant to your chosen preset.

      RESPONSE FORMAT:
      - For NORMAL mode: Return JSON array of decisions directly.
      - For AUTONOMOUS mode: Return { "chosenPreset": "...", "presetReason": "...", "decisions": [...] }

      You must return valid JSON with this EXACT schema for each decision:
      {
        "coin": "Symbol analyzed",
        "action": "BUY" | "SELL" | "HOLD" | "CLOSE",
        "confidence": number (0.0 to 1.0),
        "reason": "Format: [ACTION] Position Status + Explanation. POSITION STATUS RULES: If NO open position, say 'No position.' If HAVE open position, say 'In LONG/SHORT at $X, PnL: $Y'. ENTRY/SL/TP RULES: Only include Entry/SL/TP values for BUY or SELL actions. For HOLD/CLOSE, do NOT include Entry/SL/TP. Examples: HOLD='WAIT: No position. RSI neutral.' BUY='LONG: No position. RSI divergence. Entry: $95000, SL: $93100, TP: $98800' CLOSE='CLOSE: In LONG at $95000, PnL: +$150. TP reached.'. Max 600 chars.",
        "suggestedLeverage": number (1-50, optional, MUST NOT exceed portfolio.settings.maxLeverage),
        "sizeUSDC": number (optional, calculate based on bankroll settings),
        "orderType": "limit" | "market",
        "price": number (for limit orders, optional),
        "stopLoss": number (optional),
        "takeProfit": number (optional)
      }

      CRITICAL RULES:
      1. ONLY output valid JSON.
      2. Must return one decision object per coin provided in the input.
      3. CHECK PORTFOLIO LIMITS: Do not suggest BUY if 'portfolio.maxPositions' is reached.
      4. CLOSE POSITIONS: Prioritize checking existing positions for exit signals.
      5. PROFITABILITY: Consider 'portfolio.userFees' and coin's 'tradingCosts'. Only trade if potential > costs.
      6. LEVERAGE CONSTRAINT: If suggesting leverage, 'suggestedLeverage' MUST NOT exceed 'portfolio.settings.maxLeverage'. This is a hard limit set by the user.
      
      7. RISK PROTECTION (CRITICAL - MANDATORY JSON FIELDS):
         - Check 'portfolio.settings.stopLossEnabled' and 'portfolio.settings.takeProfitEnabled'.
         - If 'stopLossEnabled' is true AND 'stopLossPercent' is null: You MUST include the numeric field "stopLoss" in your JSON response (not just in reason text). Example: "stopLoss": 93100.50
         - If 'takeProfitEnabled' is true AND 'takeProfitPercent' is null: You MUST include the numeric field "takeProfit" in your JSON response (not just in reason text). Example: "takeProfit": 98800.00
         - These are SEPARATE JSON FIELDS, not just mentions in the "reason" string.
         - For BUY/LONG: stopLoss should be BELOW entry price, takeProfit should be ABOVE entry price.
         - For SELL/SHORT: stopLoss should be ABOVE entry price, takeProfit should be BELOW entry price.
      
      8. DIVERGENCE SIGNALS (HIGH PRIORITY): Each coin includes a 'divergences' array with pre-calculated signals:
         - BULLISH: Price lower low + RSI/MACD higher low  potential reversal UP
         - BEARISH: Price higher high + RSI/MACD lower high  potential reversal DOWN
         - HIDDEN_BULLISH: Trend continuation signal UP
         - HIDDEN_BEARISH: Trend continuation signal DOWN
         - Strength: WEAK, MODERATE, STRONG (prioritize MODERATE and STRONG signals)
         - Use these divergences with HIGH PRIORITY - they are algorithmically detected and reliable.
       8. REASONING FORMAT (CRITICAL - MUST FOLLOW):
          - Start with action: "LONG:", "SHORT:", "CLOSE:", or "WAIT:".
          - POSITION STATUS (MANDATORY - ALWAYS INCLUDE):
            - Check each coin's 'openPosition.hasPosition' field.
            - If hasPosition === false: MUST say "No position." at the START of your reason.
            - If hasPosition === true: MUST say "In [side] at $[entryPx], PnL: $[unrealizedPnl]" at the START.
          - ENTRY/SL/TP VALUES:
            - ONLY include Entry, SL, TP values for BUY or SELL actions (new trades).
            - For HOLD or CLOSE actions, do NOT include Entry/SL/TP values.
          - CRITICAL: Use ONLY the openPosition data from each coin's context. NEVER invent or guess PnL values.
          - CRITICAL: If hasPosition is false, DO NOT report SL/TP values - there is no position to have SL/TP.
          - MANDATORY: If divergences are present, mention them in your reasoning.
          - RECOMMENDED: Mention indicator weights if they influenced your decision.
         - RECOMMENDED: If 'macro' data is present, mention macro alignment in your reasoning.

      USER FEEDBACK (CRITICAL - LEARN FROM THIS):
      ${e.userFeedback||"No recent feedback."}

      USER FEEDBACK ACKNOWLEDGMENT (CRITICAL - IF FEEDBACK EXISTS):
      - If 'userFeedback' contains a review for the coin you are analyzing, you MUST include a brief acknowledgment at the END of your "reason" field.
      - Format: "[REVIEW CONSIDERED: <category>] <brief explanation of how you adjusted>"
      - Example: "[REVIEW CONSIDERED: TOO_BULLISH] Reduced confidence and tightened TP based on user's prior assessment."
      - This acknowledgment should be APPENDED to your normal reasoning, not replace it.
      - If no feedback exists for this specific coin, do not add any acknowledgment.

      MACRO TIMEFRAME CONFIRMATION (CRITICAL FOR ACCURACY):
      - Each coin MAY include a 'macro' object with indicator values from a HIGHER timeframe.
      - 'macro.timeframe' tells you the macro timeframe (e.g., '240' = 4H, 'D' = Daily, 'W' = Weekly).
      - 'macro.indicators' contains current values only (no history).
      
      MACRO ALIGNMENT RULES:
      - If main timeframe shows OVERBOUGHT but macro shows OVERSOLD: Consider HOLD or reduce confidence by 20-30%.
      - If main timeframe shows OVERSOLD but macro shows OVERBOUGHT: Consider HOLD or reduce confidence by 20-30%.
      - If main and macro ALIGN (both overbought or both oversold): Full confidence trade.
      - If conflicting signals: MENTION THE CONFLICT in your reasoning (e.g., "Main RSI=75 but Macro RSI=30 - conflicting").
      
      EXAMPLES:
      - Main RSI=25 (oversold) + Macro RSI=35 (neutral-oversold) = ALIGNED = Full confidence BUY.
      - Main RSI=75 (overbought) + Macro RSI=30 (oversold) = CONFLICTING = HOLD or reduce size.
      - Use macro as a FILTER to avoid trading against the higher timeframe trend.
    `;return Ds.enqueue({priority:"NORMAL",source:"hyperliquidDealer",provider:"gemini",execute:async()=>{var N,O,D;const l=r.chats.create({model:i,config:{systemInstruction:s,responseMimeType:"application/json"}}),c=`
          [USER STRATEGY]
          ${n}

          [BATCH MARKET DATA]
          ${JSON.stringify(e)}

          Analyze all assets in the batch. Return a JSON Array of decisions.
        `,d=await l.sendMessage({message:c});d.usageMetadata&&Os.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:d.usageMetadata.promptTokenCount||0,outputTokens:d.usageMetadata.candidatesTokenCount||0,model:i,metadata:{coinsAnalyzed:((N=e==null?void 0:e.coins)==null?void 0:N.length)||0}});let h="";if(d.candidates&&((D=(O=d.candidates[0])==null?void 0:O.content)!=null&&D.parts))for(const _ of d.candidates[0].content.parts)_.text&&(h+=_.text);if(!h)return console.warn("[AIService] Empty response from Batch Dealer Analysis"),[];const m=h.replace(/```json/g,"").replace(/```/g,"").trim();let g;try{g=JSON.parse(m)}catch(_){return console.warn("[AIService] JSON Parse Error:",_),[]}let v=[];if(Array.isArray(g))v=g;else if(typeof g=="object")v=[g];else return[];const b=v.map(_=>_.action==="LONG"?{..._,action:"BUY"}:_.action==="SHORT"?{..._,action:"SELL"}:_.action==="WAIT"?{..._,action:"HOLD"}:_).filter(_=>{const F=typeof _.coin=="string"&&_.coin.length>0,z=["BUY","SELL","HOLD","CLOSE"].includes(_.action);return!(!F||!z)}),w={CLOSE:3,BUY:2,SELL:2,HOLD:1},k=new Map;for(const _ of b){const F=_.coin.toUpperCase(),z=k.get(F);if(!z)k.set(F,_);else{const L=w[z.action]||0,$=w[_.action]||0;if($>L)k.set(F,_);else if($===L){const G=z.confidence||0;(_.confidence||0)>G&&k.set(F,_)}}}return Array.from(k.values())}})}async analyzePolymarket(e){if(!this.client)return console.warn("[AIService] Client not initialized for Polymarket analysis"),null;const n=this.client,r=this.modelName,i=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      You will receive market data including:
      - Market questions and current YES/NO prices
      - Time to resolution
      - Volume and liquidity data
      - Current portfolio positions

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution (avoid markets expiring soon without clear edge)
      3. Factor in liquidity - avoid illiquid markets
      4. Look for mispriced probabilities based on news/fundamentals
      5. Diversify across different categories when possible
    `;return Ds.enqueue({priority:"NORMAL",source:"polymarketDealer",provider:"gemini",execute:async()=>{var l,c;const o=await n.chats.create({model:r,config:{systemInstruction:i,responseMimeType:"application/json"}}).sendMessage({message:e});o.usageMetadata&&Os.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:r});let a="";if(o.candidates&&((c=(l=o.candidates[0])==null?void 0:l.content)!=null&&c.parts))for(const d of o.candidates[0].content.parts)d.text&&(a+=d.text);return a||null}})}getProviderFactory(){return wg}getConfigStore(){return An}getAvailableProviders(){return["gemini","openai","claude"]}getModelsForProvider(e){return Ty[e]||[]}async sendOperatorMessage(e,n,r){var s;const i=wg.getProviderForComponent("operator");if(!i)return console.log("[AIService] Falling back to legacy Gemini for operator"),this.sendMessage(e,n,r);try{const o=await i.sendMessage(e,n,r,((s=i.getTools)==null?void 0:s.call(i))||this.getTools());if(o.usageMetadata){const a=An.getComponentConfig("operator");Os.addRecord({source:"MANAGER",operation:"QUERY",inputTokens:o.usageMetadata.promptTokenCount||0,outputTokens:o.usageMetadata.candidatesTokenCount||0,model:a.modelId})}return{text:o.text,functionCalls:o.functionCalls,usageMetadata:o.usageMetadata,candidates:[{content:{parts:[{text:o.text}]}}]}}catch(o){return console.error("[AIService] Operator provider error:",o),this.sendMessage(e,n,r)}}async getDealerBatchAnalysis(e,n,r){var s;const i=wg.getProviderForComponent("hyperliquidDealer");if(!i)return console.log("[AIService] Falling back to legacy batch analysis"),{decisions:await this.getBatchDealerAnalysis(e,n)};try{const o=await i.sendBatchAnalysis(e,n,r),a=An.getComponentConfig("hyperliquidDealer");return Os.addRecord({source:"DEALER",operation:"BATCH_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(o).length/4),model:a.modelId,metadata:{coinsAnalyzed:((s=e==null?void 0:e.coins)==null?void 0:s.length)||0}}),o}catch(o){if((o==null?void 0:o.name)==="AbortError")throw console.log("[AIService] Dealer analysis aborted"),o;return console.error("[AIService] Dealer provider error:",o),{decisions:await this.getBatchDealerAnalysis(e,n)}}}async getDealerAnalysisViaOracle(e,n,r){const i=An.getComponentConfig("hyperliquidDealer"),s=An.getComponentApiKey("hyperliquidDealer");if(!s)throw new Error("No AI API key configured for Hyperliquid Dealer");const o={marketContext:e,aiConfig:{provider:i.providerType,apiKey:s,modelId:i.modelId},portfolioContext:n};try{const a=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const c=await a.text();throw new Error(`Strategy Oracle error: ${c}`)}const l=await a.json();return Os.addRecord({source:"DEALER",operation:"ORACLE_ANALYSIS",inputTokens:Math.round(JSON.stringify(e).length/4),outputTokens:Math.round(JSON.stringify(l).length/4),model:i.modelId,metadata:{via:"strategy-oracle"}}),{decisions:l.decisions||[],timestamp:l.timestamp||new Date().toISOString()}}catch(a){throw console.error("[AIService] Strategy Oracle call failed:",a),a}}async getPolymarketAnalysis(e){const n=wg.getProviderForComponent("polymarketDealer");if(!n)return console.log("[AIService] Falling back to legacy Polymarket analysis"),this.analyzePolymarket(e);const r=`
      You are a Polymarket prediction market analyst.
      Your goal is to analyze prediction markets and identify trading opportunities.

      Respond with a JSON object containing your analysis:
      {
        "decisions": [
          {
            "action": "BUY_YES" | "BUY_NO" | "SELL_YES" | "SELL_NO" | "HOLD",
            "marketId": "string",
            "question": "string",
            "confidence": 0-100,
            "reason": "explanation",
            "suggestedSize": number (USDC),
            "suggestedPrice": number (0-1)
          }
        ],
        "marketOverview": "Brief overall assessment",
        "riskAssessment": "Brief risk commentary"
      }

      RULES:
      1. Only suggest trades with confidence >= 60
      2. Consider time to resolution
      3. Factor in liquidity
      4. Look for mispriced probabilities
      5. Diversify when possible
    `;try{const i=await n.sendJsonAnalysis(e,r);if(i){const s=An.getComponentConfig("polymarketDealer");Os.addRecord({source:"POLYMARKET_DEALER",operation:"ANALYSIS",inputTokens:Math.round(e.length/4),outputTokens:Math.round(i.length/4),model:s.modelId})}return i}catch(i){return console.error("[AIService] Polymarket provider error:",i),this.analyzePolymarket(e)}}isComponentReady(e){return wg.isComponentReady(e)}getComponentProviderInfo(e){const n=An.getComponentConfig(e),i=Ty[n.providerType].find(s=>s.id===n.modelId);return{provider:n.providerType,model:n.modelId,modelName:(i==null?void 0:i.name)||n.modelId,isReady:wg.isComponentReady(e)}}async generateCycleSummary(e,n){if(!this.client)return console.warn("[AIService] Client not initialized for cycle summary"),"";if(e.length===0)return"";const r=this.client,i=this.modelName,o=`You are a trading analyst summarizing recent trading activity.
Generate a CONCISE contextual summary for an AI trader about to analyze ${n==="hyperliquid"?"crypto perpetual futures trading on Hyperliquid":"prediction market trading on Polymarket"}.

The summary should help the AI understand:
1. Recent market sentiment and patterns observed
2. Actions taken in previous cycles (buys, sells, holds)
3. Key assets/markets being monitored
4. Any notable patterns or trends

CRITICAL RULES:
- Output ONLY plain text, max 300 characters
- Be extremely concise - every word must add value
- Focus on actionable context for the next analysis
- No JSON, no markdown, no formatting`,a=e.map(c=>({time:new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),actions:c.decisions.map(d=>`${d.asset}:${d.action}(${Math.round(d.confidence*100)}%)`).join(", "),assets:c.assetsAnalyzed.length})),l=`Recent ${n} trading cycles (newest first):
${a.map((c,d)=>`Cycle ${e.length-d}: ${c.time} - Analyzed ${c.assets} assets. Actions: ${c.actions||"None"}`).join(`
`)}

Generate a brief contextual summary for the next analysis cycle.`;return Ds.enqueue({priority:"LOW",source:n==="hyperliquid"?"hyperliquidDealer":"polymarketDealer",provider:"gemini",execute:async()=>{var c,d;try{const m=await r.chats.create({model:i,config:{systemInstruction:o}}).sendMessage({message:l});m.usageMetadata&&Os.addRecord({source:n==="hyperliquid"?"DEALER":"POLYMARKET_DEALER",operation:"CYCLE_SUMMARY",inputTokens:m.usageMetadata.promptTokenCount||0,outputTokens:m.usageMetadata.candidatesTokenCount||0,model:i});let g="";if(m.candidates&&((d=(c=m.candidates[0])==null?void 0:c.content)!=null&&d.parts))for(const v of m.candidates[0].content.parts)v.text&&(g+=v.text);return g.trim().slice(0,350)}catch(h){return console.error("[AIService] Cycle summary generation failed:",h),""}}})}}const Rm=new kut;class Nut{constructor(){this.worker=null,this.callbacks=new Map,this.fallbackTimers=new Map,this.isSupported=typeof Worker<"u",this.isSupported?this.initWorker():console.warn("[BackgroundTimer]  Web Workers not supported, falling back to setInterval (will be throttled in background)")}initWorker(){try{const e=`
                const timers = new Map();
                
                self.onmessage = (event) => {
                    const { type, timerId, intervalMs } = event.data;
                    
                    if (type === 'START' && timerId && intervalMs) {
                        // Clear existing timer if any
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        
                        // Start new timer
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        
                        // Log start (visible in browser console under Worker context)
                        console.log('[TimerWorker] Started timer "' + timerId + '" with ' + intervalMs + 'ms interval');
                    }
                    
                    if (type === 'STOP' && timerId) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                            timers.delete(timerId);
                            console.log('[TimerWorker] Stopped timer "' + timerId + '"');
                        }
                    }
                    
                    if (type === 'UPDATE_INTERVAL' && timerId && intervalMs) {
                        if (timers.has(timerId)) {
                            clearInterval(timers.get(timerId));
                        }
                        const id = setInterval(() => {
                            self.postMessage({ type: 'TICK', timerId, timestamp: Date.now() });
                        }, intervalMs);
                        timers.set(timerId, id);
                        console.log('[TimerWorker] Updated timer "' + timerId + '" to ' + intervalMs + 'ms');
                    }
                };
            `,n=new Blob([e],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(n)),this.worker.onmessage=r=>{const{type:i,timerId:s,timestamp:o}=r.data;if(i==="TICK"&&this.callbacks.has(s))try{this.callbacks.get(s)(o)}catch(a){console.error(`[BackgroundTimer] Error in callback for "${s}":`,a)}},this.worker.onerror=r=>{console.error("[BackgroundTimer] Worker error:",r)},console.log("[BackgroundTimer]  Web Worker initialized - timers will run in background")}catch(e){console.error("[BackgroundTimer] Failed to initialize Worker:",e),this.isSupported=!1}}start(e,n,r){if(this.callbacks.set(e,r),this.worker)this.worker.postMessage({type:"START",timerId:e,intervalMs:n});else{console.warn(`[BackgroundTimer] Using fallback for "${e}" - may be throttled in background`);const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}stop(e){this.callbacks.delete(e),this.worker&&this.worker.postMessage({type:"STOP",timerId:e}),this.fallbackTimers.has(e)&&(clearInterval(this.fallbackTimers.get(e)),this.fallbackTimers.delete(e))}updateInterval(e,n){if(this.worker&&this.callbacks.has(e))this.worker.postMessage({type:"UPDATE_INTERVAL",timerId:e,intervalMs:n});else if(this.fallbackTimers.has(e)){const r=this.callbacks.get(e);if(r){clearInterval(this.fallbackTimers.get(e));const i=setInterval(()=>r(Date.now()),n);this.fallbackTimers.set(e,i)}}}isRunning(e){return this.callbacks.has(e)}getActiveTimers(){return Array.from(this.callbacks.keys())}destroy(){for(const e of this.callbacks.keys())this.stop(e);this.worker&&(this.worker.terminate(),this.worker=null),this.callbacks.clear(),this.fallbackTimers.clear()}}const Qa=new Nut;class Cut{constructor(){this.audioContext=null,this.oscillator=null,this.gainNode=null,this.isActive=!1,this.checkInterval=null,this.visibilityHandler=null,this.userInteractionHandler=null}start(){var e;if(this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running")return console.log("[KeepAlive] Already active and running"),!0;try{return this.audioContext&&this.audioContext.state!=="closed"&&this.cleanupAudio(),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.oscillator=this.audioContext.createOscillator(),this.oscillator.type="sine",this.oscillator.frequency.setValueAtTime(1,this.audioContext.currentTime),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.setValueAtTime(.001,this.audioContext.currentTime),this.oscillator.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.oscillator.start(),this.isActive=!0,console.log("[KeepAlive]  Silent audio started - tab will stay active in background"),this.setupMaintenance(),!0}catch(n){return console.error("[KeepAlive]  Failed to start silent audio:",n),!1}}setupMaintenance(){this.cleanupMaintenance(),this.visibilityHandler=()=>{document.visibilityState==="visible"&&this.isActive&&(console.log("[KeepAlive]  Tab became visible, checking audio..."),this.ensureRunning())},document.addEventListener("visibilitychange",this.visibilityHandler),this.userInteractionHandler=()=>{var e;this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="suspended"&&(console.log("[KeepAlive]  User interaction detected, resuming audio..."),this.resume())},["click","keydown","touchstart","mousedown"].forEach(e=>{document.addEventListener(e,this.userInteractionHandler,{passive:!0})}),this.checkInterval=setInterval(()=>{this.isActive&&this.ensureRunning()},5e3)}async ensureRunning(){var n;if(!this.isActive)return;const e=(n=this.audioContext)==null?void 0:n.state;e==="suspended"?(console.log("[KeepAlive]  AudioContext suspended, attempting resume..."),await this.resume()):(e==="closed"||!this.audioContext)&&(console.log("[KeepAlive]  AudioContext closed, restarting..."),this.isActive=!1,this.start())}cleanupMaintenance(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.visibilityHandler&&(document.removeEventListener("visibilitychange",this.visibilityHandler),this.visibilityHandler=null),this.userInteractionHandler&&(["click","keydown","touchstart","mousedown"].forEach(e=>{document.removeEventListener(e,this.userInteractionHandler)}),this.userInteractionHandler=null)}cleanupAudio(){try{this.oscillator&&(this.oscillator.stop(),this.oscillator.disconnect(),this.oscillator=null),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close(),this.audioContext=null}catch{}}stop(){if(this.isActive)try{this.cleanupMaintenance(),this.cleanupAudio(),this.isActive=!1,console.log("[KeepAlive]  Silent audio stopped")}catch(e){console.error("[KeepAlive] Error stopping:",e)}}async resume(){if(!this.audioContext)return this.start();if(this.audioContext.state==="suspended")try{return await this.audioContext.resume(),console.log("[KeepAlive]  AudioContext resumed"),!0}catch(e){return console.error("[KeepAlive] Failed to resume:",e),this.isActive=!1,this.start()}return!0}getIsActive(){var e;return this.isActive&&((e=this.audioContext)==null?void 0:e.state)==="running"}getState(){var e;return((e=this.audioContext)==null?void 0:e.state)||"not-initialized"}}const iN=new Cut,F4="user_supabase_config",UZ=["encrypted_keys","execution_sessions"];class Put{constructor(){this.client=null,this.config=null,this.listeners=new Set,this.loadStoredConfig()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){const e=this.isConnected();this.listeners.forEach(n=>n(e))}isConnected(){return this.client!==null&&this.config!==null}getConfig(){return this.config}getClient(){return this.client}async loadStoredConfig(){try{const e=await Ae.getItem(Ae.getUserKey(F4));if(!e)return console.log("[UserDataSupabase] No stored configuration found"),!1;const n=JSON.parse(e),r=await this.connect(n.url,n.anonKey);return r.success?(console.log("[UserDataSupabase] Reconnected using stored config"),!0):(console.warn("[UserDataSupabase] Failed to reconnect:",r.error),!1)}catch(e){return console.error("[UserDataSupabase] Failed to load stored config:",e),!1}}validateUrl(e){return e?e.startsWith("https://")?e.includes(".supabase.co")?{valid:!0}:{valid:!1,error:"URL must be a Supabase project URL (*.supabase.co)"}:{valid:!1,error:"URL must start with https://"}:{valid:!1,error:"URL is required"}}validateAnonKey(e){return e?e.length<100?{valid:!1,error:"Anon key appears invalid (too short)"}:e.startsWith("eyJ")?{valid:!0}:{valid:!1,error:"Anon key should be a JWT token"}:{valid:!1,error:"Anon key is required"}}async connect(e,n){var s;const r=this.validateUrl(e);if(!r.valid)return{success:!1,projectId:null,error:r.error};const i=this.validateAnonKey(n);if(!i.valid)return{success:!1,projectId:null,error:i.error};try{const o=Cte(e,n,{auth:{autoRefreshToken:!1,persistSession:!1,detectSessionInUrl:!1}}),{error:a}=await o.auth.getSession();if(a&&a.message!=="Auth session missing!")return{success:!1,projectId:null,error:`Connection failed: ${a.message}`};const l=((s=e.split("//")[1])==null?void 0:s.split(".")[0])||null;return this.config={url:e,anonKey:n,projectId:l||"",connectedAt:new Date().toISOString()},this.client=o,await this.saveConfig(),console.log("[UserDataSupabase] Connected to project:",l),this.notify(),{success:!0,projectId:l}}catch(o){return{success:!1,projectId:null,error:o instanceof Error?o.message:"Unknown error"}}}async validateSchema(){if(!this.client)return{valid:!1,missingTables:UZ,error:"Not connected"};const e=[];for(const n of UZ)try{const{error:r}=await this.client.from(n).select("id").limit(1);r&&(r.code==="42P01"||r.message.includes("does not exist"))&&e.push(n)}catch{e.push(n)}return{valid:e.length===0,missingTables:e}}async disconnect(){this.client=null,this.config=null,await Ae.removeItem(Ae.getUserKey(F4)),console.log("[UserDataSupabase] Disconnected and cleared config"),this.notify()}getSetupSQL(){return`-- AutonomousVault Security Tier Schema
-- Run this in your Supabase SQL Editor

-- Table for storing encrypted keys (Tier B & C)
CREATE TABLE IF NOT EXISTS encrypted_keys (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    key_name TEXT NOT NULL,
    encrypted_blob TEXT NOT NULL,
    encryption_salt TEXT NOT NULL,
    encrypted_password TEXT, -- Only for Tier C (persistent)
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    UNIQUE(user_id, key_name)
);

-- Table for execution sessions (Tier B)
CREATE TABLE IF NOT EXISTS execution_sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL,
    encrypted_session_token TEXT NOT NULL,
    expires_at TIMESTAMPTZ NOT NULL,
    revoked BOOLEAN DEFAULT false,
    created_at TIMESTAMPTZ DEFAULT now()
);

-- Row Level Security (RLS) policies
ALTER TABLE encrypted_keys ENABLE ROW LEVEL SECURITY;
ALTER TABLE execution_sessions ENABLE ROW LEVEL SECURITY;

-- Users can only access their own data
CREATE POLICY "Users can manage own keys" ON encrypted_keys
    FOR ALL USING (auth.uid() = user_id);

CREATE POLICY "Users can manage own sessions" ON execution_sessions
    FOR ALL USING (auth.uid() = user_id);

-- Indexes for performance
CREATE INDEX IF NOT EXISTS idx_encrypted_keys_user ON encrypted_keys(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_user ON execution_sessions(user_id);
CREATE INDEX IF NOT EXISTS idx_execution_sessions_expires ON execution_sessions(expires_at);
`}async saveConfig(){if(this.config)try{await Ae.setItem(Ae.getUserKey(F4),JSON.stringify(this.config))}catch(e){console.error("[UserDataSupabase] Failed to save config:",e)}}}const hs=new Put;class _ut{get supabase(){return hs.getClient()}isAvailable(){return this.supabase!==null}async runCycle(e){if(!this.supabase)throw new Error("Supabase not connected");const{data:n,error:r}=await this.supabase.functions.invoke("dealer-cycle",{body:e});return r?(console.error("[SupabaseDealerClient] Cycle error:",r),{success:!1,decisions:[],usage:{cyclesUsed:0,cyclesRemaining:0},timestamp:new Date().toISOString(),error:r.message}):n}async syncPortfolio(){if(!this.supabase)throw new Error("Supabase not connected");const{data:e,error:n}=await this.supabase.functions.invoke("sync-portfolio",{body:{}});return n?(console.error("[SupabaseDealerClient] Sync error:",n),{positions:[],portfolioValue:0,error:n.message}):e}async enableSchedule(e){if(!this.supabase)throw new Error("Supabase not connected");const n=Ae.getUserId();if(!n)return{success:!1,error:"Not authenticated"};const{error:r}=await this.supabase.from("cron_schedules").upsert({user_id:n,schedule_name:"default",enabled:e.enabled,interval_seconds:e.intervalSeconds,coins:e.coins,next_run_at:e.enabled?new Date().toISOString():null},{onConflict:"user_id,schedule_name"});return r?(console.error("[SupabaseDealerClient] Schedule error:",r),{success:!1,error:r.message}):{success:!0}}async disableSchedule(){return this.enableSchedule({enabled:!1,intervalSeconds:300,coins:[]})}async getScheduleStatus(){if(!this.supabase)return null;const e=Ae.getUserId();if(!e)return null;const{data:n,error:r}=await this.supabase.from("cron_schedules").select("*").eq("user_id",e).eq("schedule_name","default").single();return r||!n?null:{enabled:n.enabled,intervalSeconds:n.interval_seconds,coins:n.coins||[],lastRunAt:n.last_run_at?new Date(n.last_run_at):void 0,nextRunAt:n.next_run_at?new Date(n.next_run_at):void 0,runCount:n.run_count||0,lastError:n.last_error}}async getSessionStatus(){if(!this.supabase)return{hasActiveSession:!1,tier:"local"};const e=Ae.getUserId();if(!e)return{hasActiveSession:!1,tier:"local"};const{data:n}=await this.supabase.from("encrypted_keys").select("encrypted_password").eq("user_id",e).eq("key_name","hyperliquid").single();if(n!=null&&n.encrypted_password)return{hasActiveSession:!0,tier:"persistent"};const{data:r}=await this.supabase.from("execution_sessions").select("expires_at").eq("user_id",e).eq("revoked",!1).gt("expires_at",new Date().toISOString()).order("expires_at",{ascending:!1}).limit(1).single();return r?{hasActiveSession:!0,expiresAt:new Date(r.expires_at),tier:"session"}:{hasActiveSession:!1,tier:"local"}}async getUsageStats(){if(!this.supabase)return null;const e=Ae.getUserId();if(!e)return null;const n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1),{data:i,error:s}=await this.supabase.from("usage_tracking").select("*").eq("user_id",e).eq("period_start",r.toISOString().split("T")[0]).single();if(s&&s.code!=="PGRST116")return console.error("[SupabaseDealerClient] Usage error:",s),null;const{data:o}=await this.supabase.from("user_plans").select("cycles_limit").eq("user_id",e).single(),a=(o==null?void 0:o.cycles_limit)||1e3;return{cyclesExecuted:(i==null?void 0:i.cycles_executed)||0,tradesExecuted:(i==null?void 0:i.trades_executed)||0,cyclesRemaining:Math.max(0,a-((i==null?void 0:i.cycles_executed)||0)),periodStart:r}}}const Iut=new _ut,Mj={local:{tier:"local",label:"Local Keys",description:"Maximum security. Keys never leave your browser. Browser must remain open for execution.",icon:"",securityLevel:3,execution24x7:!1,requiresBrowserOpen:!0},session:{tier:"session",label:"Session Keys",description:"Balanced security. 24-hour execution sessions on your server.Re-authenticate daily.",icon:"",securityLevel:2,execution24x7:!1,requiresBrowserOpen:!1},persistent:{tier:"persistent",label:"Persistent Keys",description:"Full automation. 24/7 execution. Lower security - password stored encrypted on your server.",icon:"",securityLevel:1,execution24x7:!0,requiresBrowserOpen:!1}},FZ="security_tier",$Z=24;class Rut{constructor(){this.state={currentTier:"local",session:null,keysInSupabase:!1,passwordStoredInSupabase:!1},this.listeners=new Set,this.loadState()}async loadState(){try{const e=await Ae.getItem(Ae.getUserKey(FZ));if(e){const n=JSON.parse(e);this.state={...this.state,currentTier:n.currentTier||"local",session:n.session?{...n.session,createdAt:new Date(n.session.createdAt),expiresAt:new Date(n.session.expiresAt)}:null},this.state.session&&new Date>this.state.session.expiresAt&&(console.log("[SecurityTierService] Session expired, reverting to local"),this.state.session=null,this.state.currentTier==="session"&&(this.state.currentTier="local"))}await this.syncSupabaseState()}catch(e){console.error("[SecurityTierService] Failed to load state:",e)}}async saveState(){try{await Ae.setItem(Ae.getUserKey(FZ),JSON.stringify({currentTier:this.state.currentTier,session:this.state.session}))}catch(e){console.error("[SecurityTierService] Failed to save state:",e)}}notify(){this.listeners.forEach(e=>e()),this.saveState()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getState(){return this.state}getCurrentTier(){return this.state.currentTier}getTierInfo(e){return Mj[e||this.state.currentTier]}getSessionStatus(){if(!this.state.session)return{active:!1};const e=new Date,n=e<this.state.session.expiresAt,r=this.state.session.expiresAt.getTime()-e.getTime(),i=Math.max(0,r/(1e3*60*60));return{active:n,expiresAt:this.state.session.expiresAt,remainingHours:Math.round(i*10)/10}}async migrateToSession(e,n,r,i=$Z){try{const s=hs.getClient();if(!s)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const o=Ae.getUserId();if(!o)return{success:!1,error:"Not authenticated"};const{error:a}=await s.from("encrypted_keys").upsert({user_id:o,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:null},{onConflict:"user_id,key_name"});if(a)return{success:!1,error:`Failed to upload key: ${a.message}`};const l=new Date,c=new Date(l.getTime()+i*60*60*1e3),d=crypto.randomUUID(),h=await this.createSessionToken(o,r,c),{error:m}=await s.from("execution_sessions").insert({id:d,user_id:o,encrypted_session_token:h,expires_at:c.toISOString(),revoked:!1});return m?{success:!1,error:`Failed to create session: ${m.message}`}:(this.state={...this.state,currentTier:"session",keysInSupabase:!0,passwordStoredInSupabase:!1,session:{id:d,userId:o,createdAt:l,expiresAt:c,active:!0}},this.notify(),console.log("[SecurityTierService] Migrated to Tier B (Session)"),{success:!0})}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async migrateToPersistent(e,n,r){try{const i=hs.getClient();if(!i)return{success:!1,error:"Your Supabase not connected. Please connect in Security Tier settings."};const s=Ae.getUserId();if(!s)return{success:!1,error:"Not authenticated"};const o=await this.encryptPasswordForStorage(r),{error:a}=await i.from("encrypted_keys").upsert({user_id:s,key_name:"hyperliquid",encrypted_blob:e,encryption_salt:n,encrypted_password:o},{onConflict:"user_id,key_name"});return a?{success:!1,error:`Failed to upload key: ${a.message}`}:(this.state={...this.state,currentTier:"persistent",keysInSupabase:!0,passwordStoredInSupabase:!0,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier C (Persistent)"),{success:!0})}catch(i){return{success:!1,error:i instanceof Error?i.message:"Unknown error"}}}async migrateToLocal(){try{const e=hs.getClient();if(!e)return this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),{success:!0};const n=Ae.getUserId();return n?(await e.from("encrypted_keys").delete().eq("user_id",n).eq("key_name","hyperliquid"),await e.from("execution_sessions").update({revoked:!0}).eq("user_id",n),this.state={...this.state,currentTier:"local",keysInSupabase:!1,passwordStoredInSupabase:!1,session:null},this.notify(),console.log("[SecurityTierService] Migrated to Tier A (Local)"),{success:!0}):{success:!1,error:"Not authenticated"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async endSession(){if(this.state.session){try{const e=hs.getClient();e&&await e.from("execution_sessions").update({revoked:!0}).eq("id",this.state.session.id)}catch(e){console.error("[SecurityTierService] Failed to revoke session:",e)}this.state={...this.state,session:null},this.notify()}}async refreshSession(e,n=$Z){if(this.state.currentTier!=="session")return{success:!1,error:"Not in session mode"};await this.endSession();const r=hs.getClient();if(!r)return{success:!1,error:"Your Supabase not connected"};const i=Ae.getUserId();if(!i)return{success:!1,error:"Not authenticated"};const{data:s}=await r.from("encrypted_keys").select("encrypted_blob, encryption_salt").eq("user_id",i).eq("key_name","hyperliquid").single();return s?this.migrateToSession(s.encrypted_blob,s.encryption_salt,e,n):{success:!1,error:"No key found in Supabase"}}async syncSupabaseState(){var e;try{const n=hs.getClient();if(!n)return;const r=Ae.getUserId();if(!r)return;const{data:i}=await n.from("encrypted_keys").select("encrypted_password").eq("user_id",r).eq("key_name","hyperliquid").single();this.state.keysInSupabase=!!i,this.state.passwordStoredInSupabase=!!(i!=null&&i.encrypted_password),this.state.keysInSupabase?this.state.passwordStoredInSupabase?this.state.currentTier="persistent":(e=this.state.session)!=null&&e.active?this.state.currentTier="session":this.state.currentTier="local":this.state.currentTier="local"}catch(n){console.error("[SecurityTierService] Failed to sync Supabase state:",n)}}async createSessionToken(e,n,r){const i=JSON.stringify({userId:e,password:n,expiresAt:r.toISOString()}),o=new TextEncoder().encode(i),a=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]),l=crypto.getRandomValues(new Uint8Array(12)),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:l},a,o),d=await crypto.subtle.exportKey("raw",a),h=new Uint8Array(l.length+c.byteLength+d.byteLength);return h.set(l,0),h.set(new Uint8Array(c),l.length),h.set(new Uint8Array(d),l.length+c.byteLength),btoa(String.fromCharCode(...h))}async encryptPasswordForStorage(e){const n=new TextEncoder,r=n.encode(e),i=n.encode("autonomousvault-persistent-key-v1"),s=await crypto.subtle.importKey("raw",n.encode("server-managed-key-placeholder"),"PBKDF2",!1,["deriveKey"]),o=await crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt"]),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,r),c=new Uint8Array(a.length+l.byteLength);return c.set(a,0),c.set(new Uint8Array(l),a.length),btoa(String.fromCharCode(...c))}}const Kf=new Rut,zZ="hyperliquid-dealer-cycle",$4="hyperliquid-dealer-sync";class Out{constructor(){this.isLoopRunning=!1,this.currentCycleAbortController=null,this.vaultContext={balance:0,positions:[]},this.lastError=null,this.consecutiveFailures=0,this.executor=null,yt.subscribe(()=>{const e=yt.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()}),Ds.setOnRateLimit(e=>{e.exhausted?(yt.addLog("ERROR"," AI API Quota Exhausted! Credits may be depleted. System paused.",{consecutiveHits:e.consecutiveHits}),yt.updateStatus(" Quota Exhausted",null,"Check your AI API credits or billing",void 0,`Retried ${e.consecutiveHits}x without success`)):(yt.addLog("WARNING",` AI Rate Limited! Waiting ${e.blockedForSeconds}s before retry... (attempt ${e.consecutiveHits})`,{consecutiveHits:e.consecutiveHits}),yt.updateStatus(" Rate Limited",null,"AI credits/quota may be running low",void 0,`Retry in ${e.blockedForSeconds}s (attempt ${e.consecutiveHits})`))})}startLoop(){if(this.isLoopRunning)return;this.isLoopRunning=!0,console.log("[DealerService]  Starting loop with Web Worker timer (background-safe)..."),iN.start();const n=yt.getSnapshot().settings.checkIntervalSeconds*1e3||6e4;Qa.start(zZ,n,()=>this.runCycle()),this.startSyncLoop(),this.runCycle()}startSyncLoop(){Qa.stop($4),console.log("[DealerService] Starting sync loop with Web Worker timer..."),Qa.start($4,15e3,()=>this.syncPortfolio()),this.syncPortfolio()}async syncPortfolio(){if(this.vaultContext.walletAddress){if(qt.isDealerActive()){console.log("[DealerService]   Skipping sync - dealer is active");return}try{const e=await qt.getUserStateShared(this.vaultContext.walletAddress);let n=[],r=0;e&&(e.assetPositions&&(n=e.assetPositions.filter(l=>parseFloat(l.position.szi)!==0),this.vaultContext.positions=n),e.marginSummary&&(r=parseFloat(e.marginSummary.accountValue||"0")));let i=0;const s=n.map(l=>{var m;const c=parseFloat(l.position.szi),d=parseFloat(l.position.entryPx),h=Math.abs(c*d);return i+=h,{coin:l.position.coin,size:c,entryPrice:d,unrealizedPnl:parseFloat(l.position.unrealizedPnl||"0"),side:c>0?"LONG":"SHORT",leverage:parseFloat(((m=l.position.leverage)==null?void 0:m.value)||"1"),liquidationPrice:l.position.liquidationPx?parseFloat(l.position.liquidationPx):void 0}});this.vaultContext.balance=r;const o=s.reduce((l,c)=>l+c.unrealizedPnl,0);if(yt.updatePortfolioState(s,r,i),yt.getSnapshot().isOn){const{profitHistoryService:l}=await ko(async()=>{const{profitHistoryService:c}=await import("./profitHistoryService-CCZ02nrp.js");return{profitHistoryService:c}},[]);l.recordSnapshot({timestamp:Date.now(),portfolioValue:r,unrealizedPnl:o,positionCount:n.length,trigger:"sync"})}}catch(e){console.warn("[DealerService] syncPortfolio failed:",e)}}}stopLoop(){this.isLoopRunning&&(console.log("[DealerService]  Stopping loop..."),this.currentCycleAbortController&&(console.log("[DealerService]  Aborting current cycle requests..."),this.currentCycleAbortController.abort(),this.currentCycleAbortController=null),Qa.stop(zZ),Qa.stop($4),iN.stop(),this.isLoopRunning=!1,yt.updateStatus(null,null,"System paused",void 0,"Dealer offline"))}setVaultContext(e){this.vaultContext={...this.vaultContext,...e}}async runCycle(){if(!yt.getSnapshot().isOn){this.stopLoop();return}const n=Kf.getCurrentTier();return n==="session"||n==="persistent"?this.runSupabaseCycle():this.runLocalCycle()}async runSupabaseCycle(){var s,o;const e=yt.getSnapshot();yt.setAnalyzing(!0),yt.updateStatus(" Supabase Cycle",null,"Executing via Edge Function...",void 0,`Mode: ${e.executionMode}`);const n=An.getComponentConfig("hyperliquidDealer"),r=An.getComponentApiKey("hyperliquidDealer"),i={provider:n.providerType,apiKey:r,modelId:n.modelId,systemPrompt:e.settings.strategyPrompt};try{const a=await Iut.runCycle({coins:e.settings.tradingPairs,settings:{intervalMs:e.settings.checkIntervalSeconds*1e3,maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,maxPositionSizeUSDC:e.settings.maxPositionSizeUSDC,analysisTimeframe:e.settings.analysisTimeframe||"60",historyCandles:e.settings.historyCandles||100,macroTimeframeEnabled:e.settings.macroTimeframeEnabled,macroTimeframe:e.settings.macroTimeframe,macroEnabledIndicators:e.settings.macroEnabledIndicators,indicatorSettings:e.settings.indicatorSettings,autonomousIndicators:e.settings.autonomousIndicators,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent,strategyPrompt:e.settings.strategyPrompt},portfolioContext:{balance:((s=this.vaultContext)==null?void 0:s.balance)||0,positions:(((o=this.vaultContext)==null?void 0:o.positions)||[]).map(l=>{var c,d,h,m,g,v,x,b;return{coin:((c=l.position)==null?void 0:c.coin)||l.coin,side:parseFloat(((d=l.position)==null?void 0:d.szi)||l.szi||"0")>0?"LONG":"SHORT",size:Math.abs(parseFloat(((h=l.position)==null?void 0:h.szi)||l.szi||"0")),entryPrice:parseFloat(((m=l.position)==null?void 0:m.entryPx)||l.entryPx||"0"),unrealizedPnl:parseFloat(((g=l.position)==null?void 0:g.unrealizedPnl)||l.unrealizedPnl||"0"),leverage:parseFloat(((x=(v=l.position)==null?void 0:v.leverage)==null?void 0:x.value)||((b=l.leverage)==null?void 0:b.value)||"1")}})},aiConfig:i,executeTradesIfSignal:!0});if(a.success){for(const l of a.decisions){const c=l.action==="BUY"?"":l.action==="SELL"?"":l.action==="CLOSE"?"":"";yt.addLog(l.executed?"TRADE":"SIGNAL",`${c} ${l.coin}: ${l.action} (${(l.confidence*100).toFixed(0)}%)${l.executed?" ":""}`,{fullReason:l.reason,orderId:l.orderId,error:l.error})}yt.updateStatus(" Waiting",null,`Supabase cycle complete. ${a.decisions.length} decisions.`,void 0,`Cycles remaining: ${a.usage.cyclesRemaining}`)}else throw new Error(a.error||"Supabase cycle failed")}catch(a){console.error("[DealerService] Supabase cycle error:",a),yt.addLog("ERROR",`Supabase cycle failed: ${a.message}`),yt.updateStatus(" Error",null,a.message,void 0,"Will retry next interval")}finally{yt.setAnalyzing(!1)}}async runLocalCycle(){var x,b,w,k;const e=yt.getSnapshot();this.currentCycleAbortController=new AbortController;const n=this.currentCycleAbortController.signal;qt.acquireDealerLock();const r=e.settings.indicatorSettings,s=Object.entries(r).filter(([N,O])=>O.enabled).map(([N,O])=>N.toUpperCase()).join(", ")||"Default",o=e.settings.tradingPairs.length,a=e.settings.analysisTimeframe,l=a==="1"?"1m":a==="5"?"5m":a==="15"?"15m":a==="60"?"1h":a==="240"?"4h":a==="D"?"1D":`${a}m`,c=e.settings.macroTimeframe,d=e.settings.macroTimeframeEnabled?`  ${c==="15"?"15m":c==="60"?"1H":c==="240"?"4H":c==="D"?"1D":c==="W"?"1W":c}`:"";yt.setAnalyzing(!0),yt.updateStatus(" Scanning Markets",null,"Initializing market analysis cycle...",void 0,` ${o} pairs  ${l}${d}  ${s}`);const h=Date.now();let m=0,g=0,v=0;try{let N=this.vaultContext.positions||[];this.vaultContext.walletAddress&&(!N||N.length===0)&&(await this.syncPortfolio(),N=this.vaultContext.positions||[]);const O=e.settings.tradingPairs;if(O.length===0){yt.addLog("WARNING","No trading pairs configured.");return}const D=5,_=[];for(let A=0;A<O.length;A+=D)_.push(O.slice(A,A+D));const F=e.settings.maxOpenPositions||3,z=[],L=new Map;for(let A=0;A<_.length;A++){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const I=_[A],j=A+1,q=I.join(", ");yt.updateStatus(" Fetching Data",null,`Collecting market data for ${q}...`,void 0,`Batch ${j}/${_.length}  ${I.length} coins`);const K=Date.now(),te=[];for(const de of I){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const ke=e.settings.autonomousIndicators?void 0:e.settings.indicatorSettings,ye=await D4.getMarketContext(de,this.vaultContext.walletAddress,e.settings.analysisTimeframe||"60",ke,e.settings.historyCandles||100);if(e.settings.macroTimeframeEnabled&&e.settings.macroTimeframe&&!ye.error){let Ke=ke;if(Ke&&e.settings.macroEnabledIndicators){Ke={...Ke};const Ve={},me=e.settings.macroEnabledIndicators;for(const[Ne,We]of Object.entries(Ke))Ve[Ne]={...We,enabled:We.enabled&&me.includes(Ne)};Ke=Ve}const je=await D4.getMacroSnapshot(de,e.settings.macroTimeframe,Ke);Object.keys(je.indicators).length>0&&(ye.macro=je)}ye.error||(te.push(ye),L.set(de,ye)),await new Promise(Ke=>setTimeout(Ke,200))}if(m+=Date.now()-K,te.length===0)continue;for(const de of te){const ke=de.symbol,ye=N.find(Ke=>{var je;return((je=Ke.position)==null?void 0:je.coin)===ke||Ke.coin===ke});if(ye&&parseFloat(((x=ye.position)==null?void 0:x.szi)||ye.szi||"0")!==0){const Ke=ye.position||ye;de.openPosition={hasPosition:!0,side:parseFloat(Ke.szi)>0?"LONG":"SHORT",size:Math.abs(parseFloat(Ke.szi)),entryPrice:parseFloat(Ke.entryPx||"0"),unrealizedPnl:parseFloat(Ke.unrealizedPnl||"0"),leverage:parseFloat(((b=Ke.leverage)==null?void 0:b.value)||"1")}}else de.openPosition={hasPosition:!1}}const Y=N.length>0?D4.calculatePositionBreakevens(N,{makerFee:2e-4,takerFee:5e-4},new Map(te.map(de=>{var ke;return[de.symbol,((ke=de.tradingCosts)==null?void 0:ke.fundingRate)||0]}))):[],H={coins:te,portfolio:{balance:this.vaultContext.balance,positions:N,positionBreakevens:Y,settings:{maxPositions:e.settings.maxOpenPositions,maxLeverage:e.settings.maxLeverage,bankrollType:e.settings.bankrollType,manualBankroll:e.settings.manualBankroll,stopLossEnabled:e.settings.stopLossEnabled,stopLossPercent:e.settings.stopLossPercent,takeProfitEnabled:e.settings.takeProfitEnabled,takeProfitPercent:e.settings.takeProfitPercent},userFees:{makerFee:2e-4,takerFee:5e-4},lastExecutionError:this.lastError&&Date.now()-this.lastError.timestamp<6e4?{message:this.lastError.message,timestamp:this.lastError.timestamp}:null},autonomousMode:e.settings.autonomousIndicators,availablePresets:e.settings.autonomousIndicators?pd:void 0,cycleSummary:qc.getContextForAI("hyperliquid"),userFeedback:await(await ko(async()=>{const{dealerFeedbackService:de}=await Promise.resolve().then(()=>$ut);return{dealerFeedbackService:de}},void 0)).dealerFeedbackService.getContextForAI()},M=te.map(de=>de.symbol).join(", ");yt.updateStatus(" Analyzing",null,`AI processing ${M}...`,void 0,`Using ${s} indicators`);const P=e.settings.strategyPrompt||"Scalp trading. Buy low RSI, Sell high RSI.",W=H.cycleSummary;W&&yt.addLog("INFO",` Cycle Summary: Including ${W.length} char context from previous cycles`);const X=Date.now();if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const ie=await Rm.getDealerBatchAnalysis(H,P,n);g+=Date.now()-X;let oe=[],Te;const ce=ie;ce&&typeof ce=="object"&&!Array.isArray(ce)?(oe=ce.decisions||[],Te=ce.cycleSummary,e.settings.autonomousIndicators&&ce.chosenPreset&&(yt.addLog("INFO",` AI chose preset: ${((w=pd[ce.chosenPreset])==null?void 0:w.emoji)||""} ${ce.chosenPreset}`),ce.presetReason&&yt.addLog("INFO",` Preset reason: ${ce.presetReason}`))):Array.isArray(ce)&&(oe=ce),Te&&(qc.setSummary("hyperliquid",Te),yt.addLog("INFO",` AI Summary: ${Te.slice(0,80)}...`));for(const de of oe){const ke=de.coin,ye=de.action,Ke=de.reason,je=de.confidence||0,Ve=L.get(ke);if(yt.addLog("REASONING",`${ke}: ${ye} (Conf: ${(je*100).toFixed(0)}%)`,{fullReason:Ke,context:{...de,currentPrice:Ve==null?void 0:Ve.currentPrice,indicators:Ve==null?void 0:Ve.indicators,enabledIndicators:Ve==null?void 0:Ve.enabledIndicators,tradingCosts:Ve==null?void 0:Ve.tradingCosts,orderBook:Ve==null?void 0:Ve.orderBook,macro:Ve==null?void 0:Ve.macro}}),ye==="HOLD")continue;const me=e.settings.aggressiveMode?.5:.6;if(je<me){yt.addLog("INFO",`Skipped ${ye} on ${ke}: Confidence ${(je*100).toFixed(0)}% < ${(me*100).toFixed(0)}%`);continue}z.push({decision:de,marketContext:L.get(ke)})}A<_.length-1&&await new Promise(de=>setTimeout(de,500))}const $=z.length;yt.updateStatus(" Prioritizing",null,$>0?`Found ${$} trading signal${$>1?"s":""}`:"No actionable signals found",void 0,$>0?"Ranking by confidence...":"Monitoring for opportunities"),z.sort((A,I)=>{const j=(A.decision.confidence||0)+(A.decision.action==="CLOSE"?.5:0);return(I.decision.confidence||0)+(I.decision.action==="CLOSE"?.5:0)-j}),z.length>F&&yt.addLog("INFO",` Prioritizing top ${F} trades from ${z.length} signals (sorted by confidence)`);let G=0;const V=Date.now();for(const{decision:A,marketContext:I}of z){if(n.aborted)throw new DOMException("Dealer cycle aborted","AbortError");const j=A.coin,q=A.action,K=A.reason,te=A.confidence||0;if(G>=F&&q!=="CLOSE"){yt.addLog("INFO",` Skipping ${q} on ${j} (${(te*100).toFixed(0)}%): Cycle limit reached, lower priority`);continue}const Y=N.length;if(q==="BUY"&&Y>=e.settings.maxOpenPositions&&!N.some(M=>{var P;return M.coin===j||((P=M.position)==null?void 0:P.coin)===j})){yt.addLog("WARNING",`Ignored BUY on ${j}: Max positions reached.`);continue}if(yt.addLog("SIGNAL",` Executing ${q} on ${j} (${(te*100).toFixed(0)}% confidence)`),this.executor){const H=A.suggestedLeverage||e.settings.maxLeverage||1,M=Math.min(H,e.settings.maxLeverage||1);H>M&&yt.addLog("INFO",` Leverage capped for ${j}: ${H}x  ${M}x (max: ${e.settings.maxLeverage}x)`);const P=e.settings.maxPositionSizeUSDC||20,W=A.sizeUSDC?A.sizeUSDC/M:P;let ie=Math.min(W,P)*M;const Te=(this.vaultContext.balance||0)*M*.95;if(ie>Te&&(ie=Te,yt.addLog("INFO",` Size capped to balance: $${ie.toFixed(0)} (margin: $${(ie/M).toFixed(0)})`)),ie<10&&q!=="CLOSE"){yt.addLog("WARNING",`Trade skipped on ${j}: Size < $10`);continue}try{const ce=q==="BUY"?"":q==="SELL"?"":"";yt.updateStatus(`${ce} Executing`,null,`${q} ${j} @ $${((k=I==null?void 0:I.currentPrice)==null?void 0:k.toFixed(2))||"market"}`,void 0,`Confidence: ${(te*100).toFixed(0)}%  Size: $${ie.toFixed(0)}`),await this.executor({coin:j,action:q,type:A.orderType||"limit",price:A.price||(I==null?void 0:I.currentPrice),sizeUSDC:ie,leverage:M,reason:K,cloid:this.generateCloid(),stopLoss:A.stopLoss,takeProfit:A.takeProfit}),G+=q!=="CLOSE"?1:0,await new Promise(de=>setTimeout(de,2e3))}catch(ce){console.error(`[DealerService] Execution failed for ${j}:`,ce),yt.addLog("ERROR",`Execution failed for ${j}: ${ce.message}`)}}}v+=Date.now()-V;const U=(Date.now()-h)/1e3;console.log(`[DealerService] Cycle Telemetry: Total=${U.toFixed(1)}s, Fetch=${(m/1e3).toFixed(1)}s, AI=${(g/1e3).toFixed(1)}s, Exec=${(v/1e3).toFixed(1)}s`),qc.recordCycle("hyperliquid",{timestamp:Date.now(),decisions:z.map(A=>({asset:A.decision.coin,action:A.decision.action,confidence:A.decision.confidence||0})),assetsAnalyzed:O}),this.consecutiveFailures=0}catch(N){if((N==null?void 0:N.name)==="AbortError"){console.log("[DealerService]  Cycle aborted by user"),yt.addLog("INFO"," Analysis cycle cancelled");return}console.error("[DealerService] Cycle Error:",N),yt.addLog("ERROR",`Cycle failed: ${N.message}`),this.lastError={message:N.message,timestamp:Date.now()}}finally{qt.releaseDealerLock(),qt.clearSharedCache(),yt.setAnalyzing(!1);const N=e.settings.checkIntervalSeconds,O=Math.floor(N/60),D=O>=1?`${O}min`:`${N}s`;yt.updateStatus(" Waiting",null,"Analysis complete, waiting for next cycle",void 0,`Next scan in ${D}`)}}setExecutor(e){this.executor=e}generateCloid(){const e=new Uint8Array(16);return crypto.getRandomValues(e),"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}}const Eg=new Out;class lr{static async encrypt(e,n){const i=new TextEncoder().encode(e),s=crypto.getRandomValues(new Uint8Array(16)),o=await this.deriveKey(n,s),a=crypto.getRandomValues(new Uint8Array(12)),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,i),c=new Uint8Array(s.byteLength+a.byteLength+l.byteLength);return c.set(s,0),c.set(a,s.byteLength),c.set(new Uint8Array(l),s.byteLength+a.byteLength),btoa(String.fromCharCode(...c))}static async decrypt(e,n){try{const r=atob(e),i=new Uint8Array(r.length);for(let h=0;h<r.length;h++)i[h]=r.charCodeAt(h);const s=i.slice(0,16),o=i.slice(16,28),a=i.slice(28),l=await this.deriveKey(n,s),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},l,a);return new TextDecoder().decode(c)}catch{throw new Error("Failed to decrypt. Wrong password or corrupted data.")}}static async deriveKey(e,n){const r=new TextEncoder,i=await crypto.subtle.importKey("raw",r.encode(e),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}}const Mut=(t,e)=>{const n=S.useSyncExternalStore(c=>yt.subscribe(c),()=>yt.getSnapshot()),r=S.useRef(!1);return S.useEffect(()=>{var h,m;const d=Rm.getApiKey()||void 0||((m=(h=window.process)==null?void 0:h.env)==null?void 0:m.GEMINI_API_KEY);d&&Rm.initialize(d)},[]),S.useEffect(()=>{Eg.setVaultContext({walletAddress:t.hlPublicKey,balance:t.hlBalance||0})},[t.hlBalance,t.hlPublicKey]),S.useEffect(()=>{Eg.setExecutor(async c=>{var d,h,m;if(console.log("[useDealer] GENUINE EXECUTION TRIGGERED:",c),!t.isUnlocked||!t.hlPublicKey||!t.hlEncryptedPrivateKey){yt.addLog("ERROR","Cannot execute: Vault locked or HL not initialized");return}try{if(!e)throw new Error("Password required for execution");const g=await lr.decrypt(t.hlEncryptedPrivateKey,e),v=qt.getWalletFromPrivateKey(g);yt.addLog("TRADE",` EXECUTING ${c.action} ${c.coin}...`,{reason:c.reason,confidence:c.confidence});let x=c.action==="BUY",b=!1;if(c.action==="CLOSE"){console.log("[useDealer] Seeking position for CLOSE:",c.coin),console.log("[useDealer] Cached Positions (may be stale):",(d=t.hlPositions)==null?void 0:d.map(H=>{var M;return((M=H==null?void 0:H.position)==null?void 0:M.coin)||(H==null?void 0:H.coin)})),yt.addLog("INFO",`Fetching current positions for ${c.coin}...`);let te=[];try{const H=await qt.getUserState(t.hlPublicKey);te=(H==null?void 0:H.assetPositions)||[],console.log("[useDealer] Fresh Positions from API:",te.map(M=>{var P;return((P=M==null?void 0:M.position)==null?void 0:P.coin)||(M==null?void 0:M.coin)}))}catch(H){console.error("[useDealer] Failed to fetch fresh positions:",H),yt.addLog("ERROR",`Failed to fetch positions: ${H.message}`);return}const Y=te.find(H=>{var M;return((M=H.position)==null?void 0:M.coin)===c.coin});if(Y&&parseFloat(Y.position.szi)!==0){const H=Y.position.szi,M=parseFloat(H);x=M<0,b=!0,yt.addLog("INFO",`Closing ${M} ${c.coin} (Side: ${x?"BUY":"SELL"}, ReduceOnly: Yes)`)}else{yt.addLog("WARNING",`CLOSE signal ignored: No open position found for ${c.coin}`),console.log("[useDealer] Position not found or size is 0. Available positions:",te.map(H=>{var M,P;return`${(M=H==null?void 0:H.position)==null?void 0:M.coin}: ${(P=H==null?void 0:H.position)==null?void 0:P.szi}`}));return}}const w=c.type==="market";yt.addLog("INFO","Fetching market data...");const k=await $n.getMarketData(c.coin),N=parseFloat(k.levels[0][0].px),O=parseFloat(k.levels[1][0].px),D=x?O:N,_=await $n.getAssetDecimals(c.coin),F=c.sizeUSDC||n.settings.maxPositionSizeUSDC||20,z=F/D,L=parseFloat(z.toFixed(_));let $,G=w?"ioc":"limit";const V=Math.max(0,6-_);if(w){let Y=x?D*1.05:D*.95,H=parseFloat(Y.toFixed(V));H=parseFloat(H.toPrecision(5)),$=parseFloat(H.toFixed(V))}else{const te=c.price||D;let Y=parseFloat(te.toFixed(V));Y=parseFloat(Y.toPrecision(5)),$=parseFloat(Y.toFixed(V)),console.log(`[useDealer] Limit price rounded: ${te} -> ${$} (maxDecimals=${V})`)}const U=c.leverage||n.settings.maxLeverage||1,A=Math.min(U,n.settings.maxLeverage||1);if(U>A&&yt.addLog("INFO",` Leverage capped for ${c.coin}: ${U}x  ${A}x (max: ${n.settings.maxLeverage}x)`),A>1)try{await $n.updateLeverage(v,c.coin,A,!1)}catch(te){console.warn(`[useDealer] Leverage update failed, using current: ${te.message}`),yt.addLog("WARNING",`Leverage update failed (using current): ${te.message.slice(0,50)}...`)}console.log("[useDealer SL/TP DEBUG] Settings:",{stopLossEnabled:n.settings.stopLossEnabled,stopLossPercent:n.settings.stopLossPercent,takeProfitEnabled:n.settings.takeProfitEnabled,takeProfitPercent:n.settings.takeProfitPercent}),console.log("[useDealer SL/TP DEBUG] AI Intent:",{stopLoss:c.stopLoss,takeProfit:c.takeProfit});let I;if(n.settings.stopLossEnabled&&!b)if(n.settings.stopLossPercent!==null){const te=n.settings.stopLossPercent/100;I=x?$*(1-te):$*(1+te),yt.addLog("INFO",` Stop Loss: ${n.settings.stopLossPercent}%  $${I.toFixed(2)}`)}else c.stopLoss&&(I=c.stopLoss,yt.addLog("INFO",` Stop Loss (AI): $${I.toFixed(2)}`));let j;if(n.settings.takeProfitEnabled&&!b)if(n.settings.takeProfitPercent!==null){const te=n.settings.takeProfitPercent/100;j=x?$*(1+te):$*(1-te),yt.addLog("INFO",` Take Profit: ${n.settings.takeProfitPercent}%  $${j.toFixed(2)}`)}else c.takeProfit&&(j=c.takeProfit,yt.addLog("INFO",` Take Profit (AI): $${j.toFixed(2)}`));const q=I||j;yt.addLog("INFO",`Placing ${G.toUpperCase()} order: ${L} ${c.coin} @ ${$.toFixed(2)}${q?" (with SL/TP)":""}`);const K=await $n.createOrder(v,c.coin,x,L,$,{orderType:G,reduceOnly:b,cloid:c.cloid,stopLoss:I,takeProfit:j});yt.addLog("INFO",`Order Placed: ${K.status||"Submitted"}`),yt.addOperationRecord({coin:c.coin,action:c.action,timestamp:Date.now(),entryPrice:$,size:L,sizeUSDC:F,reasoning:c.reason||"AI analysis decision",confidence:c.confidence||.7,status:c.action==="CLOSE"?"CLOSED":"OPEN",cloid:c.cloid});try{const{profitHistoryService:te}=await ko(async()=>{const{profitHistoryService:H}=await import("./profitHistoryService-CCZ02nrp.js");return{profitHistoryService:H}},[]),Y=await qt.getUserState(t.hlPublicKey);if(Y!=null&&Y.marginSummary){const H=parseFloat(Y.marginSummary.accountValue||"0"),M=((h=Y.assetPositions)==null?void 0:h.reduce((P,W)=>P+parseFloat(W.position.unrealizedPnl||"0"),0))||0;te.recordSnapshot({timestamp:Date.now(),portfolioValue:H,unrealizedPnl:M,positionCount:((m=Y.assetPositions)==null?void 0:m.filter(P=>parseFloat(P.position.szi)!==0).length)||0,trigger:"trade"})}}catch(te){console.warn("[useDealer] Snapshot after trade failed:",te)}}catch(g){console.error("Execution Error:",g),yt.addLog("ERROR",`Execution Failed: ${g.message}`)}}),r.current=!0},[t.isUnlocked,t.hlPublicKey,e,n.settings.maxPositionSizeUSDC,n.settings.maxLeverage,n.settings.stopLossEnabled,n.settings.stopLossPercent,n.settings.takeProfitEnabled,n.settings.takeProfitPercent]),{...n,toggleDealer:c=>{yt.toggleDealer(c),c?Eg.startLoop():Eg.stopLoop()},updateSettings:c=>{yt.updateSettings(c)},applyChanges:()=>{yt.reload(),n.isOn&&(Eg.stopLoop(),setTimeout(()=>Eg.startLoop(),500))},saveStrategy:c=>{yt.setStrategyPrompt(c)},clearLogs:()=>{yt.clearLogs()}}},Lut=({vaultAddress:t,setActiveTab:e})=>{const[n,r]=S.useState([]),[i,s]=S.useState([]),[o,a]=S.useState(!1),[l,c]=S.useState(null),d=S.useSyncExternalStore(m=>yt.subscribe(m),()=>yt.getSnapshot()),h=async()=>{if(t){a(!0);try{const m=await $n.getUserState(t);if(m&&m.assetPositions){const v=m.assetPositions.filter(x=>parseFloat(x.position.szi)!==0).map(x=>({coin:x.position.coin,szi:x.position.szi,entryPx:x.position.entryPx,positionValue:x.position.positionValue,unrealizedPnl:x.position.unrealizedPnl,returnOnEquity:x.position.returnOnEquity,liquidationPx:x.position.liquidationPx,leverage:x.position.leverage}));r(v)}const g=await $n.getOpenOrders(t);console.log("[DealerOpenOrders] Raw orders:",g),g&&Array.isArray(g)&&s(g.map(v=>({oid:v.oid,coin:v.coin,side:v.side,limitPx:v.limitPx,sz:v.sz,orderType:v.orderType,timestamp:v.timestamp,triggerCondition:v.triggerCondition,isPositionTpsl:v.isPositionTpsl,isTrigger:v.isTrigger,triggerPx:v.triggerPx}))),c(new Date)}catch(m){console.error("[DealerOpenOrders] Failed to fetch data:",m)}finally{a(!1)}}};return S.useEffect(()=>{d.isAnalyzing||h();const m=setInterval(()=>{!d.isAnalyzing&&!d.pendingExecution&&h()},3e4);return()=>clearInterval(m)},[t,d.isAnalyzing,d.pendingExecution]),u.jsxs("div",{className:"flex flex-col min-h-[150px]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(wT,{className:"h-4 w-4 text-[#E7FE55]"}),"Open Trading",u.jsx("button",{onClick:h,className:`p-1.5 rounded hover:bg-[#1a1b21] transition-colors ${o?"animate-spin text-[#E7FE55]":"text-[#747580]"}`,title:"Refresh",children:u.jsx(Jl,{className:"h-3.5 w-3.5"})})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:()=>e(be.HYPERLIQUID),className:"text-[10px] bg-[#E7FE55]/10 hover:bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/30 px-3 py-1.5 rounded transition-colors flex items-center gap-2 uppercase tracking-wider font-medium",title:"View Trading Page",children:[u.jsx(on,{size:12})," Details"]}),u.jsxs("span",{className:"text-[10px] text-[#747580] bg-[#1a1b21] px-2 py-1 rounded uppercase tracking-wider",children:[n.length," Pos  ",i.length," Ord"]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:n.length===0&&i.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-2 py-8 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx(wT,{className:"h-8 w-8 opacity-30"}),u.jsx("span",{className:"text-[11px]",children:"No open positions or active orders"})]}):u.jsxs("div",{className:"flex flex-col gap-4",children:[n.length>0&&u.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[u.jsx(cy,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),u.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Positions"}),n.length>5&&u.jsx("span",{className:"text-[9px] text-[#747580] ml-auto",children:"scroll "})]}),u.jsxs("div",{className:"grid text-[#747580] border-b border-[#232328] text-[9px] uppercase tracking-[0.05em] font-medium",style:{gridTemplateColumns:"0.8fr 0.9fr 0.9fr 0.8fr 1fr 0.9fr 1fr"},children:[u.jsx("div",{className:"px-3 py-2",children:"Pair"}),u.jsx("div",{className:"px-3 py-2",children:"Side"}),u.jsx("div",{className:"px-3 py-2",children:"Size"}),u.jsx("div",{className:"px-3 py-2 text-right",children:"Entry"}),u.jsx("div",{className:"px-3 py-2 text-right",children:"Exposure"}),u.jsx("div",{className:"px-3 py-2 text-right",children:"Liq."}),u.jsx("div",{className:"px-3 py-2 text-right",children:"PnL (ROE%)"})]}),u.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar",children:n.map(m=>{var N;const g=parseFloat(m.unrealizedPnl),v=(parseFloat(m.returnOnEquity)*100).toFixed(2),x=g>=0,b=parseFloat(m.szi)>0,w=((N=m.leverage)==null?void 0:N.value)||0,k=Math.abs(parseFloat(m.szi))*parseFloat(m.entryPx);return u.jsxs("div",{className:"grid border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors text-[11px]",style:{gridTemplateColumns:"0.8fr 0.9fr 0.9fr 0.8fr 1fr 0.9fr 1fr"},children:[u.jsx("div",{className:"px-3 py-3 font-semibold text-white",children:m.coin}),u.jsx("div",{className:"px-3 py-3",children:u.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${b?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:[b?"LONG":"SHORT"," ",w,"x"]})}),u.jsxs("div",{className:`px-3 py-3 font-mono ${b?"text-[#34d399]":"text-red-400"}`,children:[b?"+":"",m.szi]}),u.jsxs("div",{className:"px-3 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.entryPx).toFixed(2)]}),u.jsxs("div",{className:"px-3 py-3 text-right text-[#a0a1a8] font-mono",children:["$",k.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),u.jsx("div",{className:"px-3 py-3 text-right text-[#747580] font-mono",children:m.liquidationPx?`$${parseFloat(m.liquidationPx).toFixed(2)}`:"-"}),u.jsxs("div",{className:`px-3 py-3 text-right font-mono font-semibold ${x?"text-[#34d399]":"text-red-400"}`,children:[x?"+":"",g.toFixed(2)," (",x?"+":"",v,"%)"]})]},m.coin)})})]}),i.length>0&&u.jsxs("div",{className:"bg-[#0f1015] rounded border border-[#232328] overflow-hidden",children:[u.jsxs("div",{className:"px-4 py-2 border-b border-[#232328] flex items-center gap-2",children:[u.jsx(V1,{className:"h-3.5 w-3.5 text-[#E7FE55]"}),u.jsx("span",{className:"text-[10px] font-semibold text-[#E7FE55] uppercase tracking-[0.1em]",children:"Active Orders"}),i.length>5&&u.jsx("span",{className:"text-[9px] text-[#747580] ml-auto",children:"scroll "})]}),u.jsxs("div",{className:"grid text-[#747580] border-b border-[#232328] text-[9px] uppercase tracking-[0.05em] font-medium",style:{gridTemplateColumns:"0.8fr 0.9fr 0.9fr 0.8fr 1fr 0.9fr 1fr"},children:[u.jsx("div",{className:"px-3 py-2",children:"Pair"}),u.jsx("div",{className:"px-3 py-2",children:"Side"}),u.jsx("div",{className:"px-3 py-2",children:"Type"}),u.jsx("div",{className:"px-3 py-2 text-right",children:"Size"}),u.jsx("div",{className:"px-3 py-2 text-right",children:"Price"}),u.jsx("div",{className:"px-3 py-2 text-right",children:"Exp. %"}),u.jsx("div",{className:"px-3 py-2 text-right",children:"Action"})]}),u.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar",children:i.map(m=>{const g=m.orderType||"Limit",v=m.triggerCondition==="sl"||g.toLowerCase().includes("stop")||m.isPositionTpsl&&m.side==="A",x=m.triggerCondition==="tp"||g.toLowerCase().includes("take profit")||m.isPositionTpsl&&m.side==="B",b=m.isTrigger&&!v&&!x,w=n.find(N=>N.coin===m.coin);let k=null;if(w){const N=parseFloat(w.entryPx),O=parseFloat(m.limitPx);parseFloat(w.szi)>0?k=(O-N)/N*100:k=(N-O)/N*100}return u.jsxs("div",{className:"grid border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors text-[11px]",style:{gridTemplateColumns:"0.8fr 0.9fr 0.9fr 0.8fr 1fr 0.9fr 1fr"},children:[u.jsx("div",{className:"px-3 py-3 font-semibold text-white",children:m.coin}),u.jsx("div",{className:"px-3 py-3",children:u.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${m.side==="B"?"bg-[#34d399]/15 text-[#34d399]":"bg-red-500/15 text-red-400"}`,children:m.side==="B"?"BUY":"SELL"})}),u.jsxs("div",{className:"px-3 py-3",children:[v&&u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider bg-red-500/15 text-red-400",children:"Stop Loss"}),x&&u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider bg-[#34d399]/15 text-[#34d399]",children:"Take Profit"}),b&&u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider bg-[#60a5fa]/15 text-[#60a5fa]",children:"Trigger"}),!v&&!x&&!b&&u.jsx("span",{className:"text-[#a0a1a8] uppercase",children:"Limit"})]}),u.jsx("div",{className:"px-3 py-3 text-right text-[#a0a1a8] font-mono",children:m.sz}),u.jsxs("div",{className:"px-3 py-3 text-right text-[#a0a1a8] font-mono",children:["$",parseFloat(m.limitPx).toFixed(2)]}),u.jsx("div",{className:`px-3 py-3 text-right font-mono font-semibold ${k!==null?k>=0?"text-[#34d399]":"text-red-400":"text-[#747580]"}`,children:k!==null?`${k>=0?"+":""}${k.toFixed(2)}%`:"-"}),u.jsx("div",{className:"px-3 py-3 text-right",children:u.jsx("span",{className:"text-[#747580] text-[9px] italic",children:"Pending"})})]},m.oid)})})]})]})}),u.jsx("div",{className:"pt-4 flex justify-end",children:u.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz/trade",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#E7FE55]/80 flex items-center gap-1 transition-colors",title:"Hyperliquid Platform Official Website",children:[u.jsx(on,{size:10})," Hyperliquid Platform Testnet"]})})]})},ume=t=>{const e=S.useSyncExternalStore(n=>qc.subscribe(t,n),()=>qc.getSnapshot(t));return S.useEffect(()=>{qc.loadState(t)},[t]),{summary:e.aiSummary,isGenerating:e.isGenerating,cycleCount:e.recentCycles.length,lastUpdate:e.lastSummaryTime,hasSummary:!!e.aiSummary&&e.aiSummary.length>0}},jut=t=>{const e=t.match(/(\w+):/);return e?e[1]:null},z4=8,Dut=t=>{if(t>=604800&&t%604800===0){const e=t/604800;return`${e} ${e===1?"Week":"Weeks"}`}if(t>=86400&&t%86400===0){const e=t/86400;return`${e} ${e===1?"Day":"Days"}`}if(t>=3600&&t%3600===0){const e=t/3600;return`${e} ${e===1?"Hour":"Hours"}`}if(t>=60&&t%60===0){const e=t/60;return`${e} ${e===1?"Minute":"Minutes"}`}return`${t}s`},But=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var H,M;const[i,s]=S.useState([]),[o,a]=S.useState(0),[l,c]=S.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[d,h]=S.useState(0),m="hl_dealer_metrics_baseline",[g,v]=S.useState(null),[x,b]=S.useState(!1);S.useEffect(()=>{(async()=>{try{const W=await Ae.getItem(Ae.getUserKey(m));W&&v(parseInt(W,10))}catch(W){console.warn("[DealerDashboard] Failed to load baseline:",W)}b(!0)})()},[]);const w=S.useCallback(async()=>{if(!window.confirm("Are you sure you want to reset the performance metrics? The chart and profit will start measuring from this moment."))return;const W=Date.now();v(W);try{await Ae.setItem(Ae.getUserKey(m),W.toString()),console.log("[DealerDashboard] Metrics baseline reset to:",new Date(W).toISOString())}catch(X){console.error("[DealerDashboard] Failed to save baseline:",X)}},[]),[k,N]=S.useState(!1),{summary:O,isGenerating:D,cycleCount:_,lastUpdate:F,hasSummary:z}=ume("hyperliquid"),L=S.useMemo(()=>{const P=(g?i.filter(ie=>ie.time>=g):i).filter(ie=>parseFloat(ie.closedPnl||"0")!==0);if(P.length===0)return[];const W=[...P].sort((ie,oe)=>ie.time-oe.time);let X=0;return W.map(ie=>{const oe=parseFloat(ie.closedPnl||"0"),Te=parseFloat(ie.fee||"0");return X+=oe-Te,{time:ie.time,date:new Date(ie.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:X,trade:`${ie.coin} ${ie.side==="A"?"SELL":"BUY"}`}})},[i,g]),$=S.useMemo(()=>L.length>=2,[L]),[G,V]=S.useState(0),U=S.useMemo(()=>t.logs.filter(P=>P.type==="REASONING"||P.type==="SIGNAL").slice(0,20),[t.logs]),A=S.useMemo(()=>{var W,X;const P=new Map;for(const ie of U){const oe=jut(ie.message)||((X=(W=ie.details)==null?void 0:W.context)==null?void 0:X.coin);oe&&!P.has(oe)&&P.set(oe,ie)}return Array.from(P.entries()).sort((ie,oe)=>oe[1].timestamp-ie[1].timestamp).map(([ie,oe])=>({coin:ie,log:oe}))},[U]);S.useEffect(()=>{A.length>0&&!t.isAnalyzing&&V(0)},[A.length,t.isAnalyzing]);const I=A[G],j=S.useMemo(()=>[...i].reverse(),[i]);Math.ceil(j.length/z4),S.useMemo(()=>{const P=o*z4;return j.slice(P,P+z4)},[j,o]);const q=S.useCallback((P,W)=>{const X=W?P.filter(je=>je.time>=W):P,ie=6e4,oe=[];let Te=0,ce=0;[...X].sort((je,Ve)=>je.time-Ve.time).forEach(je=>{const Ve=parseFloat(je.closedPnl||"0"),me=parseFloat(je.fee||"0");if(ce+=parseFloat(je.px)*parseFloat(je.sz),Ve!==0){Te+=Ve-me;const Ne=oe.find(We=>We.coin===je.coin&&je.time-We.startTime<ie);Ne?(Ne.totalPnl+=Ve,Ne.totalFee+=me,Ne.fillCount++):oe.push({coin:je.coin,startTime:je.time,totalPnl:Ve,totalFee:me,fillCount:1})}});let ke=0,ye=0;oe.forEach(je=>{const Ve=je.totalPnl-je.totalFee;Ve>0?ke++:Ve<0&&ye++});const Ke=ke+ye;c({totalPnl:Te,winRate:Ke>0?ke/Ke*100:0,totalVolume:ce,tradesWithPnl:oe.length})},[]);S.useEffect(()=>{if(!n||!x)return;const P=async()=>{try{if(qt.isDealerActive()){console.log("[Dashboard]   Skipping fetch - dealer is active");return}const X=await qt.getUserFillsShared(n,500);if(X&&Array.isArray(X)){const Te=[...X.filter(ce=>ce.cloid||ce.c)].sort((ce,de)=>ce.time-de.time);s(Te),q(Te,g)}const ie=await qt.getUserStateShared(n);if(ie&&ie.assetPositions){const oe=ie.assetPositions.reduce((Te,ce)=>Te+parseFloat(ce.position.unrealizedPnl||"0"),0);h(oe)}}catch(X){console.error("Failed to load dealer history",X)}};P();const W=setInterval(P,3e4);return()=>clearInterval(W)},[n,g,x,q]),S.useEffect(()=>{i.length>0&&q(i,g)},[g,i,q]);const K=()=>{e(!t.isOn)},te=()=>{V(P=>Math.min(A.length-1,P+1))},Y=()=>{V(P=>Math.max(0,P-1))};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[u.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[u.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[u.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),u.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),u.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),u.jsx("button",{onClick:K,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:u.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded relative group",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em]",children:"Total Profit"}),u.jsx("button",{onClick:w,className:"p-1 rounded text-[#747580] hover:text-[#E7FE55] hover:bg-[#1a1b21] transition-colors",title:"Reset metrics from now",children:u.jsx(Ere,{size:12})})]}),u.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${l.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[l.totalPnl>=0?"+":"",l.totalPnl.toFixed(2)," USD"]}),g&&u.jsxs("div",{className:"text-[8px] text-[#3a3b42] mt-1",title:`Measuring since ${new Date(g).toLocaleString()}`,children:["Since ",new Date(g).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),u.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${d>=0?"text-[#34d399]":"text-red-400"}`,children:[d>=0?"+":"",d.toFixed(2)," USD"]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),u.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[l.winRate.toFixed(1),"%"]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),u.jsx(Kc,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Active Pairs"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.tradingPairs.length})]}),u.jsx($1,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:Dut(t.settings.checkIntervalSeconds)})]}),u.jsx(fr,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Leverage"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.maxLeverage,"x"]})]}),u.jsx(zl,{className:"h-4 w-4 text-[#747580]"})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(on,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),u.jsx("div",{className:"flex-1 w-full",children:$?u.jsx(dw,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:u.jsxs(Tfe,{data:L,children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"colorPnl",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),u.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),u.jsx(Sw,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),u.jsx(Tw,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),u.jsx(kw,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:P=>`${P>=0?"+":""}$${P.toFixed(0)}`}),u.jsx(Nk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:(P,W)=>[`${P>=0?"+":""}$${P.toFixed(2)}`,"Realized Profit"]}),u.jsx(cP,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnl)"})]})}):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[u.jsx(zl,{className:"h-8 w-8 mb-2 opacity-40"}),u.jsx("span",{className:"text-[11px]",children:"No closed trades yet..."}),u.jsx("span",{className:"text-[9px] opacity-60 mt-1",children:"Chart shows realized profit from closed positions"})]})})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ao,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),u.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[u.jsx("button",{onClick:()=>N(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${k?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),u.jsx("button",{onClick:()=>z&&N(!0),disabled:!z,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${k?"bg-[#E7FE55] text-black":z?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:z?"View AI Summary":`Available after ${2-_} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!k&&u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&A.length>0&&!k&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:te,disabled:G>=A.length-1,className:`p-1 rounded transition-colors ${G>=A.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous coin",children:u.jsx(z1,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[G+1,"/",A.length]}),u.jsx("button",{onClick:Y,disabled:G<=0,className:`p-1 rounded transition-colors ${G<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next coin",children:u.jsx(il,{size:16})})]})]}),k?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[_," cycles"]}),D&&u.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),F>0&&u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(F).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:O?u.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:O}):u.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}):I?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider",children:I.coin}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(I.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),((H=I.log.details)==null?void 0:H.signal)&&u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${I.log.details.signal==="BUY"||I.log.details.signal==="LONG"?"bg-[#34d399]/15 text-[#34d399]":I.log.details.signal==="SELL"||I.log.details.signal==="SHORT"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:I.log.details.signal})]}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',((M=I.log.details)==null?void 0:M.fullReason)||I.log.message,'"']})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.trendAssessment,'"']})})]}),u.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),u.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),u.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),u.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),u.jsx("div",{className:"glass-panel p-5 rounded shrink-0",children:u.jsx(Lut,{vaultAddress:n,setActiveTab:r})})]})},Uut=({isOpen:t,onClose:e,onSubmit:n,context:r,initialCategory:i="AGREE"})=>{var h;const[s,o]=S.useState(i),[a,l]=S.useState(""),c=()=>{n(s,a),l(""),e()},d=[{id:"AGREE",label:"Good Decision",icon:Mm,color:"text-green-400"},{id:"TOO_BULLISH",label:"Too Bullish",icon:Ii,color:"text-amber-400"},{id:"TOO_BEARISH",label:"Too Bearish",icon:Ii,color:"text-amber-400"},{id:"BAD_TIMING",label:"Bad Timing",icon:fr,color:"text-blue-400"},{id:"WRONG_COIN",label:"Wrong Coin",icon:Lm,color:"text-red-400"}];return u.jsx(Jd,{open:t,onOpenChange:m=>!m&&e(),children:u.jsxs(au,{className:"sm:max-w-[400px] bg-[#14151a] border-[#232328]",children:[u.jsx(lu,{children:u.jsxs(cu,{className:"flex items-center gap-2 text-white text-sm uppercase tracking-wider",children:[u.jsx(wre,{className:"h-4 w-4 text-[#E7FE55]"}),"Feedback: ",r.action," ",r.coin]})}),u.jsxs("div",{className:"py-4 space-y-4",children:[u.jsx("div",{className:"grid grid-cols-2 gap-2",children:d.map(m=>u.jsxs("button",{onClick:()=>o(m.id),className:`flex items-center gap-2 p-2 rounded border transition-colors text-xs font-medium ${s===m.id?"bg-[#E7FE55]/10 border-[#E7FE55]/50 text-white":"bg-[#1a1b21] border-[#232328] text-[#747580] hover:bg-[#232328] hover:text-[#a0a1a8]"}`,children:[u.jsx(m.icon,{className:`h-3 w-3 ${s===m.id?"text-[#E7FE55]":m.color}`}),m.label]},m.id))}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328] text-[10px] text-[#747580] font-mono",children:["At $",((h=r.price)==null?void 0:h.toFixed(2))||"???","  This feedback will adjust future AI bias."]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-wider",children:"Comment (Optional)"}),u.jsx("textarea",{value:a,onChange:m=>l(m.target.value),maxLength:100,placeholder:"Why do you think this?",className:"w-full h-20 bg-[#0f1015] border border-[#232328] rounded p-2 text-xs text-white placeholder:text-[#505158] focus:outline-none focus:border-[#E7FE55]/50 resize-none font-sans"}),u.jsxs("div",{className:"text-[9px] text-[#505158] text-right",children:[a.length,"/100"]})]})]}),u.jsx(Xd,{children:u.jsxs("div",{className:"flex w-full gap-2",children:[u.jsx(Tr,{variant:"outline",onClick:e,className:"flex-1 border-[#232328] text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] h-8 text-xs uppercase",children:"Cancel"}),u.jsx(Tr,{onClick:c,className:"flex-1 bg-[#E7FE55] hover:bg-[#d6ec4e] text-black h-8 text-xs uppercase font-semibold",children:"Submit Feedback"})]})})]})})},f2="dealer_feedbacks",VZ=5;class Fut{async submitFeedback(e){var a,l;const n=crypto.randomUUID(),r=Date.now(),i=this.generateContextSummary(e.context),s={};(a=e.context)!=null&&a.indicators&&Object.entries(e.context.indicators).forEach(([c,d])=>{typeof d=="number"?s[c]=d:d!=null&&d.value&&(s[c]=d.value)});const o={id:n,logId:e.logId,coin:e.coin,action:e.action,category:e.category,comment:(l=e.comment)==null?void 0:l.slice(0,100),contextSummary:i,indicatorSnapshot:s,timestamp:r};return await this.saveFeedback(o),console.log(`[DealerFeedback] Submitted feedback for ${e.coin}: ${e.category}`),o}async getActiveFeedbacks(){const e=await Ae.getItem(Ae.getUserKey(f2));if(!e)return[];try{return JSON.parse(e).sort((r,i)=>i.timestamp-r.timestamp)}catch(n){return console.error("[DealerFeedback] Failed to parse feedbacks:",n),[]}}async deleteFeedback(e){const r=(await this.getActiveFeedbacks()).filter(i=>i.id!==e);await Ae.setItem(Ae.getUserKey(f2),JSON.stringify(r))}async clearAllFeedbacks(){await Ae.removeItem(Ae.getUserKey(f2))}async getContextForAI(){const e=await this.getActiveFeedbacks();if(e.length===0)return"";const n=e.slice(0,VZ);let r=`### USER FEEDBACK - LEARN FROM THIS:
`;for(const i of n){const s=Math.round((Date.now()-i.timestamp)/36e5),o=s===0?"< 1h ago":`${s}h ago`;r+=`-  ${i.coin} (${o}): ${this.getCategoryEmoji(i.category)} ${i.category}
`,i.comment&&(r+=`  User Note: "${i.comment}"
`),r+=`  Context: ${i.contextSummary}

`}return r}async saveFeedback(e){const n=await this.getActiveFeedbacks(),r=[e,...n].slice(0,VZ);await Ae.setItem(Ae.getUserKey(f2),JSON.stringify(r))}getCategoryEmoji(e){switch(e){case"TOO_BULLISH":return"";case"TOO_BEARISH":return"";case"BAD_TIMING":return"";case"WRONG_COIN":return"";case"AGREE":return"";default:return""}}generateContextSummary(e){try{const n=[];if(e.currentPrice&&n.push(`Price=$${e.currentPrice}`),e.indicators&&(e.indicators.rsi&&n.push(`RSI=${this.fmt(e.indicators.rsi)}`),e.indicators.macd)){const r=e.indicators.macd,i=typeof r=="number"?r:r.histogram||r.value;n.push(`MACD=${this.fmt(i)}`)}return e.macro&&n.push(`Macro=${e.macro.timeframe}`),n.join(", ")}catch{return"Context unavailable"}}fmt(e){return typeof e=="number"?e.toFixed(2):e!=null&&e.value?Number(e.value).toFixed(2):"?"}}const C1=new Fut,$ut=Object.freeze(Object.defineProperty({__proto__:null,dealerFeedbackService:C1},Symbol.toStringTag,{value:"Module"})),zut=({logs:t,onClearLogs:e})=>{var b,w,k,N,O,D;const[n,r]=S.useState(null),[i,s]=S.useState(!1),[o,a]=S.useState(null),[l,c]=S.useState("AGREE"),d=t.filter(_=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(_.type))return!0;if(["INFO","WARNING"].includes(_.type)){const F=_.message.toLowerCase();return F.includes("executing")||F.includes("skipping")||F.includes("ignored")}return!1}),h=(_,F)=>_==="ERROR"?u.jsx("div",{className:"text-red-400",children:u.jsx(Br,{size:16})}):_==="TRADE"?u.jsx("div",{className:"text-[#34d399]",children:u.jsx(Ed,{size:16})}):F.includes("BUY")||F.includes("BULLISH")?u.jsx("div",{className:"text-[#34d399]",children:u.jsx(on,{size:16})}):F.includes("SELL")||F.includes("BEARISH")||F.includes("SHORT")?u.jsx("div",{className:"text-red-400",children:u.jsx(Ro,{size:16})}):F.includes("CLOSE")?u.jsx("div",{className:"text-orange-400",children:u.jsx(Br,{size:16})}):u.jsx("div",{className:"text-[#E7FE55]",children:u.jsx(ao,{size:16})}),m=_=>new Date(_).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),g=_=>typeof _=="number"?_.toFixed(2):typeof _=="object"&&_!==null?Object.entries(_).map(([F,z])=>`${F}: ${typeof z=="number"?z.toFixed(2):z}`).join(", "):String(_),v=(_,F)=>{a(_),c(F),s(!0)},x=async(_,F)=>{var $,G;if(!o)return;let z="HOLD",L="UNKNOWN";($=o.details)!=null&&$.context&&(z=o.details.context.action||z,L=o.details.context.coin||L),await C1.submitFeedback({logId:o.id,coin:L,action:z,category:_,comment:F,context:(G=o.details)==null?void 0:G.context})};return u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[u.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[u.jsx(ao,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),u.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:d.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[u.jsx(ao,{size:48,className:"mb-4 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),u.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):d.map(_=>{var G,V;const F=n===_.id,z=(G=_.details)==null?void 0:G.context,L=(V=_.details)==null?void 0:V.context,$=_.type==="REASONING";return u.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[u.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),u.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[h(_.type,_.message),u.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${_.type==="ERROR"?"text-red-400":_.type==="TRADE"?"text-[#34d399]":_.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:_.type})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[$&&u.jsxs("div",{className:"flex items-center gap-1 transition-opacity",children:[u.jsx("button",{onClick:U=>{U.stopPropagation(),v(_,"AGREE")},className:"p-1 hover:bg-[#34d399]/20 rounded text-[#747580] hover:text-[#34d399] transition-colors",title:"Good Decision",children:u.jsx(Sre,{size:12})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),v(_,"TOO_BULLISH")},className:"p-1 hover:bg-yellow-400/20 rounded text-[#747580] hover:text-yellow-400 transition-colors",title:"Too Bullish/Bearish",children:u.jsx(Si,{size:12})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),v(_,"BAD_TIMING")},className:"p-1 hover:bg-blue-400/20 rounded text-[#747580] hover:text-blue-400 transition-colors",title:"Bad Timing",children:u.jsx(fr,{size:12})}),u.jsx("button",{onClick:U=>{U.stopPropagation(),v(_,"WRONG_COIN")},className:"p-1 hover:bg-red-400/20 rounded text-[#747580] hover:text-red-400 transition-colors",title:"Wrong Coin",children:u.jsx(WD,{size:12})})]}),u.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[u.jsx(fr,{size:10}),m(_.timestamp)]})]})]}),u.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:_.message}),_.details&&_.details.fullReason&&u.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#60a5fa]/30",children:['"',_.details.fullReason,'"']}),z&&u.jsxs("button",{onClick:()=>r(F?null:_.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#60a5fa] hover:text-[#93c5fd] transition-colors uppercase tracking-wider",children:[F?u.jsx(Ph,{size:12}):u.jsx(Oo,{size:12}),F?"Hide":"Show"," Analysis Context"]}),F&&z&&u.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[L.indicators&&Object.keys(L.indicators).length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[u.jsx(Si,{size:10}),u.jsx("span",{children:"Indicators Used"})]}),u.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(L.indicators).map(([U,A])=>u.jsxs("div",{className:"flex justify-between bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:U}),u.jsx("span",{className:"text-[#4ade80] font-mono",children:g((A==null?void 0:A.value)||A)})]},U))})]}),L.macro&&Object.keys(L.macro.indicators||{}).length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-amber-400 mb-2 uppercase tracking-wider font-semibold",children:[u.jsx(on,{size:10}),u.jsxs("span",{children:["Macro Confirmation (",L.macro.timeframe==="15"?"15m":L.macro.timeframe==="60"?"1H":L.macro.timeframe==="240"?"4H":L.macro.timeframe==="D"?"Daily":L.macro.timeframe==="W"?"Weekly":L.macro.timeframe,")"]})]}),u.jsx("div",{className:"grid grid-cols-2 gap-1",children:Object.entries(L.macro.indicators).map(([U,A])=>{var Y,H;const I=(H=(Y=L.indicators)==null?void 0:Y[U])==null?void 0:H.value,j=(A==null?void 0:A.value)||A;let q="";const K=typeof I=="number"?I:typeof I=="object"&&I!==null?Object.values(I)[0]:null,te=typeof j=="number"?j:typeof j=="object"&&j!==null?Object.values(j)[0]:null;if(U==="rsi"&&typeof K=="number"&&typeof te=="number"){const M=K>70,P=K<30,W=te>70,X=te<30;M&&X||P&&W?q=" ":(M&&W||P&&X)&&(q=" ")}return u.jsxs("div",{className:"flex justify-between bg-amber-500/10 border border-amber-500/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-amber-400 uppercase font-medium",children:U}),u.jsxs("span",{className:"text-amber-300 font-mono",children:[q,g(j)]})]},U)})})]}),L.tradingCosts&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#747580] mb-2 uppercase tracking-wider font-semibold",children:[u.jsx(tv,{size:10}),u.jsx("span",{children:"Trading Costs"})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[u.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[u.jsx("span",{className:"text-[#747580]",children:"Maker: "}),u.jsxs("span",{className:"text-white font-mono",children:[((L.tradingCosts.makerFee??2e-4)*100).toFixed(3),"%"]})]}),u.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[u.jsx("span",{className:"text-[#747580]",children:"Taker: "}),u.jsxs("span",{className:"text-white font-mono",children:[((L.tradingCosts.takerFee??5e-4)*100).toFixed(3),"%"]})]}),u.jsxs("div",{className:"bg-[#1a1b21] px-2 py-1 rounded text-[10px] border border-[#232328]",children:[u.jsx("span",{className:"text-[#747580]",children:"Funding: "}),u.jsxs("span",{className:(L.tradingCosts.fundingRate??0)>0?"text-red-400 font-mono":"text-[#34d399] font-mono",children:[((L.tradingCosts.fundingRate??0)*100).toFixed(4),"%"]})]})]})]}),L.currentPrice&&u.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Price at analysis: ",u.jsxs("span",{className:"text-white font-mono",children:["$",L.currentPrice.toLocaleString()]})]}),L.enabledIndicators&&L.enabledIndicators.length>0&&u.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Enabled: ",u.jsx("span",{className:"font-mono",children:L.enabledIndicators.join(", ").toUpperCase()})]})]})]})]},_.id)})}),o&&u.jsx(Uut,{isOpen:i,onClose:()=>s(!1),onSubmit:x,initialCategory:l,context:{coin:((w=(b=o.details)==null?void 0:b.context)==null?void 0:w.coin)||"Unknown",action:((N=(k=o.details)==null?void 0:k.context)==null?void 0:N.action)||"Unknown",price:(D=(O=o.details)==null?void 0:O.context)==null?void 0:D.currentPrice}})]})},Vut=({onClose:t})=>{const[e,n]=S.useState([]),[r,i]=S.useState(!0),s=async()=>{i(!0);const c=await C1.getActiveFeedbacks();n(c),i(!1)};S.useEffect(()=>{s()},[]);const o=async c=>{await C1.deleteFeedback(c),await s()},a=async()=>{confirm("Clear all feedback history? This will reset AI bias adjustments.")&&(await C1.clearAllFeedbacks(),await s())},l=c=>{switch(c){case"AGREE":return u.jsx(Gi,{variant:"success",className:"text-[9px]",children:"AGREE"});case"TOO_BULLISH":return u.jsx(Gi,{variant:"warning",className:"text-[9px]",children:"TOO BULLISH"});case"TOO_BEARISH":return u.jsx(Gi,{variant:"warning",className:"text-[9px]",children:"TOO BEARISH"});case"BAD_TIMING":return u.jsx(Gi,{variant:"outline",className:"text-[9px] bg-blue-500/10 text-blue-400 border-blue-500/20",children:"TIMING"});case"WRONG_COIN":return u.jsx(Gi,{variant:"destructive",className:"text-[9px]",children:"WRONG COIN"});default:return u.jsx(Gi,{variant:"secondary",className:"text-[9px]",children:c})}};return u.jsxs("div",{className:"flex flex-col h-full bg-[#14151a] border-l border-[#232328] w-[300px]",children:[u.jsx("div",{className:"p-4 border-b border-[#232328] flex flex-col gap-1 bg-[#14151a]",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("h3",{className:"text-xs font-semibold text-white uppercase tracking-wider flex items-center gap-2",children:[u.jsx(Mm,{className:"h-3 w-3 text-[#E7FE55]"}),"Decision Review",u.jsx(mae,{children:u.jsxs(dC,{children:[u.jsx(fC,{asChild:!0,children:u.jsx(nv,{className:"h-3 w-3 text-[#505158] hover:text-[#747580] cursor-help transition-colors"})}),u.jsx(hE,{side:"bottom",className:"max-w-[220px] text-xs",children:"Rate the dealer's trading decisions to fine-tune its behavior. Your reviews influence the AI's analysis in future cycles."})]})})]}),e.length>0&&u.jsx("button",{onClick:a,className:"text-[10px] text-red-400 hover:text-red-300 transition-colors uppercase",children:"Clear All"})]})}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-2 bg-[#0f1015]",children:r?u.jsx("div",{className:"text-center py-8 text-[#747580] text-xs",children:"Loading..."}):e.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-[#747580] gap-2 opacity-60",children:[u.jsx(Mm,{className:"h-16 w-16 opacity-20"}),u.jsx("p",{className:"text-[16px]",children:"No active reviews"}),u.jsx("p",{className:"text-[12px] text-center max-w-[180px]",children:`Rate the AI's decisions in the "Thinking" logs to bias future analysis.`})]}):u.jsx(Ei,{children:e.map(c=>u.jsxs(gt.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-[#1a1b21] rounded border border-[#232328] p-3 shadow-sm group",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-xs font-bold text-white",children:c.coin}),l(c.category)]}),u.jsx("button",{onClick:()=>o(c.id),className:"text-[#505158] hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",children:u.jsx(_h,{className:"h-3 w-3"})})]}),c.comment&&u.jsxs("p",{className:"text-[11px] text-[#a0a1a8] italic mb-2 leading-relaxed border-l-2 border-[#232328] pl-2",children:['"',c.comment,'"']}),u.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-[#505158] font-mono mt-1",children:[u.jsx(fr,{className:"h-2.5 w-2.5"}),new Date(c.timestamp).toLocaleDateString([],{day:"2-digit",month:"short"})," ",new Date(c.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},c.id))})}),u.jsx("div",{className:"p-3 bg-[#1a1b21] border-t border-[#232328] text-[11px] text-[#505158] text-center",children:"Max 5 active reviews"})]})},Hut=(t=1280)=>{const[e,n]=S.useState(typeof window<"u"?window.innerWidth>=t:!1);return S.useEffect(()=>{const r=()=>{n(window.innerWidth>=t)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[t]),e},qut=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=S.useState(!1),s=t.details&&Object.keys(t.details).length>0;return u.jsxs(gt.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[u.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Gi,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),u.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm",children:t.message}),s&&u.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?u.jsx(Oo,{className:"h-4 w-4"}):u.jsx(il,{className:"h-4 w-4"})})]}),u.jsx(Ei,{children:s&&r&&u.jsx(gt.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},Gut=({status:t,onClearLogs:e})=>{const[n,r]=S.useState("thinking"),[i,s]=S.useState(!1),o=Hut(1280),a=S.useRef(null),l=o||i,c=()=>{const h=JSON.stringify(t.logs,null,2),m="data:application/json;charset=utf-8,"+encodeURIComponent(h),g=`dealer_logs_${new Date().toISOString()}.json`,v=document.createElement("a");v.setAttribute("href",m),v.setAttribute("download",g),v.click()},d=h=>{switch(h){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";default:return"secondary"}};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[u.jsx("div",{className:"glass-panel p-4 shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[u.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(ao,{className:"h-4 w-4"}),"Thinking"]}),u.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(qD,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&u.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[n==="thinking"&&u.jsxs("button",{onClick:()=>s(!i),className:`p-2 rounded border transition-colors flex items-center gap-2 text-[10px] uppercase tracking-wider font-semibold ${l?"bg-[#E7FE55] text-black border-[#E7FE55]":"bg-[#1a1b21] text-[#747580] border-[#232328] hover:text-white"}`,title:"Rate the dealer's trading decisions to fine-tune its behavior.",children:[u.jsx(ET,{className:"h-4 w-4"}),"Decision Review"]}),u.jsx(Ei,{children:n==="logs"&&u.jsxs(gt.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[u.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:u.jsx(_h,{className:"h-4 w-4"})}),u.jsx("button",{onClick:c,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:u.jsx(Qs,{className:"h-4 w-4"})})]})})]})]})}),u.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex",children:[u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n==="thinking"&&u.jsx(zut,{logs:t.logs,onClearLogs:e}),n==="logs"&&u.jsx("div",{className:"flex-1 min-h-0 relative",children:u.jsx("div",{ref:a,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?u.jsxs(gt.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[u.jsx(BN,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):u.jsx(Ei,{children:t.logs.map((h,m)=>u.jsx(qut,{log:h,index:m,getLogBadgeVariant:d},h.id))})})})]}),u.jsx(Ei,{children:n==="thinking"&&l&&u.jsx(gt.div,{initial:{width:0,opacity:0},animate:{width:300,opacity:1},exit:{width:0,opacity:0},className:"h-full border-l border-[#232328] overflow-hidden",children:u.jsx(Vut,{onClose:()=>s(!1)})})})]})]})},eo=({value:t,onChange:e,className:n})=>{const r=1.1.toLocaleString().includes(","),[i,s]=S.useState(t!=null?t.toLocaleString():""),[o,a]=S.useState(!1);S.useEffect(()=>{!o&&t!=null&&s(t.toLocaleString())},[t,o]);const l=()=>{a(!0),t!=null&&s(t.toLocaleString(void 0,{useGrouping:!1,maximumFractionDigits:20}))},c=()=>{a(!1);let d=i;r?d=d.replace(/\./g,"").replace(",","."):d=d.replace(/,/g,"");const h=parseFloat(d);isNaN(h)?t!=null&&s(t.toLocaleString()):(e(h),s(h.toLocaleString()))};return u.jsx("input",{type:"text",className:n,value:i,onChange:d=>s(d.target.value),onFocus:l,onBlur:c,onKeyDown:d=>{d.key==="Enter"&&d.currentTarget.blur()}})},HZ={M:60,H:3600,D:86400,W:604800},h2={M:"Minutes",H:"Hours",D:"Days",W:"Weeks"},Kut={M:1,H:1,D:1,W:1},dme=({value:t,onChange:e})=>{const[n,r]=S.useState("M"),i=HZ[n],s=t/i,o=Kut[n],a=h=>{e(h*i)},l=h=>{r(h),e(s*HZ[h])},c=()=>{a(s+o)},d=()=>{a(Math.max(1,s-o))};return u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-10",value:s,onChange:a}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:c,className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:d,className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]}),u.jsxs("select",{value:n,onChange:h=>l(h.target.value),className:"bg-transparent text-[10px] text-[#747580] font-medium uppercase tracking-wider border-none focus:outline-none cursor-pointer hover:text-white transition-colors appearance-none pr-3",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 24 24' fill='none' stroke='%23747580' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right center"},children:[u.jsx("option",{value:"M",className:"bg-[#0f1015]",children:h2.M}),u.jsx("option",{value:"H",className:"bg-[#0f1015]",children:h2.H}),u.jsx("option",{value:"D",className:"bg-[#0f1015]",children:h2.D}),u.jsx("option",{value:"W",className:"bg-[#0f1015]",children:h2.W})]})]})},qZ={rsi:{name:"RSI",key:"rsi",description:"Relative Strength Index",icon:u.jsx(Si,{size:14}),params:[{key:"period",label:"Period",default:14}]},macd:{name:"MACD",key:"macd",description:"Moving Average Convergence Divergence",icon:u.jsx(on,{size:14}),params:[{key:"fast",label:"Fast",default:12},{key:"slow",label:"Slow",default:26},{key:"signal",label:"Signal",default:9}]},bollinger:{name:"Bollinger",key:"bollinger",description:"Bollinger Bands",icon:u.jsx(zl,{size:14}),params:[{key:"period",label:"Period",default:20},{key:"stdDev",label:"StdDev",default:2}]},atr:{name:"ATR",key:"atr",description:"Average True Range",icon:u.jsx(Mo,{size:14}),params:[{key:"period",label:"Period",default:14}]},adx:{name:"ADX",key:"adx",description:"Average Directional Index",icon:u.jsx(on,{size:14}),params:[{key:"period",label:"Period",default:14}]},obv:{name:"OBV",key:"obv",description:"On-Balance Volume",icon:u.jsx(zl,{size:14}),params:[]},vwap:{name:"VWAP",key:"vwap",description:"Volume Weighted Avg Price",icon:u.jsx(Si,{size:14}),params:[]},ichimoku:{name:"Ichimoku",key:"ichimoku",description:"Ichimoku Cloud",icon:u.jsx(on,{size:14}),params:[{key:"conversion",label:"Conv",default:9},{key:"base",label:"Base",default:26},{key:"spanB",label:"SpanB",default:52},{key:"displacement",label:"Disp",default:26}]},ema:{name:"EMA",key:"ema",description:"Exponential Moving Average",icon:u.jsx(on,{size:14}),params:[{key:"period",label:"Period",default:20}]},sma:{name:"SMA",key:"sma",description:"Simple Moving Average",icon:u.jsx(on,{size:14}),params:[{key:"period",label:"Period",default:20}]},stoch:{name:"Stochastic",key:"stoch",description:"Stochastic Oscillator",icon:u.jsx(Si,{size:14}),params:[{key:"period",label:"Period",default:14},{key:"signalPeriod",label:"Signal",default:3}]}},Wut={trend:{bg:"bg-purple-500/10",text:"text-purple-400",border:"border-purple-500/30"},momentum:{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/30"},volume:{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/30"},volatility:{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/30"}},Yut={trend:u.jsx(on,{size:14}),momentum:u.jsx(Si,{size:14}),volume:u.jsx(zl,{size:14}),volatility:u.jsx(Mo,{size:14})},Jut=({indicatorSettings:t,autonomousMode:e,selectedPreset:n,onUpdateIndicatorSettings:r,onToggleAutonomousMode:i,onSelectPreset:s})=>{const[o,a]=S.useState("trend"),[l,c]=S.useState(null),[d,h]=S.useState([]),[m,g]=S.useState(!1),[v,x]=S.useState(!1),b=S.useMemo(()=>ppe(t),[t]),w=S.useMemo(()=>ort(t),[t]),k=S.useMemo(()=>mpe(t),[t]),N=L=>{const $=t[L];!nQ(t,L)&&!$.enabled||(r({[L]:{...$,enabled:!$.enabled}}),w!=="custom"&&s("custom"))},O=(L,$)=>{const G=t[L];r({[L]:{...G,weight:Math.max(.5,Math.min(2,$))}})},D=(L,$,G)=>{const V=t[L];r({[L]:{...V,params:{...V.params,[$]:G}}})},_=L=>{if(L==="custom")return;const $=srt(L,t);r($),s(L)},F=()=>{r(oy),s("balanced")},z=async()=>{g(!0),x(!0);const L=[],$=Object.keys(t).filter(G=>t[G].enabled);for(const G of $){const V=qZ[G];L.push({indicator:V.name,value:null,loading:!0}),h([...L]);try{const U=t[G],A=await Co.getIndicator("BTCUSDT",G,"60",U.params);L[L.length-1]={indicator:V.name,value:A.value,loading:!1}}catch(U){L[L.length-1]={indicator:V.name,value:null,loading:!1,error:U.message}}h([...L])}g(!1)};return e?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[u.jsx("div",{className:"h-14 w-14 rounded-full bg-gradient-to-br from-emerald-500/30 to-cyan-500/30 flex items-center justify-center mb-4 border border-emerald-500/20",children:u.jsx(xre,{className:"h-7 w-7 text-emerald-400"})}),u.jsx("h3",{className:"text-white font-semibold mb-2",children:"Autonomous Mode Active"}),u.jsx("p",{className:"text-xs text-gray-400 max-w-[280px] mb-4",children:"AI will analyze market conditions and choose the optimal preset each cycle:"}),u.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-[320px] text-[10px]",children:Object.entries(pd).filter(([L])=>L!=="custom").map(([L,$])=>u.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/30 rounded-lg p-2 text-left",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[u.jsx("span",{children:$.emoji}),u.jsx("span",{className:"text-gray-300 font-medium",children:$.name})]}),u.jsx("div",{className:"text-gray-500",children:$.marketCondition})]},L))})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-[10px] text-gray-400 uppercase tracking-wider font-semibold",children:"Presets"}),u.jsxs("span",{className:`text-[10px] font-mono ${k?"text-orange-400":"text-gray-400"}`,children:[b," / ",Rte," selected"]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:Object.entries(pd).filter(([L])=>L!=="custom").map(([L,$])=>u.jsxs("button",{onClick:()=>_(L),className:`px-2 py-1.5 rounded-lg text-[10px] font-medium transition-all border ${w===L?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-gray-800/30 border-gray-700/30 text-gray-400 hover:border-gray-600"}`,title:$.description,children:[u.jsx("span",{className:"mr-1",children:$.emoji}),$.name]},L))}),w==="custom"&&u.jsx("div",{className:"text-[10px] text-gray-500 text-center",children:" Custom configuration"})]}),u.jsx("div",{className:"space-y-2",children:Object.entries(PN).map(([L,$])=>{const G=o===L,V=fpe(t,L),U=hpe(t,L),A=Wut[L];return u.jsxs("div",{className:`rounded-lg border ${A.border} overflow-hidden`,children:[u.jsxs("button",{onClick:()=>a(G?null:L),className:`w-full px-3 py-2 flex items-center justify-between ${A.bg}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:A.text,children:Yut[L]}),u.jsx("span",{className:`text-xs font-medium ${A.text}`,children:$.name})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-mono ${U?"bg-orange-500/20 text-orange-400":"bg-gray-700/50 text-gray-400"}`,children:[V,"/",$.maxIndicators]}),G?u.jsx(Ph,{size:14,className:"text-gray-500"}):u.jsx(Oo,{size:14,className:"text-gray-500"})]})]}),G&&u.jsx("div",{className:"p-2 space-y-1.5 bg-gray-900/30",children:$.indicators.map(I=>{const j=t[I],q=qZ[I],K=nQ(t,I),te=l===I;return u.jsxs("div",{className:`rounded-lg border transition-all ${j.enabled?`${A.border} ${A.bg}`:"border-gray-700/30 bg-gray-800/20"}`,children:[u.jsxs("div",{className:"px-2.5 py-1.5 flex items-center gap-2",children:[u.jsx("button",{onClick:()=>N(I),disabled:!K&&!j.enabled,className:`shrink-0 w-7 h-3.5 rounded-full relative transition-all ${j.enabled?"bg-purple-500":K?"bg-gray-600":"bg-gray-700 opacity-40 cursor-not-allowed"}`,title:!K&&!j.enabled?"Limit reached":void 0,children:u.jsx("div",{className:"absolute top-0.5 w-2.5 h-2.5 rounded-full bg-white transition-all",style:{left:j.enabled?"14px":"2px"}})}),u.jsxs("button",{onClick:()=>c(te?null:I),className:"flex items-center gap-1.5 flex-1 text-left",children:[u.jsx("span",{className:`text-xs font-medium ${j.enabled?"text-white":"text-gray-400"}`,children:q.name}),u.jsx("span",{className:"text-[9px] text-gray-500 truncate",children:q.description})]}),j.enabled&&u.jsxs("span",{className:`text-[9px] font-mono px-1 py-0.5 rounded ${j.weight>1?"bg-green-500/20 text-green-400":j.weight<1?"bg-yellow-500/20 text-yellow-400":"bg-gray-700/50 text-gray-400"}`,children:[j.weight.toFixed(1),""]}),(q.params.length>0||j.enabled)&&u.jsx("button",{onClick:()=>c(te?null:I),children:te?u.jsx(Ph,{size:12,className:"text-gray-500"}):u.jsx(Oo,{size:12,className:"text-gray-500"})})]}),te&&u.jsxs("div",{className:"px-2.5 pb-2 pt-1 border-t border-gray-700/30 space-y-2",children:[j.enabled&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-gray-500 w-10",children:"Weight"}),u.jsx("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:j.weight,onChange:Y=>O(I,parseFloat(Y.target.value)),className:"flex-1 h-1 bg-gray-700 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-purple-500"}),u.jsxs("span",{className:`text-[10px] font-mono w-8 text-right ${j.weight>1?"text-green-400":j.weight<1?"text-yellow-400":"text-gray-400"}`,children:[j.weight.toFixed(1),""]})]}),q.params.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1.5",children:q.params.map(Y=>u.jsxs("div",{className:"flex items-center gap-1 bg-gray-900/50 px-1.5 py-0.5 rounded",children:[u.jsx("label",{className:"text-[9px] text-gray-400",children:Y.label}),u.jsx("input",{type:"number",value:j.params[Y.key]||Y.default,onChange:H=>D(I,Y.key,parseInt(H.target.value)),className:"w-10 bg-transparent border border-gray-700/50 rounded px-1 py-0.5 text-[9px] text-white focus:outline-none focus:border-purple-500"})]},Y.key))})]})]},I)})})]},L)})}),u.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 border-t border-gray-700/30",children:[u.jsxs("button",{onClick:z,disabled:m||b===0,className:"flex items-center justify-center gap-1.5 bg-[#E7FE55] hover:bg-[#d4e94d] disabled:bg-gray-700 disabled:text-gray-500 text-black px-3 py-1.5 rounded text-[10px] font-bold uppercase tracking-wide transition-all",children:[m?u.jsx(Jl,{size:10,className:"animate-spin"}):u.jsx(Mo,{size:10}),"Test (",b,")"]}),u.jsx("button",{onClick:F,className:"px-2 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded text-[10px] transition-all",title:"Reset to Balanced Preset",children:u.jsx(Jl,{size:10})})]}),v&&d.length>0&&u.jsxs("div",{className:"bg-gray-900/50 rounded-lg border border-gray-700/30 p-2",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-[10px] font-bold text-gray-400",children:"Results (BTC 1H)"}),u.jsx("button",{onClick:()=>{h([]),x(!1)},className:"text-[9px] text-gray-500 hover:text-gray-300",children:"Clear"})]}),u.jsx("div",{className:"space-y-1",children:d.map((L,$)=>u.jsxs("div",{className:"flex items-center justify-between text-[10px] bg-gray-800/30 px-2 py-1 rounded",children:[u.jsx("span",{className:"text-gray-300",children:L.indicator}),L.loading?u.jsx("span",{className:"text-gray-500",children:"..."}):L.error?u.jsx("span",{className:"text-red-400",title:L.error,children:"ERR"}):u.jsx("span",{className:"text-emerald-400 font-mono",children:typeof L.value=="object"?"":typeof L.value=="number"?L.value.toFixed(2):String(L.value)})]},$))})]})]})},Xut=({status:t,onToggle:e,onUpdateSettings:n,onApplyChanges:r})=>{const i=t.settings,[s,o]=S.useState(i),[a,l]=S.useState(!1);S.useEffect(()=>{o(i)},[JSON.stringify(i)]),S.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(i))},[s,i]);const c=w=>{o(k=>({...k,...w}))},d=()=>{n(s),r()},[h,m]=S.useState([]),[g,v]=S.useState(!1);S.useEffect(()=>{(async()=>{v(!0);try{const k=await qt.getAllAvailableAssets();m(k.sort())}catch(k){console.error("Failed to fetch assets",k)}finally{v(!1)}})()},[]);const x=w=>{s.tradingPairs.includes(w)||c({tradingPairs:[...s.tradingPairs,w]})},b=w=>{c({tradingPairs:s.tradingPairs.filter(k=>k!==w)})};return u.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{className:"glass-panel p-4 rounded",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${t.isOn?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:u.jsx(Mo,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),u.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[u.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t.isOn?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),u.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:t.isOn?"Active & Running":"Stopped"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>e(!t.isOn),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${t.isOn?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),u.jsxs("button",{onClick:d,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[u.jsx(Jl,{className:"h-3 w-3"})," Apply"]})]})]})}),u.jsxs("div",{className:"glass-panel p-3 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-2",children:[u.jsx(tv,{className:"h-3 w-3"})," Capital & Risk"]}),u.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-2",children:[u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Type"}),u.jsxs("div",{className:"flex gap-0.5",children:[u.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Fix"}),u.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Amount ($)"}),s.bankrollType==="MANUAL"?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-24",value:s.manualBankroll||0,onChange:w=>c({manualBankroll:w})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({manualBankroll:(s.manualBankroll||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({manualBankroll:Math.max(0,(s.manualBankroll||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]}):u.jsx("span",{className:"text-sm font-mono text-[#E7FE55]",children:"Auto"})]}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Leverage"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-baseline gap-0.5",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-8",value:s.maxLeverage||1,onChange:w=>c({maxLeverage:w})}),u.jsx("span",{className:"text-[16px] text-[#747580]",children:"x"})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxLeverage:(s.maxLeverage||1)+1}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({maxLeverage:Math.max(1,(s.maxLeverage||1)-1)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Position/Cycle"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-10",value:s.maxOpenPositions||1,onChange:w=>c({maxOpenPositions:w})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxOpenPositions:(s.maxOpenPositions||1)+1}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({maxOpenPositions:Math.max(1,(s.maxOpenPositions||1)-1)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-2 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Max Margin ($)"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-24",value:s.maxPositionSizeUSDC||0,onChange:w=>c({maxPositionSizeUSDC:w})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxPositionSizeUSDC:(s.maxPositionSizeUSDC||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({maxPositionSizeUSDC:Math.max(0,(s.maxPositionSizeUSDC||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(Kc,{className:"h-3 w-3 text-red-400"}),u.jsx("span",{className:"text-[10px] text-[#747580]",children:"STOP LOSS"}),s.stopLossEnabled&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>c({stopLossPercent:Math.max(.5,(s.stopLossPercent??2)-.5)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})}),u.jsx("input",{type:"text",inputMode:"decimal",value:s.stopLossPercent??"",placeholder:"AI",onChange:w=>{const k=w.target.value;if(k===""||k===null)c({stopLossPercent:null});else{const N=parseFloat(k);isNaN(N)||c({stopLossPercent:N})}},className:"w-8 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono text-center focus:outline-none placeholder:text-[#747580]"}),u.jsx("button",{onClick:()=>c({stopLossPercent:(s.stopLossPercent??1.5)+.5}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),u.jsx("button",{onClick:()=>c({stopLossEnabled:!s.stopLossEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.stopLossEnabled?"bg-red-500":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${s.stopLossEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]}),u.jsx("div",{className:"w-px h-4 bg-[#232328]"}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(cy,{className:"h-3 w-3 text-[#34d399]"}),u.jsx("span",{className:"text-[10px] text-[#747580]",children:"TAKE PROFIT"}),s.takeProfitEnabled&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{onClick:()=>c({takeProfitPercent:Math.max(.5,(s.takeProfitPercent??2)-.5)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})}),u.jsx("input",{type:"text",inputMode:"decimal",value:s.takeProfitPercent??"",placeholder:"AI",onChange:w=>{const k=w.target.value;if(k===""||k===null)c({takeProfitPercent:null});else{const N=parseFloat(k);isNaN(N)||c({takeProfitPercent:N})}},className:"w-8 bg-[#0f1015] border border-[#232328] rounded px-1 py-0.5 text-[10px] text-white font-mono text-center focus:outline-none placeholder:text-[#747580]"}),u.jsx("button",{onClick:()=>c({takeProfitPercent:(s.takeProfitPercent??1.5)+.5}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#34d399] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("span",{className:"text-[9px] text-[#747580]",children:"%"})]}),u.jsx("button",{onClick:()=>c({takeProfitEnabled:!s.takeProfitEnabled}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.takeProfitEnabled?"bg-[#34d399]":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${s.takeProfitEnabled?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]})]}),u.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer group",children:[u.jsx(Mo,{className:"h-3 w-3 text-red-400"}),u.jsx("span",{className:"text-[10px] text-[#747580] group-hover:text-white",children:"Aggressive"}),u.jsx("button",{onClick:()=>c({aggressiveMode:!s.aggressiveMode}),className:`relative inline-flex h-4 w-7 items-center rounded-full transition-colors ${s.aggressiveMode?"bg-red-500":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${s.aggressiveMode?"translate-x-4":"translate-x-0.5"} inline-block h-2.5 w-2.5 transform rounded-full bg-white transition-transform`})})]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(zl,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Indicators Timeframe"}),u.jsxs("select",{className:"w-full bg-transparent text-sm font-mono text-white focus:outline-none cursor-pointer [&>option]:bg-[#0f1015]",value:s.analysisTimeframe||"60",onChange:w=>c({analysisTimeframe:w.target.value}),children:[u.jsx("option",{value:"1",children:"1m"}),u.jsx("option",{value:"5",children:"5m"}),u.jsx("option",{value:"15",children:"15m"}),u.jsx("option",{value:"60",children:"1H"}),u.jsx("option",{value:"240",children:"4H"}),u.jsx("option",{value:"D",children:"1D"})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:"Indicators History"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-12",value:s.historyCandles||100,onChange:w=>c({historyCandles:w})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({historyCandles:Math.min(100,(s.historyCandles||100)+10)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({historyCandles:Math.max(10,(s.historyCandles||100)-10)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsxs("label",{className:"block text-[10px] text-[#747580] font-medium mb-1.5 uppercase tracking-wider",children:[u.jsx(fr,{className:"inline h-3 w-3 mr-1 opacity-50"}),"Interval/Cycle"]}),u.jsx(dme,{value:s.checkIntervalSeconds||60,onChange:w=>c({checkIntervalSeconds:w})})]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(on,{className:"h-3.5 w-3.5"})," Macro Timeframe"]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("span",{className:"text-[11px] text-[#747580]",children:"Multi-timeframe confirmation"})}),u.jsxs("div",{className:"flex items-center gap-3",children:[s.macroTimeframeEnabled&&u.jsxs("select",{className:"bg-[#0f1015] border border-[#232328] rounded py-1.5 px-2 text-[11px] text-white focus:outline-none focus:border-amber-500 [&>option]:bg-[#0f1015]",value:s.macroTimeframe||"240",onChange:w=>c({macroTimeframe:w.target.value}),children:[u.jsx("option",{value:"15",children:"15m"}),u.jsx("option",{value:"60",children:"1H"}),u.jsx("option",{value:"240",children:"4H"}),u.jsx("option",{value:"D",children:"1D"}),u.jsx("option",{value:"W",children:"1W"})]}),u.jsx("button",{onClick:()=>c({macroTimeframeEnabled:!s.macroTimeframeEnabled}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.macroTimeframeEnabled?"bg-amber-500":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${s.macroTimeframeEnabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),s.macroTimeframeEnabled&&u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[10px] text-[#747580] mb-2 uppercase tracking-wider",children:"Active Indicators:"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:Object.entries(s.indicatorSettings).filter(([w,k])=>k.enabled).map(([w,k])=>{var O;const N=(O=s.macroEnabledIndicators)==null?void 0:O.includes(w);return u.jsx("button",{onClick:()=>{const D=s.macroEnabledIndicators||[],_=D.includes(w)?D.filter(F=>F!==w):[...D,w];c({macroEnabledIndicators:_})},className:`
                                                        px-1.5 py-0.5 rounded text-[10px] font-mono border transition-all truncate
                                                        ${N?"bg-amber-500/20 border-amber-500/50 text-amber-300 hover:bg-amber-500/30":"bg-[#0f1015] border-[#232328] text-[#747580] hover:border-[#747580]"}
                                                    `,title:w.toUpperCase(),children:w.toUpperCase()},w)})}),(!s.macroEnabledIndicators||s.macroEnabledIndicators.length===0)&&u.jsxs("div",{className:"text-[10px] text-red-400 mt-2 flex items-center gap-1",children:[u.jsx(Kc,{size:10})," No macro indicators selected"]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[u.jsx(cy,{className:"h-3.5 w-3.5"})," Trading Pairs"]}),u.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.tradingPairs.length})]}),u.jsxs("select",{disabled:g,onChange:w=>{w.target.value&&x(w.target.value),w.target.value=""},className:"w-full bg-[#0f1015] border border-[#232328] rounded py-2 px-3 text-[11px] text-[#747580] focus:outline-none focus:text-white focus:border-[#E7FE55] transition-colors [&>option]:bg-[#0f1015] cursor-pointer hover:border-[#E7FE55]/30 mb-3",children:[u.jsx("option",{value:"",children:g?"Loading...":"+ Add Pair..."}),!g&&h.filter(w=>!s.tradingPairs.includes(w)).map(w=>u.jsx("option",{value:w,children:w},w))]}),u.jsxs("div",{className:"flex flex-wrap gap-1.5 max-h-[120px] overflow-y-auto custom-scrollbar",children:[s.tradingPairs.map(w=>u.jsxs("span",{className:"inline-flex items-center gap-1 bg-[#1a1b21] hover:bg-[#232328] border border-[#232328] hover:border-[#E7FE55]/50 text-[#a0a1a8] hover:text-white px-2 py-1 rounded text-[10px] font-mono transition-all",children:[w,u.jsx("button",{onClick:()=>b(w),className:"text-[#747580] hover:text-red-400 transition-colors",children:u.jsx(Ex,{size:10})})]},w)),s.tradingPairs.length===0&&u.jsxs("div",{className:"w-full py-4 flex flex-col items-center justify-center text-[#747580] opacity-60 border border-dashed border-[#232328] rounded",children:[u.jsx(cy,{className:"h-5 w-5 mb-1"}),u.jsx("span",{className:"text-[10px]",children:"No pairs"})]})]})]})]}),u.jsxs("div",{className:"glass-panel rounded flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"p-3 border-b border-[#232328] flex items-center justify-between shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[u.jsx(Si,{className:"h-3.5 w-3.5"})," Indicators"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[10px] text-[#747580]",children:s.autonomousIndicators?"Auto":"Manual"}),u.jsx("button",{onClick:()=>c({autonomousIndicators:!s.autonomousIndicators}),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${s.autonomousIndicators?"bg-[#34d399]":"bg-[#E7FE55]"}`,title:s.autonomousIndicators?"AI selects indicators":"Manual selection",children:u.jsx("span",{className:`${s.autonomousIndicators?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]})]}),u.jsx("div",{className:"p-4",children:u.jsx(Jut,{indicatorSettings:s.indicatorSettings,autonomousMode:s.autonomousIndicators,selectedPreset:s.selectedPreset||"balanced",onUpdateIndicatorSettings:w=>{c({indicatorSettings:{...s.indicatorSettings,...w}})},onToggleAutonomousMode:w=>{c({autonomousIndicators:w})},onSelectPreset:w=>{c({selectedPreset:w})}})})]})]})})},Qut=({status:t,onSaveStrategy:e,onUpdateSettings:n})=>{var b,w;S.useEffect(()=>{console.log("DealerPromptPage Mounted. Status:",t)},[t]);const r=t==null?void 0:t.settings;if(!r)return u.jsx("div",{className:"p-8 text-red-500",children:"Error: Dealer settings not loaded."});const[i,s]=S.useState(r.strategyPrompt||""),[o,a]=S.useState(r.promptMode||"preset"),[l,c]=S.useState(r.selectedPreset||"balanced"),[d,h]=S.useState(!1);S.useEffect(()=>{s(r.strategyPrompt),a(r.promptMode||"preset"),c(r.selectedPreset||"balanced")},[r.strategyPrompt,r.promptMode,r.selectedPreset]);const m=k=>{if(k==="custom")a("custom"),c("custom"),h(!0);else{const N=LO[k];s(N),a("preset"),c(k),h(N!==r.strategyPrompt)}},g=k=>{const N=k.target.value;s(N);const O=Object.entries(LO).find(([D,_])=>_===N);O?(a("preset"),c(O[0])):(a("custom"),c("custom")),h(N!==r.strategyPrompt)},v=()=>{e(i),n&&n({promptMode:o,selectedPreset:l,strategyPrompt:i}),h(!1)},x=k=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${l===k&&o==="preset"||o==="custom"&&k==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return u.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[u.jsx("div",{className:"glass-panel p-4 shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(q1,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),u.jsx("span",{className:"text-[12px] text-[#747580] font-medium leading-tight",children:"Presets are examples only. You are responsible for your strategy prompt."})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${o==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[u.jsx("span",{className:`h-1 w-1 rounded-full ${o==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),o==="preset"?`${(b=pd[l])==null?void 0:b.emoji} ${(w=pd[l])==null?void 0:w.name}`:"Custom"]}),d&&u.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"}),u.jsxs("button",{onClick:v,disabled:!d,className:`
                                flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                                ${d?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                            `,children:[u.jsx(HD,{className:"h-3.5 w-3.5"}),"Save"]})]})]})}),u.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[u.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[u.jsx(Are,{size:12,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(pd).filter(([k])=>k!=="custom").map(([k,N])=>u.jsxs("button",{onClick:()=>m(k),className:x(k),children:[u.jsx("span",{children:N.emoji}),u.jsx("span",{children:N.name})]},k)),u.jsx("div",{className:"h-px bg-[#232328] my-2"}),u.jsxs("button",{onClick:()=>m("custom"),className:x("custom"),children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Custom"})]})]}),u.jsx("div",{className:"mt-auto pt-4 px-1",children:u.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),u.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),u.jsx("textarea",{value:i,onChange:g,className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your trading strategy here...
// 
// Example:
// You are a conservative trader focusing on mean reversion.
// 1. Only trade when RSI is above 70 or below 30.
// 2. Prioritize high volume tokens.
// 3. Never risk more than 1% of equity per trade.`}),u.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),u.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[u.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),u.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})};function GZ(t){const e=Zut(t),n=S.forwardRef((r,i)=>{const{children:s,...o}=r,a=S.Children.toArray(s),l=a.find(tdt);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function Zut(t){const e=S.forwardRef((n,r)=>{const{children:i,...s}=n;if(S.isValidElement(i)){const o=rdt(i),a=ndt(s,i.props);return i.type!==S.Fragment&&(a.ref=r?uv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var edt=Symbol("radix.slottable");function tdt(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===edt}function ndt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function rdt(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function fme(t){const e=t+"CollectionProvider",[n,r]=o0(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:b,children:w}=x,k=Ms.useRef(null),N=Ms.useRef(new Map).current;return u.jsx(i,{scope:b,itemMap:N,collectionRef:k,children:w})};o.displayName=e;const a=t+"CollectionSlot",l=GZ(a),c=Ms.forwardRef((x,b)=>{const{scope:w,children:k}=x,N=s(a,w),O=Or(b,N.collectionRef);return u.jsx(l,{ref:O,children:k})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=GZ(d),g=Ms.forwardRef((x,b)=>{const{scope:w,children:k,...N}=x,O=Ms.useRef(null),D=Or(b,O),_=s(d,w);return Ms.useEffect(()=>(_.itemMap.set(O,{ref:O,...N}),()=>void _.itemMap.delete(O))),u.jsx(m,{[h]:"",ref:D,children:k})});g.displayName=d;function v(x){const b=s(t+"CollectionConsumer",x);return Ms.useCallback(()=>{const k=b.collectionRef.current;if(!k)return[];const N=Array.from(k.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((_,F)=>N.indexOf(_.ref.current)-N.indexOf(F.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var idt=S.createContext(void 0);function kB(t){const e=S.useContext(idt);return t||e||"ltr"}var V4="rovingFocusGroup.onEntryFocus",sdt={bubbles:!1,cancelable:!0},$E="RovingFocusGroup",[Lj,hme,odt]=fme($E),[adt,pme]=o0($E,[odt]),[ldt,cdt]=adt($E),mme=S.forwardRef((t,e)=>u.jsx(Lj.Provider,{scope:t.__scopeRovingFocusGroup,children:u.jsx(Lj.Slot,{scope:t.__scopeRovingFocusGroup,children:u.jsx(udt,{...t,ref:e})})}));mme.displayName=$E;var udt=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...h}=t,m=S.useRef(null),g=Or(e,m),v=kB(s),[x,b]=Lx({prop:o,defaultProp:a??null,onChange:l,caller:$E}),[w,k]=S.useState(!1),N=Rh(c),O=hme(n),D=S.useRef(!1),[_,F]=S.useState(0);return S.useEffect(()=>{const z=m.current;if(z)return z.addEventListener(V4,N),()=>z.removeEventListener(V4,N)},[N]),u.jsx(ldt,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:x,onItemFocus:S.useCallback(z=>b(z),[b]),onItemShiftTab:S.useCallback(()=>k(!0),[]),onFocusableItemAdd:S.useCallback(()=>F(z=>z+1),[]),onFocusableItemRemove:S.useCallback(()=>F(z=>z-1),[]),children:u.jsx(jn.div,{tabIndex:w||_===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:yn(t.onMouseDown,()=>{D.current=!0}),onFocus:yn(t.onFocus,z=>{const L=!D.current;if(z.target===z.currentTarget&&L&&!w){const $=new CustomEvent(V4,sdt);if(z.currentTarget.dispatchEvent($),!$.defaultPrevented){const G=O().filter(j=>j.focusable),V=G.find(j=>j.active),U=G.find(j=>j.id===x),I=[V,U,...G].filter(Boolean).map(j=>j.ref.current);xme(I,d)}}D.current=!1}),onBlur:yn(t.onBlur,()=>k(!1))})})}),gme="RovingFocusGroupItem",yme=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=yd(),c=s||l,d=cdt(gme,n),h=d.currentTabStopId===c,m=hme(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:x}=d;return S.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),u.jsx(Lj.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:u.jsx(jn.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:yn(t.onMouseDown,b=>{r?d.onItemFocus(c):b.preventDefault()}),onFocus:yn(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:yn(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const w=hdt(b,d.orientation,d.dir);if(w!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let N=m().filter(O=>O.focusable).map(O=>O.ref.current);if(w==="last")N.reverse();else if(w==="prev"||w==="next"){w==="prev"&&N.reverse();const O=N.indexOf(b.currentTarget);N=d.loop?pdt(N,O+1):N.slice(O+1)}setTimeout(()=>xme(N))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:x!=null}):o})})});yme.displayName=gme;var ddt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fdt(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function hdt(t,e,n){const r=fdt(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ddt[r]}function xme(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function pdt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var mdt=mme,gdt=yme,kP="Tabs",[ydt]=o0(kP,[pme]),vme=pme(),[xdt,NB]=ydt(kP),bme=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,d=kB(a),[h,m]=Lx({prop:r,onChange:i,defaultProp:s??"",caller:kP});return u.jsx(xdt,{scope:n,baseId:yd(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:l,children:u.jsx(jn.div,{dir:d,"data-orientation":o,...c,ref:e})})});bme.displayName=kP;var wme="TabsList",Eme=S.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=NB(wme,n),o=vme(n);return u.jsx(mdt,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:u.jsx(jn.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});Eme.displayName=wme;var Sme="TabsTrigger",Ame=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=NB(Sme,n),a=vme(n),l=Nme(o.baseId,r),c=Cme(o.baseId,r),d=r===o.value;return u.jsx(gdt,{asChild:!0,...a,focusable:!i,active:d,children:u.jsx(jn.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:yn(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:yn(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:yn(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(r)})})})});Ame.displayName=Sme;var Tme="TabsContent",kme=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=NB(Tme,n),l=Nme(a.baseId,r),c=Cme(a.baseId,r),d=r===a.value,h=S.useRef(d);return S.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),u.jsx(l0,{present:i||d,children:({present:m})=>u.jsx(jn.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&s})})});kme.displayName=Tme;function Nme(t,e){return`${t}-trigger-${e}`}function Cme(t,e){return`${t}-content-${e}`}var vdt=bme,Pme=Eme,_me=Ame,Ime=kme;const Rme=vdt,bdt=S.forwardRef(({className:t,...e},n)=>u.jsx(Pme,{ref:n,className:dt("inline-flex h-9 items-center justify-center rounded bg-[#1a1b21] p-1 text-[#747580] border border-[#232328]",t),...e}));bdt.displayName=Pme.displayName;const wdt=S.forwardRef(({className:t,...e},n)=>u.jsx(_me,{ref:n,className:dt("inline-flex items-center justify-center whitespace-nowrap rounded px-4 py-1.5 text-[11px] font-medium uppercase tracking-[0.05em] ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[#E7FE55] data-[state=active]:text-black data-[state=active]:shadow-sm hover:text-[#a0a1a8]",t),...e}));wdt.displayName=_me.displayName;const fd=S.forwardRef(({className:t,...e},n)=>u.jsx(Ime,{ref:n,className:dt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));fd.displayName=Ime.displayName;const Edt=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.hlPublicKey,s=n===be.VAULT_DEALER?be.DEALER_DASHBOARD:n,{isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:d,currentSignal:h,trendAssessment:m,pendingExecution:g,currentExposure:v,activePositions:x,portfolioValue:b,lastSyncTimestamp:w,settings:k,logs:N,operationHistory:O,toggleDealer:D,updateSettings:_,applyChanges:F,saveStrategy:z,clearLogs:L}=Mut(t,e),$={isOn:o,isAnalyzing:a,statusMessage:l,statusDetail:c,currentTask:d,currentSignal:h,trendAssessment:m,pendingExecution:g,currentExposure:v,activePositions:x,portfolioValue:b,lastSyncTimestamp:w,settings:k,logs:N,operationHistory:O},G=()=>{switch(s){case be.DEALER_DASHBOARD:return"dashboard";case be.DEALER_THINKING:return"thinking";case be.DEALER_CONFIG:return"config";case be.DEALER_PROMPT:return"prompt";default:return"dashboard"}},V=U=>{switch(U){case"dashboard":r(be.DEALER_DASHBOARD);break;case"thinking":r(be.DEALER_THINKING);break;case"config":r(be.DEALER_CONFIG);break;case"prompt":r(be.DEALER_PROMPT);break}};return i?u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&u.jsx(gt.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:u.jsx(Gi,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),u.jsx(Rme,{value:G(),onValueChange:V,className:"flex-1 flex flex-col min-h-0",children:u.jsxs("div",{className:"flex-1 min-h-0 relative",children:[u.jsx(fd,{value:"dashboard",className:"h-full mt-0 absolute inset-0",children:u.jsx(But,{status:$,onToggle:D,vaultAddress:t.hlPublicKey,setActiveTab:r})}),u.jsx(fd,{value:"thinking",className:"h-full mt-0 absolute inset-0",children:u.jsx(Gut,{status:$,onClearLogs:L})}),u.jsx(fd,{value:"config",className:"h-full mt-0 absolute inset-0 overflow-y-auto",children:u.jsx(Xut,{status:$,onToggle:D,onUpdateSettings:_,onApplyChanges:F,onSaveStrategy:z})}),u.jsx(fd,{value:"prompt",className:"h-full mt-0 absolute inset-0",children:u.jsx(Qut,{status:$,onSaveStrategy:z,onUpdateSettings:_})})]})})]}):u.jsx(gt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:u.jsx(on,{size:32,className:"text-[#34d399]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),u.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Hyperliquid wallet before using Hyperliquid Dealer. Go to the ",u.jsx("span",{className:"text-[#34d399]",children:"Vault"})," page to set up your wallet."]}),u.jsx(Tr,{onClick:()=>r(be.VAULT),variant:"success",size:"lg",className:"mt-4",children:"Go to Vault"})]})})},Sdt=({vault:t,connectHLOwnerWallet:e,refreshHLBalance:n,activityLog:r=[]})=>{var U;const[i,s]=S.useState([]),[o,a]=S.useState([]),[l,c]=S.useState(new Map),[d,h]=S.useState([]),[m,g]=S.useState(""),[v,x]=S.useState(!1),[b,w]=S.useState(Date.now()),[k,N]=S.useState(!0),[O,D]=S.useState(null),_=async A=>{try{await navigator.clipboard.writeText(A),D(A),setTimeout(()=>D(null),2e3)}catch(I){console.error("Failed to copy:",I)}},F=S.useCallback(async()=>{if(t.hlPublicKey){x(!0);try{await n(t.hlPublicKey);const I=(await $n.getUserState(t.hlPublicKey)).assetPositions.filter(P=>parseFloat(P.position.szi)!==0);s(I);const j=await $n.getOpenOrders(t.hlPublicKey);a(j);const q=await $n.getAvailableAssets();h(q);const K=new Set([...I.map(P=>P.position.coin)]);["BTC","ETH","SOL","BNB","DOGE","AVAX","MATIC","ARB","OP","APT"].forEach(P=>K.add(P));const Y=[...K].slice(0,15).map(async P=>{var W,X,ie,oe;try{const Te=await $n.getMarketData(P),ce=parseFloat(((X=(W=Te.levels[0])==null?void 0:W[0])==null?void 0:X.px)||0),de=parseFloat(((oe=(ie=Te.levels[1])==null?void 0:ie[0])==null?void 0:oe.px)||0),ke=de-ce,ye=ce>0?ke/ce*100:0;return{coin:P,bid:ce,ask:de,spread:ke,spreadPercent:ye,lastUpdate:Date.now()}}catch(Te){return console.error(`Failed to fetch market data for ${P}`,Te),null}}),H=await Promise.all(Y),M=new Map;H.forEach(P=>{P&&M.set(P.coin,P)}),c(M),w(Date.now())}catch(A){console.error("Failed to fetch HL data",A)}finally{x(!1)}}},[t.hlPublicKey,n]);S.useEffect(()=>{t.hlPublicKey&&F()},[t.hlPublicKey]),S.useEffect(()=>{if(!k||!t.hlPublicKey)return;const A=setInterval(()=>{F()},6e4);return()=>clearInterval(A)},[k,t.hlPublicKey,F]);const z=i.reduce((A,I)=>A+parseFloat(I.position.unrealizedPnl||0),0),L=i.reduce((A,I)=>{const j=Math.abs(parseFloat(I.position.szi)),q=parseFloat(I.position.entryPx);return A+j*q},0),$=d.filter(A=>A.toLowerCase().includes(m.toLowerCase())),G=new Set(i.map(A=>A.position.coin)),V=r.filter(A=>A.network==="hyperliquid"||A.type==="HL Order"||A.type.startsWith("HL"));return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 2xl:grid-cols-4 gap-4 lg:gap-6",children:[u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center group",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:u.jsx(Ih,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Balance"})}),u.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",((U=t.hlBalance)==null?void 0:U.toFixed(2))||"0.00"]}),u.jsx("div",{className:"text-[11px] text-[#747580] mb-3",children:"USDC"}),u.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-[#232328]",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",id:"autoRefresh",checked:k,onChange:A=>N(A.target.checked),className:"w-3.5 h-3.5 rounded border-[#232328] bg-[#1a1b21] key-emerald-600 focus:ring-emerald-500"}),u.jsx("label",{htmlFor:"autoRefresh",className:"text-[10px] text-[#747580] cursor-pointer",children:"Auto-refresh"})]}),u.jsx("button",{onClick:F,disabled:v,className:"p-1.5 hover:bg-[#1a1b21] rounded transition-colors text-[#E7FE55] hover:text-[#f0ff85] disabled:opacity-50",title:"Refresh now",children:u.jsx(Jl,{size:14,className:v?"animate-spin":""})})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(on,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Position Value"})}),u.jsxs("div",{className:"text-2xl lg:text-3xl font-semibold text-white tracking-tight mb-1",children:["$",L.toFixed(2)]}),u.jsxs("div",{className:"flex items-center justify-between mt-1",children:[u.jsxs("div",{className:"text-[11px] text-[#747580]",children:[i.length," open position",i.length!==1?"s":""]}),u.jsxs("a",{href:"https://app.hyperliquid-testnet.xyz",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-[#E7FE55] hover:text-[#f0ff85] flex items-center gap-1",title:"Hyperliquid Platform Official Website",children:[u.jsx(on,{size:10})," Hyperliquid"]})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:z>=0?u.jsx(on,{size:48,className:"text-white"}):u.jsx(Ro,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Unrealized PnL"})}),u.jsxs("div",{className:`text-2xl lg:text-3xl font-semibold tracking-tight mb-1 ${z>=0?"text-[#34d399]":"text-red-400"}`,children:[z>=0?"+":"",z.toFixed(2)]}),u.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:"USDC"})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col justify-center",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:u.jsx(Ih,{size:48,className:"text-white"})}),u.jsx("div",{className:"flex items-center justify-between mb-2",children:u.jsx("h3",{className:"text-[10px] uppercase tracking-[0.1em] text-[#747580] font-semibold",children:"Vault Address"})}),t.hlPublicKey?u.jsxs("div",{onClick:()=>_(t.hlPublicKey),className:"flex items-center gap-2 cursor-pointer group",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]"}),u.jsxs("span",{className:"text-sm font-mono text-white truncate group-hover:text-[#E7FE55] transition-colors",children:[t.hlPublicKey.slice(0,6),"...",t.hlPublicKey.slice(-4)]}),O===t.hlPublicKey?u.jsx("span",{className:"text-[10px] text-[#E7FE55] ml-auto",children:"Copied!"}):u.jsx("span",{className:"text-[10px] text-[#747580] ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to copy"})]}):u.jsx("div",{className:"text-sm font-mono text-white mb-1 truncate",children:"Not Available"}),u.jsx("div",{className:"text-[11px] text-[#747580] mt-1",children:b&&`Updated ${new Date(b).toLocaleTimeString()}`})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(Si,{size:18,className:"text-[#E7FE55]"}),"Open Positions"]}),u.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[i.length," active"]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),u.jsx("th",{className:"py-3 font-medium",children:"Side"}),u.jsx("th",{className:"py-3 font-medium",children:"Size"}),u.jsx("th",{className:"py-3 font-medium",children:"Entry Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Current Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Leverage"}),u.jsx("th",{className:"py-3 font-medium",children:"Margin Type"}),u.jsx("th",{className:"py-3 font-medium",children:"Liq. Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Unrealized PnL"}),u.jsx("th",{className:"py-3 pr-4 font-medium",children:"ROE"})]})}),u.jsx("tbody",{className:"text-sm",children:i.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:10,className:"p-8 text-center text-slate-500",children:"No open positions"})}):i.map((A,I)=>{var ie,oe;const j=parseFloat(A.position.szi)>0,q=Math.abs(parseFloat(A.position.szi)),K=parseFloat(A.position.entryPx),te=parseFloat(A.position.unrealizedPnl),Y=parseFloat(A.position.returnOnEquity),H=((ie=A.position.leverage)==null?void 0:ie.value)||1,M=((oe=A.position.leverage)==null?void 0:oe.type)||"cross",P=A.position.liquidationPx,W=l.get(A.position.coin),X=j?W==null?void 0:W.bid:W==null?void 0:W.ask;return u.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors",children:[u.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:A.position.coin}),u.jsx("td",{className:`py-3 font-semibold ${j?"text-[#34d399]":"text-red-400"}`,children:j?"LONG":"SHORT"}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:q.toFixed(4)}),u.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",K]}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:X?`$${X.toFixed(2)}`:"-"}),u.jsxs("td",{className:"py-3 text-[#E7FE55] font-medium",children:[H,"x"]}),u.jsx("td",{className:"py-3",children:u.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-medium uppercase tracking-wider ${M==="isolated"?"bg-purple-500/15 text-purple-400":"bg-blue-500/15 text-blue-400"}`,children:M})}),u.jsx("td",{className:"py-3 text-red-400/80",children:P?`$${parseFloat(P).toFixed(2)}`:"-"}),u.jsxs("td",{className:`py-3 font-semibold ${te>=0?"text-[#34d399]":"text-red-400"}`,children:[te>=0?"+":"",te.toFixed(2)]}),u.jsxs("td",{className:`py-3 pr-4 font-medium ${Y>=0?"text-[#34d399]":"text-red-400"}`,children:[Y>=0?"+":"",(Y*100).toFixed(2),"%"]})]},I)})})]})})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(Ii,{size:18,className:"text-yellow-500"}),"Open Orders"]}),u.jsxs("span",{className:"text-[10px] bg-[#1a1b21] text-[#747580] px-2 py-1 rounded uppercase tracking-wider",children:[o.length," pending"]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"py-3 pl-4 font-medium",children:"Symbol"}),u.jsx("th",{className:"py-3 font-medium",children:"Side"}),u.jsx("th",{className:"py-3 font-medium",children:"Size"}),u.jsx("th",{className:"py-3 font-medium",children:"Price"}),u.jsx("th",{className:"py-3 font-medium",children:"Type"})]})}),u.jsx("tbody",{className:"text-sm",children:o.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No open orders"})}):o.map((A,I)=>u.jsxs("tr",{className:"border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21]",children:[u.jsx("td",{className:"py-3 pl-4 font-medium text-white",children:A.coin}),u.jsx("td",{className:`py-3 font-medium ${A.side==="B"?"text-[#34d399]":"text-red-400"}`,children:A.side==="B"?"BUY":"SELL"}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:A.sz}),u.jsxs("td",{className:"py-3 text-[#a0a1a8]",children:["$",A.limitPx]}),u.jsx("td",{className:"py-3 text-[#a0a1a8]",children:A.orderType})]},I))})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 2xl:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"flex items-center justify-between mb-4 border-b border-[#232328] pb-2",children:u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(Si,{size:18,className:"text-[#E7FE55]"}),"Recent Activity"]})}),u.jsx("div",{className:"flex-1",children:V.length===0?u.jsx("div",{className:"text-center py-8 text-[#747580] text-sm",children:"No recent transactions"}):u.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:V.slice(0,15).map((A,I)=>u.jsxs("div",{className:"flex items-start gap-3 pb-3 border-b border-[#232328]/50 last:border-0 border-dashed",children:[u.jsx("div",{className:"mt-1 p-1.5 rounded-full bg-[#E7FE55]/15 text-[#E7FE55]",children:u.jsx(Si,{size:12})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start gap-2",children:[u.jsx("span",{className:"text-xs font-medium text-[#E7FE55]",children:A.type}),u.jsx("span",{className:"text-[10px] text-[#747580] flex-shrink-0",children:new Date(A.timestamp).toLocaleTimeString()})]}),u.jsx("div",{className:"text-[11px] text-[#a0a1a8] truncate mt-0.5",children:A.desc}),A.signature&&A.signature!=="pending"&&u.jsxs("div",{className:"text-[9px] text-[#747580] font-mono mt-1 hover:text-[#E7FE55] cursor-pointer transition-colors",children:[A.signature.slice(0,6),"..."]})]})]},I))})})]}),u.jsxs("div",{className:"glass-panel p-6 rounded relative overflow-hidden flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-[#232328] pb-2",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[u.jsx(on,{size:18,className:"text-[#E7FE55]"}),"Market Data"]}),u.jsxs("span",{className:"text-[10px] text-[#747580] mt-1",children:[$.length," assets"]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(GD,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#747580]",size:14}),u.jsx("input",{type:"text",placeholder:"Search assets...",value:m,onChange:A=>g(A.target.value),className:"w-48 pl-9 pr-3 py-1.5 bg-[#14151a] border border-[#232328] text-white rounded text-xs focus:outline-none focus:border-[#E7FE55]"})]})]}),u.jsx("div",{className:"overflow-x-auto max-h-96 custom-scrollbar",children:u.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[u.jsx("thead",{className:"sticky top-0 bg-[#0c0d10] z-10",children:u.jsxs("tr",{className:"text-[10px] uppercase tracking-[0.05em] text-[#747580] border-b border-[#232328]",children:[u.jsx("th",{className:"py-2 pl-2 font-medium",children:"Asset"}),u.jsx("th",{className:"py-2 font-medium",children:"Bid"}),u.jsx("th",{className:"py-2 font-medium",children:"Ask"}),u.jsx("th",{className:"py-2 font-medium",children:"Spread %"})]})}),u.jsx("tbody",{className:"text-sm",children:$.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"py-8 text-center text-[#747580]",children:"No assets found"})}):$.slice(0,20).map(A=>{const I=l.get(A),j=G.has(A);return u.jsxs("tr",{className:`border-b border-[#232328]/50 last:border-0 hover:bg-[#1a1b21] transition-colors ${j?"bg-[#E7FE55]/5":""}`,children:[u.jsxs("td",{className:"py-2 pl-2 font-medium text-white flex items-center gap-2",children:[A,j&&u.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#E7FE55]",title:"Open Position"})]}),u.jsx("td",{className:"py-2 text-[#34d399] font-medium",children:I?`$${I.bid.toFixed(2)}`:"-"}),u.jsx("td",{className:"py-2 text-red-400 font-medium",children:I?`$${I.ask.toFixed(2)}`:"-"}),u.jsx("td",{className:"py-2 text-[#a0a1a8]",children:I?`${I.spreadPercent.toFixed(3)}%`:"-"})]},A)})})]})})]})]})]})},Adt=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r,onClose:i})=>{const s=async()=>{try{await navigator.clipboard.writeText(t),r("Private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},o=()=>{e(""),n(!1),r("Solana backup confirmed!"),i&&i()};return u.jsx(Jd,{open:!0,onOpenChange:()=>{},children:u.jsxs(au,{className:"max-w-md rounded-sm",style:{background:"linear-gradient(180deg, rgba(30, 32, 40, 0.95) 0%, rgba(24, 26, 32, 0.9) 100%)",border:"1px solid rgba(60, 63, 75, 0.4)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.02)"},onPointerDownOutside:a=>a.preventDefault(),children:[u.jsxs(lu,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-[#E7FE55]/10 rounded-sm flex items-center justify-center",children:u.jsx(Kc,{className:"text-[#E7FE55] w-5 h-5"})}),u.jsx("div",{children:u.jsxs(cu,{className:"flex items-center gap-2",children:["Backup Your Solana Key",u.jsx(Gi,{variant:"purple",children:"CRITICAL"})]})})]}),u.jsx(Qd,{children:"This is your Solana wallet private key. Save it securely - you will NOT see it again."})]}),u.jsxs(gt.div,{className:"bg-red-500/10 border border-red-500/30 rounded-sm p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[u.jsx(Ii,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),u.jsxs("p",{className:"text-red-400 text-sm",children:[u.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[rgba(30,32,40,0.6)] rounded-sm p-4 border border-[rgba(60,63,75,0.3)]",children:[u.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold tracking-wider mb-2",children:"Private Key"}),u.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded-sm border border-slate-700/50",children:t})]}),u.jsxs(Tr,{onClick:s,variant:"outline",className:"w-full",children:[u.jsx(Tm,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),u.jsx(Xd,{children:u.jsx(Tr,{onClick:o,className:"w-full bg-[#E7FE55] hover:bg-[#d9f044] text-black font-bold",children:"I've Saved My Key Securely"})})]})})},Tdt=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Hyperliquid private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Hyperliquid backup confirmed!")};return u.jsx(Jd,{open:!0,onOpenChange:()=>{},children:u.jsxs(au,{className:"max-w-md rounded-sm",style:{background:"linear-gradient(180deg, rgba(30, 32, 40, 0.95) 0%, rgba(24, 26, 32, 0.9) 100%)",border:"1px solid rgba(60, 63, 75, 0.4)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.02)"},onPointerDownOutside:o=>o.preventDefault(),children:[u.jsxs(lu,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-[#E7FE55]/10 rounded-sm flex items-center justify-center",children:u.jsx(Kc,{className:"text-[#E7FE55] w-5 h-5"})}),u.jsx("div",{children:u.jsxs(cu,{className:"flex items-center gap-2",children:["Backup Your Hyperliquid Key",u.jsx(Gi,{variant:"success",children:"CRITICAL"})]})})]}),u.jsx(Qd,{children:"This is your Hyperliquid (EVM) wallet private key. Save it securely - you will NOT see it again."})]}),u.jsxs(gt.div,{className:"bg-red-500/10 border border-red-500/30 rounded-sm p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[u.jsx(Ii,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),u.jsxs("p",{className:"text-red-400 text-sm",children:[u.jsx("strong",{children:"Warning:"})," Anyone with this key can access your funds. Never share it with anyone."]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[rgba(30,32,40,0.6)] rounded-sm p-4 border border-[rgba(60,63,75,0.3)]",children:[u.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold tracking-wider mb-2",children:"Private Key (EVM)"}),u.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded-sm border border-slate-700/50",children:t})]}),u.jsxs(Tr,{onClick:i,variant:"outline",className:"w-full",children:[u.jsx(Tm,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),u.jsx(Xd,{children:u.jsx(Tr,{onClick:s,className:"w-full bg-[#E7FE55] hover:bg-[#d9f044] text-black font-bold",children:"I've Saved My Key Securely"})})]})})},kdt=({backupKey:t,setBackupKey:e,setShowBackupModal:n,addNotification:r})=>{const i=async()=>{try{await navigator.clipboard.writeText(t),r("Polymarket private key copied to clipboard")}catch{r("Failed to copy to clipboard")}},s=()=>{e(""),n(!1),r("Polymarket backup confirmed!")};return u.jsx(Jd,{open:!0,onOpenChange:()=>{},children:u.jsxs(au,{className:"max-w-md rounded-sm",style:{background:"linear-gradient(180deg, rgba(30, 32, 40, 0.95) 0%, rgba(24, 26, 32, 0.9) 100%)",border:"1px solid rgba(60, 63, 75, 0.4)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.02)"},onPointerDownOutside:o=>o.preventDefault(),children:[u.jsxs(lu,{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 bg-[#E7FE55]/10 rounded-sm flex items-center justify-center",children:u.jsx(Kc,{className:"text-[#E7FE55] w-5 h-5"})}),u.jsx("div",{children:u.jsxs(cu,{className:"flex items-center gap-2",children:["Backup Your Polymarket Key",u.jsx(Gi,{variant:"destructive",children:"CRITICAL"})]})})]}),u.jsx(Qd,{children:"This is your Polymarket (Polygon) wallet private key. Save it securely - you will NOT see it again."})]}),u.jsxs(gt.div,{className:"bg-red-500/10 border border-red-500/30 rounded p-3 flex items-start gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[u.jsx(Ii,{className:"text-red-400 w-5 h-5 shrink-0 mt-0.5"}),u.jsxs("p",{className:"text-red-400 text-sm",children:[u.jsx("strong",{children:"Warning:"})," Anyone with this key can access your Polygon funds. Never share it with anyone."]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[rgba(30,32,40,0.6)] rounded-sm p-4 border border-[rgba(60,63,75,0.3)]",children:[u.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold tracking-wider mb-2",children:"Private Key (Polygon EVM)"}),u.jsx("div",{className:"font-mono text-xs text-slate-300 break-all bg-black/30 p-3 rounded-sm border border-slate-700/50",children:t})]}),u.jsxs(Tr,{onClick:i,variant:"outline",className:"w-full",children:[u.jsx(Tm,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]})]}),u.jsx(Xd,{children:u.jsx(Tr,{onClick:s,className:"w-full bg-[#E7FE55] hover:bg-[#d9f044] text-black font-bold",children:"I've Saved My Key Securely"})})]})})},Sg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function jj(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function h0(t,...e){if(!zE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ome(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");jj(t.outputLen),jj(t.blockLen)}function sN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ndt(t,e){h0(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function qx(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function H4(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function hc(t,e){return t<<32-e|t>>>e}const Mme=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Cdt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Om(t){if(h0(t),Mme)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Cdt[t[n]];return e}const Mu={_0:48,_9:57,A:65,F:70,a:97,f:102};function KZ(t){if(t>=Mu._0&&t<=Mu._9)return t-Mu._0;if(t>=Mu.A&&t<=Mu.F)return t-(Mu.A-10);if(t>=Mu.a&&t<=Mu.f)return t-(Mu.a-10)}function oN(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Mme)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=KZ(t.charCodeAt(s)),a=KZ(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function Pdt(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function CB(t){return typeof t=="string"&&(t=Pdt(t)),h0(t),t}function Mc(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];h0(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class Lme{}function jme(t){const e=r=>t().update(CB(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function PB(t=32){if(Sg&&typeof Sg.getRandomValues=="function")return Sg.getRandomValues(new Uint8Array(t));if(Sg&&typeof Sg.randomBytes=="function")return Uint8Array.from(Sg.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function _dt(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;t.setUint32(e+l,o,r),t.setUint32(e+c,a,r)}function Idt(t,e,n){return t&e^~t&n}function Rdt(t,e,n){return t&e^t&n^e&n}class Dme extends Lme{constructor(e,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=H4(this.buffer)}update(e){sN(this),e=CB(e),h0(e);const{view:n,buffer:r,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=H4(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){sN(this),Ndt(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,qx(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;_dt(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=H4(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,d[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Df=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Es=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),p2=BigInt(2**32-1),WZ=BigInt(32);function Odt(t,e=!1){return e?{h:Number(t&p2),l:Number(t>>WZ&p2)}:{h:Number(t>>WZ&p2)|0,l:Number(t&p2)|0}}function Mdt(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=Odt(t[s],e);[r[s],i[s]]=[o,a]}return[r,i]}const YZ=(t,e,n)=>t>>>n,JZ=(t,e,n)=>t<<32-n|e>>>n,Ag=(t,e,n)=>t>>>n|e<<32-n,Tg=(t,e,n)=>t<<32-n|e>>>n,m2=(t,e,n)=>t<<64-n|e>>>n-32,g2=(t,e,n)=>t>>>n-32|e<<64-n;function Lu(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Ldt=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),jdt=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Ddt=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Bdt=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Udt=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Fdt=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,$dt=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bf=new Uint32Array(64);class zdt extends Dme{constructor(e=32){super(64,e,8,!1),this.A=Df[0]|0,this.B=Df[1]|0,this.C=Df[2]|0,this.D=Df[3]|0,this.E=Df[4]|0,this.F=Df[5]|0,this.G=Df[6]|0,this.H=Df[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,n,r,i,s,o,a,l]}set(e,n,r,i,s,o,a,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)Bf[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const m=Bf[h-15],g=Bf[h-2],v=hc(m,7)^hc(m,18)^m>>>3,x=hc(g,17)^hc(g,19)^g>>>10;Bf[h]=x+Bf[h-7]+v+Bf[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:c,H:d}=this;for(let h=0;h<64;h++){const m=hc(a,6)^hc(a,11)^hc(a,25),g=d+m+Idt(a,l,c)+$dt[h]+Bf[h]|0,x=(hc(r,2)^hc(r,13)^hc(r,22))+Rdt(r,i,s)|0;d=c,c=l,l=a,a=o+g|0,o=s,s=i,i=r,r=g+x|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,d=d+this.H|0,this.set(r,i,s,o,a,l,c,d)}roundClean(){qx(Bf)}destroy(){this.set(0,0,0,0,0,0,0,0),qx(this.buffer)}}const Bme=Mdt(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Vdt=Bme[0],Hdt=Bme[1],Uf=new Uint32Array(80),Ff=new Uint32Array(80);class qdt extends Dme{constructor(e=64){super(128,e,16,!1),this.Ah=Es[0]|0,this.Al=Es[1]|0,this.Bh=Es[2]|0,this.Bl=Es[3]|0,this.Ch=Es[4]|0,this.Cl=Es[5]|0,this.Dh=Es[6]|0,this.Dl=Es[7]|0,this.Eh=Es[8]|0,this.El=Es[9]|0,this.Fh=Es[10]|0,this.Fl=Es[11]|0,this.Gh=Es[12]|0,this.Gl=Es[13]|0,this.Hh=Es[14]|0,this.Hl=Es[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:d,Fh:h,Fl:m,Gh:g,Gl:v,Hh:x,Hl:b}=this;return[e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b]}set(e,n,r,i,s,o,a,l,c,d,h,m,g,v,x,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=d|0,this.Fh=h|0,this.Fl=m|0,this.Gh=g|0,this.Gl=v|0,this.Hh=x|0,this.Hl=b|0}process(e,n){for(let N=0;N<16;N++,n+=4)Uf[N]=e.getUint32(n),Ff[N]=e.getUint32(n+=4);for(let N=16;N<80;N++){const O=Uf[N-15]|0,D=Ff[N-15]|0,_=Ag(O,D,1)^Ag(O,D,8)^YZ(O,D,7),F=Tg(O,D,1)^Tg(O,D,8)^JZ(O,D,7),z=Uf[N-2]|0,L=Ff[N-2]|0,$=Ag(z,L,19)^m2(z,L,61)^YZ(z,L,6),G=Tg(z,L,19)^g2(z,L,61)^JZ(z,L,6),V=Ddt(F,G,Ff[N-7],Ff[N-16]),U=Bdt(V,_,$,Uf[N-7],Uf[N-16]);Uf[N]=U|0,Ff[N]=V|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:d,Eh:h,El:m,Fh:g,Fl:v,Gh:x,Gl:b,Hh:w,Hl:k}=this;for(let N=0;N<80;N++){const O=Ag(h,m,14)^Ag(h,m,18)^m2(h,m,41),D=Tg(h,m,14)^Tg(h,m,18)^g2(h,m,41),_=h&g^~h&x,F=m&v^~m&b,z=Udt(k,D,F,Hdt[N],Ff[N]),L=Fdt(z,w,O,_,Vdt[N],Uf[N]),$=z|0,G=Ag(r,i,28)^m2(r,i,34)^m2(r,i,39),V=Tg(r,i,28)^g2(r,i,34)^g2(r,i,39),U=r&s^r&a^s&a,A=i&o^i&l^o&l;w=x|0,k=b|0,x=g|0,b=v|0,g=h|0,v=m|0,{h,l:m}=Lu(c|0,d|0,L|0,$|0),c=a|0,d=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const I=Ldt($,V,A);r=jdt(I,L,G,U),i=I|0}({h:r,l:i}=Lu(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Lu(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Lu(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:d}=Lu(this.Dh|0,this.Dl|0,c|0,d|0),{h,l:m}=Lu(this.Eh|0,this.El|0,h|0,m|0),{h:g,l:v}=Lu(this.Fh|0,this.Fl|0,g|0,v|0),{h:x,l:b}=Lu(this.Gh|0,this.Gl|0,x|0,b|0),{h:w,l:k}=Lu(this.Hh|0,this.Hl|0,w|0,k|0),this.set(r,i,s,o,a,l,c,d,h,m,g,v,x,b,w,k)}roundClean(){qx(Uf,Ff)}destroy(){qx(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ume=jme(()=>new zdt),Gdt=jme(()=>new qdt);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _B=BigInt(0),Dj=BigInt(1);function Zm(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function Hl(t,e,n=""){const r=zE(t),i=t==null?void 0:t.length,s=e!==void 0;if(!r||s&&i!==e){const o=n&&`"${n}" `,a=s?` of length ${e}`:"",l=r?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return t}function y2(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Fme(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_B:BigInt("0x"+t)}function NP(t){return Fme(Om(t))}function _w(t){return h0(t),Fme(Om(Uint8Array.from(t).reverse()))}function IB(t,e){return oN(t.toString(16).padStart(e*2,"0"))}function $me(t,e){return IB(t,e).reverse()}function Xr(t,e,n){let r;if(typeof e=="string")try{r=oN(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(zE(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function XZ(t){return Uint8Array.from(t)}const q4=t=>typeof t=="bigint"&&_B<=t;function Kdt(t,e,n){return q4(t)&&q4(e)&&q4(n)&&e<=t&&t<n}function Bj(t,e,n,r){if(!Kdt(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function zme(t){let e;for(e=0;t>_B;t>>=Dj,e+=1);return e}const VE=t=>(Dj<<BigInt(t))-Dj;function Wdt(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),i=g=>Uint8Array.of(g);let s=r(t),o=r(t),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},c=(...g)=>n(o,s,...g),d=(g=r(0))=>{o=c(i(0),g),s=c(),g.length!==0&&(o=c(i(1),g),s=c())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const v=[];for(;g<e;){s=c();const x=s.slice();v.push(x),g+=s.length}return Mc(...v)};return(g,v)=>{l(),d(g);let x;for(;!(x=v(h()));)d();return l(),x}}function HE(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(i,s,o){const a=t[i];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${l}`)}Object.entries(e).forEach(([i,s])=>r(i,s,!1)),Object.entries(n).forEach(([i,s])=>r(i,s,!0))}function aN(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Io=BigInt(0),vs=BigInt(1),Xp=BigInt(2),Vme=BigInt(3),Hme=BigInt(4),qme=BigInt(5),Ydt=BigInt(7),Gme=BigInt(8),Jdt=BigInt(9),Kme=BigInt(16);function vi(t,e){const n=t%e;return n>=Io?n:e+n}function Kr(t,e,n){let r=t;for(;e-- >Io;)r*=r,r%=n;return r}function QZ(t,e){if(t===Io)throw new Error("invert: expected non-zero number");if(e<=Io)throw new Error("invert: expected positive modulus, got "+e);let n=vi(t,e),r=e,i=Io,s=vs;for(;n!==Io;){const a=r/n,l=r%n,c=i-s*a;r=n,n=l,i=s,s=c}if(r!==vs)throw new Error("invert: does not exist");return vi(i,e)}function RB(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Wme(t,e){const n=(t.ORDER+vs)/Hme,r=t.pow(e,n);return RB(t,r,e),r}function Xdt(t,e){const n=(t.ORDER-qme)/Gme,r=t.mul(e,Xp),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,Xp),i),a=t.mul(s,t.sub(o,t.ONE));return RB(t,a,e),a}function Qdt(t){const e=p0(t),n=Yme(t),r=n(e,e.neg(e.ONE)),i=n(e,r),s=n(e,e.neg(r)),o=(t+Ydt)/Kme;return(a,l)=>{let c=a.pow(l,o),d=a.mul(c,r);const h=a.mul(c,i),m=a.mul(c,s),g=a.eql(a.sqr(d),l),v=a.eql(a.sqr(h),l);c=a.cmov(c,d,g),d=a.cmov(m,h,v);const x=a.eql(a.sqr(d),l),b=a.cmov(c,d,x);return RB(a,b,l),b}}function Yme(t){if(t<Vme)throw new Error("sqrt is not defined for small field");let e=t-vs,n=0;for(;e%Xp===Io;)e/=Xp,n++;let r=Xp;const i=p0(t);for(;ZZ(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Wme;let s=i.pow(r,e);const o=(e+vs)/Xp;return function(l,c){if(l.is0(c))return c;if(ZZ(l,c)!==1)throw new Error("Cannot find square root");let d=n,h=l.mul(l.ONE,s),m=l.pow(c,e),g=l.pow(c,o);for(;!l.eql(m,l.ONE);){if(l.is0(m))return l.ZERO;let v=1,x=l.sqr(m);for(;!l.eql(x,l.ONE);)if(v++,x=l.sqr(x),v===d)throw new Error("Cannot find square root");const b=vs<<BigInt(d-v-1),w=l.pow(h,b);d=v,h=l.sqr(w),m=l.mul(m,h),g=l.mul(g,w)}return g}}function Zdt(t){return t%Hme===Vme?Wme:t%Gme===qme?Xdt:t%Kme===Jdt?Qdt(t):Yme(t)}const eft=(t,e)=>(vi(t,e)&vs)===vs,tft=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nft(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=tft.reduce((r,i)=>(r[i]="function",r),e);return HE(t,n),t}function rft(t,e,n){if(n<Io)throw new Error("invalid exponent, negatives unsupported");if(n===Io)return t.ONE;if(n===vs)return e;let r=t.ONE,i=e;for(;n>Io;)n&vs&&(r=t.mul(r,i)),i=t.sqr(i),n>>=vs;return r}function Jme(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((o,a,l)=>t.is0(a)?o:(r[l]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,l)=>t.is0(a)?o:(r[l]=t.mul(o,r[l]),t.mul(o,a)),s),r}function ZZ(t,e){const n=(t.ORDER-vs)/Xp,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Xme(t,e){e!==void 0&&jj(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function p0(t,e,n=!1,r={}){if(t<=Io)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const m=e;m.BITS&&(i=m.BITS),m.sqrt&&(s=m.sqrt),typeof m.isLE=="boolean"&&(n=m.isLE),typeof m.modFromBytes=="boolean"&&(o=m.modFromBytes),a=m.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:l,nByteLength:c}=Xme(t,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const h=Object.freeze({ORDER:t,isLE:n,BITS:l,BYTES:c,MASK:VE(l),ZERO:Io,ONE:vs,allowedLengths:a,create:m=>vi(m,t),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return Io<=m&&m<t},is0:m=>m===Io,isValidNot0:m=>!h.is0(m)&&h.isValid(m),isOdd:m=>(m&vs)===vs,neg:m=>vi(-m,t),eql:(m,g)=>m===g,sqr:m=>vi(m*m,t),add:(m,g)=>vi(m+g,t),sub:(m,g)=>vi(m-g,t),mul:(m,g)=>vi(m*g,t),pow:(m,g)=>rft(h,m,g),div:(m,g)=>vi(m*QZ(g,t),t),sqrN:m=>m*m,addN:(m,g)=>m+g,subN:(m,g)=>m-g,mulN:(m,g)=>m*g,inv:m=>QZ(m,t),sqrt:s||(m=>(d||(d=Zdt(t)),d(h,m))),toBytes:m=>n?$me(m,c):IB(m,c),fromBytes:(m,g=!0)=>{if(a){if(!a.includes(m.length)||m.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+m.length);const x=new Uint8Array(c);x.set(m,n?0:x.length-m.length),m=x}if(m.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+m.length);let v=n?_w(m):NP(m);if(o&&(v=vi(v,t)),!g&&!h.isValid(v))throw new Error("invalid field element: outside of range 0..ORDER");return v},invertBatch:m=>Jme(h,m),cmov:(m,g,v)=>v?g:m});return Object.freeze(h)}function Qme(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Zme(t){const e=Qme(t);return e+Math.ceil(e/2)}function ift(t,e,n=!1){const r=t.length,i=Qme(e),s=Zme(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?_w(t):NP(t),a=vi(o,e-vs)+vs;return n?$me(a,i):IB(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gx=BigInt(0),Qp=BigInt(1);function lN(t,e){const n=e.negate();return t?n:e}function Zp(t,e){const n=Jme(t.Fp,e.map(r=>r.Z));return e.map((r,i)=>t.fromAffine(r.toAffine(n[i])))}function e0e(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function G4(t,e){e0e(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),i=2**t,s=VE(t),o=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:i,shiftBy:o}}function eee(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),l=t>>o;a>r&&(a-=s,l+=Qp);const c=e*r,d=c+Math.abs(a)-1,h=a===0,m=a<0,g=e%2!==0;return{nextN:l,offset:d,isZero:h,isNeg:m,isNegF:g,offsetF:c}}function sft(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function oft(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const K4=new WeakMap,t0e=new WeakMap;function W4(t){return t0e.get(t)||1}function tee(t){if(t!==Gx)throw new Error("invalid wNAF")}class n0e{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let i=e;for(;n>Gx;)n&Qp&&(r=r.add(i)),i=i.double(),n>>=Qp;return r}precomputeWindow(e,n){const{windows:r,windowSize:i}=G4(n,this.bits),s=[];let o=e,a=o;for(let l=0;l<r;l++){a=o,s.push(a);for(let c=1;c<i;c++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=G4(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:c,isZero:d,isNeg:h,isNegF:m,offsetF:g}=eee(r,a,o);r=l,d?s=s.add(lN(m,n[g])):i=i.add(lN(h,n[c]))}return tee(r),{p:i,f:s}}wNAFUnsafe(e,n,r,i=this.ZERO){const s=G4(e,this.bits);for(let o=0;o<s.windows&&r!==Gx;o++){const{nextN:a,offset:l,isZero:c,isNeg:d}=eee(r,o,s);if(r=a,!c){const h=n[l];i=i.add(d?h.negate():h)}}return tee(r),i}getPrecomputes(e,n,r){let i=K4.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(i=r(i)),K4.set(n,i))),i}cached(e,n,r){const i=W4(e);return this.wNAF(i,this.getPrecomputes(i,e,r),n)}unsafe(e,n,r,i){const s=W4(e);return s===1?this._unsafeLadder(e,n,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,r),n,i)}createCache(e,n){e0e(n,this.bits),t0e.set(e,n),K4.delete(e)}hasCache(e){return W4(e)!==1}}function aft(t,e,n,r){let i=e,s=t.ZERO,o=t.ZERO;for(;n>Gx||r>Gx;)n&Qp&&(s=s.add(i)),r&Qp&&(o=o.add(i)),i=i.double(),n>>=Qp,r>>=Qp;return{p1:s,p2:o}}function r0e(t,e,n,r){sft(n,t),oft(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=zme(BigInt(i));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=VE(l),d=new Array(Number(c)+1).fill(o),h=Math.floor((e.BITS-1)/l)*l;let m=o;for(let g=h;g>=0;g-=l){d.fill(o);for(let x=0;x<s;x++){const b=r[x],w=Number(b>>BigInt(g)&c);d[w]=d[w].add(n[x])}let v=o;for(let x=d.length-1,b=o;x>0;x--)b=b.add(d[x]),v=v.add(b);if(m=m.add(v),g!==0)for(let x=0;x<l;x++)m=m.double()}return m}function nee(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return nft(e),e}else return p0(t,{isLE:n})}function i0e(t,e,n={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const l of["p","n","h"]){const c=e[l];if(!(typeof c=="bigint"&&c>Gx))throw new Error(`CURVE.${l} must be positive bigint`)}const i=nee(e.p,n.Fp,r),s=nee(e.n,n.Fn,r),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const l of a)if(!i.isValid(e[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $f=BigInt(0),Fi=BigInt(1),Y4=BigInt(2),lft=BigInt(8);function cft(t,e,n,r){const i=t.sqr(n),s=t.sqr(r),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}function uft(t,e={}){const n=i0e("edwards",t,e,e.FpFnLE),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o}=s;HE(e,{},{uvRatio:"function"});const a=Y4<<BigInt(i.BYTES*8)-Fi,l=b=>r.create(b),c=e.uvRatio||((b,w)=>{try{return{isValid:!0,value:r.sqrt(r.div(b,w))}}catch{return{isValid:!1,value:$f}}});if(!cft(r,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function d(b,w,k=!1){const N=k?Fi:$f;return Bj("coordinate "+b,w,N,a),w}function h(b){if(!(b instanceof v))throw new Error("ExtendedPoint expected")}const m=aN((b,w)=>{const{X:k,Y:N,Z:O}=b,D=b.is0();w==null&&(w=D?lft:r.inv(O));const _=l(k*w),F=l(N*w),z=r.mul(O,w);if(D)return{x:$f,y:Fi};if(z!==Fi)throw new Error("invZ was invalid");return{x:_,y:F}}),g=aN(b=>{const{a:w,d:k}=s;if(b.is0())throw new Error("bad point: ZERO");const{X:N,Y:O,Z:D,T:_}=b,F=l(N*N),z=l(O*O),L=l(D*D),$=l(L*L),G=l(F*w),V=l(L*l(G+z)),U=l($+l(k*l(F*z)));if(V!==U)throw new Error("bad point: equation left != right (1)");const A=l(N*O),I=l(D*_);if(A!==I)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(w,k,N,O){this.X=d("x",w),this.Y=d("y",k),this.Z=d("z",N,!0),this.T=d("t",O),Object.freeze(this)}static CURVE(){return s}static fromAffine(w){if(w instanceof v)throw new Error("extended point not allowed");const{x:k,y:N}=w||{};return d("x",k),d("y",N),new v(k,N,Fi,l(k*N))}static fromBytes(w,k=!1){const N=r.BYTES,{a:O,d:D}=s;w=XZ(Hl(w,N,"point")),Zm(k,"zip215");const _=XZ(w),F=w[N-1];_[N-1]=F&-129;const z=_w(_),L=k?a:r.ORDER;Bj("point.y",z,$f,L);const $=l(z*z),G=l($-Fi),V=l(D*$-O);let{isValid:U,value:A}=c(G,V);if(!U)throw new Error("bad point: invalid y coordinate");const I=(A&Fi)===Fi,j=(F&128)!==0;if(!k&&A===$f&&j)throw new Error("bad point: x=0 and x_0=1");return j!==I&&(A=l(-A)),v.fromAffine({x:A,y:z})}static fromHex(w,k=!1){return v.fromBytes(Xr("point",w),k)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(w=8,k=!0){return x.createCache(this,w),k||this.multiply(Y4),this}assertValidity(){g(this)}equals(w){h(w);const{X:k,Y:N,Z:O}=this,{X:D,Y:_,Z:F}=w,z=l(k*F),L=l(D*O),$=l(N*F),G=l(_*O);return z===L&&$===G}is0(){return this.equals(v.ZERO)}negate(){return new v(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:w}=s,{X:k,Y:N,Z:O}=this,D=l(k*k),_=l(N*N),F=l(Y4*l(O*O)),z=l(w*D),L=k+N,$=l(l(L*L)-D-_),G=z+_,V=G-F,U=z-_,A=l($*V),I=l(G*U),j=l($*U),q=l(V*G);return new v(A,I,q,j)}add(w){h(w);const{a:k,d:N}=s,{X:O,Y:D,Z:_,T:F}=this,{X:z,Y:L,Z:$,T:G}=w,V=l(O*z),U=l(D*L),A=l(F*N*G),I=l(_*$),j=l((O+D)*(z+L)-V-U),q=I-A,K=I+A,te=l(U-k*V),Y=l(j*q),H=l(K*te),M=l(j*te),P=l(q*K);return new v(Y,H,P,M)}subtract(w){return this.add(w.negate())}multiply(w){if(!i.isValidNot0(w))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:k,f:N}=x.cached(this,w,O=>Zp(v,O));return Zp(v,[k,N])[0]}multiplyUnsafe(w,k=v.ZERO){if(!i.isValid(w))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return w===$f?v.ZERO:this.is0()||w===Fi?this:x.unsafe(this,w,N=>Zp(v,N),k)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return x.unsafe(this,s.n).is0()}toAffine(w){return m(this,w)}clearCofactor(){return o===Fi?this:this.multiplyUnsafe(o)}toBytes(){const{x:w,y:k}=this.toAffine(),N=r.toBytes(k);return N[N.length-1]|=w&Fi?128:0,N}toHex(){return Om(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(w){return Zp(v,w)}static msm(w,k){return r0e(v,i,w,k)}_setWindowSize(w){this.precompute(w)}toRawBytes(){return this.toBytes()}}v.BASE=new v(s.Gx,s.Gy,Fi,l(s.Gx*s.Gy)),v.ZERO=new v($f,Fi,Fi,$f),v.Fp=r,v.Fn=i;const x=new n0e(v,i.BITS);return v.BASE.precompute(8),v}function dft(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');HE(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:s,Fn:o}=t,a=n.randomBytes||PB,l=n.adjustScalarBytes||(L=>L),c=n.domain||((L,$,G)=>{if(Zm(G,"phflag"),$.length||G)throw new Error("Contexts/pre-hash are not supported");return L});function d(L){return o.create(_w(L))}function h(L){const $=N.secretKey;L=Xr("private key",L,$);const G=Xr("hashed private key",e(L),2*$),V=l(G.slice(0,$)),U=G.slice($,2*$),A=d(V);return{head:V,prefix:U,scalar:A}}function m(L){const{head:$,prefix:G,scalar:V}=h(L),U=i.multiply(V),A=U.toBytes();return{head:$,prefix:G,scalar:V,point:U,pointBytes:A}}function g(L){return m(L).pointBytes}function v(L=Uint8Array.of(),...$){const G=Mc(...$);return d(e(c(G,Xr("context",L),!!r)))}function x(L,$,G={}){L=Xr("message",L),r&&(L=r(L));const{prefix:V,scalar:U,pointBytes:A}=m($),I=v(G.context,V,L),j=i.multiply(I).toBytes(),q=v(G.context,j,A,L),K=o.create(I+q*U);if(!o.isValid(K))throw new Error("sign failed: invalid s");const te=Mc(j,o.toBytes(K));return Hl(te,N.signature,"result")}const b={zip215:!0};function w(L,$,G,V=b){const{context:U,zip215:A}=V,I=N.signature;L=Xr("signature",L,I),$=Xr("message",$),G=Xr("publicKey",G,N.publicKey),A!==void 0&&Zm(A,"zip215"),r&&($=r($));const j=I/2,q=L.subarray(0,j),K=_w(L.subarray(j,I));let te,Y,H;try{te=t.fromBytes(G,A),Y=t.fromBytes(q,A),H=i.multiplyUnsafe(K)}catch{return!1}if(!A&&te.isSmallOrder())return!1;const M=v(U,Y.toBytes(),te.toBytes(),$);return Y.add(te.multiplyUnsafe(M)).subtract(H).clearCofactor().is0()}const k=s.BYTES,N={secretKey:k,publicKey:k,signature:2*k,seed:k};function O(L=a(N.seed)){return Hl(L,N.seed,"seed")}function D(L){const $=z.randomSecretKey(L);return{secretKey:$,publicKey:g($)}}function _(L){return zE(L)&&L.length===o.BYTES}function F(L,$){try{return!!t.fromBytes(L,$)}catch{return!1}}const z={getExtendedPublicKey:m,randomSecretKey:O,isValidSecretKey:_,isValidPublicKey:F,toMontgomery(L){const{y:$}=t.fromBytes(L),G=N.publicKey,V=G===32;if(!V&&G!==57)throw new Error("only defined for 25519 and 448");const U=V?s.div(Fi+$,Fi-$):s.div($-Fi,$+Fi);return s.toBytes(U)},toMontgomerySecret(L){const $=N.secretKey;Hl(L,$);const G=e(L.subarray(0,$));return l(G).subarray(0,$)},randomPrivateKey:O,precompute(L=8,$=t.BASE){return $.precompute(L,!1)}};return Object.freeze({keygen:D,getPublicKey:g,sign:x,verify:w,utils:z,Point:t,lengths:N})}function fft(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=p0(e.n,t.nBitLength,!0),i={Fp:n,Fn:r,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,hash:t.hash,eddsaOpts:s}}function hft(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function pft(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:i}=fft(t),s=uft(e,n),o=dft(s,r,i);return hft(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mft=BigInt(1),ree=BigInt(2);BigInt(3);const gft=BigInt(5),yft=BigInt(8),OB=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),s0e={p:OB,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:yft,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function xft(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=OB,a=t*t%s*t%s,l=Kr(a,ree,s)*a%s,c=Kr(l,mft,s)*t%s,d=Kr(c,gft,s)*c%s,h=Kr(d,e,s)*d%s,m=Kr(h,n,s)*h%s,g=Kr(m,r,s)*m%s,v=Kr(g,i,s)*g%s,x=Kr(v,i,s)*g%s,b=Kr(x,e,s)*d%s;return{pow_p_5_8:Kr(b,ree,s)*t%s,b2:a}}function vft(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const iee=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function bft(t,e){const n=OB,r=vi(e*e*e,n),i=vi(r*r*e,n),s=xft(t*i).pow_p_5_8;let o=vi(t*r*s,n);const a=vi(e*o*o,n),l=o,c=vi(o*iee,n),d=a===t,h=a===vi(-t,n),m=a===vi(-t*iee,n);return d&&(o=l),(h||m)&&(o=c),eft(o,n)&&(o=vi(-o,n)),{isValid:d||h,value:o}}const wft=p0(s0e.p,{isLE:!0}),Eft={...s0e,Fp:wft,hash:Gdt,adjustScalarBytes:vft,uvRatio:bft},Rv=pft(Eft);var sT={exports:{}},J4={},see;function MB(){return see||(see=1,(function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},n={};n.byteLength=d,n.toByteArray=m,n.fromByteArray=x;for(var r=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;i[45]=62,i[95]=63;function c(k){var N=k.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=k.indexOf("=");O===-1&&(O=N);var D=O===N?0:4-O%4;return[O,D]}function d(k){var N=c(k),O=N[0],D=N[1];return(O+D)*3/4-D}function h(k,N,O){return(N+O)*3/4-O}function m(k){var N,O=c(k),D=O[0],_=O[1],F=new s(h(k,D,_)),z=0,L=_>0?D-4:D,$;for($=0;$<L;$+=4)N=i[k.charCodeAt($)]<<18|i[k.charCodeAt($+1)]<<12|i[k.charCodeAt($+2)]<<6|i[k.charCodeAt($+3)],F[z++]=N>>16&255,F[z++]=N>>8&255,F[z++]=N&255;return _===2&&(N=i[k.charCodeAt($)]<<2|i[k.charCodeAt($+1)]>>4,F[z++]=N&255),_===1&&(N=i[k.charCodeAt($)]<<10|i[k.charCodeAt($+1)]<<4|i[k.charCodeAt($+2)]>>2,F[z++]=N>>8&255,F[z++]=N&255),F}function g(k){return r[k>>18&63]+r[k>>12&63]+r[k>>6&63]+r[k&63]}function v(k,N,O){for(var D,_=[],F=N;F<O;F+=3)D=(k[F]<<16&16711680)+(k[F+1]<<8&65280)+(k[F+2]&255),_.push(g(D));return _.join("")}function x(k){for(var N,O=k.length,D=O%3,_=[],F=16383,z=0,L=O-D;z<L;z+=F)_.push(v(k,z,z+F>L?L:z+F));return D===1?(N=k[O-1],_.push(r[N>>2]+r[N<<4&63]+"==")):D===2&&(N=(k[O-2]<<8)+k[O-1],_.push(r[N>>10]+r[N>>4&63]+r[N<<2&63]+"=")),_.join("")}var b={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */b.read=function(k,N,O,D,_){var F,z,L=_*8-D-1,$=(1<<L)-1,G=$>>1,V=-7,U=O?_-1:0,A=O?-1:1,I=k[N+U];for(U+=A,F=I&(1<<-V)-1,I>>=-V,V+=L;V>0;F=F*256+k[N+U],U+=A,V-=8);for(z=F&(1<<-V)-1,F>>=-V,V+=D;V>0;z=z*256+k[N+U],U+=A,V-=8);if(F===0)F=1-G;else{if(F===$)return z?NaN:(I?-1:1)*(1/0);z=z+Math.pow(2,D),F=F-G}return(I?-1:1)*z*Math.pow(2,F-D)},b.write=function(k,N,O,D,_,F){var z,L,$,G=F*8-_-1,V=(1<<G)-1,U=V>>1,A=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=D?0:F-1,j=D?1:-1,q=N<0||N===0&&1/N<0?1:0;for(N=Math.abs(N),isNaN(N)||N===1/0?(L=isNaN(N)?1:0,z=V):(z=Math.floor(Math.log(N)/Math.LN2),N*($=Math.pow(2,-z))<1&&(z--,$*=2),z+U>=1?N+=A/$:N+=A*Math.pow(2,1-U),N*$>=2&&(z++,$/=2),z+U>=V?(L=0,z=V):z+U>=1?(L=(N*$-1)*Math.pow(2,_),z=z+U):(L=N*Math.pow(2,U-1)*Math.pow(2,_),z=0));_>=8;k[O+I]=L&255,I+=j,L/=256,_-=8);for(z=z<<_|L,G+=_;G>0;k[O+I]=z&255,I+=j,z/=256,G-=8);k[O+I-j]|=q*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(k){const N=n,O=b,D=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;k.Buffer=V,k.SlowBuffer=P,k.INSPECT_MAX_BYTES=50;const _=2147483647;k.kMaxLength=_;const{Uint8Array:F,ArrayBuffer:z,SharedArrayBuffer:L}=globalThis;V.TYPED_ARRAY_SUPPORT=$(),!V.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function $(){try{const ae=new F(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,F.prototype),Object.setPrototypeOf(ae,Q),ae.foo()===42}catch{return!1}}Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}}),Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}});function G(ae){if(ae>_)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const Q=new F(ae);return Object.setPrototypeOf(Q,V.prototype),Q}function V(ae,Q,ee){if(typeof ae=="number"){if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(ae)}return U(ae,Q,ee)}V.poolSize=8192;function U(ae,Q,ee){if(typeof ae=="string")return q(ae,Q);if(z.isView(ae))return te(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(rn(ae,z)||ae&&rn(ae.buffer,z)||typeof L<"u"&&(rn(ae,L)||ae&&rn(ae.buffer,L)))return Y(ae,Q,ee);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=ae.valueOf&&ae.valueOf();if(fe!=null&&fe!==ae)return V.from(fe,Q,ee);const _e=H(ae);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return V.from(ae[Symbol.toPrimitive]("string"),Q,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}V.from=function(ae,Q,ee){return U(ae,Q,ee)},Object.setPrototypeOf(V.prototype,F.prototype),Object.setPrototypeOf(V,F);function A(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function I(ae,Q,ee){return A(ae),ae<=0?G(ae):Q!==void 0?typeof ee=="string"?G(ae).fill(Q,ee):G(ae).fill(Q):G(ae)}V.alloc=function(ae,Q,ee){return I(ae,Q,ee)};function j(ae){return A(ae),G(ae<0?0:M(ae)|0)}V.allocUnsafe=function(ae){return j(ae)},V.allocUnsafeSlow=function(ae){return j(ae)};function q(ae,Q){if((typeof Q!="string"||Q==="")&&(Q="utf8"),!V.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);const ee=W(ae,Q)|0;let fe=G(ee);const _e=fe.write(ae,Q);return _e!==ee&&(fe=fe.slice(0,_e)),fe}function K(ae){const Q=ae.length<0?0:M(ae.length)|0,ee=G(Q);for(let fe=0;fe<Q;fe+=1)ee[fe]=ae[fe]&255;return ee}function te(ae){if(rn(ae,F)){const Q=new F(ae);return Y(Q.buffer,Q.byteOffset,Q.byteLength)}return K(ae)}function Y(ae,Q,ee){if(Q<0||ae.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<Q+(ee||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return Q===void 0&&ee===void 0?fe=new F(ae):ee===void 0?fe=new F(ae,Q):fe=new F(ae,Q,ee),Object.setPrototypeOf(fe,V.prototype),fe}function H(ae){if(V.isBuffer(ae)){const Q=M(ae.length)|0,ee=G(Q);return ee.length===0||ae.copy(ee,0,0,Q),ee}if(ae.length!==void 0)return typeof ae.length!="number"||et(ae.length)?G(0):K(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return K(ae.data)}function M(ae){if(ae>=_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return ae|0}function P(ae){return+ae!=ae&&(ae=0),V.alloc(+ae)}V.isBuffer=function(Q){return Q!=null&&Q._isBuffer===!0&&Q!==V.prototype},V.compare=function(Q,ee){if(rn(Q,F)&&(Q=V.from(Q,Q.offset,Q.byteLength)),rn(ee,F)&&(ee=V.from(ee,ee.offset,ee.byteLength)),!V.isBuffer(Q)||!V.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Q===ee)return 0;let fe=Q.length,_e=ee.length;for(let Re=0,Ue=Math.min(fe,_e);Re<Ue;++Re)if(Q[Re]!==ee[Re]){fe=Q[Re],_e=ee[Re];break}return fe<_e?-1:_e<fe?1:0},V.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},V.concat=function(Q,ee){if(!Array.isArray(Q))throw new TypeError('"list" argument must be an Array of Buffers');if(Q.length===0)return V.alloc(0);let fe;if(ee===void 0)for(ee=0,fe=0;fe<Q.length;++fe)ee+=Q[fe].length;const _e=V.allocUnsafe(ee);let Re=0;for(fe=0;fe<Q.length;++fe){let Ue=Q[fe];if(rn(Ue,F))Re+Ue.length>_e.length?(V.isBuffer(Ue)||(Ue=V.from(Ue)),Ue.copy(_e,Re)):F.prototype.set.call(_e,Ue,Re);else if(V.isBuffer(Ue))Ue.copy(_e,Re);else throw new TypeError('"list" argument must be an Array of Buffers');Re+=Ue.length}return _e};function W(ae,Q){if(V.isBuffer(ae))return ae.length;if(z.isView(ae)||rn(ae,z))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const ee=ae.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&ee===0)return 0;let _e=!1;for(;;)switch(Q){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return Xe(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee*2;case"hex":return ee>>>1;case"base64":return wt(ae).length;default:if(_e)return fe?-1:Xe(ae).length;Q=(""+Q).toLowerCase(),_e=!0}}V.byteLength=W;function X(ae,Q,ee){let fe=!1;if((Q===void 0||Q<0)&&(Q=0),Q>this.length||((ee===void 0||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0,Q>>>=0,ee<=Q))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return Ze(this,Q,ee);case"utf8":case"utf-8":return Ve(this,Q,ee);case"ascii":return We(this,Q,ee);case"latin1":case"binary":return Qe(this,Q,ee);case"base64":return je(this,Q,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,Q,ee);default:if(fe)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),fe=!0}}V.prototype._isBuffer=!0;function ie(ae,Q,ee){const fe=ae[Q];ae[Q]=ae[ee],ae[ee]=fe}V.prototype.swap16=function(){const Q=this.length;if(Q%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ee=0;ee<Q;ee+=2)ie(this,ee,ee+1);return this},V.prototype.swap32=function(){const Q=this.length;if(Q%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ee=0;ee<Q;ee+=4)ie(this,ee,ee+3),ie(this,ee+1,ee+2);return this},V.prototype.swap64=function(){const Q=this.length;if(Q%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ee=0;ee<Q;ee+=8)ie(this,ee,ee+7),ie(this,ee+1,ee+6),ie(this,ee+2,ee+5),ie(this,ee+3,ee+4);return this},V.prototype.toString=function(){const Q=this.length;return Q===0?"":arguments.length===0?Ve(this,0,Q):X.apply(this,arguments)},V.prototype.toLocaleString=V.prototype.toString,V.prototype.equals=function(Q){if(!V.isBuffer(Q))throw new TypeError("Argument must be a Buffer");return this===Q?!0:V.compare(this,Q)===0},V.prototype.inspect=function(){let Q="";const ee=k.INSPECT_MAX_BYTES;return Q=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(Q+=" ... "),"<Buffer "+Q+">"},D&&(V.prototype[D]=V.prototype.inspect),V.prototype.compare=function(Q,ee,fe,_e,Re){if(rn(Q,F)&&(Q=V.from(Q,Q.offset,Q.byteLength)),!V.isBuffer(Q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Q);if(ee===void 0&&(ee=0),fe===void 0&&(fe=Q?Q.length:0),_e===void 0&&(_e=0),Re===void 0&&(Re=this.length),ee<0||fe>Q.length||_e<0||Re>this.length)throw new RangeError("out of range index");if(_e>=Re&&ee>=fe)return 0;if(_e>=Re)return-1;if(ee>=fe)return 1;if(ee>>>=0,fe>>>=0,_e>>>=0,Re>>>=0,this===Q)return 0;let Ue=Re-_e,en=fe-ee;const Kt=Math.min(Ue,en),ut=this.slice(_e,Re),pn=Q.slice(ee,fe);for(let Ct=0;Ct<Kt;++Ct)if(ut[Ct]!==pn[Ct]){Ue=ut[Ct],en=pn[Ct];break}return Ue<en?-1:en<Ue?1:0};function oe(ae,Q,ee,fe,_e){if(ae.length===0)return-1;if(typeof ee=="string"?(fe=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),ee=+ee,et(ee)&&(ee=_e?0:ae.length-1),ee<0&&(ee=ae.length+ee),ee>=ae.length){if(_e)return-1;ee=ae.length-1}else if(ee<0)if(_e)ee=0;else return-1;if(typeof Q=="string"&&(Q=V.from(Q,fe)),V.isBuffer(Q))return Q.length===0?-1:Te(ae,Q,ee,fe,_e);if(typeof Q=="number")return Q=Q&255,typeof F.prototype.indexOf=="function"?_e?F.prototype.indexOf.call(ae,Q,ee):F.prototype.lastIndexOf.call(ae,Q,ee):Te(ae,[Q],ee,fe,_e);throw new TypeError("val must be string, number or Buffer")}function Te(ae,Q,ee,fe,_e){let Re=1,Ue=ae.length,en=Q.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(ae.length<2||Q.length<2)return-1;Re=2,Ue/=2,en/=2,ee/=2}function Kt(pn,Ct){return Re===1?pn[Ct]:pn.readUInt16BE(Ct*Re)}let ut;if(_e){let pn=-1;for(ut=ee;ut<Ue;ut++)if(Kt(ae,ut)===Kt(Q,pn===-1?0:ut-pn)){if(pn===-1&&(pn=ut),ut-pn+1===en)return pn*Re}else pn!==-1&&(ut-=ut-pn),pn=-1}else for(ee+en>Ue&&(ee=Ue-en),ut=ee;ut>=0;ut--){let pn=!0;for(let Ct=0;Ct<en;Ct++)if(Kt(ae,ut+Ct)!==Kt(Q,Ct)){pn=!1;break}if(pn)return ut}return-1}V.prototype.includes=function(Q,ee,fe){return this.indexOf(Q,ee,fe)!==-1},V.prototype.indexOf=function(Q,ee,fe){return oe(this,Q,ee,fe,!0)},V.prototype.lastIndexOf=function(Q,ee,fe){return oe(this,Q,ee,fe,!1)};function ce(ae,Q,ee,fe){ee=Number(ee)||0;const _e=ae.length-ee;fe?(fe=Number(fe),fe>_e&&(fe=_e)):fe=_e;const Re=Q.length;fe>Re/2&&(fe=Re/2);let Ue;for(Ue=0;Ue<fe;++Ue){const en=parseInt(Q.substr(Ue*2,2),16);if(et(en))return Ue;ae[ee+Ue]=en}return Ue}function de(ae,Q,ee,fe){return Rt(Xe(Q,ae.length-ee),ae,ee,fe)}function ke(ae,Q,ee,fe){return Rt(ot(Q),ae,ee,fe)}function ye(ae,Q,ee,fe){return Rt(wt(Q),ae,ee,fe)}function Ke(ae,Q,ee,fe){return Rt(Nt(Q,ae.length-ee),ae,ee,fe)}V.prototype.write=function(Q,ee,fe,_e){if(ee===void 0)_e="utf8",fe=this.length,ee=0;else if(fe===void 0&&typeof ee=="string")_e=ee,fe=this.length,ee=0;else if(isFinite(ee))ee=ee>>>0,isFinite(fe)?(fe=fe>>>0,_e===void 0&&(_e="utf8")):(_e=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Re=this.length-ee;if((fe===void 0||fe>Re)&&(fe=Re),Q.length>0&&(fe<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");let Ue=!1;for(;;)switch(_e){case"hex":return ce(this,Q,ee,fe);case"utf8":case"utf-8":return de(this,Q,ee,fe);case"ascii":case"latin1":case"binary":return ke(this,Q,ee,fe);case"base64":return ye(this,Q,ee,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ke(this,Q,ee,fe);default:if(Ue)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),Ue=!0}},V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function je(ae,Q,ee){return Q===0&&ee===ae.length?N.fromByteArray(ae):N.fromByteArray(ae.slice(Q,ee))}function Ve(ae,Q,ee){ee=Math.min(ae.length,ee);const fe=[];let _e=Q;for(;_e<ee;){const Re=ae[_e];let Ue=null,en=Re>239?4:Re>223?3:Re>191?2:1;if(_e+en<=ee){let Kt,ut,pn,Ct;switch(en){case 1:Re<128&&(Ue=Re);break;case 2:Kt=ae[_e+1],(Kt&192)===128&&(Ct=(Re&31)<<6|Kt&63,Ct>127&&(Ue=Ct));break;case 3:Kt=ae[_e+1],ut=ae[_e+2],(Kt&192)===128&&(ut&192)===128&&(Ct=(Re&15)<<12|(Kt&63)<<6|ut&63,Ct>2047&&(Ct<55296||Ct>57343)&&(Ue=Ct));break;case 4:Kt=ae[_e+1],ut=ae[_e+2],pn=ae[_e+3],(Kt&192)===128&&(ut&192)===128&&(pn&192)===128&&(Ct=(Re&15)<<18|(Kt&63)<<12|(ut&63)<<6|pn&63,Ct>65535&&Ct<1114112&&(Ue=Ct))}}Ue===null?(Ue=65533,en=1):Ue>65535&&(Ue-=65536,fe.push(Ue>>>10&1023|55296),Ue=56320|Ue&1023),fe.push(Ue),_e+=en}return Ne(fe)}const me=4096;function Ne(ae){const Q=ae.length;if(Q<=me)return String.fromCharCode.apply(String,ae);let ee="",fe=0;for(;fe<Q;)ee+=String.fromCharCode.apply(String,ae.slice(fe,fe+=me));return ee}function We(ae,Q,ee){let fe="";ee=Math.min(ae.length,ee);for(let _e=Q;_e<ee;++_e)fe+=String.fromCharCode(ae[_e]&127);return fe}function Qe(ae,Q,ee){let fe="";ee=Math.min(ae.length,ee);for(let _e=Q;_e<ee;++_e)fe+=String.fromCharCode(ae[_e]);return fe}function Ze(ae,Q,ee){const fe=ae.length;(!Q||Q<0)&&(Q=0),(!ee||ee<0||ee>fe)&&(ee=fe);let _e="";for(let Re=Q;Re<ee;++Re)_e+=Ht[ae[Re]];return _e}function at(ae,Q,ee){const fe=ae.slice(Q,ee);let _e="";for(let Re=0;Re<fe.length-1;Re+=2)_e+=String.fromCharCode(fe[Re]+fe[Re+1]*256);return _e}V.prototype.slice=function(Q,ee){const fe=this.length;Q=~~Q,ee=ee===void 0?fe:~~ee,Q<0?(Q+=fe,Q<0&&(Q=0)):Q>fe&&(Q=fe),ee<0?(ee+=fe,ee<0&&(ee=0)):ee>fe&&(ee=fe),ee<Q&&(ee=Q);const _e=this.subarray(Q,ee);return Object.setPrototypeOf(_e,V.prototype),_e};function St(ae,Q,ee){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+Q>ee)throw new RangeError("Trying to access beyond buffer length")}V.prototype.readUintLE=V.prototype.readUIntLE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||St(Q,ee,this.length);let _e=this[Q],Re=1,Ue=0;for(;++Ue<ee&&(Re*=256);)_e+=this[Q+Ue]*Re;return _e},V.prototype.readUintBE=V.prototype.readUIntBE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||St(Q,ee,this.length);let _e=this[Q+--ee],Re=1;for(;ee>0&&(Re*=256);)_e+=this[Q+--ee]*Re;return _e},V.prototype.readUint8=V.prototype.readUInt8=function(Q,ee){return Q=Q>>>0,ee||St(Q,1,this.length),this[Q]},V.prototype.readUint16LE=V.prototype.readUInt16LE=function(Q,ee){return Q=Q>>>0,ee||St(Q,2,this.length),this[Q]|this[Q+1]<<8},V.prototype.readUint16BE=V.prototype.readUInt16BE=function(Q,ee){return Q=Q>>>0,ee||St(Q,2,this.length),this[Q]<<8|this[Q+1]},V.prototype.readUint32LE=V.prototype.readUInt32LE=function(Q,ee){return Q=Q>>>0,ee||St(Q,4,this.length),(this[Q]|this[Q+1]<<8|this[Q+2]<<16)+this[Q+3]*16777216},V.prototype.readUint32BE=V.prototype.readUInt32BE=function(Q,ee){return Q=Q>>>0,ee||St(Q,4,this.length),this[Q]*16777216+(this[Q+1]<<16|this[Q+2]<<8|this[Q+3])},V.prototype.readBigUInt64LE=Hn(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&he(Q,this.length-8);const _e=ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24,Re=this[++Q]+this[++Q]*2**8+this[++Q]*2**16+fe*2**24;return BigInt(_e)+(BigInt(Re)<<BigInt(32))}),V.prototype.readBigUInt64BE=Hn(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&he(Q,this.length-8);const _e=ee*2**24+this[++Q]*2**16+this[++Q]*2**8+this[++Q],Re=this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+fe;return(BigInt(_e)<<BigInt(32))+BigInt(Re)}),V.prototype.readIntLE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||St(Q,ee,this.length);let _e=this[Q],Re=1,Ue=0;for(;++Ue<ee&&(Re*=256);)_e+=this[Q+Ue]*Re;return Re*=128,_e>=Re&&(_e-=Math.pow(2,8*ee)),_e},V.prototype.readIntBE=function(Q,ee,fe){Q=Q>>>0,ee=ee>>>0,fe||St(Q,ee,this.length);let _e=ee,Re=1,Ue=this[Q+--_e];for(;_e>0&&(Re*=256);)Ue+=this[Q+--_e]*Re;return Re*=128,Ue>=Re&&(Ue-=Math.pow(2,8*ee)),Ue},V.prototype.readInt8=function(Q,ee){return Q=Q>>>0,ee||St(Q,1,this.length),this[Q]&128?(255-this[Q]+1)*-1:this[Q]},V.prototype.readInt16LE=function(Q,ee){Q=Q>>>0,ee||St(Q,2,this.length);const fe=this[Q]|this[Q+1]<<8;return fe&32768?fe|4294901760:fe},V.prototype.readInt16BE=function(Q,ee){Q=Q>>>0,ee||St(Q,2,this.length);const fe=this[Q+1]|this[Q]<<8;return fe&32768?fe|4294901760:fe},V.prototype.readInt32LE=function(Q,ee){return Q=Q>>>0,ee||St(Q,4,this.length),this[Q]|this[Q+1]<<8|this[Q+2]<<16|this[Q+3]<<24},V.prototype.readInt32BE=function(Q,ee){return Q=Q>>>0,ee||St(Q,4,this.length),this[Q]<<24|this[Q+1]<<16|this[Q+2]<<8|this[Q+3]},V.prototype.readBigInt64LE=Hn(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&he(Q,this.length-8);const _e=this[Q+4]+this[Q+5]*2**8+this[Q+6]*2**16+(fe<<24);return(BigInt(_e)<<BigInt(32))+BigInt(ee+this[++Q]*2**8+this[++Q]*2**16+this[++Q]*2**24)}),V.prototype.readBigInt64BE=Hn(function(Q){Q=Q>>>0,Se(Q,"offset");const ee=this[Q],fe=this[Q+7];(ee===void 0||fe===void 0)&&he(Q,this.length-8);const _e=(ee<<24)+this[++Q]*2**16+this[++Q]*2**8+this[++Q];return(BigInt(_e)<<BigInt(32))+BigInt(this[++Q]*2**24+this[++Q]*2**16+this[++Q]*2**8+fe)}),V.prototype.readFloatLE=function(Q,ee){return Q=Q>>>0,ee||St(Q,4,this.length),O.read(this,Q,!0,23,4)},V.prototype.readFloatBE=function(Q,ee){return Q=Q>>>0,ee||St(Q,4,this.length),O.read(this,Q,!1,23,4)},V.prototype.readDoubleLE=function(Q,ee){return Q=Q>>>0,ee||St(Q,8,this.length),O.read(this,Q,!0,52,8)},V.prototype.readDoubleBE=function(Q,ee){return Q=Q>>>0,ee||St(Q,8,this.length),O.read(this,Q,!1,52,8)};function qe(ae,Q,ee,fe,_e,Re){if(!V.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(Q>_e||Q<Re)throw new RangeError('"value" argument is out of bounds');if(ee+fe>ae.length)throw new RangeError("Index out of range")}V.prototype.writeUintLE=V.prototype.writeUIntLE=function(Q,ee,fe,_e){if(Q=+Q,ee=ee>>>0,fe=fe>>>0,!_e){const en=Math.pow(2,8*fe)-1;qe(this,Q,ee,fe,en,0)}let Re=1,Ue=0;for(this[ee]=Q&255;++Ue<fe&&(Re*=256);)this[ee+Ue]=Q/Re&255;return ee+fe},V.prototype.writeUintBE=V.prototype.writeUIntBE=function(Q,ee,fe,_e){if(Q=+Q,ee=ee>>>0,fe=fe>>>0,!_e){const en=Math.pow(2,8*fe)-1;qe(this,Q,ee,fe,en,0)}let Re=fe-1,Ue=1;for(this[ee+Re]=Q&255;--Re>=0&&(Ue*=256);)this[ee+Re]=Q/Ue&255;return ee+fe},V.prototype.writeUint8=V.prototype.writeUInt8=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,1,255,0),this[ee]=Q&255,ee+1},V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,2,65535,0),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,2,65535,0),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,4,4294967295,0),this[ee+3]=Q>>>24,this[ee+2]=Q>>>16,this[ee+1]=Q>>>8,this[ee]=Q&255,ee+4},V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,4,4294967295,0),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4};function it(ae,Q,ee,fe,_e){ue(Q,fe,_e,ae,ee,7);let Re=Number(Q&BigInt(4294967295));ae[ee++]=Re,Re=Re>>8,ae[ee++]=Re,Re=Re>>8,ae[ee++]=Re,Re=Re>>8,ae[ee++]=Re;let Ue=Number(Q>>BigInt(32)&BigInt(4294967295));return ae[ee++]=Ue,Ue=Ue>>8,ae[ee++]=Ue,Ue=Ue>>8,ae[ee++]=Ue,Ue=Ue>>8,ae[ee++]=Ue,ee}function Lt(ae,Q,ee,fe,_e){ue(Q,fe,_e,ae,ee,7);let Re=Number(Q&BigInt(4294967295));ae[ee+7]=Re,Re=Re>>8,ae[ee+6]=Re,Re=Re>>8,ae[ee+5]=Re,Re=Re>>8,ae[ee+4]=Re;let Ue=Number(Q>>BigInt(32)&BigInt(4294967295));return ae[ee+3]=Ue,Ue=Ue>>8,ae[ee+2]=Ue,Ue=Ue>>8,ae[ee+1]=Ue,Ue=Ue>>8,ae[ee]=Ue,ee+8}V.prototype.writeBigUInt64LE=Hn(function(Q,ee=0){return it(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),V.prototype.writeBigUInt64BE=Hn(function(Q,ee=0){return Lt(this,Q,ee,BigInt(0),BigInt("0xffffffffffffffff"))}),V.prototype.writeIntLE=function(Q,ee,fe,_e){if(Q=+Q,ee=ee>>>0,!_e){const Kt=Math.pow(2,8*fe-1);qe(this,Q,ee,fe,Kt-1,-Kt)}let Re=0,Ue=1,en=0;for(this[ee]=Q&255;++Re<fe&&(Ue*=256);)Q<0&&en===0&&this[ee+Re-1]!==0&&(en=1),this[ee+Re]=(Q/Ue>>0)-en&255;return ee+fe},V.prototype.writeIntBE=function(Q,ee,fe,_e){if(Q=+Q,ee=ee>>>0,!_e){const Kt=Math.pow(2,8*fe-1);qe(this,Q,ee,fe,Kt-1,-Kt)}let Re=fe-1,Ue=1,en=0;for(this[ee+Re]=Q&255;--Re>=0&&(Ue*=256);)Q<0&&en===0&&this[ee+Re+1]!==0&&(en=1),this[ee+Re]=(Q/Ue>>0)-en&255;return ee+fe},V.prototype.writeInt8=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,1,127,-128),Q<0&&(Q=255+Q+1),this[ee]=Q&255,ee+1},V.prototype.writeInt16LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,2,32767,-32768),this[ee]=Q&255,this[ee+1]=Q>>>8,ee+2},V.prototype.writeInt16BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,2,32767,-32768),this[ee]=Q>>>8,this[ee+1]=Q&255,ee+2},V.prototype.writeInt32LE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,4,2147483647,-2147483648),this[ee]=Q&255,this[ee+1]=Q>>>8,this[ee+2]=Q>>>16,this[ee+3]=Q>>>24,ee+4},V.prototype.writeInt32BE=function(Q,ee,fe){return Q=+Q,ee=ee>>>0,fe||qe(this,Q,ee,4,2147483647,-2147483648),Q<0&&(Q=4294967295+Q+1),this[ee]=Q>>>24,this[ee+1]=Q>>>16,this[ee+2]=Q>>>8,this[ee+3]=Q&255,ee+4},V.prototype.writeBigInt64LE=Hn(function(Q,ee=0){return it(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),V.prototype.writeBigInt64BE=Hn(function(Q,ee=0){return Lt(this,Q,ee,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(ae,Q,ee,fe,_e,Re){if(ee+fe>ae.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function Ge(ae,Q,ee,fe,_e){return Q=+Q,ee=ee>>>0,_e||Ie(ae,Q,ee,4),O.write(ae,Q,ee,fe,23,4),ee+4}V.prototype.writeFloatLE=function(Q,ee,fe){return Ge(this,Q,ee,!0,fe)},V.prototype.writeFloatBE=function(Q,ee,fe){return Ge(this,Q,ee,!1,fe)};function Tt(ae,Q,ee,fe,_e){return Q=+Q,ee=ee>>>0,_e||Ie(ae,Q,ee,8),O.write(ae,Q,ee,fe,52,8),ee+8}V.prototype.writeDoubleLE=function(Q,ee,fe){return Tt(this,Q,ee,!0,fe)},V.prototype.writeDoubleBE=function(Q,ee,fe){return Tt(this,Q,ee,!1,fe)},V.prototype.copy=function(Q,ee,fe,_e){if(!V.isBuffer(Q))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!_e&&_e!==0&&(_e=this.length),ee>=Q.length&&(ee=Q.length),ee||(ee=0),_e>0&&_e<fe&&(_e=fe),_e===fe||Q.length===0||this.length===0)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),Q.length-ee<_e-fe&&(_e=Q.length-ee+fe);const Re=_e-fe;return this===Q&&typeof F.prototype.copyWithin=="function"?this.copyWithin(ee,fe,_e):F.prototype.set.call(Q,this.subarray(fe,_e),ee),Re},V.prototype.fill=function(Q,ee,fe,_e){if(typeof Q=="string"){if(typeof ee=="string"?(_e=ee,ee=0,fe=this.length):typeof fe=="string"&&(_e=fe,fe=this.length),_e!==void 0&&typeof _e!="string")throw new TypeError("encoding must be a string");if(typeof _e=="string"&&!V.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e);if(Q.length===1){const Ue=Q.charCodeAt(0);(_e==="utf8"&&Ue<128||_e==="latin1")&&(Q=Ue)}}else typeof Q=="number"?Q=Q&255:typeof Q=="boolean"&&(Q=Number(Q));if(ee<0||this.length<ee||this.length<fe)throw new RangeError("Out of range index");if(fe<=ee)return this;ee=ee>>>0,fe=fe===void 0?this.length:fe>>>0,Q||(Q=0);let Re;if(typeof Q=="number")for(Re=ee;Re<fe;++Re)this[Re]=Q;else{const Ue=V.isBuffer(Q)?Q:V.from(Q,_e),en=Ue.length;if(en===0)throw new TypeError('The value "'+Q+'" is invalid for argument "value"');for(Re=0;Re<fe-ee;++Re)this[Re+ee]=Ue[Re%en]}return this};const xt={};function se(ae,Q,ee){xt[ae]=class extends ee{constructor(){super(),Object.defineProperty(this,"message",{value:Q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(_e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_e,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}se("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),se("ERR_INVALID_ARG_TYPE",function(ae,Q){return`The "${ae}" argument must be of type number. Received type ${typeof Q}`},TypeError),se("ERR_OUT_OF_RANGE",function(ae,Q,ee){let fe=`The value of "${ae}" is out of range.`,_e=ee;return Number.isInteger(ee)&&Math.abs(ee)>2**32?_e=J(String(ee)):typeof ee=="bigint"&&(_e=String(ee),(ee>BigInt(2)**BigInt(32)||ee<-(BigInt(2)**BigInt(32)))&&(_e=J(_e)),_e+="n"),fe+=` It must be ${Q}. Received ${_e}`,fe},RangeError);function J(ae){let Q="",ee=ae.length;const fe=ae[0]==="-"?1:0;for(;ee>=fe+4;ee-=3)Q=`_${ae.slice(ee-3,ee)}${Q}`;return`${ae.slice(0,ee)}${Q}`}function Z(ae,Q,ee){Se(Q,"offset"),(ae[Q]===void 0||ae[Q+ee]===void 0)&&he(Q,ae.length-(ee+1))}function ue(ae,Q,ee,fe,_e,Re){if(ae>ee||ae<Q){const Ue=typeof Q=="bigint"?"n":"";let en;throw Q===0||Q===BigInt(0)?en=`>= 0${Ue} and < 2${Ue} ** ${(Re+1)*8}${Ue}`:en=`>= -(2${Ue} ** ${(Re+1)*8-1}${Ue}) and < 2 ** ${(Re+1)*8-1}${Ue}`,new xt.ERR_OUT_OF_RANGE("value",en,ae)}Z(fe,_e,Re)}function Se(ae,Q){if(typeof ae!="number")throw new xt.ERR_INVALID_ARG_TYPE(Q,"number",ae)}function he(ae,Q,ee){throw Math.floor(ae)!==ae?(Se(ae,ee),new xt.ERR_OUT_OF_RANGE("offset","an integer",ae)):Q<0?new xt.ERR_BUFFER_OUT_OF_BOUNDS:new xt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Q}`,ae)}const pe=/[^+/0-9A-Za-z-_]/g;function Je(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(pe,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function Xe(ae,Q){Q=Q||1/0;let ee;const fe=ae.length;let _e=null;const Re=[];for(let Ue=0;Ue<fe;++Ue){if(ee=ae.charCodeAt(Ue),ee>55295&&ee<57344){if(!_e){if(ee>56319){(Q-=3)>-1&&Re.push(239,191,189);continue}else if(Ue+1===fe){(Q-=3)>-1&&Re.push(239,191,189);continue}_e=ee;continue}if(ee<56320){(Q-=3)>-1&&Re.push(239,191,189),_e=ee;continue}ee=(_e-55296<<10|ee-56320)+65536}else _e&&(Q-=3)>-1&&Re.push(239,191,189);if(_e=null,ee<128){if((Q-=1)<0)break;Re.push(ee)}else if(ee<2048){if((Q-=2)<0)break;Re.push(ee>>6|192,ee&63|128)}else if(ee<65536){if((Q-=3)<0)break;Re.push(ee>>12|224,ee>>6&63|128,ee&63|128)}else if(ee<1114112){if((Q-=4)<0)break;Re.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,ee&63|128)}else throw new Error("Invalid code point")}return Re}function ot(ae){const Q=[];for(let ee=0;ee<ae.length;++ee)Q.push(ae.charCodeAt(ee)&255);return Q}function Nt(ae,Q){let ee,fe,_e;const Re=[];for(let Ue=0;Ue<ae.length&&!((Q-=2)<0);++Ue)ee=ae.charCodeAt(Ue),fe=ee>>8,_e=ee%256,Re.push(_e),Re.push(fe);return Re}function wt(ae){return N.toByteArray(Je(ae))}function Rt(ae,Q,ee,fe){let _e;for(_e=0;_e<fe&&!(_e+ee>=Q.length||_e>=ae.length);++_e)Q[_e+ee]=ae[_e];return _e}function rn(ae,Q){return ae instanceof Q||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===Q.name}function et(ae){return ae!==ae}const Ht=(function(){const ae="0123456789abcdef",Q=new Array(256);for(let ee=0;ee<16;++ee){const fe=ee*16;for(let _e=0;_e<16;++_e)Q[fe+_e]=ae[ee]+ae[_e]}return Q})();function Hn(ae){return typeof BigInt>"u"?sn:ae}function sn(){throw new Error("BigInt not supported")}})(e);const w=e.Buffer;t.Blob=e.Blob,t.BlobOptions=e.BlobOptions,t.Buffer=e.Buffer,t.File=e.File,t.FileOptions=e.FileOptions,t.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,t.SlowBuffer=e.SlowBuffer,t.TranscodeEncoding=e.TranscodeEncoding,t.atob=e.atob,t.btoa=e.btoa,t.constants=e.constants,t.default=w,t.isAscii=e.isAscii,t.isUtf8=e.isUtf8,t.kMaxLength=e.kMaxLength,t.kStringMaxLength=e.kStringMaxLength,t.resolveObjectURL=e.resolveObjectURL,t.transcode=e.transcode})(J4)),J4}var Sft=sT.exports,oee;function o0e(){return oee||(oee=1,(function(t){(function(e,n){function r(U,A){if(!U)throw new Error(A||"Assertion failed")}function i(U,A){U.super_=A;var I=function(){};I.prototype=A.prototype,U.prototype=new I,U.prototype.constructor=U}function s(U,A,I){if(s.isBN(U))return U;this.negative=0,this.words=null,this.length=0,this.red=null,U!==null&&((A==="le"||A==="be")&&(I=A,A=10),this._init(U||0,A||10,I||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=MB().Buffer}catch{}s.isBN=function(A){return A instanceof s?!0:A!==null&&typeof A=="object"&&A.constructor.wordSize===s.wordSize&&Array.isArray(A.words)},s.max=function(A,I){return A.cmp(I)>0?A:I},s.min=function(A,I){return A.cmp(I)<0?A:I},s.prototype._init=function(A,I,j){if(typeof A=="number")return this._initNumber(A,I,j);if(typeof A=="object")return this._initArray(A,I,j);I==="hex"&&(I=16),r(I===(I|0)&&I>=2&&I<=36),A=A.toString().replace(/\s+/g,"");var q=0;A[0]==="-"&&(q++,this.negative=1),q<A.length&&(I===16?this._parseHex(A,q,j):(this._parseBase(A,I,q),j==="le"&&this._initArray(this.toArray(),I,j)))},s.prototype._initNumber=function(A,I,j){A<0&&(this.negative=1,A=-A),A<67108864?(this.words=[A&67108863],this.length=1):A<4503599627370496?(this.words=[A&67108863,A/67108864&67108863],this.length=2):(r(A<9007199254740992),this.words=[A&67108863,A/67108864&67108863,1],this.length=3),j==="le"&&this._initArray(this.toArray(),I,j)},s.prototype._initArray=function(A,I,j){if(r(typeof A.length=="number"),A.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(A.length/3),this.words=new Array(this.length);for(var q=0;q<this.length;q++)this.words[q]=0;var K,te,Y=0;if(j==="be")for(q=A.length-1,K=0;q>=0;q-=3)te=A[q]|A[q-1]<<8|A[q-2]<<16,this.words[K]|=te<<Y&67108863,this.words[K+1]=te>>>26-Y&67108863,Y+=24,Y>=26&&(Y-=26,K++);else if(j==="le")for(q=0,K=0;q<A.length;q+=3)te=A[q]|A[q+1]<<8|A[q+2]<<16,this.words[K]|=te<<Y&67108863,this.words[K+1]=te>>>26-Y&67108863,Y+=24,Y>=26&&(Y-=26,K++);return this._strip()};function a(U,A){var I=U.charCodeAt(A);if(I>=48&&I<=57)return I-48;if(I>=65&&I<=70)return I-55;if(I>=97&&I<=102)return I-87;r(!1,"Invalid character in "+U)}function l(U,A,I){var j=a(U,I);return I-1>=A&&(j|=a(U,I-1)<<4),j}s.prototype._parseHex=function(A,I,j){this.length=Math.ceil((A.length-I)/6),this.words=new Array(this.length);for(var q=0;q<this.length;q++)this.words[q]=0;var K=0,te=0,Y;if(j==="be")for(q=A.length-1;q>=I;q-=2)Y=l(A,I,q)<<K,this.words[te]|=Y&67108863,K>=18?(K-=18,te+=1,this.words[te]|=Y>>>26):K+=8;else{var H=A.length-I;for(q=H%2===0?I+1:I;q<A.length;q+=2)Y=l(A,I,q)<<K,this.words[te]|=Y&67108863,K>=18?(K-=18,te+=1,this.words[te]|=Y>>>26):K+=8}this._strip()};function c(U,A,I,j){for(var q=0,K=0,te=Math.min(U.length,I),Y=A;Y<te;Y++){var H=U.charCodeAt(Y)-48;q*=j,H>=49?K=H-49+10:H>=17?K=H-17+10:K=H,r(H>=0&&K<j,"Invalid character"),q+=K}return q}s.prototype._parseBase=function(A,I,j){this.words=[0],this.length=1;for(var q=0,K=1;K<=67108863;K*=I)q++;q--,K=K/I|0;for(var te=A.length-j,Y=te%q,H=Math.min(te,te-Y)+j,M=0,P=j;P<H;P+=q)M=c(A,P,P+q,I),this.imuln(K),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(Y!==0){var W=1;for(M=c(A,P,A.length,I),P=0;P<Y;P++)W*=I;this.imuln(W),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this._strip()},s.prototype.copy=function(A){A.words=new Array(this.length);for(var I=0;I<this.length;I++)A.words[I]=this.words[I];A.length=this.length,A.negative=this.negative,A.red=this.red};function d(U,A){U.words=A.words,U.length=A.length,U.negative=A.negative,U.red=A.red}if(s.prototype._move=function(A){d(A,this)},s.prototype.clone=function(){var A=new s(null);return this.copy(A),A},s.prototype._expand=function(A){for(;this.length<A;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(A,I){A=A||10,I=I|0||1;var j;if(A===16||A==="hex"){j="";for(var q=0,K=0,te=0;te<this.length;te++){var Y=this.words[te],H=((Y<<q|K)&16777215).toString(16);K=Y>>>24-q&16777215,q+=2,q>=26&&(q-=26,te--),K!==0||te!==this.length-1?j=m[6-H.length]+H+j:j=H+j}for(K!==0&&(j=K.toString(16)+j);j.length%I!==0;)j="0"+j;return this.negative!==0&&(j="-"+j),j}if(A===(A|0)&&A>=2&&A<=36){var M=g[A],P=v[A];j="";var W=this.clone();for(W.negative=0;!W.isZero();){var X=W.modrn(P).toString(A);W=W.idivn(P),W.isZero()?j=X+j:j=m[M-X.length]+X+j}for(this.isZero()&&(j="0"+j);j.length%I!==0;)j="0"+j;return this.negative!==0&&(j="-"+j),j}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var A=this.words[0];return this.length===2?A+=this.words[1]*67108864:this.length===3&&this.words[2]===1?A+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-A:A},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(A,I){return this.toArrayLike(o,A,I)}),s.prototype.toArray=function(A,I){return this.toArrayLike(Array,A,I)};var x=function(A,I){return A.allocUnsafe?A.allocUnsafe(I):new A(I)};s.prototype.toArrayLike=function(A,I,j){this._strip();var q=this.byteLength(),K=j||Math.max(1,q);r(q<=K,"byte array longer than desired length"),r(K>0,"Requested array length <= 0");var te=x(A,K),Y=I==="le"?"LE":"BE";return this["_toArrayLike"+Y](te,q),te},s.prototype._toArrayLikeLE=function(A,I){for(var j=0,q=0,K=0,te=0;K<this.length;K++){var Y=this.words[K]<<te|q;A[j++]=Y&255,j<A.length&&(A[j++]=Y>>8&255),j<A.length&&(A[j++]=Y>>16&255),te===6?(j<A.length&&(A[j++]=Y>>24&255),q=0,te=0):(q=Y>>>24,te+=2)}if(j<A.length)for(A[j++]=q;j<A.length;)A[j++]=0},s.prototype._toArrayLikeBE=function(A,I){for(var j=A.length-1,q=0,K=0,te=0;K<this.length;K++){var Y=this.words[K]<<te|q;A[j--]=Y&255,j>=0&&(A[j--]=Y>>8&255),j>=0&&(A[j--]=Y>>16&255),te===6?(j>=0&&(A[j--]=Y>>24&255),q=0,te=0):(q=Y>>>24,te+=2)}if(j>=0)for(A[j--]=q;j>=0;)A[j--]=0},Math.clz32?s.prototype._countBits=function(A){return 32-Math.clz32(A)}:s.prototype._countBits=function(A){var I=A,j=0;return I>=4096&&(j+=13,I>>>=13),I>=64&&(j+=7,I>>>=7),I>=8&&(j+=4,I>>>=4),I>=2&&(j+=2,I>>>=2),j+I},s.prototype._zeroBits=function(A){if(A===0)return 26;var I=A,j=0;return(I&8191)===0&&(j+=13,I>>>=13),(I&127)===0&&(j+=7,I>>>=7),(I&15)===0&&(j+=4,I>>>=4),(I&3)===0&&(j+=2,I>>>=2),(I&1)===0&&j++,j},s.prototype.bitLength=function(){var A=this.words[this.length-1],I=this._countBits(A);return(this.length-1)*26+I};function b(U){for(var A=new Array(U.bitLength()),I=0;I<A.length;I++){var j=I/26|0,q=I%26;A[I]=U.words[j]>>>q&1}return A}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=0,I=0;I<this.length;I++){var j=this._zeroBits(this.words[I]);if(A+=j,j!==26)break}return A},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(A){return this.negative!==0?this.abs().inotn(A).iaddn(1):this.clone()},s.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(A){for(;this.length<A.length;)this.words[this.length++]=0;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]|A.words[I];return this._strip()},s.prototype.ior=function(A){return r((this.negative|A.negative)===0),this.iuor(A)},s.prototype.or=function(A){return this.length>A.length?this.clone().ior(A):A.clone().ior(this)},s.prototype.uor=function(A){return this.length>A.length?this.clone().iuor(A):A.clone().iuor(this)},s.prototype.iuand=function(A){var I;this.length>A.length?I=A:I=this;for(var j=0;j<I.length;j++)this.words[j]=this.words[j]&A.words[j];return this.length=I.length,this._strip()},s.prototype.iand=function(A){return r((this.negative|A.negative)===0),this.iuand(A)},s.prototype.and=function(A){return this.length>A.length?this.clone().iand(A):A.clone().iand(this)},s.prototype.uand=function(A){return this.length>A.length?this.clone().iuand(A):A.clone().iuand(this)},s.prototype.iuxor=function(A){var I,j;this.length>A.length?(I=this,j=A):(I=A,j=this);for(var q=0;q<j.length;q++)this.words[q]=I.words[q]^j.words[q];if(this!==I)for(;q<I.length;q++)this.words[q]=I.words[q];return this.length=I.length,this._strip()},s.prototype.ixor=function(A){return r((this.negative|A.negative)===0),this.iuxor(A)},s.prototype.xor=function(A){return this.length>A.length?this.clone().ixor(A):A.clone().ixor(this)},s.prototype.uxor=function(A){return this.length>A.length?this.clone().iuxor(A):A.clone().iuxor(this)},s.prototype.inotn=function(A){r(typeof A=="number"&&A>=0);var I=Math.ceil(A/26)|0,j=A%26;this._expand(I),j>0&&I--;for(var q=0;q<I;q++)this.words[q]=~this.words[q]&67108863;return j>0&&(this.words[q]=~this.words[q]&67108863>>26-j),this._strip()},s.prototype.notn=function(A){return this.clone().inotn(A)},s.prototype.setn=function(A,I){r(typeof A=="number"&&A>=0);var j=A/26|0,q=A%26;return this._expand(j+1),I?this.words[j]=this.words[j]|1<<q:this.words[j]=this.words[j]&~(1<<q),this._strip()},s.prototype.iadd=function(A){var I;if(this.negative!==0&&A.negative===0)return this.negative=0,I=this.isub(A),this.negative^=1,this._normSign();if(this.negative===0&&A.negative!==0)return A.negative=0,I=this.isub(A),A.negative=1,I._normSign();var j,q;this.length>A.length?(j=this,q=A):(j=A,q=this);for(var K=0,te=0;te<q.length;te++)I=(j.words[te]|0)+(q.words[te]|0)+K,this.words[te]=I&67108863,K=I>>>26;for(;K!==0&&te<j.length;te++)I=(j.words[te]|0)+K,this.words[te]=I&67108863,K=I>>>26;if(this.length=j.length,K!==0)this.words[this.length]=K,this.length++;else if(j!==this)for(;te<j.length;te++)this.words[te]=j.words[te];return this},s.prototype.add=function(A){var I;return A.negative!==0&&this.negative===0?(A.negative=0,I=this.sub(A),A.negative^=1,I):A.negative===0&&this.negative!==0?(this.negative=0,I=A.sub(this),this.negative=1,I):this.length>A.length?this.clone().iadd(A):A.clone().iadd(this)},s.prototype.isub=function(A){if(A.negative!==0){A.negative=0;var I=this.iadd(A);return A.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(A),this.negative=1,this._normSign();var j=this.cmp(A);if(j===0)return this.negative=0,this.length=1,this.words[0]=0,this;var q,K;j>0?(q=this,K=A):(q=A,K=this);for(var te=0,Y=0;Y<K.length;Y++)I=(q.words[Y]|0)-(K.words[Y]|0)+te,te=I>>26,this.words[Y]=I&67108863;for(;te!==0&&Y<q.length;Y++)I=(q.words[Y]|0)+te,te=I>>26,this.words[Y]=I&67108863;if(te===0&&Y<q.length&&q!==this)for(;Y<q.length;Y++)this.words[Y]=q.words[Y];return this.length=Math.max(this.length,Y),q!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(A){return this.clone().isub(A)};function w(U,A,I){I.negative=A.negative^U.negative;var j=U.length+A.length|0;I.length=j,j=j-1|0;var q=U.words[0]|0,K=A.words[0]|0,te=q*K,Y=te&67108863,H=te/67108864|0;I.words[0]=Y;for(var M=1;M<j;M++){for(var P=H>>>26,W=H&67108863,X=Math.min(M,A.length-1),ie=Math.max(0,M-U.length+1);ie<=X;ie++){var oe=M-ie|0;q=U.words[oe]|0,K=A.words[ie]|0,te=q*K+W,P+=te/67108864|0,W=te&67108863}I.words[M]=W|0,H=P|0}return H!==0?I.words[M]=H|0:I.length--,I._strip()}var k=function(A,I,j){var q=A.words,K=I.words,te=j.words,Y=0,H,M,P,W=q[0]|0,X=W&8191,ie=W>>>13,oe=q[1]|0,Te=oe&8191,ce=oe>>>13,de=q[2]|0,ke=de&8191,ye=de>>>13,Ke=q[3]|0,je=Ke&8191,Ve=Ke>>>13,me=q[4]|0,Ne=me&8191,We=me>>>13,Qe=q[5]|0,Ze=Qe&8191,at=Qe>>>13,St=q[6]|0,qe=St&8191,it=St>>>13,Lt=q[7]|0,Ie=Lt&8191,Ge=Lt>>>13,Tt=q[8]|0,xt=Tt&8191,se=Tt>>>13,J=q[9]|0,Z=J&8191,ue=J>>>13,Se=K[0]|0,he=Se&8191,pe=Se>>>13,Je=K[1]|0,Xe=Je&8191,ot=Je>>>13,Nt=K[2]|0,wt=Nt&8191,Rt=Nt>>>13,rn=K[3]|0,et=rn&8191,Ht=rn>>>13,Hn=K[4]|0,sn=Hn&8191,ae=Hn>>>13,Q=K[5]|0,ee=Q&8191,fe=Q>>>13,_e=K[6]|0,Re=_e&8191,Ue=_e>>>13,en=K[7]|0,Kt=en&8191,ut=en>>>13,pn=K[8]|0,Ct=pn&8191,wn=pn>>>13,pa=K[9]|0,or=pa&8191,br=pa>>>13;j.negative=A.negative^I.negative,j.length=19,H=Math.imul(X,he),M=Math.imul(X,pe),M=M+Math.imul(ie,he)|0,P=Math.imul(ie,pe);var tf=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(tf>>>26)|0,tf&=67108863,H=Math.imul(Te,he),M=Math.imul(Te,pe),M=M+Math.imul(ce,he)|0,P=Math.imul(ce,pe),H=H+Math.imul(X,Xe)|0,M=M+Math.imul(X,ot)|0,M=M+Math.imul(ie,Xe)|0,P=P+Math.imul(ie,ot)|0;var nf=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(nf>>>26)|0,nf&=67108863,H=Math.imul(ke,he),M=Math.imul(ke,pe),M=M+Math.imul(ye,he)|0,P=Math.imul(ye,pe),H=H+Math.imul(Te,Xe)|0,M=M+Math.imul(Te,ot)|0,M=M+Math.imul(ce,Xe)|0,P=P+Math.imul(ce,ot)|0,H=H+Math.imul(X,wt)|0,M=M+Math.imul(X,Rt)|0,M=M+Math.imul(ie,wt)|0,P=P+Math.imul(ie,Rt)|0;var fl=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(fl>>>26)|0,fl&=67108863,H=Math.imul(je,he),M=Math.imul(je,pe),M=M+Math.imul(Ve,he)|0,P=Math.imul(Ve,pe),H=H+Math.imul(ke,Xe)|0,M=M+Math.imul(ke,ot)|0,M=M+Math.imul(ye,Xe)|0,P=P+Math.imul(ye,ot)|0,H=H+Math.imul(Te,wt)|0,M=M+Math.imul(Te,Rt)|0,M=M+Math.imul(ce,wt)|0,P=P+Math.imul(ce,Rt)|0,H=H+Math.imul(X,et)|0,M=M+Math.imul(X,Ht)|0,M=M+Math.imul(ie,et)|0,P=P+Math.imul(ie,Ht)|0;var du=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(du>>>26)|0,du&=67108863,H=Math.imul(Ne,he),M=Math.imul(Ne,pe),M=M+Math.imul(We,he)|0,P=Math.imul(We,pe),H=H+Math.imul(je,Xe)|0,M=M+Math.imul(je,ot)|0,M=M+Math.imul(Ve,Xe)|0,P=P+Math.imul(Ve,ot)|0,H=H+Math.imul(ke,wt)|0,M=M+Math.imul(ke,Rt)|0,M=M+Math.imul(ye,wt)|0,P=P+Math.imul(ye,Rt)|0,H=H+Math.imul(Te,et)|0,M=M+Math.imul(Te,Ht)|0,M=M+Math.imul(ce,et)|0,P=P+Math.imul(ce,Ht)|0,H=H+Math.imul(X,sn)|0,M=M+Math.imul(X,ae)|0,M=M+Math.imul(ie,sn)|0,P=P+Math.imul(ie,ae)|0;var ma=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(ma>>>26)|0,ma&=67108863,H=Math.imul(Ze,he),M=Math.imul(Ze,pe),M=M+Math.imul(at,he)|0,P=Math.imul(at,pe),H=H+Math.imul(Ne,Xe)|0,M=M+Math.imul(Ne,ot)|0,M=M+Math.imul(We,Xe)|0,P=P+Math.imul(We,ot)|0,H=H+Math.imul(je,wt)|0,M=M+Math.imul(je,Rt)|0,M=M+Math.imul(Ve,wt)|0,P=P+Math.imul(Ve,Rt)|0,H=H+Math.imul(ke,et)|0,M=M+Math.imul(ke,Ht)|0,M=M+Math.imul(ye,et)|0,P=P+Math.imul(ye,Ht)|0,H=H+Math.imul(Te,sn)|0,M=M+Math.imul(Te,ae)|0,M=M+Math.imul(ce,sn)|0,P=P+Math.imul(ce,ae)|0,H=H+Math.imul(X,ee)|0,M=M+Math.imul(X,fe)|0,M=M+Math.imul(ie,ee)|0,P=P+Math.imul(ie,fe)|0;var ga=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(ga>>>26)|0,ga&=67108863,H=Math.imul(qe,he),M=Math.imul(qe,pe),M=M+Math.imul(it,he)|0,P=Math.imul(it,pe),H=H+Math.imul(Ze,Xe)|0,M=M+Math.imul(Ze,ot)|0,M=M+Math.imul(at,Xe)|0,P=P+Math.imul(at,ot)|0,H=H+Math.imul(Ne,wt)|0,M=M+Math.imul(Ne,Rt)|0,M=M+Math.imul(We,wt)|0,P=P+Math.imul(We,Rt)|0,H=H+Math.imul(je,et)|0,M=M+Math.imul(je,Ht)|0,M=M+Math.imul(Ve,et)|0,P=P+Math.imul(Ve,Ht)|0,H=H+Math.imul(ke,sn)|0,M=M+Math.imul(ke,ae)|0,M=M+Math.imul(ye,sn)|0,P=P+Math.imul(ye,ae)|0,H=H+Math.imul(Te,ee)|0,M=M+Math.imul(Te,fe)|0,M=M+Math.imul(ce,ee)|0,P=P+Math.imul(ce,fe)|0,H=H+Math.imul(X,Re)|0,M=M+Math.imul(X,Ue)|0,M=M+Math.imul(ie,Re)|0,P=P+Math.imul(ie,Ue)|0;var hl=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(hl>>>26)|0,hl&=67108863,H=Math.imul(Ie,he),M=Math.imul(Ie,pe),M=M+Math.imul(Ge,he)|0,P=Math.imul(Ge,pe),H=H+Math.imul(qe,Xe)|0,M=M+Math.imul(qe,ot)|0,M=M+Math.imul(it,Xe)|0,P=P+Math.imul(it,ot)|0,H=H+Math.imul(Ze,wt)|0,M=M+Math.imul(Ze,Rt)|0,M=M+Math.imul(at,wt)|0,P=P+Math.imul(at,Rt)|0,H=H+Math.imul(Ne,et)|0,M=M+Math.imul(Ne,Ht)|0,M=M+Math.imul(We,et)|0,P=P+Math.imul(We,Ht)|0,H=H+Math.imul(je,sn)|0,M=M+Math.imul(je,ae)|0,M=M+Math.imul(Ve,sn)|0,P=P+Math.imul(Ve,ae)|0,H=H+Math.imul(ke,ee)|0,M=M+Math.imul(ke,fe)|0,M=M+Math.imul(ye,ee)|0,P=P+Math.imul(ye,fe)|0,H=H+Math.imul(Te,Re)|0,M=M+Math.imul(Te,Ue)|0,M=M+Math.imul(ce,Re)|0,P=P+Math.imul(ce,Ue)|0,H=H+Math.imul(X,Kt)|0,M=M+Math.imul(X,ut)|0,M=M+Math.imul(ie,Kt)|0,P=P+Math.imul(ie,ut)|0;var Bo=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Bo>>>26)|0,Bo&=67108863,H=Math.imul(xt,he),M=Math.imul(xt,pe),M=M+Math.imul(se,he)|0,P=Math.imul(se,pe),H=H+Math.imul(Ie,Xe)|0,M=M+Math.imul(Ie,ot)|0,M=M+Math.imul(Ge,Xe)|0,P=P+Math.imul(Ge,ot)|0,H=H+Math.imul(qe,wt)|0,M=M+Math.imul(qe,Rt)|0,M=M+Math.imul(it,wt)|0,P=P+Math.imul(it,Rt)|0,H=H+Math.imul(Ze,et)|0,M=M+Math.imul(Ze,Ht)|0,M=M+Math.imul(at,et)|0,P=P+Math.imul(at,Ht)|0,H=H+Math.imul(Ne,sn)|0,M=M+Math.imul(Ne,ae)|0,M=M+Math.imul(We,sn)|0,P=P+Math.imul(We,ae)|0,H=H+Math.imul(je,ee)|0,M=M+Math.imul(je,fe)|0,M=M+Math.imul(Ve,ee)|0,P=P+Math.imul(Ve,fe)|0,H=H+Math.imul(ke,Re)|0,M=M+Math.imul(ke,Ue)|0,M=M+Math.imul(ye,Re)|0,P=P+Math.imul(ye,Ue)|0,H=H+Math.imul(Te,Kt)|0,M=M+Math.imul(Te,ut)|0,M=M+Math.imul(ce,Kt)|0,P=P+Math.imul(ce,ut)|0,H=H+Math.imul(X,Ct)|0,M=M+Math.imul(X,wn)|0,M=M+Math.imul(ie,Ct)|0,P=P+Math.imul(ie,wn)|0;var Nr=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,H=Math.imul(Z,he),M=Math.imul(Z,pe),M=M+Math.imul(ue,he)|0,P=Math.imul(ue,pe),H=H+Math.imul(xt,Xe)|0,M=M+Math.imul(xt,ot)|0,M=M+Math.imul(se,Xe)|0,P=P+Math.imul(se,ot)|0,H=H+Math.imul(Ie,wt)|0,M=M+Math.imul(Ie,Rt)|0,M=M+Math.imul(Ge,wt)|0,P=P+Math.imul(Ge,Rt)|0,H=H+Math.imul(qe,et)|0,M=M+Math.imul(qe,Ht)|0,M=M+Math.imul(it,et)|0,P=P+Math.imul(it,Ht)|0,H=H+Math.imul(Ze,sn)|0,M=M+Math.imul(Ze,ae)|0,M=M+Math.imul(at,sn)|0,P=P+Math.imul(at,ae)|0,H=H+Math.imul(Ne,ee)|0,M=M+Math.imul(Ne,fe)|0,M=M+Math.imul(We,ee)|0,P=P+Math.imul(We,fe)|0,H=H+Math.imul(je,Re)|0,M=M+Math.imul(je,Ue)|0,M=M+Math.imul(Ve,Re)|0,P=P+Math.imul(Ve,Ue)|0,H=H+Math.imul(ke,Kt)|0,M=M+Math.imul(ke,ut)|0,M=M+Math.imul(ye,Kt)|0,P=P+Math.imul(ye,ut)|0,H=H+Math.imul(Te,Ct)|0,M=M+Math.imul(Te,wn)|0,M=M+Math.imul(ce,Ct)|0,P=P+Math.imul(ce,wn)|0,H=H+Math.imul(X,or)|0,M=M+Math.imul(X,br)|0,M=M+Math.imul(ie,or)|0,P=P+Math.imul(ie,br)|0;var rf=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(rf>>>26)|0,rf&=67108863,H=Math.imul(Z,Xe),M=Math.imul(Z,ot),M=M+Math.imul(ue,Xe)|0,P=Math.imul(ue,ot),H=H+Math.imul(xt,wt)|0,M=M+Math.imul(xt,Rt)|0,M=M+Math.imul(se,wt)|0,P=P+Math.imul(se,Rt)|0,H=H+Math.imul(Ie,et)|0,M=M+Math.imul(Ie,Ht)|0,M=M+Math.imul(Ge,et)|0,P=P+Math.imul(Ge,Ht)|0,H=H+Math.imul(qe,sn)|0,M=M+Math.imul(qe,ae)|0,M=M+Math.imul(it,sn)|0,P=P+Math.imul(it,ae)|0,H=H+Math.imul(Ze,ee)|0,M=M+Math.imul(Ze,fe)|0,M=M+Math.imul(at,ee)|0,P=P+Math.imul(at,fe)|0,H=H+Math.imul(Ne,Re)|0,M=M+Math.imul(Ne,Ue)|0,M=M+Math.imul(We,Re)|0,P=P+Math.imul(We,Ue)|0,H=H+Math.imul(je,Kt)|0,M=M+Math.imul(je,ut)|0,M=M+Math.imul(Ve,Kt)|0,P=P+Math.imul(Ve,ut)|0,H=H+Math.imul(ke,Ct)|0,M=M+Math.imul(ke,wn)|0,M=M+Math.imul(ye,Ct)|0,P=P+Math.imul(ye,wn)|0,H=H+Math.imul(Te,or)|0,M=M+Math.imul(Te,br)|0,M=M+Math.imul(ce,or)|0,P=P+Math.imul(ce,br)|0;var fu=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(fu>>>26)|0,fu&=67108863,H=Math.imul(Z,wt),M=Math.imul(Z,Rt),M=M+Math.imul(ue,wt)|0,P=Math.imul(ue,Rt),H=H+Math.imul(xt,et)|0,M=M+Math.imul(xt,Ht)|0,M=M+Math.imul(se,et)|0,P=P+Math.imul(se,Ht)|0,H=H+Math.imul(Ie,sn)|0,M=M+Math.imul(Ie,ae)|0,M=M+Math.imul(Ge,sn)|0,P=P+Math.imul(Ge,ae)|0,H=H+Math.imul(qe,ee)|0,M=M+Math.imul(qe,fe)|0,M=M+Math.imul(it,ee)|0,P=P+Math.imul(it,fe)|0,H=H+Math.imul(Ze,Re)|0,M=M+Math.imul(Ze,Ue)|0,M=M+Math.imul(at,Re)|0,P=P+Math.imul(at,Ue)|0,H=H+Math.imul(Ne,Kt)|0,M=M+Math.imul(Ne,ut)|0,M=M+Math.imul(We,Kt)|0,P=P+Math.imul(We,ut)|0,H=H+Math.imul(je,Ct)|0,M=M+Math.imul(je,wn)|0,M=M+Math.imul(Ve,Ct)|0,P=P+Math.imul(Ve,wn)|0,H=H+Math.imul(ke,or)|0,M=M+Math.imul(ke,br)|0,M=M+Math.imul(ye,or)|0,P=P+Math.imul(ye,br)|0;var Gs=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(Gs>>>26)|0,Gs&=67108863,H=Math.imul(Z,et),M=Math.imul(Z,Ht),M=M+Math.imul(ue,et)|0,P=Math.imul(ue,Ht),H=H+Math.imul(xt,sn)|0,M=M+Math.imul(xt,ae)|0,M=M+Math.imul(se,sn)|0,P=P+Math.imul(se,ae)|0,H=H+Math.imul(Ie,ee)|0,M=M+Math.imul(Ie,fe)|0,M=M+Math.imul(Ge,ee)|0,P=P+Math.imul(Ge,fe)|0,H=H+Math.imul(qe,Re)|0,M=M+Math.imul(qe,Ue)|0,M=M+Math.imul(it,Re)|0,P=P+Math.imul(it,Ue)|0,H=H+Math.imul(Ze,Kt)|0,M=M+Math.imul(Ze,ut)|0,M=M+Math.imul(at,Kt)|0,P=P+Math.imul(at,ut)|0,H=H+Math.imul(Ne,Ct)|0,M=M+Math.imul(Ne,wn)|0,M=M+Math.imul(We,Ct)|0,P=P+Math.imul(We,wn)|0,H=H+Math.imul(je,or)|0,M=M+Math.imul(je,br)|0,M=M+Math.imul(Ve,or)|0,P=P+Math.imul(Ve,br)|0;var mo=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(mo>>>26)|0,mo&=67108863,H=Math.imul(Z,sn),M=Math.imul(Z,ae),M=M+Math.imul(ue,sn)|0,P=Math.imul(ue,ae),H=H+Math.imul(xt,ee)|0,M=M+Math.imul(xt,fe)|0,M=M+Math.imul(se,ee)|0,P=P+Math.imul(se,fe)|0,H=H+Math.imul(Ie,Re)|0,M=M+Math.imul(Ie,Ue)|0,M=M+Math.imul(Ge,Re)|0,P=P+Math.imul(Ge,Ue)|0,H=H+Math.imul(qe,Kt)|0,M=M+Math.imul(qe,ut)|0,M=M+Math.imul(it,Kt)|0,P=P+Math.imul(it,ut)|0,H=H+Math.imul(Ze,Ct)|0,M=M+Math.imul(Ze,wn)|0,M=M+Math.imul(at,Ct)|0,P=P+Math.imul(at,wn)|0,H=H+Math.imul(Ne,or)|0,M=M+Math.imul(Ne,br)|0,M=M+Math.imul(We,or)|0,P=P+Math.imul(We,br)|0;var sf=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(sf>>>26)|0,sf&=67108863,H=Math.imul(Z,ee),M=Math.imul(Z,fe),M=M+Math.imul(ue,ee)|0,P=Math.imul(ue,fe),H=H+Math.imul(xt,Re)|0,M=M+Math.imul(xt,Ue)|0,M=M+Math.imul(se,Re)|0,P=P+Math.imul(se,Ue)|0,H=H+Math.imul(Ie,Kt)|0,M=M+Math.imul(Ie,ut)|0,M=M+Math.imul(Ge,Kt)|0,P=P+Math.imul(Ge,ut)|0,H=H+Math.imul(qe,Ct)|0,M=M+Math.imul(qe,wn)|0,M=M+Math.imul(it,Ct)|0,P=P+Math.imul(it,wn)|0,H=H+Math.imul(Ze,or)|0,M=M+Math.imul(Ze,br)|0,M=M+Math.imul(at,or)|0,P=P+Math.imul(at,br)|0;var hu=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(hu>>>26)|0,hu&=67108863,H=Math.imul(Z,Re),M=Math.imul(Z,Ue),M=M+Math.imul(ue,Re)|0,P=Math.imul(ue,Ue),H=H+Math.imul(xt,Kt)|0,M=M+Math.imul(xt,ut)|0,M=M+Math.imul(se,Kt)|0,P=P+Math.imul(se,ut)|0,H=H+Math.imul(Ie,Ct)|0,M=M+Math.imul(Ie,wn)|0,M=M+Math.imul(Ge,Ct)|0,P=P+Math.imul(Ge,wn)|0,H=H+Math.imul(qe,or)|0,M=M+Math.imul(qe,br)|0,M=M+Math.imul(it,or)|0,P=P+Math.imul(it,br)|0;var pu=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(pu>>>26)|0,pu&=67108863,H=Math.imul(Z,Kt),M=Math.imul(Z,ut),M=M+Math.imul(ue,Kt)|0,P=Math.imul(ue,ut),H=H+Math.imul(xt,Ct)|0,M=M+Math.imul(xt,wn)|0,M=M+Math.imul(se,Ct)|0,P=P+Math.imul(se,wn)|0,H=H+Math.imul(Ie,or)|0,M=M+Math.imul(Ie,br)|0,M=M+Math.imul(Ge,or)|0,P=P+Math.imul(Ge,br)|0;var of=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(of>>>26)|0,of&=67108863,H=Math.imul(Z,Ct),M=Math.imul(Z,wn),M=M+Math.imul(ue,Ct)|0,P=Math.imul(ue,wn),H=H+Math.imul(xt,or)|0,M=M+Math.imul(xt,br)|0,M=M+Math.imul(se,or)|0,P=P+Math.imul(se,br)|0;var pl=(Y+H|0)+((M&8191)<<13)|0;Y=(P+(M>>>13)|0)+(pl>>>26)|0,pl&=67108863,H=Math.imul(Z,or),M=Math.imul(Z,br),M=M+Math.imul(ue,or)|0,P=Math.imul(ue,br);var ml=(Y+H|0)+((M&8191)<<13)|0;return Y=(P+(M>>>13)|0)+(ml>>>26)|0,ml&=67108863,te[0]=tf,te[1]=nf,te[2]=fl,te[3]=du,te[4]=ma,te[5]=ga,te[6]=hl,te[7]=Bo,te[8]=Nr,te[9]=rf,te[10]=fu,te[11]=Gs,te[12]=mo,te[13]=sf,te[14]=hu,te[15]=pu,te[16]=of,te[17]=pl,te[18]=ml,Y!==0&&(te[19]=Y,j.length++),j};Math.imul||(k=w);function N(U,A,I){I.negative=A.negative^U.negative,I.length=U.length+A.length;for(var j=0,q=0,K=0;K<I.length-1;K++){var te=q;q=0;for(var Y=j&67108863,H=Math.min(K,A.length-1),M=Math.max(0,K-U.length+1);M<=H;M++){var P=K-M,W=U.words[P]|0,X=A.words[M]|0,ie=W*X,oe=ie&67108863;te=te+(ie/67108864|0)|0,oe=oe+Y|0,Y=oe&67108863,te=te+(oe>>>26)|0,q+=te>>>26,te&=67108863}I.words[K]=Y,j=te,te=q}return j!==0?I.words[K]=j:I.length--,I._strip()}function O(U,A,I){return N(U,A,I)}s.prototype.mulTo=function(A,I){var j,q=this.length+A.length;return this.length===10&&A.length===10?j=k(this,A,I):q<63?j=w(this,A,I):q<1024?j=N(this,A,I):j=O(this,A,I),j},s.prototype.mul=function(A){var I=new s(null);return I.words=new Array(this.length+A.length),this.mulTo(A,I)},s.prototype.mulf=function(A){var I=new s(null);return I.words=new Array(this.length+A.length),O(this,A,I)},s.prototype.imul=function(A){return this.clone().mulTo(A,this)},s.prototype.imuln=function(A){var I=A<0;I&&(A=-A),r(typeof A=="number"),r(A<67108864);for(var j=0,q=0;q<this.length;q++){var K=(this.words[q]|0)*A,te=(K&67108863)+(j&67108863);j>>=26,j+=K/67108864|0,j+=te>>>26,this.words[q]=te&67108863}return j!==0&&(this.words[q]=j,this.length++),this.length=A===0?1:this.length,I?this.ineg():this},s.prototype.muln=function(A){return this.clone().imuln(A)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(A){var I=b(A);if(I.length===0)return new s(1);for(var j=this,q=0;q<I.length&&I[q]===0;q++,j=j.sqr());if(++q<I.length)for(var K=j.sqr();q<I.length;q++,K=K.sqr())I[q]!==0&&(j=j.mul(K));return j},s.prototype.iushln=function(A){r(typeof A=="number"&&A>=0);var I=A%26,j=(A-I)/26,q=67108863>>>26-I<<26-I,K;if(I!==0){var te=0;for(K=0;K<this.length;K++){var Y=this.words[K]&q,H=(this.words[K]|0)-Y<<I;this.words[K]=H|te,te=Y>>>26-I}te&&(this.words[K]=te,this.length++)}if(j!==0){for(K=this.length-1;K>=0;K--)this.words[K+j]=this.words[K];for(K=0;K<j;K++)this.words[K]=0;this.length+=j}return this._strip()},s.prototype.ishln=function(A){return r(this.negative===0),this.iushln(A)},s.prototype.iushrn=function(A,I,j){r(typeof A=="number"&&A>=0);var q;I?q=(I-I%26)/26:q=0;var K=A%26,te=Math.min((A-K)/26,this.length),Y=67108863^67108863>>>K<<K,H=j;if(q-=te,q=Math.max(0,q),H){for(var M=0;M<te;M++)H.words[M]=this.words[M];H.length=te}if(te!==0)if(this.length>te)for(this.length-=te,M=0;M<this.length;M++)this.words[M]=this.words[M+te];else this.words[0]=0,this.length=1;var P=0;for(M=this.length-1;M>=0&&(P!==0||M>=q);M--){var W=this.words[M]|0;this.words[M]=P<<26-K|W>>>K,P=W&Y}return H&&P!==0&&(H.words[H.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(A,I,j){return r(this.negative===0),this.iushrn(A,I,j)},s.prototype.shln=function(A){return this.clone().ishln(A)},s.prototype.ushln=function(A){return this.clone().iushln(A)},s.prototype.shrn=function(A){return this.clone().ishrn(A)},s.prototype.ushrn=function(A){return this.clone().iushrn(A)},s.prototype.testn=function(A){r(typeof A=="number"&&A>=0);var I=A%26,j=(A-I)/26,q=1<<I;if(this.length<=j)return!1;var K=this.words[j];return!!(K&q)},s.prototype.imaskn=function(A){r(typeof A=="number"&&A>=0);var I=A%26,j=(A-I)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=j)return this;if(I!==0&&j++,this.length=Math.min(j,this.length),I!==0){var q=67108863^67108863>>>I<<I;this.words[this.length-1]&=q}return this._strip()},s.prototype.maskn=function(A){return this.clone().imaskn(A)},s.prototype.iaddn=function(A){return r(typeof A=="number"),r(A<67108864),A<0?this.isubn(-A):this.negative!==0?this.length===1&&(this.words[0]|0)<=A?(this.words[0]=A-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(A),this.negative=1,this):this._iaddn(A)},s.prototype._iaddn=function(A){this.words[0]+=A;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},s.prototype.isubn=function(A){if(r(typeof A=="number"),r(A<67108864),A<0)return this.iaddn(-A);if(this.negative!==0)return this.negative=0,this.iaddn(A),this.negative=1,this;if(this.words[0]-=A,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this._strip()},s.prototype.addn=function(A){return this.clone().iaddn(A)},s.prototype.subn=function(A){return this.clone().isubn(A)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(A,I,j){var q=A.length+j,K;this._expand(q);var te,Y=0;for(K=0;K<A.length;K++){te=(this.words[K+j]|0)+Y;var H=(A.words[K]|0)*I;te-=H&67108863,Y=(te>>26)-(H/67108864|0),this.words[K+j]=te&67108863}for(;K<this.length-j;K++)te=(this.words[K+j]|0)+Y,Y=te>>26,this.words[K+j]=te&67108863;if(Y===0)return this._strip();for(r(Y===-1),Y=0,K=0;K<this.length;K++)te=-(this.words[K]|0)+Y,Y=te>>26,this.words[K]=te&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(A,I){var j=this.length-A.length,q=this.clone(),K=A,te=K.words[K.length-1]|0,Y=this._countBits(te);j=26-Y,j!==0&&(K=K.ushln(j),q.iushln(j),te=K.words[K.length-1]|0);var H=q.length-K.length,M;if(I!=="mod"){M=new s(null),M.length=H+1,M.words=new Array(M.length);for(var P=0;P<M.length;P++)M.words[P]=0}var W=q.clone()._ishlnsubmul(K,1,H);W.negative===0&&(q=W,M&&(M.words[H]=1));for(var X=H-1;X>=0;X--){var ie=(q.words[K.length+X]|0)*67108864+(q.words[K.length+X-1]|0);for(ie=Math.min(ie/te|0,67108863),q._ishlnsubmul(K,ie,X);q.negative!==0;)ie--,q.negative=0,q._ishlnsubmul(K,1,X),q.isZero()||(q.negative^=1);M&&(M.words[X]=ie)}return M&&M._strip(),q._strip(),I!=="div"&&j!==0&&q.iushrn(j),{div:M||null,mod:q}},s.prototype.divmod=function(A,I,j){if(r(!A.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var q,K,te;return this.negative!==0&&A.negative===0?(te=this.neg().divmod(A,I),I!=="mod"&&(q=te.div.neg()),I!=="div"&&(K=te.mod.neg(),j&&K.negative!==0&&K.iadd(A)),{div:q,mod:K}):this.negative===0&&A.negative!==0?(te=this.divmod(A.neg(),I),I!=="mod"&&(q=te.div.neg()),{div:q,mod:te.mod}):(this.negative&A.negative)!==0?(te=this.neg().divmod(A.neg(),I),I!=="div"&&(K=te.mod.neg(),j&&K.negative!==0&&K.isub(A)),{div:te.div,mod:K}):A.length>this.length||this.cmp(A)<0?{div:new s(0),mod:this}:A.length===1?I==="div"?{div:this.divn(A.words[0]),mod:null}:I==="mod"?{div:null,mod:new s(this.modrn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new s(this.modrn(A.words[0]))}:this._wordDiv(A,I)},s.prototype.div=function(A){return this.divmod(A,"div",!1).div},s.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod},s.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod},s.prototype.divRound=function(A){var I=this.divmod(A);if(I.mod.isZero())return I.div;var j=I.div.negative!==0?I.mod.isub(A):I.mod,q=A.ushrn(1),K=A.andln(1),te=j.cmp(q);return te<0||K===1&&te===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},s.prototype.modrn=function(A){var I=A<0;I&&(A=-A),r(A<=67108863);for(var j=(1<<26)%A,q=0,K=this.length-1;K>=0;K--)q=(j*q+(this.words[K]|0))%A;return I?-q:q},s.prototype.modn=function(A){return this.modrn(A)},s.prototype.idivn=function(A){var I=A<0;I&&(A=-A),r(A<=67108863);for(var j=0,q=this.length-1;q>=0;q--){var K=(this.words[q]|0)+j*67108864;this.words[q]=K/A|0,j=K%A}return this._strip(),I?this.ineg():this},s.prototype.divn=function(A){return this.clone().idivn(A)},s.prototype.egcd=function(A){r(A.negative===0),r(!A.isZero());var I=this,j=A.clone();I.negative!==0?I=I.umod(A):I=I.clone();for(var q=new s(1),K=new s(0),te=new s(0),Y=new s(1),H=0;I.isEven()&&j.isEven();)I.iushrn(1),j.iushrn(1),++H;for(var M=j.clone(),P=I.clone();!I.isZero();){for(var W=0,X=1;(I.words[0]&X)===0&&W<26;++W,X<<=1);if(W>0)for(I.iushrn(W);W-- >0;)(q.isOdd()||K.isOdd())&&(q.iadd(M),K.isub(P)),q.iushrn(1),K.iushrn(1);for(var ie=0,oe=1;(j.words[0]&oe)===0&&ie<26;++ie,oe<<=1);if(ie>0)for(j.iushrn(ie);ie-- >0;)(te.isOdd()||Y.isOdd())&&(te.iadd(M),Y.isub(P)),te.iushrn(1),Y.iushrn(1);I.cmp(j)>=0?(I.isub(j),q.isub(te),K.isub(Y)):(j.isub(I),te.isub(q),Y.isub(K))}return{a:te,b:Y,gcd:j.iushln(H)}},s.prototype._invmp=function(A){r(A.negative===0),r(!A.isZero());var I=this,j=A.clone();I.negative!==0?I=I.umod(A):I=I.clone();for(var q=new s(1),K=new s(0),te=j.clone();I.cmpn(1)>0&&j.cmpn(1)>0;){for(var Y=0,H=1;(I.words[0]&H)===0&&Y<26;++Y,H<<=1);if(Y>0)for(I.iushrn(Y);Y-- >0;)q.isOdd()&&q.iadd(te),q.iushrn(1);for(var M=0,P=1;(j.words[0]&P)===0&&M<26;++M,P<<=1);if(M>0)for(j.iushrn(M);M-- >0;)K.isOdd()&&K.iadd(te),K.iushrn(1);I.cmp(j)>=0?(I.isub(j),q.isub(K)):(j.isub(I),K.isub(q))}var W;return I.cmpn(1)===0?W=q:W=K,W.cmpn(0)<0&&W.iadd(A),W},s.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var I=this.clone(),j=A.clone();I.negative=0,j.negative=0;for(var q=0;I.isEven()&&j.isEven();q++)I.iushrn(1),j.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;j.isEven();)j.iushrn(1);var K=I.cmp(j);if(K<0){var te=I;I=j,j=te}else if(K===0||j.cmpn(1)===0)break;I.isub(j)}while(!0);return j.iushln(q)},s.prototype.invm=function(A){return this.egcd(A).a.umod(A)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(A){return this.words[0]&A},s.prototype.bincn=function(A){r(typeof A=="number");var I=A%26,j=(A-I)/26,q=1<<I;if(this.length<=j)return this._expand(j+1),this.words[j]|=q,this;for(var K=q,te=j;K!==0&&te<this.length;te++){var Y=this.words[te]|0;Y+=K,K=Y>>>26,Y&=67108863,this.words[te]=Y}return K!==0&&(this.words[te]=K,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(A){var I=A<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this._strip();var j;if(this.length>1)j=1;else{I&&(A=-A),r(A<=67108863,"Number is too big");var q=this.words[0]|0;j=q===A?0:q<A?-1:1}return this.negative!==0?-j|0:j},s.prototype.cmp=function(A){if(this.negative!==0&&A.negative===0)return-1;if(this.negative===0&&A.negative!==0)return 1;var I=this.ucmp(A);return this.negative!==0?-I|0:I},s.prototype.ucmp=function(A){if(this.length>A.length)return 1;if(this.length<A.length)return-1;for(var I=0,j=this.length-1;j>=0;j--){var q=this.words[j]|0,K=A.words[j]|0;if(q!==K){q<K?I=-1:q>K&&(I=1);break}}return I},s.prototype.gtn=function(A){return this.cmpn(A)===1},s.prototype.gt=function(A){return this.cmp(A)===1},s.prototype.gten=function(A){return this.cmpn(A)>=0},s.prototype.gte=function(A){return this.cmp(A)>=0},s.prototype.ltn=function(A){return this.cmpn(A)===-1},s.prototype.lt=function(A){return this.cmp(A)===-1},s.prototype.lten=function(A){return this.cmpn(A)<=0},s.prototype.lte=function(A){return this.cmp(A)<=0},s.prototype.eqn=function(A){return this.cmpn(A)===0},s.prototype.eq=function(A){return this.cmp(A)===0},s.red=function(A){return new G(A)},s.prototype.toRed=function(A){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),A.convertTo(this)._forceRed(A)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(A){return this.red=A,this},s.prototype.forceRed=function(A){return r(!this.red,"Already a number in reduction context"),this._forceRed(A)},s.prototype.redAdd=function(A){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,A)},s.prototype.redIAdd=function(A){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,A)},s.prototype.redSub=function(A){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,A)},s.prototype.redISub=function(A){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,A)},s.prototype.redShl=function(A){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,A)},s.prototype.redMul=function(A){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.mul(this,A)},s.prototype.redIMul=function(A){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,A),this.red.imul(this,A)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(A){return r(this.red&&!A.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,A)};var D={k256:null,p224:null,p192:null,p25519:null};function _(U,A){this.name=U,this.p=new s(A,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var A=new s(null);return A.words=new Array(Math.ceil(this.n/13)),A},_.prototype.ireduce=function(A){var I=A,j;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),j=I.bitLength();while(j>this.n);var q=j<this.n?-1:I.ucmp(this.p);return q===0?(I.words[0]=0,I.length=1):q>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},_.prototype.split=function(A,I){A.iushrn(this.n,0,I)},_.prototype.imulK=function(A){return A.imul(this.k)};function F(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,_),F.prototype.split=function(A,I){for(var j=4194303,q=Math.min(A.length,9),K=0;K<q;K++)I.words[K]=A.words[K];if(I.length=q,A.length<=9){A.words[0]=0,A.length=1;return}var te=A.words[9];for(I.words[I.length++]=te&j,K=10;K<A.length;K++){var Y=A.words[K]|0;A.words[K-10]=(Y&j)<<4|te>>>22,te=Y}te>>>=22,A.words[K-10]=te,te===0&&A.length>10?A.length-=10:A.length-=9},F.prototype.imulK=function(A){A.words[A.length]=0,A.words[A.length+1]=0,A.length+=2;for(var I=0,j=0;j<A.length;j++){var q=A.words[j]|0;I+=q*977,A.words[j]=I&67108863,I=q*64+(I/67108864|0)}return A.words[A.length-1]===0&&(A.length--,A.words[A.length-1]===0&&A.length--),A};function z(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(z,_);function L(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(L,_);function $(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,_),$.prototype.imulK=function(A){for(var I=0,j=0;j<A.length;j++){var q=(A.words[j]|0)*19+I,K=q&67108863;q>>>=26,A.words[j]=K,I=q}return I!==0&&(A.words[A.length++]=I),A},s._prime=function(A){if(D[A])return D[A];var I;if(A==="k256")I=new F;else if(A==="p224")I=new z;else if(A==="p192")I=new L;else if(A==="p25519")I=new $;else throw new Error("Unknown prime "+A);return D[A]=I,I};function G(U){if(typeof U=="string"){var A=s._prime(U);this.m=A.p,this.prime=A}else r(U.gtn(1),"modulus must be greater than 1"),this.m=U,this.prime=null}G.prototype._verify1=function(A){r(A.negative===0,"red works only with positives"),r(A.red,"red works only with red numbers")},G.prototype._verify2=function(A,I){r((A.negative|I.negative)===0,"red works only with positives"),r(A.red&&A.red===I.red,"red works only with red numbers")},G.prototype.imod=function(A){return this.prime?this.prime.ireduce(A)._forceRed(this):(d(A,A.umod(this.m)._forceRed(this)),A)},G.prototype.neg=function(A){return A.isZero()?A.clone():this.m.sub(A)._forceRed(this)},G.prototype.add=function(A,I){this._verify2(A,I);var j=A.add(I);return j.cmp(this.m)>=0&&j.isub(this.m),j._forceRed(this)},G.prototype.iadd=function(A,I){this._verify2(A,I);var j=A.iadd(I);return j.cmp(this.m)>=0&&j.isub(this.m),j},G.prototype.sub=function(A,I){this._verify2(A,I);var j=A.sub(I);return j.cmpn(0)<0&&j.iadd(this.m),j._forceRed(this)},G.prototype.isub=function(A,I){this._verify2(A,I);var j=A.isub(I);return j.cmpn(0)<0&&j.iadd(this.m),j},G.prototype.shl=function(A,I){return this._verify1(A),this.imod(A.ushln(I))},G.prototype.imul=function(A,I){return this._verify2(A,I),this.imod(A.imul(I))},G.prototype.mul=function(A,I){return this._verify2(A,I),this.imod(A.mul(I))},G.prototype.isqr=function(A){return this.imul(A,A.clone())},G.prototype.sqr=function(A){return this.mul(A,A)},G.prototype.sqrt=function(A){if(A.isZero())return A.clone();var I=this.m.andln(3);if(r(I%2===1),I===3){var j=this.m.add(new s(1)).iushrn(2);return this.pow(A,j)}for(var q=this.m.subn(1),K=0;!q.isZero()&&q.andln(1)===0;)K++,q.iushrn(1);r(!q.isZero());var te=new s(1).toRed(this),Y=te.redNeg(),H=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new s(2*M*M).toRed(this);this.pow(M,H).cmp(Y)!==0;)M.redIAdd(Y);for(var P=this.pow(M,q),W=this.pow(A,q.addn(1).iushrn(1)),X=this.pow(A,q),ie=K;X.cmp(te)!==0;){for(var oe=X,Te=0;oe.cmp(te)!==0;Te++)oe=oe.redSqr();r(Te<ie);var ce=this.pow(P,new s(1).iushln(ie-Te-1));W=W.redMul(ce),P=ce.redSqr(),X=X.redMul(P),ie=Te}return W},G.prototype.invm=function(A){var I=A._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},G.prototype.pow=function(A,I){if(I.isZero())return new s(1).toRed(this);if(I.cmpn(1)===0)return A.clone();var j=4,q=new Array(1<<j);q[0]=new s(1).toRed(this),q[1]=A;for(var K=2;K<q.length;K++)q[K]=this.mul(q[K-1],A);var te=q[0],Y=0,H=0,M=I.bitLength()%26;for(M===0&&(M=26),K=I.length-1;K>=0;K--){for(var P=I.words[K],W=M-1;W>=0;W--){var X=P>>W&1;if(te!==q[0]&&(te=this.sqr(te)),X===0&&Y===0){H=0;continue}Y<<=1,Y|=X,H++,!(H!==j&&(K!==0||W!==0))&&(te=this.mul(te,q[Y]),H=0,Y=0)}M=26}return te},G.prototype.convertTo=function(A){var I=A.umod(this.m);return I===A?I.clone():I},G.prototype.convertFrom=function(A){var I=A.clone();return I.red=null,I},s.mont=function(A){return new V(A)};function V(U){G.call(this,U),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(V,G),V.prototype.convertTo=function(A){return this.imod(A.ushln(this.shift))},V.prototype.convertFrom=function(A){var I=this.imod(A.mul(this.rinv));return I.red=null,I},V.prototype.imul=function(A,I){if(A.isZero()||I.isZero())return A.words[0]=0,A.length=1,A;var j=A.imul(I),q=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=j.isub(q).iushrn(this.shift),te=K;return K.cmp(this.m)>=0?te=K.isub(this.m):K.cmpn(0)<0&&(te=K.iadd(this.m)),te._forceRed(this)},V.prototype.mul=function(A,I){if(A.isZero()||I.isZero())return new s(0)._forceRed(this);var j=A.mul(I),q=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),K=j.isub(q).iushrn(this.shift),te=K;return K.cmp(this.m)>=0?te=K.isub(this.m):K.cmpn(0)<0&&(te=K.iadd(this.m)),te._forceRed(this)},V.prototype.invm=function(A){var I=this.imod(A._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(t,Sft)})(sT)),sT.exports}var Aft=o0e();const aee=bs(Aft);var x2={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var lee;function a0e(){return lee||(lee=1,(function(t,e){var n=MB(),r=n.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(x2,x2.exports)),x2.exports}var X4,cee;function Tft(){if(cee)return X4;cee=1;var t=a0e().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function m(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=t.from(x)),!t.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var b=0,w=0,k=0,N=x.length;k!==N&&x[k]===0;)k++,b++;for(var O=(N-k)*h+1>>>0,D=new Uint8Array(O);k!==N;){for(var _=x[k],F=0,z=O-1;(_!==0||F<w)&&z!==-1;z--,F++)_+=256*D[z]>>>0,D[z]=_%l>>>0,_=_/l>>>0;if(_!==0)throw new Error("Non-zero carry");w=F,k++}for(var L=O-w;L!==O&&D[L]===0;)L++;for(var $=c.repeat(b);L<O;++L)$+=n.charAt(D[L]);return $}function g(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return t.alloc(0);for(var b=0,w=0,k=0;x[b]===c;)w++,b++;for(var N=(x.length-b)*d+1>>>0,O=new Uint8Array(N);b<x.length;){var D=x.charCodeAt(b);if(D>255)return;var _=r[D];if(_===255)return;for(var F=0,z=N-1;(_!==0||F<k)&&z!==-1;z--,F++)_+=l*O[z]>>>0,O[z]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");k=F,b++}for(var L=N-k;L!==N&&O[L]===0;)L++;var $=t.allocUnsafe(w+(N-L));$.fill(0,0,w);for(var G=w;L!==N;)$[G++]=O[L++];return $}function v(x){var b=g(x);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:v}}return X4=e,X4}var Q4,uee;function kft(){if(uee)return Q4;uee=1;var t=Tft(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Q4=t(e),Q4}var Nft=kft();const ms=bs(Nft),dee=Ume;var Qn={},Z4,fee;function Cft(){if(fee)return Z4;fee=1;var t=a0e().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<n.length;s++){var o=n.charAt(s),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=s}var l=n.length,c=n.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function m(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=t.from(x)),!t.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var b=0,w=0,k=0,N=x.length;k!==N&&x[k]===0;)k++,b++;for(var O=(N-k)*h+1>>>0,D=new Uint8Array(O);k!==N;){for(var _=x[k],F=0,z=O-1;(_!==0||F<w)&&z!==-1;z--,F++)_+=256*D[z]>>>0,D[z]=_%l>>>0,_=_/l>>>0;if(_!==0)throw new Error("Non-zero carry");w=F,k++}for(var L=O-w;L!==O&&D[L]===0;)L++;for(var $=c.repeat(b);L<O;++L)$+=n.charAt(D[L]);return $}function g(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return t.alloc(0);for(var b=0,w=0,k=0;x[b]===c;)w++,b++;for(var N=(x.length-b)*d+1>>>0,O=new Uint8Array(N);b<x.length;){var D=x.charCodeAt(b);if(D>255)return;var _=r[D];if(_===255)return;for(var F=0,z=N-1;(_!==0||F<k)&&z!==-1;z--,F++)_+=l*O[z]>>>0,O[z]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");k=F,b++}for(var L=N-k;L!==N&&O[L]===0;)L++;var $=t.allocUnsafe(w+(N-L));$.fill(0,0,w);for(var G=w;L!==N;)$[G++]=O[L++];return $}function v(x){var b=g(x);if(b)return b;throw new Error("Non-base"+l+" character")}return{encode:m,decodeUnsafe:g,decode:v}}return Z4=e,Z4}var eO,hee;function Pft(){if(hee)return eO;hee=1;var t=Cft(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return eO=t(e),eO}function od(t,e,n){return e<=t&&t<=n}function CP(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function _ft(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function Ift(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var cN=-1;function LB(t){this.tokens=[].slice.call(t)}LB.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():cN},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Kx=-1;function tO(t,e){if(t)throw TypeError("Decoder error");return e||65533}var uN="utf-8";function dN(t,e){if(!(this instanceof dN))return new dN(t,e);if(t=t!==void 0?String(t).toLowerCase():uN,t!==uN)throw new Error("Encoding not supported. Only utf-8 is supported");e=CP(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}dN.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=CP(n),this._streaming||(this._decoder=new Rft({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var i=new LB(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Kx);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Kx)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Ift(s)}};function fN(t,e){if(!(this instanceof fN))return new fN(t,e);if(t=t!==void 0?String(t).toLowerCase():uN,t!==uN)throw new Error("Encoding not supported. Only utf-8 is supported");e=CP(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}fN.prototype={encode:function(e,n){e=e?String(e):"",n=CP(n),this._streaming||(this._encoder=new Oft(this._options)),this._streaming=!!n.stream;for(var r=[],i=new LB(_ft(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Kx);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Kx;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function Rft(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===cN&&i!==0)return i=0,tO(e);if(l===cN)return Kx;if(i===0){if(od(l,0,127))return l;if(od(l,194,223))i=1,n=l-192;else if(od(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,n=l-224;else if(od(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,n=l-240;else return tO(e);return n=n<<6*i,null}if(!od(l,s,o))return n=i=r=0,s=128,o=191,a.prepend(l),tO(e);if(s=128,o=191,r+=1,n+=l-128<<6*(i-r),r!==i)return null;var c=n;return n=i=r=0,c}}function Oft(t){t.fatal,this.handler=function(e,n){if(n===cN)return Kx;if(od(n,0,127))return n;var r,i;od(n,128,2047)?(r=1,i=192):od(n,2048,65535)?(r=2,i=224):od(n,65536,1114111)&&(r=3,i=240);for(var s=[(n>>6*r)+i];r>0;){var o=n>>6*(r-1);s.push(128|o&63),r-=1}return s}}const Mft=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:dN,TextEncoder:fN},Symbol.toStringTag,{value:"Module"})),Lft=ste(Mft);var pee;function jft(){if(pee)return Qn;pee=1;var t=Qn&&Qn.__createBinding||(Object.create?(function(L,$,G,V){V===void 0&&(V=G),Object.defineProperty(L,V,{enumerable:!0,get:function(){return $[G]}})}):(function(L,$,G,V){V===void 0&&(V=G),L[V]=$[G]})),e=Qn&&Qn.__setModuleDefault||(Object.create?(function(L,$){Object.defineProperty(L,"default",{enumerable:!0,value:$})}):function(L,$){L.default=$}),n=Qn&&Qn.__decorate||function(L,$,G,V){var U=arguments.length,A=U<3?$:V===null?V=Object.getOwnPropertyDescriptor($,G):V,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(L,$,G,V);else for(var j=L.length-1;j>=0;j--)(I=L[j])&&(A=(U<3?I(A):U>3?I($,G,A):I($,G))||A);return U>3&&A&&Object.defineProperty($,G,A),A},r=Qn&&Qn.__importStar||function(L){if(L&&L.__esModule)return L;var $={};if(L!=null)for(var G in L)G!=="default"&&Object.hasOwnProperty.call(L,G)&&t($,L,G);return e($,L),$},i=Qn&&Qn.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.deserializeUnchecked=Qn.deserialize=Qn.serialize=Qn.BinaryReader=Qn.BinaryWriter=Qn.BorshError=Qn.baseDecode=Qn.baseEncode=void 0;const s=i(o0e()),o=i(Pft()),a=r(Lft),l=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,c=new l("utf-8",{fatal:!0});function d(L){return typeof L=="string"&&(L=un.from(L,"utf8")),o.default.encode(un.from(L))}Qn.baseEncode=d;function h(L){return un.from(o.default.decode(L))}Qn.baseDecode=h;const m=1024;class g extends Error{constructor($){super($),this.fieldPath=[],this.originalMessage=$}addToFieldPath($){this.fieldPath.splice(0,0,$),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Qn.BorshError=g;class v{constructor(){this.buf=un.alloc(m),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=un.concat([this.buf,un.alloc(m)]))}writeU8($){this.maybeResize(),this.buf.writeUInt8($,this.length),this.length+=1}writeU16($){this.maybeResize(),this.buf.writeUInt16LE($,this.length),this.length+=2}writeU32($){this.maybeResize(),this.buf.writeUInt32LE($,this.length),this.length+=4}writeU64($){this.maybeResize(),this.writeBuffer(un.from(new s.default($).toArray("le",8)))}writeU128($){this.maybeResize(),this.writeBuffer(un.from(new s.default($).toArray("le",16)))}writeU256($){this.maybeResize(),this.writeBuffer(un.from(new s.default($).toArray("le",32)))}writeU512($){this.maybeResize(),this.writeBuffer(un.from(new s.default($).toArray("le",64)))}writeBuffer($){this.buf=un.concat([un.from(this.buf.subarray(0,this.length)),$,un.alloc(m)]),this.length+=$.length}writeString($){this.maybeResize();const G=un.from($,"utf8");this.writeU32(G.length),this.writeBuffer(G)}writeFixedArray($){this.writeBuffer(un.from($))}writeArray($,G){this.maybeResize(),this.writeU32($.length);for(const V of $)this.maybeResize(),G(V)}toArray(){return this.buf.subarray(0,this.length)}}Qn.BinaryWriter=v;function x(L,$,G){const V=G.value;G.value=function(...U){try{return V.apply(this,U)}catch(A){if(A instanceof RangeError){const I=A.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(I)>=0)throw new g("Reached the end of buffer when deserializing")}throw A}}}class b{constructor($){this.buf=$,this.offset=0}readU8(){const $=this.buf.readUInt8(this.offset);return this.offset+=1,$}readU16(){const $=this.buf.readUInt16LE(this.offset);return this.offset+=2,$}readU32(){const $=this.buf.readUInt32LE(this.offset);return this.offset+=4,$}readU64(){const $=this.readBuffer(8);return new s.default($,"le")}readU128(){const $=this.readBuffer(16);return new s.default($,"le")}readU256(){const $=this.readBuffer(32);return new s.default($,"le")}readU512(){const $=this.readBuffer(64);return new s.default($,"le")}readBuffer($){if(this.offset+$>this.buf.length)throw new g(`Expected buffer length ${$} isn't within bounds`);const G=this.buf.slice(this.offset,this.offset+$);return this.offset+=$,G}readString(){const $=this.readU32(),G=this.readBuffer($);try{return c.decode(G)}catch(V){throw new g(`Error decoding UTF-8 string: ${V}`)}}readFixedArray($){return new Uint8Array(this.readBuffer($))}readArray($){const G=this.readU32(),V=Array();for(let U=0;U<G;++U)V.push($());return V}}n([x],b.prototype,"readU8",null),n([x],b.prototype,"readU16",null),n([x],b.prototype,"readU32",null),n([x],b.prototype,"readU64",null),n([x],b.prototype,"readU128",null),n([x],b.prototype,"readU256",null),n([x],b.prototype,"readU512",null),n([x],b.prototype,"readString",null),n([x],b.prototype,"readFixedArray",null),n([x],b.prototype,"readArray",null),Qn.BinaryReader=b;function w(L){return L.charAt(0).toUpperCase()+L.slice(1)}function k(L,$,G,V,U){try{if(typeof V=="string")U[`write${w(V)}`](G);else if(V instanceof Array)if(typeof V[0]=="number"){if(G.length!==V[0])throw new g(`Expecting byte array of length ${V[0]}, but got ${G.length} bytes`);U.writeFixedArray(G)}else if(V.length===2&&typeof V[1]=="number"){if(G.length!==V[1])throw new g(`Expecting byte array of length ${V[1]}, but got ${G.length} bytes`);for(let A=0;A<V[1];A++)k(L,null,G[A],V[0],U)}else U.writeArray(G,A=>{k(L,$,A,V[0],U)});else if(V.kind!==void 0)switch(V.kind){case"option":{G==null?U.writeU8(0):(U.writeU8(1),k(L,$,G,V.type,U));break}case"map":{U.writeU32(G.size),G.forEach((A,I)=>{k(L,$,I,V.key,U),k(L,$,A,V.value,U)});break}default:throw new g(`FieldType ${V} unrecognized`)}else N(L,G,U)}catch(A){throw A instanceof g&&A.addToFieldPath($),A}}function N(L,$,G){if(typeof $.borshSerialize=="function"){$.borshSerialize(G);return}const V=L.get($.constructor);if(!V)throw new g(`Class ${$.constructor.name} is missing in schema`);if(V.kind==="struct")V.fields.map(([U,A])=>{k(L,U,$[U],A,G)});else if(V.kind==="enum"){const U=$[V.field];for(let A=0;A<V.values.length;++A){const[I,j]=V.values[A];if(I===U){G.writeU8(A),k(L,I,$[I],j,G);break}}}else throw new g(`Unexpected schema kind: ${V.kind} for ${$.constructor.name}`)}function O(L,$,G=v){const V=new G;return N(L,$,V),V.toArray()}Qn.serialize=O;function D(L,$,G,V){try{if(typeof G=="string")return V[`read${w(G)}`]();if(G instanceof Array){if(typeof G[0]=="number")return V.readFixedArray(G[0]);if(typeof G[1]=="number"){const U=[];for(let A=0;A<G[1];A++)U.push(D(L,null,G[0],V));return U}else return V.readArray(()=>D(L,$,G[0],V))}if(G.kind==="option")return V.readU8()?D(L,$,G.type,V):void 0;if(G.kind==="map"){let U=new Map;const A=V.readU32();for(let I=0;I<A;I++){const j=D(L,$,G.key,V),q=D(L,$,G.value,V);U.set(j,q)}return U}return _(L,G,V)}catch(U){throw U instanceof g&&U.addToFieldPath($),U}}function _(L,$,G){if(typeof $.borshDeserialize=="function")return $.borshDeserialize(G);const V=L.get($);if(!V)throw new g(`Class ${$.name} is missing in schema`);if(V.kind==="struct"){const U={};for(const[A,I]of L.get($).fields)U[A]=D(L,A,I,G);return new $(U)}if(V.kind==="enum"){const U=G.readU8();if(U>=V.values.length)throw new g(`Enum index: ${U} is out of range`);const[A,I]=V.values[U],j=D(L,A,I,G);return new $({[A]:j})}throw new g(`Unexpected schema kind: ${V.kind} for ${$.constructor.name}`)}function F(L,$,G,V=b){const U=new V(G),A=_(L,$,U);if(U.offset<G.length)throw new g(`Unexpected ${G.length-U.offset} bytes after deserialized data`);return A}Qn.deserialize=F;function z(L,$,G,V=b){const U=new V(G);return _(L,$,U)}return Qn.deserializeUnchecked=z,Qn}var nO=jft(),ze={},mee;function Dft(){if(mee)return ze;mee=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.s16=ze.s8=ze.nu64be=ze.u48be=ze.u40be=ze.u32be=ze.u24be=ze.u16be=ze.nu64=ze.u48=ze.u40=ze.u32=ze.u24=ze.u16=ze.u8=ze.offset=ze.greedy=ze.Constant=ze.UTF8=ze.CString=ze.Blob=ze.Boolean=ze.BitField=ze.BitStructure=ze.VariantLayout=ze.Union=ze.UnionLayoutDiscriminator=ze.UnionDiscriminator=ze.Structure=ze.Sequence=ze.DoubleBE=ze.Double=ze.FloatBE=ze.Float=ze.NearInt64BE=ze.NearInt64=ze.NearUInt64BE=ze.NearUInt64=ze.IntBE=ze.Int=ze.UIntBE=ze.UInt=ze.OffsetLayout=ze.GreedyCount=ze.ExternalLayout=ze.bindConstructorLayout=ze.nameWithProperty=ze.Layout=ze.uint8ArrayToBuffer=ze.checkUint8Array=void 0,ze.constant=ze.utf8=ze.cstr=ze.blob=ze.unionLayoutDiscriminator=ze.union=ze.seq=ze.bits=ze.struct=ze.f64be=ze.f64=ze.f32be=ze.f32=ze.ns64be=ze.s48be=ze.s40be=ze.s32be=ze.s24be=ze.s16be=ze.ns64=ze.s48=ze.s40=ze.s32=ze.s24=void 0;const t=MB();function e(M){if(!(M instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ze.checkUint8Array=e;function n(M){return e(M),t.Buffer.from(M.buffer,M.byteOffset,M.length)}ze.uint8ArrayToBuffer=n;let r=class{constructor(P,W){if(!Number.isInteger(P))throw new TypeError("span must be an integer");this.span=P,this.property=W}makeDestinationObject(){return{}}getSpan(P,W){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(P){const W=Object.create(this.constructor.prototype);return Object.assign(W,this),W.property=P,W}fromArray(P){}};ze.Layout=r;function i(M,P){return P.property?M+"["+P.property+"]":M}ze.nameWithProperty=i;function s(M,P){if(typeof M!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(M,"layout_"))throw new Error("Class is already bound to a layout");if(!(P&&P instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(P,"boundConstructor_"))throw new Error("layout is already bound to a constructor");M.layout_=P,P.boundConstructor_=M,P.makeDestinationObject=(()=>new M),Object.defineProperty(M.prototype,"encode",{value(W,X){return P.encode(this,W,X)},writable:!0}),Object.defineProperty(M,"decode",{value(W,X){return P.decode(W,X)},writable:!0})}ze.bindConstructorLayout=s;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}ze.ExternalLayout=o;class a extends o{constructor(P=1,W){if(!Number.isInteger(P)||0>=P)throw new TypeError("elementSpan must be a (positive) integer");super(-1,W),this.elementSpan=P}isCount(){return!0}decode(P,W=0){e(P);const X=P.length-W;return Math.floor(X/this.elementSpan)}encode(P,W,X){return 0}}ze.GreedyCount=a;class l extends o{constructor(P,W=0,X){if(!(P instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(W))throw new TypeError("offset must be integer or undefined");super(P.span,X||P.property),this.layout=P,this.offset=W}isCount(){return this.layout instanceof c||this.layout instanceof d}decode(P,W=0){return this.layout.decode(P,W+this.offset)}encode(P,W,X=0){return this.layout.encode(P,W,X+this.offset)}}ze.OffsetLayout=l;class c extends r{constructor(P,W){if(super(P,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,W=0){return n(P).readUIntLE(W,this.span)}encode(P,W,X=0){return n(W).writeUIntLE(P,X,this.span),this.span}}ze.UInt=c;class d extends r{constructor(P,W){if(super(P,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,W=0){return n(P).readUIntBE(W,this.span)}encode(P,W,X=0){return n(W).writeUIntBE(P,X,this.span),this.span}}ze.UIntBE=d;class h extends r{constructor(P,W){if(super(P,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,W=0){return n(P).readIntLE(W,this.span)}encode(P,W,X=0){return n(W).writeIntLE(P,X,this.span),this.span}}ze.Int=h;class m extends r{constructor(P,W){if(super(P,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(P,W=0){return n(P).readIntBE(W,this.span)}encode(P,W,X=0){return n(W).writeIntBE(P,X,this.span),this.span}}ze.IntBE=m;const g=Math.pow(2,32);function v(M){const P=Math.floor(M/g),W=M-P*g;return{hi32:P,lo32:W}}function x(M,P){return M*g+P}class b extends r{constructor(P){super(8,P)}decode(P,W=0){const X=n(P),ie=X.readUInt32LE(W),oe=X.readUInt32LE(W+4);return x(oe,ie)}encode(P,W,X=0){const ie=v(P),oe=n(W);return oe.writeUInt32LE(ie.lo32,X),oe.writeUInt32LE(ie.hi32,X+4),8}}ze.NearUInt64=b;class w extends r{constructor(P){super(8,P)}decode(P,W=0){const X=n(P),ie=X.readUInt32BE(W),oe=X.readUInt32BE(W+4);return x(ie,oe)}encode(P,W,X=0){const ie=v(P),oe=n(W);return oe.writeUInt32BE(ie.hi32,X),oe.writeUInt32BE(ie.lo32,X+4),8}}ze.NearUInt64BE=w;class k extends r{constructor(P){super(8,P)}decode(P,W=0){const X=n(P),ie=X.readUInt32LE(W),oe=X.readInt32LE(W+4);return x(oe,ie)}encode(P,W,X=0){const ie=v(P),oe=n(W);return oe.writeUInt32LE(ie.lo32,X),oe.writeInt32LE(ie.hi32,X+4),8}}ze.NearInt64=k;class N extends r{constructor(P){super(8,P)}decode(P,W=0){const X=n(P),ie=X.readInt32BE(W),oe=X.readUInt32BE(W+4);return x(ie,oe)}encode(P,W,X=0){const ie=v(P),oe=n(W);return oe.writeInt32BE(ie.hi32,X),oe.writeUInt32BE(ie.lo32,X+4),8}}ze.NearInt64BE=N;class O extends r{constructor(P){super(4,P)}decode(P,W=0){return n(P).readFloatLE(W)}encode(P,W,X=0){return n(W).writeFloatLE(P,X),4}}ze.Float=O;class D extends r{constructor(P){super(4,P)}decode(P,W=0){return n(P).readFloatBE(W)}encode(P,W,X=0){return n(W).writeFloatBE(P,X),4}}ze.FloatBE=D;class _ extends r{constructor(P){super(8,P)}decode(P,W=0){return n(P).readDoubleLE(W)}encode(P,W,X=0){return n(W).writeDoubleLE(P,X),8}}ze.Double=_;class F extends r{constructor(P){super(8,P)}decode(P,W=0){return n(P).readDoubleBE(W)}encode(P,W,X=0){return n(W).writeDoubleBE(P,X),8}}ze.DoubleBE=F;class z extends r{constructor(P,W,X){if(!(P instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(W instanceof o&&W.isCount()||Number.isInteger(W)&&0<=W))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let ie=-1;!(W instanceof o)&&0<P.span&&(ie=W*P.span),super(ie,X),this.elementLayout=P,this.count=W}getSpan(P,W=0){if(0<=this.span)return this.span;let X=0,ie=this.count;if(ie instanceof o&&(ie=ie.decode(P,W)),0<this.elementLayout.span)X=ie*this.elementLayout.span;else{let oe=0;for(;oe<ie;)X+=this.elementLayout.getSpan(P,W+X),++oe}return X}decode(P,W=0){const X=[];let ie=0,oe=this.count;for(oe instanceof o&&(oe=oe.decode(P,W));ie<oe;)X.push(this.elementLayout.decode(P,W)),W+=this.elementLayout.getSpan(P,W),ie+=1;return X}encode(P,W,X=0){const ie=this.elementLayout,oe=P.reduce((Te,ce)=>Te+ie.encode(ce,W,X+Te),0);return this.count instanceof o&&this.count.encode(P.length,W,X),oe}}ze.Sequence=z;class L extends r{constructor(P,W,X){if(!(Array.isArray(P)&&P.reduce((oe,Te)=>oe&&Te instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof W=="boolean"&&X===void 0&&(X=W,W=void 0);for(const oe of P)if(0>oe.span&&oe.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let ie=-1;try{ie=P.reduce((oe,Te)=>oe+Te.getSpan(),0)}catch{}super(ie,W),this.fields=P,this.decodePrefixes=!!X}getSpan(P,W=0){if(0<=this.span)return this.span;let X=0;try{X=this.fields.reduce((ie,oe)=>{const Te=oe.getSpan(P,W);return W+=Te,ie+Te},0)}catch{throw new RangeError("indeterminate span")}return X}decode(P,W=0){e(P);const X=this.makeDestinationObject();for(const ie of this.fields)if(ie.property!==void 0&&(X[ie.property]=ie.decode(P,W)),W+=ie.getSpan(P,W),this.decodePrefixes&&P.length===W)break;return X}encode(P,W,X=0){const ie=X;let oe=0,Te=0;for(const ce of this.fields){let de=ce.span;if(Te=0<de?de:0,ce.property!==void 0){const ke=P[ce.property];ke!==void 0&&(Te=ce.encode(ke,W,X),0>de&&(de=ce.getSpan(W,X)))}oe=X,X+=de}return oe+Te-ie}fromArray(P){const W=this.makeDestinationObject();for(const X of this.fields)X.property!==void 0&&0<P.length&&(W[X.property]=P.shift());return W}layoutFor(P){if(typeof P!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===P)return W}offsetOf(P){if(typeof P!="string")throw new TypeError("property must be string");let W=0;for(const X of this.fields){if(X.property===P)return W;0>X.span?W=-1:0<=W&&(W+=X.span)}}}ze.Structure=L;class ${constructor(P){this.property=P}decode(P,W){throw new Error("UnionDiscriminator is abstract")}encode(P,W,X){throw new Error("UnionDiscriminator is abstract")}}ze.UnionDiscriminator=$;class G extends ${constructor(P,W){if(!(P instanceof o&&P.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(W||P.property||"variant"),this.layout=P}decode(P,W){return this.layout.decode(P,W)}encode(P,W,X){return this.layout.encode(P,W,X)}}ze.UnionLayoutDiscriminator=G;class V extends r{constructor(P,W,X){let ie;if(P instanceof c||P instanceof d)ie=new G(new l(P));else if(P instanceof o&&P.isCount())ie=new G(P);else if(P instanceof $)ie=P;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(W===void 0&&(W=null),!(W===null||W instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(W!==null){if(0>W.span)throw new Error("defaultLayout must have constant span");W.property===void 0&&(W=W.replicate("content"))}let oe=-1;W&&(oe=W.span,0<=oe&&(P instanceof c||P instanceof d)&&(oe+=ie.layout.span)),super(oe,X),this.discriminator=ie,this.usesPrefixDiscriminator=P instanceof c||P instanceof d,this.defaultLayout=W,this.registry={};let Te=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ce){return Te(ce)},this.configGetSourceVariant=function(ce){Te=ce.bind(this)}}getSpan(P,W=0){if(0<=this.span)return this.span;const X=this.getVariant(P,W);if(!X)throw new Error("unable to determine span for unrecognized variant");return X.getSpan(P,W)}defaultGetSourceVariant(P){if(Object.prototype.hasOwnProperty.call(P,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(P,this.defaultLayout.property))return;const W=this.registry[P[this.discriminator.property]];if(W&&(!W.layout||W.property&&Object.prototype.hasOwnProperty.call(P,W.property)))return W}else for(const W in this.registry){const X=this.registry[W];if(X.property&&Object.prototype.hasOwnProperty.call(P,X.property))return X}throw new Error("unable to infer src variant")}decode(P,W=0){let X;const ie=this.discriminator,oe=ie.decode(P,W),Te=this.registry[oe];if(Te===void 0){const ce=this.defaultLayout;let de=0;this.usesPrefixDiscriminator&&(de=ie.layout.span),X=this.makeDestinationObject(),X[ie.property]=oe,X[ce.property]=ce.decode(P,W+de)}else X=Te.decode(P,W);return X}encode(P,W,X=0){const ie=this.getSourceVariant(P);if(ie===void 0){const oe=this.discriminator,Te=this.defaultLayout;let ce=0;return this.usesPrefixDiscriminator&&(ce=oe.layout.span),oe.encode(P[oe.property],W,X),ce+Te.encode(P[Te.property],W,X+ce)}return ie.encode(P,W,X)}addVariant(P,W,X){const ie=new U(this,P,W,X);return this.registry[P]=ie,ie}getVariant(P,W=0){let X;return P instanceof Uint8Array?X=this.discriminator.decode(P,W):X=P,this.registry[X]}}ze.Union=V;class U extends r{constructor(P,W,X,ie){if(!(P instanceof V))throw new TypeError("union must be a Union");if(!Number.isInteger(W)||0>W)throw new TypeError("variant must be a (non-negative) integer");if(typeof X=="string"&&ie===void 0&&(ie=X,X=null),X){if(!(X instanceof r))throw new TypeError("layout must be a Layout");if(P.defaultLayout!==null&&0<=X.span&&X.span>P.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof ie!="string")throw new TypeError("variant must have a String property")}let oe=P.span;0>P.span&&(oe=X?X.span:0,0<=oe&&P.usesPrefixDiscriminator&&(oe+=P.discriminator.layout.span)),super(oe,ie),this.union=P,this.variant=W,this.layout=X||null}getSpan(P,W=0){if(0<=this.span)return this.span;let X=0;this.union.usesPrefixDiscriminator&&(X=this.union.discriminator.layout.span);let ie=0;return this.layout&&(ie=this.layout.getSpan(P,W+X)),X+ie}decode(P,W=0){const X=this.makeDestinationObject();if(this!==this.union.getVariant(P,W))throw new Error("variant mismatch");let ie=0;return this.union.usesPrefixDiscriminator&&(ie=this.union.discriminator.layout.span),this.layout?X[this.property]=this.layout.decode(P,W+ie):this.property?X[this.property]=!0:this.union.usesPrefixDiscriminator&&(X[this.union.discriminator.property]=this.variant),X}encode(P,W,X=0){let ie=0;if(this.union.usesPrefixDiscriminator&&(ie=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(P,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,W,X);let oe=ie;if(this.layout&&(this.layout.encode(P[this.property],W,X+ie),oe+=this.layout.getSpan(W,X+ie),0<=this.union.span&&oe>this.union.span))throw new Error("encoded variant overruns containing union");return oe}fromArray(P){if(this.layout)return this.layout.fromArray(P)}}ze.VariantLayout=U;function A(M){return 0>M&&(M+=4294967296),M}class I extends r{constructor(P,W,X){if(!(P instanceof c||P instanceof d))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof W=="string"&&X===void 0&&(X=W,W=!1),4<P.span)throw new RangeError("word cannot exceed 32 bits");super(P.span,X),this.word=P,this.msb=!!W,this.fields=[];let ie=0;this._packedSetValue=function(oe){return ie=A(oe),this},this._packedGetValue=function(){return ie}}decode(P,W=0){const X=this.makeDestinationObject(),ie=this.word.decode(P,W);this._packedSetValue(ie);for(const oe of this.fields)oe.property!==void 0&&(X[oe.property]=oe.decode(P));return X}encode(P,W,X=0){const ie=this.word.decode(W,X);this._packedSetValue(ie);for(const oe of this.fields)if(oe.property!==void 0){const Te=P[oe.property];Te!==void 0&&oe.encode(Te)}return this.word.encode(this._packedGetValue(),W,X)}addField(P,W){const X=new j(this,P,W);return this.fields.push(X),X}addBoolean(P){const W=new q(this,P);return this.fields.push(W),W}fieldFor(P){if(typeof P!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===P)return W}}ze.BitStructure=I;class j{constructor(P,W,X){if(!(P instanceof I))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(W)||0>=W)throw new TypeError("bits must be positive integer");const ie=8*P.span,oe=P.fields.reduce((Te,ce)=>Te+ce.bits,0);if(W+oe>ie)throw new Error("bits too long for span remainder ("+(ie-oe)+" of "+ie+" remain)");this.container=P,this.bits=W,this.valueMask=(1<<W)-1,W===32&&(this.valueMask=4294967295),this.start=oe,this.container.msb&&(this.start=ie-oe-W),this.wordMask=A(this.valueMask<<this.start),this.property=X}decode(P,W){const X=this.container._packedGetValue();return A(X&this.wordMask)>>>this.start}encode(P){if(typeof P!="number"||!Number.isInteger(P)||P!==A(P&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const W=this.container._packedGetValue(),X=A(P<<this.start);this.container._packedSetValue(A(W&~this.wordMask)|X)}}ze.BitField=j;class q extends j{constructor(P,W){super(P,1,W)}decode(P,W){return!!super.decode(P,W)}encode(P){typeof P=="boolean"&&(P=+P),super.encode(P)}}ze.Boolean=q;class K extends r{constructor(P,W){if(!(P instanceof o&&P.isCount()||Number.isInteger(P)&&0<=P))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let X=-1;P instanceof o||(X=P),super(X,W),this.length=P}getSpan(P,W){let X=this.span;return 0>X&&(X=this.length.decode(P,W)),X}decode(P,W=0){let X=this.span;return 0>X&&(X=this.length.decode(P,W)),n(P).slice(W,W+X)}encode(P,W,X){let ie=this.length;if(this.length instanceof o&&(ie=P.length),!(P instanceof Uint8Array&&ie===P.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+ie+") Uint8Array as src");if(X+ie>W.length)throw new RangeError("encoding overruns Uint8Array");const oe=n(P);return n(W).write(oe.toString("hex"),X,ie,"hex"),this.length instanceof o&&this.length.encode(ie,W,X),ie}}ze.Blob=K;class te extends r{constructor(P){super(-1,P)}getSpan(P,W=0){e(P);let X=W;for(;X<P.length&&P[X]!==0;)X+=1;return 1+X-W}decode(P,W=0){const X=this.getSpan(P,W);return n(P).slice(W,W+X-1).toString("utf-8")}encode(P,W,X=0){typeof P!="string"&&(P=String(P));const ie=t.Buffer.from(P,"utf8"),oe=ie.length;if(X+oe>W.length)throw new RangeError("encoding overruns Buffer");const Te=n(W);return ie.copy(Te,X),Te[X+oe]=0,oe+1}}ze.CString=te;class Y extends r{constructor(P,W){if(typeof P=="string"&&W===void 0&&(W=P,P=void 0),P===void 0)P=-1;else if(!Number.isInteger(P))throw new TypeError("maxSpan must be an integer");super(-1,W),this.maxSpan=P}getSpan(P,W=0){return e(P),P.length-W}decode(P,W=0){const X=this.getSpan(P,W);if(0<=this.maxSpan&&this.maxSpan<X)throw new RangeError("text length exceeds maxSpan");return n(P).slice(W,W+X).toString("utf-8")}encode(P,W,X=0){typeof P!="string"&&(P=String(P));const ie=t.Buffer.from(P,"utf8"),oe=ie.length;if(0<=this.maxSpan&&this.maxSpan<oe)throw new RangeError("text length exceeds maxSpan");if(X+oe>W.length)throw new RangeError("encoding overruns Buffer");return ie.copy(n(W),X),oe}}ze.UTF8=Y;class H extends r{constructor(P,W){super(0,W),this.value=P}decode(P,W){return this.value}encode(P,W,X){return 0}}return ze.Constant=H,ze.greedy=((M,P)=>new a(M,P)),ze.offset=((M,P,W)=>new l(M,P,W)),ze.u8=(M=>new c(1,M)),ze.u16=(M=>new c(2,M)),ze.u24=(M=>new c(3,M)),ze.u32=(M=>new c(4,M)),ze.u40=(M=>new c(5,M)),ze.u48=(M=>new c(6,M)),ze.nu64=(M=>new b(M)),ze.u16be=(M=>new d(2,M)),ze.u24be=(M=>new d(3,M)),ze.u32be=(M=>new d(4,M)),ze.u40be=(M=>new d(5,M)),ze.u48be=(M=>new d(6,M)),ze.nu64be=(M=>new w(M)),ze.s8=(M=>new h(1,M)),ze.s16=(M=>new h(2,M)),ze.s24=(M=>new h(3,M)),ze.s32=(M=>new h(4,M)),ze.s40=(M=>new h(5,M)),ze.s48=(M=>new h(6,M)),ze.ns64=(M=>new k(M)),ze.s16be=(M=>new m(2,M)),ze.s24be=(M=>new m(3,M)),ze.s32be=(M=>new m(4,M)),ze.s40be=(M=>new m(5,M)),ze.s48be=(M=>new m(6,M)),ze.ns64be=(M=>new N(M)),ze.f32=(M=>new O(M)),ze.f32be=(M=>new D(M)),ze.f64=(M=>new _(M)),ze.f64be=(M=>new F(M)),ze.struct=((M,P,W)=>new L(M,P,W)),ze.bits=((M,P,W)=>new I(M,P,W)),ze.seq=((M,P,W)=>new z(M,P,W)),ze.union=((M,P,W)=>new V(M,P,W)),ze.unionLayoutDiscriminator=((M,P)=>new G(M,P)),ze.blob=((M,P)=>new K(M,P)),ze.cstr=(M=>new te(M)),ze.utf8=((M,P)=>new Y(M,P)),ze.constant=((M,P)=>new H(M,P)),ze}var we=Dft(),Bft=8078e3,Uft=8078001,Fft=8078004,$ft=8078005,zft=8078006,Vft=8078011;function l0e(t){return Array.isArray(t)?"%5B"+t.map(l0e).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Hft([t,e]){return`${t}=${l0e(e)}`}function qft(t){const e=Object.entries(t).map(Hft).join("&");return btoa(e)}function Gft(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${qft(e)}'`),`${n}\``}}var ky=class extends Error{constructor(...[e,n]){let r,i;if(n){const{cause:o,...a}=n;o&&(i={cause:o}),Object.keys(a).length>0&&(r=a)}const s=Gft(e,r);super(s,i);Ce(this,"cause",this.cause);Ce(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function Kft(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Wft(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(Kft(e,t));return t.write(e,n,0),n}})}function Yft(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function kg(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Jft(t,e){if(kg(t)!==kg(e))throw new ky(Fft);if(kg(t)&&kg(e)&&t.fixedSize!==e.fixedSize)throw new ky($ft,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!kg(t)&&!kg(e)&&t.maxSize!==e.maxSize)throw new ky(zft,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Xft(t,e,n=0){if(e.length-n<=0)throw new ky(Bft,{codecDescription:t})}function Qft(t,e,n,r=0){const i=n.length-r;if(i<e)throw new ky(Uft,{bytesLength:i,codecDescription:t,expected:e})}function Zft(t,e,n,r){if(r<e||r>n)throw new ky(Vft,{codecDescription:t,max:n,min:e,value:r})}function c0e(t){return(t==null?void 0:t.endian)!==1}function eht(t){return Wft({fixedSize:t.size,write(e,n,r){t.range&&Zft(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,c0e(t.config)),n.set(new Uint8Array(i),r),r+t.size}})}function tht(t){return Yft({fixedSize:t.size,read(e,n=0){Xft(t.name,e,n),Qft(t.name,t.size,e,n);const r=new DataView(nht(e,n,t.size));return[t.get(r,c0e(t.config)),n+t.size]}})}function nht(t,e,n){const r=t.byteOffset+(e??0),i=n??t.byteLength;return t.buffer.slice(r,r+i)}var rht=(t={})=>eht({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),iht=(t={})=>tht({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),sht=(t={})=>Jft(rht(t),iht(t));class oht extends TypeError{constructor(e,n){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function aht(t){return qE(t)&&typeof t[Symbol.iterator]=="function"}function qE(t){return typeof t=="object"&&t!=null}function hN(t){return qE(t)&&!Array.isArray(t)}function nc(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function lht(t){const{done:e,value:n}=t.next();return e?void 0:n}function cht(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${nc(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:l}}function*gee(t,e,n,r){aht(t)||(t=[t]);for(const i of t){const s=cht(i,e,n,r);s&&(yield s)}}function*jB(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,d,h]of e.entries(t,a)){const m=jB(d,h,{path:c===void 0?r:[...r,c],branch:c===void 0?i:[...i,d],coerce:s,mask:o,message:n.message});for(const g of m)g[0]?(l=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):s&&(d=g[1],c===void 0?t=d:t instanceof Map?t.set(c,d):t instanceof Set?t.add(d):qE(t)&&(d!==void 0||c in t)&&(t[c]=d))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let uu=class{constructor(e){const{type:n,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,c)=>{const d=i(l,c);return gee(d,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const d=s(l,c);return gee(d,c,this,l)}:this.refiner=()=>[]}assert(e,n){return uht(e,this,n)}create(e,n){return bt(e,this,n)}is(e){return u0e(e,this)}mask(e,n){return dht(e,this,n)}validate(e,n={}){return GE(e,this,n)}};function uht(t,e,n){const r=GE(t,e,{message:n});if(r[0])throw r[0]}function bt(t,e,n){const r=GE(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function dht(t,e,n){const r=GE(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function u0e(t,e){return!GE(t,e)[0]}function GE(t,e,n={}){const r=jB(t,e,n),i=lht(r);return i[0]?[new oht(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function m0(t,e){return new uu({type:t,schema:null,validator:e})}function fht(){return m0("any",()=>!0)}function At(t){return new uu({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${nc(e)}`}})}function tu(){return m0("boolean",t=>typeof t=="boolean")}function DB(t){return m0("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${nc(e)}`)}function Ur(t){const e=nc(t),n=typeof t;return new uu({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${nc(r)}`}})}function hht(){return m0("never",()=>!1)}function kt(t){return new uu({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function Me(){return m0("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${nc(t)}`)}function Wt(t){return new uu({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function d0e(t,e){return new uu({type:"record",schema:null,*entries(n){if(qE(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator(n){return hN(n)||`Expected an object, but received: ${nc(n)}`},coercer(n){return hN(n)?{...n}:n}})}function mt(){return m0("string",t=>typeof t=="string"||`Expected a string, but received: ${nc(t)}`)}function BB(t){const e=hht();return new uu({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${nc(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function lt(t){const e=Object.keys(t);return new uu({type:"type",schema:t,*entries(n){if(qE(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return hN(n)||`Expected an object, but received: ${nc(n)}`},coercer(n){return hN(n)?{...n}:n}})}function ho(t){const e=t.map(n=>n.type).join(" | ");return new uu({type:"union",schema:null,coercer(n,r){for(const i of t){const[s,o]=i.validate(n,{coerce:!0,mask:r.mask});if(!s)return o}return n},validator(n,r){const i=[];for(const s of t){const[...o]=jB(n,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${nc(n)}`,...i]}})}function Ov(){return m0("unknown",()=>!0)}function KE(t,e,n){return new uu({...t,coercer:(r,i)=>u0e(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var v2,pht=new Uint8Array(16);function f0e(){if(!v2&&(v2=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!v2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v2(pht)}const mht=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function PP(t){return typeof t=="string"&&mht.test(t)}var ss=[];for(var rO=0;rO<256;++rO)ss.push((rO+256).toString(16).substr(1));function _P(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ss[t[e+0]]+ss[t[e+1]]+ss[t[e+2]]+ss[t[e+3]]+"-"+ss[t[e+4]]+ss[t[e+5]]+"-"+ss[t[e+6]]+ss[t[e+7]]+"-"+ss[t[e+8]]+ss[t[e+9]]+"-"+ss[t[e+10]]+ss[t[e+11]]+ss[t[e+12]]+ss[t[e+13]]+ss[t[e+14]]+ss[t[e+15]]).toLowerCase();if(!PP(n))throw TypeError("Stringified UUID is invalid");return n}var yee,iO,sO=0,oO=0;function ght(t,e,n){var r=e&&n||0,i=e||new Array(16);t=t||{};var s=t.node||yee,o=t.clockseq!==void 0?t.clockseq:iO;if(s==null||o==null){var a=t.random||(t.rng||f0e)();s==null&&(s=yee=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=iO=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:oO+1,d=l-sO+(c-oO)/1e4;if(d<0&&t.clockseq===void 0&&(o=o+1&16383),(d<0||l>sO)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");sO=l,oO=c,iO=o,l+=122192928e5;var h=((l&268435455)*1e4+c)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=h&255;var m=l/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=m&255,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var g=0;g<6;++g)i[r+g]=s[g];return e||_P(i)}function h0e(t){if(!PP(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function yht(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var xht="6ba7b810-9dad-11d1-80b4-00c04fd430c8",vht="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function p0e(t,e,n){function r(i,s,o,a){if(typeof i=="string"&&(i=yht(i)),typeof s=="string"&&(s=h0e(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return _P(l)}try{r.name=t}catch{}return r.DNS=xht,r.URL=vht,r}function bht(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return wht(Eht(Sht(t),t.length*8))}function wht(t){for(var e=[],n=t.length*32,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function m0e(t){return(t+64>>>9<<4)+14+1}function Eht(t,e){t[e>>5]|=128<<e%32,t[m0e(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=r,c=i,d=s;n=Ss(n,r,i,s,t[o],7,-680876936),s=Ss(s,n,r,i,t[o+1],12,-389564586),i=Ss(i,s,n,r,t[o+2],17,606105819),r=Ss(r,i,s,n,t[o+3],22,-1044525330),n=Ss(n,r,i,s,t[o+4],7,-176418897),s=Ss(s,n,r,i,t[o+5],12,1200080426),i=Ss(i,s,n,r,t[o+6],17,-1473231341),r=Ss(r,i,s,n,t[o+7],22,-45705983),n=Ss(n,r,i,s,t[o+8],7,1770035416),s=Ss(s,n,r,i,t[o+9],12,-1958414417),i=Ss(i,s,n,r,t[o+10],17,-42063),r=Ss(r,i,s,n,t[o+11],22,-1990404162),n=Ss(n,r,i,s,t[o+12],7,1804603682),s=Ss(s,n,r,i,t[o+13],12,-40341101),i=Ss(i,s,n,r,t[o+14],17,-1502002290),r=Ss(r,i,s,n,t[o+15],22,1236535329),n=As(n,r,i,s,t[o+1],5,-165796510),s=As(s,n,r,i,t[o+6],9,-1069501632),i=As(i,s,n,r,t[o+11],14,643717713),r=As(r,i,s,n,t[o],20,-373897302),n=As(n,r,i,s,t[o+5],5,-701558691),s=As(s,n,r,i,t[o+10],9,38016083),i=As(i,s,n,r,t[o+15],14,-660478335),r=As(r,i,s,n,t[o+4],20,-405537848),n=As(n,r,i,s,t[o+9],5,568446438),s=As(s,n,r,i,t[o+14],9,-1019803690),i=As(i,s,n,r,t[o+3],14,-187363961),r=As(r,i,s,n,t[o+8],20,1163531501),n=As(n,r,i,s,t[o+13],5,-1444681467),s=As(s,n,r,i,t[o+2],9,-51403784),i=As(i,s,n,r,t[o+7],14,1735328473),r=As(r,i,s,n,t[o+12],20,-1926607734),n=Ts(n,r,i,s,t[o+5],4,-378558),s=Ts(s,n,r,i,t[o+8],11,-2022574463),i=Ts(i,s,n,r,t[o+11],16,1839030562),r=Ts(r,i,s,n,t[o+14],23,-35309556),n=Ts(n,r,i,s,t[o+1],4,-1530992060),s=Ts(s,n,r,i,t[o+4],11,1272893353),i=Ts(i,s,n,r,t[o+7],16,-155497632),r=Ts(r,i,s,n,t[o+10],23,-1094730640),n=Ts(n,r,i,s,t[o+13],4,681279174),s=Ts(s,n,r,i,t[o],11,-358537222),i=Ts(i,s,n,r,t[o+3],16,-722521979),r=Ts(r,i,s,n,t[o+6],23,76029189),n=Ts(n,r,i,s,t[o+9],4,-640364487),s=Ts(s,n,r,i,t[o+12],11,-421815835),i=Ts(i,s,n,r,t[o+15],16,530742520),r=Ts(r,i,s,n,t[o+2],23,-995338651),n=ks(n,r,i,s,t[o],6,-198630844),s=ks(s,n,r,i,t[o+7],10,1126891415),i=ks(i,s,n,r,t[o+14],15,-1416354905),r=ks(r,i,s,n,t[o+5],21,-57434055),n=ks(n,r,i,s,t[o+12],6,1700485571),s=ks(s,n,r,i,t[o+3],10,-1894986606),i=ks(i,s,n,r,t[o+10],15,-1051523),r=ks(r,i,s,n,t[o+1],21,-2054922799),n=ks(n,r,i,s,t[o+8],6,1873313359),s=ks(s,n,r,i,t[o+15],10,-30611744),i=ks(i,s,n,r,t[o+6],15,-1560198380),r=ks(r,i,s,n,t[o+13],21,1309151649),n=ks(n,r,i,s,t[o+4],6,-145523070),s=ks(s,n,r,i,t[o+11],10,-1120210379),i=ks(i,s,n,r,t[o+2],15,718787259),r=ks(r,i,s,n,t[o+9],21,-343485551),n=wh(n,a),r=wh(r,l),i=wh(i,c),s=wh(s,d)}return[n,r,i,s]}function Sht(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(m0e(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function wh(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function Aht(t,e){return t<<e|t>>>32-e}function IP(t,e,n,r,i,s){return wh(Aht(wh(wh(e,t),wh(r,s)),i),n)}function Ss(t,e,n,r,i,s,o){return IP(e&n|~e&r,t,e,i,s,o)}function As(t,e,n,r,i,s,o){return IP(e&r|n&~r,t,e,i,s,o)}function Ts(t,e,n,r,i,s,o){return IP(e^n^r,t,e,i,s,o)}function ks(t,e,n,r,i,s,o){return IP(n^(e|~r),t,e,i,s,o)}var Tht=p0e("v3",48,bht);function kht(t,e,n){t=t||{};var r=t.random||(t.rng||f0e)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return _P(r)}function Nht(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function aO(t,e){return t<<e|t>>>32-e}function Cht(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),d=0;d<16;++d)c[d]=t[l*64+d*4]<<24|t[l*64+d*4+1]<<16|t[l*64+d*4+2]<<8|t[l*64+d*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var m=new Uint32Array(80),g=0;g<16;++g)m[g]=a[h][g];for(var v=16;v<80;++v)m[v]=aO(m[v-3]^m[v-8]^m[v-14]^m[v-16],1);for(var x=n[0],b=n[1],w=n[2],k=n[3],N=n[4],O=0;O<80;++O){var D=Math.floor(O/20),_=aO(x,5)+Nht(D,b,w,k)+N+e[D]+m[O]>>>0;N=k,k=w,w=aO(b,30)>>>0,b=x,x=_}n[0]=n[0]+x>>>0,n[1]=n[1]+b>>>0,n[2]=n[2]+w>>>0,n[3]=n[3]+k>>>0,n[4]=n[4]+N>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var Pht=p0e("v5",80,Cht);const _ht="00000000-0000-0000-0000-000000000000";function Iht(t){if(!PP(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Rht=Object.freeze(Object.defineProperty({__proto__:null,NIL:_ht,parse:h0e,stringify:_P,v1:ght,v3:Tht,v4:kht,v5:Pht,validate:PP,version:Iht},Symbol.toStringTag,{value:"Module"})),g0e=ste(Rht);var lO,xee;function Oht(){if(xee)return lO;xee=1;const t=g0e.v4;return lO=function(n,r,i,s){if(typeof n!="string")throw new TypeError(n+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:n};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof i>"u"){const l=typeof s.generator=="function"?s.generator:function(){return t()};a.id=l(a,s)}else o===2&&i===null?s.notificationIdNull&&(a.id=null):a.id=i;return a},lO}var cO,vee;function Mht(){if(vee)return cO;vee=1;const t=g0e.v4,e=Oht(),n=function(r,i){if(!(this instanceof n))return new n(r,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return t()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=r};return cO=n,n.prototype.request=function(r,i,s,o){const a=this;let l=null;const c=Array.isArray(r)&&typeof i=="function";if(this.options.version===1&&c)throw new TypeError("JSON-RPC 1.0 does not support batching");if(c||!c&&r&&typeof r=="object"&&typeof i=="function")o=i,l=r;else{typeof s=="function"&&(o=s,s=void 0);const m=typeof o=="function";try{l=e(r,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(g){if(m){o(g);return}throw g}if(!m)return l}let h;try{h=JSON.stringify(l,this.options.replacer)}catch(m){o(m);return}return this.callServer(h,function(m,g){a._parseResponse(m,g,o)}),l},n.prototype._parseResponse=function(r,i,s){if(r){s(r);return}if(!i){s();return}let o;try{o=JSON.parse(i,this.options.reviver)}catch(a){s(a);return}if(s.length===3)if(Array.isArray(o)){const a=function(c){return typeof c.error<"u"},l=function(c){return!a(c)};s(null,o.filter(a),o.filter(l));return}else{s(null,o.error,o.result);return}s(null,o)},cO}var Lht=Mht();const jht=bs(Lht);var Dht=class extends y7{constructor(e,n){super();Ce(this,"socket");this.socket=new window.WebSocket(e,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(e,n,r){const i=r||n;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,r){this.socket.addEventListener(e,n,r)}};function Bht(t,e){return new Dht(t,e)}var Uht=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},Fht=class extends y7{constructor(e,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();Ce(this,"address");Ce(this,"rpc_id");Ce(this,"queue");Ce(this,"options");Ce(this,"autoconnect");Ce(this,"ready");Ce(this,"reconnect");Ce(this,"reconnect_timer_id");Ce(this,"reconnect_interval");Ce(this,"max_reconnects");Ce(this,"rest_options");Ce(this,"current_reconnects");Ce(this,"generate_request_id");Ce(this,"socket");Ce(this,"webSocketFactory");Ce(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new Uht,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket&&this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=dn.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}};class y0e extends Lme{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Ome(e);const r=CB(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),qx(s)}update(e){return sN(this),this.iHash.update(e),this}digestInto(e){sN(this),h0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const x0e=(t,e,n)=>new y0e(t,e).update(n).digest();x0e.create=(t,e)=>new y0e(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bee=(t,e)=>(t+(t>=0?e:-e)/v0e)/e;function $ht(t,e,n){const[[r,i],[s,o]]=e,a=bee(o*t,n),l=bee(-i*t,n);let c=t-a*r-l*s,d=-a*i-l*o;const h=c<hd,m=d<hd;h&&(c=-c),m&&(d=-d);const g=VE(Math.ceil(zme(n)/2))+Ny;if(c<hd||c>=g||d<hd||d>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:c,k2neg:m,k2:d}}function Uj(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function uO(t,e){const n={};for(let r of Object.keys(e))n[r]=t[r]===void 0?e[r]:t[r];return Zm(n.lowS,"lowS"),Zm(n.prehash,"prehash"),n.format!==void 0&&Uj(n.format),n}class zht extends Error{constructor(e=""){super(e)}}const qu={Err:zht,_tlv:{encode:(t,e)=>{const{Err:n}=qu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=y2(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?y2(i.length/2|128):"";return y2(t)+s+i+e},decode(t,e){const{Err:n}=qu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const d of c)o=o<<8|d;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=qu;if(t<hd)throw new e("integer: negative integers are not allowed");let n=y2(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=qu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return NP(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=qu,i=Xr("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:c,l:d}=r.decode(2,l);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=qu,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},hd=BigInt(0),Ny=BigInt(1),v0e=BigInt(2),b2=BigInt(3),Vht=BigInt(4);function Zg(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let i=Xr("private key",e);try{r=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Hht(t,e={}){const n=i0e("weierstrass",t,e),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o,n:a}=s;HE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!r.is0(s.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=w0e(r,i);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(V,U,A){const{x:I,y:j}=U.toAffine(),q=r.toBytes(I);if(Zm(A,"isCompressed"),A){d();const K=!r.isOdd(j);return Mc(b0e(K),q)}else return Mc(Uint8Array.of(4),q,r.toBytes(j))}function m(V){Hl(V,void 0,"Point");const{publicKey:U,publicKeyUncompressed:A}=c,I=V.length,j=V[0],q=V.subarray(1);if(I===U&&(j===2||j===3)){const K=r.fromBytes(q);if(!r.isValid(K))throw new Error("bad point: is not on curve, wrong x");const te=x(K);let Y;try{Y=r.sqrt(te)}catch(P){const W=P instanceof Error?": "+P.message:"";throw new Error("bad point: is not on curve, sqrt error"+W)}d();const H=r.isOdd(Y);return(j&1)===1!==H&&(Y=r.neg(Y)),{x:K,y:Y}}else if(I===A&&j===4){const K=r.BYTES,te=r.fromBytes(q.subarray(0,K)),Y=r.fromBytes(q.subarray(K,K*2));if(!b(te,Y))throw new Error("bad point: is not on curve");return{x:te,y:Y}}else throw new Error(`bad point: got length ${I}, expected compressed=${U} or uncompressed=${A}`)}const g=e.toBytes||h,v=e.fromBytes||m;function x(V){const U=r.sqr(V),A=r.mul(U,V);return r.add(r.add(A,r.mul(V,s.a)),s.b)}function b(V,U){const A=r.sqr(U),I=x(V);return r.eql(A,I)}if(!b(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const w=r.mul(r.pow(s.a,b2),Vht),k=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(w,k)))throw new Error("bad curve params: a or b");function N(V,U,A=!1){if(!r.isValid(U)||A&&r.is0(U))throw new Error(`bad point coordinate ${V}`);return U}function O(V){if(!(V instanceof L))throw new Error("ProjectivePoint expected")}function D(V){if(!l||!l.basises)throw new Error("no endo");return $ht(V,l.basises,i.ORDER)}const _=aN((V,U)=>{const{X:A,Y:I,Z:j}=V;if(r.eql(j,r.ONE))return{x:A,y:I};const q=V.is0();U==null&&(U=q?r.ONE:r.inv(j));const K=r.mul(A,U),te=r.mul(I,U),Y=r.mul(j,U);if(q)return{x:r.ZERO,y:r.ZERO};if(!r.eql(Y,r.ONE))throw new Error("invZ was invalid");return{x:K,y:te}}),F=aN(V=>{if(V.is0()){if(e.allowInfinityPoint&&!r.is0(V.Y))return;throw new Error("bad point: ZERO")}const{x:U,y:A}=V.toAffine();if(!r.isValid(U)||!r.isValid(A))throw new Error("bad point: x or y not field elements");if(!b(U,A))throw new Error("bad point: equation left != right");if(!V.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function z(V,U,A,I,j){return A=new L(r.mul(A.X,V),A.Y,A.Z),U=lN(I,U),A=lN(j,A),U.add(A)}class L{constructor(U,A,I){this.X=N("x",U),this.Y=N("y",A,!0),this.Z=N("z",I),Object.freeze(this)}static CURVE(){return s}static fromAffine(U){const{x:A,y:I}=U||{};if(!U||!r.isValid(A)||!r.isValid(I))throw new Error("invalid affine point");if(U instanceof L)throw new Error("projective point not allowed");return r.is0(A)&&r.is0(I)?L.ZERO:new L(A,I,r.ONE)}static fromBytes(U){const A=L.fromAffine(v(Hl(U,void 0,"point")));return A.assertValidity(),A}static fromHex(U){return L.fromBytes(Xr("pointHex",U))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(U=8,A=!0){return G.createCache(this,U),A||this.multiply(b2),this}assertValidity(){F(this)}hasEvenY(){const{y:U}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(U)}equals(U){O(U);const{X:A,Y:I,Z:j}=this,{X:q,Y:K,Z:te}=U,Y=r.eql(r.mul(A,te),r.mul(q,j)),H=r.eql(r.mul(I,te),r.mul(K,j));return Y&&H}negate(){return new L(this.X,r.neg(this.Y),this.Z)}double(){const{a:U,b:A}=s,I=r.mul(A,b2),{X:j,Y:q,Z:K}=this;let te=r.ZERO,Y=r.ZERO,H=r.ZERO,M=r.mul(j,j),P=r.mul(q,q),W=r.mul(K,K),X=r.mul(j,q);return X=r.add(X,X),H=r.mul(j,K),H=r.add(H,H),te=r.mul(U,H),Y=r.mul(I,W),Y=r.add(te,Y),te=r.sub(P,Y),Y=r.add(P,Y),Y=r.mul(te,Y),te=r.mul(X,te),H=r.mul(I,H),W=r.mul(U,W),X=r.sub(M,W),X=r.mul(U,X),X=r.add(X,H),H=r.add(M,M),M=r.add(H,M),M=r.add(M,W),M=r.mul(M,X),Y=r.add(Y,M),W=r.mul(q,K),W=r.add(W,W),M=r.mul(W,X),te=r.sub(te,M),H=r.mul(W,P),H=r.add(H,H),H=r.add(H,H),new L(te,Y,H)}add(U){O(U);const{X:A,Y:I,Z:j}=this,{X:q,Y:K,Z:te}=U;let Y=r.ZERO,H=r.ZERO,M=r.ZERO;const P=s.a,W=r.mul(s.b,b2);let X=r.mul(A,q),ie=r.mul(I,K),oe=r.mul(j,te),Te=r.add(A,I),ce=r.add(q,K);Te=r.mul(Te,ce),ce=r.add(X,ie),Te=r.sub(Te,ce),ce=r.add(A,j);let de=r.add(q,te);return ce=r.mul(ce,de),de=r.add(X,oe),ce=r.sub(ce,de),de=r.add(I,j),Y=r.add(K,te),de=r.mul(de,Y),Y=r.add(ie,oe),de=r.sub(de,Y),M=r.mul(P,ce),Y=r.mul(W,oe),M=r.add(Y,M),Y=r.sub(ie,M),M=r.add(ie,M),H=r.mul(Y,M),ie=r.add(X,X),ie=r.add(ie,X),oe=r.mul(P,oe),ce=r.mul(W,ce),ie=r.add(ie,oe),oe=r.sub(X,oe),oe=r.mul(P,oe),ce=r.add(ce,oe),X=r.mul(ie,ce),H=r.add(H,X),X=r.mul(de,ce),Y=r.mul(Te,Y),Y=r.sub(Y,X),X=r.mul(Te,ie),M=r.mul(de,M),M=r.add(M,X),new L(Y,H,M)}subtract(U){return this.add(U.negate())}is0(){return this.equals(L.ZERO)}multiply(U){const{endo:A}=e;if(!i.isValidNot0(U))throw new Error("invalid scalar: out of range");let I,j;const q=K=>G.cached(this,K,te=>Zp(L,te));if(A){const{k1neg:K,k1:te,k2neg:Y,k2:H}=D(U),{p:M,f:P}=q(te),{p:W,f:X}=q(H);j=P.add(X),I=z(A.beta,M,W,K,Y)}else{const{p:K,f:te}=q(U);I=K,j=te}return Zp(L,[I,j])[0]}multiplyUnsafe(U){const{endo:A}=e,I=this;if(!i.isValid(U))throw new Error("invalid scalar: out of range");if(U===hd||I.is0())return L.ZERO;if(U===Ny)return I;if(G.hasCache(this))return this.multiply(U);if(A){const{k1neg:j,k1:q,k2neg:K,k2:te}=D(U),{p1:Y,p2:H}=aft(L,I,q,te);return z(A.beta,Y,H,j,K)}else return G.unsafe(I,U)}multiplyAndAddUnsafe(U,A,I){const j=this.multiplyUnsafe(A).add(U.multiplyUnsafe(I));return j.is0()?void 0:j}toAffine(U){return _(this,U)}isTorsionFree(){const{isTorsionFree:U}=e;return o===Ny?!0:U?U(L,this):G.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:U}=e;return o===Ny?this:U?U(L,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(U=!0){return Zm(U,"isCompressed"),this.assertValidity(),g(L,this,U)}toHex(U=!0){return Om(this.toBytes(U))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(U=!0){return this.toBytes(U)}_setWindowSize(U){this.precompute(U)}static normalizeZ(U){return Zp(L,U)}static msm(U,A){return r0e(L,i,U,A)}static fromPrivateKey(U){return L.BASE.multiply(Zg(i,U))}}L.BASE=new L(s.Gx,s.Gy,r.ONE),L.ZERO=new L(r.ZERO,r.ONE,r.ZERO),L.Fp=r,L.Fn=i;const $=i.BITS,G=new n0e(L,e.endo?Math.ceil($/2):$);return L.BASE.precompute(8),L}function b0e(t){return Uint8Array.of(t?2:3)}function w0e(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function qht(t,e={}){const{Fn:n}=t,r=e.randomBytes||PB,i=Object.assign(w0e(t.Fp,n),{seed:Zme(n.ORDER)});function s(g){try{return!!Zg(n,g)}catch{return!1}}function o(g,v){const{publicKey:x,publicKeyUncompressed:b}=i;try{const w=g.length;return v===!0&&w!==x||v===!1&&w!==b?!1:!!t.fromBytes(g)}catch{return!1}}function a(g=r(i.seed)){return ift(Hl(g,i.seed,"seed"),n.ORDER)}function l(g,v=!0){return t.BASE.multiply(Zg(n,g)).toBytes(v)}function c(g){const v=a(g);return{secretKey:v,publicKey:l(v)}}function d(g){if(typeof g=="bigint")return!1;if(g instanceof t)return!0;const{secretKey:v,publicKey:x,publicKeyUncompressed:b}=i;if(n.allowedLengths||v===x)return;const w=Xr("key",g).length;return w===x||w===b}function h(g,v,x=!0){if(d(g)===!0)throw new Error("first arg must be private key");if(d(v)===!1)throw new Error("second arg must be public key");const b=Zg(n,g);return t.fromHex(v).multiply(b).toBytes(x)}return Object.freeze({getPublicKey:l,getSharedSecret:h,keygen:c,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:g=>Zg(n,g),precompute(g=8,v=t.BASE){return v.precompute(g,!1)}},lengths:i})}function Ght(t,e,n={}){Ome(e),HE(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||PB,i=n.hmac||((A,...I)=>x0e(e,A,Mc(...I))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:l}=o,{keygen:c,getPublicKey:d,getSharedSecret:h,utils:m,lengths:g}=qht(t,n),v={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},x="compact";function b(A){const I=a>>Ny;return A>I}function w(A,I){if(!o.isValidNot0(I))throw new Error(`invalid signature ${A}: out of range 1..Point.Fn.ORDER`);return I}function k(A,I){Uj(I);const j=g.signature,q=I==="compact"?j:I==="recovered"?j+1:void 0;return Hl(A,q,`${I} signature`)}class N{constructor(I,j,q){this.r=w("r",I),this.s=w("s",j),q!=null&&(this.recovery=q),Object.freeze(this)}static fromBytes(I,j=x){k(I,j);let q;if(j==="der"){const{r:H,s:M}=qu.toSig(Hl(I));return new N(H,M)}j==="recovered"&&(q=I[0],j="compact",I=I.subarray(1));const K=o.BYTES,te=I.subarray(0,K),Y=I.subarray(K,K*2);return new N(o.fromBytes(te),o.fromBytes(Y),q)}static fromHex(I,j){return this.fromBytes(oN(I),j)}addRecoveryBit(I){return new N(this.r,this.s,I)}recoverPublicKey(I){const j=s.ORDER,{r:q,s:K,recovery:te}=this;if(te==null||![0,1,2,3].includes(te))throw new Error("recovery id invalid");if(a*v0e<j&&te>1)throw new Error("recovery id is ambiguous for h>1 curve");const H=te===2||te===3?q+a:q;if(!s.isValid(H))throw new Error("recovery id 2 or 3 invalid");const M=s.toBytes(H),P=t.fromBytes(Mc(b0e((te&1)===0),M)),W=o.inv(H),X=D(Xr("msgHash",I)),ie=o.create(-X*W),oe=o.create(K*W),Te=t.BASE.multiplyUnsafe(ie).add(P.multiplyUnsafe(oe));if(Te.is0())throw new Error("point at infinify");return Te.assertValidity(),Te}hasHighS(){return b(this.s)}toBytes(I=x){if(Uj(I),I==="der")return oN(qu.hexFromSig(this));const j=o.toBytes(this.r),q=o.toBytes(this.s);if(I==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Mc(Uint8Array.of(this.recovery),j,q)}return Mc(j,q)}toHex(I){return Om(this.toBytes(I))}assertValidity(){}static fromCompact(I){return N.fromBytes(Xr("sig",I),"compact")}static fromDER(I){return N.fromBytes(Xr("sig",I),"der")}normalizeS(){return this.hasHighS()?new N(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Om(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Om(this.toBytes("compact"))}}const O=n.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const j=NP(I),q=I.length*8-l;return q>0?j>>BigInt(q):j},D=n.bits2int_modN||function(I){return o.create(O(I))},_=VE(l);function F(A){return Bj("num < 2^"+l,A,hd,_),o.toBytes(A)}function z(A,I){return Hl(A,void 0,"message"),I?Hl(e(A),void 0,"prehashed message"):A}function L(A,I,j){if(["recovered","canonical"].some(ie=>ie in j))throw new Error("sign() legacy options not supported");const{lowS:q,prehash:K,extraEntropy:te}=uO(j,v);A=z(A,K);const Y=D(A),H=Zg(o,I),M=[F(H),F(Y)];if(te!=null&&te!==!1){const ie=te===!0?r(g.secretKey):te;M.push(Xr("extraEntropy",ie))}const P=Mc(...M),W=Y;function X(ie){const oe=O(ie);if(!o.isValidNot0(oe))return;const Te=o.inv(oe),ce=t.BASE.multiply(oe).toAffine(),de=o.create(ce.x);if(de===hd)return;const ke=o.create(Te*o.create(W+de*H));if(ke===hd)return;let ye=(ce.x===de?0:2)|Number(ce.y&Ny),Ke=ke;return q&&b(ke)&&(Ke=o.neg(ke),ye^=1),new N(de,Ke,ye)}return{seed:P,k2sig:X}}function $(A,I,j={}){A=Xr("message",A);const{seed:q,k2sig:K}=L(A,I,j);return Wdt(e.outputLen,o.BYTES,i)(q,K)}function G(A){let I;const j=typeof A=="string"||zE(A),q=!j&&A!==null&&typeof A=="object"&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!j&&!q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(q)I=new N(A.r,A.s);else if(j){try{I=N.fromBytes(Xr("sig",A),"der")}catch(K){if(!(K instanceof qu.Err))throw K}if(!I)try{I=N.fromBytes(Xr("sig",A),"compact")}catch{return!1}}return I||!1}function V(A,I,j,q={}){const{lowS:K,prehash:te,format:Y}=uO(q,v);if(j=Xr("publicKey",j),I=z(Xr("message",I),te),"strict"in q)throw new Error("options.strict was renamed to lowS");const H=Y===void 0?G(A):N.fromBytes(Xr("sig",A),Y);if(H===!1)return!1;try{const M=t.fromBytes(j);if(K&&H.hasHighS())return!1;const{r:P,s:W}=H,X=D(I),ie=o.inv(W),oe=o.create(X*ie),Te=o.create(P*ie),ce=t.BASE.multiplyUnsafe(oe).add(M.multiplyUnsafe(Te));return ce.is0()?!1:o.create(ce.x)===P}catch{return!1}}function U(A,I,j={}){const{prehash:q}=uO(j,v);return I=z(I,q),N.fromBytes(A,"recovered").recoverPublicKey(I).toBytes()}return Object.freeze({keygen:c,getPublicKey:d,getSharedSecret:h,utils:m,lengths:g,Point:t,sign:$,verify:V,recoverPublicKey:U,Signature:N,hash:e})}function Kht(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=p0(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),s={Fp:n,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Wht(t){const{CURVE:e,curveOpts:n}=Kht(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function Yht(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,Xme(n.Fn.ORDER,n.Fn.BITS))})}function Jht(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:i}=Wht(t),s=Hht(e,n),o=Ght(s,r,i);return Yht(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Xht(t,e){const n=r=>Jht({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const UB={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Qht={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},wee=BigInt(2);function Zht(t){const e=UB.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,d=c*c*t%e,h=Kr(d,n,e)*d%e,m=Kr(h,n,e)*d%e,g=Kr(m,wee,e)*c%e,v=Kr(g,i,e)*g%e,x=Kr(v,s,e)*v%e,b=Kr(x,a,e)*x%e,w=Kr(b,l,e)*b%e,k=Kr(w,a,e)*x%e,N=Kr(k,n,e)*d%e,O=Kr(N,o,e)*v%e,D=Kr(O,r,e)*c%e,_=Kr(D,wee,e);if(!Fj.eql(Fj.sqr(_),t))throw new Error("Cannot find square root");return _}const Fj=p0(UB.p,{sqrt:Zht}),ept=Xht({...UB,Fp:Fj,lowS:!0,endo:Qht},Ume);Rv.utils.randomPrivateKey;const Eee=()=>{const t=Rv.utils.randomPrivateKey(),e=$j(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),{publicKey:e,secretKey:n}},$j=Rv.getPublicKey;function See(t){try{return Rv.ExtendedPoint.fromHex(t),!0}catch{return!1}}const tpt=(t,e)=>Rv.sign(t,e.slice(0,32)),npt=Rv.verify,$i=t=>dn.isBuffer(t)?t:t instanceof Uint8Array?dn.from(t.buffer,t.byteOffset,t.byteLength):dn.from(t);class rpt{constructor(e){Object.assign(this,e)}encode(){return dn.from(nO.serialize(oT,this))}static decode(e){return nO.deserialize(oT,this,e)}static decodeUnchecked(e){return nO.deserializeUnchecked(oT,this,e)}}const oT=new Map;var E0e;const ipt=32,kh=32;function spt(t){return t._bn!==void 0}let Aee=1;class vt extends rpt{constructor(e){if(super({}),this._bn=void 0,spt(e))this._bn=e._bn;else{if(typeof e=="string"){const n=ms.decode(e);if(n.length!=kh)throw new Error("Invalid public key input");this._bn=new aee(n)}else this._bn=new aee(e);if(this._bn.byteLength()>kh)throw new Error("Invalid public key input")}}static unique(){const e=new vt(Aee);return Aee+=1,new vt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ms.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(dn);if(e.length===kh)return e;const n=dn.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const i=dn.concat([e.toBuffer(),dn.from(n),r.toBuffer()]),s=dee(i);return new vt(s)}static createProgramAddressSync(e,n){let r=dn.alloc(0);e.forEach(function(s){if(s.length>ipt)throw new TypeError("Max seed length exceeded");r=dn.concat([r,$i(s)])}),r=dn.concat([r,n.toBuffer(),dn.from("ProgramDerivedAddress")]);const i=dee(r);if(See(i))throw new Error("Invalid seeds, address must fall off the curve");return new vt(i)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,i;for(;r!=0;){try{const s=e.concat(dn.from([r]));i=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new vt(e);return See(n.toBytes())}}E0e=vt;vt.default=new E0e("11111111111111111111111111111111");oT.set(vt,{kind:"struct",fields:[["_bn","u256"]]});new vt("BPFLoader1111111111111111111111111111111111");const Cy=1232,S0e=127,A0e=64;class T0e extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(T0e.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class k0e extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(k0e.prototype,"name",{value:"TransactionExpiredTimeoutError"});class f1 extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(f1.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class pN{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const Tn=(t="publicKey")=>we.blob(32,t),ey=(t="string")=>{const e=we.struct([we.u32("length"),we.u32("lengthPadding"),we.blob(we.offset(we.u32(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>n(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:dn.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>we.u32().span+we.u32().span+dn.from(s,"utf8").length,i},opt=(t="authorized")=>we.struct([Tn("staker"),Tn("withdrawer")],t),apt=(t="lockup")=>we.struct([we.ns64("unixTimestamp"),we.ns64("epoch"),Tn("custodian")],t),lpt=(t="voteInit")=>we.struct([Tn("nodePubkey"),Tn("authorizedVoter"),Tn("authorizedWithdrawer"),we.u8("commission")],t),cpt=(t="voteAuthorizeWithSeedArgs")=>we.struct([we.u32("voteAuthorizationType"),Tn("currentAuthorityDerivedKeyOwnerPubkey"),ey("currentAuthorityDerivedKeySeed"),Tn("newAuthorized")],t);function N0e(t,e){const n=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*n(i.elementLayout)}else if("fields"in i)return N0e({layout:i},e[i.property]);return 0};let r=0;return t.layout.fields.forEach(i=>{r+=n(i)}),r}function Wa(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,(r&128)===0)break}return e}function Ya(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function Qr(t,e){if(!t)throw new Error(e||"Assertion failed")}class RP{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new RP(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Qr(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{Qr(n.length>0,"Expected at least one writable signer key");const[l]=n[0];Qr(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new vt(l)),...r.map(([l])=>new vt(l)),...i.map(([l])=>new vt(l)),...s.map(([l])=>new vt(l))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,n){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new vt(s),l=e.findIndex(c=>c.equals(a));l>=0&&(Qr(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const C0e="Reached end of buffer unexpectedly";function ad(t){if(t.length===0)throw new Error(C0e);return t.shift()}function Ja(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(C0e);return t.splice(...e)}class Bd{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new vt(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ms.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new pN(this.staticAccountKeys)}static compile(e){const n=RP.compile(e.instructions,e.payerKey),[r,i]=n.getMessageComponents(),o=new pN(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:ms.encode(a.data)}));return new Bd({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Ya(n,e);const r=this.instructions.map(h=>{const{accounts:m,programIdIndex:g}=h,v=Array.from(ms.decode(h.data));let x=[];Ya(x,m.length);let b=[];return Ya(b,v.length),{programIdIndex:g,keyIndicesCount:dn.from(x),keyIndices:m,dataLength:dn.from(b),data:v}});let i=[];Ya(i,r.length);let s=dn.alloc(Cy);dn.from(i).copy(s);let o=i.length;r.forEach(h=>{const g=we.struct([we.u8("programIdIndex"),we.blob(h.keyIndicesCount.length,"keyIndicesCount"),we.seq(we.u8("keyIndex"),h.keyIndices.length,"keyIndices"),we.blob(h.dataLength.length,"dataLength"),we.seq(we.u8("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=g}),s=s.slice(0,o);const a=we.struct([we.blob(1,"numRequiredSignatures"),we.blob(1,"numReadonlySignedAccounts"),we.blob(1,"numReadonlyUnsignedAccounts"),we.blob(n.length,"keyCount"),we.seq(Tn("key"),e,"keys"),Tn("recentBlockhash")]),l={numRequiredSignatures:dn.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:dn.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:dn.from([this.header.numReadonlyUnsignedAccounts]),keyCount:dn.from(n),keys:this.accountKeys.map(h=>$i(h.toBytes())),recentBlockhash:ms.decode(this.recentBlockhash)};let c=dn.alloc(2048);const d=a.encode(l,c);return s.copy(c,d),c.slice(0,d+s.length)}static from(e){let n=[...e];const r=ad(n);if(r!==(r&S0e))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=ad(n),s=ad(n),o=Wa(n);let a=[];for(let m=0;m<o;m++){const g=Ja(n,0,kh);a.push(new vt(dn.from(g)))}const l=Ja(n,0,kh),c=Wa(n);let d=[];for(let m=0;m<c;m++){const g=ad(n),v=Wa(n),x=Ja(n,0,v),b=Wa(n),w=Ja(n,0,b),k=ms.encode(dn.from(w));d.push({programIdIndex:g,accounts:x,data:k})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:ms.encode(dn.from(l)),accountKeys:a,instructions:d};return new Bd(h)}}class Iw{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new pN(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)n.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)n.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=RP.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const d of s){const h=n.extractTableLookup(d);if(h!==void 0){const[m,{writable:g,readonly:v}]=h;r.push(m),i.writable.push(...g),i.readonly.push(...v)}}const[o,a]=n.getMessageComponents(),c=new pN(a,i).compileInstructions(e.instructions);return new Iw({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const e=Array();Ya(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Ya(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Ya(s,this.addressTableLookups.length);const o=we.struct([we.u8("prefix"),we.struct([we.u8("numRequiredSignatures"),we.u8("numReadonlySignedAccounts"),we.u8("numReadonlyUnsignedAccounts")],"header"),we.blob(e.length,"staticAccountKeysLength"),we.seq(Tn(),this.staticAccountKeys.length,"staticAccountKeys"),Tn("recentBlockhash"),we.blob(r.length,"instructionsLength"),we.blob(n.length,"serializedInstructions"),we.blob(s.length,"addressTableLookupsLength"),we.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Cy),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:ms.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(Cy);for(const r of this.compiledInstructions){const i=Array();Ya(i,r.accountKeyIndexes.length);const s=Array();Ya(s,r.data.length);const o=we.struct([we.u8("programIdIndex"),we.blob(i.length,"encodedAccountKeyIndexesLength"),we.seq(we.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),we.blob(s.length,"encodedDataLength"),we.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Cy);for(const r of this.addressTableLookups){const i=Array();Ya(i,r.writableIndexes.length);const s=Array();Ya(s,r.readonlyIndexes.length);const o=we.struct([Tn("accountKey"),we.blob(i.length,"encodedWritableIndexesLength"),we.seq(we.u8(),r.writableIndexes.length,"writableIndexes"),we.blob(s.length,"encodedReadonlyIndexesLength"),we.seq(we.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=ad(n),i=r&S0e;Qr(r!==i,"Expected versioned message but received legacy message");const s=i;Qr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:ad(n),numReadonlySignedAccounts:ad(n),numReadonlyUnsignedAccounts:ad(n)},a=[],l=Wa(n);for(let v=0;v<l;v++)a.push(new vt(Ja(n,0,kh)));const c=ms.encode(Ja(n,0,kh)),d=Wa(n),h=[];for(let v=0;v<d;v++){const x=ad(n),b=Wa(n),w=Ja(n,0,b),k=Wa(n),N=new Uint8Array(Ja(n,0,k));h.push({programIdIndex:x,accountKeyIndexes:w,data:N})}const m=Wa(n),g=[];for(let v=0;v<m;v++){const x=new vt(Ja(n,0,kh)),b=Wa(n),w=Ja(n,0,b),k=Wa(n),N=Ja(n,0,k);g.push({accountKey:x,writableIndexes:w,readonlyIndexes:N})}return new Iw({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:h,addressTableLookups:g})}}let zf=(function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t})({});const upt=dn.alloc(A0e).fill(0);class Vi{constructor(e){this.keys=void 0,this.programId=void 0,this.data=dn.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Za{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new Vi(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<n.length;x++)if(n[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);const i=[],s=[];n.forEach(x=>{x.keys.forEach(w=>{s.push({...w})});const b=x.programId.toString();i.includes(b)||i.push(b)}),i.forEach(x=>{s.push({pubkey:new vt(x),isSigner:!1,isWritable:!1})});const o=[];s.forEach(x=>{const b=x.pubkey.toString(),w=o.findIndex(k=>k.pubkey.toString()===b);w>-1?(o[w].isWritable=o[w].isWritable||x.isWritable,o[w].isSigner=o[w].isSigner||x.isSigner):o.push(x)}),o.sort(function(x,b){if(x.isSigner!==b.isSigner)return x.isSigner?-1:1;if(x.isWritable!==b.isWritable)return x.isWritable?-1:1;const w={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return x.pubkey.toBase58().localeCompare(b.pubkey.toBase58(),"en",w)});const a=o.findIndex(x=>x.pubkey.equals(r));if(a>-1){const[x]=o.splice(a,1);x.isSigner=!0,x.isWritable=!0,o.unshift(x)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const x of this.signatures){const b=o.findIndex(w=>w.pubkey.equals(x.publicKey));if(b>-1)o[b].isSigner||(o[b].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let l=0,c=0,d=0;const h=[],m=[];o.forEach(({pubkey:x,isSigner:b,isWritable:w})=>{b?(h.push(x.toString()),l+=1,w||(c+=1)):(m.push(x.toString()),w||(d+=1))});const g=h.concat(m),v=n.map(x=>{const{data:b,programId:w}=x;return{programIdIndex:g.indexOf(w.toString()),accounts:x.keys.map(k=>g.indexOf(k.pubkey.toString())),data:ms.encode(b)}});return v.forEach(x=>{Qr(x.programIdIndex>=0),x.accounts.forEach(b=>Qr(b>=0))}),new Bd({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:d},accountKeys:g,recentBlockhash:e,instructions:v})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((i,s)=>n[s].equals(i.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const i=r.toString();return n.has(i)?!1:(n.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(i=>{const s=tpt(r,i.secretKey);this._addSignature(i.publicKey,$i(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){Qr(n.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=dn.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?n&&(r.missing||(r.missing=[])).push(s):npt(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:n}=this,r=[];Ya(r,n.length);const i=r.length+n.length*64+e.length,s=dn.alloc(i);return Qr(n.length<256),dn.from(r).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(Qr(o.length===64,"signature has invalid length"),dn.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+n.length*64),Qr(s.length<=Cy,`Transaction too large: ${s.length} > ${Cy}`),s}get keys(){return Qr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Qr(this.instructions.length===1),this.instructions[0].programId}get data(){return Qr(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=Wa(n);let i=[];for(let s=0;s<r;s++){const o=Ja(n,0,A0e);i.push(ms.encode(dn.from(o)))}return Za.populate(Bd.from(n),i)}static populate(e,n=[]){const r=new Za;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((i,s)=>{const o={signature:i==ms.encode(upt)?null:ms.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new Vi({keys:s,programId:e.accountKeys[i.programIdIndex],data:ms.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class P0e{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,n){const{header:r,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:l}=r,c=o-a;Qr(c>0,"Message header is invalid");const d=e.staticAccountKeys.length-o-l;Qr(d>=0,"Message header is invalid");const h=e.getAccountKeys(n),m=h.get(0);if(m===void 0)throw new Error("Failed to decompile message because no account keys were found");const g=[];for(const v of i){const x=[];for(const w of v.accountKeyIndexes){const k=h.get(w);if(k===void 0)throw new Error(`Failed to find key for account key index ${w}`);const N=w<o;let O;N?O=w<c:w<h.staticAccountKeys.length?O=w-o<d:O=w-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,x.push({pubkey:k,isSigner:w<r.numRequiredSignatures,isWritable:O})}const b=h.get(v.programIdIndex);if(b===void 0)throw new Error(`Failed to find program id for program id index ${v.programIdIndex}`);g.push(new Vi({programId:b,data:$i(v.data),keys:x}))}return new P0e({payerKey:m,instructions:g,recentBlockhash:s})}compileToLegacyMessage(){return Bd.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Iw.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}const dpt=160,fpt=64,hpt=dpt/fpt,ppt=1e3/hpt,Dyt=new vt("SysvarC1ock11111111111111111111111111111111");new vt("SysvarEpochSchedu1e111111111111111111111111");new vt("Sysvar1nstructions1111111111111111111111111");const dO=new vt("SysvarRecentB1ockHashes11111111111111111111"),Tee=new vt("SysvarRent111111111111111111111111111111111");new vt("SysvarRewards111111111111111111111111111111");new vt("SysvarS1otHashes111111111111111111111111111");new vt("SysvarS1otHistory11111111111111111111111111");new vt("SysvarStakeHistory1111111111111111111111111");class kee extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,n(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class zt extends Error{constructor({code:e,message:n,data:r},i){super(i!=null?`${i}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Dg(t){return new Promise(e=>setTimeout(e,t))}function _s(t,e){const n=t.layout.span>=0?t.layout.span:N0e(t,e),r=dn.alloc(n),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,r),r}const mpt=we.nu64("lamportsPerSignature"),_0e=we.struct([we.u32("version"),we.u32("state"),Tn("authorizedPubkey"),Tn("nonce"),we.struct([mpt],"feeCalculator")]),Nee=_0e.span;class FB{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=_0e.decode($i(e),0);return new FB({authorizedPubkey:new vt(n.authorizedPubkey),nonce:new vt(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function Wx(t){const e=we.blob(8,t),n=e.decode.bind(e),r=e.encode.bind(e),i=e,s=sht();return i.decode=(o,a)=>{const l=n(o,a);return s.decode(l)},i.encode=(o,a,l)=>{const c=s.encode(o);return r(c,a,l)},i}const Ma=Object.freeze({Create:{index:0,layout:we.struct([we.u32("instruction"),we.ns64("lamports"),we.ns64("space"),Tn("programId")])},Assign:{index:1,layout:we.struct([we.u32("instruction"),Tn("programId")])},Transfer:{index:2,layout:we.struct([we.u32("instruction"),Wx("lamports")])},CreateWithSeed:{index:3,layout:we.struct([we.u32("instruction"),Tn("base"),ey("seed"),we.ns64("lamports"),we.ns64("space"),Tn("programId")])},AdvanceNonceAccount:{index:4,layout:we.struct([we.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:we.struct([we.u32("instruction"),we.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:we.struct([we.u32("instruction"),Tn("authorized")])},AuthorizeNonceAccount:{index:7,layout:we.struct([we.u32("instruction"),Tn("authorized")])},Allocate:{index:8,layout:we.struct([we.u32("instruction"),we.ns64("space")])},AllocateWithSeed:{index:9,layout:we.struct([we.u32("instruction"),Tn("base"),ey("seed"),we.ns64("space"),Tn("programId")])},AssignWithSeed:{index:10,layout:we.struct([we.u32("instruction"),Tn("base"),ey("seed"),Tn("programId")])},TransferWithSeed:{index:11,layout:we.struct([we.u32("instruction"),Wx("lamports"),ey("seed"),Tn("programId")])},UpgradeNonceAccount:{index:12,layout:we.struct([we.u32("instruction")])}});class Yx{constructor(){}static createAccount(e){const n=Ma.Create,r=_s(n,{lamports:e.lamports,space:e.space,programId:$i(e.programId.toBuffer())});return new Vi({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const i=Ma.TransferWithSeed;n=_s(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:$i(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Ma.Transfer;n=_s(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Vi({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const i=Ma.AssignWithSeed;n=_s(i,{base:$i(e.basePubkey.toBuffer()),seed:e.seed,programId:$i(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ma.Assign;n=_s(i,{programId:$i(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Vi({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=Ma.CreateWithSeed,r=_s(n,{base:$i(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:$i(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Vi({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const n=new Za;"basePubkey"in e&&"seed"in e?n.add(Yx.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Nee,programId:this.programId})):n.add(Yx.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Nee,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=Ma.InitializeNonceAccount,r=_s(n,{authorized:$i(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dO,isSigner:!1,isWritable:!1},{pubkey:Tee,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Vi(i)}static nonceAdvance(e){const n=Ma.AdvanceNonceAccount,r=_s(n),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dO,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Vi(i)}static nonceWithdraw(e){const n=Ma.WithdrawNonceAccount,r=_s(n,{lamports:e.lamports});return new Vi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:dO,isSigner:!1,isWritable:!1},{pubkey:Tee,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=Ma.AuthorizeNonceAccount,r=_s(n,{authorized:$i(e.newAuthorizedPubkey.toBuffer())});return new Vi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const i=Ma.AllocateWithSeed;n=_s(i,{base:$i(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:$i(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ma.Allocate;n=_s(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Vi({keys:r,programId:this.programId,data:n})}}Yx.programId=new vt("11111111111111111111111111111111");new vt("BPFLoader2111111111111111111111111111111111");function gpt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fO,Cee;function ypt(){if(Cee)return fO;Cee=1;var t=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function n(r,i){var s,o,a,l,c,d,h;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),i);if(h=t.call(r),h==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}else if(h==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)c=l[s],d=n(r[c],!1),d!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+d),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return fO=function(r){var i=n(r,!1);if(i!==void 0)return""+i},fO}var xpt=ypt(),Pee=gpt(xpt);const Yb=32;function hO(t){let e=0;for(;t>1;)t/=2,e++;return e}function vpt(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class bpt{constructor(e,n,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=hO(vpt(e+Yb+1))-hO(Yb)-1,r=this.getSlotsInEpoch(n),i=e-(r-Yb);return[n,i]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=n%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Yb:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+hO(Yb)):this.slotsPerEpoch}}var wpt=globalThis.fetch;class Ept extends Fht{constructor(e,n,r){const i=s=>{const o=Bht(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,n,r),this.underlyingSocket=void 0}call(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var r;const n=(r=this.underlyingSocket)==null?void 0:r.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function Spt(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const _ee=56;class Iee{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=Spt(Apt,e),r=e.length-_ee;Qr(r>=0,"lookup table is invalid"),Qr(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=we.struct([we.seq(Tn(),i,"addresses")]).decode(e.slice(_ee));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new vt(n.authority[0]):void 0,addresses:s.map(o=>new vt(o))}}}const Apt={index:1,layout:we.struct([we.u32("typeIndex"),Wx("deactivationSlot"),we.nu64("lastExtendedSlot"),we.u8("lastExtendedStartIndex"),we.u8(),we.seq(Tn(),we.offset(we.u8(),-1),"authority")])},Tpt=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function kpt(t){const e=t.match(Tpt);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const Vr=KE(DB(vt),mt(),t=>new vt(t)),I0e=BB([mt(),Ur("base64")]),$B=KE(DB(dn),I0e,t=>dn.from(t[0],"base64")),Npt=30*1e3;function Cpt(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function pr(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function Ree(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function R0e(t){return ho([lt({jsonrpc:Ur("2.0"),id:mt(),result:t}),lt({jsonrpc:Ur("2.0"),id:mt(),error:lt({code:Ov(),message:mt(),data:Wt(fht())})})])}const Ppt=R0e(Ov());function gn(t){return KE(R0e(t),Ppt,e=>"error"in e?e:{...e,result:bt(e.result,t)})}function si(t){return gn(lt({context:lt({slot:Me()}),value:t}))}function OP(t){return lt({context:lt({slot:Me()}),value:t})}function pO(t,e){return t===0?new Iw({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new vt(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:ms.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Bd(e)}const _pt=lt({foundation:Me(),foundationTerm:Me(),initial:Me(),taper:Me(),terminal:Me()}),Ipt=gn(At(kt(lt({epoch:Me(),effectiveSlot:Me(),amount:Me(),postBalance:Me(),commission:Wt(kt(Me()))})))),Rpt=At(lt({slot:Me(),prioritizationFee:Me()})),Opt=lt({total:Me(),validator:Me(),foundation:Me(),epoch:Me()}),Mpt=lt({epoch:Me(),slotIndex:Me(),slotsInEpoch:Me(),absoluteSlot:Me(),blockHeight:Wt(Me()),transactionCount:Wt(Me())}),Lpt=lt({slotsPerEpoch:Me(),leaderScheduleSlotOffset:Me(),warmup:tu(),firstNormalEpoch:Me(),firstNormalSlot:Me()}),jpt=d0e(mt(),At(Me())),g0=kt(ho([lt({}),mt()])),Dpt=lt({err:g0}),Bpt=Ur("receivedSignature"),Upt=lt({"solana-core":mt(),"feature-set":Wt(Me())}),Fpt=lt({program:mt(),programId:Vr,parsed:Ov()}),$pt=lt({programId:Vr,accounts:At(Vr),data:mt()}),Oee=si(lt({err:kt(ho([lt({}),mt()])),logs:kt(At(mt())),accounts:Wt(kt(At(kt(lt({executable:tu(),owner:mt(),lamports:Me(),data:At(mt()),rentEpoch:Wt(Me())}))))),unitsConsumed:Wt(Me()),returnData:Wt(kt(lt({programId:mt(),data:BB([mt(),Ur("base64")])}))),innerInstructions:Wt(kt(At(lt({index:Me(),instructions:At(ho([Fpt,$pt]))}))))})),zpt=si(lt({byIdentity:d0e(mt(),At(Me())),range:lt({firstSlot:Me(),lastSlot:Me()})}));function Vpt(t,e,n,r,i,s){const o=n||wpt;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(d,h)=>{const m=await new Promise((g,v)=>{try{r(d,h,(x,b)=>g([x,b]))}catch(x){v(x)}});return await o(...m)}),new jht(async(d,h)=>{const m={method:"POST",body:d,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},Vmt)};try{let g=5,v,x=500;for(;l?v=await l(t,m):v=await o(t,m),!(v.status!==429||i===!0||(g-=1,g===0));)console.error(`Server responded with ${v.status} ${v.statusText}.  Retrying after ${x}ms delay...`),await Dg(x),x*=2;const b=await v.text();v.ok?h(null,b):h(new Error(`${v.status} ${v.statusText}: ${b}`))}catch(g){g instanceof Error&&h(g)}},{})}function Hpt(t){return(e,n)=>new Promise((r,i)=>{t.request(e,n,(s,o)=>{if(s){i(s);return}r(o)})})}function qpt(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){r(s);return}n(o)})})}const Gpt=gn(_pt),Kpt=gn(Opt),Wpt=gn(Rpt),Ypt=gn(Mpt),Jpt=gn(Lpt),Xpt=gn(jpt),Qpt=gn(Me()),Zpt=si(lt({total:Me(),circulating:Me(),nonCirculating:Me(),nonCirculatingAccounts:At(Vr)})),zj=lt({amount:mt(),uiAmount:kt(Me()),decimals:Me(),uiAmountString:Wt(mt())}),emt=si(At(lt({address:Vr,amount:mt(),uiAmount:kt(Me()),decimals:Me(),uiAmountString:Wt(mt())}))),tmt=si(At(lt({pubkey:Vr,account:lt({executable:tu(),owner:Vr,lamports:Me(),data:$B,rentEpoch:Me()})}))),Vj=lt({program:mt(),parsed:Ov(),space:Me()}),nmt=si(At(lt({pubkey:Vr,account:lt({executable:tu(),owner:Vr,lamports:Me(),data:Vj,rentEpoch:Me()})}))),rmt=si(At(lt({lamports:Me(),address:Vr}))),Rw=lt({executable:tu(),owner:Vr,lamports:Me(),data:$B,rentEpoch:Me()}),imt=lt({pubkey:Vr,account:Rw}),smt=KE(ho([DB(dn),Vj]),ho([I0e,Vj]),t=>Array.isArray(t)?bt(t,$B):t),Hj=lt({executable:tu(),owner:Vr,lamports:Me(),data:smt,rentEpoch:Me()}),omt=lt({pubkey:Vr,account:Hj}),amt=lt({state:ho([Ur("active"),Ur("inactive"),Ur("activating"),Ur("deactivating")]),active:Me(),inactive:Me()}),lmt=gn(At(lt({signature:mt(),slot:Me(),err:g0,memo:kt(mt()),blockTime:Wt(kt(Me()))}))),cmt=gn(At(lt({signature:mt(),slot:Me(),err:g0,memo:kt(mt()),blockTime:Wt(kt(Me()))}))),umt=lt({subscription:Me(),result:OP(Rw)}),dmt=lt({pubkey:Vr,account:Rw}),fmt=lt({subscription:Me(),result:OP(dmt)}),hmt=lt({parent:Me(),slot:Me(),root:Me()}),pmt=lt({subscription:Me(),result:hmt}),mmt=ho([lt({type:ho([Ur("firstShredReceived"),Ur("completed"),Ur("optimisticConfirmation"),Ur("root")]),slot:Me(),timestamp:Me()}),lt({type:Ur("createdBank"),parent:Me(),slot:Me(),timestamp:Me()}),lt({type:Ur("frozen"),slot:Me(),timestamp:Me(),stats:lt({numTransactionEntries:Me(),numSuccessfulTransactions:Me(),numFailedTransactions:Me(),maxTransactionsPerEntry:Me()})}),lt({type:Ur("dead"),slot:Me(),timestamp:Me(),err:mt()})]),gmt=lt({subscription:Me(),result:mmt}),ymt=lt({subscription:Me(),result:OP(ho([Dpt,Bpt]))}),xmt=lt({subscription:Me(),result:Me()}),vmt=lt({pubkey:mt(),gossip:kt(mt()),tpu:kt(mt()),rpc:kt(mt()),version:kt(mt())}),Mee=lt({votePubkey:mt(),nodePubkey:mt(),activatedStake:Me(),epochVoteAccount:tu(),epochCredits:At(BB([Me(),Me(),Me()])),commission:Me(),lastVote:Me(),rootSlot:kt(Me())}),bmt=gn(lt({current:At(Mee),delinquent:At(Mee)})),wmt=ho([Ur("processed"),Ur("confirmed"),Ur("finalized")]),Emt=lt({slot:Me(),confirmations:kt(Me()),err:g0,confirmationStatus:Wt(wmt)}),Smt=si(At(kt(Emt))),Amt=gn(Me()),O0e=lt({accountKey:Vr,writableIndexes:At(Me()),readonlyIndexes:At(Me())}),zB=lt({signatures:At(mt()),message:lt({accountKeys:At(mt()),header:lt({numRequiredSignatures:Me(),numReadonlySignedAccounts:Me(),numReadonlyUnsignedAccounts:Me()}),instructions:At(lt({accounts:At(Me()),data:mt(),programIdIndex:Me()})),recentBlockhash:mt(),addressTableLookups:Wt(At(O0e))})}),M0e=lt({pubkey:Vr,signer:tu(),writable:tu(),source:Wt(ho([Ur("transaction"),Ur("lookupTable")]))}),L0e=lt({accountKeys:At(M0e),signatures:At(mt())}),j0e=lt({parsed:Ov(),program:mt(),programId:Vr}),D0e=lt({accounts:At(Vr),data:mt(),programId:Vr}),Tmt=ho([D0e,j0e]),kmt=ho([lt({parsed:Ov(),program:mt(),programId:mt()}),lt({accounts:At(mt()),data:mt(),programId:mt()})]),B0e=KE(Tmt,kmt,t=>"accounts"in t?bt(t,D0e):bt(t,j0e)),U0e=lt({signatures:At(mt()),message:lt({accountKeys:At(M0e),instructions:At(B0e),recentBlockhash:mt(),addressTableLookups:Wt(kt(At(O0e)))})}),mN=lt({accountIndex:Me(),mint:mt(),owner:Wt(mt()),programId:Wt(mt()),uiTokenAmount:zj}),F0e=lt({writable:At(Vr),readonly:At(Vr)}),MP=lt({err:g0,fee:Me(),innerInstructions:Wt(kt(At(lt({index:Me(),instructions:At(lt({accounts:At(Me()),data:mt(),programIdIndex:Me()}))})))),preBalances:At(Me()),postBalances:At(Me()),logMessages:Wt(kt(At(mt()))),preTokenBalances:Wt(kt(At(mN))),postTokenBalances:Wt(kt(At(mN))),loadedAddresses:Wt(F0e),computeUnitsConsumed:Wt(Me()),costUnits:Wt(Me())}),VB=lt({err:g0,fee:Me(),innerInstructions:Wt(kt(At(lt({index:Me(),instructions:At(B0e)})))),preBalances:At(Me()),postBalances:At(Me()),logMessages:Wt(kt(At(mt()))),preTokenBalances:Wt(kt(At(mN))),postTokenBalances:Wt(kt(At(mN))),loadedAddresses:Wt(F0e),computeUnitsConsumed:Wt(Me()),costUnits:Wt(Me())}),Mv=ho([Ur(0),Ur("legacy")]),y0=lt({pubkey:mt(),lamports:Me(),postBalance:kt(Me()),rewardType:kt(mt()),commission:Wt(kt(Me()))}),Nmt=gn(kt(lt({blockhash:mt(),previousBlockhash:mt(),parentSlot:Me(),transactions:At(lt({transaction:zB,meta:kt(MP),version:Wt(Mv)})),rewards:Wt(At(y0)),blockTime:kt(Me()),blockHeight:kt(Me())}))),Cmt=gn(kt(lt({blockhash:mt(),previousBlockhash:mt(),parentSlot:Me(),rewards:Wt(At(y0)),blockTime:kt(Me()),blockHeight:kt(Me())}))),Pmt=gn(kt(lt({blockhash:mt(),previousBlockhash:mt(),parentSlot:Me(),transactions:At(lt({transaction:L0e,meta:kt(MP),version:Wt(Mv)})),rewards:Wt(At(y0)),blockTime:kt(Me()),blockHeight:kt(Me())}))),_mt=gn(kt(lt({blockhash:mt(),previousBlockhash:mt(),parentSlot:Me(),transactions:At(lt({transaction:U0e,meta:kt(VB),version:Wt(Mv)})),rewards:Wt(At(y0)),blockTime:kt(Me()),blockHeight:kt(Me())}))),Imt=gn(kt(lt({blockhash:mt(),previousBlockhash:mt(),parentSlot:Me(),transactions:At(lt({transaction:L0e,meta:kt(VB),version:Wt(Mv)})),rewards:Wt(At(y0)),blockTime:kt(Me()),blockHeight:kt(Me())}))),Rmt=gn(kt(lt({blockhash:mt(),previousBlockhash:mt(),parentSlot:Me(),rewards:Wt(At(y0)),blockTime:kt(Me()),blockHeight:kt(Me())}))),Omt=gn(kt(lt({blockhash:mt(),previousBlockhash:mt(),parentSlot:Me(),transactions:At(lt({transaction:zB,meta:kt(MP)})),rewards:Wt(At(y0)),blockTime:kt(Me())}))),Lee=gn(kt(lt({blockhash:mt(),previousBlockhash:mt(),parentSlot:Me(),signatures:At(mt()),blockTime:kt(Me())}))),mO=gn(kt(lt({slot:Me(),meta:kt(MP),blockTime:Wt(kt(Me())),transaction:zB,version:Wt(Mv)}))),w2=gn(kt(lt({slot:Me(),transaction:U0e,meta:kt(VB),blockTime:Wt(kt(Me())),version:Wt(Mv)}))),Mmt=si(lt({blockhash:mt(),lastValidBlockHeight:Me()})),Lmt=si(tu()),jmt=lt({slot:Me(),numTransactions:Me(),numSlots:Me(),samplePeriodSecs:Me()}),Dmt=gn(At(jmt)),Bmt=si(kt(lt({feeCalculator:lt({lamportsPerSignature:Me()})}))),Umt=gn(mt()),Fmt=gn(mt()),$mt=lt({err:g0,logs:At(mt()),signature:mt()}),zmt=lt({result:OP($mt),subscription:Me()}),Vmt={"solana-client":"js/1.0.0-maintenance"};class HB{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async d=>{const{commitment:h,config:m}=pr(d),g=this._buildArgs([],h,void 0,m),v=Pee(g);return c[v]=c[v]??(async()=>{try{const x=await this._rpcRequest("getBlockHeight",g),b=bt(x,gn(Me()));if("error"in b)throw new zt(b.error,"failed to get block height information");return b.result}finally{delete c[v]}})(),await c[v]}})();let r,i,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=Cpt(e),this._rpcWsEndpoint=r||kpt(e),this._rpcClient=Vpt(e,i,s,o,a,l),this._rpcRequest=Hpt(this._rpcClient),this._rpcBatchRequest=qpt(this._rpcClient),this._rpcWebSocket=new Ept(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:i}=pr(n),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=bt(o,si(Me()));if("error"in a)throw new zt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=bt(n,gn(kt(Me())));if("error"in r)throw new zt(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=bt(e,gn(Me()));if("error"in n)throw new zt(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=bt(e,Qpt);if("error"in n)throw new zt(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),i=bt(r,Zpt);if("error"in i)throw new zt(i.error,"failed to get supply");return i.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenSupply",r),s=bt(i,si(zj));if("error"in s)throw new zt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenAccountBalance",r),s=bt(i,si(zj));if("error"in s)throw new zt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,r){const{commitment:i,config:s}=pr(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=bt(l,tmt);if("error"in c)throw new zt(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,r){let i=[e.toBase58()];"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=bt(o,nmt);if("error"in a)throw new zt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],i=await this._rpcRequest("getLargestAccounts",r),s=bt(i,rmt);if("error"in s)throw new zt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),i=await this._rpcRequest("getTokenLargestAccounts",r),s=bt(i,emt);if("error"in s)throw new zt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:i}=pr(n),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=bt(o,si(kt(Rw)));if("error"in a)throw new zt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:i}=pr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=bt(o,si(kt(Hj)));if("error"in a)throw new zt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:i}=pr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=bt(a,si(At(kt(Hj))));if("error"in l)throw new zt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:i}=pr(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=bt(a,si(At(kt(Rw))));if("error"in l)throw new zt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:i,config:s}=pr(n),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=bt(a,gn(amt));if("error"in l)throw new zt(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:r,config:i}=pr(n),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:Ree(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=At(imt),d=o.withContext===!0?bt(l,si(c)):bt(l,gn(c));if("error"in d)throw new zt(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:i}=pr(n),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=bt(o,gn(At(omt)));if("error"in a)throw new zt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=ms.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Qr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,i,s=!1;const o=new Promise((l,c)=>{try{r=this.onSignature(n,(h,m)=>{r=void 0;const g={context:m,value:h};l({__type:zf.PROCESSED,response:g})},e);const d=new Promise(h=>{r==null?h():i=this._onSubscriptionStateChange(r,m=>{m==="subscribed"&&h()})});(async()=>{if(await d,s)return;const h=await this.getSignatureStatus(n);if(s||h==null)return;const{context:m,value:g}=h;if(g!=null)if(g!=null&&g.err)c(g.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:zf.PROCESSED,response:{context:m,value:g}})}})()}catch(d){c(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(h=>{const m=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let g=await m();if(!s){for(;g<=r;)if(await Dg(1e3),s||(g=await m(),s))return;h({__type:zf.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(n);let d;try{const h=await Promise.race([c,l,o]);if(h.__type===zf.PROCESSED)d=h.response;else throw new T0e(i)}finally{s=!0,a()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(g=>{let v=s,x=null;const b=async()=>{try{const{context:w,value:k}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return x=w.slot,k==null?void 0:k.nonce}catch{return v}};(async()=>{if(v=await b(),!a)for(;;){if(s!==v){g({__type:zf.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await Dg(2e3),a||(v=await b(),a))return}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(n);let m;try{const g=await Promise.race([h,d,l]);if(g.__type===zf.PROCESSED)m=g.response;else{let v;for(;;){const x=await this.getSignatureStatus(o);if(x==null)break;if(x.context.slot<(g.slotInWhichNonceDidAdvance??r)){await Dg(400);continue}v=x;break}if(v!=null&&v.value){const x=e||"finalized",{confirmationStatus:b}=v.value;switch(x){case"processed":case"recent":if(b!=="processed"&&b!=="confirmed"&&b!=="finalized")throw new f1(o);break;case"confirmed":case"single":case"singleGossip":if(b!=="confirmed"&&b!=="finalized")throw new f1(o);break;case"finalized":case"max":case"root":if(b!=="finalized")throw new f1(o);break;default:}m={context:v.context,value:{err:v.value.err}}}else throw new f1(o)}}finally{a=!0,c()}return m}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:zf.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,i]);if(l.__type===zf.PROCESSED)a=l.response;else throw new k0e(n,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=bt(e,gn(At(vmt)));if("error"in n)throw new zt(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),i=bt(r,bmt);if("error"in i)throw new zt(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:n,config:r}=pr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlot",i),o=bt(s,gn(Me()));if("error"in o)throw new zt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=pr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=bt(s,gn(mt()));if("error"in o)throw new zt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],i=await this._rpcRequest("getSlotLeaders",r),s=bt(i,gn(At(Vr)));if("error"in s)throw new zt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:r,value:i}=await this.getSignatureStatuses([e],n);Qr(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const i=await this._rpcRequest("getSignatureStatuses",r),s=bt(i,Smt);if("error"in s)throw new zt(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:r}=pr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=bt(s,gn(Me()));if("error"in o)throw new zt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),i=bt(r,Gpt);if("error"in i)throw new zt(i.error,"failed to get inflation");return i.result}async getInflationReward(e,n,r){const{commitment:i,config:s}=pr(r),o=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=bt(a,Ipt);if("error"in l)throw new zt(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=bt(e,Kpt);if("error"in n)throw new zt(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=pr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=bt(s,Ypt);if("error"in o)throw new zt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=bt(e,Jpt);if("error"in n)throw new zt(n.error,"failed to get epoch schedule");const r=n.result;return new bpt(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=bt(e,Xpt);if("error"in n)throw new zt(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=bt(i,Amt);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=bt(n,Dmt);if("error"in r)throw new zt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=bt(i,Bmt);if("error"in s)throw new zt(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=$i(e.serialize()).toString("base64"),i=this._buildArgs([r],n),s=await this._rpcRequest("getFeeForMessage",i),o=bt(s,si(kt(Me())));if("error"in o)throw new zt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=n!=null&&n.length?[n]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=bt(i,Wpt);if("error"in s)throw new zt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=pr(e),i=this._buildArgs([],n,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=bt(s,Mmt);if("error"in o)throw new zt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:i}=pr(n),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=bt(o,Lmt);if("error"in a)throw new zt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=bt(e,gn(Upt));if("error"in n)throw new zt(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=bt(e,gn(mt()));if("error"in n)throw new zt(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:i}=pr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=bt(o,Pmt);if("error"in a)throw a.error;return a.result}case"none":{const a=bt(o,Cmt);if("error"in a)throw a.error;return a.result}default:{const a=bt(o,Nmt);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:d,version:h})=>({meta:d,transaction:{...c,message:pO(h,c.message)},version:h}))}:null}}}catch(a){throw new zt(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:i}=pr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=bt(o,Imt);if("error"in a)throw a.error;return a.result}case"none":{const a=bt(o,Rmt);if("error"in a)throw a.error;return a.result}default:{const a=bt(o,_mt);if("error"in a)throw a.error;return a.result}}}catch(a){throw new zt(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,n=l}const i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getBlockProduction",i),o=bt(s,zpt);if("error"in o)throw new zt(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:i}=pr(n),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=bt(o,mO);if("error"in a)throw new zt(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:pO(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:i}=pr(n),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=bt(o,w2);if("error"in a)throw new zt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:i}=pr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=bt(l,w2);if("error"in c)throw new zt(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:r,config:i}=pr(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=bt(l,mO);if("error"in c)throw new zt(c.error,"failed to get transactions");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:pO(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getBlock",r),s=bt(i,Omt);if("error"in s)throw new zt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const d=new Bd(l.message);return{meta:c,transaction:{...l,message:d}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:Za.populate(l.message,l.signatures)}))}}async getBlocks(e,n,r){const i=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),s=await this._rpcRequest("getBlocks",i),o=bt(s,gn(At(Me())));if("error"in o)throw new zt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=bt(i,Lee);if("error"in s)throw new zt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=bt(i,Lee);if("error"in s)throw new zt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),i=await this._rpcRequest("getTransaction",r),s=bt(i,mO);if("error"in s)throw new zt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Bd(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Za.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),s=bt(i,w2);if("error"in s)throw new zt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=bt(o,w2);if("error"in a)throw new zt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=bt(s,lmt);if("error"in o)throw new zt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",i),o=bt(s,cmt);if("error"in o)throw new zt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=new Iee({key:e,state:Iee.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,n){const{context:r,value:i}=await this.getAccountInfoAndContext(e,n);let s=null;return i!==null&&(s=FB.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),i=bt(r,Umt);if("error"in i)throw new zt(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Dg(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Npt;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Dg(ppt/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=pr(e),i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=bt(s,si(Me()));if("error"in o)throw new zt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const x=e.serialize(),b=dn.from(x).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const w=n||{};w.encoding="base64","commitment"in w||(w.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(w.innerInstructions=n.innerInstructions);const k=[b,w],N=await this._rpcRequest("simulateTransaction",k),O=bt(N,Oee);if("error"in O)throw new Error("failed to simulate transaction: "+O.error.message);return O.result}let i;if(e instanceof Za){let v=e;i=new Za,i.feePayer=v.feePayer,i.instructions=e.instructions,i.nonceInfo=v.nonceInfo,i.signatures=v.signatures}else i=Za.populate(e),i._message=i._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(i.nonceInfo&&s)i.sign(...s);else{let v=this._disableBlockhashCaching;for(;;){const x=await this._blockhashWithExpiryBlockHeight(v);if(i.lastValidBlockHeight=x.lastValidBlockHeight,i.recentBlockhash=x.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const b=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(b)&&!this._blockhashInfo.transactionSignatures.includes(b)){this._blockhashInfo.simulatedSignatures.push(b);break}else v=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(r){const v=(Array.isArray(r)?r:o.nonProgramIds()).map(x=>x.toBase58());d.accounts={encoding:"base64",addresses:v}}s&&(d.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(d.innerInstructions=n.innerInstructions);const h=[c,d],m=await this._rpcRequest("simulateTransaction",h),g=bt(m,Oee);if("error"in g){let v;if("data"in g.error&&(v=g.error.data.logs,v&&Array.isArray(v))){const x=`
    `,b=x+v.join(x);console.error(g.error.message,b)}throw new kee({action:"simulate",signature:"",transactionMessage:g.error.message,logs:v})}return g.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,n){const r=$i(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},i=n&&n.skipPreflight,s=i===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=bt(a,Fmt);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new kee({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(n),()=>{i.delete(n),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=bt(e,umt);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,i=Pee([e.method,n]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];Qr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:i,config:s}=pr(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=bt(e,fmt);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,i){const{commitment:s,config:o}=pr(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:Ree(i)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=bt(e,zmt);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=bt(e,pmt);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=bt(e,gmt);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,i){const s=n||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,i){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,i)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=bt(e,ymt);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,n,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=bt(e,xmt);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class fa{constructor(e){this._keypair=void 0,this._keypair=e??Eee()}static generate(){return new fa(Eee())}static fromSecretKey(e,n){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!n||!n.skipValidation){const i=e.slice(0,32),s=$j(i);for(let o=0;o<32;o++)if(r[o]!==s[o])throw new Error("provided secretKey is invalid")}return new fa({publicKey:r,secretKey:e})}static fromSeed(e){const n=$j(e),r=new Uint8Array(64);return r.set(e),r.set(n,32),new fa({publicKey:n,secretKey:r})}get publicKey(){return new vt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:we.struct([we.u32("instruction"),Wx("recentSlot"),we.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:we.struct([we.u32("instruction")])},ExtendLookupTable:{index:2,layout:we.struct([we.u32("instruction"),Wx(),we.seq(Tn(),we.offset(we.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:we.struct([we.u32("instruction")])},CloseLookupTable:{index:4,layout:we.struct([we.u32("instruction")])}});new vt("AddressLookupTab1e1111111111111111111111111");const E2=Object.freeze({RequestUnits:{index:0,layout:we.struct([we.u8("instruction"),we.u32("units"),we.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:we.struct([we.u8("instruction"),we.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:we.struct([we.u8("instruction"),we.u32("units")])},SetComputeUnitPrice:{index:3,layout:we.struct([we.u8("instruction"),Wx("microLamports")])}});class Hmt{constructor(){}static requestUnits(e){const n=E2.RequestUnits,r=_s(n,e);return new Vi({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=E2.RequestHeapFrame,r=_s(n,e);return new Vi({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=E2.SetComputeUnitLimit,r=_s(n,e);return new Vi({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=E2.SetComputeUnitPrice,r=_s(n,{microLamports:BigInt(e.microLamports)});return new Vi({keys:[],programId:this.programId,data:r})}}Hmt.programId=new vt("ComputeBudget111111111111111111111111111111");we.struct([we.u8("numSignatures"),we.u8("padding"),we.u16("signatureOffset"),we.u16("signatureInstructionIndex"),we.u16("publicKeyOffset"),we.u16("publicKeyInstructionIndex"),we.u16("messageDataOffset"),we.u16("messageDataSize"),we.u16("messageInstructionIndex")]);new vt("Ed25519SigVerify111111111111111111111111111");ept.utils.isValidPrivateKey;we.struct([we.u8("numSignatures"),we.u16("signatureOffset"),we.u8("signatureInstructionIndex"),we.u16("ethAddressOffset"),we.u8("ethAddressInstructionIndex"),we.u16("messageDataOffset"),we.u16("messageDataSize"),we.u8("messageInstructionIndex"),we.blob(20,"ethAddress"),we.blob(64,"signature"),we.u8("recoveryId")]);new vt("KeccakSecp256k11111111111111111111111111111");var $0e;new vt("StakeConfig11111111111111111111111111111111");class z0e{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}$0e=z0e;z0e.default=new $0e(0,0,vt.default);Object.freeze({Initialize:{index:0,layout:we.struct([we.u32("instruction"),opt(),apt()])},Authorize:{index:1,layout:we.struct([we.u32("instruction"),Tn("newAuthorized"),we.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:we.struct([we.u32("instruction")])},Split:{index:3,layout:we.struct([we.u32("instruction"),we.ns64("lamports")])},Withdraw:{index:4,layout:we.struct([we.u32("instruction"),we.ns64("lamports")])},Deactivate:{index:5,layout:we.struct([we.u32("instruction")])},Merge:{index:7,layout:we.struct([we.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:we.struct([we.u32("instruction"),Tn("newAuthorized"),we.u32("stakeAuthorizationType"),ey("authoritySeed"),Tn("authorityOwner")])}});new vt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:we.struct([we.u32("instruction"),lpt()])},Authorize:{index:1,layout:we.struct([we.u32("instruction"),Tn("newAuthorized"),we.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:we.struct([we.u32("instruction"),we.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:we.struct([we.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:we.struct([we.u32("instruction"),cpt()])}});new vt("Vote111111111111111111111111111111111111111");new vt("Va1idator1nfo111111111111111111111111111111");lt({name:mt(),website:Wt(mt()),details:Wt(mt()),iconUrl:Wt(mt()),keybaseUsername:Wt(mt())});new vt("Vote111111111111111111111111111111111111111");we.struct([Tn("nodePubkey"),Tn("authorizedWithdrawer"),we.u8("commission"),we.nu64(),we.seq(we.struct([we.nu64("slot"),we.u32("confirmationCount")]),we.offset(we.u32(),-8),"votes"),we.u8("rootSlotValid"),we.nu64("rootSlot"),we.nu64(),we.seq(we.struct([we.nu64("epoch"),Tn("authorizedVoter")]),we.offset(we.u32(),-8),"authorizedVoters"),we.struct([we.seq(we.struct([Tn("authorizedPubkey"),we.nu64("epochOfLastAuthorizedSwitch"),we.nu64("targetEpoch")]),32,"buf"),we.nu64("idx"),we.u8("isEmpty")],"priorVoters"),we.nu64(),we.seq(we.struct([we.nu64("epoch"),we.nu64("credits"),we.nu64("prevCredits")]),we.offset(we.u32(),-8),"epochCredits"),we.struct([we.nu64("slot"),we.nu64("timestamp")],"lastTimestamp")]);const S2=1e9;var gO,jee;function qmt(){if(jee)return gO;jee=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=e.length,l=e.charAt(0),c=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function h(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var x=0,b=0,w=0,k=v.length;w!==k&&v[w]===0;)w++,x++;for(var N=(k-w)*d+1>>>0,O=new Uint8Array(N);w!==k;){for(var D=v[w],_=0,F=N-1;(D!==0||_<b)&&F!==-1;F--,_++)D+=256*O[F]>>>0,O[F]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");b=_,w++}for(var z=N-b;z!==N&&O[z]===0;)z++;for(var L=l.repeat(x);z<N;++z)L+=e.charAt(O[z]);return L}function m(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;for(var x=0,b=0,w=0;v[x]===l;)b++,x++;for(var k=(v.length-x)*c+1>>>0,N=new Uint8Array(k);v[x];){var O=v.charCodeAt(x);if(O>255)return;var D=n[O];if(D===255)return;for(var _=0,F=k-1;(D!==0||_<w)&&F!==-1;F--,_++)D+=a*N[F]>>>0,N[F]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");w=_,x++}for(var z=k-w;z!==k&&N[z]===0;)z++;for(var L=new Uint8Array(b+(k-z)),$=b;z!==k;)L[$++]=N[z++];return L}function g(v){var x=m(v);if(x)return x;throw new Error("Non-base"+a+" character")}return{encode:h,decodeUnsafe:m,decode:g}}return gO=t,gO}var yO,Dee;function Gmt(){return Dee||(Dee=1,yO=qmt()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),yO}var A2=Gmt();const WE=new vt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new vt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const LP=new vt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new vt("So11111111111111111111111111111111111111112");new vt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const qB=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var Ep={},Bee;function Kmt(){if(Bee)return Ep;Bee=1,Object.defineProperty(Ep,"__esModule",{value:!0});function t(i){{const s=un.from(i);s.reverse();const o=s.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}Ep.toBigIntLE=t;function e(i){{const s=i.toString("hex");return s.length===0?BigInt(0):BigInt(`0x${s}`)}}Ep.toBigIntBE=e;function n(i,s){{const o=i.toString(16),a=un.from(o.padStart(s*2,"0").slice(0,s*2),"hex");return a.reverse(),a}}Ep.toBufferLE=n;function r(i,s){{const o=i.toString(16);return un.from(o.padStart(s*2,"0").slice(0,s*2),"hex")}}return Ep.toBufferBE=r,Ep}var Uee=Kmt();const Wmt=t=>e=>{const n=we.blob(t,e),{encode:r,decode:i}=qB(n),s=n;return s.decode=(o,a)=>{const l=i(o,a);return Uee.toBigIntLE(un.from(l))},s.encode=(o,a,l)=>{const c=Uee.toBufferLE(o,t);return r(c,a,l)},s},V0e=Wmt(8),Ymt=t=>{const e=we.u8(t),{encode:n,decode:r}=qB(e),i=e;return i.decode=(s,o)=>!!r(s,o),i.encode=(s,o,a)=>{const l=Number(s);return n(l,o,a)},i},Fee=t=>{const e=we.blob(32,t),{encode:n,decode:r}=qB(e),i=e;return i.decode=(s,o)=>{const a=r(s,o);return new vt(a)},i.encode=(s,o,a)=>{const l=s.toBuffer();return n(l,o,a)},i};class H0e extends Error{constructor(e){super(e)}}class q0e extends H0e{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var gN;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension"})(gN||(gN={}));function Jmt(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof vt?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const G0e=we.struct([we.u32("mintAuthorityOption"),Fee("mintAuthority"),V0e("supply"),we.u8("decimals"),Ymt("isInitialized"),we.u32("freezeAuthorityOption"),Fee("freezeAuthority")]);G0e.span;async function qj(t,e,n=!1,r=WE,i=LP){if(!n&&!vt.isOnCurve(e.toBuffer()))throw new q0e;const[s]=await vt.findProgramAddress([e.toBuffer(),r.toBuffer(),t.toBuffer()],i);return s}function K0e(t,e,n,r,i=WE,s=LP){return Xmt(t,e,n,r,un.alloc(0),i,s)}function Xmt(t,e,n,r,i,s=WE,o=LP){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:Yx.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new Vi({keys:a,programId:o,data:i})}const Gj=we.struct([we.u8("instruction"),V0e("amount")]);function W0e(t,e,n,r,i=[],s=WE){const o=Jmt([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,i),a=un.alloc(Gj.span);return Gj.encode({instruction:gN.Transfer,amount:BigInt(r)},a),new Vi({keys:o,programId:s,data:a})}const $ee=Object.freeze(Object.defineProperty({__proto__:null,ASSOCIATED_TOKEN_PROGRAM_ID:LP,MintLayout:G0e,TOKEN_PROGRAM_ID:WE,TokenError:H0e,get TokenInstruction(){return gN},TokenOwnerOffCurveError:q0e,createAssociatedTokenAccountInstruction:K0e,createTransferInstruction:W0e,getAssociatedTokenAddress:qj,transferInstructionData:Gj},Symbol.toStringTag,{value:"Module"}));class Qmt{constructor(){this.connection=new HB(F7,"confirmed")}createVaultKeypair(){return fa.generate()}getKeypairFromSecretKey(e){const n=Uint8Array.from(JSON.parse(e));return fa.fromSecretKey(n)}async getBalance(e){try{return await this.connection.getBalance(new vt(e))/S2}catch(n){return console.error("Error fetching balance:",n),0}}async wait(e){return new Promise(n=>setTimeout(n,e))}async getAccountInfoWithRetry(e,n=5){for(let r=0;r<n;r++)try{return await this.connection.getAccountInfo(e)}catch(i){if(console.warn(`Attempt ${r+1} failed to fetch account info: ${i.message}`),r===n-1)throw i;await this.wait(500*Math.pow(2,r))}return null}async getLatestBlockhashWithRetry(e=5){for(let n=0;n<e;n++)try{return await this.connection.getLatestBlockhash("confirmed")}catch(r){if(console.warn(`Attempt ${n+1} failed to get blockhash: ${r.message}`),n===e-1)throw new Error("Network error: Failed to fetch blockhash. Devnet may be down.");await this.wait(500*Math.pow(2,n))}throw new Error("Failed to get blockhash")}async getTokenBalances(e){const n=await this.getBalance(e);return Th.map(r=>({...r,balance:r.symbol==="SOL"?n:0}))}async airdrop(e){var n,r;try{const i=await this.connection.requestAirdrop(new vt(e),1*S2),s=await this.getLatestBlockhashWithRetry();return await this.connection.confirmTransaction({blockhash:s.blockhash,lastValidBlockHeight:s.lastValidBlockHeight,signature:i}),i}catch(i){throw(n=i.message)!=null&&n.includes("429")?new Error("Devnet Rate Limit Reached. Please try again later."):(r=i.message)!=null&&r.includes("limit reached")?new Error("Daily Airdrop Limit Reached for this IP."):i}}async connectWallet(){try{const{solana:e}=window;if(e&&e.isPhantom)return(await e.connect()).publicKey.toString();throw alert("Solana object not found! Get a Phantom Wallet "),new Error("No wallet found")}catch(e){throw console.error(e),e}}async pollForConfirmation(e,n=15,r=2e3){var i,s,o;for(let a=0;a<n;a++)try{const l=await this.connection.getSignatureStatus(e);if((i=l==null?void 0:l.value)!=null&&i.confirmationStatus){const c=l.value.confirmationStatus;if(c==="confirmed"||c==="finalized")return console.log(`[Solana]  Transaction confirmed (${c}) after ${a+1} attempts`),!0;c==="processed"&&console.log("[Solana]  Transaction processed, waiting for confirmation...")}if((s=l==null?void 0:l.value)!=null&&s.err)throw new Error(`Transaction failed on-chain: ${JSON.stringify(l.value.err)}`);await this.wait(r)}catch(l){if((o=l.message)!=null&&o.includes("failed on-chain"))throw l;console.warn(`[Solana] Poll attempt ${a+1} failed:`,l.message),await this.wait(r)}return!1}async sendTransactionWithRetry(e,n){var i,s;let r="";try{const o=await this.getLatestBlockhashWithRetry();if(e.recentBlockhash=o.blockhash,e.lastValidBlockHeight=o.lastValidBlockHeight,e.sign(...n),r=await this.connection.sendRawTransaction(e.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed"}),console.log(`[Solana]  Transaction sent: ${r.slice(0,16)}...`),!await this.pollForConfirmation(r,15,2e3)){console.warn(`[Solana]  Confirmation polling timed out, but transaction may have succeeded: ${r}`);const l=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw l.signature=r,l.isTimeout=!0,l}return r}catch(o){if(console.warn("Transaction Error:",o.name,o.message),o.name==="TransactionExpiredBlockheightExceededError"||(i=o.message)!=null&&i.includes("block height exceeded")||(s=o.message)!=null&&s.includes("timeout")||o.isTimeout){const a=new Error("Transaction timed out. The network is congested. Please check your wallet history before trying again to avoid double spending.");throw a.signature=r,a.isTimeout=!0,a}throw o}}async transferSol(e,n,r){try{const i=new Za().add(Yx.transfer({fromPubkey:e.publicKey,toPubkey:new vt(n),lamports:Math.floor(r*S2)}));return i.feePayer=e.publicKey,await this.sendTransactionWithRetry(i,[e])}catch(i){throw console.error("Transfer Error",i),new Error(`Transfer failed: ${i.message}`)}}async findPoolKeys(e,n){const{Liquidity:r,MARKET_STATE_LAYOUT_V3:i,LIQUIDITY_STATE_LAYOUT_V4:s,SPL_MINT_LAYOUT:o}=await ko(async()=>{const{Liquidity:N,MARKET_STATE_LAYOUT_V3:O,LIQUIDITY_STATE_LAYOUT_V4:D,SPL_MINT_LAYOUT:_}=await import("./index-CUfh4gru.js");return{Liquidity:N,MARKET_STATE_LAYOUT_V3:O,LIQUIDITY_STATE_LAYOUT_V4:D,SPL_MINT_LAYOUT:_}},[]),a=new vt(e),l=new vt(n),c=new vt(oWe),d=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:a.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:l.toBase58()}}],h=[{dataSize:s.span},{memcmp:{offset:s.offsetOf("baseMint"),bytes:l.toBase58()}},{memcmp:{offset:s.offsetOf("quoteMint"),bytes:a.toBase58()}}];let m=await this.connection.getProgramAccounts(c,{filters:d});if(m.length===0&&(m=await this.connection.getProgramAccounts(c,{filters:h})),m.length===0)return null;const g=m[0],v=s.decode(g.account.data),x=v.marketId,b=await this.connection.getAccountInfo(x);if(!b)throw new Error("Failed to fetch market info");const w=i.decode(b.data),k=r.getAssociatedAuthority({programId:c}).publicKey;return{id:g.pubkey,baseMint:v.baseMint,quoteMint:v.quoteMint,lpMint:v.lpMint,baseDecimals:v.baseDecimal.toNumber(),quoteDecimals:v.quoteDecimal.toNumber(),lpDecimals:5,version:4,programId:c,authority:k,openOrders:v.openOrders,targetOrders:v.targetOrders,baseVault:v.baseVault,quoteVault:v.quoteVault,withdrawQueue:v.withdrawQueue,lpVault:v.lpVault,marketVersion:3,marketProgramId:v.marketProgramId,marketId:v.marketId,marketAuthority:r.getAssociatedAuthority({programId:v.marketProgramId}).publicKey,marketBaseVault:w.baseVault,marketQuoteVault:w.quoteVault,marketBids:w.bids,marketAsks:w.asks,marketEventQueue:w.eventQueue}}async executeSwap(e,n,r,i,s){const{Liquidity:o,Token:a,TokenAmount:l,Percent:c,TxVersion:d}=await ko(async()=>{const{Liquidity:h,Token:m,TokenAmount:g,Percent:v,TxVersion:x}=await import("./index-CUfh4gru.js");return{Liquidity:h,Token:m,TokenAmount:g,Percent:v,TxVersion:x}},[]);try{const h=U=>{console.log(`[Swap Status] ${U}`),s&&s(U)};h("Initializing Swap Protocol...");const m="So11111111111111111111111111111111111111112",g=n.trim()==="SOL"?m:n.trim(),v=r.trim()==="SOL"?m:r.trim();h("Fetching Pool Keys...");const x=await this.findPoolKeys(g,v);if(!x)throw new Error(`No Liquidity Pool found for ${g} <-> ${v} on Devnet.`);h("Calculating Amount Out...");const b=g===x.baseMint.toBase58(),{TOKEN_PROGRAM_ID:w}=await ko(async()=>{const{TOKEN_PROGRAM_ID:U}=await Promise.resolve().then(()=>$ee);return{TOKEN_PROGRAM_ID:U}},void 0),k=new a(w,new vt(g),b?x.baseDecimals:x.quoteDecimals),N=new a(w,new vt(v),b?x.quoteDecimals:x.baseDecimals),O=new l(k,i,!1),D=new c(25,100);h("Fetching Pool Reserves...");const _=await o.fetchInfo({connection:this.connection,poolKeys:x}),{amountOut:F,minAmountOut:z}=o.computeAmountOut({poolKeys:x,poolInfo:_,amountIn:O,currencyOut:N,slippage:D});h(`Calculated Amount Out: ${F.toFixed()} (Min: ${z.toFixed()})`),h("Building Swap Transaction...");const L=await this.getTokenAccountsByOwner(e.publicKey),{innerTransactions:$}=await o.makeSwapInstructionSimple({connection:this.connection,poolKeys:x,userKeys:{tokenAccounts:L,owner:e.publicKey},amountIn:O,amountOut:z,fixedSide:"in",makeTxVersion:d.V0});h("Sending Transaction to Devnet...");const G=await Promise.all($.map(async U=>{const{instructions:A,signers:I}=U,j=new Za;return j.add(...A),j.feePayer=e.publicKey,j.recentBlockhash=(await this.connection.getLatestBlockhash()).blockhash,j.sign(e,...I),j}));let V="";for(const U of G){const A=await this.connection.sendRawTransaction(U.serialize(),{skipPreflight:!1,preflightCommitment:"confirmed",maxRetries:5});if(console.log(`[Swap]  Transaction sent: ${A.slice(0,16)}...`),!await this.pollForConfirmation(A,15,2e3))throw new Error("Transaction confirmation timed out - please check explorer for status");V=A}return h("Transaction Confirmed!"),V}catch(h){throw console.error("Swap Error:",h),new Error(`Swap failed: ${h.message}`)}}async getWalletAssets(e){const n=new vt(e),r=await this.getBalance(e),s=(await this.getTokenAccountsByOwner(n)).map(o=>{var a,l;return{mint:o.accountInfo.mint.toBase58(),amount:o.accountInfo.amount,decimals:o.accountInfo.decimals,symbol:((a=Th.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:a.symbol)||"UNKNOWN",name:((l=Th.find(c=>c.mint===o.accountInfo.mint.toBase58()))==null?void 0:l.name)||"Unknown Token",isNft:o.accountInfo.decimals===0&&o.accountInfo.amount==="1"}});return s.unshift({mint:"So11111111111111111111111111111111111111112",amount:(r*S2).toString(),decimals:9,symbol:"SOL",name:"Solana",isNft:!1}),s}async getTokenAccountsByOwner(e){const{TOKEN_PROGRAM_ID:n}=await ko(async()=>{const{TOKEN_PROGRAM_ID:i}=await Promise.resolve().then(()=>$ee);return{TOKEN_PROGRAM_ID:i}},void 0);return(await this.connection.getParsedTokenAccountsByOwner(e,{programId:n})).value.map(i=>({pubkey:i.pubkey,programId:i.account.owner,accountInfo:{mint:new vt(i.account.data.parsed.info.mint),amount:i.account.data.parsed.info.tokenAmount.amount,decimals:i.account.data.parsed.info.tokenAmount.decimals}}))}async transferToken(e,n,r,i,s){if(n==="So11111111111111111111111111111111111111112"||n==="SOL")return this.transferSol(e,r,i);try{const o=new vt(n),a=new vt(r),l=await qj(o,e.publicKey),c=await qj(o,a),d=new Za;await this.connection.getAccountInfo(c)||d.add(K0e(e.publicKey,c,a,o));let m;if(await this.connection.getAccountInfo(l)){const v=await this.connection.getTokenAccountBalance(l),x=BigInt(v.value.amount),b=BigInt(Math.round(i*Math.pow(10,s))),w=x>b?x-b:b-x,k=x/BigInt(100);w<=k?(m=x,console.log(`[Transfer] Using actual balance: ${x} (requested: ${b})`)):m=b}else m=BigInt(Math.round(i*Math.pow(10,s)));return d.add(W0e(l,c,e.publicKey,m)),d.feePayer=e.publicKey,await this.sendTransactionWithRetry(d,[e])}catch(o){throw console.error("Token Transfer Error",o),new Error(`Token Transfer failed: ${o.message}`)}}async getRecentTransactions(e,n=20){try{const r=new vt(e);return(await this.connection.getSignaturesForAddress(r,{limit:n})).map(s=>({signature:s.signature,slot:s.slot,err:s.err,memo:s.memo,blockTime:s.blockTime,status:s.err?"failed":"success",confirmationStatus:s.confirmationStatus}))}catch(r){return console.error("Error fetching transactions:",r),[]}}}const Ls=new Qmt,Zf=class Zf{static async setSessionHash(e){try{const n=Date.now(),r=new TextEncoder,i=crypto.getRandomValues(new Uint8Array(16)),s=r.encode(e+n.toString()),o=new Uint8Array(i.length+s.length);o.set(i),o.set(s,i.length);const a=await crypto.subtle.digest("SHA-256",o),l=new Uint8Array(a);this.sessionHash=btoa(String.fromCharCode(...l)),this.sessionTimestamp=n}catch{console.error("[SecurityService] Failed to set session hash")}}static hasValidSession(){return this.sessionHash!==null&&this.sessionTimestamp>0}static getSessionTimestamp(){return this.sessionTimestamp}static clearSession(){this.sessionHash=null,this.sessionTimestamp=0}static initializeDevToolsDetection(){if(this.detectionInterval)return;const e=()=>{const i=window.outerWidth-window.innerWidth>160,s=window.outerHeight-window.innerHeight>160;(i||s)&&!this.devToolsDetected&&this.handleDevToolsDetected()},n=new Image;let r=!1;Object.defineProperty(n,"id",{get:function(){return r=!0,""}}),this.detectionInterval=setInterval(()=>{r=!1,console.log(n),console.clear(),r&&!this.devToolsDetected&&this.handleDevToolsDetected(),e()},2e3),window.addEventListener("resize",e)}static handleDevToolsDetected(){this.devToolsDetected||(this.devToolsDetected=!0,console.clear(),console.warn("%c SECURITY NOTICE ","color: #ff4444; font-size: 28px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);"),console.warn("%cDeveloper tools detected.","color: #ff8800; font-size: 16px;"),console.warn("%cFor your security, sensitive operations may be restricted.","color: #ffaa00; font-size: 14px;"),console.warn("%cIf you are not a developer, please close this panel immediately.","color: #ffffff; font-size: 12px;"),this.securityListeners.forEach(e=>{try{e()}catch{}}))}static isDevToolsDetected(){return this.devToolsDetected}static onSecurityBreach(e){return this.securityListeners.add(e),()=>this.securityListeners.delete(e)}static initializeConsoleSanitization(){const e=[/0x[a-fA-F0-9]{64}/g,/[1-9A-HJ-NP-Za-km-z]{87,88}/g,/0x[a-fA-F0-9]{40,}/g,/[A-Za-z0-9+/]{100,}={0,2}/g],n=r=>r.map(i=>{if(typeof i=="string"){let s=i;for(const o of e)s=s.replace(o,"[REDACTED]");return s}if(typeof i=="object"&&i!==null)try{const s=JSON.stringify(i);let o=!1;for(const a of e)if(a.test(s)){o=!0;break}if(o)return"[Object with sensitive data]"}catch{}return i});console.log=(...r)=>{this.originalConsole.log.apply(console,n(r))},console.warn=(...r)=>{this.originalConsole.warn.apply(console,n(r))},console.info=(...r)=>{this.originalConsole.info.apply(console,n(r))},console.debug=(...r)=>{this.originalConsole.debug.apply(console,n(r))}}static protectGlobalNamespace(){if(typeof window>"u")return;const e=window,n=["__dealerService","__polymarketDealerService","__backgroundTimer"];for(const r of n)try{e[r]&&delete e[r],Object.defineProperty(e,r,{value:void 0,writable:!1,configurable:!1})}catch{}}static initializeProductionSecurity(){console.log("[SecurityService] Initializing production security..."),this.initializeConsoleSanitization(),this.initializeDevToolsDetection(),this.protectGlobalNamespace(),console.log("[SecurityService] Production security initialized")}static cleanup(){this.detectionInterval&&(clearInterval(this.detectionInterval),this.detectionInterval=null),this.securityListeners.clear(),this.devToolsDetected=!1,this.clearSession()}};Zf.sessionHash=null,Zf.sessionTimestamp=0,Zf.devToolsDetected=!1,Zf.detectionInterval=null,Zf.securityListeners=new Set,Zf.originalConsole={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug};let Py=Zf;const zee="vault_balance_history",Vee="vault_intraday_history",Hee=90,qee=96;class Zmt{constructor(){this.history=[],this.intradayHistory=[],this.listeners=new Set,this.isInitialized=!1,this.initPromise=null,this.initPromise=this.initialize()}async initialize(){this.isInitialized||(await this.loadFromStorage(),this.isInitialized=!0,this.notify())}async waitForInit(){this.initPromise&&await this.initPromise}async loadFromStorage(){try{const e=await Ae.getItem(Ae.getUserKey(zee));e&&(this.history=JSON.parse(e));const n=await Ae.getItem(Ae.getUserKey(Vee));if(n){this.intradayHistory=JSON.parse(n);const r=Date.now()-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(i=>i.timestamp>r)}}catch(e){console.error("[BalanceHistory] Failed to load:",e),this.history=[],this.intradayHistory=[]}}async saveToStorage(){try{await Ae.setItem(Ae.getUserKey(zee),JSON.stringify(this.history)),await Ae.setItem(Ae.getUserKey(Vee),JSON.stringify(this.intradayHistory))}catch(e){console.error("[BalanceHistory] Failed to save:",e)}}notify(){this.listeners.forEach(e=>e())}getTodayDate(){return new Date().toISOString().split("T")[0]}get15MinTimeKey(){const e=new Date,n=Math.floor(e.getMinutes()/15)*15;return`${e.getHours().toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}async reloadFromStorage(){console.log("[BalanceHistory] Reloading from storage..."),await this.loadFromStorage(),this.notify()}reset(){console.log("[BalanceHistory] Resetting history..."),this.history=[],this.intradayHistory=[],this.notify()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}getSnapshot(){return this.history}recordSnapshot(e,n,r){const i=this.getTodayDate(),s=e+n+r,o=Date.now(),a=this.history.findIndex(g=>g.date===i),l={date:i,timestamp:o,solValue:e,hlValue:n,pmValue:r,totalValue:s};a>=0?this.history[a]=l:this.history.push(l),this.history.sort((g,v)=>g.date.localeCompare(v.date)),this.history.length>Hee&&(this.history=this.history.slice(-Hee));const c=this.get15MinTimeKey(),d=o-1440*60*1e3;this.intradayHistory=this.intradayHistory.filter(g=>g.timestamp>d);const h=this.intradayHistory.findIndex(g=>g.timeKey===c&&o-g.timestamp<900*1e3),m={timestamp:o,timeKey:c,solValue:e,hlValue:n,pmValue:r,totalValue:s};h>=0?this.intradayHistory[h]=m:this.intradayHistory.push(m),this.intradayHistory.length>qee&&(this.intradayHistory=this.intradayHistory.slice(-qee)),this.saveToStorage(),this.notify(),console.log(`[BalanceHistory]  Snapshot saved: SOL=$${e.toFixed(2)}, HL=$${n.toFixed(2)}, PM=$${r.toFixed(2)} [${c}]`)}getHistoryForChart(e=30){return e===1?this.intradayHistory.map(r=>({date:r.timeKey,value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue})):this.history.slice(-e).map(r=>({date:new Date(r.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:r.totalValue,solValue:r.solValue,hlValue:r.hlValue,pmValue:r.pmValue}))}hasHistory(){return this.history.length>0||this.intradayHistory.length>0}getHistoryDays(){return this.history.length}hasIntradayHistory(){return this.intradayHistory.length>0}clearHistory(){this.history=[],this.intradayHistory=[],this.saveToStorage(),this.notify()}}const Tl=new Zmt,e0t=(t,e)=>{const[n,r]=S.useState(!0),[i,s]=S.useState({publicKey:null,encryptedPrivateKey:null,solBalance:0,tokens:Th,assets:[],isUnlocked:!1,ownerPublicKey:null,hlPublicKey:null,hlEncryptedPrivateKey:null,hlBalance:0,hlOwnerPublicKey:null,hlPositions:[],pmPublicKey:null,pmEncryptedPrivateKey:null,pmBalance:0,pmOwnerPublicKey:null}),[o,a]=S.useState(""),[l,c]=S.useState(""),[d,h]=S.useState("SOL"),[m,g]=S.useState(null),[v,x]=S.useState(!1),[b,w]=S.useState(""),[k,N]=S.useState(!1),[O,D]=S.useState(""),[_,F]=S.useState(!1),[z,L]=S.useState(""),[$,G]=S.useState(!1),[V,U]=S.useState(""),[A,I]=S.useState(!1),[j,q]=S.useState(!1),[K,te]=S.useState(!1),[Y,H]=S.useState(""),[M,P]=S.useState(""),[W,X]=S.useState(""),[ie,oe]=S.useState(""),[Te,ce]=S.useState(""),[de,ke]=S.useState("");S.useEffect(()=>{const he=Py.onSecurityBreach(()=>{i.isUnlocked&&(console.warn("[useVault] Security breach detected - locking vault"),s(pe=>({...pe,isUnlocked:!1})),a(""),g(null),Py.clearSession(),t("Security alert: Vault locked for protection"))});return()=>he()},[i.isUnlocked,t]),S.useEffect(()=>{if(!e){console.log("[useVault] Waiting for userId before loading vault data..."),r(!0),Tl.reset(),yt.reset();return}(async()=>{r(!0);try{await Tl.reloadFromStorage(),await yt.reloadFromStorage(),await Ae.migrateFromLocalStorage(),console.log("[useVault] Loading vault data for user:",e.substring(0,8)+"...");const pe=await Ae.getItem(Ae.getUserKey("agent_vault_pubkey")),Je=await Ae.getItem(Ae.getUserKey("agent_vault_enc")),Xe=await Ae.getItem(Ae.getUserKey("agent_owner_pubkey")),ot=await Ae.getItem(Ae.getUserKey("agent_hl_vault_pubkey")),Nt=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),wt=await Ae.getItem(Ae.getUserKey("agent_hl_owner_pubkey")),Rt=await Ae.getItem(Ae.getUserKey("agent_pm_vault_pubkey")),rn=await Ae.getItem(Ae.getUserKey("agent_pm_vault_enc")),et=await Ae.getItem(Ae.getUserKey("agent_pm_owner_pubkey"));console.log("[useVault] Loaded keys:",{solana:pe?pe.substring(0,8)+"...":null,hyperliquid:ot?ot.substring(0,8)+"...":null,polymarket:Rt?Rt.substring(0,8)+"...":null}),pe&&Je?(s(Ht=>({...Ht,publicKey:pe,encryptedPrivateKey:Je,ownerPublicKey:Xe,hlPublicKey:ot,hlEncryptedPrivateKey:Nt,hlOwnerPublicKey:wt,pmPublicKey:Rt,pmEncryptedPrivateKey:rn,pmOwnerPublicKey:et})),je(pe),ot&&ye(ot),Rt&&Ke(Rt)):ot&&Nt?(s(Ht=>({...Ht,hlPublicKey:ot,hlEncryptedPrivateKey:Nt,hlOwnerPublicKey:wt,pmPublicKey:Rt,pmEncryptedPrivateKey:rn,pmOwnerPublicKey:et})),ye(ot),Rt&&Ke(Rt)):Rt&&rn&&(s(Ht=>({...Ht,pmPublicKey:Rt,pmEncryptedPrivateKey:rn,pmOwnerPublicKey:et})),Ke(Rt))}catch(pe){console.error("[useVault] Failed to load vault from storage",pe)}finally{r(!1)}})()},[e]);const ye=async he=>{try{const pe=await qt.getUserState(he),Je=pe.marginSummary,Xe=Je?parseFloat(Je.accountValue):0,ot=pe.assetPositions||[];s(Nt=>({...Nt,hlBalance:Xe,hlPositions:ot}))}catch(pe){console.error("Failed to refresh HL balance",pe)}},Ke=async he=>{try{const{ethers:pe}=await ko(async()=>{const{ethers:rn}=await import("./index-DijXYR1N.js");return{ethers:rn}},[]),Je=new pe.JsonRpcProvider("https://polygon-rpc.com"),Xe="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",ot=["function balanceOf(address) view returns (uint256)"],wt=await new pe.Contract(Xe,ot,Je).balanceOf(he),Rt=parseFloat(pe.formatUnits(wt,6));s(rn=>({...rn,pmBalance:Rt}))}catch(pe){console.error("Failed to refresh Polymarket balance",pe)}},je=async he=>{try{const pe=await Ls.getBalance(he),Je=await Ls.getWalletAssets(he);s(Xe=>({...Xe,solBalance:pe,assets:Je}))}catch(pe){console.error("Failed to refresh balance",pe)}};return{vault:i,setVault:s,password:o,setPassword:a,withdrawAmount:l,setWithdrawAmount:c,withdrawNetwork:d,setWithdrawNetwork:h,showBackupModal:v,setShowBackupModal:x,backupKey:b,setBackupKey:w,showHLBackupModal:k,setShowHLBackupModal:N,hlBackupKey:O,setHLBackupKey:D,isImporting:$,setIsImporting:G,importKey:V,setImportKey:U,refreshBalance:je,connectOwnerWallet:async()=>{try{const he=await Ls.connectWallet();s(pe=>({...pe,ownerPublicKey:he})),await Ae.setItem(Ae.getUserKey("agent_owner_pubkey"),he),t("Solana Owner Wallet Connected: "+he.slice(0,6)+"...")}catch{t("Failed to connect Solana wallet.")}},disconnectOwnerWallet:async()=>{s(he=>({...he,ownerPublicKey:null})),await Ae.removeItem(Ae.getUserKey("agent_owner_pubkey")),t("Solana Owner Wallet Disconnected")},connectHLOwnerWallet:async()=>{try{const{ethereum:he}=window;if(he){const Je=(await he.request({method:"eth_requestAccounts"}))[0];s(Xe=>({...Xe,hlOwnerPublicKey:Je})),await Ae.setItem(Ae.getUserKey("agent_hl_owner_pubkey"),Je),t("Hyperliquid Owner Wallet Connected: "+Je.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectHLOwnerWallet:async()=>{s(he=>({...he,hlOwnerPublicKey:null})),await Ae.removeItem(Ae.getUserKey("agent_hl_owner_pubkey")),t("Hyperliquid Owner Wallet Disconnected")},createVault:async()=>{if(!o){t("Password is required");return}try{const he=Ls.createVaultKeypair(),pe=Array.from(he.secretKey),Je=await lr.encrypt(JSON.stringify(pe),o),Xe=qt.createVaultWallet(),ot=await lr.encrypt(Xe.privateKey,o);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),he.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),Je),await Ae.setItem(Ae.getUserKey("agent_hl_vault_pubkey"),Xe.address),await Ae.setItem(Ae.getUserKey("agent_hl_vault_enc"),ot),s(Nt=>({...Nt,isUnlocked:!0,publicKey:he.publicKey.toBase58(),encryptedPrivateKey:Je,hlPublicKey:Xe.address,hlEncryptedPrivateKey:ot})),D(Xe.privateKey),w(A2.encode(he.secretKey)),x(!0),t("Vaults created successfully")}catch(he){console.error("Vault creation failed",he),t("Failed to create vault")}},unlockVault:async()=>{if(!o){t("Password is required");return}try{const he=await Ae.getItem(Ae.getUserKey("agent_vault_enc")),pe=await Ae.getItem(Ae.getUserKey("agent_vault_pubkey")),Je=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),Xe=await Ae.getItem(Ae.getUserKey("agent_hl_vault_pubkey"));if((!he||!pe)&&(!Je||!Xe)){t("No vault found. Please create one.");return}let ot=null,Nt=null,wt=null;if(he&&pe)try{const Rt=await lr.decrypt(he,o),rn=Uint8Array.from(JSON.parse(Rt));if(ot=fa.fromSecretKey(rn),ot.publicKey.toBase58()!==pe)throw new Error("Keypair mismatch");g(ot)}catch(Rt){throw console.error("Solana unlock failed",Rt),new Error("Incorrect password for Solana Vault")}if(Je&&Xe)try{const Rt=await lr.decrypt(Je,o),{ethers:rn}=await ko(async()=>{const{ethers:Ht}=await import("./index-DijXYR1N.js");return{ethers:Ht}},[]),et=new rn.Wallet(Rt);et.address.toLowerCase()!==Xe.toLowerCase()?(console.error(`[Vault]  HL Address Mismatch! Stored: ${Xe}, Derived: ${et.address}`),Nt=et.address,t("Warning: Stored HL address mismatch. Using derived address.")):Nt=Xe,wt=Je}catch(Rt){throw console.error("Hyperliquid unlock failed",Rt),new Error("Incorrect password for Hyperliquid Vault")}return s(Rt=>({...Rt,isUnlocked:!0,publicKey:ot?ot.publicKey.toBase58():null,encryptedPrivateKey:he||null,hlPublicKey:Nt||null,hlEncryptedPrivateKey:wt||null})),Nt&&ye(Nt),ot&&je(ot.publicKey.toBase58()),await Py.setSessionHash(o),t("Vault unlocked"),!0}catch(he){return console.error("Unlock failed",he),t(he.message||"Incorrect password or corrupted vault"),!1}},requestAirdrop:async()=>{if(i.publicKey)try{t("Requesting 1 SOL Airdrop..."),await Ls.airdrop(i.publicKey),t("Airdrop Successful!"),setTimeout(()=>je(i.publicKey),2e3)}catch(he){console.error("Airdrop failed",he),t(`Airdrop Failed: ${he.message}`),alert(he.message)}},handleWithdraw:async()=>{if(!i.isUnlocked&&!m){alert("Vault is locked or keypair missing");return}if(!i.isUnlocked||!m){alert("Vault is locked");return}if(!i.ownerPublicKey){alert("Connect Owner Wallet first");return}const he=parseFloat(l);if(isNaN(he)||he<=0){alert("Invalid amount");return}if(he>i.solBalance){alert("Insufficient balance");return}try{t(`Sending ${he} SOL to Owner...`);const pe=await Ls.transferSol(m,i.ownerPublicKey,he);t(`Withdrawal Success! Sig: ${pe.slice(0,8)}...`),c(""),je(i.publicKey)}catch(pe){console.error(pe),t(`Withdrawal Failed: ${pe.message}`)}},handleWithdrawHL:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.hlOwnerPublicKey){alert("Connect Hyperliquid Owner Wallet first");return}if(!i.hlEncryptedPrivateKey){alert("Hyperliquid vault not found");return}const he=parseFloat(l);if(isNaN(he)||he<=1){alert("Amount must be greater than $1 (withdrawal fee)");return}if(he>(i.hlBalance||0)){alert("Insufficient USDC balance");return}try{const pe=await lr.decrypt(i.hlEncryptedPrivateKey,o),Je=qt.getWalletFromPrivateKey(pe);t(`Withdrawing ${he} USDC to Hyperliquid Owner...`);const Xe=await qt.withdrawUSDC(Je,i.hlOwnerPublicKey,he);t(`Withdrawal Success! Status: ${Xe.status}`),c(""),i.hlPublicKey&&setTimeout(()=>ye(i.hlPublicKey),2e3)}catch(pe){console.error(pe),t(`Withdrawal Failed: ${pe.message}`)}},handleWithdrawPM:async()=>{if(!i.isUnlocked){alert("Vault is locked");return}if(!i.pmOwnerPublicKey){alert("Connect Polymarket Owner Wallet first");return}if(!i.pmEncryptedPrivateKey){alert("Polymarket vault not found");return}const he=parseFloat(l);if(isNaN(he)||he<=0){alert("Amount must be greater than 0");return}if(he>(i.pmBalance||0)){alert("Insufficient USDC balance");return}try{const pe=await lr.decrypt(i.pmEncryptedPrivateKey,o),{ethers:Je}=await ko(async()=>{const{ethers:Ht}=await import("./index-DijXYR1N.js");return{ethers:Ht}},[]),Xe=new Je.JsonRpcProvider("https://polygon-rpc.com"),ot=new Je.Wallet(pe,Xe),Nt="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",wt=["function transfer(address to, uint256 amount) returns (bool)","function balanceOf(address) view returns (uint256)"],Rt=new Je.Contract(Nt,wt,ot),rn=Je.parseUnits(he.toString(),6);t(`Withdrawing ${he} USDC to Polymarket Owner...`);const et=await Rt.transfer(i.pmOwnerPublicKey,rn);await et.wait(),t(`Withdrawal Success! Tx: ${et.hash.slice(0,10)}...`),c(""),i.pmPublicKey&&setTimeout(()=>Ke(i.pmPublicKey),2e3)}catch(pe){console.error(pe),t(`Withdrawal Failed: ${pe.message}`)}},importVault:async()=>{if(!o||!V){t("Password and Private Key are required");return}try{const he=A2.decode(V),pe=fa.fromSecretKey(he),Je=Array.from(pe.secretKey),Xe=await lr.encrypt(JSON.stringify(Je),o);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),pe.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),Xe),s(ot=>({...ot,isUnlocked:!0,publicKey:pe.publicKey.toBase58(),encryptedPrivateKey:Xe})),t("Vault imported successfully"),G(!1),U("")}catch(he){console.error("Vault import failed",he),t("Invalid Private Key or Import Failed")}},resolveTokenMint:he=>{const pe=he.trim(),Je=Th.find(Xe=>Xe.symbol.toUpperCase()===pe.toUpperCase());return Je?Je.mint:pe},refreshHLBalance:ye,isImportingSolana:A,setIsImportingSolana:I,isImportingHyperliquid:j,setIsImportingHyperliquid:q,solanaPassword:Y,setSolanaPassword:H,hyperliquidPassword:M,setHyperliquidPassword:P,solanaImportKey:ie,setSolanaImportKey:oe,hlImportKey:Te,setHLImportKey:ce,createSolanaVault:async()=>{const he=i.isUnlocked&&o?o:Y;if(!he){t("Password is required");return}try{const pe=Ls.createVaultKeypair(),Je=Array.from(pe.secretKey),Xe=await lr.encrypt(JSON.stringify(Je),he);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),pe.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),Xe),s(ot=>({...ot,isUnlocked:!0,publicKey:pe.publicKey.toBase58(),encryptedPrivateKey:Xe})),g(pe),a(he),w(A2.encode(pe.secretKey)),x(!0),t("Solana Vault created successfully"),H("")}catch(pe){console.error("Solana vault creation failed",pe),t("Failed to create Solana vault")}},createHyperliquidVault:async()=>{const he=i.isUnlocked&&o?o:M;if(!he){t("Password is required");return}try{const pe=qt.createVaultWallet(),Je=await lr.encrypt(pe.privateKey,he);await Ae.setItem(Ae.getUserKey("agent_hl_vault_pubkey"),pe.address),await Ae.setItem(Ae.getUserKey("agent_hl_vault_enc"),Je),s(Xe=>({...Xe,hlPublicKey:pe.address,hlEncryptedPrivateKey:Je})),a(he),D(pe.privateKey),N(!0),t("Hyperliquid Vault created successfully"),P(""),ye(pe.address)}catch(pe){console.error("Hyperliquid vault creation failed",pe),t("Failed to create Hyperliquid vault")}},importSolanaVault:async()=>{const he=i.isUnlocked&&o?o:Y;if(!he||!ie){t("Password and Private Key are required");return}try{const pe=A2.decode(ie),Je=fa.fromSecretKey(pe),Xe=Array.from(Je.secretKey),ot=await lr.encrypt(JSON.stringify(Xe),he);await Ae.setItem(Ae.getUserKey("agent_vault_pubkey"),Je.publicKey.toBase58()),await Ae.setItem(Ae.getUserKey("agent_vault_enc"),ot),s(Nt=>({...Nt,isUnlocked:!0,publicKey:Je.publicKey.toBase58(),encryptedPrivateKey:ot})),g(Je),a(he),t("Solana Vault imported successfully"),I(!1),oe(""),H(""),je(Je.publicKey.toBase58())}catch(pe){console.error("Solana vault import failed",pe),t("Invalid Private Key or Import Failed")}},importHyperliquidVault:async()=>{const he=i.isUnlocked&&o?o:M;if(!he||!Te){t("Password and Private Key are required");return}try{let pe=Te.trim();pe.startsWith("0x")||(pe="0x"+pe);const{ethers:Je}=await ko(async()=>{const{ethers:Nt}=await import("./index-DijXYR1N.js");return{ethers:Nt}},[]),Xe=new Je.Wallet(pe),ot=await lr.encrypt(pe,he);await Ae.setItem(Ae.getUserKey("agent_hl_vault_pubkey"),Xe.address),await Ae.setItem(Ae.getUserKey("agent_hl_vault_enc"),ot),s(Nt=>({...Nt,hlPublicKey:Xe.address,hlEncryptedPrivateKey:ot})),a(he),t("Hyperliquid Vault imported successfully"),q(!1),ce(""),P(""),ye(Xe.address)}catch(pe){console.error("Hyperliquid vault import failed",pe),t("Invalid Private Key or Import Failed")}},isImportingPolymarket:K,setIsImportingPolymarket:te,polymarketPassword:W,setPolymarketPassword:X,pmImportKey:de,setPMImportKey:ke,createPolymarketVault:async()=>{const he=i.isUnlocked&&o?o:W;if(!he){t("Password is required");return}try{const{ethers:pe}=await ko(async()=>{const{ethers:ot}=await import("./index-DijXYR1N.js");return{ethers:ot}},[]),Je=pe.Wallet.createRandom(),Xe=await lr.encrypt(Je.privateKey,he);await Ae.setItem(Ae.getUserKey("agent_pm_vault_pubkey"),Je.address),await Ae.setItem(Ae.getUserKey("agent_pm_vault_enc"),Xe),s(ot=>({...ot,pmPublicKey:Je.address,pmEncryptedPrivateKey:Xe})),a(he),L(Je.privateKey),F(!0),t("Polymarket Vault created successfully"),X(""),Ke(Je.address)}catch(pe){console.error("Polymarket vault creation failed",pe),t("Failed to create Polymarket vault")}},importPolymarketVault:async()=>{const he=i.isUnlocked&&o?o:W;if(!he||!de){t("Password and Private Key are required");return}try{let pe=de.trim();pe.startsWith("0x")||(pe="0x"+pe);const{ethers:Je}=await ko(async()=>{const{ethers:Nt}=await import("./index-DijXYR1N.js");return{ethers:Nt}},[]),Xe=new Je.Wallet(pe),ot=await lr.encrypt(pe,he);await Ae.setItem(Ae.getUserKey("agent_pm_vault_pubkey"),Xe.address),await Ae.setItem(Ae.getUserKey("agent_pm_vault_enc"),ot),s(Nt=>({...Nt,pmPublicKey:Xe.address,pmEncryptedPrivateKey:ot})),a(he),t("Polymarket Vault imported successfully"),te(!1),ke(""),X(""),Ke(Xe.address)}catch(pe){console.error("Polymarket vault import failed",pe),t("Invalid Private Key or Import Failed")}},connectPMOwnerWallet:async()=>{try{const{ethereum:he}=window;if(he){const Je=(await he.request({method:"eth_requestAccounts"}))[0];s(Xe=>({...Xe,pmOwnerPublicKey:Je})),await Ae.setItem(Ae.getUserKey("agent_pm_owner_pubkey"),Je),t("Polymarket Owner Wallet Connected: "+Je.slice(0,6)+"...")}else t("No Ethereum wallet found! Install MetaMask.")}catch{t("Failed to connect EVM wallet.")}},disconnectPMOwnerWallet:async()=>{s(he=>({...he,pmOwnerPublicKey:null})),await Ae.removeItem(Ae.getUserKey("agent_pm_owner_pubkey")),t("Polymarket Owner Wallet Disconnected")},refreshPMBalance:Ke,showPMBackupModal:_,setShowPMBackupModal:F,pmBackupKey:z,setPMBackupKey:L,deleteAccount:async()=>{try{await Ae.clear(),window.location.reload()}catch(he){console.error(he)}}}},ju=["#E7FE55","#D4EB4C","#C1D843","#AEC53A","#9BB231","#889F28","#758C1F","#627916","#4F660D","#3C5304"];Array.from({length:30},(t,e)=>({date:new Date(Date.now()-(29-e)*24*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:100+Math.random()*50+e*2}));const t0t=t=>{const[e,n]=S.useState([]),[r,i]=S.useState([]),[s,o]=S.useState({}),a=S.useSyncExternalStore(ht.subscribe.bind(ht),ht.getSnapshot.bind(ht));S.useEffect(()=>{const d=async()=>{const h={};try{const m=await Co.getMarketPrice("SOLUSDT");h.SOL=m.price}catch(m){console.error("Failed to fetch SOL price",m)}for(const m of t.assets||[])if(!(!m.symbol||m.symbol==="UNKNOWN"))try{const g=m.symbol.toUpperCase();if(h[g])continue;const v=await Co.getMarketPrice(`${g}USDT`);h[g]=v.price}catch(g){console.warn(`Failed to fetch price for ${m.symbol}`,g)}h.USDC=1,o(m=>({...m,...h}))};if(t.isUnlocked){d();const h=setInterval(d,6e4);return()=>clearInterval(h)}},[t.isUnlocked,t.assets]);const l=S.useSyncExternalStore(Tl.subscribe.bind(Tl),Tl.getSnapshot.bind(Tl));S.useEffect(()=>{if(!t.isUnlocked)return;const d=s.SOL||0,h=t.solBalance*d,m=t.hlBalance||0,g=(a.portfolioValue||0)+(a.currentExposure||0);(h>0||m>0||g>0)&&Tl.recordSnapshot(h,m,g)},[t.isUnlocked,t.solBalance,s,t.hlBalance,a.portfolioValue,a.currentExposure]),S.useEffect(()=>{if(!t.isUnlocked)return;const d=()=>{const g=s.SOL||0,v=t.solBalance*g,x=t.hlBalance||0,b=(a.portfolioValue||0)+(a.currentExposure||0);(v>0||x>0||b>0)&&(Tl.recordSnapshot(v,x,b),console.log("[useMarketData]  Periodic 15-min snapshot recorded"))};d();const h=900*1e3,m=setInterval(d,h);return()=>clearInterval(m)},[t.isUnlocked]),S.useEffect(()=>{if(Tl.hasHistory()){const d=Tl.getHistoryForChart(1);n(d);const h=Tl.getHistoryForChart(365);i(h)}},[l]);const c=S.useMemo(()=>{const d=[];let h=0,m=0;const g=s.SOL||0,v=t.solBalance*g;t.solBalance>0&&(d.push({name:"Solana",symbol:"SOL",value:v,amount:t.solBalance,price:g,color:ju[0],hasPrice:g>0,network:"solana"}),g>0?h+=v:m++);const x=t.hlBalance||0;x>0&&(d.push({name:"USDC (Hyperliquid)",symbol:"USDC",value:x,amount:x,price:1,color:ju[1],hasPrice:!0,network:"hyperliquid"}),h+=x),t.hlPositions&&t.hlPositions.length>0&&t.hlPositions.forEach((w,k)=>{const N=w.position,O=parseFloat(N.szi),D=parseFloat(N.entryPx),_=parseFloat(N.unrealizedPnl),F=Math.abs(O*D)+_;F>0&&(d.push({name:`${N.coin} ${O>=0?"Long":"Short"}`,symbol:N.coin,value:F,amount:Math.abs(O),price:D,color:ju[(k+2)%ju.length],hasPrice:!0,network:"hyperliquid",pnl:_}),h+=F)});const b=a.portfolioValue||0;return b>0&&(d.push({name:"USDC (Polymarket)",symbol:"USDC",value:b,amount:b,price:1,color:ju[2],hasPrice:!0,network:"polymarket"}),h+=b),a.activePositions&&a.activePositions.length>0&&a.activePositions.forEach((w,k)=>{w.currentValue>0&&(d.push({name:`${w.question}`,symbol:w.outcome,value:w.currentValue,amount:w.shares,price:w.currentPrice,color:ju[(k+4)%ju.length],hasPrice:!0,network:"polymarket",pnl:w.unrealizedPnl}),h+=w.currentValue)}),(t.assets||[]).forEach((w,k)=>{var O;if(w.isNft||((O=w.symbol)==null?void 0:O.toUpperCase())==="SOL")return;const N=parseFloat(w.amount)/Math.pow(10,w.decimals);if(N>0){const D=s[w.symbol]||0,_=N*D;d.push({name:w.name||w.symbol,symbol:w.symbol,value:_,amount:N,price:D,color:ju[(k+3)%ju.length],hasPrice:D>0,network:"solana"}),D>0?h+=_:m++}}),m>0&&d.forEach(w=>{w.hasPrice||(w.value=w.amount*1,w.price=1,h+=w.value)}),{data:d.sort((w,k)=>k.value-w.value),totalValue:h}},[t.solBalance,t.hlBalance,t.hlPositions,t.assets,s,a.portfolioValue,a.currentExposure,a.activePositions]);return{portfolioHistoryDaily:e,portfolioHistoryLongTerm:r,assetPrices:s,assetAllocationData:c}},n0t=t=>{const[e,n]=S.useState([]),[r,i]=S.useState([]),[s,o]=S.useState(4);S.useEffect(()=>{(async()=>{const c=Ae.getUserKey("agent_activity_log"),d=await Ae.getItem(c);d&&i(JSON.parse(d))})()},[]);const a=(l,c,d)=>{const h={type:l,desc:c,signature:d,timestamp:Date.now(),status:"pending"};i(m=>{const g=[h,...m].slice(0,50);return Ae.setItem(Ae.getUserKey("agent_activity_log"),JSON.stringify(g)),g})};return S.useEffect(()=>{if(!t.isUnlocked)return;const l=async()=>{try{if(qt.isDealerActive()){console.log("[ActivityFeed]   Skipping fetch - dealer is active");return}const d=[];if(t.publicKey){const m=(await Ls.getRecentTransactions(t.publicKey)).map(g=>({type:g.err?"Failed":"Transaction",desc:`Signature: ${g.signature.slice(0,8)}...`,time:g.blockTime?new Date(g.blockTime*1e3).toLocaleTimeString():"Unknown",status:g.err?"failed":"success",signature:g.signature,network:"solana",timestamp:g.blockTime?g.blockTime*1e3:0}));d.push(...m)}if(t.hlPublicKey){const m=(await qt.getUserFillsShared(t.hlPublicKey,20)).map(g=>{const v=g.side==="B"?"Buy":"Sell",x=g.dir||v,b=parseFloat(g.closedPnl||"0"),w=b!==0?` (PnL: ${b>=0?"+":""}$${b.toFixed(2)})`:"";return{type:x,desc:`${g.coin} ${parseFloat(g.sz).toFixed(4)} @ $${parseFloat(g.px).toFixed(2)}${w}`,time:new Date(g.time).toLocaleTimeString(),status:"success",signature:`hl-${g.tid}`,network:"hyperliquid",timestamp:g.time}});d.push(...m)}d.sort((h,m)=>m.timestamp-h.timestamp),n(d)}catch(d){console.error("Failed to fetch history",d)}};l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[t.isUnlocked,t.publicKey,t.hlPublicKey]),{activityFeed:e,localActivityLog:r,activityDisplayCount:s,setActivityDisplayCount:o,addActivityLog:a}},xO="vault-scheduler",r0t=(t,e,n,r,i)=>{const[s,o]=S.useState([]),[a,l]=S.useState(!1);S.useEffect(()=>{(async()=>{const h=Ae.getUserKey("agent_scheduled_tasks"),m=await Ae.getItem(h);m&&o(JSON.parse(m)),l(!0)})()},[]);const c=S.useRef(null);return S.useEffect(()=>{if(!t.isUnlocked){Qa.stop(xO);return}console.log("[Scheduler]  Starting scheduler loop with Web Worker timer (background-safe, checks every 10s)");const d=async()=>{var g,v,x,b,w,k,N,O,D,_,F,z;const h=Date.now(),m=s.filter(L=>L.status==="active");if(m.length===0){console.log("[Scheduler]   No active tasks to check");return}console.log(`[Scheduler]  Checking ${m.length} active task(s)...`);for(const L of m){let $=!1;if(L.executeAt&&L.executeAt<=h)console.log(`[Scheduler]  Time-based task ${String(L.id).slice(0,6)} triggered`),$=!0;else if(L.condition)try{const{symbol:G,indicator:V,operator:U,value:A,timeframe:I}=L.condition;console.log(`[Scheduler]  Checking ${V.toUpperCase()} for ${G} (${I}): target ${U} ${A}`);const j=await Co.getIndicator(G,V,I);let q=0;if(typeof j.value=="number")q=j.value;else if(typeof j.value=="object"&&j.value!==null){const K=V.toLowerCase();K==="macd"?q=j.value.macd||0:K==="stoch"||K==="stochastic"?q=j.value.k||0:"value"in j.value?q=j.value.value:"rsi"in j.value?q=j.value.rsi:console.warn(`[Scheduler] Unknown indicator object structure for ${V}:`,j.value)}console.log(`[Scheduler]  Current ${V.toUpperCase()}: ${q.toFixed(2)} | Condition: ${U} ${A}`),U===">"&&q>A&&($=!0),U==="<"&&q<A&&($=!0),U===">="&&q>=A&&($=!0),U==="<="&&q<=A&&($=!0),U==="=="&&q==A&&($=!0),console.log($?`[Scheduler]  Condition MET! ${q.toFixed(2)} ${U} ${A}`:`[Scheduler]  Condition NOT met: ${q.toFixed(2)} ${U} ${A}`)}catch(G){console.error(`[Scheduler]   Error checking condition for task ${L.id}:`,G)}if($){if(((g=s.find(U=>U.id===L.id))==null?void 0:g.status)==="executing"){console.log(`[Scheduler]   Task ${String(L.id).slice(0,6)} is already executing, skipping...`);continue}const V=(v=s.find(U=>U.id===L.id))==null?void 0:v.lastExecuted;if(V&&Date.now()-V<3e5){console.log(`[Scheduler]  Task ${String(L.id).slice(0,6)} was recently completed (${Math.round((Date.now()-V)/1e3)}s ago), skipping...`);continue}console.log(`[Scheduler]  Executing task ${String(L.id).slice(0,6)} (${L.type})...`),o(U=>U.map(A=>A.id===L.id?{...A,status:"executing"}:A));try{const U=JSON.parse(L.params||"{}");let A="";if(!t.encryptedPrivateKey)throw new Error("Vault encrypted key not available");const I=await lr.decrypt(t.encryptedPrivateKey,e),j=Uint8Array.from(JSON.parse(I)),q=fa.fromSecretKey(j);if(L.type==="SWAP"){console.log(`[Scheduler]  Swapping ${U.amount} ${U.inputToken} -> ${U.outputToken}`);try{A=await Ls.executeSwap(q,U.inputToken,U.outputToken,U.amount,K=>console.log(`[Scheduler] ${K}`)),i("Swap",`Scheduled: Swapped ${U.amount} ${U.inputToken} -> ${U.outputToken}`,A)}catch(K){if((x=K.message)!=null&&x.includes("timeout")||K.isTimeout){console.warn("[Scheduler]   Swap confirmation timeout. Verifying transaction status...");const te=K.signature;if(te)try{const Y=await Ls.connection.getSignatureStatus(te),H=Y==null?void 0:Y.value;if((H==null?void 0:H.confirmationStatus)==="finalized"||(H==null?void 0:H.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),A=te,i("Swap",`Scheduled: Swapped ${U.amount} ${U.inputToken} -> ${U.outputToken}`,te),o(M=>{const P=M.map(W=>W.id===L.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:W);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(L.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(H!=null&&H.err)throw console.error("[Scheduler]  Transaction failed on-chain:",H.err),new Error(`Transaction failed: ${JSON.stringify(H.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const P=M.map(W=>W.id===L.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:W);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(L.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(Y){console.error("[Scheduler]   Failed to verify transaction:",Y)}}throw K}}else if(L.type==="TRANSFER"){if(console.log(`[Scheduler]  Transferring ${U.amount} tokens to Owner`),!t.ownerPublicKey)throw new Error("Owner wallet not connected");try{U.tokenMint==="So11111111111111111111111111111111111111112"?A=await Ls.transferSol(q,t.ownerPublicKey,U.amount):A=await Ls.transferToken(q,U.tokenMint,t.ownerPublicKey,U.amount,U.decimals||9),i("Transfer",`Scheduled: Sent ${U.amount} to Owner`,A)}catch(K){if((b=K.message)!=null&&b.includes("timeout")||K.isTimeout){console.warn("[Scheduler]   Transfer confirmation timeout. Verifying transaction status...");const te=K.signature;if(te)try{const Y=await Ls.connection.getSignatureStatus(te),H=Y==null?void 0:Y.value;if((H==null?void 0:H.confirmationStatus)==="finalized"||(H==null?void 0:H.confirmationStatus)==="confirmed"){console.log(`[Scheduler]  Transaction verified as successful: ${te}`),A=te,i("Transfer",`Scheduled: Sent ${U.amount} to Owner`,te),o(M=>{const P=M.map(W=>W.id===L.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Success: ${te}`}:W);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(L.id).slice(0,4)} completed: ${te.slice(0,8)}...`),r(t.publicKey);continue}else{if(H!=null&&H.err)throw console.error("[Scheduler]  Transaction failed on-chain:",H.err),new Error(`Transaction failed: ${JSON.stringify(H.err)}`);console.warn(`[Scheduler]   Transaction status unknown. Signature: ${te}`),o(M=>{const P=M.map(W=>W.id===L.id?{...W,status:"completed",lastExecuted:Date.now(),result:`Warning: Status unknown - verify manually: ${te}`}:W);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(P)),P}),n(`Task ${String(L.id).slice(0,4)} - verify: ${te.slice(0,8)}...`),r(t.publicKey);continue}}catch(Y){console.error("[Scheduler]   Failed to verify transaction:",Y)}}throw K}}else if(L.type==="ALERT")console.log(`[Scheduler]  Alert triggered for task ${String(L.id).slice(0,6)}`),A="ALERT_TRIGGERED",n(` ALERT: ${(w=L.condition)==null?void 0:w.indicator.toUpperCase()} ${(k=L.condition)==null?void 0:k.operator} ${(N=L.condition)==null?void 0:N.value}`);else if(L.type==="HL_ORDER"){if(console.log(`[Scheduler]  Executing Hyperliquid Order: ${U.side} ${U.size} ${U.coin}`),!t.hlEncryptedPrivateKey)throw new Error("Hyperliquid Vault not available");const K=await lr.decrypt(t.hlEncryptedPrivateKey,e),te=qt.getWalletFromPrivateKey(K);U.leverage&&U.leverage!==1&&await $n.updateLeverage(te,U.coin,U.leverage,!1);const Y=U.isBuy!==void 0?U.isBuy:U.side==="B";let H=U.size;if(H==null&&U.usdcAmount){console.log(`[Scheduler]  Calculating size for ${U.usdcAmount} USDC of ${U.coin}...`);try{let oe=U.price;if(!oe){const ke=await qt.getMarketData(U.coin),ye=parseFloat(ke.levels[1][0].px),Ke=parseFloat(ke.levels[0][0].px);oe=Y?ye:Ke,console.log(`[Scheduler]   Current Price for ${U.coin}: ${oe}`)}if(!oe||oe===0)throw new Error("Could not determine price for size calculation");const Te=await qt.getAssetDecimals(U.coin),ce=U.usdcAmount/oe,de=Math.pow(10,Te);H=Math.floor(ce*de)/de,console.log(`[Scheduler]  Calculated Size: ${H} ${U.coin} (Decimals: ${Te})`)}catch(oe){throw console.error("[Scheduler]  Error calculating size:",oe),new Error(`Failed to calculate order size: ${oe.message}`)}}if(!H||H<=0)throw new Error(`Invalid order size: ${H}`);let M=U.orderType||"limit",P=U.price;const W=await qt.getAssetDecimals(U.coin),X=Math.max(0,6-W);if(M==="market"){console.log("[Scheduler]  Converting Market Order to Limit IOC with slippage...");const oe=await qt.getMarketData(U.coin),Te=parseFloat(oe.levels[0][0].px),ce=parseFloat(oe.levels[1][0].px),de=Y?ce:Te,ke=.05;let ye=Y?de*(1+ke):de*(1-ke),Ke=parseFloat(ye.toFixed(X));Ke=parseFloat(Ke.toPrecision(5)),P=parseFloat(Ke.toFixed(X)),M="ioc",console.log(`[Scheduler]   Market -> IOC: Base ${de} -> Slippage ${P}`)}else if(P){let oe=parseFloat(P.toFixed(X));oe=parseFloat(oe.toPrecision(5)),P=parseFloat(oe.toFixed(X)),console.log(`[Scheduler]   Limit price rounded: ${U.price} -> ${P} (maxDecimals=${X})`)}const ie=await $n.createOrder(te,U.coin,Y,H,P,{orderType:M,reduceOnly:U.reduceOnly||!1,stopLoss:U.stopLoss,takeProfit:U.takeProfit});if(ie.status==="ok"){const oe=(_=(D=(O=ie.response)==null?void 0:O.data)==null?void 0:D.statuses)==null?void 0:_[0];if(oe!=null&&oe.error)throw new Error(`HL Order Error: ${oe.error}`);A=`HL_ORDER:${((F=oe==null?void 0:oe.filled)==null?void 0:F.oid)||((z=oe==null?void 0:oe.resting)==null?void 0:z.oid)||"placed"}`,i("HL Order",`Placed ${U.side} ${U.size} ${U.coin} @ ${U.price}`,A)}else throw new Error(`HL Order Failed: ${JSON.stringify(ie)}`)}o(K=>{const te=K.map(Y=>Y.id===L.id?{...Y,status:"completed",lastExecuted:Date.now(),result:`Success: ${A}`}:Y);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(te)),te}),console.log(`[Scheduler]  Task ${String(L.id).slice(0,6)} completed! TX: ${A.slice(0,12)}...`),n(`Task ${String(L.id).slice(0,4)} executed: ${A.slice(0,8)}...`),r(t.publicKey)}catch(U){console.error(`[Scheduler]  Task ${L.id} failed:`,U),o(A=>{const I=A.map(j=>j.id===L.id?{...j,status:"failed",lastExecuted:Date.now(),result:U.message}:j);return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(I)),I}),n(`Task ${String(L.id).slice(0,4)} failed: ${U.message}`)}}}};return c.current=d,Qa.start(xO,1e4,()=>{c.current&&c.current()}),d(),()=>{console.log("[Scheduler]  Stopping scheduler loop"),Qa.stop(xO)}},[t.isUnlocked,s]),{scheduledTasks:s,setScheduledTasks:o}};var i0t={};const s0t="agent_conversation_",o0t="agent_conversations_metadata";class na{static getConversationKey(e){return Ae.getUserKey(`${s0t}${e}`)}static getMetadataKey(){return Ae.getUserKey(o0t)}static async saveConversation(e,n){if(!i0t.TEST&&!n)throw new Error("Password required for encryption");try{const r=await lr.encrypt(JSON.stringify(e),n);await Ae.setItem(this.getConversationKey(e.id),r);const i={id:e.id,title:e.title,lastMessage:e.lastMessage,timestamp:e.timestamp};await this.updateMetadata(i)}catch(r){throw console.error("Failed to save conversation:",r),r}}static async updateMetadata(e){const n=await Ae.getItem(this.getMetadataKey());let r=n?JSON.parse(n):[];if(r=r.filter(i=>i.id!==e.id),r.unshift(e),r.length>50){const i=r.pop();i&&await Ae.removeItem(this.getConversationKey(i.id))}await Ae.setItem(this.getMetadataKey(),JSON.stringify(r))}static async getHistory(){const e=this.getMetadataKey();console.log("[ConversationService] Loading history from key:",e);const n=await Ae.getItem(e);if(console.log("[ConversationService] Raw data:",n?`${n.length} characters`:"null"),!n)return[];try{const r=JSON.parse(n);return console.log("[ConversationService] Parsed conversations:",Array.isArray(r)?r.length:"not array"),Array.isArray(r)?r:[]}catch(r){return console.error("Failed to parse conversation history:",r),[]}}static async loadConversation(e,n){const r=await Ae.getItem(this.getConversationKey(e));if(!r)return null;try{const i=await lr.decrypt(r,n);return JSON.parse(i)}catch(i){throw console.error(`Failed to load conversation ${e}:`,i),new Error("Failed to decrypt conversation. Wrong password?")}}static async deleteConversation(e){await Ae.removeItem(this.getConversationKey(e));const n=await Ae.getItem(this.getMetadataKey());if(n){let r=JSON.parse(n);r=r.filter(i=>i.id!==e),await Ae.setItem(this.getMetadataKey(),JSON.stringify(r))}}static generateTitle(e){return e?e.length>30?e.substring(0,30)+"...":e:"New Conversation"}}class a0t{constructor(){this.connection=new HB(F7,"confirmed"),this.apiBaseUrl=aWe}async getAllPools(e=100){try{const n=await fetch(`${this.apiBaseUrl}/pair/all_by_groups`);if(!n.ok)throw new Error(`Meteora API error: ${n.status}`);const r=await n.json();let i=[];return r.groups&&Array.isArray(r.groups)?r.groups.forEach(s=>{s.pairs&&Array.isArray(s.pairs)&&i.push(...s.pairs)}):Array.isArray(r)?i=r:r.pairs&&(i=r.pairs),i.sort((s,o)=>{const a=parseFloat(s.liquidity)||0;return(parseFloat(o.liquidity)||0)-a}),i.slice(0,e).map(s=>this.mapApiPoolToLiquidityPool(s))}catch(n){throw console.error("[MeteoraService] Error fetching pools:",n),n}}async getPool(e){try{const n=await fetch(`${this.apiBaseUrl}/pair/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return this.mapApiPoolToLiquidityPool(r)}catch(n){return console.error("[MeteoraService] Error fetching pool:",n),null}}async queryPools(e){try{let n=await this.getAllPools(500);if(e.tokenMint){const r=e.tokenMint.toLowerCase();n=n.filter(i=>i.tokenA.mint.toLowerCase()===r||i.tokenB.mint.toLowerCase()===r)}if(e.tokenPair){const{tokenA:r,tokenB:i}=e.tokenPair;n=n.filter(s=>s.tokenA.symbol.toUpperCase()===r.toUpperCase()&&s.tokenB.symbol.toUpperCase()===i.toUpperCase()||s.tokenA.symbol.toUpperCase()===i.toUpperCase()&&s.tokenB.symbol.toUpperCase()===r.toUpperCase())}if(e.minTVL!==void 0&&(n=n.filter(r=>r.tvl>=e.minTVL)),e.maxTVL!==void 0&&(n=n.filter(r=>r.tvl<=e.maxTVL)),e.minVolume!==void 0){const r=e.volumeTimeframe||"24h";n=n.filter(i=>(i.volume[r]||i.volume["24h"]||0)>=e.minVolume)}if(e.minAPY!==void 0&&(n=n.filter(r=>(r.apy||0)>=e.minAPY)),e.sortBy){const r=e.sortOrder==="asc"?1:-1;n.sort((i,s)=>{let o,a;switch(e.sortBy){case"tvl":o=i.tvl,a=s.tvl;break;case"volume":const l=e.volumeTimeframe||"24h";o=i.volume[l]||i.volume["24h"]||0,a=s.volume[l]||s.volume["24h"]||0;break;case"apy":o=i.apy||0,a=s.apy||0;break;case"fee":o=i.feeBps,a=s.feeBps;break;default:o=0,a=0}return(a-o)*r})}return e.limit&&(n=n.slice(0,e.limit)),n}catch(n){return console.error("[MeteoraService] Error querying pools:",n),[]}}async getPoolVolume(e,n){try{const r=this.timeframeToDays(n),i=await fetch(`${this.apiBaseUrl}/pair/${e}/analytic/pair_trade_volume?days=${r}`);if(!i.ok)return 0;const s=await i.json();return Array.isArray(s)&&s.length>0?s.reduce((o,a)=>o+(a.volume||0),0):0}catch(r){return console.error("[MeteoraService] Error fetching pool volume:",r),0}}async getPoolAPY(e){const n=await this.getPool(e);return(n==null?void 0:n.apy)||0}async getPoolTVLHistory(e,n=7){try{const r=await fetch(`${this.apiBaseUrl}/pair/${e}/analytic/pair_tvl?days=${n}`);if(!r.ok)return[];const i=await r.json();return Array.isArray(i)?i.map(s=>({timestamp:new Date(s.date||s.timestamp).getTime(),value:s.tvl||s.value||0})):[]}catch(r){return console.error("[MeteoraService] Error fetching TVL history:",r),[]}}async getPositions(e){try{const n=await fetch(`${this.apiBaseUrl}/wallet/${e}/positions`);if(!n.ok){if(n.status===404)return[];throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return(Array.isArray(r)?r:r.positions||[]).map(s=>this.mapApiPositionToLiquidityPosition(s))}catch(n){return console.error("[MeteoraService] Error fetching positions:",n),[]}}async getPosition(e){try{const n=await fetch(`${this.apiBaseUrl}/position/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Meteora API error: ${n.status}`)}const r=await n.json();return this.mapApiPositionToLiquidityPosition(r)}catch(n){return console.error("[MeteoraService] Error fetching position:",n),null}}async getUnclaimedFees(e){try{const n=await fetch(`${this.apiBaseUrl}/position/${e}/claim_fees`);if(!n.ok)return{tokenA:0,tokenB:0,totalUSD:0};const r=await n.json();return{tokenA:r.feeX||r.tokenA||0,tokenB:r.feeY||r.tokenB||0,totalUSD:r.totalUSD||0}}catch(n){return console.error("[MeteoraService] Error fetching unclaimed fees:",n),{tokenA:0,tokenB:0,totalUSD:0}}}async addLiquidity(e,n){try{console.log("[MeteoraService] Adding liquidity:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await r.create(this.connection,new vt(n.poolAddress)),s=await i.getActiveBin(),o=i.lbPair.binStep;let a,l;n.priceMin&&n.priceMax?(a=i.getBinIdFromPrice(n.priceMin,!0),l=i.getBinIdFromPrice(n.priceMax,!1)):(a=s.binId-5,l=s.binId+5);const c=await i.addLiquidityByStrategy({positionPubKey:e.publicKey,user:e.publicKey,totalXAmount:BigInt(n.amountA*Math.pow(10,9)),totalYAmount:BigInt(n.amountB*Math.pow(10,9)),strategy:{minBinId:a,maxBinId:l,strategyType:"Spot"},slippage:n.slippageBps?n.slippageBps/1e4:.005}),d=await this.connection.sendTransaction(c,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(d,"confirmed"),{success:!0,txSignature:d,positionAddress:e.publicKey.toString(),tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[MeteoraService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async removeLiquidity(e,n){try{console.log("[MeteoraService] Removing liquidity:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n.positionAddress);if(!i)return{success:!1,error:"Position not found"};const s=await r.create(this.connection,new vt(i.poolAddress)),o=Math.floor(n.percentage/100*1e4),a=await s.removeLiquidity({user:e.publicKey,position:new vt(n.positionAddress),binLiquidityRemoval:o,shouldClaimAndClose:n.percentage>=100}),l=await this.connection.sendTransaction(a,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(l,"confirmed"),{success:!0,txSignature:l,tokensReceived:{tokenA:i.tokenAAmount*(n.percentage/100),tokenB:i.tokenBAmount*(n.percentage/100)}}}catch(r){return console.error("[MeteoraService] Error removing liquidity:",r),{success:!1,error:r.message||"Failed to remove liquidity"}}}async claimFees(e,n){try{console.log("[MeteoraService] Claiming fees:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n);if(!i)return{success:!1,error:"Position not found"};const o=await(await r.create(this.connection,new vt(i.poolAddress))).claimSwapFee({owner:e.publicKey,position:new vt(n)}),a=await this.connection.sendTransaction(o,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a,feesClaimed:{tokenA:i.unclaimedFees.tokenA,tokenB:i.unclaimedFees.tokenB,totalUSD:i.unclaimedFees.totalUSD}}}catch(r){return console.error("[MeteoraService] Error claiming fees:",r),{success:!1,error:r.message||"Failed to claim fees"}}}async claimRewards(e,n){try{console.log("[MeteoraService] Claiming rewards:",n);const r=await this.loadDLMMSDK();if(!r)return{success:!1,error:"Meteora DLMM SDK not available. Run: npm install @meteora-ag/dlmm"};const i=await this.getPosition(n);if(!i)return{success:!1,error:"Position not found"};const o=await(await r.create(this.connection,new vt(i.poolAddress))).claimLMReward({owner:e.publicKey,position:new vt(n)}),a=await this.connection.sendTransaction(o,[e],{skipPreflight:!1});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a}}catch(r){return console.error("[MeteoraService] Error claiming rewards:",r),{success:!1,error:r.message||"Failed to claim rewards"}}}async loadDLMMSDK(){try{const n=await import("@meteora-ag/dlmm");return n.DLMM||n.default}catch{return console.warn("[MeteoraService] DLMM SDK not available - operations will return gracefully"),null}}mapApiPoolToLiquidityPool(e){const n=parseFloat(e.liquidity)||e.tvl||0,r=e.trade_volume_24h||e.volume24h||e.volume||0,i=e.trade_volume_7d||e.volume7d||0;return n>1e4&&console.log("[MeteoraService] Pool with TVL:",e.name,"TVL:",n,"Vol24h:",r),{address:e.address||e.pair_address||e.pubkey,protocol:"meteora_dlmm",name:e.name||`${e.mint_x_symbol||"Token"}-${e.mint_y_symbol||"Token"}`,tokenA:{mint:e.mint_x||e.tokenAMint||"",symbol:e.mint_x_symbol||e.tokenASymbol||"Unknown",decimals:e.mint_x_decimals||e.tokenADecimals||9},tokenB:{mint:e.mint_y||e.tokenBMint||"",symbol:e.mint_y_symbol||e.tokenBSymbol||"Unknown",decimals:e.mint_y_decimals||e.tokenBDecimals||9},tvl:n,feeBps:e.base_fee_bps||e.fee_bps||e.feeBps||0,apy:e.apy||e.apr||0,volume:{"24h":r,"7d":i},binStep:e.bin_step||e.binStep,currentPrice:e.current_price||e.price}}mapApiPositionToLiquidityPosition(e){return{positionAddress:e.address||e.position_address||e.pubkey,poolAddress:e.pair_address||e.pool_address||e.pool,protocol:"meteora_dlmm",tokenAAmount:e.token_x_amount||e.tokenA||0,tokenBAmount:e.token_y_amount||e.tokenB||0,valueUSD:e.value_usd||e.totalValue||0,unclaimedFees:{tokenA:e.unclaimed_fee_x||0,tokenB:e.unclaimed_fee_y||0,totalUSD:e.unclaimed_fee_usd||0},priceRange:e.lower_bin_id&&e.upper_bin_id?{min:e.lower_bin_price||0,max:e.upper_bin_price||0,current:e.current_price||0,inRange:e.in_range??!0}:void 0,binIds:e.bin_ids||[]}}timeframeToDays(e){switch(e){case"5m":return 1;case"15m":return 1;case"1h":return 1;case"4h":return 1;case"24h":return 1;case"7d":return 7;default:return 1}}}const Hi=new a0t;class l0t{async getPoolContext(e){const n=await Hi.getPool(e);return n?{pool:n,volume24h:n.volume["24h"]||0,volume7d:n.volume["7d"]||0,tvl:n.tvl,apy:n.apy||0,feeBps:n.feeBps,binStep:n.binStep,currentPrice:n.currentPrice,timestamp:Date.now()}:null}async getBatchContext(e,n){const r=await Hi.queryPools(n||{limit:50}),i=r.map(c=>({pool:c,volume24h:c.volume["24h"]||0,volume7d:c.volume["7d"]||0,tvl:c.tvl,apy:c.apy||0,feeBps:c.feeBps,binStep:c.binStep,currentPrice:c.currentPrice,timestamp:Date.now()})),s=this.rankPools(r,"volume",10),o=this.rankPools(r,"apy",10);let a=[],l=0;return e&&(a=await Hi.getPositions(e),l=a.reduce((c,d)=>c+d.valueUSD,0)),{pools:i,topByVolume:s,topByAPY:o,positions:a,totalValueUSD:l,timestamp:Date.now()}}async getPortfolioContext(e){const n=await Hi.getPositions(e),r=n.reduce((s,o)=>s+o.valueUSD,0),i=n.reduce((s,o)=>{var a;return s+(((a=o.unclaimedFees)==null?void 0:a.totalUSD)||0)},0);return{positions:n,totalValueUSD:r,totalUnclaimedFeesUSD:i,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"meteora_dlmm",positionCount:n.length,totalValueUSD:r}]}}async getTopPools(e,n){const r={minTVL:n==null?void 0:n.minTVL,volumeTimeframe:n==null?void 0:n.timeframe,sortBy:e,sortOrder:"desc",limit:(n==null?void 0:n.limit)||10},i=await Hi.queryPools(r);return this.rankPools(i,e,(n==null?void 0:n.limit)||10)}async findBestPool(e,n,r="tvl"){const i=await Hi.queryPools({tokenPair:{tokenA:e,tokenB:n},sortBy:r,sortOrder:"desc",limit:1});return i.length===0?null:{pool:i[0],rank:1,score:this.getPoolScore(i[0],r),reason:`Best Meteora pool for ${e}/${n} by ${r}`}}buildAnalysisPrompt(e,n){const{pools:r,topByVolume:i,topByAPY:s,positions:o,totalValueUSD:a}=e;let l=`## Meteora DLMM Context

`;return l+=`**User Query:** ${n}

`,o.length>0&&(l+=`### Your Meteora Positions
`,l+=`- Total Positions: ${o.length}
`,l+=`- Total Value: $${a.toLocaleString()}

`,o.slice(0,5).forEach((c,d)=>{l+=`${d+1}. Pool: ${c.poolAddress.slice(0,8)}... | `,l+=`Value: $${c.valueUSD.toLocaleString()} | `,l+=`Unclaimed Fees: $${c.unclaimedFees.totalUSD.toFixed(2)}
`}),l+=`
`),l+=`### Top Pools by Volume (24h)
`,i.slice(0,5).forEach((c,d)=>{l+=`${d+1}. ${c.pool.name} | TVL: $${c.pool.tvl.toLocaleString()} | `,l+=`Vol: $${(c.pool.volume["24h"]||0).toLocaleString()} | `,l+=`APY: ${(c.pool.apy||0).toFixed(2)}%
`}),l+=`
`,l+=`### Top Pools by APY
`,s.slice(0,5).forEach((c,d)=>{l+=`${d+1}. ${c.pool.name} | APY: ${(c.pool.apy||0).toFixed(2)}% | `,l+=`TVL: $${c.pool.tvl.toLocaleString()}
`}),l}rankPools(e,n,r){return[...e].sort((s,o)=>{const a=this.getPoolScore(s,n);return this.getPoolScore(o,n)-a}).slice(0,r).map((s,o)=>({pool:s,rank:o+1,score:this.getPoolScore(s,n),reason:`Ranked #${o+1} by ${n}`}))}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}}const c0t=new l0t;class u0t{constructor(){this.connection=new HB(F7,"confirmed"),this.apiBaseUrl="https://api-v3.raydium.io"}async getPoolList(e){var n;try{const r=e==="clmm"?"Concentrated":e==="cpmm"?"Standard":"all",i=await fetch(`${this.apiBaseUrl}/pools/info/list?poolType=${r}&poolSortField=default&sortType=desc&pageSize=50&page=1`);if(!i.ok)throw new Error(`Raydium API error: ${i.status}`);const s=await i.json();return(((n=s.data)==null?void 0:n.data)||s.data||[]).map(a=>this.mapApiPoolToLiquidityPool(a,e))}catch(r){return console.error("[RaydiumService] Error fetching pools:",r),[]}}async getPoolById(e){try{const n=await fetch(`${this.apiBaseUrl}/pools/info/ids?ids=${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json(),i=r.data||r||[];return i.length===0?null:this.mapApiPoolToLiquidityPool(i[0])}catch(n){return console.error("[RaydiumService] Error fetching pool:",n),null}}async fetchPoolByMints(e,n){try{const r=await fetch(`${this.apiBaseUrl}/pools/info/mint?mint1=${e}&mint2=${n}`);if(!r.ok)throw new Error(`Raydium API error: ${r.status}`);const i=await r.json();return(i.data||i||[]).map(o=>this.mapApiPoolToLiquidityPool(o))}catch(r){return console.error("[RaydiumService] Error fetching pools by mints:",r),[]}}async queryPools(e){try{let n=await this.getPoolList("all");if(e.protocol&&e.protocol.length>0&&(n=n.filter(r=>e.protocol.includes(r.protocol))),e.tokenMint){const r=e.tokenMint.toLowerCase();n=n.filter(i=>i.tokenA.mint.toLowerCase()===r||i.tokenB.mint.toLowerCase()===r)}if(e.tokenPair){const{tokenA:r,tokenB:i}=e.tokenPair;n=n.filter(s=>s.tokenA.symbol.toUpperCase()===r.toUpperCase()&&s.tokenB.symbol.toUpperCase()===i.toUpperCase()||s.tokenA.symbol.toUpperCase()===i.toUpperCase()&&s.tokenB.symbol.toUpperCase()===r.toUpperCase())}if(e.minTVL!==void 0&&(n=n.filter(r=>r.tvl>=e.minTVL)),e.maxTVL!==void 0&&(n=n.filter(r=>r.tvl<=e.maxTVL)),e.minVolume!==void 0){const r=e.volumeTimeframe||"24h";n=n.filter(i=>(i.volume[r]||i.volume["24h"]||0)>=e.minVolume)}if(e.minAPY!==void 0&&(n=n.filter(r=>(r.apy||0)>=e.minAPY)),e.sortBy){const r=e.sortOrder==="asc"?1:-1;n.sort((i,s)=>{let o,a;switch(e.sortBy){case"tvl":o=i.tvl,a=s.tvl;break;case"volume":const l=e.volumeTimeframe||"24h";o=i.volume[l]||i.volume["24h"]||0,a=s.volume[l]||s.volume["24h"]||0;break;case"apy":o=i.apy||0,a=s.apy||0;break;case"fee":o=i.feeBps,a=s.feeBps;break;default:o=0,a=0}return(a-o)*r})}return e.limit&&(n=n.slice(0,e.limit)),n}catch(n){return console.error("[RaydiumService] Error querying pools:",n),[]}}async getPoolVolume(e,n){const r=await this.getPoolById(e);return r&&(r.volume[n]||r.volume["24h"])||0}async getPoolAPY(e){const n=await this.getPoolById(e);return(n==null?void 0:n.apy)||0}async getPositions(e){try{const n=await fetch(`${this.apiBaseUrl}/clmm/position/byOwner?owner=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json();return(r.data||r||[]).map(s=>this.mapApiPositionToLiquidityPosition(s))}catch(n){return console.error("[RaydiumService] Error fetching positions:",n),[]}}async getPositionByNft(e){try{const n=await fetch(`${this.apiBaseUrl}/clmm/position/byNft?nft=${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Raydium API error: ${n.status}`)}const r=await n.json();return this.mapApiPositionToLiquidityPosition(r.data||r)}catch(n){return console.error("[RaydiumService] Error fetching position:",n),null}}async getSwapQuote(e){var n,r,i,s;try{const o=await fetch(`${this.apiBaseUrl}/compute/swap-base-in?inputMint=${e.inputMint}&outputMint=${e.outputMint}&amount=${e.amount}&slippageBps=${e.slippageBps||50}`);if(!o.ok)throw new Error(`Raydium API error: ${o.status}`);const a=await o.json();return{inputMint:e.inputMint,outputMint:e.outputMint,inputAmount:e.amount,outputAmount:((n=a.data)==null?void 0:n.outputAmount)||a.outputAmount||0,priceImpact:((r=a.data)==null?void 0:r.priceImpact)||a.priceImpact||0,fee:((i=a.data)==null?void 0:i.fee)||a.fee||0,route:((s=a.data)==null?void 0:s.routePlan)||a.route||[]}}catch(o){return console.error("[RaydiumService] Error getting swap quote:",o),null}}async swap(e,n){try{console.log("[RaydiumService] Executing swap:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getSwapQuote(n);if(!s)return{success:!1,error:"Could not get swap quote"};const{txId:o}=await i.trade.swap({inputMint:new vt(n.inputMint),outputMint:new vt(n.outputMint),amount:n.amount,slippage:(n.slippageBps||50)/1e4});return await this.connection.confirmTransaction(o,"confirmed"),{success:!0,txSignature:o,details:{inputAmount:n.amount,outputAmount:s.outputAmount,priceImpact:s.priceImpact}}}catch(r){return console.error("[RaydiumService] Error executing swap:",r),{success:!1,error:r.message||"Failed to execute swap"}}}async addLiquidityCLMM(e,n){try{console.log("[RaydiumService] Adding CLMM liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPoolById(n.poolAddress);if(!s)return{success:!1,error:"Pool not found"};let o,a;if(n.priceMin&&n.priceMax)o=this.priceToTick(n.priceMin,s.tokenA.decimals,s.tokenB.decimals),a=this.priceToTick(n.priceMax,s.tokenA.decimals,s.tokenB.decimals);else{const d=this.priceToTick(s.currentPrice||1,s.tokenA.decimals,s.tokenB.decimals);o=d-1e3,a=d+1e3}const{txId:l,nftMint:c}=await i.clmm.openPositionFromBase({poolId:n.poolAddress,ownerInfo:{useSOLBalance:!0},tickLower:o,tickUpper:a,base:"MintA",baseAmount:BigInt(Math.floor(n.amountA*Math.pow(10,s.tokenA.decimals))),otherAmountMax:BigInt(Math.floor(n.amountB*Math.pow(10,s.tokenB.decimals)))});return await this.connection.confirmTransaction(l,"confirmed"),{success:!0,txSignature:l,positionAddress:c==null?void 0:c.toString(),tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[RaydiumService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async addLiquidityCPMM(e,n){try{console.log("[RaydiumService] Adding CPMM liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPoolById(n.poolAddress);if(!s)return{success:!1,error:"Pool not found"};const{txId:o}=await i.cpmm.addLiquidity({poolId:n.poolAddress,inputAmount:BigInt(Math.floor(n.amountA*Math.pow(10,s.tokenA.decimals))),slippage:(n.slippageBps||50)/1e4});return await this.connection.confirmTransaction(o,"confirmed"),{success:!0,txSignature:o,tokensDeposited:{tokenA:n.amountA,tokenB:n.amountB}}}catch(r){return console.error("[RaydiumService] Error adding liquidity:",r),{success:!1,error:r.message||"Failed to add liquidity"}}}async removeLiquidity(e,n){try{console.log("[RaydiumService] Removing liquidity:",n);const r=await this.loadRaydiumSDK();if(!r)return{success:!1,error:"Raydium SDK not available. Run: npm install @raydium-io/raydium-sdk-v2"};const i=await r.load({connection:this.connection,owner:e,cluster:"devnet"}),s=await this.getPositionByNft(n.positionAddress);if(!s)return{success:!1,error:"Position not found"};const o=n.percentage>=100,{txId:a}=await i.clmm.decreaseLiquidity({poolId:s.poolAddress,ownerPosition:new vt(n.positionAddress),liquidity:o?"all":`${n.percentage}%`,amountMinA:"0",amountMinB:"0"});return await this.connection.confirmTransaction(a,"confirmed"),{success:!0,txSignature:a,tokensReceived:{tokenA:s.tokenAAmount*(n.percentage/100),tokenB:s.tokenBAmount*(n.percentage/100)}}}catch(r){return console.error("[RaydiumService] Error removing liquidity:",r),{success:!1,error:r.message||"Failed to remove liquidity"}}}async loadRaydiumSDK(){try{const n=await import("@raydium-io/raydium-sdk-v2");return n.Raydium||n.default}catch{return console.warn("[RaydiumService] Raydium SDK not available - operations will return gracefully"),null}}priceToTick(e,n,r){const i=e*Math.pow(10,r-n);return Math.floor(Math.log(i)/Math.log(1.0001))}tickToPrice(e,n,r){return Math.pow(1.0001,e)*Math.pow(10,n-r)}mapApiPoolToLiquidityPool(e,n){var a,l,c,d,h,m,g,v,x,b,w;const r=e.type||n,i=r==="Concentrated"||r==="clmm"?"raydium_clmm":"raydium_cpmm",s=((a=e.day)==null?void 0:a.volume)||e.volume24h||0,o=((l=e.week)==null?void 0:l.volume)||e.volume7d||0;return{address:e.id||e.poolId||e.address,protocol:i,name:e.poolName||`${((c=e.mintA)==null?void 0:c.symbol)||"Token"}-${((d=e.mintB)==null?void 0:d.symbol)||"Token"}`,tokenA:{mint:((h=e.mintA)==null?void 0:h.address)||e.baseMint||"",symbol:((m=e.mintA)==null?void 0:m.symbol)||e.baseSymbol||"Unknown",decimals:((g=e.mintA)==null?void 0:g.decimals)||e.baseDecimals||9},tokenB:{mint:((v=e.mintB)==null?void 0:v.address)||e.quoteMint||"",symbol:((x=e.mintB)==null?void 0:x.symbol)||e.quoteSymbol||"Unknown",decimals:((b=e.mintB)==null?void 0:b.decimals)||e.quoteDecimals||9},tvl:e.tvl||e.liquidity||0,feeBps:e.feeRate?e.feeRate*1e4:e.feeBps||0,apy:((w=e.day)==null?void 0:w.apr)||e.apy||0,volume:{"24h":s,"7d":o},tickSpacing:e.tickSpacing,currentPrice:e.price}}mapApiPositionToLiquidityPosition(e){return{positionAddress:e.nftMint||e.positionId||e.address,poolAddress:e.poolId||e.pool,protocol:"raydium_clmm",tokenAAmount:e.amountA||e.tokenA||0,tokenBAmount:e.amountB||e.tokenB||0,valueUSD:e.positionUsd||e.valueUsd||0,unclaimedFees:{tokenA:e.tokenFeeAmountA||0,tokenB:e.tokenFeeAmountB||0,totalUSD:e.unclaimedFeeUsd||0},priceRange:{min:e.priceLower||0,max:e.priceUpper||0,current:e.currentPrice||0,inRange:e.inRange??!0},tickLower:e.tickLower,tickUpper:e.tickUpper,nftMint:e.nftMint}}}const xi=new u0t;class d0t{async getPoolContext(e){const n=await xi.getPoolById(e);return n?{pool:n,volume24h:n.volume["24h"]||0,volume7d:n.volume["7d"]||0,tvl:n.tvl,apy:n.apy||0,feeBps:n.feeBps,tickSpacing:n.tickSpacing,currentPrice:n.currentPrice,timestamp:Date.now()}:null}async getBatchContext(e,n){const r=await xi.queryPools(n||{limit:50}),i=r.map(c=>({pool:c,volume24h:c.volume["24h"]||0,volume7d:c.volume["7d"]||0,tvl:c.tvl,apy:c.apy||0,feeBps:c.feeBps,tickSpacing:c.tickSpacing,currentPrice:c.currentPrice,timestamp:Date.now()})),s=this.rankPools(r,"volume",10),o=this.rankPools(r,"apy",10);let a=[],l=0;return e&&(a=await xi.getPositions(e),l=a.reduce((c,d)=>c+d.valueUSD,0)),{pools:i,topByVolume:s,topByAPY:o,positions:a,totalValueUSD:l,timestamp:Date.now()}}async getPortfolioContext(e){const n=await xi.getPositions(e),r=n.reduce((a,l)=>a+l.valueUSD,0),i=n.reduce((a,l)=>{var c;return a+(((c=l.unclaimedFees)==null?void 0:c.totalUSD)||0)},0),s=n.filter(a=>a.protocol==="raydium_clmm"),o=n.filter(a=>a.protocol==="raydium_cpmm");return{positions:n,totalValueUSD:r,totalUnclaimedFeesUSD:i,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"raydium_clmm",positionCount:s.length,totalValueUSD:s.reduce((a,l)=>a+l.valueUSD,0)},{protocol:"raydium_cpmm",positionCount:o.length,totalValueUSD:o.reduce((a,l)=>a+l.valueUSD,0)}]}}async getTopPools(e,n){const r={minTVL:n==null?void 0:n.minTVL,volumeTimeframe:n==null?void 0:n.timeframe,sortBy:e,sortOrder:"desc",limit:(n==null?void 0:n.limit)||10};n!=null&&n.poolType&&(r.protocol=[n.poolType==="clmm"?"raydium_clmm":"raydium_cpmm"]);const i=await xi.queryPools(r);return this.rankPools(i,e,(n==null?void 0:n.limit)||10)}async findBestPool(e,n,r="tvl"){const i=await xi.queryPools({tokenPair:{tokenA:e,tokenB:n},sortBy:r,sortOrder:"desc",limit:1});return i.length===0?null:{pool:i[0],rank:1,score:this.getPoolScore(i[0],r),reason:`Best Raydium pool for ${e}/${n} by ${r}`}}async getSwapQuote(e,n,r,i){return xi.getSwapQuote({inputMint:e,outputMint:n,amount:r,slippageBps:i})}priceToTick(e,n,r){return xi.priceToTick(e,n,r)}tickToPrice(e,n,r){return xi.tickToPrice(e,n,r)}calculateOptimalRange(e,n){const i={conservative:.1,moderate:.25,aggressive:.5}[n],s=e*(1-i),o=e*(1+i);return{priceMin:s,priceMax:o,rangeWidth:i*2*100}}buildAnalysisPrompt(e,n){const{pools:r,topByVolume:i,topByAPY:s,positions:o,totalValueUSD:a}=e;let l=`## Raydium Context

`;return l+=`**User Query:** ${n}

`,o.length>0&&(l+=`### Your Raydium Positions
`,l+=`- Total Positions: ${o.length}
`,l+=`- Total Value: $${a.toLocaleString()}

`,o.slice(0,5).forEach((c,d)=>{l+=`${d+1}. Pool: ${c.poolAddress.slice(0,8)}... | `,l+=`Value: $${c.valueUSD.toLocaleString()} | `,l+=`Unclaimed: $${c.unclaimedFees.totalUSD.toFixed(2)}
`}),l+=`
`),l+=`### Top Pools by Volume (24h)
`,i.slice(0,5).forEach((c,d)=>{l+=`${d+1}. ${c.pool.name} | TVL: $${c.pool.tvl.toLocaleString()} | `,l+=`Vol: $${(c.pool.volume["24h"]||0).toLocaleString()} | `,l+=`APY: ${(c.pool.apy||0).toFixed(2)}%
`}),l+=`
`,l+=`### Top Pools by APY
`,s.slice(0,5).forEach((c,d)=>{l+=`${d+1}. ${c.pool.name} | APY: ${(c.pool.apy||0).toFixed(2)}% | `,l+=`TVL: $${c.pool.tvl.toLocaleString()}
`}),l}rankPools(e,n,r){return[...e].sort((s,o)=>{const a=this.getPoolScore(s,n);return this.getPoolScore(o,n)-a}).slice(0,r).map((s,o)=>({pool:s,rank:o+1,score:this.getPoolScore(s,n),reason:`Ranked #${o+1} by ${n}`}))}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}}const Y0e=new d0t;class f0t{async searchPools(e){const n=ds();if(!n)return console.warn("[PoolService] Supabase client not initialized, skipping search."),[];try{let r=n.from("liquidity_pools").select(`
                    id,
                    address,
                    protocol,
                    name,
                    token_a_mint,
                    token_b_mint,
                    liquidity_pool_snapshots (
                        tvl,
                        volume_24h,
                        apy,
                        price,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});e.protocol&&e.protocol.length>0&&(r=r.in("protocol",e.protocol)),e.tokenPair;const{data:i,error:s}=await r;if(s)throw s;return i?i.map(o=>this.mapRowToPool(o)):[]}catch(r){return console.error("[PoolService] Error searching pools:",r),[]}}async getTopPools(e,n=1440,r){const i=ds();if(!i)return[];try{if(e==="volume"&&n<1440){const{data:l,error:c}=await i.rpc("get_top_pools_with_delta",{timeframe_minutes:n,rank_limit:50});if(c)console.warn("[PoolService] RPC failed, falling back to standard",c);else{let d=(l||[]).map(h=>({address:h.pool_address,protocol:h.protocol,name:h.pool_name,tokenA:{mint:"",symbol:h.pool_name.split("-")[0]||"?",decimals:9},tokenB:{mint:"",symbol:h.pool_name.split("-")[1]||"?",decimals:9},tvl:h.current_tvl,volume:{"24h":h.delta_volume},apy:h.current_apy}));return r&&(d=this.applyFilters(d,r)),d}}const{data:s,error:o}=await i.from("liquidity_pools").select(`
                    *,
                    liquidity_pool_snapshots (
                        tvl,
                        volume_24h,
                        apy,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});if(o)throw o;let a=(s||[]).map(l=>this.mapRowToPool(l));return r&&(a=this.applyFilters(a,r)),a.sort((l,c)=>e==="tvl"?c.tvl-l.tvl:e==="apy"?c.apy-l.apy:(c.volume["24h"]||0)-(l.volume["24h"]||0)),a.slice(0,50)}catch(s){return console.error("[PoolService] Error getting top pools:",s),[]}}applyFilters(e,n){return e.filter(r=>{if(n.minTVL&&r.tvl<n.minTVL||n.minVolume&&(r.volume["24h"]||0)<n.minVolume||n.minAPY&&(r.apy||0)<n.minAPY||n.protocol&&n.protocol.length>0&&!n.protocol.includes(r.protocol))return!1;if(n.tokenAllowlist&&n.tokenAllowlist.length>0){const i=r.tokenA.symbol.toUpperCase(),s=r.tokenB.symbol.toUpperCase(),o=n.tokenAllowlist.map(a=>a.toUpperCase());if(!o.includes(i)&&!o.includes(s))return!1}if(n.tokenBlocklist&&n.tokenBlocklist.length>0){const i=r.tokenA.symbol.toUpperCase(),s=r.tokenB.symbol.toUpperCase(),o=n.tokenBlocklist.map(a=>a.toUpperCase());if(o.includes(i)||o.includes(s))return!1}return!0})}mapRowToPool(e){var r;const n=((r=e.liquidity_pool_snapshots)==null?void 0:r[0])||{};return{address:e.address,protocol:e.protocol,name:e.name,tokenA:{mint:e.token_a_mint,symbol:e.name.split("-")[0]||"Unknown",decimals:9},tokenB:{mint:e.token_b_mint,symbol:e.name.split("-")[1]||"Unknown",decimals:9},tvl:n.tvl||0,feeBps:0,apy:n.apy||0,volume:{"24h":n.volume_24h||0,"7d":0},currentPrice:n.current_price||n.price||0}}}const Gee=new f0t;class h0t{async discoverPools(e){return await Gee.searchPools(e||{})}async searchPools(e,n,r){const i={tokenPair:{tokenA:e,tokenB:n},sortBy:"tvl",sortOrder:"desc"};if(r==="meteora")return Hi.queryPools(i);if(r==="raydium")return xi.queryPools(i);const[s,o]=await Promise.all([Hi.queryPools(i),xi.queryPools(i)]);return[...s,...o].sort((a,l)=>l.tvl-a.tvl)}async getAllPositions(e){const[n,r]=await Promise.all([Hi.getPositions(e),xi.getPositions(e)]),i=[...n,...r],s=i.reduce((a,l)=>a+l.valueUSD,0),o=i.reduce((a,l)=>{var c;return a+(((c=l.unclaimedFees)==null?void 0:c.totalUSD)||0)},0);return{meteora:n,raydium:r,totalValueUSD:s,totalUnclaimedFeesUSD:o}}async getPortfolioContext(e){const n=await this.getAllPositions(e);return{positions:[...n.meteora,...n.raydium],totalValueUSD:n.totalValueUSD,totalUnclaimedFeesUSD:n.totalUnclaimedFeesUSD,totalUnclaimedRewardsUSD:0,byProtocol:[{protocol:"meteora_dlmm",positionCount:n.meteora.length,totalValueUSD:n.meteora.reduce((i,s)=>i+s.valueUSD,0)},{protocol:"raydium_clmm",positionCount:n.raydium.length,totalValueUSD:n.raydium.reduce((i,s)=>i+s.valueUSD,0)}]}}async getTopPools(e,n){const r=this.timeframeToMinutes((n==null?void 0:n.timeframe)||"24h"),i={minTVL:n==null?void 0:n.minTVL,minVolume:n==null?void 0:n.minVolume,minAPY:n==null?void 0:n.minAPY,protocol:n==null?void 0:n.protocol},s=await Gee.getTopPools(e,r,i),o=(n==null?void 0:n.limit)||10;return s.slice(0,o).map((a,l)=>({pool:a,rank:l+1,score:this.getPoolScore(a,e),reason:`#${l+1} by ${e} across all protocols`}))}timeframeToMinutes(e){switch(e){case"5m":return 5;case"15m":return 15;case"1h":return 60;case"4h":return 240;case"24h":return 1440;case"7d":return 10080;default:return 1440}}async compareProtocols(e,n){const[r,i]=await Promise.all([Hi.queryPools({tokenPair:{tokenA:e,tokenB:n}}),xi.queryPools({tokenPair:{tokenA:e,tokenB:n}})]),s=[...r,...i];let o=null,a=-1;for(const l of s){const c=l.tvl/1e3+(l.volume["24h"]||0)/100+(l.apy||0);c>a&&(a=c,o=l)}return{tokenPair:`${e}/${n}`,meteora:r,raydium:i,recommendation:o?{protocol:o.protocol,poolAddress:o.address,reason:`Best overall score considering TVL ($${o.tvl.toLocaleString()}), volume ($${(o.volume["24h"]||0).toLocaleString()}), and APY (${(o.apy||0).toFixed(2)}%)`}:{protocol:"meteora_dlmm",poolAddress:"",reason:"No pools found for this token pair"}}}async recommendProtocol(e,n,r="tvl"){const i=await this.compareProtocols(e,n),s=[...i.meteora,...i.raydium];return s.length===0?[{protocol:"meteora_dlmm",poolAddress:"",reason:`No pools found for ${e}/${n}`}]:s.sort((a,l)=>{const c=this.getPoolScore(a,r);return this.getPoolScore(l,r)-c}).slice(0,3).map((a,l)=>({protocol:a.protocol,poolAddress:a.address,reason:`#${l+1} by ${r}: ${this.formatScore(a,r)}`}))}async buildUnifiedContext(e,n){const[r,i]=await Promise.all([c0t.getBatchContext(e,n),Y0e.getBatchContext(e,n)]),s=[...r.pools.map(l=>l.pool),...i.pools.map(l=>l.pool)],o=s.sort((l,c)=>(c.volume["24h"]||0)-(l.volume["24h"]||0)).slice(0,10).map((l,c)=>({pool:l,rank:c+1,score:l.volume["24h"]||0,reason:"Top volume"})),a=s.sort((l,c)=>(c.apy||0)-(l.apy||0)).slice(0,10).map((l,c)=>({pool:l,rank:c+1,score:l.apy||0,reason:"Top APY"}));return{meteora:{pools:r.pools.map(l=>l.pool),topByVolume:r.topByVolume,topByAPY:r.topByAPY},raydium:{pools:i.pools.map(l=>l.pool),topByVolume:i.topByVolume,topByAPY:i.topByAPY},combined:{topByVolume:o,topByAPY:a},positions:{meteora:r.positions,raydium:i.positions,totalValueUSD:r.totalValueUSD+i.totalValueUSD,totalUnclaimedFeesUSD:r.positions.reduce((l,c)=>{var d;return l+(((d=c.unclaimedFees)==null?void 0:d.totalUSD)||0)},0)+i.positions.reduce((l,c)=>{var d;return l+(((d=c.unclaimedFees)==null?void 0:d.totalUSD)||0)},0)},timestamp:Date.now()}}buildAnalysisPrompt(e,n){let r=`## Solana Liquidity Pool Context

`;r+=`**Query:** ${n}

`;const{positions:i}=e;return(i.meteora.length>0||i.raydium.length>0)&&(r+=`### Your LP Portfolio
`,r+=`- Total Value: $${i.totalValueUSD.toLocaleString()}
`,r+=`- Unclaimed Fees: $${i.totalUnclaimedFeesUSD.toFixed(2)}
`,r+=`- Meteora Positions: ${i.meteora.length}
`,r+=`- Raydium Positions: ${i.raydium.length}

`),r+=`### Top Pools by Volume (All Protocols)
`,e.combined.topByVolume.slice(0,5).forEach((s,o)=>{const a=s.pool.protocol.includes("meteora")?"MET":"RAY";r+=`${o+1}. [${a}] ${s.pool.name} | `,r+=`TVL: $${s.pool.tvl.toLocaleString()} | `,r+=`Vol: $${(s.pool.volume["24h"]||0).toLocaleString()}
`}),r+=`
`,r+=`### Top Pools by APY
`,e.combined.topByAPY.slice(0,5).forEach((s,o)=>{const a=s.pool.protocol.includes("meteora")?"MET":"RAY";r+=`${o+1}. [${a}] ${s.pool.name} | `,r+=`APY: ${(s.pool.apy||0).toFixed(2)}% | `,r+=`TVL: $${s.pool.tvl.toLocaleString()}
`}),r}getPoolScore(e,n){switch(n){case"volume":return e.volume["24h"]||0;case"apy":return e.apy||0;case"tvl":return e.tvl;default:return 0}}formatScore(e,n){switch(n){case"volume":return`$${(e.volume["24h"]||0).toLocaleString()}`;case"apy":return`${(e.apy||0).toFixed(2)}%`;case"tvl":return`$${e.tvl.toLocaleString()}`;default:return""}}}const Bg=new h0t;class p0t{async calculateVolatility(e,n=7){var r,i;try{const s=await this.getPriceHistory(e,n);if(s.length<2)return{poolAddress:e,currentPrice:((r=s[0])==null?void 0:r.price)||0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:s.length,confidence:"low",error:"Insufficient data for volatility calculation"};const o=[];for(let O=1;O<s.length;O++){const D=s[O-1].price,_=s[O].price;D>0&&_>0&&o.push(Math.log(_/D))}if(o.length===0)return{poolAddress:e,currentPrice:((i=s[s.length-1])==null?void 0:i.price)||0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:s.length,confidence:"low",error:"Could not calculate returns from price data"};const a=o.reduce((O,D)=>O+D,0)/o.length,c=o.map(O=>Math.pow(O-a,2)).reduce((O,D)=>O+D,0)/o.length,m=Math.sqrt(c)*Math.sqrt(288)*100,g=m*Math.sqrt(365),v=s[s.length-1].price,x=this.findPriceAtTime(s,1440),b=this.findPriceAtTime(s,10080),w=x>0?(v-x)/x*100:0,k=b>0?(v-b)/b*100:0;let N;return s.length>=288*3?N="high":s.length>=288?N="medium":N="low",{poolAddress:e,currentPrice:v,volatilityDaily:Math.round(m*100)/100,volatilityAnnualized:Math.round(g*100)/100,priceChange24h:Math.round(w*100)/100,priceChange7d:Math.round(k*100)/100,dataPoints:s.length,confidence:N}}catch(s){return console.error("[VolatilityService] Error calculating volatility:",s),{poolAddress:e,currentPrice:0,volatilityDaily:0,volatilityAnnualized:0,priceChange24h:0,priceChange7d:0,dataPoints:0,confidence:"low",error:s.message}}}suggestOptimalRanges(e,n){const r=n.volatilityDaily/100;return r===0||e===0?this.getDefaultRanges(e):[{strategy:"conservative",...this.calculateRange(e,r,2,7),sigmaMultiple:2,estimatedTimeInRange:"~95% do tempo",description:"Faixa ampla, menor rendimento, menor risco de sair da faixa"},{strategy:"moderate",...this.calculateRange(e,r,1.5,7),sigmaMultiple:1.5,estimatedTimeInRange:"~87% do tempo",description:"Balano entre rendimento e risco"},{strategy:"aggressive",...this.calculateRange(e,r,1,7),sigmaMultiple:1,estimatedTimeInRange:"~68% do tempo",description:"Faixa estreita, maior rendimento, maior risco de sair da faixa"}]}async getVolumeChange24h(e){const n=ds();if(!n)return console.warn("[VolatilityService] Supabase client not available"),null;try{const{data:r,error:i}=await n.from("liquidity_pools").select("id").eq("address",e).single();if(i||!r)return console.warn("[VolatilityService] Pool not found for volume:",e),null;const{data:s,error:o}=await n.from("liquidity_pool_snapshots").select("volume_24h, timestamp").eq("pool_id",r.id).order("timestamp",{ascending:!1}).limit(1).single();if(o||!s)return null;const a=new Date;a.setHours(a.getHours()-24);const{data:l,error:c}=await n.from("liquidity_pool_snapshots").select("volume_24h, timestamp").eq("pool_id",r.id).lte("timestamp",a.toISOString()).order("timestamp",{ascending:!1}).limit(1).single(),d=parseFloat(s.volume_24h)||0;if(c||!l)return{current:d,previous:0,changePercent:0};const h=parseFloat(l.volume_24h)||0;let m=0;return h>0?m=(d-h)/h*100:d>0&&(m=100),{current:d,previous:h,changePercent:Math.round(m*100)/100}}catch(r){return console.error("[VolatilityService] Error calculating volume change:",r),null}}async getPriceHistory(e,n=7){const r=ds();if(!r)return console.warn("[VolatilityService] Supabase client not available"),[];try{const{data:i,error:s}=await r.from("liquidity_pools").select("id, name").eq("address",e).single();if(s||!i)return console.warn("[VolatilityService] Pool not found:",e),[];const o=new Date;o.setDate(o.getDate()-n);const{data:a,error:l}=await r.from("liquidity_pool_snapshots").select("timestamp, price").eq("pool_id",i.id).gte("timestamp",o.toISOString()).order("timestamp",{ascending:!0});return l?(console.error("[VolatilityService] Error fetching snapshots:",l),[]):(a||[]).map(c=>({timestamp:new Date(c.timestamp),price:parseFloat(c.price)||0})).filter(c=>c.price>0)}catch(i){return console.error("[VolatilityService] Error in getPriceHistory:",i),[]}}async searchPoolsByTokenPair(e,n,r=20){const i=ds();if(!i)return console.warn("[VolatilityService] Supabase client not available"),[];try{const{data:s,error:o}=await i.from("liquidity_pools").select(`
                    address,
                    name,
                    protocol,
                    liquidity_pool_snapshots (
                        tvl,
                        timestamp
                    )
                `).or(`name.ilike.%${e}%${n}%,name.ilike.%${n}%${e}%`).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});return o?(console.error("[VolatilityService] Error searching pools:",o),[]):(s||[]).filter(c=>{const d=c.name.toUpperCase(),h=e.toUpperCase(),m=n.toUpperCase(),g=new RegExp(`(^|[^A-Z])${h}([^A-Z]|$)`),v=new RegExp(`(^|[^A-Z])${m}([^A-Z]|$)`);return g.test(d)&&v.test(d)}).map(c=>{var d,h;return{address:c.address,name:c.name,protocol:c.protocol,tvl:((h=(d=c.liquidity_pool_snapshots)==null?void 0:d[0])==null?void 0:h.tvl)||0}}).sort((c,d)=>d.tvl-c.tvl).slice(0,r)}catch(s){return console.error("[VolatilityService] Error in searchPoolsByTokenPair:",s),[]}}async getAllPoolsFromDatabase(e=0,n,r=100){const i=ds();if(!i)return console.warn("[VolatilityService] Supabase client not available"),[];try{let s=i.from("liquidity_pools").select(`
                    address,
                    name,
                    protocol,
                    liquidity_pool_snapshots (
                        tvl,
                        timestamp
                    )
                `).order("timestamp",{foreignTable:"liquidity_pool_snapshots",ascending:!1}).limit(1,{foreignTable:"liquidity_pool_snapshots"});n&&(s=s.ilike("protocol",`%${n}%`));const{data:o,error:a}=await s.limit(r);return a?(console.error("[VolatilityService] Error fetching pools:",a),[]):(o||[]).map(c=>{var d,h;return{address:c.address,name:c.name,protocol:c.protocol,tvl:((h=(d=c.liquidity_pool_snapshots)==null?void 0:d[0])==null?void 0:h.tvl)||0}}).filter(c=>c.tvl>=e).sort((c,d)=>d.tvl-c.tvl)}catch(s){return console.error("[VolatilityService] Error in getAllPoolsFromDatabase:",s),[]}}async getTopPoolsByVolatility(e=10,n=7,r=0,i){try{const s=await this.getAllPoolsFromDatabase(r,i,50);if(s.length===0)return console.warn("[VolatilityService] No pools found in database"),[];const o=[],a=5;for(let c=0;c<s.length;c+=a){const d=s.slice(c,c+a),h=await Promise.all(d.map(async m=>{const g=await this.calculateVolatility(m.address,n);return g.poolName=m.name,{pool:m,volatility:g}}));o.push(...h)}const l=o.filter(c=>!c.volatility.error&&c.volatility.volatilityDaily>0);return l.sort((c,d)=>d.volatility.volatilityDaily-c.volatility.volatilityDaily),l.slice(0,e)}catch(s){return console.error("[VolatilityService] Error in getTopPoolsByVolatility:",s),[]}}calculateRange(e,n,r,i){const s=n*Math.sqrt(i),o=r*s,a=e*(1-o),l=e*(1+o),c=o*2*100;return{priceMin:Math.round(a*1e4)/1e4,priceMax:Math.round(l*1e4)/1e4,widthPercent:Math.round(c*10)/10}}findPriceAtTime(e,n){const r=new Date;r.setMinutes(r.getMinutes()-n);let i=e[0],s=Math.abs(e[0].timestamp.getTime()-r.getTime());for(const o of e){const a=Math.abs(o.timestamp.getTime()-r.getTime());a<s&&(s=a,i=o)}return s<1800*1e3?i.price:0}getDefaultRanges(e){return[{strategy:"conservative",...this.calculateRange(e,.04,2,7),sigmaMultiple:2,estimatedTimeInRange:"~95% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"},{strategy:"moderate",...this.calculateRange(e,.04,1.5,7),sigmaMultiple:1.5,estimatedTimeInRange:"~87% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"},{strategy:"aggressive",...this.calculateRange(e,.04,1,7),sigmaMultiple:1,estimatedTimeInRange:"~68% do tempo (estimado)",description:"Faixa baseada em volatilidade tpica (dados insuficientes)"}]}}const Vf=new p0t,_y={EXECUTE_LP_OPS:{label:"Execute LP Operations",description:"General LP management",riskLevel:"medium"},OPEN_POSITION:{label:"Open Position",description:"Create new liquidity position",riskLevel:"high"},CLOSE_POSITION:{label:"Close Position",description:"Remove liquidity from position",riskLevel:"high"},REBALANCE_RANGE:{label:"Rebalance Range",description:"Adjust position price range",riskLevel:"high"},CLAIM_FEES:{label:"Claim Fees",description:"Collect earned trading fees",riskLevel:"low"},CLAIM_REWARDS:{label:"Claim Rewards",description:"Collect farming rewards",riskLevel:"low"}},GB={maxRangeWidthPercent:100,minRangeWidthPercent:1,maxCapitalPerPoolPercent:50,maxTotalLPExposurePercent:100,minTVLRequired:0,minVolumeRequired:0,minAPYRequired:0,tokenAllowlist:[],tokenBlocklist:[],protocolAllowlist:[],requireConfirmationFor:["OPEN_POSITION","CLOSE_POSITION","REBALANCE_RANGE"],enabled:!0};class m0t{validateOperation(e,n,r){const i=[],s=[];if(!r.enabled)return{allowed:!0,violations:[],warnings:[]};if(n.rangeWidthPercent!==void 0&&(n.rangeWidthPercent>r.maxRangeWidthPercent&&i.push(`Range width ${n.rangeWidthPercent.toFixed(1)}% exceeds maximum allowed ${r.maxRangeWidthPercent}%`),n.rangeWidthPercent<r.minRangeWidthPercent&&i.push(`Range width ${n.rangeWidthPercent.toFixed(1)}% is below minimum required ${r.minRangeWidthPercent}%`)),n.capitalPercent!==void 0&&n.capitalPercent>r.maxCapitalPerPoolPercent&&i.push(`Capital allocation ${n.capitalPercent.toFixed(1)}% exceeds maximum ${r.maxCapitalPerPoolPercent}% per pool`),n.tvl!==void 0&&n.tvl<r.minTVLRequired&&i.push(`Pool TVL $${n.tvl.toLocaleString()} is below minimum required $${r.minTVLRequired.toLocaleString()}`),n.volume24h!==void 0&&n.volume24h<r.minVolumeRequired&&i.push(`24h volume $${n.volume24h.toLocaleString()} is below minimum required $${r.minVolumeRequired.toLocaleString()}`),n.apy!==void 0&&n.apy<r.minAPYRequired&&s.push(`Pool APY ${n.apy.toFixed(2)}% is below preferred minimum ${r.minAPYRequired}%`),n.tokens&&r.tokenAllowlist.length>0){const o=n.tokens.filter(a=>!r.tokenAllowlist.some(l=>l.toUpperCase()===a.toUpperCase()));o.length>0&&i.push(`Token(s) not in allowlist: ${o.join(", ")}`)}if(n.tokens&&r.tokenBlocklist.length>0){const o=n.tokens.filter(a=>r.tokenBlocklist.some(l=>l.toUpperCase()===a.toUpperCase()));o.length>0&&i.push(`Blocked token(s) detected: ${o.join(", ")}`)}return n.protocol&&r.protocolAllowlist.length>0&&(r.protocolAllowlist.some(a=>n.protocol.toLowerCase().includes(a.toLowerCase()))||i.push(`Protocol "${n.protocol}" is not in the allowed list`)),{allowed:i.length===0,violations:i,warnings:s}}requiresConfirmation(e,n){return n.enabled?n.requireConfirmationFor.includes(e):!1}getRiskLevel(e){var n;return((n=_y[e])==null?void 0:n.riskLevel)||"medium"}generateRangeRationale(e,n,r){const i=[],s={conservative:"Faixa ampla (2)",moderate:"Faixa moderada (1.5)",aggressive:"Faixa estreita (1)"}[e];if(i.push(`${s} selecionada`),n.volatilityDaily>0&&i.push(`devido  volatilidade diria de ${n.volatilityDaily.toFixed(2)}%`),r!=null&&r.volume24h&&r.volume24h>0){const a=r.volume24h>=1e3?`$${(r.volume24h/1e3).toFixed(1)}K`:`$${r.volume24h.toFixed(0)}`;i.push(`volume 24h de ${a}`)}if(r!=null&&r.tvl&&r.tvl>0){const a=r.tvl>=1e6?`$${(r.tvl/1e6).toFixed(2)}M`:r.tvl>=1e3?`$${(r.tvl/1e3).toFixed(1)}K`:`$${r.tvl.toFixed(0)}`;i.push(`TVL de ${a}`)}if(r!=null&&r.apy&&r.apy>0&&i.push(`APY estimado de ${r.apy.toFixed(2)}%`),n.confidence==="low"?i.push("(dados histricos limitados)"):n.confidence==="high"&&i.push("(alta confiana nos dados)"),i.length<=2)return i.join(" ");const o=i.pop();return i.join(", ")+" e "+o}generateOpenPositionRationale(e,n,r,i,s,o){const a=(i-r)/s.currentPrice*100;let l=`Abertura de posio em ${e} com estratgia ${n}. `;return l+=`Range de $${r.toFixed(4)} a $${i.toFixed(4)} (${a.toFixed(1)}% de largura). `,l+=`Capital: $${o.toLocaleString()}. `,s.volatilityDaily>5?l+=` Alta volatilidade (${s.volatilityDaily.toFixed(2)}%/dia) - maior risco de sair do range. `:s.volatilityDaily<2&&(l+=`Baixa volatilidade (${s.volatilityDaily.toFixed(2)}%/dia) - range deve permanecer ativo. `),s.priceChange24h>10?l+=`Preo subiu ${s.priceChange24h.toFixed(2)}% em 24h - considere range assimtrico para cima.`:s.priceChange24h<-10&&(l+=`Preo caiu ${Math.abs(s.priceChange24h).toFixed(2)}% em 24h - considere range assimtrico para baixo.`),l.trim()}generateClosePositionRationale(e,n,r,i){let s=`Fechamento de posio em ${e}. `;return n||(s+="Posio fora do range - no est gerando fees. "),r>0&&(s+=`Fees no coletados: $${r.toFixed(2)} sero resgatados automaticamente. `),i&&(s+=i),s.trim()}generateRebalanceRationale(e,n,r,i,s){let o=`Rebalanceamento de ${e}. `;if(o+=`Range anterior: $${n.min.toFixed(4)} - $${n.max.toFixed(4)}. `,o+=`Novo range: $${r.min.toFixed(4)} - $${r.max.toFixed(4)}. `,o+=`Preo atual: $${i.toFixed(4)}. `,i<n.min){const a=(n.min-i)/n.min*100;o+=`Preo ${a.toFixed(1)}% abaixo do range anterior. `}else if(i>n.max){const a=(i-n.max)/n.max*100;o+=`Preo ${a.toFixed(1)}% acima do range anterior. `}return o+=`Volatilidade: ${s.volatilityDaily.toFixed(2)}%/dia.`,o.trim()}}const Jb=new m0t,J0e={policy:GB,autoClaimFees:!1,autoRebalance:!1,rebalanceThresholdPercent:10},Kee={isOn:!1,statusMessage:"Ready",statusDetail:"Awaiting activation",activePositions:[],totalValueUSD:0,totalUnclaimedFeesUSD:0,settings:J0e,logs:[],auditLog:[],pendingConfirmation:null};class g0t{constructor(){this.isInitialized=!1,this.initPromise=null,this.state=Kee,this.listeners=new Set}async init(){if(!this.isInitialized)return this.initPromise?this.initPromise:(this.initPromise=(async()=>{try{const e=await Ae.getItem("solana_dealer_settings");if(e){const n=JSON.parse(e);this.state={...Kee,settings:{...J0e,...n.settings}}}this.isInitialized=!0,this.notify()}catch(e){console.error("[SolanaDealerStore] Failed to load settings:",e),this.isInitialized=!0}})(),this.initPromise)}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notify(){this.listeners.forEach(e=>e())}getState(){return this.state}getPolicy(){return this.state.settings.policy}getAuditLog(){return this.state.auditLog}getLogs(){return this.state.logs}setStatus(e,n){this.state={...this.state,statusMessage:e,statusDetail:n||this.state.statusDetail},this.notify()}setOn(e){this.state={...this.state,isOn:e},this.notify(),this.addLog("INFO",e?"Solana Dealer activated":"Solana Dealer deactivated")}updatePolicy(e){this.state={...this.state,settings:{...this.state.settings,policy:{...this.state.settings.policy,...e}}},this.notify(),this.saveSettings(),this.addLog("POLICY","Policy updated",e)}resetPolicy(){this.state={...this.state,settings:{...this.state.settings,policy:GB}},this.notify(),this.saveSettings(),this.addLog("POLICY","Policy reset to defaults")}addAuditEntry(e){const n=`audit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={...e,id:n,timestamp:Date.now()};return this.state={...this.state,auditLog:[r,...this.state.auditLog].slice(0,500)},this.notify(),this.saveAuditLog(),n}updateAuditEntry(e,n){this.state={...this.state,auditLog:this.state.auditLog.map(r=>r.id===e?{...r,...n}:r)},this.notify(),this.saveAuditLog()}addLog(e,n,r){const i={id:`log_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),type:e,message:n,details:r};this.state={...this.state,logs:[i,...this.state.logs].slice(0,200)},this.notify()}clearLogs(){this.state={...this.state,logs:[]},this.notify()}updatePositions(e){const n=e.reduce((i,s)=>i+s.valueUSD,0),r=e.reduce((i,s)=>i+s.unclaimedFeesUSD,0);this.state={...this.state,activePositions:e,totalValueUSD:n,totalUnclaimedFeesUSD:r},this.notify()}setPendingConfirmation(e){this.state={...this.state,pendingConfirmation:e},this.notify()}clearPendingConfirmation(){this.state={...this.state,pendingConfirmation:null},this.notify()}async saveSettings(){try{await Ae.setItem("solana_dealer_settings",JSON.stringify({settings:this.state.settings}))}catch(e){console.error("[SolanaDealerStore] Failed to save settings:",e)}}async saveAuditLog(){try{await Ae.setItem("solana_dealer_audit",JSON.stringify(this.state.auditLog.slice(0,100)))}catch(e){console.error("[SolanaDealerStore] Failed to save audit log:",e)}}async loadAuditLog(){try{const e=await Ae.getItem("solana_dealer_audit");if(e){const n=JSON.parse(e);this.state={...this.state,auditLog:n},this.notify()}}catch(e){console.error("[SolanaDealerStore] Failed to load audit log:",e)}}getAuditByScope(e,n=10){return this.state.auditLog.filter(r=>r.scope===e).slice(0,n)}getAuditByPool(e,n=10){return this.state.auditLog.filter(r=>r.poolAddress===e).slice(0,n)}getStats(){const e=this.state.auditLog;return{totalOperations:e.length,successfulOperations:e.filter(n=>n.status==="executed").length,failedOperations:e.filter(n=>n.status==="failed").length,policyViolations:e.filter(n=>n.policyViolations&&n.policyViolations.length>0).length}}}const Sr=new g0t;function y0t(){const[t,e]=Ms.useState(Sr.getState());return Ms.useEffect(()=>(Sr.init(),Sr.subscribe(()=>{e(Sr.getState())})),[]),t}function X0e(t,e){var r;if(!e.enabled)return!0;if(e.minTVLRequired>0&&t.tvl<e.minTVLRequired||e.minVolumeRequired>0&&(((r=t.volume)==null?void 0:r["24h"])||0)<e.minVolumeRequired)return!1;let n=[];return t.tokenA&&t.tokenB?n=[t.tokenA.symbol,t.tokenB.symbol]:n=t.name.split(/[-\/]/).map(i=>i.trim().toUpperCase()),!(e.tokenBlocklist.length>0&&e.tokenBlocklist.some(i=>n.some(s=>s.toUpperCase()===i.toUpperCase()))||e.tokenAllowlist.length>0&&!n.every(s=>e.tokenAllowlist.some(o=>o.toUpperCase()===s.toUpperCase()))||e.protocolAllowlist.length>0&&!e.protocolAllowlist.some(i=>t.protocol.toLowerCase().includes(i.toLowerCase())))}function Wee(t,e){return e.enabled?t.filter(n=>X0e(n,e)):t}async function x0t(t,e,n,r){var s,o,a,l,c,d,h,m,g,v;const i=r||(()=>{});if(t==="searchLiquidityPools")try{i("Searching liquidity pools...");const x=Sr.getPolicy(),b=x.enabled?Math.max(x.minTVLRequired||0,e.minTVL||0):e.minTVL,w=x.enabled?Math.max(x.minVolumeRequired||0,e.minVolume||0):e.minVolume,k=x.enabled?Math.max(x.minAPYRequired||0,e.minAPY||0):e.minAPY,N={tokenPair:e.tokenA&&e.tokenB?{tokenA:e.tokenA,tokenB:e.tokenB}:void 0,minTVL:b,minVolume:w,volumeTimeframe:e.volumeTimeframe,minAPY:k,sortBy:e.sortBy||"tvl",sortOrder:"desc",limit:e.limit||10};e.protocol&&(e.protocol==="meteora"?N.protocol=["meteora_dlmm","meteora_damm"]:e.protocol==="raydium"&&(N.protocol=["raydium_clmm","raydium_cpmm"]));const O=await Bg.discoverPools(N),D=Wee(O,x);if(D.length===0)return{type:"info",title:"No Pools Found",details:"No pools match your search criteria."+(x.enabled&&O.length>0?`

_${O.length} pools were filtered out by your Policy settings._`:"")};let _=`Found ${D.length} pools:

`;_+=`| Pool | Protocol | TVL | Volume 24h | APY |
|------|----------|-----|------------|-----|
`,D.forEach(z=>{const L=z.protocol.includes("meteora")?"MET":"RAY";_+=`| ${z.name} | ${L} | $${z.tvl.toLocaleString()} | $${(z.volume["24h"]||0).toLocaleString()} | ${(z.apy||0).toFixed(2)}% |
`}),Sr.addLog("INFO",`Searched pools: ${D.length} results (${O.length-D.length} filtered by policy)`,{filters:N});const F=D.map(z=>{const L=z.protocol.includes("meteora")?"meteora":"raydium";return{type:"pool",protocol:L,name:z.name,tokenA:{symbol:z.tokenA.symbol,mint:z.tokenA.mint},tokenB:{symbol:z.tokenB.symbol,mint:z.tokenB.mint},volume24h:z.volume["24h"]||0,tvl:z.tvl,apy:z.apy||0,feeBps:z.feeBps,poolAddress:z.address,poolUrl:mj(L,z.address),currentPrice:z.currentPrice}});return{type:"success",semanticType:"analysis",title:"Liquidity Pools",details:_,structuredData:{resultType:"pools",items:F,summary:`Found ${D.length} pools`}}}catch(x){return{type:"error",semanticType:"analysis",title:"Search Error",details:x.message}}if(t==="getPoolDetails")try{i("Fetching pool details...");let x=await Hi.getPool(e.poolAddress);return x||(x=await xi.getPoolById(e.poolAddress)),x?{type:"success",title:"Pool Details",details:`
**${x.name}**
- Protocol: ${x.protocol}
- Address: ${x.address}
- TVL: $${x.tvl.toLocaleString()}
- Volume 24h: $${(x.volume["24h"]||0).toLocaleString()}
- APY: ${(x.apy||0).toFixed(2)}%
- Fee: ${x.feeBps} bps (${(x.feeBps/100).toFixed(2)}%)
- Token A: ${x.tokenA.symbol} (${x.tokenA.mint.slice(0,8)}...)
- Token B: ${x.tokenB.symbol} (${x.tokenB.mint.slice(0,8)}...)
            `.trim()}:{type:"error",title:"Pool Not Found",details:`No pool found with address: ${e.poolAddress}`}}catch(x){return{type:"error",title:"Pool Details Error",details:x.message}}if(t==="getTopLiquidityPools")try{i(`Getting top pools by ${e.criteria}...`);const x=Sr.getPolicy(),b=x.enabled?Math.max(x.minTVLRequired||0,e.minTVL||0):e.minTVL,w=x.enabled&&x.minVolumeRequired||0,k=x.enabled?Math.max(x.minAPYRequired||0,0):0,N=await Bg.getTopPools(e.criteria,{timeframe:e.volumeTimeframe,minTVL:b,minVolume:w,minAPY:k,protocol:e.protocol?e.protocol==="meteora"?["meteora_dlmm"]:["raydium_clmm","raydium_cpmm"]:void 0,limit:e.limit||10});if(N.length===0)return{type:"info",title:"No Pools",details:"No pools found matching criteria."};const O=N.filter(z=>Wee([z.pool],x).length>0);if(O.length===0)return{type:"info",title:"No Pools",details:`No pools match criteria.

_${N.length} pools were filtered out by your Policy settings._`};const D=[...O].sort((z,L)=>L.score-z.score);let _=`Top ${D.length} pools by ${e.criteria}:

`;D.forEach((z,L)=>{const $=z.pool.protocol.includes("meteora")?"MET":"RAY";let G="";e.criteria==="volume"?G=`Vol: $${(z.pool.volume["24h"]||0).toLocaleString()}`:e.criteria==="apy"?G=`APY: ${(z.pool.apy||0).toFixed(2)}%`:G=`TVL: $${z.pool.tvl.toLocaleString()}`,_+=`${L+1}. [${$}] ${z.pool.name} - ${G}
`});const F=D.map(z=>{const L=z.pool.protocol.includes("meteora")?"meteora":"raydium";return{type:"pool",protocol:L,name:z.pool.name,tokenA:{symbol:z.pool.tokenA.symbol,mint:z.pool.tokenA.mint},tokenB:{symbol:z.pool.tokenB.symbol,mint:z.pool.tokenB.mint},volume24h:z.pool.volume["24h"]||0,tvl:z.pool.tvl,apy:z.pool.apy||0,feeBps:z.pool.feeBps,poolAddress:z.pool.address,poolUrl:mj(L,z.pool.address),currentPrice:z.pool.currentPrice}});return{type:"success",title:`Top Pools by ${e.criteria.toUpperCase()}`,details:_,structuredData:{resultType:"pools",items:F,summary:`Top ${D.length} pools by ${e.criteria}`,title:`Top Pools by ${e.criteria.toUpperCase()}`}}}catch(x){return{type:"error",title:"Ranking Error",details:x.message}}if(t==="compareLiquidityPools")try{if(i("Comparing pools..."),e.tokenPair){const[x,b]=e.tokenPair.split("/").map(N=>N.trim()),w=await Bg.compareProtocols(x,b);let k=`**Comparison for ${e.tokenPair}**

`;return k+=`Meteora Pools: ${w.meteora.length}
`,k+=`Raydium Pools: ${w.raydium.length}

`,w.recommendation.poolAddress&&(k+=`**Recommendation:** ${w.recommendation.protocol}
`,k+=`Reason: ${w.recommendation.reason}`),{type:"success",title:"Pool Comparison",details:k}}return{type:"error",title:"Compare Error",details:'Please provide tokenPair (e.g., "SOL/USDC")'}}catch(x){return{type:"error",title:"Compare Error",details:x.message}}if(t==="getPoolHistory")try{i("Fetching pool history...");const x=await Hi.getPoolTVLHistory(e.poolAddress,e.days||7);if(x.length===0)return{type:"info",title:"No History",details:"No historical data available."};let b=`${e.metric.toUpperCase()} History (${e.days||7} days):

`;return x.slice(-5).forEach(w=>{const k=new Date(w.timestamp).toLocaleDateString();b+=`${k}: $${w.value.toLocaleString()}
`}),{type:"success",title:"Pool History",details:b}}catch(x){return{type:"error",title:"History Error",details:x.message}}if(t==="getLPPositions")try{if(i("Fetching LP positions..."),!n)return{type:"error",title:"Wallet Required",details:"Please connect a wallet to view positions."};const x=await Bg.getAllPositions(n),b=[...x.meteora,...x.raydium];if(b.length===0)return{type:"info",title:"No Positions",details:"You have no active LP positions."};let w=`**Your LP Portfolio**
`;return w+=`Total Value: $${x.totalValueUSD.toLocaleString()}
`,w+=`Unclaimed Fees: $${x.totalUnclaimedFeesUSD.toFixed(2)}

`,w+=`Meteora: ${x.meteora.length} positions
`,w+=`Raydium: ${x.raydium.length} positions

`,b.slice(0,5).forEach((k,N)=>{const O=k.protocol.includes("meteora")?"MET":"RAY";w+=`${N+1}. [${O}] Pool: ${k.poolAddress.slice(0,8)}...
`,w+=`   Value: $${k.valueUSD.toLocaleString()} | Fees: $${k.unclaimedFees.totalUSD.toFixed(2)}
`}),{type:"success",title:"LP Positions",details:w}}catch(x){return{type:"error",title:"Positions Error",details:x.message}}if(t==="getLPPositionDetails")try{i("Fetching position details...");let x=await Hi.getPosition(e.positionAddress);return x||(x=await xi.getPositionByNft(e.positionAddress)),x?{type:"success",title:"Position Details",details:`
**Position Details**
- Address: ${x.positionAddress}
- Pool: ${x.poolAddress}
- Protocol: ${x.protocol}
- Value: $${x.valueUSD.toLocaleString()}
- Token A: ${x.tokenAAmount}
- Token B: ${x.tokenBAmount}
- Unclaimed Fees: $${x.unclaimedFees.totalUSD.toFixed(2)}
${x.priceRange?`- Price Range: ${x.priceRange.min.toFixed(4)} - ${x.priceRange.max.toFixed(4)}
- In Range: ${x.priceRange.inRange?"":""}`:""}
            `.trim()}:{type:"error",title:"Position Not Found",details:`Position not found: ${e.positionAddress}`}}catch(x){return{type:"error",title:"Position Error",details:x.message}}if(t==="getUnclaimedLPRewards")try{if(i("Checking unclaimed rewards..."),e.positionAddress){const b=await Hi.getUnclaimedFees(e.positionAddress);return{type:"success",title:"Unclaimed Fees",details:`Position ${e.positionAddress.slice(0,8)}...
Token A: ${b.tokenA}
Token B: ${b.tokenB}
Total USD: $${b.totalUSD.toFixed(2)}`}}return n?{type:"success",title:"Total Unclaimed Rewards",details:`Total unclaimed fees across all positions: $${(await Bg.getAllPositions(n)).totalUnclaimedFeesUSD.toFixed(2)}`}:{type:"error",title:"Wallet Required",details:"Please connect a wallet."}}catch(x){return{type:"error",title:"Rewards Error",details:x.message}}if(t==="estimateLPPositionPnL")try{return i("Calculating PnL..."),{type:"info",title:"PnL Estimation",details:"PnL calculation requires entry data. Please check your position details for current value and unclaimed fees."}}catch(x){return{type:"error",title:"PnL Error",details:x.message}}if(t==="addLiquidity"){const x=Sr.getPolicy();let b=await Hi.getPool(e.poolAddress);b||(b=await xi.getPoolById(e.poolAddress));const w=Jb.validateOperation("OPEN_POSITION",{poolAddress:e.poolAddress,poolName:b==null?void 0:b.name,tokens:b?[b.tokenA.symbol,b.tokenB.symbol]:void 0,tvl:b==null?void 0:b.tvl,volume24h:b==null?void 0:b.volume["24h"],apy:b==null?void 0:b.apy,protocol:b==null?void 0:b.protocol,rangeWidthPercent:e.priceMin&&e.priceMax&&e.currentPrice?(e.priceMax-e.priceMin)/e.currentPrice*100:void 0},x);if(!w.allowed)return Sr.addAuditEntry({scope:"OPEN_POSITION",action:"Add liquidity blocked by policy",poolAddress:e.poolAddress,rationale:"Policy violation detected",params:{amountA:e.amountA,amountB:e.amountB},status:"rejected",policyViolations:w.violations}),{type:"error",semanticType:"decision",title:"Policy Violation",details:` **Operao bloqueada pela Policy Engine**

${w.violations.map(O=>" "+O).join(`
`)}

Ajuste suas polticas em Solana Dealer > Policy para prosseguir.`};const k=Jb.requiresConfirmation("OPEN_POSITION",x),N=`Adio de liquidez na pool ${((s=e.poolAddress)==null?void 0:s.slice(0,8))||"unknown"}. Valores: ${e.amountA} token A + ${e.amountB} token B.`;return k?(Sr.addAuditEntry({scope:"OPEN_POSITION",action:"Add liquidity - awaiting confirmation",poolAddress:e.poolAddress,rationale:N,params:{amountA:e.amountA,amountB:e.amountB,priceMin:e.priceMin,priceMax:e.priceMax},status:"pending"}),{type:"info",semanticType:"decision",title:"Confirm Add Liquidity",details:`Adicionando liquidez  pool ${((o=e.poolAddress)==null?void 0:o.slice(0,8))||"unknown"}:
- Amount A: ${e.amountA}
- Amount B: ${e.amountB}
${e.priceMin?`- Range: ${e.priceMin} - ${e.priceMax}`:""}`,rationale:N,requiresConfirmation:!0,confirmationData:{scope:"OPEN_POSITION",action:"Add Liquidity",poolAddress:e.poolAddress,params:{amountA:e.amountA,amountB:e.amountB,priceMin:e.priceMin,priceMax:e.priceMax},rationale:N}}):(Sr.addLog("OPERATION",`Add liquidity to ${(a=e.poolAddress)==null?void 0:a.slice(0,8)}`,e),{type:"info",semanticType:"execution",title:"Add Liquidity",details:`To add liquidity to pool ${((l=e.poolAddress)==null?void 0:l.slice(0,8))||"unknown"}...:
- Amount A: ${e.amountA}
- Amount B: ${e.amountB}
${e.priceMin?`- Price Range: ${e.priceMin} - ${e.priceMax}`:""}

 SDK integration required. Please use the protocol's web interface for now.`,rationale:N})}if(t==="removeLiquidity"){const x=Sr.getPolicy(),b=Jb.requiresConfirmation("CLOSE_POSITION",x),w=`Remoo de ${e.percentage}% da posio ${((c=e.positionAddress)==null?void 0:c.slice(0,8))||"unknown"}.`;return Sr.addAuditEntry({scope:"CLOSE_POSITION",action:`Remove ${e.percentage}% liquidity`,poolAddress:e.positionAddress,rationale:w,params:{percentage:e.percentage},status:b?"pending":"executed"}),b?{type:"info",semanticType:"decision",title:"Confirm Remove Liquidity",details:`Removendo ${e.percentage}% da posio ${((d=e.positionAddress)==null?void 0:d.slice(0,8))||"unknown"}`,rationale:w,requiresConfirmation:!0,confirmationData:{scope:"CLOSE_POSITION",action:"Remove Liquidity",poolAddress:e.positionAddress,params:{percentage:e.percentage},rationale:w}}:{type:"info",semanticType:"execution",title:"Remove Liquidity",details:`To remove ${e.percentage}% from position ${((h=e.positionAddress)==null?void 0:h.slice(0,8))||"unknown"}...

 SDK integration required. Please use the protocol's web interface for now.`,rationale:w}}if(t==="claimLPFees"||t==="claimLPRewards"){const x=`Claim de fees/rewards da posio ${((m=e.positionAddress)==null?void 0:m.slice(0,8))||"unknown"}.`;return Sr.addAuditEntry({scope:"CLAIM_FEES",action:"Claim fees/rewards",poolAddress:e.positionAddress,rationale:x,params:{},status:"executed"}),{type:"info",semanticType:"execution",title:"Claim Fees/Rewards",details:`To claim from position ${((g=e.positionAddress)==null?void 0:g.slice(0,8))||"unknown"}...

 SDK integration required. Please use the protocol's web interface for now.`,rationale:x}}if(t==="rebalanceLPPosition"){const x=Sr.getPolicy(),b=Jb.requiresConfirmation("REBALANCE_RANGE",x),w=`Rebalanceamento para novo range: ${e.newPriceMin} - ${e.newPriceMax}.`;return Sr.addAuditEntry({scope:"REBALANCE_RANGE",action:"Rebalance to new range",poolAddress:e.positionAddress,rationale:w,params:{newPriceMin:e.newPriceMin,newPriceMax:e.newPriceMax},status:b?"pending":"executed"}),b?{type:"info",semanticType:"decision",title:"Confirm Rebalance",details:`Rebalanceando posio para range ${e.newPriceMin} - ${e.newPriceMax}`,rationale:w,requiresConfirmation:!0,confirmationData:{scope:"REBALANCE_RANGE",action:"Rebalance Position",poolAddress:e.positionAddress,params:{newPriceMin:e.newPriceMin,newPriceMax:e.newPriceMax},rationale:w}}:{type:"info",semanticType:"execution",title:"Rebalance Position",details:`To rebalance position to range ${e.newPriceMin} - ${e.newPriceMax}:

 SDK integration required. Please use the protocol's web interface for now.`,rationale:w}}if(t==="simulateAddLiquidity")try{i("Simulating liquidity addition...");const x=await Hi.getPool(e.poolAddress)||await xi.getPoolById(e.poolAddress);if(!x)return{type:"error",title:"Pool Not Found",details:"Cannot simulate - pool not found."};const b=(e.amountA||0)*100+(e.amountB||0),w=x.tvl>0?b/(x.tvl+b)*100:100;return{type:"success",title:"Liquidity Simulation",details:`**Simulation Results**
- Pool: ${x.name}
- Adding: ${e.amountA} token A + ${e.amountB} token B
- Estimated Value: ~$${b.toLocaleString()}
- Share of Pool: ~${w.toFixed(4)}%
- Current Pool TVL: $${x.tvl.toLocaleString()}
- Pool APY: ${(x.apy||0).toFixed(2)}%`}}catch(x){return{type:"error",title:"Simulation Error",details:x.message}}if(t==="estimateImpermanentLoss")try{const x=e.priceChangePercent/100,b=Math.abs(x),k=(2*Math.sqrt(1+b)/(2+b)-1)*100;return{type:"success",title:"Impermanent Loss Estimate",details:`**Price Change: ${e.priceChangePercent>0?"+":""}${e.priceChangePercent}%**

Estimated Impermanent Loss: ${Math.abs(k).toFixed(2)}%

Note: This is a simplified calculation. Actual IL depends on:
- Price range (for concentrated liquidity)
- Pool type (constant product vs concentrated)
- Fees earned (which offset IL)`}}catch(x){return{type:"error",title:"IL Calculation Error",details:x.message}}if(t==="calculateOptimalPriceRange")try{const x=await Hi.getPool(e.poolAddress)||await xi.getPoolById(e.poolAddress);if(!x||!x.currentPrice)return{type:"error",title:"Range Error",details:"Could not get current price for pool."};const b=Y0e.calculateOptimalRange(x.currentPrice,e.riskLevel);return{type:"success",title:"Optimal Price Range",details:`**${e.riskLevel.toUpperCase()} Range**
- Current Price: $${x.currentPrice.toFixed(4)}
- Suggested Min: $${b.priceMin.toFixed(4)}
- Suggested Max: $${b.priceMax.toFixed(4)}
- Range Width: ${(b.rangeWidth/2).toFixed(1)}%

Wider ranges = more fees earned, less impermanent loss
Tighter ranges = higher capital efficiency, more active management needed`}}catch(x){return{type:"error",title:"Range Error",details:x.message}}if(t==="getLPSwapQuote")try{i("Getting swap quote...");const x=await xi.getSwapQuote({inputMint:e.inputToken,outputMint:e.outputToken,amount:e.amount,slippageBps:e.slippageBps||50});return x?{type:"success",title:"Swap Quote",details:`**${e.inputToken}  ${e.outputToken}**
- Input: ${e.amount}
- Output: ${x.outputAmount}
- Price Impact: ${(x.priceImpact*100).toFixed(2)}%
- Fee: ${x.fee}`}:{type:"error",title:"Quote Error",details:"Could not get swap quote."}}catch(x){return{type:"error",title:"Quote Error",details:x.message}}if(t==="getTopVolatilityPools")try{i("Calculating volatility for all pools...");const x=e.limit||10,b=e.days||7,w=e.minTVL||0,k=e.protocol,N=await Vf.getTopPoolsByVolatility(x,b,w,k),O=Sr.getPolicy(),D=N.filter(z=>X0e(z.pool,O));if(D.length===0)return{type:"info",title:"No Pools Found",details:`No pools with volatility data found in database.

This could mean:
- No pools have been synced yet
- No historical data available for volatility calculation

Data sync runs every 5 minutes.`+(O.enabled&&N.length>0?`

_${N.length} pools were filtered out by your Policy settings._`:"")};let _=` **Top ${D.length} Pools by Volatility**

`;_+=`| # | Pool | Protocol | Daily Vol | Ann. Vol | Price  24h | TVL |
`,_+=`|---|------|----------|-----------|----------|-------------|-----|
`;const F=[];return D.forEach((z,L)=>{const $=z.pool.protocol.includes("meteora")?"MET":"RAY",G=z.pool.protocol.includes("meteora")?"meteora":"raydium",V=z.pool.tvl>=1e3?`$${(z.pool.tvl/1e3).toFixed(1)}K`:`$${z.pool.tvl.toFixed(0)}`,U=z.volatility.priceChange24h>=0?`+${z.volatility.priceChange24h.toFixed(2)}%`:`${z.volatility.priceChange24h.toFixed(2)}%`;_+=`| ${L+1} | ${z.pool.name.slice(0,15)} | ${$} | ${z.volatility.volatilityDaily.toFixed(2)}% | ${z.volatility.volatilityAnnualized.toFixed(1)}% | ${U} | ${V} |
`,F.push({type:"volatility",poolName:z.pool.name,poolAddress:z.pool.address,protocol:G,currentPrice:z.volatility.currentPrice,volatilityDaily:z.volatility.volatilityDaily,volatilityAnnualized:z.volatility.volatilityAnnualized,priceChange24h:z.volatility.priceChange24h,priceChange7d:z.volatility.priceChange7d,tvl:z.pool.tvl,confidence:z.volatility.confidence,dataPoints:z.volatility.dataPoints})}),_+=`
*Volatility calculated from ${b} days of historical data.*`,w>0&&(_+=`
*Filtered to pools with TVL  $${w.toLocaleString()}*`),Sr.addLog("INFO",`Top volatility pools: ${N.length} results`,{limit:x,days:b,minTVL:w,protocol:k}),{type:"success",semanticType:"analysis",title:"Top Pools by Volatility",details:_,structuredData:{resultType:"volatility",items:F,summary:`Top ${N.length} pools by volatility`,title:"Pools Ranked by Volatility"}}}catch(x){return{type:"error",title:"Volatility Error",details:x.message}}if(t==="getPoolVolatility")try{if(i("Calculating pool volatility..."),e.tokenA&&e.tokenB&&!e.poolAddress){i("Finding pools for token pair...");const k=await Vf.searchPoolsByTokenPair(e.tokenA,e.tokenB,10);if(k.length===0)return{type:"info",title:"No Pool Found",details:`No pool found in database for ${e.tokenA}/${e.tokenB}.

This could mean:
- No pools exist for this pair
- Pools haven't been synced yet (sync runs every 5 min)

Try searching for available pools with: "liste pools"`};let N=` **Volatility Analysis for ${e.tokenA}/${e.tokenB}**
`;N+=`Found ${k.length} pools

`,N+=`| Pool | Protocol | TVL | Daily Vol | Ann. Vol | Price |
`,N+=`|------|----------|-----|-----------|----------|-------|
`;const O=[];for(const D of k){const _=await Vf.calculateVolatility(D.address,e.days||7),F=D.protocol.includes("meteora")?"MET":"RAY",z=D.protocol.includes("meteora")?"meteora":"raydium",L=_.error?"N/A":`${_.volatilityDaily.toFixed(2)}%`,$=_.error?"N/A":`${_.volatilityAnnualized.toFixed(1)}%`,G=_.currentPrice>0?`$${_.currentPrice.toFixed(4)}`:"N/A",V=D.tvl>=1e3?`$${(D.tvl/1e3).toFixed(1)}K`:`$${D.tvl.toFixed(0)}`;N+=`| ${D.name.slice(0,15)} | ${F} | ${V} | ${L} | ${$} | ${G} |
`,_.error||O.push({type:"volatility",poolName:D.name,poolAddress:D.address,protocol:z,currentPrice:_.currentPrice,volatilityDaily:_.volatilityDaily,volatilityAnnualized:_.volatilityAnnualized,priceChange24h:_.priceChange24h,priceChange7d:_.priceChange7d,tvl:D.tvl,confidence:_.confidence,dataPoints:_.dataPoints})}return N+=`
*Note: Volatility calculated from ${e.days||7} days of historical data.*`,{type:"success",title:`${e.tokenA}/${e.tokenB} Volatility`,details:N,structuredData:O.length>0?{resultType:"volatility",items:O,summary:`Found ${k.length} pools for ${e.tokenA}/${e.tokenB}`,title:`${e.tokenA}/${e.tokenB} Volatility Analysis`}:void 0}}if(!e.poolAddress)return{type:"error",title:"Missing Parameter",details:'Please provide either poolAddress OR tokenA and tokenB (e.g., tokenA="SOL", tokenB="USDC")'};const x=e.days||7,b=await Vf.calculateVolatility(e.poolAddress,x);if(b.error)return{type:"error",title:"Volatility Error",details:b.error};const w={high:"",medium:"",low:""}[b.confidence];return{type:"success",title:"Pool Volatility",details:` **Volatility Analysis**
- Pool: ${e.poolAddress.slice(0,8)}...
- Current Price: $${b.currentPrice.toFixed(4)}

**Volatility:**
- Daily: ${b.volatilityDaily.toFixed(2)}%
- Annualized: ${b.volatilityAnnualized.toFixed(2)}%

**Price Changes:**
- 24h: ${b.priceChange24h>=0?"+":""}${b.priceChange24h.toFixed(2)}%
- 7d: ${b.priceChange7d>=0?"+":""}${b.priceChange7d.toFixed(2)}%

${w} Confidence: ${b.confidence.toUpperCase()} (${b.dataPoints} data points)`}}catch(x){return{type:"error",title:"Volatility Error",details:x.message}}if(t==="suggestOptimalRangeByVolatility")try{i("Calculating optimal ranges...");let x=e.poolAddress,b="",w="raydium",k,N,O;if(!x&&e.tokenA&&e.tokenB){i("Finding best pool for token pair...");const A=await Vf.searchPoolsByTokenPair(e.tokenA,e.tokenB,1);if(A.length===0)return{type:"info",title:"No Pool Found",details:`No pool found in database for ${e.tokenA}/${e.tokenB}.

Try: "liste pools" to see available pools.`};x=A[0].address,b=A[0].name,w=A[0].protocol.includes("meteora")?"meteora":"raydium",N=A[0].tvl}if(!x)return{type:"error",title:"Missing Parameter",details:"Please provide either poolAddress OR tokenA and tokenB"};if(k===void 0||N===void 0){const A=await Hi.getPool(x)||await xi.getPoolById(x);A&&(b=b||A.name,w=A.protocol.includes("meteora")?"meteora":"raydium",k=A.apy,N=A.tvl,O=(v=A.volume)==null?void 0:v["24h"])}const D=await Vf.calculateVolatility(x,e.days||7);if(!D.currentPrice||D.currentPrice===0)return{type:"error",title:"Range Error",details:"Could not get current price for pool. Make sure the pool has historical data in the database."};const _=await Vf.getVolumeChange24h(x),F=Vf.suggestOptimalRanges(D.currentPrice,D),z=b||x.slice(0,8)+"...",L=F.map(A=>({strategy:A.strategy,priceMin:A.priceMin,priceMax:A.priceMax,widthPercent:A.widthPercent,sigmaMultiple:A.sigmaMultiple,estimatedTimeInRange:A.estimatedTimeInRange})),$={type:"volatility",poolName:b||void 0,poolAddress:x,protocol:w,currentPrice:D.currentPrice,volatilityDaily:D.volatilityDaily,volatilityAnnualized:D.volatilityAnnualized,priceChange24h:D.priceChange24h,priceChange7d:D.priceChange7d,tvl:N,apy:k,volume24h:(_==null?void 0:_.current)||O,volumeChange24h:_==null?void 0:_.changePercent,confidence:D.confidence,dataPoints:D.dataPoints},V=F.find(A=>A.strategy==="moderate")?Jb.generateRangeRationale("moderate",D,{tvl:void 0,volume24h:void 0}):"Sugesto de range baseada na volatilidade calculada.";Sr.addLog("INFO",`Range suggestion for ${z}`,{strategy:"all",volatilityDaily:D.volatilityDaily,currentPrice:D.currentPrice});let U=` **Optimal Range Suggestions for ${z}**
`;return U+=`Current Price: $${D.currentPrice.toFixed(4)} | Daily Volatility: ${D.volatilityDaily.toFixed(2)}%`,{type:"success",semanticType:"decision",title:"Range Suggestions",details:U,rationale:V,structuredData:{resultType:"volatility",items:[$],rangeSuggestions:L,summary:D.confidence==="low"?" Low confidence: ranges based on estimated volatility due to limited historical data.":void 0,title:`Range Suggestions for ${z}`}}}catch(x){return{type:"error",semanticType:"analysis",title:"Range Error",details:x.message}}if(t==="createLiquidityPool")return{type:"info",title:"Create Pool",details:`**Pool Creation Request**
- Protocol: ${e.protocol}
- Tokens: ${e.tokenA} / ${e.tokenB}
- Fee: ${e.feeBps} bps
- Initial Price: ${e.initialPrice}

 Pool creation requires SDK integration. Please use the protocol's web interface:
- Meteora: https://devnet.meteora.ag
- Raydium: https://raydium.io (switch to devnet)`};if(t==="estimatePoolCreationCost"){const x={meteora_dlmm:"~0.5 SOL",raydium_clmm:"~0.3 SOL",raydium_cpmm:"~0.2 SOL"};return{type:"success",title:"Pool Creation Cost",details:`Estimated cost for ${e.protocol}: ${x[e.protocol]||"~0.3-0.5 SOL"}

Includes:
- Account rent
- Transaction fees
- Protocol fees (if any)`}}return null}function v0t(t){return["searchLiquidityPools","getPoolDetails","getTopLiquidityPools","compareLiquidityPools","getPoolHistory","getLPPositions","getLPPositionDetails","getUnclaimedLPRewards","estimateLPPositionPnL","addLiquidity","removeLiquidity","claimLPFees","claimLPRewards","rebalanceLPPosition","simulateAddLiquidity","estimateImpermanentLoss","calculateOptimalPriceRange","getLPSwapQuote","createLiquidityPool","estimatePoolCreationCost","getPoolVolatility","suggestOptimalRangeByVolatility","getTopVolatilityPools"].includes(t)}const b0t=(t,e,n,r,i,s,o)=>{const[a,l]=S.useState([]),[c,d]=S.useState(null),[h,m]=S.useState(""),[g,v]=S.useState(!1),[x,b]=S.useState(""),w=S.useRef(null);S.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[]),S.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[a]),S.useEffect(()=>{const _=Ds.addRateLimitListener(F=>{g&&(F.exhausted?(b("API Limit Reached. Saving tasks..."),r("Google Gemini API quota exceeded. Please try again later."),v(!1)):b(`Rate limited. High traffic. Retrying in ${F.blockedForSeconds}s...`))});return()=>{_()}},[g]);const k=()=>{var _,F;try{const z=Rm.getApiKey();return z||((F=(_=window.process)==null?void 0:_.env)==null?void 0:F.GEMINI_API_KEY)}catch{return}};return{messages:a,setMessages:l,activeConversationId:c,loadConversation:_=>{console.log("[useAgent] Loading conversation:",_.id),console.log("[useAgent] Messages count:",_.messages.length),console.log("[useAgent] Messages:",_.messages.map(F=>{var z;return{id:F.id,role:F.role,contentPreview:(z=F.content)==null?void 0:z.substring(0,50),hasToolResults:!!(F.toolResults&&F.toolResults.length>0)}})),l(_.messages),d(_.id)},startNewConversation:()=>{l([]),d(null),m(""),v(!1),b("")},inputMessage:h,setInputMessage:m,isAiProcessing:g,aiStatus:x,scrollRef:w,handleSendMessage:async _=>{var V,U,A,I,j,q,K,te,Y,H;const z=(typeof _=="string"?_:void 0)||h;if(!z.trim())return;const L=k();if(!L){r("System: API Key not found in environment.");return}const $={id:Date.now().toString(),role:"user",content:z,timestamp:Date.now()};let G=c;G||(G=Date.now().toString(),d(G)),l(M=>{const P=[...M,$];if(t.isUnlocked&&e&&G){M.length===0&&na.generateTitle($.content);const W={id:G,title:M.length===0?na.generateTitle($.content):"Conversation",lastMessage:$.content,timestamp:Date.now(),messages:P};na.saveConversation(W,e).catch(X=>console.error("Auto-save failed",X))}return P}),m(""),v(!0),b("Thinking...");try{Rm.initialize(L);const M=yt.getSnapshot(),P=M.logs.slice(0,5).map(je=>`[${new Date(je.timestamp).toLocaleTimeString()}] ${je.type}: ${je.message}`).join(`
`);let W="",X="";if(t.hlPublicKey)try{const je=await $n.getUserFills(t.hlPublicKey);if(je&&Array.isArray(je)&&je.length>0){let Ve=0,me=0,Ne=0,We=0,Qe=0;je.forEach(qe=>{const it=parseFloat(qe.closedPnl||"0"),Lt=parseFloat(qe.fee||"0");Ve+=it-Lt,Qe+=Lt,We+=parseFloat(qe.px)*parseFloat(qe.sz),it>0?me++:it<0&&Ne++});const Ze=me+Ne,at=Ze>0?me/Ze*100:0;W=`
          **[PERFORMANCE METRICS - Trading Results]**
          - Total Profit/Loss: ${Ve>=0?"+":""}$${Ve.toFixed(2)} USD
          - Win Rate: ${at.toFixed(1)}% (${me} wins / ${Ne} losses)
          - Total Trades: ${je.length}
          - Total Volume: $${We.toFixed(2)} USD
          - Total Fees Paid: $${Qe.toFixed(2)} USD`,X=`
          **[RECENT TRADES - Last 5 Fills]**
${[...je].sort((qe,it)=>it.time-qe.time).slice(0,5).map(qe=>{const it=parseFloat(qe.closedPnl||"0"),Lt=it!==0?` | PnL: ${it>=0?"+":""}$${it.toFixed(2)}`:"";return`          - ${qe.coin} ${qe.side==="B"?"BUY":"SELL"} ${qe.sz} @ $${parseFloat(qe.px).toFixed(2)}${Lt} (${new Date(qe.time).toLocaleString()})`}).join(`
`)}`}else W=`
          **[PERFORMANCE METRICS]**
          - No trading history yet. Dealer has not executed any trades.`}catch(je){console.warn("[Agent] Could not fetch dealer performance:",je),W=`
          **[PERFORMANCE METRICS]**
          - Unable to fetch trading history at this moment.`}else W=`
          **[PERFORMANCE METRICS]**
          - Hyperliquid wallet not connected. Cannot fetch trading data.`;const ie=`
          **HYPERLIQUID DEALER CONTEXT (AUTONOMOUS TRADING ENGINE):**
          You have FULL access to the Hyperliquid Dealer's state, performance, and trading history.
          
          **[STATUS DATA - Current State]**
          - Dealer Status: ${M.isOn?" ACTIVE":" INACTIVE"}
          - Currently Analyzing: ${M.isAnalyzing?"Yes":"No"}
          - Current Task: ${M.currentTask||"Idle"}
          - Current Signal: ${M.currentSignal||"No signal"}
          - Trend Assessment: ${M.trendAssessment}
          - Current Exposure: $${M.currentExposure.toFixed(2)} USDC
          ${W}
          ${X}
          
          **[CONFIGURATION DATA - Only mention when user asks to CHANGE settings]**
          - Max Leverage: ${M.settings.maxLeverage}x
          - Max Position Size: $${M.settings.maxPositionSizeUSDC} USDC
          - Max Open Positions: ${M.settings.maxOpenPositions}
          - Trading Pairs: ${M.settings.tradingPairs.join(", ")}
          - Check Interval: ${M.settings.checkIntervalSeconds}s
          - Bankroll: ${M.settings.bankrollType} (${M.settings.bankrollType==="MANUAL"?"$"+M.settings.manualBankroll:"All Available"})
          
          **[ACTIVITY LOGS - Only show if user asks about activity/history]**
          ${P||"No recent activity"}
          
          **RESPONSE GUIDELINES (CRITICAL):**
          
          1. **STATUS QUESTIONS** (e.g., "What is the dealer doing?", "O que o dealer est fazendo?", "Resumo do dealer"):
             - Call BOTH tools: 'getHLBalance' (positions) AND 'getHLDealerThinking' (AI reasoning)
             - Show a COMPLETE summary: Status + Open Positions + Last AI Thinking + Recent Activity
             - Format response in organized sections:
                **Status**: Active/Inactive, current task
                **Positions**: Open trades with entry price, size, PnL
                **Last Analysis**: AI reasoning from latest cycle
             - If no positions, say "No open positions - monitoring markets"
          2. **PERFORMANCE/RESULTS QUESTIONS** (e.g., "How much profit?", "Quanto lucrou?", "What's my win rate?"):
             - Use the PERFORMANCE METRICS data above
             - Answer specifically what was asked
             - You CAN mention recent trades if relevant
          
          3. **CONFIGURATION CHANGE REQUESTS** (e.g., "I want to change leverage", "Quero mudar os pares"):
             - Show the relevant current setting
             - Include the configuration navigation button:
             
             [ Go to Dealer Configuration](nav://DEALER_CONFIG)
          
          4. **TRADE REASONING QUESTIONS** (e.g., "Why did you open BTC?", "Por que o Dealer entrou em ETH?", "Explique essa operao"):
             - Use the 'getDealerTradeHistory' tool to fetch detailed reasoning
             - The tool returns the AI's analysis and confidence for each trade
             - Explain the reasoning in a conversational way
             - Include entry price, size, and confidence level
          
          5. **OPEN POSITIONS QUESTIONS** (e.g., "Quais posies esto abertas?", "What positions are open?", "Show my positions"):
             - The Hyperliquid Dealer operates ONLY on Hyperliquid - so if user asks about Dealer positions, use 'getHLBalance'
             - If the conversation context is about Dealer (trading, positions, anlise), assume Hyperliquid - DO NOT ask which network
             - Use the 'getHLBalance' tool to fetch LIVE positions from Hyperliquid
             - This shows CURRENT open positions with entry price, size, and unrealized PnL
             - Only ask "Solana ou Hyperliquid?" if there's no context at all about Dealer
             
             **CRITICAL - DEALER POSITION QUERIES:**
             When user asks ANY of these, IMMEDIATELY call 'getHLBalance':
             - "posies do dealer", "dealer positions"
             - "quais posies", "what positions" (when dealer context exists)
             - "posies abertas", "open positions" (when dealer context exists)
             - "quais?" as follow-up to a position question
             DO NOT respond with just text - CALL THE TOOL!
          
          6. **SPECIFIC QUESTIONS**: Answer ONLY what was asked. Don't dump all data.
          `,oe=`
          You are Vault Operator, an autonomous DeFi Agent managing TWO separate vaults: Solana and Hyperliquid.
          Your name is Vault Operator. You also respond to just "Operator". When users ask "who are you" or similar questions, introduce yourself as Vault Operator.
          
          **YOUR IDENTITY:**
          - Solana Vault Address: ${t.publicKey||"UNKNOWN"}
          - Hyperliquid Vault Address: ${t.hlPublicKey||"NOT CREATED"}
          - Solana Owner's Wallet: ${t.ownerPublicKey||"NOT CONNECTED"}
          - Hyperliquid Owner's Wallet: ${t.hlOwnerPublicKey||"NOT CONNECTED"}
          - Current Vault SOL Balance: ${t.solBalance.toFixed(4)} SOL
          
          ${ie}
          
          **NETWORK CONTEXT AWARENESS (CRITICAL):**
          You manage TWO separate vaults on different networks:
          1. **Solana Vault** - for SOL and SPL tokens (USDC, RAY, etc.)
          2. **Hyperliquid Vault** - for perpetual trading with USDC on Hyperliquid Testnet
          
          **KEYWORD RECOGNITION:**
          - "hype", "hyperliquid", "hl" = Hyperliquid operations  call 'getHLBalance' for positions/balance
          - "sol", "solana" = Solana operations  call 'getVaultBalance' for balance
          - "dealer", "hyperliquid dealer", "trading bot", "autonomous trading" = Hyperliquid Dealer questions (implies Hyperliquid)
          
          **CRITICAL - NETWORK vs COIN DISAMBIGUATION:**
          "Solana" and "Hyperliquid" are BOTH network names AND coin names!
          
          CONTEXT CLUES FOR NETWORK:
          - "saldo", "balance", "posies", "positions", "carteira", "wallet"  asking about NETWORK
          - "enviar", "transferir", "withdraw", "sacar"  asking about NETWORK
          - Following a question about "which network?"  answering about NETWORK
          
          CONTEXT CLUES FOR COIN/TOKEN:
          - "preo", "price", "comprar", "buy", "vender", "sell"  asking about COIN
          - "anlise", "analyze", "RSI", "indicador"  asking about COIN
          - "abrir posio", "open position", "long", "short"  trading the COIN
          
          EXAMPLES:
          - "Qual meu saldo no Hyperliquid?"  NETWORK (getHLBalance)
          - "Qual o preo do HYPE?"  COIN (getMarketPrice with HYPEUSDT)
          - "Qual meu saldo de SOL?"  COIN balance on Solana network (getVaultBalance)
          - "Check Solana network"  NETWORK (getVaultBalance without token)
          - "Buy SOL on Hyperliquid"  Trading SOL COIN on HL network
          
          **CRITICAL - NETWORK RESPONSE HANDLING:**
          If the previous message was a question about which network and user responds with:
          - "hype", "hyperliquid", "hl"  IMMEDIATELY call 'getHLBalance' tool - DO NOT just acknowledge
          - "sol", "solana"  IMMEDIATELY call 'getVaultBalance' tool - DO NOT just acknowledge
          - The user is answering your question, so EXECUTE the action right away
          
          **TRANSFER DISAMBIGUATION (CRITICAL):**
          When a user requests a transfer (e.g., "send 1 USDC", "transfer USDC to me"):
          1. Check the conversation context:
             - If they just checked Hyperliquid balance  likely Hyperliquid
             - If they just checked Solana balance  likely Solana
          2. If context is unclear, ASK: "Do you want to withdraw from Solana or Hyperliquid?"
          3. NEVER assume the network - ALWAYS verify first
          
          **SOLANA TRANSFERS:**
          - Use 'transferToken' for SPL tokens
          - Use 'withdrawSol' for SOL
          - Destination: Owner's Solana wallet
          - Network: Solana
          
          **HYPERLIQUID WITHDRAWALS:**
          - Use 'withdrawFromHL' for USDC withdrawals
          - Network: Hyperliquid Testnet
          - Fee: $1 USDC (fixed)
          - Time: ~5 minutes
          - Destination: Owner's wallet on Hyperliquid Testnet (MUST be EVM address starting with 0x)
          - Check Status: Use 'getHLTransfers' to see pending/completed withdrawals
          - Minimum: Amount must be > $1 to cover fee
          
          **BEFORE ANY TRANSFER, YOU MUST:**
          1. Verify the correct network (Solana vs Hyperliquid)
          2. Check the balance on that specific network
          3. Confirm the user has sufficient funds (including fees)
          4. Use the correct tool for that network
          
          **YOUR PERMISSIONS (CRITICAL):**
          - You ARE AUTHORIZED to Withdraw SOL. Use 'withdrawSol'.
          - You ARE AUTHORIZED to Transfer Tokens (SPL/NFTs) to the Owner. Use 'transferToken'.
          - You ARE AUTHORIZED to Withdraw USDC from Hyperliquid. Use 'withdrawFromHL'.
          - You ARE AUTHORIZED to Swap tokens. Use 'executeSwap'.
          - You CANNOT transfer to any other address than the Owner's Wallet.
          
          **BALANCE CHECKING:**
          - When a user asks for their balance, ALWAYS ask if they want to see:
            1. All balances (SOL + all tokens)
            2. A specific token balance
            3. Hyperliquid balance
          - Do NOT assume they only want SOL balance.
          - The vault can hold SOL and many different SPL tokens.
          - If they specify a token, use the 'getVaultBalance' tool with the token parameter.
          - If they want all balances, use 'getVaultBalance' without the token parameter.
          - For Hyperliquid, use 'getHLBalance'.
          
          **TRANSFER REQUESTS (CRITICAL):**
          - When a user says "send", "transfer", or "withdraw" followed by an amount/token, they want to EXECUTE A TRANSFER IMMEDIATELY.
          - Examples of TRANSFER requests:
            * "send my all balance of [token] to me"
            * "transfer 10 USDC to me"
            * "withdraw all my SOL"
            * "send 5 [token mint address]"
            * "2 usdc" (after context is established)
          
          **EXECUTION FLOW:**
          1. Verify which network (Solana or Hyperliquid) from context or keywords
          2. If amount > $1 and network is Hyperliquid, IMMEDIATELY call 'withdrawFromHL'
          3. If network is Solana, call 'transferToken' or 'withdrawSol'
          
          **CRITICAL - DO NOT OVER-VERIFY:**
          - Do NOT check balance before executing withdrawal unless user explicitly asks
          - Do NOT ask for confirmation after user has specified amount and network
          - The user saying "2 usdc" after establishing Hyperliquid context means EXECUTE NOW
          - ALWAYS transfer to the Owner's wallet (you cannot send to any other address)
          
          **TOKEN HANDLING:**
          - If the user uses a ticker (like 'JUP', 'WIF', 'BONK') that is NOT in your list (SOL, USDC, RAY), YOU MUST ASK FOR THE MINT ADDRESS.
          - Say: "I don't recognize that ticker. Please provide the Token Mint Address."
          
          **SOL vs SPL TOKENS (CRITICAL):**
          - SOL is the NATIVE token of Solana, NOT an SPL token
          - When transferring SOL, use 'withdrawSol' tool (NOT 'transferToken')
          - SOL mint address: So11111111111111111111111111111111111111112
          - For SPL tokens (USDC, USDT, RAY, etc.), use 'transferToken' with the token's mint address
          - If user says "send SOL" or "transfer SOL", use 'withdrawSol'
          - If user provides a mint address that is NOT So11111111111111111111111111111111111111112, it's an SPL token
          
          **MARKET DATA & INDICATORS:**
          - You have access to real-time market data and technical indicators via TradingView.
          - Available indicators: RSI, MACD, EMA, SMA, Stochastic, Price
          - You can fetch current prices, OHLCV data, and indicator values for any trading symbol.
          - Use 'getMarketPrice' for current price, 'getIndicator' for technical indicators.
          - Use 'getTradingViewSummary' for overall market sentiment.
          
          **ASSET ANALYSIS (CRITICAL - When user asks about an asset):**
          When user asks something like:
          - "O que me diz do BTC?" / "What about BTC?"
          - "Como est o ETH?" / "How's ETH doing?"
          - "Analisa o SOL pra mim" / "Analyze SOL for me"
          - "What's your take on [asset]?"
          
          You MUST provide a COMPREHENSIVE ANALYSIS by:
          1. Call 'getMarketPrice' to get current price
          2. Call 'getIndicator' with indicator='rsi' and timeframe='60' (1h)
          3. Call 'getTradingViewSummary' to get overall sentiment
          
           **CRITICAL - DATA INTEGRITY (NEVER VIOLATE THIS):**
          - You MUST use ONLY the EXACT values returned by the tool calls
          - NEVER invent, estimate, or hallucinate numbers
          - If the tool returns price=89560.56, you say $89,560.56 - NOT any other number
          - If the tool returns RSI=47.67, you say 47.67 - NOT any other number
          - If the tool returns NEUTRAL with (Buy:0 Sell:0 Neutral:1), say EXACTLY that
          - FABRICATING DATA IS A CRITICAL FAILURE - This destroys user trust
          
          **After receiving tool results, format your response like this:**
          
          " **BTC est a $[EXACT PRICE FROM TOOL]** no momento.
          
          O RSI de 1h est em **[EXACT RSI FROM TOOL]** ([interpret based on value]).
          
          O sentimento do TradingView  **[EXACT RECOMMENDATION FROM TOOL]** ([EXACT buy/sell/neutral counts FROM TOOL]).
          
          **Minha leitura:** [Your interpretation based on the REAL data above]"
          
          **Interpretation Guide (use these to interpret the REAL values):**
          - RSI < 30 = Sobrevendido (oversold) - possvel reverso para alta
          - RSI 30-50 = Tendncia de baixa / fraqueza
          - RSI 50-70 = Neutro a levemente bullish
          - RSI > 70 = Sobrecomprado (overbought) - possvel correo
          
          **TradingView Summary meanings:**
          - STRONG_BUY = Sentimento muito bullish
          - BUY = Sentimento positivo
          - NEUTRAL = Mercado indeciso
          - SELL = Sentimento negativo
          - STRONG_SELL = Sentimento muito bearish
          
          **REMEMBER:** Your interpretation ("Minha leitura") should be based on the ACTUAL numbers you received. If RSI is 47.67, that's in the 30-50 range (slight weakness/neutral). If sentiment is NEUTRAL, say it's neutral - don't make up "COMPRA".
          
          **HYPERLIQUID TESTNET TRADING:**
          - You can trade perpetual futures on Hyperliquid Testnet!
          - You have a separate Hyperliquid Vault Wallet with USDC balance.
          
          **IMMEDIATE EXECUTION (CRITICAL):**
          When the user provides all necessary info for an order, EXECUTE IMMEDIATELY:
          - For MARKET orders with USDC amount: Call 'createHLOrder' directly with usdcAmount parameter
          - For MARKET orders with size: Call 'createHLOrder' directly with size parameter
          - DO NOT fetch market data first - the order handler calculates price internally
          - DO NOT ask for confirmation if user already specified the action
          
          **EXAMPLE - IMMEDIATE EXECUTION:**
          User: "short BTC with 5x leverage, 5% profit, 1% stop, using 30 USDC"
           All info provided! Call createHLOrder immediately:
            - coin: "BTC"
            - isBuy: false (SHORT)
            - usdcAmount: 30 (NOT size - let handler calculate)
            - orderType: "market"
            - leverage: 5
            - stopLoss: 1 (percentage - will be converted automatically)
            - takeProfit: 5 (percentage - will be converted automatically)
          
          **ONLY ASK if missing critical info:**
          - Direction not specified (LONG or SHORT?)
          - Amount not specified (how much USDC or size?)
          
          **TP/SL as PERCENTAGES:**
          - If user says "5% profit"  pass takeProfit: 5
          - If user says "1% stop"  pass stopLoss: 1
          - The handler converts percentages to absolute prices automatically
          
          **AVAILABLE HYPERLIQUID TOOLS:**
          - 'getHLBalance' - Check USDC balance and open positions
          - 'getHLMarketData' - Get current price and orderbook (NOT needed for orders)
          - 'createHLOrder' - Place a new order (LONG or SHORT)
          - 'updateHLLeverage' - Change leverage for an asset (automatic with createHLOrder)
          - 'closeHLPosition' - Close an open position
          - 'cancelHLOrder' - Cancel a pending order
          - 'cancelHLOrder' - Cancel a pending order
          - 'withdrawFromHL' - Withdraw USDC to Owner's wallet on Hyperliquid Testnet
          - 'getHLTransfers' - Check status of deposits and withdrawals (Real-time status)

          
          **TASK SCHEDULING (IMPORTANT):**
          You can schedule tasks in TWO ways:
          
          1. **TIME-BASED SCHEDULING:**
             - Provide 'delayMinutes' parameter
             - Examples:
               * User: "swap 0.1 SOL for USDC in 5 minutes"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, delayMinutes=5)
          
          2. **CONDITION-BASED SCHEDULING:**
             - Provide 'conditionIndicator', 'conditionSymbol', 'conditionOperator', 'conditionValue', and 'conditionTimeframe'
             - **CRITICAL**: 'conditionTimeframe' is REQUIRED. If the user does not provide it, you MUST ASK.
             
             - Examples:
               * User: "swap 0.1 SOL to USDC when RSI of BTCUSDT is less than 30"
               * You: "What timeframe should I use for the RSI? (e.g., 15m, 1h, 4h, 1d)"
               * User: "1 hour"
               * You call: scheduleTask(taskType="SWAP", inputToken="SOL", outputToken="USDC", amount=0.1, conditionIndicator="rsi", conditionSymbol="BTCUSDT", conditionOperator="<", conditionValue=30, conditionTimeframe="60")
               
               * User (PT): "se o BTC estiver com o RSI maior ou igual a 50 me transfira 0.1 SOL"
               * You: "Qual o perodo (timeframe) para o RSI? (ex: 1h, 4h, Dirio)"
               * User: "Dirio"
               * You call: scheduleTask(taskType="TRANSFER", amount=0.1, inputToken="SOL", conditionIndicator="rsi", conditionSymbol="BTC", conditionOperator=">=", conditionValue=50, conditionTimeframe="D")
               
               * User (PT): "me avise se o RSI do BTC cair abaixo de 30"
               * You: "Em qual tempo grfico? (15m, 1h, 4h...)"
          
          **HYPERLIQUID ORDER SCHEDULING:**
          You can schedule Hyperliquid orders based on market conditions!
          
          - Examples:
            * User: "Open LONG 0.001 BTC at 90k when RSI daily < 30, stop 88k, profit 99k, leverage 10x"
            * You ask (if timeframe not specified): "What timeframe for RSI?"
            * User: "Daily"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="BTC",
                isBuy=true,
                size=0.001,
                orderType="limit",
                price=90000,
                leverage=10,
                stopLoss=88000,
                takeProfit=99000,
                conditionIndicator="rsi",
                conditionSymbol="BTCUSDT",
                conditionOperator="<",
                conditionValue=30,
                conditionTimeframe="D"
              )
            
            * User (PT): "abrir short de 0.5 ETH quando o MACD cruzar abaixo de 0"
            * You: "Qual o timeframe para o MACD? E qual o preo limite ou prefere ordem a mercado?"
            * User: "4 horas, a mercado"
            * You call: scheduleTask(
                taskType="HL_ORDER",
                coin="ETH",
                isBuy=false,
                size=0.5,
                orderType="market",
                conditionIndicator="macd",
                conditionSymbol="ETHUSDT",
                conditionOperator="<",
                conditionValue=0,
                conditionTimeframe="240"
              )
          
          **CRITICAL - HL_ORDER REQUIREMENTS:**
          You MUST ask for ALL required parameters:
          - Coin (asset symbol)
          - Direction (LONG/SHORT or BUY/SELL)
          - Size (amount)
          - Order Type (LIMIT or MARKET)
          - Price (required for LIMIT orders)
          - Leverage (default 1x if not specified)
          - Stop Loss (optional, ask if user wants)
          - Take Profit (optional, ask if user wants)
          - Condition details (indicator, symbol, operator, value, timeframe)
          
          **PRICE CONDITION SCHEDULING (CRITICAL):**
          - "Buy when price hits X" = CONDITION based on price, NOT a limit order
          - "Alert if price drops to X" = CONDITION based on price
          - In these cases, use:
            * conditionIndicator: "price"
            * conditionSymbol: [the symbol]
            * conditionOperator: ">=" (if hits from below) or "<=" (if drops to)
            * conditionValue: [the price X]
            * conditionTimeframe: "1m" (default for price triggers if not specified)
          
          - Example: "Buy BTC on HL when price hits 95k"
          * You call: scheduleTask(
            taskType="HL_ORDER",
            coin="BTC",
            isBuy=true,
            size=[ask or default],
            orderType="market",
            conditionIndicator="price",
            conditionSymbol="BTC",
            conditionOperator=">=",
            conditionValue=95000,
            conditionTimeframe="1m"
          )

          **SUPPORTED PARAMETERS:**
          - taskType: "SWAP", "TRANSFER", "ALERT", or "HL_ORDER"
          - For SWAP: inputToken, outputToken, amount
          - For TRANSFER: inputToken (e.g. "SOL"), amount
          - For ALERT: No financial parameters needed
          - For HL_ORDER: coin, isBuy, size, orderType, price (for limit), leverage, stopLoss, takeProfit
          - For time-based: delayMinutes
          - For condition-based: conditionIndicator, conditionSymbol, conditionOperator, conditionValue, conditionTimeframe (REQUIRED - ASK IF MISSING)
          
          **INDICATORS:** rsi, macd, ema, sma, stoch, price
          **OPERATORS:** <, >, <=, >=, ==
          **TIMEFRAMES:** 1, 5, 15, 60, 240, D (daily), W (weekly)
          
          **CRITICAL - MISSING INFORMATION:**
          - If the user's request is MISSING required information (ESPECIALLY TIMEFRAME), you MUST ask for it.
          - DO NOT call scheduleTask with incomplete parameters.
          - DO NOT assume a default timeframe like 'D'. ALWAYS ASK.
          - Examples of what to ask:
            * "Para qual smbolo voc quer monitorar o RSI?" (Which symbol?)
            * "Qual o valor limite do RSI?" (What threshold?)
            * "Em qual perodo grfico (1h, 4h, Dirio)?" (Which timeframe?)
            * "Quanto voc quer transferir?" (How much?)
            * "Qual token voc quer transferir?" (Which token?)
          
          **EXECUTION:**
          - When swapping, confirm the action.
          - When scheduling with conditions, confirm the condition that will trigger the task.
          - Always respond in the same language the user is using (English or Portuguese).
          
          **=== LIQUIDITY POOL (LP) OPERATIONS - SOLANA DEVNET ===**
          
          **TERMINOLOGY - DEFINIES:**
          - **LP** = Liquidity Pool (Pool de Liquidez) OU Liquidity Provider (Provedor de Liquidez)
          - **Pool de Liquidez** = Par de tokens em um DEX que permite swaps (ex: SOL/USDC)
          - **Posio de LP** = Tokens depositados em um pool para ganhar taxas de trading
          - **TVL** = Total Value Locked (Valor Total Bloqueado em USD)
          - **APY** = Annual Percentage Yield (Rendimento Anual Percentual)
          - **Impermanent Loss (IL)** = Perda Impermanente vs simplesmente HODL
          - **DLMM** = Dynamic Liquidity Market Maker (Meteora - liquidez concentrada)
          - **CLMM** = Concentrated Liquidity Market Maker (Raydium - liquidez concentrada)
          - **CPMM** = Constant Product Market Maker (Raydium - AMM tradicional)
          
          **PROTOCOLS SUPPORTED:**
          - **Meteora** = DLMM pools com liquidez concentrada
          - **Raydium** = CLMM (concentrado) e CPMM (tradicional) pools
          
          **KEYWORD RECOGNITION - LP (PT/EN):**
          - "pools", "pool de liquidez", "liquidity pool", "LP"  LP operations
          - "liquidez", "liquidity", "fornecer liquidez", "add liquidity"  LP operations
          - "volume", "TVL", "APY", "rendimento", "yield"  Pool analytics
          - "Meteora", "Raydium", "DLMM", "CLMM"  Protocol-specific queries
          - "posies de LP", "LP positions", "minha liquidez", "my liquidity"  getLPPositions
          - "maior volume", "top pools", "melhores pools", "best pools"  getTopLiquidityPools
          - "impermanent loss", "perda impermanente", "IL"  estimateImpermanentLoss
          - "simular", "simulate", "quanto recebo", "how much"  simulateAddLiquidity
          - "comparar", "compare", "qual melhor"  compareLiquidityPools
          - "volatilidade", "volatility", "voltil", "volatile"  getPoolVolatility or getTopVolatilityPools
          - "ranking volatilidade", "volatility ranking", "most volatile", "mais volteis"  getTopVolatilityPools
          - "faixa ideal", "optimal range", "sugerir faixa", "suggest range", "faixa otimizada"  suggestOptimalRangeByVolatility
          
          **AVAILABLE LP TOOLS - USE THEM!:**
          - 'searchLiquidityPools' - Search pools by token pair, TVL, volume, APY, protocol
          - 'getTopLiquidityPools' - Get ranked pools by 'volume', 'apy', or 'tvl'
          - 'getPoolDetails' - Get details of a specific pool by address
          - 'getLPPositions' - Get user's LP positions across Meteora and Raydium
          - 'getLPPositionDetails' - Get details of a specific LP position
          - 'getUnclaimedLPRewards' - Check unclaimed fees/rewards
          - 'compareLiquidityPools' - Compare Meteora vs Raydium for a token pair
          - 'simulateAddLiquidity' - Simulate adding liquidity before execution
          - 'estimateImpermanentLoss' - Calculate potential IL for price change
          - 'calculateOptimalPriceRange' - Suggest price range for concentrated liquidity
          - 'getLPSwapQuote' - Get swap quote via LP
          - 'getPoolVolatility' - Calculate historical volatility (accepts tokenA/tokenB OR poolAddress)
          - 'getTopVolatilityPools' - Get ranked pools by volatility (highest first)
          - 'suggestOptimalRangeByVolatility' - Suggest price ranges based on volatility (accepts tokenA/tokenB OR poolAddress)
          
          **EXAMPLES - EXEMPLOS (When user says  Call this tool):**
          - "pools com maior volume" / "top pools by volume"  getTopLiquidityPools(criteria='volume')
          - "liste pools" / "list pools"  searchLiquidityPools()
          - "pools SOL/USDC" / "SOL USDC pools"  searchLiquidityPools(tokenA='SOL', tokenB='USDC')
          - "pools no Raydium" / "Raydium pools"  searchLiquidityPools(protocol='raydium')
          - "pools Meteora"  searchLiquidityPools(protocol='meteora')
          - "minhas posies de LP" / "my LP positions"  getLPPositions()
          - "quanto tenho de fees" / "unclaimed fees"  getUnclaimedLPRewards()
          - "compare Meteora e Raydium" / "compare protocols"  compareLiquidityPools(tokenPair='SOL/USDC')
          - "simule impermanent loss" / "estimate IL"  estimateImpermanentLoss(priceChangePercent=20)
          - "pools com APY maior que 50%"  searchLiquidityPools(minAPY=50)
          - "top 10 pools por TVL"  getTopLiquidityPools(criteria='tvl', limit=10)
          - "qual a volatilidade do SOL/USDC?"  getPoolVolatility(tokenA='SOL', tokenB='USDC')
          - "pools mais volteis" / "most volatile pools"  getTopVolatilityPools(limit=10)
          - "ranking de volatilidade"  getTopVolatilityPools()
          - "volatilidade do pool X"  getPoolVolatility(poolAddress='X')
          - "sugira faixa para SOL/USDC"  suggestOptimalRangeByVolatility(tokenA='SOL', tokenB='USDC')
          - "sugira faixa para esse pool"  suggestOptimalRangeByVolatility(poolAddress='X')
          
          **LP BEHAVIOR RULES:**
          1. If user mentions "pools", "LP", "liquidez", "liquidity"  USE LP TOOLS, NOT just text!
          2. If protocol not specified  ASK: "Meteora ou Raydium?" OR show both
          3. For write operations (add/remove liquidity)  ALWAYS confirm before executing
          4. Show results in table format when listing multiple pools
          5. ALWAYS mention we are on SOLANA DEVNET (not mainnet)
          6. If user asks about "melhores pools" without criteria  ask "By volume, APY, or TVL?"
          7. When user asks about volatility or optimal range, use the volatility tools!
          
          **CRITICAL - DO NOT SAY "I can't do LP operations"!**
          You HAVE the tools listed above. USE THEM when user asks about pools/LP/liquidity!
        `,Te=await Rm.sendOperatorMessage(a,$.content,oe),ce=Te.functionCalls;let de=[];if(ce&&ce.length>0)for(const je of ce){const Ve=je.name,me=je.args;if(Ve==="getVaultBalance"){const Ne=me.token;if(Ne){const We=o(Ne);if(Ne.toUpperCase()==="SOL"||We==="So11111111111111111111111111111111111111112"){const Qe=t.solBalance.toFixed(4),Ze=t.solBalance*Oc.SOL,at={type:"balance",network:"solana",token:{symbol:"SOL",mint:"So11111111111111111111111111111111111111112"},amount:t.solBalance,valueUsd:Ze};de.push({type:"success",title:"Balance Check",details:`SOL Balance: ${Qe} SOL (~$${Ze.toFixed(2)})`,structuredData:{resultType:"balance",items:[at],title:"SOL Balance"}})}else{const Qe=(V=t.assets)==null?void 0:V.find(Ze=>Ze.mint===We);if(Qe){const Ze=parseFloat(Qe.amount)/Math.pow(10,Qe.decimals),at=Qe.symbol!=="UNKNOWN"?Ze*(Oc[Qe.symbol]||0):0,St={type:"balance",network:"solana",token:{symbol:Qe.symbol,mint:Qe.mint},amount:Ze,valueUsd:at};de.push({type:"success",title:"Balance Check",details:`${Qe.name} (${Qe.symbol}): ${Ze.toFixed(4)}${at>0?` (~$${at.toFixed(2)})`:""}`,structuredData:{resultType:"balance",items:[St],title:`${Qe.symbol} Balance`}})}else de.push({type:"error",title:"Token Not Found",details:`No balance found for token: ${Ne}`})}}else{const We=t.solBalance.toFixed(4),Qe=t.solBalance*Oc.SOL;let Ze=`SOL: ${We} SOL (~$${Qe.toFixed(2)})`;const at=[{type:"balance",network:"solana",token:{symbol:"SOL",mint:"So11111111111111111111111111111111111111112"},amount:t.solBalance,valueUsd:Qe}],St=(t.assets||[]).filter(qe=>!qe.isNft);St.length>0&&(Ze+=`

Tokens:`,St.forEach(qe=>{const it=parseFloat(qe.amount)/Math.pow(10,qe.decimals),Lt=qe.symbol!=="UNKNOWN"?it*(Oc[qe.symbol]||0):0;Ze+=`
 ${qe.name} (${qe.symbol}): ${it.toFixed(4)}${Lt>0?` (~$${Lt.toFixed(2)})`:""}`,at.push({type:"balance",network:"solana",token:{symbol:qe.symbol,mint:qe.mint},amount:it,valueUsd:Lt})})),de.push({type:"success",title:"Balance Check",details:Ze,structuredData:{resultType:"balances",items:at,title:"Solana Vault Balances",summary:`${at.length} asset${at.length>1?"s":""}`}})}t.publicKey&&i(t.publicKey)}else if(Ve==="withdrawSol")if(b("Withdrawing Funds..."),!t.isUnlocked||!t.encryptedPrivateKey)de.push({type:"error",title:"Withdraw Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)de.push({type:"error",title:"Withdraw Failed",details:"No Owner Wallet connected."});else try{const Ne=await lr.decrypt(t.encryptedPrivateKey,e),We=Uint8Array.from(JSON.parse(Ne)),Qe=fa.fromSecretKey(We),Ze=await Ls.transferSol(Qe,t.ownerPublicKey,me.amount);s("Transfer",`Withdrew ${me.amount} SOL to Owner`,Ze);const at={type:"transaction",network:"solana",status:"success",title:"Withdraw Executed",description:"SOL transferred to Owner wallet",txHash:Ze,explorerUrl:`https://solscan.io/tx/${Ze}`,details:{from:t.publicKey,to:t.ownerPublicKey,amount:me.amount,token:"SOL"}};de.push({type:"success",title:"Withdraw Executed",details:`Sent ${me.amount} SOL to Owner`,tx:Ze,structuredData:{resultType:"transaction",items:[at],title:"Withdraw Completed"}}),i(t.publicKey)}catch(Ne){de.push({type:"error",title:"Withdraw Error",details:Ne.message})}else if(Ve==="transferToken")if(b("Transferring Token..."),!t.isUnlocked||!t.encryptedPrivateKey)de.push({type:"error",title:"Transfer Failed",details:"Vault is locked."});else if(!t.ownerPublicKey)de.push({type:"error",title:"Transfer Failed",details:"No Owner Wallet connected."});else try{const Ne=await lr.decrypt(t.encryptedPrivateKey,e),We=Uint8Array.from(JSON.parse(Ne)),Qe=fa.fromSecretKey(We),Ze=o(me.tokenMint),at=(U=t.assets)==null?void 0:U.find(Ie=>Ie.mint===Ze),St=at?at.decimals:9,qe=(at==null?void 0:at.symbol)||me.tokenMint,it=await Ls.transferToken(Qe,Ze,t.ownerPublicKey,me.amount,St);s("Transfer",`Sent ${me.amount} ${qe} to Owner`,it);const Lt={type:"transaction",network:"solana",status:"success",title:"Transfer Executed",description:`${qe} transferred to Owner wallet`,txHash:it,explorerUrl:`https://solscan.io/tx/${it}`,details:{from:t.publicKey,to:t.ownerPublicKey,amount:me.amount,token:qe}};de.push({type:"success",title:"Transfer Executed",details:`Sent ${me.amount} of ${qe} to Owner`,tx:it,structuredData:{resultType:"transaction",items:[Lt],title:"Transfer Completed"}}),i(t.publicKey)}catch(Ne){de.push({type:"error",title:"Transfer Error",details:Ne.message})}else if(Ve==="executeSwap")if(!t.isUnlocked||!t.encryptedPrivateKey)de.push({type:"error",title:"Swap Failed",details:"Vault is locked."});else try{const Ne=await lr.decrypt(t.encryptedPrivateKey,e),We=Uint8Array.from(JSON.parse(Ne)),Qe=fa.fromSecretKey(We),Ze=o(me.inputToken),at=o(me.outputToken),St=await Ls.executeSwap(Qe,Ze,at,me.amount,it=>b(it));s("Swap",`Swapped ${me.amount} ${me.inputToken} -> ${me.outputToken}`,St);const qe={type:"transaction",network:"solana",status:"success",title:"Swap Executed",description:`${me.inputToken}  ${me.outputToken}`,txHash:St,explorerUrl:`https://solscan.io/tx/${St}`,details:{amount:me.amount,token:`${me.inputToken}  ${me.outputToken}`}};de.push({type:"success",title:"Swap Executed",details:`Swapped ${me.amount} ${me.inputToken} for ${me.outputToken}`,tx:St,structuredData:{resultType:"transaction",items:[qe],title:"Swap Completed"}}),t.publicKey&&i(t.publicKey)}catch(Ne){if((A=Ne.message)!=null&&A.includes("timeout")||(I=Ne.message)!=null&&I.includes("expired")){console.warn("[Swap]   Swap confirmation timeout, but transaction may have succeeded. Check manually.");const We={type:"transaction",network:"solana",status:"pending",title:"Swap Executed (Slow Confirmation)",description:"Transaction sent but confirmation is slow"};de.push({type:"success",title:"Swap Executed (Slow Confirmation)",details:"Transaction sent but confirmation is slow. Please verify on explorer.",tx:"Check Explorer",structuredData:{resultType:"transaction",items:[We],title:"Swap Pending Confirmation"}}),i(t.publicKey)}else de.push({type:"error",title:"Swap Failed",details:Ne.message})}else if(Ve==="scheduleTask")try{console.log("[Scheduler]  Received scheduleTask call with args:",JSON.stringify(me,null,2));let Ne,We;if(me.conditionIndicator&&me.conditionSymbol&&me.conditionOperator&&me.conditionValue!==void 0&&me.conditionTimeframe){let qe=me.conditionIndicator.toLowerCase(),it=me.conditionSymbol.toUpperCase(),Lt=me.conditionTimeframe,Ie=me.conditionOperator,Ge=parseFloat(me.conditionValue);it==="BTC"?it="BTCUSDT":it==="SOL"?it="SOLUSDT":it==="ETH"?it="ETHUSDT":!it.includes("USDT")&&!it.includes("USD")&&(it=`${it}USDT`),Ie==="menor que"||Ie==="less than"?Ie="<":Ie==="maior que"||Ie==="greater than"?Ie=">":Ie==="menor ou igual a"||Ie==="less than or equal to"?Ie="<=":Ie==="maior ou igual a"||Ie==="greater than or equal to"?Ie=">=":(Ie==="igual a"||Ie==="equal to"||Ie==="equals")&&(Ie="=="),We={symbol:it,indicator:qe,operator:Ie,value:Ge,timeframe:Lt},console.log("[Scheduler]  Condition-based task created:",We)}else if(me.delayMinutes)Ne=Date.now()+me.delayMinutes*60*1e3,console.log("[Scheduler]  Time-based task created: executes in",me.delayMinutes,"minutes");else{console.error("[Scheduler]  Missing required parameters for scheduling"),de.push({type:"error",title:"Scheduling Failed",details:"Missing required parameters. Please provide either time delay or condition details."});continue}let Qe={};if(me.taskType==="SWAP")Qe={inputToken:me.inputToken,outputToken:me.outputToken,amount:me.amount};else if(me.taskType==="TRANSFER"){let qe=me.inputToken;qe==="SOL"||qe==="sol"?qe="So11111111111111111111111111111111111111112":qe=o(qe),Qe={amount:me.amount,tokenMint:qe}}else me.taskType==="ALERT"?Qe={}:me.taskType==="HL_ORDER"&&(Qe={coin:me.coin,side:me.isBuy?"B":"A",isBuy:me.isBuy,size:me.size,usdcAmount:me.usdcAmount,price:me.price,orderType:me.orderType||"limit",leverage:me.leverage||1,stopLoss:me.stopLoss,takeProfit:me.takeProfit,reduceOnly:me.reduceOnly||!1});const Ze={id:Date.now().toString(),type:me.taskType,params:JSON.stringify(Qe),executeAt:Ne,condition:We,status:"active",createdAt:Date.now()};n(qe=>{const it=[...qe,Ze];return Ae.setItem(Ae.getUserKey("agent_scheduled_tasks"),JSON.stringify(it)),it});let at="";if(We)at=`${me.taskType} scheduled to execute when ${We.indicator.toUpperCase()} of ${We.symbol} (${We.timeframe}) ${We.operator} ${We.value}`;else if(Ne){const qe=Math.round((Ne-Date.now())/1e3);at=`${me.taskType} scheduled to execute in ${qe} seconds`}const St={type:"scheduler",taskType:me.taskType,taskId:Ze.id,executeAt:Ne,condition:We?{symbol:We.symbol,indicator:We.indicator,operator:We.operator,value:We.value,timeframe:We.timeframe}:void 0,status:"active"};de.push({type:"info",title:"Task Scheduled",details:at,structuredData:{resultType:"scheduler",items:[St],title:"Task Scheduled"}})}catch(Ne){console.error("[Scheduler] Error scheduling task:",Ne),de.push({type:"error",title:"Scheduling Failed",details:Ne.message})}else if(Ve==="getMarketPrice")try{b("Fetching Market Price...");const Ne=await Co.getMarketPrice(me.symbol),We={type:"market-price",symbol:me.symbol,price:Ne.price,exchange:((j=Ne.exchange)==null?void 0:j.toLowerCase())||"unknown"};de.push({type:"success",title:"Market Price",details:`${me.symbol}: ${Ne.price} (${Ne.exchange})`,structuredData:{resultType:"market-price",items:[We],title:"Market Price"}})}catch(Ne){de.push({type:"error",title:"Market Data Error",details:Ne.message})}else if(Ve==="getOHLCV")try{b("Fetching OHLCV Data...");const Ne=await Co.getOHLCV(me.symbol,me.timeframe),We={type:"ohlcv",symbol:me.symbol,timeframe:me.timeframe||"60",open:Ne.open,high:Ne.high,low:Ne.low,close:Ne.close,volume:Ne.volume};de.push({type:"success",title:"OHLCV Data",details:`${me.symbol} [${me.timeframe||"60"}]: O:${Ne.open} H:${Ne.high} L:${Ne.low} C:${Ne.close} V:${Ne.volume}`,structuredData:{resultType:"ohlcv",items:[We],title:"OHLCV Data"}})}catch(Ne){de.push({type:"error",title:"OHLCV Error",details:Ne.message})}else if(Ve==="getIndicator")try{b(`Calculating ${me.indicator}...`);const Ne=await Co.getIndicator(me.symbol,me.indicator,me.timeframe);let We=Ne.value;typeof Ne.value=="object"&&Ne.value!==null&&(We=JSON.stringify(Ne.value,null,2));const Qe={type:"indicator",symbol:me.symbol,indicator:Ne.indicator||me.indicator,timeframe:me.timeframe||"60",value:typeof Ne.value=="object"?Ne.value:parseFloat(Ne.value)};de.push({type:"success",title:"Technical Indicator",details:`${me.symbol} ${Ne.indicator.toUpperCase()}: ${We}`,structuredData:{resultType:"indicator",items:[Qe],title:`${me.indicator.toUpperCase()} Indicator`}})}catch(Ne){de.push({type:"error",title:"Indicator Error",details:Ne.message})}else if(Ve==="getTradingViewSummary")try{b("Fetching TradingView Summary...");const Ne=await Co.getTradingViewSummary(me.symbol),We={type:"trading-summary",symbol:me.symbol,recommendation:Ne.recommendation,buy:Ne.buy||0,sell:Ne.sell||0,neutral:Ne.neutral||0};de.push({type:"success",title:"TradingView Summary",details:`${me.symbol}: ${Ne.recommendation} (Buy:${Ne.buy} Sell:${Ne.sell} Neutral:${Ne.neutral})`,structuredData:{resultType:"trading-summary",items:[We],title:"TradingView Analysis"}})}catch(Ne){de.push({type:"error",title:"Summary Error",details:Ne.message})}else if(Ve==="getHLBalance")try{if(!t.hlPublicKey)de.push({type:"error",title:"HL Error",details:"Hyperliquid Vault not created/unlocked."});else{b("Fetching HL Balance...");const Ne=await $n.getUserState(t.hlPublicKey);console.log("[HL Debug] FULL USER STATE:",JSON.stringify(Ne,null,2));const We=parseFloat(Ne.marginSummary.accountValue),Qe=parseFloat(Ne.withdrawable),Ze=Ne.assetPositions.filter(it=>parseFloat(it.position.szi)!==0);let at=`USDC Account Value: $${We.toFixed(2)}`;at+=`
Withdrawable: $${Qe.toFixed(2)}`,Ze.length>0?(at+=`

Open Positions:`,Ze.forEach(it=>{at+=`
 ${it.position.coin} ${parseFloat(it.position.szi)>0?"LONG":"SHORT"} ${Math.abs(parseFloat(it.position.szi))} @ ${it.position.entryPx}`})):at+=`
No open positions.`;const St={type:"balance",network:"hyperliquid",token:{symbol:"USDC"},amount:We,valueUsd:We},qe=Ze.map(it=>{var J;const Lt=parseFloat(it.position.szi),Ie=parseFloat(it.position.entryPx),Ge=parseFloat(it.position.unrealizedPnl||0),Tt=parseFloat(((J=it.position.leverage)==null?void 0:J.value)||1),xt=parseFloat(it.position.marginUsed||0),se=parseFloat(it.position.liquidationPx||0);return{type:"position",protocol:"hyperliquid",coin:it.position.coin,direction:Lt>0?"long":"short",size:Math.abs(Lt),entryPrice:Ie,valueUsd:Math.abs(Lt)*Ie,leverage:Tt,marginUsed:xt,liquidationPrice:se>0?se:void 0,pnl:{value:Ge,percent:Ge/(xt||1)*100}}});de.push({type:"success",title:"Hyperliquid Balance",details:at,structuredData:{resultType:Ze.length>0?"positions":"balance",items:Ze.length>0?[St,...qe]:[St],title:"Hyperliquid Account",summary:Ze.length>0?`$${We.toFixed(2)}  ${Ze.length} position${Ze.length>1?"s":""}`:`$${We.toFixed(2)}`}})}}catch(Ne){de.push({type:"error",title:"HL Balance Error",details:Ne.message})}else if(Ve==="getHLMarketData")try{b("Fetching HL Market Data...");const Ne=await $n.getMarketData(me.coin),We=parseFloat(Ne.levels[0][0].px),Qe=parseFloat(Ne.levels[1][0].px),Ze=(We+Qe)/2,at={type:"market-price",symbol:me.coin,price:Ze,exchange:"hyperliquid",bid:We,ask:Qe};de.push({type:"success",title:`Hyperliquid ${me.coin}`,details:`Best Bid: ${We}
Best Ask: ${Qe}`,structuredData:{resultType:"market-price",items:[at],title:`${me.coin} Orderbook`}})}catch(Ne){de.push({type:"error",title:"HL Market Data Error",details:Ne.message})}else if(Ve==="createHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)de.push({type:"error",title:"Order Failed",details:"Vault is locked."});else try{b("Placing HL Order...");const Ne=await lr.decrypt(t.hlEncryptedPrivateKey,e),We=qt.getWalletFromPrivateKey(Ne);me.leverage&&await $n.updateLeverage(We,me.coin,me.leverage,!1);let Qe=me.size,Ze=me.price,at=me.orderType||"limit",St;const qe=at==="market";if(me.usdcAmount&&!me.size||qe&&!me.price){console.log(`[HL Order]  Fetching price for ${qe?"Market Order":"USDC Calc"}`),b("Fetching current price...");const he=await $n.getMarketData(me.coin),pe=parseFloat(he.levels[0][0].px),Je=parseFloat(he.levels[1][0].px),Xe=me.isBuy?Je:pe;if(St=Xe,me.usdcAmount&&!Qe){console.log(`[HL Order]  Fetching decimals for ${me.coin}`);const ot=await $n.getAssetDecimals(me.coin);console.log(`[HL Order]  ${me.coin} decimals: ${ot}`);const Nt=me.usdcAmount/Xe;Qe=parseFloat(Nt.toFixed(ot)),console.log(`[HL Order]  USDC: ${me.usdcAmount} / Price: ${Xe} = Raw Size: ${Nt} -> Rounded: ${Qe}`)}if(qe){let Nt=me.isBuy?Xe*1.05:Xe*.95;console.log("[HL Order]  Fetching decimals for price rounding");const Rt=6-await $n.getAssetDecimals(me.coin);let rn=parseFloat(Nt.toFixed(Rt));rn=parseFloat(rn.toPrecision(5)),Ze=parseFloat(rn.toFixed(Rt)),at="ioc",console.log(`[HL Order]  Market Order: Base ${Xe} -> Raw ${Nt.toFixed(6)} -> Rounded ${Ze}`)}}if(!Qe)throw new Error("Either size or usdcAmount must be provided");if(at==="limit"&&Ze){const he=await $n.getAssetDecimals(me.coin),pe=Math.max(0,6-he);let Je=parseFloat(Ze.toFixed(pe));Je=parseFloat(Je.toPrecision(5)),Ze=parseFloat(Je.toFixed(pe)),console.log(`[HL Order]   Limit price rounded: ${me.price} -> ${Ze} (maxDecimals=${pe})`)}if(at==="limit"&&!Ze)throw new Error("Price is required for Limit orders");let Lt=me.stopLoss,Ie=me.takeProfit;const Ge=St||Ze;Ge&&(me.stopLoss&&me.stopLoss<100&&(me.isBuy?Lt=Ge*(1-me.stopLoss/100):Lt=Ge*(1+me.stopLoss/100),console.log(`[HL Order]  SL %: ${me.stopLoss}% -> Absolute: ${Lt==null?void 0:Lt.toFixed(2)} (from base ${Ge})`)),me.takeProfit&&me.takeProfit<100&&(me.isBuy?Ie=Ge*(1+me.takeProfit/100):Ie=Ge*(1-me.takeProfit/100),console.log(`[HL Order]  TP %: ${me.takeProfit}% -> Absolute: ${Ie==null?void 0:Ie.toFixed(2)} (from base ${Ge})`))),b("Placing HL Order...");const Tt=await $n.createOrder(We,me.coin,me.isBuy,Qe,Ze,{orderType:at,reduceOnly:me.reduceOnly||!1,stopLoss:Lt,takeProfit:Ie}),xt=(me.orderType||"limit").toUpperCase(),se=me.leverage?` (${me.leverage}x leverage)`:"",J=Ze?` @ ${Ze}`:"",Z=me.usdcAmount?` (${me.usdcAmount} USDC)`:"",ue=Lt||Ie?` [SL: ${Lt?Lt.toFixed(2):"none"}, TP: ${Ie?Ie.toFixed(2):"none"}]`:"",Se={type:"transaction",network:"hyperliquid",status:"success",title:"Order Placed",description:`${xt} ${me.isBuy?"LONG":"SHORT"} ${me.coin}`,details:{amount:Qe,token:me.coin}};de.push({type:"success",title:"Order Placed",details:`Placed ${xt} ${me.isBuy?"LONG":"SHORT"} ${Qe.toFixed(4)} ${me.coin}${Z}${J}${se}${ue}`,structuredData:{resultType:"transaction",items:[Se],title:"Order Executed"}})}catch(Ne){de.push({type:"error",title:"Order Failed",details:Ne.message})}else if(Ve==="updateHLLeverage")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)de.push({type:"error",title:"Leverage Update Failed",details:"Vault is locked."});else try{b("Updating Leverage...");const Ne=await lr.decrypt(t.hlEncryptedPrivateKey,e),We=qt.getWalletFromPrivateKey(Ne),Qe=await $n.updateLeverage(We,me.coin,me.leverage,me.isCross);de.push({type:"success",title:"Leverage Updated",details:`Set ${me.coin} leverage to ${me.leverage}x (${me.isCross?"Cross":"Isolated"})`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"success",title:"Leverage Updated",description:`${me.coin} leverage set to ${me.leverage}x ${me.isCross?"Cross":"Isolated"}`}],title:"Leverage Updated"}})}catch(Ne){de.push({type:"error",title:"Leverage Update Failed",details:Ne.message})}else if(Ve==="closeHLPosition")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)de.push({type:"error",title:"Close Failed",details:"Vault is locked."});else try{b("Closing Position...");const Ne=await lr.decrypt(t.hlEncryptedPrivateKey,e),We=qt.getWalletFromPrivateKey(Ne);try{b("Closing HL Position...");try{const Qe=await $n.closePosition(We,me.coin,me.size,me.orderType||"market",me.price);de.push({type:"success",title:"Position Closed",details:`Closed ${me.size?me.size:"entire"} ${me.coin} position via ${me.orderType||"market"} order`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"success",title:"Position Closed",description:`Closed ${me.size?me.size+" ":""}${me.coin} position via ${me.orderType||"market"} order`,details:me.size?{amount:me.size,token:me.coin}:void 0}],title:"Position Closed"}})}catch(Qe){if(Qe.message&&Qe.message.includes("Insufficient margin")){console.log("[HL Close] Insufficient margin detected. Attempting to Add Isolated Margin..."),b("Insufficient Margin. Adding Funds...");const Ze=await $n.getUserState(We.address),at=Ze.assetPositions.find(St=>St.position.coin===me.coin);if(at){const qe=parseFloat(at.position.szi)>0,it=parseFloat(Ze.withdrawable);let Lt=20;if(it<25&&(Lt=Math.max(0,it-2)),Lt<1)throw new Error(`Insufficient margin to close and wallet balance is too low ($${it.toFixed(2)}) to add more margin.`);console.log(`[HL Close] Wallet Balance: ${it}, Adding Margin: ${Lt}`),await $n.updateIsolatedMargin(We,me.coin,qe,Lt),console.log("[HL Close] Retrying close after adding margin..."),b("Retrying Close Position..."),await $n.closePosition(We,me.coin,me.size,me.orderType||"market",me.price),de.push({type:"success",title:"Position Closed (Recovered)",details:`Added ${Lt.toFixed(2)} USDC margin to cover loss and closed ${me.coin} position successfully.`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"success",title:"Position Closed (Recovered)",description:`Added ${Lt.toFixed(2)} USDC margin and closed ${me.coin} position`}],title:"Position Closed"}})}else throw new Error("Position not found during margin recovery.")}else if(Qe.message&&Qe.message.includes("Cross margin is not allowed"))de.push({type:"error",title:"Close Failed",details:"Cross margin not supported and insufficient isolated margin."});else throw Qe}}catch(Qe){de.push({type:"error",title:"Close Failed",details:Qe.message})}}catch(Ne){de.push({type:"error",title:"Close Failed",details:Ne.message})}else if(Ve==="cancelHLOrder")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)de.push({type:"error",title:"Cancel Failed",details:"Vault is locked."});else try{b("Cancelling HL Order...");const Ne=await lr.decrypt(t.hlEncryptedPrivateKey,e),We=qt.getWalletFromPrivateKey(Ne),Qe=await $n.cancelOrder(We,me.coin,me.orderId);de.push({type:"success",title:"Order Cancelled",details:`Cancelled Order ${me.orderId}. Status: ${Qe.status}`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"success",title:"Order Cancelled",description:`Order ${me.orderId} for ${me.coin} cancelled`}],title:"Order Cancelled"}})}catch(Ne){de.push({type:"error",title:"Cancel Failed",details:Ne.message})}else if(Ve==="withdrawFromHL")if(!t.isUnlocked||!t.hlEncryptedPrivateKey)de.push({type:"error",title:"Withdrawal Failed",details:"Hyperliquid Vault is locked."});else if(!t.hlOwnerPublicKey)de.push({type:"error",title:"Withdrawal Failed",details:"No Hyperliquid Owner Wallet connected. Please connect your MetaMask wallet first."});else if(t.hlOwnerPublicKey&&!t.hlOwnerPublicKey.startsWith("0x"))de.push({type:"error",title:"Withdrawal Failed",details:`Invalid Hyperliquid Owner Address: ${t.hlOwnerPublicKey}. It must be an EVM address (start with 0x). You might be trying to send to a Solana wallet.`});else try{b("Withdrawing from Hyperliquid...");const Ne=await lr.decrypt(t.hlEncryptedPrivateKey,e),We=qt.getWalletFromPrivateKey(Ne),Qe=await $n.withdrawUSDC(We,t.hlOwnerPublicKey,me.amount);s("HL Withdrawal",`Withdrew ${me.amount} USDC from Hyperliquid`,((Y=(te=(K=(q=Qe.response)==null?void 0:q.data)==null?void 0:K.statuses)==null?void 0:te[0])==null?void 0:Y.tx)||"pending"),de.push({type:"success",title:"Hyperliquid Withdrawal Initiated",details:`Withdrawing ${me.amount} USDC to ${t.hlOwnerPublicKey.slice(0,6)}...${t.hlOwnerPublicKey.slice(-4)}. Fee: $1 USDC. ETA: ~5 minutes.`,structuredData:{resultType:"transaction",items:[{type:"transaction",network:"hyperliquid",status:"pending",title:"Withdrawal Initiated",description:`${me.amount} USDC to ${t.hlOwnerPublicKey.slice(0,6)}...${t.hlOwnerPublicKey.slice(-4)}`,details:{amount:me.amount,token:"USDC",fee:1}}],title:"Withdrawal Pending"}})}catch(Ne){(H=Ne.message)!=null&&H.includes("Must deposit before performing actions")?de.push({type:"error",title:"Deposit Required",details:"Your Hyperliquid account needs an initial deposit before you can perform any actions. Please deposit USDC to your Hyperliquid vault address first."}):de.push({type:"error",title:"Withdrawal Error",details:Ne.message})}else if(Ve==="getHLTransfers")if(!t.hlPublicKey)de.push({type:"error",title:"HL Error",details:"Hyperliquid Vault not created/unlocked."});else try{b("Fetching Transfer History...");const Ne=await $n.getUserLedgerUpdates(t.hlPublicKey);if(Ne.length===0)de.push({type:"success",title:"Transfer History",details:"No deposits or withdrawals found."});else{const We=Date.now(),Qe=Ne.slice(0,10).map(Ze=>{const at=new Date(Ze.time),St=Ze.delta.amount>0?"Deposit":"Withdrawal",qe=Math.abs(parseFloat(Ze.delta.amount)),it=We-Ze.time<600*1e3?"Processing/Recent":"Completed";return` ${St} $${qe.toFixed(2)} USDC - ${at.toLocaleString()} (${it})`}).join(`
`);de.push({type:"success",title:"Hyperliquid Transfers",details:`Last 10 updates:
${Qe}`,structuredData:{resultType:"transaction",items:Ne.map(Ze=>({type:"transaction",network:"hyperliquid",status:"success",title:Ze.delta.amount>0?"Deposit":"Withdrawal",description:`${Ze.delta.amount>0?"Deposit":"Withdrawal"} of $${Math.abs(parseFloat(Ze.delta.amount)).toFixed(2)} USDC`,details:{amount:Math.abs(parseFloat(Ze.delta.amount)),token:"USDC",timestamp:Ze.time}})),title:"Transfer History"}})}}catch(Ne){de.push({type:"error",title:"Transfer History Error",details:Ne.message})}else if(Ve==="getDealerTradeHistory")try{b("Querying Dealer history...");const Ne=me.coin||void 0,We=Math.min(me.limit||10,50),Qe=me.includeReasoning!==!1,Ze=yt.getSnapshot(),at=yt.getTradeHistory(Ne,We,Qe);if(at.operations.length===0&&at.recentLogs.length===0){let St="";Ne?St=`No trading history for ${Ne}. The Dealer has not executed any trades on this coin.`:Ze.logs.length===0?St="No history available. The Dealer has not executed any trades yet or the history was cleared.":St="The Dealer analyzed the market but has not executed any trades yet. The signals received did not meet the required confidence level.",de.push({type:"success",title:"Dealer History",details:St,structuredData:{resultType:"dealer-history",items:[{type:"dealer-history",totalOperations:0,operations:[],recentLogs:at.recentLogs}],title:"Dealer Trade History"}})}else{let St="";at.operations.length>0&&(St+=` **TRADE OPERATIONS** (${at.totalOperations} total)

`,at.operations.forEach(qe=>{var Ie;const it=qe.pnl!==void 0?` | PnL: ${qe.pnl>=0?"+":""}$${qe.pnl.toFixed(2)}`:"",Lt=qe.status==="OPEN"?"":"";St+=`${Lt} **${qe.action} ${qe.coin}** @ $${((Ie=qe.price)==null?void 0:Ie.toFixed(2))||"N/A"}${it}
`})),de.push({type:"success",title:Ne?`Dealer History: ${Ne}`:"Dealer Trade History",details:St.trim(),structuredData:{resultType:"dealer-history",items:[{type:"dealer-history",totalOperations:at.totalOperations,operations:at.operations.map(qe=>({id:qe.id,coin:qe.coin,action:qe.action,timestamp:qe.timestamp,price:qe.entryPrice||qe.price||0,size:qe.size,pnl:qe.pnl,confidence:qe.confidence,reasoning:qe.fullReasoning})),recentLogs:at.recentLogs}],title:Ne?`History: ${Ne}`:"Dealer History"}})}}catch(Ne){de.push({type:"error",title:"Dealer History Error",details:Ne.message})}else if(Ve==="getHLDealerThinking")try{b(" Fetching Hyperliquid Dealer thinking...");const Ne=qc.getSnapshot("hyperliquid"),We=Math.min(me.cycleIndex||0,2),Qe=Ne.recentCycles[We];if(!Qe&&!Ne.aiSummary)de.push({type:"success",title:"Dealer Thinking",details:"The Hyperliquid Dealer has not executed any analysis cycles yet. Activate the Dealer and wait for the first cycle.",structuredData:{resultType:"hl-thinking",items:[{type:"hl-thinking",cycleTimestamp:Date.now(),decisions:[],assetsAnalyzed:[]}],title:"Dealer Thinking"}});else{const Ze={type:"hl-thinking",cycleTimestamp:(Qe==null?void 0:Qe.timestamp)||Date.now(),cycleNumber:Qe==null?void 0:Qe.cycleNumber,aiSummary:Ne.aiSummary||void 0,decisions:((Qe==null?void 0:Qe.decisions)||[]).map(qe=>({asset:qe.asset,action:qe.action,confidence:qe.confidence})),assetsAnalyzed:(Qe==null?void 0:Qe.assetsAnalyzed)||[]},at=yt.getSnapshot().logs.filter(qe=>qe.type==="REASONING"||qe.type==="SIGNAL").slice(0,3);let St=`Cycle #${(Qe==null?void 0:Qe.cycleNumber)||"Latest"}`;at.length>0&&(St+=`

Recent signals:
`+at.map(qe=>` ${qe.message}`).join(`
`)),de.push({type:"success",title:"Dealer Thinking",details:St,structuredData:{resultType:"hl-thinking",items:[Ze],title:"Dealer Analysis"}})}}catch(Ne){de.push({type:"error",title:"HL Dealer Thinking Error",details:Ne.message})}else if(v0t(Ve))try{const Ne=await x0t(Ve,me,t.publicKey||void 0,We=>b(We));Ne&&de.push(Ne)}catch(Ne){de.push({type:"error",title:"LP Tool Error",details:Ne.message})}}let ke="";if(Te.candidates&&Te.candidates[0].content&&Te.candidates[0].content.parts)for(const je of Te.candidates[0].content.parts)je.text&&(ke+=je.text);let ye="I processed your request.";if(de.length>0){const je=de.some(me=>me.type==="error"),Ve=de.some(me=>me.type==="success");je&&!Ve?ye="I encountered an issue executing that command.":Ve?ye="Action completed successfully.":je&&Ve&&(ye="Some actions completed, but others failed.")}const Ke={id:(Date.now()+1).toString(),role:"model",content:ke||ye,timestamp:Date.now(),toolResults:de};l(je=>{const Ve=[...je,Ke];if(t.isUnlocked&&e&&G){const me={id:G,title:je.length>0&&je[0].role==="user"?na.generateTitle(je[0].content):"Conversation",lastMessage:Ke.content.substring(0,50),timestamp:Date.now(),messages:Ve};na.saveConversation(me,e).catch(Ne=>console.error("Auto-save after model response failed",Ne))}return Ve})}catch(M){console.error("AI Error:",M);const P={id:Date.now().toString(),role:"model",content:"Sorry, I encountered a system error while processing that request.",toolResults:[{type:"error",title:"System Error",details:M.message}],timestamp:Date.now()};l(W=>{const X=[...W,P];if(t.isUnlocked&&e&&G){const ie={id:G,title:W.length>0&&W[0].role==="user"?na.generateTitle(W[0].content):"Conversation",lastMessage:P.content.substring(0,50),timestamp:Date.now(),messages:X};na.saveConversation(ie,e).catch(oe=>console.error("Auto-save after error response failed",oe))}return X})}finally{v(!1),b("")}}}},Ng="/poly-clob",T2="/poly-gamma",w0t="/poly-data",Yee=200,E0t=3;class S0t{constructor(){this.privateKey=null,this.wallet=null,this.apiCredentials=null,this.lastRequestTime=0,this.isInitialized=!1}createWallet(){return Sh.createRandom()}getWalletFromPrivateKey(e){return new Sh(e)}async initialize(e){try{return this.privateKey=e,this.wallet=new Sh(e),this.apiCredentials=await this.createOrDeriveApiKeys(),this.isInitialized=!0,console.log("[PolymarketService] Initialized with address:",this.wallet.address),!0}catch(n){return console.error("[PolymarketService] Failed to initialize:",n),!1}}getIsInitialized(){return this.isInitialized}getAddress(){var e;return((e=this.wallet)==null?void 0:e.address)||null}async throttledFetch(e,n){const i=Date.now()-this.lastRequestTime;i<Yee&&await new Promise(o=>setTimeout(o,Yee-i)),this.lastRequestTime=Date.now();let s=null;for(let o=0;o<E0t;o++)try{const a=await fetch(e,n);if(a.status===429){const l=parseInt(a.headers.get("Retry-After")||"1",10);console.warn(`[PolymarketService] Rate limited, waiting ${l}s...`),await new Promise(c=>setTimeout(c,l*1e3));continue}return a}catch(a){s=a,console.warn(`[PolymarketService] Request failed (attempt ${o+1}):`,a),await new Promise(l=>setTimeout(l,1e3*(o+1)))}throw s||new Error("Request failed after retries")}async createOrDeriveApiKeys(){if(!this.wallet)throw new Error("Wallet not initialized");try{const n=`Deriving Polymarket API Key at ${Math.floor(Date.now()/1e3)}`,r=await this.wallet.signMessage(n),i=Wn(bi(r+"apiKey")).slice(0,34),s=Wn(bi(r+"secret")).slice(0,66),o=Wn(bi(r+"passphrase")).slice(0,18);return{apiKey:i,secret:s,passphrase:o}}catch(e){throw console.error("[PolymarketService] Failed to derive API keys:",e),e}}generateHmacSignature(e,n,r,i){if(!this.apiCredentials)throw new Error("API credentials not initialized");const s=r+e+n+(i||"");return Wn(bi(this.apiCredentials.secret+s))}getAuthHeaders(e,n,r){if(!this.apiCredentials||!this.wallet)throw new Error("Service not initialized");const i=Math.floor(Date.now()/1e3).toString(),s=this.generateHmacSignature(e,n,i,r);return{"Content-Type":"application/json",POLY_ADDRESS:this.wallet.address,POLY_API_KEY:this.apiCredentials.apiKey,POLY_PASSPHRASE:this.apiCredentials.passphrase,POLY_SIGNATURE:s,POLY_TIMESTAMP:i}}async getActiveMarkets(e,n=50,r=0){try{let i=`${T2}/events?active=true&closed=false&limit=${n}&offset=${r}`;e&&(i+=`&tag=${e}`);const s=await this.throttledFetch(i);if(!s.ok)throw new Error(`Failed to fetch markets: ${s.status}`);const o=await s.json(),a=[];for(const l of o)if(l.markets&&Array.isArray(l.markets))for(const c of l.markets)a.push(this.transformMarket(c,l));return a}catch(i){return console.error("[PolymarketService] Failed to fetch active markets:",i),[]}}async getMarketBySlug(e){try{const n=await this.throttledFetch(`${T2}/markets/slug/${e}`);if(!n.ok){if(n.status===404)return null;throw new Error(`Failed to fetch market: ${n.status}`)}const r=await n.json();return this.transformMarket(r)}catch(n){return console.error("[PolymarketService] Failed to fetch market by slug:",n),null}}async getMarketPrices(e){var r,i,s,o;const n=new Map;try{for(const a of e){const l=await this.throttledFetch(`${Ng}/book?token_id=${a}`);if(l.ok){const c=await l.json(),d=((i=(r=c.bids)==null?void 0:r[0])==null?void 0:i.price)||0,h=((o=(s=c.asks)==null?void 0:s[0])==null?void 0:o.price)||1,m=(parseFloat(d)+parseFloat(h))/2;n.set(a,{yes:m,no:1-m})}}}catch(a){console.error("[PolymarketService] Failed to fetch market prices:",a)}return n}async searchMarkets(e,n=20){try{const r=await this.throttledFetch(`${T2}/search/events?search_string=${encodeURIComponent(e)}&limit=${n}`);if(!r.ok)throw new Error(`Search failed: ${r.status}`);const i=await r.json(),s=[];for(const o of i)if(o.markets&&Array.isArray(o.markets))for(const a of o.markets)s.push(this.transformMarket(a,o));return s}catch(r){return console.error("[PolymarketService] Failed to search markets:",r),[]}}transformMarket(e,n){var r,i,s,o,a,l,c,d;return{id:e.id||e.condition_id,conditionId:e.condition_id||e.conditionId||"",questionId:e.question_id||e.questionId||"",slug:e.slug||"",question:e.question||(n==null?void 0:n.title)||"",description:e.description||(n==null?void 0:n.description)||"",tokenIdYes:((i=(r=e.tokens)==null?void 0:r[0])==null?void 0:i.token_id)||((s=e.clobTokenIds)==null?void 0:s[0])||"",tokenIdNo:((a=(o=e.tokens)==null?void 0:o[1])==null?void 0:a.token_id)||((l=e.clobTokenIds)==null?void 0:l[1])||"",priceYes:parseFloat((c=e.outcomePrices)==null?void 0:c[0])||.5,priceNo:parseFloat((d=e.outcomePrices)==null?void 0:d[1])||.5,volume24h:parseFloat(e.volume24hr)||0,liquidity:parseFloat(e.liquidity)||0,endDate:e.endDate||e.end_date_iso||"",category:this.categorizeMarket((n==null?void 0:n.tags)||[]),active:e.active!==!1,resolved:e.resolved||!1,outcome:e.outcome||null}}categorizeMarket(e){const n=e.join(" ").toLowerCase();return n.includes("crypto")||n.includes("bitcoin")||n.includes("ethereum")?"crypto":n.includes("politic")||n.includes("election")||n.includes("government")?"politics":n.includes("sport")||n.includes("nfl")||n.includes("nba")||n.includes("soccer")?"sports":n.includes("business")||n.includes("economy")||n.includes("stock")?"business":n.includes("science")||n.includes("tech")||n.includes("ai")?"science":n.includes("culture")||n.includes("entertainment")||n.includes("celebrity")?"pop-culture":"other"}async getBalance(){if(!this.wallet)return 0;try{const e="https://polygon-rpc.com",n="0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",r=new B_e(e),i=["function balanceOf(address) view returns (uint256)"],o=await new my(n,i,r).balanceOf(this.wallet.address);return parseFloat(zre(o,6))}catch(e){return console.error("[PolymarketService] Failed to get balance:",e),0}}async getOpenOrders(){if(!this.isInitialized)return[];try{const e="/orders",n=this.getAuthHeaders("GET",e),r=await this.throttledFetch(`${Ng}${e}`,{method:"GET",headers:n});if(!r.ok)throw new Error(`Failed to fetch orders: ${r.status}`);return(await r.json()).map(s=>this.transformOrder(s))}catch(e){return console.error("[PolymarketService] Failed to fetch open orders:",e),[]}}async getPositions(){if(!this.wallet)return[];try{const e=this.wallet.address,n=await this.throttledFetch(`${w0t}/positions?user=${e}`);if(!n.ok){if(n.status===404)return[];throw new Error(`Failed to fetch positions: ${n.status}`)}const r=await n.json();return Array.isArray(r)?r.map(i=>this.transformPosition(i)):[]}catch(e){return console.error("[PolymarketService] Failed to fetch positions:",e),[]}}async getTrades(e=20){if(!this.isInitialized)return[];try{const n=`/trades?limit=${e}`,r=this.getAuthHeaders("GET",n),i=await this.throttledFetch(`${Ng}${n}`,{method:"GET",headers:r});if(!i.ok)throw new Error(`Failed to fetch trades: ${i.status}`);return(await i.json()).map(o=>this.transformTrade(o))}catch(n){return console.error("[PolymarketService] Failed to fetch trades:",n),[]}}async createOrder(e){if(!this.isInitialized)return{success:!1,error:"Service not initialized"};try{const n={tokenID:e.tokenId,price:e.price.toString(),size:e.size.toString(),side:e.side,orderType:"GTC",tickSize:e.tickSize||"0.01",negRisk:e.negRisk||!1},r="/order",i=JSON.stringify(n),s=this.getAuthHeaders("POST",r,i),o=await this.throttledFetch(`${Ng}${r}`,{method:"POST",headers:s,body:i});if(!o.ok)return{success:!1,error:(await o.json().catch(()=>({}))).message||`Order failed: ${o.status}`};const a=await o.json();return{success:!0,orderId:a.orderID||a.order_id}}catch(n){return console.error("[PolymarketService] Failed to create order:",n),{success:!1,error:n.message}}}async cancelOrder(e){if(!this.isInitialized)return!1;try{const n=`/order/${e}`,r=this.getAuthHeaders("DELETE",n);return(await this.throttledFetch(`${Ng}${n}`,{method:"DELETE",headers:r})).ok}catch(n){return console.error("[PolymarketService] Failed to cancel order:",n),!1}}async cancelAllOrders(){if(!this.isInitialized)return!1;try{const e="/orders",n=this.getAuthHeaders("DELETE",e);return(await this.throttledFetch(`${Ng}${e}`,{method:"DELETE",headers:n})).ok}catch(e){return console.error("[PolymarketService] Failed to cancel all orders:",e),!1}}transformOrder(e){var n;return{id:e.id||e.order_id,marketId:e.market||e.marketId||"",tokenId:e.asset_id||e.tokenId||"",side:((n=e.side)==null?void 0:n.toUpperCase())||"BUY",outcome:e.outcome||"YES",price:parseFloat(e.price)||0,size:parseFloat(e.original_size||e.size)||0,filledSize:parseFloat(e.size_matched||e.filledSize)||0,status:this.mapOrderStatus(e.status),createdAt:new Date(e.created_at||e.createdAt).getTime()}}mapOrderStatus(e){return{open:"OPEN",live:"OPEN",matched:"FILLED",filled:"FILLED",cancelled:"CANCELED",canceled:"CANCELED",partial:"PARTIALLY_FILLED"}[e==null?void 0:e.toLowerCase()]||"OPEN"}transformPosition(e){var c;const n=parseFloat(e.size||e.shares)||0,r=parseFloat(e.avgPrice||e.average_price)||0,i=parseFloat(e.currentPrice||e.price)||r,s=n*r,o=n*i,a=o-s,l=s>0?a/s*100:0;return{marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((c=e.outcome)==null?void 0:c.toUpperCase())||"YES",shares:n,avgPrice:r,currentPrice:i,unrealizedPnl:a,unrealizedPnlPercent:l,costBasis:s,currentValue:o}}transformTrade(e){var n,r;return{id:e.id||e.trade_id,marketId:e.market||e.marketId||"",question:e.question||e.title||"",outcome:((n=e.outcome)==null?void 0:n.toUpperCase())||"YES",side:((r=e.side)==null?void 0:r.toUpperCase())||"BUY",price:parseFloat(e.price)||0,size:parseFloat(e.size)||0,fee:parseFloat(e.fee||e.trading_fee)||0,timestamp:new Date(e.created_at||e.timestamp||e.createdAt).getTime(),realizedPnl:e.realized_pnl?parseFloat(e.realized_pnl):void 0}}async checkHealth(){try{return(await this.throttledFetch(`${T2}/health`)).ok}catch{return!1}}}const fs=new S0t;class A0t{async getMarketContext(e){try{const n=new Date(e.endDate),r=new Date,i=Math.max(0,Math.ceil((n.getTime()-r.getTime())/(1e3*60*60*24)));let s="neutral";return e.priceYes>.6?s="bullish":e.priceYes<.4&&(s="bearish"),{market:e,timeToResolution:i,sentiment:s,ts:Date.now()}}catch(n){return console.error("[PolymarketMCP] Failed to get market context:",n),{market:e,timeToResolution:0,ts:Date.now(),error:n.message}}}async getBatchContext(e,n,r,i,s=20){const o=[];try{for(const c of e){const h=(await fs.getActiveMarkets(c,Math.ceil(s/e.length))).filter(m=>m.liquidity>=i.minLiquidity&&m.volume24h>=i.minVolume24h&&m.active&&!m.resolved);for(const m of h){const g=await this.getMarketContext(m);o.push(g)}}const a=n.reduce((c,d)=>c+d.currentValue,0),l=n.reduce((c,d)=>c+d.unrealizedPnl,0);return{markets:o.slice(0,s),portfolio:{balance:r,positions:n,totalExposure:a,unrealizedPnl:l},settings:i,ts:Date.now()}}catch(a){return console.error("[PolymarketMCP] Failed to get batch context:",a),{markets:[],portfolio:{balance:r,positions:n,totalExposure:0,unrealizedPnl:0},settings:i,ts:Date.now()}}}calculatePositionsPnL(e){const n=e.reduce((a,l)=>a+l.costBasis,0),r=e.reduce((a,l)=>a+l.currentValue,0),i=r-n,s=n>0?i/n*100:0,o=e.map(a=>({marketId:a.marketId,question:a.question,outcome:a.outcome,pnl:a.unrealizedPnl,pnlPercent:a.unrealizedPnlPercent}));return{totalCostBasis:n,totalValue:r,totalPnl:i,totalPnlPercent:s,byMarket:o}}buildAnalysisPrompt(e,n,r){const{markets:i,portfolio:s,settings:o}=e,a=i.map(d=>{const h=d.market;return`- "${h.question}" [${h.category}]
  ID: ${h.id} | TokenYES: ${h.tokenIdYes} | TokenNO: ${h.tokenIdNo}
  YES: ${(h.priceYes*100).toFixed(1)}% | Volume24h: $${h.volume24h.toLocaleString()} | Liquidity: $${h.liquidity.toLocaleString()}
  Days to Resolution: ${d.timeToResolution} | Sentiment: ${d.sentiment||"neutral"}`}).join(`
`),l=s.positions.length>0?s.positions.map(d=>`- "${d.question.slice(0,50)}..." ${d.outcome}: ${d.shares.toFixed(2)} shares @ ${(d.avgPrice*100).toFixed(1)}% (PnL: $${d.unrealizedPnl.toFixed(2)})`).join(`
`):"No open positions";return`
POLYMARKET DEALER ANALYSIS
${r?`
=== RECENT ACTIVITY CONTEXT ===
${r}
`:""}
=== STRATEGY ===
${n}

=== PORTFOLIO STATUS ===
Balance: $${s.balance.toFixed(2)} USDC
Total Exposure: $${s.totalExposure.toFixed(2)}
Unrealized PnL: $${s.unrealizedPnl.toFixed(2)}
Open Positions: ${s.positions.length} / ${o.maxOpenPositions}

=== CURRENT POSITIONS ===
${l}

=== AVAILABLE MARKETS (${i.length}) ===
${a}

=== CONSTRAINTS ===
- Max Position Size: $${o.maxPositionSizeUSDC}
- Max Open Positions: ${o.maxOpenPositions}
- Min Market Liquidity: $${o.minLiquidity.toLocaleString()}
- Allowed Categories: ${o.allowedCategories.join(", ")}

=== INSTRUCTIONS ===
Analyze each market and provide trading decisions.
For each decision include:
1. Action: BUY_YES, BUY_NO, SELL_YES, SELL_NO, or HOLD
2. Market ID (use the ID provided)
3. Token ID (use TokenYES for BUY_YES/SELL_YES, TokenNO for BUY_NO/SELL_NO)
4. Confidence (0-100)
5. Reasoning
6. Suggested size in USDC (if applicable)
7. Suggested limit price (if applicable)

Respond in JSON format:
{
  "decisions": [
    {
      "action": "BUY_YES",
      "marketId": "...",
      "question": "...",
      "tokenId": "...",
      "confidence": 75,
      "reason": "...",
      "suggestedSize": 25,
      "suggestedPrice": 0.45
    }
  ],
  "marketOverview": "Brief overall market assessment",
  "riskAssessment": "Brief risk commentary",
  "cycleSummary": "Brief 1-2 sentence summary of this analysis for context in next cycle. Include key observations and actions. Max 300 chars."
}
`}parseAIResponse(e){try{const n=e.match(/\{[\s\S]*\}/);if(!n)return console.error("[PolymarketMCP] No JSON found in AI response"),[];const r=JSON.parse(n[0]);return!r.decisions||!Array.isArray(r.decisions)?[]:r.decisions.map(i=>({action:i.action||"HOLD",marketId:i.marketId||"",question:i.question||"",tokenId:i.tokenId||"",confidence:i.confidence||0,reason:i.reason||"",suggestedSize:i.suggestedSize,suggestedPrice:i.suggestedPrice})).filter(i=>i.action!=="HOLD"&&i.confidence>=60)}catch(n){return console.error("[PolymarketMCP] Failed to parse AI response:",n),[]}}}const vO=new A0t,Jee="polymarket-dealer-cycle",Xee="polymarket-dealer-sync";class T0t{constructor(){this.isLoopRunning=!1,this.executor=null,ht.subscribe(()=>{const e=ht.getSnapshot();e.isOn&&!this.isLoopRunning?this.startLoop():!e.isOn&&this.isLoopRunning&&this.stopLoop()})}startLoop(){if(this.isLoopRunning)return;const e=ht.getSnapshot();if(!e.isOn)return;console.log("[PolymarketDealerService]  Starting main loop with Web Worker timer (background-safe)..."),this.isLoopRunning=!0,iN.start(),ht.addLog("INFO","Polymarket Dealer loop started"),this.runCycle();const n=e.settings.checkIntervalSeconds*1e3;Qa.start(Jee,n,()=>this.runCycle()),this.startSyncLoop()}startSyncLoop(){Qa.start(Xee,3e4,()=>this.syncPortfolio())}async syncPortfolio(){if(fs.getIsInitialized())try{const[e,n]=await Promise.all([fs.getBalance(),fs.getPositions()]),r=n.reduce((i,s)=>i+s.currentValue,0);ht.updatePortfolioState(n,e,r)}catch(e){console.error("[PolymarketDealerService] Sync error:",e)}}stopLoop(){console.log("[PolymarketDealerService]  Stopping loop..."),Qa.stop(Jee),Qa.stop(Xee),iN.stop(),this.isLoopRunning=!1,ht.addLog("INFO","Polymarket Dealer loop stopped"),ht.setAnalyzing(!1)}setExecutor(e){this.executor=e}async runCycle(){const e=ht.getSnapshot();if(!e.isOn){this.stopLoop();return}if(!fs.getIsInitialized()){ht.addLog("WARNING","Polymarket service not initialized, skipping cycle");return}try{console.log("[PolymarketDealerService] === Starting new cycle ==="),ht.setAnalyzing(!0),ht.setStatusMessage("Starting analysis cycle..."),ht.setCurrentTask("Fetching Markets"),ht.setStatusMessage("Fetching active markets from Polymarket...");const n=e.settings,[r,i]=await Promise.all([fs.getBalance(),fs.getPositions()]),s=i.reduce((w,k)=>w+k.currentValue,0);ht.updatePortfolioState(i,r,s);const o=i.length<n.maxOpenPositions,a=n.bankrollType==="MANUAL"?Math.min(n.manualBankroll,r):r;a<n.maxPositionSizeUSDC&&ht.addLog("WARNING","Insufficient balance for new positions"),ht.setCurrentTask("Building Context"),ht.setStatusMessage("Building market context for AI analysis...");const l=await vO.getBatchContext(n.allowedCategories.length>0?n.allowedCategories:["politics","crypto","business"],i,a,{maxPositionSizeUSDC:n.maxPositionSizeUSDC,maxOpenPositions:n.maxOpenPositions,minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories},20);if(l.markets.length===0){ht.addLog("REASONING","No actionable markets found",{fullReason:`Scanned available markets but none met the filtering criteria.
                    Filters: Min Liquidity: $${n.minLiquidity.toLocaleString()}, Min Volume: $${n.minVolume24h.toLocaleString()}
                    Allowed categories: ${n.allowedCategories.join(", ")}
                    Waiting for better opportunities in the next cycle.`,context:{minLiquidity:n.minLiquidity,minVolume24h:n.minVolume24h,allowedCategories:n.allowedCategories,availableBankroll:a,openPositions:i.length}}),ht.setAnalyzing(!1),ht.setCurrentTask(""),ht.setStatusMessage("Waiting for next cycle...");return}ht.setStatusDetail("Found "+l.markets.length+" markets to analyze"),ht.setCurrentTask("AI Analysis"),ht.setStatusMessage("Consulting AI for trading decisions...");const c=n.promptMode==="preset"?dT[n.selectedPreset]:n.strategyPrompt,d=qc.getContextForAI("polymarket");d&&ht.addLog("INFO",` Cycle Summary: Including ${d.length} char context from previous cycles`);const h=vO.buildAnalysisPrompt(l,c,d),m=await Rm.getPolymarketAnalysis(h);if(!m){ht.addLog("ERROR","AI analysis failed - no response"),ht.setAnalyzing(!1);return}const g=vO.parseAIResponse(m);let v="",x;try{const w=m.match(/\{[\s\S]*\}/);if(w){const k=JSON.parse(w[0]);k.marketOverview&&(v=k.marketOverview),k.riskAssessment&&v&&(v+=" | Risk: "+k.riskAssessment),k.cycleSummary&&typeof k.cycleSummary=="string"&&(x=k.cycleSummary.slice(0,350))}}catch{v=m.replace(/\{[\s\S]*\}/,"").trim().slice(0,200)||"Analysis complete"}if(x&&(qc.setSummary("polymarket",x),ht.addLog("INFO",` AI Summary: ${x.slice(0,80)}...`)),ht.addLog("REASONING",v||"AI Analysis Complete",{fullReason:m,context:{marketsAnalyzed:l.markets.length,currentBalance:r,currentExposure:s,openPositions:i.length,maxPositions:n.maxOpenPositions,allowedCategories:n.allowedCategories,intentsFound:g.length}}),ht.setAnalysisNote(v||"Analyzed "+l.markets.length+" markets"),g.length===0)ht.addLog("REASONING","No trades recommended - HOLD strategy",{fullReason:"After analyzing the available markets, no opportunities met the confidence threshold or risk parameters. Current market conditions suggest holding existing positions.",context:{marketsAnalyzed:l.markets.length,currentBalance:r,recommendation:"HOLD"}}),ht.setCurrentSignal("NEUTRAL"),ht.setStatusDetail("No trades recommended - holding");else{const w=g.filter(O=>O.action.startsWith("BUY")).length,k=g.filter(O=>O.action.startsWith("SELL")).length,N=w>k?"BULLISH":k>w?"BEARISH":"NEUTRAL";ht.addLog("SIGNAL",`${g.length} trading signals - ${N}`,{fullReason:`AI identified ${g.length} trading opportunities across the analyzed markets.
                    ${w} BUY signals and ${k} SELL signals indicate a ${N} overall stance.`,context:{totalIntents:g.length,buySignals:w,sellSignals:k,sentiment:N,intents:g.map(O=>{var D;return{market:O.question.slice(0,60),action:O.action,confidence:O.confidence,reason:(D=O.reason)==null?void 0:D.slice(0,100)}})}}),ht.setCurrentSignal(N),ht.setStatusDetail(`${w} buy signals, ${k} sell signals`)}if(g.length>0&&o&&this.executor){ht.setCurrentTask("Executing Trades"),ht.setStatusMessage("Executing trading decisions...");for(const w of g){if(w.confidence<60){ht.addLog("INFO","Skipping low-confidence intent: "+w.question.slice(0,50));continue}if(i.length>=n.maxOpenPositions){ht.addLog("WARNING","Max positions reached, skipping remaining intents");break}try{await this.executor(w),ht.addLog("TRADE",`${w.action} on "${w.question.slice(0,40)}..."`,{fullReason:w.reason||"Trade executed based on AI analysis",context:{action:w.action,confidence:w.confidence,marketId:w.marketId,question:w.question,suggestedPrice:w.suggestedPrice,suggestedSize:w.suggestedSize}})}catch(k){ht.addLog("ERROR","Failed to execute: "+k.message)}}}ht.setAnalyzing(!1),ht.setCurrentTask(""),ht.setStatusMessage("Cycle complete. Waiting "+n.checkIntervalSeconds+"s..."),ht.setStatusDetail(""),console.log("[PolymarketDealerService] === Cycle complete ===");const b=l.markets.map(w=>w.market.question.slice(0,30));qc.recordCycle("polymarket",{timestamp:Date.now(),decisions:g.map(w=>({asset:w.question.slice(0,40),action:w.action,confidence:w.confidence/100})),assetsAnalyzed:b})}catch(n){console.error("[PolymarketDealerService] Cycle error:",n),ht.addLog("ERROR","Cycle error: "+n.message),ht.setAnalyzing(!1),ht.setCurrentTask(""),ht.setStatusMessage("Error occurred. Retrying next cycle...")}}}const k0t=new T0t;function Q0e(t,e){const n=S.useSyncExternalStore(ht.subscribe.bind(ht),ht.getSnapshot.bind(ht)),r=S.useRef(!1);S.useEffect(()=>{if(!t.isUnlocked||!t.pmEncryptedPrivateKey||!e||e.trim()==="")return;(async()=>{try{const g=await lr.decrypt(t.pmEncryptedPrivateKey,e);await fs.initialize(g)?ht.addLog("INFO","Polymarket service initialized"):ht.addLog("ERROR","Failed to initialize Polymarket service")}catch(g){console.error("[usePolymarket] Init error:",g),ht.addLog("ERROR","Initialization error: "+g.message)}})()},[t.isUnlocked,t.pmEncryptedPrivateKey,e]),S.useEffect(()=>{r.current||(k0t.setExecutor(async m=>{await i(m)}),r.current=!0)},[]);const i=async m=>{var k,N;if(!fs.getIsInitialized()){ht.addLog("ERROR","Service not initialized");return}const g=m.suggestedPrice||.5,v=m.suggestedSize||n.settings.maxPositionSizeUSDC;let x=m.tokenId;if(!x){ht.addLog("WARNING",`Skipping "${(k=m.question)==null?void 0:k.slice(0,40)}..." - tokenId not available`);return}const b=(g*100).toFixed(1);ht.addLog("TRADE",`Executing ${m.action} on "${(N=m.question)==null?void 0:N.slice(0,40)}..." @ ${b}`);const w=await fs.createOrder({tokenId:x,side:m.action==="BUY_YES"||m.action==="BUY_NO"?"BUY":"SELL",price:g,size:Math.floor(v/g)});w.success?(ht.addLog("TRADE",`Order placed: ${w.orderId}`),ht.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.action.includes("YES")?"YES":"NO",action:m.action.startsWith("BUY")?"BUY":"SELL",timestamp:Date.now(),price:g,shares:v/g,sizeUSDC:v,reasoning:m.reason||m.reasoning||"",confidence:m.confidence,status:"OPEN"})):ht.addLog("ERROR",`Order failed: ${w.error}`)};S.useEffect(()=>{if(!n.isOn||!fs.getIsInitialized())return;const m=async()=>{try{const[v,x]=await Promise.all([fs.getBalance(),fs.getPositions()]),b=x.reduce((w,k)=>w+k.currentValue,0);ht.updatePortfolioState(x,v,b)}catch(v){console.error("[usePolymarket] Sync error:",v)}};m();const g=setInterval(m,3e4);return()=>clearInterval(g)},[n.isOn]);const s=m=>{ht.toggleDealer(m),m?ht.addLog("INFO","Polymarket Dealer activated"):ht.addLog("INFO","Polymarket Dealer deactivated")},o=m=>{ht.updateSettings(m)},a=()=>{ht.reload(),ht.addLog("INFO","Settings applied")},l=m=>{ht.setStrategyPrompt(m),ht.addLog("INFO","Strategy prompt updated")},c=()=>{ht.clearLogs()},d=async m=>{if(!fs.getIsInitialized())return ht.addLog("ERROR","Service not initialized"),{success:!1,error:"Service not initialized"};const g=(m.price*100).toFixed(1);ht.addLog("TRADE","Executing "+m.side+" "+m.outcome+" @ "+g+"c");const v=await fs.createOrder({tokenId:m.tokenId,side:m.side,price:m.price,size:m.size});return v.success?(ht.addLog("TRADE","Order placed: "+v.orderId),ht.addOperationRecord({marketId:m.marketId,question:m.question,outcome:m.outcome,action:m.side,timestamp:Date.now(),price:m.price,shares:m.size,sizeUSDC:m.size*m.price,reasoning:m.reason,confidence:m.confidence,status:"OPEN"})):ht.addLog("ERROR","Order failed: "+v.error),v},h=async m=>{const g=await fs.cancelOrder(m);return g?ht.addLog("INFO","Order "+m+" canceled"):ht.addLog("ERROR","Failed to cancel order "+m),g};return{state:n,isOn:n.isOn,isAnalyzing:n.isAnalyzing,settings:n.settings,logs:n.logs,positions:n.activePositions,operationHistory:n.operationHistory,toggleDealer:s,updateSettings:o,applyChanges:a,saveStrategy:l,clearLogs:c,executeOrder:d,cancelOrder:h}}const N0t=[{id:"suggestion",label:"Suggestion",icon:u.jsx(eke,{size:20}),description:"Share ideas to improve AutonomousVault"},{id:"bug",label:"Bug Report",icon:u.jsx(pTe,{size:20}),description:"Report something that isn't working"},{id:"other",label:"Other",icon:u.jsx(_Te,{size:20}),description:"General feedback or questions"}],C0t=({isOpen:t,onClose:e})=>{const[n,r]=S.useState("suggestion"),[i,s]=S.useState(""),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=async()=>{if(!i.trim())return;a(!0);const m=await vj.submitGeneralFeedback({category:n,message:i.trim()});a(!1),m.success&&(c(!0),setTimeout(()=>{h()},1500))},h=()=>{r("suggestion"),s(""),c(!1),e()};return u.jsx(Jd,{open:t,onOpenChange:m=>!m&&h(),children:u.jsxs(au,{className:"sm:max-w-[480px] bg-[#14151a] border-[#232328]",children:[u.jsxs(lu,{children:[u.jsxs(cu,{className:"flex items-center gap-2 text-white",children:[u.jsx(wre,{size:20,className:"text-[#E7FE55]"}),"Send Feedback"]}),u.jsx(Qd,{className:"text-[#747580]",children:"Help us improve AutonomousVault with your feedback."})]}),l?u.jsxs("div",{className:"py-8 text-center",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-[#E7FE55]/10 flex items-center justify-center mx-auto mb-3",children:u.jsx(KD,{size:24,className:"text-[#E7FE55]"})}),u.jsx("p",{className:"text-white font-medium",children:"Thank you for your feedback!"}),u.jsx("p",{className:"text-[#747580] text-sm mt-1",children:"We appreciate your input."})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"space-y-3 mt-2",children:[u.jsx("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em]",children:"Feedback Type"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:N0t.map(m=>u.jsxs("button",{onClick:()=>r(m.id),className:`flex flex-col items-center gap-2 p-3 rounded-lg border transition-all ${n===m.id?"bg-[#E7FE55]/10 border-[#E7FE55]/30 text-[#E7FE55]":"bg-[#1a1b21] border-[#232328] text-[#747580] hover:text-white hover:border-[#3a3b43]"}`,children:[m.icon,u.jsx("span",{className:"text-[11px] font-medium",children:m.label})]},m.id))})]}),u.jsxs("div",{className:"space-y-2 mt-4",children:[u.jsx("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-[0.1em]",children:"Your Message"}),u.jsx("textarea",{value:i,onChange:m=>s(m.target.value),placeholder:`Describe your ${n==="bug"?"issue":n==="suggestion"?"idea":"feedback"}...`,className:"w-full h-32 px-4 py-3 rounded-lg bg-[#1a1b21] border border-[#232328] text-white text-sm placeholder:text-[#747580] resize-none focus:outline-none focus:border-[#E7FE55]/30 focus:ring-1 focus:ring-[#E7FE55]/20"})]}),u.jsxs(Xd,{className:"mt-4 gap-2",children:[u.jsx(Tr,{variant:"outline",onClick:h,className:"border-[#232328] text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21]",children:"Cancel"}),u.jsx(Tr,{onClick:d,disabled:!i.trim()||o,className:"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black",children:o?"Sending...":"Send Feedback"})]})]})]})})},P0t=({onSelectConversation:t})=>{const[e,n]=S.useState([]),[r,i]=S.useState(""),{user:s}=Xw();S.useEffect(()=>{s!=null&&s.uid&&o()},[s==null?void 0:s.uid]);const o=async()=>{const h=await na.getHistory();n(Array.isArray(h)?h:[])},a=async(h,m)=>{h.stopPropagation(),window.confirm("Delete this conversation?")&&(await na.deleteConversation(m),o())},l=e.filter(h=>h.title.toLowerCase().includes(r.toLowerCase())),c=l.reduce((h,m)=>{const g=new Date(m.timestamp),x=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));let b="Older";return x===0?b="Today":x===1?b="Yesterday":x<7?b="Previous 7 Days":x<30&&(b="Previous 30 Days"),h[b]||(h[b]=[]),h[b].push(m),h},{}),d=["Today","Yesterday","Previous 7 Days","Previous 30 Days","Older"];return u.jsxs(gt.div,{className:"h-full flex flex-col p-8 max-w-7xl mx-auto w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsxs("div",{className:"flex items-center justify-between mb-8",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight mb-2",children:"Conversation History"}),u.jsx("p",{className:"text-slate-400",children:"Manage and revisit your past interactions with the Vault Operator."})]}),u.jsxs("div",{className:"relative",children:[u.jsx(GD,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),u.jsx(Vx,{type:"text",placeholder:"Search conversations...",value:r,onChange:h=>i(h.target.value),className:"pl-10 w-64 focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:l.length===0?u.jsxs(gt.div,{className:"flex flex-col items-center justify-center h-64 text-slate-500",initial:{opacity:0},animate:{opacity:1},children:[u.jsx(q1,{size:48,className:"mb-4 opacity-20"}),u.jsx("p",{children:"No conversations found."})]}):u.jsx("div",{className:"space-y-8",children:d.map(h=>{const m=c[h];return!m||m.length===0?null:u.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"h-px bg-slate-800 flex-1"}),u.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:h}),u.jsx("div",{className:"h-px bg-slate-800 flex-1"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.jsx(Ei,{children:m.map((g,v)=>u.jsx(gt.div,{onClick:()=>t(g.id),className:"group",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:v*.05},whileHover:{scale:1.02},children:u.jsxs(Zs,{className:"p-4 cursor-pointer hover:border-[#E7FE55]/30 hover:shadow-xl hover:shadow-[#E7FE55]/5 relative overflow-hidden h-full",children:[u.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:u.jsx(Tr,{variant:"ghost",size:"icon",onClick:x=>a(x,g.id),className:"h-7 w-7 text-slate-400 hover:text-red-400 hover:bg-red-500/20",children:u.jsx(_h,{size:14})})}),u.jsxs("div",{className:"flex flex-col h-full justify-between",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3 text-[#E7FE55]",children:[u.jsx(q1,{size:16}),u.jsxs("span",{className:"text-xs font-mono opacity-70",children:["ID: ",g.id.slice(0,8),"..."]})]}),u.jsx("h3",{className:"text-base font-semibold text-slate-200 group-hover:text-white line-clamp-2 mb-2 transition-colors",children:g.title})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-4 pt-4 border-t border-slate-700/30",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx($D,{size:12}),u.jsx("span",{children:new Date(g.timestamp).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),u.jsx("div",{className:"group-hover:translate-x-1 transition-transform text-[#E7FE55]/50 group-hover:text-[#E7FE55]",children:u.jsx(il,{size:14})})]})]})]})},g.id))})})]},h)})})})]})};function Qee(t,[e,n]){return Math.min(n,Math.max(e,t))}function _0t(t){const e=I0t(t),n=S.forwardRef((r,i)=>{const{children:s,...o}=r,a=S.Children.toArray(s),l=a.find(O0t);if(l){const c=l.props.children,d=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return u.jsx(e,{...o,ref:i,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return u.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function I0t(t){const e=S.forwardRef((n,r)=>{const{children:i,...s}=n;if(S.isValidElement(i)){const o=L0t(i),a=M0t(s,i.props);return i.type!==S.Fragment&&(a.ref=r?uv(r,o):o),S.cloneElement(i,a)}return S.Children.count(i)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var R0t=Symbol("radix.slottable");function O0t(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===R0t}function M0t(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function L0t(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function j0t(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var D0t=[" ","Enter","ArrowUp","ArrowDown"],B0t=[" ","Enter"],e0="Select",[jP,DP,U0t]=fme(e0),[Lv]=o0(e0,[U0t,aC]),BP=aC(),[F0t,Jh]=Lv(e0),[$0t,z0t]=Lv(e0),Z0e=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:m,required:g,form:v}=t,x=BP(e),[b,w]=S.useState(null),[k,N]=S.useState(null),[O,D]=S.useState(!1),_=kB(c),[F,z]=Lx({prop:r,defaultProp:i??!1,onChange:s,caller:e0}),[L,$]=Lx({prop:o,defaultProp:a,onChange:l,caller:e0}),G=S.useRef(null),V=b?v||!!b.closest("form"):!0,[U,A]=S.useState(new Set),I=Array.from(U).map(j=>j.props.value).join(";");return u.jsx($oe,{...x,children:u.jsxs(F0t,{required:g,scope:e,trigger:b,onTriggerChange:w,valueNode:k,onValueNodeChange:N,valueNodeHasChildren:O,onValueNodeHasChildrenChange:D,contentId:yd(),value:L,onValueChange:$,open:F,onOpenChange:z,dir:_,triggerPointerDownPosRef:G,disabled:m,children:[u.jsx(jP.Provider,{scope:e,children:u.jsx($0t,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(j=>{A(q=>new Set(q).add(j))},[]),onNativeOptionRemove:S.useCallback(j=>{A(q=>{const K=new Set(q);return K.delete(j),K})},[]),children:n})}),V?u.jsxs(Sge,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:L,onChange:j=>$(j.target.value),disabled:m,form:v,children:[L===void 0?u.jsx("option",{value:""}):null,Array.from(U)]},I):null]})})};Z0e.displayName=e0;var ege="SelectTrigger",tge=S.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=BP(n),o=Jh(ege,n),a=o.disabled||r,l=Or(e,o.onTriggerChange),c=DP(n),d=S.useRef("touch"),[h,m,g]=Tge(x=>{const b=c().filter(N=>!N.disabled),w=b.find(N=>N.value===o.value),k=kge(b,x,w);k!==void 0&&o.onValueChange(k.value)}),v=x=>{a||(o.onOpenChange(!0),g()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return u.jsx(zoe,{asChild:!0,...s,children:u.jsx(jn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Age(o.value)?"":void 0,...i,ref:l,onClick:yn(i.onClick,x=>{x.currentTarget.focus(),d.current!=="mouse"&&v(x)}),onPointerDown:yn(i.onPointerDown,x=>{d.current=x.pointerType;const b=x.target;b.hasPointerCapture(x.pointerId)&&b.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(v(x),x.preventDefault())}),onKeyDown:yn(i.onKeyDown,x=>{const b=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(b&&x.key===" ")&&D0t.includes(x.key)&&(v(),x.preventDefault())})})})});tge.displayName=ege;var nge="SelectValue",rge=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=Jh(nge,n),{onValueNodeHasChildrenChange:c}=l,d=s!==void 0,h=Or(e,l.onValueNodeChange);return Vs(()=>{c(d)},[c,d]),u.jsx(jn.span,{...a,ref:h,style:{pointerEvents:"none"},children:Age(l.value)?u.jsx(u.Fragment,{children:o}):s})});rge.displayName=nge;var V0t="SelectIcon",ige=S.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return u.jsx(jn.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});ige.displayName=V0t;var H0t="SelectPortal",sge=t=>u.jsx(lC,{asChild:!0,...t});sge.displayName=H0t;var t0="SelectContent",oge=S.forwardRef((t,e)=>{const n=Jh(t0,t.__scopeSelect),[r,i]=S.useState();if(Vs(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?a0.createPortal(u.jsx(age,{scope:t.__scopeSelect,children:u.jsx(jP.Slot,{scope:t.__scopeSelect,children:u.jsx("div",{children:t.children})})}),s):null}return u.jsx(lge,{...t,ref:e})});oge.displayName=t0;var kl=10,[age,Xh]=Lv(t0),q0t="SelectContentImpl",G0t=_0t("SelectContent.RemoveScroll"),lge=S.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:x,avoidCollisions:b,...w}=t,k=Jh(t0,n),[N,O]=S.useState(null),[D,_]=S.useState(null),F=Or(e,oe=>O(oe)),[z,L]=S.useState(null),[$,G]=S.useState(null),V=DP(n),[U,A]=S.useState(!1),I=S.useRef(!1);S.useEffect(()=>{if(N)return $he(N)},[N]),Ohe();const j=S.useCallback(oe=>{const[Te,...ce]=V().map(ye=>ye.ref.current),[de]=ce.slice(-1),ke=document.activeElement;for(const ye of oe)if(ye===ke||(ye==null||ye.scrollIntoView({block:"nearest"}),ye===Te&&D&&(D.scrollTop=0),ye===de&&D&&(D.scrollTop=D.scrollHeight),ye==null||ye.focus(),document.activeElement!==ke))return},[V,D]),q=S.useCallback(()=>j([z,N]),[j,z,N]);S.useEffect(()=>{U&&q()},[U,q]);const{onOpenChange:K,triggerPointerDownPosRef:te}=k;S.useEffect(()=>{if(N){let oe={x:0,y:0};const Te=de=>{var ke,ye;oe={x:Math.abs(Math.round(de.pageX)-(((ke=te.current)==null?void 0:ke.x)??0)),y:Math.abs(Math.round(de.pageY)-(((ye=te.current)==null?void 0:ye.y)??0))}},ce=de=>{oe.x<=10&&oe.y<=10?de.preventDefault():N.contains(de.target)||K(!1),document.removeEventListener("pointermove",Te),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",ce,{capture:!0})}}},[N,K,te]),S.useEffect(()=>{const oe=()=>K(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[K]);const[Y,H]=Tge(oe=>{const Te=V().filter(ke=>!ke.disabled),ce=Te.find(ke=>ke.ref.current===document.activeElement),de=kge(Te,oe,ce);de&&setTimeout(()=>de.ref.current.focus())}),M=S.useCallback((oe,Te,ce)=>{const de=!I.current&&!ce;(k.value!==void 0&&k.value===Te||de)&&(L(oe),de&&(I.current=!0))},[k.value]),P=S.useCallback(()=>N==null?void 0:N.focus(),[N]),W=S.useCallback((oe,Te,ce)=>{const de=!I.current&&!ce;(k.value!==void 0&&k.value===Te||de)&&G(oe)},[k.value]),X=r==="popper"?Kj:cge,ie=X===Kj?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:x,avoidCollisions:b}:{};return u.jsx(age,{scope:n,content:N,viewport:D,onViewportChange:_,itemRefCallback:M,selectedItem:z,onItemLeave:P,itemTextRefCallback:W,focusSelectedItem:q,selectedItemText:$,position:r,isPositioned:U,searchRef:Y,children:u.jsx(aB,{as:G0t,allowPinchZoom:!0,children:u.jsx(oB,{asChild:!0,trapped:k.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:yn(i,oe=>{var Te;(Te=k.trigger)==null||Te.focus({preventScroll:!0}),oe.preventDefault()}),children:u.jsx(nC,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:u.jsx(X,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:oe=>oe.preventDefault(),...w,...ie,onPlaced:()=>A(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:yn(w.onKeyDown,oe=>{const Te=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!Te&&oe.key.length===1&&H(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let de=V().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const ke=oe.target,ye=de.indexOf(ke);de=de.slice(ye+1)}setTimeout(()=>j(de)),oe.preventDefault()}})})})})})})});lge.displayName=q0t;var K0t="SelectItemAlignedPosition",cge=S.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Jh(t0,n),o=Xh(t0,n),[a,l]=S.useState(null),[c,d]=S.useState(null),h=Or(e,F=>d(F)),m=DP(n),g=S.useRef(!1),v=S.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:w,focusSelectedItem:k}=o,N=S.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&x&&b&&w){const F=s.trigger.getBoundingClientRect(),z=c.getBoundingClientRect(),L=s.valueNode.getBoundingClientRect(),$=w.getBoundingClientRect();if(s.dir!=="rtl"){const ke=$.left-z.left,ye=L.left-ke,Ke=F.left-ye,je=F.width+Ke,Ve=Math.max(je,z.width),me=window.innerWidth-kl,Ne=Qee(ye,[kl,Math.max(kl,me-Ve)]);a.style.minWidth=je+"px",a.style.left=Ne+"px"}else{const ke=z.right-$.right,ye=window.innerWidth-L.right-ke,Ke=window.innerWidth-F.right-ye,je=F.width+Ke,Ve=Math.max(je,z.width),me=window.innerWidth-kl,Ne=Qee(ye,[kl,Math.max(kl,me-Ve)]);a.style.minWidth=je+"px",a.style.right=Ne+"px"}const G=m(),V=window.innerHeight-kl*2,U=x.scrollHeight,A=window.getComputedStyle(c),I=parseInt(A.borderTopWidth,10),j=parseInt(A.paddingTop,10),q=parseInt(A.borderBottomWidth,10),K=parseInt(A.paddingBottom,10),te=I+j+U+K+q,Y=Math.min(b.offsetHeight*5,te),H=window.getComputedStyle(x),M=parseInt(H.paddingTop,10),P=parseInt(H.paddingBottom,10),W=F.top+F.height/2-kl,X=V-W,ie=b.offsetHeight/2,oe=b.offsetTop+ie,Te=I+j+oe,ce=te-Te;if(Te<=W){const ke=G.length>0&&b===G[G.length-1].ref.current;a.style.bottom="0px";const ye=c.clientHeight-x.offsetTop-x.offsetHeight,Ke=Math.max(X,ie+(ke?P:0)+ye+q),je=Te+Ke;a.style.height=je+"px"}else{const ke=G.length>0&&b===G[0].ref.current;a.style.top="0px";const Ke=Math.max(W,I+x.offsetTop+(ke?M:0)+ie)+ce;a.style.height=Ke+"px",x.scrollTop=Te-W+x.offsetTop}a.style.margin=`${kl}px 0`,a.style.minHeight=Y+"px",a.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,s.trigger,s.valueNode,a,c,x,b,w,s.dir,r]);Vs(()=>N(),[N]);const[O,D]=S.useState();Vs(()=>{c&&D(window.getComputedStyle(c).zIndex)},[c]);const _=S.useCallback(F=>{F&&v.current===!0&&(N(),k==null||k(),v.current=!1)},[N,k]);return u.jsx(Y0t,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:_,children:u.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:u.jsx(jn.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});cge.displayName=K0t;var W0t="SelectPopperPosition",Kj=S.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=kl,...s}=t,o=BP(n);return u.jsx(Voe,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Kj.displayName=W0t;var[Y0t,KB]=Lv(t0,{}),Wj="SelectViewport",uge=S.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Xh(Wj,n),o=KB(Wj,n),a=Or(e,s.onViewportChange),l=S.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),u.jsx(jP.Slot,{scope:n,children:u.jsx(jn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:yn(i.onScroll,c=>{const d=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(l.current-d.scrollTop);if(g>0){const v=window.innerHeight-kl*2,x=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),w=Math.max(x,b);if(w<v){const k=w+g,N=Math.min(v,k),O=k-N;h.style.height=N+"px",h.style.bottom==="0px"&&(d.scrollTop=O>0?O:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});uge.displayName=Wj;var dge="SelectGroup",[J0t,X0t]=Lv(dge),Q0t=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=yd();return u.jsx(J0t,{scope:n,id:i,children:u.jsx(jn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Q0t.displayName=dge;var fge="SelectLabel",hge=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=X0t(fge,n);return u.jsx(jn.div,{id:i.id,...r,ref:e})});hge.displayName=fge;var yN="SelectItem",[Z0t,pge]=Lv(yN),mge=S.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Jh(yN,n),l=Xh(yN,n),c=a.value===r,[d,h]=S.useState(s??""),[m,g]=S.useState(!1),v=Or(e,k=>{var N;return(N=l.itemRefCallback)==null?void 0:N.call(l,k,r,i)}),x=yd(),b=S.useRef("touch"),w=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(Z0t,{scope:n,value:r,disabled:i,textId:x,isSelected:c,onItemTextChange:S.useCallback(k=>{h(N=>N||((k==null?void 0:k.textContent)??"").trim())},[]),children:u.jsx(jP.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:u.jsx(jn.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:yn(o.onFocus,()=>g(!0)),onBlur:yn(o.onBlur,()=>g(!1)),onClick:yn(o.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:yn(o.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:yn(o.onPointerDown,k=>{b.current=k.pointerType}),onPointerMove:yn(o.onPointerMove,k=>{var N;b.current=k.pointerType,i?(N=l.onItemLeave)==null||N.call(l):b.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:yn(o.onPointerLeave,k=>{var N;k.currentTarget===document.activeElement&&((N=l.onItemLeave)==null||N.call(l))}),onKeyDown:yn(o.onKeyDown,k=>{var O;((O=l.searchRef)==null?void 0:O.current)!==""&&k.key===" "||(B0t.includes(k.key)&&w(),k.key===" "&&k.preventDefault())})})})})});mge.displayName=yN;var h1="SelectItemText",gge=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Jh(h1,n),a=Xh(h1,n),l=pge(h1,n),c=z0t(h1,n),[d,h]=S.useState(null),m=Or(e,w=>h(w),l.onItemTextChange,w=>{var k;return(k=a.itemTextRefCallback)==null?void 0:k.call(a,w,l.value,l.disabled)}),g=d==null?void 0:d.textContent,v=S.useMemo(()=>u.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=c;return Vs(()=>(x(v),()=>b(v)),[x,b,v]),u.jsxs(u.Fragment,{children:[u.jsx(jn.span,{id:l.textId,...s,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?a0.createPortal(s.children,o.valueNode):null]})});gge.displayName=h1;var yge="SelectItemIndicator",xge=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return pge(yge,n).isSelected?u.jsx(jn.span,{"aria-hidden":!0,...r,ref:e}):null});xge.displayName=yge;var Yj="SelectScrollUpButton",vge=S.forwardRef((t,e)=>{const n=Xh(Yj,t.__scopeSelect),r=KB(Yj,t.__scopeSelect),[i,s]=S.useState(!1),o=Or(e,r.onScrollButtonChange);return Vs(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?u.jsx(wge,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});vge.displayName=Yj;var Jj="SelectScrollDownButton",bge=S.forwardRef((t,e)=>{const n=Xh(Jj,t.__scopeSelect),r=KB(Jj,t.__scopeSelect),[i,s]=S.useState(!1),o=Or(e,r.onScrollButtonChange);return Vs(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;s(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?u.jsx(wge,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});bge.displayName=Jj;var wge=S.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Xh("SelectScrollButton",n),o=S.useRef(null),a=DP(n),l=S.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),Vs(()=>{var d;const c=a().find(h=>h.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),u.jsx(jn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:yn(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:yn(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:yn(i.onPointerLeave,()=>{l()})})}),egt="SelectSeparator",Ege=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return u.jsx(jn.div,{"aria-hidden":!0,...r,ref:e})});Ege.displayName=egt;var Xj="SelectArrow",tgt=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=BP(n),s=Jh(Xj,n),o=Xh(Xj,n);return s.open&&o.position==="popper"?u.jsx(Hoe,{...i,...r,ref:e}):null});tgt.displayName=Xj;var ngt="SelectBubbleInput",Sge=S.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=S.useRef(null),s=Or(r,i),o=j0t(e);return S.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),u.jsx(jn.select,{...n,style:{...qoe,...n.style},ref:s,defaultValue:e})});Sge.displayName=ngt;function Age(t){return t===""||t===void 0}function Tge(t){const e=Rh(t),n=S.useRef(""),r=S.useRef(0),i=S.useCallback(o=>{const a=n.current+o;e(a),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(a)},[e]),s=S.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function kge(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=rgt(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function rgt(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var igt=Z0e,Nge=tge,sgt=rge,ogt=ige,agt=sge,Cge=oge,lgt=uge,Pge=hge,_ge=mge,cgt=gge,ugt=xge,Ige=vge,Rge=bge,Oge=Ege;const Zee=igt,ete=sgt,Qj=S.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(Nge,{ref:r,className:dt("flex h-10 w-full items-center justify-between whitespace-nowrap rounded-lg border border-slate-700 bg-slate-800/50 px-3 py-2 text-sm text-white ring-offset-background placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,u.jsx(ogt,{asChild:!0,children:u.jsx(Oo,{className:"h-4 w-4 opacity-50"})})]}));Qj.displayName=Nge.displayName;const Mge=S.forwardRef(({className:t,...e},n)=>u.jsx(Ige,{ref:n,className:dt("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(Ph,{className:"h-4 w-4"})}));Mge.displayName=Ige.displayName;const Lge=S.forwardRef(({className:t,...e},n)=>u.jsx(Rge,{ref:n,className:dt("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(Oo,{className:"h-4 w-4"})}));Lge.displayName=Rge.displayName;const Zj=S.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>u.jsx(agt,{children:u.jsxs(Cge,{ref:i,className:dt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-700 bg-slate-800 text-slate-100 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[u.jsx(Mge,{}),u.jsx(lgt,{className:dt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),u.jsx(Lge,{})]})}));Zj.displayName=Cge.displayName;const dgt=S.forwardRef(({className:t,...e},n)=>u.jsx(Pge,{ref:n,className:dt("px-2 py-1.5 text-sm font-semibold text-slate-400",t),...e}));dgt.displayName=Pge.displayName;const eD=S.forwardRef(({className:t,children:e,...n},r)=>u.jsxs(_ge,{ref:r,className:dt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-slate-700 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[u.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(ugt,{children:u.jsx(Am,{className:"h-4 w-4"})})}),u.jsx(cgt,{children:e})]}));eD.displayName=_ge.displayName;const fgt=S.forwardRef(({className:t,...e},n)=>u.jsx(Oge,{ref:n,className:dt("-mx-1 my-1 h-px bg-slate-700",t),...e}));fgt.displayName=Oge.displayName;const hgt=({onConnect:t,onCancel:e})=>{var G;const[n,r]=S.useState("input"),[i,s]=S.useState(""),[o,a]=S.useState(""),[l,c]=S.useState(!1),[d,h]=S.useState(null),[m,g]=S.useState(null),[v,x]=S.useState(!1),[b,w]=S.useState(null),[k,N]=S.useState(null),O=S.useCallback(()=>{if(!i){w(null);return}const V=hs.validateUrl(i);w(V.valid?null:V.error||"Invalid URL")},[i]),D=S.useCallback(()=>{if(!o){N(null);return}const V=hs.validateAnonKey(o);N(V.valid?null:V.error||"Invalid key")},[o]),_=S.useCallback(async()=>{const V=hs.getSetupSQL();await navigator.clipboard.writeText(V),x(!0),setTimeout(()=>x(!1),2e3)},[]),F=S.useCallback(async()=>{h(null),r("connecting");const V=await hs.connect(i.trim(),o.trim());if(!V.success){h(V.error||"Connection failed"),r("error");return}r("validating");const U=await hs.validateSchema();if(g(U),!U.valid){r("schema-missing");return}r("success")},[i,o]),z=S.useCallback(async()=>{r("validating");const V=await hs.validateSchema();if(g(V),!V.valid){r("schema-missing");return}r("success")},[]),L=S.useCallback(()=>{t()},[t]),$=i.trim()&&o.trim()&&!b&&!k;return u.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-5 bg-[#0f1015] border border-[#232328] rounded-xl space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:u.jsx(jN,{className:"w-5 h-5 text-blue-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-base font-semibold text-white",children:"Connect Your Supabase"}),u.jsx("p",{className:"text-xs text-[#747580]",children:"Required for 24/7 execution"})]})]}),u.jsxs(Ei,{mode:"wait",children:[n==="input"&&u.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[u.jsxs("div",{className:"p-3 bg-blue-500/5 border border-blue-500/20 rounded-lg",children:[u.jsx("p",{className:"text-xs text-blue-200 mb-2 font-medium",children:"Quick Setup:"}),u.jsxs("ol",{className:"text-xs text-blue-200/80 space-y-1 list-decimal list-inside",children:[u.jsxs("li",{children:["Create free account at ",u.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"supabase.com"})]}),u.jsx("li",{children:"Create a new project (any name)"}),u.jsxs("li",{children:["Go to ",u.jsx("strong",{children:"Settings  API"})]}),u.jsx("li",{children:"Copy the values below"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Project URL"}),u.jsx("input",{type:"text",value:i,onChange:V=>s(V.target.value),onBlur:O,placeholder:"https://abc123.supabase.co",className:dt("w-full px-3 py-2 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",b?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),b&&u.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:b})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1.5",children:"Anon Key (public)"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:l?"text":"password",value:o,onChange:V=>a(V.target.value),onBlur:D,placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",className:dt("w-full px-3 py-2 pr-9 text-xs font-mono bg-[#14151a] border rounded text-white placeholder:text-[#3a3b42] focus:outline-none transition-colors",k?"border-red-500/50 focus:border-red-500":"border-[#232328] focus:border-blue-500/50")}),u.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#747580] hover:text-white transition-colors",children:l?u.jsx(DN,{size:14}):u.jsx(zD,{size:14})})]}),k&&u.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:k})]}),u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("a",{href:"https://supabase.com/dashboard/project/_/settings/api",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-blue-400/70 hover:text-blue-400 transition-colors flex items-center gap-1",children:["Open Supabase API Settings ",u.jsx(Ed,{size:10})]})}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:F,disabled:!$,className:dt("flex-1 px-4 py-2 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",$?"bg-blue-600 hover:bg-blue-500 text-white":"bg-[#232328] text-[#3a3b42] cursor-not-allowed"),children:["Connect ",u.jsx(il,{size:14})]})]})]},"input"),(n==="connecting"||n==="validating")&&u.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"py-8 flex flex-col items-center gap-4",children:[u.jsx(VD,{className:"w-8 h-8 text-blue-400 animate-spin"}),u.jsx("p",{className:"text-sm text-[#a0a1a8]",children:n==="connecting"?"Connecting to Supabase...":"Validating schema..."})]},"connecting"),n==="schema-missing"&&m&&u.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[u.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ii,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-amber-200",children:"Schema Setup Required"}),u.jsx("p",{className:"text-xs text-amber-200/70 mt-1",children:"Your Supabase project is connected, but missing required tables:"}),u.jsx("ul",{className:"mt-2 space-y-1",children:m.missingTables.map(V=>u.jsxs("li",{className:"text-xs text-amber-300 flex items-center gap-2",children:[u.jsx(Lm,{size:12}),u.jsx("code",{className:"bg-amber-500/10 px-1 rounded",children:V})]},V))})]})]})}),u.jsxs("div",{className:"p-4 bg-[#14151a] border border-[#232328] rounded-lg space-y-3",children:[u.jsx("p",{className:"text-xs text-[#a0a1a8]",children:"Copy this SQL and run it in your Supabase SQL Editor:"}),u.jsx("button",{onClick:_,className:"w-full px-4 py-3 bg-[#0f1015] border border-[#232328] rounded-lg hover:border-blue-500/30 transition-all flex items-center justify-center gap-2 text-sm",children:v?u.jsxs(u.Fragment,{children:[u.jsx(Am,{size:16,className:"text-green-400"}),u.jsx("span",{className:"text-green-400",children:"Copied!"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Tm,{size:16,className:"text-[#747580]"}),u.jsx("span",{className:"text-white",children:"Copy SQL Schema"})]})}),u.jsxs("a",{href:"https://supabase.com/dashboard/project/_/sql/new",target:"_blank",rel:"noopener noreferrer",className:"w-full px-4 py-2 bg-[#232328] rounded-lg hover:bg-[#2a2b30] transition-all flex items-center justify-center gap-2 text-sm text-white",children:["Open SQL Editor ",u.jsx(Ed,{size:14})]})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:z,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-2",children:["I've Run the SQL ",u.jsx(il,{size:14})]})]})]},"schema-missing"),n==="error"&&u.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[u.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Lm,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-red-200",children:"Connection Failed"}),u.jsx("p",{className:"text-xs text-red-200/70 mt-1",children:d})]})]})}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 bg-[#232328] hover:bg-[#2a2b30] text-white rounded-lg text-sm font-medium transition-colors",children:"Cancel"}),u.jsx("button",{onClick:()=>r("input"),className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Try Again"})]})]},"error"),n==="success"&&u.jsxs(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0},className:"py-6 flex flex-col items-center gap-4",children:[u.jsx("div",{className:"p-3 rounded-full bg-green-500/10",children:u.jsx(LN,{className:"w-8 h-8 text-green-400"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-sm font-medium text-white",children:"Supabase Connected!"}),u.jsxs("p",{className:"text-xs text-[#747580] mt-1",children:["Project: ",(G=hs.getConfig())==null?void 0:G.projectId]})]}),u.jsx("button",{onClick:L,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg text-sm font-semibold transition-all",children:"Continue"})]},"success")]})]})},pgt=({isOpen:t,onClose:e,onConnect:n})=>u.jsx(Jd,{open:t,onOpenChange:r=>!r&&e(),children:u.jsxs(au,{className:"max-w-xl bg-[#13141A] border-gray-800 text-white p-0 overflow-hidden",children:[u.jsxs(lu,{className:"sr-only",children:[u.jsx(cu,{children:"Connect Supabase"}),u.jsx(Qd,{children:"Setup your Supabase connection for advanced features"})]}),u.jsx("div",{className:"p-1",children:u.jsx(hgt,{onConnect:n,onCancel:e})})]})}),mgt=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=S.useState(""),[a,l]=S.useState(24),c=async()=>{s&&await n(s,a)};return u.jsx(Jd,{open:t,onOpenChange:e,children:u.jsxs(au,{className:"max-w-md glass-panel rounded border-[#232328] text-white",children:[u.jsx(lu,{children:u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"p-2.5 rounded bg-amber-500/10",children:u.jsx(fr,{className:"w-5 h-5 text-amber-400"})}),u.jsxs("div",{children:[u.jsx(cu,{className:"text-base font-bold tracking-wide",children:"Setup Session Keys"}),u.jsx(Qd,{className:"text-[11px] text-[#747580] mt-0.5",children:"Configure temporary keys for 24/7 execution"})]})]})}),u.jsxs("div",{className:"space-y-5 py-3",children:[u.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded",children:[u.jsx("h4",{className:"text-[11px] font-bold text-amber-300 mb-2 uppercase tracking-wide",children:"How it works"}),u.jsxs("ul",{className:"text-[10px] text-amber-200/70 space-y-1 list-disc list-inside leading-relaxed",children:[u.jsx("li",{children:"Keys are decrypted and stored in server memory"}),u.jsx("li",{children:"Bot runs 24/7 within the session duration"}),u.jsx("li",{children:"Keys are automatically wiped when session expires"}),u.jsx("li",{children:"More secure than persistent storage"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Session Duration (Hours)"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"number",value:a,onChange:d=>l(Math.max(1,Math.min(72,parseInt(d.target.value)||24))),min:1,max:72,className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm font-mono text-white placeholder:text-[#747580] focus:outline-none focus:border-amber-500/50 transition-colors"}),u.jsx(fr,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]}),u.jsx("p",{className:"text-[9px] text-[#747580] mt-1.5",children:"Maximum 72 hours."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Wallet Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"password",value:s,onChange:d=>o(d.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm text-white placeholder:text-[#747580] focus:outline-none focus:border-amber-500/50 transition-colors"}),u.jsx(Vl,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]}),u.jsx("p",{className:"text-[9px] text-[#747580] mt-1.5",children:"Required to decrypt your private key for this session."})]})]}),i&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded text-[10px] text-red-300",children:i})]}),u.jsxs(Xd,{className:"gap-2",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-[#1a1b21] hover:bg-[#232328] text-[#a0a1a8] rounded text-[11px] font-semibold uppercase tracking-wide transition-colors",children:"Cancel"}),u.jsx("button",{onClick:c,disabled:!s||r,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-[#1a1b21] disabled:text-[#747580] text-white rounded text-[11px] font-semibold uppercase tracking-wide transition-colors flex items-center gap-2",children:r?u.jsxs(u.Fragment,{children:[u.jsx(VD,{className:"w-3.5 h-3.5 animate-spin"}),"Starting..."]}):"Start Session"})]})]})})},ggt=({isOpen:t,onClose:e,onConfirm:n,isLoading:r,error:i})=>{const[s,o]=S.useState(""),[a,l]=S.useState(!1),c=async()=>{!s||!a||await n(s)};return u.jsx(Jd,{open:t,onOpenChange:e,children:u.jsxs(au,{className:"max-w-md glass-panel rounded border-[#232328] text-white",children:[u.jsx(lu,{children:u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"p-2.5 rounded bg-red-500/10",children:u.jsx(Mo,{className:"w-5 h-5 text-red-500"})}),u.jsxs("div",{children:[u.jsx(cu,{className:"text-base font-bold tracking-wide",children:"Setup Persistent Keys"}),u.jsx(Qd,{className:"text-[11px] text-[#747580] mt-0.5",children:"Store encrypted keys for permanent 24/7 execution"})]})]})}),u.jsxs("div",{className:"space-y-5 py-3",children:[u.jsx("div",{className:"p-3 bg-red-500/5 border border-red-500/20 rounded",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Eke,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-[11px] font-bold text-red-300 mb-1 uppercase tracking-wide",children:"Security Warning"}),u.jsx("p",{className:"text-[10px] text-red-200/70 leading-relaxed",children:"This option stores your encrypted private keys and password on the server database. While we use encryption, this is less secure than local or session-based storage. If the server is compromised, your keys could be at risk."})]})]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-[#a0a1a8] mb-1.5 uppercase tracking-wide",children:"Wallet Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"password",value:s,onChange:d=>o(d.target.value),placeholder:"Enter your wallet password",className:"w-full pl-10 pr-3 py-2.5 bg-[#0f1015] border border-[#232328] rounded text-sm text-white placeholder:text-[#747580] focus:outline-none focus:border-red-500/50 transition-colors"}),u.jsx(Vl,{className:"w-4 h-4 text-[#747580] absolute left-3 top-1/2 -translate-y-1/2"})]})]}),u.jsxs("div",{className:"flex items-start gap-3 p-3 bg-[#0f1015] rounded border border-[#232328] hover:border-[#747580] transition-colors cursor-pointer",onClick:()=>l(!a),children:[u.jsx("div",{className:"flex items-center h-5",children:u.jsx("input",{type:"checkbox",checked:a,onChange:d=>l(d.target.checked),className:"w-4 h-4 rounded border-[#232328] text-red-500 focus:ring-red-500 bg-[#0f1015]"})}),u.jsxs("div",{className:"text-[10px] text-[#747580] select-none leading-relaxed",children:[u.jsx("span",{className:"font-bold text-[#a0a1a8]",children:"I understand the risks."}),u.jsx("span",{className:"block mt-0.5",children:"I accept full responsibility for storing my keys on the server."})]})]})]}),i&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded text-[10px] text-red-300",children:i})]}),u.jsxs(Xd,{className:"gap-2",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 bg-[#1a1b21] hover:bg-[#232328] text-[#a0a1a8] rounded text-[11px] font-semibold uppercase tracking-wide transition-colors",children:"Cancel"}),u.jsx("button",{onClick:c,disabled:!s||!a||r,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-[#1a1b21] disabled:text-[#747580] text-white rounded text-[11px] font-semibold uppercase tracking-wide transition-colors flex items-center gap-2",children:r?u.jsxs(u.Fragment,{children:[u.jsx(VD,{className:"w-3.5 h-3.5 animate-spin"}),"Enabling..."]}):"Enable Persistent Keys"})]})]})})},ygt=({onTierChange:t})=>{var z;const e=S.useSyncExternalStore(Kf.subscribe.bind(Kf),()=>Kf.getState()),[n,r]=S.useState(e.currentTier),[i,s]=S.useState(!1),[o,a]=S.useState(null),[l,c]=S.useState(!1),[d,h]=S.useState(hs.isConnected()),[m,g]=S.useState(!1),[v,x]=S.useState(!1),b=Kf.getSessionStatus();S.useEffect(()=>{r(e.currentTier)},[e.currentTier]),S.useEffect(()=>{const L=hs.subscribe($=>{h($)});return()=>L()},[]);const w=async L=>{if(L===e.currentTier){r(L);return}if((L==="session"||L==="persistent")&&!d){r(L),c(!0);return}r(L),a(null),L==="local"?await N():L==="session"?g(!0):L==="persistent"&&x(!0)},k=()=>{c(!1),h(!0),n==="session"?g(!0):n==="persistent"&&x(!0)},N=async()=>{s(!0);try{const L=await Kf.migrateToLocal();if(!L.success)throw new Error(L.error||"Migration failed");t==null||t("local")}catch(L){a(L instanceof Error?L.message:"Unknown error"),r(e.currentTier)}finally{s(!1)}},O=async(L,$)=>{s(!0);try{const G=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),V=await Ae.getItem(Ae.getUserKey("agent_hl_vault_salt"));if(!G||!V)throw new Error("No encrypted key found. Please set up your wallet first.");const U=await Kf.migrateToSession(G,V,L,$);if(!U.success)throw new Error(U.error||"Migration failed");g(!1),t==null||t("session")}catch(G){a(G instanceof Error?G.message:"Unknown error")}finally{s(!1)}},D=async L=>{s(!0);try{const $=await Ae.getItem(Ae.getUserKey("agent_hl_vault_enc")),G=await Ae.getItem(Ae.getUserKey("agent_hl_vault_salt"));if(!$||!G)throw new Error("No encrypted key found. Please set up your wallet first.");const V=await Kf.migrateToPersistent($,G,L);if(!V.success)throw new Error(V.error||"Migration failed");x(!1),t==null||t("persistent")}catch($){a($ instanceof Error?$.message:"Unknown error")}finally{s(!1)}},_=L=>{switch(L){case"local":return u.jsx(Wc,{className:"w-6 h-6"});case"session":return u.jsx(fr,{className:"w-6 h-6"});case"persistent":return u.jsx(Mo,{className:"w-6 h-6"})}},F=(L,$,G)=>G?"border-emerald-500/50 bg-emerald-500/5":$?"border-blue-500 bg-blue-500/5":"border-gray-800 hover:border-gray-700 bg-gray-900/40";return u.jsxs("div",{className:"space-y-6",children:[e.currentTier==="session"&&b.active&&u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg animate-in fade-in slide-in-from-top-1",children:[u.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-full animate-pulse",children:u.jsx(fr,{className:"w-3.5 h-3.5 text-amber-400"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"text-sm font-medium text-amber-200",children:"Session Active"}),u.jsxs("span",{className:"text-xs text-amber-200/70 block",children:[b.remainingHours,"h remaining"]})]})]}),u.jsx("div",{className:"grid gap-3",children:Object.keys(Mj).map(L=>{const $=Mj[L],G=e.currentTier===L,V=n===L;return u.jsxs("button",{onClick:()=>w(L),className:`
                                group relative p-4 rounded-xl border transition-all duration-300 text-left w-full
                                ${F(L,V,G)}
                            `,children:[G&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 backdrop-blur-sm",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),u.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-wider",children:"Active"})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`
                                    p-3 rounded-xl transition-colors
                                    ${L==="local"?"bg-emerald-500/10 text-emerald-400 group-hover:bg-emerald-500/20":L==="session"?"bg-amber-500/10 text-amber-400 group-hover:bg-amber-500/20":"bg-red-500/10 text-red-400 group-hover:bg-red-500/20"}
                                `,children:_(L)}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"flex items-center gap-2 mb-1",children:u.jsx("h4",{className:`font-semibold text-sm ${G?"text-white":"text-gray-200 group-hover:text-white"}`,children:$.label})}),u.jsx("p",{className:"text-xs text-gray-500 leading-relaxed mb-3 pr-8",children:$.description}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${$.execution24x7?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":"bg-gray-800 border-gray-700 text-gray-400"}
                                        `,children:$.execution24x7?"24/7 Cloud Run":"Browser Only"}),u.jsx("span",{className:`
                                            px-2 py-0.5 text-[10px] uppercase tracking-wider font-medium rounded-md border
                                            ${$.securityLevel===3?"bg-emerald-500/5 border-emerald-500/20 text-emerald-400":$.securityLevel===2?"bg-amber-500/5 border-amber-500/20 text-amber-400":"bg-red-500/5 border-red-500/20 text-red-400"}
                                        `,children:$.securityLevel===3?"High Security":$.securityLevel===2?"Medium Security":"Low Security"})]})]})]})]},L)})}),(n==="session"||n==="persistent"||d)&&u.jsx("div",{className:"pt-2",children:u.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${d?"bg-emerald-900/10 border-emerald-500/20":"bg-blue-900/10 border-blue-500/20"}`,children:[u.jsx("div",{className:`p-1.5 rounded-md ${d?"bg-emerald-500/20":"bg-blue-500/20"}`,children:u.jsx(jN,{className:`w-3.5 h-3.5 ${d?"text-emerald-400":"text-blue-400"}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:`text-xs font-medium ${d?"text-emerald-200":"text-blue-200"}`,children:d?"Supabase Connected":"Supabase Connection Required"}),u.jsx("p",{className:`text-[10px] truncate ${d?"text-emerald-200/60":"text-blue-200/60"}`,children:d?`Project: ${(z=hs.getConfig())==null?void 0:z.projectId}`:"Required for cloud execution modes"})]}),d&&u.jsx("button",{onClick:()=>c(!0),className:"text-[10px] font-medium text-emerald-400 hover:text-emerald-300 transition-colors px-2 py-1 bg-emerald-500/10 rounded hover:bg-emerald-500/20",children:"Edit"})]})}),o&&u.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg animate-in fade-in slide-in-from-top-1",children:u.jsx("p",{className:"text-xs text-red-300 font-medium",children:o})}),u.jsx(pgt,{isOpen:l,onClose:()=>{c(!1),n!==e.currentTier&&r(e.currentTier)},onConnect:k}),u.jsx(mgt,{isOpen:m,onClose:()=>g(!1),onConfirm:O,isLoading:i,error:o}),u.jsx(ggt,{isOpen:v,onClose:()=>x(!1),onConfirm:D,isLoading:i,error:o})]})},xgt=({addNotification:t,password:e})=>{var j,q,K,te;const{user:n,logout:r,deleteAccount:i}=Xw(),[s,o]=S.useState(!1),[a,l]=S.useState(!1),[c,d]=S.useState(""),[h,m]=S.useState(!1),[g,v]=S.useState(null),[x,b]=S.useState(!1),[w,k]=S.useState(!1),[N,O]=S.useState(""),D=S.useRef(null),[_,F]=S.useState(!1),[z,L]=S.useState(""),$=async Y=>{var H,M,P,W,X,ie,oe,Te,ce,de,ke,ye,Ke,je,Ve,me,Ne,We,Qe,Ze,at,St,qe,it,Lt,Ie,Ge,Tt,xt,se,J,Z,ue,Se,he,pe,Je,Xe,ot,Nt;if(!(n!=null&&n.uid)){t("No user session found");return}b(!0);try{const wt=Ae.getUserKey("agent_activity_log"),Rt=Ae.getUserKey("vault_dealer_strategy"),rn=Ae.getUserKey("agent_scheduler_tasks"),[et,Ht,Hn]=await Promise.all([Ae.getItem(wt),Ae.getItem(Rt),Ae.getItem(rn)]);let sn=[];if(Y){const ut=await na.getHistory();for(const pn of ut)try{const Ct=await na.loadConversation(pn.id,Y);Ct&&sn.push(Ct)}catch(Ct){console.warn(`Failed to decrypt conversation ${pn.id}`,Ct)}}const ae=await Ae.getItem(Ae.getUserKey("vault_dealer_storage"));let Q=null;if(ae)try{const ut=JSON.parse(ae);Q={strategyPrompt:(H=ut.settings)==null?void 0:H.strategyPrompt,aggressiveMode:(M=ut.settings)==null?void 0:M.aggressiveMode,maxLeverage:(P=ut.settings)==null?void 0:P.maxLeverage,maxPositionSizeUSDC:(W=ut.settings)==null?void 0:W.maxPositionSizeUSDC,maxOpenPositions:(X=ut.settings)==null?void 0:X.maxOpenPositions,bankrollType:(ie=ut.settings)==null?void 0:ie.bankrollType,manualBankroll:(oe=ut.settings)==null?void 0:oe.manualBankroll,tradingPairs:(Te=ut.settings)==null?void 0:Te.tradingPairs,checkIntervalSeconds:(ce=ut.settings)==null?void 0:ce.checkIntervalSeconds,analysisTimeframe:(de=ut.settings)==null?void 0:de.analysisTimeframe,historyCandles:(ke=ut.settings)==null?void 0:ke.historyCandles,macroTimeframeEnabled:(ye=ut.settings)==null?void 0:ye.macroTimeframeEnabled,macroTimeframe:(Ke=ut.settings)==null?void 0:Ke.macroTimeframe,macroEnabledIndicators:(je=ut.settings)==null?void 0:je.macroEnabledIndicators,indicatorSettings:(Ve=ut.settings)==null?void 0:Ve.indicatorSettings,autonomousIndicators:(me=ut.settings)==null?void 0:me.autonomousIndicators,selectedPreset:(Ne=ut.settings)==null?void 0:Ne.selectedPreset,promptMode:(We=ut.settings)==null?void 0:We.promptMode,stopLossEnabled:(Qe=ut.settings)==null?void 0:Qe.stopLossEnabled,stopLossPercent:(Ze=ut.settings)==null?void 0:Ze.stopLossPercent,takeProfitEnabled:(at=ut.settings)==null?void 0:at.takeProfitEnabled,takeProfitPercent:(St=ut.settings)==null?void 0:St.takeProfitPercent}}catch(ut){console.error("Failed to parse dealer settings",ut)}const ee=await Ae.getItem(Ae.getUserKey("vault_polymarket_storage"));let fe=null,_e;if(ee)try{const ut=JSON.parse(ee);fe={strategyPrompt:(qe=ut.settings)==null?void 0:qe.strategyPrompt,promptMode:(it=ut.settings)==null?void 0:it.promptMode,selectedPreset:(Lt=ut.settings)==null?void 0:Lt.selectedPreset,marketSelectionMode:(Ie=ut.settings)==null?void 0:Ie.marketSelectionMode,selectedMarkets:(Ge=ut.settings)==null?void 0:Ge.selectedMarkets,allowedCategories:(Tt=ut.settings)==null?void 0:Tt.allowedCategories,maxPositionSizeUSDC:(xt=ut.settings)==null?void 0:xt.maxPositionSizeUSDC,maxOpenPositions:(se=ut.settings)==null?void 0:se.maxOpenPositions,minLiquidity:(J=ut.settings)==null?void 0:J.minLiquidity,minVolume24h:(Z=ut.settings)==null?void 0:Z.minVolume24h,minVolumeThreshold:(ue=ut.settings)==null?void 0:ue.minVolumeThreshold,minLiquidityThreshold:(Se=ut.settings)==null?void 0:Se.minLiquidityThreshold,minSpreadThreshold:(he=ut.settings)==null?void 0:he.minSpreadThreshold,confidenceThreshold:(pe=ut.settings)==null?void 0:pe.confidenceThreshold,bankrollType:(Je=ut.settings)==null?void 0:Je.bankrollType,manualBankroll:(Xe=ut.settings)==null?void 0:Xe.manualBankroll,checkIntervalSeconds:(ot=ut.settings)==null?void 0:ot.checkIntervalSeconds},_e=(Nt=ut.settings)==null?void 0:Nt.strategyPrompt}catch(ut){console.error("Failed to parse polymarket settings",ut)}const Re={version:"1.0",exportedAt:new Date().toISOString(),data:{activityLog:et?JSON.parse(et):[],conversations:sn.length>0?sn:void 0,hyperliquidDealer:{settings:Q,strategyPrompt:Ht||void 0},polymarketDealer:{settings:fe,strategyPrompt:_e},schedulerTasks:Hn?JSON.parse(Hn):[]}},Ue=new Blob([JSON.stringify(Re,null,2)],{type:"application/json"}),en=URL.createObjectURL(Ue),Kt=document.createElement("a");Kt.href=en,Kt.download=`autonomousvault_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Kt),Kt.click(),document.body.removeChild(Kt),URL.revokeObjectURL(en),t("Backup exported successfully!"),F(!1),L("")}catch(wt){console.error("Export failed:",wt),t("Failed to export data")}finally{b(!1)}},G=()=>{L(""),F(!0)},V=()=>{if(!z){t("Please enter your password");return}if(z!==e){t("Incorrect password");return}$(z)},U=Y=>{var P;const H=(P=Y.target.files)==null?void 0:P[0];if(!H)return;const M=new FileReader;M.onload=W=>{var X;try{const ie=(X=W.target)==null?void 0:X.result,oe=JSON.parse(ie);if(!oe.version||!oe.data){t("Invalid backup file format");return}v(oe),m(!0)}catch(ie){console.error("Failed to parse backup file:",ie),t("Failed to read backup file")}},M.readAsText(H),D.current&&(D.current.value="")},A=async()=>{var Y,H,M,P,W,X,ie;if(!(!g||!(n!=null&&n.uid))){k(!0);try{const{data:oe}=g;if((Y=oe.activityLog)!=null&&Y.length){const ce=Ae.getUserKey("agent_activity_log");await Ae.setItem(ce,JSON.stringify(oe.activityLog))}if((H=oe.schedulerTasks)!=null&&H.length){const ce=Ae.getUserKey("agent_scheduler_tasks");await Ae.setItem(ce,JSON.stringify(oe.schedulerTasks))}if((M=oe.hyperliquidDealer)!=null&&M.strategyPrompt){const ce=Ae.getUserKey("vault_dealer_strategy");await Ae.setItem(ce,oe.hyperliquidDealer.strategyPrompt)}const Te=e||N;if((P=oe.conversations)!=null&&P.length){if(!Te){t("ERROR: Password required to import conversations"),k(!1);return}console.log(`[Import] Restoring ${oe.conversations.length} conversations using provided password...`);for(const ce of oe.conversations)try{await na.saveConversation(ce,Te)}catch(de){console.warn(`Failed to restore conversation ${ce.id}`,de)}}if((W=oe.hyperliquidDealer)!=null&&W.settings){const ce=await Ae.getItem(Ae.getUserKey("vault_dealer_storage"));try{const de=ce?JSON.parse(ce):{settings:{}};de.settings={...de.settings,...oe.hyperliquidDealer.settings},await Ae.setItem(Ae.getUserKey("vault_dealer_storage"),JSON.stringify(de))}catch(de){console.error("Failed to merge dealer settings",de)}}if((X=oe.polymarketDealer)!=null&&X.settings||(ie=oe.polymarketDealer)!=null&&ie.strategyPrompt){console.log("[Import] Restoring Polymarket settings:",oe.polymarketDealer);const ce=await Ae.getItem(Ae.getUserKey("vault_polymarket_storage"));try{const de=ce?JSON.parse(ce):{settings:{}};oe.polymarketDealer.settings&&(de.settings={...de.settings,...oe.polymarketDealer.settings}),oe.polymarketDealer.strategyPrompt&&(de.settings={...de.settings,strategyPrompt:oe.polymarketDealer.strategyPrompt}),console.log("[Import] Saving Polymarket settings:",de.settings),await Ae.setItem(Ae.getUserKey("vault_polymarket_storage"),JSON.stringify(de))}catch(de){console.error("Failed to merge polymarket settings",de)}}else console.log("[Import] No Polymarket settings to restore");console.log("[Import] Reloading stores from storage..."),await yt.reloadFromStorage(),await ht.reloadFromStorage(),t("Data restored successfully!"),m(!1),v(null)}catch(oe){console.error("Import failed:",oe),t("Failed to import data")}finally{k(!1)}}},I=async()=>{if(!(!n||c!=="DELETE")){l(!0);try{yt.reset(),ht.reset(),await i(),t("Account deleted successfully")}catch(Y){console.error("Delete account failed:",Y),t(Y.message||"Failed to delete account"),l(!1)}}};return u.jsxs(gt.div,{className:"flex flex-col gap-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[u.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-blue-500/10 rounded",children:u.jsx(Wc,{className:"h-4 w-4 text-blue-400"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Security & Execution"}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5 font-light",children:"Choose how your bot runs and stores keys"})]})]}),u.jsx("div",{className:"p-6",children:u.jsx(ygt,{onTierChange:Y=>t(`Security tier changed to ${Y}`)})})]}),u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:u.jsx(jN,{className:"h-4 w-4 text-white"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Data Backup"}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:"Export your settings to move to another device"})]})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("p",{className:"text-xs text-gray-500 mb-5 font-light leading-relaxed",children:["Export your full configuration history, conversations, and strategies to a JSON file.",u.jsx("br",{}),u.jsx("span",{className:"text-amber-500/80 font-medium",children:" Note: Private keys and sensitive API tokens are never included in exports."})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("button",{onClick:G,disabled:x,className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[u.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10 text-emerald-500 group-hover:text-emerald-400 transition-colors",children:u.jsx(Qs,{size:18})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:x?"Exporting...":"Export Data"}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Download settings backup file"})]})]}),u.jsxs("button",{onClick:()=>{var Y;return(Y=D.current)==null?void 0:Y.click()},className:"group flex items-start gap-4 p-4 border border-gray-800/60 rounded-lg hover:border-gray-700 transition-all text-left",children:[u.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 group-hover:text-blue-400 transition-colors",children:u.jsx(ST,{size:18})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"text-sm font-semibold text-gray-200 block mb-1 group-hover:text-white transition-colors",children:"Import Data"}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-snug",children:"Restore from backup JSON"})]})]}),u.jsx("input",{ref:D,type:"file",accept:".json",onChange:U,className:"hidden"})]})]})]}),u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-red-900/40 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-red-500/10 rounded",children:u.jsx(Ii,{className:"h-4 w-4 text-red-500"})}),u.jsx("div",{className:"flex-1",children:u.jsx("h2",{className:"text-sm font-bold text-red-500 tracking-wide",children:"Danger Zone"})})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("h3",{className:"text-sm font-medium text-red-300 mb-1",children:"Delete Account"}),u.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:["Permanently remove your account and all associated data. This involves clearing your local storage, dealer settings, and cloud database records. ",u.jsx("strong",{className:"text-red-400/80",children:"This action cannot be undone."})]})]}),u.jsx("button",{onClick:()=>o(!0),className:"px-5 py-2.5 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-xs font-semibold hover:bg-red-500 hover:text-white hover:border-red-500 transition-all whitespace-nowrap",children:"Delete Account"})]})]})]}),s&&u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:u.jsx(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[u.jsx("div",{className:"p-3 rounded-full bg-red-500/10",children:u.jsx(Ii,{size:24,className:"text-red-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Delete Account"}),u.jsx("p",{className:"text-xs text-gray-500",children:"This action is irreversible"})]})]}),u.jsxs("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:["All your data will be permanently deleted.",u.jsx("br",{}),"To confirm, type ",u.jsx("strong",{className:"text-white",children:"DELETE"})," below:"]}),u.jsx("input",{type:"text",value:c,onChange:Y=>d(Y.target.value),placeholder:"Type DELETE to confirm",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-red-500/50 focus:ring-1 focus:ring-red-500/20 transition-all mb-5 text-sm"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{o(!1),d("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:I,disabled:c!=="DELETE"||a,className:dt("flex-1 px-4 py-2.5 rounded-lg text-sm font-medium transition-all",c==="DELETE"?"bg-red-500 text-white hover:bg-red-600":"bg-red-500/20 text-red-500/40 cursor-not-allowed"),children:a?"Deleting...":"Delete Account"})]})]})})}),h&&g&&u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:u.jsx(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[u.jsx("div",{className:"p-3 rounded-full bg-blue-500/10",children:u.jsx(ST,{size:24,className:"text-blue-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Import Backup"}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(g.exportedAt).toLocaleDateString()]})]})]}),u.jsxs("div",{className:"border border-gray-800 rounded-lg p-4 mb-5 space-y-2",children:[u.jsx("p",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-2",children:"Data to restore:"}),(j=g.data.activityLog)!=null&&j.length?u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[u.jsx(Am,{size:12,className:"text-emerald-500"}),u.jsxs("span",{children:["Activity Log (",g.data.activityLog.length," items)"]})]}):null,(q=g.data.conversations)!=null&&q.length?u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[u.jsx(Am,{size:12,className:"text-emerald-500"}),u.jsxs("span",{children:["Conversations (",g.data.conversations.length," chats)"]})]}):null,(K=g.data.hyperliquidDealer)!=null&&K.settings?u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[u.jsx(Am,{size:12,className:"text-emerald-500"}),u.jsx("span",{children:"Hyperliquid Dealer Settings"})]}):null,u.jsxs("div",{className:"text-[10px] text-gray-600 pl-5",children:["...and ",Object.keys(g.data).length-2," other data points"]})]}),(te=g.data.conversations)!=null&&te.length?u.jsxs("div",{className:"mb-5",children:[u.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Encryption password required:"}),u.jsx("input",{type:"password",value:N,onChange:Y=>O(Y.target.value),placeholder:"Enter encryption password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-blue-500/50 transition-all text-sm"}),!N&&!e&&u.jsxs("p",{className:"text-[10px] text-amber-500 mt-1.5 flex items-center gap-1",children:[u.jsx(Ii,{size:10})," Password required to decrypt conversations"]})]}):null,u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{m(!1),v(null),O("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:A,disabled:w,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors disabled:opacity-50",children:w?"Importing...":"Restore Data"})]})]})})}),_&&u.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:u.jsx(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#13141A] border border-gray-800 w-full max-w-md rounded-xl shadow-2xl overflow-hidden",children:u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[u.jsx("div",{className:"p-3 rounded-full bg-emerald-500/10",children:u.jsx(Qs,{size:24,className:"text-emerald-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-white tracking-tight",children:"Confirm Export"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Security check required"})]})]}),u.jsx("p",{className:"text-sm text-gray-400 mb-5 leading-relaxed",children:"Please enter your Vault password to authorize the export. This ensures only you can download your data."}),u.jsx("div",{className:"mb-5",children:u.jsx("input",{type:"password",value:z,onChange:Y=>L(Y.target.value),placeholder:"Enter Vault password",className:"w-full px-4 py-2.5 bg-transparent border border-gray-800 rounded-lg text-white placeholder:text-gray-600 focus:outline-none focus:border-emerald-500/50 transition-all text-sm",onKeyDown:Y=>{Y.key==="Enter"&&V()}})}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{F(!1),L("")},className:"flex-1 px-4 py-2.5 bg-gray-800 rounded-lg text-gray-300 text-sm font-medium hover:bg-gray-700 transition-colors",children:"Cancel"}),u.jsx("button",{onClick:V,className:"flex-1 px-4 py-2.5 bg-white text-black rounded-lg text-sm font-semibold hover:bg-gray-200 transition-colors",children:"Export"})]})]})})})]})},bO={operator:{name:"Chat Operator",shortName:"Operator",icon:u.jsx(ET,{size:16}),description:"Chat assistant",color:"#9b87f5"},hyperliquidDealer:{name:"Hyperliquid Dealer",shortName:"Hyperliquid",icon:u.jsx(on,{size:16}),description:"Perp trading",color:"#E7FE55"},polymarketDealer:{name:"Polymarket Dealer",shortName:"Polymarket",icon:u.jsx(cy,{size:16}),description:"Predictions",color:"#22d3ee"}},vgt=({vault:t,password:e,addNotification:n,activeTab:r,setActiveTab:i})=>{const[s,o]=S.useState("gemini"),[a,l]=S.useState({gemini:"",openai:"",claude:""}),[c,d]=S.useState({gemini:!1,openai:!1,claude:!1}),[h,m]=S.useState({gemini:"empty",openai:"empty",claude:"empty"}),[g,v]=S.useState({operator:{providerType:"gemini",modelId:"gemini-2.5-flash"},hyperliquidDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"},polymarketDealer:{providerType:"gemini",modelId:"gemini-2.5-flash"}}),[x,b]=S.useState("devnet"),[w,k]=S.useState("testnet");S.useEffect(()=>{const L=An.getSnapshot(),$={gemini:"",openai:"",claude:""},G={gemini:"empty",openai:"empty",claude:"empty"};for(const U of["gemini","openai","claude"]){const A=An.getApiKey(U);$[U]=A,G[U]=A?"saved":"empty"}l($),m(G),v(L.componentConfigs);const V=An.subscribe(()=>{const U=An.getSnapshot();v(U.componentConfigs)});return()=>{V()}},[]);const N=(L,$)=>{l(V=>({...V,[L]:$}));const G=An.getApiKey(L);m(V=>({...V,[L]:$===""?"empty":$!==G?"modified":"saved"}))},O=L=>{const $=a[L].trim();$&&(An.setApiKey(L,$),m(G=>({...G,[L]:"saved"})),n(`${Ou[L].name} API Key saved!`))},D=L=>{An.clearApiKey(L),l($=>({...$,[L]:""})),m($=>({...$,[L]:"empty"})),n(`${Ou[L].name} API Key cleared`)},_=(L,$)=>{var A;const V=((A=Ty[$][0])==null?void 0:A.id)||"",U={providerType:$,modelId:V};An.isProviderConfigured($)?(An.setComponentConfig(L,U),n(`${bO[L].name} now using ${Ou[$].name}`)):n(`Please configure ${Ou[$].name} API key first`)},F=(L,$)=>{const G=g[L],V={...G,modelId:$};An.setComponentConfig(L,V);const U=Ty[G.providerType].find(A=>A.id===$);n(`${bO[L].name} model changed to ${(U==null?void 0:U.name)||$}`)},z=()=>An.getConfiguredProviders();return u.jsx(gt.div,{className:"h-full flex flex-col overflow-y-auto custom-scrollbar",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:u.jsx("div",{className:"flex-1 w-full max-w-5xl mx-auto px-6 py-8 flex flex-col gap-6",children:r==="user"?u.jsx(xgt,{addNotification:n,password:e}):u.jsxs("div",{className:"columns-1 lg:columns-2 gap-6 space-y-6",children:[u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center justify-between font-light",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:u.jsx(xre,{className:"h-4 w-4 text-white"})}),u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"AI Providers"})]}),u.jsx("div",{className:"flex items-center gap-2",children:["gemini","openai","claude"].map(L=>u.jsx("div",{className:dt("w-1.5 h-1.5 rounded-full transition-all",h[L]==="saved"?"bg-emerald-500":"bg-gray-700"),title:`${Ou[L].name}: ${h[L]==="saved"?"Configured":"Not configured"}`},L))})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("div",{className:"flex items-center gap-6 border-b border-gray-800/60 mb-6 pb-1",children:["gemini","openai","claude"].map(L=>{const $=s===L;return u.jsxs("button",{onClick:()=>o(L),className:dt("relative pb-3 text-sm font-medium transition-all",$?"text-white":"text-gray-500 hover:text-gray-300"),children:[Ou[L].name,$&&u.jsx(gt.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-[#E7FE55]"})]},L)})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("label",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider flex items-center gap-2",children:[u.jsx("span",{children:"API Key"}),h[s]==="saved"&&u.jsxs("span",{className:"text-emerald-500 flex items-center gap-1 normal-case tracking-normal bg-emerald-500/10 px-2 py-0.5 rounded text-[10px] font-semibold",children:[u.jsx(Am,{size:10})," Saved"]})]}),u.jsxs("a",{href:Ou[s].keyUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[#E7FE55] hover:underline flex items-center gap-1 transition-colors",children:["Get API key ",u.jsx(Ed,{size:10})]})]}),u.jsxs("div",{className:"relative group mb-4",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(H1,{size:14,className:"text-gray-600 group-focus-within:text-white transition-colors"})}),u.jsx("input",{type:c[s]?"text":"password",value:a[s],onChange:L=>N(s,L.target.value),placeholder:`Enter ${Ou[s].name} key...`,className:"w-full bg-transparent border border-gray-800 rounded-lg py-2.5 pl-10 pr-10 text-sm text-gray-200 focus:outline-none focus:border-[#E7FE55]/50 focus:ring-1 focus:ring-[#E7FE55]/20 font-mono transition-all placeholder:text-gray-700"}),u.jsx("button",{type:"button",onClick:()=>d(L=>({...L,[s]:!L[s]})),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600 hover:text-white transition-colors",children:c[s]?u.jsx(DN,{size:14}):u.jsx(zD,{size:14})})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:()=>O(s),disabled:h[s]!=="modified",className:dt("h-9 px-5 rounded-lg text-sm font-medium transition-all",h[s]==="modified"?"bg-white text-black hover:bg-gray-200":"bg-gray-800/50 text-gray-500 cursor-not-allowed border border-gray-800"),children:"Save Changes"}),h[s]!=="empty"&&u.jsx("button",{onClick:()=>D(s),className:"h-9 px-4 rounded-lg text-sm text-gray-500 hover:text-red-400 hover:bg-red-500/10 transition-all ml-auto",children:"Disconnect"})]})]})]})]}),u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:u.jsx(I2,{className:"h-4 w-4 text-white"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Network Settings"}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5 font-light",children:"Configure blockchain connections"})]})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:u.jsx(Mo,{size:14,className:"text-[#9945FF]"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Solana"}),u.jsx("span",{className:"text-xs text-gray-600 block",children:"Blockchain Network"})]})]}),u.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[u.jsx("button",{onClick:()=>b("devnet"),className:dt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",x==="devnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Devnet"}),u.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",u.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-800/40",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800/50 border border-gray-800 flex items-center justify-center",children:u.jsx(on,{size:14,className:"text-[#E7FE55]"})}),u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-300 font-medium block",children:"Hyperliquid"}),u.jsx("span",{className:"text-xs text-gray-600 block",children:"Trading Engine"})]})]}),u.jsxs("div",{className:"flex rounded-lg p-1 border border-gray-800/60",children:[u.jsx("button",{onClick:()=>k("testnet"),className:dt("px-4 py-1.5 rounded-md text-xs font-medium transition-all",w==="testnet"?"bg-gray-800 text-white":"text-gray-500 hover:text-gray-300"),children:"Testnet"}),u.jsxs("button",{disabled:!0,className:"px-4 py-1.5 rounded-md text-xs text-gray-600 flex items-center gap-1.5 cursor-not-allowed opacity-60",children:["Mainnet ",u.jsx("span",{className:"text-[9px] bg-gray-800 text-gray-400 px-1 rounded uppercase tracking-wider",children:"Soon"})]})]})]})]})]}),u.jsxs("section",{className:"glass-panel rounded break-inside-avoid",children:[u.jsxs("div",{className:"px-6 py-4 border-b border-gray-800/60 flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gray-800/30 rounded",children:u.jsx(Si,{className:"h-4 w-4 text-white"})}),u.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"Model Assignment"})]}),u.jsx("div",{className:"p-6",children:u.jsx("div",{className:"flex flex-col gap-4",children:["operator","hyperliquidDealer","polymarketDealer"].map(L=>{const $=bO[L],G=g[L],V=Ty[G.providerType],U=z(),A=U.includes(G.providerType);return u.jsxs("div",{className:"group p-4 rounded-lg border border-gray-800/60 hover:border-gray-700 transition-all duration-300",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"p-1.5 rounded-lg shrink-0",style:{backgroundColor:`${$.color}10`,color:$.color},children:$.icon}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:$.shortName}),u.jsx("span",{className:dt("w-2 h-2 rounded-full",A?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]":"bg-amber-500")})]}),u.jsx("p",{className:"text-[11px] text-gray-500 mt-0.5",children:$.description})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Provider"}),u.jsxs(Zee,{value:G.providerType,onValueChange:I=>_(L,I),children:[u.jsx(Qj,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:u.jsx(ete,{})}),u.jsx(Zj,{className:"bg-[#1A1B21] border-[#2E2F36]",children:["gemini","openai","claude"].map(I=>{const j=Ou[I],q=U.includes(I);return u.jsx(eD,{value:I,disabled:!q,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:j.name}),!q&&u.jsx("span",{className:"opacity-50 text-[10px] ml-auto",children:"(no key)"})]})},I)})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] text-gray-500 font-semibold uppercase tracking-wider mb-1.5 block",children:"Model"}),u.jsxs(Zee,{value:G.modelId,onValueChange:I=>F(L,I),children:[u.jsx(Qj,{className:"w-full h-9 bg-transparent border-gray-800 hover:border-gray-700 text-xs text-gray-300 focus:ring-1 focus:ring-gray-700 transition-colors",children:u.jsx(ete,{})}),u.jsx(Zj,{className:"bg-[#1A1B21] border-[#2E2F36]",children:V.map(I=>u.jsx(eD,{value:I.id,className:"text-xs text-gray-300 focus:bg-[#2E2F36] focus:text-white",children:I.name},I.id))})]})]})]})]},L)})})})]})]})})})},bgt=(t,e,n)=>t*n.inputPricePerMillion/1e6+e*n.outputPricePerMillion/1e6,wgt=({addNotification:t})=>{const[e,n]=S.useState(null),[r,i]=S.useState([]),[s,o]=S.useState(!1),[a,l]=S.useState(!1),[c,d]=S.useState(20),[h,m]=S.useState("ALL"),[g,v]=S.useState(Os.getSnapshot().pricing),[x,b]=S.useState(Os.getSnapshot().pricing),w=F=>{const z=Os.getRecords(1e3),L=Os.getStats();if(!L)return null;const $=new Date,G=new Date($.getFullYear(),$.getMonth(),$.getDate()).getTime(),V=new Date($.getFullYear(),$.getMonth(),1).getTime();let U=0;const A={MANAGER:0,DEALER:0,POLYMARKET_DEALER:0},I={input:0,output:0,cost:0},j={input:0,output:0,cost:0};for(const q of z){const K=bgt(q.inputTokens,q.outputTokens,F);U+=K,A[q.source]+=K,q.timestamp>=G&&(I.input+=q.inputTokens,I.output+=q.outputTokens,I.cost+=K),q.timestamp>=V&&(j.input+=q.inputTokens,j.output+=q.outputTokens,j.cost+=K)}return{...L,totalCost:U,bySource:{MANAGER:{...L.bySource.MANAGER,cost:A.MANAGER},DEALER:{...L.bySource.DEALER,cost:A.DEALER},POLYMARKET_DEALER:{...L.bySource.POLYMARKET_DEALER,cost:A.POLYMARKET_DEALER}},today:I,thisMonth:j}};S.useEffect(()=>{const F=()=>{n(w(x)),i(Os.getRecords(c,h==="ALL"?void 0:h))};F();const z=Os.subscribe(F);return()=>{z()}},[c,h]),S.useEffect(()=>{const F=w(x);n(F)},[x]);const k=()=>{Os.updatePricing(g),b({...g}),t("Pricing updated successfully")},N=()=>{confirm("Are you sure you want to clear all token usage history?")&&(Os.clearHistory(),t("Token usage history cleared"))},O=F=>F>=1e6?(F/1e6).toFixed(2)+"M":F>=1e3?(F/1e3).toFixed(1)+"K":F.toFixed(0),D=F=>"$"+F.toFixed(4),_=F=>new Date(F).toLocaleString();return e?u.jsxs(gt.div,{className:"h-full flex flex-col space-y-6 overflow-y-auto px-1 pb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx(Zs,{className:"border-slate-700/50 bg-gradient-to-br from-slate-900/80 to-slate-800/30",children:u.jsxs(Uu,{className:"p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:u.jsx(Mo,{className:"text-indigo-400",size:20})}),u.jsx("span",{className:"text-sm text-slate-400",children:"Total Tokens"})]}),u.jsxs(Tr,{variant:"ghost",size:"sm",onClick:N,className:"h-7 px-2 text-xs text-slate-400 hover:text-red-400 hover:bg-red-500/10",children:[u.jsx(_h,{size:14,className:"mr-1"})," Clear"]})]}),u.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.totalInputTokens+e.totalOutputTokens)}),u.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-slate-500",children:[u.jsxs("span",{children:["In: ",O(e.totalInputTokens)]}),u.jsxs("span",{children:["Out: ",O(e.totalOutputTokens)]})]})]})}),u.jsx(Zs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:u.jsxs(Uu,{className:"p-5",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:u.jsx(vT,{className:"text-amber-400",size:20})}),u.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"})]}),u.jsx("div",{className:"text-2xl font-bold text-amber-400",children:D(e.totalCost)}),u.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"Estimated based on current pricing"})]})}),u.jsx(Zs,{className:"border-emerald-500/30 bg-gradient-to-br from-slate-900/80 to-emerald-950/20",children:u.jsxs(Uu,{className:"p-5",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/20",children:u.jsx(on,{className:"text-emerald-400",size:20})}),u.jsx("span",{className:"text-sm text-slate-400",children:"Today"})]}),u.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.today.input+e.today.output)}),u.jsx("div",{className:"text-xs text-emerald-400 mt-2",children:D(e.today.cost)})]})}),u.jsx(Zs,{className:"border-blue-500/30 bg-gradient-to-br from-slate-900/80 to-blue-950/20",children:u.jsxs(Uu,{className:"p-5",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:u.jsx(Ro,{className:"text-blue-400",size:20})}),u.jsx("span",{className:"text-sm text-slate-400",children:"This Month"})]}),u.jsx("div",{className:"text-2xl font-bold text-white",children:O(e.thisMonth.input+e.thisMonth.output)}),u.jsx("div",{className:"text-xs text-blue-400 mt-2",children:D(e.thisMonth.cost)})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs(Zs,{className:"border-indigo-500/30 bg-gradient-to-br from-slate-900/80 to-indigo-950/20",children:[u.jsx(dj,{className:"pb-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:u.jsx(Zb,{className:"text-indigo-400",size:24})}),u.jsxs("div",{children:[u.jsx(fj,{className:"text-base",children:"Vault Operator"}),u.jsx(hj,{children:"User queries and tool calls"})]})]})}),u.jsxs(Uu,{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Total Queries"}),u.jsx("span",{className:"text-white font-medium",children:e.managerMetrics.totalQueries})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Avg Tokens/Query"}),u.jsx("span",{className:"text-white font-medium",children:O(e.managerMetrics.avgTokensPerQuery)})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Interaction"}),u.jsx("span",{className:"text-indigo-400 font-medium",children:e.managerMetrics.totalQueries>0?D(e.bySource.MANAGER.cost/e.managerMetrics.totalQueries):"$0.0000"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),u.jsx("span",{className:"text-indigo-400 font-medium",children:D(e.bySource.MANAGER.cost)})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[u.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[u.jsxs("span",{children:["Input: ",O(e.bySource.MANAGER.input)]}),u.jsxs("span",{children:["Output: ",O(e.bySource.MANAGER.output)]})]}),u.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[u.jsx("div",{className:"bg-indigo-500 h-full",style:{width:`${e.bySource.MANAGER.input/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}}),u.jsx("div",{className:"bg-indigo-300 h-full",style:{width:`${e.bySource.MANAGER.output/(e.bySource.MANAGER.input+e.bySource.MANAGER.output+1)*100}%`}})]})]})]})]}),u.jsxs(Zs,{className:"border-amber-500/30 bg-gradient-to-br from-slate-900/80 to-amber-950/20",children:[u.jsx(dj,{className:"pb-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:u.jsx(Mo,{className:"text-amber-400",size:24})}),u.jsxs("div",{children:[u.jsx(fj,{className:"text-base",children:"Hyperliquid Dealer"}),u.jsx(hj,{children:"Automated analysis cycles"})]})]})}),u.jsxs(Uu,{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Analysis Cycles"}),u.jsx("span",{className:"text-white font-medium",children:e.bySource.DEALER.count})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Coins Analyzed"}),u.jsx("span",{className:"text-white font-medium",children:e.dealerMetrics.totalCoinsAnalyzed})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Cycle"}),u.jsx("span",{className:"text-amber-400 font-medium",children:e.bySource.DEALER.count>0?D(e.bySource.DEALER.cost/e.bySource.DEALER.count):"$0.0000"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Avg Cost/Coin"}),u.jsx("span",{className:"text-amber-400 font-medium",children:e.dealerMetrics.totalCoinsAnalyzed>0?D(e.bySource.DEALER.cost/e.dealerMetrics.totalCoinsAnalyzed):"$0.0000"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-sm text-slate-400",children:"Total Cost"}),u.jsx("span",{className:"text-amber-400 font-medium",children:D(e.bySource.DEALER.cost)})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:[u.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[u.jsxs("span",{children:["Input: ",O(e.bySource.DEALER.input)]}),u.jsxs("span",{children:["Output: ",O(e.bySource.DEALER.output)]})]}),u.jsxs("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden flex",children:[u.jsx("div",{className:"bg-amber-500 h-full",style:{width:`${e.bySource.DEALER.input/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}}),u.jsx("div",{className:"bg-amber-300 h-full",style:{width:`${e.bySource.DEALER.output/(e.bySource.DEALER.input+e.bySource.DEALER.output+1)*100}%`}})]})]})]})]})]}),u.jsxs(Zs,{children:[u.jsxs("button",{onClick:()=>o(!s),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ly,{size:20,className:"text-slate-400"}),u.jsx("span",{className:"text-white font-medium",children:"Pricing Configuration"})]}),s?u.jsx(Ph,{size:20,className:"text-slate-400"}):u.jsx(Oo,{size:20,className:"text-slate-400"})]}),s&&u.jsxs(Uu,{className:"pt-0 border-t border-slate-700/50",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Input Price (per 1M tokens)"}),u.jsx(Vx,{type:"number",step:"0.01",value:g.inputPricePerMillion,onChange:F=>v(z=>({...z,inputPricePerMillion:parseFloat(F.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Output Price (per 1M tokens)"}),u.jsx(Vx,{type:"number",step:"0.01",value:g.outputPricePerMillion,onChange:F=>v(z=>({...z,outputPricePerMillion:parseFloat(F.target.value)||0})),className:"focus-visible:ring-[#E7FE55]/20 focus-visible:border-[#E7FE55]/30"})]})]}),u.jsx("div",{className:"mt-4 flex justify-end",children:u.jsx(Tr,{onClick:k,variant:"success",size:"sm",children:"Apply Pricing"})})]})]}),u.jsxs(Zs,{children:[u.jsxs("button",{onClick:()=>l(!a),className:"w-full p-4 flex items-center justify-between hover:bg-slate-800/50 rounded-xl transition-all",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Jl,{size:20,className:"text-slate-400"}),u.jsx("span",{className:"text-white font-medium",children:"Usage History"}),u.jsxs(Gi,{variant:"secondary",children:[r.length," records"]})]}),a?u.jsx(Ph,{size:20,className:"text-slate-400"}):u.jsx(Oo,{size:20,className:"text-slate-400"})]}),a&&u.jsxs(Uu,{className:"pt-0 border-t border-slate-700/50",children:[u.jsxs("div",{className:"flex items-center gap-4 mt-4 mb-4",children:[u.jsx("div",{className:"flex bg-slate-800 rounded-lg p-1",children:["ALL","MANAGER","DEALER"].map(F=>u.jsx(Tr,{variant:h===F?"default":"ghost",size:"sm",onClick:()=>m(F),className:"text-xs",children:F},F))}),u.jsxs("select",{value:c,onChange:F=>d(parseInt(F.target.value)),className:"bg-slate-800 border border-slate-700 text-white rounded-lg px-3 py-1.5 text-xs",children:[u.jsx("option",{value:10,children:"10 records"}),u.jsx("option",{value:20,children:"20 records"}),u.jsx("option",{value:50,children:"50 records"})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-slate-400 text-xs uppercase border-b border-slate-700",children:[u.jsx("th",{className:"text-left py-3 px-2",children:"Timestamp"}),u.jsx("th",{className:"text-left py-3 px-2",children:"Source"}),u.jsx("th",{className:"text-left py-3 px-2",children:"Operation"}),u.jsx("th",{className:"text-right py-3 px-2",children:"Input"}),u.jsx("th",{className:"text-right py-3 px-2",children:"Output"}),u.jsx("th",{className:"text-right py-3 px-2",children:"Cost"})]})}),u.jsxs("tbody",{children:[r.map(F=>u.jsxs("tr",{className:"border-b border-slate-800 hover:bg-slate-800/50",children:[u.jsx("td",{className:"py-2 px-2 text-slate-400 text-xs",children:_(F.timestamp)}),u.jsx("td",{className:"py-2 px-2",children:u.jsx(Gi,{variant:F.source==="MANAGER"?"info":"warning",children:F.source})}),u.jsx("td",{className:"py-2 px-2 text-slate-300 text-xs",children:F.operation}),u.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:O(F.inputTokens)}),u.jsx("td",{className:"py-2 px-2 text-right text-slate-300",children:O(F.outputTokens)}),u.jsx("td",{className:"py-2 px-2 text-right text-amber-400 font-medium",children:D(F.inputTokens*x.inputPricePerMillion/1e6+F.outputTokens*x.outputPricePerMillion/1e6)})]},F.id)),r.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"py-8 text-center text-slate-500",children:"No usage records yet."})})]})]})})]})]})]}):u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(gt.div,{className:"h-8 w-8 border-b-2 border-indigo-500 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})})},Egt=t=>{const e=t.match(/Market:\s*(.+?)(?:\s*\||$)/);return e?e[1].slice(0,30):null},Sgt=t=>{if(t>=604800&&t%604800===0){const e=t/604800;return`${e} ${e===1?"Week":"Weeks"}`}if(t>=86400&&t%86400===0){const e=t/86400;return`${e} ${e===1?"Day":"Days"}`}if(t>=3600&&t%3600===0){const e=t/3600;return`${e} ${e===1?"Hour":"Hours"}`}if(t>=60&&t%60===0){const e=t/60;return`${e} ${e===1?"Minute":"Minutes"}`}return`${t}s`},Agt=({status:t,onToggle:e,vaultAddress:n,setActiveTab:r})=>{var $;const[i,s]=S.useState(0),[o,a]=S.useState([]),[l,c]=S.useState({totalPnl:0,winRate:0,totalVolume:0,tradesWithPnl:0}),[d,h]=S.useState(!1),{summary:m,isGenerating:g,cycleCount:v,lastUpdate:x,hasSummary:b}=ume("polymarket"),[w,k]=S.useState(0),N=S.useMemo(()=>t.logs.filter(G=>G.type==="REASONING"||G.type==="SIGNAL").slice(0,20),[t.logs]),O=S.useMemo(()=>{var V,U,A;const G=new Map;for(const I of N){const j=Egt(I.message)||((A=(U=(V=I.details)==null?void 0:V.context)==null?void 0:U.question)==null?void 0:A.slice(0,30));j&&!G.has(j)&&G.set(j,I)}return Array.from(G.entries()).sort((I,j)=>j[1].timestamp-I[1].timestamp).map(([I,j])=>({market:I,log:j}))},[N]);S.useEffect(()=>{O.length>0&&!t.isAnalyzing&&k(0)},[O.length,t.isAnalyzing]);const D=O[w];S.useEffect(()=>{if(t.operationHistory.length>0){let G=0,V=0,U=0,A=0;const I=[];let j=0;t.operationHistory.slice().reverse().forEach(K=>{const te=K.pnl||0;j+=te,G+=te,A+=K.sizeUSDC,te>0?V++:te<0&&U++,I.push({time:K.timestamp,date:new Date(K.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),pnl:j})});const q=V+U;c({totalPnl:G,winRate:q>0?V/q*100:0,totalVolume:A,tradesWithPnl:q}),a(I)}},[t.operationHistory]),S.useEffect(()=>{if(!n)return;const G=async()=>{try{const U=await fs.getBalance();s(U)}catch(U){console.error("Failed to fetch Polymarket balance",U)}};G();const V=setInterval(G,6e4);return()=>clearInterval(V)},[n]);const _=()=>{n&&e(!t.isOn)},F=S.useMemo(()=>t.activePositions.reduce((G,V)=>G+V.unrealizedPnl,0),[t.activePositions]),z=()=>{k(G=>Math.min(O.length-1,G+1))},L=()=>{k(G=>Math.max(0,G-1))};return n?u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[u.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsx("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.isOn?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[u.jsxs("span",{className:"relative flex h-2 w-2",children:[t.isOn&&u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),u.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.isOn?"bg-[#E7FE55]":"bg-red-500"}`})]}),u.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.isOn?"text-[#E7FE55]":"text-[#747580]"}`,children:t.isOn?"ACTIVE":"OFFLINE"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Master"}),u.jsx("button",{onClick:_,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.isOn?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:u.jsx("span",{className:`${t.isOn?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]})}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Profit"}),u.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${l.totalPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[l.totalPnl>=0?"+":"",l.totalPnl.toFixed(2)," USD"]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unrealized PnL"}),u.jsxs("div",{className:`text-xl font-semibold font-mono tracking-tight ${F>=0?"text-[#34d399]":"text-red-400"}`,children:[F>=0?"+":"",F.toFixed(2)," USD"]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Win Rate"}),u.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:[l.winRate.toFixed(1),"%"]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Exposure"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.currentExposure.toLocaleString()]})]}),u.jsx(Kc,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Categories"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:t.settings.allowedCategories.length})]}),u.jsx($1,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Interval"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:Sgt(t.settings.checkIntervalSeconds)})]}),u.jsx(fr,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Position"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.maxPositionSizeUSDC]})]}),u.jsx(tv,{className:"h-4 w-4 text-[#747580]"})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(on,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Performance Curve"})]}),u.jsx("div",{className:"flex-1 w-full",children:o.length>0?u.jsx(dw,{width:"100%",height:"100%",minWidth:100,minHeight:100,children:u.jsxs(Tfe,{data:o,children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"colorPnlPoly",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"5%",stopColor:"#E7FE55",stopOpacity:.2}),u.jsx("stop",{offset:"95%",stopColor:"#E7FE55",stopOpacity:0})]})}),u.jsx(Sw,{strokeDasharray:"3 3",stroke:"#232328",vertical:!1}),u.jsx(Tw,{dataKey:"date",stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1}),u.jsx(kw,{stroke:"#747580",fontSize:10,tickLine:!1,axisLine:!1,tickFormatter:G=>`$${G}`}),u.jsx(Nk,{contentStyle:{backgroundColor:"#14151a",borderColor:"#232328",borderRadius:"4px"},itemStyle:{color:"#E7FE55"},formatter:G=>[`$${G.toFixed(2)}`,"Net PnL"]}),u.jsx(cP,{type:"monotone",dataKey:"pnl",stroke:"#E7FE55",strokeWidth:1.5,fillOpacity:1,fill:"url(#colorPnlPoly)"})]})}):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[u.jsx(zl,{className:"h-8 w-8 mb-2 opacity-40"}),u.jsx("span",{className:"text-[11px]",children:"No performance data yet"})]})})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ao,{className:`h-4 w-4 shrink-0 ${t.isAnalyzing?"text-[#E7FE55] animate-pulse":"text-[#E7FE55]/60"}`}),u.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[u.jsx("button",{onClick:()=>h(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${d?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),u.jsx("button",{onClick:()=>b&&h(!0),disabled:!b,className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${d?"bg-[#E7FE55] text-black":b?"text-[#747580] hover:text-white":"text-[#3a3b42] cursor-not-allowed"}`,title:b?"View AI Summary":`Available after ${2-v} more cycles`,children:"Summary"})]}),t.isAnalyzing&&!d&&u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider animate-pulse",children:"LIVE"})]}),!t.isAnalyzing&&O.length>0&&!d&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:z,disabled:w>=O.length-1,className:`p-1 rounded transition-colors ${w>=O.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous market",children:u.jsx(z1,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[w+1,"/",O.length]}),u.jsx("button",{onClick:L,disabled:w<=0,className:`p-1 rounded transition-colors ${w<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next market",children:u.jsx(il,{size:16})})]})]}),d?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:[v," cycles"]}),g&&u.jsx("span",{className:"text-[10px] text-[#747580] animate-pulse",children:"generating..."})]}),x>0&&u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(x).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:m?u.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m}):u.jsx("p",{className:"text-[13px] text-[#747580] italic",children:"Summary will be generated after 2+ analysis cycles..."})})]}):t.isAnalyzing?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"ANALYZING"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusDetail||t.statusMessage,'"']})})]}):D?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"px-2 py-1 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-xs font-semibold uppercase tracking-wider truncate max-w-[150px]",children:D.market}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(D.log.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed whitespace-pre-wrap",children:['"',(($=D.log.details)==null?void 0:$.fullReason)||D.log.message,'"']})})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider ${t.currentSignal==="BULLISH"?"bg-[#34d399]/15 text-[#34d399]":t.currentSignal==="BEARISH"?"bg-red-500/15 text-red-400":"bg-[#1a1b21] text-[#747580]"}`,children:t.currentSignal||"NEUTRAL"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',t.statusMessage||"Waiting for analysis...",'"']})})]}),u.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Task"}),u.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.currentTask||" Idle"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Status"}),u.jsx("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:t.statusMessage})]}),t.statusDetail&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-12 shrink-0",children:"Info"}),u.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1",children:t.statusDetail})]})]})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(cy,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Active Positions"})]}),u.jsxs("span",{className:"text-[10px] text-[#747580]",children:[t.activePositions.length," / ",t.settings.maxOpenPositions]})]}),t.activePositions.length>0?u.jsx("div",{className:"overflow-auto max-h-[200px] custom-scrollbar",children:u.jsxs("table",{className:"w-full text-xs",children:[u.jsx("thead",{className:"text-[#747580] text-left sticky top-0 bg-[#14151a]",children:u.jsxs("tr",{children:[u.jsx("th",{className:"pb-2 font-medium",children:"Market"}),u.jsx("th",{className:"pb-2 font-medium",children:"Side"}),u.jsx("th",{className:"pb-2 font-medium text-right",children:"Shares"}),u.jsx("th",{className:"pb-2 font-medium text-right",children:"Avg Price"}),u.jsx("th",{className:"pb-2 font-medium text-right",children:"Current"}),u.jsx("th",{className:"pb-2 font-medium text-right",children:"PnL"})]})}),u.jsx("tbody",{className:"text-[#a0a1a8]",children:t.activePositions.map((G,V)=>u.jsxs("tr",{className:"border-t border-[#232328] hover:bg-[#1a1b21]",children:[u.jsxs("td",{className:"py-2 max-w-[200px] truncate",title:G.question,children:[G.question.slice(0,40),"..."]}),u.jsx("td",{className:`py-2 font-medium ${G.outcome==="YES"?"text-[#34d399]":"text-red-400"}`,children:G.outcome}),u.jsx("td",{className:"py-2 text-right font-mono",children:G.shares.toFixed(2)}),u.jsxs("td",{className:"py-2 text-right font-mono",children:[(G.avgPrice*100).toFixed(1),""]}),u.jsxs("td",{className:"py-2 text-right font-mono",children:[(G.currentPrice*100).toFixed(1),""]}),u.jsxs("td",{className:`py-2 text-right font-mono ${G.unrealizedPnl>=0?"text-[#34d399]":"text-red-400"}`,children:[G.unrealizedPnl>=0?"+":"","$",G.unrealizedPnl.toFixed(2)]})]},V))})]})}):u.jsxs("div",{className:"h-24 flex flex-col items-center justify-center text-[#747580] gap-2 bg-[#0f1015] rounded border border-[#232328]",children:[u.jsx(Ih,{className:"h-6 w-6 opacity-40"}),u.jsx("span",{className:"text-[11px]",children:"No active positions"})]})]})]}):u.jsx("div",{className:"flex flex-col h-full items-center justify-center",children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:u.jsx(Ih,{size:32,className:"text-[#E7FE55]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Polymarket Vault Required"}),u.jsxs("p",{className:"text-[#747580] text-sm",children:["To use the Polymarket Dealer, you need to create a ",u.jsx("span",{className:"text-[#E7FE55]",children:"Polymarket Vault"})," first."]}),u.jsx("button",{onClick:()=>r(be.VAULT),className:"mt-4 px-6 py-3 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black font-bold rounded-xl transition-all",children:"Go to Vault Operator"})]})})},Tgt=({settings:t,onUpdateSettings:e,onApplyChanges:n,isOn:r=!1,onToggle:i})=>{const[s,o]=S.useState(t),[a,l]=S.useState(!1);S.useEffect(()=>{o(t)},[t]),S.useEffect(()=>{l(JSON.stringify(s)!==JSON.stringify(t))},[s,t]);const c=v=>{o(x=>({...x,...v}))},d=()=>{e(s),n()},h=()=>{o(t),l(!1)},m=v=>{if(v==="custom")return;if(s.selectedPreset===v){c({selectedPreset:"custom"});return}const x=g1[v];x&&c({selectedPreset:v,allowedCategories:x.categories})},g=v=>{const x=s.allowedCategories,b=x.includes(v)?x.filter(w=>w!==v):[...x,v];c({allowedCategories:b})};return u.jsx("div",{className:"h-full flex flex-col gap-4 overflow-y-auto custom-scrollbar",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{className:"glass-panel p-4 rounded",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`h-10 w-10 rounded flex items-center justify-center ${r?"bg-[#E7FE55]/15 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}`,children:u.jsx(Mo,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("span",{className:"block text-sm font-semibold text-white",children:"Engine Status"}),u.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[u.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r?"bg-[#E7FE55] animate-pulse":"bg-[#747580]"}`}),u.jsx("span",{className:"text-[10px] text-[#747580] font-medium uppercase tracking-wider",children:r?"Active & Running":"Stopped"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[i&&u.jsx("button",{onClick:()=>i(!r),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${r?"bg-[#E7FE55]":"bg-[#3a3b42]"}`,children:u.jsx("span",{className:`${r?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-black transition-transform shadow`})}),a&&u.jsxs("button",{onClick:h,className:"flex items-center gap-2 bg-[#1a1b21] hover:bg-[#232328] text-[#747580] px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all",children:[u.jsx(Ex,{className:"h-3 w-3"})," Reset"]}),u.jsxs("button",{onClick:d,disabled:!a,className:`flex items-center gap-2 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all active:scale-95
                                        ${a?"bg-[#E7FE55] hover:bg-[#d4e94d] text-black":"bg-[#1a1b21] text-[#747580] cursor-not-allowed opacity-50"}`,children:[u.jsx(Jl,{className:"h-3 w-3"})," Apply"]})]})]})}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(q1,{className:"h-3.5 w-3.5"})," Strategy Preset"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(g1).filter(([v])=>v!=="custom").map(([v,x])=>u.jsxs("button",{onClick:()=>m(v),className:`p-3 rounded border text-left transition-all ${s.selectedPreset===v?"border-[#E7FE55] bg-[#E7FE55]/10":"border-[#232328] hover:border-[#747580] bg-[#0f1015]"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-sm",children:x.emoji}),u.jsx("span",{className:"text-[11px] font-semibold text-white",children:x.name})]}),u.jsx("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:x.description})]},v))})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(tv,{className:"h-3.5 w-3.5"})," Capital & Risk"]}),u.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Type"}),u.jsxs("div",{className:"flex gap-0.5",children:[u.jsx("button",{onClick:()=>c({bankrollType:"MANUAL"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="MANUAL"?"bg-[#60a5fa] text-white":"text-[#747580] hover:text-white"}`,children:"Fix"}),u.jsx("button",{onClick:()=>c({bankrollType:"ALL_AVAILABLE"}),className:`flex-1 py-1 text-[9px] font-semibold rounded transition-all ${s.bankrollType==="ALL_AVAILABLE"?"bg-[#34d399] text-white":"text-[#747580] hover:text-white"}`,children:"Max"})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Amount ($)"}),s.bankrollType==="MANUAL"?u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-24",value:s.manualBankroll||0,onChange:v=>c({manualBankroll:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({manualBankroll:(s.manualBankroll||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({manualBankroll:Math.max(0,(s.manualBankroll||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]}):u.jsx("span",{className:"text-sm font-mono text-[#34d399]",children:"Auto"})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Pos ($)"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-24",value:s.maxPositionSizeUSDC||0,onChange:v=>c({maxPositionSizeUSDC:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxPositionSizeUSDC:(s.maxPositionSizeUSDC||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({maxPositionSizeUSDC:Math.max(0,(s.maxPositionSizeUSDC||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Max Open"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-10",value:s.maxOpenPositions||1,onChange:v=>c({maxOpenPositions:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({maxOpenPositions:(s.maxOpenPositions||1)+1}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({maxOpenPositions:Math.max(1,(s.maxOpenPositions||1)-1)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(fr,{className:"h-3.5 w-3.5"})," Analysis Settings"]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Interval"}),u.jsx(dme,{value:s.checkIntervalSeconds||60,onChange:v=>c({checkIntervalSeconds:v})})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Volume"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:"text-[10px] text-[#747580]",children:"$"}),u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-16",value:s.minVolumeThreshold||0,onChange:v=>c({minVolumeThreshold:v})})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minVolumeThreshold:(s.minVolumeThreshold||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({minVolumeThreshold:Math.max(0,(s.minVolumeThreshold||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Min Liquidity"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:"text-[10px] text-[#747580]",children:"$"}),u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-16",value:s.minLiquidityThreshold||0,onChange:v=>c({minLiquidityThreshold:v})})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minLiquidityThreshold:(s.minLiquidityThreshold||0)+100}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({minLiquidityThreshold:Math.max(0,(s.minLiquidityThreshold||0)-100)}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]})]})]})]}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide",children:[u.jsx(vre,{className:"h-3.5 w-3.5"})," Market Categories"]}),u.jsx("span",{className:"text-[10px] bg-[#E7FE55]/15 text-[#E7FE55] px-2 py-0.5 rounded border border-[#E7FE55]/30 font-mono",children:s.allowedCategories.length})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:awe.map(v=>u.jsxs("button",{onClick:()=>g(v.value),className:`px-3 py-1.5 rounded-full text-xs flex items-center gap-1.5 transition-all ${s.allowedCategories.includes(v.value)?"bg-[#E7FE55]/20 text-[#E7FE55] border border-[#E7FE55]/50":"bg-[#0f1015] text-[#747580] border border-[#232328] hover:border-[#747580]"}`,children:[u.jsx("span",{children:v.icon}),v.label]},v.value))})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[#E7FE55] font-bold uppercase tracking-wide mb-3",children:[u.jsx(on,{className:"h-3.5 w-3.5"})," Market Filters"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Spread Edge"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-16",value:s.minSpreadThreshold!=null?s.minSpreadThreshold:.02,onChange:v=>c({minSpreadThreshold:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minSpreadThreshold:parseFloat(((s.minSpreadThreshold||.02)+.01).toFixed(2))}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({minSpreadThreshold:Math.max(0,parseFloat(((s.minSpreadThreshold||.02)-.01).toFixed(2)))}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]}),u.jsxs("div",{className:"bg-[#0f1015] p-3 rounded border border-[#232328]",children:[u.jsx("label",{className:"block text-[9px] text-[#747580] uppercase tracking-wider mb-1.5",children:"Confidence"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(eo,{className:"text-sm font-bold font-mono text-white bg-transparent outline-none w-16",value:s.confidenceThreshold!=null?s.confidenceThreshold:.6,onChange:v=>c({confidenceThreshold:v})}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({confidenceThreshold:Math.min(1,parseFloat(((s.confidenceThreshold||.6)+.05).toFixed(2)))}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:8})}),u.jsx("button",{onClick:()=>c({confidenceThreshold:Math.max(0,parseFloat(((s.confidenceThreshold||.6)-.05).toFixed(2)))}),className:"p-0.5 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:8})})]})]})]})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-start gap-3",children:[u.jsx(V1,{className:"h-4 w-4 text-[#E7FE55] shrink-0 mt-0.5"}),u.jsx("div",{children:u.jsxs("p",{className:"text-[10px] text-[#747580] leading-relaxed",children:[u.jsx("strong",{className:"text-[#a0a1a8]",children:"Polymarket Data:"})," Market data is fetched via the CLOB API. Categories filter which markets are analyzed. Higher confidence = fewer but more certain trades."]})})]})]})]})})},kgt=({settings:t,onUpdateSettings:e,onApplyChanges:n})=>{var x,b;const[r,i]=S.useState(t.strategyPrompt),[s,o]=S.useState(!1),[a,l]=S.useState(t.promptMode||"preset"),[c,d]=S.useState(t.selectedPreset||"balanced");S.useEffect(()=>{i(t.strategyPrompt),l(t.promptMode||"preset"),d(t.selectedPreset||"balanced")},[t.strategyPrompt,t.promptMode,t.selectedPreset]),S.useEffect(()=>{o(r!==t.strategyPrompt)},[r,t.strategyPrompt]);const h=w=>{if(w==="custom")l("custom"),d("custom"),o(!0);else{if(c===w&&a==="preset"){l("custom"),d("custom"),o(!0);return}const k=dT[w];i(k),l("preset"),d(w),o(k!==t.strategyPrompt)}},m=w=>{i(w);const k=Object.entries(dT).find(([N,O])=>O===w);k?(l("preset"),d(k[0])):(l("custom"),d("custom")),o(w!==t.strategyPrompt)},g=()=>{e({strategyPrompt:r,promptMode:a,selectedPreset:c}),n(),o(!1)},v=w=>`
            flex items-center gap-1.5 px-3 py-1.5 rounded text-[10px] font-semibold uppercase tracking-[0.08em] transition-all
            ${c===w&&a==="preset"||a==="custom"&&w==="custom"?"bg-[#E7FE55] text-black":"bg-transparent text-[#747580] hover:text-[#a0a1a8] hover:bg-[#1a1b21]"}
        `;return u.jsxs("div",{className:"h-full flex flex-col gap-4 overflow-hidden",children:[u.jsx("div",{className:"glass-panel p-4 shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(q1,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Strategy Prompt"})]}),u.jsx("span",{className:"text-[12px] text-[#747580] font-medium leading-tight",children:"Presets are examples only. You are responsible for your strategy prompt."})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`
                            inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-[9px] font-semibold uppercase tracking-wider
                            ${a==="preset"?"bg-[#E7FE55]/10 text-[#E7FE55]":"bg-[#1a1b21] text-[#747580]"}
                        `,children:[u.jsx("span",{className:`h-1 w-1 rounded-full ${a==="preset"?"bg-[#E7FE55]":"bg-[#747580]"}`}),a==="preset"?`${(x=g1[c])==null?void 0:x.emoji} ${(b=g1[c])==null?void 0:b.name}`:"Custom"]}),s&&u.jsx("span",{className:"text-[9px] text-amber-500 uppercase tracking-wider font-medium",children:" Unsaved"}),u.jsxs("button",{onClick:g,disabled:!s,className:`
                                flex items-center gap-2 px-4 py-1.5 rounded text-[10px] font-semibold uppercase tracking-wider transition-all
                                ${s?"bg-[#E7FE55] hover:bg-[#f0ff7a] text-black":"bg-[#1a1b21] text-[#3a3b42] cursor-not-allowed"}
                            `,children:[u.jsx(HD,{className:"h-3.5 w-3.5"}),"Save"]})]})]})}),u.jsxs("div",{className:"flex-1 flex gap-4 min-h-0 overflow-hidden",children:[u.jsxs("div",{className:"w-40 shrink-0 flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5 px-1 py-2",children:[u.jsx(Are,{size:12,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] font-semibold",children:"Presets"})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[Object.entries(g1).filter(([w])=>w!=="custom").map(([w,k])=>u.jsxs("button",{onClick:()=>h(w),className:v(w),children:[u.jsx("span",{children:k.emoji}),u.jsx("span",{children:k.name})]},w)),u.jsx("div",{className:"h-px bg-[#232328] my-2"}),u.jsxs("button",{onClick:()=>h("custom"),className:v("custom"),children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Custom"})]})]}),u.jsx("div",{className:"mt-auto pt-4 px-1",children:u.jsx("p",{className:"text-[10px] text-[#3a3b42] leading-relaxed",children:"Edit the prompt to switch to custom mode automatically."})})]}),u.jsxs("div",{className:"flex-1 glass-panel relative overflow-hidden flex flex-col",children:[u.jsx("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-[#1e2028] to-transparent pointer-events-none z-10"}),u.jsx("textarea",{value:r,onChange:w=>m(w.target.value),className:"w-full h-full bg-transparent text-[#a0a1a8] font-mono text-[13px] p-5 resize-none focus:outline-none leading-relaxed custom-scrollbar selection:bg-[#E7FE55]/30",spellCheck:!1,placeholder:`// Define your prediction market strategy here...
// 
// Example:
// You are a probability analyst focusing on mispriced markets.
// 1. Look for markets with high volume and clear catalysts.
// 2. Prioritize events with upcoming resolution dates.
// 3. Consider news sentiment and expert opinions.`}),u.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-[#1e2028] to-transparent pointer-events-none z-10"}),u.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity",children:[u.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-[#E7FE55]"}),u.jsx("span",{className:"text-[9px] text-[#747580] font-mono uppercase tracking-wider",children:"Live Context"})]})]})]})]})},Ngt=({logs:t,onClearLogs:e})=>{const[n,r]=S.useState(null),i=t.filter(a=>{if(["REASONING","SIGNAL","TRADE","ERROR"].includes(a.type))return!0;if(["INFO","WARNING"].includes(a.type)){const l=a.message.toLowerCase();return l.includes("executing")||l.includes("skipping")||l.includes("ignored")||l.includes("position")}return!1}),s=(a,l)=>a==="ERROR"?u.jsx("div",{className:"text-red-400",children:u.jsx(Br,{size:16})}):a==="TRADE"?u.jsx("div",{className:"text-[#34d399]",children:u.jsx(Ed,{size:16})}):l.includes("YES")||l.includes("BULLISH")?u.jsx("div",{className:"text-[#34d399]",children:u.jsx(on,{size:16})}):l.includes("NO")||l.includes("BEARISH")?u.jsx("div",{className:"text-red-400",children:u.jsx(Ro,{size:16})}):u.jsx("div",{className:"text-[#E7FE55]",children:u.jsx(ao,{size:16})}),o=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});return u.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-[#232328] flex justify-between items-center shrink-0",children:[u.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2 text-white",children:[u.jsx(ao,{className:"h-4 w-4 text-[#E7FE55]"}),"AI Reasoning Log"]}),u.jsx("button",{onClick:e,className:"text-[10px] text-[#747580] hover:text-white transition-colors uppercase tracking-wider",children:"Clear History"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:i.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-[#747580] opacity-50 py-12",children:[u.jsx(ao,{size:48,className:"mb-4 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No analysis recorded yet."}),u.jsx("p",{className:"text-[10px] text-[#747580]",children:"Start the dealer to see its thought process."})]}):i.map(a=>{var h,m;const l=n===a.id,c=(h=a.details)==null?void 0:h.context,d=(m=a.details)==null?void 0:m.context;return u.jsxs("div",{className:"relative pl-6 pb-2 border-l border-[#232328] last:border-0 transition-colors group",children:[u.jsx("div",{className:"absolute -left-[5px] top-1 w-2.5 h-2.5 rounded-full bg-[#14151a] border border-[#232328] group-hover:border-[#747580] transition-colors"}),u.jsxs("div",{className:"bg-[#14151a] p-3 rounded border border-[#232328] hover:border-[#3a3b42] transition-all",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[s(a.type,a.message),u.jsx("span",{className:`text-[10px] font-semibold uppercase tracking-wider ${a.type==="ERROR"?"text-red-400":a.type==="TRADE"?"text-[#34d399]":a.type==="SIGNAL"?"text-[#E7FE55]":"text-[#a0a1a8]"}`,children:a.type})]}),u.jsxs("span",{className:"text-[10px] text-[#747580] flex items-center gap-1 font-mono",children:[u.jsx(fr,{size:10}),o(a.timestamp)]})]}),u.jsx("p",{className:"text-sm text-[#a0a1a8] leading-relaxed",children:a.message}),a.details&&a.details.fullReason&&u.jsxs("div",{className:"mt-2 p-2 bg-[#0f1015] rounded text-[11px] text-[#747580] font-mono italic border-l-2 border-[#E7FE55]/30 whitespace-pre-wrap",children:['"',typeof a.details.fullReason=="string"?a.details.fullReason:JSON.stringify(a.details.fullReason),'"']}),c&&u.jsxs("button",{onClick:()=>r(l?null:a.id),className:"mt-2 flex items-center gap-1 text-[10px] text-[#E7FE55] hover:text-[#d4eb4d] transition-colors uppercase tracking-wider",children:[l?u.jsx(Ph,{size:12}):u.jsx(Oo,{size:12}),l?"Hide":"Show"," Market Context"]}),l&&c&&u.jsxs("div",{className:"mt-3 p-3 bg-[#0f1015] rounded border border-[#232328] space-y-3",children:[d.question&&u.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Market: ",u.jsxs("span",{className:"text-white",children:[d.question.slice(0,100),d.question.length>100?"...":""]})]}),(d.volume24h||d.liquidity)&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-[#34d399] mb-2 uppercase tracking-wider font-semibold",children:[u.jsx(tv,{size:10}),u.jsx("span",{children:"Market Metrics"})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[d.volume24h&&u.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Volume 24h"}),u.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",d.volume24h.toLocaleString()]})]}),d.liquidity&&u.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Liquidity"}),u.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:["$",d.liquidity.toLocaleString()]})]}),d.spread&&u.jsxs("div",{className:"bg-[#34d399]/10 border border-[#34d399]/20 px-2 py-1 rounded text-[10px]",children:[u.jsx("span",{className:"text-[#34d399] uppercase font-medium",children:"Spread"}),u.jsxs("span",{className:"text-[#4ade80] font-mono ml-2",children:[(d.spread*100).toFixed(2),"%"]})]})]})]}),(d.yesPrice||d.noPrice)&&u.jsxs("div",{className:"text-[10px] text-[#747580]",children:["Prices:",d.yesPrice&&u.jsxs("span",{className:"text-[#34d399] font-mono ml-2",children:["YES: ",(d.yesPrice*100).toFixed(1),""]}),d.noPrice&&u.jsxs("span",{className:"text-red-400 font-mono ml-2",children:["NO: ",(d.noPrice*100).toFixed(1),""]})]}),u.jsx("pre",{className:"text-[9px] text-[#747580] overflow-x-auto whitespace-pre-wrap custom-scrollbar max-h-[200px]",children:JSON.stringify(d,null,2)})]})]})]},a.id)})})]})},Cgt=({log:t,index:e,getLogBadgeVariant:n})=>{const[r,i]=S.useState(!1),s=t.details&&Object.keys(t.details).length>0;return u.jsxs(gt.div,{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:e*.02},children:[u.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString()}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Gi,{variant:n(t.type),className:"text-[9px] uppercase tracking-wider",children:t.type}),u.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),s&&u.jsx("button",{onClick:()=>i(!r),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:r?"Collapse details":"Expand details",children:r?u.jsx(Oo,{className:"h-4 w-4"}):u.jsx(il,{className:"h-4 w-4"})})]}),u.jsx(Ei,{children:s&&r&&u.jsx(gt.pre,{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:JSON.stringify(t.details,null,2)})})]})]},t.id)},Pgt=({status:t,onClearLogs:e})=>{const[n,r]=S.useState("thinking"),i=S.useRef(null);if(!t)return u.jsx("div",{className:"p-4 text-red-500",children:"Error: Status not available"});const s=()=>{const a=JSON.stringify(t.logs,null,2),l="data:application/json;charset=utf-8,"+encodeURIComponent(a),c=`polymarket_logs_${new Date().toISOString()}.json`,d=document.createElement("a");d.setAttribute("href",l),d.setAttribute("download",c),d.click()},o=a=>{switch(a){case"INFO":return"info";case"WARNING":return"warning";case"ERROR":return"destructive";case"TRADE":return"success";case"SIGNAL":return"purple";case"REASONING":return"secondary";default:return"secondary"}};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden p-4",children:[u.jsx("div",{className:"glass-panel p-4 shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[u.jsxs("button",{onClick:()=>r("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(ao,{className:"h-4 w-4"}),"Thinking"]}),u.jsxs("button",{onClick:()=>r("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${n==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(qD,{className:"h-4 w-4"}),"Activity Log",t.logs.length>0&&u.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.logs.length})]})]}),u.jsx(Ei,{children:n==="logs"&&u.jsxs(gt.div,{className:"flex items-center gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[u.jsx("button",{onClick:e,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:u.jsx(_h,{className:"h-4 w-4"})}),u.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:u.jsx(Qs,{className:"h-4 w-4"})})]})})]})}),u.jsxs("div",{className:"glass-panel flex-1 min-h-0 overflow-hidden flex flex-col",children:[n==="thinking"&&u.jsx(Ngt,{logs:t.logs,onClearLogs:e}),n==="logs"&&u.jsx("div",{className:"flex-1 min-h-0 relative",children:u.jsx("div",{ref:i,className:"absolute inset-0 overflow-y-auto custom-scrollbar",children:t.logs.length===0?u.jsxs(gt.div,{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",initial:{opacity:0},animate:{opacity:1},children:[u.jsx(BN,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):u.jsx(Ei,{children:t.logs.map((a,l)=>u.jsx(Cgt,{log:a,index:l,getLogBadgeVariant:o},a.id))})})})]})]})},_gt=({vault:t,password:e,activeTab:n,setActiveTab:r})=>{const i=!!t.pmPublicKey,s=n===be.POLYMARKET_DEALER?be.POLYMARKET_DASHBOARD:n,{state:o,toggleDealer:a,updateSettings:l,applyChanges:c,clearLogs:d}=Q0e(t,e),h=()=>{switch(s){case be.POLYMARKET_DASHBOARD:return"dashboard";case be.POLYMARKET_THINKING:return"thinking";case be.POLYMARKET_CONFIG:return"config";case be.POLYMARKET_PROMPT:return"prompt";default:return"dashboard"}},m=g=>{switch(g){case"dashboard":r(be.POLYMARKET_DASHBOARD);break;case"thinking":r(be.POLYMARKET_THINKING);break;case"config":r(be.POLYMARKET_CONFIG);break;case"prompt":r(be.POLYMARKET_PROMPT);break}};return i?u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[!t.isUnlocked&&u.jsx(gt.div,{className:"mb-3 flex justify-end shrink-0 px-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:u.jsx(Gi,{variant:"destructive",className:"animate-pulse",children:"VAULT LOCKED"})}),u.jsx(Rme,{value:h(),onValueChange:m,className:"flex-1 flex flex-col min-h-0",children:u.jsxs("div",{className:"flex-1 min-h-0 relative",children:[u.jsx(fd,{value:"dashboard",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:u.jsx(Agt,{status:o,onToggle:a,vaultAddress:t.pmPublicKey,setActiveTab:r})}),u.jsx(fd,{value:"thinking",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:u.jsx(Pgt,{status:o,onClearLogs:d})}),u.jsx(fd,{value:"config",forceMount:!0,className:"h-full mt-0 absolute inset-0 overflow-y-auto data-[state=inactive]:hidden",children:u.jsx(Tgt,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c,isOn:o.isOn,onToggle:a})}),u.jsx(fd,{value:"prompt",forceMount:!0,className:"h-full mt-0 absolute inset-0 data-[state=inactive]:hidden",children:u.jsx(kgt,{settings:o.settings,onUpdateSettings:l,onApplyChanges:c})})]})})]}):u.jsx(gt.div,{className:"flex flex-col h-[calc(100vh-8rem)] items-center justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:u.jsxs("div",{className:"max-w-md w-full mx-auto space-y-6 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-[#1a1b21] rounded-full flex items-center justify-center mx-auto mb-4 border border-[#232328]",children:u.jsx(Ih,{size:32,className:"text-[#E7FE55]"})}),u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Create a Vault First"}),u.jsxs("p",{className:"text-[#747580] text-sm",children:["You need to create a Polymarket wallet before using Polymarket Dealer. Go to the ",u.jsx("span",{className:"text-[#E7FE55]",children:"Vault"})," page to set up your wallet."]}),u.jsx(Tr,{onClick:()=>r(be.VAULT),variant:"success",size:"lg",className:"mt-4 bg-[#E7FE55] hover:bg-[#d4eb4d] text-black",children:"Go to Vault"})]})})},tte=({state:t,walletAddress:e})=>{const[n,r]=Ms.useState(!1),[i,s]=Ms.useState(!1),[o,a]=Ms.useState(0),l=async()=>{if(e){r(!0);try{const b=await Bg.getAllPositions(e),w=[...b.meteora.map(k=>{var N,O;return{poolAddress:k.poolAddress,poolName:k.poolAddress.slice(0,8)+"...",protocol:k.protocol,valueUSD:k.valueUSD,unclaimedFeesUSD:k.unclaimedFees.totalUSD,inRange:((N=k.priceRange)==null?void 0:N.inRange)??!0,priceRange:k.priceRange?{min:k.priceRange.min,max:k.priceRange.max}:void 0,currentPrice:(O=k.priceRange)==null?void 0:O.current}}),...b.raydium.map(k=>{var N,O;return{poolAddress:k.poolAddress,poolName:k.poolAddress.slice(0,8)+"...",protocol:k.protocol,valueUSD:k.valueUSD,unclaimedFeesUSD:k.unclaimedFees.totalUSD,inRange:((N=k.priceRange)==null?void 0:N.inRange)??!0,priceRange:k.priceRange?{min:k.priceRange.min,max:k.priceRange.max}:void 0,currentPrice:(O=k.priceRange)==null?void 0:O.current}})];Sr.updatePositions(w),Sr.addLog("INFO",`Refreshed ${w.length} positions`)}catch(b){Sr.addLog("ERROR","Failed to refresh positions",b.message)}r(!1)}},c=t.activePositions.filter(b=>b.inRange).length,d=t.activePositions.filter(b=>!b.inRange).length,h=S.useMemo(()=>t.logs.slice(0,10),[t.logs]),m=h[o],g=()=>{a(b=>Math.min(h.length-1,b+1))},v=()=>{a(b=>Math.max(0,b-1))},x=()=>{const b=!t.settings.policy.enabled;Sr.updatePolicy({enabled:b})};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-y-auto custom-scrollbar pb-4",children:[u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 shrink-0",children:[u.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex flex-wrap items-center justify-between gap-2",children:[u.jsxs("div",{className:`px-3 py-1.5 rounded border flex items-center gap-2 transition-all ${t.settings.policy.enabled?"bg-[#E7FE55]/10 border-[#E7FE55]/30":"bg-[#1a1b21] border-[#232328]"}`,children:[u.jsxs("span",{className:"relative flex h-2 w-2",children:[t.settings.policy.enabled&&u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#E7FE55] opacity-75"}),u.jsx("span",{className:`relative inline-flex rounded-full h-2 w-2 ${t.settings.policy.enabled?"bg-[#E7FE55]":"bg-red-500"}`})]}),u.jsx("span",{className:`font-semibold tracking-wider text-[10px] uppercase ${t.settings.policy.enabled?"text-[#E7FE55]":"text-[#747580]"}`,children:t.settings.policy.enabled?"ACTIVE":"OFFLINE"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] font-medium text-[#747580] uppercase tracking-[0.1em]",children:"Policy"}),u.jsx("button",{onClick:x,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-all focus:outline-none ${t.settings.policy.enabled?"bg-[#E7FE55]":"bg-[#232328] hover:bg-[#2a2b30]"}`,children:u.jsx("span",{className:`${t.settings.policy.enabled?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-black transition-transform`})})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Total Value"}),u.jsxs("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:["$",t.totalValueUSD.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Unclaimed Fees"}),u.jsxs("div",{className:"text-xl font-semibold text-[#34d399] font-mono tracking-tight",children:["+$",t.totalUnclaimedFeesUSD.toFixed(2)]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded",children:[u.jsx("div",{className:"text-[10px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Positions"}),u.jsx("div",{className:"text-xl font-semibold text-white font-mono tracking-tight",children:t.activePositions.length})]})]}),u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"In Range"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:c})]}),u.jsx(LN,{className:"h-4 w-4 text-[#34d399]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Out of Range"}),u.jsx("span",{className:"text-white font-mono text-sm font-semibold",children:d})]}),u.jsx(Lm,{className:"h-4 w-4 text-[#ef4444]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Min TVL"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:["$",t.settings.policy.minTVLRequired.toLocaleString()]})]}),u.jsx(Wc,{className:"h-4 w-4 text-[#747580]"})]}),u.jsxs("div",{className:"glass-panel p-4 rounded flex items-center justify-between",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.1em] mb-1",children:"Max Range"}),u.jsxs("span",{className:"text-white font-mono text-sm font-semibold",children:[t.settings.policy.maxRangeWidthPercent,"%"]})]}),u.jsx(wT,{className:"h-4 w-4 text-[#747580]"})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded min-h-[220px] flex flex-col flex-1",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(bT,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Active LP Positions"})]}),u.jsxs("button",{onClick:l,disabled:n||!e,className:"flex items-center gap-1 px-2 py-1 text-[10px] text-[#747580] hover:text-white transition-colors disabled:opacity-50",children:[u.jsx(Jl,{size:12,className:n?"animate-spin":""}),"Refresh"]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:t.activePositions.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580]",children:[u.jsx(bT,{className:"h-8 w-8 mb-2 opacity-40"}),u.jsx("span",{className:"text-[11px]",children:"No active LP positions"}),u.jsx("span",{className:"text-[10px] text-[#5a5b63] mt-1",children:e?"Use the Vault Operator to open positions":"Connect wallet to view positions"})]}):u.jsx("div",{className:"space-y-2",children:t.activePositions.map((b,w)=>u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328] flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${b.inRange?"bg-[#10b981]":"bg-[#ef4444]"}`}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-white",children:b.poolName}),u.jsx("div",{className:"text-[10px] text-[#747580] uppercase",children:b.protocol.replace("_"," ")})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsxs("div",{className:"text-sm font-medium text-white font-mono",children:["$",b.valueUSD.toLocaleString(void 0,{maximumFractionDigits:2})]}),b.unclaimedFeesUSD>0&&u.jsxs("div",{className:"text-[10px] text-[#10b981] font-mono",children:["+$",b.unclaimedFeesUSD.toFixed(2)," fees"]})]})]},w))})})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ao,{className:`h-4 w-4 shrink-0 ${t.logs.length>0?"text-[#E7FE55]":"text-[#E7FE55]/60"}`}),u.jsxs("div",{className:"flex items-center bg-[#0f1015] rounded-full p-0.5 border border-[#232328]",children:[u.jsx("button",{onClick:()=>s(!1),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${i?"text-[#747580] hover:text-white":"bg-[#E7FE55] text-black"}`,children:"Live"}),u.jsx("button",{onClick:()=>s(!0),className:`px-2 py-0.5 rounded-full text-[9px] font-semibold uppercase tracking-wider transition-all ${i?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-white"}`,children:"Policy"})]})]}),!i&&h.length>0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:g,disabled:o>=h.length-1,className:`p-1 rounded transition-colors ${o>=h.length-1?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Previous activity",children:u.jsx(z1,{size:16})}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono min-w-[32px] text-center",children:[o+1,"/",h.length]}),u.jsx("button",{onClick:v,disabled:o<=0,className:`p-1 rounded transition-colors ${o<=0?"text-[#3a3b42] cursor-not-allowed":"text-[#747580] hover:text-white hover:bg-[#1a1b21]"}`,title:"Next activity",children:u.jsx(il,{size:16})})]})]}),i?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#E7FE55]/15 text-[#E7FE55] text-[9px] font-semibold uppercase tracking-wider",children:"POLICY CONFIG"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsxs("div",{className:"space-y-3 text-[13px]",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-[#747580]",children:"Min TVL Required"}),u.jsxs("span",{className:"text-white font-mono",children:["$",t.settings.policy.minTVLRequired.toLocaleString()]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-[#747580]",children:"Max Range Width"}),u.jsxs("span",{className:"text-white font-mono",children:[t.settings.policy.maxRangeWidthPercent,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-[#747580]",children:"Max Capital/Pool"}),u.jsxs("span",{className:"text-white font-mono",children:[t.settings.policy.maxCapitalPerPoolPercent,"%"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-[#747580]",children:"Confirmation Actions"}),u.jsx("span",{className:"text-white font-mono",children:t.settings.policy.requireConfirmationFor.length})]}),u.jsxs("div",{className:"pt-2 border-t border-[#232328]",children:[u.jsx("span",{className:"text-[#747580] text-[11px] uppercase tracking-wider",children:"Requires Confirmation"}),u.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.settings.policy.requireConfirmationFor.map((b,w)=>u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#232328] text-[#a0a1a8] text-[10px]",children:b},w))})]})]})})]}):m?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold uppercase tracking-wider ${m.type==="ERROR"?"bg-red-500/15 text-red-400":m.type==="WARNING"?"bg-[#f59e0b]/15 text-[#f59e0b]":m.type==="POLICY"?"bg-[#a855f7]/15 text-[#a855f7]":"bg-[#E7FE55]/15 text-[#E7FE55]"}`,children:m.type}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),u.jsxs("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:[u.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed whitespace-pre-wrap",children:m.message}),m.details&&u.jsx("div",{className:"mt-3 pt-3 border-t border-[#232328] text-[11px] text-[#747580] font-mono",children:typeof m.details=="string"?m.details:JSON.stringify(m.details,null,2)})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("span",{className:"px-2 py-0.5 rounded bg-[#1a1b21] text-[#747580] text-[9px] font-semibold uppercase tracking-wider",children:"IDLE"})}),u.jsx("div",{className:"flex-1 bg-[#0f1015] rounded p-3 border border-[#232328] overflow-y-auto custom-scrollbar min-h-0 mb-3",children:u.jsx("p",{className:"text-[13px] text-[#747580] italic leading-relaxed",children:"No recent activity. Start interacting with LP positions to see updates here."})})]}),u.jsxs("div",{className:"pt-3 border-t border-[#232328] flex flex-col gap-2 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Status"}),u.jsx("div",{className:"text-[10px] text-white truncate font-mono flex-1",children:t.settings.policy.enabled?" Policy Active":" Policy Disabled"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Positions"}),u.jsxs("div",{className:"text-[10px] text-[#a0a1a8] font-mono truncate flex-1",children:[t.activePositions.length," active (",c," in range)"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase tracking-[0.05em] w-16 shrink-0",children:"Wallet"}),u.jsx("div",{className:"text-[10px] text-[#E7FE55] truncate flex-1 font-mono",children:e?`${e.slice(0,8)}...${e.slice(-6)}`:"Not connected"})]})]})]})]}),u.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(Si,{className:"h-4 w-4 text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Activity Log"}),u.jsxs("span",{className:"text-[10px] text-[#747580] ml-auto",children:[t.logs.length," entries"]})]}),u.jsxs("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:[t.logs.slice(0,10).map((b,w)=>u.jsxs("div",{className:"py-2 border-b border-[#232328]/50 last:border-0 flex items-start gap-3",children:[u.jsx("span",{className:`text-[10px] font-medium uppercase shrink-0 ${b.type==="ERROR"?"text-[#ef4444]":b.type==="WARNING"?"text-[#f59e0b]":b.type==="POLICY"?"text-[#a855f7]":"text-[#747580]"}`,children:b.type}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono shrink-0",children:new Date(b.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),u.jsx("span",{className:"text-[12px] text-[#a0a1a8] flex-1 truncate",children:b.message})]},w)),t.logs.length===0&&u.jsx("div",{className:"py-4 text-center text-[#747580] text-[11px]",children:"No activity recorded yet"})]})]})]})},Igt=({policy:t})=>{const[e,n]=S.useState(t),[r,i]=S.useState(""),[s,o]=S.useState(""),[a,l]=S.useState(!1);S.useEffect(()=>{n(t)},[t]);const c=b=>{n(w=>({...w,...b})),l(!0)},d=()=>{Sr.updatePolicy(e),l(!1)},h=()=>{n(GB),l(!0)},m=()=>{r&&!e.tokenAllowlist.includes(r.toUpperCase())&&(c({tokenAllowlist:[...e.tokenAllowlist,r.toUpperCase()]}),i(""))},g=()=>{s&&!e.tokenBlocklist.includes(s.toUpperCase())&&(c({tokenBlocklist:[...e.tokenBlocklist,s.toUpperCase()]}),o(""))},v=(b,w)=>{c(b==="allowlist"?{tokenAllowlist:e.tokenAllowlist.filter(k=>k!==w)}:{tokenBlocklist:e.tokenBlocklist.filter(k=>k!==w)})},x=b=>{const w=e.requireConfirmationFor;w.includes(b)?c({requireConfirmationFor:w.filter(k=>k!==b)}):c({requireConfirmationFor:[...w,b]})};return u.jsxs("div",{className:"flex flex-col h-full gap-3",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[u.jsxs("div",{className:"glass-panel px-4 py-3 rounded flex flex-col justify-between h-[88px] relative overflow-hidden group",children:[u.jsxs("div",{className:"flex items-center justify-between z-10",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Wc,{size:18,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-sm font-semibold text-white",children:"Policy Engine"})]}),a&&u.jsxs("div",{className:"flex items-center gap-1 text-[#f59e0b] bg-[#f59e0b]/10 px-1.5 py-0.5 rounded text-[10px]",children:[u.jsx(Ii,{size:10}),u.jsx("span",{children:"Unsaved"})]})]}),u.jsxs("div",{className:"flex items-center justify-between gap-2 z-10 mt-2",children:[u.jsx("div",{onClick:()=>c({enabled:!e.enabled}),className:`cursor-pointer w-12 h-6 rounded-full p-1 transition-colors relative ${e.enabled?"bg-[#E7FE55] border border-[#E7FE55]":"bg-[#232328] border border-[#303036]"}`,title:e.enabled?"Click to Disable":"Click to Enable",children:u.jsx("div",{className:`w-3.5 h-3.5 rounded-full shadow-sm transition-all absolute top-1 ${e.enabled?"bg-black left-[calc(100%-1.25rem)]":"bg-[#747580] left-1"}`})}),u.jsx("span",{className:`text-[10px] font-medium uppercase tracking-wider mr-auto ml-2 ${e.enabled?"text-[#E7FE55]":"text-[#747580]"}`,children:e.enabled?"Active":"Stopped"}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:h,className:"p-1.5 rounded bg-[#232328] hover:bg-[#2a2b30] text-[#747580] hover:text-white transition-colors border border-transparent hover:border-[#303036]",title:"Reset Changes",children:u.jsx(Ere,{size:14})}),u.jsxs("button",{onClick:d,disabled:!a,className:"px-3 py-1.5 bg-[#E7FE55] hover:bg-[#d4eb4c] text-black rounded text-[10px] font-semibold uppercase disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5 shadow-[0_0_10px_rgba(231,254,85,0.2)]",children:[u.jsx(HD,{size:12}),"Save"]})]})]})]}),u.jsxs("div",{className:"glass-panel px-4 py-3 rounded flex flex-col justify-between h-[88px] relative overflow-hidden group",children:[u.jsxs("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-wider z-10 flex items-center gap-2",children:[u.jsx(Vl,{size:12}),"Min TVL Required"]}),u.jsxs("div",{className:"flex items-center justify-between z-10 mt-auto",children:[u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:"text-lg font-bold text-[#E7FE55]",children:"$"}),u.jsx(eo,{className:"text-2xl font-bold text-white font-mono bg-transparent outline-none w-32 appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:e.minTVLRequired,onChange:b=>c({minTVLRequired:b})})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minTVLRequired:e.minTVLRequired+1e3}),className:"p-1 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:10})}),u.jsx("button",{onClick:()=>c({minTVLRequired:Math.max(0,e.minTVLRequired-1e3)}),className:"p-1 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:10})})]})]}),u.jsx("div",{className:"w-full h-1 bg-[#232328] rounded-full mt-2 overflow-hidden z-10",children:u.jsx("div",{className:"h-full bg-[#E7FE55]/50 w-1/2 rounded-full"})})]}),u.jsxs("div",{className:"glass-panel px-4 py-3 rounded flex flex-col justify-between h-[88px] relative overflow-hidden group",children:[u.jsxs("label",{className:"text-[10px] font-semibold text-[#747580] uppercase tracking-wider z-10 flex items-center gap-2",children:[u.jsx(vT,{size:12}),"Min 24h Volume"]}),u.jsxs("div",{className:"flex items-center justify-between z-10 mt-auto",children:[u.jsxs("div",{className:"flex items-baseline gap-1",children:[u.jsx("span",{className:"text-lg font-bold text-[#E7FE55]",children:"$"}),u.jsx(eo,{className:"text-2xl font-bold text-white font-mono bg-transparent outline-none w-32 appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:e.minVolumeRequired,onChange:b=>c({minVolumeRequired:b})})]}),u.jsxs("div",{className:"flex flex-col gap-0.5",children:[u.jsx("button",{onClick:()=>c({minVolumeRequired:e.minVolumeRequired+100}),className:"p-1 rounded bg-[#232328] hover:bg-[#303036] text-[#E7FE55] transition-colors",children:u.jsx(cr,{size:10})}),u.jsx("button",{onClick:()=>c({minVolumeRequired:Math.max(0,e.minVolumeRequired-100)}),className:"p-1 rounded bg-[#232328] hover:bg-[#303036] text-[#747580] hover:text-white transition-colors",children:u.jsx(Br,{size:10})})]})]}),u.jsx("div",{className:"w-full h-1 bg-[#232328] rounded-full mt-2 overflow-hidden z-10",children:u.jsx("div",{className:"h-full bg-[#E7FE55]/50 w-2/3 rounded-full"})})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 flex-1 min-h-0",children:[u.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(wT,{size:14,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Advanced Constraints"})]}),u.jsxs("div",{className:"space-y-4 flex-1",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[10px] mb-2",children:[u.jsx("span",{className:"text-[#747580]",children:"Max Range Width"}),u.jsxs("span",{className:"text-white font-mono bg-[#1a1b21] px-1.5 py-0.5 rounded border border-[#232328]",children:[e.maxRangeWidthPercent,"%"]})]}),u.jsx("input",{type:"range",min:"5",max:"200",value:e.maxRangeWidthPercent,onChange:b=>c({maxRangeWidthPercent:parseInt(b.target.value)}),className:"w-full h-2 bg-[#232328] rounded-lg appearance-none cursor-pointer accent-[#E7FE55] hover:accent-[#d4eb4c]"}),u.jsxs("div",{className:"flex justify-between text-[8px] text-[#5a5b63] mt-1 font-medium tracking-wide",children:[u.jsx("span",{children:"TIGHT"}),u.jsx("span",{children:"WIDE"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[10px] mb-2",children:[u.jsx("span",{className:"text-[#747580]",children:"Min Range Width"}),u.jsxs("span",{className:"text-white font-mono bg-[#1a1b21] px-1.5 py-0.5 rounded border border-[#232328]",children:[e.minRangeWidthPercent,"%"]})]}),u.jsx("input",{type:"range",min:"1",max:"50",value:e.minRangeWidthPercent,onChange:b=>c({minRangeWidthPercent:parseInt(b.target.value)}),className:"w-full h-2 bg-[#232328] rounded-lg appearance-none cursor-pointer accent-[#E7FE55] hover:accent-[#d4eb4c]"}),u.jsxs("div",{className:"flex justify-between text-[8px] text-[#5a5b63] mt-1 font-medium tracking-wide",children:[u.jsx("span",{children:"CONCENTRATED"}),u.jsx("span",{children:"LOOSE"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-[10px] mb-2",children:[u.jsx("span",{className:"text-[#747580]",children:"Max Capital / Pool"}),u.jsxs("span",{className:"text-white font-mono bg-[#1a1b21] px-1.5 py-0.5 rounded border border-[#232328]",children:[e.maxCapitalPerPoolPercent,"%"]})]}),u.jsx("input",{type:"range",min:"5",max:"100",value:e.maxCapitalPerPoolPercent,onChange:b=>c({maxCapitalPerPoolPercent:parseInt(b.target.value)}),className:"w-full h-2 bg-[#232328] rounded-lg appearance-none cursor-pointer accent-[#E7FE55] hover:accent-[#d4eb4c]"}),u.jsx("p",{className:"text-[9px] text-[#5a5b63] mt-1",children:"Max % of wallet capital to allocate to a single pool."})]})]})]}),u.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(vT,{size:14,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Token Filtering"})]}),u.jsxs("div",{className:"space-y-3 flex-1",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-[9px] text-[#747580] uppercase",children:["Allowlist ",u.jsx("span",{className:"normal-case text-[#5a5b63]",children:"(empty=all)"})]}),u.jsxs("div",{className:"flex gap-1 mt-1",children:[u.jsx("input",{type:"text",value:r,onChange:b=>i(b.target.value.toUpperCase()),onKeyPress:b=>b.key==="Enter"&&m(),className:"flex-1 px-2 py-1 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] focus:outline-none focus:border-[#E7FE55]",placeholder:"SOL, USDC..."}),u.jsx("button",{onClick:m,className:"px-2 bg-[#10b981] hover:bg-[#0d9668] text-white rounded",children:u.jsx(cr,{size:12})})]}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-2 min-h-[24px]",children:e.tokenAllowlist.length===0?u.jsx("span",{className:"text-[9px] text-[#5a5b63] italic",children:"All allowed"}):e.tokenAllowlist.map(b=>u.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-[#10b981]/15 text-[#10b981] rounded text-[9px] border border-[#10b981]/30",children:[b,u.jsx("button",{onClick:()=>v("allowlist",b),children:u.jsx(Ex,{size:10})})]},b))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-[#747580] uppercase",children:"Blocklist"}),u.jsxs("div",{className:"flex gap-1 mt-1",children:[u.jsx("input",{type:"text",value:s,onChange:b=>o(b.target.value.toUpperCase()),onKeyPress:b=>b.key==="Enter"&&g(),className:"flex-1 px-2 py-1 bg-[#0f1015] border border-[#232328] rounded text-white text-[11px] focus:outline-none focus:border-[#E7FE55]",placeholder:"Block tokens..."}),u.jsx("button",{onClick:g,className:"px-2 bg-[#ef4444] hover:bg-[#dc2626] text-white rounded",children:u.jsx(cr,{size:12})})]}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-2 min-h-[24px]",children:e.tokenBlocklist.length===0?u.jsx("span",{className:"text-[9px] text-[#5a5b63] italic",children:"None blocked"}):e.tokenBlocklist.map(b=>u.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 bg-[#ef4444]/15 text-[#ef4444] rounded text-[9px] border border-[#ef4444]/30",children:[b,u.jsx("button",{onClick:()=>v("blocklist",b),children:u.jsx(Ex,{size:10})})]},b))})]})]})]}),u.jsxs("div",{className:"glass-panel rounded p-4 flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(Vl,{size:14,className:"text-[#E7FE55]"}),u.jsx("span",{className:"text-[11px] font-semibold text-white uppercase tracking-wider",children:"Confirmations"})]}),u.jsx("div",{className:"space-y-1.5 flex-1 overflow-y-auto custom-scrollbar",children:Object.keys(_y).map(b=>{const w=_y[b],k=e.requireConfirmationFor.includes(b);return u.jsxs("button",{onClick:()=>x(b),className:`w-full flex items-center justify-between px-2.5 py-2 rounded transition-colors ${k?"bg-[#E7FE55]/10 border border-[#E7FE55]/30":"bg-[#0f1015] hover:bg-[#1a1b21] border border-[#232328]"}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center text-[10px] ${k?"bg-[#E7FE55] text-black":"bg-[#232328] text-[#747580]"}`,children:k&&u.jsx(Am,{size:10})}),u.jsx("div",{className:"text-left",children:u.jsx("div",{className:"text-[11px] text-white",children:w.label})})]}),u.jsx("span",{className:`text-[8px] uppercase font-semibold px-1.5 py-0.5 rounded ${w.riskLevel==="high"?"bg-[#ef4444]/15 text-[#ef4444]":w.riskLevel==="medium"?"bg-[#f59e0b]/15 text-[#f59e0b]":"bg-[#10b981]/15 text-[#10b981]"}`,children:w.riskLevel})]},b)})})]})]})]})},Rgt=({auditLog:t})=>{const[e,n]=S.useState("all"),[r,i]=S.useState("all"),[s,o]=S.useState(null),[a,l]=S.useState(""),c=S.useMemo(()=>t.filter(v=>{var x;return!(e!=="all"&&v.scope!==e||r!=="all"&&v.status!==r||a&&!v.action.toLowerCase().includes(a.toLowerCase())&&!((x=v.poolName)!=null&&x.toLowerCase().includes(a.toLowerCase())))}),[t,e,r,a]),d=S.useMemo(()=>{const v=t.filter(w=>w.status==="executed").length,x=t.filter(w=>w.status==="failed"||w.status==="rejected").length,b=t.filter(w=>w.status==="pending"||w.status==="confirmed").length;return{executed:v,failed:x,pending:b,total:t.length}},[t]),h=()=>{const v=JSON.stringify(t,null,2),x="data:application/json;charset=utf-8,"+encodeURIComponent(v),b=`solana_audit_log_${new Date().toISOString()}.json`,w=document.createElement("a");w.setAttribute("href",x),w.setAttribute("download",b),w.click()},m=v=>{switch(v){case"executed":return u.jsx(LN,{size:14,className:"text-[#10b981]"});case"failed":case"rejected":return u.jsx(Lm,{size:14,className:"text-[#ef4444]"});case"pending":case"confirmed":return u.jsx(fr,{size:14,className:"text-[#f59e0b]"});default:return null}},g=v=>{switch(v){case"executed":return"text-[#10b981] bg-[#10b981]/15 border-[#10b981]/30";case"failed":return"text-[#ef4444] bg-[#ef4444]/15 border-[#ef4444]/30";case"rejected":return"text-[#ef4444] bg-[#ef4444]/15 border-[#ef4444]/30";case"pending":return"text-[#f59e0b] bg-[#f59e0b]/15 border-[#f59e0b]/30";case"confirmed":return"text-[#3b82f6] bg-[#3b82f6]/15 border-[#3b82f6]/30";default:return"text-[#747580] bg-[#747580]/15 border-[#747580]/30"}};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[u.jsxs("div",{className:"glass-panel p-5 rounded shrink-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-[#E7FE55]/10",children:u.jsx(jV,{size:20,className:"text-[#E7FE55]"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-sm font-semibold text-white",children:"Audit Log"}),u.jsxs("p",{className:"text-[10px] text-[#747580] uppercase tracking-wider",children:[d.total," total entries"]})]})]}),u.jsxs("button",{onClick:h,className:"flex items-center gap-1.5 px-3 py-1.5 bg-[#1a1b21] hover:bg-[#232328] rounded text-[10px] text-[#a0a1a8] hover:text-white transition-colors border border-[#232328]",children:[u.jsx(Qs,{size:12}),"Export"]})]}),u.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Total"}),u.jsx("div",{className:"text-lg font-semibold text-white font-mono",children:d.total})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Executed"}),u.jsx("div",{className:"text-lg font-semibold text-[#10b981] font-mono",children:d.executed})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Failed"}),u.jsx("div",{className:"text-lg font-semibold text-[#ef4444] font-mono",children:d.failed})]}),u.jsxs("div",{className:"bg-[#0f1015] rounded p-3 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] text-[#747580] uppercase tracking-wider mb-1",children:"Pending"}),u.jsx("div",{className:"text-lg font-semibold text-[#f59e0b] font-mono",children:d.pending})]})]})]}),u.jsx("div",{className:"glass-panel p-4 rounded shrink-0",children:u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[u.jsx(GD,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#747580]"}),u.jsx("input",{type:"text",value:a,onChange:v=>l(v.target.value),placeholder:"Search actions or pools...",className:"w-full pl-9 pr-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(vre,{size:14,className:"text-[#747580]"}),u.jsxs("select",{value:e,onChange:v=>n(v.target.value),className:"px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]",children:[u.jsx("option",{value:"all",children:"All Scopes"}),Object.keys(_y).map(v=>u.jsx("option",{value:v,children:_y[v].label},v))]})]}),u.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:"px-3 py-2 bg-[#0f1015] border border-[#232328] rounded text-white text-sm focus:outline-none focus:border-[#E7FE55]",children:[u.jsx("option",{value:"all",children:"All Status"}),u.jsx("option",{value:"executed",children:"Executed"}),u.jsx("option",{value:"pending",children:"Pending"}),u.jsx("option",{value:"confirmed",children:"Confirmed"}),u.jsx("option",{value:"rejected",children:"Rejected"}),u.jsx("option",{value:"failed",children:"Failed"})]}),u.jsxs("span",{className:"text-[10px] text-[#747580] font-mono",children:[c.length," / ",t.length]})]})}),u.jsx("div",{className:"glass-panel rounded flex-1 min-h-0 overflow-hidden",children:c.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[u.jsx(jV,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No audit entries found"}),u.jsx("p",{className:"text-[11px] text-[#5a5b63]",children:"LP operations will be logged here"})]}):u.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar divide-y divide-[#232328]",children:c.map(v=>{var x,b;return u.jsxs("div",{className:"hover:bg-[#1a1b21]/50 transition-colors",children:[u.jsxs("button",{onClick:()=>o(s===v.id?null:v.id),className:"w-full px-5 py-4 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[m(v.status),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"text-sm text-white font-medium",children:v.action}),u.jsxs("div",{className:"text-[10px] text-[#747580] flex items-center gap-2",children:[u.jsx("span",{className:"px-1.5 py-0.5 rounded bg-[#232328] text-[9px] uppercase",children:(x=_y[v.scope])==null?void 0:x.label}),u.jsx("span",{children:""}),u.jsx("span",{children:v.poolName||((b=v.poolAddress)==null?void 0:b.slice(0,8))||"N/A"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:`px-2 py-0.5 rounded text-[9px] font-semibold uppercase border ${g(v.status)}`,children:v.status}),u.jsx("div",{className:"text-[10px] text-[#747580] mt-1 font-mono",children:new Date(v.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s===v.id?u.jsx(Ph,{size:16,className:"text-[#747580]"}):u.jsx(Oo,{size:16,className:"text-[#747580]"})]})]}),s===v.id&&u.jsxs("div",{className:"px-5 pb-4 pt-0 space-y-4",children:[v.rationale&&u.jsxs("div",{className:"bg-[#0f1015] rounded p-4 border border-[#232328]",children:[u.jsx("div",{className:"text-[9px] uppercase tracking-wider text-[#E7FE55] mb-2 font-semibold",children:"Rationale"}),u.jsxs("p",{className:"text-[13px] text-[#a0a1a8] italic leading-relaxed",children:['"',v.rationale,'"']})]}),v.policyViolations&&v.policyViolations.length>0&&u.jsxs("div",{className:"bg-[#ef4444]/5 border border-[#ef4444]/30 rounded p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(Ii,{size:14,className:"text-[#ef4444]"}),u.jsx("span",{className:"text-[10px] font-semibold text-[#ef4444] uppercase tracking-wider",children:"Policy Violations"})]}),u.jsx("ul",{className:"text-[12px] text-[#ef4444]/80 space-y-1",children:v.policyViolations.map((w,k)=>u.jsxs("li",{className:"flex items-start gap-2",children:[u.jsx("span",{className:"text-[#ef4444]",children:""}),w]},k))})]}),Object.keys(v.params).length>0&&u.jsxs("div",{children:[u.jsx("div",{className:"text-[9px] uppercase tracking-wider text-[#747580] mb-2 font-semibold",children:"Parameters"}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(v.params).map(([w,k])=>u.jsxs("div",{className:"bg-[#0f1015] rounded px-3 py-2 border border-[#232328]",children:[u.jsx("span",{className:"text-[9px] text-[#747580] uppercase",children:w}),u.jsx("div",{className:"text-[12px] text-white font-mono truncate",children:typeof k=="object"?JSON.stringify(k):String(k)})]},w))})]}),v.txSignature&&u.jsxs("div",{className:"flex items-center gap-3 pt-2 border-t border-[#232328]",children:[u.jsx("span",{className:"text-[9px] uppercase tracking-wider text-[#747580]",children:"Transaction"}),u.jsxs("a",{href:`https://explorer.solana.com/tx/${v.txSignature}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-[11px] text-[#3b82f6] hover:text-[#60a5fa] transition-colors font-mono",children:[v.txSignature.slice(0,16),"...",v.txSignature.slice(-8),u.jsx(Ed,{size:10})]})]})]})]},v.id)})})})]})},Ogt=({log:t,index:e})=>{const[n,r]=S.useState(!1),i=t.details&&(typeof t.details=="object"?Object.keys(t.details).length>0:!0),s=a=>{switch(a){case"ERROR":return u.jsx(Lm,{size:14,className:"text-[#ef4444]"});case"WARNING":return u.jsx(Ii,{size:14,className:"text-[#f59e0b]"});case"OPERATION":return u.jsx(Mo,{size:14,className:"text-[#3b82f6]"});case"POLICY":return u.jsx(Wc,{size:14,className:"text-[#a855f7]"});default:return u.jsx(nv,{size:14,className:"text-[#747580]"})}},o=a=>{switch(a){case"ERROR":return"bg-[#ef4444]/15 text-[#ef4444] border-[#ef4444]/30";case"WARNING":return"bg-[#f59e0b]/15 text-[#f59e0b] border-[#f59e0b]/30";case"OPERATION":return"bg-[#3b82f6]/15 text-[#3b82f6] border-[#3b82f6]/30";case"POLICY":return"bg-[#a855f7]/15 text-[#a855f7] border-[#a855f7]/30";default:return"bg-[#747580]/15 text-[#747580] border-[#747580]/30"}};return u.jsxs("div",{className:"flex gap-3 p-3 hover:bg-[#1a1b21] rounded border-b border-[#232328] last:border-0 transition-colors",children:[u.jsx("span",{className:"text-[#747580] shrink-0 text-[10px] mt-0.5 font-mono",children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[s(t.type),u.jsx("span",{className:`px-1.5 py-0.5 rounded text-[9px] uppercase tracking-wider font-medium border ${o(t.type)}`,children:t.type}),u.jsx("span",{className:"text-[#a0a1a8] flex-1 text-sm truncate",children:t.message}),i&&u.jsx("button",{onClick:()=>r(!n),className:"text-[#747580] hover:text-white transition-colors p-1 rounded hover:bg-[#232328]",title:n?"Collapse details":"Expand details",children:n?u.jsx(Oo,{className:"h-4 w-4"}):u.jsx(il,{className:"h-4 w-4"})})]}),i&&n&&u.jsx("pre",{className:"mt-2 text-[10px] text-[#747580] bg-[#0f1015] p-3 rounded overflow-x-auto max-h-[300px] overflow-y-auto custom-scrollbar border border-[#232328] font-mono",children:typeof t.details=="string"?t.details:JSON.stringify(t.details,null,2)})]})]})},Mgt=({logs:t})=>{const e=t.filter(n=>n.type==="POLICY"||n.type==="OPERATION"||n.message.toLowerCase().includes("analyzing"));return e.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[u.jsx(ao,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No reasoning activity yet"}),u.jsx("p",{className:"text-xs text-[#5a5b63]",children:"AI analysis will appear here during operations"})]}):u.jsx("div",{className:"p-4 space-y-4",children:e.slice(0,20).map((n,r)=>u.jsxs("div",{className:`p-4 rounded-lg border-l-2 ${n.type==="POLICY"?"bg-[#a855f7]/5 border-[#a855f7]":n.type==="OPERATION"?"bg-[#3b82f6]/5 border-[#3b82f6]":"bg-[#E7FE55]/5 border-[#E7FE55]"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[n.type==="POLICY"?u.jsx(Wc,{size:14,className:"text-[#a855f7]"}):n.type==="OPERATION"?u.jsx(Mo,{size:14,className:"text-[#3b82f6]"}):u.jsx(ao,{size:14,className:"text-[#E7FE55]"}),u.jsx("span",{className:`text-[10px] font-medium uppercase ${n.type==="POLICY"?"text-[#a855f7]":n.type==="OPERATION"?"text-[#3b82f6]":"text-[#E7FE55]"}`,children:n.type})]}),u.jsx("span",{className:"text-[10px] text-[#747580] font-mono",children:new Date(n.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("p",{className:"text-[13px] text-[#a0a1a8] leading-relaxed",children:n.message}),n.details&&u.jsx("div",{className:"mt-3 pt-3 border-t border-[#232328]",children:u.jsx("pre",{className:"text-[10px] text-[#747580] font-mono overflow-x-auto",children:typeof n.details=="string"?n.details:JSON.stringify(n.details,null,2)})})]},n.id))})},Lgt=({logs:t})=>{const[e,n]=S.useState("thinking"),r=S.useRef(null),i=()=>{Sr.clearLogs()},s=()=>{const o=JSON.stringify(t,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(o),l=`solana_dealer_logs_${new Date().toISOString()}.json`,c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",l),c.click()};return u.jsxs("div",{className:"flex flex-col h-full gap-4 overflow-hidden",children:[u.jsx("div",{className:"glass-panel p-4 rounded shrink-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 bg-[#1a1b21] p-1 rounded border border-[#232328]",children:[u.jsxs("button",{onClick:()=>n("thinking"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${e==="thinking"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(ao,{className:"h-4 w-4"}),"Thinking"]}),u.jsxs("button",{onClick:()=>n("logs"),className:`flex items-center gap-2 px-4 py-2 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${e==="logs"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:[u.jsx(qD,{className:"h-4 w-4"}),"Activity Log",t.length>0&&u.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[9px]",children:t.length})]})]}),e==="logs"&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:i,className:"p-2 rounded hover:bg-red-500/10 text-[#747580] hover:text-red-400 transition-colors border border-[#232328]",title:"Clear Logs",children:u.jsx(_h,{className:"h-4 w-4"})}),u.jsx("button",{onClick:s,className:"p-2 rounded hover:bg-[#1a1b21] text-[#747580] hover:text-white transition-colors border border-[#232328]",title:"Export JSON",children:u.jsx(Qs,{className:"h-4 w-4"})})]})]})}),u.jsxs("div",{className:"glass-panel rounded flex-1 min-h-0 overflow-hidden flex flex-col",children:[e==="thinking"&&u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:u.jsx(Mgt,{logs:t})}),e==="logs"&&u.jsx("div",{ref:r,className:"flex-1 overflow-y-auto custom-scrollbar",children:t.length===0?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#747580] gap-3 py-12",children:[u.jsx(BN,{className:"h-10 w-10 opacity-30"}),u.jsx("p",{className:"text-sm",children:"No operations recorded yet."})]}):u.jsx("div",{className:"p-2",children:t.map((o,a)=>u.jsx(Ogt,{log:o,index:a},o.id))})})]})]})},jgt=({activeTab:t,walletAddress:e})=>{const n=y0t(),r=()=>{switch(t){case be.SOLANA_DEALER:case be.SOLANA_DEALER_DASHBOARD:return u.jsx(tte,{state:n,walletAddress:e});case be.SOLANA_DEALER_THINKING:return u.jsx(Lgt,{logs:n.logs});case be.SOLANA_DEALER_POLICY:return u.jsx(Igt,{policy:n.settings.policy});case be.SOLANA_DEALER_LOG:return u.jsx(Rgt,{auditLog:n.auditLog});default:return u.jsx(tte,{state:n,walletAddress:e})}};return u.jsx("div",{className:"h-full flex flex-col",children:r()})},jge=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return u.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:u.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[u.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Privacy Policy"}),u.jsx("p",{className:"text-slate-400",children:"Last Updated: December 23, 2025"})]}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:u.jsx(xT,{size:24})})]}),u.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-6 mb-8",children:u.jsx("p",{className:"text-blue-200 text-sm",children:"This Privacy Policy explains how AutonomousVault handles your data. In short: We don't want your data, and we can't see your keys."})}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(jN,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Data Collection & Storage"})]}),u.jsxs("p",{className:"leading-relaxed text-slate-300",children:["AutonomousVault operates on a ",u.jsx("strong",{children:'"Local-First"'})," architecture."]}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Private Keys:"})," Generated locally and stored ONLY in your browser's encrypted storage (IndexedDB). They never leave your device unencrypted."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Chat History:"})," Stored locally on your device."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Usage Data:"})," We do not collect analytics or tracking data."]})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(DN,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Third-Party Services"})]}),u.jsx("p",{className:"leading-relaxed text-slate-300",children:"While the app runs locally, it interacts with the following services to function:"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[u.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[u.jsx("h3",{className:"text-white font-medium mb-1",children:"Google Gemini (AI)"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Processes user prompts to generate responses. Your keys are NOT sent to the AI."})]}),u.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[u.jsx("h3",{className:"text-white font-medium mb-1",children:"Supabase (Auth & Database)"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Handles authentication (Email/Google), user settings, and encrypted conversation history (if 24/7 mode is enabled). We only see your User ID and Email."})]}),u.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg",children:[u.jsx("h3",{className:"text-white font-medium mb-1",children:"RPC Nodes"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Public nodes (Solana, Hyperliquid, Polygon) receive your signed transactions to execute them on-chain."})]})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(Vl,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Your Rights (GDPR/LGPD)"})]}),u.jsx("p",{className:"leading-relaxed text-slate-300",children:"You have complete control over your data:"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Access:"})," All your data is visible within the application."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Deletion:"}),' You can use the "Delete Account" button in Settings to wipe all local data and delete your Supabase authentication record.']}),u.jsxs("li",{children:[u.jsx("strong",{children:"Portability:"})," You can export your private keys at any time via the Backup feature."]})]})]}),u.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[u.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),u.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[u.jsx(xT,{size:14})," Return to App"]})]})]})})},Dge=({onBack:t})=>{const e=()=>{t?t():window.location.reload()};return u.jsx("div",{className:"min-h-screen bg-[#0f172a] text-slate-200 p-8 font-sans",children:u.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[u.jsxs("div",{className:"border-b border-slate-700 pb-6 mb-10 flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-4xl font-light text-white mb-2",children:"Terms of Use"}),u.jsx("p",{className:"text-slate-400",children:"Effective Date: December 23, 2025"})]}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",title:"Go Back",children:u.jsx(xT,{size:24})})]}),u.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 flex flex-col gap-4",children:[u.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[u.jsx(Ii,{size:24}),u.jsx("h2",{className:"text-xl font-semibold",children:"Critical Disclaimer"})]}),u.jsx("p",{className:"text-sm leading-relaxed text-red-100/80",children:'AutonomousVault is experimental, open-source software. It is provided "AS IS", without warranty of any kind. You use this software entirely at your own risk. The developers constitute a non-custodial entity and accept no liability for lost funds, private key mismanagement, or protocol failures.'})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(H1,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"1. Self-Custody Model"})]}),u.jsx("p",{className:"leading-relaxed text-slate-300",children:"By using AutonomousVault, you acknowledge that:"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsx("li",{children:"You are the sole custodian of your cryptographic private keys."}),u.jsx("li",{children:"Private keys are encrypted and stored solely within your device's browser (IndexedDB)."}),u.jsx("li",{children:"We (the developers) never have access to your private keys or funds."}),u.jsx("li",{children:"If you lose your password or clear your browser data without a backup, your funds are permanently lost."})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(Wc,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"2. Universal Data Liability"})]}),u.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Ii,{className:"text-red-400 shrink-0 mt-1",size:20}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-red-200 font-medium",children:"Full User Responsibility"}),u.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The user assumes ",u.jsx("strong",{children:"FULL RESPONSIBILITY"})," for data security, custody, and management in ",u.jsx("strong",{children:"ALL MODES OF OPERATION"}),' (including "Local-Only" and "24/7 Server Mode").']}),u.jsxs("p",{className:"text-red-200/80 text-sm leading-relaxed",children:["The application always operates on the user's own infrastructure (local machine or personal Supabase database). The developers of AutonomousVault accept ",u.jsx("strong",{children:"NO LIABILITY"})," for data loss, unauthorized access, key compromise, or any other security breaches under any circumstances."]})]})]})})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(BN,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"3. Experimental Protocols & Risks"})]}),u.jsxs("div",{className:"space-y-4 text-slate-300",children:[u.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[u.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-400"}),"Hyperliquid (Testnet)"]}),u.jsxs("p",{className:"text-sm",children:["Trading on Hyperliquid is currently on ",u.jsx("strong",{children:"Testnet"}),". While no real funds are at risk on Testnet, the trading logic is experimental. The AI Agent's performance on Testnet does not guarantee future results on Mainnet."]})]}),u.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[u.jsxs("h3",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-400"}),"Polymarket (Prediction Markets)"]}),u.jsxs("p",{className:"text-sm",children:["Prediction markets involve high risk. The AI Agent provides analysis based on available data, but ",u.jsx("strong",{children:"outcome predictions are never guaranteed"}),"."]}),u.jsxs("p",{className:"text-sm mt-2 text-slate-400 italic",children:[u.jsx("strong",{children:"Regular compliance:"})," You are solely responsible for ensuring that using prediction markets complies with the laws of your jurisdiction."]})]})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(H1,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"4. AI Agent Autonomy"})]}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsx("li",{children:"The AI Agent executes instructions based on your prompts."}),u.jsx("li",{children:"It may generate code, execute transactions (Solana), trade perps (Hyperliquid), or interact with prediction markets (Polymarket)."}),u.jsxs("li",{children:[u.jsx("strong",{children:"You are the final approver."})," While the agent can be autonomous, you are responsible for monitoring its actions."]}),u.jsx("li",{children:"The developers are not liable for losses caused by AI hallucination, error, or unintended execution."})]})]}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[#E7FE55]",children:[u.jsx(Wc,{size:20}),u.jsx("h2",{className:"text-2xl font-light text-white",children:"5. Prohibited Activities"})]}),u.jsx("p",{className:"leading-relaxed text-slate-300",children:"You agree not to use AutonomousVault for:"}),u.jsxs("ul",{className:"list-disc pl-6 space-y-2 text-slate-400",children:[u.jsx("li",{children:"Money laundering or financing terrorism."}),u.jsx("li",{children:"Interacting with sanctioned addresses or entities."}),u.jsx("li",{children:"Any illegal activity defined by the laws of your jurisdiction."})]})]}),u.jsxs("div",{className:"pt-10 border-t border-slate-700 flex justify-between items-center mt-12",children:[u.jsx("p",{className:"text-xs text-slate-500",children:"AutonomousVault v0.1"}),u.jsxs("button",{onClick:e,className:"text-[#E7FE55] hover:underline flex items-center gap-2",children:[u.jsx(xT,{size:14})," Return to App"]})]})]})})},Dgt=({userId:t,onAccept:e})=>{const[n,r]=S.useState(!0),[i,s]=S.useState(!0),[o,a]=S.useState(!1),[l,c]=S.useState(!1),d=S.useRef(null),h=t?`legal_consent_v1_${t}`:null;S.useEffect(()=>{(async()=>{if(!h){s(!1);return}const v=await Ae.getItem(h);r(v==="true"),s(!1)})()},[h]),S.useEffect(()=>{const g=d.current;if(!g)return;const v=()=>{const{scrollTop:x,scrollHeight:b,clientHeight:w}=g,k=x+w>=b-50||b<=w;c(k)};return g.addEventListener("scroll",v),setTimeout(v,100),()=>g.removeEventListener("scroll",v)},[i,n]);const m=async()=>{h&&o&&(await Ae.setItem(h,"true"),r(!0),e==null||e())};return i||n?null:u.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",children:[u.jsxs("div",{className:"glass-panel w-full max-w-3xl rounded shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"p-6 pb-4 text-center border-b border-[rgba(60,63,75,0.4)]",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-[#E7FE55]/10 mb-3",children:u.jsx(Kc,{size:28,className:"text-[#E7FE55]"})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"User Acknowledgement & Risk Disclosure"}),u.jsx("p",{className:"text-slate-400 text-sm",children:"Please read and acknowledge before proceeding"})]}),u.jsx("div",{ref:d,className:"px-6 py-4 max-h-[60vh] overflow-y-auto custom-scrollbar",children:u.jsxs("div",{className:"space-y-4 text-sm text-slate-300",children:[u.jsx("p",{className:"text-slate-200 leading-relaxed",children:"By proceeding, you acknowledge and agree that:"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"bg-[rgba(30,32,40,0.6)] rounded p-4 border border-[rgba(60,63,75,0.3)]",children:[u.jsx("h3",{className:"font-semibold text-white mb-2",children:"Non-Custodial & Autonomous Execution"}),u.jsx("p",{className:"text-slate-400 leading-relaxed",children:'This Autonomous Vault is a non-custodial system. You retain control of your assets and explicitly authorize autonomous agents ("Dealers") to execute on-chain operations based on parameters and permissions you define.'})]}),u.jsxs("div",{className:"bg-[rgba(30,32,40,0.6)] rounded p-4 border border-[rgba(60,63,75,0.3)]",children:[u.jsx("h3",{className:"font-semibold text-white mb-2",children:"No Advice, No Guarantees"}),u.jsx("p",{className:"text-slate-400 leading-relaxed",children:"The system does not provide investment, financial, legal, or tax advice. Execution outcomes are not guaranteed and may differ from expectations due to market conditions, liquidity, MEV, or blockchain-level factors."})]}),u.jsxs("div",{className:"bg-[rgba(30,32,40,0.6)] rounded p-4 border border-[rgba(60,63,75,0.3)]",children:[u.jsx("h3",{className:"font-semibold text-white mb-2",children:"User Responsibility"}),u.jsx("p",{className:"text-slate-400 leading-relaxed",children:"You are solely responsible for your vault configuration, permissions granted, private key security, and all resulting transactions. Feedback or evaluations do not constitute direct control over autonomous execution."})]}),u.jsxs("div",{className:"bg-[rgba(30,32,40,0.6)] rounded p-4 border border-[rgba(60,63,75,0.3)]",children:[u.jsx("h3",{className:"font-semibold text-white mb-2",children:"Risk Acceptance"}),u.jsx("p",{className:"text-slate-400 leading-relaxed",children:"You understand and accept the risks of digital assets and smart contracts, including potential loss of funds, execution failures, oracle errors, cross-chain risks, and regulatory changes."})]}),u.jsxs("div",{className:"bg-[rgba(30,32,40,0.6)] rounded p-4 border border-[rgba(60,63,75,0.3)]",children:[u.jsx("h3",{className:"font-semibold text-white mb-2",children:"Third-Party Protocols"}),u.jsx("p",{className:"text-slate-400 leading-relaxed",children:"The Autonomous Vault may interact with external protocols (DEXs, bridges, oracles). No liability is assumed for failures or losses arising from such integrations."})]}),u.jsxs("div",{className:"bg-[rgba(30,32,40,0.6)] rounded p-4 border border-[rgba(60,63,75,0.3)]",children:[u.jsx("h3",{className:"font-semibold text-white mb-2",children:"Acceptance On-Chain"}),u.jsx("p",{className:"text-slate-400 leading-relaxed",children:"If you interact directly with the smart contracts, your first successful on-chain transaction constitutes full acceptance of these terms."})]})]}),u.jsx("div",{className:"mt-6 p-4 bg-amber-500/10 border border-amber-500/30 rounded",children:u.jsx("p",{className:"text-amber-200 text-xs leading-relaxed",children:'By clicking "I Agree" or executing an on-chain transaction, you confirm that you have read, understood, and accept full responsibility for using an autonomous, non-custodial system.'})})]})}),u.jsxs("div",{className:"p-6 pt-4 border-t border-[rgba(60,63,75,0.4)] space-y-4",children:[!l&&u.jsxs("div",{className:"flex items-center gap-2 text-amber-400 text-xs",children:[u.jsx("svg",{className:"w-4 h-4 animate-bounce",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),u.jsx("span",{children:"Please scroll to the bottom to continue"})]}),u.jsxs("label",{className:`flex items-start gap-3 ${l?"cursor-pointer":"cursor-not-allowed opacity-50"} group`,children:[u.jsx("div",{className:"relative flex items-center justify-center mt-0.5",children:u.jsx("input",{type:"checkbox",checked:o,onChange:g=>a(g.target.checked),disabled:!l,className:"w-5 h-5 border-2 border-slate-600 rounded bg-slate-800 checked:bg-[#E7FE55] checked:border-[#E7FE55] focus:ring-2 focus:ring-[#E7FE55]/50 focus:ring-offset-0 transition-all cursor-pointer appearance-none checked:after:content-[''] checked:after:text-black checked:after:text-sm checked:after:font-bold checked:after:absolute checked:after:inset-0 checked:after:flex checked:after:items-center checked:after:justify-center disabled:cursor-not-allowed disabled:opacity-50"})}),u.jsx("span",{className:`text-sm ${l?"text-slate-300 group-hover:text-slate-200":"text-slate-500"} transition-colors select-none leading-relaxed`,children:"I have read and understood all the terms, risks, and responsibilities outlined above. I consciously accept full responsibility for using this autonomous, non-custodial system."})]}),u.jsxs("button",{onClick:m,disabled:!o||!l,className:`w-full font-bold py-3.5 rounded transition-all flex items-center justify-center gap-2 shadow-lg ${o&&l?"bg-[#E7FE55] hover:bg-[#d9f044] text-black shadow-[#E7FE55]/20 cursor-pointer":"bg-slate-700 text-slate-500 cursor-not-allowed opacity-60"}`,children:["I Agree & Continue ",u.jsx(nE,{size:18})]})]})]}),u.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 8px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: rgba(51, 65, 85, 0.3);
                    border-radius: 4px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: rgba(100, 116, 139, 0.5);
                    border-radius: 4px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                    background: rgba(100, 116, 139, 0.7);
                }
            `})]})},Bgt=({onNavigate:t})=>u.jsx("footer",{className:"w-full py-4 text-center mt-auto border-t border-[#232328]/50",children:u.jsxs("div",{className:"flex flex-col items-center gap-2",children:[u.jsx("p",{className:"text-[10px] text-slate-600 font-medium tracking-wide",children:" 2025 AutonomousVault. All rights reserved."}),t&&u.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-slate-500",children:[u.jsx("button",{onClick:()=>t(be.TERMS),className:"hover:text-[#E7FE55] transition-colors",children:"Terms of Use"}),u.jsx("span",{children:""}),u.jsx("button",{onClick:()=>t(be.PRIVACY),className:"hover:text-[#E7FE55] transition-colors",children:"Privacy Policy"})]})]})});function Ugt(){var sf,hu,pu,of,pl,ml,ya,Ks;const[t,e]=S.useState(be.AGENT),[n,r]=S.useState([]),[i,s]=S.useState(!1),[o,a]=S.useState(!1),[l,c]=S.useState(!1),[d,h]=S.useState(()=>localStorage.getItem("solana_policy_tooltip_dismissed")!=="true"),m=()=>{h(!1),localStorage.setItem("solana_policy_tooltip_dismissed","true")},[g,v]=S.useState(()=>localStorage.getItem("user_settings_tooltip_dismissed")!=="true"),x=()=>{v(!1),localStorage.setItem("user_settings_tooltip_dismissed","true")},[b,w]=S.useState("providers"),[k,N]=S.useState("main"),[O,D]=S.useState(()=>localStorage.getItem("agent_completed_setup")==="true");S.useEffect(()=>{O&&localStorage.setItem("agent_completed_setup","true")},[O]);const{user:_,logout:F}=Xw(),z=S.useRef(null);S.useEffect(()=>{z.current&&(z.current.scrollTop=0)},[t]);const L=Cr=>{const xa=Date.now();r(gl=>[...gl,{id:xa,message:Cr}]),setTimeout(()=>{r(gl=>gl.filter(YE=>YE.id!==xa))},5e3)},{vault:$,password:G,setPassword:V,withdrawAmount:U,setWithdrawAmount:A,withdrawNetwork:I,setWithdrawNetwork:j,showBackupModal:q,setShowBackupModal:K,backupKey:te,setBackupKey:Y,showHLBackupModal:H,setShowHLBackupModal:M,hlBackupKey:P,setHLBackupKey:W,isImporting:X,setIsImporting:ie,importKey:oe,setImportKey:Te,refreshBalance:ce,connectOwnerWallet:de,disconnectOwnerWallet:ke,createVault:ye,unlockVault:Ke,requestAirdrop:je,handleWithdraw:Ve,handleWithdrawHL:me,handleWithdrawPM:Ne,importVault:We,resolveTokenMint:Qe,connectHLOwnerWallet:Ze,disconnectHLOwnerWallet:at,refreshHLBalance:St,isImportingSolana:qe,setIsImportingSolana:it,isImportingHyperliquid:Lt,setIsImportingHyperliquid:Ie,isImportingPolymarket:Ge,setIsImportingPolymarket:Tt,solanaPassword:xt,setSolanaPassword:se,hyperliquidPassword:J,setHyperliquidPassword:Z,polymarketPassword:ue,setPolymarketPassword:Se,solanaImportKey:he,setSolanaImportKey:pe,hlImportKey:Je,setHLImportKey:Xe,pmImportKey:ot,setPMImportKey:Nt,createSolanaVault:wt,createHyperliquidVault:Rt,createPolymarketVault:rn,importSolanaVault:et,importHyperliquidVault:Ht,importPolymarketVault:Hn,connectPMOwnerWallet:sn,disconnectPMOwnerWallet:ae,showPMBackupModal:Q,setShowPMBackupModal:ee,pmBackupKey:fe,setPMBackupKey:_e}=e0t(L,(_==null?void 0:_.uid)||null),Re=!!($.publicKey||$.hlPublicKey);S.useEffect(()=>{const Cr=[be.VAULT,be.PRIVACY,be.TERMS];Re&&!$.isUnlocked&&!Cr.includes(t)&&e(be.VAULT)},[t,$.isUnlocked,Re]);const{portfolioHistoryDaily:Ue,portfolioHistoryLongTerm:en,assetPrices:Kt,assetAllocationData:ut}=t0t($),{activityFeed:pn,activityDisplayCount:Ct,setActivityDisplayCount:wn,addActivityLog:pa}=n0t($),{scheduledTasks:or,setScheduledTasks:br}=r0t($,G,L,ce,pa),{messages:tf,inputMessage:nf,setInputMessage:fl,isAiProcessing:du,aiStatus:ma,scrollRef:ga,handleSendMessage:hl,activeConversationId:Bo,loadConversation:Nr,startNewConversation:rf}=b0t($,G,br,L,ce,pa,Qe);Q0e($,G);const fu=async Cr=>{try{const xa=await na.loadConversation(Cr,G);xa?Nr(xa):L("Failed to load conversation.")}catch(xa){console.error(xa),L("Error loading conversation. Check password.")}},Gs=()=>{rf(),e(be.AGENT)},mo=async()=>{L("Refreshing data...");try{const Cr=[];$.publicKey&&Cr.push(ce($.publicKey)),$.hlPublicKey&&Cr.push(St($.hlPublicKey)),await Promise.all(Cr),L("Data refreshed successfully")}catch(Cr){console.error("Refresh failed",Cr),L("Failed to refresh data")}};return u.jsxs("div",{className:"flex h-screen bg-[#0f1015] text-[#e4e5e9] font-sans selection:bg-[#E7FE55]/30 overflow-hidden",children:[u.jsx(z4e,{activeTab:t,setActiveTab:e,isVaultUnlocked:$.isUnlocked,onSelectConversation:fu,onNewChat:Gs,currentConversationId:Bo,password:G,isOpen:i,onClose:()=>s(!1)}),u.jsxs("main",{ref:z,className:`flex-1 ml-0 xl:ml-[264px] h-full flex flex-col relative transition-all duration-300 ${[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT,be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT,be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)?"overflow-hidden":"overflow-y-auto"}`,children:[t===be.AGENT&&$.isUnlocked&&u.jsxs("header",{className:"flex justify-between items-center mb-0 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 px-4 md:px-8 lg:px-12 xl:px-16 transition-all shrink-0 relative",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:u.jsx(BV,{size:24})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Vault Operator"}),u.jsx("p",{className:"text-[#747580] text-sm hidden sm:block",children:"Interact with Vault Operator using natural language."})]})]}),u.jsxs("div",{className:"hidden sm:flex items-center gap-2 absolute left-1/2 transform -translate-x-1/2",children:[u.jsxs("button",{onClick:Gs,className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#E7FE55] hover:bg-[#f0ff7a] text-black text-sm font-medium transition-colors",title:"New Chat",children:[u.jsx("div",{className:"w-5 h-5 rounded bg-black/20 flex items-center justify-center",children:u.jsx(cr,{size:12,strokeWidth:2.5})}),u.jsx("span",{className:"hidden md:inline",children:"New"})]}),u.jsx("div",{className:"h-6 w-px bg-[#232328]"}),u.jsxs("button",{onClick:()=>e(be.HISTORY),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Chat History",children:[u.jsx(fr,{size:14}),u.jsx("span",{className:"hidden md:inline",children:"History"})]}),u.jsxs("button",{onClick:()=>e(be.SCHEDULER),className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Automations",children:[u.jsx($D,{size:14}),u.jsx("span",{className:"hidden md:inline",children:"Automations"})]}),u.jsx("div",{className:"h-6 w-px bg-[#232328]"}),u.jsxs("div",{className:"relative",children:[u.jsxs("button",{onClick:()=>{m(),e(be.SOLANA_DEALER_POLICY)},className:"flex items-center gap-2 px-3 py-1.5 rounded bg-[#14151a] hover:bg-[#1a1b21] text-[#a0a1a8] hover:text-white text-sm font-medium transition-colors border border-[#232328]",title:"Solana Dealer Policy",children:[u.jsx(Wc,{size:14}),u.jsx("span",{className:"hidden md:inline",children:"Solana Policy"})]}),d&&tf.length===0&&u.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-3 z-50 animate-fadeIn",children:[u.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-0 h-0 border-l-[8px] border-l-transparent border-r-[8px] border-r-transparent border-b-[8px] border-b-[#E7FE55]"}),u.jsxs("div",{className:"bg-[#1a1b21] border border-[#E7FE55] rounded-lg p-4 shadow-lg shadow-[#E7FE55]/10 w-72",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-[#E7FE55]/10 rounded-lg shrink-0",children:u.jsx(Wc,{size:16,className:"text-[#E7FE55]"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Configure Solana Policy"}),u.jsx("p",{className:"text-xs text-[#a0a1a8] leading-relaxed",children:"Get more accurate LP recommendations by setting your risk preferences and strategy."})]})]}),u.jsx("button",{onClick:Cr=>{Cr.stopPropagation(),m()},className:"mt-3 w-full py-1.5 text-xs font-medium text-[#747580] hover:text-white transition-colors",children:"Got it"})]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:()=>c(!0),className:"p-2 rounded-lg hover:bg-[#1a1b21] transition-colors text-[#747580] hover:text-white",title:"Send Feedback",children:u.jsx(ET,{size:18})}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(_==null?void 0:_.email)||"User",children:_!=null&&_.photoURL?u.jsx("img",{src:_.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((hu=(sf=_==null?void 0:_.email)==null?void 0:sf[0])==null?void 0:hu.toUpperCase())||"U"})}),o&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),u.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:u.jsxs("div",{className:"flex items-center gap-3",children:[_!=null&&_.photoURL?u.jsx("img",{src:_.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((of=(pu=_==null?void 0:_.email)==null?void 0:pu[0])==null?void 0:of.toUpperCase())||"U"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-white text-sm font-medium truncate",children:(_==null?void 0:_.displayName)||"User"}),u.jsx("p",{className:"text-[#747580] text-xs truncate",children:_==null?void 0:_.email})]})]})}),u.jsxs("div",{className:"p-2 space-y-1",children:[u.jsxs("button",{onClick:()=>{a(!1),mo()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(Jl,{size:16}),"Refresh Data"]}),u.jsxs("button",{onClick:()=>{a(!1),e(be.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(ly,{size:16}),"Configuration"]}),u.jsx("div",{className:"border-t border-[#232328] my-2"}),u.jsxs("button",{onClick:async()=>{a(!1),await F()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(DV,{size:16}),"Sign Out"]})]})]})]})]})]})]}),u.jsxs("div",{className:`flex-1 pb-8 max-w-[1920px] mx-auto w-full ${t===be.AGENT?"px-6 md:px-24 lg:px-40 xl:px-64":"px-4 md:px-8 lg:px-12 xl:px-16"} ${[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT,be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t)?"flex flex-col h-full":""}`,children:[t!==be.AGENT&&$.isUnlocked&&u.jsxs("header",{className:"flex justify-between items-center mb-6 sticky top-0 z-40 bg-[#0f1015] pt-8 pb-4 -mx-4 px-4 md:px-0 md:-mx-0 transition-all shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsx("button",{onClick:()=>s(!0),className:"xl:hidden text-[#747580] hover:text-white transition-colors",children:u.jsx(BV,{size:24})}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsxs("div",{children:[u.jsxs("h2",{className:"text-xl font-semibold text-white tracking-tight",children:[t===be.DASHBOARD&&"Overview",t===be.VAULT&&"Vault",t===be.SCHEDULER&&"Automations",[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t)&&"Hyperliquid Dealer",[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)&&"Solana Dealer",t===be.CONFIGURATION&&"Configuration",t===be.HYPERLIQUID&&"Hyperliquid Trading",t===be.HISTORY&&"History",t===be.TOKEN_COSTS&&"Token Costs",[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD].includes(t)&&"Polymarket Dealer",t===be.POLYMARKET_CONFIG&&"Polymarket Config",t===be.POLYMARKET_PROMPT&&"Polymarket Strategy"]}),u.jsxs("p",{className:"text-[#747580] text-sm hidden sm:block",children:[t===be.DASHBOARD&&"Overview of your autonomous DeFi agent.",t===be.VAULT&&"Manage your secure local vault and assets.",t===be.SCHEDULER&&"Automate swaps, transfers and trading strategies.",[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t)&&"Autonomous trading engine (BETA).",[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)&&"Solana LP operations with Policy Engine.",t===be.CONFIGURATION&&"Configure trading parameters and risk management.",t===be.HYPERLIQUID&&"Trade on Hyperliquid Testnet.",t===be.HISTORY&&"Review past conversations.",t===be.TOKEN_COSTS&&"Monitor AI token consumption and costs.",[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD].includes(t)&&"Autonomous prediction market trading (BETA).",t===be.POLYMARKET_CONFIG&&"Configure Polymarket trading parameters.",t===be.POLYMARKET_PROMPT&&"Customize your Polymarket strategy."]})]})})]}),[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t)&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>e(be.DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[be.VAULT_DEALER,be.DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),u.jsx("button",{onClick:()=>e(be.DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),u.jsx("button",{onClick:()=>e(be.DEALER_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.DEALER_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),u.jsx("button",{onClick:()=>e(be.DEALER_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.DEALER_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t)&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>e(be.POLYMARKET_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),u.jsx("button",{onClick:()=>e(be.POLYMARKET_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.POLYMARKET_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),u.jsx("button",{onClick:()=>e(be.POLYMARKET_CONFIG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.POLYMARKET_CONFIG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Configuration"}),u.jsx("button",{onClick:()=>e(be.POLYMARKET_PROMPT),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.POLYMARKET_PROMPT?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Prompt"})]}),[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>e(be.SOLANA_DEALER_DASHBOARD),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD].includes(t)?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Dashboard"}),u.jsx("button",{onClick:()=>e(be.SOLANA_DEALER_THINKING),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.SOLANA_DEALER_THINKING?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Thinking"}),u.jsx("button",{onClick:()=>e(be.SOLANA_DEALER_POLICY),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.SOLANA_DEALER_POLICY?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Policy"}),u.jsx("button",{onClick:()=>e(be.SOLANA_DEALER_LOG),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${t===be.SOLANA_DEALER_LOG?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Audit Log"})]}),t===be.CONFIGURATION&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>w("providers"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${b==="providers"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"AI Providers"}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>{x(),w("user")},className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${b==="user"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"User Settings"}),g&&b==="providers"&&u.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-3 z-50 animate-fadeIn",children:[u.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2 w-0 h-0 border-l-[8px] border-l-transparent border-r-[8px] border-r-transparent border-b-[8px] border-b-[#E7FE55]"}),u.jsxs("div",{className:"bg-[#1a1b21] border border-[#E7FE55] rounded-lg p-4 shadow-lg shadow-[#E7FE55]/10 w-72",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"p-1.5 bg-[#E7FE55]/10 rounded-lg shrink-0",children:u.jsx(ly,{size:16,className:"text-[#E7FE55]"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"User Settings"}),u.jsx("p",{className:"text-xs text-[#a0a1a8] leading-relaxed",children:"Manage your account, configure Supabase connection, and delete your local vault data."})]})]}),u.jsx("button",{onClick:Cr=>{Cr.stopPropagation(),x()},className:"mt-3 w-full py-1.5 text-xs font-medium text-[#747580] hover:text-white transition-colors",children:"Got it"})]})]})]})]}),t===be.VAULT&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 bg-[#1a1b21] p-1 rounded border border-[#232328] absolute left-1/2 transform -translate-x-1/2",children:[u.jsx("button",{onClick:()=>N("main"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${k==="main"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Overview"}),u.jsx("button",{onClick:()=>N("solana"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${k==="solana"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Solana"}),u.jsx("button",{onClick:()=>N("hyperliquid"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${k==="hyperliquid"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Hyperliquid"}),u.jsx("button",{onClick:()=>N("polymarket"),className:`px-3 py-1.5 rounded text-[11px] font-medium uppercase tracking-[0.05em] transition-colors ${k==="polymarket"?"bg-[#E7FE55] text-black":"text-[#747580] hover:text-[#a0a1a8]"}`,children:"Polymarket"})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("button",{onClick:()=>c(!0),className:"p-2 rounded-lg hover:bg-[#1a1b21] transition-colors text-[#747580] hover:text-white",title:"Send Feedback",children:u.jsx(ET,{size:18})}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-[#1a1b21] transition-colors border border-transparent hover:border-[#232328]",title:(_==null?void 0:_.email)||"User",children:_!=null&&_.photoURL?u.jsx("img",{src:_.photoURL,alt:"User",className:"w-8 h-8 rounded-full border border-[#232328]"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold text-sm",children:((ml=(pl=_==null?void 0:_.email)==null?void 0:pl[0])==null?void 0:ml.toUpperCase())||"U"})}),o&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),u.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-[#14151a] border border-[#232328] rounded-lg shadow-xl z-50 overflow-hidden",children:[u.jsx("div",{className:"px-4 py-3 border-b border-[#232328]",children:u.jsxs("div",{className:"flex items-center gap-3",children:[_!=null&&_.photoURL?u.jsx("img",{src:_.photoURL,alt:"User",className:"w-10 h-10 rounded-full border border-[#232328]"}):u.jsx("div",{className:"w-10 h-10 rounded-full bg-[#E7FE55] flex items-center justify-center text-black font-semibold",children:((Ks=(ya=_==null?void 0:_.email)==null?void 0:ya[0])==null?void 0:Ks.toUpperCase())||"U"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-white text-sm font-medium truncate",children:(_==null?void 0:_.displayName)||"User"}),u.jsx("p",{className:"text-[#747580] text-xs truncate",children:_==null?void 0:_.email})]})]})}),u.jsxs("div",{className:"p-2 space-y-1",children:[u.jsxs("button",{onClick:()=>{a(!1),mo()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(Jl,{size:16}),"Refresh Data"]}),u.jsxs("button",{onClick:()=>{a(!1),e(be.CONFIGURATION)},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(ly,{size:16}),"Configuration"]}),u.jsx("div",{className:"border-t border-[#232328] my-2"}),u.jsxs("button",{onClick:async()=>{a(!1),await F()},className:"w-full flex items-center gap-3 px-3 py-2 text-[#a0a1a8] hover:text-white hover:bg-[#1a1b21] rounded-lg transition-colors text-sm",children:[u.jsx(DV,{size:16}),"Sign Out"]})]})]})]})]})]})]}),(()=>{const Cr=[be.VAULT,be.PRIVACY,be.TERMS];return!Re||$.isUnlocked||Cr.includes(t)?u.jsxs("div",{className:`animate-fade-in ${[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT,be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t)?"flex-1 min-h-0":""}`,children:[t===be.DASHBOARD&&u.jsx(lWe,{vault:$,connectOwnerWallet:de,disconnectOwnerWallet:ke,connectHLOwnerWallet:Ze,disconnectHLOwnerWallet:at,connectPMOwnerWallet:sn,disconnectPMOwnerWallet:ae,assetPrices:Kt,portfolioHistoryDaily:Ue,portfolioHistoryLongTerm:en,scheduledTasks:or,assetAllocationData:ut,activityFeed:pn,activityDisplayCount:Ct,setActivityDisplayCount:wn,refreshData:mo,onNewChat:Gs}),t===be.VAULT&&u.jsx(cWe,{vault:$,password:G,setPassword:V,withdrawAmount:U,setWithdrawAmount:A,withdrawNetwork:I,setWithdrawNetwork:j,isImporting:X,setIsImporting:ie,importKey:oe,setImportKey:Te,createVault:ye,unlockVault:Ke,requestAirdrop:je,handleWithdraw:Ve,handleWithdrawHL:me,handleWithdrawPM:Ne,importVault:We,addNotification:L,showBackupModal:q,showHLBackupModal:H,showPMBackupModal:Q,isImportingSolana:qe,setIsImportingSolana:it,isImportingHyperliquid:Lt,setIsImportingHyperliquid:Ie,isImportingPolymarket:Ge,setIsImportingPolymarket:Tt,solanaPassword:xt,setSolanaPassword:se,hyperliquidPassword:J,setHyperliquidPassword:Z,polymarketPassword:ue,setPolymarketPassword:Se,solanaImportKey:he,setSolanaImportKey:pe,hlImportKey:Je,setHLImportKey:Xe,pmImportKey:ot,setPMImportKey:Nt,createSolanaVault:wt,createHyperliquidVault:Rt,createPolymarketVault:rn,importSolanaVault:et,importHyperliquidVault:Ht,importPolymarketVault:Hn,setActiveTab:e,activeVaultTab:k,setActiveVaultTab:N,hasCompletedInitialSetup:O,setHasCompletedInitialSetup:D,connectOwnerWallet:de,disconnectOwnerWallet:ke,connectHLOwnerWallet:Ze,disconnectHLOwnerWallet:at,connectPMOwnerWallet:sn,disconnectPMOwnerWallet:ae}),t===be.AGENT&&u.jsx(Ont,{messages:tf,inputMessage:nf,setInputMessage:fl,handleSendMessage:hl,isAiProcessing:du,aiStatus:ma,scrollRef:ga,isVaultUnlocked:$.isUnlocked,password:G,setPassword:V,unlockVault:Ke,hasVault:!!($.publicKey||$.hlPublicKey),onNavigate:e,conversationId:Bo}),t===be.HISTORY&&u.jsx(P0t,{onSelectConversation:async gl=>{await fu(gl),e(be.AGENT)}}),t===be.SCHEDULER&&u.jsx(Lnt,{scheduledTasks:or,setScheduledTasks:br,addNotification:L}),[be.VAULT_DEALER,be.DEALER_DASHBOARD,be.DEALER_THINKING,be.DEALER_CONFIG,be.DEALER_PROMPT].includes(t)&&u.jsx(Edt,{vault:$,password:G,activeTab:t,setActiveTab:e}),t===be.CONFIGURATION&&u.jsx(vgt,{vault:$,password:G,addNotification:L,activeTab:b,setActiveTab:w}),t===be.HYPERLIQUID&&u.jsx(Sdt,{vault:$,connectHLOwnerWallet:Ze,refreshHLBalance:St,activityLog:pn}),t===be.TOKEN_COSTS&&u.jsx(wgt,{addNotification:L}),[be.POLYMARKET_DEALER,be.POLYMARKET_DASHBOARD,be.POLYMARKET_THINKING,be.POLYMARKET_CONFIG,be.POLYMARKET_PROMPT].includes(t)&&u.jsx(_gt,{vault:$,password:G,activeTab:t,setActiveTab:e}),[be.SOLANA_DEALER,be.SOLANA_DEALER_DASHBOARD,be.SOLANA_DEALER_THINKING,be.SOLANA_DEALER_POLICY,be.SOLANA_DEALER_LOG].includes(t)&&u.jsx(jgt,{activeTab:t,walletAddress:$.publicKey||void 0}),t===be.PRIVACY&&u.jsx(jge,{onBack:()=>e(be.DASHBOARD)}),t===be.TERMS&&u.jsx(Dge,{onBack:()=>e(be.DASHBOARD)})]}):null})()]}),t!==be.AGENT&&u.jsx(Bgt,{onNavigate:e})]}),u.jsx("div",{className:"fixed bottom-6 right-6 z-[60] space-y-2 pointer-events-none",children:n.map(Cr=>u.jsxs("div",{className:"bg-[#14151a] border border-[#232328] text-white px-4 py-3 rounded shadow-xl flex items-center gap-3 animate-slide-up pointer-events-auto max-w-sm",children:[u.jsx("div",{className:"w-1.5 h-1.5 bg-[#E7FE55] rounded-full"}),u.jsx("span",{className:"text-sm font-medium",children:Cr.message}),u.jsx("button",{onClick:()=>r(xa=>xa.filter(gl=>gl.id!==Cr.id)),className:"text-[#747580] hover:text-white ml-2",children:u.jsx(Ex,{size:14})})]},Cr.id))}),q&&u.jsx(Adt,{backupKey:te,setBackupKey:Y,setShowBackupModal:K,addNotification:L}),H&&u.jsx(Tdt,{backupKey:P,setBackupKey:W,setShowBackupModal:M,addNotification:L}),Q&&u.jsx(kdt,{backupKey:fe,setBackupKey:_e,setShowBackupModal:ee,addNotification:L}),u.jsx(Dgt,{userId:(_==null?void 0:_.uid)||null,onAccept:()=>e(be.VAULT)}),u.jsx(C0t,{isOpen:l,onClose:()=>c(!1)})]})}function Fgt(){const{signInWithGoogle:t,signInWithGitHub:e,signInWithDiscord:n,signInWithEthereum:r,signInWithSolana:i,signInWithEmail:s,signUp:o}=Xw(),[a,l]=S.useState(""),[c,d]=S.useState(""),[h,m]=S.useState(!1),[g,v]=S.useState(!1),[x,b]=S.useState(null),[w,k]=S.useState(!1),[N,O]=S.useState(null),D=async z=>{b(null),O(z);try{z==="google"?await t():z==="github"?await e():z==="discord"&&await n()}catch(L){b(L.message||`Failed to sign in with ${z}`)}finally{O(null)}},_=async z=>{b(null),O(z);try{z==="ethereum"?await r():await i()}catch(L){b(L.message||`Failed to sign in with ${z}`)}finally{O(null)}},F=async z=>{z.preventDefault(),b(null),k(!0);try{h?await o(a,c):await s(a,c)}catch(L){const $=L.code||"";$.includes("user-not-found")?b("No account found with this email"):$.includes("wrong-password")?b("Incorrect password"):$.includes("email-already-in-use")?b("An account already exists with this email"):$.includes("weak-password")?b("Password should be at least 6 characters"):$.includes("invalid-email")?b("Invalid email address"):b(L.message||"Authentication failed")}finally{k(!1)}};return u.jsx("div",{className:"min-h-screen bg-[#0f1015] flex items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-[#E7FE55] to-[#c8e044] rounded-2xl mb-4 shadow-lg shadow-[#E7FE55]/20",children:u.jsxs("svg",{className:"w-8 h-8 text-black",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),u.jsx("path",{d:"M12 8v4"}),u.jsx("path",{d:"M12 16h.01"})]})}),u.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"AutonomousVault"}),u.jsx("p",{className:"text-[#747580] text-sm",children:"Multi-Chain DeFi Agent"})]}),u.jsxs("div",{className:"bg-[#14151a] border border-[#232328] rounded-xl p-6 shadow-xl",children:[u.jsx("h2",{className:"text-lg font-semibold text-white mb-6 text-center",children:h?"Create Account":"Welcome Back"}),x&&u.jsxs("div",{className:"flex items-center gap-2 bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg mb-4",children:[u.jsx(V1,{size:16}),u.jsx("span",{className:"text-sm",children:x})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[u.jsxs("button",{onClick:()=>D("google"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-white hover:bg-gray-100 text-gray-800 font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),N==="google"?"...":"Google"]}),u.jsxs("button",{onClick:()=>D("github"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-[#24292e] hover:bg-[#2d3339] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0112 6.844c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})}),N==="github"?"...":"GitHub"]}),u.jsxs("button",{onClick:()=>D("discord"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-[#5865F2] hover:bg-[#4752c4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[u.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),N==="discord"?"...":"Discord"]}),u.jsxs("button",{onClick:()=>_("ethereum"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-[#627EEA] hover:bg-[#5470d4] text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Ethereum wallet (MetaMask, etc.)",children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:[u.jsx("path",{d:"M12 1.5l-9 15.5L12 22l9-5-9-15.5zM12 22v-5l9-5-9 10z",opacity:"0.6"}),u.jsx("path",{d:"M12 1.5v8l9 5.5-9-13.5zM12 1.5L3 17l9-7.5V1.5z"})]}),N==="ethereum"?"...":"ETH"]}),u.jsxs("button",{onClick:()=>_("solana"),disabled:N!==null,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-[#9945FF] to-[#14F195] hover:opacity-90 text-white font-medium py-3 px-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Sign in with Solana wallet (Phantom, etc.)",children:[u.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M4.5 17.88l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28l-2.12 2.12a.75.75 0 01-.53.22H4.5a.75.75 0 01-.53-1.28h.03zM4.5 5.88A.75.75 0 015.03 4.6l2.12-2.12a.75.75 0 01.53-.22H19.5a.75.75 0 01.53 1.28L17.91 5.66a.75.75 0 01-.53.22H4.5zM19.5 11.88l-2.12-2.12a.75.75 0 00-.53-.22H4.5a.75.75 0 00-.53 1.28l2.12 2.12a.75.75 0 00.53.22H19.5a.75.75 0 00.53-1.28z"})}),N==="solana"?"...":"SOL"]})]}),u.jsxs("div",{className:"flex items-center gap-4 my-6",children:[u.jsx("div",{className:"flex-1 h-px bg-[#232328]"}),u.jsx("span",{className:"text-[#5a5b63] text-xs uppercase tracking-wider",children:"or continue with email"}),u.jsx("div",{className:"flex-1 h-px bg-[#232328]"})]}),u.jsxs("form",{onSubmit:F,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Email"}),u.jsxs("div",{className:"relative",children:[u.jsx(oke,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),u.jsx("input",{type:"email",value:a,onChange:z=>l(z.target.value),placeholder:"you@example.com",required:!0,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-4 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[#a0a1a8] text-sm mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(Vl,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#5a5b63]"}),u.jsx("input",{type:g?"text":"password",value:c,onChange:z=>d(z.target.value),placeholder:"",required:!0,minLength:6,className:"w-full bg-[#0f1015] border border-[#232328] rounded-lg py-3 pl-10 pr-12 text-white placeholder-[#5a5b63] focus:outline-none focus:border-[#E7FE55] focus:ring-1 focus:ring-[#E7FE55]/20 transition-colors"}),u.jsx("button",{type:"button",onClick:()=>v(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#5a5b63] hover:text-[#a0a1a8] transition-colors",children:g?u.jsx(DN,{size:16}):u.jsx(zD,{size:16})})]})]}),u.jsx("button",{type:"submit",disabled:w,className:"w-full bg-[#E7FE55] hover:bg-[#f0ff7a] text-black font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Loading...":h?"Create Account":"Sign In"})]}),u.jsxs("p",{className:"text-center text-[#747580] text-sm mt-6",children:[h?"Already have an account?":"Don't have an account?"," ",u.jsx("button",{onClick:()=>{m(!h),b(null)},className:"text-[#E7FE55] hover:underline font-medium",children:h?"Sign In":"Sign Up"})]})]}),u.jsxs("p",{className:"text-center text-[#5a5b63] text-xs mt-6",children:["By continuing, you agree to our"," ",u.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Terms of Use"})," ","and"," ",u.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-[#E7FE55] hover:underline",children:"Privacy Policy"})]})]})})}function $gt({children:t}){const{user:e,loading:n}=Xw();return n?u.jsx("div",{className:"h-screen w-screen bg-[#0f1015] flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsxs("div",{className:"relative w-12 h-12",children:[u.jsx("div",{className:"absolute inset-0 border-2 border-[#232328] rounded-full"}),u.jsx("div",{className:"absolute inset-0 border-2 border-transparent border-t-[#E7FE55] rounded-full animate-spin"})]}),u.jsx("p",{className:"text-[#747580] text-sm",children:"Loading..."})]})}):e?u.jsx(u.Fragment,{children:t}):u.jsx(Fgt,{})}Py.initializeProductionSecurity();const Bge=document.getElementById("root");if(!Bge)throw new Error("Failed to find the root element");const wO=mve.createRoot(Bge),nte=window.location.pathname;nte==="/terms"?wO.render(u.jsx(Ms.StrictMode,{children:u.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:u.jsx(Dge,{onBack:()=>window.location.href="/"})})})):nte==="/privacy"?wO.render(u.jsx(Ms.StrictMode,{children:u.jsx("div",{className:"min-h-screen bg-[#0f1015] text-[#e4e5e9]",children:u.jsx(jge,{onBack:()=>window.location.href="/"})})})):wO.render(u.jsx(Ms.StrictMode,{children:u.jsx(uwe,{children:u.jsx($gt,{children:u.jsx(Ugt,{})})})}));export{Dl as $,Iee as A,un as B,Hmt as C,_re as D,Sd as E,zr as F,uy as G,Hke as H,kT as I,NM as J,fa as K,we as L,$t as M,_M as N,zse as O,vt as P,J5e as Q,tt as R,Ae as S,Vi as T,nPe as U,B_e as V,Lc as W,Td as X,Rs as Y,T_e as Z,Zn as _,Tee as a,Zke as a$,i0 as a0,gs as a1,Z1 as a2,u8 as a3,my as a4,cv as a5,j_e as a6,Wse as a7,jr as a8,It as a9,Eh as aA,m_e as aB,NT as aC,Bm as aD,Rc as aE,ZN as aF,rw as aG,E1 as aH,jH as aI,WI as aJ,lE as aK,$5e as aL,YCe as aM,Rx as aN,i_e as aO,XN as aP,xs as aQ,Sx as aR,lo as aS,$c as aT,Nm as aU,z5e as aV,Ose as aW,tw as aX,$s as aY,jm as aZ,jse as a_,nn as aa,b8 as ab,D_e as ac,vr as ad,z_e as ae,H_e as af,Fm as ag,LT as ah,H5e as ai,cd as aj,W5e as ak,K5e as al,g8 as am,Dse as an,eC as ao,MT as ap,V5e as aq,No as ar,tyt as as,Ic as at,m8 as au,Rre as av,Vu as aw,UH as ax,HH as ay,sNe as az,Ymt as b,DM as b0,Sh as b1,V_e as b2,K1 as b3,lH as b4,kre as b5,Nre as b6,$h as b7,Xie as b8,Ygt as b9,Qie as bA,vse as bB,kd as bC,iyt as bD,Kie as bE,UN as bF,YD as bG,tq as bH,ZH as bI,oyt as bJ,Vp as bK,TM as bL,Wgt as bM,fNe as bN,qN as bO,Wi as bP,qgt as bQ,Ad as bR,iE as bS,qke as bT,Ggt as bU,hNe as bV,syt as bW,ayt as bX,lyt as bY,Tre as bZ,aE as ba,ew as bb,xr as bc,Wke as bd,Yke as be,sE as bf,nq as bg,dIe as bh,uIe as bi,tR as bj,v5e as bk,Ire as bl,Jke as bm,Fc as bn,soe as bo,ioe as bp,x5e as bq,Kgt as br,zre as bs,AT as bt,cyt as bu,ys as bv,ryt as bw,nyt as bx,uyt as by,FN as bz,Yx as c,aee as d,Aft as e,Dyt as f,bs as g,Za as h,P0e as i,iv as j,Wn as k,zh as l,sv as m,av as n,sl as o,Fee as p,i8 as q,md as r,ov as s,ve as t,V0e as u,ct as v,Ln as w,Et as x,bi as y,vn as z};
